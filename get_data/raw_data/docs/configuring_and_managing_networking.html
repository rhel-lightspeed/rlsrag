<!DOCTYPE html><html  data-capo=""><head><script type="importmap">
  {
    "imports": {
      "@patternfly/elements/": "/scripts/v1/@patternfly/elements/",
      "@patternfly/pfe-clipboard/": "/scripts/v1/@patternfly/pfe-clipboard/",
      "@rhds/elements/": "/scripts/v1/@rhds/elements/elements/",
      "@cpelements/elements/": "/scripts/v1/@cpelements/elements/elements/"
    },
    "scopes": {
      "/": {
        "@floating-ui/core": "/scripts/v1/@floating-ui/core/dist/floating-ui.core.mjs",
        "@floating-ui/dom": "/scripts/v1/@floating-ui/dom/dist/floating-ui.dom.mjs",
        "@floating-ui/utils": "/scripts/v1/@floating-ui/utils/dist/floating-ui.utils.mjs",
        "@floating-ui/utils/dom": "/scripts/v1/@floating-ui/utils/dom/dist/floating-ui.utils.dom.mjs",
        "@lit/reactive-element": "/scripts/v1/@lit/reactive-element/reactive-element.js",
        "@lit/reactive-element/decorators/": "/scripts/v1/@lit/reactive-element/decorators/",
        "@patternfly/pfe-core": "/scripts/v1/@patternfly/pfe-core/core.js",
        "@patternfly/pfe-core/": "/scripts/v1/@patternfly/pfe-core/",
        "@rhds/tokens/media.js": "/scripts/v1/@rhds/tokens/js/media.js",
        "lit": "/scripts/v1/lit/index.js",
        "lit-element/lit-element.js": "/scripts/v1/lit-element/lit-element.js",
        "lit-html": "/scripts/v1/lit-html/lit-html.js",
        "lit-html/": "/scripts/v1/lit-html/",
        "lit/": "/scripts/v1/lit/",
        "tslib": "/scripts/v1/tslib/tslib.es6.mjs",
        "@cpelements/rh-table/dist/rh-table.js": "/scripts/v1/@cpelements/rh-table/dist/rh-table.js"
      }
    }
  }
</script><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Configuring and managing networking | Red Hat Product Documentation</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<script type="text/javascript" id="trustarc" src="//static.redhat.com/libs/redhat/marketing/latest/trustarc/trustarc.js"></script>
<script src="//www.redhat.com/dtm.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:wght@400;500;700&family=Red+Hat+Text:wght@400;500;700&display=swap">
<link rel="stylesheet" href="/styles/rh-table--lightdom.min.css">
<style>.section .titlepage{gap:.75rem}.section .titlepage,div.edit{align-items:center;display:flex}div.edit{font-size:.9rem;margin-bottom:8px}div.edit>a{align-items:center;display:flex}.edit pf-icon{margin-right:4px}</style>
<style>#error[data-v-df31ff14]{align-items:center;display:flex;flex-direction:column;justify-content:center;min-height:80vh}h1[data-v-df31ff14]{font-size:calc(var(--rh-font-size-body-text-md, 1rem)*4);font-weight:700;margin-bottom:0}h1[data-v-df31ff14],h1 span[data-v-df31ff14]{line-height:var(--rh-line-height-heading,1.3)}h1 span[data-v-df31ff14]{color:var(--rh-color-text-brand-on-light,#e00);display:block;text-transform:uppercase}h1 span[data-v-df31ff14],p[data-v-df31ff14]{font-size:var(--rh-font-size-body-text-lg,1.125rem)}aside[data-v-df31ff14]{align-items:center;background:var(--rh-color-surface-lightest,#fff);border:var(--rh-border-width-sm,1px) solid var(--rh-color-border-subtle-on-light,#c7c7c7);border-radius:var(--rh-border-radius-default,3px);border-top:calc(var(--rh-border-width-md, 2px)*2) solid var(--rh-color-text-brand-on-light,#e00);box-shadow:var(--rh-box-shadow-sm,0 2px 4px 0 hsla(0,0%,8%,.2));display:flex;flex-direction:column;justify-content:space-between;margin-top:var(--rh-space-2xl,32px);padding:var(--rh-space-xl,24px)}aside[data-v-df31ff14],aside>div[data-v-df31ff14]{width:100%}.text-container[data-v-df31ff14]{margin:auto;max-width:442px;text-align:center}.desktop[data-v-df31ff14]{display:none}.sr-only[data-v-df31ff14]{height:1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);border:0;clip-path:inset(50%);white-space:nowrap}form[data-v-df31ff14]{display:flex}button[data-v-df31ff14],input[data-v-df31ff14]{border:1px solid var(--rh-color-black-500,#8a8d90);box-sizing:border-box;height:40px}input[data-v-df31ff14]{border-right:none;flex:1;font-family:var(--rh-font-family-heading,RedHatDisplay,"Red Hat Display","Noto Sans Arabic","Noto Sans Hebrew","Noto Sans JP","Noto Sans KR","Noto Sans Malayalam","Noto Sans SC","Noto Sans TC","Noto Sans Thai",Helvetica,Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);padding-left:var(--rh-space-md,8px);width:100%}button[data-v-df31ff14]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent;border-left:none;display:flex;width:var(--rh-size-icon-04,40px)}button[data-v-df31ff14]:before{background:var(--rh-context-light-color-text-link,#06c);content:"";cursor:pointer;display:block;height:28px;margin:auto;width:28px}.search-icon[data-v-df31ff14]{margin:auto}ul[data-v-df31ff14]{max-width:275px;padding:0}ul li[data-v-df31ff14]{display:inline-block;list-style:none;margin-right:var(--rh-space-xl,24px);padding:var(--rh-space-xs,4px) 0}ul li a[data-v-df31ff14]{color:var(--rh-context-light-color-text-link,#06c);text-decoration:none}@media (min-width:992px){aside[data-v-df31ff14]{flex-direction:row}.mobile[data-v-df31ff14]{display:none}.desktop[data-v-df31ff14]{display:block}input[data-v-df31ff14]{width:auto}}</style>
<style>@keyframes fade-in{0%{opacity:0;visibility:hidden}1%{visibility:visible}to{opacity:1;visibility:visible}}@media (min-height:48em){.rhdocs{--rh-table--maxHeight:calc(100vh - 12.5rem)}}*,.rhdocs *,.rhdocs :after,.rhdocs :before,:after,:before{box-sizing:border-box}.rhdocs img,.rhdocs object,.rhdocs svg,img,object,svg{display:inline-block;max-width:100%;vertical-align:middle}.rhdocs hr{border:0;border-top:.0625rem solid #d2d2d2;clear:both;margin:1rem 0}.rhdocs a{color:#06c;text-decoration:underline}.rhdocs a:focus,.rhdocs a:hover{color:#036}.rhdocs a.anchor-heading{color:#151515;cursor:pointer;text-decoration:none;word-break:break-all}.rhdocs p{margin:1.49963rem 0}.rhdocs li>p{margin:0}.rhdocs h1,.rhdocs h2,.rhdocs h3,.rhdocs h4,.rhdocs h5,.rhdocs h6{font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-weight:500;margin:0 0 .625rem}.rhdocs h1{font-size:2.25rem;margin:2rem 0}.rhdocs h2{font-size:1.625rem;margin:2rem 0}.rhdocs h3{font-size:1.5rem;font-weight:400}.rhdocs h4,.rhdocs h5{font-size:1.25rem}.rhdocs h5{font-weight:400}.rhdocs h6{font-size:1.125rem;font-weight:500;line-height:1.6667}.rhdocs ol,.rhdocs ul{margin:1rem 0;padding:0 0 0 1.5rem}.rhdocs ol ::marker,.rhdocs ul ::marker{font:inherit}.rhdocs li{margin:0 0 .5em;padding:0}.rhdocs li>p{margin:.5rem 0}.rhdocs li>ol,.rhdocs li>ul{margin:0}.rhdocs dl dd{margin:.5rem 0 .5rem 1rem}.rhdocs dl dd>p{margin:.5rem 0}.rhdocs .informaltable,.rhdocs .table-contents,.rhdocs .table-wrapper{max-height:var(--rh-table--maxHeight);overflow:auto}.rhdocs table{border:0;font-size:1rem;line-height:1.6667;table-layout:fixed}.rhdocs table caption{color:#585858;margin-bottom:.5rem;margin-top:.5rem;text-align:left}.rhdocs table td,.rhdocs table th{border:0;border-bottom:.0625rem solid #d2d2d2;border-bottom:.0625rem solid var(--pfe-table--Border,#d2d2d2);padding:.5em 1rem}.rhdocs table td.halign-left,.rhdocs table th.halign-left{text-align:left}.rhdocs table td.halign-center,.rhdocs table th.halign-center,table td.halign-center,table th.halign-center{text-align:center}.rhdocs table td.halign-right,.rhdocs table th.halign-right{text-align:right}.rhdocs table td.valign-top,.rhdocs table th.valign-top{vertical-align:top}.rhdocs table td.valign-middle,.rhdocs table th.valign-middle{vertical-align:middle}.rhdocs table td.valign-bottom,.rhdocs table th.valign-bottom{vertical-align:bottom}.rhdocs table thead td,.rhdocs table thead th{background:#f5f5f5;font-weight:600}.rhdocs rh-table table,.rhdocs rh-table.rh-table--expanded-vertically{max-height:-moz-max-content;max-height:max-content}.rhdocs pre.nowrap{overflow:auto;overflow-wrap:normal;white-space:pre;word-break:normal}.rhdocs .codeblock__wrapper pre{background:transparent}.rh-table--full-screen code,.rhdocs .content--md code,.rhdocs .content--sm code,.rhdocs .rh-table--full-screen code{overflow-wrap:normal;word-break:normal}.rhdocs[class] pre code,[class] pre code{background:inherit;color:inherit;font-family:inherit;font-size:inherit;font-weight:inherit;line-height:inherit;padding:0}.rhdocs .keycap,.rhdocs kbd{background-color:#eee;background-image:linear-gradient(180deg,#ddd,#eee,#fff);border-radius:.1875rem;box-shadow:0 -.0625rem 0 0 #fff,0 .0625rem 0 .1875rem #aaa;font-family:RedHatMono,Red Hat Mono,Consolas,monospace;font-size:90%;font-weight:400;margin:0 .25rem;padding:.125rem .375rem}.keycap strong,.rhdocs .keycap strong{font-weight:inherit}.rhdocs kbd.keyseq,kbd.keyseq{background:transparent;border:0;box-shadow:none;padding:0}.rhdocs kbd.keyseq kbd,kbd.keyseq kbd{display:inline-block;margin:0 .375rem}.rhdocs kbd.keyseq kbd:first-child,kbd.keyseq kbd:first-child{margin-left:0}.rhdocs b.button{font-size:90%;font-weight:700;padding:.1875rem}.rhdocs b.button:before{content:"["}.rhdocs b.button:after{content:"]"}html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}.rhdocs audio,.rhdocs canvas,.rhdocs progress,.rhdocs video{display:inline-block;vertical-align:baseline}.rhdocs audio:not([controls]){display:none;height:0}[hidden],template{display:none}.rhdocs a{background:transparent}.rhdocs a:active,.rhdocs a:hover{outline:0}.rhdocs a.anchor-heading:hover:before{color:#151515;content:"#";margin-left:-1.6rem;position:absolute}.rhdocs a.anchor-heading:focus-visible{color:#151515}@media screen and (max-width:990px){.rhdocs a.anchor-heading:hover:before{font-size:16px;margin-left:-1rem;padding-top:8px}.rhdocs h1 a.anchor-heading:hover:before{padding-top:12px}.rhdocs h4 a.anchor-heading:hover:before,.rhdocs h5 a.anchor-heading:hover:before{padding-top:4px}.rhdocs h6 a.anchor-heading:hover:before{padding-top:2px}}.rhdocs abbr[title]{border-bottom:.0625rem dotted}.rhdocs dfn{font-style:italic}.rhdocs h1{font-size:2em;margin:.67em 0}.rhdocs mark{background:#ff0;color:#000}.rhdocs small{font-size:80%}.rhdocs sub,.rhdocs sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}.rhdocs sup{top:-.5em}.rhdocs sub{bottom:-.25em}.rhdocs img{border:0}.rhdocs svg:not(:root){overflow:hidden}.rhdocs figure{margin:1em 2.5rem}.rhdocs hr{box-sizing:content-box;height:0}.rhdocs code,.rhdocs kbd,.rhdocs pre,.rhdocs samp{font-family:monospace,monospace;font-size:1em}.rhdocs button,.rhdocs optgroup,.rhdocs select,.rhdocs textarea,.rhdocsinput{color:inherit;font:inherit;margin:0}.rhdocs button.copy-link-btn{background:none;border:2px solid #fff;font:1px Red Hat Text}.rhdocs button.copy-link-btn:hover{border-bottom:2px solid #06c}.rhdocs button.copy-link-btn .link-icon{padding-bottom:4px}.rhdocs button{overflow:visible}.rhdocs button,.rhdocs select{text-transform:none}.rhdocs button,.rhdocs html input[type=button],.rhdocs input[type=reset],.rhdocs input[type=submit]{-moz-appearance:button;appearance:button;-webkit-appearance:button;cursor:pointer}.rhdocs button[disabled],.rhdocs html input[disabled]{cursor:default}.rhdocs button::-moz-focus-inner,.rhdocs input::-moz-focus-inner{border:0;padding:0}.rhdocs input{line-height:normal}.rhdocs input[type=checkbox],.rhdocs input[type=radio]{box-sizing:border-box;padding:0}.rhdocs input[type=number]::-webkit-inner-spin-button,.rhdocs input[type=number]::-webkit-outer-spin-button{height:auto}.rhdocs input[type=search]{-moz-appearance:textfield;appearance:textfield;-webkit-appearance:textfield;box-sizing:content-box}.rhdocs input[type=search]::-webkit-search-cancel-button,.rhdocs input[type=search]::-webkit-search-decoration{-webkit-appearance:none}.rhdocs fieldset{border:.0625rem solid silver;margin:0 .125rem;padding:.35em .625em .75em}.rhdocs legend{border:0;padding:0}.rhdocs textarea{overflow:auto}.rhdocs optgroup{font-weight:700}.rhdocs table{border-collapse:collapse;border-spacing:0}.rhdocs td,.rhdocs th{padding:0}.rhdocs ._additional-resources[class][class][id]:last-child{margin-top:-2rem}.rhdocs ._additional-resources[class][class]:only-child{grid-column:1/-1}._additional-resources[class][class] .additional-resources__heading,._additional-resources[class][class] .heading,._additional-resources[class][class] h1,._additional-resources[class][class] h2,._additional-resources[class][class] h3,._additional-resources[class][class] h4,._additional-resources[class][class] h5,._additional-resources[class][class] h6,._additional-resources[class][class] p.title{display:block;font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-size:1.125rem;font-weight:700;line-height:1.5rem;margin:0 0 .5rem;padding:0;text-transform:uppercase}._additional-resources[class][class] ul{border:0;list-style:none;margin:0;padding:0;position:relative}.related-topic-content__wrapper ._additional-resources[class][class] ul{display:block}._additional-resources[class][class] ul:after{background-color:#fff;bottom:0;content:"";display:block;height:.125rem;position:absolute;width:100%}._additional-resources[class][class] li{border-bottom:.0625rem solid #d2d2d2;box-sizing:content-box;margin:0;padding:1rem 1.5rem 1rem 0;-moz-column-break-inside:avoid;break-inside:avoid}._additional-resources[class][class] li:only-child{grid-column:1/-1}._additional-resources[class][class] li:last-child{border:0}@media (min-width:1100px){._additional-resources[class][class] li:last-child{border-bottom:.0625rem solid #d2d2d2}}._additional-resources[class][class] li p:only-child{margin:0;padding:0}._additional-resources[class][class] li a{text-decoration:none}._additional-resources[class][class] li a:focus,._additional-resources[class][class] li a:hover{text-decoration:underline}.rhdocs table .admonitionblock>div:nth-child(2),.rhdocs table .caution>div:nth-child(2),.rhdocs table .important>div:nth-child(2),.rhdocs table .note>div:nth-child(2),.rhdocs table .tip>div:nth-child(2),.rhdocs table .warning>div:nth-child(2){margin:.5rem 0}.rhdocs table .admonitionblock>div:nth-child(2)>:first-child,.rhdocs table .caution>div:nth-child(2)>:first-child,.rhdocs table .important>div:nth-child(2)>:first-child,.rhdocs table .note>div:nth-child(2)>:first-child,.rhdocs table .tip>div:nth-child(2)>:first-child,.rhdocs table .warning>div:nth-child(2)>:first-child{margin-top:0}.rhdocs table .admonitionblock>div:nth-child(2)>:last-child,.rhdocs table .caution>div:nth-child(2)>:last-child,.rhdocs table .important>div:nth-child(2)>:last-child,.rhdocs table .note>div:nth-child(2)>:last-child,.rhdocs table .tip>div:nth-child(2)>:last-child,.rhdocs table .warning>div:nth-child(2)>:last-child{margin-bottom:0}.rhdocs .codeblock__wrapper+.codeblock__wrapper,.rhdocs pre+pre,.rhdocs pre[class]+pre[class]{margin-top:2rem}.rhdocs .codeblock__wrapper{background:#f8f8f8;overflow:visible;position:relative;transform:translate(0);z-index:0}.codeblock__wrapper:before{background-repeat:no-repeat;background-size:6.25rem 100%;bottom:var(--scrollbar__height,1px);content:"";display:block;height:7.125rem;max-height:100%;max-height:calc(100% - var(--scrollbar__height, 2px));position:absolute;right:var(--scrollbar__width,6px);top:.0625rem;width:4.0625rem;z-index:1}.rhdocs .codeblock__inner-wrapper,.rhdocs pre{max-height:calc(100vh - 6.25rem)}@media (min-height:48em){.rhdocs .codeblock__inner-wrapper,.rhdocs pre{max-height:calc(100vh - 12.5rem)}}.rhdocs .codeblock__inner-wrapper{display:grid;grid-template-columns:1fr 4.375rem}.rhdocs .codeblock__wrapper--expanded .codeblock__inner-wrapper{max-height:-moz-max-content;max-height:max-content}.codeblock__copy span{display:block;height:0;position:absolute;visibility:hidden;width:0}.codeblock__copy:focus{outline:.0625rem dashed currentcolor}.codeblock__copy svg#icon--copy{height:1rem;width:1rem}.codeblock__expand{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#f0efef;border:0;cursor:pointer;height:1.75rem;left:calc(100% - 2.75rem - var(--scrollbar__width, 0px));position:absolute;text-indent:-9999em;top:3.25rem;width:1.75rem;z-index:2}.codeblock__expand:before{background:#6a6e73;content:"";height:100%;left:0;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512'%3E%3C!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc.--%3E%3Cpath d='M182.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l41.4-41.4v293.4l-41.4-41.3c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 402.7V109.3l41.4 41.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-96-96z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512'%3E%3C!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc.--%3E%3Cpath d='M182.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l41.4-41.4v293.4l-41.4-41.3c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 402.7V109.3l41.4 41.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-96-96z'/%3E%3C/svg%3E");-webkit-mask-position:center center;mask-position:center center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:auto 1rem;mask-size:auto 1rem;position:absolute;top:0;width:100%}.codeblock__wrapper--expanded .codeblock__expand{background:#2b9af3}.codeblock__wrapper--expanded .codeblock__expand:before{background:#fff}.codeblock__expand:focus:before,.codeblock__expand:hover:before{background:#06c}.codeblock__wrapper--expanded .codeblock__expand:focus:before,.codeblock__wrapper--expanded .codeblock__expand:hover:before{background:#fff}.codeblock__expand:focus{outline:.0625rem dashed currentcolor}.rhdocs .calloutlist>ol,.rhdocs .colist>ol{counter-reset:colist;list-style:none;margin:1rem 0 2rem;padding:0}.rhdocs .calloutlist>ol>li,.rhdocs .colist>ol>li{counter-increment:colist;font-size:1rem;margin:.5rem 0;padding-left:1.75rem;position:relative}.rhdocs .calloutlist>ol>li .colist-num,.rhdocs .colist>ol>li .colist-num{display:none}.calloutlist>ol>li:before,.colist>ol>li:before{content:counter(colist);left:0;position:absolute;top:.1875rem}.calloutlist dt{clear:left;float:left;margin:0;padding:0 .5rem 0 0}.included-in-guides[class],.included-in-guides[class][id]:last-child{background:#fff;border:.0625rem solid #d2d2d2;border-radius:.1875rem;margin:2em 0 4em;padding:2rem 2rem 1rem}.included-in-guides[class][id]:last-child{margin-top:-2rem}.included-in-guides[class]:only-child{grid-column:1/-1}.included-in-guides[class] .additional-resources__heading,.included-in-guides[class] .heading,.included-in-guides[class] h1,.included-in-guides[class] h2,.included-in-guides[class] h3,.included-in-guides[class] h4,.included-in-guides[class] h5,.included-in-guides[class] h6,.included-in-guides[class] p.title{display:block;font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-size:1.125rem;font-weight:700;line-height:1.5rem;margin:0 0 .5rem;padding:0;text-transform:uppercase}.included-in-guides[class] ul{border:0;list-style:none;margin:0;padding:0;position:relative}.related-topic-content__wrapper .included-in-guides[class] ul{display:block}.included-in-guides[class] ul:after{background-color:#fff;bottom:0;content:"";display:block;height:.125rem;position:absolute;width:100%}.included-in-guides[class] li{border-bottom:.0625rem solid #d2d2d2;box-sizing:content-box;margin:0;padding:1rem 1.5rem 1rem 0;-moz-column-break-inside:avoid;break-inside:avoid}.included-in-guides[class] li:only-child{grid-column:1/-1}.included-in-guides[class] li:last-child{border:0}@media (min-width:1100px){.included-in-guides[class] li:last-child{border-bottom:.0625rem solid #d2d2d2}}.included-in-guides[class] li p:only-child{margin:0;padding:0}.included-in-guides[class] li a{text-decoration:none}.included-in-guides[class] li a:focus,.included-in-guides[class] li a:hover{text-decoration:underline}.menuseq{display:inline-flex;overflow:hidden;text-indent:-9999em}.menuseq .menu,.menuseq .menuitem,.menuseq .submenu{display:block;position:relative;text-indent:0}.menuseq .menu+.menu:before,.menuseq .menu+.menuitem:before,.menuseq .menu+.submenu:before,.menuseq .menuitem+.menu:before,.menuseq .menuitem+.menuitem:before,.menuseq .menuitem+.submenu:before,.menuseq .submenu+.menu:before,.menuseq .submenu+.menuitem:before,.menuseq .submenu+.submenu:before{content:">";display:inline-block;font-weight:700;padding:0 .25em}.related-topic-content__wrapper{margin:2em 0}.related-topic-content__wrapper--for-guide{margin-bottom:-2.5rem;padding-bottom:.0625rem;position:relative;z-index:1}.related-topic-content__wrapper--for-guide:before{background:#f0f0f0;content:"";display:block;height:100%;left:-3rem;position:absolute;right:-4.5rem;top:0;width:auto;z-index:-1}@media (min-width:1100px){.related-topic-content__wrapper--for-guide:before{left:-2.5rem;right:-3.625rem}}.related-topic-content__wrapper--for-guide summary{padding:1em 2em 1em 2.1875rem}@media (min-width:950px){.related-topic-content__inner-wrapper{display:grid;gap:2em;grid-template-columns:repeat(2,minmax(0,1fr))}}.local-render .rhdocs-content{margin:0 auto}.rhdocs cp-documentation{display:block;padding-bottom:2.5rem}.rhdocs cp-documentation.PFElement,.rhdocs cp-documentation[pfelement]{padding:0}rh-table{display:block}::-webkit-scrollbar,:host .rhdocs ::-webkit-scrollbar{height:.625rem;width:.625rem}::-webkit-scrollbar,::-webkit-scrollbar-track,:host .rhdocs ::-webkit-scrollbar,:host .rhdocs ::-webkit-scrollbar-track{background-color:#d6d6d6}::-webkit-scrollbar-thumb,:host .rhdocs ::-webkit-scrollbar-thumb{background-color:#8e8e8e}*,:host .rhdocs *{scrollbar-color:#8e8e8e #d6d6d6}.rhdocs p:empty,p:empty{display:none}.rhdocs[class] h1 code,.rhdocs[class] h2 code,.rhdocs[class] h3 code,.rhdocs[class] h4 code,.rhdocs[class] h5 code,.rhdocs[class] h6 code,[class] h1 code,[class] h2 code,[class] h3 code,[class] h4 code,[class] h5 code,[class] h6 code{background:transparent;border:0;color:inherit;font:inherit;margin:0;padding:0}.pane-page-title h1,.rhdocs__header__primary-wrapper h1{font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-size:2.25rem;line-height:1.333}.rhdocs details[class]{list-style:none;margin:1rem 0 3rem;padding:0}.rhdocs-toc[class]{background:#f2f2f2;margin:1rem 0 2rem;padding:1rem}.rhdocs-toc[class]>:last-child{margin-bottom:0}.rhdocs-toc[class] .rhdocs-toctitle{font-size:1.25rem;font-weight:400;line-height:1.6667;margin-top:0;text-transform:none}.rhdocs-toc[class] li{margin-bottom:.25em;padding-left:.5em}.preamble{margin:0 0 2rem}.sect1{margin:2rem 0 1rem}:host .sect1,cp-documentation .sect1{margin:0 0 2rem;padding:.0625rem 0 0}:host(.cp-documentation--has-external-header) .sect1:first-child>h2:first-child,:host(.cp-documentation--has-external-header) .sect1:first-child>h3:first-child{margin-top:0}.listingblock,.literalblock{margin:1rem 0}.quoteblock,.verseblock{border-left:.25rem solid #d2d2d2;margin:1rem 0;padding:1rem 1rem 1rem 2rem}.quoteblock.pullleft,.verseblock.pullleft{float:left;margin-right:3rem;width:25rem}@media (min-width:768px){.quoteblock.pullleft,.verseblock.pullleft{margin-left:-1rem}}.quoteblock.pullright,.verseblock.pullright{float:right;margin-left:3rem;width:25rem}@media (min-width:768){.quoteblock.pullright,.verseblock.pullright{margin-right:-2rem}}@media (min-width:1100px){.quoteblock.pullright,.verseblock.pullright{margin-right:-10rem}}.quoteblock>:first-child,.verseblock>:first-child{margin-top:0}.quoteblock .content,.verseblock .content{font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;font-size:1.25rem;line-height:1.6667}.quoteblock .attribution,.verseblock .attribution{font-size:.875rem;font-style:italic;font-weight:600;line-height:1.6667;text-transform:uppercase}.quoteblock .attribution .citetitle,.verseblock .attribution .citetitle{color:#585858}.quoteblock .attribution cite,.verseblock .attribution cite{font-size:1em}.quoteblock blockquote{font-style:italic;margin:0;padding:0}.quoteblock blockquote .content>:first-child{margin-top:0}.quoteblock blockquote .content>:first-child:before{color:#e00;content:"â€œ";display:block;float:left;font-size:2.75rem;font-style:normal;line-height:1.125em;margin-right:.5rem}.quoteblock blockquote .content>:first-child .content>:first-child:before{content:none}.imageblock{margin:1rem 0}.imageblock.pullleft{float:left;margin-right:3rem;width:25rem}@media (min-width:768px){.imageblock.pullleft{margin-left:-1rem}}.imageblock.pullright{float:right;margin-left:3rem;width:25rem}@media (min-width:768){.imageblock.pullright{margin-right:-2rem}}@media (min-width:1100px){.imageblock.pullright{margin-right:-10rem}}.imageblock.interrupter{margin:2rem 0}@media (min-width:768px){.imageblock.interrupter{margin-left:-1rem;margin-right:-2rem}.imageblock.interrupter .caption{margin-left:1rem;margin-right:2rem}}@media (min-width:1100px){.imageblock.interrupter{margin-right:-10rem}.imageblock.interrupter .caption{margin-right:10rem}}.imageblock.interrupter img{max-width:100%}.imageblock .caption{color:#585858;display:block;font-size:.875rem;line-height:1.6667;margin:.5rem 0 0}.rhdocs-footnotes{border-top:.0625rem solid #d2d2d2;margin:3rem 0 1rem;padding:1rem 0 0}.rhdocs-footnotes>ol{margin:0;padding:0 0 0 1.5rem}@supports (counter-reset:footnotenum){.rhdocs-footnotes>ol{counter-reset:footnotenum;list-style:none;padding:0}.rhdocs-footnotes>ol>li{counter-increment:footnotenum}.rhdocs-footnotes>ol>li:before{color:#585858;content:"[" counter(footnotenum) "]";display:inline-block;margin-right:.25rem}}.rhdocs-footer{background:#ededed;color:#151515;font-size:.875rem;line-height:1.6667;margin:3rem 0 0;padding:1rem}.center{margin-left:auto;margin-right:auto}.stretch{width:100%}.visually-hidden{overflow:hidden;position:absolute;clip:rect(0,0,0,0);border:0;height:.0625rem;margin:-.0625rem;padding:0;width:.0625rem}.rh-docs-legal-notice{margin-top:4em}pre,pre[class]{margin:0;padding:1.25em 1em;position:relative}code[class*=language-],pre[class*=language-]{color:#151515;-moz-tab-size:4;-o-tab-size:4;tab-size:4}code.language-none,code.language-text,code.language-txt,pre.language-none,pre.language-text,pre.language-txt{color:#151515}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{background:#cceae7;color:#263238}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#cceae7;color:#263238}:not(pre)>code[class*=language-]{border-radius:.2em;padding:.1em;white-space:normal}.token.atrule{color:#40199a}.token.attr-name{color:#06c}.token.attr-value,.token.attribute{color:#b300b3}.token.boolean{color:#40199a}.token.builtin,.token.cdata,.token.char,.token.class,.token.class-name{color:#06c}.token.comment{color:#6a6e73}.token.constant{color:#40199a}.token.deleted{color:#c9190b}.token.doctype{color:#6a6e73}.token.entity{color:#c9190b}.token.function{color:#40199a}.token.hexcode{color:#b300b3}.token.id,.token.important{color:#40199a;font-weight:700}.token.inserted{color:#06c}.token.keyword{color:#40199a}.token.number{color:#b300b3}.token.operator{color:#06c}.token.prolog{color:#6a6e73}.token.property{color:#06c}.token.pseudo-class,.token.pseudo-element{color:#b300b3}.token.punctuation,.token.regex{color:#06c}.token.selector{color:#c9190b}.token.string{color:#b300b3}.token.symbol{color:#40199a}.token.unit{color:#b300b3}.token.url,.token.variable{color:#c9190b}.rhdocs.local-render{margin:0 auto;max-width:45.8125rem;padding:0 1.5rem}@media print{.field code,.field pre,code[class*=language-],pre,pre[class*=language-]{white-space:pre-wrap!important;word-wrap:break-word!important;overflow-wrap:break-word!important;word-break:break-word!important}}.book-nav__list[class]{display:flex;justify-content:space-between;line-height:var(--jupiter__lineHeight--xs,1.3333);list-style:none;margin:5rem 0 0;padding:0}@media (min-width:1200px){.book-nav__list[class]{display:grid;gap:2rem;grid-template-columns:repeat(2,minmax(0,1fr))}}.book-nav__item a{display:inline-block;font-size:.875rem;font-weight:500;padding-left:1.25rem;position:relative;text-transform:uppercase}.book-nav__item a:before{background:url(/sites/dxp-docs/penumbra-dist/jupiter/images/arrow-down-solid.svg) no-repeat;background-size:contain;content:"";display:block;height:.875rem;left:0;position:absolute;top:.125rem;transform:rotate(90deg);width:.875rem}.book>.titlepage:not(:last-child),.rhdocs .chapter,section[id]{padding-bottom:3.75rem}.book>.titlepage .chapter:last-child,.book>.titlepage section[id]:last-child,.chapter .chapter:last-child,.chapter section[id]:last-child,section[id] .chapter:last-child,section[id] section[id]:last-child{margin-bottom:-3.75rem}.rhdocs .codeblock__wrapper+section[id],pre+section[id]{padding-top:3.75rem}.rhdocs .cta-link{font-size:inherit}.rhdocs a{word-wrap:break-word;overflow-wrap:break-word}.rhdocs .caution,.rhdocs .important,.rhdocs .note,.rhdocs .tip,.rhdocs .warning{padding:.8888888889em;position:relative}.rhdocs .QSIPopOver{bottom:18.75rem!important;top:auto!important}.rhdocs .alert{position:relative}.rhdocs button.dismiss-button{background:none;border:0;cursor:pointer;height:2.5rem;margin-top:-1.25rem;padding:0;position:absolute;right:.3125rem;text-align:center;top:50%;width:2.5rem;z-index:50}.rhdocs button.dismiss-button:after{content:"\f109";display:inline-block;filter:alpha(opacity=30);font-family:rh-web-iconfont;font-size:1.3125rem;font-style:normal;font-variant:normal;font-weight:400;line-height:1;line-height:2.5rem;opacity:.3;text-decoration:inherit;text-rendering:optimizeLegibility;text-transform:none!important;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-smoothing:antialiased}.rhdocs .book>.titlepage,.rhdocs .chapter,.rhdocs section[id]{padding-bottom:var(--rh-space-4xl,64px)}.rhdocs .alert{border:0;border-radius:0}.rhdocs .alert>h2:first-child,.rhdocs .alert>h3:first-child,.rhdocs .alert>h4:first-child,.rhdocs .alert>h5:first-child,.rhdocs .alert>h6:first-child,.rhdocs .alert>p:first-child{margin-top:0!important}.rhdocs .alert>p:last-child{margin-bottom:0!important}.rhdocs .alert-w-icon[class]{padding-left:2.8125rem}.rhdocs .alert-w-icon .alert-icon{float:left;font-size:1.125rem;margin-left:-1.875rem;margin-right:.625rem}.rhdocs .alert-w-icon .alert-icon[class*=" rh-icon-"],.rhdocs .alert-w-icon .alert-icon[class^=rh-icon-]{font-size:2.25rem;line-height:1em;margin-left:-2.5rem;margin-top:-.375rem}.rhdocs .alert-w-icon .alert-icon[class*=" icon-innov-prev"],.rhdocs .alert-w-icon .alert-icon[class^=icon-innov-prev]{font-size:1.3125rem;margin-top:.25rem}.rhdocs .alert-w-icon.alert-plain{background:none;color:#151515;padding-left:5rem}.rhdocs .alert-w-icon.alert-plain .alert-icon{font-size:3rem;margin-left:-4.375rem;margin-right:0}.rhdocs .alert-w-icon.alert-plain.alert-success .alert-icon{color:#3f9c35}.rhdocs .alert-w-icon.alert-plain.alert-info .alert-icon{color:#0088ce}.rhdocs .alert-w-icon.alert-plain.alert-warning .alert-icon{color:#f0ab00}.rhdocs .alert-w-icon.alert-plain.alert-danger .alert-icon{color:#e00}#target_banner .copy-url{float:right;margin-top:0}#target_banner .dropdown-menu{font-size:inherit}.titlepage .svg-img[data*="title_logo.svg"]{margin:1.5rem 0;width:15rem}.para{margin:1.49963rem 0}.para[class]{margin-bottom:1.49963rem}dd{margin-bottom:2.5rem}.rhdocs .card-light,.rhdocs .card-light-gray,.rhdocs .card-light-grey{background:#f0f0f0;border:.0625rem solid #f0f0f0;color:#151515}.rhdocs .card-light-gray.push-bottom:first-child,.rhdocs .card-light-grey.push-bottom:first-child,.rhdocs .card-light.push-bottom:first-child{margin-bottom:3.125rem!important}.rhdocs .card-light a.card-link,.rhdocs .card-light h1,.rhdocs .card-light h2,.rhdocs .card-light h3,.rhdocs .card-light h4,.rhdocs .card-light h5,.rhdocs .card-light h6,.rhdocs .card-light-gray a.card-link,.rhdocs .card-light-gray h1,.rhdocs .card-light-gray h2,.rhdocs .card-light-gray h3,.rhdocs .card-light-gray h4,.rhdocs .card-light-gray h5,.rhdocs .card-light-gray h6,.rhdocs .card-light-grey a.card-link,.rhdocs .card-light-grey h1,.rhdocs .card-light-grey h2,.rhdocs .card-light-grey h3,.rhdocs .card-light-grey h4,.rhdocs .card-light-grey h5,.rhdocs .card-light-grey h6{color:#151515}.rhdocs .card-light-gray.card-active:after,.rhdocs .card-light-grey.card-active:after,.rhdocs .card-light.card-active:after{border-top-color:#f0f0f0}.rhdocs .card-md,.rhdocs .card-narrow{display:block;padding:1.1875rem;white-space:normal;word-wrap:break-word}.rhdocs .card .card-heading.card-heading-sm,.rhdocs .card-sm .card .card-heading{font-size:1.0625em;font-weight:500;line-height:1.5}.rhdocs .card .card-heading.card-heading-flush{margin-bottom:.25rem}.rhdocs .card .card-heading.card-heading-red{color:#d10000}.rhdocs .card>p{margin-top:0}.rhdocs .card>p:last-child{margin-bottom:0}.rhdocs .new-experience{background-color:#e7f1fa;border:.0625rem solid #bee1f4;font-size:1rem;margin:1.5rem;padding:1.5rem;position:relative;z-index:1}@media (min-width:48rem){.new-experience{display:flex}.new-experience--contained{left:50%;position:relative;transform:translateX(-50%);width:calc(100vw - 2.5rem)}}.new-experience__primary-content{flex-grow:1}@media (min-width:48rem){.new-experience__primary-content{margin-right:1.25rem}}.new-experience__title{font-size:inherit;font-weight:inherit;line-height:1.6;margin:0;padding:0}.new-experience__title+a,.new-experience__title+pfe-cta{display:inline-block;margin-top:1.5em}.new-experience__secondary-content{min-width:12.5rem}@media (min-width:48rem){.new-experience__secondary-content{text-align:right}}.example{border-left:.3125rem solid #ccc;margin-bottom:2rem;padding:1rem 0 1rem 1rem}dl.calloutlist[class]{display:grid;gap:1.25em .75em;grid-template-columns:min-content 1fr}dl.calloutlist[class] dt{float:none;margin:0;padding:0}dl.calloutlist[class] dd{margin:0;padding:0}dl.calloutlist[class] dd>:first-child{margin-top:0}dl.calloutlist[class] dd>:last-child{margin-bottom:0}.toast{background-color:#000;background-color:rgba(0,0,0,.9);bottom:.9375rem;box-shadow:0 .125rem .3125rem 0 rgba(0,0,0,.26);color:#fff;left:.9375rem;max-width:32.8125rem;min-width:6.25rem;padding:.9375rem;position:fixed;right:.9375rem;transform:translate3d(0,150%,0);transition:transform .2s cubic-bezier(.465,.183,.153,.946);will-change:transform;z-index:999}.toast.show{transform:translateZ(0)}.toast a{color:#fff;text-decoration:underline}.toast a:focus,.toast a:hover{color:#2b9af3}.toast a.btn{text-decoration:none}.toast .btn.btn-link{color:#fff}.toast .close{color:#fff;opacity:.3;text-decoration:none}.toast .close:focus,.toast .close:hover{color:#fff;opacity:.5}.no-csstransforms3d.csstransitions .toast{transition:all .2s cubic-bezier(.465,.183,.153,.946)}.no-csstransforms3d .toast{opacity:0;visibility:hidden}.no-csstransforms3d .toast.show{opacity:1;visibility:visible}.annotator-outer[class][class]{display:none;flex-direction:column;flex-grow:1;height:auto;margin:0;position:static;width:auto}@media (min-width:1400px){.annotator-outer[class][class]{display:flex}}.annotator-frame[class] *{height:auto}@media (min-width:1400px){.annotator-frame .h-sidebar-iframe[class]{position:static;width:calc(100% + 1.5rem)}}.annotator-toolbar[class][class]{position:static;width:auto}.annotator-toolbar>ul,.annotator-toolbar>ul>li{display:block;height:auto;list-style:none;margin:0;padding:0;width:auto}.annotator-toolbar>ul>li{display:flex;justify-content:flex-end}.annotator-frame[class] .annotator-frame-button--sidebar_toggle,.annotator-outer .annotator-frame-button[class][class],.app-content-wrapper *{font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif!important}.annotator-outer .annotator-frame-button[class][class]{font-size:.9375rem;font-weight:500;height:auto;line-height:1.333;margin-right:1.875rem;padding:.75em 1em;position:static}@media (min-width:1400px){.annotator-outer .annotator-frame-button[class][class]{margin-right:0}}.annotator-outer iframe{flex-grow:1;margin-bottom:1.25rem}@media (min-width:1400px){.annotator-outer iframe{min-height:37.5rem}}.producttitle{color:#000;font-size:1.25rem;text-transform:uppercase}.producttitle .productnumber{color:var(--jupiter__palette__red--50,#e00)}.cp-modal-open,.zoom-open{overflow:hidden}.cp-modal,.cp-video-modal,.zoom-modal{bottom:0;display:none;filter:alpha(opacity=0);left:0;opacity:0;outline:0;overflow:hidden;position:fixed;right:0;top:0;transition:all .2s cubic-bezier(.465,.183,.153,.946);z-index:1040;z-index:1050;-webkit-overflow-scrolling:touch}.rhdocs .in.cp-modal,.rhdocs .in.cp-video-modal,.rhdocs .in.zoom-modal{display:block;filter:alpha(opacity=100);opacity:1;overflow-x:hidden;overflow-y:auto}.rhdocs .cp-modal .close,.rhdocs .cp-video-modal .close,.rhdocs .zoom-modal .close{background-color:#fff;border-radius:50%;color:#1a1a1a;font-size:1.75rem;height:28px;height:1.75rem;line-height:1.75rem;margin-bottom:.375rem;margin-top:0;opacity:.9;position:absolute;right:-.5rem;text-shadow:none;top:0;width:28px;width:1.75rem}.cp-modal .close:after,.cp-video-modal .close:after,.zoom-modal .close:after{line-height:1.75rem}.cp-modal-wrap,.zoom-wrap{margin:.625rem;padding-top:.5rem;position:relative}@media (min-width:48rem){.rhdocs .cp-modal-wrap,.rhdocs .zoom-wrap{margin:2.8125rem auto;width:38.4375rem}}@media (min-width:62rem){.rhdocs .cp-modal-wrap,.rhdocs .zoom-wrap{width:49.8958rem}}@media (min-width:75rem){.rhdocs .cp-modal-wrap,.rhdocs .zoom-wrap{width:60.3125rem}}.rhdocs .cp-modal-body :last-child{margin-bottom:0}.rhdocs .cp-modal-backdrop,.rhdocs .zoom-backdrop{background-color:#000;bottom:0;display:none;filter:alpha(opacity=0);left:0;opacity:0;position:fixed;right:0;top:0;transition:opacity .2s cubic-bezier(.465,.183,.153,.946);z-index:1040}.rhdocs .in.cp-modal-backdrop,.rhdocs .in.zoom-backdrop{display:block;filter:alpha(opacity=80);opacity:.8}.rhdocs .cp-modal-body{background:#fff;padding:1.875rem}.rhdocs .cp-modal[data-cp-modal-video=true] .cp-modal-body,.rhdocs .cp-video-modal .cp-modal-body{padding:0}.rhdocs [data-action=zoom]{position:relative}.rhdocs [data-action=zoom]:after{background:rgba(0,0,0,.4);bottom:0;color:#fff;display:inline-block;font-family:rh-web-iconfont;font-style:normal;font-variant:normal;font-weight:400;line-height:1;padding:.375rem;position:absolute;right:0;text-decoration:inherit;text-decoration:none!important;text-rendering:optimizeLegibility;text-transform:none!important;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-smoothing:antialiased}.rhdocs [data-action=zoom]:focus:after,.rhdocs [data-action=zoom]:hover:after{background:rgba(0,0,0,.9)}.rhdocs .zoom-wrap .zoom-larger{text-align:center}.rhdocs .zoom-wrap .zoom-larger a{color:#fff}.rhdocs .zoom-wrap .zoom-larger a:focus,.rhdocs .zoom-wrap .zoom-larger a:hover{color:#fff;text-decoration:underline}.rhdocs .zoom-wrap .zoom-larger a:after{content:"â¿»";display:inline-block;margin-left:.25rem}.rhdocs .zoom-body{background:#fff;border-radius:.5rem;margin:0 0 1rem;padding:1rem;text-align:center}.rhdocs .zoom-body .video-wrapper{height:0;overflow:hidden;padding-bottom:56.25%;position:relative}.rhdocs .zoom-body .video-wrapper[data-aspect-ratio="4:3"]{padding-bottom:75%}.rhdocs .zoom-body iframe{height:100%;left:0;position:absolute;top:0;width:100%}.rhdocs .para>.title[class],.rhdocs p.title[class]{font-size:1rem;font-style:normal;font-weight:700;line-height:1.6667;margin:1.25rem 0 0;text-transform:none}.rhdocs .para>.title[class]+.content>:first-child,.rhdocs .para>.title[class]+p,.rhdocs p.title[class]+.content>:first-child,.rhdocs p.title[class]+p{margin-top:0}.rhdocs [class] pre .caution,.rhdocs [class] pre .important,.rhdocs [class] pre .note,.rhdocs [class] pre .tip,.rhdocs [class] pre .warning{background:transparent;border:0;color:inherit;font:inherit;margin:0;padding:0}.rhdocs [class] pre .caution:after,.rhdocs [class] pre .important:after,.rhdocs [class] pre .note:after,.rhdocs [class] pre .tip:after,.rhdocs [class] pre .warning:after{content:none}.rhdocs [class] code.email{background-color:transparent;font:inherit;padding:0}.rhdocs [class] .author{margin-bottom:1.5rem}.rhdocs [class] .author .author{margin-bottom:0}.rhdocs table{margin:2rem 0}.rhdocs [class] table{width:auto}.rhdocs table .table-contents table{max-width:100%;overflow:auto}.rhdocs rh-table table{margin:0;max-width:9999em;overflow:visible}.rhdocs td,.rhdocs th{border-left:0;padding:.5em 1rem;transition:background .25s ease-out}.rhdocs td.content--md[class][class],.rhdocs th.content--md[class][class]{min-width:13em}.rhdocs td.content--lg[class][class],.rhdocs th.content--lg[class][class]{min-width:20em}.rhdocs thead th{padding-top:1.5em}.rhdocs caption{color:currentColor;color:var(--pfe-table__caption--Color,currentColor);font-weight:700;margin-bottom:.5rem;margin-top:.5rem;text-align:center}.rhdocs .revhistory table td,.rhdocs .revhistory table th{border-color:transparent}.rhdocs .revhistory table td{padding:.625rem .875rem}.rhdocs .revhistory table.simplelist{margin:0}@media print{#masthead{display:none!important}}.rh-table--is-full-screen #to-top{display:none}.rhdocs{--rh-table--maxHeight:calc(100vh - 6.25rem);color:#151515;font-family:var(--rh-font-family-body-text,RedHatText,"Red Hat Text","Noto Sans Arabic","Noto Sans Hebrew","Noto Sans JP","Noto Sans KR","Noto Sans Malayalam","Noto Sans SC","Noto Sans TC","Noto Sans Thai",Helvetica,Arial,sans-serif);font-size:var(--rh-body-copy-lage,1.125rem);line-height:1.6667;-moz-tab-size:4;-o-tab-size:4;tab-size:4}.rhdocs rh-codeblock::slotted(#content){border-radius:.25rem;padding:var (--rh-space-lg,16px)}.rhdocs rh-codeblock .screen{display:grid;grid-template-columns:1fr 4.375rem}.rhdocs rh-codeblock[class][class][class][class][class]{max-width:99999em}.rhdocs .codeblock__copy span{display:block;height:0;position:absolute;visibility:hidden;width:0}.rhdocs .codeblock__copy:focus{outline:.0625rem dashed currentcolor}.rhdocs .codeblock__copy svg#icon--copy{height:1rem;width:1rem}.rhdocs pre{border:0;max-height:-moz-max-content;max-height:max-content}.rhdocs pre,pre[class]{margin:0;padding:1.25em 1em;position:relative}.rhdocs rh-code-block>div.codeblock__inner-wrapper>pre,.rhdocs rh-code-block>div.codeblock__inner-wrapper>pre[class]{margin:0;padding:0;position:relative}.rhdocs code[class*=language-],pre[class*=language-]{color:#151515;-moz-tab-size:4;-o-tab-size:4;tab-size:4}.rhdocs code.literal{background:#eee;border-radius:.25rem;color:#000;font-size:.875rem;line-height:1.6667;overflow-wrap:break-word;padding:.125em .5em;word-break:break-word}.rhdocs code.literal,.rhdocs kbd,.rhdocs span.keycap{font-family:RedHatMono,Red Hat Mono,Consolas,monospace}.rhdocs kbd,.rhdocs span.keycap{background-color:#eee;background-image:linear-gradient(180deg,#ddd,#eee,#fff);border-radius:.1875rem;box-shadow:0 -.0625rem 0 0 #fff,0 .0625rem 0 .1875rem #aaa;font-size:90%;font-weight:400;margin:0 .25rem;padding:.125rem .375rem}.rhdocs ol,.rhdocs ul{margin:1rem 0;padding:0 0 0 1.5rem}.rhdocs ._additional-resources[class][class],.rhdocs ._additional-resources[class][class][id]:last-child{background:#fff;border:.0625rem solid #d2d2d2;border-radius:.1875rem;margin:2em 0 4em;padding:2rem 2rem 1rem}.rhdocs ._additional-resources[class][class] ul{border:0;list-style:none;margin:0;padding:0;position:relative}.rhdocs ._additional-resources[class][class] li{border-bottom:.0625rem solid #d2d2d2;box-sizing:content-box;margin:0;padding:1rem 1.5rem 1rem 0;-moz-column-break-inside:avoid;break-inside:avoid}.rhdocs ._additional-resources[class][class] li:last-child{border:0}.rhdocs section.section#additional_resource .additional-resources__heading,.rhdocs section.section#additional_resource .heading,.rhdocs section.section#additional_resource h1,.rhdocs section.section#additional_resource h2,.rhdocs section.section#additional_resource h3,.rhdocs section.section#additional_resource h4,.rhdocs section.section#additional_resource h5,.rhdocs section.section#additional_resource h6,.rhdocs section.section#additional_resource p.title{display:block;font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-size:1.125rem;font-weight:700;line-height:1.5rem;margin:0 0 .5rem;padding:0;text-transform:uppercase}.rhdocs section.section:first-of-type{margin-top:var(--rh-space-4xl,64px)}.rhdocs section.section p{margin-bottom:var(--rh-space-lg,16px);margin-top:0;word-wrap:break-word}.rhdocs .section.section h1,.rhdocs .section.section h2,.rhdocs .section.section h3,.rhdocs .section.section h4,.rhdocs .section.section h5,.rhdocs .section.section h6,.rhdocs h1,.rhdocs h2,.rhdocs h3,.rhdocs h4,.rhdocs h5,.rhdocs h6{font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-weight:400;line-height:1.3333}.rhdocs h1:first-of-type,.rhdocs h2:first-of-type,.rhdocs h3:first-of-type,.rhdocs h4:first-of-type,.rhdocs h5:first-of-type,.rhdocs h6:first-of-type{margin-top:0}.rhdocs h1,.rhdocs h2,.rhdocs h3,.rhdocs h4,.rhdocs h5,.rhdocs h6{font-family:RedHatDisplay,Red Hat Display,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.3333}.rhdocs h2,.rhdocs section.section h2{font-size:var(--rh-font-size-heading-md,1.75rem)}.rhdocs h3,.rhdocs section.section h3{font-size:1.5rem;font-weight:400}.rhdocs dl dt{font-weight:600;margin:.5rem 0}.rhdocs dl{display:block;margin-block-end:1em;margin-block-start:1em;margin-inline-end:0;margin-inline-start:0}.rhdocs .para{margin:1.49963rem 0}.rhdocs dl.calloutlist[class] dt{float:none;margin:0;padding:0}.rhdocs dl.calloutlist[class] dd>:last-child{margin-bottom:0}.rhdocs dl.calloutlist[class]{display:grid;gap:1.25em .75em;grid-template-columns:fit-content(40%) 1fr}.rhdocs .calloutlist dt{clear:left;display:flex;flex-wrap:wrap;float:left;margin:0;padding:0 .5rem 0 0}.rhdocs .calloutlist dt a:not(:first-child){padding-left:4px}.rhdocs dl.calloutlist[class] dd{margin:0;padding:0}.rhdocs .callout,.rhdocs .colist>ol>li:before,.rhdocs .conum{background:#06c;border-radius:50%;color:#fff;display:inline-block;font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;font-size:.75rem;font-style:normal;font-weight:600;height:1.25rem;line-height:1.35rem;padding:0;position:relative;text-align:center;top:-.125em;vertical-align:middle;width:1.25rem}.rhdocs img,.rhdocs object,.rhdocs svg{display:inline-block;max-width:100%;vertical-align:middle}.rhdocs .titlepage .svg-img[data*="title_logo.svg"]{margin:1.5rem 0;width:15rem}.rhdocs[class] .author{margin-bottom:1.5rem}.rhdocs[class] .author .author{margin-bottom:0}.rhdocs .para>.title[class],p.title[class]{font-size:1rem;font-style:normal;font-weight:700;line-height:1.6667;margin:1.25rem 0 0}.rhdocs .example{border-left:.3125rem solid #ccc;margin-bottom:2rem;padding:1rem 0 1rem 1rem}.rhdocs code{background:#eee;color:#000;font-family:RedHatMono,Red Hat Mono,Consolas,monospace;font-size:.875rem;line-height:1.6667;overflow-wrap:break-word;padding:.125em .5em;word-break:break-word}.rhdocs .para[class]{margin-bottom:1.49963rem}.rhdocs[class] code.email{background-color:transparent;font:inherit;padding:0}rh-alert.admonition #description,rh-alert.admonition p{font-size:var(--rh-font-size-body-text-md,1rem)}rh-alert{width:-moz-fit-content;width:fit-content}.rhdocs .producttitle{color:#000;font-size:1.25rem;text-transform:uppercase}.rhdocs dl{margin:1rem 0}.rhdocs dl dt{font-weight:600;margin:.5rem 0}.rhdocs ol ol{list-style:lower-roman}.rhdocs .codeblock--processed pf-clipboard-copy::part(input),.rhdocs .codeblock--processed pf-clipboard-copy::part(span){display:none}.token.tag{color:#c9190b}.calloutlist div.para{margin:0}rh-alert.admonition{margin-bottom:var(--rh-space-lg,1rem)}.guibutton,.guimenu,.guimenuitem{font-weight:700}.guibutton{font-size:90%;padding:.1875rem}.guibutton:before{content:"["}.guibutton:after{content:"]"}.docs-content-container,.rhdocs{--rh-table--maxHeight:calc(100vh - 6.25rem);color:#151515;font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;font-size:1.125rem;line-height:1.6667;-moz-tab-size:4;-o-tab-size:4;tab-size:4}pre[hidden]{display:none}.codeblock[class][class][class][class][class]{max-width:99999em}.codeblock__wrapper{background:var(--rh-color-surface-lighter,#f2f2f2);margin:1rem 0;overflow:visible;position:relative;transform:translate(0);z-index:0}.codeblock__inner-wrapper:after{content:"";display:block;min-height:.625rem;width:4.375rem}.codeblock__copy{--pfe-clipboard--icon--Color--hover:#06c;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#f0efef;height:1.75rem;left:calc(100% - 2.75rem - var(--scrollbar__width, 0px));padding:.3125rem .375rem;position:absolute;top:1rem;width:1.75rem;z-index:2}.codeblock__inner-wrapper pre{border:0;max-height:-moz-max-content;max-height:max-content}.pfe-clipboard:not([copied]) .pfe-clipboard__text--success,:host(:not([copied])) .pfe-clipboard__text--success{display:none!important}.codeblock[class]{margin:0;overflow:visible;padding-right:0}pre{display:block;font-size:.8125rem;line-height:1.42857;margin:0 0 .625rem;word-break:break-all;word-wrap:break-word;background-color:var(--rh-color-surface-lighter,#f2f2f2);border:.0625rem solid #ccc;border-radius:.25rem;color:#333}.docs-content-container pre,.rhdocs pre{background:var(--rh-color-surface-lighter,#f2f2f2);color:#151515;font-family:RedHatMono,Red Hat Mono,Consolas,monospace;font-size:.875rem;line-height:1.6667;overflow-wrap:normal;white-space:pre;word-break:normal}.rhdocs pre[class]{line-height:1.6667;overflow-x:auto}rh-codeblock pre[class][class]{overflow-x:auto}.pfe-clipboard__text--success{background-color:#ddd;border:1px solid #000;border-radius:2px}*,:after,:before{box-sizing:border-box}:root{--rh-space-xs:4px;--rh-space-sm:6px;--rh-space-md:8px;--rh-space-lg:16px;--rh-space-xl:24px;--rh-space-2xl:32px;--rh-space-3xl:48px;--rh-space-4xl:64px;--rh-space-5xl:80px;--rh-space-6xl:96px;--rh-space-7xl:128px;--rh-font-size-body-text-xs:.75rem;--rh-font-size-body-text-sm:.875rem;--rh-font-size-body-text-md:1rem;--rh-font-size-body-text-lg:1.125rem;--rh-font-size-body-text-xl:1.25rem;--rh-font-size-body-text-2xl:1.5rem;--rh-font-size-heading-xs:1.25rem;--rh-font-size-heading-sm:1.5rem;--rh-font-size-heading-md:1.75rem;--rh-font-size-heading-lg:2.25rem;--rh-font-size-heading-xl:2.5rem;--rh-font-size-heading-2xl:3rem;--pfe-navigation--logo--maxWidth:200px;--pfe-navigation__logo--height:40px;--pfe-navigation--fade-transition-delay:500ms;--pfe-navigation__nav-bar--highlight-color:var(--rh-color-brand-red-on-dark,#e00);--pf-global--icon--FontSize--sm:.75rem}body,html{font-family:Red Hat Text,sans-serif;font-size:var(--rh-font-size-body-text-md,1rem);line-height:var(--rh-line-height-body-text,1.5);margin:0}h1,h2,h3,h4,h5,h6{font-family:Red Hat Display,sans-serif;font-weight:400;line-height:var(--rh-line-height-heading,1.3)}h1{font-size:var(--rh-font-size-heading-2xl,3rem);line-height:62px}h2{font-size:var(--rh-font-size-heading-xl,2.5rem);line-height:48px}h3{font-size:var(--rh-font-size-heading-lg,2.25rem)}h4{font-size:var(--rh-font-size-heading-md,2.25rem)}h5{font-size:var(--rh-font-size-heading-sm,2.25rem)}h6{font-size:var(--rh-font-size-heading-xs,2.25rem)}main{line-height:30px}section{padding-bottom:3rem;padding-top:3rem}img{height:auto;max-width:100%}a{color:var(--rh-color-interactive-blue-darker,#06c);text-decoration:none}a:hover{color:var(--rh-color-interactive-blue-darkest,#004080)}rh-alert.html-container a{text-decoration:underline}.container{padding-left:12px;padding-right:12px}.container,.container-fluid{margin-left:auto;margin-right:auto;width:100%}.container-fluid{padding:12px}@media (min-width:576px){.container{max-width:540px}}@media (min-width:768px){.container{max-width:720px}}@media (min-width:992px){.container{max-width:960px}}@media (min-width:1200px){.container{min-width:1140px}}@media (min-width:1400px){.container{min-width:1320px}}.grid{display:grid;gap:var(--rh-space-xl,24px)}.grid-center{margin:auto}.grid.grid-col-2{grid-template-columns:repeat(2,1fr)}.grid.grid-col-3{grid-template-columns:repeat(3,1fr)}.grid.grid-col-4{grid-template-columns:repeat(4,1fr)}.grid.grid-col-5{grid-template-columns:repeat(5,1fr)}.grid.grid-col-6{grid-template-columns:repeat(6,1fr)}.grid.grid-col-7{grid-template-columns:repeat(7,1fr)}.grid.grid-col-8{grid-template-columns:repeat(8,1fr)}.grid.grid-col-9{grid-template-columns:repeat(9,1fr)}.grid.grid-col-10{grid-template-columns:repeat(10,1fr)}.grid.grid-col-11{grid-template-columns:repeat(11,1fr)}.grid.grid-col-12{grid-template-columns:repeat(12,1fr)}@media (min-width:768px){.grid.grid-col-md-2{grid-template-columns:repeat(2,1fr)}.grid.grid-col-md-3{grid-template-columns:repeat(3,1fr)}.grid.grid-col-md-4{grid-template-columns:repeat(4,1fr)}.grid.grid-col-md-5{grid-template-columns:repeat(5,1fr)}.grid.grid-col-md-6{grid-template-columns:repeat(6,1fr)}.grid.grid-col-md-7{grid-template-columns:repeat(7,1fr)}.grid.grid-col-md-8{grid-template-columns:repeat(8,1fr)}.grid.grid-col-md-9{grid-template-columns:repeat(9,1fr)}.grid.grid-col-md-10{grid-template-columns:repeat(10,1fr)}.grid.grid-col-md-11{grid-template-columns:repeat(11,1fr)}.grid.grid-col-md-12{grid-template-columns:repeat(12,1fr)}}@media (min-width:992px){.grid.grid-col-lg-2{grid-template-columns:repeat(2,1fr)}.grid.grid-col-lg-3{grid-template-columns:repeat(3,1fr)}.grid.grid-col-lg-4{grid-template-columns:repeat(4,1fr)}.grid.grid-col-lg-5{grid-template-columns:repeat(5,1fr)}.grid.grid-col-lg-6{grid-template-columns:repeat(6,1fr)}.grid.grid-col-lg-7{grid-template-columns:repeat(7,1fr)}.grid.grid-col-lg-8{grid-template-columns:repeat(8,1fr)}.grid.grid-col-lg-9{grid-template-columns:repeat(9,1fr)}.grid.grid-col-lg-10{grid-template-columns:repeat(10,1fr)}.grid.grid-col-lg-11{grid-template-columns:repeat(11,1fr)}.grid.grid-col-lg-12{grid-template-columns:repeat(12,1fr)}}.span-1{grid-column:span 1}.span-2{grid-column:span 2}.span-3{grid-column:span 3}.span-4{grid-column:span 4}.span-5{grid-column:span 5}.span-6{grid-column:span 6}.span-7{grid-column:span 7}.span-8{grid-column:span 8}.span-9{grid-column:span 9}.span-10{grid-column:span 10}.span-11{grid-column:span 11}.span-12{grid-column:span 12}@media (min-width:399px){.span-xs-1{grid-column:span 1}.span-xs-2{grid-column:span 2}.span-xs-3{grid-column:span 3}.span-xs-4{grid-column:span 4}.span-xs-5{grid-column:span 5}.span-xs-6{grid-column:span 6}.span-xs-7{grid-column:span 7}.span-xs-8{grid-column:span 8}.span-xs-9{grid-column:span 9}.span-xs-10{grid-column:span 10}.span-xs-11{grid-column:span 11}.span-xs-12{grid-column:span 12}}@media (min-width:768px){.span-md-1{grid-column:span 1}.span-md-2{grid-column:span 2}.span-md-3{grid-column:span 3}.span-md-4{grid-column:span 4}.span-md-5{grid-column:span 5}.span-md-6{grid-column:span 6}.span-md-7{grid-column:span 7}.span-md-8{grid-column:span 8}.span-md-9{grid-column:span 9}.span-md-10{grid-column:span 10}.span-md-11{grid-column:span 11}.span-md-12{grid-column:span 12}}@media (min-width:992px){.span-lg-1{grid-column:span 1}.span-lg-2{grid-column:span 2}.span-lg-3{grid-column:span 3}.span-lg-4{grid-column:span 4}.span-lg-5{grid-column:span 5}.span-lg-6{grid-column:span 6}.span-lg-7{grid-column:span 7}.span-lg-8{grid-column:span 8}.span-lg-9{grid-column:span 9}.span-lg-10{grid-column:span 10}.span-lg-11{grid-column:span 11}.span-lg-12{grid-column:span 12}}@media (min-width:1025px){.span-xl-1{grid-column:span 1}.span-xl-2{grid-column:span 2}.span-xl-3{grid-column:span 3}.span-xl-4{grid-column:span 4}.span-xl-5{grid-column:span 5}.span-xl-6{grid-column:span 6}.span-xl-7{grid-column:span 7}.span-xl-8{grid-column:span 8}.span-xl-9{grid-column:span 9}.span-xl-10{grid-column:span 10}.span-xl-11{grid-column:span 11}.span-xl-12{grid-column:span 12}}@media (min-width:1200px){.span-2xl-1{grid-column:span 1}.span-2xl-2{grid-column:span 2}.span-2xl-3{grid-column:span 3}.span-2xl-4{grid-column:span 4}.span-2xl-5{grid-column:span 5}.span-2xl-6{grid-column:span 6}.span-2xl-7{grid-column:span 7}.span-2xl-8{grid-column:span 8}.span-2xl-9{grid-column:span 9}.span-2xl-10{grid-column:span 10}.span-2xl-11{grid-column:span 11}.span-2xl-12{grid-column:span 12}}.flex{display:flex;flex-direction:column;gap:var(--rh-space-lg,16px)}.flex-row{flex-direction:row}.flex-column{flex-direction:column}@media (min-width:768px){.flex-md-row{flex-direction:row}.flex-md-column{flex-direction:column}}.typography-h1{font-size:var(--rh-font-size-heading-2xl,3rem)}.typography-h2{font-size:var(--rh-font-size-heading-xl,2.5rem)}.typography-h3{font-size:var(--rh-font-size-heading-lg,2.25rem)}.typography-h4{font-size:var(--rh-font-size-heading-md,1.75rem)}.typography-h5{font-size:var(--rh-font-size-heading-sm,1.5rem)}.typography-h6{font-size:var(--rh-font-size-heading-xs,1.25rem)}.content section{padding:0}.content h1,.content h2,.content h3,.content h4,.content h5,.content h6{margin:var(--rh-space-lg,16px) 0}.sr-only{height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);border:0}.list-unstyled{list-style:none;padding-left:0}.tooltip-content{align-items:center;display:flex;font-family:Red Hat Text;justify-content:center;text-transform:none}.tooltip-content .check-icon{margin-left:var(--rh-space-md,8px)}.doc-image-link{display:inline-block;text-decoration:none}.modal-img{display:block;width:100%}.modal-helper-text{margin-top:.5rem;text-align:center}.modal-helper-text a{color:#000;cursor:pointer}.modal-helper-text a:hover{text-decoration:underline}.modal-helper-text a:after{content:"⿻";margin-left:.25rem}pf-modal.pf-img-modal{--pf-c-modal-box--MaxHeight:90vh;overflow-y:scroll}pf-modal.pf-img-modal::part(close-button){background-color:#fff;border-radius:50%;color:#000;margin-right:-2rem;margin-top:-2rem}pf-modal.pf-img-modal::part(close-button):hover{opacity:.7}h2.truste-title{line-height:normal;margin-top:0}rh-alert p[slot=header]{color:#002952}@media (width < 992px){html:has(nav.mobile-nav .mobile-nav-wrapper){scroll-behavior:smooth;scroll-padding-top:4rem}html:has(nav.mobile-nav .mobile-jump-links){scroll-padding-top:7rem}html:has(nav.mobile-nav.hide-mobile-nav){scroll-padding-top:2rem}}.highlight{background:#fff4cc;color:#000}</style>
<style>rh-alert[data-v-84359384]{width:100%}</style>
<style>.search-btn[data-v-edc0d12c]{align-items:center;background-color:var(--rh-color-canvas-black,#151515);border:3px solid var(--rh-color-canvas-black,#151515);cursor:pointer;display:flex;flex-direction:column;height:100%;justify-content:center;outline:none;padding:14px var(--rh-space-md,8px)}.search-btn[data-v-edc0d12c]:focus{border-top:3px solid var(--rh-color-accent-brand-on-light,#e00);outline:2px dotted var(--rh-color-white,#fff)}.search-btn .search-icon[data-v-edc0d12c]{height:26px;padding:2px 0 var(--rh-space-xs,4px);width:20px}.search-btn .search-icon[data-v-edc0d12c],.search-icon-helper-text[data-v-edc0d12c]{color:var(--rh-color-white,#fff)}.search-mobile[data-v-edc0d12c]{margin-bottom:var(--rh-space-2xl,32px)}.search-mobile form[data-v-edc0d12c]{display:flex;gap:var(--rh-space-md,8px);margin:auto}.search-box[data-v-edc0d12c]{width:35rem}nav[data-v-edc0d12c]{background-color:#151515;justify-content:space-between;width:100%}a[data-v-edc0d12c],a[data-v-edc0d12c]:visited{color:#fff;display:inline-block;font-size:var(--rh-font-size-body-text-md,1rem)}.skip-link[class][class][data-v-edc0d12c]{font-size:var(--pf-global--FontSize--sm,.875rem);line-height:18px}.skip-link[class][class][data-v-edc0d12c]:focus{border-radius:.21429em;height:auto;left:50%;padding:.42857em .57143em;position:fixed;top:8px;transform:translateX(-50%);width:auto;z-index:99999;clip:auto;background:#fff;background:var(--pfe-navigation__skip-link--BackgroundColor,var(--pfe-theme--color--surface--lightest,#fff));color:#06c;color:var(--pfe-navigation__skip-link--Color,var(--pfe-theme--color--link,#06c));text-decoration:none}.visually-hidden[data-v-edc0d12c]{border:1px solid #06c;height:1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);white-space:nowrap}h3[data-v-edc0d12c]{color:#464646;font-family:var(--rh-font-family-heading,"Red Hat Display",Helvetica,Arial,sans-serif);font-size:var(--rh-font-size-body-text-lg,1.125rem)}.language-picker[data-v-edc0d12c]{align-items:center;background-color:#fff;display:flex;flex-direction:column;padding:var(--rh-space-xl,24px);width:100%}.language-picker h3[data-v-edc0d12c]{margin:0;padding:0 1rem 1rem}.language-picker ul[data-v-edc0d12c]{margin:0;padding:0}.language-picker a[data-v-edc0d12c]{color:#06c}.language-picker li[data-v-edc0d12c]{list-style:none}.language-dropdown[data-v-edc0d12c]{background:#fff;box-shadow:0 3px 6px rgba(0,0,0,.098);display:block!important;position:absolute;right:0;width:100%;z-index:104}.pfe-navigation.pfe-navigation--processed>[slot=secondary-links][data-v-edc0d12c]{height:auto;overflow:visible;visibility:visible;width:auto}.upper-navigation[data-v-edc0d12c]{padding:0 var(--rh-space-2xl,32px)}.upper-nav-container[data-v-edc0d12c]{border-bottom:1px solid #404040;margin:0}.upper-nav-hidden[data-v-edc0d12c]:not(:focus):not(:active){clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}.upper-nav-menu[data-v-edc0d12c]{align-items:center;display:flex;justify-content:flex-end;line-height:1.444;list-style:none;margin-bottom:0;margin-top:0;padding-left:0}.upper-nav-menu[data-v-edc0d12c],.upper-nav-menu>li[data-v-edc0d12c]{position:relative}.upper-nav-menu>li:not(:first-child)>a[data-v-edc0d12c]:before,.upper-nav-menu>li:not(:first-child)>button[data-v-edc0d12c]:before{background-color:#404040;content:"";height:40%;left:0;position:absolute;top:30%;width:1px}li[data-v-edc0d12c]{display:list-item;margin:0;padding:0;text-align:-webkit-match-parent}.upper-nav-menu button.upper-nav-links[data-v-edc0d12c]{border:0;border-top:3px solid transparent;cursor:pointer;line-height:1.444}.upper-nav-menu button.upper-nav-links[aria-expanded=true][data-v-edc0d12c]{outline-color:#151515}.upper-nav-menu button.upper-nav-links[aria-expanded=true] .upper-nav-arrow[data-v-edc0d12c]{filter:invert(0) sepia(2%) saturate(21%) hue-rotate(257deg) brightness(108%) contrast(100%);transform:rotate(270deg)}.upper-nav-menu button.upper-nav-links[aria-expanded=true][data-v-edc0d12c]:before{display:none}.upper-nav-menu .upper-nav-links[data-v-edc0d12c]{background-color:var(--pfe-navigation--BackgroundColor,var(--pfe-theme--color--surface--darkest,#151515));border-top:3px solid transparent;color:#fff;display:block;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-sm,.875rem);outline:none;padding:12px 12px 14px;text-decoration:none}.upper-nav-menu .upper-nav-links[data-v-edc0d12c]:hover{border-top-color:#b8bbbe}.upper-nav-menu .upper-nav-links[data-v-edc0d12c]:focus-within{outline:1px dashed var(--rh-color-white,#fff);outline-offset:-1px}.upper-nav-menu .upper-nav-links[data-v-edc0d12c]:focus-within:before{display:none}.upper-nav-dropdown-container[data-v-edc0d12c]{background:#fff;box-shadow:0 3px 6px rgba(0,0,0,.098);display:none;padding:5px 30px 24px;position:absolute;right:0;top:100%;width:500px;z-index:105}.upper-nav-dropdown-container>ul[data-v-edc0d12c]{-moz-column-count:2;column-count:2;list-style-type:none;padding:0;width:auto}.upper-nav-dropdown-container>ul li[data-v-edc0d12c]{color:#151515;font-family:var(--rh-font-family-heading,"Red Hat Display",Helvetica,Arial,sans-serif);font-size:var(--rh-font-size-body-text-sm,.875rem);list-style-type:none;margin-bottom:0}.upper-nav-dropdown-container>ul li span[data-v-edc0d12c]{font-weight:var(--rh-font-weight-body-text-medium,500)}.upper-nav-dropdown-container>ul ul[data-v-edc0d12c]{padding-left:0;padding-top:9px}.upper-nav-dropdown-container>ul>li[data-v-edc0d12c]{padding-top:19px;-moz-column-break-inside:avoid;break-inside:avoid}.upper-nav-dropdown-container>ul>li>ul>li[data-v-edc0d12c]{line-height:1.45;padding:4px 0}.upper-nav-menu .upper-nav-arrow[data-v-edc0d12c]{display:inline-block;filter:invert(100%) sepia(8%) saturate(7%) hue-rotate(1turn) brightness(100%) contrast(93%);height:18px;margin-left:5px;transform:rotate(90deg);vertical-align:middle;width:8px}#pfe-navigation__secondary-links .show[data-v-edc0d12c],.upper-navigation .show[data-v-edc0d12c]{display:block}.upper-nav-menu .upper-nav-links[aria-expanded=true][data-v-edc0d12c]:active,.upper-nav-menu .upper-nav-links[aria-expanded=true][data-v-edc0d12c]:focus,.upper-nav-menu .upper-nav-links[aria-expanded=true][data-v-edc0d12c]:hover{background-color:#fff;color:#151515}.upper-nav-menu .upper-nav-links[aria-expanded=true][data-v-edc0d12c]{background-color:#fff;border-top-color:#b8bbbe;color:#000;position:relative;z-index:1}.upper-nav-dropdown-container>ul a[data-v-edc0d12c]{color:var(--rh-color-accent-base-on-light,#06c);font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:14px;text-decoration:none}.pfe-navigation__search[data-v-edc0d12c]{background-color:var(--rh-color-white,#fff)}.pfe-navigation__search form[data-v-edc0d12c]{display:flex;gap:var(--rh-space-md,8px);margin:auto;max-width:992px}pfe-navigation [slot=secondary-links] .buttons[data-v-edc0d12c]{display:flex;flex-wrap:wrap;gap:var(--rh-space-md,8px);margin-top:4px}pfe-navigation [slot=secondary-links] .buttons a[data-v-edc0d12c]{border:1px solid #d2d2d2;border-radius:3px;color:#06c;cursor:pointer;flex-basis:calc(50% - 5px);font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-weight:var(--rh-font-weight-code-regular,400);padding:1em;text-align:center;text-decoration:none}pfe-navigation [slot=secondary-links] .mobile-lang-select[data-v-edc0d12c]{border:1px solid #d2d2d2;border-bottom-color:#3c3f42;cursor:pointer;display:flex;margin:3rem 0;position:relative}pfe-navigation [slot=secondary-links] .mobile-lang-select label[data-v-edc0d12c]{bottom:100%;color:#000;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:14px;font-weight:500;margin-bottom:5px;position:absolute}pfe-navigation [slot=secondary-links] .mobile-lang-select select[data-v-edc0d12c]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border-style:none;color:#000;flex-basis:100%;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:16px;line-height:24px;padding:6px 24px 6px 8px}select[data-v-edc0d12c]{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6' fill='none' viewBox='0 0 10 6'%3E%3Cpath fill='%23151515' d='M.678 0h8.644c.596 0 .895.797.497 1.195l-4.372 4.58c-.298.3-.695.3-.993 0L.18 1.196C-.216.797.081 0 .678 0'/%3E%3C/svg%3E");background-position:98% 50%;background-repeat:no-repeat}#inputLabel[data-v-edc0d12c]{align-items:center;display:flex;position:relative}#inputLabel form[data-v-edc0d12c]{width:100%}.input-box[data-v-edc0d12c]{font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);height:36px;padding:0 8px;width:100%}.input-box[data-v-edc0d12c]::-moz-placeholder{color:#6a6e73;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);font-weight:var(--rh-font-weight-code-regular,400);line-height:24px}.input-box[data-v-edc0d12c]::placeholder{color:#6a6e73;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);font-weight:var(--rh-font-weight-code-regular,400);line-height:24px}@media(max-width:960px){.search-box[data-v-edc0d12c]{width:28rem}}@media (max-width:768px){.right-navigation[data-v-edc0d12c],.upper-navigation[data-v-edc0d12c]{display:none}}@media (min-width:767px){.pfe-navigation__search form[data-v-edc0d12c]{padding:var(--rh-space-2xl,32px) 0}}</style>
<style>.element-invisible,.sr-only,.visually-hidden{height:1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);border:0;white-space:nowrap}@keyframes reveal-nav{0%{max-height:72px;max-height:var(--pfe-navigation__nav-bar--Height,72px);opacity:0;visibility:hidden}99%{max-height:72px;max-height:var(--pfe-navigation__nav-bar--Height,72px)}to{max-height:9999em;opacity:1;visibility:visible}}@keyframes reveal-nav-parts{0%{max-height:72px;max-height:var(--pfe-navigation__nav-bar--Height,72px);opacity:0;visibility:hidden}1%{visibility:visible}99%{max-height:72px;max-height:var(--pfe-navigation__nav-bar--Height,72px)}to{max-height:9999em;opacity:1;visibility:visible}}@media print{.pfe-navigation__menu,pfe-navigation [slot]{display:none!important}}pfe-navigation{--pfe-broadcasted--text:var(--pfe-theme--color--text,#151515);--pfe-broadcasted--text--muted:var(--pfe-theme--color--text--muted,#6a6e73);--pfe-broadcasted--link:var(--pfe-theme--color--link,#06c);--pfe-broadcasted--link--hover:var(--pfe-theme--color--link--hover,#004080);--pfe-broadcasted--link--focus:var(--pfe-theme--color--link--focus,#004080);--pfe-broadcasted--link--visited:var(--pfe-theme--color--link--visited,#6753ac);--pfe-broadcasted--link-decoration:var(--pfe-theme--link-decoration,none);--pfe-broadcasted--link-decoration--hover:var(--pfe-theme--link-decoration--hover,underline);--pfe-broadcasted--link-decoration--focus:var(--pfe-theme--link-decoration--focus,underline);--pfe-broadcasted--link-decoration--visited:var(--pfe-theme--link-decoration--visited,none)}@supports (display:grid){pfe-navigation{animation:reveal-nav .1618s 4s 1 forwards;max-height:72px;max-height:var(--pfe-navigation__nav-bar--Height,72px)}pfe-navigation>*{animation:reveal-nav-parts .1618s 4s 1 forwards;opacity:0;transition:opacity .1618s ease-in-out;transition:opacity var(--pfe-reveal-duration,.1618s) ease-in-out;visibility:hidden}}pfe-navigation.pfe-navigation--processed,pfe-navigation.pfe-navigation--processed>*{animation:none;opacity:1;visibility:visible}pfe-navigation pfe-primary-detail{display:none}pfe-navigation[pfelement]{display:block}pfe-navigation-dropdown{color:#151515;color:var(--pfe-navigation__dropdown--Color,#151515)}#pfe-navigation[breakpoint=desktop] .hidden-at-desktop[class][class][class],#pfe-navigation[breakpoint=mobile] .hidden-at-mobile[class][class][class],#pfe-navigation[breakpoint=tablet] .hidden-at-tablet[class][class][class],pfe-navigation[breakpoint=desktop] .hidden-at-desktop[class][class][class],pfe-navigation[breakpoint=mobile] .hidden-at-mobile[class][class][class],pfe-navigation[breakpoint=tablet] .hidden-at-tablet[class][class][class]{display:none}#pfe-navigation,#pfe-navigation *,pfe-navigation,pfe-navigation *{box-sizing:border-box}#pfe-navigation [pfelement] .pfe-navigation__log-in-link,pfe-navigation [pfelement] .pfe-navigation__log-in-link{display:none}#pfe-navigation,pfe-navigation{align-items:stretch;background:#151515;background:var(--pfe-navigation__nav-bar--Background,#151515);color:#fff;color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));display:flex;font-family:Red Hat Text,RedHatText,Arial,Helvetica,sans-serif;font-family:var(--pfe-navigation--FontFamily,Red Hat Text,RedHatText,Arial,Helvetica,sans-serif);font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);height:72px;height:var(--pfe-navigation__nav-bar--Height,72px);height:auto;line-height:1.5;margin:0;max-width:9999em;min-height:72px;min-height:var(--pfe-navigation__nav-bar--Height,72px);padding:0 16px;position:relative;z-index:95;z-index:var(--pfe-navigation--ZIndex,var(--pfe-theme--zindex--navigation,95))}@media (min-width:768px){#pfe-navigation,pfe-navigation{flex-wrap:wrap;margin:0;max-width:9999em;padding:0 16px}}@media (min-width:1200px){#pfe-navigation,pfe-navigation{margin:0 auto;padding:0 32px}}#pfe-navigation .pfe-navigation__dropdown,#pfe-navigation pfe-navigation-dropdown,pfe-navigation .pfe-navigation__dropdown,pfe-navigation pfe-navigation-dropdown{display:none}#pfe-navigation>[slot=account],#pfe-navigation>[slot=search],#pfe-navigation>[slot=secondary-links],pfe-navigation>[slot=account],pfe-navigation>[slot=search],pfe-navigation>[slot=secondary-links]{height:0;overflow:hidden;visibility:hidden;width:0}@media (min-width:768px){#pfe-navigation nav.pfe-navigation,pfe-navigation nav.pfe-navigation{align-items:stretch;display:flex;flex-wrap:wrap}}@media (min-width:992px){#pfe-navigation nav.pfe-navigation,pfe-navigation nav.pfe-navigation{flex-wrap:nowrap}}#pfe-navigation .pfe-navigation__logo-wrapper,pfe-navigation .pfe-navigation__logo-wrapper{align-items:center;display:flex;justify-content:flex-start;margin:0;min-width:150px;padding:10px 16px 10px 0}@media (min-width:768px){.pfe-navigation--no-main-menu #pfe-navigation .pfe-navigation__logo-wrapper,.pfe-navigation--no-main-menu pfe-navigation .pfe-navigation__logo-wrapper{margin-right:auto}}.pfe-navigation--collapse-secondary-links .pfe-navigation--no-main-menu #pfe-navigation .pfe-navigation__logo-wrapper,.pfe-navigation--collapse-secondary-links .pfe-navigation--no-main-menu pfe-navigation .pfe-navigation__logo-wrapper{margin-right:0}#pfe-navigation .pfe-navigation__logo-link,pfe-navigation .pfe-navigation__logo-link{border-radius:3px;display:block;margin-left:-8px;outline:0;padding:6px 8px;position:relative}#pfe-navigation .pfe-navigation__logo-link:focus,pfe-navigation .pfe-navigation__logo-link:focus{outline:0}#pfe-navigation .pfe-navigation__logo-link:focus:after,pfe-navigation .pfe-navigation__logo-link:focus:after{border:1px dashed #fff;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation .pfe-navigation__logo-image,pfe-navigation .pfe-navigation__logo-image{display:block;height:auto;width:100%}@media (min-width:576px){#pfe-navigation .pfe-navigation__logo-image,pfe-navigation .pfe-navigation__logo-image{height:40px;height:var(--pfe-navigation__logo--height,40px);width:auto}}@media print{#pfe-navigation .pfe-navigation__logo-image,pfe-navigation .pfe-navigation__logo-image{display:none}}#pfe-navigation .pfe-navigation__logo-image:only-child,pfe-navigation .pfe-navigation__logo-image:only-child{display:block}@media (min-width:576px){#pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--small,pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--small{height:32px;height:var(--pfe-navigation__logo--height,32px)}}@media print{#pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--screen,pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--screen{display:none!important}}@media screen{#pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--print,pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--print{display:none!important}}#pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--screen.pfe-navigation__logo-image--print,pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--screen.pfe-navigation__logo-image--print{display:inline-block!important}#pfe-navigation .pfe-navigation__fallback-links a,#pfe-navigation .pfe-navigation__log-in-link,#pfe-navigation .pfe-navigation__menu-link,#pfe-navigation .pfe-navigation__secondary-link,pfe-navigation .pfe-navigation__fallback-links a,pfe-navigation .pfe-navigation__log-in-link,pfe-navigation .pfe-navigation__menu-link,pfe-navigation .pfe-navigation__secondary-link{--pfe-icon--color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:0 0;border:0;color:#06c;color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));color:#fff;color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));cursor:pointer;display:flex;font-family:inherit;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);justify-content:flex-start;justify-content:center;margin:0;outline:0;padding:8px 24px;position:relative;text-align:center;text-decoration:none;white-space:nowrap;width:100%}@media print{#pfe-navigation .pfe-navigation__fallback-links a,#pfe-navigation .pfe-navigation__log-in-link,#pfe-navigation .pfe-navigation__menu-link,#pfe-navigation .pfe-navigation__secondary-link,pfe-navigation .pfe-navigation__fallback-links a,pfe-navigation .pfe-navigation__log-in-link,pfe-navigation .pfe-navigation__menu-link,pfe-navigation .pfe-navigation__secondary-link{display:none!important}}@media (min-width:768px){#pfe-navigation .pfe-navigation__fallback-links a,#pfe-navigation .pfe-navigation__log-in-link,#pfe-navigation .pfe-navigation__menu-link,#pfe-navigation .pfe-navigation__secondary-link,pfe-navigation .pfe-navigation__fallback-links a,pfe-navigation .pfe-navigation__log-in-link,pfe-navigation .pfe-navigation__menu-link,pfe-navigation .pfe-navigation__secondary-link{--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));color:#fff;color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));display:flex;flex-direction:column;font-size:12px;font-size:var(--pfe-navigation--FontSize--xs,12px);height:72px;height:var(--pfe-navigation__nav-bar--Height,72px);justify-content:flex-end;padding:14px 8px;width:auto}@supports (display:grid){#pfe-navigation .pfe-navigation__fallback-links a,#pfe-navigation .pfe-navigation__log-in-link,#pfe-navigation .pfe-navigation__menu-link,#pfe-navigation .pfe-navigation__secondary-link,pfe-navigation .pfe-navigation__fallback-links a,pfe-navigation .pfe-navigation__log-in-link,pfe-navigation .pfe-navigation__menu-link,pfe-navigation .pfe-navigation__secondary-link{align-items:center;display:grid;grid-template-rows:26px 18px;justify-items:center}}#pfe-navigation .pfe-navigation__fallback-links a[class]:focus,#pfe-navigation .pfe-navigation__fallback-links a[class]:hover,#pfe-navigation .pfe-navigation__log-in-link[class]:focus,#pfe-navigation .pfe-navigation__log-in-link[class]:hover,#pfe-navigation .pfe-navigation__menu-link[class]:focus,#pfe-navigation .pfe-navigation__menu-link[class]:hover,#pfe-navigation .pfe-navigation__secondary-link[class]:focus,#pfe-navigation .pfe-navigation__secondary-link[class]:hover,pfe-navigation .pfe-navigation__fallback-links a[class]:focus,pfe-navigation .pfe-navigation__fallback-links a[class]:hover,pfe-navigation .pfe-navigation__log-in-link[class]:focus,pfe-navigation .pfe-navigation__log-in-link[class]:hover,pfe-navigation .pfe-navigation__menu-link[class]:focus,pfe-navigation .pfe-navigation__menu-link[class]:hover,pfe-navigation .pfe-navigation__secondary-link[class]:focus,pfe-navigation .pfe-navigation__secondary-link[class]:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}}#pfe-navigation .pfe-navigation__fallback-links a:focus,#pfe-navigation .pfe-navigation__fallback-links a:hover,#pfe-navigation .pfe-navigation__log-in-link:focus,#pfe-navigation .pfe-navigation__log-in-link:hover,#pfe-navigation .pfe-navigation__menu-link:focus,#pfe-navigation .pfe-navigation__menu-link:hover,#pfe-navigation .pfe-navigation__secondary-link:focus,#pfe-navigation .pfe-navigation__secondary-link:hover,pfe-navigation .pfe-navigation__fallback-links a:focus,pfe-navigation .pfe-navigation__fallback-links a:hover,pfe-navigation .pfe-navigation__log-in-link:focus,pfe-navigation .pfe-navigation__log-in-link:hover,pfe-navigation .pfe-navigation__menu-link:focus,pfe-navigation .pfe-navigation__menu-link:hover,pfe-navigation .pfe-navigation__secondary-link:focus,pfe-navigation .pfe-navigation__secondary-link:hover{box-shadow:inset 4px 0 0 0 #06c;box-shadow:inset 4px 0 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}@media (min-width:768px){#pfe-navigation .pfe-navigation__fallback-links a:focus,#pfe-navigation .pfe-navigation__fallback-links a:hover,#pfe-navigation .pfe-navigation__log-in-link:focus,#pfe-navigation .pfe-navigation__log-in-link:hover,#pfe-navigation .pfe-navigation__menu-link:focus,#pfe-navigation .pfe-navigation__menu-link:hover,#pfe-navigation .pfe-navigation__secondary-link:focus,#pfe-navigation .pfe-navigation__secondary-link:hover,pfe-navigation .pfe-navigation__fallback-links a:focus,pfe-navigation .pfe-navigation__fallback-links a:hover,pfe-navigation .pfe-navigation__log-in-link:focus,pfe-navigation .pfe-navigation__log-in-link:hover,pfe-navigation .pfe-navigation__menu-link:focus,pfe-navigation .pfe-navigation__menu-link:hover,pfe-navigation .pfe-navigation__secondary-link:focus,pfe-navigation .pfe-navigation__secondary-link:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}}.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__fallback-links a:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__fallback-links a:hover,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__log-in-link:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__log-in-link:hover,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__menu-link:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__menu-link:hover,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__secondary-link:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__secondary-link:hover,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__fallback-links a:focus,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__fallback-links a:hover,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__log-in-link:focus,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__log-in-link:hover,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__menu-link:focus,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__menu-link:hover,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__secondary-link:focus,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__secondary-link:hover{box-shadow:inset 4px 0 0 0 #06c;box-shadow:inset 4px 0 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}#pfe-navigation .pfe-navigation__fallback-links a:focus,#pfe-navigation .pfe-navigation__log-in-link:focus,#pfe-navigation .pfe-navigation__menu-link:focus,#pfe-navigation .pfe-navigation__secondary-link:focus,pfe-navigation .pfe-navigation__fallback-links a:focus,pfe-navigation .pfe-navigation__log-in-link:focus,pfe-navigation .pfe-navigation__menu-link:focus,pfe-navigation .pfe-navigation__secondary-link:focus{outline:0}#pfe-navigation .pfe-navigation__fallback-links a:focus:after,#pfe-navigation .pfe-navigation__log-in-link:focus:after,#pfe-navigation .pfe-navigation__menu-link:focus:after,#pfe-navigation .pfe-navigation__secondary-link:focus:after,pfe-navigation .pfe-navigation__fallback-links a:focus:after,pfe-navigation .pfe-navigation__log-in-link:focus:after,pfe-navigation .pfe-navigation__menu-link:focus:after,pfe-navigation .pfe-navigation__secondary-link:focus:after{border:1px dashed;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation .pfe-navigation__fallback-links a pfe-icon,#pfe-navigation .pfe-navigation__log-in-link pfe-icon,#pfe-navigation .pfe-navigation__menu-link pfe-icon,#pfe-navigation .pfe-navigation__secondary-link pfe-icon,pfe-navigation .pfe-navigation__fallback-links a pfe-icon,pfe-navigation .pfe-navigation__log-in-link pfe-icon,pfe-navigation .pfe-navigation__menu-link pfe-icon,pfe-navigation .pfe-navigation__secondary-link pfe-icon{pointer-events:none}#pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,#pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__log-in-link>pfe-icon,#pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__menu-link>pfe-icon,#pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__secondary-link>pfe-icon,pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__log-in-link>pfe-icon,pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__menu-link>pfe-icon,pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__secondary-link>pfe-icon{--pfe-icon--size:18px;padding-right:5px}@media (min-width:768px){#pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,#pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__log-in-link>pfe-icon,#pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__menu-link>pfe-icon,#pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__secondary-link>pfe-icon,pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__log-in-link>pfe-icon,pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__menu-link>pfe-icon,pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__secondary-link>pfe-icon{padding-right:0;padding:2px 0 4px}}.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__log-in-link>pfe-icon,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__menu-link>pfe-icon,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__secondary-link>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__log-in-link>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__menu-link>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__secondary-link>pfe-icon{padding:0 16px 0 0}#pfe-navigation .pfe-navigation__fallback-links a pfe-icon,#pfe-navigation .pfe-navigation__log-in-link pfe-icon,#pfe-navigation .pfe-navigation__menu-link pfe-icon,#pfe-navigation .pfe-navigation__secondary-link pfe-icon,pfe-navigation .pfe-navigation__fallback-links a pfe-icon,pfe-navigation .pfe-navigation__log-in-link pfe-icon,pfe-navigation .pfe-navigation__menu-link pfe-icon,pfe-navigation .pfe-navigation__secondary-link pfe-icon{display:block;height:18px}#pfe-navigation .pfe-navigation__fallback-links a[class],#pfe-navigation .pfe-navigation__fallback-links a[href],#pfe-navigation .pfe-navigation__log-in-link[class],#pfe-navigation .pfe-navigation__log-in-link[href],#pfe-navigation .pfe-navigation__menu-link[class],#pfe-navigation .pfe-navigation__menu-link[href],#pfe-navigation .pfe-navigation__secondary-link[class],#pfe-navigation .pfe-navigation__secondary-link[href],pfe-navigation .pfe-navigation__fallback-links a[class],pfe-navigation .pfe-navigation__fallback-links a[href],pfe-navigation .pfe-navigation__log-in-link[class],pfe-navigation .pfe-navigation__log-in-link[href],pfe-navigation .pfe-navigation__menu-link[class],pfe-navigation .pfe-navigation__menu-link[href],pfe-navigation .pfe-navigation__secondary-link[class],pfe-navigation .pfe-navigation__secondary-link[href]{align-items:center;justify-content:center}#pfe-navigation .pfe-navigation__account-toggle,#pfe-navigation [slot=account]>a[href],pfe-navigation .pfe-navigation__account-toggle,pfe-navigation [slot=account]>a[href]{--pfe-icon--color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:0 0;border:0;color:#06c;color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));cursor:pointer;font-family:inherit;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);justify-content:flex-start;margin:0;outline:0;position:relative;text-align:center;text-decoration:none;white-space:nowrap;width:100%;--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));color:#fff;color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));display:flex;flex-direction:column;font-size:12px;font-size:var(--pfe-navigation--FontSize--xs,12px);height:72px;height:var(--pfe-navigation__nav-bar--Height,72px);justify-content:flex-end;padding:14px 8px;width:auto}@media print{#pfe-navigation .pfe-navigation__account-toggle,#pfe-navigation [slot=account]>a[href],pfe-navigation .pfe-navigation__account-toggle,pfe-navigation [slot=account]>a[href]{display:none!important}}#pfe-navigation .pfe-navigation__account-toggle:focus,#pfe-navigation .pfe-navigation__account-toggle:hover,#pfe-navigation [slot=account]>a[href]:focus,#pfe-navigation [slot=account]>a[href]:hover,pfe-navigation .pfe-navigation__account-toggle:focus,pfe-navigation .pfe-navigation__account-toggle:hover,pfe-navigation [slot=account]>a[href]:focus,pfe-navigation [slot=account]>a[href]:hover{box-shadow:inset 4px 0 0 0 #06c;box-shadow:inset 4px 0 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}#pfe-navigation .pfe-navigation__account-toggle:focus,#pfe-navigation [slot=account]>a[href]:focus,pfe-navigation .pfe-navigation__account-toggle:focus,pfe-navigation [slot=account]>a[href]:focus{outline:0}#pfe-navigation .pfe-navigation__account-toggle:focus:after,#pfe-navigation [slot=account]>a[href]:focus:after,pfe-navigation .pfe-navigation__account-toggle:focus:after,pfe-navigation [slot=account]>a[href]:focus:after{border:1px dashed;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation .pfe-navigation__account-toggle pfe-icon,#pfe-navigation [slot=account]>a[href] pfe-icon,pfe-navigation .pfe-navigation__account-toggle pfe-icon,pfe-navigation [slot=account]>a[href] pfe-icon{pointer-events:none}@supports (display:grid){#pfe-navigation .pfe-navigation__account-toggle,#pfe-navigation [slot=account]>a[href],pfe-navigation .pfe-navigation__account-toggle,pfe-navigation [slot=account]>a[href]{align-items:center;display:grid;grid-template-rows:26px 18px;justify-items:center}}#pfe-navigation .pfe-navigation__account-toggle[class]:focus,#pfe-navigation .pfe-navigation__account-toggle[class]:hover,#pfe-navigation [slot=account]>a[href][class]:focus,#pfe-navigation [slot=account]>a[href][class]:hover,pfe-navigation .pfe-navigation__account-toggle[class]:focus,pfe-navigation .pfe-navigation__account-toggle[class]:hover,pfe-navigation [slot=account]>a[href][class]:focus,pfe-navigation [slot=account]>a[href][class]:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}@media print{#pfe-navigation .pfe-navigation__account-toggle,#pfe-navigation [slot=account]>a[href],pfe-navigation .pfe-navigation__account-toggle,pfe-navigation [slot=account]>a[href]{display:none}}#pfe-navigation .pfe-navigation__account-toggle pfe-icon,#pfe-navigation [slot=account]>a[href] pfe-icon,pfe-navigation .pfe-navigation__account-toggle pfe-icon,pfe-navigation [slot=account]>a[href] pfe-icon{--pfe-icon--size:18px;padding:2px 0 4px}@media (min-width:768px){#pfe-navigation .pfe-navigation__account-toggle pfe-icon,#pfe-navigation [slot=account]>a[href] pfe-icon,pfe-navigation .pfe-navigation__account-toggle pfe-icon,pfe-navigation [slot=account]>a[href] pfe-icon{padding-right:0}}#pfe-navigation .pfe-navigation__account-toggle:focus,#pfe-navigation .pfe-navigation__account-toggle:hover,#pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true],#pfe-navigation [slot=account]>a[href][href]:focus,#pfe-navigation [slot=account]>a[href][href]:hover,pfe-navigation .pfe-navigation__account-toggle:focus,pfe-navigation .pfe-navigation__account-toggle:hover,pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true],pfe-navigation [slot=account]>a[href][href]:focus,pfe-navigation [slot=account]>a[href][href]:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}#pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true],pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true]{--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515));background:#fff;background:var(--pfe-navigation__nav-bar--toggle--BackgroundColor--active,var(--pfe-theme--color--surface--lightest,#fff));color:#151515;color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515))}#pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true]:focus,pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true]:focus{outline:0}#pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true]:focus:after,pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true]:focus:after{border:1px dashed #151515;border:1px dashed var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515));bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation .pfe-navigation__fallback-links,#pfe-navigation .pfe-navigation__menu,pfe-navigation .pfe-navigation__fallback-links,pfe-navigation .pfe-navigation__menu{font-size:inherit;list-style:none;margin:0;padding:0}@media (min-width:768px){#pfe-navigation .pfe-navigation__fallback-links,#pfe-navigation .pfe-navigation__menu,pfe-navigation .pfe-navigation__fallback-links,pfe-navigation .pfe-navigation__menu{align-items:stretch;display:flex}}#pfe-navigation .pfe-navigation__fallback-links li,#pfe-navigation .pfe-navigation__menu li,pfe-navigation .pfe-navigation__fallback-links li,pfe-navigation .pfe-navigation__menu li{font-size:inherit;margin:0;padding:0}#pfe-navigation .pfe-navigation__fallback-links li:before,#pfe-navigation .pfe-navigation__menu li:before,pfe-navigation .pfe-navigation__fallback-links li:before,pfe-navigation .pfe-navigation__menu li:before{content:none}#pfe-navigation .pfe-navigation__fallback-links,pfe-navigation .pfe-navigation__fallback-links{margin-left:auto}#pfe-navigation .pfe-navigation__menu-link,pfe-navigation .pfe-navigation__menu-link{display:flex;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);white-space:nowrap}#pfe-navigation.pfe-navigation--processed,pfe-navigation.pfe-navigation--processed{display:block;padding:0}#pfe-navigation.pfe-navigation--processed:before,pfe-navigation.pfe-navigation--processed:before{content:none}#pfe-navigation.pfe-navigation--processed>[slot=account],#pfe-navigation.pfe-navigation--processed>[slot=search],#pfe-navigation.pfe-navigation--processed>[slot=secondary-links],pfe-navigation.pfe-navigation--processed>[slot=account],pfe-navigation.pfe-navigation--processed>[slot=search],pfe-navigation.pfe-navigation--processed>[slot=secondary-links]{height:auto;overflow:visible;visibility:visible;width:auto}#pfe-navigation.pfe-navigation--processed pfe-navigation-dropdown,pfe-navigation.pfe-navigation--processed pfe-navigation-dropdown{display:block}#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown,#pfe-navigation.pfe-navigation--processed pfe-navigation-dropdown,#pfe-navigation.pfe-navigation--processed>[slot],pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown,pfe-navigation.pfe-navigation--processed pfe-navigation-dropdown,pfe-navigation.pfe-navigation--processed>[slot]{animation:none;opacity:1}#pfe-navigation.pfe-navigation--processed [slot=secondary-links],pfe-navigation.pfe-navigation--processed [slot=secondary-links]{display:block;height:auto;list-style:none;margin:0 0 8px;padding:0;width:auto}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links],pfe-navigation.pfe-navigation--processed [slot=secondary-links]{margin:0}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]{margin:0 0 8px}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button{--pfe-icon--color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:0 0;border:0;color:#06c;color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));cursor:pointer;display:flex;font-family:inherit;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);justify-content:flex-start;margin:0;outline:0;padding:8px 24px;position:relative;text-align:center;text-decoration:none;white-space:nowrap;width:100%}@media print{#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button{display:none!important}}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button{--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));color:#fff;color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));display:flex;flex-direction:column;font-size:12px;font-size:var(--pfe-navigation--FontSize--xs,12px);height:72px;height:var(--pfe-navigation__nav-bar--Height,72px);justify-content:flex-end;padding:14px 8px;width:auto}@supports (display:grid){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button{align-items:center;display:grid;grid-template-rows:26px 18px;justify-items:center}}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[class]:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[class]:hover,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[class]:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[class]:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[class]:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[class]:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[class]:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[class]:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover{box-shadow:inset 4px 0 0 0 #06c;box-shadow:inset 4px 0 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover{box-shadow:inset 4px 0 0 0 #06c;box-shadow:inset 4px 0 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus{outline:0}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus:after,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus:after,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus:after,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus:after{border:1px dashed;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a pfe-icon,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button pfe-icon{pointer-events:none}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon{--pfe-icon--size:18px;padding-right:5px}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon{padding-right:0;padding:2px 0 4px}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon{padding:0 16px 0 0}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a pfe-icon,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button pfe-icon{display:block;height:18px}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus{outline:0}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus:after,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus:after,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus:after,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus:after{border:1px dashed #fff;border:1px dashed var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus{box-shadow:none}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[aria-expanded=true],#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[aria-expanded=true],pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[aria-expanded=true],pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[aria-expanded=true]{--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515));background:#fff;background:var(--pfe-navigation__nav-bar--toggle--BackgroundColor--active,var(--pfe-theme--color--surface--lightest,#fff));color:#151515;color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515))}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[aria-expanded=true],.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[aria-expanded=true],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[aria-expanded=true],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[aria-expanded=true]{background:0 0;box-shadow:none}#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown__wrapper--single-column,pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown__wrapper--single-column{position:relative}#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown__wrapper,pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown__wrapper{display:block}#pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class],pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class]{height:0;transition:height .25s ease-in-out;transition:var(--pfe-navigation--accordion-transition,height .25s ease-in-out)}@media (prefers-reduced-motion){#pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class],pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class]{transition:none}}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class],pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class]{position:absolute;right:0;top:72px;top:var(--pfe-navigation__nav-bar--Height,72px)}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class]{position:static}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class][aria-hidden=false],pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class][aria-hidden=false]{height:auto}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class][aria-hidden=false],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class][aria-hidden=false]{height:0}#pfe-navigation.pfe-navigation--processed[breakpoint=mobile] [slot=secondary-links][mobile-slider] .pfe-navigation__dropdown-wrapper,pfe-navigation.pfe-navigation--processed[breakpoint=mobile] [slot=secondary-links][mobile-slider] .pfe-navigation__dropdown-wrapper{left:100vw;left:calc(100vw - 32px);left:calc(100vw - var(--pfe-navigation__mobile-dropdown--PaddingHorizontal,32px));position:absolute;top:0;width:100vw}#pfe-navigation.pfe-navigation--processed[breakpoint=mobile] [slot=secondary-links][mobile-slider] .pfe-navigation__dropdown-wrapper[aria-hidden=false],pfe-navigation.pfe-navigation--processed[breakpoint=mobile] [slot=secondary-links][mobile-slider] .pfe-navigation__dropdown-wrapper[aria-hidden=false]{height:100vh;height:calc(100vh - 72px);height:calc(100vh - var(--pfe-navigation__nav-bar--Height,72px));overflow-y:scroll}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper{background:#fff;background:var(--pfe-navigation__dropdown--Background,var(--pfe-theme--color--surface--lightest,#fff));padding:0 24px;padding:0 var(--pfe-navigation__dropdown--full-width--spacing--mobile,24px)}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper{padding:0 64px24px;padding:0 var(--pfe-navigation__dropdown--full-width--spacing--desktop,64px) var(--pfe-navigation__dropdown--full-width--spacing--mobile,24px)}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper{padding:0 24px;padding:0 var(--pfe-navigation__dropdown--full-width--spacing--mobile,24px)}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a{border:1px solid transparent;color:#06c;color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));display:inline-block}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:hover{color:#036;color:var(--pfe-navigation__dropdown--link--Color--hover,#036);text-decoration:underline}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:focus{border:1px dashed;outline:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level],#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level],#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level],pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level],pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6{margin:32px 0 .75em;margin:var(--pfe-navigation--gutter,32px) 0 .75em;padding:0;-moz-column-break-inside:avoid;break-inside:avoid;color:#464646;color:var(--pfe-navigation__dropdown--headings--Color,#464646);font-family:Red Hat Display,RedHatDisplay,Arial,Helvetica,sans-serif;font-family:var(--pfe-navigation--FontFamilyHeadline,Red Hat Display,RedHatDisplay,Arial,Helvetica,sans-serif);font-size:1.125rem;font-size:var(--pf-global--FontSize--lg,1.125rem);font-weight:500}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level]:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level]:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level]:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level]:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6:first-child{margin-top:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a{border:1px solid transparent;color:#464646;color:var(--pfe-navigation__dropdown--headings--Color,#464646);text-decoration:underline}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:hover{color:#036;color:var(--pfe-navigation__dropdown--link--Color--hover,#036);text-decoration:none}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:focus{border:1px dashed;outline:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container li,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles li,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container li,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles li{margin:0 0 16px;-moz-column-break-inside:avoid;break-inside:avoid}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-card,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-card,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-card,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-card,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta{-moz-column-break-inside:avoid;break-inside:avoid}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary],#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary],#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary],#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary],pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary],pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary],pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary],pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary]{--pfe-cta--BackgroundColor:var(--pfe-navigation__dropdown--pfe-cta--BackgroundColor,#e00);--pfe-cta--BackgroundColor--hover:var(--pfe-navigation__dropdown--pfe-cta--hover--BackgroundColor,#c00);--pfe-theme--ui--border-width:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary]:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary]:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary]:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary]:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary]:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary]:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary]:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary]:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary]:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary]:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary]:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary]:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary]:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary]:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary]:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary]:hover{--pfe-cta--BackgroundColor:var(--pfe-navigation__dropdown--pfe-cta--hover--BackgroundColor,#c00)}pfe-card #pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta,pfe-card #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta,pfe-card pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta,pfe-card pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta{margin-top:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container li,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container ul,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles li,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles ul,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container li,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container ul,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles li,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles ul{list-style:none;margin:0;padding:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{color:#151515;color:var(--pfe-navigation__dropdown--Color,#151515);-moz-column-count:auto;column-count:auto;display:block;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);gap:0;margin-left:auto;margin-right:auto;max-width:1136px;max-width:var(--pfe-navigation--content-max-width,1136px);padding-bottom:12px;padding-top:12px;width:calc(100% + 32px)}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{-moz-column-count:3;column-count:3;display:block;gap:32px;gap:var(--pfe-navigation--gutter,32px);padding-bottom:12px;padding-top:12px}}@media (min-width:1200px){#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{-moz-column-count:auto;column-count:auto;display:flex;flex-wrap:wrap;padding-bottom:32px;padding-top:32px}@supports (display:grid){#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{display:grid;gap:32px;gap:var(--pfe-navigation--gutter,32px);grid-auto-flow:row;grid-template-columns:repeat(4,minmax(0,1fr))}}}.pfe-navigation--collapse-main-menu #pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation--collapse-main-menu #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,.pfe-navigation--collapse-main-menu pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation--collapse-main-menu pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{-moz-column-count:3;column-count:3;display:block;gap:32px;gap:var(--pfe-navigation--gutter,32px);padding-bottom:12px;padding-top:12px}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{-moz-column-count:auto;column-count:auto;display:block;gap:0;margin-left:-16px;margin-right:-16px;max-width:1136px;max-width:var(--pfe-navigation--content-max-width,1136px);padding-bottom:12px;padding-top:12px;width:calc(100% + 32px)}.pfe-navigation__menu-item--open #pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation__menu-item--open #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,.pfe-navigation__menu-item--open pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation__menu-item--open pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{transition-delay:0s;visibility:visible}#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*{margin:0 0 18px;-moz-column-break-inside:avoid;break-inside:avoid}@media (min-width:1200px){#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*{margin:0}}.pfe-navigation--collapse-main-menu #pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,.pfe-navigation--collapse-main-menu #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*,.pfe-navigation--collapse-main-menu pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,.pfe-navigation--collapse-main-menu pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*{margin:0 0 18px}#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid{max-width:100%}#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--1-x,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--1-x{display:block}#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown{background:#fff}#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher{margin-left:auto;margin-right:auto;max-width:1136px;max-width:var(--pfe-navigation--content-max-width,1136px);padding:12px 24px;padding:12px var(--pfe-navigation__dropdown--full-width--spacing--mobile,24px)}@media (min-width:1200px){#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher{padding:32px 64px;padding:32px var(--pfe-navigation__dropdown--full-width--spacing--desktop,64px)}}.pfe-navigation--collapse-main-menu #pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher,.pfe-navigation--collapse-main-menu pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher{padding:12px 24px;padding:12px var(--pfe-navigation__dropdown--full-width--spacing--mobile,24px)}#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher .container,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher .container{margin:0;padding:0;width:auto}#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--invisible[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--invisible[class]{padding:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--invisible pfe-navigation-dropdown,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--invisible pfe-navigation-dropdown{visibility:hidden}#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class]{padding:0}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class]{box-shadow:0 1px 2px rgba(0,0,0,.12);box-shadow:var(--pfe-navigation__dropdown--BoxShadow,0 1px 2px rgba(0,0,0,.12));max-width:100%;min-width:13em;padding:0 32px;position:absolute;top:100%}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class]{box-shadow:none;max-width:100%;position:static}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class]{right:0}}#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class]{width:100%}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class]{left:0;position:absolute;right:0}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class]{position:static}#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class] .pfe-navigation__dropdown,pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class] .pfe-navigation__dropdown{width:100%}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles{padding-left:16px;padding-right:16px}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles form,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles form{align-items:center;display:flex}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button,#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input{padding:10px;transition:box-shadow .2s}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input{border:1px solid #f0f0f0;border-bottom-color:#8b8e91;color:#717579;flex-basis:0%;flex-grow:1;flex-shrink:1;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);margin-right:8px}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input::-moz-placeholder,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input::-moz-placeholder{color:#717579}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input::placeholder,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input::placeholder{color:#717579}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button{background-color:#e00;border:1px solid #e00;border-radius:2px;color:#fff;flex-basis:auto;flex-grow:0;flex-shrink:1;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem)}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:hover{outline:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:focus:after,#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:hover:after,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:focus:after,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:hover:after{border:1px dashed #000;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:hover{outline:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:focus:after,#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:hover:after,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:focus:after,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:hover:after{border:1px dashed #fff;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation .pfe-navigation__site-switcher__back-wrapper,pfe-navigation .pfe-navigation__site-switcher__back-wrapper{border-bottom:1px solid #d2d2d2;border-bottom:var(--pfe-navigation__dropdown--separator--Border,1px solid var(--pfe-theme--color--ui--border--lighter,#d2d2d2));display:block}@media (min-width:768px){#pfe-navigation .pfe-navigation__site-switcher__back-wrapper,pfe-navigation .pfe-navigation__site-switcher__back-wrapper{display:none}}.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__site-switcher__back-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__site-switcher__back-wrapper{display:block}#pfe-navigation .pfe-navigation__site-switcher__back-button,pfe-navigation .pfe-navigation__site-switcher__back-button{background-color:transparent;border:1px solid transparent;color:#06c;color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));cursor:pointer;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);padding:21px 21px 21px 45px;position:relative;text-align:left;width:100%}#pfe-navigation .pfe-navigation__site-switcher__back-button:before,pfe-navigation .pfe-navigation__site-switcher__back-button:before{border:2px solid #06c;border:2px solid var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));border-right:0;border-top:0;content:"";display:block;height:8px;left:35px;position:absolute;right:auto;top:27px;transform:rotate(45deg);transform-origin:left top;width:8px}#pfe-navigation .pfe-navigation__site-switcher__back-button:focus,#pfe-navigation .pfe-navigation__site-switcher__back-button:hover,pfe-navigation .pfe-navigation__site-switcher__back-button:focus,pfe-navigation .pfe-navigation__site-switcher__back-button:hover{border:1px dashed #151515;border-top:1px dashed #151515;border:1px dashed var(--pfe-navigation__dropdown--Color,#151515);color:#036;color:var(--pfe-navigation__dropdown--link--Color--hover,#036);outline:0}#pfe-navigation.pfe-navigation--processed site-switcher,pfe-navigation.pfe-navigation--processed site-switcher{-moz-columns:auto;columns:auto;display:block}#pfe-navigation.pfe-navigation--stuck,pfe-navigation.pfe-navigation--stuck{left:0;position:fixed;top:0;width:100%;z-index:95;z-index:var(--pfe-theme--zindex--navigation,95)}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__outer-menu-wrapper__inner,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__outer-menu-wrapper__inner{opacity:1!important}#pfe-navigation.pfe-navigation--in-crusty-browser pfe-navigation-account,#pfe-navigation.pfe-navigation--in-crusty-browser rh-account-dropdown,pfe-navigation.pfe-navigation--in-crusty-browser pfe-navigation-account,pfe-navigation.pfe-navigation--in-crusty-browser rh-account-dropdown{display:none!important}#pfe-navigation.pfe-navigation--in-crusty-browser[open-toggle=pfe-navigation__account-toggle] pfe-navigation-account,#pfe-navigation.pfe-navigation--in-crusty-browser[open-toggle=pfe-navigation__account-toggle] rh-account-dropdown,pfe-navigation.pfe-navigation--in-crusty-browser[open-toggle=pfe-navigation__account-toggle] pfe-navigation-account,pfe-navigation.pfe-navigation--in-crusty-browser[open-toggle=pfe-navigation__account-toggle] rh-account-dropdown{display:block!important}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-item,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-item{display:block}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true],pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true]{--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515));background:#fff;background:var(--pfe-navigation__nav-bar--toggle--BackgroundColor--active,var(--pfe-theme--color--surface--lightest,#fff));color:#151515;color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515))}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true]:focus,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true]:focus{outline:0}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true]:focus:after,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true]:focus:after{border:1px dashed;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown{display:flex;flex-wrap:wrap}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown>.style-scope,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown>.style-scope{flex-basis:25%}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown .pfe-navigation__footer.style-scope,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown .pfe-navigation__footer.style-scope{flex-basis:100%}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown .pfe-navigation__footer.style-scope>.style-scope,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown .pfe-navigation__footer.style-scope>.style-scope{margin-right:16px}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column ul,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column>.style-scope,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column ul,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column>.style-scope{display:flex;flex-direction:column;flex-wrap:nowrap}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column>.style-scope,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column>.style-scope{flex-basis:auto}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link,#pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link,pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a{color:#fff!important;justify-content:center!important}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle[aria-expanded=true],#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link[aria-expanded=true],#pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a[aria-expanded=true],pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle[aria-expanded=true],pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link[aria-expanded=true],pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a[aria-expanded=true]{color:#151515!important}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__account-wrapper--logged-in .pfe-navigation__log-in-link,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle pfe-icon,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link pfe-icon,#pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a pfe-icon,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__account-wrapper--logged-in .pfe-navigation__log-in-link,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle pfe-icon,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link pfe-icon,pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a pfe-icon{display:none!important}[id=pfe-navigation__account-dropdown][class][class]{display:block;height:auto;left:0;padding:0;position:absolute;top:72px;top:var(--pfe-navigation__nav-bar--Height,72px);width:100%}[id=pfe-navigation__account-dropdown].pfe-navigation__dropdown-wrapper--invisible[class]{display:none}.pfe-navigation__dropdown-wrapper{overflow:hidden}@media (min-width:768px){.pfe-navigation__custom-dropdown--single-column{min-width:25em}}.pfe-navigation--collapse-secondary-links .pfe-navigation__custom-dropdown--single-column{min-width:0}.secondary-link__icon-wrapper{align-items:center;display:flex;justify-content:center}.secondary-link__alert-count{background:#06c;background:var(--pfe-navigation__nav-bar--alert-color,var(--pfe-theme--color--link,#06c));border-radius:20px;color:#fff;color:var(--pfe-navigation__nav-bar--Color--on-highlight,var(--pfe-theme--color--text--on-saturated,#fff));display:block;font-size:12px;font-size:var(--pfe-navigation--FontSize--xs,12px);line-height:20px;margin:0 4px 0 2px;min-width:23px;overflow:hidden;padding:0 8px}.secondary-link__alert-count:empty{display:none}#pfe-navigation__1x-skip-links{left:0;position:absolute;top:0}#pfe-navigation__1x-skip-links,#pfe-navigation__1x-skip-links li{height:0;list-style:none;margin:0;padding:0;width:0}.skip-link[class][class]{font-size:.875rem;font-size:var(--pf-global--FontSize--sm,.875rem);line-height:18px}.skip-link[class][class]:focus{border-radius:.21429em;height:auto;left:50%;padding:.42857em .57143em;position:fixed;top:8px;transform:translateX(-50%);width:auto;z-index:99999;clip:auto;background:#fff;background:var(--pfe-navigation__skip-link--BackgroundColor,var(--pfe-theme--color--surface--lightest,#fff));color:#06c;color:var(--pfe-navigation__skip-link--Color,var(--pfe-theme--color--link,#06c));text-decoration:none}pfe-navigation pfe-navigation-account[slot=account]{background:#fff;background:var(--pfe-navigation__dropdown--Background,var(--pfe-theme--color--surface--lightest,#fff));width:100%}</style>
<style>:host([size=sm]) #container[data-v-8589d091]{--_size:var(--pf-global--icon--FontSize--sm,12px)}.content-wrapper[data-v-8589d091]{height:auto;margin:0 auto;min-height:46vh}.content[data-v-8589d091]{max-width:1000px}#left-content[data-v-8589d091]{max-width:330px;z-index:1}.line-below-chp[data-v-8589d091]{margin:var(--rh-space-xl,24px) 0 var(--rh-space-3xl,48px)}.toc-container[data-v-8589d091]{border-right:1px solid var(--rh-color-gray-30,#c7c7c7);min-height:100vh;position:sticky;top:0;transition:transform .3s ease-in-out}nav#toc[data-v-8589d091]{height:auto;overflow-y:auto;padding-bottom:var(--rh-space-2xl,32px)}.max-height-85[data-v-8589d091]{max-height:85vh}.max-height-75[data-v-8589d091]{max-height:75vh}.toc-filter[data-v-8589d091]{background-color:#fff;padding:var(--rh-space-lg,16px) var(--rh-space-2xl,32px);position:sticky;top:-1px;width:100%;z-index:1}#text[data-v-8589d091],.toc-filter[data-v-8589d091]{align-items:center;display:flex}#text[data-v-8589d091]{flex:1;flex-direction:row}#search-icon[data-v-8589d091]{color:#151515;left:2.5rem;position:absolute;top:55%;transform:translateY(-50%)}pf-icon[data-v-8589d091]{--pf-icon--size:16px}#text:focus-within #icon[data-v-8589d091],#text:hover #icon[data-v-8589d091]{color:#151515}#text[data-v-8589d091]:after,#text[data-v-8589d091]:before{content:"";inset:0;pointer-events:none;position:absolute}#text-input[data-v-8589d091]:focus,#text-input:focus+#utilities[data-v-8589d091]{border-bottom:2px solid #06c;outline:none}#text-input[data-v-8589d091]{background-color:transparent;border:1px solid #f0f0f0;border-bottom-color:#8a8d90;color:#151515;font-family:inherit;font-size:100%;grid-area:text-input;line-height:1.5;overflow:hidden;padding:.375rem .25rem .375rem 2rem;position:relative;text-overflow:ellipsis;white-space:nowrap;width:100%}#utilities[data-v-8589d091]{align-items:center;border:1px solid #f0f0f0;border-bottom:1px solid #8a8d90;border-left:0;display:flex}#utilities rh-badge[data-v-8589d091]{border-radius:80px;font-weight:var(--rh-font-weight-heading-medium,500);--_background-color:#e0e0e0;margin-right:8px}#clear-button[data-v-8589d091]{--pf-c-button--PaddingTop:0.625rem;--pf-c-button--PaddingRight:.25rem;--pf-c-button--PaddingBottom:0.625rem;--pf-c-button--PaddingLeft:.25rem;margin-right:8px}#text-input.no-right-border[data-v-8589d091]{border-right:0}.btn-container[data-v-8589d091]{bottom:0;display:flex;justify-content:flex-end;padding:1rem;pointer-events:none;position:fixed;right:0;z-index:2}.top-scroll-btn[data-v-8589d091]{--pf-c-button--BorderRadius:64px;pointer-events:all}.focusable[data-v-8589d091]:focus-visible{border:2px solid var(--rh-color-interactive-blue,#06c)}.mobile-nav-wrapper[data-v-8589d091]{align-items:center;border-bottom:1px solid #c7c7c7;display:flex;height:auto;justify-content:space-between;padding:var(--rh-space-sm,.5rem)}.mobile-nav[data-v-8589d091]{align-items:center;background-color:var(--rh-color-bg-page,#fff);min-height:51px;position:sticky;top:0;z-index:5}.active-mobile-menu[data-v-8589d091]{color:#151515;padding-left:.5rem}.hidden[data-v-8589d091]{display:none}.mobile-nav-btn[data-v-8589d091]{background-color:transparent;border:none;font-family:inherit;font-size:.875rem;font-weight:500;margin:0;min-height:40px;min-width:40px}.border-right[data-v-8589d091]{border-right:1px solid #c7c7c7}.toc-focus-container[data-v-8589d091]{position:sticky;top:0;z-index:2}.toc-focus-btn[data-v-8589d091]{align-items:center;background-color:var(--rh-color-white,#fff);border:1px solid var(--rh-color-blue-50,#06c);border-radius:50%;cursor:pointer;display:flex;height:40px;justify-content:center;position:absolute;right:-20px;top:15px;width:40px}.toc-focus-btn[data-v-8589d091]:focus-visible,.toc-focus-btn[data-v-8589d091]:hover{background-color:var(--rh-color-blue-10,#e0f0ff);box-shadow:var(--rh-box-shadow-sm,0 2px 4px 0 hsla(0,0%,8%,.2))}.toc-focus-btn[data-v-8589d091]:focus-visible{border:2px solid var(--rh-color-blue-50,#06c)}.toc-focus-btn-icon[data-v-8589d091]{color:var(--rh-color-blue-50,#06c)}.toc-wrapper[data-v-8589d091]{padding:0}.product-container[data-v-8589d091]{border-bottom:1px solid var(--rh-color-gray-30,#c7c7c7);padding:var(--rh-space-xl,24px) var(--rh-space-2xl,32px)}.product-container h1.product-title[data-v-8589d091]{font-size:var(--rh-font-size-code-xl,1.25rem);line-height:30px;margin-bottom:0;margin-top:0}.product-container .product-version[data-v-8589d091]{align-items:center;display:flex;flex-wrap:wrap;margin-top:var(--rh-space-lg,16px)}.product-version .version-label[data-v-8589d091]{color:var(--rh-color-canvas-black,#151515);font-family:Red Hat Text;font-size:var(--rh-font-size-body-text-sm,.875rem);font-weight:500}.product-version .version-select-dropdown[data-v-8589d091]{margin:var(--rh-space-md,8px) var(--rh-space-sm,6px);max-width:9.75rem;min-height:2rem;min-width:3rem;overflow:hidden;width:-moz-min-content;width:min-content;word-wrap:nowrap;-webkit-appearance:none;-moz-appearance:none;background:var(--rh-color-white,#fff);background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6' fill='none' viewBox='0 0 10 6'%3E%3Cpath fill='%23151515' d='M.678 0h8.644c.596 0 .895.797.497 1.195l-4.372 4.58c-.298.3-.695.3-.993 0L.18 1.196C-.216.797.081 0 .678 0'/%3E%3C/svg%3E");background-position-x:85%;background-position-y:50%;background-repeat:no-repeat;border:1px solid var(--rh-color-gray-30,#c7c7c7);border-bottom:0;box-shadow:0 -1px 0 0 var(--rh-color-gray-60,#4d4d4d) inset;cursor:pointer;font-size:var(--rh-font-size-body-text-md,1rem);padding:var(--rh-space-md,8px);padding-right:24px;text-overflow:ellipsis}pf-popover[data-v-8589d091]{margin-top:var(--rh-space-md,8px);--pf-c-popover__arrow--BackgroundColor:var(--rh-color-canvas-black,#151515);--pf-c-popover__content--BackgroundColor:var(--rh-color-canvas-black,#151515);--pf-c-popover--BoxShadow:0px 4px 8px 0px #15151540;--pf-c-popover__title-text--Color:var(--rh-color-white,#fff);--pf-c-popover--MaxWidth:300px;--pf-c-popover--MinWidth:300px;--pf-c-popover--c-button--Top:20px;--pf-c-popover--c-button--Right:4px;--pf-c-button--m-plain--hover--Color:var(--rh-color-white,#fff)}pf-popover[data-v-8589d091]::part(content){padding:var(--rh-space-2xl,32px)}pf-popover[data-v-8589d091]::part(body){margin-top:var(--rh-space-lg,16px)}pf-popover[data-v-8589d091]::part(close-button){--pf-c-button--m-plain--focus--Color:var(--rh-color-gray-30,#c7c7c7);--pf-c-button--m-plain--Color:var(--rh-color-gray-30,#c7c7c7)}.popover-header-text[data-v-8589d091]{color:var(--rh-color-white,#fff);font-size:var(--rh-font-size-code-md,1rem);margin:0;max-width:80%;padding:0}.popover-body-link[data-v-8589d091]{color:var(--rh-color-blue-30,#92c5f9);text-decoration:none}.popover-trigger-btn[data-v-8589d091]{align-items:center;background:none;border:none;cursor:pointer;display:flex;justify-content:center}#first-button[data-v-8589d091]{width:80%}#second-button[data-v-8589d091]{text-align:right;width:20%}#toc-btn[data-v-8589d091]{text-align:left;width:100%}.toc-error[data-v-8589d091]{margin:0;max-width:100%}#layout label[data-v-8589d091]{font-weight:500}.page-layout-options[data-v-8589d091]{background-color:#fff;display:flex;flex-direction:column;padding-bottom:var(--rh-space-lg,16px)}.sticky-top[data-v-8589d091]{position:sticky;top:0}summary[data-v-8589d091]{cursor:pointer;list-style:none;position:relative}summary[data-v-8589d091]::-webkit-details-marker{display:none}details#jump-links-details .jump-links-heading[data-v-8589d091]{background-color:var(--rh-color-white,#fff);display:block;margin-top:var(--rh-space-lg,16px);padding:var(--rh-space-lg,16px) 0 0 var(--rh-space-xl,24px);position:sticky;top:0}details#jump-links-details .jump-links-heading[data-v-8589d091]:before{border-right:3px solid #151515;border-top:3px solid #151515;color:#151515;content:"";display:flex;height:9px;left:2px;position:absolute;top:26px;transform:rotate(-135deg);width:9px}details#jump-links-details[open] .jump-links-heading[data-v-8589d091]:before{transform:rotate(135deg)}.table-of-contents>ol[data-v-8589d091]{list-style:none;margin:0;padding:0}nav.table-of-contents[data-v-8589d091]{z-index:1}nav.table-of-contents ol[data-v-8589d091]{list-style:none;margin:0;padding:0}#mobile-browse-docs[data-v-8589d091]{font-weight:var(--rh-font-weight-body-text-medium,500);padding-left:var(--rh-space-2xl,32px)}.docs-content-container[data-v-8589d091]{font-size:var(--rh-font-size-body-text-lg,1.125rem);font-weight:var(--rh-font-weight-body-text-regular,400);line-height:1.6667;padding-left:6rem;padding-right:6rem;padding-top:var(--rh-space-3xl,4rem)}.chapter-title[data-v-8589d091]{font-family:Red Hat Display}h1.chapter-title[data-v-8589d091]{font-size:var(--rh-fontsize-heading-xl,2.25rem);line-height:46.8px;margin:0;padding:0}.chapter .section h4[data-v-8589d091]{font-size:24px;font-weight:400}.banner-wrapper[data-v-8589d091]{padding:3rem 6rem 0}.page-format-dropdown[data-v-8589d091]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#fff;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABtSURBVHgBhc4xCoAwDAXQxE6li0K76w0cPZqjHsEb6AlcHb2BR9ADdG7GmIKTWv0QSOAFPjrndgAo4TtHxszTD4JoVAhh1VoXiNgkUO+971Q8iGgxxlSy1jc3CGof39baWTrzNSOkkksEbG/oBGEJIn6gD3jAAAAAAElFTkSuQmCC");background-position:8.5rem;background-repeat:no-repeat;background-size:auto;border:1px solid #c7c7c7;box-shadow:inset 0 -1px 0 0 #4d4d4d;font-family:Red Hat Text;font-size:var(--rh-font-size-body-text-md,1rem);margin-top:var(--rh-space-xs,4px);max-width:168px;min-height:36px;min-width:168px;overflow:hidden;padding:0 var(--rh-space-xl,24px) 0 var(--rh-space-md,8px);text-overflow:ellipsis;white-space:nowrap}.content-format-selectors[data-v-8589d091]{color:#151515;font-family:Red Hat Text;font-size:var(--rh-font-size-body-text-sm,.875rem);font-weight:var(--rh-font-weight-body-text-medium,500);margin-right:var(--rh-space-2xl,32px);max-width:250px;min-width:250px;padding-top:var(--rh-space-2xl,32px)}.chapter .section .simpara[data-v-8589d091],.chapter .section p[data-v-8589d091]{font-family:Red Hat Text;font-size:var(--rh-font-size-body-text-lg,1.125rem);font-weight:var(--rh-font-weight-body-text-regular,400);line-height:30px}#toggle-focus-mode[data-v-8589d091]{padding-right:var(--rh-space-lg,1rem)}@keyframes slideaway-left-8589d091{0%{display:block}to{opacity:0;transform:translateX(-40px)}}@keyframes slideaway-right-8589d091{0%{display:block}to{opacity:0;transform:translateX(40px)}}@keyframes enter-left-8589d091{0%{display:none;transform:translateX(-40px)}to{opacity:1}}@keyframes enter-right-8589d091{0%{display:none;transform:translateX(40px)}to{opacity:1}}.hide-left[data-v-8589d091]{animation:slideaway-left-8589d091 .2s;display:none}.enter-left[data-v-8589d091]{animation:enter-left-8589d091 .3s;border-right:none;display:block}.enter-right[data-v-8589d091]{animation:enter-right-8589d091 .3s;display:block}.hide-right[data-v-8589d091]{animation:slideaway-right-8589d091 .2s;display:none}.toc-container.enter-toc-container-left[data-v-8589d091]{transform:translateX(-85%)}.alert-section[data-v-8589d091]{padding-bottom:3rem}rh-alert[data-v-8589d091]{width:auto}@media (min-width:992px){#mobile-nav[data-v-8589d091],#toc-list-mobile[data-v-8589d091]{display:none}}@media (min-width:992px) and (max-width:1400px){.docs-ocp-content-container[data-v-8589d091]{padding:var(--rh-space-4xl,64px) var(--rh-space-lg,16px) 0}}@media (width < 992px){#breadcrumbs[data-v-8589d091],.content-format-selectors[data-v-8589d091],.toc-container[data-v-8589d091]{display:none}#mobile-nav-content-wrapper[data-v-8589d091]{border-bottom:1px solid #c7c7c7;border-top:1px solid #c7c7c7}#toc-wrapper-mobile[data-v-8589d091]{padding:var(--rh-space-md,1.5rem)}.product-container[data-v-8589d091]{padding:var(--rh-space-2xl,32px) var(--rh-space-lg,16px)}.product-container.shrink-product-padding[data-v-8589d091]{padding:var(--rh-space-lg,16px)}.product-version .version-select-dropdown[data-v-8589d091]{margin:0 var(--rh-space-lg,16px)}#page-content-options-mobile[data-v-8589d091]{padding:var(--rh-space-lg,2rem)}label[for=page-format][data-v-8589d091],label[for=toggle-focus-mode][data-v-8589d091]{display:block}.page-format-dropdown[data-v-8589d091]{background-position:97%;max-width:100%}nav#mobile-toc-menu[data-v-8589d091]{max-height:50vh;overflow-y:scroll}.mobile-jump-links #first-button[data-v-8589d091]{width:100%}#jump-links-btn[data-v-8589d091]{text-align:left;width:100%}#mobile-jump-links-content-wrapper[data-v-8589d091]{border-bottom:1px solid #c7c7c7;border-top:1px solid #c7c7c7;padding:0 var(--rh-space-lg,16px) var(--rh-space-2xl,32px)}.table-of-contents #browse-docs[data-v-8589d091]{margin-top:1rem;padding-top:var(--rh-space-md,1.5rem)}.mobile-nav[data-v-8589d091]{display:block}.hide-mobile-nav[data-v-8589d091],.mobile-nav[data-v-8589d091]{transition:transform .3s ease-in-out}.hide-mobile-nav[data-v-8589d091]{transform:translateY(-100%)}.docs-content-container[data-v-8589d091]{padding-left:1.25rem;padding-right:1.25rem;padding-top:var(--rh-space-xl,24px)}.banner-wrapper[data-v-8589d091]{padding:0 1rem}.toc-filter-mobile[data-v-8589d091]{align-items:center;display:flex;padding:var(--rh-space-lg,16px);width:100%}#text-input[data-v-8589d091]{padding-left:.5rem}.toc-filter[data-v-8589d091]{display:none}}@media (width <=576px){.content-format-selectors[data-v-8589d091]{display:none}}.informaltable[data-v-8589d091],.rhdocs .informaltable[data-v-8589d091],.rhdocs .table-contents[data-v-8589d091],.rhdocs .table-wrapper[data-v-8589d091],.table-contents[data-v-8589d091],.table-wrapper[data-v-8589d091]{max-height:var(--rh-table--maxHeight);overflow:auto}rh-table[data-v-8589d091]{display:block;margin:2rem 0;max-width:100%}.pvof-doc__wrapper[data-v-8589d091],.rhdocs[data-v-8589d091]{--rh-table--maxHeight:calc(100vh - 12.5rem)}</style>
<style>:is(rh-footer-block) a[data-v-97dd2752]{text-decoration:underline}</style>
<style>:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) a{color:var(--rh-color-link-inline-on-dark,var(--rh-color-interactive-blue-lighter,#92c5f9));text-decoration:none}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) a:hover{color:var(--rh-color-link-inline-hover-on-dark,var(--rh-color-interactive-blue-lightest,#b9dafc));text-decoration:underline}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) a:is(:focus,:focus-within){color:var(--rh-color-link-inline-focus-on-dark,var(--rh-color-interactive-blue-lightest,#b9dafc));text-decoration:underline}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) a:visited{color:var(--rh-color-link-inline-visited-on-dark,var(--rh-color-interactive-blue-lightest,#b9dafc));text-decoration:none}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) a[slot^=logo]{display:block}:is(rh-footer) a[slot^=logo]>img{display:block;height:100%;height:var(--rh-size-icon-04,40px);width:auto}:is(rh-footer,rh-footer-universal,rh-global-footer) :is(h1,h2,h3,h4,h5,h6){font-family:var(--rh-font-family-heading,RedHatDisplay,"Red Hat Display","Noto Sans Arabic","Noto Sans Hebrew","Noto Sans JP","Noto Sans KR","Noto Sans Malayalam","Noto Sans SC","Noto Sans TC","Noto Sans Thai",Helvetica,Arial,sans-serif);line-height:var(--rh-line-height-heading,1.3)}rh-footer [slot=links]:is(h1,h2,h3,h4,h5):nth-of-type(n+5){--_link-header-margin:calc(var(--rh-space-2xl, 32px) - var(--rh-space-lg, 16px))}rh-footer [slot^=links] a{gap:var(--rh-footer-links-gap,var(--rh-space-md,8px))}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) [slot^=links] li{display:contents;margin:0;padding:0}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) [slot^=links] a{color:var(--rh-color-text-primary-on-dark,#fff)!important;display:block;font-size:var(--rh-footer-link-font-size,var(--rh-font-size-body-text-sm,.875rem));width:-moz-fit-content;width:fit-content}:is(rh-footer-universal,rh-global-footer) [slot^=links] a{font-size:inherit}:is(rh-footer,rh-footer-universal,rh-global-footer){--rh-footer-section-side-gap:var(--rh-space-lg,16px)}@media screen and (min-width:768px){:is(rh-footer,rh-footer-universal,rh-global-footer){--rh-footer-section-side-gap:var(--rh-space-2xl,32px)}}@media screen and (min-width:1440px){:is(rh-footer,rh-footer-universal,rh-global-footer){--rh-footer-section-side-gap:var(--rh-space-4xl,64px)}}rh-footer:not(:defined){background-color:var(--rh-color-surface-darker,#1f1f1f);display:grid;grid-template-areas:"footer" "global";grid-template-rows:1fr auto;min-height:var(--rh-footer-nojs-min-height,750px);width:100%}:is(rh-footer-universal,rh-global-footer):not(:defined):before{grid-area:global}rh-footer:not(:defined)>[slot=logo]{padding:var(--rh-space-2xl,32px) var(--_section-side-gap)}:is(rh-footer-universal,rh-global-footer):not(:defined)>*,rh-footer:not(:defined)>:not([slot=logo],:is(rh-footer-universal,rh-global-footer)){border:0;clip:rect(1px,1px,1px,1px);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}:is(rh-footer-universal,rh-global-footer):not(:defined){background-color:var(--rh-color-surface-darkest,#151515);display:block;min-height:176px;width:100%}rh-footer-universal rh-footer-copyright{grid-column:-1/1}</style>
<style>.status-legal .status-page-widget[data-v-5f538988]{display:block;margin:.5rem 0;width:11.3125rem;width:-moz-max-content;width:max-content}.status-page-widget[data-v-5f538988]{align-items:center;display:flex;flex-direction:row}.status-legal .status-page-widget .status-description[data-v-5f538988]{color:#ccc;font-weight:600;letter-spacing:.0125rem;line-height:1.5;margin-right:.5rem}.status-good[data-v-5f538988]{background-color:#3e8536}.status-critical[data-v-5f538988]{background-color:#a30100}.status-partial[data-v-5f538988]{background-color:#f5c12d}.status-maintentance[data-v-5f538988]{background-color:#316dc1}.status-minor[data-v-5f538988]{background-color:#b85c00}.status-description[data-v-5f538988]{color:#ccc;font-weight:500;letter-spacing:.2px;line-height:1.5}.current-status-indicator[data-v-5f538988]{border-radius:6px;display:inline-block;height:12px;margin:0 0 0 5px;width:12px}.current-status-indicator.small[data-v-5f538988]{border-radius:4px;display:inline-block;height:8px;margin:0 0 0 5px;width:8px}</style>
<style>.search-container[data-v-69710f44]{height:100%}.form-box[data-v-69710f44],.search-container[data-v-69710f44]{justify-content:center}.form-box[data-v-69710f44],.search-box[data-v-69710f44],.search-container[data-v-69710f44]{align-items:center;display:flex;width:100%}.search-box[data-v-69710f44]{justify-content:space-between;position:relative}ul[data-v-69710f44]{list-style-type:none}#search-list[data-v-69710f44]{background:#fff;border:1px solid #f0f0f0;box-shadow:0 4px 4px 0 #00000040;color:#151515;display:block;left:0;margin:0;padding:0;position:absolute;top:37px;width:100%;z-index:200}#search-list li[data-v-69710f44]{align-items:center;display:flex;justify-content:space-between;padding:.75rem}#search-list .active[data-v-69710f44],#search-list li[data-v-69710f44]:hover{background:#f0f0f0}.group-title[data-v-69710f44]{border-top:1px solid #4d4d4d;color:#4d4d4d;cursor:default;font-size:12px;font-weight:400;pointer-events:none}.group-title[data-v-69710f44],.group-title[data-v-69710f44]:hover{background:#fff}.search-item-text-elipsis[data-v-69710f44]{display:inline-block;max-width:48%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.search-item-text[data-v-69710f44]{padding-left:1.75rem}.search-item-chip[data-v-69710f44]{float:right}.search-product-version[data-v-69710f44]{background:#fff;border:1px solid #f0f0f0;border-radius:3px;font-size:1rem;font-weight:400;line-height:24px}.search-icon-form[data-v-69710f44]{color:var(--rh-color-gray-50,#707070);left:12px;position:absolute}.input-search-box[data-v-69710f44]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);height:36px;padding:0 40px;width:100%}.input-clear-btn[data-v-69710f44]{align-items:center;background-color:transparent;border:none;display:flex;height:36px;justify-content:center;margin-right:-30px;outline:none;transform:translateX(-30px)}.input-clear-btn[data-v-69710f44]:focus{border:1px solid var(--rh-color-accent-base-on-light,#06c)}.input-clear-btn:focus .input-clear-icon[data-v-69710f44]{color:var(--rh-color-canvas-black,#151515)}.input-clear-icon[data-v-69710f44]{color:#6b6e72;cursor:pointer}.input-clear-icon[data-v-69710f44]:hover{color:var(--rh-color-canvas-black,#151515)}.form-submit-btn[data-v-69710f44]::part(button){align-items:center;background-color:var(--rh-color-gray-20,#e0e0e0);border-radius:0;display:flex;height:36px;justify-content:center;--_default-border-color:var(--rh-color-gray-20,#e0e0e0)}.input-close-btn[data-v-69710f44]{background:none;border:none;cursor:pointer;margin:0 var(--rh-space-lg,16px)}.input-close-icon[data-v-69710f44]{color:var(--rh-color-white,#fff)}@media (max-width:992px){.form-box[data-v-69710f44]{gap:var(--rh-space-md,8px);margin:auto;width:100%}.input-search-box[data-v-69710f44]{border:1px solid var(--rh-color-gray-30,#c7c7c7)}.input-search-box[data-v-69710f44]::-moz-placeholder{color:#6a6e73;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);font-weight:var(--rh-font-weight-code-regular,400);line-height:24px}.input-search-box[data-v-69710f44]::placeholder{color:#6a6e73;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);font-weight:var(--rh-font-weight-code-regular,400);line-height:24px}.search-item-text-elipsis[data-v-69710f44]{max-width:60%}}@media (max-width:767px){.input-close-btn[data-v-69710f44]{display:none}.search-container[data-v-69710f44]{border:1px solid #f0f0f0}}</style>
<style>.breadcrumbs[data-v-798f280c]{align-items:center;background-color:#f6f6f6;display:flex;gap:var(--rh-space-xl,24px);padding:var(--rh-space-lg,16px) var(--rh-space-2xl,32px)}nav[data-v-798f280c]{flex:1}ol[data-v-798f280c]{background-color:#f6f6f6;font-size:.875rem;list-style:none;margin:0;padding:0}li[data-v-798f280c]{color:#151515;display:inline}a[data-v-798f280c]:after{border-bottom-color:transparent;border-left-color:transparent;box-shadow:inset .25rem .25rem 0 .0625rem #8a8d8d;content:"";display:inline-block;height:1.07143em;margin:0 .5em;position:relative;right:0;top:.75em;transform:translateY(-.5em) rotate(135deg) scale(.5);width:1.07143em}</style>
<style>ol[data-v-fa0dae77]{margin:0;padding:0}li[data-v-fa0dae77],ol[data-v-fa0dae77],ul[data-v-fa0dae77]{list-style:none;margin:0}.chapter-title[data-v-fa0dae77]{font-size:1em}.sub-chapter-title[data-v-fa0dae77],.sub-chapter-title a[data-v-fa0dae77]{font-size:.875rem}#toc .link[data-v-fa0dae77],#toc-mobile .link[data-v-fa0dae77],.heading[data-v-fa0dae77],.sub-nav .link[data-v-fa0dae77],.sub-nav .link .link[data-v-fa0dae77]{display:block;padding:var(--rh-space-md,8px) var(--rh-space-2xl,32px);padding-right:2.5em;text-decoration:none;transition:background-color .25s}.heading[data-v-fa0dae77]:hover,.link[data-v-fa0dae77]:hover,.sub-nav .link[data-v-fa0dae77]:hover{background:var(--rh-color-surface-lighter,#f2f2f2);box-shadow:inset 3px 0 0 0 #d2d2d2;color:#151515}details[open]:first-of-type>.heading[data-v-fa0dae77]:after{transform:rotate(135deg)}.item[data-v-fa0dae77]{line-height:22px}#toc .link[data-v-fa0dae77],#toc-mobile .link[data-v-fa0dae77]{color:var(--rh-color-text-primary-on-light,#151515)}.sub-nav[data-v-fa0dae77],.toc-wrapper[data-v-fa0dae77]{list-style:none;margin:0}.toc-wrapper[data-v-fa0dae77]{min-width:100%;padding:0}.sub-nav[data-v-fa0dae77]{font-size:1em;line-height:24px;padding-left:1rem;padding-left:16px}.sub-nav .link[data-v-fa0dae77]:hover{color:#151515}.active[data-v-fa0dae77]{background:var(--rh-color-surface-lighter,#f2f2f2);box-shadow:inset 3px 0 0 0 var(--rh-color-icon-primary-on-light,#e00)}.chapter-landing-page[data-v-fa0dae77]{font-weight:500}summary[data-v-fa0dae77]{cursor:pointer;list-style:none;position:relative}summary[data-v-fa0dae77]::-webkit-details-marker{display:none}@keyframes slideDown-fa0dae77{0%{height:0;opacity:0}to{height:var(--details-height-open,"100%");opacity:1}}html[data-v-fa0dae77]{--details-transition-time:400ms}details[data-v-fa0dae77]{max-height:var(--details-height-closed,auto);transition:all ease-out var(--details-transition-time,0)}details[open][data-v-fa0dae77]{max-height:var(--details-height-open,auto)}details .heading.sub-chapter-title[data-v-fa0dae77]:after,details .heading[data-v-fa0dae77]:after{border-right:3px solid #151515;border-top:3px solid #151515;color:#151515;content:"";display:flex;float:right;height:9px;margin-left:16px;position:absolute;right:var(--rh-space-xl,24px);top:14px;transform:rotate(45deg);width:9px}details .heading.sub-chapter-title[data-v-fa0dae77]:after{height:8px;width:8px}</style>
<style>.item[data-v-b883c74f]{line-height:22px}#toc .link[data-v-b883c74f],#toc-mobile .link[data-v-b883c74f]{color:var(--rh-color-text-primary-on-light,#151515)}#toc .link[data-v-b883c74f],#toc-mobile .link[data-v-b883c74f],.heading[data-v-b883c74f],.sub-nav .link[data-v-b883c74f],.sub-nav .link .link[data-v-b883c74f]{display:block;padding:var(--rh-space-md,8px) var(--rh-space-2xl,32px);padding-right:2.5em;text-decoration:none;transition:background-color .25s}.heading[data-v-b883c74f]:hover,.link[data-v-b883c74f]:hover,.sub-nav .link[data-v-b883c74f]:hover{background:var(--rh-color-surface-lighter,#f2f2f2);box-shadow:inset 3px 0 0 0 #d2d2d2;color:#151515}ol[data-v-b883c74f]{margin:0;padding:0}li[data-v-b883c74f],ol[data-v-b883c74f],ul[data-v-b883c74f]{list-style:none;margin:0}.chapter-title[data-v-b883c74f]{font-size:1em}.sub-nav[data-v-b883c74f]{font-size:1em;line-height:24px;list-style:none;margin:0;padding-left:1rem;padding-left:16px}.sub-nav .link[data-v-b883c74f]:hover{color:#151515}.active[data-v-b883c74f]{background:var(--rh-color-surface-lighter,#f2f2f2);box-shadow:inset 3px 0 0 0 var(--rh-color-icon-primary-on-light,#e00)}.sub-chapter-title[data-v-b883c74f],.sub-chapter-title a[data-v-b883c74f]{font-size:.875rem}summary[data-v-b883c74f]{cursor:pointer;list-style:none;position:relative}summary[data-v-b883c74f]::-webkit-details-marker{display:none}html[data-v-b883c74f]{--details-transition-time:400ms}.chapter-landing-page[data-v-b883c74f]{font-weight:500}details[open]:first-of-type>.heading[data-v-b883c74f]:after{transform:rotate(135deg)}details[data-v-b883c74f]{max-height:var(--details-height-closed,auto);transition:all ease-out var(--details-transition-time,0)}details[open][data-v-b883c74f]{max-height:var(--details-height-open,auto)}details .heading.sub-chapter-title[data-v-b883c74f]:after,details .heading[data-v-b883c74f]:after{border-right:3px solid #151515;border-top:3px solid #151515;color:#151515;content:"";display:flex;float:right;height:9px;margin-left:16px;position:absolute;right:var(--rh-space-xl,24px);top:14px;transform:rotate(45deg);width:9px}details .heading.sub-chapter-title[data-v-b883c74f]:after{height:8px;width:8px}</style>
<style>.html-container[data-v-9c2a9ddb]{padding:2rem 1.5rem 0}rh-alert[data-v-9c2a9ddb]{color:#151515}@media (max-width:772px){.html-container[data-v-9c2a9ddb]{padding:3rem 1rem 0}}</style>
<link rel="stylesheet" href="/_nuxt/entry.DNAluCmw.css" integrity="sha384-FnrZajt9k3u4tri3ClqikI96k+jP7kyrvgKKgdzBr5Y8CQEi3gusKE0+eMSLvGxm">
<link rel="stylesheet" href="/_nuxt/SearchAutocomplete.DkrJaF8R.css" integrity="sha384-Zw8gf6w7SrpWDmknvrab5QanIN+DSJRS/bPB9/lgDkhR7JhDmG/VF++MTMKU8mKB">
<link rel="stylesheet" href="/_nuxt/Breadcrumbs.BLkLxUMB.css" integrity="sha384-f6iEfCywVoZB0/hIKTRaxywtS21KzhBx2JOI/uVjjU9aqFcP7X9cqLH29w2HQvLe">
<link rel="stylesheet" href="/_nuxt/Alert.fTkXFs3h.css" integrity="sha384-yFMpT5E64LAQi3qJ10AJJ1oOH3DrI68OvLSjSivjNCQXZ25pmFxlPavPQ0TEyEpq">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/C3PvZR0C.js" integrity="sha384-H9Can2ny34kmIBk2SNFJRaBH6FotFjI6LVF8tQ4HqJnqY0a1tGDF/4RHxK2LFs7c">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Ds9UYxCD.js" integrity="sha384-PFyBx6Pvk48yXM+prD4CDErW/3HFtPEqORVyAch5qDvJSyubA93+vR4jsWGRQKZs">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BUXK7nH-.js" integrity="sha384-Kqf3r1QrD7+NOn9EuK/ba9sTBZjn7vLAjnCoRtq7IKz+QV0JUUBFf1Snf1yVkkgr">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BxBriHwM.js" integrity="sha384-bejD6BN5N1iVRo5Ymn+LdVN0jvrnJTzgqgFD9xQ5+Yi46U6ff+s5W2AISzRWvJaM">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DB5Lt3x5.js" integrity="sha384-Ae/gV/4Dt4jnJApC0CWbckKJ7omq+W9Hb4jjdMyhxGJpwk6FlO7pGYMD3bPO/h1y">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/D8BFaW0S.js" integrity="sha384-/m09v/yYk14L9Hra6/9jYtMTn2IdkKQvzpFPRQ5P/baRKwdZQN98873hqvwuYXFS">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/_58Q44fW.js" integrity="sha384-EdSd8jpnetO/BWDAc8C4SpQExZ7pYjMygNPvbLmiA1TaYsNUdVOqIIyOIzaErEeU">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DOCUiUcq.js" integrity="sha384-9H868K5q7MLzC8TSRXT3pVqDzsOVxZLYvUQ8cLGpHPZCFEyEJjnwSHE+/7FWrJPV">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CiTVMRA7.js" integrity="sha384-xBIJ2xO0t62/oREKqSxPtW1tRxKY+5YYXbGcJ0QR9IRM28JhL+53NOiAvVFn3rmF">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/CR3F0y4K.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/Bn-QuJwp.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/T_zvNmZe.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/Ciddaed-.js">
<link rel="prefetch" as="image" type="image/svg+xml" href="/_nuxt/Footer_Cloud.DpSdW8MR.svg">
<script type="module">
      import "@rhds/elements/rh-cta/rh-cta.js";
      </script>
<script type="module">
      import '@rhds/elements/rh-alert/rh-alert.js';
      </script>
<script type="module">
        import "/scripts/v1/@cpelements/pfe-navigation/dist/pfe-navigation.min.js";
        import "/scripts/v1/@rhds/elements/elements/rh-button/rh-button.js";
      </script>
<script type="module">import "@rhds/elements/rh-footer/rh-footer.js"</script>
<script type="module">
        import "/scripts/v1/@rhds/elements/elements/rh-button/rh-button.js";
        import "@patternfly/elements/pf-badge/pf-badge.js";
      </script>
<link rel="canonical" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html-single/configuring_and_managing_networking/index">
<script type="module">
      import "@rhds/elements/rh-alert/rh-alert.js";
      import "@rhds/elements/rh-code-block/rh-code-block.js";
      import '@rhds/elements/rh-cta/rh-cta.js';
      import '@patternfly/elements/pf-switch/pf-switch.js';
      import '@cpelements/rh-table/dist/rh-table.js';
      import '@patternfly/pfe-clipboard/dist/pfe-clipboard.min.js';
      import '@patternfly/elements/pf-button/pf-button.js';
      import '@patternfly/elements/pf-modal/pf-modal.js';
      import '@patternfly/elements/pf-icon/pf-icon.js';
      import '@patternfly/elements/pf-popover/pf-popover.js';
      import '@patternfly/elements/pf-tooltip/pf-tooltip.js';
      import '@rhds/elements/rh-badge/rh-badge.js';
      </script>
<meta name="description" content="Configuring and managing networking | Red Hat Documentation">
<meta name="app-version" content="v0.0.1">
<script type="module">
        import "/scripts/v1/@rhds/elements/elements/rh-button/rh-button.js";
      </script>
<script type="module">
      import '@rhds/elements/rh-alert/rh-alert.js';
      </script>
<script type="module" src="/_nuxt/C3PvZR0C.js" crossorigin integrity="sha384-H9Can2ny34kmIBk2SNFJRaBH6FotFjI6LVF8tQ4HqJnqY0a1tGDF/4RHxK2LFs7c"></script></head><body><div id="__nuxt"><!--[--><!--[--><!----><header data-v-edc0d12c><a href="#pfe-navigation" id="global-skip-to-nav" class="skip-link visually-hidden" data-v-edc0d12c>Skip to navigation</a><a href="#main-content" class="skip-link visually-hidden" data-v-edc0d12c>Skip to content</a><nav id="upper-navigation" class="upper-navigation" aria-labelledby="upper-navigation-label" data-analytics-region="upper-navigation" data-v-edc0d12c><p id="upper-navigation-label" class="upper-nav-hidden" data-v-edc0d12c>Featured links</p><div class="upper-nav-container" data-v-edc0d12c><ul class="upper-nav-menu" data-v-edc0d12c><li data-v-edc0d12c><a href="https://access.redhat.com/" class="upper-nav-links" data-analytics-text="Support" data-analytics-category="Featured Links" data-v-edc0d12c>Support</a></li><li data-v-edc0d12c><a href="https://console.redhat.com/" class="upper-nav-links" data-analytics-text="Console" data-analytics-category="Featured Links" data-v-edc0d12c>Console</a></li><li data-v-edc0d12c><a href="https://developers.redhat.com/" class="upper-nav-links" data-analytics-text="Developers" data-analytics-category="Featured Links" data-v-edc0d12c>Developers</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/products/trials" class="upper-nav-links" data-analytics-text="Start a trial" data-analytics-category="Featured Links" data-v-edc0d12c>Start a trial</a></li><li data-v-edc0d12c><button id="all-red-hat" class="upper-nav-links" data-analytics-text="All Red Hat" data-analytics-category="Featured Links" aria-expanded="false" data-analytics-linktype="tab" data-v-edc0d12c>All Red Hat<svg class="upper-nav-arrow" xmlns="http://www.w3.org/2000/svg" width="1024" height="1024" viewBox="0 0 1024 1024" aria-hidden="true" data-v-edc0d12c=""><path d="M810.642 511.557c0 8.905-3.447 16.776-10.284 23.613L322.31 1013.216c-6.835 6.837-14.706 10.284-23.61 10.284s-16.776-3.447-23.613-10.284l-51.303-51.303c-6.837-6.837-10.284-14.707-10.284-23.612s3.447-16.775 10.284-23.61L626.972 511.5 223.784 108.31c-6.837-6.835-10.284-14.706-10.284-23.61s3.447-16.776 10.284-23.613l51.303-51.303C281.924 2.947 289.794-.5 298.7-.5s16.775 3.447 23.61 10.284L800.36 487.83c6.837 6.837 10.284 14.708 10.284 23.613v.114" data-v-edc0d12c=""/></svg></button><div class="upper-nav-dropdown-container" data-v-edc0d12c><ul data-v-edc0d12c><li data-v-edc0d12c><span data-v-edc0d12c>For customers</span><ul data-v-edc0d12c><li data-v-edc0d12c><a href="https://access.redhat.com/support" data-pzn-audience="customers" data-analytics-category="All Red Hat|For customers" data-analytics-text="Customer support" data-v-edc0d12c>Customer support</a></li><li data-v-edc0d12c><a href="/products" data-pzn-audience="customers" data-analytics-category="All Red Hat|For customers" data-analytics-text="Documentation" data-v-edc0d12c>Documentation</a></li><li data-v-edc0d12c><a href="https://access.redhat.com/support/cases" data-pzn-audience="customers" data-analytics-category="All Red Hat|For customers" data-analytics-text="Support cases" data-v-edc0d12c>Support Cases</a></li><li data-v-edc0d12c><a href="https://access.redhat.com/management" data-pzn-audience="customers" data-analytics-category="All Red Hat|For customers" data-analytics-text="Subscription management" data-v-edc0d12c>Subscription management</a></li><li data-v-edc0d12c><a href="https://catalog.redhat.com/" data-analytics-category="All Red Hat|For customers" data-analytics-text="Red Hat Ecosystem Catalog" data-v-edc0d12c>Red Hat Ecosystem Catalog</a></li><li data-v-edc0d12c><a href="https://catalog.redhat.com/partners" data-analytics-category="All Red Hat|For customers" data-analytics-text="Find a partner" data-v-edc0d12c>Find a partner</a></li></ul></li><li data-v-edc0d12c><span data-v-edc0d12c>For partners</span><ul data-v-edc0d12c><li data-v-edc0d12c><a href="https://connect.redhat.com/login" data-pzn-audience="partners" data-analytics-category="All Red Hat|For partners" data-analytics-text="Partner login" data-v-edc0d12c>Partner login</a></li><li data-v-edc0d12c><a href="https://connect.redhat.com/en/support" data-pzn-audience="partners" data-analytics-category="All Red Hat|For partners" data-analytics-text="Partner support" data-v-edc0d12c>Partner support</a></li><li data-v-edc0d12c><a href="https://connect.redhat.com/" data-pzn-audience="partners" data-analytics-category="All Red Hat|For partners" data-analytics-text="Become a partner " data-v-edc0d12c>Become a partner</a></li></ul></li><li data-v-edc0d12c><span data-v-edc0d12c>Try, buy, &amp; sell</span><ul data-v-edc0d12c><li data-v-edc0d12c><a href="https://marketplace.redhat.com/en-us" data-analytics-category="All Red Hat|Try, buy, &amp; sell" data-analytics-text="Red Hat Marketplace" data-v-edc0d12c>Red Hat Marketplace</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/store" data-analytics-category="All Red Hat|Try, buy, &amp; sell" data-analytics-text="Red Hat Store" data-v-edc0d12c>Red Hat Store</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/contact" data-analytics-category="All Red Hat|Try, buy, &amp; sell" data-analytics-text="Contact sales" data-v-edc0d12c>Contact Sales</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/products/trials" data-analytics-category="All Red Hat|Try, buy, &amp; sell" data-analytics-text="Start a trial" data-v-edc0d12c>Start a trial</a></li></ul></li><li data-v-edc0d12c><span data-v-edc0d12c>Learning resources</span><ul data-v-edc0d12c><li data-v-edc0d12c><a href="https://www.redhat.com/en/services/training-and-certification" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="Training and certification " data-v-edc0d12c>Training and certification</a></li><li data-v-edc0d12c><a href="https://developers.redhat.com/" data-pzn-audience="developers|community" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="For developers" data-v-edc0d12c>For developers</a></li><li data-v-edc0d12c><a href="https://cloud.redhat.com/learn" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="Hybrid cloud learning hub" data-v-edc0d12c>Hybrid cloud learning hub</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/interactive-labs" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="Interactive labs" data-v-edc0d12c>Interactive labs</a></li><li data-v-edc0d12c><a href="https://learn.redhat.com/" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="Learning community" data-v-edc0d12c>Learning community</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/tv" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="Red Hat TV" data-v-edc0d12c>Red Hat TV</a></li></ul></li><li data-v-edc0d12c><span data-v-edc0d12c>Open source communities</span><ul data-v-edc0d12c><li data-v-edc0d12c><a href="https://www.ansible.com/community" data-analytics-category="All Red Hat|Open source communities" data-analytics-text="Ansible" data-v-edc0d12c>Ansible</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/sysadmin/" id="community" data-analytics-category="All Red Hat|Open source communities" data-analytics-text="For system administrators" data-v-edc0d12c>For system administrators</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/architect/" data-pzn-audience="community" data-analytics-category="All Red Hat|Open source communities" data-analytics-text="For architects" data-v-edc0d12c>For architects</a></li></ul></li></ul></div></li></ul></div></nav><pfe-navigation full-width id="pfe-navigation" pf-sticky="true" lang="en" data-v-edc0d12c><nav class="pfe-navigation" aria-label="Main Navigation" data-v-edc0d12c><div class="pfe-navigation__logo-wrapper" id="pfe-navigation__logo-wrapper" data-v-edc0d12c><a href="/en" class="pfe-navigation__logo-link" data-v-edc0d12c><img class="pfe-navigation__logo-image pfe-navigation__logo-image--screen pfe-navigation__logo-image--small" src="/Logo-Red_Hat-Documentation-A-Reverse-RGB.svg" width="240" height="40" alt="Red Hat Documentation" data-v-edc0d12c></a></div></nav><span data-v-edc0d12c></span><div slot="secondary-links" data-v-edc0d12c><div class="hidden-at-desktop hidden-at-tablet search-mobile" data-v-edc0d12c><div id="search-form" class="search-container" opensearchbox="true" data-v-edc0d12c data-v-69710f44><form role="search" class="form-box" autocomplete="off" data-v-69710f44><div class="search-box" data-v-69710f44><pf-icon icon="search" size="md" class="search-icon-form" data-v-69710f44></pf-icon><input type="text" id="input-search" class="input-search-box" placeholder="Search documentation" value aria-autocomplete="list" data-v-69710f44><!----><!----><!----><rh-button disabled variant="tertiary" class="form-submit-btn" data-v-69710f44><img src="data:image/svg+xml,%3csvg%20width=&#39;14&#39;%20height=&#39;14&#39;%20viewBox=&#39;0%200%2014%2014&#39;%20fill=&#39;none&#39;%20xmlns=&#39;http://www.w3.org/2000/svg&#39;%3e%3cpath%20d=&#39;M7%200L5.6%201.4L10.3%206H0V8H10.3L5.6%2012.6L7%2014L14%207L7%200Z&#39;%20fill=&#39;%23707070&#39;/%3e%3c/svg%3e" alt="Submit button" data-v-69710f44></rh-button></div></form><!----></div></div><div class="hidden-at-desktop hidden-at-tablet buttons" data-v-edc0d12c><a href="https://access.redhat.com/" data-analytics-category="More Red Hat" data-analytics-text="Support" data-v-edc0d12c>Support</a><a href="https://console.redhat.com/" data-analytics-category="More Red Hat" data-analytics-text="Console" data-v-edc0d12c>Console</a><a href="https://developers.redhat.com/" data-analytics-category="More Red Hat" data-analytics-text="Developers" data-v-edc0d12c>Developers</a><a href="https://www.redhat.com/en/products/trials" data-analytics-category="More Red Hat" data-analytics-text="Start a trial" data-v-edc0d12c>Start a trial</a><a href="https://www.redhat.com/en/contact" data-analytics-category="More Red Hat" data-analytics-text="Contact" data-v-edc0d12c>Contact</a></div><div class="hidden-at-desktop hidden-at-tablet mobile-lang-select" data-v-edc0d12c><label for="lang_selection" data-v-edc0d12c>Select your language</label><select id="lang_selection" data-v-edc0d12c><!--[--><option value="en" xml:lang="en" hreflang="en" data-v-edc0d12c>English</option><option value="fr" xml:lang="fr" hreflang="fr" data-v-edc0d12c>Français</option><option value="ko" xml:lang="ko" hreflang="ko" data-v-edc0d12c>한국어</option><option value="ja" xml:lang="ja" hreflang="ja" data-v-edc0d12c>日本語</option><option value="zh-cn" xml:lang="zh-cn" hreflang="zh-cn" data-v-edc0d12c>中文 (中国)</option><option value="de" xml:lang="de" hreflang="de" data-v-edc0d12c>Deutsch</option><option value="it" xml:lang="it" hreflang="it" data-v-edc0d12c>Italiano</option><option value="pt-br" xml:lang="pt-br" hreflang="pt-br" data-v-edc0d12c>Português</option><option value="es" xml:lang="es" hreflang="es" data-v-edc0d12c>Español</option><!--]--></select></div></div></pfe-navigation></header><main id="main-content"><!--[--><!--[--><!--[--><!----><!----><!--]--><div class="breadcrumbs" id="breadcrumbs" data-v-8589d091 data-v-798f280c><nav aria-label="Breadcrumb" class="breadcrumb" data-v-798f280c><ol data-v-798f280c><li data-v-798f280c><a href="/" data-v-798f280c>Home</a></li><li data-v-798f280c><a href="/en/products" data-v-798f280c>Products</a></li><!--[--><li data-v-798f280c><a href="/en/documentation/red_hat_enterprise_linux/" data-v-798f280c>Red Hat Enterprise Linux</a></li><li data-v-798f280c><a href="/en/documentation/red_hat_enterprise_linux/9/" data-v-798f280c>9</a></li><li data-v-798f280c><!--[-->Configuring and managing networking<!--]--></li><!--]--></ol></nav><span data-v-798f280c></span></div><!----><nav id="mobile-nav" class="mobile-nav" aria-label="mobile menu" data-v-8589d091><div class="mobile-nav-wrapper" data-v-8589d091><div id="first-button" data-v-8589d091><button id="toc-btn" aria-expanded="false" aria-controls="mobile-nav-content-wrapper" class="mobile-nav-btn" data-v-8589d091><span class="sr-only" data-v-8589d091>Open </span>Table of contents</button></div><div id="second-button" data-v-8589d091><button id="settings-btn" aria-expanded="false" aria-controls="mobile-nav-content-wrapper" class="mobile-nav-btn" data-v-8589d091><pf-icon icon="cog" size="md" data-v-8589d091></pf-icon><span class="sr-only" data-v-8589d091>Open page settings</span></button></div></div><div id="mobile-nav-content-wrapper" class="hidden" role="navigation" tabindex="0" data-v-8589d091><div id="toc-mobile" class="hidden" aria-labelledby="toc-btn" data-v-8589d091><div class="shrink-product-padding product-container" id="product-container-mobile" data-v-8589d091><h1 class="product-title" data-v-8589d091>Red Hat Enterprise Linux</h1><!----></div><div class="toc-filter-mobile" data-v-8589d091><span id="text" part="text" data-v-8589d091><input id="text-input" aria-label="Search input" part="text-input" placeholder="Filter table of contents" type="text" class value data-v-8589d091><!----></span></div><div id="toc-wrapper-mobile" class="span-xs-12 span-sm-4 span-md-3" lang="en" data-v-8589d091><nav id="mobile-toc-menu" class="table-of-contents" aria-label="table of content - mobile" data-v-8589d091><!----></nav></div><!----></div><div id="page-content-options-mobile" class="hidden" aria-labelledby="settings-btn" data-v-8589d091><div class="page-layout-options" data-v-8589d091><label for="page-format-mobile" data-v-8589d091>Format</label><select id="page-format-mobile" class="page-format-dropdown" data-v-8589d091><option class="page-type" value="html" data-v-8589d091>Multi-page</option><option selected class="page-type" value="html-single" data-v-8589d091>Single-page</option><option class="page-type" value="pdf" data-v-8589d091>View full doc as PDF</option></select></div></div></div><!----><!----></nav><div class="grid grid-col-12 content-wrapper" data-v-8589d091><aside id="left-content" class="span-xs-12 span-sm-4 span-md-3" lang="en-us" aria-label="left navigation" xml:lang="en-us" data-v-8589d091><div class="toc-container" id="toc-container" visible="true" data-v-8589d091><div class="toc-focus-container" id="toc-focus-container" data-v-8589d091><button class="toc-focus-btn" aria-label="toggle left menu" aria-controls="toc-container" aria-expanded="true" data-v-8589d091><pf-icon size="md" icon="angle-left" class="toc-focus-btn-icon" data-v-8589d091></pf-icon></button></div><div class="product-container" id="product-container-desktop" data-v-8589d091><h1 class="product-title" data-v-8589d091>Red Hat Enterprise Linux</h1><!----></div><div class="toc-filter" id="toc-filter" data-v-8589d091><span id="text" part="text" data-v-8589d091><span id="search-icon" part="search-icon" data-v-8589d091><pf-icon icon="filter" size="md" data-v-8589d091></pf-icon></span><input id="text-input" aria-label="Search input" part="text-input" placeholder="Filter table of contents" type="text" class value data-v-8589d091><!----></span></div><div id="toc-wrapper" class="toc-wrapper" data-v-8589d091><nav id="toc" class="max-height-85 table-of-contents" aria-label="Table of contents" data-v-8589d091><ol id="toc-list" data-v-8589d091><!--[--><li class="item chapter" data-v-fa0dae77><a class="link active" href id="chapter-index" data-v-fa0dae77>Configuring and managing networking</a></li><li class="item chapter" data-v-fa0dae77><a class="link" href="#proc_providing-feedback-on-red-hat-documentation_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-proc_providing-feedback-on-red-hat-documentation_configuring-and-managing-networking" data-v-fa0dae77>Providing feedback on Red Hat documentation</a></li><li class="item chapter" data-v-fa0dae77><details id="toc--consistent-network-interface-device-naming_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="consistent-network-interface-device-naming_configuring-and-managing-networking--summary" data-v-fa0dae77>1. Implementing consistent network interface naming</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#consistent-network-interface-device-naming_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-consistent-network-interface-device-naming_configuring-and-managing-networking" data-v-fa0dae77>Implementing consistent network interface naming</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#how-the-udev-device-manager-renames-network-interfaces_consistent-network-interface-device-naming" id="sub-link-to-configuring_and_managing_networking-how-the-udev-device-manager-renames-network-interfaces_consistent-network-interface-device-naming" data-v-b883c74f>1.1. How the udev device manager renames network interfaces</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#network-interface-naming-policies_consistent-network-interface-device-naming" id="sub-link-to-configuring_and_managing_networking-network-interface-naming-policies_consistent-network-interface-device-naming" data-v-b883c74f>1.2. Network interface naming policies</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#network-interface-naming-schemes_consistent-network-interface-device-naming" id="sub-link-to-configuring_and_managing_networking-network-interface-naming-schemes_consistent-network-interface-device-naming" data-v-b883c74f>1.3. Network interface naming schemes</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#switching-to-a-different-network-interface-naming-scheme_consistent-network-interface-device-naming" id="sub-link-to-configuring_and_managing_networking-switching-to-a-different-network-interface-naming-scheme_consistent-network-interface-device-naming" data-v-b883c74f>1.4. Switching to a different network interface naming scheme</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_customizing-the-prefix-for-ethernet-interfaces-during-installation_consistent-network-interface-device-naming" id="sub-link-to-configuring_and_managing_networking-proc_customizing-the-prefix-for-ethernet-interfaces-during-installation_consistent-network-interface-device-naming" data-v-b883c74f>1.5. Customizing the prefix for Ethernet interfaces during installation</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-user-defined-network-interface-names-by-using-udev-rules_consistent-network-interface-device-naming" id="sub-link-to-configuring_and_managing_networking-configuring-user-defined-network-interface-names-by-using-udev-rules_consistent-network-interface-device-naming" data-v-b883c74f>1.6. Configuring user-defined network interface names by using udev rules</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-user-defined-network-interface-names-by-using-systemd-link-files_consistent-network-interface-device-naming" id="sub-link-to-configuring_and_managing_networking-configuring-user-defined-network-interface-names-by-using-systemd-link-files_consistent-network-interface-device-naming" data-v-b883c74f>1.7. Configuring user-defined network interface names by using systemd link files</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#assigning-alternative-names-to-a-network-interface-by-using-systemd-link-files_consistent-network-interface-device-naming" id="sub-link-to-configuring_and_managing_networking-assigning-alternative-names-to-a-network-interface-by-using-systemd-link-files_consistent-network-interface-device-naming" data-v-b883c74f>1.8. Assigning alternative names to a network interface by using systemd link files</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-an-ethernet-connection_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-an-ethernet-connection_configuring-and-managing-networking--summary" data-v-fa0dae77>2. Configuring an Ethernet connection</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-an-ethernet-connection_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-configuring-an-ethernet-connection_configuring-and-managing-networking" data-v-fa0dae77>Configuring an Ethernet connection</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-an-ethernet-connection-by-using-nmcli_configuring-an-ethernet-connection" id="sub-link-to-configuring_and_managing_networking-configuring-an-ethernet-connection-by-using-nmcli_configuring-an-ethernet-connection" data-v-b883c74f>2.1. Configuring an Ethernet connection by using nmcli</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-an-ethernet-connection-by-using-the-nmcli-interactive-editor_configuring-an-ethernet-connection" id="sub-link-to-configuring_and_managing_networking-configuring-an-ethernet-connection-by-using-the-nmcli-interactive-editor_configuring-an-ethernet-connection" data-v-b883c74f>2.2. Configuring an Ethernet connection by using the nmcli interactive editor</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-an-ethernet-connection-by-using-nmtui_configuring-an-ethernet-connection" id="sub-link-to-configuring_and_managing_networking-configuring-an-ethernet-connection-by-using-nmtui_configuring-an-ethernet-connection" data-v-b883c74f>2.3. Configuring an Ethernet connection by using nmtui</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-an-ethernet-connection-by-using-control-center_configuring-an-ethernet-connection" id="sub-link-to-configuring_and_managing_networking-configuring-an-ethernet-connection-by-using-control-center_configuring-an-ethernet-connection" data-v-b883c74f>2.4. Configuring an Ethernet connection by using control-center</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-an-ethernet-connection-by-using-nm-connection-editor_configuring-an-ethernet-connection" id="sub-link-to-configuring_and_managing_networking-configuring-an-ethernet-connection-by-using-nm-connection-editor_configuring-an-ethernet-connection" data-v-b883c74f>2.5. Configuring an Ethernet connection by using nm-connection-editor</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-an-ethernet-connection-with-a-static-ip-address-by-using-nmstatectl_configuring-an-ethernet-connection" id="sub-link-to-configuring_and_managing_networking-configuring-an-ethernet-connection-with-a-static-ip-address-by-using-nmstatectl_configuring-an-ethernet-connection" data-v-b883c74f>2.6. Configuring an Ethernet connection with a static IP address by using nmstatectl</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-an-ethernet-connection-with-a-static-ip-address-by-using-the-network-rhel-system-role-with-an-interface-name_configuring-an-ethernet-connection" id="sub-link-to-configuring_and_managing_networking-configuring-an-ethernet-connection-with-a-static-ip-address-by-using-the-network-rhel-system-role-with-an-interface-name_configuring-an-ethernet-connection" data-v-b883c74f>2.7. Configuring an Ethernet connection with a static IP address by using the network RHEL system role with an interface name</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-an-ethernet-connection-with-a-static-ip-address-by-using-the-network-rhel-system-role-with-a-device-path_configuring-an-ethernet-connection" id="sub-link-to-configuring_and_managing_networking-configuring-an-ethernet-connection-with-a-static-ip-address-by-using-the-network-rhel-system-role-with-a-device-path_configuring-an-ethernet-connection" data-v-b883c74f>2.8. Configuring an Ethernet connection with a static IP address by using the network RHEL system role with a device path</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-an-ethernet-connection-with-a-dynamic-ip-address-by-using-nmstatectl_configuring-an-ethernet-connection" id="sub-link-to-configuring_and_managing_networking-configuring-an-ethernet-connection-with-a-dynamic-ip-address-by-using-nmstatectl_configuring-an-ethernet-connection" data-v-b883c74f>2.9. Configuring an Ethernet connection with a dynamic IP address by using nmstatectl</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-an-ethernet-connection-with-a-dynamic-ip-address-by-using-the-network-rhel-system-role-with-an-interface-name_configuring-an-ethernet-connection" id="sub-link-to-configuring_and_managing_networking-configuring-an-ethernet-connection-with-a-dynamic-ip-address-by-using-the-network-rhel-system-role-with-an-interface-name_configuring-an-ethernet-connection" data-v-b883c74f>2.10. Configuring an Ethernet connection with a dynamic IP address by using the network RHEL system role with an interface name</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-an-ethernet-connection-with-a-dynamic-ip-address-by-using-the-network-rhel-system-role-with-a-device-path_configuring-an-ethernet-connection" id="sub-link-to-configuring_and_managing_networking-configuring-an-ethernet-connection-with-a-dynamic-ip-address-by-using-the-network-rhel-system-role-with-a-device-path_configuring-an-ethernet-connection" data-v-b883c74f>2.11. Configuring an Ethernet connection with a dynamic IP address by using the network RHEL system role with a device path</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-multiple-ethernet-interfaces-by-using-a-single-connection-profile-by-interface-name_configuring-an-ethernet-connection" id="sub-link-to-configuring_and_managing_networking-proc_configuring-multiple-ethernet-interfaces-by-using-a-single-connection-profile-by-interface-name_configuring-an-ethernet-connection" data-v-b883c74f>2.12. Configuring multiple Ethernet interfaces by using a single connection profile by interface name</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-single-connection-profile-for-multiple-ethernet-interfaces-using-pci-ids_configuring-an-ethernet-connection" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-single-connection-profile-for-multiple-ethernet-interfaces-using-pci-ids_configuring-an-ethernet-connection" data-v-b883c74f>2.13. Configuring a single connection profile for multiple Ethernet interfaces using PCI IDs</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-network-bonding_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-network-bonding_configuring-and-managing-networking--summary" data-v-fa0dae77>3. Configuring a network bond</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-network-bonding_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-configuring-network-bonding_configuring-and-managing-networking" data-v-fa0dae77>Configuring a network bond</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#understanding-the-default-behavior-of-controller-and-port-interfaces_configuring-network-bonding" id="sub-link-to-configuring_and_managing_networking-understanding-the-default-behavior-of-controller-and-port-interfaces_configuring-network-bonding" data-v-b883c74f>3.1. Understanding the default behavior of controller and port interfaces</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#upstream-switch-configuration-depending-on-the-bonding-modes_configuring-network-bonding" id="sub-link-to-configuring_and_managing_networking-upstream-switch-configuration-depending-on-the-bonding-modes_configuring-network-bonding" data-v-b883c74f>3.2. Upstream switch configuration depending on the bonding modes</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-network-bond-by-using-nmcli_configuring-network-bonding" id="sub-link-to-configuring_and_managing_networking-configuring-a-network-bond-by-using-nmcli_configuring-network-bonding" data-v-b883c74f>3.3. Configuring a network bond by using nmcli</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-network-bond-by-using-the-rhel-web-console_configuring-network-bonding" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-network-bond-by-using-the-rhel-web-console_configuring-network-bonding" data-v-b883c74f>3.4. Configuring a network bond by using the RHEL web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-network-by-bond-using-nmtui_configuring-network-bonding" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-network-by-bond-using-nmtui_configuring-network-bonding" data-v-b883c74f>3.5. Configuring a network bond by using nmtui</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-network-bond-by-using-nm-connection-editor_configuring-network-bonding" id="sub-link-to-configuring_and_managing_networking-configuring-a-network-bond-by-using-nm-connection-editor_configuring-network-bonding" data-v-b883c74f>3.6. Configuring a network bond by using nm-connection-editor</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-network-bond-by-using-nmstatectl_configuring-network-bonding" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-network-bond-by-using-nmstatectl_configuring-network-bonding" data-v-b883c74f>3.7. Configuring a network bond by using nmstatectl</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-network-bond-by-using-network-rhel-system-role_configuring-network-bonding" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-network-bond-by-using-network-rhel-system-role_configuring-network-bonding" data-v-b883c74f>3.8. Configuring a network bond by using the network RHEL system role</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-a-network-bond-to-enable-switching-between-an-ethernet-and-wireless-connection-without-interrupting-the-vpn_configuring-network-bonding" id="sub-link-to-configuring_and_managing_networking-creating-a-network-bond-to-enable-switching-between-an-ethernet-and-wireless-connection-without-interrupting-the-vpn_configuring-network-bonding" data-v-b883c74f>3.9. Creating a network bond to enable switching between an Ethernet and wireless connection without interrupting the VPN</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#the-different-network-bonding-modes_configuring-network-bonding" id="sub-link-to-configuring_and_managing_networking-the-different-network-bonding-modes_configuring-network-bonding" data-v-b883c74f>3.10. The different network bonding modes</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ref_xmit-hash-policy-bonding-parameter_configuring-network-bonding" id="sub-link-to-configuring_and_managing_networking-ref_xmit-hash-policy-bonding-parameter_configuring-network-bonding" data-v-b883c74f>3.11. The xmit_hash_policy bonding parameter</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-network-teaming_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-network-teaming_configuring-and-managing-networking--summary" data-v-fa0dae77>4. Configuring a NIC team</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-network-teaming_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-configuring-network-teaming_configuring-and-managing-networking" data-v-fa0dae77>Configuring a NIC team</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_migrating-a-network-team-configuration-to-network-bond_configuring-network-teaming" id="sub-link-to-configuring_and_managing_networking-proc_migrating-a-network-team-configuration-to-network-bond_configuring-network-teaming" data-v-b883c74f>4.1. Migrating a NIC team configuration to network bond</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#understanding-the-default-behavior-of-controller-and-port-interfaces_configuring-network-teaming" id="sub-link-to-configuring_and_managing_networking-understanding-the-default-behavior-of-controller-and-port-interfaces_configuring-network-teaming" data-v-b883c74f>4.2. Understanding the default behavior of controller and port interfaces</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#understanding-the-teamd-service-runners-and-link-watchers_configuring-network-teaming" id="sub-link-to-configuring_and_managing_networking-understanding-the-teamd-service-runners-and-link-watchers_configuring-network-teaming" data-v-b883c74f>4.3. Understanding the teamd service, runners, and link-watchers</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-network-team-by-using-nmcli_configuring-network-teaming" id="sub-link-to-configuring_and_managing_networking-configuring-a-network-team-by-using-nmcli_configuring-network-teaming" data-v-b883c74f>4.4. Configuring a NIC team by using nmcli</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-network-team-by-using-the-rhel-web-console_configuring-network-teaming" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-network-team-by-using-the-rhel-web-console_configuring-network-teaming" data-v-b883c74f>4.5. Configuring a NIC team by using the RHEL web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-network-team-by-using-nm-connection-editor_configuring-network-teaming" id="sub-link-to-configuring_and_managing_networking-configuring-a-network-team-by-using-nm-connection-editor_configuring-network-teaming" data-v-b883c74f>4.6. Configuring a NIC team by using nm-connection-editor</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-vlan-tagging_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-vlan-tagging_configuring-and-managing-networking--summary" data-v-fa0dae77>5. Configuring VLAN tagging</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-vlan-tagging_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-configuring-vlan-tagging_configuring-and-managing-networking" data-v-fa0dae77>Configuring VLAN tagging</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-vlan-tagging-by-using-nmcli_configuring-vlan-tagging" id="sub-link-to-configuring_and_managing_networking-configuring-vlan-tagging-by-using-nmcli_configuring-vlan-tagging" data-v-b883c74f>5.1. Configuring VLAN tagging by using nmcli</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-nested-vlans-using-nmcli-commands_configuring-vlan-tagging" id="sub-link-to-configuring_and_managing_networking-configuring-nested-vlans-using-nmcli-commands_configuring-vlan-tagging" data-v-b883c74f>5.2. Configuring nested VLANs by using nmcli</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-vlan-tagging-by-using-the-rhel-web-console_configuring-vlan-tagging" id="sub-link-to-configuring_and_managing_networking-proc_configuring-vlan-tagging-by-using-the-rhel-web-console_configuring-vlan-tagging" data-v-b883c74f>5.3. Configuring VLAN tagging by using the RHEL web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-vlan-tagging-by-using-nmtui_configuring-vlan-tagging" id="sub-link-to-configuring_and_managing_networking-proc_configuring-vlan-tagging-by-using-nmtui_configuring-vlan-tagging" data-v-b883c74f>5.4. Configuring VLAN tagging by using nmtui</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-vlan-tagging-by-using-nm-connection-editor_configuring-vlan-tagging" id="sub-link-to-configuring_and_managing_networking-configuring-vlan-tagging-by-using-nm-connection-editor_configuring-vlan-tagging" data-v-b883c74f>5.5. Configuring VLAN tagging by using nm-connection-editor</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-vlan-tagging-by-using-nmstatectl_configuring-vlan-tagging" id="sub-link-to-configuring_and_managing_networking-proc_configuring-vlan-tagging-by-using-nmstatectl_configuring-vlan-tagging" data-v-b883c74f>5.6. Configuring VLAN tagging by using nmstatectl</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-vlan-tagging-by-using-the-network-rhel-system-role_configuring-vlan-tagging" id="sub-link-to-configuring_and_managing_networking-configuring-vlan-tagging-by-using-the-network-rhel-system-role_configuring-vlan-tagging" data-v-b883c74f>5.7. Configuring VLAN tagging by using the network RHEL system role</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-a-network-bridge_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-a-network-bridge_configuring-and-managing-networking--summary" data-v-fa0dae77>6. Configuring a network bridge</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-a-network-bridge_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-configuring-a-network-bridge_configuring-and-managing-networking" data-v-fa0dae77>Configuring a network bridge</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-network-bridge-by-using-nmcli_configuring-a-network-bridge" id="sub-link-to-configuring_and_managing_networking-configuring-a-network-bridge-by-using-nmcli_configuring-a-network-bridge" data-v-b883c74f>6.1. Configuring a network bridge by using nmcli</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-network-bridge-by-using-the-rhel-web-console_configuring-a-network-bridge" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-network-bridge-by-using-the-rhel-web-console_configuring-a-network-bridge" data-v-b883c74f>6.2. Configuring a network bridge by using the RHEL web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-network-bridge-by-using-nmtui_configuring-a-network-bridge" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-network-bridge-by-using-nmtui_configuring-a-network-bridge" data-v-b883c74f>6.3. Configuring a network bridge by using nmtui</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-network-bridge-by-using-nm-connection-editor_configuring-a-network-bridge" id="sub-link-to-configuring_and_managing_networking-configuring-a-network-bridge-by-using-nm-connection-editor_configuring-a-network-bridge" data-v-b883c74f>6.4. Configuring a network bridge by using nm-connection-editor</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-network-bridge-by-using-nmstatectl_configuring-a-network-bridge" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-network-bridge-by-using-nmstatectl_configuring-a-network-bridge" data-v-b883c74f>6.5. Configuring a network bridge by using nmstatectl</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-network-bridge-by-using-the-network-rhel-system-role_configuring-a-network-bridge" id="sub-link-to-configuring_and_managing_networking-configuring-a-network-bridge-by-using-the-network-rhel-system-role_configuring-a-network-bridge" data-v-b883c74f>6.6. Configuring a network bridge by using the network RHEL system role</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-a-vpn-connection_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-a-vpn-connection_configuring-and-managing-networking--summary" data-v-fa0dae77>7. Setting up an IPsec VPN</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-a-vpn-connection_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-configuring-a-vpn-connection_configuring-and-managing-networking" data-v-fa0dae77>Setting up an IPsec VPN</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#libreswan-as-an-ipsec-vpn-implementation_configuring-a-vpn-connection" id="sub-link-to-configuring_and_managing_networking-libreswan-as-an-ipsec-vpn-implementation_configuring-a-vpn-connection" data-v-b883c74f>7.1. Libreswan as an IPsec VPN implementation</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_authentication-methods-in-libreswan_configuring-a-vpn-connection" id="sub-link-to-configuring_and_managing_networking-con_authentication-methods-in-libreswan_configuring-a-vpn-connection" data-v-b883c74f>7.2. Authentication methods in Libreswan</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-libreswan_configuring-a-vpn-connection" id="sub-link-to-configuring_and_managing_networking-installing-libreswan_configuring-a-vpn-connection" data-v-b883c74f>7.3. Installing Libreswan</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-a-host-to-host-vpn_configuring-a-vpn-connection" id="sub-link-to-configuring_and_managing_networking-creating-a-host-to-host-vpn_configuring-a-vpn-connection" data-v-b883c74f>7.4. Creating a host-to-host VPN</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-site-to-site-vpn_configuring-a-vpn-connection" id="sub-link-to-configuring_and_managing_networking-configuring-a-site-to-site-vpn_configuring-a-vpn-connection" data-v-b883c74f>7.5. Configuring a site-to-site VPN</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-remote-access-vpn_configuring-a-vpn-connection" id="sub-link-to-configuring_and_managing_networking-configuring-a-remote-access-vpn_configuring-a-vpn-connection" data-v-b883c74f>7.6. Configuring a remote access VPN</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-mesh-vpn_configuring-a-vpn-connection" id="sub-link-to-configuring_and_managing_networking-configuring-a-mesh-vpn_configuring-a-vpn-connection" data-v-b883c74f>7.7. Configuring a mesh VPN</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#deploying-a-fips-compliant-ipsec-vpn_configuring-a-vpn-connection" id="sub-link-to-configuring_and_managing_networking-deploying-a-fips-compliant-ipsec-vpn_configuring-a-vpn-connection" data-v-b883c74f>7.8. Deploying a FIPS-compliant IPsec VPN</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#protecting-the-ipsec-nss-database-by-a-password_configuring-a-vpn-connection" id="sub-link-to-configuring_and_managing_networking-protecting-the-ipsec-nss-database-by-a-password_configuring-a-vpn-connection" data-v-b883c74f>7.9. Protecting the IPsec NSS database by a password</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-an-ipsec-vpn-to-use-tcp_configuring-a-vpn-connection" id="sub-link-to-configuring_and_managing_networking-proc_configuring-an-ipsec-vpn-to-use-tcp_configuring-a-vpn-connection" data-v-b883c74f>7.10. Configuring an IPsec VPN to use TCP</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-automatic-detection-and-usage-of-esp-hardware-offload-to-accelerate-an-ipsec-connection_configuring-a-vpn-connection" id="sub-link-to-configuring_and_managing_networking-proc_configuring-automatic-detection-and-usage-of-esp-hardware-offload-to-accelerate-an-ipsec-connection_configuring-a-vpn-connection" data-v-b883c74f>7.11. Configuring automatic detection and usage of ESP hardware offload to accelerate an IPsec connection</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-esp-hardware-offload-on-a-bond-to-accelerate-an-ipsec-connection_configuring-a-vpn-connection" id="sub-link-to-configuring_and_managing_networking-proc_configuring-esp-hardware-offload-on-a-bond-to-accelerate-an-ipsec-connection_configuring-a-vpn-connection" data-v-b883c74f>7.12. Configuring ESP hardware offload on a bond to accelerate an IPsec connection</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--assembly_configuring-vpn-connections-with-ipsec-by-using-the-rhel-vpn-system-role_configuring-a-vpn-connection" data-v-b883c74f><summary class="heading sub-chapter-title" id="assembly_configuring-vpn-connections-with-ipsec-by-using-the-rhel-vpn-system-role_configuring-a-vpn-connection--summary" data-v-b883c74f>7.13. Configuring VPN connections with IPsec by using RHEL system roles</summary><ol id="sub-nav--assembly_configuring-vpn-connections-with-ipsec-by-using-the-rhel-vpn-system-role_configuring-a-vpn-connection" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#assembly_configuring-vpn-connections-with-ipsec-by-using-the-rhel-vpn-system-role_configuring-a-vpn-connection" id="chapter-landing--configuring_and_managing_networking-assembly_configuring-vpn-connections-with-ipsec-by-using-the-rhel-vpn-system-role_configuring-a-vpn-connection" data-v-b883c74f>Configuring VPN connections with IPsec by using RHEL system roles</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_creating-a-host-to-host-vpn-with-ipsec-using-the-vpn-system-role_assembly_configuring-vpn-connections-with-ipsec-by-using-the-rhel-vpn-system-role" id="sub-link-to-configuring_and_managing_networking-proc_creating-a-host-to-host-vpn-with-ipsec-using-the-vpn-system-role_assembly_configuring-vpn-connections-with-ipsec-by-using-the-rhel-vpn-system-role" data-v-b883c74f>7.13.1. Creating a host-to-host VPN with IPsec by using the vpn RHEL system role</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_creating-an-opportunistic-mesh-vpn-connection-with-ipsec-by-using-the-vpn-system-role_assembly_configuring-vpn-connections-with-ipsec-by-using-the-rhel-vpn-system-role" id="sub-link-to-configuring_and_managing_networking-proc_creating-an-opportunistic-mesh-vpn-connection-with-ipsec-by-using-the-vpn-system-role_assembly_configuring-vpn-connections-with-ipsec-by-using-the-rhel-vpn-system-role" data-v-b883c74f>7.13.2. Creating an opportunistic mesh VPN connection with IPsec by using the vpn RHEL system role</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-ipsec-connections-that-opt-out-of-the-system-wide-crypto-policies_configuring-a-vpn-connection" id="sub-link-to-configuring_and_managing_networking-configuring-ipsec-connections-that-opt-out-of-the-system-wide-crypto-policies_configuring-a-vpn-connection" data-v-b883c74f>7.14. Configuring IPsec connections that opt out of the system-wide crypto policies</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ref_troubleshooting-ipsec-vpn-configurations_configuring-a-vpn-connection" id="sub-link-to-configuring_and_managing_networking-ref_troubleshooting-ipsec-vpn-configurations_configuring-a-vpn-connection" data-v-b883c74f>7.15. Troubleshooting IPsec VPN configurations</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-VPN-connection-with-control-center_configuring-a-vpn-connection" id="sub-link-to-configuring_and_managing_networking-configuring-a-VPN-connection-with-control-center_configuring-a-vpn-connection" data-v-b883c74f>7.16. Configuring a VPN connection with control-center</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-vpn-connection-using-nm-connection-editor_configuring-a-vpn-connection" id="sub-link-to-configuring_and_managing_networking-configuring-a-vpn-connection-using-nm-connection-editor_configuring-a-vpn-connection" data-v-b883c74f>7.17. Configuring a VPN connection using nm-connection-editor</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl_configuring-a-vpn-connection" data-v-b883c74f><summary class="heading sub-chapter-title" id="configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl_configuring-a-vpn-connection--summary" data-v-b883c74f>7.18. Configuring an IPsec based VPN connection by using nmstatectl</summary><ol id="sub-nav--configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl_configuring-a-vpn-connection" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl_configuring-a-vpn-connection" id="chapter-landing--configuring_and_managing_networking-configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl_configuring-a-vpn-connection" data-v-b883c74f>Configuring an IPsec based VPN connection by using nmstatectl</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-host-to-subnet-ipsec-vpn-with-pki-authentication-and-tunnel-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl" id="sub-link-to-configuring_and_managing_networking-configuring-a-host-to-subnet-ipsec-vpn-with-pki-authentication-and-tunnel-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl" data-v-b883c74f>7.18.1. Configuring a host-to-subnet IPSec VPN with PKI authentication and tunnel mode by using nmstatectl</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-host-to-subnet-ipsec-vpn-with-rsa-authentication-and-tunnel-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl" id="sub-link-to-configuring_and_managing_networking-configuring-a-host-to-subnet-ipsec-vpn-with-rsa-authentication-and-tunnel-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl" data-v-b883c74f>7.18.2. Configuring a host-to-subnet IPSec VPN with RSA authentication and tunnel mode by using nmstatectl</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-host-to-subnet-ipsec-vpn-with-psk-authentication-and-tunnel-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl" id="sub-link-to-configuring_and_managing_networking-configuring-a-host-to-subnet-ipsec-vpn-with-psk-authentication-and-tunnel-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl" data-v-b883c74f>7.18.3. Configuring a host-to-subnet IPSec VPN with PSK authentication and tunnel mode by using nmstatectl</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-host-to-host-ipsec-vpn-with-pki-authentication-and-tunnel-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl" id="sub-link-to-configuring_and_managing_networking-configuring-a-host-to-host-ipsec-vpn-with-pki-authentication-and-tunnel-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl" data-v-b883c74f>7.18.4. Configuring a host-to-host IPsec VPN with PKI authentication and tunnel mode by using nmstatectl</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-host-to-host-ipsec-vpn-with-psk-authentication-and-transport-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl" id="sub-link-to-configuring_and_managing_networking-configuring-a-host-to-host-ipsec-vpn-with-psk-authentication-and-transport-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl" data-v-b883c74f>7.18.5. Configuring a host-to-host IPsec VPN with PSK authentication and transport mode by using nmstatectl</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#related-information-configuring-a-vpn-connection" id="sub-link-to-configuring_and_managing_networking-related-information-configuring-a-vpn-connection" data-v-b883c74f>7.19. Additional resources</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_setting-up-a-wireguard-vpn_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_setting-up-a-wireguard-vpn_configuring-and-managing-networking--summary" data-v-fa0dae77>8. Setting up a WireGuard VPN</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_setting-up-a-wireguard-vpn_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-assembly_setting-up-a-wireguard-vpn_configuring-and-managing-networking" data-v-fa0dae77>Setting up a WireGuard VPN</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ref_protocols-and-primitives-used-by-wireguard_assembly_setting-up-a-wireguard-vpn" id="sub-link-to-configuring_and_managing_networking-ref_protocols-and-primitives-used-by-wireguard_assembly_setting-up-a-wireguard-vpn" data-v-b883c74f>8.1. Protocols and primitives used by WireGuard</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_how-wireguard-uses-tunnel-ip-addresses-public-keys-and-remote-endpoints_assembly_setting-up-a-wireguard-vpn" id="sub-link-to-configuring_and_managing_networking-con_how-wireguard-uses-tunnel-ip-addresses-public-keys-and-remote-endpoints_assembly_setting-up-a-wireguard-vpn" data-v-b883c74f>8.2. How WireGuard uses tunnel IP addresses, public keys, and remote endpoints</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_using-a-wireguard-client-behind-nat-and-firewalls_assembly_setting-up-a-wireguard-vpn" id="sub-link-to-configuring_and_managing_networking-con_using-a-wireguard-client-behind-nat-and-firewalls_assembly_setting-up-a-wireguard-vpn" data-v-b883c74f>8.3. Using a WireGuard client behind NAT and firewalls</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_creating-private-and-public-keys-to-be-used-in-wireguard-connections_assembly_setting-up-a-wireguard-vpn" id="sub-link-to-configuring_and_managing_networking-proc_creating-private-and-public-keys-to-be-used-in-wireguard-connections_assembly_setting-up-a-wireguard-vpn" data-v-b883c74f>8.4. Creating private and public keys to be used in WireGuard connections</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-wireguard-by-using-nmcli_assembly_setting-up-a-wireguard-vpn" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-wireguard-by-using-nmcli_assembly_setting-up-a-wireguard-vpn" data-v-b883c74f>8.5. Configuring a WireGuard server by using nmcli</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-wireguard-server-by-using-nmtui_assembly_setting-up-a-wireguard-vpn" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-wireguard-server-by-using-nmtui_assembly_setting-up-a-wireguard-vpn" data-v-b883c74f>8.6. Configuring a WireGuard server by using nmtui</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-wireguard-server-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn" id="sub-link-to-configuring_and_managing_networking-configuring-a-wireguard-server-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn" data-v-b883c74f>8.7. Configuring a WireGuard server by using the RHEL web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-wireguard-server-by-using-nm-connection-editor_assembly_setting-up-a-wireguard-vpn" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-wireguard-server-by-using-nm-connection-editor_assembly_setting-up-a-wireguard-vpn" data-v-b883c74f>8.8. Configuring a WireGuard server by using nm-connection-editor</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-wireguard-server-by-using-the-wg-quick-service_assembly_setting-up-a-wireguard-vpn" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-wireguard-server-by-using-the-wg-quick-service_assembly_setting-up-a-wireguard-vpn" data-v-b883c74f>8.9. Configuring a WireGuard server by using the wg-quick service</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-firewalld-on-a-wireguard-server-by-using-the-command-line_assembly_setting-up-a-wireguard-vpn" id="sub-link-to-configuring_and_managing_networking-proc_configuring-firewalld-on-a-wireguard-server-by-using-the-command-line_assembly_setting-up-a-wireguard-vpn" data-v-b883c74f>8.10. Configuring firewalld on a WireGuard server by using the command line</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-firewalld-on-a-wireguard-server-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn" id="sub-link-to-configuring_and_managing_networking-configuring-firewalld-on-a-wireguard-server-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn" data-v-b883c74f>8.11. Configuring firewalld on a WireGuard server by using the RHEL web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-firewalld-on-a-wireguard-server-by-using-the-graphical-interface_assembly_setting-up-a-wireguard-vpn" id="sub-link-to-configuring_and_managing_networking-proc_configuring-firewalld-on-a-wireguard-server-by-using-the-graphical-interface_assembly_setting-up-a-wireguard-vpn" data-v-b883c74f>8.12. Configuring firewalld on a WireGuard server by using the graphical interface</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-wireguard-client-by-using-nmcli_assembly_setting-up-a-wireguard-vpn" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-wireguard-client-by-using-nmcli_assembly_setting-up-a-wireguard-vpn" data-v-b883c74f>8.13. Configuring a WireGuard client by using nmcli</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-wireguard-client-by-using-nmtui_assembly_setting-up-a-wireguard-vpn" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-wireguard-client-by-using-nmtui_assembly_setting-up-a-wireguard-vpn" data-v-b883c74f>8.14. Configuring a WireGuard client by using nmtui</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-wireguard-client-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn" id="sub-link-to-configuring_and_managing_networking-configuring-a-wireguard-client-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn" data-v-b883c74f>8.15. Configuring a WireGuard client by using the RHEL web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-wireguard-client-by-using-nm-connection-editor_assembly_setting-up-a-wireguard-vpn" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-wireguard-client-by-using-nm-connection-editor_assembly_setting-up-a-wireguard-vpn" data-v-b883c74f>8.16. Configuring a WireGuard client by using nm-connection-editor</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-wireguard-client-by-using-the-wg-quick-service_assembly_setting-up-a-wireguard-vpn" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-wireguard-client-by-using-the-wg-quick-service_assembly_setting-up-a-wireguard-vpn" data-v-b883c74f>8.17. Configuring a WireGuard client by using the wg-quick service</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-ip-tunnels_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-ip-tunnels_configuring-and-managing-networking--summary" data-v-fa0dae77>9. Configuring IP tunnels</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-ip-tunnels_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-configuring-ip-tunnels_configuring-and-managing-networking" data-v-fa0dae77>Configuring IP tunnels</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-an-ipip-tunnel-using-nmcli-to-encapsulate--ipv4-traffic-in-ipv4-packets_configuring-ip-tunnels" id="sub-link-to-configuring_and_managing_networking-configuring-an-ipip-tunnel-using-nmcli-to-encapsulate--ipv4-traffic-in-ipv4-packets_configuring-ip-tunnels" data-v-b883c74f>9.1. Configuring an IPIP tunnel to encapsulate IPv4 traffic in IPv4 packets</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-gre-tunnel-using-nmcli-to-encapsulate-layer-3-traffic-in-ipv4-packets_configuring-ip-tunnels" id="sub-link-to-configuring_and_managing_networking-configuring-a-gre-tunnel-using-nmcli-to-encapsulate-layer-3-traffic-in-ipv4-packets_configuring-ip-tunnels" data-v-b883c74f>9.2. Configuring a GRE tunnel to encapsulate layer-3 traffic in IPv4 packets</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-gretap-tunnel-to-transfer-ethernet-frames-over-ipv4_configuring-ip-tunnels" id="sub-link-to-configuring_and_managing_networking-configuring-a-gretap-tunnel-to-transfer-ethernet-frames-over-ipv4_configuring-ip-tunnels" data-v-b883c74f>9.3. Configuring a GRETAP tunnel to transfer Ethernet frames over IPv4</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms_configuring-and-managing-networking--summary" data-v-fa0dae77>10. Using a VXLAN to create a virtual layer-2 domain for VMs</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms_configuring-and-managing-networking" data-v-fa0dae77>Using a VXLAN to create a virtual layer-2 domain for VMs</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_benefits-of-vxlans_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms" id="sub-link-to-configuring_and_managing_networking-con_benefits-of-vxlans_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms" data-v-b883c74f>10.1. Benefits of VXLANs</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-the-ethernet-interface-on-the-hosts_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms" id="sub-link-to-configuring_and_managing_networking-proc_configuring-the-ethernet-interface-on-the-hosts_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms" data-v-b883c74f>10.2. Configuring the Ethernet interface on the hosts</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_creating-a-network-bridge-with-a-vxlan-attached_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms" id="sub-link-to-configuring_and_managing_networking-proc_creating-a-network-bridge-with-a-vxlan-attached_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms" data-v-b883c74f>10.3. Creating a network bridge with a VXLAN attached</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_creating-a-virtual-network-in-libvirt-with-an-existing-bridge_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms" id="sub-link-to-configuring_and_managing_networking-proc_creating-a-virtual-network-in-libvirt-with-an-existing-bridge_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms" data-v-b883c74f>10.4. Creating a virtual network in libvirt with an existing bridge</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_proc_configuring-virtual-machines-to-use-vxlan_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms" id="sub-link-to-configuring_and_managing_networking-proc_proc_configuring-virtual-machines-to-use-vxlan_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms" data-v-b883c74f>10.5. Configuring virtual machines to use VXLAN</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_managing-wifi-connections_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_managing-wifi-connections_configuring-and-managing-networking--summary" data-v-fa0dae77>11. Managing wifi connections</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_managing-wifi-connections_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-assembly_managing-wifi-connections_configuring-and-managing-networking" data-v-fa0dae77>Managing wifi connections</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ref_supported-wifi-security-types_assembly_managing-wifi-connections" id="sub-link-to-configuring_and_managing_networking-ref_supported-wifi-security-types_assembly_managing-wifi-connections" data-v-b883c74f>11.1. Supported wifi security types</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_connecting-to-a-wifi-network-by-using-nmcli_assembly_managing-wifi-connections" id="sub-link-to-configuring_and_managing_networking-proc_connecting-to-a-wifi-network-by-using-nmcli_assembly_managing-wifi-connections" data-v-b883c74f>11.2. Connecting to a wifi network by using nmcli</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_connecting-to-a-wifi-network-by-using-the-gnome-system-menu_assembly_managing-wifi-connections" id="sub-link-to-configuring_and_managing_networking-proc_connecting-to-a-wifi-network-by-using-the-gnome-system-menu_assembly_managing-wifi-connections" data-v-b883c74f>11.3. Connecting to a wifi network by using the GNOME system menu</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_connecting-to-a-wifi-network-by-using-the-gnome-settings-application_assembly_managing-wifi-connections" id="sub-link-to-configuring_and_managing_networking-proc_connecting-to-a-wifi-network-by-using-the-gnome-settings-application_assembly_managing-wifi-connections" data-v-b883c74f>11.4. Connecting to a wifi network by using the GNOME settings application</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-wifi-connection-by-using-nmtui_assembly_managing-wifi-connections" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-wifi-connection-by-using-nmtui_assembly_managing-wifi-connections" data-v-b883c74f>11.5. Configuring a wifi connection by using nmtui</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-wifi-connection-by-using-nm-connection-editor_assembly_managing-wifi-connections" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-wifi-connection-by-using-nm-connection-editor_assembly_managing-wifi-connections" data-v-b883c74f>11.6. Configuring a wifi connection by using nm-connection-editor</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-wifi-connection-with-802-1x-network-authentication-by-using-the-network-rhel-system-role_assembly_managing-wifi-connections" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-wifi-connection-with-802-1x-network-authentication-by-using-the-network-rhel-system-role_assembly_managing-wifi-connections" data-v-b883c74f>11.7. Configuring a wifi connection with 802.1X network authentication by using the network RHEL system role</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-wifi-connection-with-802-1x-network-authentication-in-an-existing-profile-by-using-nmcli_assembly_managing-wifi-connections" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-wifi-connection-with-802-1x-network-authentication-in-an-existing-profile-by-using-nmcli_assembly_managing-wifi-connections" data-v-b883c74f>11.8. Configuring a wifi connection with 802.1X network authentication in an existing profile by using nmcli</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_manually-setting-the-wireless-regulatory-domain_assembly_managing-wifi-connections" id="sub-link-to-configuring_and_managing_networking-proc_manually-setting-the-wireless-regulatory-domain_assembly_managing-wifi-connections" data-v-b883c74f>11.9. Manually setting the wireless regulatory domain</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><a class="link" href="#proc_configuring-rhel-as-a-wpa2-or-wpa3-personal-access-point_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-proc_configuring-rhel-as-a-wpa2-or-wpa3-personal-access-point_configuring-and-managing-networking" data-v-fa0dae77>12. Configuring RHEL as a WPA2 or WPA3 Personal access point</a></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network_configuring-and-managing-networking--summary" data-v-fa0dae77>13. Using MACsec to encrypt layer-2 traffic in the same physical network</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network_configuring-and-managing-networking" data-v-fa0dae77>Using MACsec to encrypt layer-2 traffic in the same physical network</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#how-macsec-increases-security_assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network" id="sub-link-to-configuring_and_managing_networking-how-macsec-increases-security_assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network" data-v-b883c74f>13.1. How MACsec increases security</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-macsec-connection-using-nmcli_assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-macsec-connection-using-nmcli_assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network" data-v-b883c74f>13.2. Configuring a MACsec connection by using nmcli</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-macsec-connection-using-nmstatectl_assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network" id="sub-link-to-configuring_and_managing_networking-configuring-a-macsec-connection-using-nmstatectl_assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network" data-v-b883c74f>13.3. Configuring a MACsec connection by using nmstatectl</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--getting-started-with-ipvlan_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="getting-started-with-ipvlan_configuring-and-managing-networking--summary" data-v-fa0dae77>14. Getting started with IPVLAN</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#getting-started-with-ipvlan_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-getting-started-with-ipvlan_configuring-and-managing-networking" data-v-fa0dae77>Getting started with IPVLAN</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ipvlan-modes_getting-started-with-ipvlan" id="sub-link-to-configuring_and_managing_networking-ipvlan-modes_getting-started-with-ipvlan" data-v-b883c74f>14.1. IPVLAN modes</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ipvlan-and-macvlan_getting-started-with-ipvlan" id="sub-link-to-configuring_and_managing_networking-ipvlan-and-macvlan_getting-started-with-ipvlan" data-v-b883c74f>14.2. Comparison of IPVLAN and MACVLAN</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-and-configuring-the-ipvlan-device-using-iproute2_getting-started-with-ipvlan" id="sub-link-to-configuring_and_managing_networking-creating-and-configuring-the-ipvlan-device-using-iproute2_getting-started-with-ipvlan" data-v-b883c74f>14.3. Creating and configuring the IPVLAN device using iproute2</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-networkmanager-to-ignore-certain-devices_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-networkmanager-to-ignore-certain-devices_configuring-and-managing-networking--summary" data-v-fa0dae77>15. Configuring NetworkManager to ignore certain devices</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-networkmanager-to-ignore-certain-devices_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-configuring-networkmanager-to-ignore-certain-devices_configuring-and-managing-networking" data-v-fa0dae77>Configuring NetworkManager to ignore certain devices</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#permanently-configuring-a-device-as-unmanaged-in-networkmanager_configuring-networkmanager-to-ignore-certain-devices" id="sub-link-to-configuring_and_managing_networking-permanently-configuring-a-device-as-unmanaged-in-networkmanager_configuring-networkmanager-to-ignore-certain-devices" data-v-b883c74f>15.1. Permanently configuring a device as unmanaged in NetworkManager</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#temporarily-configuring-a-device-as-unmanaged-in-networkmanager_configuring-networkmanager-to-ignore-certain-devices" id="sub-link-to-configuring_and_managing_networking-temporarily-configuring-a-device-as-unmanaged-in-networkmanager_configuring-networkmanager-to-ignore-certain-devices" data-v-b883c74f>15.2. Temporarily configuring a device as unmanaged in NetworkManager</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><a class="link" href="#proc_configuring-the-loopback-interface-by-using-nmcli_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-proc_configuring-the-loopback-interface-by-using-nmcli_configuring-and-managing-networking" data-v-fa0dae77>16. Configuring the loopback interface by using nmcli</a></li><li class="item chapter" data-v-fa0dae77><details id="toc--creating-a-dummy-interface_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="creating-a-dummy-interface_configuring-and-managing-networking--summary" data-v-fa0dae77>17. Creating a dummy interface</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#creating-a-dummy-interface_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-creating-a-dummy-interface_configuring-and-managing-networking" data-v-fa0dae77>Creating a dummy interface</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-a-dummy-interface-with-both-an-ipv4-and-ipv6-address-using-nmcli_creating-a-dummy-interface" id="sub-link-to-configuring_and_managing_networking-creating-a-dummy-interface-with-both-an-ipv4-and-ipv6-address-using-nmcli_creating-a-dummy-interface" data-v-b883c74f>17.1. Creating a dummy interface with both an IPv4 and IPv6 address by using nmcli</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--using-networkmanager-to-disable-ipv6-for-a-specific-connection_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="using-networkmanager-to-disable-ipv6-for-a-specific-connection_configuring-and-managing-networking--summary" data-v-fa0dae77>18. Using NetworkManager to disable IPv6 for a specific connection</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#using-networkmanager-to-disable-ipv6-for-a-specific-connection_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-using-networkmanager-to-disable-ipv6-for-a-specific-connection_configuring-and-managing-networking" data-v-fa0dae77>Using NetworkManager to disable IPv6 for a specific connection</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#disabling-ipv6-on-a-connection-using-nmcli_using-networkmanager-to-disable-ipv6-for-a-specific-connection" id="sub-link-to-configuring_and_managing_networking-disabling-ipv6-on-a-connection-using-nmcli_using-networkmanager-to-disable-ipv6-for-a-specific-connection" data-v-b883c74f>18.1. Disabling IPv6 on a connection using nmcli</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_changing-a-hostname_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_changing-a-hostname_configuring-and-managing-networking--summary" data-v-fa0dae77>19. Changing a hostname</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_changing-a-hostname_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-assembly_changing-a-hostname_configuring-and-managing-networking" data-v-fa0dae77>Changing a hostname</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_changing-a-hostname-using-nmcli_assembly_changing-a-hostname" id="sub-link-to-configuring_and_managing_networking-proc_changing-a-hostname-using-nmcli_assembly_changing-a-hostname" data-v-b883c74f>19.1. Changing a hostname by using nmcli</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_changing-a-hostname-using-hostnamectl_assembly_changing-a-hostname" id="sub-link-to-configuring_and_managing_networking-proc_changing-a-hostname-using-hostnamectl_assembly_changing-a-hostname" data-v-b883c74f>19.2. Changing a hostname by using hostnamectl</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-networkmanager-dhcp-settings_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-networkmanager-dhcp-settings_configuring-and-managing-networking--summary" data-v-fa0dae77>20. Configuring NetworkManager DHCP settings</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-networkmanager-dhcp-settings_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-configuring-networkmanager-dhcp-settings_configuring-and-managing-networking" data-v-fa0dae77>Configuring NetworkManager DHCP settings</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_changing-the-dhcp-client-of-networkmanager_configuring-networkmanager-dhcp-settings" id="sub-link-to-configuring_and_managing_networking-proc_changing-the-dhcp-client-of-networkmanager_configuring-networkmanager-dhcp-settings" data-v-b883c74f>20.1. Changing the DHCP client of NetworkManager</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-the-dhcp-behavior-of-a-networkmanager-connection_configuring-networkmanager-dhcp-settings" id="sub-link-to-configuring_and_managing_networking-configuring-the-dhcp-behavior-of-a-networkmanager-connection_configuring-networkmanager-dhcp-settings" data-v-b883c74f>20.2. Configuring the DHCP behavior of a NetworkManager connection</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_running-dhclient-exit-hooks-using-networkmanager-a-dispatcher-script_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_running-dhclient-exit-hooks-using-networkmanager-a-dispatcher-script_configuring-and-managing-networking--summary" data-v-fa0dae77>21. Running dhclient exit hooks using NetworkManager a dispatcher script</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_running-dhclient-exit-hooks-using-networkmanager-a-dispatcher-script_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-assembly_running-dhclient-exit-hooks-using-networkmanager-a-dispatcher-script_configuring-and-managing-networking" data-v-fa0dae77>Running dhclient exit hooks using NetworkManager a dispatcher script</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_the-concept-of-networkmanager-dispatcher-scripts_assembly_running-dhclient-exit-hooks-using-networkmanager-a-dispatcher-script" id="sub-link-to-configuring_and_managing_networking-con_the-concept-of-networkmanager-dispatcher-scripts_assembly_running-dhclient-exit-hooks-using-networkmanager-a-dispatcher-script" data-v-b883c74f>21.1. The concept of NetworkManager dispatcher scripts</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_creating-a-networkmanager-dispatcher-script-that-runs-dhclient-exit-hooks_assembly_running-dhclient-exit-hooks-using-networkmanager-a-dispatcher-script" id="sub-link-to-configuring_and_managing_networking-proc_creating-a-networkmanager-dispatcher-script-that-runs-dhclient-exit-hooks_assembly_running-dhclient-exit-hooks-using-networkmanager-a-dispatcher-script" data-v-b883c74f>21.2. Creating a NetworkManager dispatcher script that runs dhclient exit hooks</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--manually-configuring-the-etc-resolv-conf-file_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="manually-configuring-the-etc-resolv-conf-file_configuring-and-managing-networking--summary" data-v-fa0dae77>22. Manually configuring the /etc/resolv.conf file</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#manually-configuring-the-etc-resolv-conf-file_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-manually-configuring-the-etc-resolv-conf-file_configuring-and-managing-networking" data-v-fa0dae77>Manually configuring the /etc/resolv.conf file</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#disabling-dns-processing-in-the-networkmanager-configuration_manually-configuring-the-etc-resolv-conf-file" id="sub-link-to-configuring_and_managing_networking-disabling-dns-processing-in-the-networkmanager-configuration_manually-configuring-the-etc-resolv-conf-file" data-v-b883c74f>22.1. Disabling DNS processing in the NetworkManager configuration</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#replacing-etc-resolv-conf-with-a-symbolic-link-to-manually-configure-dns-settings_manually-configuring-the-etc-resolv-conf-file" id="sub-link-to-configuring_and_managing_networking-replacing-etc-resolv-conf-with-a-symbolic-link-to-manually-configure-dns-settings_manually-configuring-the-etc-resolv-conf-file" data-v-b883c74f>22.2. Replacing /etc/resolv.conf with a symbolic link to manually configure DNS settings</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-the-order-of-dns-servers_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-the-order-of-dns-servers_configuring-and-managing-networking--summary" data-v-fa0dae77>23. Configuring the order of DNS servers</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-the-order-of-dns-servers_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-configuring-the-order-of-dns-servers_configuring-and-managing-networking" data-v-fa0dae77>Configuring the order of DNS servers</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#how-networkmanager-orders-dns-servers-in-etc-resolv-conf_configuring-the-order-of-dns-servers" id="sub-link-to-configuring_and_managing_networking-how-networkmanager-orders-dns-servers-in-etc-resolv-conf_configuring-the-order-of-dns-servers" data-v-b883c74f>23.1. How NetworkManager orders DNS servers in /etc/resolv.conf</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#setting-a-networkmanager-wide-default-dns-server-priority-value_configuring-the-order-of-dns-servers" id="sub-link-to-configuring_and_managing_networking-setting-a-networkmanager-wide-default-dns-server-priority-value_configuring-the-order-of-dns-servers" data-v-b883c74f>23.2. Setting a NetworkManager-wide default DNS server priority value</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#setting-the-dns-priority-of-a-networkmanager-connection_configuring-the-order-of-dns-servers" id="sub-link-to-configuring_and_managing_networking-setting-the-dns-priority-of-a-networkmanager-connection_configuring-the-order-of-dns-servers" data-v-b883c74f>23.3. Setting the DNS priority of a NetworkManager connection</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--using-different-dns-servers-for-different-domains_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="using-different-dns-servers-for-different-domains_configuring-and-managing-networking--summary" data-v-fa0dae77>24. Using different DNS servers for different domains</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#using-different-dns-servers-for-different-domains_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-using-different-dns-servers-for-different-domains_configuring-and-managing-networking" data-v-fa0dae77>Using different DNS servers for different domains</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#using-dnsmasq-in-networkmanager-to-send-dns-requests-for-a-specific-domain-to-a-selected-dns-server_using-different-dns-servers-for-different-domains" id="sub-link-to-configuring_and_managing_networking-using-dnsmasq-in-networkmanager-to-send-dns-requests-for-a-specific-domain-to-a-selected-dns-server_using-different-dns-servers-for-different-domains" data-v-b883c74f>24.1. Using dnsmasq in NetworkManager to send DNS requests for a specific domain to a selected DNS server</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#using-systemd-resolved-in-networkmanager-to-send-dns-requests-for-a-specific-domain-to-a-selected-dns-server_using-different-dns-servers-for-different-domains" id="sub-link-to-configuring_and_managing_networking-using-systemd-resolved-in-networkmanager-to-send-dns-requests-for-a-specific-domain-to-a-selected-dns-server_using-different-dns-servers-for-different-domains" data-v-b883c74f>24.2. Using systemd-resolved in NetworkManager to send DNS requests for a specific domain to a selected DNS server</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--managing-the-default-gateway-setting_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="managing-the-default-gateway-setting_configuring-and-managing-networking--summary" data-v-fa0dae77>25. Managing the default gateway setting</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#managing-the-default-gateway-setting_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-managing-the-default-gateway-setting_configuring-and-managing-networking" data-v-fa0dae77>Managing the default gateway setting</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#setting-the-default-gateway-on-an-existing-connection-by-using-nmcli_managing-the-default-gateway-setting" id="sub-link-to-configuring_and_managing_networking-setting-the-default-gateway-on-an-existing-connection-by-using-nmcli_managing-the-default-gateway-setting" data-v-b883c74f>25.1. Setting the default gateway on an existing connection by using nmcli</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#setting-the-default-gateway-on-an-existing-connection-by-using-the-nmcli-interactive-mode_managing-the-default-gateway-setting" id="sub-link-to-configuring_and_managing_networking-setting-the-default-gateway-on-an-existing-connection-by-using-the-nmcli-interactive-mode_managing-the-default-gateway-setting" data-v-b883c74f>25.2. Setting the default gateway on an existing connection by using the nmcli interactive mode</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#setting-the-default-gateway-on-an-existing-connection-by-using-nm-connection-editor_managing-the-default-gateway-setting" id="sub-link-to-configuring_and_managing_networking-setting-the-default-gateway-on-an-existing-connection-by-using-nm-connection-editor_managing-the-default-gateway-setting" data-v-b883c74f>25.3. Setting the default gateway on an existing connection by using nm-connection-editor</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#setting-the-default-gateway-on-an-existing-connection-by-using-control-center_managing-the-default-gateway-setting" id="sub-link-to-configuring_and_managing_networking-setting-the-default-gateway-on-an-existing-connection-by-using-control-center_managing-the-default-gateway-setting" data-v-b883c74f>25.4. Setting the default gateway on an existing connection by using control-center</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_setting-the-default-gateway-on-an-existing-connection-by-using-nmstatectl_managing-the-default-gateway-setting" id="sub-link-to-configuring_and_managing_networking-proc_setting-the-default-gateway-on-an-existing-connection-by-using-nmstatectl_managing-the-default-gateway-setting" data-v-b883c74f>25.5. Setting the default gateway on an existing connection by using nmstatectl</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_setting-the-default-gateway-on-an-existing-connection-by-using-the-network-rhel-system-role_managing-the-default-gateway-setting" id="sub-link-to-configuring_and_managing_networking-proc_setting-the-default-gateway-on-an-existing-connection-by-using-the-network-rhel-system-role_managing-the-default-gateway-setting" data-v-b883c74f>25.6. Setting the default gateway on an existing connection by using the network RHEL system role</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_how-networkmanager-manages-multiple-default-gateways_managing-the-default-gateway-setting" id="sub-link-to-configuring_and_managing_networking-con_how-networkmanager-manages-multiple-default-gateways_managing-the-default-gateway-setting" data-v-b883c74f>25.7. How NetworkManager manages multiple default gateways</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-networkmanager-to-avoid-using-a-specific-profile-to-provide-a-default-gateway_managing-the-default-gateway-setting" id="sub-link-to-configuring_and_managing_networking-proc_configuring-networkmanager-to-avoid-using-a-specific-profile-to-provide-a-default-gateway_managing-the-default-gateway-setting" data-v-b883c74f>25.8. Configuring NetworkManager to avoid using a specific profile to provide a default gateway</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_fixing-unexpected-routing-behavior-due-to-multiple-default-gateways_managing-the-default-gateway-setting" id="sub-link-to-configuring_and_managing_networking-proc_fixing-unexpected-routing-behavior-due-to-multiple-default-gateways_managing-the-default-gateway-setting" data-v-b883c74f>25.9. Fixing unexpected routing behavior due to multiple default gateways</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-static-routes_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-static-routes_configuring-and-managing-networking--summary" data-v-fa0dae77>26. Configuring a static route</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-static-routes_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-configuring-static-routes_configuring-and-managing-networking" data-v-fa0dae77>Configuring a static route</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ref_example-of-a-network-that-requires-static-routes_configuring-static-routes" id="sub-link-to-configuring_and_managing_networking-ref_example-of-a-network-that-requires-static-routes_configuring-static-routes" data-v-b883c74f>26.1. Example of a network that requires static routes</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#how-to-use-the-nmcli-command-to-configure-a-static-route_configuring-static-routes" id="sub-link-to-configuring_and_managing_networking-how-to-use-the-nmcli-command-to-configure-a-static-route_configuring-static-routes" data-v-b883c74f>26.2. How to use the nmcli utility to configure a static route</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-static-route-by-using-nmcli_configuring-static-routes" id="sub-link-to-configuring_and_managing_networking-configuring-a-static-route-by-using-nmcli_configuring-static-routes" data-v-b883c74f>26.3. Configuring a static route by using nmcli</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-static-route-by-using-nmtui_configuring-static-routes" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-static-route-by-using-nmtui_configuring-static-routes" data-v-b883c74f>26.4. Configuring a static route by using nmtui</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-static-route-by-using-control-center_configuring-static-routes" id="sub-link-to-configuring_and_managing_networking-configuring-a-static-route-by-using-control-center_configuring-static-routes" data-v-b883c74f>26.5. Configuring a static route by using control-center</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-static-route-by-using-nm-connection-editor_configuring-static-routes" id="sub-link-to-configuring_and_managing_networking-configuring-a-static-route-by-using-nm-connection-editor_configuring-static-routes" data-v-b883c74f>26.6. Configuring a static route by using nm-connection-editor</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-static-route-by-using-the-nmcli-interactive-mode_configuring-static-routes" id="sub-link-to-configuring_and_managing_networking-configuring-a-static-route-by-using-the-nmcli-interactive-mode_configuring-static-routes" data-v-b883c74f>26.7. Configuring a static route by using the nmcli interactive mode</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-static-route-by-using-nmstatectl_configuring-static-routes" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-static-route-by-using-nmstatectl_configuring-static-routes" data-v-b883c74f>26.8. Configuring a static route by using nmstatectl</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-static-route-by-using-the-network-rhel-system-role_configuring-static-routes" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-static-route-by-using-the-network-rhel-system-role_configuring-static-routes" data-v-b883c74f>26.9. Configuring a static route by using the network RHEL system role</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-policy-based-routing-to-define-alternative-routes_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-policy-based-routing-to-define-alternative-routes_configuring-and-managing-networking--summary" data-v-fa0dae77>27. Configuring policy-based routing to define alternative routes</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-policy-based-routing-to-define-alternative-routes_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-configuring-policy-based-routing-to-define-alternative-routes_configuring-and-managing-networking" data-v-fa0dae77>Configuring policy-based routing to define alternative routes</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#routing-traffic-from-a-specific-subnet-to-a-different-default-gateway-by-using-nmcli_configuring-policy-based-routing-to-define-alternative-routes" id="sub-link-to-configuring_and_managing_networking-routing-traffic-from-a-specific-subnet-to-a-different-default-gateway-by-using-nmcli_configuring-policy-based-routing-to-define-alternative-routes" data-v-b883c74f>27.1. Routing traffic from a specific subnet to a different default gateway by using nmcli</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_routing-traffic-from-a-specific-subnet-to-a-different-default-gateway-by-using-the-network-rhel-system-role_configuring-policy-based-routing-to-define-alternative-routes" id="sub-link-to-configuring_and_managing_networking-proc_routing-traffic-from-a-specific-subnet-to-a-different-default-gateway-by-using-the-network-rhel-system-role_configuring-policy-based-routing-to-define-alternative-routes" data-v-b883c74f>27.2. Routing traffic from a specific subnet to a different default gateway by using the network RHEL system role</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--reusing-the-same-ip-address-on-different-interfaces_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="reusing-the-same-ip-address-on-different-interfaces_configuring-and-managing-networking--summary" data-v-fa0dae77>28. Reusing the same IP address on different interfaces</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#reusing-the-same-ip-address-on-different-interfaces_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-reusing-the-same-ip-address-on-different-interfaces_configuring-and-managing-networking" data-v-fa0dae77>Reusing the same IP address on different interfaces</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#permanently-reusing-the-same-ip-address-on-different-interfaces_reusing-the-same-ip-address-on-different-interfaces" id="sub-link-to-configuring_and_managing_networking-permanently-reusing-the-same-ip-address-on-different-interfaces_reusing-the-same-ip-address-on-different-interfaces" data-v-b883c74f>28.1. Permanently reusing the same IP address on different interfaces</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#temporarily-reusing-the-same-ip-address-on-different-interfaces_reusing-the-same-ip-address-on-different-interfaces" id="sub-link-to-configuring_and_managing_networking-temporarily-reusing-the-same-ip-address-on-different-interfaces_reusing-the-same-ip-address-on-different-interfaces" data-v-b883c74f>28.2. Temporarily reusing the same IP address on different interfaces</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#additional_resources" id="sub-link-to-configuring_and_managing_networking-additional_resources" data-v-b883c74f>28.3. Additional resources</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_starting-a-service-within-an-isolated-vrf-network_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_starting-a-service-within-an-isolated-vrf-network_configuring-and-managing-networking--summary" data-v-fa0dae77>29. Starting a service within an isolated VRF network</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_starting-a-service-within-an-isolated-vrf-network_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-assembly_starting-a-service-within-an-isolated-vrf-network_configuring-and-managing-networking" data-v-fa0dae77>Starting a service within an isolated VRF network</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-vrf-device_assembly_starting-a-service-within-an-isolated-vrf-network" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-vrf-device_assembly_starting-a-service-within-an-isolated-vrf-network" data-v-b883c74f>29.1. Configuring a VRF device</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_starting-a-service-within-an-isolated-vrf-network_assembly_starting-a-service-within-an-isolated-vrf-network" id="sub-link-to-configuring_and_managing_networking-proc_starting-a-service-within-an-isolated-vrf-network_assembly_starting-a-service-within-an-isolated-vrf-network" data-v-b883c74f>29.2. Starting a service within an isolated VRF network</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-ethtool-settings-in-networkmanager-connection-profiles_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-ethtool-settings-in-networkmanager-connection-profiles_configuring-and-managing-networking--summary" data-v-fa0dae77>30. Configuring ethtool settings in NetworkManager connection profiles</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-ethtool-settings-in-networkmanager-connection-profiles_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-configuring-ethtool-settings-in-networkmanager-connection-profiles_configuring-and-managing-networking" data-v-fa0dae77>Configuring ethtool settings in NetworkManager connection profiles</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-an-ethtool-offload-feature-by-using-nmcli_configuring-ethtool-settings-in-networkmanager-connection-profiles" id="sub-link-to-configuring_and_managing_networking-configuring-an-ethtool-offload-feature-by-using-nmcli_configuring-ethtool-settings-in-networkmanager-connection-profiles" data-v-b883c74f>30.1. Configuring an ethtool offload feature by using nmcli</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-an-ethtool-offload-feature-by-using-the-network-rhel-system-role_configuring-ethtool-settings-in-networkmanager-connection-profiles" id="sub-link-to-configuring_and_managing_networking-proc_configuring-an-ethtool-offload-feature-by-using-the-network-rhel-system-role_configuring-ethtool-settings-in-networkmanager-connection-profiles" data-v-b883c74f>30.2. Configuring an ethtool offload feature by using the network RHEL system role</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-an-ethtool-coalesce-settings-by-using-nmcli_configuring-ethtool-settings-in-networkmanager-connection-profiles" id="sub-link-to-configuring_and_managing_networking-proc_configuring-an-ethtool-coalesce-settings-by-using-nmcli_configuring-ethtool-settings-in-networkmanager-connection-profiles" data-v-b883c74f>30.3. Configuring an ethtool coalesce settings by using nmcli</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-an-ethtool-coalesce-settings-by-using-the-network-rhel-system-role_configuring-ethtool-settings-in-networkmanager-connection-profiles" id="sub-link-to-configuring_and_managing_networking-proc_configuring-an-ethtool-coalesce-settings-by-using-the-network-rhel-system-role_configuring-ethtool-settings-in-networkmanager-connection-profiles" data-v-b883c74f>30.4. Configuring an ethtool coalesce settings by using the network RHEL system role</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#increasing-the-ring-buffers-to-reduce-a-high-packet-drop-rate_configuring-ethtool-settings-in-networkmanager-connection-profiles" id="sub-link-to-configuring_and_managing_networking-increasing-the-ring-buffers-to-reduce-a-high-packet-drop-rate_configuring-ethtool-settings-in-networkmanager-connection-profiles" data-v-b883c74f>30.5. Increasing the ring buffer size to reduce a high packet drop rate by using nmcli</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_increasing-the-ring-buffer-size-to-reduce-a-high-packet-drop-rate-using-the-network-rhel-system-role_configuring-ethtool-settings-in-networkmanager-connection-profiles" id="sub-link-to-configuring_and_managing_networking-proc_increasing-the-ring-buffer-size-to-reduce-a-high-packet-drop-rate-using-the-network-rhel-system-role_configuring-ethtool-settings-in-networkmanager-connection-profiles" data-v-b883c74f>30.6. Increasing the ring buffer size to reduce a high packet drop rate by using the network RHEL system role</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-an-ethtool-channels-settings-by-using-nmcli_configuring-ethtool-settings-in-networkmanager-connection-profiles" id="sub-link-to-configuring_and_managing_networking-configuring-an-ethtool-channels-settings-by-using-nmcli_configuring-ethtool-settings-in-networkmanager-connection-profiles" data-v-b883c74f>30.7. Configuring an ethtool channels settings by using nmcli</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--introduction-to-networkmanager-debugging_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="introduction-to-networkmanager-debugging_configuring-and-managing-networking--summary" data-v-fa0dae77>31. Introduction to NetworkManager Debugging</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#introduction-to-networkmanager-debugging_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-introduction-to-networkmanager-debugging_configuring-and-managing-networking" data-v-fa0dae77>Introduction to NetworkManager Debugging</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#introduction-to-networkmanager-reapply-method_introduction-to-networkmanager-debugging" id="sub-link-to-configuring_and_managing_networking-introduction-to-networkmanager-reapply-method_introduction-to-networkmanager-debugging" data-v-b883c74f>31.1. Introduction to NetworkManager reapply method</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#setting-the-networkmanager-log-level_introduction-to-networkmanager-debugging" id="sub-link-to-configuring_and_managing_networking-setting-the-networkmanager-log-level_introduction-to-networkmanager-debugging" data-v-b883c74f>31.2. Setting the NetworkManager log level</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#temporarily-setting-log-levels-at-run-time-using-nmcli_introduction-to-networkmanager-debugging" id="sub-link-to-configuring_and_managing_networking-temporarily-setting-log-levels-at-run-time-using-nmcli_introduction-to-networkmanager-debugging" data-v-b883c74f>31.3. Temporarily setting log levels at run time using nmcli</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#viewing-networkmanager-logs_introduction-to-networkmanager-debugging" id="sub-link-to-configuring_and_managing_networking-viewing-networkmanager-logs_introduction-to-networkmanager-debugging" data-v-b883c74f>31.4. Viewing NetworkManager logs</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#debugging-levels-and-domains_introduction-to-networkmanager-debugging" id="sub-link-to-configuring_and_managing_networking-debugging-levels-and-domains_introduction-to-networkmanager-debugging" data-v-b883c74f>31.5. Debugging levels and domains</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_using-lldp-to-debug-network-configuration-problems_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_using-lldp-to-debug-network-configuration-problems_configuring-and-managing-networking--summary" data-v-fa0dae77>32. Using LLDP to debug network configuration problems</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_using-lldp-to-debug-network-configuration-problems_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-assembly_using-lldp-to-debug-network-configuration-problems_configuring-and-managing-networking" data-v-fa0dae77>Using LLDP to debug network configuration problems</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_debugging-an-incorrect-vlan-configuration-using-lldp-information_assembly_using-lldp-to-debug-network-configuration-problems" id="sub-link-to-configuring_and_managing_networking-proc_debugging-an-incorrect-vlan-configuration-using-lldp-information_assembly_using-lldp-to-debug-network-configuration-problems" data-v-b883c74f>32.1. Debugging an incorrect VLAN configuration using LLDP information</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--linux-traffic-control_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="linux-traffic-control_configuring-and-managing-networking--summary" data-v-fa0dae77>33. Linux traffic control</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#linux-traffic-control_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-linux-traffic-control_configuring-and-managing-networking" data-v-fa0dae77>Linux traffic control</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#overview-of-queuing-disciplines_linux-traffic-control" id="sub-link-to-configuring_and_managing_networking-overview-of-queuing-disciplines_linux-traffic-control" data-v-b883c74f>33.1. Overview of queuing disciplines</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#introduction-to-connection-tracking_linux-traffic-control" id="sub-link-to-configuring_and_managing_networking-introduction-to-connection-tracking_linux-traffic-control" data-v-b883c74f>33.2. Introduction to connection tracking</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#inspecting-qdisc-of-a-network-interface-using-the-tc-utility_linux-traffic-control" id="sub-link-to-configuring_and_managing_networking-inspecting-qdisc-of-a-network-interface-using-the-tc-utility_linux-traffic-control" data-v-b883c74f>33.3. Inspecting qdiscs of a network interface using the tc utility</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#updating-the-default-qdisc_linux-traffic-control" id="sub-link-to-configuring_and_managing_networking-updating-the-default-qdisc_linux-traffic-control" data-v-b883c74f>33.4. Updating the default qdisc</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#temporarily-setting-the-current-qdisc-of-a-network-interface-using-the-tc-utility_linux-traffic-control" id="sub-link-to-configuring_and_managing_networking-temporarily-setting-the-current-qdisc-of-a-network-interface-using-the-tc-utility_linux-traffic-control" data-v-b883c74f>33.5. Temporarily setting the current qdisc of a network interface using the tc utility</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_permanently-setting-the-current-qdisc-of-a-network-interface-using-networkmanager_linux-traffic-control" id="sub-link-to-configuring_and_managing_networking-proc_permanently-setting-the-current-qdisc-of-a-network-interface-using-networkmanager_linux-traffic-control" data-v-b883c74f>33.6. Permanently setting the current qdisc of a network interface using NetworkManager</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-the-rate-limiting-of-packets-by-using-the-tc-ctinfo-utility_linux-traffic-control" id="sub-link-to-configuring_and_managing_networking-configuring-the-rate-limiting-of-packets-by-using-the-tc-ctinfo-utility_linux-traffic-control" data-v-b883c74f>33.7. Configuring the rate limiting of packets by using the tc-ctinfo utility</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#available-qdiscs-in-rhel_linux-traffic-control" id="sub-link-to-configuring_and_managing_networking-available-qdiscs-in-rhel_linux-traffic-control" data-v-b883c74f>33.8. Available qdiscs in RHEL</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system_configuring-and-managing-networking--summary" data-v-fa0dae77>34. Authenticating a RHEL client to the network by using the 802.1X standard with a certificate stored on the file system</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system_configuring-and-managing-networking" data-v-fa0dae77>Authenticating a RHEL client to the network by using the 802.1X standard with a certificate stored on the file system</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-802-1x-network-authentication-on-an-existing-ethernet-connection-by-using-nmcli_authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system" id="sub-link-to-configuring_and_managing_networking-configuring-802-1x-network-authentication-on-an-existing-ethernet-connection-by-using-nmcli_authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system" data-v-b883c74f>34.1. Configuring 802.1X network authentication on an existing Ethernet connection by using nmcli</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-static-ethernet-connection-with-802-1x-network-authentication-by-using-nmstatectl_authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-static-ethernet-connection-with-802-1x-network-authentication-by-using-nmstatectl_authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system" data-v-b883c74f>34.2. Configuring a static Ethernet connection with 802.1X network authentication by using nmstatectl</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-static-ethernet-connection-with-802-1x-network-authentication-by-using-the-network-rhel-system-role_authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system" id="sub-link-to-configuring_and_managing_networking-configuring-a-static-ethernet-connection-with-802-1x-network-authentication-by-using-the-network-rhel-system-role_authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system" data-v-b883c74f>34.3. Configuring a static Ethernet connection with 802.1X network authentication by using the network RHEL system role</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-a-wifi-connection-with-802-1x-network-authentication-by-using-the-network-rhel-system-role_authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system" id="sub-link-to-configuring_and_managing_networking-proc_configuring-a-wifi-connection-with-802-1x-network-authentication-by-using-the-network-rhel-system-role_authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system" data-v-b883c74f>34.4. Configuring a wifi connection with 802.1X network authentication by using the network RHEL system role</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend_configuring-and-managing-networking--summary" data-v-fa0dae77>35. Setting up an 802.1x network authentication service for LAN clients by using hostapd with FreeRADIUS backend</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend_configuring-and-managing-networking" data-v-fa0dae77>Setting up an 802.1x network authentication service for LAN clients by using hostapd with FreeRADIUS backend</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#prerequisites" id="sub-link-to-configuring_and_managing_networking-prerequisites" data-v-b883c74f>35.1. Prerequisites</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_setting-up-the-bridge-on-the-authenticator_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend" id="sub-link-to-configuring_and_managing_networking-proc_setting-up-the-bridge-on-the-authenticator_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend" data-v-b883c74f>35.2. Setting up the bridge on the authenticator</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-freeradius-to-authenticate-network-clients-securely-using-eap_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend" id="sub-link-to-configuring_and_managing_networking-proc_configuring-freeradius-to-authenticate-network-clients-securely-using-eap_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend" data-v-b883c74f>35.3. Configuring FreeRADIUS to authenticate network clients securely by using EAP</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-hostapd-as-an-authenticator-in-a-wired-network_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend" id="sub-link-to-configuring_and_managing_networking-proc_configuring-hostapd-as-an-authenticator-in-a-wired-network_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend" data-v-b883c74f>35.4. Configuring hostapd as an authenticator in a wired network</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_testing-eap-ttls-authentication-against-a-freeradius-server-or-authenticator_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend" id="sub-link-to-configuring_and_managing_networking-proc_testing-eap-ttls-authentication-against-a-freeradius-server-or-authenticator_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend" data-v-b883c74f>35.5. Testing EAP-TTLS authentication against a FreeRADIUS server or authenticator</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_blocking-and-allowing-traffic-based-on-hostapd-authentication-events_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend" id="sub-link-to-configuring_and_managing_networking-proc_blocking-and-allowing-traffic-based-on-hostapd-authentication-events_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend" data-v-b883c74f>35.6. Blocking and allowing traffic based on hostapd authentication events</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--getting-started-with-multipath-tcp_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="getting-started-with-multipath-tcp_configuring-and-managing-networking--summary" data-v-fa0dae77>36. Getting started with Multipath TCP</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#getting-started-with-multipath-tcp_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-getting-started-with-multipath-tcp_configuring-and-managing-networking" data-v-fa0dae77>Getting started with Multipath TCP</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#understanding-mptcp_getting-started-with-multipath-tcp" id="sub-link-to-configuring_and_managing_networking-understanding-mptcp_getting-started-with-multipath-tcp" data-v-b883c74f>36.1. Understanding MPTCP</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#preparing-rhel-to-enable-mptcp-support_getting-started-with-multipath-tcp" id="sub-link-to-configuring_and_managing_networking-preparing-rhel-to-enable-mptcp-support_getting-started-with-multipath-tcp" data-v-b883c74f>36.2. Preparing RHEL to enable MPTCP support</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#using-iproute2-to-temporarily-configure-and-enable-multiple-paths-for-mptcp-applications_getting-started-with-multipath-tcp" id="sub-link-to-configuring_and_managing_networking-using-iproute2-to-temporarily-configure-and-enable-multiple-paths-for-mptcp-applications_getting-started-with-multipath-tcp" data-v-b883c74f>36.3. Using iproute2 to temporarily configure and enable multiple paths for MPTCP applications</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_permanently-configuring-multiple-paths-for-mptcp-applications_getting-started-with-multipath-tcp" id="sub-link-to-configuring_and_managing_networking-proc_permanently-configuring-multiple-paths-for-mptcp-applications_getting-started-with-multipath-tcp" data-v-b883c74f>36.4. Permanently configuring multiple paths for MPTCP applications</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_monitoring-mptcp-sub-flows_getting-started-with-multipath-tcp" id="sub-link-to-configuring_and_managing_networking-proc_monitoring-mptcp-sub-flows_getting-started-with-multipath-tcp" data-v-b883c74f>36.5. Monitoring MPTCP sub-flows</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#disabling-multipath-tcp-in-the-kernel_getting-started-with-multipath-tcp" id="sub-link-to-configuring_and_managing_networking-disabling-multipath-tcp-in-the-kernel_getting-started-with-multipath-tcp" data-v-b883c74f>36.6. Disabling Multipath TCP in the kernel</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_managing-the-mptcpd-service_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_managing-the-mptcpd-service_configuring-and-managing-networking--summary" data-v-fa0dae77>37. Managing the mptcpd service</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_managing-the-mptcpd-service_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-assembly_managing-the-mptcpd-service_configuring-and-managing-networking" data-v-fa0dae77>Managing the mptcpd service</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-mptcpd_assembly_managing-the-mptcpd-service" id="sub-link-to-configuring_and_managing_networking-proc_configuring-mptcpd_assembly_managing-the-mptcpd-service" data-v-b883c74f>37.1. Configuring mptcpd</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_managing-applications-with-mptcpize-tool_assembly_managing-the-mptcpd-service" id="sub-link-to-configuring_and_managing_networking-proc_managing-applications-with-mptcpize-tool_assembly_managing-the-mptcpd-service" data-v-b883c74f>37.2. Managing applications with mptcpize tool</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_enabling-mptcp-sockets-for-a-services-using-the-mptcpize-utility_assembly_managing-the-mptcpd-service" id="sub-link-to-configuring_and_managing_networking-proc_enabling-mptcp-sockets-for-a-services-using-the-mptcpize-utility_assembly_managing-the-mptcpd-service" data-v-b883c74f>37.3. Enabling MPTCP sockets for a services using the mptcpize utility</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_networkmanager-connection-profiles-in-keyfile-format_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_networkmanager-connection-profiles-in-keyfile-format_configuring-and-managing-networking--summary" data-v-fa0dae77>38. NetworkManager connection profiles in keyfile format</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_networkmanager-connection-profiles-in-keyfile-format_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-assembly_networkmanager-connection-profiles-in-keyfile-format_configuring-and-managing-networking" data-v-fa0dae77>NetworkManager connection profiles in keyfile format</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_the-keyfile-format-of-networkmanager-profiles_assembly_networkmanager-connection-profiles-in-keyfile-format" id="sub-link-to-configuring_and_managing_networking-con_the-keyfile-format-of-networkmanager-profiles_assembly_networkmanager-connection-profiles-in-keyfile-format" data-v-b883c74f>38.1. The keyfile format of NetworkManager profiles</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_using-nmcli-to-create-keyfile-connection-profiles-in-offline-mode_assembly_networkmanager-connection-profiles-in-keyfile-format" id="sub-link-to-configuring_and_managing_networking-proc_using-nmcli-to-create-keyfile-connection-profiles-in-offline-mode_assembly_networkmanager-connection-profiles-in-keyfile-format" data-v-b883c74f>38.2. Using nmcli to create keyfile connection profiles in offline mode</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_manually-creating-a-networkmanager-profile-in-keyfile-format_assembly_networkmanager-connection-profiles-in-keyfile-format" id="sub-link-to-configuring_and_managing_networking-proc_manually-creating-a-networkmanager-profile-in-keyfile-format_assembly_networkmanager-connection-profiles-in-keyfile-format" data-v-b883c74f>38.3. Manually creating a NetworkManager profile in keyfile format</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#the-differences-in-interface-renaming-with-profiles-in-ifcfg-and-keyfile-format_assembly_networkmanager-connection-profiles-in-keyfile-format" id="sub-link-to-configuring_and_managing_networking-the-differences-in-interface-renaming-with-profiles-in-ifcfg-and-keyfile-format_assembly_networkmanager-connection-profiles-in-keyfile-format" data-v-b883c74f>38.4. The differences in interface renaming with profiles in ifcfg and keyfile format</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_migrating-networkmanager-profiles-from-ifcfg-to-keyfile-format_assembly_networkmanager-connection-profiles-in-keyfile-format" id="sub-link-to-configuring_and_managing_networking-proc_migrating-networkmanager-profiles-from-ifcfg-to-keyfile-format_assembly_networkmanager-connection-profiles-in-keyfile-format" data-v-b883c74f>38.5. Migrating NetworkManager profiles from ifcfg to keyfile format</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--systemd-network-targets-and-services_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="systemd-network-targets-and-services_configuring-and-managing-networking--summary" data-v-fa0dae77>39. Systemd network targets and services</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#systemd-network-targets-and-services_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-systemd-network-targets-and-services_configuring-and-managing-networking" data-v-fa0dae77>Systemd network targets and services</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#differences-between-the-network-and-network-online-systemd-target_systemd-network-targets-and-services" id="sub-link-to-configuring_and_managing_networking-differences-between-the-network-and-network-online-systemd-target_systemd-network-targets-and-services" data-v-b883c74f>39.1. Differences between the network and network-online systemd target</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#overview-of-networkmanager-wait-online_systemd-network-targets-and-services" id="sub-link-to-configuring_and_managing_networking-overview-of-networkmanager-wait-online_systemd-network-targets-and-services" data-v-b883c74f>39.2. Overview of NetworkManager-wait-online</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-systemd-service-to-start-after-the-network-has-been-started_systemd-network-targets-and-services" id="sub-link-to-configuring_and_managing_networking-configuring-a-systemd-service-to-start-after-the-network-has-been-started_systemd-network-targets-and-services" data-v-b883c74f>39.3. Configuring a systemd service to start after the network has been started</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_introduction-to-nmstate_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_introduction-to-nmstate_configuring-and-managing-networking--summary" data-v-fa0dae77>40. Introduction to Nmstate</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_introduction-to-nmstate_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-assembly_introduction-to-nmstate_configuring-and-managing-networking" data-v-fa0dae77>Introduction to Nmstate</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_using-the-libnmstate-library-in-a-python-application_assembly_introduction-to-nmstate" id="sub-link-to-configuring_and_managing_networking-con_using-the-libnmstate-library-in-a-python-application_assembly_introduction-to-nmstate" data-v-b883c74f>40.1. Using the libnmstate library in a Python application</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_updating-the-current-network-configuration-using-nmstatectl_assembly_introduction-to-nmstate" id="sub-link-to-configuring_and_managing_networking-proc_updating-the-current-network-configuration-using-nmstatectl_assembly_introduction-to-nmstate" data-v-b883c74f>40.2. Updating the current network configuration by using nmstatectl</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#the-nmstate-systemd-service_assembly_introduction-to-nmstate" id="sub-link-to-configuring_and_managing_networking-the-nmstate-systemd-service_assembly_introduction-to-nmstate" data-v-b883c74f>40.3. The nmstate systemd service</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ref_network-states-for-the-network-rhel-system-roles_assembly_introduction-to-nmstate" id="sub-link-to-configuring_and_managing_networking-ref_network-states-for-the-network-rhel-system-roles_assembly_introduction-to-nmstate" data-v-b883c74f>40.4. Network states for the network RHEL system role</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--capturing-network-packets_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="capturing-network-packets_configuring-and-managing-networking--summary" data-v-fa0dae77>41. Capturing network packets</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#capturing-network-packets_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-capturing-network-packets_configuring-and-managing-networking" data-v-fa0dae77>Capturing network packets</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#using-xdpdump-to-capture-network-packets-including-packets-dropped-by-xdp-programs_capturing-network-packets" id="sub-link-to-configuring_and_managing_networking-using-xdpdump-to-capture-network-packets-including-packets-dropped-by-xdp-programs_capturing-network-packets" data-v-b883c74f>41.1. Using xdpdump to capture network packets including packets dropped by XDP programs</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#additional_resources_2" id="sub-link-to-configuring_and_managing_networking-additional_resources_2" data-v-b883c74f>41.2. Additional resources</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_understanding-the-ebpf-features-in-rhel-9_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_understanding-the-ebpf-features-in-rhel-9_configuring-and-managing-networking--summary" data-v-fa0dae77>42. Understanding the eBPF networking features in RHEL 9</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_understanding-the-ebpf-features-in-rhel-9_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-assembly_understanding-the-ebpf-features-in-rhel-9_configuring-and-managing-networking" data-v-fa0dae77>Understanding the eBPF networking features in RHEL 9</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ref_overview-of-networking-ebpf-features-in-rhel-9_assembly_understanding-the-ebpf-features-in-rhel-9" id="sub-link-to-configuring_and_managing_networking-ref_overview-of-networking-ebpf-features-in-rhel-9_assembly_understanding-the-ebpf-features-in-rhel-9" data-v-b883c74f>42.1. Overview of networking eBPF features in RHEL 9</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ref_overview-of-xdp-features-by-network-cards_assembly_understanding-the-ebpf-features-in-rhel-9" id="sub-link-to-configuring_and_managing_networking-ref_overview-of-xdp-features-by-network-cards_assembly_understanding-the-ebpf-features-in-rhel-9" data-v-b883c74f>42.2. Overview of XDP features in RHEL 9 by network cards</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--network-tracing-using-the-bpf-compiler-collection_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="network-tracing-using-the-bpf-compiler-collection_configuring-and-managing-networking--summary" data-v-fa0dae77>43. Network tracing using the BPF compiler collection</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#network-tracing-using-the-bpf-compiler-collection_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-network-tracing-using-the-bpf-compiler-collection_configuring-and-managing-networking" data-v-fa0dae77>Network tracing using the BPF compiler collection</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-the-bcc-tools-package_network-tracing-using-the-bpf-compiler-collection" id="sub-link-to-configuring_and_managing_networking-installing-the-bcc-tools-package_network-tracing-using-the-bpf-compiler-collection" data-v-b883c74f>43.1. Installing the bcc-tools package</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#displaying-tcp-connections-added-to-the-kernels-accept-queue_network-tracing-using-the-bpf-compiler-collection" id="sub-link-to-configuring_and_managing_networking-displaying-tcp-connections-added-to-the-kernels-accept-queue_network-tracing-using-the-bpf-compiler-collection" data-v-b883c74f>43.2. Displaying TCP connections added to the Kernel’s accept queue</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#tracing-outgoing-tcp-connection-attempts_network-tracing-using-the-bpf-compiler-collection" id="sub-link-to-configuring_and_managing_networking-tracing-outgoing-tcp-connection-attempts_network-tracing-using-the-bpf-compiler-collection" data-v-b883c74f>43.3. Tracing outgoing TCP connection attempts</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#measuring-the-latency-of-outgoing-tcp-connections_network-tracing-using-the-bpf-compiler-collection" id="sub-link-to-configuring_and_managing_networking-measuring-the-latency-of-outgoing-tcp-connections_network-tracing-using-the-bpf-compiler-collection" data-v-b883c74f>43.4. Measuring the latency of outgoing TCP connections</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#displaying-details-about-tcp-packets-and-segments-that-were-dropped-by-the-kernel_network-tracing-using-the-bpf-compiler-collection" id="sub-link-to-configuring_and_managing_networking-displaying-details-about-tcp-packets-and-segments-that-were-dropped-by-the-kernel_network-tracing-using-the-bpf-compiler-collection" data-v-b883c74f>43.5. Displaying details about TCP packets and segments that were dropped by the kernel</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#tracing-tcp-sessions_network-tracing-using-the-bpf-compiler-collection" id="sub-link-to-configuring_and_managing_networking-tracing-tcp-sessions_network-tracing-using-the-bpf-compiler-collection" data-v-b883c74f>43.6. Tracing TCP sessions</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#tracing-tcp-retransmissions_network-tracing-using-the-bpf-compiler-collection" id="sub-link-to-configuring_and_managing_networking-tracing-tcp-retransmissions_network-tracing-using-the-bpf-compiler-collection" data-v-b883c74f>43.7. Tracing TCP retransmissions</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#displaying-tcp-state-change-information_network-tracing-using-the-bpf-compiler-collection" id="sub-link-to-configuring_and_managing_networking-displaying-tcp-state-change-information_network-tracing-using-the-bpf-compiler-collection" data-v-b883c74f>43.8. Displaying TCP state change information</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#summarizing-and-aggregating-tcp-traffic-sent-to-specific-subnets_network-tracing-using-the-bpf-compiler-collection" id="sub-link-to-configuring_and_managing_networking-summarizing-and-aggregating-tcp-traffic-sent-to-specific-subnets_network-tracing-using-the-bpf-compiler-collection" data-v-b883c74f>43.9. Summarizing and aggregating TCP traffic sent to specific subnets</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#displaying-the-network-throughput-by-ip-address-and-port_network-tracing-using-the-bpf-compiler-collection" id="sub-link-to-configuring_and_managing_networking-displaying-the-network-throughput-by-ip-address-and-port_network-tracing-using-the-bpf-compiler-collection" data-v-b883c74f>43.10. Displaying the network throughput by IP address and port</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#tracing-established-tcp-connections_network-tracing-using-the-bpf-compiler-collection" id="sub-link-to-configuring_and_managing_networking-tracing-established-tcp-connections_network-tracing-using-the-bpf-compiler-collection" data-v-b883c74f>43.11. Tracing established TCP connections</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#tracing-ipv4-and-ipv6-listen-attempts_network-tracing-using-the-bpf-compiler-collection" id="sub-link-to-configuring_and_managing_networking-tracing-ipv4-and-ipv6-listen-attempts_network-tracing-using-the-bpf-compiler-collection" data-v-b883c74f>43.12. Tracing IPv4 and IPv6 listen attempts</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#summarizing-the-service-time-of-soft-interrupts_network-tracing-using-the-bpf-compiler-collection" id="sub-link-to-configuring_and_managing_networking-summarizing-the-service-time-of-soft-interrupts_network-tracing-using-the-bpf-compiler-collection" data-v-b883c74f>43.13. Summarizing the service time of soft interrupts</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#summarizing-packets-size-and-count-on-a-network-interface_network-tracing-using-the-bpf-compiler-collection" id="sub-link-to-configuring_and_managing_networking-summarizing-packets-size-and-count-on-a-network-interface_network-tracing-using-the-bpf-compiler-collection" data-v-b883c74f>43.14. Summarizing packets size and count on a network interface</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses_configuring-and-managing-networking--summary" data-v-fa0dae77>44. Configuring network devices to accept traffic from all MAC addresses</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses_configuring-and-managing-networking" data-v-fa0dae77>Configuring network devices to accept traffic from all MAC addresses</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_temporarily-configuring-a-network-device-to-accept-all-traffic_assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses" id="sub-link-to-configuring_and_managing_networking-proc_temporarily-configuring-a-network-device-to-accept-all-traffic_assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses" data-v-b883c74f>44.1. Temporarily configuring a device to accept all traffic</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_permanently-configuring-a-network-device-to-accept-all-traffic-using-nmcli_assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses" id="sub-link-to-configuring_and_managing_networking-proc_permanently-configuring-a-network-device-to-accept-all-traffic-using-nmcli_assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses" data-v-b883c74f>44.2. Permanently configuring a network device to accept all traffic using nmcli</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_permanently-configuring-a-network-device-to-accept-all-traffic-using-nmstatectl_assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses" id="sub-link-to-configuring_and_managing_networking-proc_permanently-configuring-a-network-device-to-accept-all-traffic-using-nmstatectl_assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses" data-v-b883c74f>44.3. Permanently configuring a network device to accept all traffic using nmstatectl</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><a class="link" href="#proc_mirroring-a-network-interface-by-using-nmcli_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-proc_mirroring-a-network-interface-by-using-nmcli_configuring-and-managing-networking" data-v-fa0dae77>45. Mirroring a network interface by using nmcli</a></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_using-nmstate-autoconf-to-automatically-configure-the-network-state-using-lldp_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_using-nmstate-autoconf-to-automatically-configure-the-network-state-using-lldp_configuring-and-managing-networking--summary" data-v-fa0dae77>46. Using nmstate-autoconf to automatically configure the network state using LLDP</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_using-nmstate-autoconf-to-automatically-configure-the-network-state-using-lldp_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-assembly_using-nmstate-autoconf-to-automatically-configure-the-network-state-using-lldp_configuring-and-managing-networking" data-v-fa0dae77>Using nmstate-autoconf to automatically configure the network state using LLDP</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_using-nmstate-autoconf-to-automatically-configure-network-interfaces_assembly_using-nmstate-autoconf-to-automatically-configure-the-network-state-using-lldp" id="sub-link-to-configuring_and_managing_networking-proc_using-nmstate-autoconf-to-automatically-configure-network-interfaces_assembly_using-nmstate-autoconf-to-automatically-configure-the-network-state-using-lldp" data-v-b883c74f>46.1. Using nmstate-autoconf to automatically configure network interfaces</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-802-3-link-settings_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-802-3-link-settings_configuring-and-managing-networking--summary" data-v-fa0dae77>47. Configuring 802.3 link settings</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-802-3-link-settings_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-configuring-802-3-link-settings_configuring-and-managing-networking" data-v-fa0dae77>Configuring 802.3 link settings</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-802-3-link-settings-using-the-nmcli-utility_configuring-802-3-link-settings" id="sub-link-to-configuring_and_managing_networking-proc_configuring-802-3-link-settings-using-the-nmcli-utility_configuring-802-3-link-settings" data-v-b883c74f>47.1. Configuring 802.3 link settings using the nmcli utility</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--getting-started-with-dpdk_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="getting-started-with-dpdk_configuring-and-managing-networking--summary" data-v-fa0dae77>48. Getting started with DPDK</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#getting-started-with-dpdk_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-getting-started-with-dpdk_configuring-and-managing-networking" data-v-fa0dae77>Getting started with DPDK</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-the-dpdk-package_getting-started-with-dpdk" id="sub-link-to-configuring_and_managing_networking-installing-the-dpdk-package_getting-started-with-dpdk" data-v-b883c74f>48.1. Installing the dpdk package</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#additional_resources_3" id="sub-link-to-configuring_and_managing_networking-additional_resources_3" data-v-b883c74f>48.2. Additional resources</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--getting-started-with-tipc_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="getting-started-with-tipc_configuring-and-managing-networking--summary" data-v-fa0dae77>49. Getting started with TIPC</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#getting-started-with-tipc_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-getting-started-with-tipc_configuring-and-managing-networking" data-v-fa0dae77>Getting started with TIPC</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#the-architecture-of-tipc_getting-started-with-tipc" id="sub-link-to-configuring_and_managing_networking-the-architecture-of-tipc_getting-started-with-tipc" data-v-b883c74f>49.1. The architecture of TIPC</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#loading-the-tipc-module-when-the-system-boots_getting-started-with-tipc" id="sub-link-to-configuring_and_managing_networking-loading-the-tipc-module-when-the-system-boots_getting-started-with-tipc" data-v-b883c74f>49.2. Loading the tipc module when the system boots</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-a-tipc-network_getting-started-with-tipc" id="sub-link-to-configuring_and_managing_networking-creating-a-tipc-network_getting-started-with-tipc" data-v-b883c74f>49.3. Creating a TIPC network</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#additional_resources_4" id="sub-link-to-configuring_and_managing_networking-additional_resources_4" data-v-b883c74f>49.4. Additional resources</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--automatically-configuring-network-interfaces-in-public-clouds-using-nm-cloud-setup_configuring-and-managing-networking" data-v-fa0dae77><summary class="heading chapter-title" id="automatically-configuring-network-interfaces-in-public-clouds-using-nm-cloud-setup_configuring-and-managing-networking--summary" data-v-fa0dae77>50. Automatically configuring network interfaces in public clouds using nm-cloud-setup</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#automatically-configuring-network-interfaces-in-public-clouds-using-nm-cloud-setup_configuring-and-managing-networking" id="chapter-landing--configuring_and_managing_networking-automatically-configuring-network-interfaces-in-public-clouds-using-nm-cloud-setup_configuring-and-managing-networking" data-v-fa0dae77>Automatically configuring network interfaces in public clouds using nm-cloud-setup</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-and-pre-deploying-nm-cloud-setup_automatically-configuring-network-interfaces-in-public-clouds-using-nm-cloud-setup" id="sub-link-to-configuring_and_managing_networking-proc_configuring-and-pre-deploying-nm-cloud-setup_automatically-configuring-network-interfaces-in-public-clouds-using-nm-cloud-setup" data-v-b883c74f>50.1. Configuring and pre-deploying nm-cloud-setup</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#understanding-the-role-of-imdsv2-and-nm-cloud-setup-in-the-rhel-ec2-instance_automatically-configuring-network-interfaces-in-public-clouds-using-nm-cloud-setup" id="sub-link-to-configuring_and_managing_networking-understanding-the-role-of-imdsv2-and-nm-cloud-setup-in-the-rhel-ec2-instance_automatically-configuring-network-interfaces-in-public-clouds-using-nm-cloud-setup" data-v-b883c74f>50.2. Understanding the role of IMDSv2 and nm-cloud-setup in the RHEL EC2 instance</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><a class="link" href="#idm140053155520160" id="chapter-landing--configuring_and_managing_networking-idm140053155520160" data-v-fa0dae77>Legal Notice</a></li><!--]--></ol></nav><!----></div></div></aside><article class="content span-xs-12 span-sm-6 span-md-12 span-lg-7" aria-live="polite" data-v-8589d091><!----><div lang="en-us" xml:lang="en-us" class="docs-content-container" data-v-8589d091><!----><!----><h1 data-id="content_chapter" class="chapter-title" data-v-8589d091>Configuring and managing networking</h1><hr class="line-below-chp" data-v-8589d091><section class="rhdocs" data-v-8589d091><body><div xml:lang="en-US" class="book" id="idm140053190969200"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Enterprise Linux</span> <span class="productnumber">9</span></div><div><h3 class="subtitle">Managing network interfaces and advanced networking features</h3></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat</span> <span class="orgdiv">Customer Content Services</span></div></div><div><a href="#idm140053155520160">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				Using the networking capabilities of Red Hat Enterprise Linux (RHEL), you can configure your host to meet your organization's network and security requirements. For example:
			</div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><div class="para">
						You can configure bonds, VLANs, bridges, tunnels and other network types to connect the host to the network.
					</div></li><li class="listitem"><div class="para">
						IPSec and WireGuard provide secure VPNs between hosts and networks.
					</div></li><li class="listitem"><div class="para">
						RHEL also supports advanced networking features, such as policy-based routing and Multipath TCP (MPTCP).
					</div></li></ul></div></div></div></div><hr></div><section class="preface" id="proc_providing-feedback-on-red-hat-documentation_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Providing feedback on Red Hat documentation</h2></div></div></div><p class="_abstract _abstract">
			We appreciate your feedback on our documentation. Let us know how we can improve it.
		</p><div class="orderedlist"><p class="title"><strong>Submitting feedback through Jira (account required)</strong></p><ol class="orderedlist" type="1"><li class="listitem">
					Log in to the <a class="link" href="https://issues.redhat.com/projects/RHELDOCS/issues">Jira</a> website.
				</li><li class="listitem">
					Click <span class="strong strong"><strong>Create</strong></span> in the top navigation bar
				</li><li class="listitem">
					Enter a descriptive title in the <span class="strong strong"><strong>Summary</strong></span> field.
				</li><li class="listitem">
					Enter your suggestion for improvement in the <span class="strong strong"><strong>Description</strong></span> field. Include links to the relevant parts of the documentation.
				</li><li class="listitem">
					Click <span class="strong strong"><strong>Create</strong></span> at the bottom of the dialogue.
				</li></ol></div></section><section class="chapter" id="consistent-network-interface-device-naming_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 1. Implementing consistent network interface naming</h2></div></div></div><p class="_abstract _abstract">
			The <code class="literal">udev</code> device manager implements consistent device naming in Red Hat Enterprise Linux. The device manager supports different naming schemes and, by default, assigns fixed names based on firmware, topology, and location information.
		</p><p>
			Without consistent device naming, the Linux kernel assigns names to network interfaces by combining a fixed prefix and an index. The index increases as the kernel initializes the network devices. For example, <code class="literal">eth0</code> represents the first Ethernet device being probed on start-up. If you add another network interface controller to the system, the assignment of the kernel device names is no longer fixed because, after a reboot, the devices can initialize in a different order. In that case, the kernel can name the devices differently.
		</p><p>
			To solve this problem, <code class="literal">udev</code> assigns consistent device names. This has the following advantages:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Device names are stable across reboots.
				</li><li class="listitem">
					Device names stay fixed even if you add or remove hardware.
				</li><li class="listitem">
					Defective hardware can be seamlessly replaced.
				</li><li class="listitem">
					The network naming is stateless and does not require explicit configuration files.
				</li></ul></div><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
				Generally, Red Hat does not support systems where consistent device naming is disabled. For exceptions, see the <a class="link" href="https://access.redhat.com/solutions/2435891">Is it safe to set net.ifnames=0</a> solution.
			</p></div></rh-alert><section class="section" id="how-the-udev-device-manager-renames-network-interfaces_consistent-network-interface-device-naming"><div class="titlepage"><div><div><h3 class="title">1.1. How the udev device manager renames network interfaces</h3></div></div></div><p class="_abstract _abstract">
				To implement a consistent naming scheme for network interfaces, the <code class="literal">udev</code> device manager processes the following rule files in the listed order:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: <code class="literal">/usr/lib/udev/rules.d/60-net.rules</code>
					</p><p class="simpara">
						This file exists only if you install the <code class="literal">initscripts-rename-device</code> package. The <code class="literal">/usr/lib/udev/rules.d/60-net.rules</code> file defines that the deprecated <code class="literal">/usr/lib/udev/rename_device</code> helper utility searches for the <code class="literal">HWADDR</code> parameter in <code class="literal">/etc/sysconfig/network-scripts/ifcfg-*</code> files. If the value set in the variable matches the MAC address of an interface, the helper utility renames the interface to the name set in the <code class="literal">DEVICE</code> parameter of the <code class="literal">ifcfg</code> file.
					</p><p class="simpara">
						If the system uses only NetworkManager connection profiles in keyfile format, <code class="literal">udev</code> skips this step.
					</p></li><li class="listitem"><p class="simpara">
						Only on Dell systems: <code class="literal">/usr/lib/udev/rules.d/71-biosdevname.rules</code>
					</p><p class="simpara">
						This file exists only if the <code class="literal">biosdevname</code> package is installed, and the rules file defines that the <code class="literal">biosdevname</code> utility renames the interface according to its naming policy, if it was not renamed in the previous step.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							Install and use <code class="literal">biosdevname</code> only on Dell systems.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						<code class="literal">/usr/lib/udev/rules.d/75-net-description.rules</code>
					</p><p class="simpara">
						This file defines how <code class="literal">udev</code> examines the network interface and sets the properties in <code class="literal">udev</code>-internal variables. These variables are then processed in the next step by the <code class="literal">/usr/lib/udev/rules.d/80-net-setup-link.rules</code> file. Some of the properties can be undefined.
					</p></li><li class="listitem"><p class="simpara">
						<code class="literal">/usr/lib/udev/rules.d/80-net-setup-link.rules</code>
					</p><p class="simpara">
						This file calls the <code class="literal">net_setup_link</code> builtin of the <code class="literal">udev</code> service, and <code class="literal">udev</code> renames the interface based on the order of the policies in the <code class="literal">NamePolicy</code> parameter in the <code class="literal">/usr/lib/systemd/network/99-default.link</code> file. For further details, see <a class="link" href="#network-interface-naming-policies_consistent-network-interface-device-naming" title="1.2. Network interface naming policies">Network interface naming policies</a>.
					</p><p class="simpara">
						If none of the policies applies, <code class="literal">udev</code> does not rename the interface.
					</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/5984311">Why are systemd network interface names different between major RHEL versions</a> (Red Hat Knowledgebase)
					</li></ul></div></section><section class="section" id="network-interface-naming-policies_consistent-network-interface-device-naming"><div class="titlepage"><div><div><h3 class="title">1.2. Network interface naming policies</h3></div></div></div><p class="_abstract _abstract">
				By default, the <code class="literal">udev</code> device manager uses the <code class="literal">/usr/lib/systemd/network/99-default.link</code> file to determine which device naming policies to apply when it renames interfaces. The <code class="literal">NamePolicy</code> parameter in this file defines which policies <code class="literal">udev</code> uses and in which order:
			</p><pre class="literallayout">NamePolicy=keep kernel database onboard slot path</pre><p>
				The following table describes the different actions of <code class="literal">udev</code> based on which policy matches first as specified by the <code class="literal">NamePolicy</code> parameter:
			</p><rh-table><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"><!--Empty--><col style="width: 60%; " class="col_2"><!--Empty--><col style="width: 20%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140053185506688" scope="col">Policy</th><th align="left" valign="top" id="idm140053185505600" scope="col">Description</th><th align="left" valign="top" id="idm140053185504512" scope="col">Example name</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140053185506688"> <p>
								keep
							</p>
							 </td><td align="left" valign="top" headers="idm140053185505600"> <p>
								If the device already has a name that was assigned in the user space, <code class="literal">udev</code> does not rename this device. For example, this is the case if the name was assigned during device creation or by a rename operation.
							</p>
							 </td><td align="left" valign="top" headers="idm140053185504512"> </td></tr><tr><td align="left" valign="top" headers="idm140053185506688"> <p>
								kernel
							</p>
							 </td><td align="left" valign="top" headers="idm140053185505600"> <p>
								If the kernel indicates that a device name is predictable, <code class="literal">udev</code> does not rename this device.
							</p>
							 </td><td align="left" valign="top" headers="idm140053185504512"> <p>
								<code class="literal">lo</code>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053185506688"> <p>
								database
							</p>
							 </td><td align="left" valign="top" headers="idm140053185505600"> <p>
								This policy assigns names based on mappings in the <code class="literal">udev</code> hardware database. For details, see the <code class="literal">hwdb(7)</code> man page on your system.
							</p>
							 </td><td align="left" valign="top" headers="idm140053185504512"> <p>
								<code class="literal">idrac</code>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053185506688"> <p>
								onboard
							</p>
							 </td><td align="left" valign="top" headers="idm140053185505600"> <p>
								Device names incorporate firmware or BIOS-provided index numbers for onboard devices.
							</p>
							 </td><td align="left" valign="top" headers="idm140053185504512"> <p>
								<code class="literal">eno1</code>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053185506688"> <p>
								slot
							</p>
							 </td><td align="left" valign="top" headers="idm140053185505600"> <p>
								Device names incorporate firmware or BIOS-provided PCI Express (PCIe) hot-plug slot-index numbers.
							</p>
							 </td><td align="left" valign="top" headers="idm140053185504512"> <p>
								<code class="literal">ens1</code>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053185506688"> <p>
								path
							</p>
							 </td><td align="left" valign="top" headers="idm140053185505600"> <p>
								Device names incorporate the physical location of the connector of the hardware.
							</p>
							 </td><td align="left" valign="top" headers="idm140053185504512"> <p>
								<code class="literal">enp1s0</code>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053185506688"> <p>
								mac
							</p>
							 </td><td align="left" valign="top" headers="idm140053185505600"> <p>
								Device names incorporate the MAC address. By default, Red Hat Enterprise Linux does not use this policy, but administrators can enable it.
							</p>
							 </td><td align="left" valign="top" headers="idm140053185504512"> <p>
								<code class="literal">enx525400d5e0fb</code>
							</p>
							 </td></tr></tbody></table></rh-table><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#how-the-udev-device-manager-renames-network-interfaces_consistent-network-interface-device-naming" title="1.1. How the udev device manager renames network interfaces">How the udev device manager renames network interfaces</a>
					</li><li class="listitem">
						<code class="literal">systemd.link(5)</code> man page on your system
					</li></ul></div></section><section class="section" id="network-interface-naming-schemes_consistent-network-interface-device-naming"><div class="titlepage"><div><div><h3 class="title">1.3. Network interface naming schemes</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">udev</code> device manager uses certain stable interface attributes that device drivers provide to generate consistent device names.
			</p><p>
				If a new <code class="literal">udev</code> version changes how the service creates names for certain interfaces, Red Hat adds a new scheme version and documents the details in the <code class="literal">systemd.net-naming-scheme(7)</code> man page on your system. By default, Red Hat Enterprise Linux (RHEL) 9 uses the <code class="literal">rhel-9.0</code> naming scheme, even if you install or update to a later minor version of RHEL.
			</p><p>
				To prevent new drivers from providing more or other attributes for a network interface, the <code class="literal">rhel-net-naming-sysattrs</code> package provides the <code class="literal">/usr/lib/udev/hwdb.d/50-net-naming-sysattr-allowlist.hwdb</code> database. This database defines which <code class="literal">sysfs</code> values the <code class="literal">udev</code> service can use to create network interface names. The entries in the database are also versioned and influenced by the scheme version.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					On RHEL 9.4 and later, you can also use all <code class="literal">rhel-8.*</code> naming schemes.
				</p></div></rh-alert><p>
				If you want to use a scheme other than the default, you can <a class="link" href="#switching-to-a-different-network-interface-naming-scheme_consistent-network-interface-device-naming" title="1.4. Switching to a different network interface naming scheme">switch the network interface naming scheme</a>.
			</p><p>
				For further details about the naming schemes for different device types and platforms, see the <code class="literal">systemd.net-naming-scheme(7)</code> man page on your system.
			</p></section><section class="section" id="switching-to-a-different-network-interface-naming-scheme_consistent-network-interface-device-naming"><div class="titlepage"><div><div><h3 class="title">1.4. Switching to a different network interface naming scheme</h3></div></div></div><p class="_abstract _abstract">
				By default, Red Hat Enterprise Linux (RHEL) 9 uses the <code class="literal">rhel-9.0</code> naming scheme, even if you install or update to a later minor version of RHEL. While the default naming scheme fits in most scenarios, there might be reasons to switch to a different scheme version, for example:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						A new scheme can help to better identify a device if it adds additional attributes, such as a slot number, to an interface name.
					</li><li class="listitem">
						An new scheme can prevent <code class="literal">udev</code> from falling back to the kernel-assigned device names (<code class="literal">eth*</code>). This happens if the driver does not provide enough unique attributes for two or more interfaces to generate unique names for them.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have access to the console of the server.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						List the network interfaces:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip link show</strong></span>
2: eno1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
    link/ether 00:00:5e:00:53:1a brd ff:ff:ff:ff:ff:ff
...</pre><p class="simpara">
						Record the MAC addresses of the interfaces.
					</p></li><li class="listitem"><p class="simpara">
						Optional: Display the <code class="literal">ID_NET_NAMING_SCHEME</code> property of a network interface to identify the naming scheme that RHEL currently uses:
					</p><pre class="literallayout"># <span class="strong strong"><strong>udevadm info --query=property --property=ID_NET_NAMING_SCHEME /sys/class/net/eno1'</strong></span>
ID_NET_NAMING_SCHEME=rhel-9.0</pre><p class="simpara">
						Note that the property is not available on the <code class="literal">lo</code> loopback device.
					</p></li><li class="listitem"><p class="simpara">
						Append the <code class="literal">net.naming-scheme=<span class="emphasis"><em>&lt;scheme&gt;</em></span></code> option to the command line of all installed kernels, for example:
					</p><pre class="literallayout"># <span class="strong strong"><strong>grubby --update-kernel=ALL --args=net.naming-scheme=<span class="emphasis"><em>rhel-9.4</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Reboot the system.
					</p><pre class="literallayout"># <span class="strong strong"><strong>reboot</strong></span></pre></li><li class="listitem"><p class="simpara">
						Based on the MAC addresses you recorded, identify the new names of network interfaces that have changed due to the different naming scheme:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip link show</strong></span>
2: eno1np0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
    link/ether 00:00:5e:00:53:1a brd ff:ff:ff:ff:ff:ff
...</pre><p class="simpara">
						After switching the scheme, <code class="literal">udev</code> names in this example the device with MAC address <code class="literal">00:00:5e:00:53:1a</code> <code class="literal">eno1np0</code>, whereas it was named <code class="literal">eno1</code> before.
					</p></li><li class="listitem"><p class="simpara">
						Identify which NetworkManager connection profile uses an interface with the previous name:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli -f device,name connection show</strong></span>
DEVICE  NAME
eno1  example_profile
...</pre></li><li class="listitem"><p class="simpara">
						Set the <code class="literal">connection.interface-name</code> property in the connection profile to the new interface name:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify example_profile connection.interface-name "eno1np0"</strong></span></pre></li><li class="listitem"><p class="simpara">
						Reactivate the connection profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up example_profile</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Identify the naming scheme that RHEL now uses by displaying the <code class="literal">ID_NET_NAMING_SCHEME</code> property of a network interface:
					</p><pre class="literallayout"># <span class="strong strong"><strong>udevadm info --query=property --property=ID_NET_NAMING_SCHEME /sys/class/net/eno1np0'</strong></span>
ID_NET_NAMING_SCHEME=_rhel-9.4</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#network-interface-naming-schemes_consistent-network-interface-device-naming" title="1.3. Network interface naming schemes">Network interface naming schemes</a>
					</li></ul></div></section><section class="section" id="proc_customizing-the-prefix-for-ethernet-interfaces-during-installation_consistent-network-interface-device-naming"><div class="titlepage"><div><div><h3 class="title">1.5. Customizing the prefix for Ethernet interfaces during installation</h3></div></div></div><p class="_abstract _abstract">
				If you do not want to use the default device-naming policy for Ethernet interfaces, you can set a custom device prefix during the Red Hat Enterprise Linux (RHEL) installation.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					Red Hat supports systems with customized Ethernet prefixes only if you set the prefix during the RHEL installation. Using the <code class="literal">prefixdevname</code> utility on already deployed systems is not supported.
				</p></div></rh-alert><p>
				If you set a device prefix during the installation, the <code class="literal">udev</code> service uses the <code class="literal"><span class="emphasis"><em>&lt;prefix&gt;&lt;index&gt;</em></span></code> format for Ethernet interfaces after the installation. For example, if you set the prefix <code class="literal">net</code>, the service assigns the names <code class="literal">net0</code>, <code class="literal">net1</code>, and so on to the Ethernet interfaces.
			</p><p>
				The <code class="literal">udev</code> service appends the index to the custom prefix, and preserves the index values of known Ethernet interfaces. If you add an interface, <code class="literal">udev</code> assigns an index value that is one greater than the previously-assigned index value to the new interface.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The prefix consists of ASCII characters.
					</li><li class="listitem">
						The prefix is an alphanumeric string.
					</li><li class="listitem">
						The prefix is shorter than 16 characters.
					</li><li class="listitem">
						The prefix does not conflict with any other well-known network interface prefix, such as <code class="literal">eth</code>, <code class="literal">eno</code>, <code class="literal">ens</code>, and <code class="literal">em</code>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Boot the Red Hat Enterprise Linux installation media.
					</li><li class="listitem"><p class="simpara">
						In the boot manager, follow these steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Select the <code class="literal">Install Red Hat Enterprise Linux <span class="emphasis"><em>&lt;version&gt;</em></span></code> entry.
							</li><li class="listitem">
								Press <kbd class="keycap">Tab</kbd> to edit the entry.
							</li><li class="listitem">
								Append <code class="literal">net.ifnames.prefix=<span class="emphasis"><em>&lt;prefix&gt;</em></span></code> to the kernel options.
							</li><li class="listitem">
								Press <kbd class="keycap">Enter</kbd> to start the installation program.
							</li></ol></div></li><li class="listitem">
						Install Red Hat Enterprise Linux.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To verify the interface names, display the network interfaces:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip link show</strong></span>
...
2: net0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
    link/ether 00:00:5e:00:53:1a brd ff:ff:ff:ff:ff:ff
...</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/interactively_installing_rhel_from_installation_media/index">Interactively installing RHEL from installation media</a>
					</li></ul></div></section><section class="section" id="configuring-user-defined-network-interface-names-by-using-udev-rules_consistent-network-interface-device-naming"><div class="titlepage"><div><div><h3 class="title">1.6. Configuring user-defined network interface names by using udev rules</h3></div></div></div><p class="_abstract _abstract">
				You can use <code class="literal">udev</code> rules to implement custom network interface names that reflect your organization’s requirements.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Identify the network interface that you want to rename:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip link show</strong></span>
...
enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
    link/ether 00:00:5e:00:53:1a brd ff:ff:ff:ff:ff:ff
...</pre><p class="simpara">
						Record the MAC address of the interface.
					</p></li><li class="listitem"><p class="simpara">
						Display the device type ID of the interface:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /sys/class/net/enp1s0/type</strong></span>
1</pre></li><li class="listitem"><p class="simpara">
						Create the <code class="literal">/etc/udev/rules.d/70-persistent-net.rules</code> file, and add a rule for each interface that you want to rename:
					</p><pre class="screen">SUBSYSTEM=="net",ACTION=="add",ATTR{address}=="<span class="emphasis"><em>&lt;MAC_address&gt;</em></span>",ATTR{type}=="<span class="emphasis"><em>&lt;device_type_id&gt;</em></span>",NAME="<span class="emphasis"><em>&lt;new_interface_name&gt;</em></span>"</pre><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							Use only <code class="literal">70-persistent-net.rules</code> as a file name if you require consistent device names during the boot process. The <code class="literal">dracut</code> utility adds a file with this name to the <code class="literal">initrd</code> image if you regenerate the RAM disk image.
						</p></div></rh-alert><p class="simpara">
						For example, use the following rule to rename the interface with MAC address <code class="literal">00:00:5e:00:53:1a</code> to <code class="literal">provider0</code>:
					</p><pre class="screen">SUBSYSTEM=="net",ACTION=="add",ATTR{address}=="<span class="emphasis"><em>00:00:5e:00:53:1a</em></span>",ATTR{type}=="<span class="emphasis"><em>1</em></span>",NAME="<span class="emphasis"><em>provider0</em></span>"</pre></li><li class="listitem"><p class="simpara">
						Optional: Regenerate the <code class="literal">initrd</code> RAM disk image:
					</p><pre class="literallayout"># <span class="strong strong"><strong>dracut -f</strong></span></pre><p class="simpara">
						You require this step only if you need networking capabilities in the RAM disk. For example, this is the case if the root file system is stored on a network device, such as iSCSI.
					</p></li><li class="listitem"><p class="simpara">
						Identify which NetworkManager connection profile uses the interface that you want to rename:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli -f device,name connection show</strong></span>
DEVICE  NAME
enp1s0  example_profile
...</pre></li><li class="listitem"><p class="simpara">
						Unset the <code class="literal">connection.interface-name</code> property in the connection profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify example_profile connection.interface-name ""</strong></span></pre></li><li class="listitem"><p class="simpara">
						Temporarily, configure the connection profile to match both the new and the previous interface name:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify example_profile match.interface-name "provider0 enp1s0"</strong></span></pre></li><li class="listitem"><p class="simpara">
						Reboot the system:
					</p><pre class="literallayout"># <span class="strong strong"><strong>reboot</strong></span></pre></li><li class="listitem"><p class="simpara">
						Verify that the device with the MAC address that you specified in the link file has been renamed to <code class="literal">provider0</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip link show</strong></span>
provider0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000
    link/ether 00:00:5e:00:53:1a brd ff:ff:ff:ff:ff:ff
...</pre></li><li class="listitem"><p class="simpara">
						Configure the connection profile to match only the new interface name:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify example_profile match.interface-name "provider0"</strong></span></pre><p class="simpara">
						You have now removed the old interface name from the connection profile.
					</p></li><li class="listitem"><p class="simpara">
						Reactivate the connection profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up example_profile</strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">udev(7)</code> man page on your system
					</li></ul></div></section><section class="section" id="configuring-user-defined-network-interface-names-by-using-systemd-link-files_consistent-network-interface-device-naming"><div class="titlepage"><div><div><h3 class="title">1.7. Configuring user-defined network interface names by using systemd link files</h3></div></div></div><p class="_abstract _abstract">
				You can use <code class="literal">systemd</code> link files to implement custom network interface names that reflect your organization’s requirements.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You must meet one of these conditions: NetworkManager does not manage this interface, or the corresponding connection profile uses the <a class="link" href="#assembly_networkmanager-connection-profiles-in-keyfile-format_configuring-and-managing-networking" title="Chapter 38. NetworkManager connection profiles in keyfile format">keyfile format</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Identify the network interface that you want to rename:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip link show</strong></span>
...
enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
    link/ether 00:00:5e:00:53:1a brd ff:ff:ff:ff:ff:ff
...</pre><p class="simpara">
						Record the MAC address of the interface.
					</p></li><li class="listitem"><p class="simpara">
						If it does not already exist, create the <code class="literal">/etc/systemd/network/</code> directory:
					</p><pre class="literallayout"># <span class="strong strong"><strong>mkdir -p /etc/systemd/network/</strong></span></pre></li><li class="listitem"><p class="simpara">
						For each interface that you want to rename, create a <code class="literal">70-*.link</code> file in the <code class="literal">/etc/systemd/network/</code> directory with the following content:
					</p><pre class="screen">[Match]
MACAddress=<span class="emphasis"><em>&lt;MAC_address&gt;</em></span>

[Link]
Name=<span class="emphasis"><em>&lt;new_interface_name&gt;</em></span></pre><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							Use a file name with a <code class="literal">70-</code> prefix to keep the file names consistent with the <code class="literal">udev</code> rules-based solution.
						</p></div></rh-alert><p class="simpara">
						For example, create the <code class="literal">/etc/systemd/network/70-provider0.link</code> file with the following content to rename the interface with MAC address <code class="literal">00:00:5e:00:53:1a</code> to <code class="literal">provider0</code>:
					</p><pre class="screen">[Match]
MACAddress=00:00:5e:00:53:1a

[Link]
Name=provider0</pre></li><li class="listitem"><p class="simpara">
						Optional: Regenerate the <code class="literal">initrd</code> RAM disk image:
					</p><pre class="literallayout"># <span class="strong strong"><strong>dracut -f</strong></span></pre><p class="simpara">
						You require this step only if you need networking capabilities in the RAM disk. For example, this is the case if the root file system is stored on a network device, such as iSCSI.
					</p></li><li class="listitem"><p class="simpara">
						Identify which NetworkManager connection profile uses the interface that you want to rename:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli -f device,name connection show</strong></span>
DEVICE  NAME
enp1s0  example_profile
...</pre></li><li class="listitem"><p class="simpara">
						Unset the <code class="literal">connection.interface-name</code> property in the connection profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify example_profile connection.interface-name ""</strong></span></pre></li><li class="listitem"><p class="simpara">
						Temporarily, configure the connection profile to match both the new and the previous interface name:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify example_profile match.interface-name "provider0 enp1s0"</strong></span></pre></li><li class="listitem"><p class="simpara">
						Reboot the system:
					</p><pre class="literallayout"># <span class="strong strong"><strong>reboot</strong></span></pre></li><li class="listitem"><p class="simpara">
						Verify that the device with the MAC address that you specified in the link file has been renamed to <code class="literal">provider0</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip link show</strong></span>
provider0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000
    link/ether 00:00:5e:00:53:1a brd ff:ff:ff:ff:ff:ff
...</pre></li><li class="listitem"><p class="simpara">
						Configure the connection profile to match only the new interface name:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify example_profile match.interface-name "provider0"</strong></span></pre><p class="simpara">
						You have now removed the old interface name from the connection profile.
					</p></li><li class="listitem"><p class="simpara">
						Reactivate the connection profile.
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up example_profile</strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">systemd.link(5)</code> man page on your system
					</li></ul></div></section><section class="section" id="assigning-alternative-names-to-a-network-interface-by-using-systemd-link-files_consistent-network-interface-device-naming"><div class="titlepage"><div><div><h3 class="title">1.8. Assigning alternative names to a network interface by using systemd link files</h3></div></div></div><p>
				With alternative interface naming, the kernel can assign additional names to network interfaces. You can use these alternative names in the same way as the normal interface names in commands that require a network interface name.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You must use ASCII characters for the alternative name.
					</li><li class="listitem">
						The alternative name must be shorter than 128 characters.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the network interface names and their MAC addresses:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip link show</strong></span>
...
enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
    link/ether 00:00:5e:00:53:1a brd ff:ff:ff:ff:ff:ff
...</pre><p class="simpara">
						Record the MAC address of the interface to which you want to assign an alternative name.
					</p></li><li class="listitem"><p class="simpara">
						If it does not already exist, create the <code class="literal">/etc/systemd/network/</code> directory:
					</p><pre class="literallayout"># <span class="strong strong"><strong>mkdir -p /etc/systemd/network/</strong></span></pre></li><li class="listitem"><p class="simpara">
						For each interface that must have an alternative name, create a <code class="literal">*.link</code> file in the <code class="literal">/etc/systemd/network/</code> directory with the following content:
					</p><pre class="screen">[Match]
MACAddress=<span class="emphasis"><em>&lt;MAC_address&gt;</em></span>

[Link]
AlternativeName=<span class="emphasis"><em>&lt;alternative_interface_name_1&gt;</em></span>
AlternativeName=<span class="emphasis"><em>&lt;alternative_interface_name_2&gt;</em></span>
AlternativeName=<span class="emphasis"><em>&lt;alternative_interface_name_n&gt;</em></span></pre><p class="simpara">
						For example, create the <code class="literal">/etc/systemd/network/70-altname.link</code> file with the following content to assign <code class="literal">provider</code> as an alternative name to the interface with MAC address <code class="literal">00:00:5e:00:53:1a</code>:
					</p><pre class="screen">[Match]
MACAddress=00:00:5e:00:53:1a

[Link]
AlternativeName=provider</pre></li><li class="listitem"><p class="simpara">
						Regenerate the <code class="literal">initrd</code> RAM disk image:
					</p><pre class="literallayout"># <span class="strong strong"><strong>dracut -f</strong></span></pre></li><li class="listitem"><p class="simpara">
						Reboot the system:
					</p><pre class="literallayout"># <span class="strong strong"><strong>reboot</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Use the alternative interface name. For example, display the IP address settings of the device with the alternative name <code class="literal">provider</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip address show provider</strong></span>
2: enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 00:00:5e:00:53:1a brd ff:ff:ff:ff:ff:ff
    altname <span class="strong strong"><strong>provider</strong></span>
    ...</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/6964829">What is AlternativeNamesPolicy in Interface naming scheme?</a> (Red Hat Knowledgebase)
					</li></ul></div></section></section><section class="chapter" id="configuring-an-ethernet-connection_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 2. Configuring an Ethernet connection</h2></div></div></div><p class="_abstract _abstract">
			NetworkManager creates a connection profile for each Ethernet adapter that is installed in a host. By default, this profile uses DHCP for both IPv4 and IPv6 connections. Modify this automatically-created profile or add a new one in the following cases:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					The network requires custom settings, such as a static IP address configuration.
				</li><li class="listitem">
					You require multiple profiles because the host roams among different networks.
				</li></ul></div><p>
			Red Hat Enterprise Linux provides administrators different options to configure Ethernet connections. For example:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Use <code class="literal">nmcli</code> to configure connections on the command line.
				</li><li class="listitem">
					Use <code class="literal">nmtui</code> to configure connections in a text-based user interface.
				</li><li class="listitem">
					Use the GNOME Settings menu or <code class="literal">nm-connection-editor</code> application to configure connections in a graphical interface.
				</li><li class="listitem">
					Use <code class="literal">nmstatectl</code> to configure connections through the Nmstate API.
				</li><li class="listitem">
					Use RHEL system roles to automate the configuration of connections on one or multiple hosts.
				</li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
				If you want to manually configure Ethernet connections on hosts running in the Microsoft Azure cloud, disable the <code class="literal">cloud-init</code> service or configure it to ignore the network settings retrieved from the cloud environment. Otherwise, <code class="literal">cloud-init</code> will override on the next reboot the network settings that you have manually configured.
			</p></div></rh-alert><section class="section" id="configuring-an-ethernet-connection-by-using-nmcli_configuring-an-ethernet-connection"><div class="titlepage"><div><div><h3 class="title">2.1. Configuring an Ethernet connection by using <code class="literal">nmcli</code></h3></div></div></div><p class="_abstract _abstract">
				If you connect a host to the network over Ethernet, you can manage the connection’s settings on the command line by using the <code class="literal">nmcli</code> utility.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A physical or virtual Ethernet Network Interface Controller (NIC) exists in the server’s configuration.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						List the NetworkManager connection profiles:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection show</strong></span>
NAME                UUID                                  TYPE      DEVICE
Wired connection 1  a5eb6490-cc20-3668-81f8-0314a27f3f75  ethernet  enp1s0</pre><p class="simpara">
						By default, NetworkManager creates a profile for each NIC in the host. If you plan to connect this NIC only to a specific network, adapt the automatically-created profile. If you plan to connect this NIC to networks with different settings, create individual profiles for each network.
					</p></li><li class="listitem"><p class="simpara">
						If you want to create an additional connection profile, enter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add con-name <span class="emphasis"><em>&lt;connection-name&gt;</em></span> ifname <span class="emphasis"><em>&lt;device-name&gt;</em></span> type ethernet</strong></span></pre><p class="simpara">
						Skip this step to modify an existing profile.
					</p></li><li class="listitem"><p class="simpara">
						Optional: Rename the connection profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify "Wired connection 1" connection.id "Internal-LAN"</strong></span></pre><p class="simpara">
						On hosts with multiple profiles, a meaningful name makes it easier to identify the purpose of a profile.
					</p></li><li class="listitem"><p class="simpara">
						Display the current settings of the connection profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection show Internal-LAN</strong></span>
...
connection.interface-name:     enp1s0
connection.autoconnect:        yes
ipv4.method:                   auto
ipv6.method:                   auto
...</pre></li><li class="listitem"><p class="simpara">
						Configure the IPv4 settings:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To use DHCP, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify Internal-LAN ipv4.method auto</strong></span></pre><p class="simpara">
								Skip this step if <code class="literal">ipv4.method</code> is already set to <code class="literal">auto</code> (default).
							</p></li><li class="listitem"><p class="simpara">
								To set a static IPv4 address, network mask, default gateway, DNS servers, and search domain, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify Internal-LAN ipv4.method manual ipv4.addresses 192.0.2.1/24 ipv4.gateway 192.0.2.254 ipv4.dns 192.0.2.200 ipv4.dns-search example.com</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Configure the IPv6 settings:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To use stateless address autoconfiguration (SLAAC), enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify Internal-LAN ipv6.method auto</strong></span></pre><p class="simpara">
								Skip this step if <code class="literal">ipv6.method</code> is already set to <code class="literal">auto</code> (default).
							</p></li><li class="listitem"><p class="simpara">
								To set a static IPv6 address, network mask, default gateway, DNS servers, and search domain, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify Internal-LAN ipv6.method manual ipv6.addresses 2001:db8:1::fffe/64 ipv6.gateway 2001:db8:1::fffe ipv6.dns 2001:db8:1::ffbb ipv6.dns-search example.com</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						To customize other settings in the profile, use the following command:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>&lt;connection-name&gt;</em></span> <span class="emphasis"><em>&lt;setting&gt;</em></span> <span class="emphasis"><em>&lt;value&gt;</em></span></strong></span></pre><p class="simpara">
						Enclose values with spaces or semicolons in quotes.
					</p></li><li class="listitem"><p class="simpara">
						Activate the profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up Internal-LAN</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the IP settings of the NIC:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip address show enp1s0</strong></span>
2: enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 52:54:00:17:b8:b6 brd ff:ff:ff:ff:ff:ff
    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute enp1s0
       valid_lft forever preferred_lft forever
    inet6 2001:db8:1::fffe/64 scope global noprefixroute
       valid_lft forever preferred_lft forever</pre></li><li class="listitem"><p class="simpara">
						Display the IPv4 default gateway:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip route show default</strong></span>
default via 192.0.2.254 dev enp1s0 proto static metric 102</pre></li><li class="listitem"><p class="simpara">
						Display the IPv6 default gateway:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -6 route show default</strong></span>
default via 2001:db8:1::ffee dev enp1s0 proto static metric 102 pref medium</pre></li><li class="listitem"><p class="simpara">
						Display the DNS settings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /etc/resolv.conf</strong></span>
search example.com
nameserver 192.0.2.200
nameserver 2001:db8:1::ffbb</pre><p class="simpara">
						If multiple connection profiles are active at the same time, the order of <code class="literal">nameserver</code> entries depend on the DNS priority values in these profile and the connection types.
					</p></li><li class="listitem"><p class="simpara">
						Use the <code class="literal">ping</code> utility to verify that this host can send packets to other hosts:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ping <span class="emphasis"><em>&lt;host-name-or-IP-address&gt;</em></span></strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Verify that the network cable is plugged-in to the host and a switch.
					</li><li class="listitem">
						Check whether the link failure exists only on this host or also on other hosts connected to the same switch.
					</li><li class="listitem">
						Verify that the network cable and the network interface are working as expected. Perform hardware diagnosis steps and replace defect cables and network interface cards.
					</li><li class="listitem">
						If the configuration on the disk does not match the configuration on the device, starting or restarting NetworkManager creates an in-memory connection that reflects the configuration of the device. For further details and how to avoid this problem, see the <a class="link" href="https://access.redhat.com/solutions/3068421">NetworkManager duplicates a connection after restart of NetworkManager service</a> solution.
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nm-settings(5)</code> man page on your system
					</li></ul></div></section><section class="section" id="configuring-an-ethernet-connection-by-using-the-nmcli-interactive-editor_configuring-an-ethernet-connection"><div class="titlepage"><div><div><h3 class="title">2.2. Configuring an Ethernet connection by using the <code class="literal">nmcli</code> interactive editor</h3></div></div></div><p class="_abstract _abstract">
				If you connect a host to the network over Ethernet, you can manage the connection’s settings on the command line by using the <code class="literal">nmcli</code> utility.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A physical or virtual Ethernet Network Interface Controller (NIC) exists in the server’s configuration.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						List the NetworkManager connection profiles:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection show</strong></span>
NAME                UUID                                  TYPE      DEVICE
Wired connection 1  a5eb6490-cc20-3668-81f8-0314a27f3f75  ethernet  enp1s0</pre><p class="simpara">
						By default, NetworkManager creates a profile for each NIC in the host. If you plan to connect this NIC only to a specific network, adapt the automatically-created profile. If you plan to connect this NIC to networks with different settings, create individual profiles for each network.
					</p></li><li class="listitem"><p class="simpara">
						Start <code class="literal">nmcli</code> in interactive mode:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To create an additional connection profile, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection edit type ethernet con-name "<span class="emphasis"><em>&lt;connection-name&gt;</em></span>"</strong></span></pre></li><li class="listitem"><p class="simpara">
								To modify an existing connection profile, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection edit con-name "<span class="emphasis"><em>&lt;connection-name&gt;</em></span>"</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: Rename the connection profile:
					</p><pre class="literallayout">nmcli&gt; <span class="strong strong"><strong>set connection.id Internal-LAN</strong></span></pre><p class="simpara">
						On hosts with multiple profiles, a meaningful name makes it easier to identify the purpose of a profile.
					</p><p class="simpara">
						Do not use quotes to set an ID that contains spaces to avoid that <code class="literal">nmcli</code> makes the quotes part of the name. For example, to set <code class="literal">Example Connection</code> as ID, enter <code class="literal">set connection.id Example Connection</code>.
					</p></li><li class="listitem"><p class="simpara">
						Display the current settings of the connection profile:
					</p><pre class="literallayout">nmcli&gt; <span class="strong strong"><strong>print</strong></span>
...
connection.interface-name:     enp1s0
connection.autoconnect:        yes
ipv4.method:                   auto
ipv6.method:                   auto
...</pre></li><li class="listitem"><p class="simpara">
						If you create a new connection profile, set the network interface:
					</p><pre class="literallayout">nmcli&gt; <span class="strong strong"><strong>set connection.interface-name enp1s0</strong></span></pre></li><li class="listitem"><p class="simpara">
						Configure the IPv4 settings:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To use DHCP, enter:
							</p><pre class="literallayout">nmcli&gt; <span class="strong strong"><strong>set ipv4.method auto</strong></span></pre><p class="simpara">
								Skip this step if <code class="literal">ipv4.method</code> is already set to <code class="literal">auto</code> (default).
							</p></li><li class="listitem"><p class="simpara">
								To set a static IPv4 address, network mask, default gateway, DNS servers, and search domain, enter:
							</p><pre class="literallayout">nmcli&gt; <span class="strong strong"><strong>ipv4.addresses 192.0.2.1/24</strong></span>
Do you also want to set 'ipv4.method' to 'manual'? [yes]: <span class="strong strong"><strong>yes</strong></span>
nmcli&gt; <span class="strong strong"><strong>ipv4.gateway 192.0.2.254</strong></span>
nmcli&gt; <span class="strong strong"><strong>ipv4.dns 192.0.2.200</strong></span>
nmcli&gt; <span class="strong strong"><strong>ipv4.dns-search example.com</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Configure the IPv6 settings:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To use stateless address autoconfiguration (SLAAC), enter:
							</p><pre class="literallayout">nmcli&gt; <span class="strong strong"><strong>set ipv6.method auto</strong></span></pre><p class="simpara">
								Skip this step if <code class="literal">ipv6.method</code> is already set to <code class="literal">auto</code> (default).
							</p></li><li class="listitem"><p class="simpara">
								To set a static IPv6 address, network mask, default gateway, DNS servers, and search domain, enter:
							</p><pre class="literallayout">nmcli&gt; <span class="strong strong"><strong>ipv6.addresses 2001:db8:1::fffe/64</strong></span>
Do you also want to set 'ipv6.method' to 'manual'? [yes]: <span class="strong strong"><strong>yes</strong></span>
nmcli&gt; <span class="strong strong"><strong>ipv6.gateway 2001:db8:1::fffe</strong></span>
nmcli&gt; <span class="strong strong"><strong>ipv6.dns 2001:db8:1::ffbb</strong></span>
nmcli&gt; <span class="strong strong"><strong>ipv6.dns-search example.com</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Save and activate the connection:
					</p><pre class="literallayout">nmcli&gt; <span class="strong strong"><strong>save persistent</strong></span></pre></li><li class="listitem"><p class="simpara">
						Leave the interactive mode:
					</p><pre class="literallayout">nmcli&gt; <span class="strong strong"><strong>quit</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the IP settings of the NIC:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip address show enp1s0</strong></span>
2: enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 52:54:00:17:b8:b6 brd ff:ff:ff:ff:ff:ff
    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute enp1s0
       valid_lft forever preferred_lft forever
    inet6 2001:db8:1::fffe/64 scope global noprefixroute
       valid_lft forever preferred_lft forever</pre></li><li class="listitem"><p class="simpara">
						Display the IPv4 default gateway:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip route show default</strong></span>
default via 192.0.2.254 dev enp1s0 proto static metric 102</pre></li><li class="listitem"><p class="simpara">
						Display the IPv6 default gateway:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -6 route show default</strong></span>
default via 2001:db8:1::ffee dev enp1s0 proto static metric 102 pref medium</pre></li><li class="listitem"><p class="simpara">
						Display the DNS settings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /etc/resolv.conf</strong></span>
search example.com
nameserver 192.0.2.200
nameserver 2001:db8:1::ffbb</pre><p class="simpara">
						If multiple connection profiles are active at the same time, the order of <code class="literal">nameserver</code> entries depend on the DNS priority values in these profile and the connection types.
					</p></li><li class="listitem"><p class="simpara">
						Use the <code class="literal">ping</code> utility to verify that this host can send packets to other hosts:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ping <span class="emphasis"><em>&lt;host-name-or-IP-address&gt;</em></span></strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Verify that the network cable is plugged-in to the host and a switch.
					</li><li class="listitem">
						Check whether the link failure exists only on this host or also on other hosts connected to the same switch.
					</li><li class="listitem">
						Verify that the network cable and the network interface are working as expected. Perform hardware diagnosis steps and replace defect cables and network interface cards.
					</li><li class="listitem">
						If the configuration on the disk does not match the configuration on the device, starting or restarting NetworkManager creates an in-memory connection that reflects the configuration of the device. For further details and how to avoid this problem, see the <a class="link" href="https://access.redhat.com/solutions/3068421">NetworkManager duplicates a connection after restart of NetworkManager service</a> solution
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nm-settings(5)</code> and <code class="literal">nmcli(1)</code> man pages on your system
					</li></ul></div></section><section class="section" id="configuring-an-ethernet-connection-by-using-nmtui_configuring-an-ethernet-connection"><div class="titlepage"><div><div><h3 class="title">2.3. Configuring an Ethernet connection by using <code class="literal">nmtui</code></h3></div></div></div><p>
				If you connect a host to the network over Ethernet, you can manage the connection’s settings in a text-based user interface by using the <code class="literal">nmtui</code> application. Use <code class="literal">nmtui</code> to create new profiles and to update existing ones on a host without a graphical interface.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					In <code class="literal">nmtui</code>:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Navigate by using the cursor keys.
						</li><li class="listitem">
							Press a button by selecting it and hitting <kbd class="keycap">Enter</kbd>.
						</li><li class="listitem">
							Select and clear checkboxes by using <kbd class="keycap">Space</kbd>.
						</li></ul></div></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A physical or virtual Ethernet Network Interface Controller (NIC) exists in the server’s configuration.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						If you do not know the network device name you want to use in the connection, display the available devices:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device status</strong></span>
DEVICE     TYPE      STATE                   CONNECTION
enp1s0     ethernet  unavailable             --
...</pre></li><li class="listitem"><p class="simpara">
						Start <code class="literal">nmtui</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmtui</strong></span></pre></li><li class="listitem">
						Select <span class="strong strong"><strong>Edit a connection</strong></span>, and press <kbd class="keycap">Enter</kbd>.
					</li><li class="listitem"><p class="simpara">
						Choose whether to add a new connection profile or to modify an existing one:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To create a new profile:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Press <span class="strong strong"><strong>Add</strong></span>.
									</li><li class="listitem">
										Select <span class="strong strong"><strong>Ethernet</strong></span> from the list of network types, and press <kbd class="keycap">Enter</kbd>.
									</li></ol></div></li><li class="listitem">
								To modify an existing profile, select the profile from the list, and press <kbd class="keycap">Enter</kbd>.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: Update the name of the connection profile.
					</p><p class="simpara">
						On hosts with multiple profiles, a meaningful name makes it easier to identify the purpose of a profile.
					</p></li><li class="listitem">
						If you create a new connection profile, enter the network device name into the <span class="strong strong"><strong>Device</strong></span> field.
					</li><li class="listitem"><p class="simpara">
						Depending on your environment, configure the IP address settings in the <code class="literal">IPv4 configuration</code> and <code class="literal">IPv6 configuration</code> areas accordingly. For this, press the button next to these areas, and select:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Disabled</strong></span>, if this connection does not require an IP address.
							</li><li class="listitem">
								<span class="strong strong"><strong>Automatic</strong></span>, if a DHCP server dynamically assigns an IP address to this NIC.
							</li><li class="listitem"><p class="simpara">
								<span class="strong strong"><strong>Manual</strong></span>, if the network requires static IP address settings. In this case, you must fill further fields:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Press <span class="strong strong"><strong>Show</strong></span> next to the protocol you want to configure to display additional fields.
									</li><li class="listitem"><p class="simpara">
										Press <span class="strong strong"><strong>Add</strong></span> next to <span class="strong strong"><strong>Addresses</strong></span>, and enter the IP address and the subnet mask in Classless Inter-Domain Routing (CIDR) format.
									</p><p class="simpara">
										If you do not specify a subnet mask, NetworkManager sets a <code class="literal">/32</code> subnet mask for IPv4 addresses and <code class="literal">/64</code> for IPv6 addresses.
									</p></li><li class="listitem">
										Enter the address of the default gateway.
									</li><li class="listitem">
										Press <span class="strong strong"><strong>Add</strong></span> next to <span class="strong strong"><strong>DNS servers</strong></span>, and enter the DNS server address.
									</li><li class="listitem">
										Press <span class="strong strong"><strong>Add</strong></span> next to <span class="strong strong"><strong>Search domains</strong></span>, and enter the DNS search domain.
									</li></ol></div></li></ul></div><div class="figure" id="idm140053189655760"><p class="title"><strong>Figure 2.1. Example of an Ethernet connection with static IP address settings</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/31ecc89b0c0aad7279a15f02132175ae/nmtui-ethernet-static-IP.png" alt="nmtui ethernet static IP"></div></div></div></li><li class="listitem">
						Press <span class="strong strong"><strong>OK</strong></span> to create and automatically activate the new connection.
					</li><li class="listitem">
						Press <span class="strong strong"><strong>Back</strong></span> to return to the main menu.
					</li><li class="listitem">
						Select <span class="strong strong"><strong>Quit</strong></span>, and press <kbd class="keycap">Enter</kbd> to close the <code class="literal">nmtui</code> application.
					</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the IP settings of the NIC:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip address show enp1s0</strong></span>
2: enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 52:54:00:17:b8:b6 brd ff:ff:ff:ff:ff:ff
    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute enp1s0
       valid_lft forever preferred_lft forever
    inet6 2001:db8:1::fffe/64 scope global noprefixroute
       valid_lft forever preferred_lft forever</pre></li><li class="listitem"><p class="simpara">
						Display the IPv4 default gateway:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip route show default</strong></span>
default via 192.0.2.254 dev enp1s0 proto static metric 102</pre></li><li class="listitem"><p class="simpara">
						Display the IPv6 default gateway:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -6 route show default</strong></span>
default via 2001:db8:1::ffee dev enp1s0 proto static metric 102 pref medium</pre></li><li class="listitem"><p class="simpara">
						Display the DNS settings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /etc/resolv.conf</strong></span>
search example.com
nameserver 192.0.2.200
nameserver 2001:db8:1::ffbb</pre><p class="simpara">
						If multiple connection profiles are active at the same time, the order of <code class="literal">nameserver</code> entries depend on the DNS priority values in these profile and the connection types.
					</p></li><li class="listitem"><p class="simpara">
						Use the <code class="literal">ping</code> utility to verify that this host can send packets to other hosts:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ping <span class="emphasis"><em>&lt;host-name-or-IP-address&gt;</em></span></strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Verify that the network cable is plugged-in to the host and a switch.
					</li><li class="listitem">
						Check whether the link failure exists only on this host or also on other hosts connected to the same switch.
					</li><li class="listitem">
						Verify that the network cable and the network interface are working as expected. Perform hardware diagnosis steps and replace defect cables and network interface cards.
					</li><li class="listitem">
						If the configuration on the disk does not match the configuration on the device, starting or restarting NetworkManager creates an in-memory connection that reflects the configuration of the device. For further details and how to avoid this problem, see the <a class="link" href="https://access.redhat.com/solutions/3068421">NetworkManager duplicates a connection after restart of NetworkManager service</a> solution.
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#proc_configuring-networkmanager-to-avoid-using-a-specific-profile-to-provide-a-default-gateway_managing-the-default-gateway-setting" title="25.8. Configuring NetworkManager to avoid using a specific profile to provide a default gateway">Configuring NetworkManager to avoid using a specific profile to provide a default gateway</a>
					</li><li class="listitem">
						<a class="link" href="#configuring-the-order-of-dns-servers_configuring-and-managing-networking" title="Chapter 23. Configuring the order of DNS servers">Configuring the order of DNS servers</a>
					</li></ul></div></section><section class="section" id="configuring-an-ethernet-connection-by-using-control-center_configuring-an-ethernet-connection"><div class="titlepage"><div><div><h3 class="title">2.4. Configuring an Ethernet connection by using control-center</h3></div></div></div><p class="_abstract _abstract">
				If you connect a host to the network over Ethernet, you can manage the connection’s settings with a graphical interface by using the GNOME Settings menu.
			</p><p>
				Note that <code class="literal">control-center</code> does not support as many configuration options as the <code class="literal">nm-connection-editor</code> application or the <code class="literal">nmcli</code> utility.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A physical or virtual Ethernet Network Interface Controller (NIC) exists in the server’s configuration.
					</li><li class="listitem">
						GNOME is installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Press the <kbd class="keycap">Super</kbd> key, enter <code class="literal">Settings</code>, and press <kbd class="keycap">Enter</kbd>.
					</li><li class="listitem">
						Select <span class="strong strong"><strong>Network</strong></span> in the navigation on the left.
					</li><li class="listitem"><p class="simpara">
						Choose whether to add a new connection profile or to modify an existing one:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								To create a new profile, click the <span class="guibutton">+</span> button next to the <span class="strong strong"><strong>Ethernet</strong></span> entry.
							</li><li class="listitem">
								To modify an existing profile, click the gear icon next to the profile entry.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: On the <span class="strong strong"><strong>Identity</strong></span> tab, update the name of the connection profile.
					</p><p class="simpara">
						On hosts with multiple profiles, a meaningful name makes it easier to identify the purpose of a profile.
					</p></li><li class="listitem"><p class="simpara">
						Depending on your environment, configure the IP address settings on the <span class="strong strong"><strong>IPv4</strong></span> and <span class="strong strong"><strong>IPv6</strong></span> tabs accordingly:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								To use DHCP or IPv6 stateless address autoconfiguration (SLAAC), select <code class="literal">Automatic (DHCP)</code> as method (default).
							</li><li class="listitem"><p class="simpara">
								To set a static IP address, network mask, default gateway, DNS servers, and search domain, select <code class="literal">Manual</code> as method, and fill the fields on the tabs:
							</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/8baa88d20b14f3a7489b0312ed6b1d9d/IP-settings-gnome-settings.png" alt="IP settings gnome settings"></div></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Depending on whether you add or modify a connection profile, click the <span class="guibutton">Add</span> or <span class="guibutton">Apply</span> button to save the connection.
					</p><p class="simpara">
						The GNOME <code class="literal">control-center</code> automatically activates the connection.
					</p></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the IP settings of the NIC:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip address show enp1s0</strong></span>
2: enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 52:54:00:17:b8:b6 brd ff:ff:ff:ff:ff:ff
    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute enp1s0
       valid_lft forever preferred_lft forever
    inet6 2001:db8:1::fffe/64 scope global noprefixroute
       valid_lft forever preferred_lft forever</pre></li><li class="listitem"><p class="simpara">
						Display the IPv4 default gateway:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip route show default</strong></span>
default via 192.0.2.254 dev enp1s0 proto static metric 102</pre></li><li class="listitem"><p class="simpara">
						Display the IPv6 default gateway:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -6 route show default</strong></span>
default via 2001:db8:1::ffee dev enp1s0 proto static metric 102 pref medium</pre></li><li class="listitem"><p class="simpara">
						Display the DNS settings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /etc/resolv.conf</strong></span>
search example.com
nameserver 192.0.2.200
nameserver 2001:db8:1::ffbb</pre><p class="simpara">
						If multiple connection profiles are active at the same time, the order of <code class="literal">nameserver</code> entries depend on the DNS priority values in these profile and the connection types.
					</p></li><li class="listitem"><p class="simpara">
						Use the <code class="literal">ping</code> utility to verify that this host can send packets to other hosts:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ping <span class="emphasis"><em>&lt;host-name-or-IP-address&gt;</em></span></strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Verify that the network cable is plugged-in to the host and a switch.
					</li><li class="listitem">
						Check whether the link failure exists only on this host or also on other hosts connected to the same switch.
					</li><li class="listitem">
						Verify that the network cable and the network interface are working as expected. Perform hardware diagnosis steps and replace defect cables and network interface cards.
					</li><li class="listitem">
						If the configuration on the disk does not match the configuration on the device, starting or restarting NetworkManager creates an in-memory connection that reflects the configuration of the device. For further details and how to avoid this problem, see the <a class="link" href="https://access.redhat.com/solutions/3068421">NetworkManager duplicates a connection after restart of NetworkManager service</a> solution.
					</li></ul></div></section><section class="section" id="configuring-an-ethernet-connection-by-using-nm-connection-editor_configuring-an-ethernet-connection"><div class="titlepage"><div><div><h3 class="title">2.5. Configuring an Ethernet connection by using nm-connection-editor</h3></div></div></div><p class="_abstract _abstract">
				If you connect a host to the network over Ethernet, you can manage the connection’s settings with a graphical interface by using the <span class="strong strong"><strong>nm-connection-editor</strong></span> application.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A physical or virtual Ethernet Network Interface Controller (NIC) exists in the server’s configuration.
					</li><li class="listitem">
						GNOME is installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open a terminal, and enter:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>nm-connection-editor</strong></span></pre></li><li class="listitem"><p class="simpara">
						Choose whether to add a new connection profile or to modify an existing one:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To create a new profile:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Click the <span class="guibutton">+</span> button
									</li><li class="listitem">
										Select <span class="strong strong"><strong>Ethernet</strong></span> as connection type, and click <span class="guibutton">Create</span>.
									</li></ol></div></li><li class="listitem">
								To modify an existing profile, double-click the profile entry.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: Update the name of the profile in the <span class="strong strong"><strong>Connection Name</strong></span> field.
					</p><p class="simpara">
						On hosts with multiple profiles, a meaningful name makes it easier to identify the purpose of a profile.
					</p></li><li class="listitem"><p class="simpara">
						If you create a new profile, select the device on the <code class="literal">Ethernet</code> tab:
					</p><p class="simpara">
						<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/9f36492b2b912efd359b06666cc77232/ethernet-connection-settings.png" alt="ethernet connection settings"></span>

					</p></li><li class="listitem"><p class="simpara">
						Depending on your environment, configure the IP address settings on the <span class="strong strong"><strong>IPv4 Settings</strong></span> and <span class="strong strong"><strong>IPv6 Settings</strong></span> tabs accordingly:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								To use DHCP or IPv6 stateless address autoconfiguration (SLAAC), select <code class="literal">Automatic (DHCP)</code> as method (default).
							</li><li class="listitem"><p class="simpara">
								To set a static IP address, network mask, default gateway, DNS servers, and search domain, select <code class="literal">Manual</code> as method, and fill the fields on the tabs:
							</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/bb18949e31978a2e7cd0da433268afb6/IP-settings-nm-connection-editor.png" alt="IP settings nm connection editor"></div></div></li></ul></div></li><li class="listitem">
						Click <span class="guibutton">Save</span>.
					</li><li class="listitem">
						Close <span class="strong strong"><strong>nm-connection-editor</strong></span>.
					</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the IP settings of the NIC:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip address show <span class="emphasis"><em>enp1s0</em></span></strong></span>
2: enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 52:54:00:17:b8:b6 brd ff:ff:ff:ff:ff:ff
    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute enp1s0
       valid_lft forever preferred_lft forever
    inet6 2001:db8:1::fffe/64 scope global noprefixroute
       valid_lft forever preferred_lft forever</pre></li><li class="listitem"><p class="simpara">
						Display the IPv4 default gateway:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip route show default</strong></span>
default via 192.0.2.254 dev enp1s0 proto static metric 102</pre></li><li class="listitem"><p class="simpara">
						Display the IPv6 default gateway:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -6 route show default</strong></span>
default via 2001:db8:1::ffee dev enp1s0 proto static metric 102 pref medium</pre></li><li class="listitem"><p class="simpara">
						Display the DNS settings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /etc/resolv.conf</strong></span>
search example.com
nameserver 192.0.2.200
nameserver 2001:db8:1::ffbb</pre><p class="simpara">
						If multiple connection profiles are active at the same time, the order of <code class="literal">nameserver</code> entries depend on the DNS priority values in these profile and the connection types.
					</p></li><li class="listitem"><p class="simpara">
						Use the <code class="literal">ping</code> utility to verify that this host can send packets to other hosts:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ping <span class="emphasis"><em>&lt;host-name-or-IP-address&gt;</em></span></strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Verify that the network cable is plugged-in to the host and a switch.
					</li><li class="listitem">
						Check whether the link failure exists only on this host or also on other hosts connected to the same switch.
					</li><li class="listitem">
						Verify that the network cable and the network interface are working as expected. Perform hardware diagnosis steps and replace defect cables and network interface cards.
					</li><li class="listitem">
						If the configuration on the disk does not match the configuration on the device, starting or restarting NetworkManager creates an in-memory connection that reflects the configuration of the device. For further details and how to avoid this problem, see the <a class="link" href="https://access.redhat.com/solutions/3068421">NetworkManager duplicates a connection after restart of NetworkManager service</a> solution.
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional Resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#proc_configuring-networkmanager-to-avoid-using-a-specific-profile-to-provide-a-default-gateway_managing-the-default-gateway-setting" title="25.8. Configuring NetworkManager to avoid using a specific profile to provide a default gateway">Configuring NetworkManager to avoid using a specific profile to provide a default gateway</a>
					</li><li class="listitem">
						<a class="link" href="#configuring-the-order-of-dns-servers_configuring-and-managing-networking" title="Chapter 23. Configuring the order of DNS servers">Configuring the order of DNS servers</a>
					</li></ul></div></section><section class="section" id="configuring-an-ethernet-connection-with-a-static-ip-address-by-using-nmstatectl_configuring-an-ethernet-connection"><div class="titlepage"><div><div><h3 class="title">2.6. Configuring an Ethernet connection with a static IP address by using <code class="literal">nmstatectl</code></h3></div></div></div><p class="_abstract _abstract">
				Use the <code class="literal">nmstatectl</code> utility to configure an Ethernet connection through the Nmstate API. The Nmstate API ensures that, after setting the configuration, the result matches the configuration file. If anything fails, <code class="literal">nmstatectl</code> automatically rolls back the changes to avoid leaving the system in an incorrect state.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A physical or virtual Ethernet Network Interface Controller (NIC) exists in the server’s configuration.
					</li><li class="listitem">
						The <code class="literal">nmstate</code> package is installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a YAML file, for example <code class="literal">~/create-ethernet-profile.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
interfaces:
- name: enp1s0
  type: ethernet
  state: up
  ipv4:
    enabled: true
    address:
    - ip: 192.0.2.1
      prefix-length: 24
    dhcp: false
  ipv6:
    enabled: true
    address:
    - ip: 2001:db8:1::1
      prefix-length: 64
    autoconf: false
    dhcp: false
routes:
  config:
  - destination: 0.0.0.0/0
    next-hop-address: 192.0.2.254
    next-hop-interface: enp1s0
  - destination: ::/0
    next-hop-address: 2001:db8:1::fffe
    next-hop-interface: enp1s0
dns-resolver:
  config:
    search:
    - example.com
    server:
    - 192.0.2.200
    - 2001:db8:1::ffbb</pre><p class="simpara">
						These settings define an Ethernet connection profile for the <code class="literal">enp1s0</code> device with the following settings:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								A static IPv4 address - <code class="literal">192.0.2.1</code> with the <code class="literal">/24</code> subnet mask
							</li><li class="listitem">
								A static IPv6 address - <code class="literal">2001:db8:1::1</code> with the <code class="literal">/64</code> subnet mask
							</li><li class="listitem">
								An IPv4 default gateway - <code class="literal">192.0.2.254</code>
							</li><li class="listitem">
								An IPv6 default gateway - <code class="literal">2001:db8:1::fffe</code>
							</li><li class="listitem">
								An IPv4 DNS server - <code class="literal">192.0.2.200</code>
							</li><li class="listitem">
								An IPv6 DNS server - <code class="literal">2001:db8:1::ffbb</code>
							</li><li class="listitem">
								A DNS search domain - <code class="literal">example.com</code>
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: You can define the <code class="literal">identifier: mac-address</code> and <code class="literal">mac-address: <span class="emphasis"><em>&lt;mac_address&gt;</em></span></code> properties in the <code class="literal">interfaces</code> property to identify the network interface card by its MAC address instead of its name, for example:
					</p><pre class="programlisting language-yaml">---
interfaces:
- name: <span class="emphasis"><em>&lt;profile_name&gt;</em></span>
  type: ethernet
  <span class="strong strong"><strong>identifier: mac-address</strong></span>
  <span class="strong strong"><strong>mac-address: <span class="emphasis"><em>&lt;mac_address&gt;</em></span></strong></span>
  ...</pre></li><li class="listitem"><p class="simpara">
						Apply the settings to the system:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmstatectl apply ~/create-ethernet-profile.yml</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the current state in YAML format:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmstatectl show enp1s0</strong></span></pre></li><li class="listitem"><p class="simpara">
						Display the IP settings of the NIC:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip address show enp1s0</strong></span>
2: enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 52:54:00:17:b8:b6 brd ff:ff:ff:ff:ff:ff
    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute enp1s0
       valid_lft forever preferred_lft forever
    inet6 2001:db8:1::fffe/64 scope global noprefixroute
       valid_lft forever preferred_lft forever</pre></li><li class="listitem"><p class="simpara">
						Display the IPv4 default gateway:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip route show default</strong></span>
default via 192.0.2.254 dev enp1s0 proto static metric 102</pre></li><li class="listitem"><p class="simpara">
						Display the IPv6 default gateway:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -6 route show default</strong></span>
default via 2001:db8:1::ffee dev enp1s0 proto static metric 102 pref medium</pre></li><li class="listitem"><p class="simpara">
						Display the DNS settings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /etc/resolv.conf</strong></span>
search example.com
nameserver 192.0.2.200
nameserver 2001:db8:1::ffbb</pre><p class="simpara">
						If multiple connection profiles are active at the same time, the order of <code class="literal">nameserver</code> entries depend on the DNS priority values in these profile and the connection types.
					</p></li><li class="listitem"><p class="simpara">
						Use the <code class="literal">ping</code> utility to verify that this host can send packets to other hosts:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ping <span class="emphasis"><em>&lt;host-name-or-IP-address&gt;</em></span></strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nmstatectl(8)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/nmstate/examples/</code> directory
					</li></ul></div></section><section class="section" id="configuring-an-ethernet-connection-with-a-static-ip-address-by-using-the-network-rhel-system-role-with-an-interface-name_configuring-an-ethernet-connection"><div class="titlepage"><div><div><h3 class="title">2.7. Configuring an Ethernet connection with a static IP address by using the <code class="literal">network</code> RHEL system role with an interface name</h3></div></div></div><p class="_abstract _abstract">
				To connect a Red Hat Enterprise Linux host to an Ethernet network, create a NetworkManager connection profile for the network device. By using Ansible and the <code class="literal">network</code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.
			</p><p>
				You can use the <code class="literal">network</code> RHEL system role to configure an Ethernet connection with static IP addresses, gateways, and DNS settings, and assign them to a specified interface name.
			</p><p>
				Typically, administrators want to reuse a playbook and not maintain individual playbooks for each host to which Ansible should assign static IP addresses. In this case, you can use variables in the playbook and maintain the settings in the inventory. As a result, you need only one playbook to dynamically assign individual settings to multiple hosts.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles">You have prepared the control node and the managed nodes</a>
					</li><li class="listitem">
						You are logged in to the control node as a user who can run playbooks on the managed nodes.
					</li><li class="listitem">
						The account you use to connect to the managed nodes has <code class="literal">sudo</code> permissions on them.
					</li><li class="listitem">
						A physical or virtual Ethernet device exists in the server configuration.
					</li><li class="listitem">
						The managed nodes use NetworkManager to configure the network.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Edit the <code class="literal">~/inventory</code> file, and append the host-specific settings to the host entries:
					</p><pre class="programlisting language-ini">managed-node-01.example.com <span class="strong strong"><strong>interface=enp1s0 ip_v4=192.0.2.1/24 ip_v6=2001:db8:1::1/64 gateway_v4=192.0.2.254 gateway_v6=2001:db8:1::fffe</strong></span>

managed-node-02.example.com <span class="strong strong"><strong>interface=enp1s0 ip_v4=192.0.2.2/24 ip_v6=2001:db8:1::2/64 gateway_v4=192.0.2.254 gateway_v6=2001:db8:1::fffe</strong></span></pre></li><li class="listitem"><p class="simpara">
						Create a playbook file, for example <code class="literal">~/playbook.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
- name: Configure the network
  hosts: managed-node-01.example.com,managed-node-02.example.com
  tasks:
    - name: Ethernet connection profile with static IP address settings
      ansible.builtin.include_role:
        name: rhel-system-roles.network
      vars:
        network_connections:
          - name: "{{ interface }}"
            interface_name: "{{ interface }}"
            type: ethernet
            autoconnect: yes
            ip:
              address:
                - "{{ ip_v4 }}"
                - "{{ ip_v6 }}"
              gateway4: "{{ gateway_v4 }}"
              gateway6: "{{ gateway_v6 }}"
              dns:
                - 192.0.2.200
                - 2001:db8:1::ffbb
              dns_search:
                - example.com
            state: up</pre><p class="simpara">
						This playbook reads certain values dynamically for each host from the inventory file and uses static values in the playbook for settings which are the same for all hosts.
					</p><p class="simpara">
						For details about all variables used in the playbook, see the <code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file on the control node.
					</p></li><li class="listitem"><p class="simpara">
						Validate the playbook syntax:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --syntax-check ~/playbook.yml</strong></span></pre><p class="simpara">
						Note that this command only validates the syntax and does not protect against a wrong but valid configuration.
					</p></li><li class="listitem"><p class="simpara">
						Run the playbook:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook ~/playbook.yml</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Query the Ansible facts of the managed node and verify the active network settings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ansible managed-node-01.example.com -m ansible.builtin.setup</strong></span>
...
        "ansible_default_ipv4": {
            "address": "192.0.2.1",
            "alias": "enp1s0",
            "broadcast": "192.0.2.255",
            "gateway": "192.0.2.254",
            "interface": "enp1s0",
            "macaddress": "52:54:00:17:b8:b6",
            "mtu": 1500,
            "netmask": "255.255.255.0",
            "network": "192.0.2.0",
            "prefix": "24",
            "type": "ether"
        },
        "ansible_default_ipv6": {
            "address": "2001:db8:1::1",
            "gateway": "2001:db8:1::fffe",
            "interface": "enp1s0",
            "macaddress": "52:54:00:17:b8:b6",
            "mtu": 1500,
            "prefix": "64",
            "scope": "global",
            "type": "ether"
        },
        ...
        "ansible_dns": {
            "nameservers": [
                "192.0.2.1",
                "2001:db8:1::ffbb"
            ],
            "search": [
                "example.com"
            ]
        },
...</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/rhel-system-roles/network/</code> directory
					</li></ul></div></section><section class="section" id="configuring-an-ethernet-connection-with-a-static-ip-address-by-using-the-network-rhel-system-role-with-a-device-path_configuring-an-ethernet-connection"><div class="titlepage"><div><div><h3 class="title">2.8. Configuring an Ethernet connection with a static IP address by using the <code class="literal">network</code> RHEL system role with a device path</h3></div></div></div><p class="_abstract _abstract">
				To connect a Red Hat Enterprise Linux host to an Ethernet network, create a NetworkManager connection profile for the network device. By using Ansible and the <code class="literal">network</code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.
			</p><p>
				You can use the <code class="literal">network</code> RHEL system role to configure an Ethernet connection with static IP addresses, gateways, and DNS settings, and assign them to a device based on its path instead of its name.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles">You have prepared the control node and the managed nodes</a>
					</li><li class="listitem">
						You are logged in to the control node as a user who can run playbooks on the managed nodes.
					</li><li class="listitem">
						The account you use to connect to the managed nodes has <code class="literal">sudo</code> permissions on them.
					</li><li class="listitem">
						A physical or virtual Ethernet device exists in the servers configuration.
					</li><li class="listitem">
						The managed nodes use NetworkManager to configure the network.
					</li><li class="listitem">
						You know the path of the device. You can display the device path by using the <code class="literal">udevadm info /sys/class/net/<span class="emphasis"><em>&lt;device_name&gt;</em></span> | grep ID_PATH=</code> command.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a playbook file, for example <code class="literal">~/playbook.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
- name: Configure the network
  hosts: managed-node-01.example.com
  tasks:
    - name: Ethernet connection profile with static IP address settings
      ansible.builtin.include_role:
        name: rhel-system-roles.network
      vars:
        network_connections:
          - name: example
            match:
              path:
                - pci-0000:00:0[1-3].0
                - &amp;!pci-0000:00:02.0
            type: ethernet
            autoconnect: yes
            ip:
              address:
                - 192.0.2.1/24
                - 2001:db8:1::1/64
              gateway4: 192.0.2.254
              gateway6: 2001:db8:1::fffe
              dns:
                - 192.0.2.200
                - 2001:db8:1::ffbb
              dns_search:
                - example.com
            state: up</pre><p class="simpara">
						The settings specified in the example playbook include the following:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">match</code></span></dt><dd>
									Defines that a condition must be met in order to apply the settings. You can only use this variable with the <code class="literal">path</code> option.
								</dd><dt><span class="term"><code class="literal">path</code></span></dt><dd>
									Defines the persistent path of a device. You can set it as a fixed path or an expression. Its value can contain modifiers and wildcards. The example applies the settings to devices that match PCI ID <code class="literal">0000:00:0[1-3].0</code>, but not <code class="literal">0000:00:02.0</code>.
								</dd></dl></div><p class="simpara">
						For details about all variables used in the playbook, see the <code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file on the control node.
					</p></li><li class="listitem"><p class="simpara">
						Validate the playbook syntax:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --syntax-check ~/playbook.yml</strong></span></pre><p class="simpara">
						Note that this command only validates the syntax and does not protect against a wrong but valid configuration.
					</p></li><li class="listitem"><p class="simpara">
						Run the playbook:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook ~/playbook.yml</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Query the Ansible facts of the managed node and verify the active network settings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ansible managed-node-01.example.com -m ansible.builtin.setup</strong></span>
...
        "ansible_default_ipv4": {
            "address": "192.0.2.1",
            "alias": "enp1s0",
            "broadcast": "192.0.2.255",
            "gateway": "192.0.2.254",
            "interface": "enp1s0",
            "macaddress": "52:54:00:17:b8:b6",
            "mtu": 1500,
            "netmask": "255.255.255.0",
            "network": "192.0.2.0",
            "prefix": "24",
            "type": "ether"
        },
        "ansible_default_ipv6": {
            "address": "2001:db8:1::1",
            "gateway": "2001:db8:1::fffe",
            "interface": "enp1s0",
            "macaddress": "52:54:00:17:b8:b6",
            "mtu": 1500,
            "prefix": "64",
            "scope": "global",
            "type": "ether"
        },
        ...
        "ansible_dns": {
            "nameservers": [
                "192.0.2.1",
                "2001:db8:1::ffbb"
            ],
            "search": [
                "example.com"
            ]
        },
...</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/rhel-system-roles/network/</code> directory
					</li></ul></div></section><section class="section" id="configuring-an-ethernet-connection-with-a-dynamic-ip-address-by-using-nmstatectl_configuring-an-ethernet-connection"><div class="titlepage"><div><div><h3 class="title">2.9. Configuring an Ethernet connection with a dynamic IP address by using <code class="literal">nmstatectl</code></h3></div></div></div><p class="_abstract _abstract">
				Use the <code class="literal">nmstatectl</code> utility to configure an Ethernet connection through the Nmstate API. The Nmstate API ensures that, after setting the configuration, the result matches the configuration file. If anything fails, <code class="literal">nmstatectl</code> automatically rolls back the changes to avoid leaving the system in an incorrect state.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A physical or virtual Ethernet Network Interface Controller (NIC) exists in the server’s configuration.
					</li><li class="listitem">
						A DHCP server is available in the network.
					</li><li class="listitem">
						The <code class="literal">nmstate</code> package is installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a YAML file, for example <code class="literal">~/create-ethernet-profile.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
interfaces:
- name: enp1s0
  type: ethernet
  state: up
  ipv4:
    enabled: true
    auto-dns: true
    auto-gateway: true
    auto-routes: true
    dhcp: true
  ipv6:
    enabled: true
    auto-dns: true
    auto-gateway: true
    auto-routes: true
    autoconf: true
    dhcp: true</pre><p class="simpara">
						These settings define an Ethernet connection profile for the <code class="literal">enp1s0</code> device. The connection retrieves IPv4 addresses, IPv6 addresses, default gateway, routes, DNS servers, and search domains from a DHCP server and IPv6 stateless address autoconfiguration (SLAAC).
					</p></li><li class="listitem"><p class="simpara">
						Optional: You can define the <code class="literal">identifier: mac-address</code> and <code class="literal">mac-address: <span class="emphasis"><em>&lt;mac_address&gt;</em></span></code> properties in the <code class="literal">interfaces</code> property to identify the network interface card by its MAC address instead of its name, for example:
					</p><pre class="programlisting language-yaml">---
interfaces:
- name: <span class="emphasis"><em>&lt;profile_name&gt;</em></span>
  type: ethernet
  <span class="strong strong"><strong>identifier: mac-address</strong></span>
  <span class="strong strong"><strong>mac-address: <span class="emphasis"><em>&lt;mac_address&gt;</em></span></strong></span>
  ...</pre></li><li class="listitem"><p class="simpara">
						Apply the settings to the system:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmstatectl apply ~/create-ethernet-profile.yml</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the current state in YAML format:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmstatectl show enp1s0</strong></span></pre></li><li class="listitem"><p class="simpara">
						Display the IP settings of the NIC:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip address show enp1s0</strong></span>
2: enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 52:54:00:17:b8:b6 brd ff:ff:ff:ff:ff:ff
    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute enp1s0
       valid_lft forever preferred_lft forever
    inet6 2001:db8:1::fffe/64 scope global noprefixroute
       valid_lft forever preferred_lft forever</pre></li><li class="listitem"><p class="simpara">
						Display the IPv4 default gateway:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip route show default</strong></span>
default via 192.0.2.254 dev enp1s0 proto static metric 102</pre></li><li class="listitem"><p class="simpara">
						Display the IPv6 default gateway:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -6 route show default</strong></span>
default via 2001:db8:1::ffee dev enp1s0 proto static metric 102 pref medium</pre></li><li class="listitem"><p class="simpara">
						Display the DNS settings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /etc/resolv.conf</strong></span>
search example.com
nameserver 192.0.2.200
nameserver 2001:db8:1::ffbb</pre><p class="simpara">
						If multiple connection profiles are active at the same time, the order of <code class="literal">nameserver</code> entries depend on the DNS priority values in these profile and the connection types.
					</p></li><li class="listitem"><p class="simpara">
						Use the <code class="literal">ping</code> utility to verify that this host can send packets to other hosts:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ping <span class="emphasis"><em>&lt;host-name-or-IP-address&gt;</em></span></strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nmstatectl(8)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/nmstate/examples/</code> directory
					</li></ul></div></section><section class="section" id="configuring-an-ethernet-connection-with-a-dynamic-ip-address-by-using-the-network-rhel-system-role-with-an-interface-name_configuring-an-ethernet-connection"><div class="titlepage"><div><div><h3 class="title">2.10. Configuring an Ethernet connection with a dynamic IP address by using the <code class="literal">network</code> RHEL system role with an interface name</h3></div></div></div><p class="_abstract _abstract">
				To connect a Red Hat Enterprise Linux host to an Ethernet network, create a NetworkManager connection profile for the network device. By using Ansible and the <code class="literal">network</code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.
			</p><p>
				You can use the <code class="literal">network</code> RHEL system role to configure an Ethernet connection that retrieves its IP addresses, gateways, and DNS settings from a DHCP server and IPv6 stateless address autoconfiguration (SLAAC). With this role you can assign the connection profile to the specified interface name.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles">You have prepared the control node and the managed nodes</a>
					</li><li class="listitem">
						You are logged in to the control node as a user who can run playbooks on the managed nodes.
					</li><li class="listitem">
						The account you use to connect to the managed nodes has <code class="literal">sudo</code> permissions on them.
					</li><li class="listitem">
						A physical or virtual Ethernet device exists in the servers configuration.
					</li><li class="listitem">
						A DHCP server and SLAAC are available in the network.
					</li><li class="listitem">
						The managed nodes use the NetworkManager service to configure the network.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a playbook file, for example <code class="literal">~/playbook.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
- name: Configure the network
  hosts: managed-node-01.example.com
  tasks:
    - name: Ethernet connection profile with dynamic IP address settings
      ansible.builtin.include_role:
        name: rhel-system-roles.network
      vars:
        network_connections:
          - name: enp1s0
            interface_name: enp1s0
            type: ethernet
            autoconnect: yes
            ip:
              dhcp4: yes
              auto6: yes
            state: up</pre><p class="simpara">
						The settings specified in the example playbook include the following:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">dhcp4: yes</code></span></dt><dd>
									Enables automatic IPv4 address assignment from DHCP, PPP, or similar services.
								</dd><dt><span class="term"><code class="literal">auto6: yes</code></span></dt><dd>
									Enables IPv6 auto-configuration. By default, NetworkManager uses Router Advertisements. If the router announces the <code class="literal">managed</code> flag, NetworkManager requests an IPv6 address and prefix from a DHCPv6 server.
								</dd></dl></div><p class="simpara">
						For details about all variables used in the playbook, see the <code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file on the control node.
					</p></li><li class="listitem"><p class="simpara">
						Validate the playbook syntax:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --syntax-check ~/playbook.yml</strong></span></pre><p class="simpara">
						Note that this command only validates the syntax and does not protect against a wrong but valid configuration.
					</p></li><li class="listitem"><p class="simpara">
						Run the playbook:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook ~/playbook.yml</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Query the Ansible facts of the managed node and verify that the interface received IP addresses and DNS settings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ansible managed-node-01.example.com -m ansible.builtin.setup</strong></span>
...
        "ansible_default_ipv4": {
            "address": "192.0.2.1",
            "alias": "enp1s0",
            "broadcast": "192.0.2.255",
            "gateway": "192.0.2.254",
            "interface": "enp1s0",
            "macaddress": "52:54:00:17:b8:b6",
            "mtu": 1500,
            "netmask": "255.255.255.0",
            "network": "192.0.2.0",
            "prefix": "24",
            "type": "ether"
        },
        "ansible_default_ipv6": {
            "address": "2001:db8:1::1",
            "gateway": "2001:db8:1::fffe",
            "interface": "enp1s0",
            "macaddress": "52:54:00:17:b8:b6",
            "mtu": 1500,
            "prefix": "64",
            "scope": "global",
            "type": "ether"
        },
        ...
        "ansible_dns": {
            "nameservers": [
                "192.0.2.1",
                "2001:db8:1::ffbb"
            ],
            "search": [
                "example.com"
            ]
        },
...</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/rhel-system-roles/network/</code> directory
					</li></ul></div></section><section class="section" id="configuring-an-ethernet-connection-with-a-dynamic-ip-address-by-using-the-network-rhel-system-role-with-a-device-path_configuring-an-ethernet-connection"><div class="titlepage"><div><div><h3 class="title">2.11. Configuring an Ethernet connection with a dynamic IP address by using the <code class="literal">network</code> RHEL system role with a device path</h3></div></div></div><p class="_abstract _abstract">
				To connect a Red Hat Enterprise Linux host to an Ethernet network, create a NetworkManager connection profile for the network device. By using Ansible and the <code class="literal">network</code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.
			</p><p>
				You can use the <code class="literal">network</code> RHEL system role to configure an Ethernet connection that retrieves its IP addresses, gateways, and DNS settings from a DHCP server and IPv6 stateless address autoconfiguration (SLAAC). The role can assign the connection profile to a device based on its path instead of an interface name.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles">You have prepared the control node and the managed nodes</a>
					</li><li class="listitem">
						You are logged in to the control node as a user who can run playbooks on the managed nodes.
					</li><li class="listitem">
						The account you use to connect to the managed nodes has <code class="literal">sudo</code> permissions on them.
					</li><li class="listitem">
						A physical or virtual Ethernet device exists in the servers configuration.
					</li><li class="listitem">
						A DHCP server and SLAAC are available in the network.
					</li><li class="listitem">
						The managed hosts use NetworkManager to configure the network.
					</li><li class="listitem">
						You know the path of the device. You can display the device path by using the <code class="literal">udevadm info /sys/class/net/<span class="emphasis"><em>&lt;device_name&gt;</em></span> | grep ID_PATH=</code> command.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a playbook file, for example <code class="literal">~/playbook.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
- name: Configure the network
  hosts: managed-node-01.example.com
  tasks:
    - name: Ethernet connection profile with dynamic IP address settings
      ansible.builtin.include_role:
        name: rhel-system-roles.network
      vars:
        network_connections:
          - name: example
            match:
              path:
                - pci-0000:00:0[1-3].0
                - &amp;!pci-0000:00:02.0
            type: ethernet
            autoconnect: yes
            ip:
              dhcp4: yes
              auto6: yes
            state: up</pre><p class="simpara">
						The settings specified in the example playbook include the following:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">match: path</code></span></dt><dd>
									Defines that a condition must be met in order to apply the settings. You can only use this variable with the <code class="literal">path</code> option.
								</dd><dt><span class="term"><code class="literal">path: <span class="emphasis"><em>&lt;path_and_expressions&gt;</em></span></code></span></dt><dd>
									Defines the persistent path of a device. You can set it as a fixed path or an expression. Its value can contain modifiers and wildcards. The example applies the settings to devices that match PCI ID <code class="literal">0000:00:0[1-3].0</code>, but not <code class="literal">0000:00:02.0</code>.
								</dd><dt><span class="term"><code class="literal">dhcp4: yes</code></span></dt><dd>
									Enables automatic IPv4 address assignment from DHCP, PPP, or similar services.
								</dd><dt><span class="term"><code class="literal">auto6: yes</code></span></dt><dd>
									Enables IPv6 auto-configuration. By default, NetworkManager uses Router Advertisements. If the router announces the <code class="literal">managed</code> flag, NetworkManager requests an IPv6 address and prefix from a DHCPv6 server.
								</dd></dl></div><p class="simpara">
						For details about all variables used in the playbook, see the <code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file on the control node.
					</p></li><li class="listitem"><p class="simpara">
						Validate the playbook syntax:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --syntax-check ~/playbook.yml</strong></span></pre><p class="simpara">
						Note that this command only validates the syntax and does not protect against a wrong but valid configuration.
					</p></li><li class="listitem"><p class="simpara">
						Run the playbook:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook ~/playbook.yml</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Query the Ansible facts of the managed node and verify that the interface received IP addresses and DNS settings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ansible managed-node-01.example.com -m ansible.builtin.setup</strong></span>
...
        "ansible_default_ipv4": {
            "address": "192.0.2.1",
            "alias": "enp1s0",
            "broadcast": "192.0.2.255",
            "gateway": "192.0.2.254",
            "interface": "enp1s0",
            "macaddress": "52:54:00:17:b8:b6",
            "mtu": 1500,
            "netmask": "255.255.255.0",
            "network": "192.0.2.0",
            "prefix": "24",
            "type": "ether"
        },
        "ansible_default_ipv6": {
            "address": "2001:db8:1::1",
            "gateway": "2001:db8:1::fffe",
            "interface": "enp1s0",
            "macaddress": "52:54:00:17:b8:b6",
            "mtu": 1500,
            "prefix": "64",
            "scope": "global",
            "type": "ether"
        },
        ...
        "ansible_dns": {
            "nameservers": [
                "192.0.2.1",
                "2001:db8:1::ffbb"
            ],
            "search": [
                "example.com"
            ]
        },
...</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/rhel-system-roles/network/</code> directory
					</li></ul></div></section><section class="section" id="proc_configuring-multiple-ethernet-interfaces-by-using-a-single-connection-profile-by-interface-name_configuring-an-ethernet-connection"><div class="titlepage"><div><div><h3 class="title">2.12. Configuring multiple Ethernet interfaces by using a single connection profile by interface name</h3></div></div></div><p class="_abstract _abstract">
				In most cases, one connection profile contains the settings of one network device. However, NetworkManager also supports wildcards when you set the interface name in connection profiles. If a host roams between Ethernet networks with dynamic IP address assignment, you can use this feature to create a single connection profile that you can use for multiple Ethernet interfaces.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Multiple physical or virtual Ethernet devices exist in the server’s configuration.
					</li><li class="listitem">
						A DHCP server is available in the network.
					</li><li class="listitem">
						No connection profile exists on the host.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Add a connection profile that applies to all interface names starting with <code class="literal">enp</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add con-name "Wired connection 1" connection.multi-connect multiple match.interface-name enp* type ethernet</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display all settings of the single connection profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection show "Wired connection 1"</strong></span>
connection.id:                      Wired connection 1
...
connection.multi-connect:           3 (multiple)
match.interface-name:               <code class="literal">enp*</code>
...</pre><p class="simpara">
						<code class="literal">3</code> indicates the number of interfaces active on the connection profile at the same time, and not the number of network interfaces in the connection profile. The connection profile uses all devices that match the pattern in the <code class="literal">match.interface-name</code> parameter and, therefore, the connection profiles have the same Universally Unique Identifier (UUID).
					</p></li><li class="listitem"><p class="simpara">
						Display the status of the connections:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection show</strong></span>
NAME                UUID                                  TYPE      DEVICE
...
Wired connection 1  6f22402e-c0cc-49cf-b702-eaf0cd5ea7d1  ethernet  enp7s0
Wired connection 1  6f22402e-c0cc-49cf-b702-eaf0cd5ea7d1  ethernet  enp8s0
Wired connection 1  6f22402e-c0cc-49cf-b702-eaf0cd5ea7d1  ethernet  enp9s0</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nmcli(1)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">nm-settings(5)</code> man page
					</li></ul></div></section><section class="section" id="proc_configuring-a-single-connection-profile-for-multiple-ethernet-interfaces-using-pci-ids_configuring-an-ethernet-connection"><div class="titlepage"><div><div><h3 class="title">2.13. Configuring a single connection profile for multiple Ethernet interfaces using PCI IDs</h3></div></div></div><p class="_abstract _abstract">
				The PCI ID is a unique identifier of the devices connected to the system. The connection profile adds multiple devices by matching interfaces based on a list of PCI IDs. You can use this procedure to connect multiple device PCI IDs to the single connection profile.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Multiple physical or virtual Ethernet devices exist in the server’s configuration.
					</li><li class="listitem">
						A DHCP server is available in the network.
					</li><li class="listitem">
						No connection profile exists on the host.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Identify the device path. For example, to display the device paths of all interfaces starting with <code class="literal">enp</code>, enter :
					</p><pre class="literallayout"># <span class="strong strong"><strong>udevadm info /sys/class/net/enp</strong></span> | grep ID_PATH=*
...
E: ID_PATH=pci-0000:07:00.0
E: ID_PATH=pci-0000:08:00.0</pre></li><li class="listitem"><p class="simpara">
						Add a connection profile that applies to all PCI IDs matching the <code class="literal">0000:00:0[7-8].0</code> expression:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type ethernet connection.multi-connect multiple match.path "pci-0000:07:00.0 pci-0000:08:00.0" con-name "Wired connection 1"</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the status of the connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection show</strong></span>
NAME                 UUID                                  TYPE      DEVICE
Wired connection 1   9cee0958-512f-4203-9d3d-b57af1d88466  ethernet  enp7s0
Wired connection 1   9cee0958-512f-4203-9d3d-b57af1d88466  ethernet  enp8s0
...</pre></li><li class="listitem"><p class="simpara">
						To display all settings of the connection profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection show "Wired connection 1"</strong></span>
connection.id:               Wired connection 1
...
connection.multi-connect:    3 (multiple)
match.path:                  pci-0000:07:00.0,pci-0000:08:00.0
...</pre><p class="simpara">
						This connection profile uses all devices with a PCI ID which match the pattern in the <code class="literal">match.path</code> parameter and, therefore, the connection profiles have the same Universally Unique Identifier (UUID).
					</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nmcli(1)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">nm-settings(5)</code> man page
					</li></ul></div></section></section><section class="chapter" id="configuring-network-bonding_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 3. Configuring a network bond</h2></div></div></div><p class="_abstract _abstract">
			A network bond is a method to combine or aggregate physical and virtual network interfaces to provide a logical interface with higher throughput or redundancy. In a bond, the kernel handles all operations exclusively. You can create bonds on different types of devices, such as Ethernet devices or VLANs.
		</p><p>
			Red Hat Enterprise Linux provides administrators different options to configure team devices. For example:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Use <code class="literal">nmcli</code> to configure bond connections using the command line.
				</li><li class="listitem">
					Use the RHEL web console to configure bond connections using a web browser.
				</li><li class="listitem">
					Use <code class="literal">nmtui</code> to configure bond connections in a text-based user interface.
				</li><li class="listitem">
					Use the <code class="literal">nm-connection-editor</code> application to configure bond connections in a graphical interface.
				</li><li class="listitem">
					Use <code class="literal">nmstatectl</code> to configure bond connections through the Nmstate API.
				</li><li class="listitem">
					Use RHEL system roles to automate the bond configuration on one or multiple hosts.
				</li></ul></div><section class="section" id="understanding-the-default-behavior-of-controller-and-port-interfaces_configuring-network-bonding"><div class="titlepage"><div><div><h3 class="title">3.1. Understanding the default behavior of controller and port interfaces</h3></div></div></div><p class="_abstract _abstract">
				Consider the following default behavior when managing or troubleshooting team or bond port interfaces using the <code class="literal">NetworkManager</code> service:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Starting the controller interface does not automatically start the port interfaces.
					</li><li class="listitem">
						Starting a port interface always starts the controller interface.
					</li><li class="listitem">
						Stopping the controller interface also stops the port interface.
					</li><li class="listitem">
						A controller without ports can start static IP connections.
					</li><li class="listitem">
						A controller without ports waits for ports when starting DHCP connections.
					</li><li class="listitem">
						A controller with a DHCP connection waiting for ports completes when you add a port with a carrier.
					</li><li class="listitem">
						A controller with a DHCP connection waiting for ports continues waiting when you add a port without carrier.
					</li></ul></div></section><section class="section" id="upstream-switch-configuration-depending-on-the-bonding-modes_configuring-network-bonding"><div class="titlepage"><div><div><h3 class="title">3.2. Upstream switch configuration depending on the bonding modes</h3></div></div></div><p class="_abstract _abstract">
				Depending on the bonding mode you want to use, you must configure the ports on the switch:
			</p><rh-table><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 40%; " class="col_1"><!--Empty--><col style="width: 60%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140053175463728" scope="col">Bonding mode</th><th align="left" valign="top" id="idm140053175462640" scope="col">Configuration on the switch</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140053175463728"> <p>
								<code class="literal">0</code> - <code class="literal">balance-rr</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053175462640"> <p>
								Requires static EtherChannel enabled, not Link Aggregation Control Protocol (LACP)-negotiated.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053175463728"> <p>
								<code class="literal">1</code> - <code class="literal">active-backup</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053175462640"> <p>
								No configuration required on the switch.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053175463728"> <p>
								<code class="literal">2</code> - <code class="literal">balance-xor</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053175462640"> <p>
								Requires static EtherChannel enabled, not LACP-negotiated.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053175463728"> <p>
								<code class="literal">3</code> - <code class="literal">broadcast</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053175462640"> <p>
								Requires static EtherChannel enabled, not LACP-negotiated.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053175463728"> <p>
								<code class="literal">4</code> - <code class="literal">802.3ad</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053175462640"> <p>
								Requires LACP-negotiated EtherChannel enabled.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053175463728"> <p>
								<code class="literal">5</code> - <code class="literal">balance-tlb</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053175462640"> <p>
								No configuration required on the switch.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053175463728"> <p>
								<code class="literal">6</code> - <code class="literal">balance-alb</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053175462640"> <p>
								No configuration required on the switch.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053175463728"> <p>
								<code class="literal">balance-slb</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053175462640"> <p>
								No configuration required on the switch.
							</p>
							 </td></tr></tbody></table></rh-table><p>
				For details how to configure your switch, see the documentation of the switch.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					Certain network bonding features, such as the fail-over mechanism, do not support direct cable connections without a network switch. For further details, see the <a class="link" href="https://access.redhat.com/solutions/202583">Is bonding supported with direct connection using crossover cables?</a> KCS solution.
				</p></div></rh-alert></section><section class="section" id="configuring-a-network-bond-by-using-nmcli_configuring-network-bonding"><div class="titlepage"><div><div><h3 class="title">3.3. Configuring a network bond by using <code class="literal">nmcli</code></h3></div></div></div><p class="_abstract _abstract">
				To configure a network bond on the command line, use the <code class="literal">nmcli</code> utility.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Two or more physical or virtual network devices are installed on the server.
					</li><li class="listitem">
						To use Ethernet devices as ports of the bond, the physical or virtual Ethernet devices must be installed on the server.
					</li><li class="listitem"><p class="simpara">
						To use team, bridge, or VLAN devices as ports of the bond, you can either create these devices while you create the bond or you can create them in advance as described in:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<a class="link" href="#configuring-a-network-team-by-using-nmcli_configuring-network-teaming" title="4.4. Configuring a NIC team by using nmcli">Configuring a network team by using nmcli</a>
							</li><li class="listitem">
								<a class="link" href="#configuring-a-network-bridge-by-using-nmcli_configuring-a-network-bridge" title="6.1. Configuring a network bridge by using nmcli">Configuring a network bridge by using nmcli</a>
							</li><li class="listitem">
								<a class="link" href="#configuring-vlan-tagging-by-using-nmcli_configuring-vlan-tagging" title="5.1. Configuring VLAN tagging by using nmcli">Configuring VLAN tagging by using nmcli</a>
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a bond interface:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type bond con-name bond0 ifname bond0 bond.options "mode=active-backup"</strong></span></pre><p class="simpara">
						This command creates a bond named <code class="literal">bond0</code> that uses the <code class="literal">active-backup</code> mode.
					</p><p class="simpara">
						To additionally set a Media Independent Interface (MII) monitoring interval, add the <code class="literal">miimon=interval</code> option to the <code class="literal">bond.options</code> property, for example:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type bond con-name bond0 ifname bond0 bond.options "mode=active-backup,miimon=1000"</strong></span></pre></li><li class="listitem"><p class="simpara">
						Display the network interfaces, and note names of interfaces you plan to add to the bond:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device status</strong></span>
DEVICE   TYPE      STATE         CONNECTION
enp7s0   ethernet  disconnected  --
enp8s0   ethernet  disconnected  --
bridge0  bridge    connected     bridge0
bridge1  bridge    connected     bridge1
...</pre><p class="simpara">
						In this example:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">enp7s0</code> and <code class="literal">enp8s0</code> are not configured. To use these devices as ports, add connection profiles in the next step.
							</li><li class="listitem">
								<code class="literal">bridge0</code> and <code class="literal">bridge1</code> have existing connection profiles. To use these devices as ports, modify their profiles in the next step.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Assign interfaces to the bond:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								If the interfaces you want to assign to the bond are not configured, create new connection profiles for them:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type ethernet port-type bond con-name bond0-port1 ifname enp7s0 controller bond0</strong></span>
# <span class="strong strong"><strong>nmcli connection add type ethernet port-type bond con-name bond0-port2 ifname enp8s0 controller bond0</strong></span></pre><p class="simpara">
								These commands create profiles for <code class="literal">enp7s0</code> and <code class="literal">enp8s0</code>, and add them to the <code class="literal">bond0</code> connection.
							</p></li><li class="listitem"><p class="simpara">
								To assign an existing connection profile to the bond:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
										Set the <code class="literal">controller</code> parameter of these connections to <code class="literal">bond0</code>:
									</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bridge0 controller bond0</strong></span>
# <span class="strong strong"><strong>nmcli connection modify bridge1 controller bond0</strong></span></pre><p class="simpara">
										These commands assign the existing connection profiles named <code class="literal">bridge0</code> and <code class="literal">bridge1</code> to the <code class="literal">bond0</code> connection.
									</p></li><li class="listitem"><p class="simpara">
										Reactivate the connections:
									</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up bridge0</strong></span>
# <span class="strong strong"><strong>nmcli connection up bridge1</strong></span></pre></li></ol></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Configure the IPv4 settings:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To use this bond device as a port of other devices, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bond0 ipv4.method disabled</strong></span></pre></li><li class="listitem">
								To use DHCP, no action is required.
							</li><li class="listitem"><p class="simpara">
								To set a static IPv4 address, network mask, default gateway, and DNS server to the <code class="literal">bond0</code> connection, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bond0 ipv4.addresses '192.0.2.1/24' ipv4.gateway '192.0.2.254' ipv4.dns '192.0.2.253' ipv4.dns-search 'example.com' ipv4.method manual</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Configure the IPv6 settings:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To use this bond device as a port of other devices, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bond0 ipv6.method disabled</strong></span></pre></li><li class="listitem">
								To use stateless address autoconfiguration (SLAAC), no action is required.
							</li><li class="listitem"><p class="simpara">
								To set a static IPv6 address, network mask, default gateway, and DNS server to the <code class="literal">bond0</code> connection, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bond0 ipv6.addresses '2001:db8:1::1/64' ipv6.gateway '2001:db8:1::fffe' ipv6.dns '2001:db8:1::fffd' ipv6.dns-search 'example.com' ipv6.method manual</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: If you want to set any parameters on the bond ports, use the following command:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bond0-port1 bond-port.<span class="emphasis"><em>&lt;parameter&gt;</em></span> <span class="emphasis"><em>&lt;value&gt;</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Activate the connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up bond0</strong></span></pre></li><li class="listitem"><p class="simpara">
						Verify that the ports are connected, and the <code class="literal">CONNECTION</code> column displays the port’s connection name:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device</strong></span>
DEVICE   TYPE      STATE      CONNECTION
...
enp7s0   ethernet  connected  bond0-port1
enp8s0   ethernet  connected  bond0-port2</pre><p class="simpara">
						When you activate any port of the connection, NetworkManager also activates the bond, but not the other ports of it. You can configure that Red Hat Enterprise Linux enables all ports automatically when the bond is enabled:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Enable the <code class="literal">connection.autoconnect-ports</code> parameter of the bond’s connection:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bond0 connection.autoconnect-ports 1</strong></span></pre></li><li class="listitem"><p class="simpara">
								Reactivate the bridge:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up bond0</strong></span></pre></li></ol></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Temporarily remove the network cable from one of the network devices and check if the other device in the bond handling the traffic.
					</p><p class="simpara">
						Note that there is no method to properly test link failure events using software utilities. Tools that deactivate connections, such as <code class="literal">nmcli</code>, show only the bonding driver’s ability to handle port configuration changes and not actual link failure events.
					</p></li><li class="listitem"><p class="simpara">
						Display the status of the bond:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /proc/net/bonding/bond0</strong></span></pre></li></ol></div></section><section class="section" id="proc_configuring-a-network-bond-by-using-the-rhel-web-console_configuring-network-bonding"><div class="titlepage"><div><div><h3 class="title">3.4. Configuring a network bond by using the RHEL web console</h3></div></div></div><p>
				Use the RHEL web console to configure a network bond if you prefer to manage network settings using a web browser-based interface.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Two or more physical or virtual network devices are installed on the server.
					</li><li class="listitem">
						To use Ethernet devices as members of the bond, the physical or virtual Ethernet devices must be installed on the server.
					</li><li class="listitem"><p class="simpara">
						To use team, bridge, or VLAN devices as members of the bond, create them in advance as described in:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<a class="link" href="#proc_configuring-a-network-team-by-using-the-rhel-web-console_configuring-network-teaming" title="4.5. Configuring a NIC team by using the RHEL web console">Configuring a network team by using the RHEL web console</a>
							</li><li class="listitem">
								<a class="link" href="#proc_configuring-a-network-bridge-by-using-the-rhel-web-console_configuring-a-network-bridge" title="6.2. Configuring a network bridge by using the RHEL web console">Configuring a network bridge by using the RHEL web console</a>
							</li><li class="listitem">
								<a class="link" href="#proc_configuring-vlan-tagging-by-using-the-rhel-web-console_configuring-vlan-tagging" title="5.3. Configuring VLAN tagging by using the RHEL web console">Configuring VLAN tagging by using the RHEL web console</a>
							</li></ul></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You have installed the RHEL 9 web console.
					</p><p class="simpara">
						For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Log in to the RHEL 9 web console.
					</p><p class="simpara">
						For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
					</p></li><li class="listitem">
						Select the <span class="strong strong"><strong>Networking</strong></span> tab in the navigation on the left side of the screen.
					</li><li class="listitem">
						Click <span class="guibutton">Add bond</span> in the <span class="strong strong"><strong>Interfaces</strong></span> section.
					</li><li class="listitem">
						Enter the name of the bond device you want to create.
					</li><li class="listitem">
						Select the interfaces that should be members of the bond.
					</li><li class="listitem"><p class="simpara">
						Select the mode of the bond.
					</p><p class="simpara">
						If you select <span class="strong strong"><strong>Active backup</strong></span>, the web console shows the additional field <span class="strong strong"><strong>Primary</strong></span> in which you can select the preferred active device.
					</p></li><li class="listitem">
						Set the link monitoring mode. For example, when you use the <span class="strong strong"><strong>Adaptive load balancing</strong></span> mode, set it to <code class="literal">ARP</code>.
					</li><li class="listitem"><p class="simpara">
						Optional: Adjust the monitoring interval, link up delay, and link down delay settings. Typically, you only change the defaults for troubleshooting purposes.
					</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/28c01d3e4242ea42f96037e208f662e7/bond-settings.png" alt="bond settings"></div></div></li><li class="listitem">
						Click <span class="guibutton">Apply</span>.
					</li><li class="listitem"><p class="simpara">
						By default, the bond uses a dynamic IP address. If you want to set a static IP address:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Click the name of the bond in the <span class="strong strong"><strong>Interfaces</strong></span> section.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Edit</strong></span> next to the protocol you want to configure.
							</li><li class="listitem">
								Select <span class="strong strong"><strong>Manual</strong></span> next to <span class="strong strong"><strong>Addresses</strong></span>, and enter the IP address, prefix, and default gateway.
							</li><li class="listitem">
								In the <span class="strong strong"><strong>DNS</strong></span> section, click the <span class="guibutton">+</span> button, and enter the IP address of the DNS server. Repeat this step to set multiple DNS servers.
							</li><li class="listitem">
								In the <span class="strong strong"><strong>DNS search domains</strong></span> section, click the <span class="guibutton">+</span> button, and enter the search domain.
							</li><li class="listitem"><p class="simpara">
								If the interface requires static routes, configure them in the <span class="strong strong"><strong>Routes</strong></span> section.
							</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/7994cde2fafedf1c5a1436807dc34096/bond-team-bridge-vlan.ipv4.png" alt="bond team bridge vlan.ipv4"></div></div></li><li class="listitem">
								Click <span class="guibutton">Apply</span>
							</li></ol></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Select the <span class="strong strong"><strong>Networking</strong></span> tab in the navigation on the left side of the screen, and check if there is incoming and outgoing traffic on the interface:
					</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/7eb80fb00d3136600392a9172ad9a8a4/bond-verify.png" alt="bond verify"></div></div></li><li class="listitem"><p class="simpara">
						Temporarily remove the network cable from one of the network devices and check if the other device in the bond handling the traffic.
					</p><p class="simpara">
						Note that there is no method to properly test link failure events using software utilities. Tools that deactivate connections, such as the web console, show only the bonding driver’s ability to handle member configuration changes and not actual link failure events.
					</p></li><li class="listitem"><p class="simpara">
						Display the status of the bond:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /proc/net/bonding/bond0</strong></span></pre></li></ol></div></section><section class="section" id="proc_configuring-a-network-by-bond-using-nmtui_configuring-network-bonding"><div class="titlepage"><div><div><h3 class="title">3.5. Configuring a network bond by using <code class="literal">nmtui</code></h3></div></div></div><p>
				The <code class="literal">nmtui</code> application provides a text-based user interface for NetworkManager. You can use <code class="literal">nmtui</code> to configure a network bond on a host without a graphical interface.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					In <code class="literal">nmtui</code>:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Navigate by using the cursor keys.
						</li><li class="listitem">
							Press a button by selecting it and hitting <kbd class="keycap">Enter</kbd>.
						</li><li class="listitem">
							Select and clear checkboxes by using <kbd class="keycap">Space</kbd>.
						</li></ul></div></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Two or more physical or virtual network devices are installed on the server.
					</li><li class="listitem">
						To use Ethernet devices as ports of the bond, the physical or virtual Ethernet devices must be installed on the server.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						If you do not know the network device names on which you want configure a network bond, display the available devices:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device status</strong></span>
DEVICE     TYPE      STATE                   CONNECTION
enp7s0     ethernet  unavailable             --
enp8s0     ethernet  unavailable             --
...</pre></li><li class="listitem"><p class="simpara">
						Start <code class="literal">nmtui</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmtui</strong></span></pre></li><li class="listitem">
						Select <span class="strong strong"><strong>Edit a connection</strong></span>, and press <kbd class="keycap">Enter</kbd>.
					</li><li class="listitem">
						Press <span class="strong strong"><strong>Add</strong></span>.
					</li><li class="listitem">
						Select <span class="strong strong"><strong>Bond</strong></span> from the list of network types, and press <kbd class="keycap">Enter</kbd>.
					</li><li class="listitem"><p class="simpara">
						Optional: Enter a name for the NetworkManager profile to be created.
					</p><p class="simpara">
						On hosts with multiple profiles, a meaningful name makes it easier to identify the purpose of a profile.
					</p></li><li class="listitem">
						Enter the bond device name to be created into the <span class="strong strong"><strong>Device</strong></span> field.
					</li><li class="listitem"><p class="simpara">
						Add ports to the bond to be created:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Press <span class="strong strong"><strong>Add</strong></span> next to the <span class="strong strong"><strong>Slaves</strong></span> list.
							</li><li class="listitem">
								Select the type of the interface you want to add as port to the bond, for example, <span class="strong strong"><strong>Ethernet</strong></span>.
							</li><li class="listitem">
								Optional: Enter a name for the NetworkManager profile to be created for this bond port.
							</li><li class="listitem">
								Enter the port’s device name into the <span class="strong strong"><strong>Device</strong></span> field.
							</li><li class="listitem"><p class="simpara">
								Press <span class="strong strong"><strong>OK</strong></span> to return to the window with the bond settings.
							</p><div class="figure" id="idm140053180592640"><p class="title"><strong>Figure 3.1. Adding an Ethernet device as port to a bond</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/738fc53f48edcb37714e09e4c793be0f/nmtui-bond-add-port.png" alt="nmtui bond add port"></div></div></div></li><li class="listitem">
								Repeat these steps to add more ports to the bond.
							</li></ol></div></li><li class="listitem">
						Set the bond mode. Depending on the value you set, <code class="literal">nmtui</code> displays additional fields for settings that are related to the selected mode.
					</li><li class="listitem"><p class="simpara">
						Depending on your environment, configure the IP address settings in the <span class="strong strong"><strong>IPv4 configuration</strong></span> and <span class="strong strong"><strong>IPv6 configuration</strong></span> areas accordingly. For this, press the button next to these areas, and select:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">Disabled</code>, if the bond does not require an IP address.
							</li><li class="listitem">
								<code class="literal">Automatic</code>, if a DHCP server or stateless address autoconfiguration (SLAAC) dynamically assigns an IP address to the bond.
							</li><li class="listitem"><p class="simpara">
								<code class="literal">Manual</code>, if the network requires static IP address settings. In this case, you must fill further fields:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Press <span class="strong strong"><strong>Show</strong></span> next to the protocol you want to configure to display additional fields.
									</li><li class="listitem"><p class="simpara">
										Press <span class="strong strong"><strong>Add</strong></span> next to <span class="strong strong"><strong>Addresses</strong></span>, and enter the IP address and the subnet mask in Classless Inter-Domain Routing (CIDR) format.
									</p><p class="simpara">
										If you do not specify a subnet mask, NetworkManager sets a <code class="literal">/32</code> subnet mask for IPv4 addresses and <code class="literal">/64</code> for IPv6 addresses.
									</p></li><li class="listitem">
										Enter the address of the default gateway.
									</li><li class="listitem">
										Press <span class="strong strong"><strong>Add</strong></span> next to <span class="strong strong"><strong>DNS servers</strong></span>, and enter the DNS server address.
									</li><li class="listitem">
										Press <span class="strong strong"><strong>Add</strong></span> next to <span class="strong strong"><strong>Search domains</strong></span>, and enter the DNS search domain.
									</li></ol></div></li></ul></div><div class="figure" id="idm140053189482080"><p class="title"><strong>Figure 3.2. Example of a bond connection with static IP address settings</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/2bec7d095c8adc5a6cc12c088a3c7da4/nmtui-bond-static-IP.png" alt="nmtui bond static IP"></div></div></div></li><li class="listitem">
						Press <span class="strong strong"><strong>OK</strong></span> to create and automatically activate the new connection.
					</li><li class="listitem">
						Press <span class="strong strong"><strong>Back</strong></span> to return to the main menu.
					</li><li class="listitem">
						Select <span class="strong strong"><strong>Quit</strong></span>, and press <kbd class="keycap">Enter</kbd> to close the <code class="literal">nmtui</code> application.
					</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Temporarily remove the network cable from one of the network devices and check if the other device in the bond handling the traffic.
					</p><p class="simpara">
						Note that there is no method to properly test link failure events using software utilities. Tools that deactivate connections, such as <code class="literal">nmcli</code>, show only the bonding driver’s ability to handle port configuration changes and not actual link failure events.
					</p></li><li class="listitem"><p class="simpara">
						Display the status of the bond:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /proc/net/bonding/bond0</strong></span></pre></li></ol></div></section><section class="section" id="configuring-a-network-bond-by-using-nm-connection-editor_configuring-network-bonding"><div class="titlepage"><div><div><h3 class="title">3.6. Configuring a network bond by using nm-connection-editor</h3></div></div></div><p class="_abstract _abstract">
				If you use Red Hat Enterprise Linux with a graphical interface, you can configure network bonds using the <code class="literal">nm-connection-editor</code> application.
			</p><p>
				Note that <code class="literal">nm-connection-editor</code> can add only new ports to a bond. To use an existing connection profile as a port, create the bond by using the <code class="literal">nmcli</code> utility as described in <a class="link" href="#configuring-a-network-bond-by-using-nmcli_configuring-network-bonding" title="3.3. Configuring a network bond by using nmcli">Configuring a network bond by using nmcli</a>.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Two or more physical or virtual network devices are installed on the server.
					</li><li class="listitem">
						To use Ethernet devices as ports of the bond, the physical or virtual Ethernet devices must be installed on the server.
					</li><li class="listitem">
						To use team, bond, or VLAN devices as ports of the bond, ensure that these devices are not already configured.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open a terminal, and enter <code class="literal">nm-connection-editor</code>:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>nm-connection-editor</strong></span></pre></li><li class="listitem">
						Click the <span class="guibutton">+</span> button to add a new connection.
					</li><li class="listitem">
						Select the <span class="strong strong"><strong>Bond</strong></span> connection type, and click <span class="guibutton">Create</span>.
					</li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>Bond</strong></span> tab:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Optional: Set the name of the bond interface in the <span class="strong strong"><strong>Interface name</strong></span> field.
							</li><li class="listitem"><p class="simpara">
								Click the <span class="guibutton">Add</span> button to add a network interface as a port to the bond.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Select the connection type of the interface. For example, select <span class="strong strong"><strong>Ethernet</strong></span> for a wired connection.
									</li><li class="listitem">
										Optional: Set a connection name for the port.
									</li><li class="listitem">
										If you create a connection profile for an Ethernet device, open the <span class="strong strong"><strong>Ethernet</strong></span> tab, and select in the <span class="strong strong"><strong>Device</strong></span> field the network interface you want to add as a port to the bond. If you selected a different device type, configure it accordingly. Note that you can only use Ethernet interfaces in a bond that are not configured.
									</li><li class="listitem">
										Click <span class="guibutton">Save</span>.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								Repeat the previous step for each interface you want to add to the bond:
							</p><p class="simpara">
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/06165ace0bbc5a7dc1ca3ded35d69437/add-nic-to-bond-in-nm-connection-editor.png" alt="add nic to bond in nm connection editor"></span>

							</p></li><li class="listitem">
								Optional: Set other options, such as the Media Independent Interface (MII) monitoring interval.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Configure the IP address settings on both the <span class="strong strong"><strong>IPv4 Settings</strong></span> and <span class="strong strong"><strong>IPv6 Settings</strong></span> tabs:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								To use this bridge device as a port of other devices, set the <span class="strong strong"><strong>Method</strong></span> field to <span class="strong strong"><strong>Disabled</strong></span>.
							</li><li class="listitem">
								To use DHCP, leave the <span class="strong strong"><strong>Method</strong></span> field at its default, <span class="strong strong"><strong>Automatic (DHCP)</strong></span>.
							</li><li class="listitem"><p class="simpara">
								To use static IP settings, set the <span class="strong strong"><strong>Method</strong></span> field to <span class="strong strong"><strong>Manual</strong></span> and fill the fields accordingly:
							</p><p class="simpara">
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/8885955edff3803e58f40526782cd2ed/bond-IP-settings-nm-connection-editor.png" alt="bond IP settings nm connection editor"></span>

							</p></li></ul></div></li><li class="listitem">
						Click <span class="guibutton">Save</span>.
					</li><li class="listitem">
						Close <code class="literal">nm-connection-editor</code>.
					</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Temporarily remove the network cable from one of the network devices and check if the other device in the bond handling the traffic.
					</p><p class="simpara">
						Note that there is no method to properly test link failure events using software utilities. Tools that deactivate connections, such as <code class="literal">nmcli</code>, show only the bonding driver’s ability to handle port configuration changes and not actual link failure events.
					</p></li><li class="listitem"><p class="simpara">
						Display the status of the bond:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /proc/net/bonding/<span class="emphasis"><em>bond0</em></span></strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#proc_configuring-networkmanager-to-avoid-using-a-specific-profile-to-provide-a-default-gateway_managing-the-default-gateway-setting" title="25.8. Configuring NetworkManager to avoid using a specific profile to provide a default gateway">Configuring NetworkManager to avoid using a specific profile to provide a default gateway</a>
					</li><li class="listitem">
						<a class="link" href="#configuring-a-network-team-by-using-nm-connection-editor_configuring-network-teaming" title="4.6. Configuring a NIC team by using nm-connection-editor">Configuring a network team by using nm-connection-editor</a>
					</li><li class="listitem">
						<a class="link" href="#configuring-a-network-bridge-by-using-nm-connection-editor_configuring-a-network-bridge" title="6.4. Configuring a network bridge by using nm-connection-editor">Configuring a network bridge by using nm-connection-editor</a>
					</li><li class="listitem">
						<a class="link" href="#configuring-vlan-tagging-by-using-nm-connection-editor_configuring-vlan-tagging" title="5.5. Configuring VLAN tagging by using nm-connection-editor">Configuring VLAN tagging by using nm-connection-editor</a>
					</li></ul></div></section><section class="section" id="proc_configuring-a-network-bond-by-using-nmstatectl_configuring-network-bonding"><div class="titlepage"><div><div><h3 class="title">3.7. Configuring a network bond by using <code class="literal">nmstatectl</code></h3></div></div></div><p class="_abstract _abstract">
				Use the <code class="literal">nmstatectl</code> utility to configure a network bond through the Nmstate API. The Nmstate API ensures that, after setting the configuration, the result matches the configuration file. If anything fails, <code class="literal">nmstatectl</code> automatically rolls back the changes to avoid leaving the system in an incorrect state.
			</p><p>
				Depending on your environment, adjust the YAML file accordingly. For example, to use different devices than Ethernet adapters in the bond, adapt the <code class="literal">base-iface</code> attribute and <code class="literal">type</code> attributes of the ports you use in the bond.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Two or more physical or virtual network devices are installed on the server.
					</li><li class="listitem">
						To use Ethernet devices as ports in the bond, the physical or virtual Ethernet devices must be installed on the server.
					</li><li class="listitem">
						To use team, bridge, or VLAN devices as ports in the bond, set the interface name in the <code class="literal">port</code> list, and define the corresponding interfaces.
					</li><li class="listitem">
						The <code class="literal">nmstate</code> package is installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a YAML file, for example <code class="literal">~/create-bond.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
interfaces:
- name: bond0
  type: bond
  state: up
  ipv4:
    enabled: true
    address:
    - ip: 192.0.2.1
      prefix-length: 24
    dhcp: false
  ipv6:
    enabled: true
    address:
    - ip: 2001:db8:1::1
      prefix-length: 64
    autoconf: false
    dhcp: false
  link-aggregation:
    mode: active-backup
    port:
    - enp1s0
    - enp7s0
- name: enp1s0
  type: ethernet
  state: up
- name: enp7s0
  type: ethernet
  state: up

routes:
  config:
  - destination: 0.0.0.0/0
    next-hop-address: 192.0.2.254
    next-hop-interface: bond0
  - destination: ::/0
    next-hop-address: 2001:db8:1::fffe
    next-hop-interface: bond0

dns-resolver:
  config:
    search:
    - example.com
    server:
    - 192.0.2.200
    - 2001:db8:1::ffbb</pre><p class="simpara">
						These settings define a network bond with the following settings:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Network interfaces in the bond: <code class="literal">enp1s0</code> and <code class="literal">enp7s0</code>
							</li><li class="listitem">
								Mode: <code class="literal">active-backup</code>
							</li><li class="listitem">
								Static IPv4 address: <code class="literal">192.0.2.1</code> with a <code class="literal">/24</code> subnet mask
							</li><li class="listitem">
								Static IPv6 address: <code class="literal">2001:db8:1::1</code> with a <code class="literal">/64</code> subnet mask
							</li><li class="listitem">
								IPv4 default gateway: <code class="literal">192.0.2.254</code>
							</li><li class="listitem">
								IPv6 default gateway: <code class="literal">2001:db8:1::fffe</code>
							</li><li class="listitem">
								IPv4 DNS server: <code class="literal">192.0.2.200</code>
							</li><li class="listitem">
								IPv6 DNS server: <code class="literal">2001:db8:1::ffbb</code>
							</li><li class="listitem">
								DNS search domain: <code class="literal">example.com</code>
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Apply the settings to the system:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmstatectl apply ~/create-bond.yml</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the status of the devices and connections:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device status</strong></span>
DEVICE      TYPE      STATE      CONNECTION
bond0       bond      <span class="strong strong"><strong>connected</strong></span>  bond0</pre></li><li class="listitem"><p class="simpara">
						Display all settings of the connection profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection show bond0</strong></span>
connection.id:              bond0
connection.uuid:            79cbc3bd-302e-4b1f-ad89-f12533b818ee
connection.stable-id:       --
connection.type:            bond
connection.interface-name:  bond0
...</pre></li><li class="listitem"><p class="simpara">
						Display the connection settings in YAML format:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmstatectl show bond0</strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nmstatectl(8)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/nmstate/examples/</code> directory
					</li></ul></div></section><section class="section" id="proc_configuring-a-network-bond-by-using-network-rhel-system-role_configuring-network-bonding"><div class="titlepage"><div><div><h3 class="title">3.8. Configuring a network bond by using the <code class="literal">network</code> RHEL system role</h3></div></div></div><p class="_abstract _abstract">
				You can combine network interfaces in a bond to provide a logical interface with higher throughput or redundancy. To configure a bond, create a NetworkManager connection profile. By using Ansible and the <code class="literal">network</code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.
			</p><p>
				You can use the <code class="literal">network</code> RHEL system role to configure a network bond and, if a connection profile for the bond’s parent device does not exist, the role can create it as well.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles">You have prepared the control node and the managed nodes</a>
					</li><li class="listitem">
						You are logged in to the control node as a user who can run playbooks on the managed nodes.
					</li><li class="listitem">
						The account you use to connect to the managed nodes has <code class="literal">sudo</code> permissions on them.
					</li><li class="listitem">
						Two or more physical or virtual network devices are installed on the server.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a playbook file, for example <code class="literal">~/playbook.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
- name: Configure the network
  hosts: managed-node-01.example.com
  tasks:
    - name: Bond connection profile with two Ethernet ports
      ansible.builtin.include_role:
        name: rhel-system-roles.network
      vars:
        network_connections:
          # Bond profile
          - name: bond0
            type: bond
            interface_name: bond0
            ip:
              dhcp4: yes
              auto6: yes
            bond:
              mode: active-backup
            state: up

          # Port profile for the 1st Ethernet device
          - name: bond0-port1
            interface_name: enp7s0
            type: ethernet
            controller: bond0
            state: up

          # Port profile for the 2nd Ethernet device
          - name: bond0-port2
            interface_name: enp8s0
            type: ethernet
            controller: bond0
            state: up</pre><p class="simpara">
						The settings specified in the example playbook include the following:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">type: <span class="emphasis"><em>&lt;profile_type&gt;</em></span></code></span></dt><dd>
									Sets the type of the profile to create. The example playbook creates three connection profiles: One for the bond and two for the Ethernet devices.
								</dd><dt><span class="term"><code class="literal">dhcp4: yes</code></span></dt><dd>
									Enables automatic IPv4 address assignment from DHCP, PPP, or similar services.
								</dd><dt><span class="term"><code class="literal">auto6: yes</code></span></dt><dd>
									Enables IPv6 auto-configuration. By default, NetworkManager uses Router Advertisements. If the router announces the <code class="literal">managed</code> flag, NetworkManager requests an IPv6 address and prefix from a DHCPv6 server.
								</dd><dt><span class="term"><code class="literal">mode: <span class="emphasis"><em>&lt;bond_mode&gt;</em></span></code></span></dt><dd><p class="simpara">
									Sets the bonding mode. Possible values are:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<code class="literal">balance-rr</code> (default)
										</li><li class="listitem">
											<code class="literal">active-backup</code>
										</li><li class="listitem">
											<code class="literal">balance-xor</code>
										</li><li class="listitem">
											<code class="literal">broadcast</code>
										</li><li class="listitem">
											<code class="literal">802.3ad</code>
										</li><li class="listitem">
											<code class="literal">balance-tlb</code>
										</li><li class="listitem">
											<code class="literal">balance-alb</code>.
										</li></ul></div><p class="simpara">
									Depending on the mode you set, you need to set additional variables in the playbook.
								</p></dd></dl></div><p class="simpara">
						For details about all variables used in the playbook, see the <code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file on the control node.
					</p></li><li class="listitem"><p class="simpara">
						Validate the playbook syntax:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --syntax-check ~/playbook.yml</strong></span></pre><p class="simpara">
						Note that this command only validates the syntax and does not protect against a wrong but valid configuration.
					</p></li><li class="listitem"><p class="simpara">
						Run the playbook:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook ~/playbook.yml</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Temporarily remove the network cable from one of the network devices and check if the other device in the bond handling the traffic.
					</p><p class="simpara">
						Note that there is no method to properly test link failure events using software utilities. Tools that deactivate connections, such as <code class="literal">nmcli</code>, show only the bonding driver’s ability to handle port configuration changes and not actual link failure events.
					</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/rhel-system-roles/network/</code> directory
					</li></ul></div></section><section class="section" id="creating-a-network-bond-to-enable-switching-between-an-ethernet-and-wireless-connection-without-interrupting-the-vpn_configuring-network-bonding"><div class="titlepage"><div><div><h3 class="title">3.9. Creating a network bond to enable switching between an Ethernet and wireless connection without interrupting the VPN</h3></div></div></div><p class="_abstract _abstract">
				RHEL users who connect their workstation to their company’s network typically use a VPN to access remote resources. However, if the workstation switches between an Ethernet and Wi-Fi connection, for example, if you release a laptop from a docking station with an Ethernet connection, the VPN connection is interrupted. To avoid this problem, you can create a network bond that uses the Ethernet and Wi-Fi connection in <code class="literal">active-backup</code> mode.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The host contains an Ethernet and a Wi-Fi device.
					</li><li class="listitem"><p class="simpara">
						An Ethernet and Wi-Fi NetworkManager connection profile has been created and both connections work independently.
					</p><p class="simpara">
						This procedure uses the following connection profiles to create a network bond named <code class="literal">bond0</code>:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<code class="literal">Docking_station</code> associated with the <code class="literal">enp11s0u1</code> Ethernet device
							</li><li class="listitem">
								<code class="literal">Wi-Fi</code> associated with the <code class="literal">wlp1s0</code> Wi-Fi device
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a bond interface in <code class="literal">active-backup</code> mode:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type bond con-name bond0 ifname bond0 bond.options "mode=active-backup"</strong></span></pre><p class="simpara">
						This command names both the interface and connection profile <code class="literal">bond0</code>.
					</p></li><li class="listitem"><p class="simpara">
						Configure the IPv4 settings of the bond:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								If a DHCP server in your network assigns IPv4 addresses to hosts, no action is required.
							</li><li class="listitem"><p class="simpara">
								If your local network requires static IPv4 addresses, set the address, network mask, default gateway, DNS server, and DNS search domain to the <code class="literal">bond0</code> connection:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bond0 ipv4.addresses '<span class="emphasis"><em>192.0.2.1/24</em></span>'</strong></span>
# <span class="strong strong"><strong>nmcli connection modify bond0 ipv4.gateway '<span class="emphasis"><em>192.0.2.254</em></span>'</strong></span>
# <span class="strong strong"><strong>nmcli connection modify bond0 ipv4.dns '<span class="emphasis"><em>192.0.2.253</em></span>'</strong></span>
# <span class="strong strong"><strong>nmcli connection modify bond0 ipv4.dns-search '<span class="emphasis"><em>example.com</em></span>'</strong></span>
# <span class="strong strong"><strong>nmcli connection modify bond0 ipv4.method manual</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Configure the IPv6 settings of the bond:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								If your router or a DHCP server in your network assigns IPv6 addresses to hosts, no action is required.
							</li><li class="listitem"><p class="simpara">
								If your local network requires static IPv6 addresses, set the address, network mask, default gateway, DNS server, and DNS search domain to the <code class="literal">bond0</code> connection:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bond0 ipv6.addresses '<span class="emphasis"><em>2001:db8:1::1/64</em></span>'</strong></span>
# <span class="strong strong"><strong>nmcli connection modify bond0 ipv6.gateway '<span class="emphasis"><em>2001:db8:1::fffe</em></span>'</strong></span>
# <span class="strong strong"><strong>nmcli connection modify bond0 ipv6.dns '<span class="emphasis"><em>2001:db8:1::fffd</em></span>'</strong></span>
# <span class="strong strong"><strong>nmcli connection modify bond0 ipv6.dns-search '<span class="emphasis"><em>example.com</em></span>'</strong></span>
# <span class="strong strong"><strong>nmcli connection modify bond0 ipv6.method manual</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Display the connection profiles:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection show</strong></span>
NAME             UUID                                  TYPE      DEVICE
Docking_station  256dd073-fecc-339d-91ae-9834a00407f9  ethernet  enp11s0u1
Wi-Fi            1f1531c7-8737-4c60-91af-2d21164417e8  wifi      wlp1s0
...</pre><p class="simpara">
						You require the names of the connection profiles and the Ethernet device name in the next steps.
					</p></li><li class="listitem"><p class="simpara">
						Assign the connection profile of the Ethernet connection to the bond:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>Docking_station</em></span> controller bond0</strong></span></pre></li><li class="listitem"><p class="simpara">
						Assign the connection profile of the Wi-Fi connection to the bond:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>Wi-Fi</em></span> controller bond0</strong></span></pre></li><li class="listitem"><p class="simpara">
						If your Wi-Fi network uses MAC filtering to allow only MAC addresses on a allow list to access the network, configure that NetworkManager dynamically assigns the MAC address of the active port to the bond:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bond0 +bond.options fail_over_mac=1</strong></span></pre><p class="simpara">
						With this setting, you must set only the MAC address of the Wi-Fi device to the allow list instead of the MAC address of both the Ethernet and Wi-Fi device.
					</p></li><li class="listitem"><p class="simpara">
						Set the device associated with the Ethernet connection as primary device of the bond:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli con modify bond0 +bond.options "primary=enp11s0u1"</strong></span></pre><p class="simpara">
						With this setting, the bond always uses the Ethernet connection if it is available.
					</p></li><li class="listitem"><p class="simpara">
						Configure that NetworkManager automatically activates ports when the <code class="literal">bond0</code> device is activated:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bond0 connection.autoconnect-ports 1</strong></span></pre></li><li class="listitem"><p class="simpara">
						Activate the <code class="literal">bond0</code> connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up bond0</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Display the currently active device, the status of the bond and its ports:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /proc/net/bonding/bond0</strong></span>
Ethernet Channel Bonding Driver: v3.7.1 (April 27, 2011)

Bonding Mode: fault-tolerance (active-backup) (fail_over_mac active)
Primary Slave: enp11s0u1 (primary_reselect always)
<span class="strong strong"><strong>Currently Active Slave: enp11s0u1</strong></span>
<span class="strong strong"><strong>MII Status: up</strong></span>
MII Polling Interval (ms): 1
Up Delay (ms): 0
Down Delay (ms): 0
Peer Notification Delay (ms): 0

Slave Interface: enp11s0u1
<span class="strong strong"><strong>MII Status: up</strong></span>
Speed: 1000 Mbps
Duplex: full
Link Failure Count: 0
Permanent HW addr: 00:53:00:59:da:b7
Slave queue ID: 0

Slave Interface: wlp1s0
<span class="strong strong"><strong>MII Status: up</strong></span>
Speed: Unknown
Duplex: Unknown
Link Failure Count: 2
Permanent HW addr: 00:53:00:b3:22:ba
Slave queue ID: 0</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#configuring-an-ethernet-connection_configuring-and-managing-networking" title="Chapter 2. Configuring an Ethernet connection">Configuring an Ethernet connection</a>
					</li><li class="listitem">
						<a class="link" href="#assembly_managing-wifi-connections_configuring-and-managing-networking" title="Chapter 11. Managing wifi connections">Managing Wi-Fi connections</a>
					</li><li class="listitem">
						<a class="link" href="#configuring-network-bonding_configuring-and-managing-networking" title="Chapter 3. Configuring a network bond">Configuring a network bond</a>
					</li></ul></div></section><section class="section" id="the-different-network-bonding-modes_configuring-network-bonding"><div class="titlepage"><div><div><h3 class="title">3.10. The different network bonding modes</h3></div></div></div><p class="_abstract _abstract">
				The Linux bonding driver provides link aggregation. Bonding is the process of aggregating multiple network interfaces in parallel to provide a single logical bonded interface. The actions of a bonded interface depend on the bonding policy that is also known as mode. The different modes provide either load-balancing or hot standby services.
			</p><p>
				The Linux bonding driver supports the following modes:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Balance-rr (Mode 0)</span></dt><dd><p class="simpara">
							<code class="literal">Balance-rr</code> uses the round-robin algorithm that sequentially transmits packets from the first available port to the last one. This mode provides load balancing and fault tolerance.
						</p><p class="simpara">
							This mode requires switch configuration of a port aggregation group, also called EtherChannel or similar port grouping. An EtherChannel is a port link aggregation technology to group multiple physical Ethernet links to one logical Ethernet link.
						</p><p class="simpara">
							The drawback of this mode is that it is not suitable for heavy workloads and if TCP throughput or ordered packet delivery is essential.
						</p></dd><dt><span class="term">Active-backup (Mode 1)</span></dt><dd><p class="simpara">
							<code class="literal">Active-backup</code> uses the policy that determines that only one port is active in the bond. This mode provides fault tolerance and does not require any switch configuration.
						</p><p class="simpara">
							If the active port fails, an alternate port becomes active. The bond sends a gratuitous address resolution protocol (ARP) response to the network. The gratuitous ARP forces the receiver of the ARP frame to update their forwarding table. The <code class="literal">Active-backup</code> mode transmits a gratuitous ARP to announce the new path to maintain connectivity for the host.
						</p><p class="simpara">
							The <code class="literal">primary</code> option defines the preferred port of the bonding interface.
						</p></dd><dt><span class="term">Balance-xor (Mode 2)</span></dt><dd><p class="simpara">
							<code class="literal">Balance-xor</code> uses the selected transmit hash policy to send the packets. This mode provides load balancing, fault tolerance, and requires switch configuration to set up an Etherchannel or similar port grouping.
						</p><p class="simpara">
							To alter packet transmission and balance transmit, this mode uses the <code class="literal">xmit_hash_policy</code> option. Depending on the source or destination of traffic on the interface, the interface requires an additional load-balancing configuration. See description <a class="link" href="#ref_xmit-hash-policy-bonding-parameter_configuring-network-bonding" title="3.11. The xmit_hash_policy bonding parameter">xmit_hash_policy bonding parameter</a>.
						</p></dd><dt><span class="term">Broadcast (Mode 3)</span></dt><dd><p class="simpara">
							<code class="literal">Broadcast</code> uses a policy that transmits every packet on all interfaces. This mode provides fault tolerance and requires a switch configuration to set up an EtherChannel or similar port grouping.
						</p><p class="simpara">
							The drawback of this mode is that it is not suitable for heavy workloads and if TCP throughput or ordered packet delivery is essential.
						</p></dd><dt><span class="term">802.3ad (Mode 4)</span></dt><dd><p class="simpara">
							<code class="literal">802.3ad</code> uses the same-named IEEE standard dynamic link aggregation policy. This mode provides fault tolerance. This mode requires switch configuration to set up a Link Aggregation Control Protocol (LACP) port grouping.
						</p><p class="simpara">
							This mode creates aggregation groups that share the same speed and duplex settings and utilizes all ports in the active aggregator. Depending on the source or destination of traffic on the interface, this mode requires an additional load-balancing configuration.
						</p><p class="simpara">
							By default, the port selection for outgoing traffic depends on the transmit hash policy. Use the <code class="literal">xmit_hash_policy</code> option of the transmit hash policy to change the port selection and balance transmit.
						</p><p class="simpara">
							The difference between the <code class="literal">802.3ad</code> and the <code class="literal">Balance-xor</code> is compliance. The <code class="literal">802.3ad</code> policy negotiates LACP between the port aggregation groups. See description <a class="link" href="#ref_xmit-hash-policy-bonding-parameter_configuring-network-bonding" title="3.11. The xmit_hash_policy bonding parameter">xmit_hash_policy bonding parameter</a>
						</p></dd><dt><span class="term">Balance-tlb (Mode 5)</span></dt><dd><p class="simpara">
							<code class="literal">Balance-tlb</code> uses the transmit load balancing policy. This mode provides fault tolerance, load balancing, and establishes channel bonding that does not require any switch support.
						</p><p class="simpara">
							The active port receives the incoming traffic. In case of failure of the active port, another one takes over the MAC address of the failed port. To decide which interface processes the outgoing traffic, use one of the following modes:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Value <code class="literal">0</code>: Uses the hash distribution policy to distribute traffic without load balancing
								</li><li class="listitem"><p class="simpara">
									Value <code class="literal">1</code>: Distributes traffic to each port by using load balancing
								</p><p class="simpara">
									With the bonding option <code class="literal">tlb_dynamic_lb=0</code>, this bonding mode uses the <code class="literal">xmit_hash_policy</code> bonding option to balance transmit. The <code class="literal">primary</code> option defines the preferred port of the bonding interface.
								</p></li></ul></div><p class="simpara">
							See description <a class="link" href="#ref_xmit-hash-policy-bonding-parameter_configuring-network-bonding" title="3.11. The xmit_hash_policy bonding parameter">xmit_hash_policy bonding parameter</a>.
						</p></dd><dt><span class="term">Balance-alb (Mode 6)</span></dt><dd><p class="simpara">
							<code class="literal">Balance-alb</code> uses an adaptive load balancing policy. This mode provides fault tolerance, load balancing, and does not require any special switch support.
						</p><p class="simpara">
							This mode includes balance-transmit load balancing (<code class="literal">balance-tlb</code>) and receive-load balancing for IPv4 and IPv6 traffic. The bonding intercepts ARP replies sent by the local system and overwrites the source hardware address of one of the ports in the bond. ARP negotiation manages the receive-load balancing. Therefore, different ports use different hardware addresses for the server.
						</p><p class="simpara">
							The <code class="literal">primary</code> option defines the preferred port of the bonding interface. With the bonding option <code class="literal">tlb_dynamic_lb=0</code>, this bonding mode uses the <code class="literal">xmit_hash_policy</code> bonding option to balance transmit. See description <a class="link" href="#ref_xmit-hash-policy-bonding-parameter_configuring-network-bonding" title="3.11. The xmit_hash_policy bonding parameter">xmit_hash_policy bonding parameter</a>.
						</p></dd></dl></div><p>
				Additionally, you can use NetworkManager to configure the following mode:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Balance-slb</span></dt><dd><p class="simpara">
							The source load balancing (SLB) bonding mode distributes outgoing data streams across multiple network interfaces based on the source address of the traffic and a VLAN hash. This mode does not require any switch configuration.
						</p><p class="simpara">
							NetworkManager uses the <code class="literal">balance-xor</code> mode in combination with <code class="literal">nftables</code> rules to provide SLB. For details about configuring this mode, see <a class="link" href="https://access.redhat.com/solutions/7094905">Configuring a network bond on RHEL with source load balancing</a>.
						</p></dd></dl></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/doc/kernel-doc-&lt;<span class="emphasis"><em>version</em></span>&gt;/Documentation/networking/bonding.rst</code> provided by the <code class="literal">kernel-doc</code> package
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/kernel-doc-&lt;<span class="emphasis"><em>version</em></span>&gt;/Documentation/networking/bonding.txt</code> provided by the <code class="literal">kernel-doc</code> package
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/67546">Which bonding modes work when used with a bridge that virtual machine guests or containers connect to?</a> (Red Hat Knowledgebase)
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/71883">How are the values for different policies in "xmit_hash_policy" bonding parameter calculated?</a> (Red Hat Knowledgebase)
					</li></ul></div></section><section class="section" id="ref_xmit-hash-policy-bonding-parameter_configuring-network-bonding"><div class="titlepage"><div><div><h3 class="title">3.11. The xmit_hash_policy bonding parameter</h3></div></div></div><p>
				The <code class="literal">xmit_hash_policy</code> load balancing parameter selects the transmit hash policy for a node selection in the <code class="literal">balance-xor</code>, <code class="literal">802.3ad</code>, <code class="literal">balance-alb</code>, and <code class="literal">balance-tlb</code> modes. It is only applicable to mode 5 and 6 if the <code class="literal">tlb_dynamic_lb parameter is 0</code>. The possible values of this parameter are <code class="literal">layer2</code>, <code class="literal">layer2+3</code>, <code class="literal">layer3+4</code>, <code class="literal">encap2+3</code>, <code class="literal">encap3+4</code>, and <code class="literal">vlan+srcmac</code>.
			</p><p>
				Refer the table for details:
			</p><rh-table><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 14%; " class="col_1"><!--Empty--><col style="width: 14%; " class="col_2"><!--Empty--><col style="width: 14%; " class="col_3"><!--Empty--><col style="width: 14%; " class="col_4"><!--Empty--><col style="width: 14%; " class="col_5"><!--Empty--><col style="width: 14%; " class="col_6"><!--Empty--><col style="width: 14%; " class="col_7"><!--Empty--></colgroup><tbody><tr><td align="left" valign="top"> <p>
								<span class="strong strong"><strong>Policy or Network layers</strong></span>
							</p>
							 </td><td align="left" valign="top"> <p>
								<span class="strong strong"><strong>Layer2</strong></span>
							</p>
							 </td><td align="left" valign="top"> <p>
								<span class="strong strong"><strong>Layer2+3</strong></span>
							</p>
							 </td><td align="left" valign="top"> <p>
								<span class="strong strong"><strong>Layer3+4</strong></span>
							</p>
							 </td><td align="left" valign="top"> <p>
								<span class="strong strong"><strong>encap2+3</strong></span>
							</p>
							 </td><td align="left" valign="top"> <p>
								<span class="strong strong"><strong>encap3+4</strong></span>
							</p>
							 </td><td align="left" valign="top"> <p>
								<span class="strong strong"><strong>VLAN+srcmac</strong></span>
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<span class="strong strong"><strong>Uses</strong></span>
							</p>
							 </td><td align="left" valign="top"> <p>
								XOR of source and destination MAC addresses and Ethernet protocol type
							</p>
							 </td><td align="left" valign="top"> <p>
								XOR of source and destination MAC addresses and IP addresses
							</p>
							 </td><td align="left" valign="top"> <p>
								XOR of source and destination ports and IP addresses
							</p>
							 </td><td align="left" valign="top"> <p>
								XOR of source and destination MAC addresses and IP addresses inside a supported tunnel, for example, Virtual Extensible LAN (VXLAN). This mode relies on <code class="literal">skb_flow_dissect()</code> function to obtain the header fields
							</p>
							 </td><td align="left" valign="top"> <p>
								XOR of source and destination ports and IP addresses inside a supported tunnel, for example, VXLAN. This mode relies on <code class="literal">skb_flow_dissect()</code> function to obtain the header fields
							</p>
							 </td><td align="left" valign="top"> <p>
								XOR of VLAN ID and source MAC vendor and source MAC device
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<span class="strong strong"><strong>Placement of traffic</strong></span>
							</p>
							 </td><td align="left" valign="top"> <p>
								All traffic to a particular network peer on the same underlying network interface
							</p>
							 </td><td align="left" valign="top"> <p>
								All traffic to a particular IP address on the same underlying network interface
							</p>
							 </td><td align="left" valign="top"> <p>
								All traffic to a particular IP address and port on the same underlying network interface
							</p>
							 </td><td align="left" valign="top"> </td><td align="left" valign="top"> </td><td align="left" valign="top"> </td></tr><tr><td align="left" valign="top"> <p>
								<span class="strong strong"><strong>Primary choice</strong></span>
							</p>
							 </td><td align="left" valign="top"> <p>
								If network traffic is between this system and multiple other systems in the same broadcast domain
							</p>
							 </td><td align="left" valign="top"> <p>
								If network traffic between this system and multiple other systems goes through a default gateway
							</p>
							 </td><td align="left" valign="top"> <p>
								If network traffic between this system and another system uses the same IP addresses but goes through multiple ports
							</p>
							 </td><td align="left" valign="top"> <p>
								The encapsulated traffic is between the source system and multiple other systems using multiple IP addresses
							</p>
							 </td><td align="left" valign="top"> <p>
								The encapsulated traffic is between the source system and other systems using multiple port numbers
							</p>
							 </td><td align="left" valign="top"> <p>
								If the bond carries network traffic, from multiple containers or virtual machines (VM), that expose their MAC address directly to the external network such as the bridge network, and you can not configure a switch for Mode 2 or Mode 4
							</p>
							 </td></tr><tr><td align="left" valign="top"> <p>
								<span class="strong strong"><strong>Secondary choice</strong></span>
							</p>
							 </td><td align="left" valign="top"> <p>
								If network traffic is mostly between this system and multiple other systems behind a default gateway
							</p>
							 </td><td align="left" valign="top"> <p>
								If network traffic is mostly between this system and another system
							</p>
							 </td><td align="left" valign="top"> </td><td align="left" valign="top"> </td><td align="left" valign="top"> </td><td align="left" valign="top"> </td></tr><tr><td align="left" valign="top"> <p>
								<span class="strong strong"><strong>Compliant</strong></span>
							</p>
							 </td><td align="left" valign="top"> <p>
								802.3ad
							</p>
							 </td><td align="left" valign="top"> <p>
								802.3ad
							</p>
							 </td><td align="left" valign="top"> <p>
								Not 802.3ad
							</p>
							 </td><td align="left" valign="top"> </td><td align="left" valign="top"> </td><td align="left" valign="top"> </td></tr><tr><td align="left" valign="top"> <p>
								<span class="strong strong"><strong>Default policy</strong></span>
							</p>
							 </td><td align="left" valign="top"> <p>
								This is the default policy if no configuration is provided
							</p>
							 </td><td align="left" valign="top"> <p>
								For non-IP traffic, the formula is the same as for the <code class="literal">layer2</code> transmit policy
							</p>
							 </td><td align="left" valign="top"> <p>
								For non-IP traffic, the formula is the same as for the <code class="literal">layer2</code> transmit policy
							</p>
							 </td><td align="left" valign="top"> </td><td align="left" valign="top"> </td><td align="left" valign="top"> </td></tr></tbody></table></rh-table></section></section><section class="chapter" id="configuring-network-teaming_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 4. Configuring a NIC team</h2></div></div></div><p class="_abstract _abstract">
			Network interface controller (NIC) teaming is a method to combine or aggregate physical and virtual network interfaces to provide a logical interface with higher throughput or redundancy. NIC teaming uses a small kernel module to implement fast handling of packet flows and a user-space service for other tasks. This way, NIC teaming is an easily extensible and scalable solution for load-balancing and redundancy requirements.
		</p><p>
			Red Hat Enterprise Linux provides administrators different options to configure team devices. For example:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Use <code class="literal">nmcli</code> to configure teams connections using the command line.
				</li><li class="listitem">
					Use the RHEL web console to configure team connections using a web browser.
				</li><li class="listitem">
					Use the <code class="literal">nm-connection-editor</code> application to configure team connections in a graphical interface.
				</li></ul></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
				NIC teaming is deprecated in Red Hat Enterprise Linux 9. Consider using the network bonding driver as an alternative. For details, see <a class="link" href="#configuring-network-bonding_configuring-and-managing-networking" title="Chapter 3. Configuring a network bond">Configuring a network bond</a>.
			</p></div></rh-alert><section class="section" id="proc_migrating-a-network-team-configuration-to-network-bond_configuring-network-teaming"><div class="titlepage"><div><div><h3 class="title">4.1. Migrating a NIC team configuration to network bond</h3></div></div></div><p class="_abstract _abstract">
				Network interface controller (NIC) teaming is deprecated in Red Hat Enterprise Linux 9. If you already have a working NIC team configured, for example because you upgraded from an earlier RHEL version, you can migrate the configuration to a network bond that is managed by NetworkManager.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					The <code class="literal">team2bond</code> utility only converts the team configuration to a bond. Afterwards, you must manually configure further settings of the bond, such as IP addresses and DNS configuration.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">team-team0</code> NetworkManager connection profile is configured and manages the <code class="literal">team0</code> device.
					</li><li class="listitem">
						The <code class="literal">teamd</code> package is installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: Display the IP configuration of the <code class="literal">team-team0</code> NetworkManager connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection show <span class="emphasis"><em>team-team0</em></span> | egrep "^ip"</strong></span>
...
ipv4.method:                            manual
ipv4.dns:                               192.0.2.253
ipv4.dns-search:                        example.com
ipv4.addresses:                         192.0.2.1/24
ipv4.gateway:                           192.0.2.254
...
ipv6.method:                            manual
ipv6.dns:                               2001:db8:1::fffd
ipv6.dns-search:                        example.com
ipv6.addresses:                         2001:db8:1::1/64
ipv6.gateway:                           2001:db8:1::fffe
...</pre></li><li class="listitem"><p class="simpara">
						Export the configuration of the <code class="literal">team0</code> device to a JSON file:
					</p><pre class="literallayout"># <span class="strong strong"><strong>teamdctl <span class="emphasis"><em>team0</em></span> config dump actual &gt; <span class="emphasis"><em>/tmp/team0.json</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Remove the NIC team. For example, if you configured the team in NetworkManager, remove the <code class="literal">team-team0</code> connection profile and the profiles of associated ports:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection delete <span class="emphasis"><em>team-team0</em></span></strong></span>
# <span class="strong strong"><strong>nmcli connection delete <span class="emphasis"><em>team-team0-port1</em></span></strong></span>
# <span class="strong strong"><strong>nmcli connection delete <span class="emphasis"><em>team-team0-port2</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Run the <code class="literal">team2bond</code> utility in dry-run mode to display <code class="literal">nmcli</code> commands that set up a network bond with similar settings as the team device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>team2bond --config=<span class="emphasis"><em>/tmp/team0.json</em></span> --rename=<span class="emphasis"><em>bond0</em></span></strong></span>
nmcli con add type bond ifname <span class="emphasis"><em>bond0</em></span> bond.options "<span class="emphasis"><em>mode=active-backup,num_grat_arp=1,num_unsol_na=1,resend_igmp=1,miimon=100,miimon=100</em></span>"
nmcli con add type ethernet ifname <span class="emphasis"><em>enp7s0</em></span> controller <span class="emphasis"><em>bond0</em></span>
nmcli con add type ethernet ifname <span class="emphasis"><em>enp8s0</em></span> controller <span class="emphasis"><em>bond0</em></span></pre><p class="simpara">
						The first command contains two <code class="literal">miimon</code> options because the team configuration file contained two <code class="literal">link_watch</code> entries. Note that this does not affect the creation of the bond.
					</p><p class="simpara">
						If you bound services to the device name of the team and want to avoid updating or breaking these services, omit the <code class="literal">--rename=bond0</code> option. In this case, <code class="literal">team2bond</code> uses the same interface name for the bond as for the team.
					</p></li><li class="listitem">
						Verify that the options for the bond the <code class="literal">team2bond</code> utility suggested are correct.
					</li><li class="listitem"><p class="simpara">
						Create the bond. You can execute the suggested <code class="literal">nmcli</code> commands or re-run the <code class="literal">team2bond</code> command with the <code class="literal">--exec-cmd</code> option:
					</p><pre class="literallayout"># <span class="strong strong"><strong>team2bond --config=<span class="emphasis"><em>/tmp/team0.json</em></span> --rename=<span class="emphasis"><em>bond0</em></span> --exec-cmd</strong></span>
Connection '<span class="strong strong"><strong><span class="emphasis"><em>bond-bond0</em></span></strong></span>' (<span class="emphasis"><em>0241a531-0c72-4202-80df-73eadfc126b5</em></span>) successfully added.
Connection '<span class="emphasis"><em>bond-port-enp7s0</em></span>' (<span class="emphasis"><em>38489729-b624-4606-a784-1ccf01e2f6d6</em></span>) successfully added.
Connection '<span class="emphasis"><em>bond-port-enp8s0</em></span>' (<span class="emphasis"><em>de97ec06-7daa-4298-9a71-9d4c7909daa1</em></span>) successfully added.</pre><p class="simpara">
						You require the name of the bond connection profile (<code class="literal">bond-bond0</code>) in the next steps.
					</p></li><li class="listitem"><p class="simpara">
						Set the IPv4 settings that were previously configured on <code class="literal">team-team0</code> to the <code class="literal">bond-bond0</code> connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bond-bond0 ipv4.addresses '<span class="emphasis"><em>192.0.2.1/24</em></span>'</strong></span>
# <span class="strong strong"><strong>nmcli connection modify bond-bond0 ipv4.gateway '<span class="emphasis"><em>192.0.2.254</em></span>'</strong></span>
# <span class="strong strong"><strong>nmcli connection modify bond-bond0 ipv4.dns '<span class="emphasis"><em>192.0.2.253</em></span>'</strong></span>
# <span class="strong strong"><strong>nmcli connection modify bond-bond0 ipv4.dns-search '<span class="emphasis"><em>example.com</em></span>'</strong></span>
# <span class="strong strong"><strong>nmcli connection modify bond-bond0 ipv4.method <span class="emphasis"><em>manual</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Set the IPv6 settings that were previously configured on <code class="literal">team-team0</code> to the <code class="literal">bond-bond0</code> connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bond-bond0 ipv6.addresses '<span class="emphasis"><em>2001:db8:1::1/64</em></span>'</strong></span>
# <span class="strong strong"><strong>nmcli connection modify bond-bond0 ipv6.gateway '<span class="emphasis"><em>2001:db8:1::fffe</em></span>'</strong></span>
# <span class="strong strong"><strong>nmcli connection modify bond-bond0 ipv6.dns '<span class="emphasis"><em>2001:db8:1::fffd</em></span>'</strong></span>
# <span class="strong strong"><strong>nmcli connection modify bond-bond0 ipv6.dns-search '<span class="emphasis"><em>example.com</em></span>'</strong></span>
# <span class="strong strong"><strong>nmcli connection modify bond-bond0 ipv6.method <span class="emphasis"><em>manual</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Activate the connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>bond-bond0</em></span></strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the IP configuration of the <code class="literal">bond-bond0</code> NetworkManager connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection show <span class="emphasis"><em>bond-bond0</em></span> | egrep "^ip"</strong></span>
...
ipv4.method:                            manual
ipv4.dns:                               192.0.2.253
ipv4.dns-search:                        example.com
ipv4.addresses:                         192.0.2.1/24
ipv4.gateway:                           192.0.2.254
...
ipv6.method:                            manual
ipv6.dns:                               2001:db8:1::fffd
ipv6.dns-search:                        example.com
ipv6.addresses:                         2001:db8:1::1/64
ipv6.gateway:                           2001:db8:1::fffe
...</pre></li><li class="listitem"><p class="simpara">
						Display the status of the bond:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /proc/net/bonding/bond0</strong></span>
Ethernet Channel Bonding Driver: v5.13.0-0.rc7.51.el9.x86_64

Bonding Mode: fault-tolerance (active-backup)
Primary Slave: None
Currently Active Slave: enp7s0
MII Status: up
MII Polling Interval (ms): 100
Up Delay (ms): 0
Down Delay (ms): 0
Peer Notification Delay (ms): 0

Slave Interface: enp7s0
MII Status: up
Speed: Unknown
Duplex: Unknown
Link Failure Count: 0
Permanent HW addr: 52:54:00:bf:b1:a9
Slave queue ID: 0

Slave Interface: enp8s0
MII Status: up
Speed: Unknown
Duplex: Unknown
Link Failure Count: 0
Permanent HW addr: 52:54:00:04:36:0f
Slave queue ID: 0</pre><p class="simpara">
						In this example, both ports are up.
					</p></li><li class="listitem"><p class="simpara">
						To verify that bonding failover works:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Temporarily remove the network cable from the host. Note that there is no method to properly test link failure events using the command line.
							</li><li class="listitem"><p class="simpara">
								Display the status of the bond:
							</p><pre class="literallayout"># <span class="strong strong"><strong>cat /proc/net/bonding/<span class="emphasis"><em>bond0</em></span></strong></span></pre></li></ol></div></li></ol></div></section><section class="section" id="understanding-the-default-behavior-of-controller-and-port-interfaces_configuring-network-teaming"><div class="titlepage"><div><div><h3 class="title">4.2. Understanding the default behavior of controller and port interfaces</h3></div></div></div><p class="_abstract _abstract">
				Consider the following default behavior when managing or troubleshooting team or bond port interfaces using the <code class="literal">NetworkManager</code> service:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Starting the controller interface does not automatically start the port interfaces.
					</li><li class="listitem">
						Starting a port interface always starts the controller interface.
					</li><li class="listitem">
						Stopping the controller interface also stops the port interface.
					</li><li class="listitem">
						A controller without ports can start static IP connections.
					</li><li class="listitem">
						A controller without ports waits for ports when starting DHCP connections.
					</li><li class="listitem">
						A controller with a DHCP connection waiting for ports completes when you add a port with a carrier.
					</li><li class="listitem">
						A controller with a DHCP connection waiting for ports continues waiting when you add a port without carrier.
					</li></ul></div></section><section class="section" id="understanding-the-teamd-service-runners-and-link-watchers_configuring-network-teaming"><div class="titlepage"><div><div><h3 class="title">4.3. Understanding the teamd service, runners, and link-watchers</h3></div></div></div><p class="_abstract _abstract">
				The team service, <code class="literal">teamd</code>, controls one instance of the team driver. This instance of the driver adds instances of a hardware device driver to form a team of network interfaces. The team driver presents a network interface, for example <code class="literal">team0</code>, to the kernel.
			</p><p>
				The <code class="literal">teamd</code> service implements the common logic to all methods of teaming. Those functions are unique to the different load sharing and backup methods, such as round-robin, and implemented by separate units of code referred to as <code class="literal">runners</code>. Administrators specify runners in JavaScript Object Notation (JSON) format, and the JSON code is compiled into an instance of <code class="literal">teamd</code> when the instance is created. Alternatively, when using <code class="literal">NetworkManager</code>, you can set the runner in the <code class="literal">team.runner</code> parameter, and <code class="literal">NetworkManager</code> auto-creates the corresponding JSON code.
			</p><p>
				The following runners are available:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">broadcast</code>: Transmits data over all ports.
					</li><li class="listitem">
						<code class="literal">roundrobin</code>: Transmits data over all ports in turn.
					</li><li class="listitem">
						<code class="literal">activebackup</code>: Transmits data over one port while the others are kept as a backup.
					</li><li class="listitem">
						<code class="literal">loadbalance</code>: Transmits data over all ports with active Tx load balancing and Berkeley Packet Filter (BPF)-based Tx port selectors.
					</li><li class="listitem">
						<code class="literal">random</code>: Transmits data on a randomly selected port.
					</li><li class="listitem">
						<code class="literal">lacp</code>: Implements the 802.3ad Link Aggregation Control Protocol (LACP).
					</li></ul></div><p>
				The <code class="literal">teamd</code> services uses a link watcher to monitor the state of subordinate devices. The following link-watchers are available:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">ethtool</code>: The <code class="literal">libteam</code> library uses the <code class="literal">ethtool</code> utility to watch for link state changes. This is the default link-watcher.
					</li><li class="listitem">
						<code class="literal">arp_ping</code>: The <code class="literal">libteam</code> library uses the <code class="literal">arp_ping</code> utility to monitor the presence of a far-end hardware address using Address Resolution Protocol (ARP).
					</li><li class="listitem">
						<code class="literal">nsna_ping</code>: On IPv6 connections, the <code class="literal">libteam</code> library uses the Neighbor Advertisement and Neighbor Solicitation features from the IPv6 Neighbor Discovery protocol to monitor the presence of a neighbor’s interface.
					</li></ul></div><p>
				Each runner can use any link watcher, with the exception of <code class="literal">lacp</code>. This runner can only use the <code class="literal">ethtool</code> link watcher.
			</p></section><section class="section" id="configuring-a-network-team-by-using-nmcli_configuring-network-teaming"><div class="titlepage"><div><div><h3 class="title">4.4. Configuring a NIC team by using <code class="literal">nmcli</code></h3></div></div></div><p class="_abstract _abstract">
				To configure a network interface controller (NIC) team on the command line, use the <code class="literal">nmcli</code> utility.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					NIC teaming is deprecated in Red Hat Enterprise Linux 9. Consider using the network bonding driver as an alternative. For details, see <a class="link" href="#configuring-network-bonding_configuring-and-managing-networking" title="Chapter 3. Configuring a network bond">Configuring a network bond</a>.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">teamd</code> and <code class="literal">NetworkManager-team</code> packages are installed.
					</li><li class="listitem">
						Two or more physical or virtual network devices are installed on the server.
					</li><li class="listitem">
						To use Ethernet devices as ports of the team, the physical or virtual Ethernet devices must be installed on the server and connected to a switch.
					</li><li class="listitem"><p class="simpara">
						To use bond, bridge, or VLAN devices as ports of the team, you can either create these devices while you create the team or you can create them in advance as described in:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<a class="link" href="#configuring-a-network-bond-by-using-nmcli_configuring-network-bonding" title="3.3. Configuring a network bond by using nmcli">Configuring a network bond by using nmcli</a>
							</li><li class="listitem">
								<a class="link" href="#configuring-a-network-bridge-by-using-nmcli_configuring-a-network-bridge" title="6.1. Configuring a network bridge by using nmcli">Configuring a network bridge by using nmcli</a>
							</li><li class="listitem">
								<a class="link" href="#configuring-vlan-tagging-by-using-nmcli_configuring-vlan-tagging" title="5.1. Configuring VLAN tagging by using nmcli">Configuring VLAN tagging by using nmcli</a>
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a team interface:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type team con-name <span class="emphasis"><em>team0</em></span> ifname <span class="emphasis"><em>team0</em></span> team.runner <span class="emphasis"><em>activebackup</em></span></strong></span></pre><p class="simpara">
						This command creates a NIC team named <code class="literal">team0</code> that uses the <code class="literal">activebackup</code> runner.
					</p></li><li class="listitem"><p class="simpara">
						Optional: Set a link watcher. For example, to set the <code class="literal">ethtool</code> link watcher in the <code class="literal">team0</code> connection profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify team0 team.link-watchers "name=<span class="emphasis"><em>ethtool</em></span>"</strong></span></pre><p class="simpara">
						Link watchers support different parameters. To set parameters for a link watcher, specify them space-separated in the <code class="literal">name</code> property. Note that the name property must be surrounded by quotation marks. For example, to use the <code class="literal">ethtool</code> link watcher and set its <code class="literal">delay-up</code> parameter to <code class="literal">2500</code> milliseconds (2.5 seconds):
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify team0 team.link-watchers "name=<span class="emphasis"><em>ethtool</em></span> delay-up=<span class="emphasis"><em>2500</em></span>"</strong></span></pre><p class="simpara">
						To set multiple link watchers and each of them with specific parameters, the link watchers must be separated by a comma. The following example sets the <code class="literal">ethtool</code> link watcher with the <code class="literal">delay-up</code> parameter and the <code class="literal">arp_ping</code> link watcher with the <code class="literal">source-host</code> and <code class="literal">target-host</code> parameter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify team0 team.link-watchers "name=<span class="emphasis"><em>ethtool</em></span> delay-up=<span class="emphasis"><em>2</em></span>, name=<span class="emphasis"><em>arp_ping</em></span> source-host=<span class="emphasis"><em>192.0.2.1</em></span> target-host=<span class="emphasis"><em>192.0.2.2</em></span>"</strong></span></pre></li><li class="listitem"><p class="simpara">
						Display the network interfaces, and note the names of the interfaces you want to add to the team:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device status</strong></span>
DEVICE  TYPE      STATE         CONNECTION
enp7s0  ethernet  disconnected  --
enp8s0  ethernet  disconnected  --
bond0   bond      connected  bond0
bond1   bond      connected  bond1
...</pre><p class="simpara">
						In this example:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">enp7s0</code> and <code class="literal">enp8s0</code> are not configured. To use these devices as ports, add connection profiles in the next step. Note that you can only use Ethernet interfaces in a team that are not assigned to any connection.
							</li><li class="listitem">
								<code class="literal">bond0</code> and <code class="literal">bond1</code> have existing connection profiles. To use these devices as ports, modify their profiles in the next step.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Assign the port interfaces to the team:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								If the interfaces you want to assign to the team are not configured, create new connection profiles for them:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type ethernet port-type team con-name team0-port1 ifname enp7s0 controller team0</strong></span>
# <span class="strong strong"><strong>nmcli connection add type ethernet port--type team con-name team0-port2 ifname enp8s0 controller team0</strong></span></pre><p class="simpara">
								These commands create profiles for <code class="literal">enp7s0</code> and <code class="literal">enp8s0</code>, and add them to the <code class="literal">team0</code> connection.
							</p></li><li class="listitem"><p class="simpara">
								To assign an existing connection profile to the team:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
										Set the <code class="literal">controller</code> parameter of these connections to <code class="literal">team0</code>:
									</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>bond0</em></span> controller team0</strong></span>
# <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>bond1</em></span> controller team0</strong></span></pre><p class="simpara">
										These commands assign the existing connection profiles named <code class="literal">bond0</code> and <code class="literal">bond1</code> to the <code class="literal">team0</code> connection.
									</p></li><li class="listitem"><p class="simpara">
										Reactivate the connections:
									</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>bond0</em></span></strong></span>
# <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>bond1</em></span></strong></span></pre></li></ol></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Configure the IPv4 settings:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To use this team device as a port of other devices, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify team0 ipv4.method disabled</strong></span></pre></li><li class="listitem">
								To use DHCP, no action is required.
							</li><li class="listitem"><p class="simpara">
								To set a static IPv4 address, network mask, default gateway, and DNS server to the <code class="literal">team0</code> connection, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify team0 ipv4.addresses '<span class="emphasis"><em>192.0.2.1/24</em></span>' ipv4.gateway '<span class="emphasis"><em>192.0.2.254</em></span>' ipv4.dns '<span class="emphasis"><em>192.0.2.253</em></span>' ipv4.dns-search '<span class="emphasis"><em>example.com</em></span>' ipv4.method manual</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Configure the IPv6 settings:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To use this team device as a port of other devices, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify team0 ipv6.method disabled</strong></span></pre></li><li class="listitem">
								To use stateless address autoconfiguration (SLAAC), no action is required.
							</li><li class="listitem"><p class="simpara">
								To set a static IPv6 address, network mask, default gateway, and DNS server to the <code class="literal">team0</code> connection, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify team0 ipv6.addresses '<span class="emphasis"><em>2001:db8:1::1/64</em></span>' ipv6.gateway '<span class="emphasis"><em>2001:db8:1::fffe</em></span>' ipv6.dns '<span class="emphasis"><em>2001:db8:1::fffd</em></span>' ipv6.dns-search '<span class="emphasis"><em>example.com</em></span>' ipv6.method manual</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Activate the connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up team0</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Display the status of the team:
					</p><pre class="literallayout"># <span class="strong strong"><strong>teamdctl team0 state</strong></span>
setup:
  runner: activebackup
ports:
  enp7s0
    link watches:
      link summary: up
      instance[link_watch_0]:
        name: ethtool
        link: up
        down count: 0
  enp8s0
    link watches:
      link summary: up
      instance[link_watch_0]:
        name: ethtool
        link: up
        down count: 0
runner:
  active port: enp7s0</pre><p class="simpara">
						In this example, both ports are up.
					</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#proc_configuring-networkmanager-to-avoid-using-a-specific-profile-to-provide-a-default-gateway_managing-the-default-gateway-setting" title="25.8. Configuring NetworkManager to avoid using a specific profile to provide a default gateway">Configuring NetworkManager to avoid using a specific profile to provide a default gateway</a>
					</li><li class="listitem">
						<a class="link" href="#understanding-the-teamd-service-runners-and-link-watchers_configuring-network-teaming" title="4.3. Understanding the teamd service, runners, and link-watchers">Understanding the teamd service, runners, and link-watchers</a>
					</li><li class="listitem">
						<code class="literal">nm-settings(5)</code> and <code class="literal">teamd.conf(5)</code> man pages on your system
					</li></ul></div></section><section class="section" id="proc_configuring-a-network-team-by-using-the-rhel-web-console_configuring-network-teaming"><div class="titlepage"><div><div><h3 class="title">4.5. Configuring a NIC team by using the RHEL web console</h3></div></div></div><p>
				Use the RHEL web console to configure a network interface controller (NIC) team if you prefer to manage network settings using a web browser-based interface.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					NIC teaming is deprecated in Red Hat Enterprise Linux 9. Consider using the network bonding driver as an alternative. For details, see <a class="link" href="#configuring-network-bonding_configuring-and-managing-networking" title="Chapter 3. Configuring a network bond">Configuring a network bond</a>.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">teamd</code> and <code class="literal">NetworkManager-team</code> packages are installed.
					</li><li class="listitem">
						Two or more physical or virtual network devices are installed on the server.
					</li><li class="listitem">
						To use Ethernet devices as ports of the team, the physical or virtual Ethernet devices must be installed on the server and connected to a switch.
					</li><li class="listitem"><p class="simpara">
						To use bond, bridge, or VLAN devices as ports of the team, create them in advance as described in:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<a class="link" href="#proc_configuring-a-network-bond-by-using-the-rhel-web-console_configuring-network-bonding" title="3.4. Configuring a network bond by using the RHEL web console">Configuring a network bond by using the RHEL web console</a>
							</li><li class="listitem">
								<a class="link" href="#proc_configuring-a-network-bridge-by-using-the-rhel-web-console_configuring-a-network-bridge" title="6.2. Configuring a network bridge by using the RHEL web console">Configuring a network bridge by using the RHEL web console</a>
							</li><li class="listitem">
								<a class="link" href="#proc_configuring-vlan-tagging-by-using-the-rhel-web-console_configuring-vlan-tagging" title="5.3. Configuring VLAN tagging by using the RHEL web console">Configuring VLAN tagging by using the RHEL web console</a>
							</li></ul></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You have installed the RHEL 9 web console.
					</p><p class="simpara">
						For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Log in to the RHEL 9 web console.
					</p><p class="simpara">
						For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
					</p></li><li class="listitem">
						Select the <code class="literal">Networking</code> tab in the navigation on the left side of the screen.
					</li><li class="listitem">
						Click <span class="guibutton">Add team</span> in the <code class="literal">Interfaces</code> section.
					</li><li class="listitem">
						Enter the name of the team device you want to create.
					</li><li class="listitem">
						Select the interfaces that should be ports of the team.
					</li><li class="listitem"><p class="simpara">
						Select the runner of the team.
					</p><p class="simpara">
						If you select <code class="literal">Load balancing</code> or <code class="literal">802.3ad LACP</code>, the web console shows the additional field <code class="literal">Balancer</code>.
					</p></li><li class="listitem"><p class="simpara">
						Set the link watcher:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								If you select <code class="literal">Ethtool</code>, additionally, set a link up and link down delay.
							</li><li class="listitem">
								If you set <code class="literal">ARP ping</code> or <code class="literal">NSNA ping</code>, additionally, set a ping interval and ping target.
							</li></ul></div><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/40261fab9f753389526117eb22339366/team-settings.png" alt="team settings"></div></div></li><li class="listitem">
						Click <span class="guibutton">Apply</span>.
					</li><li class="listitem"><p class="simpara">
						By default, the team uses a dynamic IP address. If you want to set a static IP address:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Click the name of the team in the <code class="literal">Interfaces</code> section.
							</li><li class="listitem">
								Click <code class="literal">Edit</code> next to the protocol you want to configure.
							</li><li class="listitem">
								Select <code class="literal">Manual</code> next to <code class="literal">Addresses</code>, and enter the IP address, prefix, and default gateway.
							</li><li class="listitem">
								In the <code class="literal">DNS</code> section, click the <span class="guibutton">+</span> button, and enter the IP address of the DNS server. Repeat this step to set multiple DNS servers.
							</li><li class="listitem">
								In the <code class="literal">DNS search domains</code> section, click the <span class="guibutton">+</span> button, and enter the search domain.
							</li><li class="listitem"><p class="simpara">
								If the interface requires static routes, configure them in the <code class="literal">Routes</code> section.
							</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/7994cde2fafedf1c5a1436807dc34096/bond-team-bridge-vlan.ipv4.png" alt="bond team bridge vlan.ipv4"></div></div></li><li class="listitem">
								Click <span class="guibutton">Apply</span>
							</li></ol></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Select the <code class="literal">Networking</code> tab in the navigation on the left side of the screen, and check if there is incoming and outgoing traffic on the interface.
					</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/9d0d1abde2e82451bdadc815e6e9e8d8/team-verify.png" alt="team verify"></div></div></li><li class="listitem"><p class="simpara">
						Display the status of the team:
					</p><pre class="literallayout"># <span class="strong strong"><strong>teamdctl team0 state</strong></span>
setup:
  runner: activebackup
ports:
  enp7s0
    link watches:
      link summary: up
      instance[link_watch_0]:
        name: ethtool
        link: up
        down count: 0
  enp8s0
    link watches:
      link summary: up
      instance[link_watch_0]:
        name: ethtool
        link: up
        down count: 0
runner:
  active port: enp7s0</pre><p class="simpara">
						In this example, both ports are up.
					</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#understanding-the-teamd-service-runners-and-link-watchers_configuring-network-teaming" title="4.3. Understanding the teamd service, runners, and link-watchers">Understanding the teamd service, runners, and link-watchers</a>
					</li></ul></div></section><section class="section" id="configuring-a-network-team-by-using-nm-connection-editor_configuring-network-teaming"><div class="titlepage"><div><div><h3 class="title">4.6. Configuring a NIC team by using nm-connection-editor</h3></div></div></div><p class="_abstract _abstract">
				If you use Red Hat Enterprise Linux with a graphical interface, you can configure network interface controller (NIC) teams using the <code class="literal">nm-connection-editor</code> application.
			</p><p>
				Note that <code class="literal">nm-connection-editor</code> can add only new ports to a team. To use an existing connection profile as a port, create the team using the <code class="literal">nmcli</code> utility as described in <a class="link" href="#configuring-a-network-team-by-using-nmcli_configuring-network-teaming" title="4.4. Configuring a NIC team by using nmcli">Configuring a NIC team by using nmcli</a>.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					NIC teaming is deprecated in Red Hat Enterprise Linux 9. Consider using the network bonding driver as an alternative. For details, see <a class="link" href="#configuring-network-bonding_configuring-and-managing-networking" title="Chapter 3. Configuring a network bond">Configuring a network bond</a>.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">teamd</code> and <code class="literal">NetworkManager-team</code> packages are installed.
					</li><li class="listitem">
						Two or more physical or virtual network devices are installed on the server.
					</li><li class="listitem">
						To use Ethernet devices as ports of the team, the physical or virtual Ethernet devices must be installed on the server.
					</li><li class="listitem">
						To use team, bond, or VLAN devices as ports of the team, ensure that these devices are not already configured.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open a terminal, and enter <code class="literal">nm-connection-editor</code>:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>nm-connection-editor</strong></span></pre></li><li class="listitem">
						Click the <span class="guibutton">+</span> button to add a new connection.
					</li><li class="listitem">
						Select the <span class="strong strong"><strong>Team</strong></span> connection type, and click <span class="guibutton">Create</span>.
					</li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>Team</strong></span> tab:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Optional: Set the name of the team interface in the <span class="strong strong"><strong>Interface name</strong></span> field.
							</li><li class="listitem"><p class="simpara">
								Click the <span class="guibutton">Add</span> button to add a new connection profile for a network interface and adding the profile as a port to the team.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Select the connection type of the interface. For example, select <span class="strong strong"><strong>Ethernet</strong></span> for a wired connection.
									</li><li class="listitem">
										Optional: Set a connection name for the port.
									</li><li class="listitem">
										If you create a connection profile for an Ethernet device, open the <span class="strong strong"><strong>Ethernet</strong></span> tab, and select in the <span class="strong strong"><strong>Device</strong></span> field the network interface you want to add as a port to the team. If you selected a different device type, configure it accordingly. Note that you can only use Ethernet interfaces in a team that are not assigned to any connection.
									</li><li class="listitem">
										Click <span class="guibutton">Save</span>.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								Repeat the previous step for each interface you want to add to the team.
							</p><p class="simpara">
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/4b65ed717fe654b2b157a42b495db63a/add-nic-to-team-in-nm-connection-editor.png" alt="add nic to team in nm connection editor"></span>

							</p></li><li class="listitem"><p class="simpara">
								Click the <span class="guibutton">Advanced</span> button to set advanced options to the team connection.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										On the <span class="strong strong"><strong>Runner</strong></span> tab, select the runner.
									</li><li class="listitem">
										On the <span class="strong strong"><strong>Link Watcher</strong></span> tab, set the link watcher and its optional settings.
									</li><li class="listitem">
										Click <span class="guibutton">OK</span>.
									</li></ol></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Configure the IP address settings on both the <span class="strong strong"><strong>IPv4 Settings</strong></span> and <span class="strong strong"><strong>IPv6 Settings</strong></span> tabs:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								To use this bridge device as a port of other devices, set the <span class="strong strong"><strong>Method</strong></span> field to <span class="strong strong"><strong>Disabled</strong></span>.
							</li><li class="listitem">
								To use DHCP, leave the <span class="strong strong"><strong>Method</strong></span> field at its default, <span class="strong strong"><strong>Automatic (DHCP)</strong></span>.
							</li><li class="listitem"><p class="simpara">
								To use static IP settings, set the <span class="strong strong"><strong>Method</strong></span> field to <span class="strong strong"><strong>Manual</strong></span> and fill the fields accordingly:
							</p><p class="simpara">
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/ac14e59ffe03b911d613933c29b1a6c7/team-IP-settings-nm-connection-editor.png" alt="team IP settings nm connection editor"></span>

							</p></li></ul></div></li><li class="listitem">
						Click <span class="guibutton">Save</span>.
					</li><li class="listitem">
						Close <code class="literal">nm-connection-editor</code>.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Display the status of the team:
					</p><pre class="literallayout"># <span class="strong strong"><strong>teamdctl team0 state</strong></span>
setup:
  runner: activebackup
ports:
  enp7s0
    link watches:
      link summary: up
      instance[link_watch_0]:
        name: ethtool
        link: up
        down count: 0
  enp8s0
    link watches:
      link summary: up
      instance[link_watch_0]:
        name: ethtool
        link: up
        down count: 0
runner:
  active port: enp7s0</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#configuring-a-network-bond-by-using-nm-connection-editor_configuring-network-bonding" title="3.6. Configuring a network bond by using nm-connection-editor">Configuring a network bond by using nm-connection-editor</a>
					</li><li class="listitem">
						<a class="link" href="#configuring-a-network-bridge-by-using-nm-connection-editor_configuring-a-network-bridge" title="6.4. Configuring a network bridge by using nm-connection-editor">Configuring a NIC team by using nm-connection-editor</a>
					</li><li class="listitem">
						<a class="link" href="#configuring-vlan-tagging-by-using-nm-connection-editor_configuring-vlan-tagging" title="5.5. Configuring VLAN tagging by using nm-connection-editor">Configuring VLAN tagging by using nm-connection-editor</a>
					</li><li class="listitem">
						<a class="link" href="#proc_configuring-networkmanager-to-avoid-using-a-specific-profile-to-provide-a-default-gateway_managing-the-default-gateway-setting" title="25.8. Configuring NetworkManager to avoid using a specific profile to provide a default gateway">Configuring NetworkManager to avoid using a specific profile to provide a default gateway</a>
					</li><li class="listitem">
						<a class="link" href="#understanding-the-teamd-service-runners-and-link-watchers_configuring-network-teaming" title="4.3. Understanding the teamd service, runners, and link-watchers">Understanding the teamd service, runners, and link-watchers</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/3068421">NetworkManager duplicates a connection after restart of NetworkManager service</a> (Red Hat Knowledgebase)
					</li></ul></div></section></section><section class="chapter" id="configuring-vlan-tagging_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 5. Configuring VLAN tagging</h2></div></div></div><p class="_abstract _abstract">
			A Virtual Local Area Network (VLAN) is a logical network within a physical network. The VLAN interface tags packets with the VLAN ID as they pass through the interface, and removes tags of returning packets. You create VLAN interfaces on top of another interface, such as Ethernet, bond, team, or bridge devices. These interfaces are called the <code class="literal">parent interface</code>.
		</p><p>
			Red Hat Enterprise Linux provides administrators different options to configure VLAN devices. For example:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Use <code class="literal">nmcli</code> to configure VLAN tagging using the command line.
				</li><li class="listitem">
					Use the RHEL web console to configure VLAN tagging using a web browser.
				</li><li class="listitem">
					Use <code class="literal">nmtui</code> to configure VLAN tagging in a text-based user interface.
				</li><li class="listitem">
					Use the <code class="literal">nm-connection-editor</code> application to configure connections in a graphical interface.
				</li><li class="listitem">
					Use <code class="literal">nmstatectl</code> to configure connections through the Nmstate API.
				</li><li class="listitem">
					Use RHEL system roles to automate the VLAN configuration on one or multiple hosts.
				</li></ul></div><section class="section" id="configuring-vlan-tagging-by-using-nmcli_configuring-vlan-tagging"><div class="titlepage"><div><div><h3 class="title">5.1. Configuring VLAN tagging by using <code class="literal">nmcli</code></h3></div></div></div><p class="_abstract _abstract">
				You can configure Virtual Local Area Network (VLAN) tagging on the command line using the <code class="literal">nmcli</code> utility.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The interface you plan to use as a parent to the virtual VLAN interface supports VLAN tags.
					</li><li class="listitem"><p class="simpara">
						If you configure the VLAN on top of a bond interface:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The ports of the bond are up.
							</li><li class="listitem">
								The bond is not configured with the <code class="literal">fail_over_mac=follow</code> option. A VLAN virtual device cannot change its MAC address to match the parent’s new MAC address. In such a case, the traffic would still be sent with the incorrect source MAC address.
							</li><li class="listitem">
								The bond is usually not expected to get IP addresses from a DHCP server or IPv6 auto-configuration. Ensure it by setting the <code class="literal">ipv4.method=disable</code> and <code class="literal">ipv6.method=ignore</code> options while creating the bond. Otherwise, if DHCP or IPv6 auto-configuration fails after some time, the interface might be brought down.
							</li></ul></div></li><li class="listitem">
						The switch, the host is connected to, is configured to support VLAN tags. For details, see the documentation of your switch.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the network interfaces:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device status</strong></span>
DEVICE   TYPE      STATE         CONNECTION
enp1s0   ethernet  disconnected  enp1s0
bridge0  bridge    connected     bridge0
bond0    bond      connected     bond0
...</pre></li><li class="listitem"><p class="simpara">
						Create the VLAN interface. For example, to create a VLAN interface named <code class="literal">vlan10</code> that uses <code class="literal">enp1s0</code> as its parent interface and that tags packets with VLAN ID <code class="literal">10</code>, enter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type vlan con-name vlan10 ifname vlan10 vlan.parent enp1s0 vlan.id 10</strong></span></pre><p class="simpara">
						Note that the VLAN must be within the range from <code class="literal">0</code> to <code class="literal">4094</code>.
					</p></li><li class="listitem"><p class="simpara">
						By default, the VLAN connection inherits the maximum transmission unit (MTU) from the parent interface. Optionally, set a different MTU value:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify vlan10 ethernet.mtu 2000</strong></span></pre></li><li class="listitem"><p class="simpara">
						Configure the IPv4 settings:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To use this VLAN device as a port of other devices, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify vlan10 ipv4.method disabled</strong></span></pre></li><li class="listitem">
								To use DHCP, no action is required.
							</li><li class="listitem"><p class="simpara">
								To set a static IPv4 address, network mask, default gateway, and DNS server to the <code class="literal">vlan10</code> connection, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify vlan10 ipv4.addresses '192.0.2.1/24' ipv4.gateway '192.0.2.254' ipv4.dns '192.0.2.253' ipv4.method manual</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Configure the IPv6 settings:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To use this VLAN device as a port of other devices, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify vlan10 ipv6.method disabled</strong></span></pre></li><li class="listitem">
								To use stateless address autoconfiguration (SLAAC), no action is required.
							</li><li class="listitem"><p class="simpara">
								To set a static IPv6 address, network mask, default gateway, and DNS server to the <code class="literal">vlan10</code> connection, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify vlan10 ipv6.addresses '2001:db8:1::1/32' ipv6.gateway '2001:db8:1::fffe' ipv6.dns '2001:db8:1::fffd' ipv6.method manual</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Activate the connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up vlan10</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify the settings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -d addr show vlan10</strong></span>
4: vlan10@enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether 52:54:00:72:2f:6e brd ff:ff:ff:ff:ff:ff promiscuity 0
    vlan protocol 802.1Q id 10 &lt;REORDER_HDR&gt; numtxqueues 1 numrxqueues 1 gso_max_size 65536 gso_max_segs 65535
    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute vlan10
       valid_lft forever preferred_lft forever
    inet6 2001:db8:1::1/32 scope global noprefixroute
       valid_lft forever preferred_lft forever
    inet6 fe80::8dd7:9030:6f8e:89e6/64 scope link noprefixroute
       valid_lft forever preferred_lft forever</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nm-settings(5)</code> man page on your system
					</li></ul></div></section><section class="section" id="configuring-nested-vlans-using-nmcli-commands_configuring-vlan-tagging"><div class="titlepage"><div><div><h3 class="title">5.2. Configuring nested VLANs by using <code class="literal">nmcli</code></h3></div></div></div><p>
				802.1ad is a protocol used for Virtual Local Area Network (VLAN) tagging. It is also known as Q-in-Q tagging. You can use this technology to create multiple VLAN tags within a single Ethernet frame to achieve the following benefits:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Increased network scalability by creating multiple isolated network segments within a VLAN. This enables you to segment and organize large networks into smaller, manageable units.
					</li><li class="listitem">
						Improved traffic management by isolating and controlling different types of network traffic. This can improve the network performance and reduce network congestion.
					</li><li class="listitem">
						Efficient resource utilization by enabling the creation of smaller, more targeted network segments.
					</li><li class="listitem">
						Enhanced security by isolating network traffic and reducing the risk of unauthorized access to sensitive data.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The interface you plan to use as a parent to the virtual VLAN interface supports VLAN tags.
					</li><li class="listitem"><p class="simpara">
						If you configure the VLAN on top of a bond interface:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The ports of the bond are up.
							</li><li class="listitem">
								The bond is not configured with the <code class="literal">fail_over_mac=follow</code> option. A VLAN virtual device cannot change its MAC address to match the parent’s new MAC address. In such a case, the traffic would still be sent with the incorrect source MAC address.
							</li><li class="listitem">
								The bond is usually not expected to get IP addresses from a DHCP server or IPv6 auto-configuration. Ensure it by setting the <code class="literal">ipv4.method=disable</code> and <code class="literal">ipv6.method=ignore</code> options while creating the bond. Otherwise, if DHCP or IPv6 auto-configuration fails after some time, the interface might be brought down.
							</li></ul></div></li><li class="listitem">
						The switch, the host is connected to, is configured to support VLAN tags. For details, see the documentation of your switch.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the physical network devices:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device status</strong></span>
DEVICE   TYPE      STATE         CONNECTION
enp1s0  ethernet  connected      enp1s0
...</pre></li><li class="listitem"><p class="simpara">
						Create the base VLAN interface. For example, to create a base VLAN interface named <code class="literal">vlan10</code> that uses <code class="literal">enp1s0</code> as its parent interface and that tags packets with VLAN ID <code class="literal">10</code>, enter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type vlan con-name vlan10 dev enp1s0 vlan.id 10</strong></span></pre><p class="simpara">
						Note that the VLAN must be within the range from <code class="literal">0</code> to <code class="literal">4094</code>.
					</p></li><li class="listitem"><p class="simpara">
						By default, the VLAN connection inherits the maximum transmission unit (MTU) from the parent interface. Optionally, set a different MTU value:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify vlan10 ethernet.mtu 2000</strong></span></pre></li><li class="listitem"><p class="simpara">
						Create the nested VLAN interface on top of the base VLAN interface:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type vlan con-name vlan10.20 dev enp1s0.10 id 20 vlan.protocol 802.1ad</strong></span></pre><p class="simpara">
						This command creates a new VLAN connection with a name of <code class="literal">vlan10.20</code> and a VLAN ID of <code class="literal">20</code> on the parent VLAN connection <code class="literal">vlan10</code>. The <code class="literal">dev</code> option specifies the parent network device. In this case it is <code class="literal">enp1s0.10</code>. The <code class="literal">vlan.protocol</code> option specifies the VLAN encapsulation protocol. In this case it is <code class="literal">802.1ad</code> (Q-in-Q).
					</p></li><li class="listitem"><p class="simpara">
						Configure the IPv4 settings of the nested VLAN interface:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								To use DHCP, no action is required.
							</li><li class="listitem"><p class="simpara">
								To set a static IPv4 address, network mask, default gateway, and DNS server to the <code class="literal">vlan10.20</code> connection, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify vlan10.20 ipv4.method manual ipv4.addresses 192.0.2.1/24 ipv4.gateway 192.0.2.254 ipv4.dns 192.0.2.200</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Configure the IPv6 settings of the nested VLAN interface:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								To use stateless address autoconfiguration (SLAAC), no action is required.
							</li><li class="listitem"><p class="simpara">
								To set a static IPv4 address, network mask, default gateway, and DNS server to the vlan10 connection, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify vlan10 ipv4.addresses '192.0.2.1/24' ipv4.gateway '192.0.2.254' ipv4.dns '192.0.2.253' ipv4.method manual</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Activate the profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up vlan10.20</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify the configuration of the nested VLAN interface:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -d addr show enp1s0.10.20</strong></span>
10: enp1s0.10.20@enp1s0.10: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether 52:54:00:d2:74:3e brd ff:ff:ff:ff:ff:ff promiscuity 0 minmtu 0 maxmtu 65535
    vlan protocol 802.1ad id 20 &lt;REORDER_HDR&gt; numtxqueues 1 numrxqueues 1 gso_max_size 65536 gso_max_segs 65535 tso_max_size 65536 tso_max_segs 65535 gro_max_size 65536
    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute enp1s0.10.20
       valid_lft forever preferred_lft forever
    inet6 2001:db8:1::1/32 scope global noprefixroute
       valid_lft forever preferred_lft forever
    inet6 fe80::ce3b:84c5:9ef8:d0e6/64 scope link noprefixroute
       valid_lft forever preferred_lft forever</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nm-settings(5)</code> man page on your system
					</li></ul></div></section><section class="section" id="proc_configuring-vlan-tagging-by-using-the-rhel-web-console_configuring-vlan-tagging"><div class="titlepage"><div><div><h3 class="title">5.3. Configuring VLAN tagging by using the RHEL web console</h3></div></div></div><p>
				You can configure VLAN tagging if you prefer to manage network settings using a web browser-based interface in the RHEL web console.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The interface you plan to use as a parent to the virtual VLAN interface supports VLAN tags.
					</li><li class="listitem"><p class="simpara">
						If you configure the VLAN on top of a bond interface:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The ports of the bond are up.
							</li><li class="listitem">
								The bond is not configured with the <code class="literal">fail_over_mac=follow</code> option. A VLAN virtual device cannot change its MAC address to match the parent’s new MAC address. In such a case, the traffic would still be sent with the incorrect source MAC address.
							</li><li class="listitem">
								The bond is usually not expected to get IP addresses from a DHCP server or IPv6 auto-configuration. Ensure it by disabling the IPv4 and IPv6 protocol creating the bond. Otherwise, if DHCP or IPv6 auto-configuration fails after some time, the interface might be brought down.
							</li></ul></div></li><li class="listitem">
						The switch, the host is connected to, is configured to support VLAN tags. For details, see the documentation of your switch.
					</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You have installed the RHEL 9 web console.
					</p><p class="simpara">
						For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Log in to the RHEL 9 web console.
					</p><p class="simpara">
						For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
					</p></li><li class="listitem">
						Select the <code class="literal">Networking</code> tab in the navigation on the left side of the screen.
					</li><li class="listitem">
						Click <span class="guibutton">Add VLAN</span> in the <code class="literal">Interfaces</code> section.
					</li><li class="listitem">
						Select the parent device.
					</li><li class="listitem">
						Enter the VLAN ID.
					</li><li class="listitem"><p class="simpara">
						Enter the name of the VLAN device or keep the automatically-generated name.
					</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/801dda277f220b3c96bdcb152d1487ef/vlan-settings.png" alt="vlan settings"></div></div></li><li class="listitem">
						Click <span class="guibutton">Apply</span>.
					</li><li class="listitem"><p class="simpara">
						By default, the VLAN device uses a dynamic IP address. If you want to set a static IP address:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Click the name of the VLAN device in the <code class="literal">Interfaces</code> section.
							</li><li class="listitem">
								Click <code class="literal">Edit</code> next to the protocol you want to configure.
							</li><li class="listitem">
								Select <code class="literal">Manual</code> next to <code class="literal">Addresses</code>, and enter the IP address, prefix, and default gateway.
							</li><li class="listitem">
								In the <code class="literal">DNS</code> section, click the <span class="guibutton">+</span> button, and enter the IP address of the DNS server. Repeat this step to set multiple DNS servers.
							</li><li class="listitem">
								In the <code class="literal">DNS search domains</code> section, click the <span class="guibutton">+</span> button, and enter the search domain.
							</li><li class="listitem"><p class="simpara">
								If the interface requires static routes, configure them in the <code class="literal">Routes</code> section.
							</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/7994cde2fafedf1c5a1436807dc34096/bond-team-bridge-vlan.ipv4.png" alt="bond team bridge vlan.ipv4"></div></div></li><li class="listitem">
								Click <span class="guibutton">Apply</span>
							</li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Select the <code class="literal">Networking</code> tab in the navigation on the left side of the screen, and check if there is incoming and outgoing traffic on the interface:
					</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/85f426e0a5c782a8a6407d35d3d57bdc/vlan-verify.png" alt="vlan verify"></div></div></li></ul></div></section><section class="section" id="proc_configuring-vlan-tagging-by-using-nmtui_configuring-vlan-tagging"><div class="titlepage"><div><div><h3 class="title">5.4. Configuring VLAN tagging by using <code class="literal">nmtui</code></h3></div></div></div><p>
				The <code class="literal">nmtui</code> application provides a text-based user interface for NetworkManager. You can use <code class="literal">nmtui</code> to configure VLAN tagging on a host without a graphical interface.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					In <code class="literal">nmtui</code>:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Navigate by using the cursor keys.
						</li><li class="listitem">
							Press a button by selecting it and hitting <kbd class="keycap">Enter</kbd>.
						</li><li class="listitem">
							Select and clear checkboxes by using <kbd class="keycap">Space</kbd>.
						</li></ul></div></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The interface you plan to use as a parent to the virtual VLAN interface supports VLAN tags.
					</li><li class="listitem"><p class="simpara">
						If you configure the VLAN on top of a bond interface:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The ports of the bond are up.
							</li><li class="listitem">
								The bond is not configured with the <code class="literal">fail_over_mac=follow</code> option. A VLAN virtual device cannot change its MAC address to match the parent’s new MAC address. In such a case, the traffic would still be sent with the then incorrect source MAC address.
							</li><li class="listitem">
								The bond is usually not expected to get IP addresses from a DHCP server or IPv6 auto-configuration. Ensure it by setting the <code class="literal">ipv4.method=disable</code> and <code class="literal">ipv6.method=ignore</code> options while creating the bond. Otherwise, if DHCP or IPv6 auto-configuration fails after some time, the interface might be brought down.
							</li></ul></div></li><li class="listitem">
						The switch the host is connected to is configured to support VLAN tags. For details, see the documentation of your switch.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						If you do not know the network device name on which you want configure VLAN tagging, display the available devices:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device status</strong></span>
DEVICE     TYPE      STATE                   CONNECTION
enp1s0     ethernet  unavailable             --
...</pre></li><li class="listitem"><p class="simpara">
						Start <code class="literal">nmtui</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmtui</strong></span></pre></li><li class="listitem">
						Select <span class="strong strong"><strong>Edit a connection</strong></span>, and press <kbd class="keycap">Enter</kbd>.
					</li><li class="listitem">
						Press <span class="strong strong"><strong>Add</strong></span>.
					</li><li class="listitem">
						Select <span class="strong strong"><strong>VLAN</strong></span> from the list of network types, and press <kbd class="keycap">Enter</kbd>.
					</li><li class="listitem"><p class="simpara">
						Optional: Enter a name for the NetworkManager profile to be created.
					</p><p class="simpara">
						On hosts with multiple profiles, a meaningful name makes it easier to identify the purpose of a profile.
					</p></li><li class="listitem">
						Enter the VLAN device name to be created into the <span class="strong strong"><strong>Device</strong></span> field.
					</li><li class="listitem">
						Enter the name of the device on which you want to configure VLAN tagging into the <span class="strong strong"><strong>Parent</strong></span> field.
					</li><li class="listitem">
						Enter the VLAN ID. The ID must be within the range from <code class="literal">0</code> to <code class="literal">4094</code>.
					</li><li class="listitem"><p class="simpara">
						Depending on your environment, configure the IP address settings in the <span class="strong strong"><strong>IPv4 configuration</strong></span> and <span class="strong strong"><strong>IPv6 configuration</strong></span> areas accordingly. For this, press the button next to these areas, and select:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">Disabled</code>, if this VLAN device does not require an IP address or you want to use it as a port of other devices.
							</li><li class="listitem">
								<code class="literal">Automatic</code>, if a DHCP server or stateless address autoconfiguration (SLAAC) dynamically assigns an IP address to the VLAN device.
							</li><li class="listitem"><p class="simpara">
								<code class="literal">Manual</code>, if the network requires static IP address settings. In this case, you must fill further fields:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Press <span class="strong strong"><strong>Show</strong></span> next to the protocol you want to configure to display additional fields.
									</li><li class="listitem"><p class="simpara">
										Press <span class="strong strong"><strong>Add</strong></span> next to <span class="strong strong"><strong>Addresses</strong></span>, and enter the IP address and the subnet mask in Classless Inter-Domain Routing (CIDR) format.
									</p><p class="simpara">
										If you do not specify a subnet mask, NetworkManager sets a <code class="literal">/32</code> subnet mask for IPv4 addresses and <code class="literal">/64</code> for IPv6 addresses.
									</p></li><li class="listitem">
										Enter the address of the default gateway.
									</li><li class="listitem">
										Press <span class="strong strong"><strong>Add</strong></span> next to <span class="strong strong"><strong>DNS servers</strong></span>, and enter the DNS server address.
									</li><li class="listitem">
										Press <span class="strong strong"><strong>Add</strong></span> next to <span class="strong strong"><strong>Search domains</strong></span>, and enter the DNS search domain.
									</li></ol></div></li></ul></div><div class="figure" id="idm140053179751200"><p class="title"><strong>Figure 5.1. Example of a VLAN connection with static IP address settings</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/a5d4747d7ed76a4eb618b7543c4d871a/nmtui-vlan-static-IP.png" alt="nmtui vlan static IP"></div></div></div></li><li class="listitem">
						Press <span class="strong strong"><strong>OK</strong></span> to create and automatically activate the new connection.
					</li><li class="listitem">
						Press <span class="strong strong"><strong>Back</strong></span> to return to the main menu.
					</li><li class="listitem">
						Select <span class="strong strong"><strong>Quit</strong></span>, and press <kbd class="keycap">Enter</kbd> to close the <code class="literal">nmtui</code> application.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify the settings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -d addr show vlan10</strong></span>
4: vlan10@enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether 52:54:00:72:2f:6e brd ff:ff:ff:ff:ff:ff promiscuity 0
    vlan protocol 802.1Q id 10 &lt;REORDER_HDR&gt; numtxqueues 1 numrxqueues 1 gso_max_size 65536 gso_max_segs 65535
    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute vlan10
       valid_lft forever preferred_lft forever
    inet6 2001:db8:1::1/32 scope global noprefixroute
       valid_lft forever preferred_lft forever
    inet6 fe80::8dd7:9030:6f8e:89e6/64 scope link noprefixroute
       valid_lft forever preferred_lft forever</pre></li></ul></div></section><section class="section" id="configuring-vlan-tagging-by-using-nm-connection-editor_configuring-vlan-tagging"><div class="titlepage"><div><div><h3 class="title">5.5. Configuring VLAN tagging by using nm-connection-editor</h3></div></div></div><p class="_abstract _abstract">
				You can configure Virtual Local Area Network (VLAN) tagging in a graphical interface using the <code class="literal">nm-connection-editor</code> application.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The interface you plan to use as a parent to the virtual VLAN interface supports VLAN tags.
					</li><li class="listitem"><p class="simpara">
						If you configure the VLAN on top of a bond interface:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The ports of the bond are up.
							</li><li class="listitem">
								The bond is not configured with the <code class="literal">fail_over_mac=follow</code> option. A VLAN virtual device cannot change its MAC address to match the parent’s new MAC address. In such a case, the traffic would still be sent with the incorrect source MAC address.
							</li></ul></div></li><li class="listitem">
						The switch, the host is connected, to is configured to support VLAN tags. For details, see the documentation of your switch.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open a terminal, and enter <code class="literal">nm-connection-editor</code>:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>nm-connection-editor</strong></span></pre></li><li class="listitem">
						Click the <span class="guibutton">+</span> button to add a new connection.
					</li><li class="listitem">
						Select the <span class="strong strong"><strong>VLAN</strong></span> connection type, and click <span class="guibutton">Create</span>.
					</li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>VLAN</strong></span> tab:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Select the parent interface.
							</li><li class="listitem">
								Select the VLAN id. Note that the VLAN must be within the range from <span class="strong strong"><strong>0</strong></span> to <span class="strong strong"><strong>4094</strong></span>.
							</li><li class="listitem">
								By default, the VLAN connection inherits the maximum transmission unit (MTU) from the parent interface. Optionally, set a different MTU value.
							</li><li class="listitem"><p class="simpara">
								Optional: Set the name of the VLAN interface and further VLAN-specific options.
							</p><p class="simpara">
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/ff0007383bc91088754591692d73bded/vlan-settings-nm-connection-editor.png" alt="vlan settings nm connection editor"></span>

							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						Configure the IP address settings on both the <span class="strong strong"><strong>IPv4 Settings</strong></span> and <span class="strong strong"><strong>IPv6 Settings</strong></span> tabs:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								To use this bridge device as a port of other devices, set the <span class="strong strong"><strong>Method</strong></span> field to <span class="strong strong"><strong>Disabled</strong></span>.
							</li><li class="listitem">
								To use DHCP, leave the <span class="strong strong"><strong>Method</strong></span> field at its default, <span class="strong strong"><strong>Automatic (DHCP)</strong></span>.
							</li><li class="listitem"><p class="simpara">
								To use static IP settings, set the <span class="strong strong"><strong>Method</strong></span> field to <span class="strong strong"><strong>Manual</strong></span> and fill the fields accordingly:
							</p><p class="simpara">
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/ec7d0982317cda2a7be796749d21793f/vlan-IP-settings-nm-connection-editor.png" alt="vlan IP settings nm connection editor"></span>

							</p></li></ul></div></li><li class="listitem">
						Click <span class="guibutton">Save</span>.
					</li><li class="listitem">
						Close <code class="literal">nm-connection-editor</code>.
					</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify the settings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -d addr show <span class="emphasis"><em>vlan10</em></span></strong></span>
4: vlan10@enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether 52:54:00:d5:e0:fb brd ff:ff:ff:ff:ff:ff promiscuity 0
    vlan protocol 802.1Q id 10 &lt;REORDER_HDR&gt; numtxqueues 1 numrxqueues 1 gso_max_size 65536 gso_max_segs 65535
    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute vlan10
       valid_lft forever preferred_lft forever
    inet6 2001:db8:1::1/32 scope global noprefixroute
       valid_lft forever preferred_lft forever
    inet6 fe80::8dd7:9030:6f8e:89e6/64 scope link noprefixroute
       valid_lft forever preferred_lft forever</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#proc_configuring-networkmanager-to-avoid-using-a-specific-profile-to-provide-a-default-gateway_managing-the-default-gateway-setting" title="25.8. Configuring NetworkManager to avoid using a specific profile to provide a default gateway">Configuring NetworkManager to avoid using a specific profile to provide a default gateway</a>
					</li></ul></div></section><section class="section" id="proc_configuring-vlan-tagging-by-using-nmstatectl_configuring-vlan-tagging"><div class="titlepage"><div><div><h3 class="title">5.6. Configuring VLAN tagging by using <code class="literal">nmstatectl</code></h3></div></div></div><p class="_abstract _abstract">
				Use the <code class="literal">nmstatectl</code> utility to configure Virtual Local Area Network VLAN through the Nmstate API. The Nmstate API ensures that, after setting the configuration, the result matches the configuration file. If anything fails, <code class="literal">nmstatectl</code> automatically rolls back the changes to avoid leaving the system in an incorrect state.
			</p><p>
				Depending on your environment, adjust the YAML file accordingly. For example, to use different devices than Ethernet adapters in the VLAN, adapt the <code class="literal">base-iface</code> attribute and <code class="literal">type</code> attributes of the ports you use in the VLAN.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						To use Ethernet devices as ports in the VLAN, the physical or virtual Ethernet devices must be installed on the server.
					</li><li class="listitem">
						The <code class="literal">nmstate</code> package is installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a YAML file, for example <code class="literal">~/create-vlan.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
interfaces:
- name: vlan10
  type: vlan
  state: up
  ipv4:
    enabled: true
    address:
    - ip: 192.0.2.1
      prefix-length: 24
    dhcp: false
  ipv6:
    enabled: true
    address:
    - ip: 2001:db8:1::1
      prefix-length: 64
    autoconf: false
    dhcp: false
  vlan:
    base-iface: enp1s0
    id: 10
- name: enp1s0
  type: ethernet
  state: up

routes:
  config:
  - destination: 0.0.0.0/0
    next-hop-address: 192.0.2.254
    next-hop-interface: vlan10
  - destination: ::/0
    next-hop-address: 2001:db8:1::fffe
    next-hop-interface: vlan10

dns-resolver:
  config:
    search:
    - example.com
    server:
    - 192.0.2.200
    - 2001:db8:1::ffbb</pre><p class="simpara">
						These settings define a VLAN with ID 10 that uses the <code class="literal">enp1s0</code> device. As the child device, the VLAN connection has the following settings:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								A static IPv4 address - <code class="literal">192.0.2.1</code> with the <code class="literal">/24</code> subnet mask
							</li><li class="listitem">
								A static IPv6 address - <code class="literal">2001:db8:1::1</code> with the <code class="literal">/64</code> subnet mask
							</li><li class="listitem">
								An IPv4 default gateway - <code class="literal">192.0.2.254</code>
							</li><li class="listitem">
								An IPv6 default gateway - <code class="literal">2001:db8:1::fffe</code>
							</li><li class="listitem">
								An IPv4 DNS server - <code class="literal">192.0.2.200</code>
							</li><li class="listitem">
								An IPv6 DNS server - <code class="literal">2001:db8:1::ffbb</code>
							</li><li class="listitem">
								A DNS search domain - <code class="literal">example.com</code>
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Apply the settings to the system:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmstatectl apply ~/create-vlan.yml</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the status of the devices and connections:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device status</strong></span>
DEVICE      TYPE      STATE      CONNECTION
vlan10      vlan      <span class="strong strong"><strong>connected</strong></span>  vlan10</pre></li><li class="listitem"><p class="simpara">
						Display all settings of the connection profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection show vlan10</strong></span>
connection.id:              vlan10
connection.uuid:            1722970f-788e-4f81-bd7d-a86bf21c9df5
connection.stable-id:       --
connection.type:            vlan
connection.interface-name:  vlan10
...</pre></li><li class="listitem"><p class="simpara">
						Display the connection settings in YAML format:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmstatectl show vlan0</strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nmstatectl(8)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/nmstate/examples/</code> directory
					</li></ul></div></section><section class="section" id="configuring-vlan-tagging-by-using-the-network-rhel-system-role_configuring-vlan-tagging"><div class="titlepage"><div><div><h3 class="title">5.7. Configuring VLAN tagging by using the <code class="literal">network</code> RHEL system role</h3></div></div></div><p class="_abstract _abstract">
				If your network uses Virtual Local Area Networks (VLANs) to separate network traffic into logical networks, create a NetworkManager connection profile to configure VLAN tagging. By using Ansible and the <code class="literal">network</code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.
			</p><p>
				You can use the <code class="literal">network</code> RHEL system role to configure VLAN tagging and, if a connection profile for the VLAN’s parent device does not exists, the role can create it as well.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					If the VLAN device requires an IP address, default gateway, and DNS settings, configure them on the VLAN device and not on the parent device.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles">You have prepared the control node and the managed nodes</a>
					</li><li class="listitem">
						You are logged in to the control node as a user who can run playbooks on the managed nodes.
					</li><li class="listitem">
						The account you use to connect to the managed nodes has <code class="literal">sudo</code> permissions on them.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a playbook file, for example <code class="literal">~/playbook.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
- name: Configure the network
  hosts: managed-node-01.example.com
  tasks:
    - name: VLAN connection profile with Ethernet port
      ansible.builtin.include_role:
        name: rhel-system-roles.network
      vars:
        network_connections:
          # Ethernet profile
          - name: enp1s0
            type: ethernet
            interface_name: enp1s0
            autoconnect: yes
            state: up
            ip:
              dhcp4: no
              auto6: no

          # VLAN profile
          - name: enp1s0.10
            type: vlan
            vlan:
              id: 10
            ip:
              dhcp4: yes
              auto6: yes
            parent: enp1s0
            state: up</pre><p class="simpara">
						e settings specified in the example playbook include the following:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">type: <span class="emphasis"><em>&lt;profile_type&gt;</em></span></code></span></dt><dd>
									Sets the type of the profile to create. The example playbook creates two connection profiles: One for the parent Ethernet device and one for the VLAN device.
								</dd><dt><span class="term"><code class="literal">dhcp4: <span class="emphasis"><em>&lt;value&gt;</em></span></code></span></dt><dd>
									If set to <code class="literal">yes</code>, automatic IPv4 address assignment from DHCP, PPP, or similar services is enabled. Disable the IP address configuration on the parent device.
								</dd><dt><span class="term"><code class="literal">auto6: <span class="emphasis"><em>&lt;value&gt;</em></span></code></span></dt><dd>
									If set to <code class="literal">yes</code>, IPv6 auto-configuration is enabled. In this case, by default, NetworkManager uses Router Advertisements and, if the router announces the <code class="literal">managed</code> flag, NetworkManager requests an IPv6 address and prefix from a DHCPv6 server. Disable the IP address configuration on the parent device.
								</dd><dt><span class="term"><code class="literal">parent: <span class="emphasis"><em>&lt;parent_device&gt;</em></span></code></span></dt><dd>
									Sets the parent device of the VLAN connection profile. In the example, the parent is the Ethernet interface.
								</dd></dl></div><p class="simpara">
						For details about all variables used in the playbook, see the <code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file on the control node.
					</p></li><li class="listitem"><p class="simpara">
						Validate the playbook syntax:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --syntax-check ~/playbook.yml</strong></span></pre><p class="simpara">
						Note that this command only validates the syntax and does not protect against a wrong but valid configuration.
					</p></li><li class="listitem"><p class="simpara">
						Run the playbook:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook ~/playbook.yml</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify the VLAN settings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ansible managed-node-01.example.com -m command -a 'ip -d addr show enp1s0.10'</strong></span>
managed-node-01.example.com | CHANGED | rc=0 &gt;&gt;
4: vlan10@enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether 52:54:00:72:2f:6e brd ff:ff:ff:ff:ff:ff promiscuity 0
    vlan protocol 802.1Q id 10 &lt;REORDER_HDR&gt; numtxqueues 1 numrxqueues 1 gso_max_size 65536 gso_max_segs 65535
    ...</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/rhel-system-roles/network/</code> directory
					</li></ul></div></section></section><section class="chapter" id="configuring-a-network-bridge_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 6. Configuring a network bridge</h2></div></div></div><p class="_abstract _abstract">
			A network bridge is a link-layer device which forwards traffic between networks based on a table of MAC addresses. The bridge builds the MAC addresses table by listening to network traffic and thereby learning what hosts are connected to each network. For example, you can use a software bridge on a Red Hat Enterprise Linux host to emulate a hardware bridge or in virtualization environments, to integrate virtual machines (VM) to the same network as the host.
		</p><p>
			A bridge requires a network device in each network the bridge should connect. When you configure a bridge, the bridge is called <code class="literal literal">controller</code> and the devices it uses <code class="literal literal">ports</code>.
		</p><p>
			You can create bridges on different types of devices, such as:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Physical and virtual Ethernet devices
				</li><li class="listitem">
					Network bonds
				</li><li class="listitem">
					Network teams
				</li><li class="listitem">
					VLAN devices
				</li></ul></div><p>
			Due to the IEEE 802.11 standard which specifies the use of 3-address frames in Wi-Fi for the efficient use of airtime, you cannot configure a bridge over Wi-Fi networks operating in Ad-Hoc or Infrastructure modes.
		</p><section class="section" id="configuring-a-network-bridge-by-using-nmcli_configuring-a-network-bridge"><div class="titlepage"><div><div><h3 class="title">6.1. Configuring a network bridge by using <code class="literal">nmcli</code></h3></div></div></div><p class="_abstract _abstract">
				To configure a network bridge on the command line, use the <code class="literal">nmcli</code> utility.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Two or more physical or virtual network devices are installed on the server.
					</li><li class="listitem">
						To use Ethernet devices as ports of the bridge, the physical or virtual Ethernet devices must be installed on the server.
					</li><li class="listitem"><p class="simpara">
						To use team, bond, or VLAN devices as ports of the bridge, you can either create these devices while you create the bridge or you can create them in advance as described in:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<a class="link" href="#configuring-a-network-team-by-using-nmcli_configuring-network-teaming" title="4.4. Configuring a NIC team by using nmcli">Configuring a network team by using nmcli</a>
							</li><li class="listitem">
								<a class="link" href="#configuring-a-network-bond-by-using-nmcli_configuring-network-bonding" title="3.3. Configuring a network bond by using nmcli">Configuring a network bond by using nmcli</a>
							</li><li class="listitem">
								<a class="link" href="#configuring-vlan-tagging-by-using-nmcli_configuring-vlan-tagging" title="5.1. Configuring VLAN tagging by using nmcli">Configuring VLAN tagging by using nmcli</a>
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a bridge interface:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type bridge con-name bridge0 ifname bridge0</strong></span></pre><p class="simpara">
						This command creates a bridge named <code class="literal">bridge0</code>, enter:
					</p></li><li class="listitem"><p class="simpara">
						Display the network interfaces, and note the names of the interfaces you want to add to the bridge:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device status</strong></span>
DEVICE  TYPE      STATE         CONNECTION
enp7s0  ethernet  disconnected  --
enp8s0  ethernet  disconnected  --
bond0   bond      connected     bond0
bond1   bond      connected     bond1
...</pre><p class="simpara">
						In this example:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">enp7s0</code> and <code class="literal">enp8s0</code> are not configured. To use these devices as ports, add connection profiles in the next step.
							</li><li class="listitem">
								<code class="literal">bond0</code> and <code class="literal">bond1</code> have existing connection profiles. To use these devices as ports, modify their profiles in the next step.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Assign the interfaces to the bridge.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								If the interfaces you want to assign to the bridge are not configured, create new connection profiles for them:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type ethernet port-type bridge con-name bridge0-port1 ifname enp7s0 controller bridge0</strong></span>
# <span class="strong strong"><strong>nmcli connection add type ethernet port-type bridge con-name bridge0-port2 ifname enp8s0 controller bridge0</strong></span></pre><p class="simpara">
								These commands create profiles for <code class="literal">enp7s0</code> and <code class="literal">enp8s0</code>, and add them to the <code class="literal">bridge0</code> connection.
							</p></li><li class="listitem"><p class="simpara">
								If you want to assign an existing connection profile to the bridge:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
										Set the <code class="literal">controller</code> parameter of these connections to <code class="literal">bridge0</code>:
									</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bond0 controller bridge0</strong></span>
# <span class="strong strong"><strong>nmcli connection modify bond1 controller bridge0</strong></span></pre><p class="simpara">
										These commands assign the existing connection profiles named <code class="literal">bond0</code> and <code class="literal">bond1</code> to the <code class="literal">bridge0</code> connection.
									</p></li><li class="listitem"><p class="simpara">
										Reactivate the connections:
									</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up bond0</strong></span>
# <span class="strong strong"><strong>nmcli connection up bond1</strong></span></pre></li></ol></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Configure the IPv4 settings:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To use this bridge device as a port of other devices, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bridge0 ipv4.method disabled</strong></span></pre></li><li class="listitem">
								To use DHCP, no action is required.
							</li><li class="listitem"><p class="simpara">
								To set a static IPv4 address, network mask, default gateway, and DNS server to the <code class="literal">bridge0</code> connection, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bridge0 ipv4.addresses '192.0.2.1/24' ipv4.gateway '192.0.2.254' ipv4.dns '192.0.2.253' ipv4.dns-search 'example.com' ipv4.method manual</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Configure the IPv6 settings:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To use this bridge device as a port of other devices, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bridge0 ipv6.method disabled</strong></span></pre></li><li class="listitem">
								To use stateless address autoconfiguration (SLAAC), no action is required.
							</li><li class="listitem"><p class="simpara">
								To set a static IPv6 address, network mask, default gateway, and DNS server to the <code class="literal">bridge0</code> connection, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bridge0 ipv6.addresses '2001:db8:1::1/64' ipv6.gateway '2001:db8:1::fffe' ipv6.dns '2001:db8:1::fffd' ipv6.dns-search 'example.com' ipv6.method manual</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: Configure further properties of the bridge. For example, to set the Spanning Tree Protocol (STP) priority of <code class="literal">bridge0</code> to <code class="literal">16384</code>, enter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bridge0 bridge.priority '16384'</strong></span></pre><p class="simpara">
						By default, STP is enabled.
					</p></li><li class="listitem"><p class="simpara">
						Activate the connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up bridge0</strong></span></pre></li><li class="listitem"><p class="simpara">
						Verify that the ports are connected, and the <code class="literal">CONNECTION</code> column displays the port’s connection name:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device</strong></span>
DEVICE   TYPE      STATE      CONNECTION
...
enp7s0   ethernet  connected  bridge0-port1
enp8s0   ethernet  connected  bridge0-port2</pre><p class="simpara">
						When you activate any port of the connection, NetworkManager also activates the bridge, but not the other ports of it. You can configure that Red Hat Enterprise Linux enables all ports automatically when the bridge is enabled:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Enable the <code class="literal">connection.autoconnect-ports</code> parameter of the bridge connection:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bridge0 connection.autoconnect-ports 1</strong></span></pre></li><li class="listitem"><p class="simpara">
								Reactivate the bridge:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up bridge0</strong></span></pre></li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Use the <code class="literal">ip</code> utility to display the link status of Ethernet devices that are ports of a specific bridge:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip link show master bridge0</strong></span>
3: enp7s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel master bridge0 state UP mode DEFAULT group default qlen 1000
    link/ether 52:54:00:62:61:0e brd ff:ff:ff:ff:ff:ff
4: enp8s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel master bridge0 state UP mode DEFAULT group default qlen 1000
    link/ether 52:54:00:9e:f1:ce brd ff:ff:ff:ff:ff:ff</pre></li><li class="listitem"><p class="simpara">
						Use the <code class="literal">bridge</code> utility to display the status of Ethernet devices that are ports of any bridge device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>bridge link show</strong></span>
3: enp7s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge0 state forwarding priority 32 cost 100
4: enp8s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge0 state listening priority 32 cost 100
5: enp9s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge1 state forwarding priority 32 cost 100
6: enp11s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge1 state blocking priority 32 cost 100
...</pre><p class="simpara">
						To display the status for a specific Ethernet device, use the <code class="literal">bridge link show dev <span class="emphasis"><em>&lt;ethernet_device_name&gt;</em></span></code> command.
					</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">bridge(8)</code> and <code class="literal">nm-settings(5)</code> man pages on your system
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/3068421">NetworkManager duplicates a connection after restart of NetworkManager service</a> (Red Hat Knowledgebase)
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/5314671">How to configure a bridge with VLAN information?</a> (Red Hat Knowledgebase)
					</li></ul></div></section><section class="section" id="proc_configuring-a-network-bridge-by-using-the-rhel-web-console_configuring-a-network-bridge"><div class="titlepage"><div><div><h3 class="title">6.2. Configuring a network bridge by using the RHEL web console</h3></div></div></div><p>
				Use the RHEL web console to configure a network bridge if you prefer to manage network settings using a web browser-based interface.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Two or more physical or virtual network devices are installed on the server.
					</li><li class="listitem">
						To use Ethernet devices as ports of the bridge, the physical or virtual Ethernet devices must be installed on the server.
					</li><li class="listitem"><p class="simpara">
						To use team, bond, or VLAN devices as ports of the bridge, you can either create these devices while you create the bridge or you can create them in advance as described in:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<a class="link" href="#proc_configuring-a-network-team-by-using-the-rhel-web-console_configuring-network-teaming" title="4.5. Configuring a NIC team by using the RHEL web console">Configuring a network team using the RHEL web console</a>
							</li><li class="listitem">
								<a class="link" href="#proc_configuring-a-network-bond-by-using-the-rhel-web-console_configuring-network-bonding" title="3.4. Configuring a network bond by using the RHEL web console">Configuring a network bond by using the RHEL web console</a>
							</li><li class="listitem">
								<a class="link" href="#proc_configuring-vlan-tagging-by-using-the-rhel-web-console_configuring-vlan-tagging" title="5.3. Configuring VLAN tagging by using the RHEL web console">Configuring VLAN tagging by using the RHEL web console</a>
							</li></ul></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You have installed the RHEL 9 web console.
					</p><p class="simpara">
						For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Log in to the RHEL 9 web console.
					</p><p class="simpara">
						For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
					</p></li><li class="listitem">
						Select the <span class="strong strong"><strong>Networking</strong></span> tab in the navigation on the left side of the screen.
					</li><li class="listitem">
						Click <span class="guibutton">Add bridge</span> in the <span class="strong strong"><strong>Interfaces</strong></span> section.
					</li><li class="listitem">
						Enter the name of the bridge device you want to create.
					</li><li class="listitem">
						Select the interfaces that should be ports of the bridge.
					</li><li class="listitem"><p class="simpara">
						Optional: Enable the <span class="strong strong"><strong>Spanning tree protocol (STP)</strong></span> feature to avoid bridge loops and broadcast radiation.
					</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/e758f042791734bacdcdff5e3b54f5c5/bridge-settings.png" alt="bridge settings"></div></div></li><li class="listitem">
						Click <span class="guibutton">Apply</span>.
					</li><li class="listitem"><p class="simpara">
						By default, the bridge uses a dynamic IP address. If you want to set a static IP address:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Click the name of the bridge in the <span class="strong strong"><strong>Interfaces</strong></span> section.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Edit</strong></span> next to the protocol you want to configure.
							</li><li class="listitem">
								Select <span class="strong strong"><strong>Manual</strong></span> next to <span class="strong strong"><strong>Addresses</strong></span>, and enter the IP address, prefix, and default gateway.
							</li><li class="listitem">
								In the <span class="strong strong"><strong>DNS</strong></span> section, click the <span class="guibutton">+</span> button, and enter the IP address of the DNS server. Repeat this step to set multiple DNS servers.
							</li><li class="listitem">
								In the <span class="strong strong"><strong>DNS search domains</strong></span> section, click the <span class="guibutton">+</span> button, and enter the search domain.
							</li><li class="listitem"><p class="simpara">
								If the interface requires static routes, configure them in the <span class="strong strong"><strong>Routes</strong></span> section.
							</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/7994cde2fafedf1c5a1436807dc34096/bond-team-bridge-vlan.ipv4.png" alt="bond team bridge vlan.ipv4"></div></div></li><li class="listitem">
								Click <span class="guibutton">Apply</span>
							</li></ol></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Select the <span class="strong strong"><strong>Networking</strong></span> tab in the navigation on the left side of the screen, and check if there is incoming and outgoing traffic on the interface:
					</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/f4b42ba76f5890a0113eaaa9254ac6c0/bridge-verify.png" alt="bridge verify"></div></div></li></ol></div></section><section class="section" id="proc_configuring-a-network-bridge-by-using-nmtui_configuring-a-network-bridge"><div class="titlepage"><div><div><h3 class="title">6.3. Configuring a network bridge by using <code class="literal">nmtui</code></h3></div></div></div><p>
				The <code class="literal">nmtui</code> application provides a text-based user interface for NetworkManager. You can use <code class="literal">nmtui</code> to configure a network bridge on a host without a graphical interface.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					In <code class="literal">nmtui</code>:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Navigate by using the cursor keys.
						</li><li class="listitem">
							Press a button by selecting it and hitting <kbd class="keycap">Enter</kbd>.
						</li><li class="listitem">
							Select and clear checkboxes by using <kbd class="keycap">Space</kbd>.
						</li></ul></div></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Two or more physical or virtual network devices are installed on the server.
					</li><li class="listitem">
						To use Ethernet devices as ports of the bridge, the physical or virtual Ethernet devices must be installed on the server.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						If you do not know the network device names on which you want configure a network bridge, display the available devices:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device status</strong></span>
DEVICE     TYPE      STATE                   CONNECTION
enp7s0     ethernet  unavailable             --
enp8s0     ethernet  unavailable             --
...</pre></li><li class="listitem"><p class="simpara">
						Start <code class="literal">nmtui</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmtui</strong></span></pre></li><li class="listitem">
						Select <code class="literal">Edit a connection</code>, and press <kbd class="keycap">Enter</kbd>.
					</li><li class="listitem">
						Press <code class="literal">Add</code>.
					</li><li class="listitem">
						Select <code class="literal">Bridge</code> from the list of network types, and press <kbd class="keycap">Enter</kbd>.
					</li><li class="listitem"><p class="simpara">
						Optional: Enter a name for the NetworkManager profile to be created.
					</p><p class="simpara">
						On hosts with multiple profiles, a meaningful name makes it easier to identify the purpose of a profile.
					</p></li><li class="listitem">
						Enter the bridge device name to be created into the <code class="literal">Device</code> field.
					</li><li class="listitem"><p class="simpara">
						Add ports to the bridge to be created:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Press <code class="literal">Add</code> next to the <code class="literal">Slaves</code> list.
							</li><li class="listitem">
								Select the type of the interface you want to add as port to the bridge, for example, <code class="literal">Ethernet</code>.
							</li><li class="listitem">
								Optional: Enter a name for the NetworkManager profile to be created for this bridge port.
							</li><li class="listitem">
								Enter the port’s device name into the <code class="literal">Device</code> field.
							</li><li class="listitem"><p class="simpara">
								Press <code class="literal">OK</code> to return to the window with the bridge settings.
							</p><div class="figure" id="idm140053191572416"><p class="title"><strong>Figure 6.1. Adding an Ethernet device as port to a bridge</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/af7f9f663bd362235d183af1a76cc888/nmtui-bridge-add-port.png" alt="nmtui bridge add port"></div></div></div></li><li class="listitem">
								Repeat these steps to add more ports to the bridge.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Depending on your environment, configure the IP address settings in the <code class="literal">IPv4 configuration</code> and <code class="literal">IPv6 configuration</code> areas accordingly. For this, press the button next to these areas, and select:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">Disabled</code>, if the bridge does not require an IP address.
							</li><li class="listitem">
								<code class="literal">Automatic</code>, if a DHCP server or stateless address autoconfiguration (SLAAC) dynamically assigns an IP address to the bridge.
							</li><li class="listitem"><p class="simpara">
								<code class="literal">Manual</code>, if the network requires static IP address settings. In this case, you must fill further fields:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Press <code class="literal">Show</code> next to the protocol you want to configure to display additional fields.
									</li><li class="listitem"><p class="simpara">
										Press <code class="literal">Add</code> next to <code class="literal">Addresses</code>, and enter the IP address and the subnet mask in Classless Inter-Domain Routing (CIDR) format.
									</p><p class="simpara">
										If you do not specify a subnet mask, NetworkManager sets a <code class="literal">/32</code> subnet mask for IPv4 addresses and <code class="literal">/64</code> for IPv6 addresses.
									</p></li><li class="listitem">
										Enter the address of the default gateway.
									</li><li class="listitem">
										Press <code class="literal">Add</code> next to <code class="literal">DNS servers</code>, and enter the DNS server address.
									</li><li class="listitem">
										Press <code class="literal">Add</code> next to <code class="literal">Search domains</code>, and enter the DNS search domain.
									</li></ol></div></li></ul></div><div class="figure" id="idm140053178001600"><p class="title"><strong>Figure 6.2. Example of a bridge connection without IP address settings</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/35cd0dc4968269049afb37203aae4308/nmtui-bridge-no-IP.png" alt="nmtui bridge no IP"></div></div></div></li><li class="listitem">
						Press <code class="literal">OK</code> to create and automatically activate the new connection.
					</li><li class="listitem">
						Press <code class="literal">Back</code> to return to the main menu.
					</li><li class="listitem">
						Select <code class="literal">Quit</code>, and press <kbd class="keycap">Enter</kbd> to close the <code class="literal">nmtui</code> application.
					</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Use the <code class="literal">ip</code> utility to display the link status of Ethernet devices that are ports of a specific bridge:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip link show master bridge0</strong></span>
3: enp7s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel master bridge0 state UP mode DEFAULT group default qlen 1000
    link/ether 52:54:00:62:61:0e brd ff:ff:ff:ff:ff:ff
4: enp8s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel master bridge0 state UP mode DEFAULT group default qlen 1000
    link/ether 52:54:00:9e:f1:ce brd ff:ff:ff:ff:ff:ff</pre></li><li class="listitem"><p class="simpara">
						Use the <code class="literal">bridge</code> utility to display the status of Ethernet devices that are ports of any bridge device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>bridge link show</strong></span>
3: enp7s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge0 state forwarding priority 32 cost 100
4: enp8s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge0 state listening priority 32 cost 100
...</pre><p class="simpara">
						To display the status for a specific Ethernet device, use the <code class="literal">bridge link show dev <span class="emphasis"><em>&lt;ethernet_device_name&gt;</em></span></code> command.
					</p></li></ol></div></section><section class="section" id="configuring-a-network-bridge-by-using-nm-connection-editor_configuring-a-network-bridge"><div class="titlepage"><div><div><h3 class="title">6.4. Configuring a network bridge by using nm-connection-editor</h3></div></div></div><p class="_abstract _abstract">
				If you use Red Hat Enterprise Linux with a graphical interface, you can configure network bridges using the <code class="literal">nm-connection-editor</code> application.
			</p><p>
				Note that <code class="literal">nm-connection-editor</code> can add only new ports to a bridge. To use an existing connection profile as a port, create the bridge using the <code class="literal">nmcli</code> utility as described in <a class="link" href="#configuring-a-network-bridge-by-using-nmcli_configuring-a-network-bridge" title="6.1. Configuring a network bridge by using nmcli">Configuring a network bridge by using nmcli</a>.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Two or more physical or virtual network devices are installed on the server.
					</li><li class="listitem">
						To use Ethernet devices as ports of the bridge, the physical or virtual Ethernet devices must be installed on the server.
					</li><li class="listitem">
						To use team, bond, or VLAN devices as ports of the bridge, ensure that these devices are not already configured.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open a terminal, and enter <code class="literal">nm-connection-editor</code>:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>nm-connection-editor</strong></span></pre></li><li class="listitem">
						Click the <span class="guibutton">+</span> button to add a new connection.
					</li><li class="listitem">
						Select the <span class="strong strong"><strong>Bridge</strong></span> connection type, and click <span class="guibutton">Create</span>.
					</li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>Bridge</strong></span> tab:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Optional: Set the name of the bridge interface in the <span class="strong strong"><strong>Interface name</strong></span> field.
							</li><li class="listitem"><p class="simpara">
								Click the <span class="guibutton">Add</span> button to create a new connection profile for a network interface and adding the profile as a port to the bridge.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Select the connection type of the interface. For example, select <span class="strong strong"><strong>Ethernet</strong></span> for a wired connection.
									</li><li class="listitem">
										Optional: Set a connection name for the port device.
									</li><li class="listitem">
										If you create a connection profile for an Ethernet device, open the <span class="strong strong"><strong>Ethernet</strong></span> tab, and select in the <span class="strong strong"><strong>Device</strong></span> field the network interface you want to add as a port to the bridge. If you selected a different device type, configure it accordingly.
									</li><li class="listitem">
										Click <span class="guibutton">Save</span>.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								Repeat the previous step for each interface you want to add to the bridge.
							</p><p class="simpara">
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/5c31ecb2114fcc2de555ebd602d97b43/add-nic-to-bridge-in-nm-connection-editor.png" alt="add nic to bridge in nm connection editor"></span>

							</p></li></ol></div></li><li class="listitem">
						Optional: Configure further bridge settings, such as Spanning Tree Protocol (STP) options.
					</li><li class="listitem"><p class="simpara">
						Configure the IP address settings on both the <span class="strong strong"><strong>IPv4 Settings</strong></span> and <span class="strong strong"><strong>IPv6 Settings</strong></span> tabs:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								To use this bridge device as a port of other devices, set the <span class="strong strong"><strong>Method</strong></span> field to <span class="strong strong"><strong>Disabled</strong></span>.
							</li><li class="listitem">
								To use DHCP, leave the <span class="strong strong"><strong>Method</strong></span> field at its default, <span class="strong strong"><strong>Automatic (DHCP)</strong></span>.
							</li><li class="listitem"><p class="simpara">
								To use static IP settings, set the <span class="strong strong"><strong>Method</strong></span> field to <span class="strong strong"><strong>Manual</strong></span> and fill the fields accordingly:
							</p><p class="simpara">
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/30c02785f203fbeb36a70ca1c31f4099/bridge-IP-settings-nm-connection-editor.png" alt="bridge IP settings nm connection editor"></span>

							</p></li></ul></div></li><li class="listitem">
						Click <span class="guibutton">Save</span>.
					</li><li class="listitem">
						Close <code class="literal">nm-connection-editor</code>.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Use the <code class="literal">ip</code> utility to display the link status of Ethernet devices that are ports of a specific bridge.
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip link show master <span class="emphasis"><em>bridge0</em></span></strong></span>
3: enp7s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel master bridge0 state UP mode DEFAULT group default qlen 1000
    link/ether 52:54:00:62:61:0e brd ff:ff:ff:ff:ff:ff
4: enp8s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel master bridge0 state UP mode DEFAULT group default qlen 1000
    link/ether 52:54:00:9e:f1:ce brd ff:ff:ff:ff:ff:ff</pre></li><li class="listitem"><p class="simpara">
						Use the <code class="literal">bridge</code> utility to display the status of Ethernet devices that are ports in any bridge device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>bridge link show</strong></span>
3: enp7s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge0 state forwarding priority 32 cost 100
4: enp8s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge0 state listening priority 32 cost 100
5: enp9s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge1 state forwarding priority 32 cost 100
6: enp11s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge1 state blocking priority 32 cost 100
...</pre><p class="simpara">
						To display the status for a specific Ethernet device, use the <code class="literal">bridge link show dev <span class="emphasis"><em>ethernet_device_name</em></span></code> command.
					</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#configuring-a-network-bond-by-using-nm-connection-editor_configuring-network-bonding" title="3.6. Configuring a network bond by using nm-connection-editor">Configuring a network bond by using nm-connection-editor</a>
					</li><li class="listitem">
						<a class="link" href="#configuring-a-network-team-by-using-nm-connection-editor_configuring-network-teaming" title="4.6. Configuring a NIC team by using nm-connection-editor">Configuring a network team by using nm-connection-editor</a>
					</li><li class="listitem">
						<a class="link" href="#configuring-vlan-tagging-by-using-nm-connection-editor_configuring-vlan-tagging" title="5.5. Configuring VLAN tagging by using nm-connection-editor">Configuring VLAN tagging by using nm-connection-editor</a>
					</li><li class="listitem">
						<a class="link" href="#proc_configuring-networkmanager-to-avoid-using-a-specific-profile-to-provide-a-default-gateway_managing-the-default-gateway-setting" title="25.8. Configuring NetworkManager to avoid using a specific profile to provide a default gateway">Configuring NetworkManager to avoid using a specific profile to provide a default gateway</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/5314671">How to configure a bridge with VLAN information?</a> (Red Hat Knowledgebase)
					</li></ul></div></section><section class="section" id="proc_configuring-a-network-bridge-by-using-nmstatectl_configuring-a-network-bridge"><div class="titlepage"><div><div><h3 class="title">6.5. Configuring a network bridge by using <code class="literal">nmstatectl</code></h3></div></div></div><p class="_abstract _abstract">
				Use the <code class="literal">nmstatectl</code> utility to configure a network bridge through the Nmstate API. The Nmstate API ensures that, after setting the configuration, the result matches the configuration file. If anything fails, <code class="literal">nmstatectl</code> automatically rolls back the changes to avoid leaving the system in an incorrect state.
			</p><p>
				Depending on your environment, adjust the YAML file accordingly. For example, to use different devices than Ethernet adapters in the bridge, adapt the <code class="literal">base-iface</code> attribute and <code class="literal">type</code> attributes of the ports you use in the bridge.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Two or more physical or virtual network devices are installed on the server.
					</li><li class="listitem">
						To use Ethernet devices as ports in the bridge, the physical or virtual Ethernet devices must be installed on the server.
					</li><li class="listitem">
						To use team, bond, or VLAN devices as ports in the bridge, set the interface name in the <code class="literal">port</code> list, and define the corresponding interfaces.
					</li><li class="listitem">
						The <code class="literal">nmstate</code> package is installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a YAML file, for example <code class="literal">~/create-bridge.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
interfaces:
- name: bridge0
  type: linux-bridge
  state: up
  ipv4:
    enabled: true
    address:
    - ip: 192.0.2.1
      prefix-length: 24
    dhcp: false
  ipv6:
    enabled: true
    address:
    - ip: 2001:db8:1::1
      prefix-length: 64
    autoconf: false
    dhcp: false
  bridge:
    options:
      stp:
        enabled: true
    port:
      - name: enp1s0
      - name: enp7s0
- name: enp1s0
  type: ethernet
  state: up
- name: enp7s0
  type: ethernet
  state: up

routes:
  config:
  - destination: 0.0.0.0/0
    next-hop-address: 192.0.2.254
    next-hop-interface: bridge0
  - destination: ::/0
    next-hop-address: 2001:db8:1::fffe
    next-hop-interface: bridge0
dns-resolver:
  config:
    search:
    - example.com
    server:
    - 192.0.2.200
    - 2001:db8:1::ffbb</pre><p class="simpara">
						These settings define a network bridge with the following settings:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Network interfaces in the bridge: <code class="literal">enp1s0</code> and <code class="literal">enp7s0</code>
							</li><li class="listitem">
								Spanning Tree Protocol (STP): Enabled
							</li><li class="listitem">
								Static IPv4 address: <code class="literal">192.0.2.1</code> with the <code class="literal">/24</code> subnet mask
							</li><li class="listitem">
								Static IPv6 address: <code class="literal">2001:db8:1::1</code> with the <code class="literal">/64</code> subnet mask
							</li><li class="listitem">
								IPv4 default gateway: <code class="literal">192.0.2.254</code>
							</li><li class="listitem">
								IPv6 default gateway: <code class="literal">2001:db8:1::fffe</code>
							</li><li class="listitem">
								IPv4 DNS server: <code class="literal">192.0.2.200</code>
							</li><li class="listitem">
								IPv6 DNS server: <code class="literal">2001:db8:1::ffbb</code>
							</li><li class="listitem">
								DNS search domain: <code class="literal">example.com</code>
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Apply the settings to the system:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmstatectl apply ~/create-bridge.yml</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the status of the devices and connections:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device status</strong></span>
DEVICE      TYPE      STATE      CONNECTION
bridge0     bridge    <span class="strong strong"><strong>connected</strong></span>  bridge0</pre></li><li class="listitem"><p class="simpara">
						Display all settings of the connection profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection show bridge0</strong></span>
connection.id:              bridge0_
connection.uuid:            e2cc9206-75a2-4622-89cf-1252926060a9
connection.stable-id:       --
connection.type:            bridge
connection.interface-name:  bridge0
...</pre></li><li class="listitem"><p class="simpara">
						Display the connection settings in YAML format:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmstatectl show bridge0</strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nmstatectl(8)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/nmstate/examples/</code> directory
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/5314671">How to configure a bridge with VLAN information?</a> (Red Hat Knowledgebase)
					</li></ul></div></section><section class="section" id="configuring-a-network-bridge-by-using-the-network-rhel-system-role_configuring-a-network-bridge"><div class="titlepage"><div><div><h3 class="title">6.6. Configuring a network bridge by using the <code class="literal">network</code> RHEL system role</h3></div></div></div><p class="_abstract _abstract">
				You can connect multiple networks on layer 2 of the Open Systems Interconnection (OSI) model by creating a network bridge. To configure a bridge, create a connection profile in NetworkManager. By using Ansible and the <code class="literal">network</code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.
			</p><p>
				You can use the <code class="literal">network</code> RHEL system role to configure a bridge and, if a connection profile for the bridge’s parent device does not exists, the role can create it as well.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					If you want to assign IP addresses, gateways, and DNS settings to a bridge, configure them on the bridge and not on its ports.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles">You have prepared the control node and the managed nodes</a>
					</li><li class="listitem">
						You are logged in to the control node as a user who can run playbooks on the managed nodes.
					</li><li class="listitem">
						The account you use to connect to the managed nodes has <code class="literal">sudo</code> permissions on them.
					</li><li class="listitem">
						Two or more physical or virtual network devices are installed on the server.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a playbook file, for example <code class="literal">~/playbook.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
- name: Configure the network
  hosts: managed-node-01.example.com
  tasks:
    - name: Bridge connection profile with two Ethernet ports
      ansible.builtin.include_role:
        name: rhel-system-roles.network
      vars:
        network_connections:
          # Bridge profile
          - name: bridge0
            type: bridge
            interface_name: bridge0
            ip:
              dhcp4: yes
              auto6: yes
            state: up

          # Port profile for the 1st Ethernet device
          - name: bridge0-port1
            interface_name: enp7s0
            type: ethernet
            controller: bridge0
            port_type: bridge
            state: up

          # Port profile for the 2nd Ethernet device
          - name: bridge0-port2
            interface_name: enp8s0
            type: ethernet
            controller: bridge0
            port_type: bridge
            state: up</pre><p class="simpara">
						The settings specified in the example playbook include the following:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">type: <span class="emphasis"><em>&lt;profile_type&gt;</em></span></code></span></dt><dd>
									Sets the type of the profile to create. The example playbook creates three connection profiles: One for the bridge and two for the Ethernet devices.
								</dd><dt><span class="term"><code class="literal">dhcp4: yes</code></span></dt><dd>
									Enables automatic IPv4 address assignment from DHCP, PPP, or similar services.
								</dd><dt><span class="term"><code class="literal">auto6: yes</code></span></dt><dd>
									Enables IPv6 auto-configuration. By default, NetworkManager uses Router Advertisements. If the router announces the <code class="literal">managed</code> flag, NetworkManager requests an IPv6 address and prefix from a DHCPv6 server.
								</dd></dl></div><p class="simpara">
						For details about all variables used in the playbook, see the <code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file on the control node.
					</p></li><li class="listitem"><p class="simpara">
						Validate the playbook syntax:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --syntax-check ~/playbook.yml</strong></span></pre><p class="simpara">
						Note that this command only validates the syntax and does not protect against a wrong but valid configuration.
					</p></li><li class="listitem"><p class="simpara">
						Run the playbook:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook ~/playbook.yml</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the link status of Ethernet devices that are ports of a specific bridge:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ansible managed-node-01.example.com -m command -a 'ip link show master bridge0'</strong></span>
managed-node-01.example.com | CHANGED | rc=0 &gt;&gt;
3: enp7s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel master bridge0 state UP mode DEFAULT group default qlen 1000
    link/ether 52:54:00:62:61:0e brd ff:ff:ff:ff:ff:ff
4: enp8s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel master bridge0 state UP mode DEFAULT group default qlen 1000
    link/ether 52:54:00:9e:f1:ce brd ff:ff:ff:ff:ff:ff</pre></li><li class="listitem"><p class="simpara">
						Display the status of Ethernet devices that are ports of any bridge device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ansible managed-node-01.example.com -m command -a 'bridge link show'</strong></span>
managed-node-01.example.com | CHANGED | rc=0 &gt;&gt;
3: enp7s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge0 state forwarding priority 32 cost 100
4: enp8s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge0 state listening priority 32 cost 100</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/rhel-system-roles/network/</code> directory
					</li></ul></div></section></section><section class="chapter" id="configuring-a-vpn-connection_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 7. Setting up an IPsec VPN</h2></div></div></div><p>
			<span id="configuring-a-vpn-with-ipsec_configuring-and-managing-networking"><!--Empty--></span>
		</p><p class="_abstract _abstract">
			A virtual private network (VPN) is a way of connecting to a local network over the internet. <code class="literal">IPsec</code> provided by <code class="literal">Libreswan</code> is the preferred method for creating a VPN. <code class="literal">Libreswan</code> is a user-space <code class="literal">IPsec</code> implementation for VPN. A VPN enables the communication between your LAN, and another, remote LAN by setting up a tunnel across an intermediate network such as the internet. For security reasons, a VPN tunnel always uses authentication and encryption. For cryptographic operations, <code class="literal">Libreswan</code> uses the <code class="literal">NSS</code> library.
		</p><section class="section" id="libreswan-as-an-ipsec-vpn-implementation_configuring-a-vpn-connection"><div class="titlepage"><div><div><h3 class="title">7.1. Libreswan as an IPsec VPN implementation</h3></div></div></div><p class="_abstract _abstract">
				In RHEL, you can configure a Virtual Private Network (VPN) by using the IPsec protocol, which is supported by the Libreswan application. Libreswan is a continuation of the Openswan application, and many examples from the Openswan documentation are interchangeable with Libreswan.
			</p><p>
				The IPsec protocol for a VPN is configured using the Internet Key Exchange (IKE) protocol. The terms IPsec and IKE are used interchangeably. An IPsec VPN is also called an IKE VPN, IKEv2 VPN, XAUTH VPN, Cisco VPN or IKE/IPsec VPN. A variant of an IPsec VPN that also uses the Layer 2 Tunneling Protocol (L2TP) is usually called an L2TP/IPsec VPN, which requires the <code class="literal">xl2tpd</code> package provided by the <code class="literal">optional</code> repository.
			</p><p>
				Libreswan is an open-source, user-space IKE implementation. IKE v1 and v2 are implemented as a user-level daemon. The IKE protocol is also encrypted. The IPsec protocol is implemented by the Linux kernel, and Libreswan configures the kernel to add and remove VPN tunnel configurations.
			</p><p>
				The IKE protocol uses UDP port 500 and 4500. The IPsec protocol consists of two protocols:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Encapsulated Security Payload (ESP), which has protocol number 50.
					</li><li class="listitem">
						Authenticated Header (AH), which has protocol number 51.
					</li></ul></div><p>
				The AH protocol is not recommended for use. Users of AH are recommended to migrate to ESP with null encryption.
			</p><p>
				The IPsec protocol provides two modes of operation:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Tunnel Mode (the default)
					</li><li class="listitem">
						Transport Mode.
					</li></ul></div><p>
				You can configure the kernel with IPsec without IKE. This is called <span class="emphasis"><em>manual keying</em></span>. You can also configure manual keying using the <code class="literal command">ip xfrm</code> commands, however, this is strongly discouraged for security reasons. Libreswan communicates with the Linux kernel using the Netlink interface. The kernel performs packet encryption and decryption.
			</p><p>
				Libreswan uses the Network Security Services (NSS) cryptographic library. NSS is certified for use with the <span class="emphasis"><em>Federal Information Processing Standard</em></span> (<span class="emphasis"><em>FIPS</em></span>) Publication 140-2.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					IKE/IPsec VPNs, implemented by Libreswan and the Linux kernel, is the only VPN technology recommended for use in RHEL. Do not use any other VPN technology without understanding the risks of doing so.
				</p></div></rh-alert><p>
				In RHEL, Libreswan follows <span class="strong strong"><strong>system-wide cryptographic policies</strong></span> by default. This ensures that Libreswan uses secure settings for current threat models including IKEv2 as a default protocol. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/security_hardening/using-the-system-wide-cryptographic-policies_security-hardening">Using system-wide crypto policies</a> for more information.
			</p><p>
				Libreswan does not use the terms "source" and "destination" or "server" and "client" because IKE/IPsec are peer to peer protocols. Instead, it uses the terms "left" and "right" to refer to end points (the hosts). This also allows you to use the same configuration on both end points in most cases. However, administrators usually choose to always use "left" for the local host and "right" for the remote host.
			</p><p>
				The <code class="literal option">leftid</code> and <code class="literal option">rightid</code> options serve as identification of the respective hosts in the authentication process. See the <code class="literal">ipsec.conf(5)</code> man page for more information.
			</p></section><section class="section" id="con_authentication-methods-in-libreswan_configuring-a-vpn-connection"><div class="titlepage"><div><div><h3 class="title">7.2. Authentication methods in Libreswan</h3></div></div></div><p>
				Libreswan supports several authentication methods, each of which fits a different scenario.
			</p><div class="formalpara"><p class="title"><strong>Pre-Shared key (PSK)</strong></p><p>
					<span class="emphasis"><em>Pre-Shared Key</em></span> (PSK) is the simplest authentication method. For security reasons, do not use PSKs shorter than 64 random characters. In FIPS mode, PSKs must comply with a minimum-strength requirement depending on the integrity algorithm used. You can set PSK by using the <code class="literal">authby=secret</code> connection.
				</p></div><div class="formalpara"><p class="title"><strong>Raw RSA keys</strong></p><p>
					<span class="emphasis"><em>Raw RSA keys</em></span> are commonly used for static host-to-host or subnet-to-subnet IPsec configurations. Each host is manually configured with the public RSA keys of all other hosts, and Libreswan sets up an IPsec tunnel between each pair of hosts. This method does not scale well for large numbers of hosts.
				</p></div><p>
				You can generate a raw RSA key on a host using the <code class="literal">ipsec newhostkey</code> command. You can list generated keys by using the <code class="literal">ipsec showhostkey</code> command. The <code class="literal">leftrsasigkey=</code> line is required for connection configurations that use CKA ID keys. Use the <code class="literal">authby=rsasig</code> connection option for raw RSA keys.
			</p><div class="formalpara"><p class="title"><strong>X.509 certificates</strong></p><p>
					<span class="emphasis"><em>X.509 certificates</em></span> are commonly used for large-scale deployments with hosts that connect to a common IPsec gateway. A central <span class="emphasis"><em>certificate authority</em></span> (CA) signs RSA certificates for hosts or users. This central CA is responsible for relaying trust, including the revocations of individual hosts or users.
				</p></div><p>
				For example, you can generate X.509 certificates using the <code class="literal">openssl</code> command and the NSS <code class="literal">certutil</code> command. Because Libreswan reads user certificates from the NSS database using the certificates' nickname in the <code class="literal">leftcert=</code> configuration option, provide a nickname when you create a certificate.
			</p><p>
				If you use a custom CA certificate, you must import it to the Network Security Services (NSS) database. You can import any certificate in the PKCS #12 format to the Libreswan NSS database by using the <code class="literal">ipsec import</code> command.
			</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					Libreswan requires an Internet Key Exchange (IKE) peer ID as a subject alternative name (SAN) for every peer certificate as described in <a class="link" href="https://datatracker.ietf.org/doc/html/rfc4945#section-3.1">section 3.1 of RFC 4945</a>. Disabling this check by changing the <code class="literal">require-id-on-certificated=</code> option can make the system vulnerable to man-in-the-middle attacks.
				</p></div></rh-alert><p>
				Use the <code class="literal">authby=rsasig</code> connection option for authentication based on X.509 certificates using RSA with SHA-2. You can further limit it for ECDSA digital signatures using SHA-2 by setting <code class="literal">authby=</code> to <code class="literal">ecdsa</code> and RSA Probabilistic Signature Scheme (RSASSA-PSS) digital signatures based authentication with SHA-2 through <code class="literal">authby=rsa-sha2</code>. The default value is <code class="literal">authby=rsasig,ecdsa</code>.
			</p><p>
				The certificates and the <code class="literal">authby=</code> signature methods should match. This increases interoperability and preserves authentication in one digital signature system.
			</p><div class="formalpara"><p class="title"><strong>NULL authentication</strong></p><p>
					<span class="emphasis"><em>NULL authentication</em></span> is used to gain mesh encryption without authentication. It protects against passive attacks but not against active attacks. However, because IKEv2 allows asymmetric authentication methods, NULL authentication can also be used for internet-scale opportunistic IPsec. In this model, clients authenticate the server, but servers do not authenticate the client. This model is similar to secure websites using TLS. Use <code class="literal">authby=null</code> for NULL authentication.
				</p></div><div class="formalpara"><p class="title"><strong>Protection against quantum computers</strong></p><p>
					In addition to the previously mentioned authentication methods, you can use the <span class="emphasis"><em>Post-quantum Pre-shared Key</em></span> (PPK) method to protect against possible attacks by quantum computers. Individual clients or groups of clients can use their own PPK by specifying a PPK ID that corresponds to an out-of-band configured pre-shared key.
				</p></div><p>
				Using IKEv1 with pre-shared keys protects against quantum attackers. The redesign of IKEv2 does not offer this protection natively. Libreswan offers the use of a <span class="emphasis"><em>Post-quantum Pre-shared Key</em></span> (PPK) to protect IKEv2 connections against quantum attacks.
			</p><p>
				To enable optional PPK support, add <code class="literal option">ppk=yes</code> to the connection definition. To require PPK, add <code class="literal option">ppk=insist</code>. Then, each client can be given a PPK ID with a secret value that is communicated out-of-band (and preferably quantum-safe). The PPK’s should be very strong in randomness and not based on dictionary words. The PPK ID and PPK data are stored in the <code class="literal">ipsec.secrets</code> file, for example:
			</p><pre class="screen">@west @east : PPKS "user1" "thestringismeanttobearandomstr"</pre><p>
				The <code class="literal option">PPKS</code> option refers to static PPKs. This experimental function uses one-time-pad-based Dynamic PPKs. Upon each connection, a new part of the one-time pad is used as the PPK. When used, that part of the dynamic PPK inside the file is overwritten with zeros to prevent re-use. If there is no more one-time-pad material left, the connection fails. See the <code class="literal">ipsec.secrets(5)</code> man page for more information.
			</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					The implementation of dynamic PPKs is provided as an unsupported Technology Preview. Use with caution.
				</p></div></rh-alert></section><section class="section" id="installing-libreswan_configuring-a-vpn-connection"><div class="titlepage"><div><div><h3 class="title">7.3. Installing Libreswan</h3></div></div></div><p>
				Before you can set a VPN through the Libreswan IPsec/IKE implementation, you must install the corresponding packages, start the <code class="literal">ipsec</code> service, and allow the service in your firewall.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">AppStream</code> repository is enabled.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the <code class="literal package">libreswan</code> packages:
					</p><pre class="screen"># <span class="strong strong"><strong>dnf install libreswan</strong></span></pre></li><li class="listitem"><p class="simpara">
						If you are re-installing Libreswan, remove its old database files and create a new database:
					</p><pre class="screen"># <span class="strong strong"><strong>systemctl stop ipsec</strong></span>
# <span class="strong strong"><strong>rm /var/lib/ipsec/nss/*db</strong></span>
# <span class="strong strong"><strong>ipsec initnss</strong></span></pre></li><li class="listitem"><p class="simpara">
						Start the <code class="literal">ipsec</code> service, and enable the service to be started automatically on boot:
					</p><pre class="screen"># <span class="strong strong"><strong>systemctl enable ipsec --now</strong></span></pre></li><li class="listitem"><p class="simpara">
						Configure the firewall to allow 500 and 4500/UDP ports for the IKE, ESP, and AH protocols by adding the <code class="literal">ipsec</code> service:
					</p><pre class="screen"># <span class="strong strong"><strong>firewall-cmd --add-service="ipsec"</strong></span>
# <span class="strong strong"><strong>firewall-cmd --runtime-to-permanent</strong></span></pre></li></ol></div></section><section class="section" id="creating-a-host-to-host-vpn_configuring-a-vpn-connection"><div class="titlepage"><div><div><h3 class="title">7.4. Creating a host-to-host VPN</h3></div></div></div><p>
				You can configure Libreswan to create a host-to-host IPsec VPN between two hosts referred to as <span class="emphasis"><em>left</em></span> and <span class="emphasis"><em>right</em></span> using authentication by raw RSA keys.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Libreswan is installed and the <code class="literal">ipsec</code> service is started on each node.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Generate a raw RSA key pair on each host:
					</p><pre class="screen"># <span class="strong strong"><strong>ipsec newhostkey</strong></span></pre></li><li class="listitem"><p class="simpara">
						The previous step returned the generated key’s <code class="literal">ckaid</code>. Use that <code class="literal">ckaid</code> with the following command on <span class="emphasis"><em>left</em></span>, for example:
					</p><pre class="screen"># <span class="strong strong"><strong>ipsec showhostkey --left --ckaid 2d3ea57b61c9419dfd6cf43a1eb6cb306c0e857d</strong></span></pre><p class="simpara">
						The output of the previous command generated the <code class="literal">leftrsasigkey=</code> line required for the configuration. Do the same on the second host (<span class="emphasis"><em>right</em></span>):
					</p><pre class="screen"># <span class="strong strong"><strong>ipsec showhostkey --right --ckaid a9e1f6ce9ecd3608c24e8f701318383f41798f03</strong></span></pre></li><li class="listitem"><p class="simpara">
						In the <code class="literal filename">/etc/ipsec.d/</code> directory, create a new <code class="literal filename">my_host-to-host.conf</code> file. Write the RSA host keys from the output of the <code class="literal command">ipsec showhostkey</code> commands in the previous step to the new file. For example:
					</p><pre class="screen">conn mytunnel
    leftid=@west
    left=192.1.2.23
    leftrsasigkey=0sAQOrlo+hOafUZDlCQmXFrje/oZm [...] W2n417C/4urYHQkCvuIQ==
    rightid=@east
    right=192.1.2.45
    rightrsasigkey=0sAQO3fwC6nSSGgt64DWiYZzuHbc4 [...] D/v8t5YTQ==
    authby=rsasig</pre></li><li class="listitem"><p class="simpara">
						After importing keys, restart the <code class="literal">ipsec</code> service:
					</p><pre class="screen"># <span class="strong strong"><strong>systemctl restart ipsec</strong></span></pre></li><li class="listitem"><p class="simpara">
						Load the connection:
					</p><pre class="screen"># <span class="strong strong"><strong>ipsec auto --add mytunnel</strong></span></pre></li><li class="listitem"><p class="simpara">
						Establish the tunnel:
					</p><pre class="screen"># <span class="strong strong"><strong>ipsec auto --up mytunnel</strong></span></pre></li><li class="listitem"><p class="simpara">
						To automatically start the tunnel when the <code class="literal">ipsec</code> service is started, add the following line to the connection definition:
					</p><pre class="screen">auto=start</pre></li></ol></div></section><section class="section" id="configuring-a-site-to-site-vpn_configuring-a-vpn-connection"><div class="titlepage"><div><div><h3 class="title">7.5. Configuring a site-to-site VPN</h3></div></div></div><p class="_abstract _abstract">
				To create a site-to-site IPsec VPN, by joining two networks, an IPsec tunnel between the two hosts, is created. The hosts thus act as the end points, which are configured to permit traffic from one or more subnets to pass through. Therefore you can think of the host as gateways to the remote portion of the network.
			</p><p>
				The configuration of the site-to-site VPN only differs from the host-to-host VPN in that one or more networks or subnets must be specified in the configuration file.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A <a class="link" href="#creating-a-host-to-host-vpn_configuring-a-vpn-connection" title="7.4. Creating a host-to-host VPN">host-to-host VPN</a> is already configured.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Copy the file with the configuration of your host-to-host VPN to a new file, for example:
					</p><pre class="screen"># <span class="strong strong"><strong>cp /etc/ipsec.d/<span class="emphasis"><em>my_host-to-host.conf</em></span> /etc/ipsec.d/<span class="emphasis"><em>my_site-to-site</em></span>.conf</strong></span></pre></li><li class="listitem"><p class="simpara">
						Add the subnet configuration to the file created in the previous step, for example:
					</p><pre class="screen">conn mysubnet
     also=mytunnel
     leftsubnet=192.0.1.0/24
     rightsubnet=192.0.2.0/24
     auto=start

conn mysubnet6
     also=mytunnel
     leftsubnet=2001:db8:0:1::/64
     rightsubnet=2001:db8:0:2::/64
     auto=start

# the following part of the configuration file is the same for both host-to-host and site-to-site connections:

conn mytunnel
    leftid=@west
    left=192.1.2.23
    leftrsasigkey=0sAQOrlo+hOafUZDlCQmXFrje/oZm [...] W2n417C/4urYHQkCvuIQ==
    rightid=@east
    right=192.1.2.45
    rightrsasigkey=0sAQO3fwC6nSSGgt64DWiYZzuHbc4 [...] D/v8t5YTQ==
    authby=rsasig</pre></li></ol></div></section><section class="section" id="configuring-a-remote-access-vpn_configuring-a-vpn-connection"><div class="titlepage"><div><div><h3 class="title">7.6. Configuring a remote access VPN</h3></div></div></div><p class="_abstract _abstract">
				Road warriors are traveling users with mobile clients and a dynamically assigned IP address. The mobile clients authenticate using X.509 certificates.
			</p><p>
				The following example shows configuration for <code class="literal">IKEv2</code>, and it avoids using the <code class="literal">IKEv1</code> XAUTH protocol.
			</p><p>
				On the server:
			</p><pre class="screen">conn roadwarriors
    ikev2=insist
    # support (roaming) MOBIKE clients (RFC 4555)
    mobike=yes
    fragmentation=yes
    left=1.2.3.4
    # if access to the LAN is given, enable this, otherwise use 0.0.0.0/0
    # leftsubnet=10.10.0.0/16
    leftsubnet=0.0.0.0/0
    leftcert=gw.example.com
    leftid=%fromcert
    leftxauthserver=yes
    leftmodecfgserver=yes
    right=%any
    # trust our own Certificate Agency
    rightca=%same
    # pick an IP address pool to assign to remote users
    # 100.64.0.0/16 prevents RFC1918 clashes when remote users are behind NAT
    rightaddresspool=100.64.13.100-100.64.13.254
    # if you want remote clients to use some local DNS zones and servers
    modecfgdns="1.2.3.4, 5.6.7.8"
    modecfgdomains="internal.company.com, corp"
    rightxauthclient=yes
    rightmodecfgclient=yes
    authby=rsasig
    # optionally, run the client X.509 ID through pam to allow or deny client
    # pam-authorize=yes
    # load connection, do not initiate
    auto=add
    # kill vanished roadwarriors
    dpddelay=1m
    dpdtimeout=5m
    dpdaction=clear</pre><p>
				On the mobile client, the road warrior’s device, use a slight variation of the previous configuration:
			</p><pre class="screen">conn to-vpn-server
    ikev2=insist
    # pick up our dynamic IP
    left=%defaultroute
    leftsubnet=0.0.0.0/0
    leftcert=myname.example.com
    leftid=%fromcert
    leftmodecfgclient=yes
    # right can also be a DNS hostname
    right=1.2.3.4
    # if access to the remote LAN is required, enable this, otherwise use 0.0.0.0/0
    # rightsubnet=10.10.0.0/16
    rightsubnet=0.0.0.0/0
    fragmentation=yes
    # trust our own Certificate Agency
    rightca=%same
    authby=rsasig
    # allow narrowing to the server’s suggested assigned IP and remote subnet
    narrowing=yes
    # support (roaming) MOBIKE clients (RFC 4555)
    mobike=yes
    # initiate connection
    auto=start</pre></section><section class="section" id="configuring-a-mesh-vpn_configuring-a-vpn-connection"><div class="titlepage"><div><div><h3 class="title">7.7. Configuring a mesh VPN</h3></div></div></div><p>
				A mesh VPN network, which is also known as an <span class="emphasis"><em>any-to-any</em></span> VPN, is a network where all nodes communicate using IPsec. The configuration allows for exceptions for nodes that cannot use IPsec. The mesh VPN network can be configured in two ways:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						To require IPsec.
					</li><li class="listitem">
						To prefer IPsec but allow a fallback to clear-text communication.
					</li></ul></div><p>
				Authentication between the nodes can be based on X.509 certificates or on DNS Security Extensions (DNSSEC).
			</p><p>
				You can use any regular IKEv2 authentication method for <span class="emphasis"><em>opportunistic IPsec</em></span>, because these connections are regular Libreswan configurations, except for the opportunistic IPsec that is defined by <code class="literal">right=%opportunisticgroup</code> entry. A common authentication method is for hosts to authenticate each other based on X.509 certificates using a commonly shared certification authority (CA). Cloud deployments typically issue certificates for each node in the cloud as part of the standard procedure.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					Do not use PreSharedKey (PSK) authentication because one compromised host would result in group PSK secret being compromised as well.
				</p></div></rh-alert><p>
				You can use NULL authentication to deploy encryption between nodes without authentication, which protects only against passive attackers.
			</p><p>
				The following procedure uses X.509 certificates. You can generate these certificates by using any kind of CA management system, such as the Dogtag Certificate System. Dogtag assumes that the certificates for each node are available in the PKCS #12 format (<code class="literal">.p12</code> files), which contain the private key, the node certificate, and the Root CA certificate used to validate other nodes' X.509 certificates.
			</p><p>
				Each node has an identical configuration with the exception of its X.509 certificate. This allows for adding new nodes without reconfiguring any of the existing nodes in the network. The PKCS #12 files require a "friendly name", for which we use the name "node" so that the configuration files referencing the friendly name can be identical for all nodes.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Libreswan is installed, and the <code class="literal">ipsec</code> service is started on each node.
					</li><li class="listitem"><p class="simpara">
						A new NSS database is initialized.
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								If you already have an old NSS database, remove the old database files:
							</p><pre class="screen"># <span class="strong strong"><strong>systemctl stop ipsec</strong></span>
# <span class="strong strong"><strong>rm /var/lib/ipsec/nss/*db</strong></span></pre></li><li class="listitem"><p class="simpara">
								You can initialize a new database with the following command:
							</p><pre class="screen"># <span class="strong strong"><strong>ipsec initnss</strong></span></pre></li></ol></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On each node, import PKCS #12 files. This step requires the password used to generate the PKCS #12 files:
					</p><pre class="screen"># <span class="strong strong"><strong>ipsec import nodeXXX.p12</strong></span></pre></li><li class="listitem"><p class="simpara">
						Create the following three connection definitions for the <code class="literal">IPsec required</code> (private), <code class="literal">IPsec optional</code> (private-or-clear), and <code class="literal">No IPsec</code> (clear) profiles:
					</p><pre class="screen"># <span class="strong strong"><strong>cat /etc/ipsec.d/mesh.conf</strong></span>
conn clear
	auto=ondemand <span id="CO1-1"><!--Empty--></span><span class="callout">1</span>
	type=passthrough
	authby=never
	left=%defaultroute
	right=%group

conn private
	auto=ondemand
	type=transport
	authby=rsasig
	failureshunt=drop
	negotiationshunt=drop
	ikev2=insist
	left=%defaultroute
	leftcert=<span class="emphasis"><em>nodeXXXX</em></span>
	leftid=%fromcert <span id="CO1-2"><!--Empty--></span><span class="callout">2</span>
	rightid=%fromcert
	right=%opportunisticgroup

conn private-or-clear
	auto=ondemand
	type=transport
	authby=rsasig
	failureshunt=passthrough
	negotiationshunt=passthrough
	# left
	left=%defaultroute
	leftcert=<span class="emphasis"><em>nodeXXXX</em></span> <span id="CO1-3"><!--Empty--></span><span class="callout">3</span>
	leftid=%fromcert
	leftrsasigkey=%cert
	# right
	rightrsasigkey=%cert
	rightid=%fromcert
	right=%opportunisticgroup</pre></li></ol></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO1-1"><span class="callout">1</span></a> </dt><dd><div class="para">
						The <code class="literal">auto</code> variable has several options:
					</div><p>
						You can use the <code class="literal">ondemand</code> connection option with opportunistic IPsec to initiate the IPsec connection, or for explicitly configured connections that do not need to be active all the time. This option sets up a trap XFRM policy in the kernel, enabling the IPsec connection to begin when it receives the first packet that matches that policy.
					</p><p>
						You can effectively configure and manage your IPsec connections, whether you use Opportunistic IPsec or explicitly configured connections, by using the following options:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">The <code class="literal">add</code> option</span></dt><dd>
									Loads the connection configuration and prepares it for responding to remote initiations. However, the connection is not automatically initiated from the local side. You can manually start the IPsec connection by using the command <code class="literal">ipsec auto --up</code>.
								</dd><dt><span class="term">The <code class="literal">start</code> option</span></dt><dd>
									Loads the connection configuration and prepares it for responding to remote initiations. Additionally, it immediately initiates a connection to the remote peer. You can use this option for permanent and always active connections.
								</dd></dl></div></dd><dt><a href="#CO1-2"><span class="callout">2</span></a> </dt><dd><div class="para">
						The <code class="literal">leftid</code> and <code class="literal">rightid</code> variables identify the right and the left channel of the IPsec tunnel connection. You can use these variables to obtain the value of the local IP address or the subject DN of the local certificate, if you have configured one.
					</div></dd><dt><a href="#CO1-3"><span class="callout">3</span></a> </dt><dd><div class="para">
						The <code class="literal">leftcert</code> variable defines the nickname of the NSS database that you want to use.
					</div><div class="orderedlist"><ol class="orderedlist" start="3" type="1"><li class="listitem"><p class="simpara">
								Add the IP address of the network to the corresponding category. For example, if all nodes reside in the <code class="literal">10.15.0.0/16</code> network, and all nodes must use IPsec encryption:
							</p><pre class="screen"># <span class="strong strong"><strong>echo "10.15.0.0/16" &gt;&gt; /etc/ipsec.d/policies/private</strong></span></pre></li><li class="listitem"><p class="simpara">
								To allow certain nodes, for example, <code class="literal">10.15.34.0/24</code>, to work with and without IPsec, add those nodes to the private-or-clear group:
							</p><pre class="screen"># <span class="strong strong"><strong>echo "10.15.34.0/24" &gt;&gt; /etc/ipsec.d/policies/private-or-clear</strong></span></pre></li><li class="listitem"><p class="simpara">
								To define a host, for example, <code class="literal">10.15.1.2</code>, which is not capable of IPsec into the clear group, use:
							</p><pre class="screen"># <span class="strong strong"><strong>echo "10.15.1.2/32" &gt;&gt; /etc/ipsec.d/policies/clear</strong></span></pre><p class="simpara">
								You can create the files in the <code class="literal">/etc/ipsec.d/policies</code> directory from a template for each new node, or you can provision them by using Puppet or Ansible.
							</p><p class="simpara">
								Note that every node has the same list of exceptions or different traffic flow expectations. Two nodes, therefore, might not be able to communicate because one requires IPsec and the other cannot use IPsec.
							</p></li><li class="listitem"><p class="simpara">
								Restart the node to add it to the configured mesh:
							</p><pre class="screen"># <span class="strong strong"><strong>systemctl restart ipsec</strong></span></pre></li></ol></div></dd></dl></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open an IPsec tunnel by using the <code class="literal">ping</code> command:
					</p><pre class="screen"># <span class="strong strong"><strong>ping <span class="emphasis"><em>&lt;nodeYYY&gt;</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Display the NSS database with the imported certification:
					</p><pre class="screen"># <span class="strong strong"><strong>certutil -L -d sql:/etc/ipsec.d</strong></span>

Certificate Nickname    Trust Attributes
                        SSL,S/MIME,JAR/XPI

west                    u,u,u
ca                      CT,,</pre></li><li class="listitem"><p class="simpara">
						See which tunnels are open on the node:
					</p><pre class="screen"># <span class="strong strong"><strong>ipsec trafficstatus</strong></span>
006 #2: "private#10.15.0.0/16"[1] ...<span class="emphasis"><em>&lt;nodeYYY&gt;</em></span>, type=ESP, add_time=1691399301, inBytes=512, outBytes=512, maxBytes=2^63B, id='C=US, ST=NC, O=Example Organization, CN=east'</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">ipsec.conf(5)</code> man page on your system
					</li><li class="listitem">
						For more information about the <code class="literal">authby</code> variable, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/securing_networks/configuring-a-vpn-with-ipsec_securing-networks#con_authentication-methods-in-libreswan_configuring-a-vpn-with-ipsec">6.2. Authentication methods in Libreswan</a>.
					</li></ul></div></section><section class="section" id="deploying-a-fips-compliant-ipsec-vpn_configuring-a-vpn-connection"><div class="titlepage"><div><div><h3 class="title">7.8. Deploying a FIPS-compliant IPsec VPN</h3></div></div></div><p>
				You can deploy a FIPS-compliant IPsec VPN solution with Libreswan. To do so, you can identify which cryptographic algorithms are available and which are disabled for Libreswan in FIPS mode.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">AppStream</code> repository is enabled.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the <code class="literal package">libreswan</code> packages:
					</p><pre class="screen"># <span class="strong strong"><strong>dnf install libreswan</strong></span></pre></li><li class="listitem"><p class="simpara">
						If you are re-installing Libreswan, remove its old NSS database:
					</p><pre class="screen"># <span class="strong strong"><strong>systemctl stop ipsec</strong></span>

# <span class="strong strong"><strong>rm /var/lib/ipsec/nss/*db</strong></span></pre></li><li class="listitem"><p class="simpara">
						Start the <code class="literal">ipsec</code> service, and enable the service to be started automatically on boot:
					</p><pre class="screen"># <span class="strong strong"><strong>systemctl enable ipsec --now</strong></span></pre></li><li class="listitem"><p class="simpara">
						Configure the firewall to allow <code class="literal">500</code> and <code class="literal">4500</code> UDP ports for the IKE, ESP, and AH protocols by adding the <code class="literal">ipsec</code> service:
					</p><pre class="screen"># <span class="strong strong"><strong>firewall-cmd --add-service="ipsec"</strong></span>
# <span class="strong strong"><strong>firewall-cmd --runtime-to-permanent</strong></span></pre></li><li class="listitem"><p class="simpara">
						Switch the system to FIPS mode:
					</p><pre class="screen"># <span class="strong strong"><strong>fips-mode-setup --enable</strong></span></pre></li><li class="listitem"><p class="simpara">
						Restart your system to allow the kernel to switch to FIPS mode:
					</p><pre class="screen"># <span class="strong strong"><strong>reboot</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Confirm Libreswan is running in FIPS mode:
					</p><pre class="screen"># <span class="strong strong"><strong>ipsec whack --fipsstatus</strong></span>
000 FIPS mode enabled</pre></li><li class="listitem"><p class="simpara">
						Alternatively, check entries for the <code class="literal">ipsec</code> unit in the <code class="literal">systemd</code> journal:
					</p><pre class="screen">$ <span class="strong strong"><strong>journalctl -u ipsec</strong></span>
...
Jan 22 11:26:50 localhost.localdomain pluto[3076]: FIPS Mode: YES</pre></li><li class="listitem"><p class="simpara">
						To see the available algorithms in FIPS mode:
					</p><pre class="screen"># <span class="strong strong"><strong>ipsec pluto --selftest 2&gt;&amp;1 | head -6</strong></span>
Initializing NSS using read-write database "sql:/var/lib/ipsec/nss"
FIPS Mode: YES
NSS crypto library initialized
FIPS mode enabled for pluto daemon
NSS library is running in FIPS mode
FIPS HMAC integrity support [disabled]</pre></li><li class="listitem"><p class="simpara">
						To query disabled algorithms in FIPS mode:
					</p><pre class="screen"># <span class="strong strong"><strong>ipsec pluto --selftest 2&gt;&amp;1 | grep disabled</strong></span>
Encryption algorithm CAMELLIA_CTR disabled; not FIPS compliant
Encryption algorithm CAMELLIA_CBC disabled; not FIPS compliant
Encryption algorithm NULL disabled; not FIPS compliant
Encryption algorithm CHACHA20_POLY1305 disabled; not FIPS compliant
Hash algorithm MD5 disabled; not FIPS compliant
PRF algorithm HMAC_MD5 disabled; not FIPS compliant
PRF algorithm AES_XCBC disabled; not FIPS compliant
Integrity algorithm HMAC_MD5_96 disabled; not FIPS compliant
Integrity algorithm HMAC_SHA2_256_TRUNCBUG disabled; not FIPS compliant
Integrity algorithm AES_XCBC_96 disabled; not FIPS compliant
DH algorithm MODP1536 disabled; not FIPS compliant
DH algorithm DH31 disabled; not FIPS compliant</pre></li><li class="listitem"><p class="simpara">
						To list all allowed algorithms and ciphers in FIPS mode:
					</p><pre class="screen"># <span class="strong strong"><strong>ipsec pluto --selftest 2&gt;&amp;1 | grep ESP | grep FIPS | sed "s/^.*FIPS//"</strong></span>
aes_ccm, aes_ccm_c
aes_ccm_b
aes_ccm_a
NSS(CBC)  3des
NSS(GCM)  aes_gcm, aes_gcm_c
NSS(GCM)  aes_gcm_b
NSS(GCM)  aes_gcm_a
NSS(CTR)  aesctr
NSS(CBC)  aes
aes_gmac
NSS       sha, sha1, sha1_96, hmac_sha1
NSS       sha512, sha2_512, sha2_512_256, hmac_sha2_512
NSS       sha384, sha2_384, sha2_384_192, hmac_sha2_384
NSS       sha2, sha256, sha2_256, sha2_256_128, hmac_sha2_256
aes_cmac
null
NSS(MODP) null, dh0
NSS(MODP) dh14
NSS(MODP) dh15
NSS(MODP) dh16
NSS(MODP) dh17
NSS(MODP) dh18
NSS(ECP)  ecp_256, ecp256
NSS(ECP)  ecp_384, ecp384
NSS(ECP)  ecp_521, ecp521</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/security_hardening/using-the-system-wide-cryptographic-policies_security-hardening">Using system-wide cryptographic policies</a>
					</li></ul></div></section><section class="section" id="protecting-the-ipsec-nss-database-by-a-password_configuring-a-vpn-connection"><div class="titlepage"><div><div><h3 class="title">7.9. Protecting the IPsec NSS database by a password</h3></div></div></div><p>
				By default, the IPsec service creates its Network Security Services (NSS) database with an empty password during the first start. To enhance security, you can add password protection.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">/var/lib/ipsec/nss/</code> directory contains NSS database files.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enable password protection for the <code class="literal">NSS</code> database for Libreswan:
					</p><pre class="screen"># <span class="strong strong"><strong>certutil -N -d sql:/var/lib/ipsec/nss</strong></span>
Enter Password or Pin for "NSS Certificate DB":
Enter a password which will be used to encrypt your keys.
The password should be at least 8 characters long,
and should contain at least one non-alphabetic character.

Enter new password:</pre></li><li class="listitem"><p class="simpara">
						Create the <code class="literal">/etc/ipsec.d/nsspassword</code> file that containins the password you have set in the previous step, for example:
					</p><pre class="screen"># <span class="strong strong"><strong>cat /etc/ipsec.d/nsspassword</strong></span>
NSS Certificate DB:_&lt;password&gt;_</pre><p class="simpara">
						The <code class="literal">nsspassword</code> file use the following syntax:
					</p><pre class="screen"><span class="emphasis"><em>&lt;token_1&gt;</em></span>:<span class="emphasis"><em>&lt;password1&gt;</em></span>
<span class="emphasis"><em>&lt;token_2&gt;</em></span>:<span class="emphasis"><em>&lt;password2&gt;</em></span></pre><p class="simpara">
						The default NSS software token is <code class="literal">NSS Certificate DB</code>. If your system is running in FIPS mode, the name of the token is <code class="literal">NSS FIPS 140-2 Certificate DB</code>.
					</p></li><li class="listitem"><p class="simpara">
						Depending on your scenario, either start or restart the <code class="literal">ipsec</code> service after you finish the <code class="literal">nsspassword</code> file:
					</p><pre class="screen"># <span class="strong strong"><strong>systemctl restart ipsec</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Check that the <code class="literal">ipsec</code> service is running after you have added a non-empty password to its NSS database:
					</p><pre class="screen"># <span class="strong strong"><strong>systemctl status ipsec</strong></span>
● ipsec.service - Internet Key Exchange (IKE) Protocol Daemon for IPsec
   Loaded: loaded (/usr/lib/systemd/system/ipsec.service; enabled; vendor preset: disable&gt;
   Active: active (running)...</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Check that the <code class="literal">Journal</code> log contains entries that confirm a successful initialization:
					</p><pre class="screen"># <span class="strong strong"><strong>journalctl -u ipsec</strong></span>
...
pluto[6214]: Initializing NSS using read-write database "sql:/var/lib/ipsec/nss"
pluto[6214]: NSS Password from file "/etc/ipsec.d/nsspassword" for token "NSS Certificate DB" with length 20 passed to NSS
pluto[6214]: NSS crypto library initialized
...</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">certutil(1)</code> man page on your system
					</li><li class="listitem">
						FIPS 140-2 and FIPS 140-3 in the <a class="link" href="https://access.redhat.com/articles/2918071#fips-140-2-and-fips-140-3-2">Compliance Activities and Government Standards</a> Knowledgebase article.
					</li></ul></div></section><section class="section" id="proc_configuring-an-ipsec-vpn-to-use-tcp_configuring-a-vpn-connection"><div class="titlepage"><div><div><h3 class="title">7.10. Configuring an IPsec VPN to use TCP</h3></div></div></div><p class="_abstract _abstract">
				Libreswan supports TCP encapsulation of IKE and IPsec packets as described in RFC 8229. With this feature, you can establish IPsec VPNs on networks that prevent traffic transmitted via UDP and Encapsulating Security Payload (ESP). You can configure VPN servers and clients to use TCP either as a fallback or as the main VPN transport protocol. Because TCP encapsulation has bigger performance costs, use TCP as the main VPN protocol only if UDP is permanently blocked in your scenario.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A <a class="link" href="#configuring-a-remote-access-vpn_configuring-a-vpn-connection" title="7.6. Configuring a remote access VPN">remote-access VPN</a> is already configured.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Add the following option to the <code class="literal">/etc/ipsec.conf</code> file in the <code class="literal">config setup</code> section:
					</p><pre class="screen">listen-tcp=yes</pre></li><li class="listitem"><p class="simpara">
						To use TCP encapsulation as a fallback option when the first attempt over UDP fails, add the following two options to the client’s connection definition:
					</p><pre class="screen">enable-tcp=fallback
tcp-remoteport=4500</pre><p class="simpara">
						Alternatively, if you know that UDP is permanently blocked, use the following options in the client’s connection configuration:
					</p><pre class="screen">enable-tcp=yes
tcp-remoteport=4500</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://tools.ietf.org/html/rfc8229">IETF RFC 8229: TCP Encapsulation of IKE and IPsec Packets</a>
					</li></ul></div></section><section class="section" id="proc_configuring-automatic-detection-and-usage-of-esp-hardware-offload-to-accelerate-an-ipsec-connection_configuring-a-vpn-connection"><div class="titlepage"><div><div><h3 class="title">7.11. Configuring automatic detection and usage of ESP hardware offload to accelerate an IPsec connection</h3></div></div></div><p>
				Offloading Encapsulating Security Payload (ESP) to the hardware accelerates IPsec connections over Ethernet. By default, Libreswan detects if hardware supports this feature and, as a result, enables ESP hardware offload. In case that the feature was disabled or explicitly enabled, you can switch back to automatic detection.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The network card supports ESP hardware offload.
					</li><li class="listitem">
						The network driver supports ESP hardware offload.
					</li><li class="listitem">
						The IPsec connection is configured and works.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Edit the Libreswan configuration file in the <code class="literal">/etc/ipsec.d/</code> directory of the connection that should use automatic detection of ESP hardware offload support.
					</li><li class="listitem">
						Ensure the <code class="literal">nic-offload</code> parameter is not set in the connection’s settings.
					</li><li class="listitem"><p class="simpara">
						If you removed <code class="literal">nic-offload</code>, restart the <code class="literal">ipsec</code> service:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl restart ipsec</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the <code class="literal">tx_ipsec</code> and <code class="literal">rx_ipsec</code> counters of the Ethernet device the IPsec connection uses:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ethtool -S <span class="emphasis"><em>enp1s0</em></span> | egrep "_ipsec"</strong></span>
     tx_ipsec: 10
     rx_ipsec: 10</pre></li><li class="listitem"><p class="simpara">
						Send traffic through the IPsec tunnel. For example, ping a remote IP address:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ping -c 5 <span class="emphasis"><em>remote_ip_address</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Display the <code class="literal">tx_ipsec</code> and <code class="literal">rx_ipsec</code> counters of the Ethernet device again:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ethtool -S <span class="emphasis"><em>enp1s0</em></span> | egrep "_ipsec"</strong></span>
     tx_ipsec: 15
     rx_ipsec: 15</pre><p class="simpara">
						If the counter values have increased, ESP hardware offload works.
					</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/securing_networks/configuring-a-vpn-with-ipsec_securing-networks">Configuring a VPN with IPsec</a>
					</li></ul></div></section><section class="section" id="proc_configuring-esp-hardware-offload-on-a-bond-to-accelerate-an-ipsec-connection_configuring-a-vpn-connection"><div class="titlepage"><div><div><h3 class="title">7.12. Configuring ESP hardware offload on a bond to accelerate an IPsec connection</h3></div></div></div><p class="_abstract _abstract">
				Offloading Encapsulating Security Payload (ESP) to the hardware accelerates IPsec connections. If you use a network bond for fail-over reasons, the requirements and the procedure to configure ESP hardware offload are different from those using a regular Ethernet device. For example, in this scenario, you enable the offload support on the bond, and the kernel applies the settings to the ports of the bond.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						All network cards in the bond support ESP hardware offload. Use the <code class="literal">ethtool -k <span class="emphasis"><em>&lt;interface_name&gt;</em></span> | grep "esp-hw-offload"</code> command to verify whether each bond port supports this feature.
					</li><li class="listitem">
						The bond is configured and works.
					</li><li class="listitem">
						The bond uses the <code class="literal">active-backup</code> mode. The bonding driver does not support any other modes for this feature.
					</li><li class="listitem">
						The IPsec connection is configured and works.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enable ESP hardware offload support on the network bond:
					</p><pre class="screen"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>bond0</em></span> ethtool.feature-esp-hw-offload on</strong></span></pre><p class="simpara">
						This command enables ESP hardware offload support on the <code class="literal systemitem">bond0</code> connection.
					</p></li><li class="listitem"><p class="simpara">
						Reactivate the <code class="literal systemitem">bond0</code> connection:
					</p><pre class="screen"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>bond0</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Edit the Libreswan configuration file in the <code class="literal">/etc/ipsec.d/</code> directory of the connection that should use ESP hardware offload, and append the <code class="literal">nic-offload=yes</code> statement to the connection entry:
					</p><pre class="screen">conn <span class="emphasis"><em>example</em></span>
    ...
    <span class="strong strong"><strong>nic-offload=yes</strong></span></pre></li><li class="listitem"><p class="simpara">
						Restart the <code class="literal">ipsec</code> service:
					</p><pre class="screen"># <span class="strong strong"><strong>systemctl restart ipsec</strong></span></pre></li></ol></div><div class="formalpara"><p class="title"><strong>Verification</strong></p><p>
					The verification methods depend on various aspects, such as the kernel version and driver. For example, certain drivers provide counters, but their names can vary. See the documentation of your network driver for details.
				</p></div><p>
				The following verification steps work for the <code class="literal">ixgbe</code> driver on Red Hat Enterprise Linux 9:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the active port of the bond:
					</p><pre class="screen"># <span class="strong strong"><strong>grep "Currently Active Slave" /proc/net/bonding/<span class="emphasis"><em>bond0</em></span></strong></span>
Currently Active Slave: <span class="emphasis"><em>enp1s0</em></span></pre></li><li class="listitem"><p class="simpara">
						Display the <code class="literal">tx_ipsec</code> and <code class="literal">rx_ipsec</code> counters of the active port:
					</p><pre class="screen"># <span class="strong strong"><strong>ethtool -S <span class="emphasis"><em>enp1s0</em></span> | egrep "_ipsec"</strong></span>
     tx_ipsec: 10
     rx_ipsec: 10</pre></li><li class="listitem"><p class="simpara">
						Send traffic through the IPsec tunnel. For example, ping a remote IP address:
					</p><pre class="screen"># <span class="strong strong"><strong>ping -c 5 <span class="emphasis"><em>remote_ip_address</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Display the <code class="literal">tx_ipsec</code> and <code class="literal">rx_ipsec</code> counters of the active port again:
					</p><pre class="screen"># <span class="strong strong"><strong>ethtool -S enp1s0 | egrep "_ipsec"</strong></span>
     tx_ipsec: 15
     rx_ipsec: 15</pre><p class="simpara">
						If the counter values have increased, ESP hardware offload works.
					</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#configuring-network-bonding_configuring-and-managing-networking" title="Chapter 3. Configuring a network bond">Configuring a network bond</a>
					</li><li class="listitem">
						<a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/securing_networks/configuring-a-vpn-connection_securing-networks">Setting up an IPsec VPN</a>
					</li></ul></div></section><section class="section" id="assembly_configuring-vpn-connections-with-ipsec-by-using-the-rhel-vpn-system-role_configuring-a-vpn-connection"><div class="titlepage"><div><div><h3 class="title">7.13. Configuring VPN connections with IPsec by using RHEL system roles</h3></div></div></div><p class="_abstract _abstract">
				With the <code class="literal">vpn</code> system role, you can configure VPN connections on RHEL systems by using Red Hat Ansible Automation Platform. You can use it to set up host-to-host, network-to-network, VPN Remote Access Server, and mesh configurations.
			</p><p>
				For host-to-host connections, the role sets up a VPN tunnel between each pair of hosts in the list of <code class="literal">vpn_connections</code> using the default parameters, including generating keys as needed. Alternatively, you can configure it to create an opportunistic mesh configuration between all hosts listed. The role assumes that the names of the hosts under <code class="literal">hosts</code> are the same as the names of the hosts used in the Ansible inventory, and that you can use those names to configure the tunnels.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The <code class="literal">vpn</code> RHEL system role currently supports only Libreswan, which is an IPsec implementation, as the VPN provider.
				</p></div></rh-alert><section class="section" id="proc_creating-a-host-to-host-vpn-with-ipsec-using-the-vpn-system-role_assembly_configuring-vpn-connections-with-ipsec-by-using-the-rhel-vpn-system-role"><div class="titlepage"><div><div><h4 class="title">7.13.1. Creating a host-to-host VPN with IPsec by using the <code class="literal">vpn</code> RHEL system role</h4></div></div></div><p>
					You can use the <code class="literal">vpn</code> system role to configure host-to-host connections by running an Ansible playbook on the control node, which configures all managed nodes listed in an inventory file.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles">You have prepared the control node and the managed nodes</a>
						</li><li class="listitem">
							You are logged in to the control node as a user who can run playbooks on the managed nodes.
						</li><li class="listitem">
							The account you use to connect to the managed nodes has <code class="literal">sudo</code> permissions on them.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a playbook file, for example <code class="literal">~/playbook.yml</code>, with the following content:
						</p><pre class="programlisting language-yaml">- name: Host to host VPN
  hosts: managed-node-01.example.com, managed-node-02.example.com
  roles:
    - rhel-system-roles.vpn
  vars:
    vpn_connections:
      - hosts:
          managed-node-01.example.com:
          managed-node-02.example.com:
    vpn_manage_firewall: true
    vpn_manage_selinux: true</pre><p class="simpara">
							This playbook configures the connection <code class="literal">managed-node-01.example.com-to-managed-node-02.example.com</code> by using pre-shared key authentication with keys auto-generated by the system role. Because <code class="literal">vpn_manage_firewall</code> and <code class="literal">vpn_manage_selinux</code> are both set to <code class="literal">true</code>, the <code class="literal">vpn</code> role uses the <code class="literal">firewall</code> and <code class="literal">selinux</code> roles to manage the ports used by the <code class="literal">vpn</code> role.
						</p><p class="simpara">
							To configure connections from managed hosts to external hosts that are not listed in the inventory file, add the following section to the <code class="literal">vpn_connections</code> list of hosts:
						</p><pre class="programlisting language-yaml">    vpn_connections:
      - hosts:
          managed-node-01.example.com:
          <span class="strong strong"><strong><span class="emphasis"><em>&lt;external_node&gt;</em></span>:</strong></span>
            <span class="strong strong"><strong>hostname: <span class="emphasis"><em>&lt;IP_address_or_hostname&gt;</em></span></strong></span></pre><p class="simpara">
							This configures one additional connection: <code class="literal">managed-node-01.example.com-to-<span class="emphasis"><em>&lt;external_node&gt;</em></span></code>
						</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								The connections are configured only on the managed nodes and not on the external node.
							</p></div></rh-alert></li><li class="listitem"><p class="simpara">
							Optional: You can specify multiple VPN connections for the managed nodes by using additional sections within <code class="literal">vpn_connections</code>, for example, a control plane and a data plane:
						</p><pre class="programlisting language-yaml">- name: Multiple VPN
  hosts: managed-node-01.example.com, managed-node-02.example.com
  roles:
    - rhel-system-roles.vpn
  vars:
    vpn_connections:
      - name: control_plane_vpn
        hosts:
          managed-node-01.example.com:
            hostname: 192.0.2.0 # IP for the control plane
          managed-node-02.example.com:
            hostname: 192.0.2.1
      - name: data_plane_vpn
        hosts:
          managed-node-01.example.com:
            hostname: 10.0.0.1 # IP for the data plane
          managed-node-02.example.com:
            hostname: 10.0.0.2</pre></li><li class="listitem"><p class="simpara">
							Validate the playbook syntax:
						</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --syntax-check ~/playbook.yml</strong></span></pre><p class="simpara">
							Note that this command only validates the syntax and does not protect against a wrong but valid configuration.
						</p></li><li class="listitem"><p class="simpara">
							Run the playbook:
						</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook ~/playbook.yml</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							On the managed nodes, confirm that the connection is successfully loaded:
						</p><pre class="literallayout"># <span class="strong strong"><strong>ipsec status | grep <span class="emphasis"><em>&lt;connection_name&gt;</em></span></strong></span></pre><p class="simpara">
							Replace <code class="literal"><span class="emphasis"><em>&lt;connection_name&gt;</em></span></code> with the name of the connection from this node, for example <code class="literal">managed_node1-to-managed_node2</code>.
						</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								By default, the role generates a descriptive name for each connection it creates from the perspective of each system. For example, when creating a connection between <code class="literal">managed_node1</code> and <code class="literal">managed_node2</code>, the descriptive name of this connection on <code class="literal">managed_node1</code> is <code class="literal">managed_node1-to-managed_node2</code> but on <code class="literal">managed_node2</code> the connection is named <code class="literal">managed_node2-to-managed_node1</code>.
							</p></div></rh-alert></li><li class="listitem"><p class="simpara">
							On the managed nodes, confirm that the connection is successfully started:
						</p><pre class="literallayout"># <span class="strong strong"><strong>ipsec trafficstatus | grep <span class="emphasis"><em>&lt;connection_name&gt;</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
							Optional: If a connection does not successfully load, manually add the connection by entering the following command. This provides more specific information indicating why the connection failed to establish:
						</p><pre class="literallayout"># <span class="strong strong"><strong>ipsec auto --add <span class="emphasis"><em>&lt;connection_name&gt;</em></span></strong></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								Any errors that may occur during the process of loading and starting the connection are reported in the <code class="literal">/var/log/pluto.log</code> file. Because these logs are hard to parse, manually add the connection to obtain log messages from the standard output instead.
							</p></div></rh-alert></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">/usr/share/ansible/roles/rhel-system-roles.vpn/README.md</code> file
						</li><li class="listitem">
							<code class="literal">/usr/share/doc/rhel-system-roles/vpn/</code> directory
						</li></ul></div></section><section class="section" id="proc_creating-an-opportunistic-mesh-vpn-connection-with-ipsec-by-using-the-vpn-system-role_assembly_configuring-vpn-connections-with-ipsec-by-using-the-rhel-vpn-system-role"><div class="titlepage"><div><div><h4 class="title">7.13.2. Creating an opportunistic mesh VPN connection with IPsec by using the <code class="literal">vpn</code> RHEL system role</h4></div></div></div><p>
					You can use the <code class="literal">vpn</code> system role to configure an opportunistic mesh VPN connection that uses certificates for authentication by running an Ansible playbook on the control node, which will configure all the managed nodes listed in an inventory file.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles">You have prepared the control node and the managed nodes</a>
						</li><li class="listitem">
							You are logged in to the control node as a user who can run playbooks on the managed nodes.
						</li><li class="listitem">
							The account you use to connect to the managed nodes has <code class="literal">sudo</code> permissions on them.
						</li><li class="listitem">
							The IPsec Network Security Services (NSS) crypto library in the <code class="literal">/etc/ipsec.d/</code> directory contains the necessary certificates.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a playbook file, for example <code class="literal">~/playbook.yml</code>, with the following content:
						</p><pre class="programlisting language-yaml">- name: <span class="emphasis"><em>Mesh VPN</em></span>
  hosts: managed-node-01.example.com, managed-node-02.example.com, managed-node-03.example.com
  roles:
    - rhel-system-roles.vpn
  vars:
    vpn_connections:
      - opportunistic: true
        auth_method: cert
        policies:
          - policy: private
            cidr: default
          - policy: private-or-clear
            cidr: 198.51.100.0/24
          - policy: private
            cidr: 192.0.2.0/24
          - policy: clear
            cidr: 192.0.2.7/32
    vpn_manage_firewall: true
    vpn_manage_selinux: true</pre><p class="simpara">
							Authentication with certificates is configured by defining the <code class="literal">auth_method: cert</code> parameter in the playbook. By default, the node name is used as the certificate nickname. In this example, this is <code class="literal">managed-node-01.example.com</code>. You can define different certificate names by using the <code class="literal">cert_name</code> attribute in your inventory.
						</p><p class="simpara">
							In this example procedure, the control node, which is the system from which you will run the Ansible playbook, shares the same classless inter-domain routing (CIDR) number as both of the managed nodes (192.0.2.0/24) and has the IP address 192.0.2.7. Therefore, the control node falls under the private policy which is automatically created for CIDR 192.0.2.0/24.
						</p><p class="simpara">
							To prevent SSH connection loss during the play, a clear policy for the control node is included in the list of policies. Note that there is also an item in the policies list where the CIDR is equal to default. This is because this playbook overrides the rule from the default policy to make it private instead of private-or-clear.
						</p><p class="simpara">
							Because <code class="literal">vpn_manage_firewall</code> and <code class="literal">vpn_manage_selinux</code> are both set to <code class="literal">true</code>, the <code class="literal">vpn</code> role uses the <code class="literal">firewall</code> and <code class="literal">selinux</code> roles to manage the ports used by the <code class="literal">vpn</code> role.
						</p></li><li class="listitem"><p class="simpara">
							Validate the playbook syntax:
						</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --syntax-check ~/playbook.yml</strong></span></pre><p class="simpara">
							Note that this command only validates the syntax and does not protect against a wrong but valid configuration.
						</p></li><li class="listitem"><p class="simpara">
							Run the playbook:
						</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook ~/playbook.yml</strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">/usr/share/ansible/roles/rhel-system-roles.vpn/README.md</code> file
						</li><li class="listitem">
							<code class="literal">/usr/share/doc/rhel-system-roles/vpn/</code> directory
						</li></ul></div></section></section><section class="section" id="configuring-ipsec-connections-that-opt-out-of-the-system-wide-crypto-policies_configuring-a-vpn-connection"><div class="titlepage"><div><div><h3 class="title">7.14. Configuring IPsec connections that opt out of the system-wide crypto policies</h3></div></div></div><div class="_abstract _abstract"><p class="title"><strong>Overriding system-wide crypto-policies for a connection</strong></p><p>
					The RHEL system-wide cryptographic policies create a special connection called <code class="literal">%default</code>. This connection contains the default values for the <code class="literal">ikev2</code>, <code class="literal">esp</code>, and <code class="literal">ike</code> options. However, you can override the default values by specifying the mentioned option in the connection configuration file.
				</p></div><p>
				For example, the following configuration allows connections that use IKEv1 with AES and SHA-1 or SHA-2, and IPsec (ESP) with either AES-GCM or AES-CBC:
			</p><pre class="screen">conn MyExample
  ...
  ikev2=never
  ike=aes-sha2,aes-sha1;modp2048
  esp=aes_gcm,aes-sha2,aes-sha1
  ...</pre><p>
				Note that AES-GCM is available for IPsec (ESP) and for IKEv2, but not for IKEv1.
			</p><div class="formalpara"><p class="title"><strong>Disabling system-wide crypto policies for all connections</strong></p><p>
					To disable system-wide crypto policies for all IPsec connections, comment out the following line in the <code class="literal">/etc/ipsec.conf</code> file:
				</p></div><pre class="screen">include /etc/crypto-policies/back-ends/libreswan.config</pre><p>
				Then add the <code class="literal">ikev2=never</code> option to your connection configuration file.
			</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/security_hardening/using-the-system-wide-cryptographic-policies_security-hardening">Using system-wide cryptographic policies</a>
					</li></ul></div></section><section class="section" id="ref_troubleshooting-ipsec-vpn-configurations_configuring-a-vpn-connection"><div class="titlepage"><div><div><h3 class="title">7.15. Troubleshooting IPsec VPN configurations</h3></div></div></div><p class="_abstract _abstract">
				Problems related to IPsec VPN configurations most commonly occur due to several main reasons. If you are encountering such problems, you can check if the cause of the problem corresponds to any of the following scenarios, and apply the corresponding solution.
			</p><div class="formalpara"><p class="title"><strong>Basic connection troubleshooting</strong></p><p>
					Most problems with VPN connections occur in new deployments, where administrators configured endpoints with mismatched configuration options. Also, a working configuration can suddenly stop working, often due to newly introduced incompatible values. This could be the result of an administrator changing the configuration. Alternatively, an administrator may have installed a firmware update or a package update with different default values for certain options, such as encryption algorithms.
				</p></div><p>
				To confirm that an IPsec VPN connection is established:
			</p><pre class="screen"># <span class="strong strong"><strong>ipsec trafficstatus</strong></span>
006 #8: "vpn.example.com"[1] 192.0.2.1, type=ESP, add_time=1595296930, inBytes=5999, outBytes=3231, id='@vpn.example.com', lease=100.64.13.5/32</pre><p>
				If the output is empty or does not show an entry with the connection name, the tunnel is broken.
			</p><p>
				To check that the problem is in the connection:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Reload the <span class="emphasis"><em>vpn.example.com</em></span> connection:
					</p><pre class="screen"># <span class="strong strong"><strong>ipsec auto --add <span class="emphasis"><em>vpn.example.com</em></span></strong></span>
002 added connection description "vpn.example.com"</pre></li><li class="listitem"><p class="simpara">
						Next, initiate the VPN connection:
					</p><pre class="screen"># <span class="strong strong"><strong>ipsec auto --up <span class="emphasis"><em>vpn.example.com</em></span></strong></span></pre></li></ol></div><div class="formalpara"><p class="title"><strong>Firewall-related problems</strong></p><p>
					The most common problem is that a firewall on one of the IPsec endpoints or on a router between the endpoints is dropping all Internet Key Exchange (IKE) packets.
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						For IKEv2, an output similar to the following example indicates a problem with a firewall:
					</p><pre class="screen"># <span class="strong strong"><strong>ipsec auto --up <span class="emphasis"><em>vpn.example.com</em></span></strong></span>
181 "vpn.example.com"[1] 192.0.2.2 #15: initiating IKEv2 IKE SA
181 "vpn.example.com"[1] 192.0.2.2 #15: STATE_PARENT_I1: sent v2I1, expected v2R1
010 "vpn.example.com"[1] 192.0.2.2 #15: STATE_PARENT_I1: retransmission; will wait 0.5 seconds for response
010 "vpn.example.com"[1] 192.0.2.2 #15: STATE_PARENT_I1: retransmission; will wait 1 seconds for response
010 "vpn.example.com"[1] 192.0.2.2 #15: STATE_PARENT_I1: retransmission; will wait 2 seconds for
...</pre></li><li class="listitem"><p class="simpara">
						For IKEv1, the output of the initiating command looks like:
					</p><pre class="screen"># <span class="strong strong"><strong>ipsec auto --up <span class="emphasis"><em>vpn.example.com</em></span></strong></span>
002 "vpn.example.com" #9: initiating Main Mode
102 "vpn.example.com" #9: STATE_MAIN_I1: sent MI1, expecting MR1
010 "vpn.example.com" #9: STATE_MAIN_I1: retransmission; will wait 0.5 seconds for response
010 "vpn.example.com" #9: STATE_MAIN_I1: retransmission; will wait 1 seconds for response
010 "vpn.example.com" #9: STATE_MAIN_I1: retransmission; will wait 2 seconds for response
...</pre></li></ul></div><p>
				Because the IKE protocol, which is used to set up IPsec, is encrypted, you can troubleshoot only a limited subset of problems using the <code class="literal">tcpdump</code> tool. If a firewall is dropping IKE or IPsec packets, you can try to find the cause using the <code class="literal">tcpdump</code> utility. However, <code class="literal">tcpdump</code> cannot diagnose other problems with IPsec VPN connections.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To capture the negotiation of the VPN and all encrypted data on the <code class="literal">eth0</code> interface:
					</p><pre class="screen"># <span class="strong strong"><strong>tcpdump -i eth0 -n -n esp or udp port 500 or udp port 4500 or tcp port 4500</strong></span></pre></li></ul></div><div class="formalpara"><p class="title"><strong>Mismatched algorithms, protocols, and policies</strong></p><p>
					VPN connections require that the endpoints have matching IKE algorithms, IPsec algorithms, and IP address ranges. If a mismatch occurs, the connection fails. If you identify a mismatch by using one of the following methods, fix it by aligning algorithms, protocols, or policies.
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						If the remote endpoint is not running IKE/IPsec, you can see an ICMP packet indicating it. For example:
					</p><pre class="screen"># <span class="strong strong"><strong>ipsec auto --up <span class="emphasis"><em>vpn.example.com</em></span></strong></span>
...
000 "vpn.example.com"[1] 192.0.2.2 #16: ERROR: asynchronous network error report on wlp2s0 (192.0.2.2:500), complainant 198.51.100.1: Connection refused [errno 111, origin ICMP type 3 code 3 (not authenticated)]
...</pre></li><li class="listitem"><p class="simpara">
						Example of mismatched IKE algorithms:
					</p><pre class="screen"># <span class="strong strong"><strong>ipsec auto --up vpn.example.com</strong></span>
...
003 "vpn.example.com"[1] 193.110.157.148 #3: dropping unexpected IKE_SA_INIT message containing NO_PROPOSAL_CHOSEN notification; message payloads: N; missing payloads: SA,KE,Ni</pre></li><li class="listitem"><p class="simpara">
						Example of mismatched IPsec algorithms:
					</p><pre class="screen"># <span class="strong strong"><strong>ipsec auto --up vpn.example.com</strong></span>
...
182 "vpn.example.com"[1] 193.110.157.148 #5: STATE_PARENT_I2: sent v2I2, expected v2R2 {auth=IKEv2 cipher=AES_GCM_16_256 integ=n/a prf=HMAC_SHA2_256 group=MODP2048}
002 "vpn.example.com"[1] 193.110.157.148 #6: IKE_AUTH response contained the error notification NO_PROPOSAL_CHOSEN</pre><p class="simpara">
						A mismatched IKE version could also result in the remote endpoint dropping the request without a response. This looks identical to a firewall dropping all IKE packets.
					</p></li><li class="listitem"><p class="simpara">
						Example of mismatched IP address ranges for IKEv2 (called Traffic Selectors - TS):
					</p><pre class="screen"># <span class="strong strong"><strong>ipsec auto --up vpn.example.com</strong></span>
...
1v2 "vpn.example.com" #1: STATE_PARENT_I2: sent v2I2, expected v2R2 {auth=IKEv2 cipher=AES_GCM_16_256 integ=n/a prf=HMAC_SHA2_512 group=MODP2048}
002 "vpn.example.com" #2: IKE_AUTH response contained the error notification TS_UNACCEPTABLE</pre></li><li class="listitem"><p class="simpara">
						Example of mismatched IP address ranges for IKEv1:
					</p><pre class="screen"># <span class="strong strong"><strong>ipsec auto --up vpn.example.com</strong></span>
...
031 "vpn.example.com" #2: STATE_QUICK_I1: 60 second timeout exceeded after 0 retransmits.  No acceptable response to our first Quick Mode message: perhaps peer likes no proposal</pre></li><li class="listitem"><p class="simpara">
						When using PreSharedKeys (PSK) in IKEv1, if both sides do not put in the same PSK, the entire IKE message becomes unreadable:
					</p><pre class="screen"># <span class="strong strong"><strong>ipsec auto --up vpn.example.com</strong></span>
...
003 "vpn.example.com" #1: received Hash Payload does not match computed value
223 "vpn.example.com" #1: sending notification INVALID_HASH_INFORMATION to 192.0.2.23:500</pre></li><li class="listitem"><p class="simpara">
						In IKEv2, the mismatched-PSK error results in an AUTHENTICATION_FAILED message:
					</p><pre class="screen"># <span class="strong strong"><strong>ipsec auto --up vpn.example.com</strong></span>
...
002 "vpn.example.com" #1: IKE SA authentication request rejected by peer: AUTHENTICATION_FAILED</pre></li></ul></div><div class="formalpara"><p class="title"><strong>Maximum transmission unit</strong></p><p>
					Other than firewalls blocking IKE or IPsec packets, the most common cause of networking problems relates to an increased packet size of encrypted packets. Network hardware fragments packets larger than the maximum transmission unit (MTU), for example, 1500 bytes. Often, the fragments are lost and the packets fail to re-assemble. This leads to intermittent failures, when a ping test, which uses small-sized packets, works but other traffic fails. In this case, you can establish an SSH session but the terminal freezes as soon as you use it, for example, by entering the 'ls -al /usr' command on the remote host.
				</p></div><p>
				To work around the problem, reduce MTU size by adding the <code class="literal">mtu=1400</code> option to the tunnel configuration file.
			</p><p>
				Alternatively, for TCP connections, enable an iptables rule that changes the MSS value:
			</p><pre class="screen"># <span class="strong strong"><strong>iptables -I FORWARD -p tcp --tcp-flags SYN,RST SYN -j TCPMSS --clamp-mss-to-pmtu</strong></span></pre><p>
				If the previous command does not solve the problem in your scenario, directly specify a lower size in the <code class="literal">set-mss</code> parameter:
			</p><pre class="screen"># <span class="strong strong"><strong>iptables -I FORWARD -p tcp --tcp-flags SYN,RST SYN -j TCPMSS --set-mss 1380</strong></span></pre><div class="formalpara"><p class="title"><strong>Network address translation (NAT)</strong></p><p>
					When an IPsec host also serves as a NAT router, it could accidentally remap packets. The following example configuration demonstrates the problem:
				</p></div><pre class="screen">conn myvpn
    left=172.16.0.1
    leftsubnet=10.0.2.0/24
    right=172.16.0.2
    rightsubnet=192.168.0.0/16
…</pre><p>
				The system with address 172.16.0.1 have a NAT rule:
			</p><pre class="screen">iptables -t nat -I POSTROUTING -o eth0 -j MASQUERADE</pre><p>
				If the system on address 10.0.2.33 sends a packet to 192.168.0.1, then the router translates the source 10.0.2.33 to 172.16.0.1 before it applies the IPsec encryption.
			</p><p>
				Then, the packet with the source address 10.0.2.33 no longer matches the <code class="literal">conn myvpn</code> configuration, and IPsec does not encrypt this packet.
			</p><p>
				To solve this problem, insert rules that exclude NAT for target IPsec subnet ranges on the router, in this example:
			</p><pre class="screen">iptables -t nat -I POSTROUTING -s 10.0.2.0/24 -d 192.168.0.0/16 -j RETURN</pre><div class="formalpara"><p class="title"><strong>Kernel IPsec subsystem bugs</strong></p><p>
					The kernel IPsec subsystem might fail, for example, when a bug causes a desynchronizing of the IKE user space and the IPsec kernel. To check for such problems:
				</p></div><pre class="screen">$ <span class="strong strong"><strong>cat /proc/net/xfrm_stat</strong></span>
XfrmInError                 0
XfrmInBufferError           0
...</pre><p>
				Any non-zero value in the output of the previous command indicates a problem. If you encounter this problem, open a new <a class="link" href="https://access.redhat.com/support">support case</a>, and attach the output of the previous command along with the corresponding IKE logs.
			</p><div class="formalpara"><p class="title"><strong>Libreswan logs</strong></p><p>
					Libreswan logs using the <code class="literal">syslog</code> protocol by default. You can use the <code class="literal">journalctl</code> command to find log entries related to IPsec. Because the corresponding entries to the log are sent by the <code class="literal">pluto</code> IKE daemon, search for the “pluto” keyword, for example:
				</p></div><pre class="screen">$ <span class="strong strong"><strong>journalctl -b | grep pluto</strong></span></pre><p>
				To show a live log for the <code class="literal">ipsec</code> service:
			</p><pre class="screen">$ <span class="strong strong"><strong>journalctl -f -u ipsec</strong></span></pre><p>
				If the default level of logging does not reveal your configuration problem, enable debug logs by adding the <code class="literal">plutodebug=all</code> option to the <code class="literal">config setup</code> section in the <code class="literal">/etc/ipsec.conf</code> file.
			</p><p>
				Note that debug logging produces a lot of entries, and it is possible that either the <code class="literal">journald</code> or <code class="literal">syslogd</code> service rate-limits the <code class="literal">syslog</code> messages. To ensure you have complete logs, redirect the logging to a file. Edit the <code class="literal">/etc/ipsec.conf</code>, and add the <code class="literal">logfile=/var/log/pluto.log</code> in the <code class="literal">config setup</code> section.
			</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/assembly_troubleshooting-problems-using-log-files_configuring-basic-system-settings">Troubleshooting problems by using log files</a>
					</li><li class="listitem">
						<code class="literal">tcpdump(8)</code> and <code class="literal">ipsec.conf(5)</code> man pages.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_firewalls_and_packet_filters/using-and-configuring-firewalld_firewall-packet-filters">Using and configuring firewalld</a>
					</li></ul></div></section><section class="section" id="configuring-a-VPN-connection-with-control-center_configuring-a-vpn-connection"><div class="titlepage"><div><div><h3 class="title">7.16. Configuring a VPN connection with control-center</h3></div></div></div><p class="_abstract _abstract">
				If you use Red Hat Enterprise Linux with a graphical interface, you can configure a VPN connection in the GNOME <code class="literal">control-center</code>.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">NetworkManager-libreswan-gnome</code> package is installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Press the <kbd class="keycap">Super</kbd> key, type <code class="literal">Settings</code>, and press <kbd class="keycap">Enter</kbd> to open the <code class="literal">control-center</code> application.
					</li><li class="listitem">
						Select the <code class="literal">Network</code> entry on the left.
					</li><li class="listitem">
						Click the <kbd class="keycap">+</kbd> icon.
					</li><li class="listitem">
						Select <code class="literal">VPN</code>.
					</li><li class="listitem"><p class="simpara">
						Select the <code class="literal">Identity</code> menu entry to see the basic configuration options:
					</p><p class="simpara">
						<span class="strong strong"><strong>General</strong></span>
					</p><p class="simpara">
						<code class="literal">Gateway</code> — The name or <code class="literal">IP</code> address of the remote VPN gateway.
					</p><p class="simpara">
						<span class="strong strong"><strong>Authentication</strong></span>
					</p><p class="simpara">
						<code class="literal">Type</code>
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">IKEv2 (Certificate)</code>- client is authenticated by certificate. It is more secure (default).
							</li><li class="listitem"><p class="simpara">
								<code class="literal">IKEv1 (XAUTH)</code> - client is authenticated by user name and password, or a pre-shared key (PSK).
							</p><p class="simpara">
								The following configuration settings are available under the <code class="literal">Advanced</code> section:
							</p><div class="figure" id="figu-Advanced-options-of-a-VPN-connection"><p class="title"><strong>Figure 7.1. Advanced options of a VPN connection</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/8bbdb7fbdba750f4225e1c151d3db025/networking_vpn_advanced_options.png" alt="networking vpn advanced options"></div></div></div><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
									When configuring an IPsec-based VPN connection using the <code class="literal">gnome-control-center</code> application, the <code class="literal">Advanced</code> dialog displays the configuration, but it does not allow any changes. As a consequence, users cannot change any advanced IPsec options. Use the <code class="literal">nm-connection-editor</code> or <code class="literal">nmcli</code> tools instead to perform configuration of the advanced properties.
								</p></div></rh-alert><p class="simpara">
								<span class="strong strong"><strong>Identification</strong></span>
							</p></li><li class="listitem"><p class="simpara">
								<code class="literal">Domain</code> — If required, enter the Domain Name.
							</p><p class="simpara">
								<span class="strong strong"><strong>Security</strong></span>
							</p></li><li class="listitem">
								<code class="literal">Phase1 Algorithms</code> — corresponds to the <code class="literal">ike</code> Libreswan parameter — enter the algorithms to be used to authenticate and set up an encrypted channel.
							</li><li class="listitem"><p class="simpara">
								<code class="literal">Phase2 Algorithms</code> — corresponds to the <code class="literal">esp</code> Libreswan parameter — enter the algorithms to be used for the <code class="literal">IPsec</code> negotiations.
							</p><p class="simpara">
								Check the <code class="literal">Disable PFS</code> field to turn off Perfect Forward Secrecy (PFS) to ensure compatibility with old servers that do not support PFS.
							</p></li><li class="listitem">
								<code class="literal">Phase1 Lifetime</code> — corresponds to the <code class="literal">ikelifetime</code> Libreswan parameter — how long the key used to encrypt the traffic will be valid.
							</li><li class="listitem"><p class="simpara">
								<code class="literal">Phase2 Lifetime</code> — corresponds to the <code class="literal">salifetime</code> Libreswan parameter — how long a particular instance of a connection should last before expiring.
							</p><p class="simpara">
								Note that the encryption key should be changed from time to time for security reasons.
							</p></li><li class="listitem"><p class="simpara">
								<code class="literal">Remote network</code> — corresponds to the <code class="literal">rightsubnet</code> Libreswan parameter — the destination private remote network that should be reached through the VPN.
							</p><p class="simpara">
								Check the <code class="literal">narrowing</code> field to enable narrowing. Note that it is only effective in IKEv2 negotiation.
							</p></li><li class="listitem">
								<code class="literal">Enable fragmentation</code> — corresponds to the <code class="literal">fragmentation</code> Libreswan parameter — whether or not to allow IKE fragmentation. Valid values are <code class="literal">yes</code> (default) or <code class="literal">no</code>.
							</li><li class="listitem">
								<code class="literal">Enable Mobike</code> — corresponds to the <code class="literal">mobike</code> Libreswan parameter — whether to allow Mobility and Multihoming Protocol (MOBIKE, RFC 4555) to enable a connection to migrate its endpoint without needing to restart the connection from scratch. This is used on mobile devices that switch between wired, wireless, or mobile data connections. The values are <code class="literal">no</code> (default) or <code class="literal">yes</code>.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Select the <span class="guibutton">IPv4</span> menu entry:
					</p><p class="simpara">
						<span class="strong strong"><strong>IPv4 Method</strong></span>
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">Automatic (DHCP)</code> — Choose this option if the network you are connecting to uses a <code class="literal">DHCP</code> server to assign dynamic <code class="literal">IP</code> addresses.
							</li><li class="listitem">
								<code class="literal">Link-Local Only</code> — Choose this option if the network you are connecting to does not have a <code class="literal">DHCP</code> server and you do not want to assign <code class="literal">IP</code> addresses manually. Random addresses will be assigned as per <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="http://www.rfc-editor.org/info/rfc3927">RFC 3927</a></span></em></span> with prefix <code class="literal">169.254/16</code>.
							</li><li class="listitem">
								<code class="literal">Manual</code> — Choose this option if you want to assign <code class="literal">IP</code> addresses manually.
							</li><li class="listitem"><p class="simpara">
								<code class="literal">Disable</code> — <code class="literal">IPv4</code> is disabled for this connection.
							</p><p class="simpara">
								<span class="strong strong"><strong>DNS</strong></span>
							</p><p class="simpara">
								In the <code class="literal">DNS</code> section, when <code class="literal">Automatic</code> is <code class="literal">ON</code>, switch it to <code class="literal">OFF</code> to enter the IP address of a DNS server you want to use separating the IPs by comma.
							</p><p class="simpara">
								<span class="strong strong"><strong>Routes</strong></span>
							</p><p class="simpara">
								Note that in the <code class="literal">Routes</code> section, when <code class="literal">Automatic</code> is <code class="literal">ON</code>, routes from DHCP are used, but you can also add additional static routes. When <code class="literal">OFF</code>, only static routes are used.
							</p></li><li class="listitem">
								<code class="literal">Address</code> — Enter the <code class="literal">IP</code> address of a remote network or host.
							</li><li class="listitem">
								<code class="literal">Netmask</code> — The netmask or prefix length of the <code class="literal">IP</code> address entered above.
							</li><li class="listitem">
								<code class="literal">Gateway</code> — The <code class="literal">IP</code> address of the gateway leading to the remote network or host entered above.
							</li><li class="listitem"><p class="simpara">
								<code class="literal">Metric</code> — A network cost, a preference value to give to this route. Lower values will be preferred over higher values.
							</p><p class="simpara">
								<span class="strong strong"><strong>Use this connection only for resources on its network</strong></span>
							</p><p class="simpara">
								Select this check box to prevent the connection from becoming the default route. Selecting this option means that only traffic specifically destined for routes learned automatically over the connection or entered here manually is routed over the connection.
							</p></li></ul></div></li><li class="listitem"><p class="simpara">
						To configure <code class="literal">IPv6</code> settings in a <code class="literal">VPN</code> connection, select the <span class="guibutton">IPv6</span> menu entry:
					</p><p class="simpara">
						<span class="strong strong"><strong>IPv6 Method</strong></span>
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">Automatic</code> — Choose this option to use <code class="literal">IPv6</code> Stateless Address AutoConfiguration (SLAAC) to create an automatic, stateless configuration based on the hardware address and Router Advertisements (RA).
							</li><li class="listitem">
								<code class="literal">Automatic, DHCP only</code> — Choose this option to not use RA, but request information from <code class="literal">DHCPv6</code> directly to create a stateful configuration.
							</li><li class="listitem">
								<code class="literal">Link-Local Only</code> — Choose this option if the network you are connecting to does not have a <code class="literal">DHCP</code> server and you do not want to assign <code class="literal">IP</code> addresses manually. Random addresses will be assigned as per <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="http://www.rfc-editor.org/info/rfc4862">RFC 4862</a></span></em></span> with prefix <code class="literal">FE80::0</code>.
							</li><li class="listitem">
								<code class="literal">Manual</code> — Choose this option if you want to assign <code class="literal">IP</code> addresses manually.
							</li><li class="listitem"><p class="simpara">
								<code class="literal">Disable</code> — <code class="literal">IPv6</code> is disabled for this connection.
							</p><p class="simpara">
								Note that <code class="literal">DNS</code>, <code class="literal">Routes</code>, <code class="literal">Use this connection only for resources on its network</code> are common to <code class="literal">IPv4</code> settings.
							</p></li></ul></div></li><li class="listitem">
						Once you have finished editing the <code class="literal">VPN</code> connection, click the <span class="guibutton">Add</span> button to customize the configuration or the <span class="guibutton">Apply</span> button to save it for the existing one.
					</li><li class="listitem">
						Switch the profile to <code class="literal">ON</code> to active the <code class="literal">VPN</code> connection.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nm-settings-libreswan(5)</code>
					</li></ul></div></section><section class="section _abstract" id="configuring-a-vpn-connection-using-nm-connection-editor_configuring-a-vpn-connection"><div class="titlepage"><div><div><h3 class="title">7.17. Configuring a VPN connection using nm-connection-editor</h3></div></div></div><p>
				If you use Red Hat Enterprise Linux with a graphical interface, you can configure a VPN connection in the <code class="literal">nm-connection-editor</code> application.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">NetworkManager-libreswan-gnome</code> package is installed.
					</li><li class="listitem"><p class="simpara">
						If you configure an Internet Key Exchange version 2 (IKEv2) connection:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The certificate is imported into the IPsec network security services (NSS) database.
							</li><li class="listitem">
								The nickname of the certificate in the NSS database is known.
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open a terminal, and enter:
					</p><pre class="screen">$ <span class="strong strong"><strong>nm-connection-editor</strong></span></pre></li><li class="listitem">
						Click the <span class="guibutton">+</span> button to add a new connection.
					</li><li class="listitem">
						Select the <code class="literal">IPsec based VPN</code> connection type, and click <span class="guibutton">Create</span>.
					</li><li class="listitem"><p class="simpara">
						On the <code class="literal">VPN</code> tab:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Enter the host name or IP address of the VPN gateway into the <code class="literal">Gateway</code> field, and select an authentication type. Based on the authentication type, you must enter different additional information:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">IKEv2 (Certifiate)</code> authenticates the client by using a certificate, which is more secure. This setting requires the nickname of the certificate in the IPsec NSS database
									</li><li class="listitem"><p class="simpara">
										<code class="literal">IKEv1 (XAUTH)</code> authenticates the user by using a user name and password (pre-shared key). This setting requires that you enter the following values:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
												User name
											</li><li class="listitem">
												Password
											</li><li class="listitem">
												Group name
											</li><li class="listitem">
												Secret
											</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
								If the remote server specifies a local identifier for the IKE exchange, enter the exact string in the <code class="literal">Remote ID</code> field. In the remote server runs Libreswan, this value is set in the server’s <code class="literal">leftid</code> parameter.
							</p><p class="simpara">
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/dbd1201152429f3672224d2020f5ffab/nm-connection-editor-vpn-tab.png" alt="nm connection editor vpn tab"></span>

							</p></li><li class="listitem"><p class="simpara">
								Optional: Configure additional settings by clicking the <span class="guibutton">Advanced</span> button. You can configure the following settings:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
										Identification
									</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
												<code class="literal">Domain</code> — If required, enter the domain name.
											</li></ul></div></li><li class="listitem"><p class="simpara">
										Security
									</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
												<code class="literal">Phase1 Algorithms</code> corresponds to the <code class="literal">ike</code> Libreswan parameter. Enter the algorithms to be used to authenticate and set up an encrypted channel.
											</li><li class="listitem"><p class="simpara">
												<code class="literal">Phase2 Algorithms</code> corresponds to the <code class="literal">esp</code> Libreswan parameter. Enter the algorithms to be used for the <code class="literal">IPsec</code> negotiations.
											</p><p class="simpara">
												Check the <code class="literal">Disable PFS</code> field to turn off Perfect Forward Secrecy (PFS) to ensure compatibility with old servers that do not support PFS.
											</p></li><li class="listitem">
												<code class="literal">Phase1 Lifetime</code> corresponds to the <code class="literal">ikelifetime</code> Libreswan parameter. This parameter defines how long the key used to encrypt the traffic is valid.
											</li><li class="listitem">
												<code class="literal">Phase2 Lifetime</code> corresponds to the <code class="literal">salifetime</code> Libreswan parameter. This parameter defines how long a security association is valid.
											</li></ul></div></li><li class="listitem"><p class="simpara">
										Connectivity
									</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
												<code class="literal">Remote network</code> corresponds to the <code class="literal">rightsubnet</code> Libreswan parameter and defines the destination private remote network that should be reached through the VPN.
											</p><p class="simpara">
												Check the <code class="literal">narrowing</code> field to enable narrowing. Note that it is only effective in the IKEv2 negotiation.
											</p></li><li class="listitem">
												<code class="literal">Enable fragmentation</code> corresponds to the <code class="literal">fragmentation</code> Libreswan parameter and defines whether or not to allow IKE fragmentation. Valid values are <code class="literal">yes</code> (default) or <code class="literal">no</code>.
											</li><li class="listitem">
												<code class="literal">Enable Mobike</code> corresponds to the <code class="literal">mobike</code> Libreswan parameter. The parameter defines whether to allow Mobility and Multihoming Protocol (MOBIKE) (RFC 4555) to enable a connection to migrate its endpoint without needing to restart the connection from scratch. This is used on mobile devices that switch between wired, wireless or mobile data connections. The values are <code class="literal">no</code> (default) or <code class="literal">yes</code>.
											</li></ul></div></li></ul></div></li></ol></div></li><li class="listitem"><p class="simpara">
						On the <code class="literal">IPv4 Settings</code> tab, select the IP assignment method and, optionally, set additional static addresses, DNS servers, search domains, and routes.
					</p><p class="simpara">
						<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/df41fd675600971c8b41909d6b8a522e/IPsec-IPv4-tab.png" alt="IPsec IPv4 tab"></span>

					</p></li><li class="listitem">
						Save the connection.
					</li><li class="listitem">
						Close <code class="literal">nm-connection-editor</code>.
					</li></ol></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					When you add a new connection by clicking the <span class="guibutton">+</span> button, <span class="strong strong"><strong>NetworkManager</strong></span> creates a new configuration file for that connection and then opens the same dialog that is used for editing an existing connection. The difference between these dialogs is that an existing connection profile has a <span class="strong strong"><strong>Details</strong></span> menu entry.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nm-settings-libreswan(5)</code> man page on your system
					</li></ul></div></section><section class="section" id="configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl_configuring-a-vpn-connection"><div class="titlepage"><div><div><h3 class="title">7.18. Configuring an IPsec based VPN connection by using nmstatectl</h3></div></div></div><p class="_abstract _abstract">
				IPsec (Internet Protocol Security) is a security protocol suite, provided by <code class="literal">Libreswan</code>, for implementation of VPN. IPsec includes protocols to initiate authentication at the time of connection establishment and manage keys during the data transfer. When an application deploys in a network and communicates by using the IP protocol, IPsec can protect data communication.
			</p><p>
				To manage an IPsec-based configuration for authenticating VPN connections, you can use the <code class="literal">nmstatectl</code> utility. This utility provides command line access to a declarative API for host network management. The following are the authentication types for the <code class="literal">host-to-subnet</code> and <code class="literal">host-to-host</code> communication modes:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Host-to-subnet PKI authentication
					</li><li class="listitem">
						Host-to-subnet RSA authentication
					</li><li class="listitem">
						Host-to-subnet PSK authentication
					</li><li class="listitem">
						Host-to-host tunnel mode authentication
					</li><li class="listitem">
						Host-to-host transport mode authentication
					</li></ul></div><section class="section" id="configuring-a-host-to-subnet-ipsec-vpn-with-pki-authentication-and-tunnel-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl"><div class="titlepage"><div><div><h4 class="title">7.18.1. Configuring a host-to-subnet IPSec VPN with PKI authentication and tunnel mode by using nmstatectl</h4></div></div></div><p class="_abstract _abstract">
					If you want to use encryption based on the trusted entity authentication in IPsec, Public Key Infrastructure (PKI) provides secure communication by using cryptographic keys between two hosts. Both communicating hosts generate private and public keys where each host maintains a private key by sharing public key with the trusted entity Certificate Authority (CA). The CA generates a digital certificate after verifying the authenticity. In case of encryption and decryption, the host uses a private key for encryption and public key for decryption.
				</p><p>
					By using Nmstate, a declarative API for network management, you can configure a PKI authentication-based IPsec connection. After setting the configuration, the Nmstate API ensures that the result matches with the configuration file. If anything fails, <code class="literal">nmstate</code> automatically rolls back the changes to avoid an incorrect state of the system.
				</p><p>
					To establish encrypted communication in <code class="literal">host-to-subnet</code> configuration, remote IPsec end provides another IP to host by using parameter <code class="literal">dhcp: true</code>. In the case of defining systems for <code class="literal">IPsec</code> in nmstate, the <code class="literal">left</code>-named system is the local host while the <code class="literal">right</code>-named system is the remote host. The following procedure needs to run on both hosts.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							By using a password, you have generated a PKCS #12 file that stores certificates and cryptographic keys.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Install the required packages:
						</p><pre class="screen"># <span class="strong strong"><strong>dnf install nmstate libreswan NetworkManager-libreswan</strong></span></pre></li><li class="listitem"><p class="simpara">
							Restart the NetworkManager service:
						</p><pre class="screen"># <span class="strong strong"><strong>systemctl restart NetworkManager</strong></span></pre></li><li class="listitem"><p class="simpara">
							As <code class="literal">Libreswan</code> was already installed, remove its old database files and re-create them:
						</p><pre class="screen"># <span class="strong strong"><strong>systemctl stop ipsec</strong></span>
# <span class="strong strong"><strong>rm /etc/ipsec.d/*db</strong></span>
# <span class="strong strong"><strong>ipsec initnss</strong></span></pre></li><li class="listitem"><p class="simpara">
							Enable and start the <code class="literal">ipsec</code> service:
						</p><pre class="screen"># <span class="strong strong"><strong>systemctl enable --now ipsec</strong></span></pre></li><li class="listitem"><p class="simpara">
							Import the PKCS#12 file:
						</p><pre class="screen"># <span class="strong strong"><strong>ipsec import node-example.p12</strong></span></pre><p class="simpara">
							When importing the PKCS#12 file, enter the password that was used to create the file.
						</p></li><li class="listitem"><p class="simpara">
							Create a YAML file, for example <code class="literal">~/create-pki-authentication.yml</code>, with the following content:
						</p><pre class="programlisting language-yaml">---
interfaces:
- name: 'example_ipsec_conn1'            <span id="CO2-1"><!--Empty--></span><span class="callout">1</span>
  type: ipsec
  ipv4:
    enabled: true
    dhcp: true
  libreswan:
    ipsec-interface: 'yes'               <span id="CO2-2"><!--Empty--></span><span class="callout">2</span>
    left: '192.0.2.250'                  <span id="CO2-3"><!--Empty--></span><span class="callout">3</span>
    leftid: '%fromcert'                  <span id="CO2-4"><!--Empty--></span><span class="callout">4</span>
    leftcert: 'local-host.example.com'   <span id="CO2-5"><!--Empty--></span><span class="callout">5</span>
    right: '192.0.2.150'                 <span id="CO2-6"><!--Empty--></span><span class="callout">6</span>
    rightid: '%fromcert'                 <span id="CO2-7"><!--Empty--></span><span class="callout">7</span>
    ikev2: 'insist'                      <span id="CO2-8"><!--Empty--></span><span class="callout">8</span>
    ikelifetime: '24h'                   <span id="CO2-9"><!--Empty--></span><span class="callout">9</span>
    salifetime: '24h'                    <span id="CO2-10"><!--Empty--></span><span class="callout">10</span></pre><p class="simpara">
							The YAML file defines the following settings:
						</p><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO2-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									An IPsec connection name
								</div></dd><dt><a href="#CO2-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									The value <code class="literal">yes</code> means <code class="literal">libreswan</code> creates an IPsec <code class="literal">xfrm</code> virtual interface <code class="literal">ipsec&lt;number&gt;</code> and automatically finds the next available number
								</div></dd><dt><a href="#CO2-3"><span class="callout">3</span></a> </dt><dd><div class="para">
									A static IPv4 address of public network interface for a local host
								</div></dd><dt><a href="#CO2-4"><span class="callout">4</span></a> </dt><dd><div class="para">
									On a local host, the value of <code class="literal">%fromcert</code> sets the ID to a Distinguished Name (DN) that is fetched from a loaded certificate
								</div></dd><dt><a href="#CO2-5"><span class="callout">5</span></a> </dt><dd><div class="para">
									A Distinguished Name (DN) of a local host’s public key
								</div></dd><dt><a href="#CO2-6"><span class="callout">6</span></a> </dt><dd><div class="para">
									A static IPv4 address of public network interface for a remote host
								</div></dd><dt><a href="#CO2-7"><span class="callout">7</span></a> </dt><dd><div class="para">
									On a remote host, the value of <code class="literal">%fromcert</code> sets the ID to a Distinguished Name (DN) that is fetched from a loaded certificate.
								</div></dd><dt><a href="#CO2-8"><span class="callout">8</span></a> </dt><dd><div class="para">
									<code class="literal">insist</code> value accepts and receives only the Internet Key Exchange (IKEv2) protocol
								</div></dd><dt><a href="#CO2-9"><span class="callout">9</span></a> </dt><dd><div class="para">
									The duration of IKE protocol
								</div></dd><dt><a href="#CO2-10"><span class="callout">10</span></a> </dt><dd><div class="para">
									The duration of IPsec security association (SA)
								</div></dd></dl></div></li><li class="listitem"><p class="simpara">
							Apply settings to the system:
						</p><pre class="screen"># <span class="strong strong"><strong>nmstatectl apply ~/create-pki-authentication.yml</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Verify IPsec status:
						</p><pre class="screen"># <span class="strong strong"><strong>ip xfrm status</strong></span></pre></li><li class="listitem"><p class="simpara">
							Verify IPsec policies:
						</p><pre class="screen"># <span class="strong strong"><strong>ip xfrm policy</strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">ipsec.conf(5)</code> man page on your system
						</li></ul></div></section><section class="section" id="configuring-a-host-to-subnet-ipsec-vpn-with-rsa-authentication-and-tunnel-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl"><div class="titlepage"><div><div><h4 class="title">7.18.2. Configuring a host-to-subnet IPSec VPN with RSA authentication and tunnel mode by using nmstatectl</h4></div></div></div><p>
					If you want to use asymmetric cryptography-based key authentication in IPsec, the RSA algorithm provides secure communication by using either of private and public keys for encryption and decryption between two hosts. This method uses a private key for encryption, and a public key for decryption.
				</p><p>
					By using Nmstate, a declarative API for network management, you can configure RSA-based IPsec authentication. After setting the configuration, the Nmstate API ensures that the result matches with the configuration file. If anything fails, <code class="literal">nmstate</code> automatically rolls back the changes to avoid an incorrect state of the system.
				</p><p>
					To establish encrypted communication in <code class="literal">host-to-subnet</code> configuration, remote IPsec end provides another IP to host by using parameter <code class="literal">dhcp: true</code>. In the case of defining systems for <code class="literal">IPsec</code> in nmstate, the <code class="literal">left</code>-named system is the local host while the <code class="literal">right</code>-named system is the remote host. The following procedure needs to run on both hosts.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Install the required packages:
						</p><pre class="screen"># <span class="strong strong"><strong>dnf install nmstate libreswan NetworkManager-libreswan</strong></span></pre></li><li class="listitem"><p class="simpara">
							Restart the NetworkManager service:
						</p><pre class="screen"># <span class="strong strong"><strong>systemctl restart NetworkManager</strong></span></pre></li><li class="listitem"><p class="simpara">
							If <code class="literal">Libreswan</code> was already installed, remove its old database files and re-create them:
						</p><pre class="screen"># <span class="strong strong"><strong>systemctl stop ipsec</strong></span>
# <span class="strong strong"><strong>rm /etc/ipsec.d/*db</strong></span>
# <span class="strong strong"><strong>ipsec initnss</strong></span></pre></li><li class="listitem"><p class="simpara">
							Generate a RSA key pair on each host:
						</p><pre class="screen"># <span class="strong strong"><strong>ipsec newhostkey --output</strong></span></pre></li><li class="listitem"><p class="simpara">
							Display the public keys:
						</p><pre class="screen"># <span class="strong strong"><strong>ipsec showhostkey --list</strong></span></pre></li><li class="listitem"><p class="simpara">
							The previous step returned the generated key <code class="literal">ckaid</code>. Use that <code class="literal">ckaid</code> with the following command on left, for example:
						</p><pre class="screen"># <span class="strong strong"><strong>ipsec showhostkey --left --ckaid <span class="emphasis"><em>&lt;0sAwEAAesFfVZqFzRA9F&gt;</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
							The output of the previous command generated the <code class="literal">leftrsasigkey=</code> line required for the configuration. Do the same on the second host (right):
						</p><pre class="screen"># <span class="strong strong"><strong>ipsec showhostkey --right --ckaid <span class="emphasis"><em>&lt;0sAwEAAesFfVZqFzRA9E&gt;</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
							Enable the <code class="literal">ipsec</code> service to automatically start it on boot:
						</p><pre class="screen"># <span class="strong strong"><strong>systemctl enable --now ipsec</strong></span></pre></li><li class="listitem"><p class="simpara">
							Create a YAML file, for example <code class="literal">~/create-rsa-authentication.yml</code>, with the following content:
						</p><pre class="programlisting language-yaml">---
interfaces:
- name: 'example_ipsec_conn1'               <span id="CO3-1"><!--Empty--></span><span class="callout">1</span>
  type: ipsec                               <span id="CO3-2"><!--Empty--></span><span class="callout">2</span>
  ipv4:
    enabled: true
    dhcp: true
  libreswan:
    ipsec-interface: '99'                   <span id="CO3-3"><!--Empty--></span><span class="callout">3</span>
    leftrsasigkey: '0sAwEAAesFfVZqFzRA9F'   <span id="CO3-4"><!--Empty--></span><span class="callout">4</span>
    left: '192.0.2.250'                     <span id="CO3-5"><!--Empty--></span><span class="callout">5</span>
    leftid: 'local-host-rsa.example.com'    <span id="CO3-6"><!--Empty--></span><span class="callout">6</span>
    right: '192.0.2.150'                    <span id="CO3-7"><!--Empty--></span><span class="callout">7</span>
    rightrsasigkey: '0sAwEAAesFfVZqFzRA9E'  <span id="CO3-8"><!--Empty--></span><span class="callout">8</span>
    rightid: 'remote-host-rsa.example.com'  <span id="CO3-9"><!--Empty--></span><span class="callout">9</span>
    ikev2: 'insist'                         <span id="CO3-10"><!--Empty--></span><span class="callout">10</span></pre><p class="simpara">
							The YAML file defines the following settings:
						</p><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO3-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									An IPsec connection name
								</div></dd><dt><a href="#CO3-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									An interface name
								</div></dd><dt><a href="#CO3-3"><span class="callout">3</span></a> </dt><dd><div class="para">
									The value <code class="literal">99</code> means that <code class="literal">libreswan</code> creates an IPsec <code class="literal">xfrm</code> virtual interface <code class="literal">ipsec&lt;number&gt;</code> and automatically finds the next available number
								</div></dd><dt><a href="#CO3-4"><span class="callout">4</span></a> </dt><dd><div class="para">
									The RSA public key of a local host
								</div></dd><dt><a href="#CO3-5"><span class="callout">5</span></a> </dt><dd><div class="para">
									A static IPv4 address of public network interface of a local host
								</div></dd><dt><a href="#CO3-6"><span class="callout">6</span></a> </dt><dd><div class="para">
									A Distinguished Name (DN) for a local host
								</div></dd><dt><a href="#CO3-7"><span class="callout">7</span></a> </dt><dd><div class="para">
									The RSA public key of a remote host
								</div></dd><dt><a href="#CO3-8"><span class="callout">8</span></a> </dt><dd><div class="para">
									A static IPv4 address of public network interface of a remote host
								</div></dd><dt><a href="#CO3-9"><span class="callout">9</span></a> </dt><dd><div class="para">
									A Distinguished Name(DN) for a remote host
								</div></dd><dt><a href="#CO3-10"><span class="callout">10</span></a> </dt><dd><div class="para">
									<code class="literal">insist</code> value accepts and receives only the Internet Key Exchange (IKEv2) protocol
								</div></dd></dl></div></li><li class="listitem"><p class="simpara">
							Apply the settings to the system:
						</p><pre class="screen"># <span class="strong strong"><strong>nmstatectl apply ~/create-rsa-authentication.yml</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Display the IP settings of the network interface:
						</p><pre class="screen"># <span class="strong strong"><strong>ip addr show example_ipsec_conn1</strong></span></pre></li><li class="listitem"><p class="simpara">
							Verify IPsec status:
						</p><pre class="screen"># <span class="strong strong"><strong>ip xfrm status</strong></span></pre></li><li class="listitem"><p class="simpara">
							Verify IPsec policies:
						</p><pre class="screen"># <span class="strong strong"><strong>ip xfrm policy</strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">ipsec.conf(5)</code> man page on your system
						</li></ul></div></section><section class="section" id="configuring-a-host-to-subnet-ipsec-vpn-with-psk-authentication-and-tunnel-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl"><div class="titlepage"><div><div><h4 class="title">7.18.3. Configuring a host-to-subnet IPSec VPN with PSK authentication and tunnel mode by using nmstatectl</h4></div></div></div><p>
					If you want to use encryption based on mutual authentication in IPsec, the Pre-Shared Key (PSK) method provides secure communication by using a secret key between two hosts. A file stores the secret key and the same key encrypts the data flowing through the tunnel.
				</p><p>
					By using Nmstate, a declarative API for network management, you can configure PSK-based IPsec authentication. After setting the configuration, the Nmstate API ensures that the result matches with the configuration file. If anything fails, <code class="literal">nmstate</code> automatically rolls back the changes to avoid incorrect state of the system.
				</p><p>
					To establish encrypted communication in <code class="literal">host-to-subnet</code> configuration, remote IPsec end provides another IP to host by using parameter <code class="literal">dhcp: true</code>. In the case of defining systems for <code class="literal">IPsec</code> in nmstate, the <code class="literal">left</code>-named system is the local host while the <code class="literal">right</code>-named system is the remote host. The following procedure needs to run on both hosts.
				</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
						As this method uses static strings for authentication and encryption, use it only for testing/development purposes.
					</p></div></rh-alert><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Install the required packages:
						</p><pre class="screen"># <span class="strong strong"><strong>dnf install nmstate libreswan NetworkManager-libreswan</strong></span></pre></li><li class="listitem"><p class="simpara">
							Restart the NetworkManager service:
						</p><pre class="screen"># <span class="strong strong"><strong>systemctl restart NetworkManager</strong></span></pre></li><li class="listitem"><p class="simpara">
							If <code class="literal">Libreswan</code> was already installed, remove its old database files and re-create them:
						</p><pre class="screen"># <span class="strong strong"><strong>systemctl stop ipsec</strong></span>
# <span class="strong strong"><strong>rm /etc/ipsec.d/*db</strong></span>
# <span class="strong strong"><strong>ipsec initnss</strong></span></pre></li><li class="listitem"><p class="simpara">
							Enable the <code class="literal">ipsec</code> service to automatically start it on boot:
						</p><pre class="screen"># <span class="strong strong"><strong>systemctl enable --now ipsec</strong></span></pre></li><li class="listitem"><p class="simpara">
							Create a YAML file, for example <code class="literal">~/create-pks-authentication.yml</code>, with the following content:
						</p><pre class="programlisting language-yaml">---
interfaces:
- name: 'example_ipsec_conn1'           <span id="CO4-1"><!--Empty--></span><span class="callout">1</span>
  type: ipsec
  ipv4:
    enabled: true
    dhcp: true
  libreswan:
    ipsec-interface: 'no'               <span id="CO4-2"><!--Empty--></span><span class="callout">2</span>
    right: '192.0.2.250'                <span id="CO4-3"><!--Empty--></span><span class="callout">3</span>
    rightid: 'remote-host.example.org'  <span id="CO4-4"><!--Empty--></span><span class="callout">4</span>
    left: '192.0.2.150'                 <span id="CO4-5"><!--Empty--></span><span class="callout">5</span>
    leftid: 'local-host.example.org'    <span id="CO4-6"><!--Empty--></span><span class="callout">6</span>
    psk: "example_password"
    ikev2: 'insist'                     <span id="CO4-7"><!--Empty--></span><span class="callout">7</span></pre><p class="simpara">
							The YAML file defines the following settings:
						</p><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO4-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									An IPsec connection name
								</div></dd><dt><a href="#CO4-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									Setting <code class="literal">no</code> value indicates that <code class="literal">libreswan</code> creates only <code class="literal">xfrm</code> policies, and not a virtual <code class="literal">xfrm</code> interface
								</div></dd><dt><a href="#CO4-3"><span class="callout">3</span></a> </dt><dd><div class="para">
									A static IPv4 address of public network interface of a remote host
								</div></dd><dt><a href="#CO4-4"><span class="callout">4</span></a> </dt><dd><div class="para">
									A Distinguished Name (DN) for a remote host
								</div></dd><dt><a href="#CO4-5"><span class="callout">5</span></a> </dt><dd><div class="para">
									A static IPv4 address of public network interface of a local host
								</div></dd><dt><a href="#CO4-6"><span class="callout">6</span></a> </dt><dd><div class="para">
									A Distinguished Name (DN) for a local host
								</div></dd><dt><a href="#CO4-7"><span class="callout">7</span></a> </dt><dd><div class="para">
									<code class="literal">insist</code> value accepts and receives only the Internet Key Exchange (IKEv2) protocol
								</div></dd></dl></div></li><li class="listitem"><p class="simpara">
							Apply the settings to the system:
						</p><pre class="screen"># <span class="strong strong"><strong>nmstatectl apply ~/create-pks-authentication.yml</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Display the IP settings of network interface:
						</p><pre class="screen"># <span class="strong strong"><strong>ip addr show example_ipsec_conn1</strong></span></pre></li><li class="listitem"><p class="simpara">
							Verify IPsec status:
						</p><pre class="screen"># <span class="strong strong"><strong>ip xfrm status</strong></span></pre></li><li class="listitem"><p class="simpara">
							Verify IPsec policies:
						</p><pre class="screen"># <span class="strong strong"><strong>ip xfrm policy</strong></span></pre></li></ol></div></section><section class="section" id="configuring-a-host-to-host-ipsec-vpn-with-pki-authentication-and-tunnel-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl"><div class="titlepage"><div><div><h4 class="title">7.18.4. Configuring a host-to-host IPsec VPN with PKI authentication and tunnel mode by using nmstatectl</h4></div></div></div><p class="_abstract _abstract">
					IPsec (Internet Protocol Security) is a security protocol suite to authenticate and encrypt IP communications within networks and devices. The <code class="literal">Libreswan</code> software provides an IPsec implementation for VPNs.
				</p><p>
					In tunnel mode, the source and destination IP address of communication is encrypted in the IPsec tunnel. External network sniffers can only get left IP and right IP. In general, for tunnel mode, it supports <code class="literal">host-to-host</code>, <code class="literal">host-to-subnet</code>, and <code class="literal">subnet-to-subnet</code>. In this mode, a new IP packet encapsulates an existing packet along with its payload and header. Encapsulation in this mode protects IP data, source, and destination headers over an unsecure network. This mode is useful to transfer data in <code class="literal">subnet-to-subnet</code>, remote access connections, and untrusted networks, such as open public Wi-Fi networks. By default, IPsec establishes a secure channel between two sites in tunnel mode. With the following configuration, you can establish a VPN connection as a <code class="literal">host-to-host</code> architecture.
				</p><p>
					By using Nmstate, a declarative API for network management, you can configure an IPsec VPN connection. After setting the configuration, the Nmstate API ensures that the result matches with the configuration file. If anything fails, <code class="literal">nmstate</code> automatically rolls back the changes to avoid incorrect state of the system.
				</p><p>
					In <code class="literal">host-to-host</code> configuration, you need to set <code class="literal">leftmodecfgclient: no</code> so that it can’t receive network configuration from the server, hence the value <code class="literal">no</code>. In the case of defining systems for <code class="literal">IPsec</code> in nmstate, the <code class="literal">left</code>-named system is the local host while the <code class="literal">right</code>-named system is the remote host. The following procedure needs to run on both hosts.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							By using a password, you have generated a PKCS #12 file that stores certificates and cryptographic keys.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Install the required packages:
						</p><pre class="screen"># <span class="strong strong"><strong>dnf install nmstate libreswan NetworkManager-libreswan</strong></span></pre></li><li class="listitem"><p class="simpara">
							Restart the NetworkManager service:
						</p><pre class="screen"># <span class="strong strong"><strong>systemctl restart NetworkManager</strong></span></pre></li><li class="listitem"><p class="simpara">
							As <code class="literal">Libreswan</code> was already installed, remove its old database files and re-create them:
						</p><pre class="screen"># <span class="strong strong"><strong>systemctl stop ipsec</strong></span>
# <span class="strong strong"><strong>rm /etc/ipsec.d/*db</strong></span>
# <span class="strong strong"><strong>ipsec initnss</strong></span></pre></li><li class="listitem"><p class="simpara">
							Import the PKCS#12 file:
						</p><pre class="screen"># <span class="strong strong"><strong>ipsec import node-example.p12</strong></span></pre><p class="simpara">
							When importing the PKCS#12 file, enter the password that was used to generate the file.
						</p></li><li class="listitem"><p class="simpara">
							Enable and start the <code class="literal">ipsec</code> service:
						</p><pre class="screen"># <span class="strong strong"><strong>systemctl enable --now ipsec</strong></span></pre></li><li class="listitem"><p class="simpara">
							Create a YAML file, for example <code class="literal">~/create-p2p-vpn-authentication.yml</code>, with the following content:
						</p><pre class="programlisting language-yaml">---
interfaces:
- name: 'example_ipsec_conn1'             <span id="CO5-1"><!--Empty--></span><span class="callout">1</span>
  type: ipsec
  libreswan:
    left: '192.0.2.250'                   <span id="CO5-2"><!--Empty--></span><span class="callout">2</span>
    leftid:  'local-host.example.com'     <span id="CO5-3"><!--Empty--></span><span class="callout">3</span>
    leftcert: 'local-host.example.com'    <span id="CO5-4"><!--Empty--></span><span class="callout">4</span>
    leftmodecfgclient: 'no'               <span id="CO5-5"><!--Empty--></span><span class="callout">5</span>
    right: '192.0.2.150'                  <span id="CO5-6"><!--Empty--></span><span class="callout">6</span>
    rightid: 'remote-host.example.com'    <span id="CO5-7"><!--Empty--></span><span class="callout">7</span>
    rightsubnet: '192.0.2.150/32'         <span id="CO5-8"><!--Empty--></span><span class="callout">8</span>
    ikev2: 'insist'                       <span id="CO5-9"><!--Empty--></span><span class="callout">9</span></pre><p class="simpara">
							The YAML file defines the following settings:
						</p><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO5-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									An IPsec connection name
								</div></dd><dt><a href="#CO5-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									A static IPv4 address of public network interface for a local host
								</div></dd><dt><a href="#CO5-3"><span class="callout">3</span></a> </dt><dd><div class="para">
									A distinguished Name (DN) of a local host
								</div></dd><dt><a href="#CO5-4"><span class="callout">4</span></a> </dt><dd><div class="para">
									A certificate name installed on a local host
								</div></dd><dt><a href="#CO5-5"><span class="callout">5</span></a> </dt><dd><div class="para">
									The value for not to retrieve client configuration from a remote host
								</div></dd><dt><a href="#CO5-6"><span class="callout">6</span></a> </dt><dd><div class="para">
									A static IPv4 address of public network interface for a remote host
								</div></dd><dt><a href="#CO5-7"><span class="callout">7</span></a> </dt><dd><div class="para">
									A distinguished Name (DN) of a remote host
								</div></dd><dt><a href="#CO5-8"><span class="callout">8</span></a> </dt><dd><div class="para">
									The subnet range of a remote host - <code class="literal">192.0.2.150</code> with <code class="literal">32</code> IPv4 addresses
								</div></dd><dt><a href="#CO5-9"><span class="callout">9</span></a> </dt><dd><div class="para">
									The value to accept and receive only the Internet Key Exchange (IKEv2) protocol
								</div></dd></dl></div></li><li class="listitem"><p class="simpara">
							Apply the settings to the system:
						</p><pre class="screen"># <span class="strong strong"><strong>nmstatectl apply ~/create-p2p-vpn-authentication.yml</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Display the created P2P policy:
						</p><pre class="screen"># <span class="strong strong"><strong>ip xfrm policy</strong></span></pre></li><li class="listitem"><p class="simpara">
							Verify IPsec status:
						</p><pre class="screen"># <span class="strong strong"><strong>ip xfrm status</strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">ipsec.conf(5)</code> man page on your system
						</li></ul></div></section><section class="section" id="configuring-a-host-to-host-ipsec-vpn-with-psk-authentication-and-transport-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl"><div class="titlepage"><div><div><h4 class="title">7.18.5. Configuring a host-to-host IPsec VPN with PSK authentication and transport mode by using nmstatectl</h4></div></div></div><p class="_abstract _abstract">
					IPsec (Internet Protocol Security) is a security protocol suite to authenticate and encrypt IP communications within networks and devices. The <code class="literal">Libreswan</code> utility provides IPsec based implementation for VPN.
				</p><p>
					In transport mode, encryption works only for the payload of an IP packet. Also, a new IPsec header gets appended to the IP packet by keeping the original IP header as it is. Transport mode does not encrypt the source and destination IP of communication but copies them to an external IP header. Hence, encryption protects only IP data across the network. This mode is useful to transfer data in a <code class="literal">host-to-host</code> connection of a network. This mode is often used along with the GRE tunnel to save 20 bytes (IP header) of overheads. By default, the <code class="literal">IPsec</code> utility uses tunnel mode. To use transfer mode, set <code class="literal">type: transport</code> for <code class="literal">host-to-host</code> connection data transfer.
				</p><p>
					By using Nmstate, a declarative API for network management, you can configure an IPsec VPN connection. After setting the configuration, the Nmstate API ensures that the result matches with the configuration file. If anything fails, <code class="literal">nmstate</code> automatically rolls back the changes to avoid incorrect state of the system. To override the default <code class="literal">tunnel</code> mode, specify <code class="literal">transport</code> mode.
				</p><p>
					In the case of defining systems for <code class="literal">IPsec</code> in nmstate, the <code class="literal">left</code>-named system is the local host while the <code class="literal">right</code>-named system is the remote host. The following procedure needs to run on both hosts.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							By using a password, you have generated a PKCS #12 file that stores certificates and cryptographic keys.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Install the required packages:
						</p><pre class="screen"># <span class="strong strong"><strong>dnf install nmstate libreswan NetworkManager-libreswan</strong></span></pre></li><li class="listitem"><p class="simpara">
							Restart the NetworkManager service:
						</p><pre class="screen"># <span class="strong strong"><strong>systemctl restart NetworkManager</strong></span></pre></li><li class="listitem"><p class="simpara">
							As <code class="literal">Libreswan</code> was already installed, remove its old database files and re-create them:
						</p><pre class="screen"># <span class="strong strong"><strong>systemctl stop ipsec</strong></span>
# <span class="strong strong"><strong>rm /etc/ipsec.d/*db</strong></span>
# <span class="strong strong"><strong>ipsec initnss</strong></span></pre></li><li class="listitem"><p class="simpara">
							Import the PKCS#12 file:
						</p><pre class="screen"># <span class="strong strong"><strong>ipsec import node-example.p12</strong></span></pre><p class="simpara">
							When importing the PKCS#12 file, enter the password that was used to create the file.
						</p></li><li class="listitem"><p class="simpara">
							Enable and start the <code class="literal">ipsec</code> service:
						</p><pre class="screen"># <span class="strong strong"><strong>systemctl enable --now ipsec</strong></span></pre></li><li class="listitem"><p class="simpara">
							Create a YAML file, for example <code class="literal">~/create-p2p-transport-authentication.yml</code>, with the following content:
						</p><pre class="programlisting language-yaml">---
interfaces:
- name: 'example_ipsec_conn1'           <span id="CO6-1"><!--Empty--></span><span class="callout">1</span>
  type: ipsec
  libreswan:
    type: 'transport'                   <span id="CO6-2"><!--Empty--></span><span class="callout">2</span>
    ipsec-interface: '99'               <span id="CO6-3"><!--Empty--></span><span class="callout">3</span>
    left: '192.0.2.250'                 <span id="CO6-4"><!--Empty--></span><span class="callout">4</span>
    leftid: '%fromcert'                 <span id="CO6-5"><!--Empty--></span><span class="callout">5</span>
    leftcert: 'local-host.example.org'  <span id="CO6-6"><!--Empty--></span><span class="callout">6</span>
    right: '192.0.2.150'                <span id="CO6-7"><!--Empty--></span><span class="callout">7</span>
    prefix-length: '32'                 <span id="CO6-8"><!--Empty--></span><span class="callout">8</span>
    rightid: '%fromcert'                <span id="CO6-9"><!--Empty--></span><span class="callout">9</span>
    ikev2: 'insist'                     <span id="CO6-10"><!--Empty--></span><span class="callout">10</span>
    ikelifetime: '24h'                  <span id="CO6-11"><!--Empty--></span><span class="callout">11</span>
    salifetime: '24h'                   <span id="CO6-12"><!--Empty--></span><span class="callout">12</span></pre><p class="simpara">
							The YAML file defines the following settings:
						</p><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO6-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									An IPsec connection name
								</div></dd><dt><a href="#CO6-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									An IPsec mode
								</div></dd><dt><a href="#CO6-3"><span class="callout">3</span></a> </dt><dd><div class="para">
									The value <code class="literal">99</code> means that <code class="literal">libreswan</code> creates an IPsec <code class="literal">xfrm</code> virtual interface <code class="literal">ipsec&lt;number&gt;</code> and automatically finds the next available number
								</div></dd><dt><a href="#CO6-4"><span class="callout">4</span></a> </dt><dd><div class="para">
									A static IPv4 address of public network interface for a local host
								</div></dd><dt><a href="#CO6-5"><span class="callout">5</span></a> </dt><dd><div class="para">
									On a local host, the value of <code class="literal">%fromcert</code> sets the ID to a Distinguished Name (DN) which is fetched from a loaded certificate
								</div></dd><dt><a href="#CO6-6"><span class="callout">6</span></a> </dt><dd><div class="para">
									A Distinguished Name (DN) of a local host’s public key
								</div></dd><dt><a href="#CO6-7"><span class="callout">7</span></a> </dt><dd><div class="para">
									A static IPv4 address of public network interface for a remote host
								</div></dd><dt><a href="#CO6-8"><span class="callout">8</span></a> </dt><dd><div class="para">
									The subnet mask of a static IPv4 address of a local host
								</div></dd><dt><a href="#CO6-9"><span class="callout">9</span></a> </dt><dd><div class="para">
									On a remote host, the value of <code class="literal">%fromcert</code> sets the ID to a Distinguished Name (DN) which is fetched from a loaded certificate
								</div></dd><dt><a href="#CO6-10"><span class="callout">10</span></a> </dt><dd><div class="para">
									The value to accept and receive only the Internet Key Exchange (IKEv2) protocol
								</div></dd><dt><a href="#CO6-11"><span class="callout">11</span></a> </dt><dd><div class="para">
									The duration of IKE protocol
								</div></dd><dt><a href="#CO6-12"><span class="callout">12</span></a> </dt><dd><div class="para">
									The duration of IPsec security association (SA)
								</div></dd></dl></div></li><li class="listitem"><p class="simpara">
							Apply the settings to the system:
						</p><pre class="screen"># <span class="strong strong"><strong>nmstatectl apply ~/create-p2p-transport-authentication.yml</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Verify IPsec status:
						</p><pre class="screen"># <span class="strong strong"><strong>ip xfrm status</strong></span></pre></li><li class="listitem"><p class="simpara">
							Verify IPsec policies:
						</p><pre class="screen"># <span class="strong strong"><strong>ip xfrm policy</strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">ipsec.conf(5)</code> man page on your system
						</li></ul></div></section></section><section class="section _additional-resources" id="related-information-configuring-a-vpn-connection"><div class="titlepage"><div><div><h3 class="title">7.19. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">ipsec(8)</code>, <code class="literal">ipsec.conf(5)</code>, <code class="literal">ipsec.secrets(5)</code>, <code class="literal">ipsec_auto(8)</code>, and <code class="literal">ipsec_rsasigkey(8)</code> man pages.
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/libreswan-<span class="emphasis"><em>version</em></span>/</code> directory.
					</li><li class="listitem">
						<a class="link" href="https://libreswan.org/wiki">The Libreswan Project Wiki</a>.
					</li><li class="listitem">
						<a class="link" href="https://libreswan.org/man/">All Libreswan man pages</a>.
					</li><li class="listitem">
						<a class="link" href="https://doi.org/10.6028/NIST.SP.800-77r1">NIST Special Publication 800-77: Guide to IPsec VPNs</a>.
					</li></ul></div></section></section><section class="chapter" id="assembly_setting-up-a-wireguard-vpn_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 8. Setting up a WireGuard VPN</h2></div></div></div><p class="_abstract _abstract">
			WireGuard is a high-performance VPN solution that runs in the Linux kernel. It uses modern cryptography and is easier to configure than many other VPN solutions. Additionally, WireGuard’s small codebase reduces the surface for attacks and, therefore, improves security. For authentication and encryption, WireGuard uses keys similar to SSH.
		</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
				WireGuard is provided as a Technology Preview only. Technology Preview features are not supported with Red Hat production Service Level Agreements (SLAs), might not be functionally complete, and Red Hat does not recommend using them for production. These previews provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
			</p><p>
				See <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
			</p></div></rh-alert><p>
			Note that all hosts that participate in a WireGuard VPN are peers. This documentation uses the terms <code class="literal">client</code> to describe hosts that establish a connection and <code class="literal">server</code> to describe the host with the fixed hostname or IP address that the clients connect to and optionally route all traffic through this server.
		</p><p>
			To set up a WireGuard VPN, you must complete the following steps. You can perform most steps by using different options:
		</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
					<a class="link" href="#proc_creating-private-and-public-keys-to-be-used-in-wireguard-connections_assembly_setting-up-a-wireguard-vpn" title="8.4. Creating private and public keys to be used in WireGuard connections">Create public and private keys for every host in the VPN</a>.
				</li><li class="listitem">
					Configure the WireGuard server by using <a class="link" href="#proc_configuring-a-wireguard-by-using-nmcli_assembly_setting-up-a-wireguard-vpn" title="8.5. Configuring a WireGuard server by using nmcli">nmcli</a>, <a class="link" href="#proc_configuring-a-wireguard-server-by-using-nmtui_assembly_setting-up-a-wireguard-vpn" title="8.6. Configuring a WireGuard server by using nmtui">nmtui</a>, the <a class="link" href="#configuring-a-wireguard-server-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn" title="8.7. Configuring a WireGuard server by using the RHEL web console">RHEL web console</a>, <a class="link" href="#proc_configuring-a-wireguard-server-by-using-nm-connection-editor_assembly_setting-up-a-wireguard-vpn" title="8.8. Configuring a WireGuard server by using nm-connection-editor">nm-connection-editor</a>, or the <a class="link" href="#proc_configuring-a-wireguard-server-by-using-the-wg-quick-service_assembly_setting-up-a-wireguard-vpn" title="8.9. Configuring a WireGuard server by using the wg-quick service">wg-quick</a> service.
				</li><li class="listitem">
					Configure firewalld on the WireGuard server by using the <a class="link" href="#proc_configuring-firewalld-on-a-wireguard-server-by-using-the-command-line_assembly_setting-up-a-wireguard-vpn" title="8.10. Configuring firewalld on a WireGuard server by using the command line">command line</a>, the <a class="link" href="#configuring-firewalld-on-a-wireguard-server-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn" title="8.11. Configuring firewalld on a WireGuard server by using the RHEL web console">RHEL web console</a>, or <a class="link" href="#proc_configuring-firewalld-on-a-wireguard-server-by-using-the-graphical-interface_assembly_setting-up-a-wireguard-vpn" title="8.12. Configuring firewalld on a WireGuard server by using the graphical interface">graphical interface</a>.
				</li><li class="listitem">
					Configure the WireGuard client by using <a class="link" href="#proc_configuring-a-wireguard-client-by-using-nmcli_assembly_setting-up-a-wireguard-vpn" title="8.13. Configuring a WireGuard client by using nmcli">nmcli</a>, <a class="link" href="#proc_configuring-a-wireguard-client-by-using-nmtui_assembly_setting-up-a-wireguard-vpn" title="8.14. Configuring a WireGuard client by using nmtui">nmtui</a>, the <a class="link" href="#configuring-a-wireguard-client-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn" title="8.15. Configuring a WireGuard client by using the RHEL web console">RHEL web console</a>, <a class="link" href="#proc_configuring-a-wireguard-client-by-using-nm-connection-editor_assembly_setting-up-a-wireguard-vpn" title="8.16. Configuring a WireGuard client by using nm-connection-editor">nm-connection-editor</a>, or the <a class="link" href="#proc_configuring-a-wireguard-client-by-using-the-wg-quick-service_assembly_setting-up-a-wireguard-vpn" title="8.17. Configuring a WireGuard client by using the wg-quick service">wg-quick</a> service.
				</li></ol></div><p>
			WireGuard operates on the network layer (layer 3). Therefore, you cannot use DHCP and must assign static IP addresses or IPv6 link-local addresses to the tunnel devices on both the server and clients.
		</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
				You can use WireGuard only if the Federal Information Processing Standard (FIPS) mode in RHEL is disabled.
			</p></div></rh-alert><section class="section" id="ref_protocols-and-primitives-used-by-wireguard_assembly_setting-up-a-wireguard-vpn"><div class="titlepage"><div><div><h3 class="title">8.1. Protocols and primitives used by WireGuard</h3></div></div></div><p class="_abstract _abstract">
				WireGuard uses the following protocols and primitives:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						ChaCha20 for symmetric encryption, authenticated with Poly1305, using Authenticated Encryption with Associated Data (AEAD) construction as described in <a class="link" href="https://tools.ietf.org/html/rfc7539">RFC7539</a>
					</li><li class="listitem">
						Curve25519 for Elliptic-curve Diffie–Hellman (ECDH) key exchange
					</li><li class="listitem">
						BLAKE2s for hashing and keyed hashing, as described in <a class="link" href="https://tools.ietf.org/html/rfc7693">RFC7693</a>
					</li><li class="listitem">
						SipHash24 for hash table keys
					</li><li class="listitem">
						HKDF for key derivation, as described in <a class="link" href="https://tools.ietf.org/html/rfc5869">RFC5869</a>
					</li></ul></div></section><section class="section" id="con_how-wireguard-uses-tunnel-ip-addresses-public-keys-and-remote-endpoints_assembly_setting-up-a-wireguard-vpn"><div class="titlepage"><div><div><h3 class="title">8.2. How WireGuard uses tunnel IP addresses, public keys, and remote endpoints</h3></div></div></div><p class="_abstract _abstract">
				When WireGuard sends a network packet to a peer:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						WireGuard reads the destination IP from the packet and compares it to the list of allowed IP addresses in the local configuration. If the peer is not found, WireGuard drops the packet.
					</li><li class="listitem">
						If the peer is valid, WireGuard encrypts the packet using the peer’s public key.
					</li><li class="listitem">
						The sending host looks up the most recent Internet IP address of the host and sends the encrypted packet to it.
					</li></ol></div><p>
				When WireGuard receives a packet:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						WireGuard decrypts the packet using the private key of the remote host.
					</li><li class="listitem">
						WireGuard reads the internal source address from the packet and looks up whether the IP is configured in the list of allowed IP addresses in the settings for the peer on the local host. If the source IP is on the allowlist, WireGuard accepts the packet. If the IP address is not on the list, WireGuard drops the packet.
					</li></ol></div><p>
				The association of public keys and allowed IP addresses is called <code class="literal">Cryptokey Routing Table</code>. This means that the list of IP addresses behaves similar to a routing table when sending packets, and as a kind of access control list when receiving packets.
			</p></section><section class="section" id="con_using-a-wireguard-client-behind-nat-and-firewalls_assembly_setting-up-a-wireguard-vpn"><div class="titlepage"><div><div><h3 class="title">8.3. Using a WireGuard client behind NAT and firewalls</h3></div></div></div><p class="_abstract _abstract">
				WireGuard uses the UDP protocol and transmits data only when a peer sends packets. Stateful firewalls and network address translation (NAT) on routers track connections to enable a peer behind NAT or a firewall to receive packets.
			</p><p>
				To keep the connection active, WireGuard supports <code class="literal">persistent keepalives</code>. This means you can set an interval at which WireGuard sends keepalive packets. By default, the persistent keep-alive feature is disabled to reduce network traffic. Enable this feature on the client if you use the client in a network with NAT or if a firewall closes the connection after some time of inactivity.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					Note that you cannot configure keepalive packets in WireGuard connections by using the RHEL web console. To configure this feature, edit the connection profile by using the <code class="literal">nmcli</code> utility.
				</p></div></rh-alert></section><section class="section" id="proc_creating-private-and-public-keys-to-be-used-in-wireguard-connections_assembly_setting-up-a-wireguard-vpn"><div class="titlepage"><div><div><h3 class="title">8.4. Creating private and public keys to be used in WireGuard connections</h3></div></div></div><p class="_abstract _abstract">
				WireGuard uses base64-encoded private and public keys to authenticate hosts to each other. Therefore, you must create the keys on each host that participates in the WireGuard VPN.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					For secure connections, create different keys for each host, and ensure that you only share the public key with the remote WireGuard host. Do not use the example keys used in this documentation.
				</p></div></rh-alert><p>
				If you plan to use the RHEL web console to create a WireGuard VPN connection, you can, alternatively, generate the public and private key pairs in the web console.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the <code class="literal">wireguard-tools</code> package:
					</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install wireguard-tools</strong></span></pre></li><li class="listitem"><p class="simpara">
						Create a private key and a corresponding public key for the host:
					</p><pre class="literallayout"># <span class="strong strong"><strong>wg genkey | tee /etc/wireguard/$HOSTNAME.private.key | wg pubkey &gt; /etc/wireguard/$HOSTNAME.public.key</strong></span></pre><p class="simpara">
						You will need the content of the key files, but not the files themselves. However, Red Hat recommends keeping the files in case that you need to remember the keys in future.
					</p></li><li class="listitem"><p class="simpara">
						Set secure permissions on the key files:
					</p><pre class="literallayout"># <span class="strong strong"><strong>chmod 600 /etc/wireguard/$HOSTNAME.private.key /etc/wireguard/$HOSTNAME.public.key</strong></span></pre></li><li class="listitem"><p class="simpara">
						Display the private key:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /etc/wireguard/$HOSTNAME.private.key</strong></span>
YFAnE0psgIdiAF7XR4abxiwVRnlMfeltxu10s/c4JXg=</pre><p class="simpara">
						You will need the private key to configure the WireGuard connection on the local host. Do not share the private key.
					</p></li><li class="listitem"><p class="simpara">
						Display the public key:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /etc/wireguard/$HOSTNAME.public.key</strong></span>
UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=</pre><p class="simpara">
						You will need the public key to configure the WireGuard connection on the remote host.
					</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">wg(8)</code> man page on your system
					</li></ul></div></section><section class="section" id="proc_configuring-a-wireguard-by-using-nmcli_assembly_setting-up-a-wireguard-vpn"><div class="titlepage"><div><div><h3 class="title">8.5. Configuring a WireGuard server by using <code class="literal">nmcli</code></h3></div></div></div><p class="_abstract _abstract">
				You can configure the WireGuard server by creating a connection profile in NetworkManager. Use this method to let NetworkManager manage the WireGuard connection.
			</p><p>
				This procedure assumes the following settings:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Server:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Private key: <code class="literal">YFAnE0psgIdiAF7XR4abxiwVRnlMfeltxu10s/c4JXg=</code>
							</li><li class="listitem">
								Tunnel IPv4 address: <code class="literal">192.0.2.1/24</code>
							</li><li class="listitem">
								Tunnel IPv6 address: <code class="literal">2001:db8:1::1/32</code>
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Client:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Public key: <code class="literal">bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=</code>
							</li><li class="listitem">
								Tunnel IPv4 address: <code class="literal">192.0.2.2/24</code>
							</li><li class="listitem">
								Tunnel IPv6 address: <code class="literal">2001:db8:1::2/32</code>
							</li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have generated the public and private key for both the server and client.
					</li><li class="listitem"><p class="simpara">
						You know the following information:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The private key of the server
							</li><li class="listitem">
								The static tunnel IP addresses and subnet masks of the client
							</li><li class="listitem">
								The public key of the client
							</li><li class="listitem">
								The static tunnel IP addresses and subnet masks of the server
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Add a NetworkManager WireGuard connection profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type wireguard con-name server-wg0 ifname wg0 autoconnect no</strong></span></pre><p class="simpara">
						This command creates a profile named <code class="literal">server-wg0</code> and assigns the virtual interface <code class="literal">wg0</code> to it. To prevent the connection from starting automatically after you add it without finalizing the configuration, disable the <code class="literal">autoconnect</code> parameter.
					</p></li><li class="listitem"><p class="simpara">
						Set the tunnel IPv4 address and subnet mask of the server:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify server-wg0 ipv4.method manual ipv4.addresses 192.0.2.1/24</strong></span></pre></li><li class="listitem"><p class="simpara">
						Set the tunnel IPv6 address and subnet mask of the server:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify server-wg0 ipv6.method manual ipv6.addresses 2001:db8:1::1/32</strong></span></pre></li><li class="listitem"><p class="simpara">
						Add the server’s private key to the connection profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify server-wg0 wireguard.private-key "YFAnE0psgIdiAF7XR4abxiwVRnlMfeltxu10s/c4JXg="</strong></span></pre></li><li class="listitem"><p class="simpara">
						Set the port for incoming WireGuard connections:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify server-wg0 wireguard.listen-port 51820</strong></span></pre><p class="simpara">
						Always set a fixed port number on hosts that receive incoming WireGuard connections. If you do not set a port, WireGuard uses a random free port each time you activate the <code class="literal">wg0</code> interface.
					</p></li><li class="listitem"><p class="simpara">
						Add peer configurations for each client that you want to allow to communicate with this server. You must add these settings manually, because the <code class="literal">nmcli</code> utility does not support setting the corresponding connection properties.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Edit the <code class="literal">/etc/NetworkManager/system-connections/server-wg0.nmconnection</code> file, and append:
							</p><pre class="literallayout"><span class="strong strong"><strong>[wireguard-peer.bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=]</strong></span>
<span class="strong strong"><strong>allowed-ips=192.0.2.2;2001:db8:1::2;</strong></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The <code class="literal">[wireguard-peer.<span class="emphasis"><em>&lt;public_key_of_the_client</em></span>&gt;]</code> entry defines the peer section of the client, and the section name contains the public key of the client.
									</li><li class="listitem"><p class="simpara">
										The <code class="literal">allowed-ips</code> parameter sets the tunnel IP addresses of the client that are allowed to send data to this server.
									</p><p class="simpara">
										Add a section for each client.
									</p></li></ul></div></li><li class="listitem"><p class="simpara">
								Reload the <code class="literal">server-wg0</code> connection profile:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection load /etc/NetworkManager/system-connections/server-wg0.nmconnection</strong></span></pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Optional: Configure the connection to start automatically, enter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify server-wg0 autoconnect yes</strong></span></pre></li><li class="listitem"><p class="simpara">
						Reactivate the <code class="literal">server-wg0</code> connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up server-wg0</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#proc_configuring-firewalld-on-a-wireguard-server-by-using-the-command-line_assembly_setting-up-a-wireguard-vpn" title="8.10. Configuring firewalld on a WireGuard server by using the command line">Configure the firewalld service on the WireGuard server</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the interface configuration of the <code class="literal">wg0</code> device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>wg show wg0</strong></span>
interface: wg0
  public key: UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=
  private key: (hidden)
  listening port: 51820

peer: bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=
  allowed ips: 192.0.2.2/32, 2001:db8:1::2/128</pre><p class="simpara">
						To display the private key in the output, use the <code class="literal">WG_HIDE_KEYS=never wg show wg0</code> command.
					</p></li><li class="listitem"><p class="simpara">
						Display the IP configuration of the <code class="literal">wg0</code> device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip address show wg0</strong></span>
20: wg0: &lt;POINTOPOINT,NOARP,UP,LOWER_UP&gt; mtu 1420 qdisc noqueue state UNKNOWN group default qlen 1000
    link/none
    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute wg0
       valid_lft forever preferred_lft forever
    inet6 2001:db8:1::1/32 scope global noprefixroute
       valid_lft forever preferred_lft forever
    inet6 fe80::3ef:8863:1ce2:844/64 scope link noprefixroute
       valid_lft forever preferred_lft forever</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">wg(8)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">WireGuard setting</code> section in the <code class="literal">nm-settings(5)</code> man page on your system
					</li></ul></div></section><section class="section" id="proc_configuring-a-wireguard-server-by-using-nmtui_assembly_setting-up-a-wireguard-vpn"><div class="titlepage"><div><div><h3 class="title">8.6. Configuring a WireGuard server by using <code class="literal">nmtui</code></h3></div></div></div><p class="_abstract _abstract">
				You can configure the WireGuard server by creating a connection profile in NetworkManager. Use this method to let NetworkManager manage the WireGuard connection.
			</p><p>
				This procedure assumes the following settings:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Server:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Private key: <code class="literal">YFAnE0psgIdiAF7XR4abxiwVRnlMfeltxu10s/c4JXg=</code>
							</li><li class="listitem">
								Tunnel IPv4 address: <code class="literal">192.0.2.1/24</code>
							</li><li class="listitem">
								Tunnel IPv6 address: <code class="literal">2001:db8:1::1/32</code>
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Client:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Public key: <code class="literal">bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=</code>
							</li><li class="listitem">
								Tunnel IPv4 address: <code class="literal">192.0.2.2/24</code>
							</li><li class="listitem">
								Tunnel IPv6 address: <code class="literal">2001:db8:1::2/32</code>
							</li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have generated the public and private key for both the server and client.
					</li><li class="listitem"><p class="simpara">
						You know the following information:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The private key of the server
							</li><li class="listitem">
								The static tunnel IP addresses and subnet masks of the client
							</li><li class="listitem">
								The public key of the client
							</li><li class="listitem">
								The static tunnel IP addresses and subnet masks of the server
							</li></ul></div></li><li class="listitem">
						You installed the <code class="literal">NetworkManager-tui</code> package.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Start the <code class="literal">nmtui</code> application:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmtui</strong></span></pre></li><li class="listitem">
						Select <span class="strong strong"><strong>Edit a connection</strong></span>, and press <kbd class="keycap">Enter</kbd>.
					</li><li class="listitem">
						Select <span class="guibutton">Add</span>, and press <kbd class="keycap">Enter</kbd>.
					</li><li class="listitem">
						Select the <span class="strong strong"><strong>WireGuard</strong></span> connection type in the list, and press <kbd class="keycap">Enter</kbd>.
					</li><li class="listitem"><p class="simpara">
						In the <span class="strong strong"><strong>Edit connection</strong></span> window:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Enter the name of the connection and the virtual interface, such as <code class="literal">wg0</code>, that NetworkManager should assign to the connection.
							</li><li class="listitem">
								Enter the private key of the server.
							</li><li class="listitem"><p class="simpara">
								Set the listen port number, such as <code class="literal">51820</code>, for incoming WireGuard connections.
							</p><p class="simpara">
								Always set a fixed port number on hosts that receive incoming WireGuard connections. If you do not set a port, WireGuard uses a random free port each time you activate the interface.
							</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/402c2b376712a623c49bccb63a4580b4/nmtui-WireGuard-server-general.png" alt="nmtui WireGuard server general"></div></div></li><li class="listitem"><p class="simpara">
								Click <span class="guibutton">Add</span> next to the <span class="strong strong"><strong>Peers</strong></span> pane:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Enter the public key of the client.
									</li><li class="listitem">
										Set the <span class="strong strong"><strong>Allowed IPs</strong></span> field to the tunnel IP addresses of the client that are allowed to send data to this server.
									</li><li class="listitem"><p class="simpara">
										Select <span class="guibutton">OK</span>, and press <kbd class="keycap">Enter</kbd>.
									</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/37188b01ed3cc20ed842193dfdab8167/nmtui-WireGuard-server-peer-config.png" alt="nmtui WireGuard server peer config"></div></div></li></ol></div></li><li class="listitem"><p class="simpara">
								Select <span class="guibutton">Show</span> next to *IPv4 Configuration, and press <kbd class="keycap">Enter</kbd>.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Select the IPv4 configuration method <span class="strong strong"><strong>Manual</strong></span>.
									</li><li class="listitem">
										Enter the tunnel IPv4 address and the subnet mask. Leave the <span class="strong strong"><strong>Gateway</strong></span> field empty.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								Select <span class="guibutton">Show</span> next to <span class="strong strong"><strong>IPv6 Configuration</strong></span>, and press <kbd class="keycap">Enter</kbd>.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Select the IPv6 configuration method <span class="strong strong"><strong>Manual</strong></span>.
									</li><li class="listitem">
										Enter the tunnel IPv6 address and the subnet mask. Leave the <code class="literal">Gateway</code> field empty.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								Select <span class="guibutton">OK</span>, and press <kbd class="keycap">Enter</kbd>
							</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/b87320fd3d0a4fd17ddf34f4de5cbe08/nmtui-WireGuard-server-ip-config.png" alt="nmtui WireGuard server ip config"></div></div></li></ol></div></li><li class="listitem">
						In the window with the list of connections, select <span class="guibutton">Back</span>, and press <kbd class="keycap">Enter</kbd>.
					</li><li class="listitem">
						In the <span class="strong strong"><strong>NetworkManager TUI</strong></span> main window, select <span class="guibutton">Quit</span>, and press <kbd class="keycap">Enter</kbd>.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#proc_configuring-firewalld-on-a-wireguard-server-by-using-the-command-line_assembly_setting-up-a-wireguard-vpn" title="8.10. Configuring firewalld on a WireGuard server by using the command line">Configure the firewalld service on the WireGuard server</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the interface configuration of the <code class="literal">wg0</code> device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>wg show wg0</strong></span>
interface: wg0
  public key: UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=
  private key: (hidden)
  listening port: 51820

peer: bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=
  allowed ips: 192.0.2.2/32, 2001:db8:1::2/128</pre><p class="simpara">
						To display the private key in the output, use the <code class="literal">WG_HIDE_KEYS=never wg show wg0</code> command.
					</p></li><li class="listitem"><p class="simpara">
						Display the IP configuration of the <code class="literal">wg0</code> device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip address show wg0</strong></span>
20: wg0: &lt;POINTOPOINT,NOARP,UP,LOWER_UP&gt; mtu 1420 qdisc noqueue state UNKNOWN group default qlen 1000
    link/none
    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute wg0
       valid_lft forever preferred_lft forever
    inet6 _2001:db8:1::1/32 scope global noprefixroute
       valid_lft forever preferred_lft forever
    inet6 fe80::3ef:8863:1ce2:844/64 scope link noprefixroute
       valid_lft forever preferred_lft forever</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">wg(8)</code> man page on your system
					</li></ul></div></section><section class="section" id="configuring-a-wireguard-server-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn"><div class="titlepage"><div><div><h3 class="title">8.7. Configuring a WireGuard server by using the RHEL web console</h3></div></div></div><p>
				You can configure a WireGuard server by using the browser-based RHEL web console. Use this method to let NetworkManager manage the WireGuard connection.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You are logged in to the RHEL web console.
					</li><li class="listitem"><p class="simpara">
						You know the following information:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The static tunnel IP addresses and subnet masks of both the server and client
							</li><li class="listitem">
								The public key of the client
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Select the <span class="strong strong"><strong>Networking</strong></span> tab in the navigation on the left side of the screen.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Add VPN</strong></span> in the <span class="strong strong"><strong>Interfaces</strong></span> section.
					</li><li class="listitem">
						If the <code class="literal">wireguard-tools</code> and <code class="literal">systemd-resolved</code> packages are not already installed, the web console displays a corresponding notification. Click <span class="strong strong"><strong>Install</strong></span> to install these packages.
					</li><li class="listitem">
						Enter the name of the WireGuard device that you want to create.
					</li><li class="listitem"><p class="simpara">
						Configure the key pair of this host:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								If you want use the keys that the web console has created:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Keep the pre-selected <span class="strong strong"><strong>Generated</strong></span> option in the <span class="strong strong"><strong>Private key</strong></span> area.
									</li><li class="listitem">
										Note the <span class="strong strong"><strong>Public key</strong></span> value. You require this information when you configure the client.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								If you want to use an existing private key:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Select <span class="strong strong"><strong>Paste existing key</strong></span> in the <span class="strong strong"><strong>Private key</strong></span> area.
									</li><li class="listitem">
										Paste the private key into the text field. The web console automatically calculates the corresponding public key.
									</li></ol></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Set a listen port number, such as <code class="literal">51820</code>, for incoming WireGuard connections.
					</p><p class="simpara">
						Always set a fixed port number on hosts that receive incoming WireGuard connections. If you do not set a port, WireGuard uses a random free port each time you activate the interface.
					</p></li><li class="listitem"><p class="simpara">
						Set the tunnel IPv4 address and subnet mask of the server.
					</p><p class="simpara">
						To also set an IPv6 address, you must edit the connection after you have created it.
					</p></li><li class="listitem"><p class="simpara">
						Add peer configurations for each client that you want to allow to communicate with this server:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Click <span class="strong strong"><strong>Add peer</strong></span>.
							</li><li class="listitem">
								Enter the public key of the client.
							</li><li class="listitem">
								Leave the <span class="strong strong"><strong>Endpoint</strong></span> field empty.
							</li><li class="listitem">
								Set the <span class="strong strong"><strong>Allowed IPs</strong></span> field to the tunnel IP addresses of the clients that are allowed to send data to this server.
							</li></ol></div><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/793444cafc3db6309bf1ff66b5835634/wireguard-server-settings.png" alt="WireGuard server settings"></div></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Add</strong></span> to create the WireGuard connection.
					</li><li class="listitem"><p class="simpara">
						If you want to also set a tunnel IPv6 address:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Click on the WireGuard connection’s name in the <span class="strong strong"><strong>Interfaces</strong></span> section.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>edit</strong></span> next to <span class="strong strong"><strong>IPv6</strong></span>.
							</li><li class="listitem">
								Set the <span class="strong strong"><strong>Addresses</strong></span> field to <code class="literal">Manual</code>, and enter the tunnel IPv6 address and prefix of the server.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Save</strong></span>.
							</li></ol></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#configuring-firewalld-on-a-wireguard-server-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn" title="8.11. Configuring firewalld on a WireGuard server by using the RHEL web console">Configure the firewalld service on the WireGuard server</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the interface configuration of the <code class="literal">wg0</code> device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>wg show wg0</strong></span>
interface: wg0
  public key: UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=
  private key: (hidden)
  listening port: 51820

peer: bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=
  allowed ips: 192.0.2.2/32, 2001:db8:1::2/128</pre><p class="simpara">
						To display the private key in the output, use the <code class="literal">WG_HIDE_KEYS=never wg show wg0</code> command.
					</p></li><li class="listitem"><p class="simpara">
						Display the IP configuration of the <code class="literal">wg0</code> device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip address show wg0</strong></span>
20: wg0: &lt;POINTOPOINT,NOARP,UP,LOWERUP&gt; mtu 1420 qdisc noqueue state UNKNOWN group default qlen 1000
    link/none
    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute wg0
       valid_lft forever preferred_lft forever
    inet6 2001:db8:1::1/32 scope global noprefixroute
       valid_lft forever preferred_lft forever
    inet6 fe80::3ef:8863:1ce2:844/64 scope link noprefixroute
       valid_lft forever preferred_lft forever</pre></li></ol></div></section><section class="section" id="proc_configuring-a-wireguard-server-by-using-nm-connection-editor_assembly_setting-up-a-wireguard-vpn"><div class="titlepage"><div><div><h3 class="title">8.8. Configuring a WireGuard server by using nm-connection-editor</h3></div></div></div><p class="_abstract _abstract">
				You can configure the WireGuard server by creating a connection profile in NetworkManager. Use this method to let NetworkManager manage the WireGuard connection.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have generated the public and private key for both the server and client.
					</li><li class="listitem"><p class="simpara">
						You know the following information:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The private key of the server
							</li><li class="listitem">
								The static tunnel IP addresses and subnet masks of the client
							</li><li class="listitem">
								The public key of the client
							</li><li class="listitem">
								The static tunnel IP addresses and subnet masks of the server
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open a terminal, and enter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nm-connection-editor</strong></span></pre></li><li class="listitem">
						Add a new connection by clicking the <span class="guibutton">+</span> button.
					</li><li class="listitem">
						Select the <code class="literal">WireGuard</code> connection type, and click <span class="guibutton">Create</span>.
					</li><li class="listitem">
						Optional: Update the connection name.
					</li><li class="listitem">
						On the <code class="literal">General</code> tab, select <code class="literal">Connect automatically with priority</code>. Optionally, set a priority value.
					</li><li class="listitem"><p class="simpara">
						On the <code class="literal">WireGuard</code> tab:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Enter the name of the virtual interface, such as <code class="literal">wg0</code>, that NetworkManager should assign to the connection.
							</li><li class="listitem">
								Enter the private key of the server.
							</li><li class="listitem"><p class="simpara">
								Set the listen port number, such as <code class="literal">51820</code>, for incoming WireGuard connections.
							</p><p class="simpara">
								Always set a fixed port number on hosts that receive incoming WireGuard connections. If you do not set a port, WireGuard uses a random free port each time you activate the interface.
							</p></li><li class="listitem"><p class="simpara">
								Click <span class="guibutton">Add</span> to add peers:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Enter the public key of the client.
									</li><li class="listitem">
										Set the <code class="literal">Allowed IPs</code> field to the tunnel IP addresses of the client that are allowed to send data to this server.
									</li><li class="listitem">
										Click <span class="guibutton">Apply</span>.
									</li></ol></div></li></ol></div></li><li class="listitem"><p class="simpara">
						On the <code class="literal">IPv4 Settings</code> tab:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Select <code class="literal">Manual</code> in the <code class="literal">Method</code> list.
							</li><li class="listitem">
								Click <span class="guibutton">Add</span> to enter the tunnel IPv4 address and the subnet mask. Leave the <code class="literal">Gateway</code> field empty.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						On the <code class="literal">IPv6 Settings</code> tab:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Select <code class="literal">Manual</code> in the <code class="literal">Method</code> list.
							</li><li class="listitem">
								Click <span class="guibutton">Add</span> to enter the tunnel IPv6 address and the subnet mask. Leave the <code class="literal">Gateway</code> field empty.
							</li></ol></div></li><li class="listitem">
						Click <span class="guibutton">Save</span> to store the connection profile.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#proc_configuring-firewalld-on-a-wireguard-server-by-using-the-graphical-interface_assembly_setting-up-a-wireguard-vpn" title="8.12. Configuring firewalld on a WireGuard server by using the graphical interface">Configure the firewalld service on the WireGuard server</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the interface configuration of the <code class="literal">wg0</code> device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>wg show <span class="emphasis"><em>wg0</em></span></strong></span>
interface: <span class="emphasis"><em>wg0</em></span>
  public key: <span class="emphasis"><em>UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=</em></span>
  private key: (hidden)
  listening port: <span class="emphasis"><em>51820</em></span>

peer: <span class="emphasis"><em>bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=</em></span>
  allowed ips: <span class="emphasis"><em>192.0.2.2/32, 2001:db8:1::2/128</em></span></pre><p class="simpara">
						To display the private key in the output, use the <code class="literal">WG_HIDE_KEYS=never wg show <span class="emphasis"><em>wg0</em></span></code> command.
					</p></li><li class="listitem"><p class="simpara">
						Display the IP configuration of the <code class="literal">wg0</code> device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip address show <span class="emphasis"><em>wg0</em></span></strong></span>
<span class="emphasis"><em>20</em></span>: <span class="emphasis"><em>wg0</em></span>: &lt;POINTOPOINT,NOARP,UP,LOWER_UP&gt; mtu 1420 qdisc noqueue state UNKNOWN group default qlen 1000
    link/none
    inet <span class="emphasis"><em>192.0.2.1/24</em></span> brd <span class="emphasis"><em>192.0.2.255</em></span> scope global noprefixroute wg0
       valid_lft forever preferred_lft forever
    inet6 <span class="emphasis"><em>2001:db8:1::1/32</em></span> scope global noprefixroute
       valid_lft forever preferred_lft forever
    inet6 <span class="emphasis"><em>fe80::3ef:8863:1ce2:844/64</em></span> scope link noprefixroute
       valid_lft forever preferred_lft forever</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">wg(8)</code> man page on your system
					</li></ul></div></section><section class="section" id="proc_configuring-a-wireguard-server-by-using-the-wg-quick-service_assembly_setting-up-a-wireguard-vpn"><div class="titlepage"><div><div><h3 class="title">8.9. Configuring a WireGuard server by using the <code class="literal">wg-quick</code> service</h3></div></div></div><p class="_abstract _abstract">
				You can configure the WireGuard server by creating a configuration file in the <code class="literal">/etc/wireguard/</code> directory. Use this method to configure the service independently from NetworkManager.
			</p><p>
				This procedure assumes the following settings:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Server:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Private key: <code class="literal">YFAnE0psgIdiAF7XR4abxiwVRnlMfeltxu10s/c4JXg=</code>
							</li><li class="listitem">
								Tunnel IPv4 address: <code class="literal">192.0.2.1/24</code>
							</li><li class="listitem">
								Tunnel IPv6 address: <code class="literal">2001:db8:1::1/32</code>
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Client:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Public key: <code class="literal">bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=</code>
							</li><li class="listitem">
								Tunnel IPv4 address: <code class="literal">192.0.2.2/24</code>
							</li><li class="listitem">
								Tunnel IPv6 address: <code class="literal">2001:db8:1::2/32</code>
							</li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have generated the public and private key for both the server and client.
					</li><li class="listitem"><p class="simpara">
						You know the following information:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The private key of the server
							</li><li class="listitem">
								The static tunnel IP addresses and subnet masks of the client
							</li><li class="listitem">
								The public key of the client
							</li><li class="listitem">
								The static tunnel IP addresses and subnet masks of the server
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the <code class="literal">wireguard-tools</code> package:
					</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install wireguard-tools</strong></span></pre></li><li class="listitem"><p class="simpara">
						Create the <code class="literal">/etc/wireguard/wg0.conf</code> file with the following content:
					</p><pre class="literallayout"><span class="strong strong"><strong>[Interface]</strong></span>
<span class="strong strong"><strong>Address = 192.0.2.1/24, 2001:db8:1::1/32</strong></span>
<span class="strong strong"><strong>ListenPort = 51820</strong></span>
<span class="strong strong"><strong>PrivateKey = YFAnE0psgIdiAF7XR4abxiwVRnlMfeltxu10s/c4JXg=</strong></span>

<span class="strong strong"><strong>[Peer]</strong></span>
<span class="strong strong"><strong>PublicKey = bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=</strong></span>
<span class="strong strong"><strong>AllowedIPs = 192.0.2.2, 2001:db8:1::2</strong></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								The <code class="literal">[Interface]</code> section describes the WireGuard settings of the interface on the server:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<code class="literal">Address</code>: A comma-separated list of the server’s tunnel IP addresses.
									</li><li class="listitem">
										<code class="literal">PrivateKey</code>: The private key of the server.
									</li><li class="listitem"><p class="simpara">
										<code class="literal">ListenPort</code>: The port on which WireGuard listens for incoming UDP connections.
									</p><p class="simpara">
										Always set a fixed port number on hosts that receive incoming WireGuard connections. If you do not set a port, WireGuard uses a random free port each time you activate the <code class="literal">wg0</code> interface.
									</p></li></ul></div></li><li class="listitem"><p class="simpara">
								Each <code class="literal">[Peer]</code> section describes the settings of one client:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<code class="literal">PublicKey</code>: The public key of the client.
									</li><li class="listitem">
										<code class="literal">AllowedIPs</code>: The tunnel IP addresses of the client that are allowed to send data to this server.
									</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Enable and start the WireGuard connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl enable --now wg-quick@wg0</strong></span></pre><p class="simpara">
						The systemd instance name must match the name of the configuration file in the <code class="literal">/etc/wireguard/</code> directory without the <code class="literal">.conf</code> suffix. The service also uses this name for the virtual network interface.
					</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#proc_configuring-firewalld-on-a-wireguard-server-by-using-the-command-line_assembly_setting-up-a-wireguard-vpn" title="8.10. Configuring firewalld on a WireGuard server by using the command line">Configure the firewalld service on the WireGuard server</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the interface configuration of the <code class="literal">wg0</code> device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>wg show wg0</strong></span>
interface: wg0
  public key: UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=
  private key: (hidden)
  listening port: 51820

peer: bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=
  allowed ips: 192.0.2.2/32, 2001:db8:1::2/128</pre><p class="simpara">
						To display the private key in the output, use the <code class="literal">WG_HIDE_KEYS=never wg show wg0</code> command.
					</p></li><li class="listitem"><p class="simpara">
						Display the IP configuration of the <code class="literal">wg0</code> device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip address show wg0</strong></span>
20: wg0: &lt;POINTOPOINT,NOARP,UP,LOWER_UP&gt; mtu 1420 qdisc noqueue state UNKNOWN group default qlen 1000
    link/none
    inet 192.0.2.1/24 scope global wg0
       valid_lft forever preferred_lft forever
    inet6 2001:db8:1::1/32 scope global
       valid_lft forever preferred_lft forever</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">wg(8)</code> and <code class="literal">wg-quick(8)</code> man pages on your system
					</li></ul></div></section><section class="section" id="proc_configuring-firewalld-on-a-wireguard-server-by-using-the-command-line_assembly_setting-up-a-wireguard-vpn"><div class="titlepage"><div><div><h3 class="title">8.10. Configuring <code class="literal">firewalld</code> on a WireGuard server by using the command line</h3></div></div></div><p class="_abstract _abstract">
				You must configure the <code class="literal">firewalld</code> service on the WireGuard server to allow incoming connections from clients. Additionally, if clients should be able to use the WireGuard server as the default gateway and route all traffic through the tunnel, you must enable masquerading.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open the WireGuard port for incoming connections in the <code class="literal">firewalld</code> service:
					</p><pre class="literallayout"># <span class="strong strong"><strong>firewall-cmd --permanent --add-port=51820/udp --zone=public</strong></span></pre></li><li class="listitem"><p class="simpara">
						If clients should route all traffic through the tunnel and use the WireGuard server as the default gateway, enable masquerading for the <code class="literal">public</code> zone:
					</p><pre class="literallayout"># <span class="strong strong"><strong>firewall-cmd --permanent --zone=public --add-masquerade</strong></span></pre></li><li class="listitem"><p class="simpara">
						Reload the <code class="literal">firewalld</code> rules.
					</p><pre class="literallayout"># <span class="strong strong"><strong>firewall-cmd --reload</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Display the configuration of the <code class="literal">public</code> zone:
					</p><pre class="literallayout"># <span class="strong strong"><strong>firewall-cmd --list-all</strong></span>
public (active)
  ...
  ports: 51820/udp
  masquerade: yes
  ...</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">firewall-cmd(1)</code> man page on your system
					</li></ul></div></section><section class="section" id="configuring-firewalld-on-a-wireguard-server-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn"><div class="titlepage"><div><div><h3 class="title">8.11. Configuring <code class="literal">firewalld</code> on a WireGuard server by using the RHEL web console</h3></div></div></div><p>
				You must configure the <span class="strong strong"><strong>firewalld</strong></span> service on the WireGuard server to allow incoming connections from clients. Additionally, if clients should be able to use the WireGuard server as the default gateway and route all traffic through the tunnel, you must enable masquerading.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You are logged in to the RHEL web console.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Select the <span class="strong strong"><strong>Networking</strong></span> tab in the navigation on the left side of the screen.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Edit rules and zones</strong></span> in the <span class="strong strong"><strong>Firewall</strong></span> section.
					</li><li class="listitem">
						Enter <code class="literal">wireguard</code> into the <span class="strong strong"><strong>Filter services</strong></span> field.
					</li><li class="listitem"><p class="simpara">
						Select the <code class="literal">wireguard</code> entry from the list.
					</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/c145934f61275ee71f08e23484ca665e/wireguard-server-firewalld.png" alt="firewalld settings for a WireGuard server"></div></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Add services</strong></span>.
					</li><li class="listitem"><p class="simpara">
						If clients should route all traffic through the tunnel and use the WireGuard server as the default gateway, enable masquerading for the <code class="literal">public</code> zone:
					</p><pre class="literallayout"># <span class="strong strong"><strong>firewall-cmd --permanent --zone=public --add-masquerade</strong></span>
# <span class="strong strong"><strong>firewall-cmd --reload</strong></span></pre><p class="simpara">
						Note that you cannot enable masquerading in <code class="literal">firewalld</code> zones in the web console.
					</p></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Select the <span class="strong strong"><strong>Networking</strong></span> tab in the navigation on the left side of the screen.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Edit rules and zones</strong></span> in the <span class="strong strong"><strong>Firewall</strong></span> section.
					</li><li class="listitem">
						The list contains an entry for the <code class="literal">wireguard</code> service and displays the UDP port that you configured in the WireGuard connection profile.
					</li><li class="listitem"><p class="simpara">
						To verify that masquerading is enabled in the <code class="literal">firewalld</code> <code class="literal">public</code> zone, enter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>firewall-cmd --list-all --zone=public</strong></span>
public (active)
  ...
  ports: 51820/udp
  masquerade: yes
  ...</pre></li></ol></div></section><section class="section" id="proc_configuring-firewalld-on-a-wireguard-server-by-using-the-graphical-interface_assembly_setting-up-a-wireguard-vpn"><div class="titlepage"><div><div><h3 class="title">8.12. Configuring <code class="literal">firewalld</code> on a WireGuard server by using the graphical interface</h3></div></div></div><p class="_abstract _abstract">
				You must configure the <code class="literal">firewalld</code> service on the WireGuard server to allow incoming connections from clients. Additionally, if clients should be able to use the WireGuard server as the default gateway and route all traffic through the tunnel, you must enable masquerading.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Press the <kbd class="keycap">Super</kbd> key, enter <code class="literal">firewall</code>, and select the <span class="strong strong"><strong>Firewall</strong></span> application from the results.
					</li><li class="listitem">
						Select <code class="literal">Permanent</code> in the <span class="strong strong"><strong>Configuration</strong></span> list.
					</li><li class="listitem">
						Select the <code class="literal">public</code> zone.
					</li><li class="listitem"><p class="simpara">
						Allow incoming connections to the WireGuard port:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								On the <span class="strong strong"><strong>Ports</strong></span> tab, click <span class="guibutton">Add</span>.
							</li><li class="listitem">
								Enter the port number you set for incoming WireGuard connections:
							</li><li class="listitem">
								Select <code class="literal">udp</code> from the <code class="literal">Protocol</code> list.
							</li><li class="listitem">
								Click <span class="guibutton">OK</span>.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						If clients should route all traffic through the tunnel and use the WireGuard server as the default gateway:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Navigate to the <span class="strong strong"><strong>Masquerading</strong></span> tab of the <span class="strong strong"><strong>public</strong></span> zone.
							</li><li class="listitem">
								Select <code class="literal">Masquerade zone</code>.
							</li></ol></div></li><li class="listitem">
						Select <span class="guimenu">Options</span> → <span class="guimenuitem">Reload Firewalld</span>.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Display the configuration of the <code class="literal">public</code> zone:
					</p><pre class="literallayout"># <span class="strong strong"><strong>firewall-cmd --list-all</strong></span>
public (active)
  ...
  ports: 51820/udp
  masquerade: yes
  ...</pre></li></ul></div></section><section class="section" id="proc_configuring-a-wireguard-client-by-using-nmcli_assembly_setting-up-a-wireguard-vpn"><div class="titlepage"><div><div><h3 class="title">8.13. Configuring a WireGuard client by using <code class="literal">nmcli</code></h3></div></div></div><p class="_abstract _abstract">
				You can configure a WireGuard client by creating a connection profile in NetworkManager. Use this method to let NetworkManager manage the WireGuard connection.
			</p><p>
				This procedure assumes the following settings:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Client:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Private key: <code class="literal">aPUcp5vHz8yMLrzk8SsDyYnV33IhE/k20e52iKJFV0A=</code>
							</li><li class="listitem">
								Tunnel IPv4 address: <code class="literal">192.0.2.2/24</code>
							</li><li class="listitem">
								Tunnel IPv6 address: <code class="literal">2001:db8:1::2/32</code>
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Server:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Public key: <code class="literal">UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=</code>
							</li><li class="listitem">
								Tunnel IPv4 address: <code class="literal">192.0.2.1/24</code>
							</li><li class="listitem">
								Tunnel IPv6 address: <code class="literal">2001:db8:1::1/32</code>
							</li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have generated the public and private key for both the server and client.
					</li><li class="listitem"><p class="simpara">
						You know the following information:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The private key of the client
							</li><li class="listitem">
								The static tunnel IP addresses and subnet masks of the client
							</li><li class="listitem">
								The public key of the server
							</li><li class="listitem">
								The static tunnel IP addresses and subnet masks of the server
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Add a NetworkManager WireGuard connection profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type wireguard con-name client-wg0 ifname wg0 autoconnect no</strong></span></pre><p class="simpara">
						This command creates a profile named <code class="literal">client-wg0</code> and assigns the virtual interface <code class="literal">wg0</code> to it. To prevent the connection from starting automatically after you add it without finalizing the configuration, disable the <code class="literal">autoconnect</code> parameter.
					</p></li><li class="listitem"><p class="simpara">
						Optional: Configure NetworkManager so that it does not automatically start the <code class="literal">client-wg</code> connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify client-wg0 autoconnect no</strong></span></pre></li><li class="listitem"><p class="simpara">
						Set the tunnel IPv4 address and subnet mask of the client:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify client-wg0 ipv4.method manual ipv4.addresses 192.0.2.2/24</strong></span></pre></li><li class="listitem"><p class="simpara">
						Set the tunnel IPv6 address and subnet mask of the client:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify client-wg0 ipv6.method manual ipv6.addresses 2001:db8:1::2/32</strong></span></pre></li><li class="listitem"><p class="simpara">
						If you want to route all traffic through the tunnel, set the tunnel IP addresses of the server as the default gateway:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify client-wg0 ipv4.gateway 192.0.2.1 ipv6.gateway 2001:db8:1::1</strong></span></pre><p class="simpara">
						Routing all traffic through the tunnel requires that you set, in a later step, the <code class="literal">allowed-ips</code> on the this client to <code class="literal">0.0.0.0/0;::/0</code>.
					</p><p class="simpara">
						Note that routing all traffic through the tunnel can impact the connectivity to other hosts based on the server routing and firewall configuration.
					</p></li><li class="listitem"><p class="simpara">
						Add the client’s private key to the connection profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify client-wg0 wireguard.private-key "aPUcp5vHz8yMLrzk8SsDyYnV33IhE/k20e52iKJFV0A="</strong></span></pre></li><li class="listitem"><p class="simpara">
						Add peer configurations for each server that you want to allow to communicate with this client. You must add these settings manually, because the <code class="literal">nmcli</code> utility does not support setting the corresponding connection properties.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Edit the <code class="literal">/etc/NetworkManager/system-connections/client-wg0.nmconnection</code> file, and append:
							</p><pre class="literallayout"><span class="strong strong"><strong>[wireguard-peer.UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=]</strong></span>
<span class="strong strong"><strong>endpoint=server.example.com:51820</strong></span>
<span class="strong strong"><strong>allowed-ips=192.0.2.1;2001:db8:1::1;</strong></span>
<span class="strong strong"><strong>persistent-keepalive=20</strong></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The <code class="literal">[wireguard-peer.<span class="emphasis"><em>&lt;public_key_of_the_server</em></span>&gt;]</code> entry defines the peer section of the server, and the section name has the public key of the server.
									</li><li class="listitem">
										The <code class="literal">endpoint</code> parameter sets the hostname or IP address and the port of the server. The client uses this information to establish the connection.
									</li><li class="listitem"><p class="simpara">
										The <code class="literal">allowed-ips</code> parameter sets a list of IP addresses that can send data to this client. For example, set the parameter to:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
												The tunnel IP addresses of the server to allow only the server to communicate with this client. The value in the example above configures this scenario.
											</li><li class="listitem">
												<code class="literal">0.0.0.0/0;::/0;</code> to allow any remote IPv4 and IPv6 address to communicate with this client. Use this setting to route all traffic through the tunnel and use the WireGuard server as default gateway.
											</li></ul></div></li><li class="listitem">
										The optional <code class="literal">persistent-keepalive</code> parameter defines an interval in seconds in which WireGuard sends a keep alive packet to the server. Set this parameter if you use the client in a network with network address translation (NAT) or if a firewall closes the UDP connection after some time of inactivity.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								Reload the <code class="literal">client-wg0</code> connection profile:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection load /etc/NetworkManager/system-connections/client-wg0.nmconnection</strong></span></pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Reactivate the <code class="literal">client-wg0</code> connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up client-wg0</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Ping the IP addresses of the server:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ping 192.0.2.1</strong></span>
# <span class="strong strong"><strong>ping6 2001:db8:1::1</strong></span></pre></li><li class="listitem"><p class="simpara">
						Display the interface configuration of the <code class="literal">wg0</code> device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>wg show wg0</strong></span>
interface: wg0
  public key: bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=
  private key: (hidden)
  listening port: 51820

peer: UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=
  endpoint: server.example.com:51820
  allowed ips: 192.0.2.1/32, 2001:db8:1::1/128
  latest handshake: 1 minute, 41 seconds ago
  transfer: 824 B received, 1.01 KiB sent
  persistent keepalive: every 20 seconds</pre><p class="simpara">
						To display the private key in the output, use the <code class="literal">WG_HIDE_KEYS=never wg show wg0</code> command.
					</p><p class="simpara">
						Note that the output has only the <code class="literal">latest handshake</code> and <code class="literal">transfer</code> entries if you have already sent traffic through the VPN tunnel.
					</p></li><li class="listitem"><p class="simpara">
						Display the IP configuration of the <code class="literal">wg0</code> device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip address show wg0</strong></span>
10: wg0: &lt;POINTOPOINT,NOARP,UP,LOWER_UP&gt; mtu 1420 qdisc noqueue state UNKNOWN group default qlen 1000
    link/none
    inet 192.0.2.2/24 brd 192.0.2.255 scope global noprefixroute wg0
       valid_lft forever preferred_lft forever
    inet6 2001:db8:1::2/32 scope global noprefixroute
       valid_lft forever preferred_lft forever
    inet6 fe80::73d9:6f51:ea6f:863e/64 scope link noprefixroute
       valid_lft forever preferred_lft forever</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">wg(8)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">WireGuard setting</code> section in the <code class="literal">nm-settings(5)</code> man page on your system
					</li></ul></div></section><section class="section" id="proc_configuring-a-wireguard-client-by-using-nmtui_assembly_setting-up-a-wireguard-vpn"><div class="titlepage"><div><div><h3 class="title">8.14. Configuring a WireGuard client by using <code class="literal">nmtui</code></h3></div></div></div><p class="_abstract _abstract">
				You can configure a WireGuard client by creating a connection profile in NetworkManager. Use this method to let NetworkManager manage the WireGuard connection.
			</p><p>
				This procedure assumes the following settings:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Client:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Private key: <code class="literal">aPUcp5vHz8yMLrzk8SsDyYnV33IhE/k20e52iKJFV0A=</code>
							</li><li class="listitem">
								Tunnel IPv4 address: <code class="literal">192.0.2.2/24</code>
							</li><li class="listitem">
								Tunnel IPv6 address: <code class="literal">2001:db8:1::2/32</code>
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Server:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Public key: <code class="literal">UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=</code>
							</li><li class="listitem">
								Tunnel IPv4 address: <code class="literal">192.0.2.1/24</code>
							</li><li class="listitem">
								Tunnel IPv6 address: <code class="literal">2001:db8:1::1/32</code>
							</li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have generated the public and private key for both the server and client.
					</li><li class="listitem"><p class="simpara">
						You know the following information:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The private key of the client
							</li><li class="listitem">
								The static tunnel IP addresses and subnet masks of the client
							</li><li class="listitem">
								The public key of the server
							</li><li class="listitem">
								The static tunnel IP addresses and subnet masks of the server
							</li></ul></div></li><li class="listitem">
						You installed the <code class="literal">NetworkManager-tui</code> package
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Start the <code class="literal">nmtui</code> application:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmtui</strong></span></pre></li><li class="listitem">
						Select <span class="strong strong"><strong>Edit a connection</strong></span>, and press <kbd class="keycap">Enter</kbd>.
					</li><li class="listitem">
						Select <span class="guibutton">Add</span>, and press <kbd class="keycap">Enter</kbd>.
					</li><li class="listitem">
						Select the <span class="strong strong"><strong>WireGuard</strong></span> connection type in the list, and press <kbd class="keycap">Enter</kbd>.
					</li><li class="listitem"><p class="simpara">
						In the <span class="strong strong"><strong>Edit connection</strong></span> window:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Enter the name of the connection and the virtual interface, such as <code class="literal">wg0</code>, that NetworkManager should assign to the connection.
							</li><li class="listitem"><p class="simpara">
								Enter the private key of the client.
							</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/a4f53bf5e7711ead1a2f3ce033b0e097/nmtui-WireGuard-client-general.png" alt="nmtui WireGuard client general"></div></div></li><li class="listitem"><p class="simpara">
								Click <span class="guibutton">Add</span> next to the <span class="strong strong"><strong>Peers</strong></span> pane:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Enter the public key of the server.
									</li><li class="listitem"><p class="simpara">
										Set the <span class="strong strong"><strong>Allowed IPs</strong></span> field. For example, set it to:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
												The tunnel IP addresses of the server to allow only the server to communicate with this client.
											</li><li class="listitem">
												<code class="literal">0.0.0.0/0,::/0</code> to allow any remote IPv4 and IPv6 address to communicate with this client. Use this setting to route all traffic through the tunnel and use the WireGuard server as default gateway.
											</li></ul></div></li><li class="listitem">
										Enter the host name or IP address and port of the WireGuard server into the <span class="strong strong"><strong>Endpoint</strong></span> field. Use the following format: <code class="literal"><span class="emphasis"><em>&lt;hostname_or_IP&gt;</em></span>:<span class="emphasis"><em>&lt;port_number&gt;</em></span></code>
									</li><li class="listitem">
										Optional: If you use the client in a network with network address translation (NAT) or if a firewall closes the UDP connection after some time of inactivity, set a persistent keep alive interval in seconds. In this interval, the client sends a keepalive packet to the server.
									</li><li class="listitem"><p class="simpara">
										Select <span class="guibutton">OK</span>, and press <kbd class="keycap">Enter</kbd>.
									</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/341938ab4848be519e2fecff960f4afe/nmtui-WireGuard-client-peer-config.png" alt="nmtui WireGuard client peer config"></div></div></li></ol></div></li><li class="listitem"><p class="simpara">
								Select <span class="guibutton">Show</span> next to <span class="strong strong"><strong>IPv4 Configuration</strong></span>, and press <kbd class="keycap">Enter</kbd>.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Select the IPv4 configuration method <span class="strong strong"><strong>Manual</strong></span>.
									</li><li class="listitem">
										Enter the tunnel IPv4 address and the subnet mask. Leave the <span class="strong strong"><strong>Gateway</strong></span> field empty.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								Select <span class="guibutton">Show</span> next to <span class="strong strong"><strong>IPv6 Configuration</strong></span>, and press <kbd class="keycap">Enter</kbd>.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Select the IPv6 configuration method <span class="strong strong"><strong>Manual</strong></span>.
									</li><li class="listitem">
										Enter the tunnel IPv6 address and the subnet mask. Leave the <span class="strong strong"><strong>Gateway</strong></span> field empty.
									</li></ol></div></li><li class="listitem">
								Optional: Select <span class="strong strong"><strong>Automatically connect</strong></span>.
							</li><li class="listitem"><p class="simpara">
								Select <span class="guibutton">OK</span>, and press <kbd class="keycap">Enter</kbd>
							</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/c40c64154356c1cb540eddb6891df248/nmtui-WireGuard-client-ip-config.png" alt="nmtui WireGuard client ip config"></div></div></li></ol></div></li><li class="listitem">
						In the window with the list of connections, select <span class="guibutton">Back</span>, and press <kbd class="keycap">Enter</kbd>.
					</li><li class="listitem">
						In the <span class="strong strong"><strong>NetworkManager TUI</strong></span> main window, select <span class="guibutton">Quit</span>, and press <kbd class="keycap">Enter</kbd>.
					</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Ping the IP addresses of the server:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ping 192.0.2.1</strong></span>
# <span class="strong strong"><strong>ping6 2001:db8:1::1</strong></span></pre></li><li class="listitem"><p class="simpara">
						Display the interface configuration of the <code class="literal">wg0</code> device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>wg show wg0</strong></span>
interface: wg0
  public key: bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=
  private key: (hidden)
  listening port: 51820

peer: UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=
  endpoint: server.example.com:51820_
  allowed ips: 192.0.2.1/32, 2001:db8:1::1/128
  latest handshake: 1 minute, 41 seconds ago
  transfer: 824 B received, 1.01 KiB sent
  persistent keepalive: every 20 seconds</pre><p class="simpara">
						To display the private key in the output, use the <code class="literal">WG_HIDE_KEYS=never wg show wg0</code> command.
					</p><p class="simpara">
						Note that the output contains only the <code class="literal">latest handshake</code> and <code class="literal">transfer</code> entries if you have already sent traffic through the VPN tunnel.
					</p></li><li class="listitem"><p class="simpara">
						Display the IP configuration of the <code class="literal">wg0</code> device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip address show wg0</strong></span>
10: wg0: &lt;POINTOPOINT,NOARP,UP,LOWER_UP&gt; mtu 1420 qdisc noqueue state UNKNOWN group default qlen 1000
    link/none
    inet 192.0.2.2/24 brd 192.0.2.255 scope global noprefixroute wg0
       valid_lft forever preferred_lft forever
    inet6 2001:db8:1::2/32 scope global noprefixroute
       valid_lft forever preferred_lft forever
    inet6 fe80::73d9:6f51:ea6f:863e/64 scope link noprefixroute
       valid_lft forever preferred_lft forever</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">wg(8)</code> man page on your system
					</li></ul></div></section><section class="section" id="configuring-a-wireguard-client-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn"><div class="titlepage"><div><div><h3 class="title">8.15. Configuring a WireGuard client by using the RHEL web console</h3></div></div></div><p>
				You can configure a WireGuard client by using the browser-based RHEL web console. Use this method to let NetworkManager manage the WireGuard connection.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You are logged in to the RHEL web console.
					</li><li class="listitem"><p class="simpara">
						You know the following information:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The static tunnel IP addresses and subnet masks of both the server and client
							</li><li class="listitem">
								The public key of the server
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Select the <span class="strong strong"><strong>Networking</strong></span> tab in the navigation on the left side of the screen.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Add VPN</strong></span> in the <span class="strong strong"><strong>Interfaces</strong></span> section.
					</li><li class="listitem">
						If the <code class="literal">wireguard-tools</code> and <code class="literal">systemd-resolved</code> packages are not already installed, the web console displays a corresponding notification. Click <span class="strong strong"><strong>Install</strong></span> to install these packages.
					</li><li class="listitem">
						Enter the name of the WireGuard device that you want to create.
					</li><li class="listitem"><p class="simpara">
						Configure the key pair of this host:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								If you want use the keys that the web console has created:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Keep the pre-selected <span class="strong strong"><strong>Generated</strong></span> option in the <span class="strong strong"><strong>Private key</strong></span> area.
									</li><li class="listitem">
										Note the <span class="strong strong"><strong>Public key</strong></span> value. You require this information when you configure the client.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								If you want to use an existing private key:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Select <span class="strong strong"><strong>Paste existing key</strong></span> in the <span class="strong strong"><strong>Private key</strong></span> area.
									</li><li class="listitem">
										Paste the private key into the text field. The web console automatically calculates the corresponding public key.
									</li></ol></div></li></ul></div></li><li class="listitem">
						Preserve the <code class="literal">0</code> value in the <span class="strong strong"><strong>Listen port</strong></span> field.
					</li><li class="listitem"><p class="simpara">
						Set the tunnel IPv4 address and subnet mask of the client.
					</p><p class="simpara">
						To also set an IPv6 address, you must edit the connection after you have created it.
					</p></li><li class="listitem"><p class="simpara">
						Add a peer configuration for the server that you want to allow to communicate with this client:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Click <span class="strong strong"><strong>Add peer</strong></span>.
							</li><li class="listitem">
								Enter the public key of the server.
							</li><li class="listitem">
								Set the <span class="strong strong"><strong>Endpoint</strong></span> field to the hostname or IP address and the port of the server, for example <code class="literal">server.example.com:51820</code>. The client uses this information to establish the connection.
							</li><li class="listitem"><p class="simpara">
								Set the <span class="strong strong"><strong>Allowed IPs</strong></span> field to the tunnel IP addresses of the clients that are allowed to send data to this server. For example, set the field to one of the following:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The tunnel IP addresses of the server to allow only the server to communicate with this client. The value in the screen capture below configures this scenario.
									</li><li class="listitem">
										<code class="literal">0.0.0.0/0</code> to allow any remote IPv4 address to communicate with this client. Use this setting to route all traffic through the tunnel and use the WireGuard server as default gateway.
									</li></ul></div></li></ol></div><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/5638863bffd3887907b69106b76db8bb/wireguard-client-settings.png" alt="WireGuard client settings"></div></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Add</strong></span> to create the WireGuard connection.
					</li><li class="listitem"><p class="simpara">
						If you want to also set a tunnel IPv6 address:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Click on the WireGuard connection’s name in the <span class="strong strong"><strong>Interfaces</strong></span> section.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Edit</strong></span> next to <span class="strong strong"><strong>IPv6</strong></span>.
							</li><li class="listitem">
								Set the <span class="strong strong"><strong>Addresses</strong></span> field to <code class="literal">Manual</code>, and enter the tunnel IPv6 address and prefix of the client.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Save</strong></span>.
							</li></ol></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Ping the IP addresses of the server:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ping 192.0.2.1</strong></span></pre><p class="simpara">
						WireGuard establishes the connection when you try to send traffic through the tunnel.
					</p></li><li class="listitem"><p class="simpara">
						Display the interface configuration of the <code class="literal">wg0</code> device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>wg show wg0</strong></span>
interface: wg0
  public key: bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=
  private key: (hidden)
  listening port: 45513

peer: UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=
  endpoint: server.example.com:51820
  allowed ips: 192.0.2.1/32, 2001:db8:1::1/128
  latest handshake: 1 minute, 41 seconds ago
  transfer: 824 B received, 1.01 KiB sent
  persistent keepalive: every 20 seconds</pre><p class="simpara">
						To display the private key in the output, use the <code class="literal">WG_HIDE_KEYS=never wg show wg0</code> command.
					</p><p class="simpara">
						Note that the output has only the <code class="literal">latest handshake</code> and <code class="literal">transfer</code> entries if you have already sent traffic through the VPN tunnel.
					</p></li><li class="listitem"><p class="simpara">
						Display the IP configuration of the <code class="literal">wg0</code> device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip address show wg0</strong></span>
10: wg0: &lt;POINTOPOINT,NOARP,UP,LOWERUP&gt; mtu 1420 qdisc noqueue state UNKNOWN group default qlen 1000
    link/none
    inet 192.0.2.2/24 brd 192.0.2.255 scope global noprefixroute wg0
       valid_lft forever preferred_lft forever
    inet6 2001:db8:1::2/32 scope global noprefixroute
       valid_lft forever preferred_lft forever
    inet6 fe80::73d9:6f51:ea6f:863e/64 scope link noprefixroute
       valid_lft forever preferred_lft forever</pre></li></ol></div></section><section class="section" id="proc_configuring-a-wireguard-client-by-using-nm-connection-editor_assembly_setting-up-a-wireguard-vpn"><div class="titlepage"><div><div><h3 class="title">8.16. Configuring a WireGuard client by using nm-connection-editor</h3></div></div></div><p class="_abstract _abstract">
				You can configure a WireGuard client by creating a connection profile in NetworkManager. Use this method to let NetworkManager manage the WireGuard connection.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have generated the public and private key for both the server and client.
					</li><li class="listitem"><p class="simpara">
						You know the following information:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The private key of the client
							</li><li class="listitem">
								The static tunnel IP addresses and subnet masks of the client
							</li><li class="listitem">
								The public key of the server
							</li><li class="listitem">
								The static tunnel IP addresses and subnet masks of the server
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open a terminal, and enter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nm-connection-editor</strong></span></pre></li><li class="listitem">
						Add a new connection by clicking the <span class="guibutton">+</span> button.
					</li><li class="listitem">
						Select the <span class="strong strong"><strong>WireGuard</strong></span> connection type, and click <span class="guibutton">Create</span>.
					</li><li class="listitem">
						Optional: Update the connection name.
					</li><li class="listitem">
						Optional: On the <span class="strong strong"><strong>General</strong></span> tab, select <span class="strong strong"><strong>Connect automatically with priority</strong></span>.
					</li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>WireGuard</strong></span> tab:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Enter the name of the virtual interface, such as <code class="literal">wg0</code>, that NetworkManager should assign to the connection.
							</li><li class="listitem">
								Enter client’s private key.
							</li><li class="listitem"><p class="simpara">
								Click <span class="guibutton">Add</span> to add peers:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Enter the public key of the server.
									</li><li class="listitem"><p class="simpara">
										Set the <span class="strong strong"><strong>Allowed IPs</strong></span> field. For example, set it to:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
												The tunnel IP addresses of the server to allow only the server to communicate with this client.
											</li><li class="listitem"><p class="simpara">
												<code class="literal">0.0.0.0/0;::/0;</code> to allow any remote IPv4 and IPv6 address to communicate with this client. Use this setting to route all traffic through the tunnel and use the WireGuard server as default gateway.
											</p><p class="simpara">
												Note that routing all traffic through the tunnel can impact the connectivity to other hosts based on the server routing and firewall configuration.
											</p></li></ul></div></li><li class="listitem">
										Enter the hostname or IP address and port of the WireGuard server into the <span class="strong strong"><strong>Endpoint</strong></span> field. Use the following format: <code class="literal"><span class="emphasis"><em>&lt;hostname_or_IP&lt;</em></span>:<span class="emphasis"><em>&lt;port_number&gt;</em></span></code>
									</li><li class="listitem">
										Optional: If you use the client in a network with network address translation (NAT) or if a firewall closes the UDP connection after some time of inactivity, set a persistent keep alive interval in seconds. In this interval, the client sends a keep alive packet to the server.
									</li><li class="listitem">
										Click <span class="guibutton">Apply</span>.
									</li></ol></div></li></ol></div></li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>IPv4 Settings</strong></span> tab:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Select <span class="strong strong"><strong>Manual</strong></span> in the <span class="strong strong"><strong>Method</strong></span> list.
							</li><li class="listitem">
								Click <span class="guibutton">Add</span> to enter the tunnel IPv4 address and the subnet mask.
							</li><li class="listitem"><p class="simpara">
								If you want to route all traffic through the tunnel, set the tunnel IPv4 address of the server in the <span class="strong strong"><strong>Gateway</strong></span> field. Otherwise, leave the field empty.
							</p><p class="simpara">
								Routing all IPv4 traffic through the tunnel requires that you included <code class="literal">0.0.0.0/0</code> in the <span class="strong strong"><strong>Allowed IPs</strong></span> field on this client.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>IPv6 Settings</strong></span> tab:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Select <span class="strong strong"><strong>Manual</strong></span> in the <span class="strong strong"><strong>Method</strong></span> list.
							</li><li class="listitem">
								Click <span class="guibutton">Add</span> to enter the tunnel IPv6 address and the subnet mask.
							</li><li class="listitem"><p class="simpara">
								If you want to route all traffic through the tunnel, set the tunnel IPv6 address of the server in the <span class="strong strong"><strong>Gateway</strong></span> field. Otherwise, leave the field empty.
							</p><p class="simpara">
								Routing all IPv4 traffic through the tunnel requires that you included <code class="literal">::/0</code> in the <span class="strong strong"><strong>Allowed IPs</strong></span> field on this client.
							</p></li></ol></div></li><li class="listitem">
						Click <span class="guibutton">Save</span> to store the connection profile.
					</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Ping the IP addresses of the server:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ping 192.0.2.1</strong></span>
# <span class="strong strong"><strong>ping6 2001:db8:1::1</strong></span></pre></li><li class="listitem"><p class="simpara">
						Display the interface configuration of the <code class="literal">wg0</code> device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>wg show wg0</strong></span>
interface: wg0
  public key: bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=
  private key: (hidden)
  listening port: 51820

peer: UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=
  endpoint: server.example.com:51820
  allowed ips: 192.0.2.1/32, 2001:db8:1::1/128
  latest handshake: 1 minute, 41 seconds ago
  transfer: 824 B received, 1.01 KiB sent
  persistent keepalive: every 20 seconds</pre><p class="simpara">
						To display the private key in the output, use the <code class="literal">WG_HIDE_KEYS=never wg show wg0</code> command.
					</p><p class="simpara">
						Note that the output only has the <code class="literal">latest handshake</code> and <code class="literal">transfer</code> entries if you have already sent traffic through the VPN tunnel.
					</p></li><li class="listitem"><p class="simpara">
						Display the IP configuration of the <code class="literal">wg0</code> device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip address show wg0</strong></span>
10: wg0: &lt;POINTOPOINT,NOARP,UP,LOWER_UP&gt; mtu 1420 qdisc noqueue state UNKNOWN group default qlen 1000
    link/none
    inet 192.0.2.2/24 brd 192.0.2.255 scope global noprefixroute wg0
       valid_lft forever preferred_lft forever
    inet6 2001:db8:1::2/32 scope global noprefixroute
       valid_lft forever preferred_lft forever
    inet6 fe80::73d9:6f51:ea6f:863e/64 scope link noprefixroute
       valid_lft forever preferred_lft forever</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">wg(8)</code> man page on your system
					</li></ul></div></section><section class="section" id="proc_configuring-a-wireguard-client-by-using-the-wg-quick-service_assembly_setting-up-a-wireguard-vpn"><div class="titlepage"><div><div><h3 class="title">8.17. Configuring a WireGuard client by using the <code class="literal">wg-quick</code> service</h3></div></div></div><p class="_abstract _abstract">
				You can configure a WireGuard client by creating a configuration file in the <code class="literal">/etc/wireguard/</code> directory. Use this method to configure the service independently from NetworkManager.
			</p><p>
				This procedure assumes the following settings:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Client:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Private key: <code class="literal">aPUcp5vHz8yMLrzk8SsDyYnV33IhE/k20e52iKJFV0A=</code>
							</li><li class="listitem">
								Tunnel IPv4 address: <code class="literal">192.0.2.2/24</code>
							</li><li class="listitem">
								Tunnel IPv6 address: <code class="literal">2001:db8:1::2/32</code>
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Server:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Public key: <code class="literal">UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=</code>
							</li><li class="listitem">
								Tunnel IPv4 address: <code class="literal">192.0.2.1/24</code>
							</li><li class="listitem">
								Tunnel IPv6 address: <code class="literal">2001:db8:1::1/32</code>
							</li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have generated the public and private key for both the server and client.
					</li><li class="listitem"><p class="simpara">
						You know the following information:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The private key of the client
							</li><li class="listitem">
								The static tunnel IP addresses and subnet masks of the client
							</li><li class="listitem">
								The public key of the server
							</li><li class="listitem">
								The static tunnel IP addresses and subnet masks of the server
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the <code class="literal">wireguard-tools</code> package:
					</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install wireguard-tools</strong></span></pre></li><li class="listitem"><p class="simpara">
						Create the <code class="literal">/etc/wireguard/wg0.conf</code> file with the following content:
					</p><pre class="literallayout"><span class="strong strong"><strong>[Interface]</strong></span>
<span class="strong strong"><strong>Address = 192.0.2.2/24, 2001:db8:1::2/32</strong></span>
<span class="strong strong"><strong>PrivateKey = aPUcp5vHz8yMLrzk8SsDyYnV33IhE/k20e52iKJFV0A=</strong></span>

<span class="strong strong"><strong>[Peer]</strong></span>
<span class="strong strong"><strong>PublicKey = UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=</strong></span>
<span class="strong strong"><strong>AllowedIPs = 192.0.2.1, 2001:db8:1::1</strong></span>
<span class="strong strong"><strong>Endpoint = server.example.com:51820</strong></span>
<span class="strong strong"><strong>PersistentKeepalive = 20</strong></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								The <code class="literal">[Interface]</code> section describes the WireGuard settings of the interface on the client:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<code class="literal">Address</code>: A comma-separated list of the client’s tunnel IP addresses.
									</li><li class="listitem">
										<code class="literal">PrivateKey</code>: The private key of the client.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								The <code class="literal">[Peer]</code> section describes the settings of the server:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<code class="literal">PublicKey</code>: The public key of the server.
									</li><li class="listitem"><p class="simpara">
										<code class="literal">AllowedIPs</code>: The IP addresses that are allowed to send data to this client. For example, set the parameter to:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
												The tunnel IP addresses of the server to allow only the server to communicate with this client. The value in the example above configures this scenario.
											</li><li class="listitem">
												<code class="literal">0.0.0.0/0, ::/0</code> to allow any remote IPv4 and IPv6 address to communicate with this client. Use this setting to route all traffic through the tunnel and use the WireGuard server as default gateway.
											</li></ul></div></li><li class="listitem">
										<code class="literal">Endpoint</code>: Sets the hostname or IP address and the port of the server. The client uses this information to establish the connection.
									</li><li class="listitem">
										The optional <code class="literal">persistent-keepalive</code> parameter defines an interval in seconds in which WireGuard sends a keepalive packet to the server. Set this parameter if you use the client in a network with network address translation (NAT) or if a firewall closes the UDP connection after some time of inactivity.
									</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Enable and start the WireGuard connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl enable --now wg-quick@wg0</strong></span></pre><p class="simpara">
						The systemd instance name must match the name of the configuration file in the <code class="literal">/etc/wireguard/</code> directory without the <code class="literal">.conf</code> suffix. The service also uses this name for the virtual network interface.
					</p></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Ping the IP addresses of the server:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ping 192.0.2.1</strong></span>
# <span class="strong strong"><strong>ping6 2001:db8:1::1</strong></span></pre></li><li class="listitem"><p class="simpara">
						Display the interface configuration of the <code class="literal">wg0</code> device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>wg show wg0</strong></span>
interface: wg0
  public key: bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=
  private key: (hidden)
  listening port: 51820

peer: UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=
  endpoint: server.example.com:51820
  allowed ips: 192.0.2.1/32, 2001:db8:1::1/128
  latest handshake: 1 minute, 41 seconds ago
  transfer: 824 B received, 1.01 KiB sent
  persistent keepalive: every 20 seconds</pre><p class="simpara">
						To display the private key in the output, use the <code class="literal">WG_HIDE_KEYS=never wg show wg0</code> command.
					</p><p class="simpara">
						Note that the output contains only the <code class="literal">latest handshake</code> and <code class="literal">transfer</code> entries if you have already sent traffic through the VPN tunnel.
					</p></li><li class="listitem"><p class="simpara">
						Display the IP configuration of the <code class="literal">wg0</code> device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip address show wg0</strong></span>
10: wg0: &lt;POINTOPOINT,NOARP,UP,LOWER_UP&gt; mtu 1420 qdisc noqueue state UNKNOWN group default qlen 1000
    link/none
    inet 192.0.2.2/24 scope global wg0
       valid_lft forever preferred_lft forever
    inet6 2001:db8:1::2/32 scope global
       valid_lft forever preferred_lft forever</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">wg(8)</code> and <code class="literal">wg-quick(8)</code> man pages on your system
					</li></ul></div></section></section><section class="chapter" id="configuring-ip-tunnels_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 9. Configuring IP tunnels</h2></div></div></div><p class="_abstract _abstract">
			Similar to a VPN, an IP tunnel directly connects two networks over a third network, such as the internet. However, not all tunnel protocols support encryption.
		</p><p>
			The routers in both networks that establish the tunnel requires at least two interfaces:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					One interface that is connected to the local network
				</li><li class="listitem">
					One interface that is connected to the network through which the tunnel is established.
				</li></ul></div><p>
			To establish the tunnel, you create a virtual interface on both routers with an IP address from the remote subnet.
		</p><p>
			NetworkManager supports the following IP tunnels:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Generic Routing Encapsulation (GRE)
				</li><li class="listitem">
					Generic Routing Encapsulation over IPv6 (IP6GRE)
				</li><li class="listitem">
					Generic Routing Encapsulation Terminal Access Point (GRETAP)
				</li><li class="listitem">
					Generic Routing Encapsulation Terminal Access Point over IPv6 (IP6GRETAP)
				</li><li class="listitem">
					IPv4 over IPv4 (IPIP)
				</li><li class="listitem">
					IPv4 over IPv6 (IPIP6)
				</li><li class="listitem">
					IPv6 over IPv6 (IP6IP6)
				</li><li class="listitem">
					Simple Internet Transition (SIT)
				</li></ul></div><p>
			Depending on the type, these tunnels act either on layer 2 or 3 of the Open Systems Interconnection (OSI) model.
		</p><section class="section" id="configuring-an-ipip-tunnel-using-nmcli-to-encapsulate--ipv4-traffic-in-ipv4-packets_configuring-ip-tunnels"><div class="titlepage"><div><div><h3 class="title">9.1. Configuring an IPIP tunnel to encapsulate IPv4 traffic in IPv4 packets</h3></div></div></div><p class="_abstract _abstract">
				An IP over IP (IPIP) tunnel operates on OSI layer 3 and encapsulates IPv4 traffic in IPv4 packets as described in <a class="link" href="https://tools.ietf.org/html/rfc2003">RFC 2003</a>.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					Data sent through an IPIP tunnel is not encrypted. For security reasons, use the tunnel only for data that is already encrypted, for example, by other protocols, such as HTTPS.
				</p></div></rh-alert><p>
				Note that IPIP tunnels support only unicast packets. If you require an IPv4 tunnel that supports multicast, see <a class="link" href="#configuring-a-gre-tunnel-using-nmcli-to-encapsulate-layer-3-traffic-in-ipv4-packets_configuring-ip-tunnels" title="9.2. Configuring a GRE tunnel to encapsulate layer-3 traffic in IPv4 packets">Configuring a GRE tunnel to encapsulate layer-3 traffic in IPv4 packets</a>.
			</p><p>
				For example, you can create an IPIP tunnel between two RHEL routers to connect two internal subnets over the internet as shown in the following diagram:
			</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/7a4baade335da7cdc9159871199529bb/IPIP-tunnel.png" alt="IPIP tunnel"></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Each RHEL router has a network interface that is connected to its local subnet.
					</li><li class="listitem">
						Each RHEL router has a network interface that is connected to the internet.
					</li><li class="listitem">
						The traffic you want to send through the tunnel is IPv4 unicast.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On the RHEL router in network A:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create an IPIP tunnel interface named <code class="literal">tun0</code>:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type ip-tunnel ip-tunnel.mode ipip con-name tun0 ifname tun0 remote 198.51.100.5 local 203.0.113.10</strong></span></pre><p class="simpara">
								The <code class="literal">remote</code> and <code class="literal">local</code> parameters set the public IP addresses of the remote and the local routers.
							</p></li><li class="listitem"><p class="simpara">
								Set the IPv4 address to the <code class="literal">tun0</code> device:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify tun0 ipv4.addresses '10.0.1.1/30'</strong></span></pre><p class="simpara">
								Note that a <code class="literal">/30</code> subnet with two usable IP addresses is sufficient for the tunnel.
							</p></li><li class="listitem"><p class="simpara">
								Configure the <code class="literal">tun0</code> connection to use a manual IPv4 configuration:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify tun0 ipv4.method manual</strong></span></pre></li><li class="listitem"><p class="simpara">
								Add a static route that routes traffic to the <code class="literal">172.16.0.0/24</code> network to the tunnel IP on router B:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify tun0 +ipv4.routes "172.16.0.0/24 10.0.1.2"</strong></span></pre></li><li class="listitem"><p class="simpara">
								Enable the <code class="literal">tun0</code> connection.
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up tun0</strong></span></pre></li><li class="listitem"><p class="simpara">
								Enable packet forwarding:
							</p><pre class="literallayout"># <span class="strong strong"><strong>echo "net.ipv4.ip_forward=1" &gt; /etc/sysctl.d/95-IPv4-forwarding.conf</strong></span>
# <span class="strong strong"><strong>sysctl -p /etc/sysctl.d/95-IPv4-forwarding.conf</strong></span></pre></li></ol></div></li><li class="listitem"><p class="simpara">
						On the RHEL router in network B:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create an IPIP tunnel interface named <code class="literal">tun0</code>:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type ip-tunnel ip-tunnel.mode ipip con-name tun0 ifname tun0 remote 203.0.113.10 local 198.51.100.5</strong></span></pre><p class="simpara">
								The <code class="literal">remote</code> and <code class="literal">local</code> parameters set the public IP addresses of the remote and local routers.
							</p></li><li class="listitem"><p class="simpara">
								Set the IPv4 address to the <code class="literal">tun0</code> device:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify tun0 ipv4.addresses '10.0.1.2/30'</strong></span></pre></li><li class="listitem"><p class="simpara">
								Configure the <code class="literal">tun0</code> connection to use a manual IPv4 configuration:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify tun0 ipv4.method manual</strong></span></pre></li><li class="listitem"><p class="simpara">
								Add a static route that routes traffic to the <code class="literal">192.0.2.0/24</code> network to the tunnel IP on router A:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify tun0 +ipv4.routes "192.0.2.0/24 10.0.1.1"</strong></span></pre></li><li class="listitem"><p class="simpara">
								Enable the <code class="literal">tun0</code> connection.
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up tun0</strong></span></pre></li><li class="listitem"><p class="simpara">
								Enable packet forwarding:
							</p><pre class="literallayout"># <span class="strong strong"><strong>echo "net.ipv4.ip_forward=1" &gt; /etc/sysctl.d/95-IPv4-forwarding.conf</strong></span>
# <span class="strong strong"><strong>sysctl -p /etc/sysctl.d/95-IPv4-forwarding.conf</strong></span></pre></li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						From each RHEL router, ping the IP address of the internal interface of the other router:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								On Router A, ping <code class="literal">172.16.0.1</code>:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ping 172.16.0.1</strong></span></pre></li><li class="listitem"><p class="simpara">
								On Router B, ping <code class="literal">192.0.2.1</code>:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ping 192.0.2.1</strong></span></pre></li></ol></div></li></ul></div></section><section class="section" id="configuring-a-gre-tunnel-using-nmcli-to-encapsulate-layer-3-traffic-in-ipv4-packets_configuring-ip-tunnels"><div class="titlepage"><div><div><h3 class="title">9.2. Configuring a GRE tunnel to encapsulate layer-3 traffic in IPv4 packets</h3></div></div></div><p class="_abstract _abstract">
				A Generic Routing Encapsulation (GRE) tunnel encapsulates layer-3 traffic in IPv4 packets as described in <a class="link" href="https://tools.ietf.org/html/rfc2784">RFC 2784</a>. A GRE tunnel can encapsulate any layer 3 protocol with a valid Ethernet type.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					Data sent through a GRE tunnel is not encrypted. For security reasons, use the tunnel only for data that is already encrypted, for example, by other protocols, such as HTTPS.
				</p></div></rh-alert><p>
				For example, you can create a GRE tunnel between two RHEL routers to connect two internal subnets over the internet as shown in the following diagram:
			</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/ee24ab1cb16aa24353c8a2fd6fbbb556/GRE-tunnel.png" alt="GRE tunnel"></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Each RHEL router has a network interface that is connected to its local subnet.
					</li><li class="listitem">
						Each RHEL router has a network interface that is connected to the internet.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On the RHEL router in network A:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create a GRE tunnel interface named <code class="literal">gre1</code>:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type ip-tunnel ip-tunnel.mode gre con-name gre1 ifname gre1 remote 198.51.100.5 local 203.0.113.10</strong></span></pre><p class="simpara">
								The <code class="literal">remote</code> and <code class="literal">local</code> parameters set the public IP addresses of the remote and the local routers.
							</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
									The <code class="literal">gre0</code> device name is reserved. Use <code class="literal">gre1</code> or a different name for the device.
								</p></div></rh-alert></li><li class="listitem"><p class="simpara">
								Set the IPv4 address to the <code class="literal">gre1</code> device:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify gre1 ipv4.addresses '10.0.1.1/30'</strong></span></pre><p class="simpara">
								Note that a <code class="literal">/30</code> subnet with two usable IP addresses is sufficient for the tunnel.
							</p></li><li class="listitem"><p class="simpara">
								Configure the <code class="literal">gre1</code> connection to use a manual IPv4 configuration:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify gre1 ipv4.method manual</strong></span></pre></li><li class="listitem"><p class="simpara">
								Add a static route that routes traffic to the <code class="literal">172.16.0.0/24</code> network to the tunnel IP on router B:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify gre1 +ipv4.routes "172.16.0.0/24 10.0.1.2"</strong></span></pre></li><li class="listitem"><p class="simpara">
								Enable the <code class="literal">gre1</code> connection.
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up gre1</strong></span></pre></li><li class="listitem"><p class="simpara">
								Enable packet forwarding:
							</p><pre class="literallayout"># <span class="strong strong"><strong>echo "net.ipv4.ip_forward=1" &gt; /etc/sysctl.d/95-IPv4-forwarding.conf</strong></span>
# <span class="strong strong"><strong>sysctl -p /etc/sysctl.d/95-IPv4-forwarding.conf</strong></span></pre></li></ol></div></li><li class="listitem"><p class="simpara">
						On the RHEL router in network B:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create a GRE tunnel interface named <code class="literal">gre1</code>:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type ip-tunnel ip-tunnel.mode gre con-name gre1 ifname gre1 remote 203.0.113.10 local 198.51.100.5</strong></span></pre><p class="simpara">
								The <code class="literal">remote</code> and <code class="literal">local</code> parameters set the public IP addresses of the remote and the local routers.
							</p></li><li class="listitem"><p class="simpara">
								Set the IPv4 address to the <code class="literal">gre1</code> device:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify gre1 ipv4.addresses '10.0.1.2/30'</strong></span></pre></li><li class="listitem"><p class="simpara">
								Configure the <code class="literal">gre1</code> connection to use a manual IPv4 configuration:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify gre1 ipv4.method manual</strong></span></pre></li><li class="listitem"><p class="simpara">
								Add a static route that routes traffic to the <code class="literal">192.0.2.0/24</code> network to the tunnel IP on router A:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify gre1 +ipv4.routes "192.0.2.0/24 10.0.1.1"</strong></span></pre></li><li class="listitem"><p class="simpara">
								Enable the <code class="literal">gre1</code> connection.
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up gre1</strong></span></pre></li><li class="listitem"><p class="simpara">
								Enable packet forwarding:
							</p><pre class="literallayout"># <span class="strong strong"><strong>echo "net.ipv4.ip_forward=1" &gt; /etc/sysctl.d/95-IPv4-forwarding.conf</strong></span>
# <span class="strong strong"><strong>sysctl -p /etc/sysctl.d/95-IPv4-forwarding.conf</strong></span></pre></li></ol></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						From each RHEL router, ping the IP address of the internal interface of the other router:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								On Router A, ping <code class="literal">172.16.0.1</code>:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ping 172.16.0.1</strong></span></pre></li><li class="listitem"><p class="simpara">
								On Router B, ping <code class="literal">192.0.2.1</code>:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ping 192.0.2.1</strong></span></pre></li></ol></div></li></ol></div></section><section class="section" id="configuring-a-gretap-tunnel-to-transfer-ethernet-frames-over-ipv4_configuring-ip-tunnels"><div class="titlepage"><div><div><h3 class="title">9.3. Configuring a GRETAP tunnel to transfer Ethernet frames over IPv4</h3></div></div></div><p class="_abstract _abstract">
				A Generic Routing Encapsulation Terminal Access Point (GRETAP) tunnel operates on OSI level 2 and encapsulates Ethernet traffic in IPv4 packets as described in <a class="link" href="https://tools.ietf.org/html/rfc2784">RFC 2784</a>.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					Data sent through a GRETAP tunnel is not encrypted. For security reasons, establish the tunnel over a VPN or a different encrypted connection.
				</p></div></rh-alert><p>
				For example, you can create a GRETAP tunnel between two RHEL routers to connect two networks using a bridge as shown in the following diagram:
			</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/00b6e5003f5f139db0b0f35dfd051213/GRETAP-tunnel.png" alt="GRETAP tunnel"></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Each RHEL router has a network interface that is connected to its local network, and the interface has no IP configuration assigned.
					</li><li class="listitem">
						Each RHEL router has a network interface that is connected to the internet.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On the RHEL router in network A:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create a bridge interface named <code class="literal">bridge0</code>:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type bridge con-name bridge0 ifname bridge0</strong></span></pre></li><li class="listitem"><p class="simpara">
								Configure the IP settings of the bridge:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bridge0 ipv4.addresses '192.0.2.1/24'</strong></span>
# <span class="strong strong"><strong>nmcli connection modify bridge0 ipv4.method manual</strong></span></pre></li><li class="listitem"><p class="simpara">
								Add a new connection profile for the interface that is connected to local network to the bridge:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type ethernet port-type bridge con-name bridge0-port1 ifname enp1s0 controller bridge0</strong></span></pre></li><li class="listitem"><p class="simpara">
								Add a new connection profile for the GRETAP tunnel interface to the bridge:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type ip-tunnel ip-tunnel.mode gretap port-type bridge con-name bridge0-port2 ifname gretap1 remote 198.51.100.5 local 203.0.113.10 controller bridge0</strong></span></pre><p class="simpara">
								The <code class="literal">remote</code> and <code class="literal">local</code> parameters set the public IP addresses of the remote and the local routers.
							</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
									The <code class="literal">gretap0</code> device name is reserved. Use <code class="literal">gretap1</code> or a different name for the device.
								</p></div></rh-alert></li><li class="listitem"><p class="simpara">
								Optional: Disable the Spanning Tree Protocol (STP) if you do not need it:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bridge0 bridge.stp no</strong></span></pre><p class="simpara">
								By default, STP is enabled and causes a delay before you can use the connection.
							</p></li><li class="listitem"><p class="simpara">
								Configure that activating the <code class="literal">bridge0</code> connection automatically activates the ports of the bridge:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bridge0 connection.autoconnect-ports 1</strong></span></pre></li><li class="listitem"><p class="simpara">
								Active the <code class="literal">bridge0</code> connection:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up bridge0</strong></span></pre></li></ol></div></li><li class="listitem"><p class="simpara">
						On the RHEL router in network B:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create a bridge interface named <code class="literal">bridge0</code>:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type bridge con-name bridge0 ifname bridge0</strong></span></pre></li><li class="listitem"><p class="simpara">
								Configure the IP settings of the bridge:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bridge0 ipv4.addresses '192.0.2.2/24'</strong></span>
# <span class="strong strong"><strong>nmcli connection modify bridge0 ipv4.method manual</strong></span></pre></li><li class="listitem"><p class="simpara">
								Add a new connection profile for the interface that is connected to local network to the bridge:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type ethernet port-type bridge con-name bridge0-port1 ifname enp1s0 controller bridge0</strong></span></pre></li><li class="listitem"><p class="simpara">
								Add a new connection profile for the GRETAP tunnel interface to the bridge:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type ip-tunnel ip-tunnel.mode gretap port-type bridge con-name bridge0-port2 ifname gretap1 remote 203.0.113.10 local 198.51.100.5 controller bridge0</strong></span></pre><p class="simpara">
								The <code class="literal">remote</code> and <code class="literal">local</code> parameters set the public IP addresses of the remote and the local routers.
							</p></li><li class="listitem"><p class="simpara">
								Optional: Disable the Spanning Tree Protocol (STP) if you do not need it:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bridge0 bridge.stp no</strong></span></pre></li><li class="listitem"><p class="simpara">
								Configure that activating the <code class="literal">bridge0</code> connection automatically activates the ports of the bridge:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bridge0 connection.autoconnect-ports 1</strong></span></pre></li><li class="listitem"><p class="simpara">
								Active the <code class="literal">bridge0</code> connection:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up bridge0</strong></span></pre></li></ol></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On both routers, verify that the <code class="literal">enp1s0</code> and <code class="literal">gretap1</code> connections are connected and that the <code class="literal">CONNECTION</code> column displays the connection name of the port:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device</strong></span>
nmcli device
DEVICE   TYPE      STATE      CONNECTION
...
bridge0  bridge    connected  bridge0
enp1s0   ethernet  connected  bridge0-port1
gretap1  iptunnel  connected  bridge0-port2</pre></li><li class="listitem"><p class="simpara">
						From each RHEL router, ping the IP address of the internal interface of the other router:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								On Router A, ping <code class="literal">192.0.2.2</code>:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ping 192.0.2.2</strong></span></pre></li><li class="listitem"><p class="simpara">
								On Router B, ping <code class="literal">192.0.2.1</code>:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ping 192.0.2.1</strong></span></pre></li></ol></div></li></ol></div></section></section><section class="chapter" id="assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 10. Using a VXLAN to create a virtual layer-2 domain for VMs</h2></div></div></div><p class="_abstract _abstract">
			A virtual extensible LAN (VXLAN) is a networking protocol that tunnels layer-2 traffic over an IP network using the UDP protocol. For example, certain virtual machines (VMs), that are running on different hosts can communicate over a VXLAN tunnel. The hosts can be in different subnets or even in different data centers around the world. From the perspective of the VMs, other VMs in the same VXLAN are within the same layer-2 domain:
		</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/f0ed0f273b7b4b9f8ed9ab229efc49fd/vxlan-tunnel.png" alt="vxlan tunnel"></div></div><p>
			In this example, RHEL-host-A and RHEL-host-B use a bridge, <code class="literal">br0</code>, to connect the virtual network of a VM on each host with a VXLAN named <code class="literal">vxlan10</code>. Due to this configuration, the VXLAN is invisible to the VMs, and the VMs do not require any special configuration. If you later connect more VMs to the same virtual network, the VMs are automatically members of the same virtual layer-2 domain.
		</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
				Just as normal layer-2 traffic, data in a VXLAN is not encrypted. For security reasons, use a VXLAN over a VPN or other types of encrypted connections.
			</p></div></rh-alert><section class="section" id="con_benefits-of-vxlans_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms"><div class="titlepage"><div><div><h3 class="title">10.1. Benefits of VXLANs</h3></div></div></div><p class="_abstract _abstract">
				A virtual extensible LAN (VXLAN) provides the following major benefits:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						VXLANs use a 24-bit ID. Therefore, you can create up to 16,777,216 isolated networks. For example, a virtual LAN (VLAN), supports only 4,096 isolated networks.
					</li><li class="listitem">
						VXLANs use the IP protocol. This enables you to route the traffic and virtually run systems in different networks and locations within the same layer-2 domain.
					</li><li class="listitem">
						Unlike most tunnel protocols, a VXLAN is not only a point-to-point network. A VXLAN can learn the IP addresses of the other endpoints either dynamically or use statically-configured forwarding entries.
					</li><li class="listitem">
						Certain network cards support UDP tunnel-related offload features.
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/doc/kernel-doc-<span class="emphasis"><em>&lt;kernel_version&gt;</em></span>/Documentation/networking/vxlan.rst</code> provided by the <code class="literal">kernel-doc</code> package
					</li></ul></div></section><section class="section" id="proc_configuring-the-ethernet-interface-on-the-hosts_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms"><div class="titlepage"><div><div><h3 class="title">10.2. Configuring the Ethernet interface on the hosts</h3></div></div></div><p>
				To connect a RHEL VM host to the Ethernet, create a network connection profile, configure the IP settings, and activate the profile.
			</p><p>
				Run this procedure on both RHEL hosts, and adjust the IP address configuration accordingly.
			</p><div class="itemizedlist _abstract"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist _abstract" type="disc"><li class="listitem">
						The host is connected to the Ethernet.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Add a new Ethernet connection profile to NetworkManager:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add con-name <span class="emphasis"><em>Example</em></span> ifname <span class="emphasis"><em>enp1s0</em></span> type ethernet</strong></span></pre></li><li class="listitem"><p class="simpara">
						Configure the IPv4 settings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>Example</em></span> ipv4.addresses <span class="emphasis"><em>198.51.100.2/24</em></span> ipv4.method manual ipv4.gateway <span class="emphasis"><em>198.51.100.254</em></span> ipv4.dns <span class="emphasis"><em>198.51.100.200</em></span> ipv4.dns-search <span class="emphasis"><em>example.com</em></span></strong></span></pre><p class="simpara">
						Skip this step if the network uses DHCP.
					</p></li><li class="listitem"><p class="simpara">
						Activate the <code class="literal">Example</code> connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>Example</em></span></strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the status of the devices and connections:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device status</strong></span>
DEVICE      TYPE      STATE      CONNECTION
enp1s0      ethernet  connected  <span class="emphasis"><em>Example</em></span></pre></li><li class="listitem"><p class="simpara">
						Ping a host in a remote network to verify the IP settings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ping <span class="emphasis"><em>RHEL-host-B.example.com</em></span></strong></span></pre><p class="simpara">
						Note that you cannot ping the other VM host before you have configured the network on that host as well.
					</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nm-settings(5)</code> man page on your system
					</li></ul></div></section><section class="section" id="proc_creating-a-network-bridge-with-a-vxlan-attached_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms"><div class="titlepage"><div><div><h3 class="title">10.3. Creating a network bridge with a VXLAN attached</h3></div></div></div><p class="_abstract _abstract">
				To make a virtual extensible LAN (VXLAN) invisible to virtual machines (VMs), create a bridge on a host, and attach the VXLAN to the bridge. Use NetworkManager to create both the bridge and the VXLAN. You do not add any traffic access point (TAP) devices of the VMs, typically named <code class="literal">vnet*</code> on the host, to the bridge. The <code class="literal">libvirtd</code> service adds them dynamically when the VMs start.
			</p><p>
				Run this procedure on both RHEL hosts, and adjust the IP addresses accordingly.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create the bridge <code class="literal">br0</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type bridge con-name br0 ifname br0 ipv4.method disabled ipv6.method disabled</strong></span></pre><p class="simpara">
						This command sets no IPv4 and IPv6 addresses on the bridge device, because this bridge works on layer 2.
					</p></li><li class="listitem"><p class="simpara">
						Create the VXLAN interface and attach it to <code class="literal">br0</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type vxlan port-type bridge con-name <span class="emphasis"><em>br0-vxlan10</em></span> ifname <span class="emphasis"><em>vxlan10</em></span> id <span class="emphasis"><em>10</em></span> local <span class="emphasis"><em>198.51.100.2</em></span> remote <span class="emphasis"><em>203.0.113.1</em></span> controller <span class="emphasis"><em>br0</em></span></strong></span></pre><p class="simpara">
						This command uses the following settings:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">id 10</code>: Sets the VXLAN identifier.
							</li><li class="listitem">
								<code class="literal">local 198.51.100.2</code>: Sets the source IP address of outgoing packets.
							</li><li class="listitem">
								<code class="literal">remote 203.0.113.1</code>: Sets the unicast or multicast IP address to use in outgoing packets when the destination link layer address is not known in the VXLAN device forwarding database.
							</li><li class="listitem">
								<code class="literal">controller br0</code>: Sets this VXLAN connection to be created as a port in the <code class="literal">br0</code> connection.
							</li><li class="listitem">
								<code class="literal">ipv4.method disabled</code> and <code class="literal">ipv6.method disabled</code>: Disables IPv4 and IPv6 on the bridge.
							</li></ul></div><p class="simpara">
						By default, NetworkManager uses <code class="literal">8472</code> as the destination port. If the destination port is different, additionally, pass the <code class="literal">destination-port <span class="emphasis"><em>&lt;port_number&gt;</em></span></code> option to the command.
					</p></li><li class="listitem"><p class="simpara">
						Activate the <code class="literal">br0</code> connection profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>br0</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Open port <code class="literal">8472</code> for incoming UDP connections in the local firewall:
					</p><pre class="literallayout"># <span class="strong strong"><strong>firewall-cmd --permanent --add-port=8472/udp</strong></span>
# <span class="strong strong"><strong>firewall-cmd --reload</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Display the forwarding table:
					</p><pre class="literallayout"># <span class="strong strong"><strong>bridge fdb show dev <span class="emphasis"><em>vxlan10</em></span></strong></span>
2a:53:bd:d5:b3:0a master br0 permanent
00:00:00:00:00:00 dst 203.0.113.1 self permanent
...</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nm-settings(5)</code> man page on your system
					</li></ul></div></section><section class="section" id="proc_creating-a-virtual-network-in-libvirt-with-an-existing-bridge_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms"><div class="titlepage"><div><div><h3 class="title">10.4. Creating a virtual network in libvirt with an existing bridge</h3></div></div></div><p class="_abstract _abstract">
				To enable virtual machines (VM) to use the <code class="literal">br0</code> bridge with the attached virtual extensible LAN (VXLAN), first add a virtual network to the <code class="literal">libvirtd</code> service that uses this bridge.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You installed the <code class="literal">libvirt</code> package.
					</li><li class="listitem">
						You started and enabled the <code class="literal">libvirtd</code> service.
					</li><li class="listitem">
						You configured the <code class="literal">br0</code> device with the VXLAN on RHEL.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create the <code class="literal">~/vxlan10-bridge.xml</code> file with the following content:
					</p><pre class="literallayout"><span class="strong strong"><strong>&lt;network&gt;</strong></span>
<span class="strong strong"><strong> &lt;name&gt;vxlan10-bridge&lt;/name&gt;</strong></span>
<span class="strong strong"><strong> &lt;forward mode="bridge" /&gt;</strong></span>
<span class="strong strong"><strong> &lt;bridge name="br0" /&gt;</strong></span>
<span class="strong strong"><strong>&lt;/network&gt;</strong></span></pre></li><li class="listitem"><p class="simpara">
						Use the <code class="literal">~/vxlan10-bridge.xml</code> file to create a new virtual network in <code class="literal">libvirt</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>virsh net-define <span class="emphasis"><em>~/vxlan10-bridge.xml</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Remove the <code class="literal">~/vxlan10-bridge.xml</code> file:
					</p><pre class="literallayout"># <span class="strong strong"><strong>rm <span class="emphasis"><em>~/vxlan10-bridge.xml</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Start the <code class="literal">vxlan10-bridge</code> virtual network:
					</p><pre class="literallayout"># <span class="strong strong"><strong>virsh net-start <span class="emphasis"><em>vxlan10-bridge</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Configure the <code class="literal">vxlan10-bridge</code> virtual network to start automatically when the <code class="literal">libvirtd</code> service starts:
					</p><pre class="literallayout"># <span class="strong strong"><strong>virsh net-autostart <span class="emphasis"><em>vxlan10-bridge</em></span></strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Display the list of virtual networks:
					</p><pre class="literallayout"># <span class="strong strong"><strong>virsh net-list</strong></span>
 Name              State    Autostart   Persistent
----------------------------------------------------
 <span class="emphasis"><em>vxlan10-bridge</em></span>    active   yes         yes
 ...</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">virsh(1)</code> man page on your system
					</li></ul></div></section><section class="section" id="proc_proc_configuring-virtual-machines-to-use-vxlan_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms"><div class="titlepage"><div><div><h3 class="title">10.5. Configuring virtual machines to use VXLAN</h3></div></div></div><p class="_abstract _abstract">
				To configure a VM to use a bridge device with an attached virtual extensible LAN (VXLAN) on the host, create a new VM that uses the <code class="literal">vxlan10-bridge</code> virtual network or update the settings of existing VMs to use this network.
			</p><p>
				Perform this procedure on the RHEL hosts.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You configured the <code class="literal">vxlan10-bridge</code> virtual network in <code class="literal">libvirtd</code>.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To create a new VM and configure it to use the <code class="literal">vxlan10-bridge</code> network, pass the <code class="literal">--network network:<span class="emphasis"><em>vxlan10-bridge</em></span></code> option to the <code class="literal">virt-install</code> command when you create the VM:
					</p><pre class="literallayout"># <span class="strong strong"><strong>virt-install ... --network network:<span class="emphasis"><em>vxlan10-bridge</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						To change the network settings of an existing VM:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Connect the VM’s network interface to the <code class="literal">vxlan10-bridge</code> virtual network:
							</p><pre class="literallayout"># <span class="strong strong"><strong>virt-xml <span class="emphasis"><em>VM_name</em></span> --edit --network network=<span class="emphasis"><em>vxlan10-bridge</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
								Shut down the VM, and start it again:
							</p><pre class="literallayout"># <span class="strong strong"><strong>virsh shutdown <span class="emphasis"><em>VM_name</em></span></strong></span>
# <span class="strong strong"><strong>virsh start <span class="emphasis"><em>VM_name</em></span></strong></span></pre></li></ol></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the virtual network interfaces of the VM on the host:
					</p><pre class="literallayout"># <span class="strong strong"><strong>virsh domiflist <span class="emphasis"><em>VM_name</em></span></strong></span>
 Interface   Type     Source           Model    MAC
-------------------------------------------------------------------
 <span class="emphasis"><em>vnet1</em></span>       bridge   <span class="emphasis"><em>vxlan10-bridge</em></span>   virtio   <span class="emphasis"><em>52:54:00:c5:98:1c</em></span></pre></li><li class="listitem"><p class="simpara">
						Display the interfaces attached to the <code class="literal">vxlan10-bridge</code> bridge:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip link show master vxlan10-bridge</strong></span>
18: vxlan10: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master <span class="emphasis"><em>br0</em></span> state UNKNOWN mode DEFAULT group default qlen 1000
    link/ether <span class="emphasis"><em>2a:53:bd:d5:b3:0a</em></span> brd ff:ff:ff:ff:ff:ff
19: vnet1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master <span class="emphasis"><em>br0</em></span> state UNKNOWN mode DEFAULT group default qlen 1000
    link/ether <span class="emphasis"><em>52:54:00:c5:98:1c</em></span> brd ff:ff:ff:ff:ff:ff</pre><p class="simpara">
						Note that the <code class="literal">libvirtd</code> service dynamically updates the bridge’s configuration. When you start a VM which uses the <code class="literal">vxlan10-bridge</code> network, the corresponding <code class="literal">vnet*</code> device on the host appears as a port of the bridge.
					</p></li><li class="listitem"><p class="simpara">
						Use address resolution protocol (ARP) requests to verify whether VMs are in the same VXLAN:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Start two or more VMs in the same VXLAN.
							</li><li class="listitem"><p class="simpara">
								Send an ARP request from one VM to the other one:
							</p><pre class="literallayout"># <span class="strong strong"><strong>arping -c 1 <span class="emphasis"><em>192.0.2.2</em></span></strong></span>
ARPING <span class="emphasis"><em>192.0.2.2</em></span> from <span class="emphasis"><em>192.0.2.1</em></span> <span class="emphasis"><em>enp1s0</em></span>
Unicast reply from <span class="emphasis"><em>192.0.2.2</em></span> [<span class="emphasis"><em>52:54:00:c5:98:1c</em></span>] <span class="emphasis"><em>1.450ms</em></span>
Sent 1 probe(s) (0 broadcast(s))
Received 1 response(s) (0 request(s), 0 broadcast(s))</pre><p class="simpara">
								If the command shows a reply, the VM is in the same layer-2 domain and, in this case in the same VXLAN.
							</p><p class="simpara">
								Install the <code class="literal">iputils</code> package to use the <code class="literal">arping</code> utility.
							</p></li></ol></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">virt-install(1)</code> and <code class="literal">virt-xml(1)</code> man pages on your system
					</li><li class="listitem">
						<code class="literal">virsh(1)</code> and <code class="literal">arping(8)</code> man pages on your system
					</li></ul></div></section></section><section class="chapter" id="assembly_managing-wifi-connections_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 11. Managing wifi connections</h2></div></div></div><p>
			RHEL provides multiple utilities and applications to configure and connect to wifi networks, for example:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Use the <code class="literal">nmcli</code> utility to configure connections by using the command line.
				</li><li class="listitem">
					Use the <code class="literal">nmtui</code> application to configure connections in a text-based user interface.
				</li><li class="listitem">
					Use the GNOME system menu to quickly connect to wifi networks that do not require any configuration.
				</li><li class="listitem">
					Use the <code class="literal">GNOME Settings</code> application to configure connections by using the GNOME application.
				</li><li class="listitem">
					Use the <code class="literal">nm-connection-editor</code> application to configure connections in a graphical user interface.
				</li><li class="listitem">
					Use the <code class="literal">network</code> RHEL system role to automate the configuration of connections on one or multiple hosts.
				</li></ul></div><section class="section" id="ref_supported-wifi-security-types_assembly_managing-wifi-connections"><div class="titlepage"><div><div><h3 class="title">11.1. Supported wifi security types</h3></div></div></div><p>
				Depending on the security type a wifi network supports, you can transmitted data more or less securely.
			</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					Do not connect to wifi networks that do not use encryption or which support only the insecure WEP or WPA standards.
				</p></div></rh-alert><p>
				Red Hat Enterprise Linux 9 supports the following wifi security types:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">None</code>: Encryption is disabled, and data is transferred in plain text over the network.
					</li><li class="listitem">
						<code class="literal">Enhanced Open</code>: With opportunistic wireless encryption (OWE), devices negotiate unique pairwise master keys (PMK) to encrypt connections in wireless networks without authentication.
					</li><li class="listitem">
						<code class="literal">LEAP</code>: The Lightweight Extensible Authentication Protocol, which was developed by Cisco, is a proprietary version of the extensible authentication protocol (EAP).
					</li><li class="listitem">
						<code class="literal">WPA &amp; WPA2 Personal</code>: In personal mode, the Wi-Fi Protected Access (WPA) and Wi-Fi Protected Access 2 (WPA2) authentication methods use a pre-shared key.
					</li><li class="listitem">
						<code class="literal">WPA &amp; WPA2 Enterprise</code>: In enterprise mode, WPA and WPA2 use the EAP framework and authenticate users to a remote authentication dial-in user service (RADIUS) server.
					</li><li class="listitem">
						<code class="literal">WPA3 Personal</code>: Wi-Fi Protected Access 3 (WPA3) Personal uses simultaneous authentication of equals (SAE) instead of pre-shared keys (PSK) to prevent dictionary attacks. WPA3 uses perfect forward secrecy (PFS).
					</li></ul></div></section><section class="section" id="proc_connecting-to-a-wifi-network-by-using-nmcli_assembly_managing-wifi-connections"><div class="titlepage"><div><div><h3 class="title">11.2. Connecting to a wifi network by using <code class="literal">nmcli</code></h3></div></div></div><p>
				You can use the <code class="literal">nmcli</code> utility to connect to a wifi network. When you attempt to connect to a network for the first time, the utility automatically creates a NetworkManager connection profile for it. If the network requires additional settings, such as static IP addresses, you can then modify the profile after it has been automatically created.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A wifi device is installed on the host.
					</li><li class="listitem">
						The wifi device is enabled, if it has a hardware switch.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						If the wifi radio has been disabled in NetworkManager, enable this feature:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli radio wifi on</strong></span></pre></li><li class="listitem"><p class="simpara">
						Optional: Display the available wifi networks:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device wifi list</strong></span>
IN-USE  BSSID              SSID          MODE   CHAN  RATE        SIGNAL  BARS  SECURITY
        00:53:00:2F:3B:08  Office        Infra  44    270 Mbit/s  57      ▂▄▆_  WPA2 WPA3
        00:53:00:15:03:BF  --            Infra  1     130 Mbit/s  48      ▂▄__  WPA2 WPA3</pre><p class="simpara">
						The service set identifier (<code class="literal">SSID</code>) column contains the names of the networks. If the column shows <code class="literal">--</code>, the access point of this network does not broadcast an SSID.
					</p></li><li class="listitem"><p class="simpara">
						Connect to the wifi network:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device wifi connect Office --ask</strong></span>
Password: <span class="strong strong"><strong>wifi-password</strong></span></pre><p class="simpara">
						If you prefer to set the password in the command instead of entering it interactively, use the <code class="literal">password <span class="emphasis"><em>&lt;wifi_password&gt;</em></span></code> option in the command instead of <code class="literal">--ask</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device wifi connect Office &lt;wifi_password&gt;</strong></span></pre><p class="simpara">
						Note that, if the network requires static IP addresses, NetworkManager fails to activate the connection at this point. You can configure the IP addresses in later steps.
					</p></li><li class="listitem"><p class="simpara">
						If the network requires static IP addresses:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Configure the IPv4 address settings, for example:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify Office ipv4.method manual ipv4.addresses 192.0.2.1/24 ipv4.gateway 192.0.2.254 ipv4.dns 192.0.2.200 ipv4.dns-search example.com</strong></span></pre></li><li class="listitem"><p class="simpara">
								Configure the IPv6 address settings, for example:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify Office ipv6.method manual ipv6.addresses 2001:db8:1::1/64 ipv6.gateway 2001:db8:1::fffe ipv6.dns 2001:db8:1::ffbb ipv6.dns-search example.com</strong></span></pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Re-activate the connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up Office</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the active connections:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection show --active</strong></span>
NAME    ID                                    TYPE  DEVICE
Office  2501eb7e-7b16-4dc6-97ef-7cc460139a58  wifi  wlp0s20f3</pre><p class="simpara">
						If the output lists the wifi connection you have created, the connection is active.
					</p></li><li class="listitem"><p class="simpara">
						Ping a hostname or IP address:
					</p><pre class="literallayout"># *ping -c 3 example.com</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nm-settings-nmcli(5)</code> man page on your system
					</li></ul></div></section><section class="section" id="proc_connecting-to-a-wifi-network-by-using-the-gnome-system-menu_assembly_managing-wifi-connections"><div class="titlepage"><div><div><h3 class="title">11.3. Connecting to a wifi network by using the GNOME system menu</h3></div></div></div><p>
				You can use the GNOME system menu to connect to a wifi network. When you connect to a network for the first time, GNOME creates a NetworkManager connection profile for it. If you configure the connection profile to not automatically connect, you can also use the GNOME system menu to manually connect to a wifi network with an existing NetworkManager connection profile.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					Using the GNOME system menu to establish a connection to a wifi network for the first time has certain limitations. For example, you can not configure IP address settings. In this case first configure the connections:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#proc_connecting-to-a-wifi-network-by-using-the-gnome-settings-application_assembly_managing-wifi-connections" title="11.4. Connecting to a wifi network by using the GNOME settings application">In the <code class="literal">GNOME settings</code> application</a>
						</li><li class="listitem">
							<a class="link" href="#proc_configuring-a-wifi-connection-by-using-nm-connection-editor_assembly_managing-wifi-connections" title="11.6. Configuring a wifi connection by using nm-connection-editor">In the <code class="literal">nm-connection-editor</code> application</a>
						</li><li class="listitem">
							<a class="link" href="#proc_connecting-to-a-wifi-network-by-using-the-gnome-settings-application_assembly_managing-wifi-connections" title="11.4. Connecting to a wifi network by using the GNOME settings application">Using <code class="literal">nmcli</code> commands</a>
						</li></ul></div></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A wifi device is installed on the host.
					</li><li class="listitem">
						The wifi device is enabled, if it has a hardware switch.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Open the system menu on the right side of the top bar.
					</li><li class="listitem">
						Expand the <code class="literal">Wi-Fi Not Connected</code> entry.
					</li><li class="listitem"><p class="simpara">
						Click <code class="literal">Select Network</code>:
					</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/aac3271d7697b62b03c02ee4ae7bc7fd/gnome-select-wifi.png" alt="gnome select wifi"></div></div></li><li class="listitem">
						Select the wifi network you want to connect to.
					</li><li class="listitem">
						Click <code class="literal">Connect</code>.
					</li><li class="listitem">
						If this is the first time you connect to this network, enter the password for the network, and click <code class="literal">Connect</code>.
					</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open the system menu on the right side of the top bar, and verify that the wifi network is connected:
					</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/7970d8467ca6412554e5ccd8bb312956/gnome-wifi-connected.png" alt="gnome wifi connected"></div></div><p class="simpara">
						If the network appears in the list, it is connected.
					</p></li><li class="listitem"><p class="simpara">
						Ping a hostname or IP address:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ping -c 3 <span class="emphasis"><em>example.com</em></span></strong></span></pre></li></ol></div></section><section class="section" id="proc_connecting-to-a-wifi-network-by-using-the-gnome-settings-application_assembly_managing-wifi-connections"><div class="titlepage"><div><div><h3 class="title">11.4. Connecting to a wifi network by using the GNOME settings application</h3></div></div></div><p>
				You can use the <code class="literal">GNOME settings</code> application, also named <code class="literal">gnome-control-center</code>, to connect to a wifi network and configure the connection. When you connect to the network for the first time, GNOME creates a NetworkManager connection profile for it.
			</p><p>
				In <code class="literal">GNOME settings</code>, you can configure wifi connections for all wifi network security types that RHEL supports.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A wifi device is installed on the host.
					</li><li class="listitem">
						The wifi device is enabled, if it has a hardware switch.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Press the <kbd class="keycap">Super</kbd> key, type <code class="literal">Wi-Fi</code>, and press <kbd class="keycap">Enter</kbd>.
					</li><li class="listitem">
						Click on the name of the wifi network you want to connect to.
					</li><li class="listitem">
						Enter the password for the network, and click <code class="literal">Connect</code>.
					</li><li class="listitem"><p class="simpara">
						If the network requires additional settings, such as static IP addresses or a security type other than WPA2 Personal:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Click the gear icon next to the network’s name.
							</li><li class="listitem"><p class="simpara">
								Optional: Configure the network profile on the <code class="literal">Details</code> tab to not automatically connect.
							</p><p class="simpara">
								If you deactivate this feature, you must always manually connect to the network, for example, by using <code class="literal">GNOME settings</code> or the GNOME system menu.
							</p></li><li class="listitem">
								Configure IPv4 settings on the <code class="literal">IPv4</code> tab, and IPv6 settings on the <code class="literal">IPv6</code> tab.
							</li><li class="listitem"><p class="simpara">
								On the <code class="literal">Security</code> tab, select the authentication of the network, such as <code class="literal">WPA3 Personal</code>, and enter the password.
							</p><p class="simpara">
								Depending on the selected security, the application shows additional fields. Fill them accordingly. For details, ask the administrator of the wifi network.
							</p></li><li class="listitem">
								Click <code class="literal">Apply</code>.
							</li></ol></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open the system menu on the right side of the top bar, and verify that the wifi network is connected:
					</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/7970d8467ca6412554e5ccd8bb312956/gnome-wifi-connected.png" alt="gnome wifi connected"></div></div><p class="simpara">
						If the network appears in the list, it is connected.
					</p></li><li class="listitem"><p class="simpara">
						Ping a hostname or IP address:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ping -c 3 example.com</strong></span></pre></li></ol></div></section><section class="section" id="proc_configuring-a-wifi-connection-by-using-nmtui_assembly_managing-wifi-connections"><div class="titlepage"><div><div><h3 class="title">11.5. Configuring a wifi connection by using <code class="literal">nmtui</code></h3></div></div></div><p>
				The <code class="literal">nmtui</code> application provides a text-based user interface for NetworkManager. You can use <code class="literal">nmtui</code> to connect to a wifi network.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					In <code class="literal">nmtui</code>:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Navigate by using the cursor keys.
						</li><li class="listitem">
							Press a button by selecting it and hitting <kbd class="keycap">Enter</kbd>.
						</li><li class="listitem">
							Select and clear checkboxes by using <kbd class="keycap">Space</kbd>.
						</li></ul></div></div></rh-alert><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						If you do not know the network device name you want to use in the connection, display the available devices:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device status</strong></span>
DEVICE     TYPE      STATE                   CONNECTION
wlp2s0     wifi      unavailable             --
...</pre></li><li class="listitem"><p class="simpara">
						Start <code class="literal">nmtui</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmtui</strong></span></pre></li><li class="listitem">
						Select <code class="literal">Edit a connection</code>, and press <kbd class="keycap">Enter</kbd>.
					</li><li class="listitem">
						Press the <code class="literal">Add</code> button.
					</li><li class="listitem">
						Select <code class="literal">Wi-Fi</code> from the list of network types, and press <kbd class="keycap">Enter</kbd>.
					</li><li class="listitem"><p class="simpara">
						Optional: Enter a name for the NetworkManager profile to be created.
					</p><p class="simpara">
						On hosts with multiple profiles, a meaningful name makes it easier to identify the purpose of a profile.
					</p></li><li class="listitem">
						Enter the network device name into the <code class="literal">Device</code> field.
					</li><li class="listitem">
						Enter the name of the Wi-Fi network, the Service Set Identifier (SSID), into the <code class="literal">SSID</code> field.
					</li><li class="listitem">
						Leave the <code class="literal">Mode</code> field set to its default, <code class="literal">Client</code>.
					</li><li class="listitem"><p class="simpara">
						Select the <code class="literal">Security</code> field, press <kbd class="keycap">Enter</kbd>, and set the authentication type of the network from the list.
					</p><p class="simpara">
						Depending on the authentication type you have selected, <code class="literal">nmtui</code> displays different fields.
					</p></li><li class="listitem">
						Fill the authentication type-related fields.
					</li><li class="listitem"><p class="simpara">
						If the Wi-Fi network requires static IP addresses:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Press the <code class="literal">Automatic</code> button next to the protocol, and select <code class="literal">Manual</code> from the displayed list.
							</li><li class="listitem">
								Press the <code class="literal">Show</code> button next to the protocol you want to configure to display additional fields, and fill them.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Press the <code class="literal">OK</code> button to create and automatically activate the new connection.
					</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/e2449736835d1f891b1360c3de0ba23a/nmtui-wi-fi-dynamic-IP.png" alt="nmtui wi fi dynamic IP"></div></div></li><li class="listitem">
						Press the <code class="literal">Back</code> button to return to the main menu.
					</li><li class="listitem">
						Select <code class="literal">Quit</code>, and press <kbd class="keycap">Enter</kbd> to close the <code class="literal">nmtui</code> application.
					</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the active connections:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection show --active</strong></span>
NAME    ID                                    TYPE  DEVICE
Office  2501eb7e-7b16-4dc6-97ef-7cc460139a58  wifi  wlp0s20f3</pre><p class="simpara">
						If the output lists the wifi connection you have created, the connection is active.
					</p></li><li class="listitem"><p class="simpara">
						Ping a hostname or IP address:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ping -c 3 example.com</strong></span></pre></li></ol></div></section><section class="section" id="proc_configuring-a-wifi-connection-by-using-nm-connection-editor_assembly_managing-wifi-connections"><div class="titlepage"><div><div><h3 class="title">11.6. Configuring a wifi connection by using nm-connection-editor</h3></div></div></div><p>
				You can use the <code class="literal">nm-connection-editor</code> application to create a connection profile for a wireless network. In this application you can configure all wifi network authentication types that RHEL supports.
			</p><p>
				By default, NetworkManager enables the auto-connect feature for connection profiles and automatically connects to a saved network if it is available.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A wifi device is installed on the host.
					</li><li class="listitem">
						The wifi device is enabled, if it has a hardware switch.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open a terminal and enter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nm-connection-editor</strong></span></pre></li><li class="listitem">
						Click the <span class="guibutton">+</span> button to add a new connection.
					</li><li class="listitem">
						Select the <code class="literal">Wi-Fi</code> connection type, and click <span class="guibutton">Create</span>.
					</li><li class="listitem">
						Optional: Set a name for the connection profile.
					</li><li class="listitem"><p class="simpara">
						Optional: Configure the network profile on the <code class="literal">General</code> tab to not automatically connect.
					</p><p class="simpara">
						If you deactivate this feature, you must always manually connect to the network, for example, by using <code class="literal">GNOME settings</code> or the GNOME system menu.
					</p></li><li class="listitem">
						On the <code class="literal">Wi-Fi</code> tab, enter the service set identifier (SSID) in the <code class="literal">SSID</code> field.
					</li><li class="listitem"><p class="simpara">
						On the <code class="literal">Wi-Fi Security</code> tab, select the authentication type for the network, such as <code class="literal">WPA3 Personal</code>, and enter the password.
					</p><p class="simpara">
						Depending on the selected security, the application shows additional fields. Fill them accordingly. For details, ask the administrator of the wifi network.
					</p></li><li class="listitem">
						Configure IPv4 settings on the <code class="literal">IPv4</code> tab, and IPv6 settings on the <code class="literal">IPv6</code> tab.
					</li><li class="listitem">
						Click <code class="literal">Save</code>.
					</li><li class="listitem">
						Close the <code class="literal">Network Connections</code> window.
					</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open the system menu on the right side of the top bar, and verify that the wifi network is connected:
					</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/7970d8467ca6412554e5ccd8bb312956/gnome-wifi-connected.png" alt="gnome wifi connected"></div></div><p class="simpara">
						If the network appears in the list, it is connected.
					</p></li><li class="listitem"><p class="simpara">
						Ping a hostname or IP address:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ping -c 3 <span class="emphasis"><em>example.com</em></span></strong></span></pre></li></ol></div></section><section class="section" id="proc_configuring-a-wifi-connection-with-802-1x-network-authentication-by-using-the-network-rhel-system-role_assembly_managing-wifi-connections"><div class="titlepage"><div><div><h3 class="title">11.7. Configuring a wifi connection with 802.1X network authentication by using the <code class="literal">network</code> RHEL system role</h3></div></div></div><p class="_abstract _abstract">
				Network Access Control (NAC) protects a network from unauthorized clients. You can specify the details that are required for the authentication in NetworkManager connection profiles to enable clients to access the network. By using Ansible and the <code class="literal">network</code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.
			</p><p>
				You can use an Ansible playbook to copy a private key, a certificate, and the CA certificate to the client, and then use the <code class="literal">network</code> RHEL system role to configure a connection profile with 802.1X network authentication.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles">You have prepared the control node and the managed nodes</a>
					</li><li class="listitem">
						You are logged in to the control node as a user who can run playbooks on the managed nodes.
					</li><li class="listitem">
						The account you use to connect to the managed nodes has <code class="literal">sudo</code> permissions on them.
					</li><li class="listitem">
						The network supports 802.1X network authentication.
					</li><li class="listitem">
						You installed the <code class="literal">wpa_supplicant</code> package on the managed node.
					</li><li class="listitem">
						DHCP is available in the network of the managed node.
					</li><li class="listitem"><p class="simpara">
						The following files required for TLS authentication exist on the control node:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The client key is stored in the <code class="literal">/srv/data/client.key</code> file.
							</li><li class="listitem">
								The client certificate is stored in the <code class="literal">/srv/data/client.crt</code> file.
							</li><li class="listitem">
								The CA certificate is stored in the <code class="literal">/srv/data/ca.crt</code> file.
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Store your sensitive variables in an encrypted file:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create the vault:
							</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-vault create vault.yml</strong></span>
New Vault password: <span class="emphasis"><em>&lt;vault_password&gt;</em></span>
Confirm New Vault password: <span class="emphasis"><em>&lt;vault_password&gt;</em></span></pre></li><li class="listitem"><p class="simpara">
								After the <code class="literal">ansible-vault create</code> command opens an editor, enter the sensitive data in the <code class="literal"><span class="emphasis"><em>&lt;key&gt;</em></span>: <span class="emphasis"><em>&lt;value&gt;</em></span></code> format:
							</p><pre class="programlisting language-ini">pwd: <span class="emphasis"><em>&lt;password&gt;</em></span></pre></li><li class="listitem">
								Save the changes, and close the editor. Ansible encrypts the data in the vault.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Create a playbook file, for example <code class="literal">~/playbook.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
- name: Configure a wifi connection with 802.1X authentication
  hosts: managed-node-01.example.com
  tasks:
    - name: Copy client key for 802.1X authentication
      ansible.builtin.copy:
        src: "/srv/data/client.key"
        dest: "/etc/pki/tls/private/client.key"
        mode: 0400

    - name: Copy client certificate for 802.1X authentication
      ansible.builtin.copy:
        src: "/srv/data/client.crt"
        dest: "/etc/pki/tls/certs/client.crt"

    - name: Copy CA certificate for 802.1X authentication
      ansible.builtin.copy:
        src: "/srv/data/ca.crt"
        dest: "/etc/pki/ca-trust/source/anchors/ca.crt"

    - name: Wifi connection profile with dynamic IP address settings and 802.1X
      ansible.builtin.import_role:
        name: rhel-system-roles.network
      vars:
        network_connections:
          - name: Wifi connection profile with dynamic IP address settings and 802.1X
            interface_name: wlp1s0
            state: up
            type: wireless
            autoconnect: yes
            ip:
              dhcp4: true
              auto6: true
            wireless:
              ssid: "Example-wifi"
              key_mgmt: "wpa-eap"
            ieee802_1x:
              identity: <span class="emphasis"><em>&lt;user_name&gt;</em></span>
              eap: tls
              private_key: "/etc/pki/tls/client.key"
              private_key_password: "{{ pwd }}"
              private_key_password_flags: none
              client_cert: "/etc/pki/tls/client.pem"
              ca_cert: "/etc/pki/tls/cacert.pem"
              domain_suffix_match: "example.com"</pre><p class="simpara">
						The settings specified in the example playbook include the following:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">ieee802_1x</code></span></dt><dd>
									This variable contains the 802.1X-related settings.
								</dd><dt><span class="term"><code class="literal">eap: tls</code></span></dt><dd>
									Configures the profile to use the certificate-based <code class="literal">TLS</code> authentication method for the Extensible Authentication Protocol (EAP).
								</dd></dl></div><p class="simpara">
						For details about all variables used in the playbook, see the <code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file on the control node.
					</p></li><li class="listitem"><p class="simpara">
						Validate the playbook syntax:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --ask-vault-pass --syntax-check ~/playbook.yml</strong></span></pre><p class="simpara">
						Note that this command only validates the syntax and does not protect against a wrong but valid configuration.
					</p></li><li class="listitem"><p class="simpara">
						Run the playbook:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --ask-vault-pass ~/playbook.yml</strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/rhel-system-roles/network/</code> directory
					</li></ul></div></section><section class="section" id="proc_configuring-a-wifi-connection-with-802-1x-network-authentication-in-an-existing-profile-by-using-nmcli_assembly_managing-wifi-connections"><div class="titlepage"><div><div><h3 class="title">11.8. Configuring a wifi connection with 802.1X network authentication in an existing profile by using <code class="literal">nmcli</code></h3></div></div></div><p class="_abstract _abstract">
				Using the <code class="literal">nmcli</code> utility, you can configure the client to authenticate itself to the network. For example, you can configure Protected Extensible Authentication Protocol (PEAP) authentication with the Microsoft Challenge-Handshake Authentication Protocol version 2 (MSCHAPv2) in an existing NetworkManager wifi connection profile named <code class="literal">wlp1s0</code>.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The network must have 802.1X network authentication.
					</li><li class="listitem">
						The wifi connection profile exists in NetworkManager and has a valid IP configuration.
					</li><li class="listitem">
						If the client is required to verify the certificate of the authenticator, the Certificate Authority (CA) certificate must be stored in the <code class="literal">/etc/pki/ca-trust/source/anchors/</code> directory.
					</li><li class="listitem">
						The <code class="literal">wpa_supplicant</code> package is installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Set the wifi security mode to <code class="literal">wpa-eap</code>, the Extensible Authentication Protocol (EAP) to <code class="literal">peap</code>, the inner authentication protocol to <code class="literal">mschapv2</code>, and the user name:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>wlp1s0</em></span> wireless-security.key-mgmt wpa-eap 802-1x.eap peap 802-1x.phase2-auth mschapv2 802-1x.identity <span class="emphasis"><em>user_name</em></span></strong></span></pre><p class="simpara">
						Note that you must set the <code class="literal">wireless-security.key-mgmt</code>, <code class="literal">802-1x.eap</code>, <code class="literal">802-1x.phase2-auth</code>, and <code class="literal">802-1x.identity</code> parameters in a single command.
					</p></li><li class="listitem"><p class="simpara">
						Optional: Store the password in the configuration:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>wlp1s0</em></span> 802-1x.password <span class="emphasis"><em>password</em></span></strong></span></pre><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							By default, NetworkManager stores the password in plain text in the <code class="literal">/etc/sysconfig/network-scripts/keys-<span class="emphasis"><em>connection_name</em></span></code> file, which is readable only by the <code class="literal">root</code> user. However, plain text passwords in a configuration file can be a security risk.
						</p><p>
							To increase the security, set the <code class="literal">802-1x.password-flags</code> parameter to <code class="literal">0x1</code>. With this setting, on servers with the GNOME desktop environment or the <code class="literal">nm-applet</code> running, NetworkManager retrieves the password from these services. In other cases, NetworkManager prompts for the password.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						If the client needs to verify the certificate of the authenticator, set the <code class="literal">802-1x.ca-cert</code> parameter in the connection profile to the path of the CA certificate:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>wlp1s0</em></span> 802-1x.ca-cert <span class="emphasis"><em>/etc/pki/ca-trust/source/anchors/ca.crt</em></span></strong></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							For security reasons, clients should validate the certiciate of the authenticator.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Activate the connection profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>wlp1s0</em></span></strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Access resources on the network that require network authentication.
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#assembly_managing-wifi-connections_configuring-and-managing-networking" title="Chapter 11. Managing wifi connections">Managing wifi connections</a>
					</li><li class="listitem">
						<code class="literal">nm-settings(5)</code> and <code class="literal">nmcli(1)</code> man pages on your system
					</li></ul></div></section><section class="section" id="proc_manually-setting-the-wireless-regulatory-domain_assembly_managing-wifi-connections"><div class="titlepage"><div><div><h3 class="title">11.9. Manually setting the wireless regulatory domain</h3></div></div></div><p>
				On RHEL, a <code class="literal">udev</code> rule executes the <code class="literal">setregdomain</code> utility to set the wireless regulatory domain. The utility then provides this information to the kernel.
			</p><p>
				By default, <code class="literal">setregdomain</code> attempts to determine the country code automatically. If this fails, the wireless regulatory domain setting might be wrong. To work around this problem, you can manually set the country code.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					Manually setting the regulatory domain disables the automatic detection. Therefore, if you later use the computer in a different country, the previously configured setting might no longer be correct. In this case, remove the <code class="literal">/etc/sysconfig/regdomain</code> file to switch back to automatic detection or use this procedure to manually update the regulatory domain setting again.
				</p></div></rh-alert><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: Display the current regulatory domain settings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>iw reg get</strong></span>
global
country US: DFS-FCC
...</pre></li><li class="listitem"><p class="simpara">
						Create the <code class="literal">/etc/sysconfig/regdomain</code> file with the following content:
					</p><pre class="literallayout"><span class="strong strong"><strong>COUNTRY=<span class="emphasis"><em>&lt;country_code&gt;</em></span></strong></span></pre><p class="simpara">
						Set the <code class="literal">COUNTRY</code> variable to an ISO 3166-1 alpha2 country code, such as <code class="literal">DE</code> for Germany or <code class="literal">US</code> for the United States of America.
					</p></li><li class="listitem"><p class="simpara">
						Set the regulatory domain:
					</p><pre class="literallayout"># <span class="strong strong"><strong>setregdomain</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Display the regulatory domain settings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>iw reg get</strong></span>
global
country DE: DFS-ETSI
...</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">iw(8)</code>, <code class="literal">setregdomain(1)</code>, and <code class="literal">regulatory.bin(5)</code> man pages on your system
					</li><li class="listitem">
						<a class="link" href="https://www.iso.org/iso-3166-country-codes.html">ISO 3166 Country Codes</a>
					</li></ul></div></section></section><section class="chapter" id="proc_configuring-rhel-as-a-wpa2-or-wpa3-personal-access-point_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 12. Configuring RHEL as a WPA2 or WPA3 Personal access point</h2></div></div></div><p>
			On a host with a wifi device, you can use NetworkManager to configure this host as an access point. Wi-Fi Protected Access 2 (WPA2) and Wi-Fi Protected Access 3 (WPA3) Personal provide secure authentication methods, and wireless clients can use a pre-shared key (PSK) to connect to the access point and use services on the RHEL host and in the network.
		</p><p>
			When you configure an access point, NetworkManager automatically:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Configures the <code class="literal">dnsmasq</code> service to provide DHCP and DNS services for clients
				</li><li class="listitem">
					Enables IP forwarding
				</li><li class="listitem">
					Adds <code class="literal">nftables</code> firewall rules to masquerade traffic from the wifi device and configures IP forwarding
				</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					The wifi device supports running in access point mode.
				</li><li class="listitem">
					The wifi device is not in use.
				</li><li class="listitem">
					The host has internet access.
				</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
					List the wifi devices to identify the one that should provide the access point:
				</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device status | grep wifi</strong></span>
<span class="emphasis"><em>wlp0s20f3</em></span>    wifi   disconnected    --</pre></li><li class="listitem"><p class="simpara">
					Verify that the device supports the access point mode:
				</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli -f WIFI-PROPERTIES.AP device show <span class="emphasis"><em>wlp0s20f3</em></span></strong></span>
WIFI-PROPERTIES.AP:     yes</pre><p class="simpara">
					To use a wifi device as an access point, the device must support this feature.
				</p></li><li class="listitem"><p class="simpara">
					Install the <code class="literal">dnsmasq</code> and <code class="literal">NetworkManager-wifi</code> packages:
				</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install dnsmasq NetworkManager-wifi</strong></span></pre><p class="simpara">
					NetworkManager uses the <code class="literal">dnsmasq</code> service to provide DHCP and DNS services to clients of the access point.
				</p></li><li class="listitem"><p class="simpara">
					Create the initial access point configuration:
				</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device wifi hotspot ifname <span class="emphasis"><em>wlp0s20f3</em></span> con-name <span class="emphasis"><em>Example-Hotspot</em></span> ssid <span class="emphasis"><em>Example-Hotspot</em></span> password "<span class="emphasis"><em>password</em></span>"</strong></span></pre><p class="simpara">
					This command creates a connection profile for an access point on the <code class="literal">wlp0s20f3</code> device that provides WPA2 and WPA3 Personal authentication. The name of the wireless network, the Service Set Identifier (SSID), is <code class="literal">Example-Hotspot</code> and uses the pre-shared key <code class="literal">password</code>.
				</p></li><li class="listitem"><p class="simpara">
					Optional: Configure the access point to support only WPA3:
				</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>Example-Hotspot</em></span> 802-11-wireless-security.key-mgmt sae</strong></span></pre></li><li class="listitem"><p class="simpara">
					By default, NetworkManager uses the IP address <code class="literal">10.42.0.1</code> for the wifi device and assigns IP addresses from the remaining <code class="literal">10.42.0.0/24</code> subnet to clients. To configure a different subnet and IP address, enter:
				</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>Example-Hotspot</em></span> ipv4.addresses <span class="emphasis"><em>192.0.2.254/24</em></span></strong></span></pre><p class="simpara">
					The IP address you set, in this case <code class="literal">192.0.2.254</code>, is the one that NetworkManager assigns to the wifi device. Clients will use this IP address as default gateway and DNS server.
				</p></li><li class="listitem"><p class="simpara">
					Activate the connection profile:
				</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>Example-Hotspot</em></span></strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
					On the server:
				</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
							Verify that NetworkManager started the <code class="literal">dnsmasq</code> service and that the service listens on port 67 (DHCP) and 53 (DNS):
						</p><pre class="literallayout"># <span class="strong strong"><strong>ss -tulpn | egrep ":53|:67"</strong></span>
udp   UNCONN 0  0   <span class="emphasis"><em>10.42.0.1</em></span>:53    0.0.0.0:*    users:(("dnsmasq",pid=<span class="emphasis"><em>55905</em></span>,fd=<span class="emphasis"><em>6</em></span>))
udp   UNCONN 0  0     0.0.0.0:67    0.0.0.0:*    users:(("dnsmasq",pid=<span class="emphasis"><em>55905</em></span>,fd=<span class="emphasis"><em>4</em></span>))
tcp   LISTEN 0  32  <span class="emphasis"><em>10.42.0.1</em></span>:53    0.0.0.0:*    users:(("dnsmasq",pid=<span class="emphasis"><em>55905</em></span>,fd=<span class="emphasis"><em>7</em></span>))</pre></li><li class="listitem"><p class="simpara">
							Display the <code class="literal">nftables</code> rule set to ensure that NetworkManager enabled forwarding and masquerading for traffic from the <code class="literal">10.42.0.0/24</code> subnet:
						</p><pre class="literallayout"># <span class="strong strong"><strong>nft list ruleset</strong></span>
table ip nm-shared-wlp0s20f3 {
    chain nat_postrouting {
        type nat hook postrouting priority srcnat; policy accept;
        ip saddr <span class="emphasis"><em>10.42.0.0/24</em></span> ip daddr != <span class="emphasis"><em>10.42.0.0/24</em></span> masquerade
    }

    chain filter_forward {
        type filter hook forward priority filter; policy accept;
        ip daddr <span class="emphasis"><em>10.42.0.0/24</em></span> oifname "<span class="emphasis"><em>wlp0s20f3</em></span>" ct state { established, related } accept
        ip saddr <span class="emphasis"><em>10.42.0.0/24</em></span> iifname "<span class="emphasis"><em>wlp0s20f3</em></span>" accept
        iifname "<span class="emphasis"><em>wlp0s20f3</em></span>" oifname "<span class="emphasis"><em>wlp0s20f3</em></span>" accept
        iifname "<span class="emphasis"><em>wlp0s20f3</em></span>" reject
        oifname "<span class="emphasis"><em>wlp0s20f3</em></span>" reject
    }
}</pre></li></ol></div></li><li class="listitem"><p class="simpara">
					On a client with a wifi adapter:
				</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
							Display the list of available networks:
						</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device wifi</strong></span>
IN-USE  BSSID              SSID             MODE   CHAN  RATE      SIGNAL  BARS  SECURITY
        <span class="emphasis"><em>00:53:00:88:29:04</em></span>  <span class="emphasis"><em>Example-Hotspot</em></span>  Infra  <span class="emphasis"><em>11</em></span>    <span class="emphasis"><em>130</em></span> Mbit/s  <span class="emphasis"><em>62</em></span>      ▂▄▆_  <span class="emphasis"><em>WPA3</em></span>
...</pre></li><li class="listitem">
							Connect to the <code class="literal">Example-Hotspot</code> wireless network. See <a class="link" href="#assembly_managing-wifi-connections_configuring-and-managing-networking" title="Chapter 11. Managing wifi connections">Managing Wi-Fi connections</a>.
						</li><li class="listitem"><p class="simpara">
							Ping a host on the remote network or the internet to verify that the connection works:
						</p><pre class="literallayout"># <span class="strong strong"><strong>ping -c 3 www.redhat.com</strong></span></pre></li></ol></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
					<code class="literal">nm-settings(5)</code> man page on your system
				</li></ul></div></section><section class="chapter" id="assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 13. Using MACsec to encrypt layer-2 traffic in the same physical network</h2></div></div></div><p class="_abstract _abstract">
			You can use MACsec to secure the communication between two devices (point-to-point). For example, your branch office is connected over a Metro-Ethernet connection with the central office, you can configure MACsec on the two hosts that connect the offices to increase the security.
		</p><section class="section" id="how-macsec-increases-security_assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network"><div class="titlepage"><div><div><h3 class="title">13.1. How MACsec increases security</h3></div></div></div><p>
				Media Access Control security (MACsec) is a layer-2 protocol that secures different traffic types over the Ethernet links, including:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Dynamic host configuration protocol (DHCP)
					</li><li class="listitem">
						address resolution protocol (ARP)
					</li><li class="listitem">
						IPv4 and IPv6 traffic
					</li><li class="listitem">
						Any traffic over IP such as TCP or UDP
					</li></ul></div><p>
				MACsec encrypts and authenticates all traffic in LANs, by default with the GCM-AES-128 algorithm, and uses a pre-shared key to establish the connection between the participant hosts. To change the pre-shared key, you must update the NM configuration on all network hosts that use MACsec.
			</p><p>
				A MACsec connection uses an Ethernet device, such as an Ethernet network card, VLAN, or tunnel device, as a parent. You can either set an IP configuration only on the MACsec device to communicate with other hosts only by using the encrypted connection, or you can also set an IP configuration on the parent device. In the latter case, you can use the parent device to communicate with other hosts using an unencrypted connection and the MACsec device for encrypted connections.
			</p><p>
				MACsec does not require any special hardware. For example, you can use any switch, except if you want to encrypt traffic only between a host and a switch. In this scenario, the switch must also support MACsec.
			</p><p>
				In other words, you can configure MACsec for two common scenarios:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Host-to-host
					</li><li class="listitem">
						Host-to-switch and switch-to-other-hosts
					</li></ul></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					You can use MACsec only between hosts being in the same physical or virtual LAN.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://developers.redhat.com/blog/2016/10/14/macsec-a-different-solution-to-encrypt-network-traffic">MACsec: a different solution to encrypt network traffic</a>
					</li></ul></div></section><section class="section" id="proc_configuring-a-macsec-connection-using-nmcli_assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network"><div class="titlepage"><div><div><h3 class="title">13.2. Configuring a MACsec connection by using <code class="literal">nmcli</code></h3></div></div></div><p class="_abstract _abstract">
				You can use the <code class="literal">nmcli</code> utility to configure Ethernet interfaces to use MACsec. For example, you can create a MACsec connection between two hosts that are connected over Ethernet.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On the first host on which you configure MACsec:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Create the connectivity association key (CAK) and connectivity-association key name (CKN) for the pre-shared key:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Create a 16-byte hexadecimal CAK:
									</p><pre class="literallayout"># <span class="strong strong"><strong>dd if=/dev/urandom count=16 bs=1 2&gt; /dev/null | hexdump -e '1/2 "%04x"'</strong></span>
50b71a8ef0bd5751ea76de6d6c98c03a</pre></li><li class="listitem"><p class="simpara">
										Create a 32-byte hexadecimal CKN:
									</p><pre class="literallayout"># <span class="strong strong"><strong>dd if=/dev/urandom count=32 bs=1 2&gt; /dev/null | hexdump -e '1/2 "%04x"'</strong></span>
f2b4297d39da7330910a74abc0449feb45b5c0b9fc23df1430e1898fcf1c4550</pre></li></ol></div></li></ul></div></li><li class="listitem">
						On both hosts you want to connect over a MACsec connection:
					</li><li class="listitem"><p class="simpara">
						Create the MACsec connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type macsec con-name macsec0 ifname macsec0 connection.autoconnect yes macsec.parent enp1s0 macsec.mode psk macsec.mka-cak 50b71a8ef0bd5751ea76de6d6c98c03a macsec.mka-ckn f2b4297d39da7330910a74abc0449feb45b5c0b9fc23df1430e1898fcf1c4550</strong></span></pre><p class="simpara">
						Use the CAK and CKN generated in the previous step in the <code class="literal">macsec.mka-cak</code> and <code class="literal">macsec.mka-ckn</code> parameters. The values must be the same on every host in the MACsec-protected network.
					</p></li><li class="listitem"><p class="simpara">
						Configure the IP settings on the MACsec connection.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Configure the <code class="literal">IPv4</code> settings. For example, to set a static <code class="literal">IPv4</code> address, network mask, default gateway, and DNS server to the <code class="literal">macsec0</code> connection, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify macsec0 ipv4.method manual ipv4.addresses '192.0.2.1/24' ipv4.gateway '192.0.2.254' ipv4.dns '192.0.2.253'</strong></span></pre></li><li class="listitem"><p class="simpara">
								Configure the <code class="literal">IPv6</code> settings. For example, to set a static <code class="literal">IPv6</code> address, network mask, default gateway, and DNS server to the <code class="literal">macsec0</code> connection, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify macsec0 ipv6.method manual ipv6.addresses '2001:db8:1::1/32' ipv6.gateway '2001:db8:1::fffe' ipv6.dns '2001:db8:1::fffd'</strong></span></pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Activate the connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up macsec0</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify that the traffic is encrypted:
					</p><pre class="literallayout"># <span class="strong strong"><strong>tcpdump -nn -i enp1s0</strong></span></pre></li><li class="listitem"><p class="simpara">
						Optional: Display the unencrypted traffic:
					</p><pre class="literallayout"># <span class="strong strong"><strong>tcpdump -nn -i macsec0</strong></span></pre></li><li class="listitem"><p class="simpara">
						Display MACsec statistics:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip macsec show</strong></span></pre></li><li class="listitem"><p class="simpara">
						Display individual counters for each type of protection: integrity-only (encrypt off) and encryption (encrypt on)
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -s macsec show</strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://developers.redhat.com/blog/2016/10/14/macsec-a-different-solution-to-encrypt-network-traffic">MACsec: a different solution to encrypt network traffic</a>
					</li></ul></div></section><section class="section" id="configuring-a-macsec-connection-using-nmstatectl_assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network"><div class="titlepage"><div><div><h3 class="title">13.3. Configuring a MACsec connection by using <code class="literal">nmstatectl</code></h3></div></div></div><p class="_abstract _abstract">
				You can configure Ethernet interfaces to use MACsec through the <code class="literal">nmstatectl</code> utility in a declarative way. For example, in a YAML file, you describe the desired state of your network, which is supposed to have a MACsec connection between two hosts connected over Ethernet. The <code class="literal">nmstatectl</code> utility interprets the YAML file and deploys persistent and consistent network configuration across the hosts.
			</p><p>
				Using the MACsec security standard for securing communication at the link layer, also known as layer 2 of the Open Systems Interconnection (OSI) model provides the following notable benefits:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Encryption at layer 2 eliminates the need for encrypting individual services at layer 7. This reduces the overhead associated with managing a large number of certificates for each endpoint on each host.
					</li><li class="listitem">
						Point-to-point security between directly connected network devices such as routers and switches.
					</li><li class="listitem">
						No changes needed for applications and higher-layer protocols.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A physical or virtual Ethernet Network Interface Controller (NIC) exists in the server configuration.
					</li><li class="listitem">
						The <code class="literal">nmstate</code> package is installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On the first host on which you configure MACsec, create the connectivity association key (CAK) and connectivity-association key name (CKN) for the pre-shared key:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create a 16-byte hexadecimal CAK:
							</p><pre class="literallayout"># <span class="strong strong"><strong>dd if=/dev/urandom count=16 bs=1 2&gt; /dev/null | hexdump -e '1/2 "%04x"'</strong></span>
50b71a8ef0bd5751ea76de6d6c98c03a</pre></li><li class="listitem"><p class="simpara">
								Create a 32-byte hexadecimal CKN:
							</p><pre class="literallayout"># <span class="strong strong"><strong>dd if=/dev/urandom count=32 bs=1 2&gt; /dev/null | hexdump -e '1/2 "%04x"'</strong></span>
f2b4297d39da7330910a74abc0449feb45b5c0b9fc23df1430e1898fcf1c4550</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						On both hosts that you want to connect over a MACsec connection, complete the following steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create a YAML file, for example <code class="literal">create-macsec-connection.yml</code>, with the following settings:
							</p><pre class="literallayout">---
routes:
  config:
  - destination: 0.0.0.0/0
    next-hop-interface: macsec0
    next-hop-address: 192.0.2.2
    table-id: 254
  - destination: 192.0.2.2/32
    next-hop-interface: macsec0
    next-hop-address: 0.0.0.0
    table-id: 254
dns-resolver:
  config:
    search:
    - example.com
    server:
    - 192.0.2.200
    - 2001:db8:1::ffbb
interfaces:
- name: macsec0
  type: macsec
  state: up
  ipv4:
    enabled: true
    address:
    - ip: 192.0.2.1
      prefix-length: 32
  ipv6:
    enabled: true
    address:
    - ip: 2001:db8:1::1
      prefix-length: 64
  macsec:
    encrypt: true
    base-iface: enp0s1
    mka-cak: 50b71a8ef0bd5751ea76de6d6c98c03a
    mka-ckn: f2b4297d39da7330910a74abc0449feb45b5c0b9fc23df1430e1898fcf1c4550
    port: 0
    validation: strict
    send-sci: true</pre></li><li class="listitem">
								Use the CAK and CKN generated in the previous step in the <code class="literal">mka-cak</code> and <code class="literal">mka-ckn</code> parameters. The values must be the same on every host in the MACsec-protected network.
							</li><li class="listitem"><p class="simpara">
								Optional: In the same YAML configuration file, you can also configure the following settings:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										A static IPv4 address - <code class="literal">192.0.2.1</code> with the <code class="literal">/32</code> subnet mask
									</li><li class="listitem">
										A static IPv6 address - <code class="literal">2001:db8:1::1</code> with the <code class="literal">/64</code> subnet mask
									</li><li class="listitem">
										An IPv4 default gateway - <code class="literal">192.0.2.2</code>
									</li><li class="listitem">
										An IPv4 DNS server - <code class="literal">192.0.2.200</code>
									</li><li class="listitem">
										An IPv6 DNS server - <code class="literal">2001:db8:1::ffbb</code>
									</li><li class="listitem">
										A DNS search domain - <code class="literal">example.com</code>
									</li></ul></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Apply the settings to the system:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmstatectl apply create-macsec-connection.yml</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the current state in YAML format:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmstatectl show macsec0</strong></span></pre></li><li class="listitem"><p class="simpara">
						Verify that the traffic is encrypted:
					</p><pre class="literallayout"># <span class="strong strong"><strong>tcpdump -nn -i enp0s1</strong></span></pre></li><li class="listitem"><p class="simpara">
						Optional: Display the unencrypted traffic:
					</p><pre class="literallayout"># <span class="strong strong"><strong>tcpdump -nn -i macsec0</strong></span></pre></li><li class="listitem"><p class="simpara">
						Display MACsec statistics:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip macsec show</strong></span></pre></li><li class="listitem"><p class="simpara">
						Display individual counters for each type of protection: integrity-only (encrypt off) and encryption (encrypt on)
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -s macsec show</strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://developers.redhat.com/blog/2016/10/14/macsec-a-different-solution-to-encrypt-network-traffic">MACsec: a different solution to encrypt network traffic</a>
					</li></ul></div></section></section><section class="chapter" id="getting-started-with-ipvlan_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 14. Getting started with IPVLAN</h2></div></div></div><p class="_abstract _abstract">
			IPVLAN is a driver for a virtual network device that can be used in container environment to access the host network. IPVLAN exposes a single MAC address to the external network regardless the number of IPVLAN device created inside the host network. This means that a user can have multiple IPVLAN devices in multiple containers and the corresponding switch reads a single MAC address. IPVLAN driver is useful when the local switch imposes constraints on the total number of MAC addresses that it can manage.
		</p><section class="section" id="ipvlan-modes_getting-started-with-ipvlan"><div class="titlepage"><div><div><h3 class="title">14.1. IPVLAN modes</h3></div></div></div><p class="_abstract _abstract">
				The following modes are available for IPVLAN:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>L2 mode</strong></span>
					</p><p class="simpara">
						In IPVLAN <span class="strong strong"><strong>L2 mode</strong></span>, virtual devices receive and respond to address resolution protocol (ARP) requests. The <code class="literal">netfilter</code> framework runs only inside the container that owns the virtual device. No <code class="literal">netfilter</code> chains are executed in the default namespace on the containerized traffic. Using <span class="strong strong"><strong>L2 mode</strong></span> provides good performance, but less control on the network traffic.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>L3 mode</strong></span>
					</p><p class="simpara">
						In <span class="strong strong"><strong>L3 mode</strong></span>, virtual devices process only <span class="strong strong"><strong>L3</strong></span> traffic and above. Virtual devices do not respond to ARP request and users must configure the neighbour entries for the IPVLAN IP addresses on the relevant peers manually. The egress traffic of a relevant container is landed on the <code class="literal">netfilter</code> POSTROUTING and OUTPUT chains in the default namespace while the ingress traffic is threaded in the same way as <span class="strong strong"><strong>L2 mode</strong></span>. Using <span class="strong strong"><strong>L3 mode</strong></span> provides good control but decreases the network traffic performance.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>L3S mode</strong></span>
					</p><p class="simpara">
						In <span class="strong strong"><strong>L3S mode</strong></span>, virtual devices process the same way as in <span class="strong strong"><strong>L3 mode</strong></span>, except that both egress and ingress traffics of a relevant container are landed on <code class="literal">netfilter</code> chain in the default namespace. <span class="strong strong"><strong>L3S mode</strong></span> behaves in a similar way to <span class="strong strong"><strong>L3 mode</strong></span> but provides greater control of the network.
					</p></li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The IPVLAN virtual device does not receive broadcast and multicast traffic in case of <span class="strong strong"><strong>L3</strong></span> and <span class="strong strong"><strong>L3S</strong></span> modes.
				</p></div></rh-alert></section><section class="section" id="ipvlan-and-macvlan_getting-started-with-ipvlan"><div class="titlepage"><div><div><h3 class="title">14.2. Comparison of IPVLAN and MACVLAN</h3></div></div></div><p class="_abstract _abstract">
				The following table shows the major differences between MACVLAN and IPVLAN:
			</p><rh-table><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140053157978624" scope="col">MACVLAN</th><th align="left" valign="top" id="idm140053161176944" scope="col">IPVLAN</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140053157978624"> <p>
								Uses MAC address for each MACVLAN device.
							</p>
							 <p>
								Note that, if a switch reaches the maximum number of MAC addresses it can store in its MAC table, connectivity can be lost.
							</p>
							 </td><td align="left" valign="top" headers="idm140053161176944"> <p>
								Uses single MAC address which does not limit the number of IPVLAN devices.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053157978624"> <p>
								Netfilter rules for a global namespace cannot affect traffic to or from a MACVLAN device in a child namespace.
							</p>
							 </td><td align="left" valign="top" headers="idm140053161176944"> <p>
								It is possible to control traffic to or from a IPVLAN device in <span class="strong strong"><strong>L3 mode</strong></span> and <span class="strong strong"><strong>L3S mode</strong></span>.
							</p>
							 </td></tr></tbody></table></rh-table><p>
				Both IPVLAN and MACVLAN do not require any level of encapsulation.
			</p></section><section class="section" id="creating-and-configuring-the-ipvlan-device-using-iproute2_getting-started-with-ipvlan"><div class="titlepage"><div><div><h3 class="title">14.3. Creating and configuring the IPVLAN device using iproute2</h3></div></div></div><p class="_abstract _abstract">
				This procedure shows how to set up the IPVLAN device using <code class="literal">iproute2</code>.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To create an IPVLAN device, enter the following command:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip link add link <span class="emphasis"><em>real_NIC_device</em></span> name <span class="emphasis"><em>IPVLAN_device</em></span> type ipvlan mode l2</strong></span></pre><p class="simpara">
						Note that network interface controller (NIC) is a hardware component which connects a computer to a network.
					</p><div class="example" id="idm140053161156560"><p class="title"><strong>Example 14.1. Creating an IPVLAN device</strong></p><div class="example-contents"><pre class="literallayout"># <span class="strong strong"><strong>ip link add link enp0s31f6 name my_ipvlan type ipvlan mode l2</strong></span>
# <span class="strong strong"><strong>ip link</strong></span>
47: my_ipvlan@enp0s31f6: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000 link/ether e8:6a:6e:8a:a2:44 brd ff:ff:ff:ff:ff:ff</pre></div></div></li><li class="listitem"><p class="simpara">
						To assign an <code class="literal">IPv4</code> or <code class="literal">IPv6</code> address to the interface, enter the following command:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip addr add dev <span class="emphasis"><em>IPVLAN_device</em></span> <span class="emphasis"><em>IP_address/subnet_mask_prefix</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						In case of configuring an IPVLAN device in <span class="strong strong"><strong>L3 mode</strong></span> or <span class="strong strong"><strong>L3S mode</strong></span>, make the following setups:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Configure the neighbor setup for the remote peer on the remote host:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip neigh add dev <span class="emphasis"><em>peer_device</em></span> <span class="emphasis"><em>IPVLAN_device_IP_address</em></span> lladdr <span class="emphasis"><em>MAC_address</em></span></strong></span></pre><p class="simpara">
								where <span class="emphasis"><em>MAC_address</em></span> is the MAC address of the real NIC on which an IPVLAN device is based on.
							</p></li><li class="listitem"><p class="simpara">
								Configure an IPVLAN device for <span class="strong strong"><strong>L3 mode</strong></span> with the following command:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip route add dev <span class="emphasis"><em>&lt;real_NIC_device&gt;</em></span> <span class="emphasis"><em>&lt;peer_IP_address/32&gt;</em></span></strong></span></pre><p class="simpara">
								For <span class="strong strong"><strong>L3S mode</strong></span>:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip route add dev <span class="emphasis"><em>real_NIC_device</em></span> <span class="emphasis"><em>peer_IP_address/32</em></span></strong></span></pre><p class="simpara">
								where IP-address represents the address of the remote peer.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						To set an IPVLAN device active, enter the following command:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip link set dev <span class="emphasis"><em>IPVLAN_device</em></span> up</strong></span></pre></li><li class="listitem"><p class="simpara">
						To check if the IPVLAN device is active, execute the following command on the remote host:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ping <span class="emphasis"><em>IP_address</em></span></strong></span></pre><p class="simpara">
						where the <span class="emphasis"><em>IP_address</em></span> uses the IP address of the IPVLAN device.
					</p></li></ol></div></section></section><section class="chapter" id="configuring-networkmanager-to-ignore-certain-devices_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 15. Configuring NetworkManager to ignore certain devices</h2></div></div></div><p class="_abstract _abstract">
			By default, NetworkManager manages all devices. To ignore certain devices, you can configure NetworkManager by setting as <code class="literal">unmanaged</code>.
		</p><section class="section" id="permanently-configuring-a-device-as-unmanaged-in-networkmanager_configuring-networkmanager-to-ignore-certain-devices"><div class="titlepage"><div><div><h3 class="title">15.1. Permanently configuring a device as unmanaged in NetworkManager</h3></div></div></div><p class="_abstract _abstract">
				You can permanently configure devices as <code class="literal">unmanaged</code> based on several criteria, such as the interface name, MAC address, or device type.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: Display the list of devices to identify the device or MAC address you want to set as <code class="literal">unmanaged</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip link show</strong></span>
...
2: enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
    link/ether 52:54:00:74:79:56 brd ff:ff:ff:ff:ff:ff
...</pre></li><li class="listitem"><p class="simpara">
						Create the <code class="literal">/etc/NetworkManager/conf.d/99-unmanaged-devices.conf</code> file with the following content:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To configure a specific interface as unmanaged, add:
							</p><pre class="screen">[keyfile]
unmanaged-devices=interface-name:enp1s0</pre></li><li class="listitem"><p class="simpara">
								To configure a device with a specific MAC address as unmanaged, add:
							</p><pre class="screen">[keyfile]
unmanaged-devices=mac:52:54:00:74:79:56</pre></li><li class="listitem"><p class="simpara">
								To configure all devices of a specific type as unmanaged, add:
							</p><pre class="screen">[keyfile]
unmanaged-devices=type:ethernet</pre></li><li class="listitem"><p class="simpara">
								To set multiple devices as unmanaged, separate the entries in the <code class="literal">unmanaged-devices</code> parameter with a semicolon, for example:
							</p><pre class="screen">[keyfile]
unmanaged-devices=interface-name:enp1s0;interface-name:enp7s0</pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Reload the <code class="literal">NetworkManager</code> service:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl reload NetworkManager</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Display the list of devices:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device status</strong></span>
DEVICE  TYPE      STATE      CONNECTION
enp1s0  ethernet  <span class="strong strong"><strong>unmanaged</strong></span>  --
...</pre><p class="simpara">
						The <code class="literal">unmanaged</code> state next to the <code class="literal">enp1s0</code> device indicates that NetworkManager does not manage this device.
					</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						If the device is not shown as <code class="literal">unmanaged</code>, display the NetworkManager configuration:
					</p><pre class="literallayout"># <span class="strong strong"><strong>NetworkManager --print-config</strong></span>
...
[keyfile]
unmanaged-devices=interface-name:enp1s0
...</pre><p class="simpara">
						If the output does not match the settings that you configured, ensure that no configuration file with a higher priority overrides your settings. For details about how NetworkManager merges multiple configuration files, see the <code class="literal">NetworkManager.conf(5)</code> man page on your system.
					</p></li></ul></div></section><section class="section" id="temporarily-configuring-a-device-as-unmanaged-in-networkmanager_configuring-networkmanager-to-ignore-certain-devices"><div class="titlepage"><div><div><h3 class="title">15.2. Temporarily configuring a device as unmanaged in NetworkManager</h3></div></div></div><p class="_abstract _abstract">
				You can temporarily configure devices as <code class="literal">unmanaged</code>, for example, for testing purposes.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: Display the list of devices to identify the device you want to set as <code class="literal">unmanaged</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device status</strong></span>
DEVICE  TYPE      STATE         CONNECTION
enp1s0  ethernet  disconnected  --
...</pre></li><li class="listitem"><p class="simpara">
						Set the <code class="literal">enp1s0</code> device to the <code class="literal">unmanaged</code> state:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device set enp1s0 managed no</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Display the list of devices:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli device status</strong></span>
DEVICE  TYPE      STATE      CONNECTION
enp1s0  ethernet  <span class="strong strong"><strong>unmanaged</strong></span>  --
...</pre><p class="simpara">
						The <code class="literal">unmanaged</code> state next to the <code class="literal">enp1s0</code> device indicates that NetworkManager does not manage this device.
					</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">NetworkManager.conf(5)</code> man page on your system
					</li></ul></div></section></section><section class="chapter" id="proc_configuring-the-loopback-interface-by-using-nmcli_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 16. Configuring the loopback interface by using <code class="literal">nmcli</code></h2></div></div></div><p>
			By default, NetworkManager does not manage the loopback (<code class="literal">lo</code>) interface. After creating a connection profile for the <code class="literal">lo</code> interface, you can configure this device by using NetworkManager. Some of the examples are as follows:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Assign additional IP addresses to the <code class="literal">lo</code> interface
				</li><li class="listitem">
					Define DNS addresses
				</li><li class="listitem">
					Change the Maximum Transmission Unit (MTU) size of the <code class="literal">lo</code> interface
				</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
					Create a new connection of type <code class="literal">loopback</code>:
				</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add con-name <span class="emphasis"><em>example-loopback</em></span> type loopback</strong></span></pre></li><li class="listitem"><p class="simpara">
					Configure custom connection settings, for example:
				</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
							To assign an additional IP address to the interface, enter:
						</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>example-loopback</em></span> +ipv4.addresses <span class="emphasis"><em>192.0.2.1/24</em></span></strong></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								NetworkManager manages the <code class="literal">lo</code> interface by always assigning the IP addresses <code class="literal">127.0.0.1</code> and <code class="literal">::1</code> that are persistent across the reboots. You can not override <code class="literal">127.0.0.1</code> and <code class="literal">::1</code>. However, you can assign additional IP addresses to the interface.
							</p></div></rh-alert></li><li class="listitem"><p class="simpara">
							To set a custom Maximum Transmission Unit (MTU), enter:
						</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli con mod <span class="emphasis"><em>example-loopback</em></span> loopback.mtu <span class="emphasis"><em>16384</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
							To set an IP address to your DNS server, enter:
						</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>example-loopback</em></span> ipv4.dns <span class="emphasis"><em>192.0.2.0</em></span></strong></span></pre><p class="simpara">
							If you set a DNS server in the loopback connection profile, this entry is always available in the <code class="literal">/etc/resolv.conf</code> file. The DNS server entry remains independent of whether or not the host roams between different networks.
						</p></li></ol></div></li><li class="listitem"><p class="simpara">
					Activate the connection:
				</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up example-loopback</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
					Display the settings of the <code class="literal">lo</code> interface:
				</p><pre class="literallayout"># <span class="strong strong"><strong>ip address show lo</strong></span>

1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span class="strong strong"><strong>16384</strong></span> qdisc noqueue state UNKNOWN group default qlen 1000

link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet <code class="literal">192.0.2.1/24</code> brd <code class="literal">192.0.2.255</code> scope global lo valid_lft forever preferred_lft forever

inet6 ::1/128 scope host
valid_lft forever preferred_lft forever</pre></li><li class="listitem"><p class="simpara">
					Verify the DNS address:
				</p><pre class="literallayout"># <span class="strong strong"><strong>cat /etc/resolv.conf</strong></span>
...
nameserver <code class="literal">192.0.2.0</code>
...</pre></li></ol></div></section><section class="chapter" id="creating-a-dummy-interface_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 17. Creating a dummy interface</h2></div></div></div><p class="_abstract _abstract">
			As a Red Hat Enterprise Linux user, you can create and use dummy network interfaces for debugging and testing purposes. A dummy interface provides a device to route packets without actually transmitting them. It enables you to create additional loopback-like devices managed by NetworkManager and makes an inactive SLIP (Serial Line Internet Protocol) address look like a real address for local programs.
		</p><section class="section" id="creating-a-dummy-interface-with-both-an-ipv4-and-ipv6-address-using-nmcli_creating-a-dummy-interface"><div class="titlepage"><div><div><h3 class="title">17.1. Creating a dummy interface with both an IPv4 and IPv6 address by using <code class="literal">nmcli</code></h3></div></div></div><p class="_abstract _abstract">
				You can create a dummy interface with various settings, such as IPv4 and IPv6 addresses. After creating the interface, NetworkManager automatically assigns it to the default <code class="literal">public</code> <code class="literal">firewalld</code> zone.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Create a dummy interface named <code class="literal">dummy0</code> with static IPv4 and IPv6 addresses:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type dummy ifname <span class="emphasis"><em>dummy0</em></span> ipv4.method manual ipv4.addresses <span class="emphasis"><em>192.0.2.1/24</em></span> ipv6.method manual ipv6.addresses <span class="emphasis"><em>2001:db8:2::1/64</em></span></strong></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							To configure a dummy interface without IPv4 and IPv6 addresses, set both the <code class="literal">ipv4.method</code> and <code class="literal">ipv6.method</code> parameters to <code class="literal">disabled</code>. Otherwise, IP auto-configuration fails, and NetworkManager deactivates the connection and removes the device.
						</p></div></rh-alert></li></ul></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						List the connection profiles:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection show</strong></span>
NAME            UUID                                  TYPE     DEVICE
dummy-dummy0    aaf6eb56-73e5-4746-9037-eed42caa8a65  dummy    dummy0</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nm-settings(5)</code> man page on your system
					</li></ul></div></section></section><section class="chapter" id="using-networkmanager-to-disable-ipv6-for-a-specific-connection_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 18. Using NetworkManager to disable IPv6 for a specific connection</h2></div></div></div><p class="_abstract _abstract">
			On a system that uses NetworkManager to manage network interfaces, you can disable the IPv6 protocol if the network only uses IPv4. If you disable <code class="literal">IPv6</code>, NetworkManager automatically sets the corresponding <code class="literal">sysctl</code> values in the Kernel.
		</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
				If disabling IPv6 using kernel tunables or kernel boot parameters, additional consideration must be given to system configuration. For more information, see the <a class="link" href="https://access.redhat.com/solutions/8709">How do I disable or enable the IPv6 protocol in RHEL?</a> article.
			</p></div></rh-alert><section class="section" id="disabling-ipv6-on-a-connection-using-nmcli_using-networkmanager-to-disable-ipv6-for-a-specific-connection"><div class="titlepage"><div><div><h3 class="title">18.1. Disabling IPv6 on a connection using <code class="literal">nmcli</code></h3></div></div></div><p class="_abstract _abstract">
				You can use the <code class="literal">nmcli</code> utility to disable the <code class="literal">IPv6</code> protocol on the command line.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The system uses NetworkManager to manage network interfaces.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: Display the list of network connections:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection show</strong></span>
NAME    UUID                                  TYPE      DEVICE
Example 7a7e0151-9c18-4e6f-89ee-65bb2d64d365  ethernet  enp1s0
...</pre></li><li class="listitem"><p class="simpara">
						Set the <code class="literal">ipv6.method</code> parameter of the connection to <code class="literal">disabled</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>Example</em></span> ipv6.method "disabled"</strong></span></pre></li><li class="listitem"><p class="simpara">
						Restart the network connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>Example</em></span></strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the IP settings of the device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip address show <span class="emphasis"><em>enp1s0</em></span></strong></span>
2: <span class="emphasis"><em>enp1s0</em></span>: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 52:54:00:6b:74:be brd ff:ff:ff:ff:ff:ff
    inet 192.0.2.1/24 brd 192.10.2.255 scope global noprefixroute <span class="emphasis"><em>enp1s0</em></span>
       valid_lft forever preferred_lft forever</pre><p class="simpara">
						If no <code class="literal">inet6</code> entry is displayed, <code class="literal">IPv6</code> is disabled on the device.
					</p></li><li class="listitem"><p class="simpara">
						Verify that the <code class="literal">/proc/sys/net/ipv6/conf/<span class="emphasis"><em>enp1s0</em></span>/disable_ipv6</code> file now contains the value <code class="literal">1</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /proc/sys/net/ipv6/conf/<span class="emphasis"><em>enp1s0</em></span>/disable_ipv6</strong></span>
1</pre><p class="simpara">
						The value <code class="literal">1</code> means that <code class="literal">IPv6</code> is disabled for the device.
					</p></li></ol></div></section></section><section class="chapter" id="assembly_changing-a-hostname_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 19. Changing a hostname</h2></div></div></div><p>
			The hostname of a system is the name on the system itself. You can set the name when you install RHEL, and you can change it afterwards.
		</p><section class="section" id="proc_changing-a-hostname-using-nmcli_assembly_changing-a-hostname"><div class="titlepage"><div><div><h3 class="title">19.1. Changing a hostname by using <code class="literal">nmcli</code></h3></div></div></div><p>
				You can use the <code class="literal">nmcli</code> utility to update the system hostname. Note that other utilities might use a different term, such as static or persistent hostname.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: Display the current hostname setting:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli general hostname</strong></span>
<span class="emphasis"><em>old-hostname.example.com</em></span></pre></li><li class="listitem"><p class="simpara">
						Set the new hostname:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli general hostname <span class="emphasis"><em>new-hostname.example.com</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						NetworkManager automatically restarts the <code class="literal">systemd-hostnamed</code> to activate the new name. For the changes to take effect, reboot the host:
					</p><pre class="literallayout"># <span class="strong strong"><strong>reboot</strong></span></pre><p class="simpara">
						Alternatively, if you know which services use the hostname:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Restart all services that only read the hostname when the service starts:
							</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl restart <span class="emphasis"><em>&lt;service_name&gt;</em></span></strong></span></pre></li><li class="listitem">
								Active shell users must re-login for the changes to take effect.
							</li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Display the hostname:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli general hostname</strong></span>
<span class="emphasis"><em>new-hostname.example.com</em></span></pre></li></ul></div></section><section class="section" id="proc_changing-a-hostname-using-hostnamectl_assembly_changing-a-hostname"><div class="titlepage"><div><div><h3 class="title">19.2. Changing a hostname by using hostnamectl</h3></div></div></div><p>
				You can use the <code class="literal">hostnamectl</code> utility to update the hostname. By default, this utility sets the following hostname types:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Static hostname: Stored in the <code class="literal">/etc/hostname</code> file. Typically, services use this name as the hostname.
					</li><li class="listitem">
						Pretty hostname: A descriptive name, such as <code class="literal">Proxy server in data center A</code>.
					</li><li class="listitem">
						Transient hostname: A fall-back value that is typically received from the network configuration.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: Display the current hostname setting:
					</p><pre class="literallayout"># <span class="strong strong"><strong>hostnamectl status --static</strong></span>
<span class="emphasis"><em>old-hostname.example.com</em></span></pre></li><li class="listitem"><p class="simpara">
						Set the new hostname:
					</p><pre class="literallayout"># <span class="strong strong"><strong>hostnamectl set-hostname <span class="emphasis"><em>new-hostname.example.com</em></span></strong></span></pre><p class="simpara">
						This command sets the static, pretty, and transient hostname to the new value. To set only a specific type, pass the <code class="literal">--static</code>, <code class="literal">--pretty</code>, or <code class="literal">--transient</code> option to the command.
					</p></li><li class="listitem"><p class="simpara">
						The <code class="literal">hostnamectl</code> utility automatically restarts the <code class="literal">systemd-hostnamed</code> to activate the new name. For the changes to take effect, reboot the host:
					</p><pre class="literallayout"># <span class="strong strong"><strong>reboot</strong></span></pre><p class="simpara">
						Alternatively, if you know which services use the hostname:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Restart all services that only read the hostname when the service starts:
							</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl restart <span class="emphasis"><em>&lt;service_name&gt;</em></span></strong></span></pre></li><li class="listitem">
								Active shell users must re-login for the changes to take effect.
							</li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Display the hostname:
					</p><pre class="literallayout"># <span class="strong strong"><strong>hostnamectl status --static</strong></span>
<span class="emphasis"><em>new-hostname.example.com</em></span></pre></li></ul></div></section></section><section class="chapter" id="configuring-networkmanager-dhcp-settings_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 20. Configuring NetworkManager DHCP settings</h2></div></div></div><p>
			NetworkManager provides different configuration options related to DHCP. For example, you can configure NetworkManager to use the build-in DHCP client (default) or an external client, and you can influence DHCP settings of individual profiles.
		</p><section class="section" id="proc_changing-the-dhcp-client-of-networkmanager_configuring-networkmanager-dhcp-settings"><div class="titlepage"><div><div><h3 class="title">20.1. Changing the DHCP client of NetworkManager</h3></div></div></div><p>
				By default, NetworkManager uses its internal DHCP client. However, if you require a DHCP client with features that the built-in client does not provide, you can alternatively configure NetworkManager to use <code class="literal">dhclient</code>.
			</p><p>
				Note that RHEL does not provide <code class="literal">dhcpcd</code> and, therefore, NetworkManager can not use this client.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create the <code class="literal">/etc/NetworkManager/conf.d/dhcp-client.conf</code> file with the following content:
					</p><pre class="screen">[main]
dhcp=dhclient</pre><p class="simpara">
						You can set the <code class="literal">dhcp</code> parameter to <code class="literal">internal</code> (default) or <code class="literal">dhclient</code>.
					</p></li><li class="listitem"><p class="simpara">
						If you set the <code class="literal">dhcp</code> parameter to <code class="literal">dhclient</code>, install the <code class="literal">dhcp-client</code> package:
					</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install dhcp-client</strong></span></pre></li><li class="listitem"><p class="simpara">
						Restart NetworkManager:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl restart NetworkManager</strong></span></pre><p class="simpara">
						Note that the restart temporarily interrupts all network connections.
					</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Search in the <code class="literal">/var/log/messages</code> log file for an entry similar to the following:
					</p><pre class="literallayout">Apr 26 09:54:19 server NetworkManager[27748]: &lt;info&gt;  [1650959659.8483] dhcp-init: Using DHCP client 'dhclient'</pre><p class="simpara">
						This log entry confirms that NetworkManager uses <code class="literal">dhclient</code> as DHCP client.
					</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">NetworkManager.conf(5)</code> man page on your system
					</li></ul></div></section><section class="section" id="configuring-the-dhcp-behavior-of-a-networkmanager-connection_configuring-networkmanager-dhcp-settings"><div class="titlepage"><div><div><h3 class="title">20.2. Configuring the DHCP behavior of a NetworkManager connection</h3></div></div></div><p class="_abstract _abstract">
				A Dynamic Host Configuration Protocol (DHCP) client requests the dynamic IP address and corresponding configuration information from a DHCP server each time a client connects to the network.
			</p><p>
				When you configured a connection to retrieve an IP address from a DHCP server, the NetworkManager requests an IP address from a DHCP server. By default, the client waits 45 seconds for this request to be completed. When a <code class="literal">DHCP</code> connection is started, a dhcp client requests an IP address from a <code class="literal">DHCP</code> server.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A connection that uses DHCP is configured on the host.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Set the <code class="literal">ipv4.dhcp-timeout</code> and <code class="literal">ipv6.dhcp-timeout</code> properties. For example, to set both options to <code class="literal">30</code> seconds, enter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>&lt;connection_name&gt;</em></span> ipv4.dhcp-timeout 30 ipv6.dhcp-timeout 30</strong></span></pre><p class="simpara">
						Alternatively, set the parameters to <code class="literal">infinity</code> to configure that NetworkManager does not stop trying to request and renew an IP address until it is successful.
					</p></li><li class="listitem"><p class="simpara">
						Optional: Configure the behavior if NetworkManager does not receive an IPv4 address before the timeout:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>&lt;connection_name&gt;</em></span> ipv4.may-fail <span class="emphasis"><em>&lt;value&gt;</em></span></strong></span></pre><p class="simpara">
						If you set the <code class="literal">ipv4.may-fail</code> option to:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<code class="literal">yes</code>, the status of the connection depends on the IPv6 configuration:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										If the IPv6 configuration is enabled and successful, NetworkManager activates the IPv6 connection and no longer tries to activate the IPv4 connection.
									</li><li class="listitem">
										If the IPv6 configuration is disabled or not configured, the connection fails.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								<code class="literal">no</code>, the connection is deactivated. In this case:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										If the <code class="literal">autoconnect</code> property of the connection is enabled, NetworkManager retries to activate the connection as many times as set in the <code class="literal">autoconnect-retries</code> property. The default is <code class="literal">4</code>.
									</li><li class="listitem">
										If the connection still cannot acquire a DHCP address, auto-activation fails. Note that after 5 minutes, the auto-connection process starts again to acquire an IP address from the DHCP server.
									</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: Configure the behavior if NetworkManager does not receive an IPv6 address before the timeout:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>&lt;connection_name&gt;</em></span> ipv6.may-fail <span class="emphasis"><em>&lt;value&gt;</em></span></strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nm-settings(5)</code> man page on your system
					</li></ul></div></section></section><section class="chapter" id="assembly_running-dhclient-exit-hooks-using-networkmanager-a-dispatcher-script_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 21. Running dhclient exit hooks using NetworkManager a dispatcher script</h2></div></div></div><p class="_abstract _abstract">
			You can use a NetworkManager dispatcher script to execute <code class="literal systemitem">dhclient</code> exit hooks.
		</p><section class="section" id="con_the-concept-of-networkmanager-dispatcher-scripts_assembly_running-dhclient-exit-hooks-using-networkmanager-a-dispatcher-script"><div class="titlepage"><div><div><h3 class="title">21.1. The concept of NetworkManager dispatcher scripts</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">NetworkManager-dispatcher</code> service executes user-provided scripts in alphabetical order when network events happen. These scripts are typically shell scripts, but can be any executable script or application. You can use dispatcher scripts, for example, to adjust network-related settings that you cannot manage with NetworkManager.
			</p><p>
				You can store dispatcher scripts in the following directories:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">/etc/NetworkManager/dispatcher.d/</code>: The general location for dispatcher scripts the <code class="literal">root</code> user can edit.
					</li><li class="listitem">
						<code class="literal">/usr/lib/NetworkManager/dispatcher.d/</code>: For pre-deployed immutable dispatcher scripts.
					</li></ul></div><p>
				For security reasons, the <code class="literal">NetworkManager-dispatcher</code> service executes scripts only if the following conditions met:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The script is owned by the <code class="literal">root</code> user.
					</li><li class="listitem">
						The script is only readable and writable by <code class="literal">root</code>.
					</li><li class="listitem">
						The <code class="literal">setuid</code> bit is not set on the script.
					</li></ul></div><p>
				The <code class="literal">NetworkManager-dispatcher</code> service runs each script with two arguments:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						The interface name of the device the operation happened on.
					</li><li class="listitem">
						The action, such as <code class="literal">up</code>, when the interface has been activated.
					</li></ol></div><p>
				The <code class="literal">Dispatcher scripts</code> section in the <code class="literal">NetworkManager(8)</code> man page provides an overview of actions and environment variables you can use in scripts.
			</p><p>
				The <code class="literal">NetworkManager-dispatcher</code> service runs one script at a time, but asynchronously from the main NetworkManager process. Note that, if a script is queued, the service will always run it, even if a later event makes it obsolete. However, the <code class="literal">NetworkManager-dispatcher</code> service runs scripts that are symbolic links referring to files in <code class="literal">/etc/NetworkManager/dispatcher.d/no-wait.d/</code> immediately, without waiting for the termination of previous scripts, and in parallel.
			</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">NetworkManager(8)</code> man page on your system
					</li></ul></div></section><section class="section" id="proc_creating-a-networkmanager-dispatcher-script-that-runs-dhclient-exit-hooks_assembly_running-dhclient-exit-hooks-using-networkmanager-a-dispatcher-script"><div class="titlepage"><div><div><h3 class="title">21.2. Creating a NetworkManager dispatcher script that runs dhclient exit hooks</h3></div></div></div><p class="_abstract _abstract">
				When a DHCP server assigns or updates an IPv4 address, NetworkManager can run a dispatcher script stored in the <code class="literal">/etc/dhcp/dhclient-exit-hooks.d/</code> directory. This dispatcher script can then, for example, run <code class="literal">dhclient</code> exit hooks.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">dhclient</code> exit hooks are stored in the <code class="literal">/etc/dhcp/dhclient-exit-hooks.d/</code> directory.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create the <code class="literal">/etc/NetworkManager/dispatcher.d/12-dhclient-down</code> file with the following content:
					</p><pre class="programlisting language-bash">#!/bin/bash
# Run dhclient.exit-hooks.d scripts

if [ -n "$DHCP4_DHCP_LEASE_TIME" ] ; then
  if [ "$2" = "dhcp4-change" ] || [ "$2" = "up" ] ; then
    if [ -d /etc/dhcp/dhclient-exit-hooks.d ] ; then
      for f in /etc/dhcp/dhclient-exit-hooks.d/*.sh ; do
        if [ -x "${f}" ]; then
          . "${f}"
        fi
      done
    fi
  fi
fi</pre></li><li class="listitem"><p class="simpara">
						Set the <code class="literal">root</code> user as owner of the file:
					</p><pre class="literallayout"># <span class="strong strong"><strong>chown root:root <span class="emphasis"><em>/etc/NetworkManager/dispatcher.d/12-dhclient-down</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Set the permissions so that only the root user can execute it:
					</p><pre class="literallayout"># <span class="strong strong"><strong>chmod 0700 <span class="emphasis"><em>/etc/NetworkManager/dispatcher.d/12-dhclient-down</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Restore the SELinux context:
					</p><pre class="literallayout"># <span class="strong strong"><strong>restorecon <span class="emphasis"><em>/etc/NetworkManager/dispatcher.d/12-dhclient-down</em></span></strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">NetworkManager(8)</code> man page on your system
					</li></ul></div></section></section><section class="chapter" id="manually-configuring-the-etc-resolv-conf-file_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 22. Manually configuring the /etc/resolv.conf file</h2></div></div></div><p class="_abstract _abstract">
			By default, NetworkManager dynamically updates the <code class="literal">/etc/resolv.conf</code> file with the DNS settings from active NetworkManager connection profiles. However, you can disable this behavior and manually configure DNS settings in <code class="literal">/etc/resolv.conf</code>.
		</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
				Alternatively, if you require a specific order of DNS servers in <code class="literal">/etc/resolv.conf</code>, see <a class="link" href="#configuring-the-order-of-dns-servers_configuring-and-managing-networking" title="Chapter 23. Configuring the order of DNS servers">Configuring the order of DNS servers</a>.
			</p></div></rh-alert><section class="section" id="disabling-dns-processing-in-the-networkmanager-configuration_manually-configuring-the-etc-resolv-conf-file"><div class="titlepage"><div><div><h3 class="title">22.1. Disabling DNS processing in the NetworkManager configuration</h3></div></div></div><p class="_abstract _abstract">
				By default, NetworkManager manages DNS settings in the <code class="literal">/etc/resolv.conf</code> file, and you can configure the order of DNS servers. Alternatively, you can disable DNS processing in NetworkManager if you prefer to manually configure DNS settings in <code class="literal">/etc/resolv.conf</code>.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						As the root user, create the <code class="literal">/etc/NetworkManager/conf.d/90-dns-none.conf</code> file with the following content by using a text editor:
					</p><pre class="screen">[main]
dns=none</pre></li><li class="listitem"><p class="simpara">
						Reload the <code class="literal">NetworkManager</code> service:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl reload NetworkManager</strong></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							After you reload the service, NetworkManager no longer updates the <code class="literal">/etc/resolv.conf</code> file. However, the last contents of the file are preserved.
						</p></div></rh-alert></li><li class="listitem">
						Optional: Remove the <code class="literal">Generated by NetworkManager</code> comment from <code class="literal">/etc/resolv.conf</code> to avoid confusion.
					</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Edit the <code class="literal">/etc/resolv.conf</code> file and manually update the configuration.
					</li><li class="listitem"><p class="simpara">
						Reload the <code class="literal">NetworkManager</code> service:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl reload NetworkManager</strong></span></pre></li><li class="listitem"><p class="simpara">
						Display the <code class="literal">/etc/resolv.conf</code> file:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /etc/resolv.conf</strong></span></pre><p class="simpara">
						If you successfully disabled DNS processing, NetworkManager did not override the manually configured settings.
					</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Display the NetworkManager configuration to ensure that no other configuration file with a higher priority overrode the setting:
					</p><pre class="literallayout"># <span class="strong strong"><strong>NetworkManager --print-config</strong></span>
...
dns=none
...</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">NetworkManager.conf(5)</code> man page on your system
					</li><li class="listitem">
						<a class="link" href="#configuring-the-order-of-dns-servers_configuring-and-managing-networking" title="Chapter 23. Configuring the order of DNS servers">Configuring the order of DNS servers using NetworkManager</a>
					</li></ul></div></section><section class="section" id="replacing-etc-resolv-conf-with-a-symbolic-link-to-manually-configure-dns-settings_manually-configuring-the-etc-resolv-conf-file"><div class="titlepage"><div><div><h3 class="title">22.2. Replacing /etc/resolv.conf with a symbolic link to manually configure DNS settings</h3></div></div></div><p class="_abstract _abstract">
				By default, NetworkManager manages DNS settings in the <code class="literal">/etc/resolv.conf</code> file, and you can configure the order of DNS servers. Alternatively, you can disable DNS processing in NetworkManager if you prefer to manually configure DNS settings in <code class="literal">/etc/resolv.conf</code>. For example, NetworkManager does not automatically update the DNS configuration if <code class="literal">/etc/resolv.conf</code> is a symbolic link.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The NetworkManager <code class="literal">rc-manager</code> configuration option is not set to <code class="literal">file</code>. To verify, use the <code class="literal">NetworkManager --print-config</code> command.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Create a file, such as <code class="literal">/etc/resolv.conf.manually-configured</code>, and add the DNS configuration for your environment to it. Use the same parameters and syntax as in the original <code class="literal">/etc/resolv.conf</code>.
					</li><li class="listitem"><p class="simpara">
						Remove the <code class="literal">/etc/resolv.conf</code> file:
					</p><pre class="literallayout"># <span class="strong strong"><strong>rm /etc/resolv.conf</strong></span></pre></li><li class="listitem"><p class="simpara">
						Create a symbolic link named <code class="literal">/etc/resolv.conf</code> that refers to <code class="literal">/etc/resolv.conf.manually-configured</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ln -s /etc/resolv.conf.manually-configured /etc/resolv.conf</strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">resolv.conf(5)</code> and <code class="literal">NetworkManager.conf(5)</code> man pages on your system
					</li><li class="listitem">
						<a class="link" href="#configuring-the-order-of-dns-servers_configuring-and-managing-networking" title="Chapter 23. Configuring the order of DNS servers">Configuring the order of DNS servers using NetworkManager</a>
					</li></ul></div></section></section><section class="chapter" id="configuring-the-order-of-dns-servers_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 23. Configuring the order of DNS servers</h2></div></div></div><p class="_abstract _abstract">
			Most applications use the <code class="literal">getaddrinfo()</code> function of the <code class="literal">glibc</code> library to resolve DNS requests. By default, <code class="literal">glibc</code> sends all DNS requests to the first DNS server specified in the <code class="literal">/etc/resolv.conf</code> file. If this server does not reply, RHEL uses the next server in this file. NetworkManager enables you to influence the order of DNS servers in <code class="literal">etc/resolv.conf</code>.
		</p><section class="section" id="how-networkmanager-orders-dns-servers-in-etc-resolv-conf_configuring-the-order-of-dns-servers"><div class="titlepage"><div><div><h3 class="title">23.1. How NetworkManager orders DNS servers in /etc/resolv.conf</h3></div></div></div><p class="_abstract _abstract">
				NetworkManager orders DNS servers in the <code class="literal">/etc/resolv.conf</code> file based on the following rules:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						If only one connection profile exists, NetworkManager uses the order of IPv4 and IPv6 DNS server specified in that connection.
					</li><li class="listitem"><p class="simpara">
						If multiple connection profiles are activated, NetworkManager orders DNS servers based on a DNS priority value. If you set DNS priorities, the behavior of NetworkManager depends on the value set in the <code class="literal">dns</code> parameter. You can set this parameter in the <code class="literal">[main]</code> section in the <code class="literal">/etc/NetworkManager/NetworkManager.conf</code> file:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								<code class="literal">dns=default</code> or if the <code class="literal">dns</code> parameter is not set:
							</p><p class="simpara">
								NetworkManager orders the DNS servers from different connections based on the <code class="literal">ipv4.dns-priority</code> and <code class="literal">ipv6.dns-priority</code> parameter in each connection.
							</p><p class="simpara">
								If you set no value or you set <code class="literal">ipv4.dns-priority</code> and <code class="literal">ipv6.dns-priority</code> to <code class="literal">0</code>, NetworkManager uses the global default value. See <a class="link" href="#default-values-of-dns-priority-parameters_configuring-the-order-of-dns-servers" title="Default values of DNS priority parameters">Default values of DNS priority parameters</a>.
							</p></li><li class="listitem"><p class="simpara">
								<code class="literal">dns=dnsmasq</code> or <code class="literal">dns=systemd-resolved</code>:
							</p><p class="simpara">
								When you use one of these settings, NetworkManager sets either <code class="literal">127.0.0.1</code> for <code class="literal">dnsmasq</code> or <code class="literal">127.0.0.53</code> as <code class="literal">nameserver</code> entry in the <code class="literal">/etc/resolv.conf</code> file.
							</p><p class="simpara">
								Both the <code class="literal">dnsmasq</code> and <code class="literal">systemd-resolved</code> services forward queries for the search domain set in a NetworkManager connection to the DNS server specified in that connection, and forwardes queries to other domains to the connection with the default route. When multiple connections have the same search domain set, <code class="literal">dnsmasq</code> and <code class="literal">systemd-resolved</code> forward queries for this domain to the DNS server set in the connection with the lowest priority value.
							</p></li></ul></div></li></ul></div><h5 id="default-values-of-dns-priority-parameters_configuring-the-order-of-dns-servers">Default values of DNS priority parameters</h5><p>
				NetworkManager uses the following default values for connections:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">50</code> for VPN connections
					</li><li class="listitem">
						<code class="literal">100</code> for other connections
					</li></ul></div><h5 id="valid-dns-priority-values_configuring-the-order-of-dns-servers">Valid DNS priority values:</h5><p>
				You can set both the global default and connection-specific <code class="literal">ipv4.dns-priority</code> and <code class="literal">ipv6.dns-priority</code> parameters to a value between <code class="literal">-2147483647</code> and <code class="literal">2147483647</code>.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						A lower value has a higher priority.
					</li><li class="listitem">
						Negative values have the special effect of excluding other configurations with a greater value. For example, if at least one connection with a negative priority value exists, NetworkManager uses only the DNS servers specified in the connection profile with the lowest priority.
					</li><li class="listitem"><p class="simpara">
						If multiple connections have the same DNS priority, NetworkManager prioritizes the DNS in the following order:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								VPN connections
							</li><li class="listitem">
								Connection with an active default route. The active default route is the default route with the lowest metric.
							</li></ol></div></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nm-settings(5)</code> man page on your system
					</li><li class="listitem">
						<a class="link" href="#using-different-dns-servers-for-different-domains_configuring-and-managing-networking" title="Chapter 24. Using different DNS servers for different domains">Using different DNS servers for different domains</a>
					</li></ul></div></section><section class="section" id="setting-a-networkmanager-wide-default-dns-server-priority-value_configuring-the-order-of-dns-servers"><div class="titlepage"><div><div><h3 class="title">23.2. Setting a NetworkManager-wide default DNS server priority value</h3></div></div></div><p class="_abstract _abstract">
				NetworkManager uses the following DNS priority default values for connections:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">50</code> for VPN connections
					</li><li class="listitem">
						<code class="literal">100</code> for other connections
					</li></ul></div><p>
				You can override these system-wide defaults with a custom default value for IPv4 and IPv6 connections.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Edit the <code class="literal">/etc/NetworkManager/NetworkManager.conf</code> file:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Add the <code class="literal">[connection]</code> section, if it does not exist:
							</p><pre class="screen">[connection]</pre></li><li class="listitem"><p class="simpara">
								Add the custom default values to the <code class="literal">[connection]</code> section. For example, to set the new default for both IPv4 and IPv6 to <code class="literal">200</code>, add:
							</p><pre class="screen">ipv4.dns-priority=200
ipv6.dns-priority=200</pre><p class="simpara">
								You can set the parameters to a value between <code class="literal">-2147483647</code> and <code class="literal">2147483647</code>. Note that setting the parameters to <code class="literal">0</code> enables the built-in defaults (<code class="literal">50</code> for VPN connections and <code class="literal">100</code> for other connections).
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						Reload the <code class="literal">NetworkManager</code> service:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl reload NetworkManager</strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">NetworkManager.conf(5)</code> man page on your system
					</li></ul></div></section><section class="section" id="setting-the-dns-priority-of-a-networkmanager-connection_configuring-the-order-of-dns-servers"><div class="titlepage"><div><div><h3 class="title">23.3. Setting the DNS priority of a NetworkManager connection</h3></div></div></div><p class="_abstract _abstract">
				If you require a specific order of DNS servers you can set priority values in connection profiles. NetworkManager uses these values to order the servers when the service creates or updates the <code class="literal">/etc/resolv.conf</code> file.
			</p><p>
				Note that setting DNS priorities makes only sense if you have multiple connections with different DNS servers configured. If you have only one connection with multiple DNS servers configured, manually set the DNS servers in the preferred order in the connection profile.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The system has multiple NetworkManager connections configured.
					</li><li class="listitem">
						The system either has no <code class="literal">dns</code> parameter set in the <code class="literal">/etc/NetworkManager/NetworkManager.conf</code> file or the parameter is set to <code class="literal">default</code>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: Display the available connections:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection show</strong></span>
NAME           UUID                                  TYPE      DEVICE
Example_con_1  d17ee488-4665-4de2-b28a-48befab0cd43  ethernet  enp1s0
Example_con_2  916e4f67-7145-3ffa-9f7b-e7cada8f6bf7  ethernet  enp7s0
...</pre></li><li class="listitem"><p class="simpara">
						Set the <code class="literal">ipv4.dns-priority</code> and <code class="literal">ipv6.dns-priority</code> parameters. For example, to set both parameters to <code class="literal">10</code>, enter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>&lt;connection_name&gt;</em></span> ipv4.dns-priority 10 ipv6.dns-priority 10</strong></span></pre></li><li class="listitem">
						Optional: Repeat the previous step for other connections.
					</li><li class="listitem"><p class="simpara">
						Re-activate the connection you updated:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>&lt;connection_name&gt;</em></span></strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Display the contents of the <code class="literal">/etc/resolv.conf</code> file to verify that the DNS server order is correct:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /etc/resolv.conf</strong></span></pre></li></ul></div></section></section><section class="chapter" id="using-different-dns-servers-for-different-domains_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 24. Using different DNS servers for different domains</h2></div></div></div><p class="_abstract _abstract">
			By default, Red Hat Enterprise Linux (RHEL) sends all DNS requests to the first DNS server specified in the <code class="literal">/etc/resolv.conf</code> file. If this server does not reply, RHEL uses the next server in this file. In environments where one DNS server cannot resolve all domains, administrators can configure RHEL to send DNS requests for a specific domain to a selected DNS server.
		</p><p>
			For example, you connect a server to a Virtual Private Network (VPN), and hosts in the VPN use the <code class="literal">example.com</code> domain. In this case, you can configure RHEL to process DNS queries in the following way:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Send only DNS requests for <code class="literal">example.com</code> to the DNS server in the VPN network.
				</li><li class="listitem">
					Send all other requests to the DNS server that is configured in the connection profile with the default gateway.
				</li></ul></div><section class="section" id="using-dnsmasq-in-networkmanager-to-send-dns-requests-for-a-specific-domain-to-a-selected-dns-server_using-different-dns-servers-for-different-domains"><div class="titlepage"><div><div><h3 class="title">24.1. Using dnsmasq in NetworkManager to send DNS requests for a specific domain to a selected DNS server</h3></div></div></div><p class="_abstract _abstract">
				You can configure NetworkManager to start an instance of <code class="literal">dnsmasq</code>. This DNS caching server then listens on port <code class="literal">53</code> on the <code class="literal">loopback</code> device. Consequently, this service is only reachable from the local system and not from the network.
			</p><p>
				With this configuration, NetworkManager adds the <code class="literal">nameserver 127.0.0.1</code> entry to the <code class="literal">/etc/resolv.conf</code> file, and <code class="literal">dnsmasq</code> dynamically routes DNS requests to the corresponding DNS servers specified in the NetworkManager connection profiles.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The system has multiple NetworkManager connections configured.
					</li><li class="listitem"><p class="simpara">
						A DNS server and search domain are configured in the NetworkManager connection profile that is responsible for resolving a specific domain.
					</p><p class="simpara">
						For example, to ensure that the DNS server specified in a VPN connection resolves queries for the <code class="literal">example.com</code> domain, the VPN connection profile must contain the following settings:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								A DNS server that can resolve <code class="literal">example.com</code>
							</li><li class="listitem">
								A search domain set to <code class="literal">example.com</code> in the <code class="literal">ipv4.dns-search</code> and <code class="literal">ipv6.dns-search</code> parameters
							</li></ul></div></li><li class="listitem">
						The <code class="literal">dnsmasq</code> service is not running or configured to listen on a different interface then <code class="literal">localhost</code>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the <code class="literal">dnsmasq</code> package:
					</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install dnsmasq</strong></span></pre></li><li class="listitem"><p class="simpara">
						Edit the <code class="literal">/etc/NetworkManager/NetworkManager.conf</code> file, and set the following entry in the <code class="literal">[main]</code> section:
					</p><pre class="screen">dns=dnsmasq</pre></li><li class="listitem"><p class="simpara">
						Reload the <code class="literal">NetworkManager</code> service:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl reload NetworkManager</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Search in the <code class="literal">systemd</code> journal of the <code class="literal">NetworkManager</code> unit for which domains the service uses a different DNS server:
					</p><pre class="literallayout"># <span class="strong strong"><strong>journalctl -xeu NetworkManager</strong></span>
...
Jun 02 13:30:17 &lt;client_hostname&gt;_ dnsmasq[5298]: using nameserver 198.51.100.7#53 for domain example.com
...</pre></li><li class="listitem"><p class="simpara">
						Use the <code class="literal">tcpdump</code> packet sniffer to verify the correct route of DNS requests:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Install the <code class="literal">tcpdump</code> package:
							</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install tcpdump</strong></span></pre></li><li class="listitem"><p class="simpara">
								On one terminal, start <code class="literal">tcpdump</code> to capture DNS traffic on all interfaces:
							</p><pre class="literallayout"># <span class="strong strong"><strong>tcpdump -i any port 53</strong></span></pre></li><li class="listitem"><p class="simpara">
								On a different terminal, resolve host names for a domain for which an exception exists and another domain, for example:
							</p><pre class="literallayout"># <span class="strong strong"><strong>host -t A <span class="emphasis"><em>www.example.com</em></span></strong></span>
# <span class="strong strong"><strong>host -t A <span class="emphasis"><em>www.redhat.com</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
								Verify in the <code class="literal">tcpdump</code> output that Red Hat Enterprise Linux sends only DNS queries for the <code class="literal">example.com</code> domain to the designated DNS server and through the corresponding interface:
							</p><pre class="literallayout">...
13:52:42.234533 tun0   Out IP <span class="emphasis"><em>server</em></span>.43534 &gt; <span class="emphasis"><em>198.51.100.7</em></span>.domain: 50121+ A? www.example.com. (33)
...
13:52:57.753235 enp1s0 Out IP <span class="emphasis"><em>server</em></span>.40864 &gt; <span class="emphasis"><em>192.0.2.1</em></span>.domain: 6906+ A? www.redhat.com. (33)
...</pre><p class="simpara">
								Red Hat Enterprise Linux sends the DNS query for <code class="literal">www.example.com</code> to the DNS server on <code class="literal">198.51.100.7</code> and the query for <code class="literal">www.redhat.com</code> to <code class="literal">192.0.2.1</code>.
							</p></li></ol></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Troubleshooting</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify that the <code class="literal">nameserver</code> entry in the <code class="literal">/etc/resolv.conf</code> file refers to <code class="literal">127.0.0.1</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /etc/resolv.conf</strong></span>
nameserver 127.0.0.1</pre><p class="simpara">
						If the entry is missing, check the <code class="literal">dns</code> parameter in the <code class="literal">/etc/NetworkManager/NetworkManager.conf</code> file.
					</p></li><li class="listitem"><p class="simpara">
						Verify that the <code class="literal">dnsmasq</code> service listens on port <code class="literal">53</code> on the <code class="literal">loopback</code> device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ss -tulpn | grep "127.0.0.1:53"</strong></span>
udp  UNCONN 0  0    127.0.0.1:53   0.0.0.0:*    users:(("dnsmasq",pid=7340,fd=18))
tcp  LISTEN 0  32   127.0.0.1:53   0.0.0.0:*    users:(("dnsmasq",pid=7340,fd=19))</pre><p class="simpara">
						If the service does not listen on <code class="literal">127.0.0.1:53</code>, check the journal entries of the <code class="literal">NetworkManager</code> unit:
					</p><pre class="literallayout"># <span class="strong strong"><strong>journalctl -u NetworkManager</strong></span></pre></li></ol></div></section><section class="section" id="using-systemd-resolved-in-networkmanager-to-send-dns-requests-for-a-specific-domain-to-a-selected-dns-server_using-different-dns-servers-for-different-domains"><div class="titlepage"><div><div><h3 class="title">24.2. Using systemd-resolved in NetworkManager to send DNS requests for a specific domain to a selected DNS server</h3></div></div></div><p class="_abstract _abstract">
				You can configure NetworkManager to start an instance of <code class="literal">systemd-resolved</code>. This DNS stub resolver then listens on port <code class="literal">53</code> on IP address <code class="literal">127.0.0.53</code>. Consequently, this stub resolver is only reachable from the local system and not from the network.
			</p><p>
				With this configuration, NetworkManager adds the <code class="literal">nameserver 127.0.0.53</code> entry to the <code class="literal">/etc/resolv.conf</code> file, and <code class="literal">systemd-resolved</code> dynamically routes DNS requests to the corresponding DNS servers specified in the NetworkManager connection profiles.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					The <code class="literal">systemd-resolved</code> service is provided as a Technology Preview only. Technology Preview features are not supported with Red Hat production Service Level Agreements (SLAs), might not be functionally complete, and Red Hat does not recommend using them for production. These previews provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
				</p><p>
					See <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
				</p><p>
					For a supported solution, see <a class="link" href="#using-dnsmasq-in-networkmanager-to-send-dns-requests-for-a-specific-domain-to-a-selected-dns-server_using-different-dns-servers-for-different-domains" title="24.1. Using dnsmasq in NetworkManager to send DNS requests for a specific domain to a selected DNS server">Using dnsmasq in NetworkManager to send DNS requests for a specific domain to a selected DNS server</a>.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The system has multiple NetworkManager connections configured.
					</li><li class="listitem"><p class="simpara">
						A DNS server and search domain are configured in the NetworkManager connection profile that is responsible for resolving a specific domain.
					</p><p class="simpara">
						For example, to ensure that the DNS server specified in a VPN connection resolves queries for the <code class="literal">example.com</code> domain, the VPN connection profile must contain the following settings:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								A DNS server that can resolve <code class="literal">example.com</code>
							</li><li class="listitem">
								A search domain set to <code class="literal">example.com</code> in the <code class="literal">ipv4.dns-search</code> and <code class="literal">ipv6.dns-search</code> parameters
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enable and start the <code class="literal">systemd-resolved</code> service:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl --now enable systemd-resolved</strong></span></pre></li><li class="listitem"><p class="simpara">
						Edit the <code class="literal">/etc/NetworkManager/NetworkManager.conf</code> file, and set the following entry in the <code class="literal">[main]</code> section:
					</p><pre class="screen">dns=systemd-resolved</pre></li><li class="listitem"><p class="simpara">
						Reload the <code class="literal">NetworkManager</code> service:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl reload NetworkManager</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the DNS servers <code class="literal">systemd-resolved</code> uses and for which domains the service uses a different DNS server:
					</p><pre class="literallayout"># <span class="strong strong"><strong>resolvectl</strong></span>
...
Link 2 (<span class="emphasis"><em>enp1s0</em></span>)
    Current Scopes: DNS
         Protocols: +DefaultRoute ...
Current DNS Server: <span class="emphasis"><em>192.0.2.1</em></span>
       DNS Servers: <span class="emphasis"><em>192.0.2.1</em></span>

Link 3 (<span class="emphasis"><em>tun0</em></span>)
    Current Scopes: DNS
         Protocols: -DefaultRoute ...
Current DNS Server: <span class="emphasis"><em>198.51.100.7</em></span>
       DNS Servers: <span class="emphasis"><em>198.51.100.7</em></span> <span class="emphasis"><em>203.0.113.19</em></span>
        DNS Domain: <span class="emphasis"><em>example.com</em></span></pre><p class="simpara">
						The output confirms that <code class="literal">systemd-resolved</code> uses different DNS servers for the <code class="literal">example.com</code> domain.
					</p></li><li class="listitem"><p class="simpara">
						Use the <code class="literal">tcpdump</code> packet sniffer to verify the correct route of DNS requests:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Install the <code class="literal">tcpdump</code> package:
							</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install tcpdump</strong></span></pre></li><li class="listitem"><p class="simpara">
								On one terminal, start <code class="literal">tcpdump</code> to capture DNS traffic on all interfaces:
							</p><pre class="literallayout"># <span class="strong strong"><strong>tcpdump -i any port 53</strong></span></pre></li><li class="listitem"><p class="simpara">
								On a different terminal, resolve host names for a domain for which an exception exists and another domain, for example:
							</p><pre class="literallayout"># <span class="strong strong"><strong>host -t A <span class="emphasis"><em>www.example.com</em></span></strong></span>
# <span class="strong strong"><strong>host -t A <span class="emphasis"><em>www.redhat.com</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
								Verify in the <code class="literal">tcpdump</code> output that Red Hat Enterprise Linux sends only DNS queries for the <code class="literal">example.com</code> domain to the designated DNS server and through the corresponding interface:
							</p><pre class="literallayout">...
13:52:42.234533 tun0   Out IP <span class="emphasis"><em>server</em></span>.43534 &gt; <span class="emphasis"><em>198.51.100.7</em></span>.domain: 50121+ A? www.example.com. (33)
...
13:52:57.753235 enp1s0 Out IP <span class="emphasis"><em>server</em></span>.40864 &gt; <span class="emphasis"><em>192.0.2.1</em></span>.domain: 6906+ A? www.redhat.com. (33)
...</pre><p class="simpara">
								Red Hat Enterprise Linux sends the DNS query for <code class="literal">www.example.com</code> to the DNS server on <code class="literal">198.51.100.7</code> and the query for <code class="literal">www.redhat.com</code> to <code class="literal">192.0.2.1</code>.
							</p></li></ol></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Troubleshooting</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify that the <code class="literal">nameserver</code> entry in the <code class="literal">/etc/resolv.conf</code> file refers to <code class="literal">127.0.0.53</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /etc/resolv.conf</strong></span>
nameserver 127.0.0.53</pre><p class="simpara">
						If the entry is missing, check the <code class="literal">dns</code> parameter in the <code class="literal">/etc/NetworkManager/NetworkManager.conf</code> file.
					</p></li><li class="listitem"><p class="simpara">
						Verify that the <code class="literal">systemd-resolved</code> service listens on port <code class="literal">53</code> on the local IP address <code class="literal">127.0.0.53</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ss -tulpn | grep "127.0.0.53"</strong></span>
udp  UNCONN 0  0      127.0.0.53%lo:53   0.0.0.0:*    users:(("systemd-resolve",pid=1050,fd=12))
tcp  LISTEN 0  4096   127.0.0.53%lo:53   0.0.0.0:*    users:(("systemd-resolve",pid=1050,fd=13))</pre><p class="simpara">
						If the service does not listen on <code class="literal">127.0.0.53:53</code>, check if the <code class="literal">systemd-resolved</code> service is running.
					</p></li></ol></div></section></section><section class="chapter" id="managing-the-default-gateway-setting_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 25. Managing the default gateway setting</h2></div></div></div><p class="_abstract _abstract">
			The default gateway is a router that forwards network packets when no other route matches the destination of a packet. In a local network, the default gateway is typically the host that is one hop closer to the internet.
		</p><section class="section" id="setting-the-default-gateway-on-an-existing-connection-by-using-nmcli_managing-the-default-gateway-setting"><div class="titlepage"><div><div><h3 class="title">25.1. Setting the default gateway on an existing connection by using <code class="literal">nmcli</code></h3></div></div></div><p class="_abstract _abstract">
				In most situations, administrators set the default gateway when they create a connection. However, you can also set or update the default gateway setting on a previously created connection by using the <code class="literal">nmcli</code> utility.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						At least one static IP address must be configured on the connection on which the default gateway will be set.
					</li><li class="listitem">
						If the user is logged in on a physical console, user permissions are sufficient. Otherwise, user must have <code class="literal">root</code> permissions.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Set the IP addresses of the default gateway:
					</p><p class="simpara">
						To set the IPv4 default gateway, enter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>&lt;connection_name&gt;</em></span> ipv4.gateway "<span class="emphasis"><em>&lt;IPv4_gateway_address&gt;</em></span>"</strong></span></pre><p class="simpara">
						To set the IPv6 default gateway, enter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>&lt;connection_name&gt;</em></span> ipv6.gateway "<span class="emphasis"><em>&lt;IPv6_gateway_address&gt;</em></span>"</strong></span></pre></li><li class="listitem"><p class="simpara">
						Restart the network connection for changes to take effect:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>&lt;connection_name&gt;</em></span></strong></span></pre><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
							All connections currently using this network connection are temporarily interrupted during the restart.
						</p></div></rh-alert></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify that the route is active:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								To display the IPv4 default gateway, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip -4 route</strong></span>
default via 192.0.2.1 dev <span class="emphasis"><em>example</em></span> proto static metric 100</pre></li><li class="listitem"><p class="simpara">
								To display the IPv6 default gateway, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip -6 route</strong></span>
default via 2001:db8:1::1 dev <span class="emphasis"><em>example</em></span> proto static metric 100 pref medium</pre></li></ol></div></li></ul></div></section><section class="section" id="setting-the-default-gateway-on-an-existing-connection-by-using-the-nmcli-interactive-mode_managing-the-default-gateway-setting"><div class="titlepage"><div><div><h3 class="title">25.2. Setting the default gateway on an existing connection by using the <code class="literal">nmcli</code> interactive mode</h3></div></div></div><p class="_abstract _abstract">
				In most situations, administrators set the default gateway when they create a connection. However, you can also set or update the default gateway setting on a previously created connection by using the interactive mode of the <code class="literal">nmcli</code> utility.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						At least one static IP address must be configured on the connection on which the default gateway will be set.
					</li><li class="listitem">
						If the user is logged in on a physical console, user permissions are sufficient. Otherwise, the user must have <code class="literal">root</code> permissions.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open the <code class="literal">nmcli</code> interactive mode for the required connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection edit <span class="emphasis"><em>&lt;connection_name&gt;</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Set the default gateway
					</p><p class="simpara">
						To set the IPv4 default gateway, enter:
					</p><pre class="literallayout">nmcli&gt; <span class="strong strong"><strong>set ipv4.gateway "<span class="emphasis"><em>&lt;IPv4_gateway_address&gt;</em></span>"</strong></span></pre><p class="simpara">
						To set the IPv6 default gateway, enter:
					</p><pre class="literallayout">nmcli&gt; <span class="strong strong"><strong>set ipv6.gateway "<span class="emphasis"><em>&lt;IPv6_gateway_address&gt;</em></span>"</strong></span></pre></li><li class="listitem"><p class="simpara">
						Optional: Verify that the default gateway was set correctly:
					</p><pre class="literallayout">nmcli&gt; <span class="strong strong"><strong>print</strong></span>
...
ipv4.gateway:            <span class="emphasis"><em>&lt;IPv4_gateway_address&gt;</em></span>
...
ipv6.gateway:            <span class="emphasis"><em>&lt;IPv6_gateway_address&gt;</em></span>
...</pre></li><li class="listitem"><p class="simpara">
						Save the configuration:
					</p><pre class="literallayout">nmcli&gt; <span class="strong strong"><strong>save persistent</strong></span></pre></li><li class="listitem"><p class="simpara">
						Restart the network connection for changes to take effect:
					</p><pre class="literallayout">nmcli&gt; <span class="strong strong"><strong>activate <span class="emphasis"><em>&lt;connection_name&gt;</em></span></strong></span></pre><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
							All connections currently using this network connection are temporarily interrupted during the restart.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Leave the <code class="literal">nmcli</code> interactive mode:
					</p><pre class="literallayout">nmcli&gt; <span class="strong strong"><strong>quit</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify that the route is active:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								To display the IPv4 default gateway, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip -4 route</strong></span>
default via 192.0.2.1 dev <span class="emphasis"><em>example</em></span> proto static metric 100</pre></li><li class="listitem"><p class="simpara">
								To display the IPv6 default gateway, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip -6 route</strong></span>
default via 2001:db8:1::1 dev <span class="emphasis"><em>example</em></span> proto static metric 100 pref medium</pre></li></ol></div></li></ul></div></section><section class="section" id="setting-the-default-gateway-on-an-existing-connection-by-using-nm-connection-editor_managing-the-default-gateway-setting"><div class="titlepage"><div><div><h3 class="title">25.3. Setting the default gateway on an existing connection by using nm-connection-editor</h3></div></div></div><p class="_abstract _abstract">
				In most situations, administrators set the default gateway when they create a connection. However, you can also set or update the default gateway setting on a previously created connection using the <code class="literal">nm-connection-editor</code> application.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						At least one static IP address must be configured on the connection on which the default gateway will be set.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open a terminal, and enter <code class="literal">nm-connection-editor</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nm-connection-editor</strong></span></pre></li><li class="listitem">
						Select the connection to modify, and click the gear wheel icon to edit the existing connection.
					</li><li class="listitem"><p class="simpara">
						Set the IPv4 default gateway. For example, to set the IPv4 address of the default gateway on the connection to <code class="literal">192.0.2.1</code>:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Open the <code class="literal">IPv4 Settings</code> tab.
							</li><li class="listitem"><p class="simpara">
								Enter the address in the <code class="literal">gateway</code> field next to the IP range the gateway’s address is within:
							</p><p class="simpara">
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/56226401e835521d75a086ae74514fd6/set-default-gw-in-nm-connection-editor_ipv4.png" alt="set default gw in nm connection editor ipv4"></span>

							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						Set the IPv6 default gateway. For example, to set the IPv6 address of the default gateway on the connection to <code class="literal">2001:db8:1::1</code>:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Open the <code class="literal">IPv6</code> tab.
							</li><li class="listitem"><p class="simpara">
								Enter the address in the <code class="literal">gateway</code> field next to the IP range the gateway’s address is within:
							</p><p class="simpara">
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/1fef17a7c651e34d4b1a45d450d3a218/set-default-gw-in-nm-connection-editor_ipv6.png" alt="set default gw in nm connection editor ipv6"></span>

							</p></li></ol></div></li><li class="listitem">
						Click <span class="guibutton">OK</span>.
					</li><li class="listitem">
						Click <span class="guibutton">Save</span>.
					</li><li class="listitem"><p class="simpara">
						Restart the network connection for changes to take effect. For example, to restart the <code class="literal"><span class="emphasis"><em>example</em></span></code> connection using the command line:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>example</em></span></strong></span></pre><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
							All connections currently using this network connection are temporarily interrupted during the restart.
						</p></div></rh-alert></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify that the route is active.
					</p><p class="simpara">
						To display the IPv4 default gateway:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -4 route</strong></span>
default via 192.0.2.1 dev <span class="emphasis"><em>example</em></span> proto static metric 100</pre><p class="simpara">
						To display the IPv6 default gateway:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -6 route</strong></span>
default via 2001:db8:1::1 dev <span class="emphasis"><em>example</em></span> proto static metric 100 pref medium</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#configuring-an-ethernet-connection-by-using-nm-connection-editor_configuring-an-ethernet-connection" title="2.5. Configuring an Ethernet connection by using nm-connection-editor">Configuring an Ethernet connection by using nm-connection-editor</a>
					</li></ul></div></section><section class="section" id="setting-the-default-gateway-on-an-existing-connection-by-using-control-center_managing-the-default-gateway-setting"><div class="titlepage"><div><div><h3 class="title">25.4. Setting the default gateway on an existing connection by using control-center</h3></div></div></div><p class="_abstract _abstract">
				In most situations, administrators set the default gateway when they create a connection. However, you can also set or update the default gateway setting on a previously created connection using the <code class="literal">control-center</code> application.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						At least one static IP address must be configured on the connection on which the default gateway will be set.
					</li><li class="listitem">
						The network configuration of the connection is open in the <code class="literal">control-center</code> application.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Set the IPv4 default gateway. For example, to set the IPv4 address of the default gateway on the connection to <code class="literal">192.0.2.1</code>:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Open the <code class="literal">IPv4</code> tab.
							</li><li class="listitem"><p class="simpara">
								Enter the address in the <code class="literal">gateway</code> field next to the IP range the gateway’s address is within:
							</p><p class="simpara">
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/96a6115b9e587e4c1c9441214367b891/set-default-gw-in-control-center_ipv4.png" alt="set default gw in control center ipv4"></span>

							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						Set the IPv6 default gateway. For example, to set the IPv6 address of the default gateway on the connection to <code class="literal">2001:db8:1::1</code>:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Open the <code class="literal">IPv6</code> tab.
							</li><li class="listitem"><p class="simpara">
								Enter the address in the <code class="literal">gateway</code> field next to the IP range the gateway’s address is within:
							</p><p class="simpara">
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/fb0f4c495f08cecf8226ac2424fa8bf3/set-default-gw-in-control-center_ipv6.png" alt="set default gw in control center ipv6"></span>

							</p></li></ol></div></li><li class="listitem">
						Click <span class="guibutton">Apply</span>.
					</li><li class="listitem"><p class="simpara">
						Back in the <code class="literal">Network</code> window, disable and re-enable the connection by switching the button for the connection to <span class="guibutton">Off</span> and back to <span class="guibutton">On</span> for changes to take effect.
					</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
							All connections currently using this network connection are temporarily interrupted during the restart.
						</p></div></rh-alert></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify that the route is active.
					</p><p class="simpara">
						To display the IPv4 default gateway:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ip -4 route</strong></span>
default via 192.0.2.1 dev <span class="emphasis"><em>example</em></span> proto static metric 100</pre><p class="simpara">
						To display the IPv6 default gateway:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ip -6 route</strong></span>
default via 2001:db8:1::1 dev <span class="emphasis"><em>example</em></span> proto static metric 100 pref medium</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#configuring-an-ethernet-connection-by-using-nm-connection-editor_configuring-an-ethernet-connection" title="2.5. Configuring an Ethernet connection by using nm-connection-editor">Configuring an Ethernet connection by using control-center</a>
					</li></ul></div></section><section class="section" id="proc_setting-the-default-gateway-on-an-existing-connection-by-using-nmstatectl_managing-the-default-gateway-setting"><div class="titlepage"><div><div><h3 class="title">25.5. Setting the default gateway on an existing connection by using <code class="literal">nmstatectl</code></h3></div></div></div><p class="_abstract _abstract">
				In most situations, administrators set the default gateway when they create a connection. However, you can also set or update the default gateway setting on a previously created connection by using the <code class="literal">nmstatectl</code> utility.
			</p><p>
				Use the <code class="literal">nmstatectl</code> utility to set the default gateway through the Nmstate API. The Nmstate API ensures that, after setting the configuration, the result matches the configuration file. If anything fails, <code class="literal">nmstatectl</code> automatically rolls back the changes to avoid leaving the system in an incorrect state.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						At least one static IP address must be configured on the connection on which the default gateway will be set.
					</li><li class="listitem">
						The <code class="literal">enp1s0</code> interface is configured, and the IP address of the default gateway is within the subnet of the IP configuration of this interface.
					</li><li class="listitem">
						The <code class="literal">nmstate</code> package is installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a YAML file, for example <code class="literal">~/set-default-gateway.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
routes:
  config:
  - destination: 0.0.0.0/0
    next-hop-address: 192.0.2.1
    next-hop-interface: enp1s0</pre><p class="simpara">
						These settings define <code class="literal">192.0.2.1</code> as the default gateway, and the default gateway is reachable through the <code class="literal">enp1s0</code> interface.
					</p></li><li class="listitem"><p class="simpara">
						Apply the settings to the system:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmstatectl apply ~/set-default-gateway.yml</strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nmstatectl(8)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/nmstate/examples/</code> directory
					</li></ul></div></section><section class="section" id="proc_setting-the-default-gateway-on-an-existing-connection-by-using-the-network-rhel-system-role_managing-the-default-gateway-setting"><div class="titlepage"><div><div><h3 class="title">25.6. Setting the default gateway on an existing connection by using the <code class="literal">network</code> RHEL system role</h3></div></div></div><p class="_abstract _abstract">
				A host forwards a network packet to its default gateway if the packet’s destination can neither be reached through the directly-connected networks nor through any of the routes configured on the host. To configure the default gateway of a host, set it in the NetworkManager connection profile of the interface that is connected to the same network as the default gateway. By using Ansible and the <code class="literal">network</code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.
			</p><p>
				In most situations, administrators set the default gateway when they create a connection. However, you can also set or update the default gateway setting on a previously-created connection.
			</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					You cannot use the <code class="literal">network</code> RHEL system role to update only specific values in an existing connection profile. The role ensures that a connection profile exactly matches the settings in a playbook. If a connection profile with the same name already exists, the role applies the settings from the playbook and resets all other settings in the profile to their defaults. To prevent resetting values, always specify the whole configuration of the network connection profile in the playbook, including the settings that you do not want to change.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles">You have prepared the control node and the managed nodes</a>
					</li><li class="listitem">
						You are logged in to the control node as a user who can run playbooks on the managed nodes.
					</li><li class="listitem">
						The account you use to connect to the managed nodes has <code class="literal">sudo</code> permissions on them.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a playbook file, for example <code class="literal">~/playbook.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
- name: Configure the network
  hosts: managed-node-01.example.com
  tasks:
    - name: Ethernet connection profile with static IP address settings
      ansible.builtin.include_role:
        name: rhel-system-roles.network
      vars:
        network_connections:
          - name: enp1s0
            type: ethernet
            autoconnect: yes
            ip:
              address:
                - 198.51.100.20/24
                - 2001:db8:1::1/64
              <span class="strong strong"><strong>gateway4: 198.51.100.254</strong></span>
              <span class="strong strong"><strong>gateway6: 2001:db8:1::fffe</strong></span>
              dns:
                - 198.51.100.200
                - 2001:db8:1::ffbb
              dns_search:
                - example.com
            state: up</pre><p class="simpara">
						For details about all variables used in the playbook, see the <code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file on the control node.
					</p></li><li class="listitem"><p class="simpara">
						Validate the playbook syntax:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --syntax-check ~/playbook.yml</strong></span></pre><p class="simpara">
						Note that this command only validates the syntax and does not protect against a wrong but valid configuration.
					</p></li><li class="listitem"><p class="simpara">
						Run the playbook:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook ~/playbook.yml</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Query the Ansible facts of the managed node and verify the active network settings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ansible managed-node-01.example.com -m ansible.builtin.setup</strong></span>
...
        "ansible_default_ipv4": {
	    ...
            "gateway": "198.51.100.254",
            "interface": "enp1s0",
	    ...
        },
        "ansible_default_ipv6": {
	    ...
            "gateway": "2001:db8:1::fffe",
            "interface": "enp1s0",
	    ...
	}
...</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/rhel-system-roles/network/</code> directory
					</li></ul></div></section><section class="section" id="con_how-networkmanager-manages-multiple-default-gateways_managing-the-default-gateway-setting"><div class="titlepage"><div><div><h3 class="title">25.7. How NetworkManager manages multiple default gateways</h3></div></div></div><p class="_abstract _abstract">
				In certain situations, for example for fallback reasons, you set multiple default gateways on a host. However, to avoid asynchronous routing issues, each default gateway of the same protocol requires a separate metric value. Note that RHEL only uses the connection to the default gateway that has the lowest metric set.
			</p><p>
				You can set the metric for both the IPv4 and IPv6 gateway of a connection using the following command:
			</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>&lt;connection_name&gt;</em></span> ipv4.route-metric &lt;value&gt; ipv6.route-metric &lt;value&gt;</strong></span></pre><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					Do not set the same metric value for the same protocol in multiple connection profiles to avoid routing issues.
				</p></div></rh-alert><p>
				If you set a default gateway without a metric value, NetworkManager automatically sets the metric value based on the interface type. For that, NetworkManager assigns the default value of this network type to the first connection that is activated, and sets an incremented value to each other connection of the same type in the order they are activated. For example, if two Ethernet connections with a default gateway exist, NetworkManager sets a metric of <code class="literal">100</code> on the route to the default gateway of the connection that you activate first. For the second connection, NetworkManager sets <code class="literal">101</code>.
			</p><p>
				The following is an overview of frequently-used network types and their default metrics:
			</p><rh-table><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140053167159856" scope="col">Connection type</th><th align="left" valign="top" id="idm140053167158768" scope="col">Default metric value</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140053167159856"> <p>
								VPN
							</p>
							 </td><td align="left" valign="top" headers="idm140053167158768"> <p>
								50
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053167159856"> <p>
								Ethernet
							</p>
							 </td><td align="left" valign="top" headers="idm140053167158768"> <p>
								100
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053167159856"> <p>
								MACsec
							</p>
							 </td><td align="left" valign="top" headers="idm140053167158768"> <p>
								125
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053167159856"> <p>
								InfiniBand
							</p>
							 </td><td align="left" valign="top" headers="idm140053167158768"> <p>
								150
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053167159856"> <p>
								Bond
							</p>
							 </td><td align="left" valign="top" headers="idm140053167158768"> <p>
								300
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053167159856"> <p>
								Team
							</p>
							 </td><td align="left" valign="top" headers="idm140053167158768"> <p>
								350
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053167159856"> <p>
								VLAN
							</p>
							 </td><td align="left" valign="top" headers="idm140053167158768"> <p>
								400
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053167159856"> <p>
								Bridge
							</p>
							 </td><td align="left" valign="top" headers="idm140053167158768"> <p>
								425
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053167159856"> <p>
								TUN
							</p>
							 </td><td align="left" valign="top" headers="idm140053167158768"> <p>
								450
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053167159856"> <p>
								Wi-Fi
							</p>
							 </td><td align="left" valign="top" headers="idm140053167158768"> <p>
								600
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053167159856"> <p>
								IP tunnel
							</p>
							 </td><td align="left" valign="top" headers="idm140053167158768"> <p>
								675
							</p>
							 </td></tr></tbody></table></rh-table><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#configuring-policy-based-routing-to-define-alternative-routes_configuring-and-managing-networking" title="Chapter 27. Configuring policy-based routing to define alternative routes">Configuring policy-based routing to define alternative routes</a>
					</li></ul></div></section><section class="section" id="proc_configuring-networkmanager-to-avoid-using-a-specific-profile-to-provide-a-default-gateway_managing-the-default-gateway-setting"><div class="titlepage"><div><div><h3 class="title">25.8. Configuring NetworkManager to avoid using a specific profile to provide a default gateway</h3></div></div></div><p class="_abstract _abstract">
				You can configure that NetworkManager never uses a specific profile to provide the default gateway. Follow this procedure for connection profiles that are not connected to the default gateway.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The NetworkManager connection profile for the connection that is not connected to the default gateway exists.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						If the connection uses a dynamic IP configuration, configure that NetworkManager does not use the connection as the default route for IPv4 and IPv6 connections:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>&lt;connection_name&gt;</em></span> ipv4.never-default yes ipv6.never-default yes</strong></span></pre><p class="simpara">
						Note that setting <code class="literal">ipv4.never-default</code> and <code class="literal">ipv6.never-default</code> to <code class="literal">yes</code>, automatically removes the default gateway’s IP address for the corresponding protocol from the connection profile.
					</p></li><li class="listitem"><p class="simpara">
						Activate the connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>&lt;connection_name&gt;</em></span></strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Use the <code class="literal">ip -4 route</code> and <code class="literal">ip -6 route</code> commands to verify that RHEL does not use the network interface for the default route for the IPv4 and IPv6 protocol.
					</li></ul></div></section><section class="section" id="proc_fixing-unexpected-routing-behavior-due-to-multiple-default-gateways_managing-the-default-gateway-setting"><div class="titlepage"><div><div><h3 class="title">25.9. Fixing unexpected routing behavior due to multiple default gateways</h3></div></div></div><p class="_abstract _abstract">
				There are only a few scenarios, such as when using Multipath TCP, in which you require multiple default gateways on a host. In most cases, you configure only a single default gateway to avoid unexpected routing behavior or asynchronous routing issues.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					To route traffic to different internet providers, use policy-based routing instead of multiple default gateways.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The host uses NetworkManager to manage network connections, which is the default.
					</li><li class="listitem">
						The host has multiple network interfaces.
					</li><li class="listitem">
						The host has multiple default gateways configured.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the routing table:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								For IPv4, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip -4 route</strong></span>
default via 192.0.2.1 dev enp1s0 proto static metric 101
default via 198.51.100.1 dev enp7s0 proto static metric 102
...</pre></li><li class="listitem"><p class="simpara">
								For IPv6, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip -6 route</strong></span>
default via 2001:db8:1::1 dev enp1s0 proto static metric 101 pref medium
default via 2001:db8:2::1 dev enp7s0 proto static metric 102 pref medium
...</pre></li></ul></div><p class="simpara">
						Entries starting with <code class="literal">default</code> indicate a default route. Note the interface names of these entries displayed next to <code class="literal">dev</code>.
					</p></li><li class="listitem"><p class="simpara">
						Use the following commands to display the NetworkManager connections that use the interfaces you identified in the previous step:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli -f GENERAL.CONNECTION,IP4.GATEWAY,IP6.GATEWAY device show enp1s0</strong></span>
GENERAL.CONNECTION:      Corporate-LAN
IP4.GATEWAY:             192.0.2.1
IP6.GATEWAY:             2001:db8:1::1

# <span class="strong strong"><strong>nmcli -f GENERAL.CONNECTION,IP4.GATEWAY,IP6.GATEWAY device show enp7s0</strong></span>
GENERAL.CONNECTION:      Internet-Provider
IP4.GATEWAY:             198.51.100.1
IP6.GATEWAY:             2001:db8:2::1</pre><p class="simpara">
						In these examples, the profiles named <code class="literal">Corporate-LAN</code> and <code class="literal">Internet-Provider</code> have the default gateways set. Because, in a local network, the default gateway is typically the host that is one hop closer to the internet, the rest of this procedure assumes that the default gateways in the <code class="literal">Corporate-LAN</code> are incorrect.
					</p></li><li class="listitem"><p class="simpara">
						Configure that NetworkManager does not use the <code class="literal">Corporate-LAN</code> connection as the default route for IPv4 and IPv6 connections:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify Corporate-LAN ipv4.never-default yes ipv6.never-default yes</strong></span></pre><p class="simpara">
						Note that setting <code class="literal">ipv4.never-default</code> and <code class="literal">ipv6.never-default</code> to <code class="literal">yes</code>, automatically removes the default gateway’s IP address for the corresponding protocol from the connection profile.
					</p></li><li class="listitem"><p class="simpara">
						Activate the <code class="literal">Corporate-LAN</code> connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up Corporate-LAN</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Display the IPv4 and IPv6 routing tables and verify that only one default gateway is available for each protocol:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								For IPv4, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip -4 route</strong></span>
default via 192.0.2.1 dev enp1s0 proto static metric 101
...</pre></li><li class="listitem"><p class="simpara">
								For IPv6, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip -6 route</strong></span>
default via 2001:db8:1::1 dev enp1s0 proto static metric 101 pref medium
...</pre></li></ul></div></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#configuring-policy-based-routing-to-define-alternative-routes_configuring-and-managing-networking" title="Chapter 27. Configuring policy-based routing to define alternative routes">Configuring policy-based routing to define alternative routes</a>
					</li></ul></div></section></section><section class="chapter" id="configuring-static-routes_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 26. Configuring a static route</h2></div></div></div><p class="_abstract _abstract">
			Routing ensures that you can send and receive traffic between mutually-connected networks. In larger environments, administrators typically configure services so that routers can dynamically learn about other routers. In smaller environments, administrators often configure static routes to ensure that traffic can reach from one network to the next.
		</p><p>
			You need static routes to achieve a functioning communication among multiple networks if all of these conditions apply:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					The traffic has to pass multiple networks.
				</li><li class="listitem">
					The exclusive traffic flow through the default gateways is not sufficient.
				</li></ul></div><p>
			The <a class="link" href="#ref_example-of-a-network-that-requires-static-routes_configuring-static-routes" title="26.1. Example of a network that requires static routes">Example of a network that requires static routes</a> section describes scenarios and how the traffic flows between different networks when you do not configure static routes.
		</p><section class="section" id="ref_example-of-a-network-that-requires-static-routes_configuring-static-routes"><div class="titlepage"><div><div><h3 class="title">26.1. Example of a network that requires static routes</h3></div></div></div><p>
				You require static routes in this example because not all IP networks are directly connected through one router. Without the static routes, some networks cannot communicate with each other. Additionally, traffic from some networks flows only in one direction.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The network topology in this example is artificial and only used to explain the concept of static routing. It is not a recommended topology in production environments.
				</p></div></rh-alert><p>
				For a functioning communication among all networks in this example, configure a static route to Raleigh (<code class="literal">198.51.100.0/24</code>) with next the hop Router 2 (<code class="literal">203.0.113.10</code>). The IP address of the next hop is the one of Router 2 in the data center network (<code class="literal">203.0.113.0/24</code>).
			</p><p>
				You can configure the static route as follows:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						For a simplified configuration, set this static route only on Router 1. However, this increases the traffic on Router 1 because hosts from the data center (<code class="literal">203.0.113.0/24</code>) send traffic to Raleigh (<code class="literal">198.51.100.0/24</code>) always through Router 1 to Router 2.
					</li><li class="listitem">
						For a more complex configuration, configure this static route on all hosts in the data center (<code class="literal">203.0.113.0/24</code>). All hosts in this subnet then send traffic directly to Router 2 (<code class="literal">203.0.113.10</code>) that is closer to Raleigh (<code class="literal">198.51.100.0/24</code>).
					</li></ul></div><p>
				For more details between which networks traffic flows or not, see the explanations below the diagram.
			</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/723cecf0994423cbfbdf04daff0df7ea/routing-example.png" alt="routing example"></div></div><p>
				<span class="strong strong"><strong>In case that the required static routes are not configured</strong></span>, the following are the situations in which the communication works and when it does not:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Hosts in the Berlin network (<code class="literal">192.0.2.0/24</code>):
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Can communicate with other hosts in the same subnet because they are directly connected.
							</li><li class="listitem">
								Can communicate with the internet because Router 1 is in the Berlin network (<code class="literal">192.0.2.0/24</code>) and has a default gateway, which leads to the internet.
							</li><li class="listitem">
								Can communicate with the data center network (<code class="literal">203.0.113.0/24</code>) because Router 1 has interfaces in both the Berlin (<code class="literal">192.0.2.0/24</code>) and the data center (<code class="literal">203.0.113.0/24</code>) networks.
							</li><li class="listitem">
								Cannot communicate with the Raleigh network (<code class="literal">198.51.100.0/24</code>) because Router 1 has no interface in this network. Therefore, Router 1 sends the traffic to its own default gateway (internet).
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Hosts in the data center network (<code class="literal">203.0.113.0/24</code>):
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Can communicate with other hosts in the same subnet because they are directly connected.
							</li><li class="listitem">
								Can communicate with the internet because they have their default gateway set to Router 1, and Router 1 has interfaces in both networks, the data center (<code class="literal">203.0.113.0/24</code>) and to the internet.
							</li><li class="listitem">
								Can communicate with the Berlin network (<code class="literal">192.0.2.0/24</code>) because they have their default gateway set to Router 1, and Router 1 has interfaces in both the data center (<code class="literal">203.0.113.0/24</code>) and the Berlin (<code class="literal">192.0.2.0/24</code>) networks.
							</li><li class="listitem">
								Cannot communicate with the Raleigh network (<code class="literal">198.51.100.0/24</code>) because the data center network has no interface in this network. Therefore, hosts in the data center (<code class="literal">203.0.113.0/24</code>) send traffic to their default gateway (Router 1). Router 1 also has no interface in the Raleigh network (<code class="literal">198.51.100.0/24</code>) and, as a result, Router 1 sends this traffic to its own default gateway (internet).
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Hosts in the Raleigh network (<code class="literal">198.51.100.0/24</code>):
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Can communicate with other hosts in the same subnet because they are directly connected.
							</li><li class="listitem">
								Cannot communicate with hosts on the internet. Router 2 sends the traffic to Router 1 because of the default gateway settings. The actual behavior of Router 1 depends on the reverse path filter (<code class="literal">rp_filter</code>) system control (<code class="literal">sysctl</code>) setting. By default on RHEL, Router 1 drops the outgoing traffic instead of routing it to the internet. However, regardless of the configured behavior, communication is not possible without the static route.
							</li><li class="listitem">
								Cannot communicate with the data center network (<code class="literal">203.0.113.0/24</code>). The outgoing traffic reaches the destination through Router 2 because of the default gateway setting. However, replies to packets do not reach the sender because hosts in the data center network (<code class="literal">203.0.113.0/24</code>) send replies to their default gateway (Router 1). Router 1 then sends the traffic to the internet.
							</li><li class="listitem">
								Cannot communicate with the Berlin network (<code class="literal">192.0.2.0/24</code>). Router 2 sends the traffic to Router 1 because of the default gateway settings. The actual behavior of Router 1 depends on the <code class="literal">rp_filter</code> <code class="literal">sysctl</code> setting. By default on RHEL, Router 1 drops the outgoing traffic instead of sending it to the Berlin network (<code class="literal">192.0.2.0/24</code>). However, regardless of the configured behavior, communication is not possible without the static route.
							</li></ul></div></li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					In addition to configuring the static routes, you must enable IP forwarding on both routers.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/32261">Why cannot a server be pinged if net.ipv4.conf.all.rp_filter is set on the server?</a> (Red Hat Knowledgebase)
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/2854141">Enabling IP forwarding</a> (Red Hat Knowledgebase)
					</li></ul></div></section><section class="section" id="how-to-use-the-nmcli-command-to-configure-a-static-route_configuring-static-routes"><div class="titlepage"><div><div><h3 class="title">26.2. How to use the <code class="literal">nmcli</code> utility to configure a static route</h3></div></div></div><p class="_abstract _abstract">
				To configure a static route, use the <code class="literal">nmcli</code> utility with the following syntax:
			</p><pre class="literallayout">$ <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>connection_name</em></span> ipv4.routes "<span class="emphasis"><em>ip</em></span>[/<span class="emphasis"><em>prefix</em></span>] [<span class="emphasis"><em>next_hop</em></span>] [<span class="emphasis"><em>metric</em></span>] [<span class="emphasis"><em>attribute</em></span>=<span class="emphasis"><em>value</em></span>] [<span class="emphasis"><em>attribute</em></span>=<span class="emphasis"><em>value</em></span>] ..."</strong></span></pre><p>
				The command supports the following route attributes:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">cwnd=<span class="emphasis"><em>n</em></span></code>: Sets the congestion window (CWND) size, defined in number of packets.
					</li><li class="listitem">
						<code class="literal">lock-cwnd=true|false</code>: Defines whether or not the kernel can update the CWND value.
					</li><li class="listitem">
						<code class="literal">lock-mtu=true|false</code>: Defines whether or not the kernel can update the MTU to path MTU discovery.
					</li><li class="listitem">
						<code class="literal">lock-window=true|false</code>: Defines whether or not the kernel can update the maximum window size for TCP packets.
					</li><li class="listitem">
						<code class="literal">mtu=<span class="emphasis"><em>&lt;mtu_value&gt;</em></span></code>: Sets the maximum transfer unit (MTU) to use along the path to the destination.
					</li><li class="listitem">
						<code class="literal">onlink=true|false</code>: Defines whether the next hop is directly attached to this link even if it does not match any interface prefix.
					</li><li class="listitem">
						<code class="literal">scope=<span class="emphasis"><em>&lt;scope&gt;</em></span></code>: For an IPv4 route, this attribute sets the scope of the destinations covered by the route prefix. Set the value as an integer (0-255).
					</li><li class="listitem">
						<code class="literal">src=<span class="emphasis"><em>&lt;source_address&gt;</em></span></code>: Sets the source address to prefer when sending traffic to the destinations covered by the route prefix.
					</li><li class="listitem">
						<code class="literal">table=<span class="emphasis"><em>&lt;table_id&gt;</em></span></code>: Sets the ID of the table the route should be added to. If you omit this parameter, NetworkManager uses the <code class="literal">main</code> table.
					</li><li class="listitem">
						<code class="literal">tos=<span class="emphasis"><em>&lt;type_of_service_key&gt;</em></span></code>: Sets the type of service (TOS) key. Set the value as an integer (0-255).
					</li><li class="listitem">
						<code class="literal">type=<span class="emphasis"><em>&lt;route_type&gt;</em></span></code>: Sets the route type. NetworkManager supports the <code class="literal">unicast</code>, <code class="literal">local</code>, <code class="literal">blackhole</code>, <code class="literal">unreachable</code>, <code class="literal">prohibit</code>, and <code class="literal">throw</code> route types. The default is <code class="literal">unicast</code>.
					</li><li class="listitem">
						<code class="literal">window=<span class="emphasis"><em>&lt;window_size&gt;</em></span></code>: Sets the maximal window size for TCP to advertise to these destinations, measured in bytes.
					</li></ul></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					If you use the <code class="literal">ipv4.routes</code> option without a preceding <code class="literal">+</code> sign, <code class="literal">nmcli</code> overrides all current settings of this parameter.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To create an additional route, enter:
						</p><pre class="literallayout">$ <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>connection_name</em></span> +ipv4.routes "<span class="emphasis"><em>&lt;route&gt;</em></span>"</strong></span></pre></li><li class="listitem"><p class="simpara">
							To remove a specific route, enter:
						</p><pre class="literallayout">$ <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>connection_name</em></span> -ipv4.routes "<span class="emphasis"><em>&lt;route&gt;</em></span>"</strong></span></pre></li></ul></div></div></rh-alert></section><section class="section" id="configuring-a-static-route-by-using-nmcli_configuring-static-routes"><div class="titlepage"><div><div><h3 class="title">26.3. Configuring a static route by using <code class="literal">nmcli</code></h3></div></div></div><p class="_abstract _abstract">
				You can add a static route to an existing NetworkManager connection profile using the <code class="literal">nmcli connection modify</code> command.
			</p><p>
				The procedure below configures the following routes:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						An IPv4 route to the remote <code class="literal">198.51.100.0/24</code> network. The corresponding gateway with the IP address <code class="literal">192.0.2.10</code> is reachable through the <code class="literal">LAN</code> connection profile.
					</li><li class="listitem">
						An IPv6 route to the remote <code class="literal">2001:db8:2::/64</code> network. The corresponding gateway with the IP address <code class="literal">2001:db8:1::10</code> is reachable through the <code class="literal">LAN</code> connection profile.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">LAN</code> connection profile exists and it configures this host to be in the same IP subnet as the gateways.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Add the static IPv4 route to the <code class="literal">LAN</code> connection profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify LAN +ipv4.routes "198.51.100.0/24 192.0.2.10"</strong></span></pre><p class="simpara">
						To set multiple routes in one step, pass the individual routes comma-separated to the command:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>&lt;connection_profile&gt;</em></span> +ipv4.routes "<span class="emphasis"><em>&lt;remote_network_1&gt;</em></span>/<span class="emphasis"><em>&lt;subnet_mask_1&gt;</em></span> <span class="emphasis"><em>&lt;gateway_1&gt;</em></span>, <span class="emphasis"><em>&lt;remote_network_n&gt;</em></span>/<span class="emphasis"><em>&lt;subnet_mask_n&gt;</em></span> <span class="emphasis"><em>&lt;gateway_n&gt;</em></span>, ..."</strong></span></pre></li><li class="listitem"><p class="simpara">
						Add the static IPv6 route to the <code class="literal">LAN</code> connection profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify LAN +ipv6.routes "2001:db8:2::/64 2001:db8:1::10"</strong></span></pre></li><li class="listitem"><p class="simpara">
						Re-activate the connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up LAN</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the IPv4 routes:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -4 route</strong></span>
...
198.51.100.0/24 via 192.0.2.10 dev enp1s0</pre></li><li class="listitem"><p class="simpara">
						Display the IPv6 routes:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -6 route</strong></span>
...
2001:db8:2::/64 via 2001:db8:1::10 dev enp1s0 metric 1024 pref medium</pre></li></ol></div></section><section class="section" id="proc_configuring-a-static-route-by-using-nmtui_configuring-static-routes"><div class="titlepage"><div><div><h3 class="title">26.4. Configuring a static route by using <code class="literal">nmtui</code></h3></div></div></div><p>
				The <code class="literal">nmtui</code> application provides a text-based user interface for NetworkManager. You can use <code class="literal">nmtui</code> to configure static routes on a host without a graphical interface.
			</p><p>
				For example, the procedure below adds a route to the <code class="literal">192.0.2.0/24</code> network that uses the gateway running on <code class="literal">198.51.100.1</code>, which is reachable through an existing connection profile.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					In <code class="literal">nmtui</code>:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Navigate by using the cursor keys.
						</li><li class="listitem">
							Press a button by selecting it and hitting <kbd class="keycap">Enter</kbd>.
						</li><li class="listitem">
							Select and clear checkboxes by using <kbd class="keycap">Space</kbd>.
						</li></ul></div></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The network is configured.
					</li><li class="listitem">
						The gateway for the static route must be directly reachable on the interface.
					</li><li class="listitem">
						If the user is logged in on a physical console, user permissions are sufficient. Otherwise, the command requires root permissions.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Start <code class="literal">nmtui</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmtui</strong></span></pre></li><li class="listitem">
						Select <span class="strong strong"><strong>Edit a connection</strong></span>, and press <kbd class="keycap">Enter</kbd>.
					</li><li class="listitem">
						Select the connection profile through which you can reach the next hop to the destination network, and press <kbd class="keycap">Enter</kbd>.
					</li><li class="listitem">
						Depending on whether it is an IPv4 or IPv6 route, press the <span class="strong strong"><strong>Show</strong></span> button next to the protocol’s configuration area.
					</li><li class="listitem"><p class="simpara">
						Press the <span class="strong strong"><strong>Edit</strong></span> button next to <span class="strong strong"><strong>Routing</strong></span>. This opens a new window where you configure static routes:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Press the <span class="strong strong"><strong>Add</strong></span> button and fill in:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The destination network, including the prefix in Classless Inter-Domain Routing (CIDR) format
									</li><li class="listitem">
										The IP address of the next hop
									</li><li class="listitem">
										A metric value, if you add multiple routes to the same network and want to prioritize the routes by efficiency
									</li></ul></div></li><li class="listitem">
								Repeat the previous step for every route you want to add and that is reachable through this connection profile.
							</li><li class="listitem"><p class="simpara">
								Press the <span class="strong strong"><strong>OK</strong></span> button to return to the window with the connection settings.
							</p><div class="figure" id="idm140053159836704"><p class="title"><strong>Figure 26.1. Example of a static route without metric</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/e91ddea1baa3c92192eab56b58293aee/nmtui-add-static-route.png" alt="nmtui add static route"></div></div></div></li></ol></div></li><li class="listitem">
						Press the OK button to return to the <code class="literal">nmtui</code> main menu.
					</li><li class="listitem">
						Select <span class="strong strong"><strong>Activate a connection</strong></span> and press <kbd class="keycap">Enter</kbd>.
					</li><li class="listitem"><p class="simpara">
						Select the connection profile that you edited, and press <kbd class="keycap">Enter</kbd> twice to deactivate and activate it again.
					</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							Skip this step if you run <code class="literal">nmtui</code> over a remote connection, such as SSH, that uses the connection profile you want to reactivate. In this case, if you would deactivate it in <code class="literal">nmtui</code>, the connection is terminated and, consequently, you cannot activate it again. To avoid this problem, use the <code class="literal">nmcli connection <span class="emphasis"><em>&lt;connection_profile&gt;</em></span> up</code> command to reactivate the connection in the mentioned scenario.
						</p></div></rh-alert></li><li class="listitem">
						Press the <span class="strong strong"><strong>Back</strong></span> button to return to the main menu.
					</li><li class="listitem">
						Select <span class="strong strong"><strong>Quit</strong></span>, and press <kbd class="keycap">Enter</kbd> to close the <code class="literal">nmtui</code> application.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify that the route is active:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ip route</strong></span>
...
192.0.2.0/24 via 198.51.100.1 dev <span class="emphasis"><em>example</em></span> proto static metric 100</pre></li></ul></div></section><section class="section" id="configuring-a-static-route-by-using-control-center_configuring-static-routes"><div class="titlepage"><div><div><h3 class="title">26.5. Configuring a static route by using control-center</h3></div></div></div><p class="_abstract _abstract">
				You can use <code class="literal">control-center</code> in GNOME to add a static route to the configuration of a network connection.
			</p><p>
				The procedure below configures the following routes:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						An IPv4 route to the remote <code class="literal">198.51.100.0/24</code> network. The corresponding gateway has the IP address <code class="literal">192.0.2.10</code>.
					</li><li class="listitem">
						An IPv6 route to the remote <code class="literal">2001:db8:2::/64</code> network. The corresponding gateway has the IP address <code class="literal">2001:db8:1::10</code>.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The network is configured.
					</li><li class="listitem">
						This host is in the same IP subnet as the gateways.
					</li><li class="listitem">
						The network configuration of the connection is opened in the <code class="literal">control-center</code> application. See <a class="link" href="#configuring-an-ethernet-connection-by-using-nm-connection-editor_configuring-an-ethernet-connection" title="2.5. Configuring an Ethernet connection by using nm-connection-editor">Configuring an Ethernet connection by using nm-connection-editor</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On the <code class="literal">IPv4</code> tab:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Optional: Disable automatic routes by clicking the <span class="guibutton">On</span> button in the <code class="literal">Routes</code> section of the <code class="literal">IPv4</code> tab to use only static routes. If automatic routes are enabled, Red Hat Enterprise Linux uses static routes and routes received from a DHCP server.
							</li><li class="listitem"><p class="simpara">
								Enter the address, netmask, gateway, and optionally a metric value of the IPv4 route:
							</p><p class="simpara">
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/a5404d88a2894d0ce04363eac41de56e/IPv4-static-route-in-control-center.png" alt="IPv4 static route in control center"></span>

							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						On the <code class="literal">IPv6</code> tab:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Optional: Disable automatic routes by clicking the <span class="guibutton">On</span> button i the <code class="literal">Routes</code> section of the <code class="literal">IPv4</code> tab to use only static routes.
							</li><li class="listitem"><p class="simpara">
								Enter the address, netmask, gateway, and optionally a metric value of the IPv6 route:
							</p><p class="simpara">
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/03be77b0735011cebc9b76b057090520/IPv6-static-route-in-control-center.png" alt="IPv6 static route in control center"></span>

							</p></li></ol></div></li><li class="listitem">
						Click <span class="guibutton">Apply</span>.
					</li><li class="listitem"><p class="simpara">
						Back in the <code class="literal">Network</code> window, disable and re-enable the connection by switching the button for the connection to <span class="guibutton">Off</span> and back to <span class="guibutton">On</span> for changes to take effect.
					</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
							Restarting the connection briefly disrupts connectivity on that interface.
						</p></div></rh-alert></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the IPv4 routes:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -4 route</strong></span>
...
<span class="emphasis"><em>198.51.100.0/24</em></span> via <span class="emphasis"><em>192.0.2.10</em></span> dev <span class="emphasis"><em>enp1s0</em></span></pre></li><li class="listitem"><p class="simpara">
						Display the IPv6 routes:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -6 route</strong></span>
...
<span class="emphasis"><em>2001:db8:2::/64</em></span> via <span class="emphasis"><em>2001:db8:1::10</em></span> dev <span class="emphasis"><em>enp1s0</em></span> metric <span class="emphasis"><em>1024</em></span> pref <span class="emphasis"><em>medium</em></span></pre></li></ol></div></section><section class="section" id="configuring-a-static-route-by-using-nm-connection-editor_configuring-static-routes"><div class="titlepage"><div><div><h3 class="title">26.6. Configuring a static route by using nm-connection-editor</h3></div></div></div><p class="_abstract _abstract">
				You can use the <code class="literal">nm-connection-editor</code> application to add a static route to the configuration of a network connection.
			</p><p>
				The procedure below configures the following routes:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						An IPv4 route to the remote <code class="literal">198.51.100.0/24</code> network. The corresponding gateway with the IP address <code class="literal">192.0.2.10</code> is reachable through the <code class="literal">example</code> connection.
					</li><li class="listitem">
						An IPv6 route to the remote <code class="literal">2001:db8:2::/64</code> network. The corresponding gateway with the IP address <code class="literal">2001:db8:1::10</code> is reachable through the <code class="literal">example</code> connection.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The network is configured.
					</li><li class="listitem">
						This host is in the same IP subnet as the gateways.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open a terminal, and enter <code class="literal">nm-connection-editor</code>:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>nm-connection-editor</strong></span></pre></li><li class="listitem">
						Select the <code class="literal">example</code> connection profile, and click the gear wheel icon to edit the existing connection.
					</li><li class="listitem"><p class="simpara">
						On the <code class="literal">IPv4 Settings</code> tab:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Click the <span class="guibutton">Routes</span> button.
							</li><li class="listitem"><p class="simpara">
								Click the <span class="guibutton">Add</span> button and enter the address, netmask, gateway, and optionally a metric value.
							</p><p class="simpara">
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/14976bccf922e5c20f086a3beccd823f/IPv4-static-route-in-nm-connection-editor.png" alt="IPv4 static route in nm connection editor"></span>

							</p></li><li class="listitem">
								Click <span class="guibutton">OK</span>.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						On the <code class="literal">IPv6 Settings</code> tab:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Click the <span class="guibutton">Routes</span> button.
							</li><li class="listitem"><p class="simpara">
								Click the <span class="guibutton">Add</span> button and enter the address, netmask, gateway, and optionally a metric value.
							</p><p class="simpara">
								<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/bd5dd813a45da55c4b21f6e4756e4947/IPv6-static-route-in-nm-connection-editor.png" alt="IPv6 static route in nm connection editor"></span>

							</p></li><li class="listitem">
								Click <span class="guibutton">OK</span>.
							</li></ol></div></li><li class="listitem">
						Click <span class="guibutton">Save</span>.
					</li><li class="listitem"><p class="simpara">
						Restart the network connection for changes to take effect. For example, to restart the <code class="literal">example</code> connection using the command line:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>example</em></span></strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the IPv4 routes:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -4 route</strong></span>
...
<span class="emphasis"><em>198.51.100.0/24</em></span> via <span class="emphasis"><em>192.0.2.10</em></span> dev <span class="emphasis"><em>enp1s0</em></span></pre></li><li class="listitem"><p class="simpara">
						Display the IPv6 routes:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -6 route</strong></span>
...
<span class="emphasis"><em>2001:db8:2::/64</em></span> via <span class="emphasis"><em>2001:db8:1::10</em></span> dev <span class="emphasis"><em>enp1s0</em></span> metric <span class="emphasis"><em>1024</em></span> pref <span class="emphasis"><em>medium</em></span></pre></li></ol></div></section><section class="section" id="configuring-a-static-route-by-using-the-nmcli-interactive-mode_configuring-static-routes"><div class="titlepage"><div><div><h3 class="title">26.7. Configuring a static route by using the <code class="literal">nmcli</code> interactive mode</h3></div></div></div><p class="_abstract _abstract">
				You can use the interactive mode of the <code class="literal">nmcli</code> utility to add a static route to the configuration of a network connection.
			</p><p>
				The procedure below configures the following routes:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						An IPv4 route to the remote <code class="literal">198.51.100.0/24</code> network. The corresponding gateway with the IP address <code class="literal">192.0.2.10</code> is reachable through the <code class="literal">example</code> connection.
					</li><li class="listitem">
						An IPv6 route to the remote <code class="literal">2001:db8:2::/64</code> network. The corresponding gateway with the IP address <code class="literal">2001:db8:1::10</code> is reachable through the <code class="literal">example</code> connection.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">example</code> connection profile exists and it configures this host to be in the same IP subnet as the gateways.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open the <code class="literal">nmcli</code> interactive mode for the <code class="literal">example</code> connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection edit <span class="emphasis"><em>example</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Add the static IPv4 route:
					</p><pre class="literallayout">nmcli&gt; <span class="strong strong"><strong>set ipv4.routes <span class="emphasis"><em>198.51.100.0/24 192.0.2.10</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Add the static IPv6 route:
					</p><pre class="literallayout">nmcli&gt; <span class="strong strong"><strong>set ipv6.routes <span class="emphasis"><em>2001:db8:2::/64 2001:db8:1::10</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Optional: Verify that the routes were added correctly to the configuration:
					</p><pre class="literallayout">nmcli&gt; <span class="strong strong"><strong>print</strong></span>
...
ipv4.routes:    { ip = <span class="emphasis"><em>198.51.100.0/24</em></span>, nh = <span class="emphasis"><em>192.0.2.10</em></span> }
...
ipv6.routes:    { ip = <span class="emphasis"><em>2001:db8:2::/64</em></span>, nh = <span class="emphasis"><em>2001:db8:1::10</em></span> }
...</pre><p class="simpara">
						The <code class="literal">ip</code> attribute displays the network to route and the <code class="literal">nh</code> attribute the gateway (next hop).
					</p></li><li class="listitem"><p class="simpara">
						Save the configuration:
					</p><pre class="literallayout">nmcli&gt; <span class="strong strong"><strong>save persistent</strong></span></pre></li><li class="listitem"><p class="simpara">
						Restart the network connection:
					</p><pre class="literallayout">nmcli&gt; <span class="strong strong"><strong>activate <span class="emphasis"><em>example</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Leave the <code class="literal">nmcli</code> interactive mode:
					</p><pre class="literallayout">nmcli&gt; <span class="strong strong"><strong>quit</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the IPv4 routes:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -4 route</strong></span>
...
<span class="emphasis"><em>198.51.100.0/24</em></span> via <span class="emphasis"><em>192.0.2.10</em></span> dev <span class="emphasis"><em>enp1s0</em></span></pre></li><li class="listitem"><p class="simpara">
						Display the IPv6 routes:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -6 route</strong></span>
...
<span class="emphasis"><em>2001:db8:2::/64</em></span> via <span class="emphasis"><em>2001:db8:1::10</em></span> dev <span class="emphasis"><em>enp1s0</em></span> metric <span class="emphasis"><em>1024</em></span> pref <span class="emphasis"><em>medium</em></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nmcli(1)</code> and <code class="literal">nm-settings-nmcli(5)</code> man pages on your system
					</li></ul></div></section><section class="section" id="proc_configuring-a-static-route-by-using-nmstatectl_configuring-static-routes"><div class="titlepage"><div><div><h3 class="title">26.8. Configuring a static route by using <code class="literal">nmstatectl</code></h3></div></div></div><p class="_abstract _abstract">
				Use the <code class="literal">nmstatectl</code> utility to configure a static route through the Nmstate API. The Nmstate API ensures that, after setting the configuration, the result matches the configuration file. If anything fails, <code class="literal">nmstatectl</code> automatically rolls back the changes to avoid leaving the system in an incorrect state.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">enp1s0</code> network interface is configured and is in the same IP subnet as the gateways.
					</li><li class="listitem">
						The <code class="literal">nmstate</code> package is installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a YAML file, for example <code class="literal">~/add-static-route-to-enp1s0.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
routes:
  config:
  - destination: 198.51.100.0/24
    next-hop-address: 192.0.2.10
    next-hop-interface: enp1s0
  - destination: 2001:db8:2::/64
    next-hop-address: 2001:db8:1::10
    next-hop-interface: enp1s0</pre><p class="simpara">
						These settings define the following static routes:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								An IPv4 route to the remote <code class="literal">198.51.100.0/24</code> network. The corresponding gateway with the IP address <code class="literal">192.0.2.10</code> is reachable through the <code class="literal">enp1s0</code> interface.
							</li><li class="listitem">
								An IPv6 route to the remote <code class="literal">2001:db8:2::/64</code> network. The corresponding gateway with the IP address <code class="literal">2001:db8:1::10</code> is reachable through the <code class="literal">enp1s0</code> interface.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Apply the settings to the system:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmstatectl apply ~/add-static-route-to-enp1s0.yml</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the IPv4 routes:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -4 route</strong></span>
...
198.51.100.0/24 via 192.0.2.10 dev enp1s0</pre></li><li class="listitem"><p class="simpara">
						Display the IPv6 routes:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -6 route</strong></span>
...
2001:db8:2::/64 via 2001:db8:1::10 dev enp1s0 metric 1024 pref medium</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nmstatectl(8)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/nmstate/examples/</code> directory
					</li></ul></div></section><section class="section" id="proc_configuring-a-static-route-by-using-the-network-rhel-system-role_configuring-static-routes"><div class="titlepage"><div><div><h3 class="title">26.9. Configuring a static route by using the <code class="literal">network</code> RHEL system role</h3></div></div></div><p class="_abstract _abstract">
				A static route ensures that you can send traffic to a destination that cannot be reached through the default gateway. You configure static routes in the NetworkManager connection profile of the interface that is connected to the same network as the next hop. By using Ansible and the <code class="literal">network</code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.
			</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					You cannot use the <code class="literal">network</code> RHEL system role to update only specific values in an existing connection profile. The role ensures that a connection profile exactly matches the settings in a playbook. If a connection profile with the same name already exists, the role applies the settings from the playbook and resets all other settings in the profile to their defaults. To prevent resetting values, always specify the whole configuration of the network connection profile in the playbook, including the settings that you do not want to change.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles">You have prepared the control node and the managed nodes</a>
					</li><li class="listitem">
						You are logged in to the control node as a user who can run playbooks on the managed nodes.
					</li><li class="listitem">
						The account you use to connect to the managed nodes has <code class="literal">sudo</code> permissions on them.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a playbook file, for example <code class="literal">~/playbook.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
- name: Configure the network
  hosts: managed-node-01.example.com
  tasks:
    - name: Ethernet connection profile with static IP address settings
      ansible.builtin.include_role:
        name: rhel-system-roles.network
      vars:
        network_connections:
          - name: enp7s0
            type: ethernet
            autoconnect: yes
            ip:
              address:
                - 192.0.2.1/24
                - 2001:db8:1::1/64
              gateway4: 192.0.2.254
              gateway6: 2001:db8:1::fffe
              dns:
                - 192.0.2.200
                - 2001:db8:1::ffbb
              dns_search:
                - example.com
              <span class="strong strong"><strong>route:</strong></span>
                <span class="strong strong"><strong>- network: 198.51.100.0</strong></span>
                  <span class="strong strong"><strong>prefix: 24</strong></span>
                  <span class="strong strong"><strong>gateway: 192.0.2.10</strong></span>
                <span class="strong strong"><strong>- network: 2001:db8:2::</strong></span>
                  <span class="strong strong"><strong>prefix: 64</strong></span>
                  <span class="strong strong"><strong>gateway: 2001:db8:1::10</strong></span>
            state: up</pre><p class="simpara">
						For details about all variables used in the playbook, see the <code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file on the control node.
					</p></li><li class="listitem"><p class="simpara">
						Validate the playbook syntax:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --syntax-check ~/playbook.yml</strong></span></pre><p class="simpara">
						Note that this command only validates the syntax and does not protect against a wrong but valid configuration.
					</p></li><li class="listitem"><p class="simpara">
						Run the playbook:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook ~/playbook.yml</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the IPv4 routes:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ansible managed-node-01.example.com -m command -a 'ip -4 route'</strong></span>
managed-node-01.example.com | CHANGED | rc=0 &gt;&gt;
...
198.51.100.0/24 via 192.0.2.10 dev enp7s0</pre></li><li class="listitem"><p class="simpara">
						Display the IPv6 routes:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ansible managed-node-01.example.com -m command -a 'ip -6 route'</strong></span>
managed-node-01.example.com | CHANGED | rc=0 &gt;&gt;
...
2001:db8:2::/64 via 2001:db8:1::10 dev enp7s0 metric 1024 pref medium</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/rhel-system-roles/network/</code> directory
					</li></ul></div></section></section><section class="chapter" id="configuring-policy-based-routing-to-define-alternative-routes_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 27. Configuring policy-based routing to define alternative routes</h2></div></div></div><p class="_abstract _abstract">
			By default, the kernel in RHEL decides where to forward network packets based on the destination address using a routing table. Policy-based routing enables you to configure complex routing scenarios. For example, you can route packets based on various criteria, such as the source address, packet metadata, or protocol.
		</p><section class="section" id="routing-traffic-from-a-specific-subnet-to-a-different-default-gateway-by-using-nmcli_configuring-policy-based-routing-to-define-alternative-routes"><div class="titlepage"><div><div><h3 class="title">27.1. Routing traffic from a specific subnet to a different default gateway by using <code class="literal">nmcli</code></h3></div></div></div><p class="_abstract _abstract">
				You can use policy-based routing to configure a different default gateway for traffic from certain subnets. For example, you can configure RHEL as a router that, by default, routes all traffic to internet provider A using the default route. However, traffic received from the internal workstations subnet is routed to provider B.
			</p><p>
				The procedure assumes the following network topology:
			</p><p>
				<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/13d0843cf47a810942ae325682f70d0c/policy-based-routing.png" alt="policy based routing"></span>

			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The system uses <code class="literal">NetworkManager</code> to configure the network, which is the default.
					</li><li class="listitem"><p class="simpara">
						The RHEL router you want to set up in the procedure has four network interfaces:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The <code class="literal">enp7s0</code> interface is connected to the network of provider A. The gateway IP in the provider’s network is <code class="literal">198.51.100.2</code>, and the network uses a <code class="literal">/30</code> network mask.
							</li><li class="listitem">
								The <code class="literal">enp1s0</code> interface is connected to the network of provider B. The gateway IP in the provider’s network is <code class="literal">192.0.2.2</code>, and the network uses a <code class="literal">/30</code> network mask.
							</li><li class="listitem">
								The <code class="literal">enp8s0</code> interface is connected to the <code class="literal">10.0.0.0/24</code> subnet with internal workstations.
							</li><li class="listitem">
								The <code class="literal">enp9s0</code> interface is connected to the <code class="literal">203.0.113.0/24</code> subnet with the company’s servers.
							</li></ul></div></li><li class="listitem">
						Hosts in the internal workstations subnet use <code class="literal">10.0.0.1</code> as the default gateway. In the procedure, you assign this IP address to the <code class="literal">enp8s0</code> network interface of the router.
					</li><li class="listitem">
						Hosts in the server subnet use <code class="literal">203.0.113.1</code> as the default gateway. In the procedure, you assign this IP address to the <code class="literal">enp9s0</code> network interface of the router.
					</li><li class="listitem">
						The <code class="literal">firewalld</code> service is enabled and active.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Configure the network interface to provider A:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type ethernet con-name Provider-A ifname enp7s0 ipv4.method manual ipv4.addresses 198.51.100.1/30 ipv4.gateway 198.51.100.2 ipv4.dns 198.51.100.200 connection.zone external</strong></span></pre><p class="simpara">
						The <code class="literal">nmcli connection add</code> command creates a NetworkManager connection profile. The command uses the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">type</code> <code class="literal">ethernet</code>: Defines that the connection type is Ethernet.
							</li><li class="listitem">
								<code class="literal">con-name</code> <code class="literal"><span class="emphasis"><em>&lt;connection_name&gt;</em></span></code>: Sets the name of the profile. Use a meaningful name to avoid confusion.
							</li><li class="listitem">
								<code class="literal">ifname</code> <code class="literal"><span class="emphasis"><em>&lt;network_device&gt;</em></span></code>: Sets the network interface.
							</li><li class="listitem">
								<code class="literal">ipv4.method</code> <code class="literal">manual</code>: Enables to configure a static IP address.
							</li><li class="listitem">
								<code class="literal">ipv4.addresses</code> <code class="literal"><span class="emphasis"><em>&lt;IP_address&gt;</em></span>/<span class="emphasis"><em>&lt;subnet_mask&gt;</em></span></code>: Sets the IPv4 addresses and subnet mask.
							</li><li class="listitem">
								<code class="literal">ipv4.gateway</code> <code class="literal"><span class="emphasis"><em>&lt;IP_address&gt;</em></span></code>: Sets the default gateway address.
							</li><li class="listitem">
								<code class="literal">ipv4.dns</code> <code class="literal"><span class="emphasis"><em>&lt;IP_of_DNS_server&gt;</em></span></code>: Sets the IPv4 address of the DNS server.
							</li><li class="listitem">
								<code class="literal">connection.zone</code> <code class="literal"><span class="emphasis"><em>&lt;firewalld_zone&gt;</em></span></code>: Assigns the network interface to the defined <code class="literal">firewalld</code> zone. Note that <code class="literal">firewalld</code> automatically enables masquerading for interfaces assigned to the <code class="literal">external</code> zone.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Configure the network interface to provider B:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type ethernet con-name Provider-B ifname enp1s0 ipv4.method manual ipv4.addresses 192.0.2.1/30 ipv4.routes "0.0.0.0/0 192.0.2.2 table=5000" connection.zone external</strong></span></pre><p class="simpara">
						This command uses the <code class="literal">ipv4.routes</code> parameter instead of <code class="literal">ipv4.gateway</code> to set the default gateway. This is required to assign the default gateway for this connection to a different routing table (<code class="literal">5000</code>) than the default. NetworkManager automatically creates this new routing table when the connection is activated.
					</p></li><li class="listitem"><p class="simpara">
						Configure the network interface to the internal workstations subnet:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type ethernet con-name Internal-Workstations ifname enp8s0 ipv4.method manual ipv4.addresses 10.0.0.1/24 ipv4.routes "10.0.0.0/24 table=5000" ipv4.routing-rules "priority 5 from 10.0.0.0/24 table 5000" connection.zone trusted</strong></span></pre><p class="simpara">
						This command uses the <code class="literal">ipv4.routes</code> parameter to add a static route to the routing table with ID <code class="literal">5000</code>. This static route for the <code class="literal">10.0.0.0/24</code> subnet uses the IP of the local network interface to provider B (<code class="literal">192.0.2.1</code>) as next hop.
					</p><p class="simpara">
						Additionally, the command uses the <code class="literal">ipv4.routing-rules</code> parameter to add a routing rule with priority <code class="literal">5</code> that routes traffic from the <code class="literal">10.0.0.0/24</code> subnet to table <code class="literal">5000</code>. Low values have a high priority.
					</p><p class="simpara">
						Note that the syntax in the <code class="literal">ipv4.routing-rules</code> parameter is the same as in an <code class="literal">ip rule add</code> command, except that <code class="literal">ipv4.routing-rules</code> always requires specifying a priority.
					</p></li><li class="listitem"><p class="simpara">
						Configure the network interface to the server subnet:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type ethernet con-name Servers ifname enp9s0 ipv4.method manual ipv4.addresses 203.0.113.1/24 connection.zone trusted</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On a RHEL host in the internal workstation subnet:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Install the <code class="literal">traceroute</code> package:
							</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install traceroute</strong></span></pre></li><li class="listitem"><p class="simpara">
								Use the <code class="literal">traceroute</code> utility to display the route to a host on the internet:
							</p><pre class="literallayout"># <span class="strong strong"><strong>traceroute redhat.com</strong></span>
traceroute to redhat.com (209.132.183.105), 30 hops max, 60 byte packets
 1  10.0.0.1 (10.0.0.1)     0.337 ms  0.260 ms  0.223 ms
 2  192.0.2.1 (192.0.2.1)   0.884 ms  1.066 ms  1.248 ms
 ...</pre><p class="simpara">
								The output of the command displays that the router sends packets over <code class="literal">192.0.2.1</code>, which is the network of provider B.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						On a RHEL host in the server subnet:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Install the <code class="literal">traceroute</code> package:
							</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install traceroute</strong></span></pre></li><li class="listitem"><p class="simpara">
								Use the <code class="literal">traceroute</code> utility to display the route to a host on the internet:
							</p><pre class="literallayout"># <span class="strong strong"><strong>traceroute redhat.com</strong></span>
traceroute to redhat.com (209.132.183.105), 30 hops max, 60 byte packets
 1  203.0.113.1 (203.0.113.1)    2.179 ms  2.073 ms  1.944 ms
 2  198.51.100.2 (198.51.100.2)  1.868 ms  1.798 ms  1.549 ms
 ...</pre><p class="simpara">
								The output of the command displays that the router sends packets over <code class="literal">198.51.100.2</code>, which is the network of provider A.
							</p></li></ol></div></li></ol></div><div class="formalpara"><p class="title"><strong>Troubleshooting steps</strong></p><p>
					On the RHEL router:
				</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the rule list:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip rule list</strong></span>
0:	from all lookup local
<span class="strong strong"><strong>5</strong></span>:	<span class="strong strong"><strong>from 10.0.0.0/24 lookup 5000</strong></span>
32766:	from all lookup main
32767:	from all lookup default</pre><p class="simpara">
						By default, RHEL contains rules for the tables <code class="literal">local</code>, <code class="literal">main</code>, and <code class="literal">default</code>.
					</p></li><li class="listitem"><p class="simpara">
						Display the routes in table <code class="literal">5000</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip route list table 5000</strong></span>
0.0.0.0/0 via 192.0.2.2 dev enp1s0 proto static metric 100
10.0.0.0/24 dev enp8s0 proto static scope link src 192.0.2.1 metric 102</pre></li><li class="listitem"><p class="simpara">
						Display the interfaces and firewall zones:
					</p><pre class="literallayout"># <span class="strong strong"><strong>firewall-cmd --get-active-zones</strong></span>
external
  interfaces: enp1s0 enp7s0
trusted
  interfaces: enp8s0 enp9s0</pre></li><li class="listitem"><p class="simpara">
						Verify that the <code class="literal">external</code> zone has masquerading enabled:
					</p><pre class="literallayout"># <span class="strong strong"><strong>firewall-cmd --info-zone=external</strong></span>
external (active)
  target: default
  icmp-block-inversion: no
  interfaces: enp1s0 enp7s0
  sources:
  services: ssh
  ports:
  protocols:
  <span class="strong strong"><strong>masquerade: yes</strong></span>
  ...</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nmcli(1)</code> and <code class="literal">nm-settings(5)</code> man pages on your system
					</li></ul></div></section><section class="section" id="proc_routing-traffic-from-a-specific-subnet-to-a-different-default-gateway-by-using-the-network-rhel-system-role_configuring-policy-based-routing-to-define-alternative-routes"><div class="titlepage"><div><div><h3 class="title">27.2. Routing traffic from a specific subnet to a different default gateway by using the <code class="literal">network</code> RHEL system role</h3></div></div></div><p>
				You can use policy-based routing to configure a different default gateway for traffic from certain subnets. For example, you can configure RHEL as a router that, by default, routes all traffic to internet provider A using the default route. However, traffic received from the internal workstations subnet is routed to provider B. By using Ansible and the <code class="literal">network</code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.
			</p><p>
				You can use the <code class="literal">network</code> RHEL system role to configure the connection profiles, including routing tables and rules.
			</p><p>
				This procedure assumes the following network topology:
			</p><p>
				<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/13d0843cf47a810942ae325682f70d0c/policy-based-routing.png" alt="policy based routing"></span>

			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles">You have prepared the control node and the managed nodes</a>
					</li><li class="listitem">
						You are logged in to the control node as a user who can run playbooks on the managed nodes.
					</li><li class="listitem">
						The account you use to connect to the managed nodes has <code class="literal">sudo</code> permissions on them.
					</li><li class="listitem">
						The managed nodes uses the <code class="literal">NetworkManager</code> and <code class="literal">firewalld</code> services.
					</li><li class="listitem"><p class="simpara">
						The managed nodes you want to configure has four network interfaces:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The <code class="literal">enp7s0</code> interface is connected to the network of provider A. The gateway IP in the provider’s network is <code class="literal">198.51.100.2</code>, and the network uses a <code class="literal">/30</code> network mask.
							</li><li class="listitem">
								The <code class="literal">enp1s0</code> interface is connected to the network of provider B. The gateway IP in the provider’s network is <code class="literal">192.0.2.2</code>, and the network uses a <code class="literal">/30</code> network mask.
							</li><li class="listitem">
								The <code class="literal">enp8s0</code> interface is connected to the <code class="literal">10.0.0.0/24</code> subnet with internal workstations.
							</li><li class="listitem">
								The <code class="literal">enp9s0</code> interface is connected to the <code class="literal">203.0.113.0/24</code> subnet with the company’s servers.
							</li></ul></div></li><li class="listitem">
						Hosts in the internal workstations subnet use <code class="literal">10.0.0.1</code> as the default gateway. In the procedure, you assign this IP address to the <code class="literal">enp8s0</code> network interface of the router.
					</li><li class="listitem">
						Hosts in the server subnet use <code class="literal">203.0.113.1</code> as the default gateway. In the procedure, you assign this IP address to the <code class="literal">enp9s0</code> network interface of the router.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a playbook file, for example <code class="literal">~/playbook.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
- name: Configuring policy-based routing
  hosts: managed-node-01.example.com
  tasks:
    - name: Routing traffic from a specific subnet to a different default gateway
      ansible.builtin.include_role:
        name: rhel-system-roles.network
      vars:
        network_connections:
          - name: Provider-A
            interface_name: enp7s0
            type: ethernet
            autoconnect: True
            ip:
              address:
                - 198.51.100.1/30
              gateway4: 198.51.100.2
              dns:
                - 198.51.100.200
            state: up
            zone: external

          - name: Provider-B
            interface_name: enp1s0
            type: ethernet
            autoconnect: True
            ip:
              address:
                - 192.0.2.1/30
              route:
                - network: 0.0.0.0
                  prefix: 0
                  gateway: 192.0.2.2
                  table: 5000
            state: up
            zone: external

          - name: Internal-Workstations
            interface_name: enp8s0
            type: ethernet
            autoconnect: True
            ip:
              address:
                - 10.0.0.1/24
              route:
                - network: 10.0.0.0
                  prefix: 24
                  table: 5000
              routing_rule:
                - priority: 5
                  from: 10.0.0.0/24
                  table: 5000
            state: up
            zone: trusted

          - name: Servers
            interface_name: enp9s0
            type: ethernet
            autoconnect: True
            ip:
              address:
                - 203.0.113.1/24
            state: up
            zone: trusted</pre><p class="simpara">
						The settings specified in the example playbook include the following:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">table: <span class="emphasis"><em>&lt;value&gt;</em></span></code></span></dt><dd>
									Assigns the route from the same list entry as the <code class="literal">table</code> variable to the specified routing table.
								</dd><dt><span class="term"><code class="literal">routing_rule: <span class="emphasis"><em>&lt;list&gt;</em></span></code></span></dt><dd>
									Defines the priority of the specified routing rule and from a connection profile to which routing table the rule is assigned.
								</dd><dt><span class="term"><code class="literal">zone: <span class="emphasis"><em>&lt;zone_name&gt;</em></span></code></span></dt><dd>
									Assigns the network interface from a connection profile to the specified <code class="literal">firewalld</code> zone.
								</dd></dl></div><p class="simpara">
						For details about all variables used in the playbook, see the <code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file on the control node.
					</p></li><li class="listitem"><p class="simpara">
						Validate the playbook syntax:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --syntax-check ~/playbook.yml</strong></span></pre><p class="simpara">
						Note that this command only validates the syntax and does not protect against a wrong but valid configuration.
					</p></li><li class="listitem"><p class="simpara">
						Run the playbook:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook ~/playbook.yml</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On a RHEL host in the internal workstation subnet:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Install the <code class="literal">traceroute</code> package:
							</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install traceroute</strong></span></pre></li><li class="listitem"><p class="simpara">
								Use the <code class="literal">traceroute</code> utility to display the route to a host on the internet:
							</p><pre class="literallayout"># <span class="strong strong"><strong>traceroute redhat.com</strong></span>
traceroute to redhat.com (209.132.183.105), 30 hops max, 60 byte packets
 1  10.0.0.1 (10.0.0.1)     0.337 ms  0.260 ms  0.223 ms
 2  192.0.2.1 (192.0.2.1)   0.884 ms  1.066 ms  1.248 ms
 ...</pre><p class="simpara">
								The output of the command displays that the router sends packets over <code class="literal">192.0.2.1</code>, which is the network of provider B.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						On a RHEL host in the server subnet:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Install the <code class="literal">traceroute</code> package:
							</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install traceroute</strong></span></pre></li><li class="listitem"><p class="simpara">
								Use the <code class="literal">traceroute</code> utility to display the route to a host on the internet:
							</p><pre class="literallayout"># <span class="strong strong"><strong>traceroute redhat.com</strong></span>
traceroute to redhat.com (209.132.183.105), 30 hops max, 60 byte packets
 1  203.0.113.1 (203.0.113.1)    2.179 ms  2.073 ms  1.944 ms
 2  198.51.100.2 (198.51.100.2)  1.868 ms  1.798 ms  1.549 ms
 ...</pre><p class="simpara">
								The output of the command displays that the router sends packets over <code class="literal">198.51.100.2</code>, which is the network of provider A.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						On the RHEL router that you configured using the RHEL system role:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Display the rule list:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip rule list</strong></span>
0:      from all lookup local
<span class="strong strong"><strong>5</strong></span>:    <span class="strong strong"><strong>from 10.0.0.0/24 lookup 5000</strong></span>
32766:  from all lookup main
32767:  from all lookup default</pre><p class="simpara">
								By default, RHEL contains rules for the tables <code class="literal">local</code>, <code class="literal">main</code>, and <code class="literal">default</code>.
							</p></li><li class="listitem"><p class="simpara">
								Display the routes in table <code class="literal">5000</code>:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip route list table 5000</strong></span>
0.0.0.0/0 via 192.0.2.2 dev enp1s0 proto static metric 100
10.0.0.0/24 dev enp8s0 proto static scope link src 192.0.2.1 metric 102</pre></li><li class="listitem"><p class="simpara">
								Display the interfaces and firewall zones:
							</p><pre class="literallayout"># <span class="strong strong"><strong>firewall-cmd --get-active-zones</strong></span>
external
  interfaces: enp1s0 enp7s0
trusted
  interfaces: enp8s0 enp9s0</pre></li><li class="listitem"><p class="simpara">
								Verify that the <code class="literal">external</code> zone has masquerading enabled:
							</p><pre class="literallayout"># <span class="strong strong"><strong>firewall-cmd --info-zone=external</strong></span>
external (active)
  target: default
  icmp-block-inversion: no
  interfaces: enp1s0 enp7s0
  sources:
  services: ssh
  ports:
  protocols:
  <span class="strong strong"><strong>masquerade: yes</strong></span>
  ...</pre></li></ol></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/rhel-system-roles/network/</code> directory
					</li></ul></div></section></section><section class="chapter" id="reusing-the-same-ip-address-on-different-interfaces_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 28. Reusing the same IP address on different interfaces</h2></div></div></div><p class="_abstract _abstract">
			With Virtual routing and forwarding (VRF), administrators can use multiple routing tables simultaneously on the same host. For that, VRF partitions a network at layer 3. This enables the administrator to isolate traffic using separate and independent route tables per VRF domain. This technique is similar to virtual LANs (VLAN), which partitions a network at layer 2, where the operating system uses different VLAN tags to isolate traffic sharing the same physical medium.
		</p><p>
			One benefit of VRF over partitioning on layer 2 is that routing scales better considering the number of peers involved.
		</p><p>
			Red Hat Enterprise Linux uses a virtual <code class="literal systemitem">vrt</code> device for each VRF domain and adds routes to a VRF domain by adding existing network devices to a VRF device. Addresses and routes previously attached to the original device will be moved inside the VRF domain.
		</p><p>
			Note that each VRF domain is isolated from each other.
		</p><section class="section" id="permanently-reusing-the-same-ip-address-on-different-interfaces_reusing-the-same-ip-address-on-different-interfaces"><div class="titlepage"><div><div><h3 class="title">28.1. Permanently reusing the same IP address on different interfaces</h3></div></div></div><p class="_abstract _abstract">
				You can use the virtual routing and forwarding (VRF) feature to permanently use the same IP address on different interfaces in one server.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					To enable remote peers to contact both VRF interfaces while reusing the same IP address, the network interfaces must belong to different broadcasting domains. A broadcast domain in a network is a set of nodes, which receive broadcast traffic sent by any of them. In most configurations, all nodes connected to the same switch belong to the same broadcasting domain.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You are logged in as the <code class="literal">root</code> user.
					</li><li class="listitem">
						The network interfaces are not configured.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create and configure the first VRF device:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create a connection for the VRF device and assign it to a routing table. For example, to create a VRF device named <code class="literal">vrf0</code> that is assigned to the <code class="literal">1001</code> routing table:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type vrf ifname <span class="emphasis"><em>vrf0</em></span> con-name <span class="emphasis"><em>vrf0</em></span> table 1001 ipv4.method disabled ipv6.method disabled</strong></span></pre></li><li class="listitem"><p class="simpara">
								Enable the <code class="literal">vrf0</code> device:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>vrf0</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
								Assign a network device to the VRF just created. For example, to add the <code class="literal">enp1s0</code> Ethernet device to the <code class="literal">vrf0</code> VRF device and assign an IP address and the subnet mask to <code class="literal">enp1s0</code>, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type ethernet con-name <span class="emphasis"><em>vrf.enp1s0</em></span> ifname <span class="emphasis"><em>enp1s0</em></span> controller vrf0 ipv4.method <span class="emphasis"><em>manual</em></span> ipv4.address <span class="emphasis"><em>192.0.2.1/24</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
								Activate the <code class="literal">vrf.enp1s0</code> connection:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>vrf.enp1s0</em></span></strong></span></pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Create and configure the next VRF device:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create the VRF device and assign it to a routing table. For example, to create a VRF device named <code class="literal">vrf1</code> that is assigned to the <code class="literal">1002</code> routing table, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type vrf ifname <span class="emphasis"><em>vrf1</em></span> con-name <span class="emphasis"><em>vrf1</em></span> table 1002 ipv4.method disabled ipv6.method disabled</strong></span></pre></li><li class="listitem"><p class="simpara">
								Activate the <code class="literal">vrf1</code> device:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>vrf1</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
								Assign a network device to the VRF just created. For example, to add the <code class="literal">enp7s0</code> Ethernet device to the <code class="literal">vrf1</code> VRF device and assign an IP address and the subnet mask to <code class="literal">enp7s0</code>, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type ethernet con-name <span class="emphasis"><em>vrf.enp7s0</em></span> ifname <span class="emphasis"><em>enp7s0</em></span> controller <span class="emphasis"><em>vrf1</em></span> ipv4.method <span class="emphasis"><em>manual</em></span> ipv4.address <span class="emphasis"><em>192.0.2.1/24</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
								Activate the <code class="literal">vrf.enp7s0</code> device:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>vrf.enp7s0</em></span></strong></span></pre></li></ol></div></li></ol></div></section><section class="section" id="temporarily-reusing-the-same-ip-address-on-different-interfaces_reusing-the-same-ip-address-on-different-interfaces"><div class="titlepage"><div><div><h3 class="title">28.2. Temporarily reusing the same IP address on different interfaces</h3></div></div></div><p class="_abstract _abstract">
				You can use the virtual routing and forwarding (VRF) feature to temporarily use the same IP address on different interfaces in one server. Use this procedure only for testing purposes, because the configuration is temporary and lost after you reboot the system.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					To enable remote peers to contact both VRF interfaces while reusing the same IP address, the network interfaces must belong to different broadcasting domains. A broadcast domain in a network is a set of nodes which receive broadcast traffic sent by any of them. In most configurations, all nodes connected to the same switch belong to the same broadcasting domain.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You are logged in as the <code class="literal">root</code> user.
					</li><li class="listitem">
						The network interfaces are not configured.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create and configure the first VRF device:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create the VRF device and assign it to a routing table. For example, to create a VRF device named <code class="literal">blue</code> that is assigned to the <code class="literal">1001</code> routing table:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip link add dev blue type vrf table 1001</strong></span></pre></li><li class="listitem"><p class="simpara">
								Enable the <code class="literal">blue</code> device:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip link set dev blue up</strong></span></pre></li><li class="listitem"><p class="simpara">
								Assign a network device to the VRF device. For example, to add the <code class="literal">enp1s0</code> Ethernet device to the <code class="literal">blue</code> VRF device:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip link set dev enp1s0 master blue</strong></span></pre></li><li class="listitem"><p class="simpara">
								Enable the <code class="literal">enp1s0</code> device:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip link set dev enp1s0 up</strong></span></pre></li><li class="listitem"><p class="simpara">
								Assign an IP address and subnet mask to the <code class="literal">enp1s0</code> device. For example, to set it to <code class="literal">192.0.2.1/24</code>:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip addr add dev enp1s0 192.0.2.1/24</strong></span></pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Create and configure the next VRF device:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create the VRF device and assign it to a routing table. For example, to create a VRF device named <code class="literal">red</code> that is assigned to the <code class="literal">1002</code> routing table:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip link add dev red type vrf table 1002</strong></span></pre></li><li class="listitem"><p class="simpara">
								Enable the <code class="literal">red</code> device:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip link set dev red up</strong></span></pre></li><li class="listitem"><p class="simpara">
								Assign a network device to the VRF device. For example, to add the <code class="literal">enp7s0</code> Ethernet device to the <code class="literal">red</code> VRF device:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip link set dev enp7s0 master red</strong></span></pre></li><li class="listitem"><p class="simpara">
								Enable the <code class="literal">enp7s0</code> device:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip link set dev enp7s0 up</strong></span></pre></li><li class="listitem"><p class="simpara">
								Assign the same IP address and subnet mask to the <code class="literal">enp7s0</code> device as you used for <code class="literal">enp1s0</code> in the <code class="literal">blue</code> VRF domain:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip addr add dev enp7s0 192.0.2.1/24</strong></span></pre></li></ol></div></li><li class="listitem">
						Optional: Create further VRF devices as described above.
					</li></ol></div></section><section class="section _additional-resources" id="additional_resources"><div class="titlepage"><div><div><h3 class="title">28.3. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">/usr/share/doc/kernel-doc-&lt;<span class="emphasis"><em>kernel_version</em></span>&gt;/Documentation/networking/vrf.txt</code> from the <code class="literal package">kernel-doc</code> package
					</li></ul></div></section></section><section class="chapter" id="assembly_starting-a-service-within-an-isolated-vrf-network_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 29. Starting a service within an isolated VRF network</h2></div></div></div><p class="_abstract _abstract">
			With virtual routing and forwarding (VRF), you can create isolated networks with a routing table that is different to the main routing table of the operating system. You can then start services and applications so that they have only access to the network defined in that routing table.
		</p><section class="section" id="proc_configuring-a-vrf-device_assembly_starting-a-service-within-an-isolated-vrf-network"><div class="titlepage"><div><div><h3 class="title">29.1. Configuring a VRF device</h3></div></div></div><p class="_abstract _abstract">
				To use virtual routing and forwarding (VRF), you create a VRF device and attach a physical or virtual network interface and routing information to it.
			</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					To prevent that you lock out yourself out remotely, perform this procedure on the local console or remotely over a network interface that you do not want to assign to the VRF device.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You are logged in locally or using a network interface that is different to the one you want to assign to the VRF device.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create the <code class="literal">vrf0</code> connection with a same-named virtual device, and attach it to routing table <code class="literal">1000</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type vrf ifname <span class="emphasis"><em>vrf0</em></span> con-name <span class="emphasis"><em>vrf0</em></span> table <span class="emphasis"><em>1000</em></span> ipv4.method disabled ipv6.method disabled</strong></span></pre></li><li class="listitem"><p class="simpara">
						Add the <code class="literal">enp1s0</code> device to the <code class="literal">vrf0</code> connection, and configure the IP settings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type ethernet con-name <span class="emphasis"><em>enp1s0</em></span> ifname <span class="emphasis"><em>enp1s0</em></span> controller <span class="emphasis"><em>vrf0</em></span> ipv4.method <span class="emphasis"><em>manual</em></span> ipv4.address <span class="emphasis"><em>192.0.2.1/24</em></span> ipv4.gateway <span class="emphasis"><em>192.0.2.254</em></span></strong></span></pre><p class="simpara">
						This command creates the <code class="literal">enp1s0</code> connection as a port of the <code class="literal">vrf0</code> connection. Due to this configuration, the routing information are automatically assigned to the routing table <code class="literal">1000</code> that is associated with the <code class="literal">vrf0</code> device.
					</p></li><li class="listitem"><p class="simpara">
						If you require static routes in the isolated network:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Add the static routes:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>enp1s0</em></span> +ipv4.routes "<span class="emphasis"><em>198.51.100.0/24</em></span> <span class="emphasis"><em>192.0.2.2</em></span>"</strong></span></pre><p class="simpara">
								This adds a route to the <code class="literal">198.51.100.0/24</code> network that uses <code class="literal">192.0.2.2</code> as the router.
							</p></li><li class="listitem"><p class="simpara">
								Activate the connection:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>enp1s0</em></span></strong></span></pre></li></ol></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the IP settings of the device that is associated with <code class="literal">vrf0</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip -br addr show vrf <span class="emphasis"><em>vrf0</em></span></strong></span>
<span class="emphasis"><em>enp1s0</em></span>    UP    <span class="emphasis"><em>192.0.2.1/24</em></span></pre></li><li class="listitem"><p class="simpara">
						Display the VRF devices and their associated routing table:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip vrf show</strong></span>
Name              Table
-----------------------
<span class="emphasis"><em>vrf0</em></span>              <span class="emphasis"><em>1000</em></span></pre></li><li class="listitem"><p class="simpara">
						Display the main routing table:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip route show</strong></span>
default via <span class="emphasis"><em>203.0.113.0/24</em></span> dev <span class="emphasis"><em>enp7s0</em></span> proto static metric 100</pre><p class="simpara">
						The main routing table does not mention any routes associated with the device <code class="literal">enp1s0</code> device or the <code class="literal">192.0.2.1/24</code> subnet.
					</p></li><li class="listitem"><p class="simpara">
						Display the routing table <code class="literal">1000</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip route show table <span class="emphasis"><em>1000</em></span></strong></span>
default via <span class="emphasis"><em>192.0.2.254</em></span> dev <span class="emphasis"><em>enp1s0</em></span> proto static metric 101
broadcast <span class="emphasis"><em>192.0.2.0</em></span> dev <span class="emphasis"><em>enp1s0</em></span> proto kernel scope link src <span class="emphasis"><em>192.0.2.1</em></span>
<span class="emphasis"><em>192.0.2.0</em></span>/24 dev <span class="emphasis"><em>enp1s0</em></span> proto kernel scope link src <span class="emphasis"><em>192.0.2.1</em></span> metric 101
local <span class="emphasis"><em>192.0.2.1</em></span> dev <span class="emphasis"><em>enp1s0</em></span> proto kernel scope host src <span class="emphasis"><em>192.0.2.1</em></span>
broadcast <span class="emphasis"><em>192.0.2.255</em></span> dev <span class="emphasis"><em>enp1s0</em></span> proto kernel scope link src <span class="emphasis"><em>192.0.2.1</em></span>
<span class="emphasis"><em>198.51.100.0/24</em></span> via <span class="emphasis"><em>192.0.2.2</em></span> dev <span class="emphasis"><em>enp1s0</em></span> proto static metric 101</pre><p class="simpara">
						The <code class="literal">default</code> entry indicates that services that use this routing table, use <code class="literal">192.0.2.254</code> as their default gateway and not the default gateway in the main routing table.
					</p></li><li class="listitem"><p class="simpara">
						Execute the <code class="literal">traceroute</code> utility in the network associated with <code class="literal">vrf0</code> to verify that the utility uses the route from table <code class="literal">1000</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip vrf exec <span class="emphasis"><em>vrf0</em></span> traceroute <span class="emphasis"><em>203.0.113.1</em></span></strong></span>
traceroute to <span class="emphasis"><em>203.0.113.1</em></span> (<span class="emphasis"><em>203.0.113.1</em></span>), 30 hops max, 60 byte packets
 1  <span class="emphasis"><em>192.0.2.254</em></span> (<span class="emphasis"><em>192.0.2.254</em></span>)  0.516 ms  0.459 ms  0.430 ms
...</pre><p class="simpara">
						The first hop is the default gateway that is assigned to the routing table <code class="literal">1000</code> and not the default gateway from the system’s main routing table.
					</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">ip-vrf(8)</code> man page on your system
					</li></ul></div></section><section class="section" id="proc_starting-a-service-within-an-isolated-vrf-network_assembly_starting-a-service-within-an-isolated-vrf-network"><div class="titlepage"><div><div><h3 class="title">29.2. Starting a service within an isolated VRF network</h3></div></div></div><p class="_abstract _abstract">
				You can configure a service, such as the Apache HTTP Server, to start within an isolated virtual routing and forwarding (VRF) network.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					Services can only bind to local IP addresses that are in the same VRF network.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You configured the <code class="literal">vrf0</code> device.
					</li><li class="listitem">
						You configured Apache HTTP Server to listen only on the IP address that is assigned to the interface associated with the <code class="literal">vrf0</code> device.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the content of the <code class="literal">httpd</code> systemd service:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl cat httpd</strong></span>
...
[Service]
ExecStart=/usr/sbin/httpd $OPTIONS -DFOREGROUND
...</pre><p class="simpara">
						You require the content of the <code class="literal">ExecStart</code> parameter in a later step to run the same command within the isolated VRF network.
					</p></li><li class="listitem"><p class="simpara">
						Create the <code class="literal">/etc/systemd/system/httpd.service.d/</code> directory:
					</p><pre class="literallayout"># <span class="strong strong"><strong>mkdir /etc/systemd/system/httpd.service.d/</strong></span></pre></li><li class="listitem"><p class="simpara">
						Create the <code class="literal">/etc/systemd/system/httpd.service.d/override.conf</code> file with the following content:
					</p><pre class="screen">[Service]
ExecStart=
ExecStart=/usr/sbin/ip vrf exec <span class="emphasis"><em>vrf0</em></span> /usr/sbin/httpd $OPTIONS -DFOREGROUND</pre><p class="simpara">
						To override the <code class="literal">ExecStart</code> parameter, you first need to unset it and then set it to the new value as shown.
					</p></li><li class="listitem"><p class="simpara">
						Reload systemd.
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl daemon-reload</strong></span></pre></li><li class="listitem"><p class="simpara">
						Restart the <code class="literal">httpd</code> service.
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl restart httpd</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the process IDs (PID) of <code class="literal">httpd</code> processes:
					</p><pre class="literallayout"># <span class="strong strong"><strong>pidof -c httpd</strong></span>
1904 ...</pre></li><li class="listitem"><p class="simpara">
						Display the VRF association for the PIDs, for example:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip vrf identify 1904</strong></span>
vrf0</pre></li><li class="listitem"><p class="simpara">
						Display all PIDs associated with the <code class="literal">vrf0</code> device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip vrf pids vrf0</strong></span>
1904  httpd
...</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">ip-vrf(8)</code> man page on your system
					</li></ul></div></section></section><section class="chapter" id="configuring-ethtool-settings-in-networkmanager-connection-profiles_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 30. Configuring ethtool settings in NetworkManager connection profiles</h2></div></div></div><p class="_abstract _abstract">
			NetworkManager can configure certain network driver and hardware settings persistently. Compared to using the <code class="literal">ethtool</code> utility to manage these settings, this has the benefit of not losing the settings after a reboot.
		</p><p>
			You can set the following <code class="literal">ethtool</code> settings in NetworkManager connection profiles:
		</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Offload features</span></dt><dd>
						Network interface controllers can use the TCP offload engine (TOE) to offload processing certain operations to the network controller. This improves the network throughput.
					</dd><dt><span class="term">Interrupt coalesce settings</span></dt><dd>
						By using interrupt coalescing, the system collects network packets and generates a single interrupt for multiple packets. This increases the amount of data sent to the kernel with one hardware interrupt, which reduces the interrupt load, and maximizes the throughput.
					</dd><dt><span class="term">Ring buffers</span></dt><dd>
						These buffers store incoming and outgoing network packets. You can increase the ring buffer sizes to reduce a high packet drop rate.
					</dd><dt><span class="term">Channel settings</span></dt><dd><p class="simpara">
						A network interface manages its associated number of channels along with hardware settings and network drivers. All devices associated with a network interface communicate with each other through interrupt requests (IRQ). Each device queue holds pending IRQ and communicates with each other over a data line known as channel. Types of queues are associated with specific channel types. These channel types include:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">rx</code> for receiving queues
							</li><li class="listitem">
								<code class="literal">tx</code> for transmit queues
							</li><li class="listitem">
								<code class="literal">other</code> for link interrupts or single root input/output virtualization (SR-IOV) coordination
							</li><li class="listitem">
								<code class="literal">combined</code> for hardware capacity-based multipurpose channels
							</li></ul></div></dd></dl></div><section class="section" id="configuring-an-ethtool-offload-feature-by-using-nmcli_configuring-ethtool-settings-in-networkmanager-connection-profiles"><div class="titlepage"><div><div><h3 class="title">30.1. Configuring an ethtool offload feature by using <code class="literal">nmcli</code></h3></div></div></div><p class="_abstract _abstract">
				You can use NetworkManager to enable and disable <code class="literal">ethtool</code> offload features in a connection profile.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						For example, to enable the RX offload feature and disable TX offload in the <code class="literal">enp1s0</code> connection profile, enter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli con modify <span class="emphasis"><em>enp1s0</em></span> ethtool.feature-rx on ethtool.feature-tx off</strong></span></pre><p class="simpara">
						This command explicitly enables RX offload and disables TX offload.
					</p></li><li class="listitem"><p class="simpara">
						To remove the setting of an offload feature that you previously enabled or disabled, set the feature’s parameter to a null value. For example, to remove the configuration for TX offload, enter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli con modify <span class="emphasis"><em>enp1s0</em></span> ethtool.feature-tx ""</strong></span></pre></li><li class="listitem"><p class="simpara">
						Reactivate the network profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>enp1s0</em></span></strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Use the <code class="literal">ethtool -k</code> command to display the current offload features of a network device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ethtool -k <span class="emphasis"><em>network_device</em></span></strong></span></pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nm-settings-nmcli(5)</code> man page on your system
					</li></ul></div></section><section class="section" id="proc_configuring-an-ethtool-offload-feature-by-using-the-network-rhel-system-role_configuring-ethtool-settings-in-networkmanager-connection-profiles"><div class="titlepage"><div><div><h3 class="title">30.2. Configuring an <code class="literal">ethtool</code> offload feature by using the <code class="literal">network</code> RHEL system role</h3></div></div></div><p class="_abstract _abstract">
				Network interface controllers can use the TCP offload engine (TOE) to offload processing certain operations to the network controller. This improves the network throughput. You configure offload features in the connection profile of the network interface. By using Ansible and the <code class="literal">network</code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.
			</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					You cannot use the <code class="literal">network</code> RHEL system role to update only specific values in an existing connection profile. The role ensures that a connection profile exactly matches the settings in a playbook. If a connection profile with the same name already exists, the role applies the settings from the playbook and resets all other settings in the profile to their defaults. To prevent resetting values, always specify the whole configuration of the network connection profile in the playbook, including the settings that you do not want to change.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles">You have prepared the control node and the managed nodes</a>
					</li><li class="listitem">
						You are logged in to the control node as a user who can run playbooks on the managed nodes.
					</li><li class="listitem">
						The account you use to connect to the managed nodes has <code class="literal">sudo</code> permissions on them.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a playbook file, for example <code class="literal">~/playbook.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
- name: Configure the network
  hosts: managed-node-01.example.com
  tasks:
    - name: Ethernet connection profile with dynamic IP address settings and offload features
      ansible.builtin.include_role:
        name: rhel-system-roles.network
      vars:
        network_connections:
          - name: enp1s0
            type: ethernet
            autoconnect: yes
            ip:
              dhcp4: yes
              auto6: yes
            <span class="strong strong"><strong>ethtool:</strong></span>
              <span class="strong strong"><strong>features:</strong></span>
                <span class="strong strong"><strong>gro: no</strong></span>
                <span class="strong strong"><strong>gso: yes</strong></span>
                <span class="strong strong"><strong>tx_sctp_segmentation: no</strong></span>
            state: up</pre><p class="simpara">
						The settings specified in the example playbook include the following:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">gro: no</code></span></dt><dd>
									Disables Generic receive offload (GRO).
								</dd><dt><span class="term"><code class="literal">gso: yes</code></span></dt><dd>
									Enables Generic segmentation offload (GSO).
								</dd><dt><span class="term"><code class="literal">tx_sctp_segmentation: no</code></span></dt><dd>
									Disables TX stream control transmission protocol (SCTP) segmentation.
								</dd></dl></div><p class="simpara">
						For details about all variables used in the playbook, see the <code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file on the control node.
					</p></li><li class="listitem"><p class="simpara">
						Validate the playbook syntax:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --syntax-check ~/playbook.yml</strong></span></pre><p class="simpara">
						Note that this command only validates the syntax and does not protect against a wrong but valid configuration.
					</p></li><li class="listitem"><p class="simpara">
						Run the playbook:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook ~/playbook.yml</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Query the Ansible facts of the managed node and verify the offload settings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ansible managed-node-01.example.com -m ansible.builtin.setup</strong></span>
...
        "ansible_enp1s0": {
            "active": true,
            "device": "enp1s0",
	    "features": {
	        ...
		"rx_gro_hw": "off,
	        ...
		"tx_gso_list": "on,
	        ...
		"tx_sctp_segmentation": "off",
		...
            }
...</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/rhel-system-roles/network/</code> directory
					</li></ul></div></section><section class="section" id="proc_configuring-an-ethtool-coalesce-settings-by-using-nmcli_configuring-ethtool-settings-in-networkmanager-connection-profiles"><div class="titlepage"><div><div><h3 class="title">30.3. Configuring an ethtool coalesce settings by using <code class="literal">nmcli</code></h3></div></div></div><p class="_abstract _abstract">
				You can use NetworkManager to set <code class="literal">ethtool</code> coalesce settings in connection profiles.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						For example, to set the maximum number of received packets to delay to <code class="literal">128</code> in the <code class="literal">enp1s0</code> connection profile, enter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>enp1s0</em></span> ethtool.coalesce-rx-frames <span class="emphasis"><em>128</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						To remove a coalesce setting, set it to a null value. For example, to remove the <code class="literal">ethtool.coalesce-rx-frames</code> setting, enter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>enp1s0</em></span> ethtool.coalesce-rx-frames ""</strong></span></pre></li><li class="listitem"><p class="simpara">
						To reactivate the network profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>enp1s0</em></span></strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Use the <code class="literal">ethtool -c</code> command to display the current offload features of a network device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ethtool -c <span class="emphasis"><em>network_device</em></span></strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nm-settings-nmcli(5)</code> man page on your system
					</li></ul></div></section><section class="section" id="proc_configuring-an-ethtool-coalesce-settings-by-using-the-network-rhel-system-role_configuring-ethtool-settings-in-networkmanager-connection-profiles"><div class="titlepage"><div><div><h3 class="title">30.4. Configuring an <code class="literal">ethtool</code> coalesce settings by using the <code class="literal">network</code> RHEL system role</h3></div></div></div><p class="_abstract _abstract">
				By using interrupt coalescing, the system collects network packets and generates a single interrupt for multiple packets. This increases the amount of data sent to the kernel with one hardware interrupt, which reduces the interrupt load, and maximizes the throughput. You configure coalesce settings in the connection profile of the network interface. By using Ansible and the <code class="literal">network</code> RHEL role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.
			</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					You cannot use the <code class="literal">network</code> RHEL system role to update only specific values in an existing connection profile. The role ensures that a connection profile exactly matches the settings in a playbook. If a connection profile with the same name already exists, the role applies the settings from the playbook and resets all other settings in the profile to their defaults. To prevent resetting values, always specify the whole configuration of the network connection profile in the playbook, including the settings that you do not want to change.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles">You have prepared the control node and the managed nodes</a>
					</li><li class="listitem">
						You are logged in to the control node as a user who can run playbooks on the managed nodes.
					</li><li class="listitem">
						The account you use to connect to the managed nodes has <code class="literal">sudo</code> permissions on them.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a playbook file, for example <code class="literal">~/playbook.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
- name: Configure the network
  hosts: managed-node-01.example.com
  tasks:
    - name: Ethernet connection profile with dynamic IP address settings and coalesce settings
      ansible.builtin.include_role:
        name: rhel-system-roles.network
      vars:
        network_connections:
          - name: enp1s0
            type: ethernet
            autoconnect: yes
            ip:
              dhcp4: yes
              auto6: yes
            <span class="strong strong"><strong>ethtool:</strong></span>
              <span class="strong strong"><strong>coalesce:</strong></span>
                <span class="strong strong"><strong>rx_frames: 128</strong></span>
                <span class="strong strong"><strong>tx_frames: 128</strong></span>
            state: up</pre><p class="simpara">
						The settings specified in the example playbook include the following:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">rx_frames: <span class="emphasis"><em>&lt;value&gt;</em></span></code></span></dt><dd>
									Sets the number of RX frames.
								</dd><dt><span class="term"><code class="literal">gso: <span class="emphasis"><em>&lt;value&gt;</em></span></code></span></dt><dd>
									Sets the number of TX frames.
								</dd></dl></div><p class="simpara">
						For details about all variables used in the playbook, see the <code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file on the control node.
					</p></li><li class="listitem"><p class="simpara">
						Validate the playbook syntax:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --syntax-check ~/playbook.yml</strong></span></pre><p class="simpara">
						Note that this command only validates the syntax and does not protect against a wrong but valid configuration.
					</p></li><li class="listitem"><p class="simpara">
						Run the playbook:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook ~/playbook.yml</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Display the current offload features of the network device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ansible managed-node-01.example.com -m command -a 'ethtool -c enp1s0'</strong></span>
managed-node-01.example.com | CHANGED | rc=0 &gt;&gt;
...
rx-frames:	128
...
tx-frames:	128
...</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/rhel-system-roles/network/</code> directory
					</li></ul></div></section><section class="section" id="increasing-the-ring-buffers-to-reduce-a-high-packet-drop-rate_configuring-ethtool-settings-in-networkmanager-connection-profiles"><div class="titlepage"><div><div><h3 class="title">30.5. Increasing the ring buffer size to reduce a high packet drop rate by using <code class="literal">nmcli</code></h3></div></div></div><p class="_abstract _abstract">
				Increase the size of an Ethernet device’s ring buffers if the packet drop rate causes applications to report a loss of data, timeouts, or other issues.
			</p><p>
				Receive ring buffers are shared between the device driver and network interface controller (NIC). The card assigns a transmit (TX) and receive (RX) ring buffer. As the name implies, the ring buffer is a circular buffer where an overflow overwrites existing data. There are two ways to move data from the NIC to the kernel, hardware interrupts and software interrupts, also called SoftIRQs.
			</p><p>
				The kernel uses the RX ring buffer to store incoming packets until the device driver can process them. The device driver drains the RX ring, typically by using SoftIRQs, which puts the incoming packets into a kernel data structure called an <code class="literal">sk_buff</code> or <code class="literal">skb</code> to begin its journey through the kernel and up to the application that owns the relevant socket.
			</p><p>
				The kernel uses the TX ring buffer to hold outgoing packets which should be sent to the network. These ring buffers reside at the bottom of the stack and are a crucial point at which packet drop can occur, which in turn will adversely affect network performance.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the packet drop statistics of the interface:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ethtool -S <span class="emphasis"><em>enp1s0</em></span></strong></span>
    ...
    rx_queue_0_drops: <span class="emphasis"><em>97326</em></span>
    rx_queue_1_drops: <span class="emphasis"><em>63783</em></span>
    ...</pre><p class="simpara">
						Note that the output of the command depends on the network card and the driver.
					</p><p class="simpara">
						High values in <code class="literal">discard</code> or <code class="literal">drop</code> counters indicate that the available buffer fills up faster than the kernel can process the packets. Increasing the ring buffers can help to avoid such loss.
					</p></li><li class="listitem"><p class="simpara">
						Display the maximum ring buffer sizes:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ethtool -g <span class="emphasis"><em>enp1s0</em></span></strong></span>
 Ring parameters for <span class="emphasis"><em>enp1s0</em></span>:
 Pre-set maximums:
 RX:             <span class="emphasis"><em>4096</em></span>
 RX Mini:        <span class="emphasis"><em>0</em></span>
 RX Jumbo:       <span class="emphasis"><em>16320</em></span>
 TX:             <span class="emphasis"><em>4096</em></span>
 Current hardware settings:
 RX:             <span class="emphasis"><em>255</em></span>
 RX Mini:        <span class="emphasis"><em>0</em></span>
 RX Jumbo:       <span class="emphasis"><em>0</em></span>
 TX:             <span class="emphasis"><em>255</em></span></pre><p class="simpara">
						If the values in the <code class="literal">Pre-set maximums</code> section are higher than in the <code class="literal">Current hardware settings</code> section, you can change the settings in the next steps.
					</p></li><li class="listitem"><p class="simpara">
						Identify the NetworkManager connection profile that uses the interface:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection show</strong></span>
NAME                UUID                                  TYPE      DEVICE
<span class="emphasis"><em>Example-Connection</em></span>  <span class="emphasis"><em>a5eb6490-cc20-3668-81f8-0314a27f3f75</em></span>  ethernet  <span class="emphasis"><em>enp1s0</em></span></pre></li><li class="listitem"><p class="simpara">
						Update the connection profile, and increase the ring buffers:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To increase the RX ring buffer, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>Example-Connection</em></span> ethtool.ring-rx <span class="emphasis"><em>4096</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
								To increase the TX ring buffer, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>Example-Connection</em></span> ethtool.ring-tx <span class="emphasis"><em>4096</em></span></strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Reload the NetworkManager connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>Example-Connection</em></span></strong></span></pre><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							Depending on the driver your NIC uses, changing in the ring buffer can shortly interrupt the network connection.
						</p></div></rh-alert></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/2073223">ifconfig and ip commands report packet drops</a> (Red Hat Knowledgebase)
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/742043">Should I be concerned about a 0.05% packet drop rate?</a> (Red Hat Knowledgebase)
					</li><li class="listitem">
						<code class="literal">ethtool(8)</code> man page on your system
					</li></ul></div></section><section class="section" id="proc_increasing-the-ring-buffer-size-to-reduce-a-high-packet-drop-rate-using-the-network-rhel-system-role_configuring-ethtool-settings-in-networkmanager-connection-profiles"><div class="titlepage"><div><div><h3 class="title">30.6. Increasing the ring buffer size to reduce a high packet drop rate by using the <code class="literal">network</code> RHEL system role</h3></div></div></div><p class="_abstract _abstract">
				Increase the size of an Ethernet device’s ring buffers if the packet drop rate causes applications to report a loss of data, timeouts, or other issues.
			</p><p>
				Ring buffers are circular buffers where an overflow overwrites existing data. The network card assigns a transmit (TX) and receive (RX) ring buffer. Receive ring buffers are shared between the device driver and the network interface controller (NIC). Data can move from NIC to the kernel through either hardware interrupts or software interrupts, also called SoftIRQs.
			</p><p>
				The kernel uses the RX ring buffer to store incoming packets until the device driver can process them. The device driver drains the RX ring, typically by using SoftIRQs, which puts the incoming packets into a kernel data structure called an <code class="literal">sk_buff</code> or <code class="literal">skb</code> to begin its journey through the kernel and up to the application that owns the relevant socket.
			</p><p>
				The kernel uses the TX ring buffer to hold outgoing packets which should be sent to the network. These ring buffers reside at the bottom of the stack and are a crucial point at which packet drop can occur, which in turn will adversely affect network performance.
			</p><p>
				You configure ring buffer settings in the NetworkManager connection profiles. By using Ansible and the <code class="literal">network</code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.
			</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					You cannot use the <code class="literal">network</code> RHEL system role to update only specific values in an existing connection profile. The role ensures that a connection profile exactly matches the settings in a playbook. If a connection profile with the same name already exists, the role applies the settings from the playbook and resets all other settings in the profile to their defaults. To prevent resetting values, always specify the whole configuration of the network connection profile in the playbook, including the settings that you do not want to change.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles">You have prepared the control node and the managed nodes</a>
					</li><li class="listitem">
						You are logged in to the control node as a user who can run playbooks on the managed nodes.
					</li><li class="listitem">
						The account you use to connect to the managed nodes has <code class="literal">sudo</code> permissions on them.
					</li><li class="listitem">
						You know the maximum ring buffer sizes that the device supports.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a playbook file, for example <code class="literal">~/playbook.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
- name: Configure the network
  hosts: managed-node-01.example.com
  tasks:
    - name: Ethernet connection profile with dynamic IP address setting and increased ring buffer sizes
      ansible.builtin.include_role:
        name: rhel-system-roles.network
      vars:
        network_connections:
          - name: enp1s0
            type: ethernet
            autoconnect: yes
            ip:
              dhcp4: yes
              auto6: yes
            <span class="strong strong"><strong>ethtool:</strong></span>
              <span class="strong strong"><strong>ring:</strong></span>
                <span class="strong strong"><strong>rx: 4096</strong></span>
                <span class="strong strong"><strong>tx: 4096</strong></span>
            state: up</pre><p class="simpara">
						The settings specified in the example playbook include the following:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">rx: <span class="emphasis"><em>&lt;value&gt;</em></span></code></span></dt><dd>
									Sets the maximum number of received ring buffer entries.
								</dd><dt><span class="term"><code class="literal">tx: <span class="emphasis"><em>&lt;value&gt;</em></span></code></span></dt><dd>
									Sets the maximum number of transmitted ring buffer entries.
								</dd></dl></div><p class="simpara">
						For details about all variables used in the playbook, see the <code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file on the control node.
					</p></li><li class="listitem"><p class="simpara">
						Validate the playbook syntax:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --syntax-check ~/playbook.yml</strong></span></pre><p class="simpara">
						Note that this command only validates the syntax and does not protect against a wrong but valid configuration.
					</p></li><li class="listitem"><p class="simpara">
						Run the playbook:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook ~/playbook.yml</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Display the maximum ring buffer sizes:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ansible managed-node-01.example.com -m command -a 'ethtool -g enp1s0'</strong></span>
managed-node-01.example.com | CHANGED | rc=0 &gt;&gt;
...
Current hardware settings:
RX:             4096
RX Mini:        0
RX Jumbo:       0
TX:             4096</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/rhel-system-roles/network/</code> directory
					</li></ul></div></section><section class="section" id="configuring-an-ethtool-channels-settings-by-using-nmcli_configuring-ethtool-settings-in-networkmanager-connection-profiles"><div class="titlepage"><div><div><h3 class="title">30.7. Configuring an ethtool channels settings by using <code class="literal">nmcli</code></h3></div></div></div><p class="_abstract _abstract">
				By using NetworkManager, you can manage network devices and connections. The <code class="literal">ethtool</code> utility manages the link speed and related settings of a network interface card. <code class="literal">ethtool</code> handles IRQ based communication with associated devices to manage related channels settings in connection profiles.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the channels associated with a network device:
					</p><pre class="screen"># <span class="strong strong"><strong>ethtool --show-channels <span class="emphasis"><em>enp1s0</em></span></strong></span>
Channel parameters for <span class="emphasis"><em>enp1s0</em></span>:
Pre-set maximums:
RX:		4
TX:		3
Other:	   10
Combined:  63

Current hardware settings:
RX:   	 1
TX:   	 1
Other:   1
Combined:  1</pre></li><li class="listitem"><p class="simpara">
						Update the channel settings of a network interface:
					</p><pre class="screen"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>enp1s0</em></span> ethtool.channels-rx <span class="emphasis"><em>4</em></span> ethtool.channels-tx <span class="emphasis"><em>3</em></span> ethtools.channels-other <span class="emphasis"><em>9</em></span> ethtool.channels-combined <span class="emphasis"><em>50</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Reactivate the network profile:
					</p><pre class="screen"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>enp1s0</em></span></strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Check the updated channel settings associated with the network device:
					</p><pre class="screen"># <span class="strong strong"><strong>ethtool --show-channels <span class="emphasis"><em>enp1s0</em></span></strong></span>
Channel parameters for <span class="emphasis"><em>enp1s0</em></span>:
Pre-set maximums:
RX:		4
TX:		3
Other:	  10
Combined: 63

Current hardware settings:
RX:   	 4
TX:   	 3
Other:   9
Combined:  50</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nmcli(5)</code> man page on your system
					</li></ul></div></section></section><section class="chapter" id="introduction-to-networkmanager-debugging_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 31. Introduction to NetworkManager Debugging</h2></div></div></div><p class="_abstract _abstract">
			Increasing the log levels for all or certain domains helps to log more details of the operations that NetworkManager performs. You can use this information to troubleshoot problems. NetworkManager provides different levels and domains to produce logging information. The <code class="literal">/etc/NetworkManager/NetworkManager.conf</code> file is the main configuration file for NetworkManager. The logs are stored in the journal.
		</p><section class="section" id="introduction-to-networkmanager-reapply-method_introduction-to-networkmanager-debugging"><div class="titlepage"><div><div><h3 class="title">31.1. Introduction to NetworkManager reapply method</h3></div></div></div><p>
				The <code class="literal">NetworkManager</code> service uses a profile to manage the connection settings of a device. Desktop Bus (D-Bus) API can create, modify, and delete these connection settings. For any changes in a profile, D-Bus API clones the existing settings to the modified settings of a connection. Despite cloning, changes do not apply to the modified settings. To make it effective, reactivate the existing settings of a connection or use the <code class="literal">reapply()</code> method.
			</p><p>
				The <code class="literal">reapply()</code> method has the following features:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Updating modified connection settings without deactivation or restart of a network interface.
					</li><li class="listitem">
						Removing pending changes from the modified connection settings. As <code class="literal">NetworkManager</code> does not revert the manual changes, you can reconfigure the device and revert external or manual parameters.
					</li><li class="listitem">
						Creating different modified connection settings than that of the existing connection settings.
					</li></ol></div><p>
				Also, <code class="literal">reapply()</code> method supports the following attributes:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">bridge.ageing-time</code>
					</li><li class="listitem">
						<code class="literal">bridge.forward-delay</code>
					</li><li class="listitem">
						<code class="literal">bridge.group-address</code>
					</li><li class="listitem">
						<code class="literal">bridge.group-forward-mask</code>
					</li><li class="listitem">
						<code class="literal">bridge.hello-time</code>
					</li><li class="listitem">
						<code class="literal">bridge.max-age</code>
					</li><li class="listitem">
						<code class="literal">bridge.multicast-hash-max</code>
					</li><li class="listitem">
						<code class="literal">bridge.multicast-last-member-count</code>
					</li><li class="listitem">
						<code class="literal">bridge.multicast-last-member-interval</code>
					</li><li class="listitem">
						<code class="literal">bridge.multicast-membership-interval</code>
					</li><li class="listitem">
						<code class="literal">bridge.multicast-querier</code>
					</li><li class="listitem">
						<code class="literal">bridge.multicast-querier-interval</code>
					</li><li class="listitem">
						<code class="literal">bridge.multicast-query-interval</code>
					</li><li class="listitem">
						<code class="literal">bridge.multicast-query-response-interval</code>
					</li><li class="listitem">
						<code class="literal">bridge.multicast-query-use-ifaddr</code>
					</li><li class="listitem">
						<code class="literal">bridge.multicast-router</code>
					</li><li class="listitem">
						<code class="literal">bridge.multicast-snooping</code>
					</li><li class="listitem">
						<code class="literal">bridge.multicast-startup-query-count</code>
					</li><li class="listitem">
						<code class="literal">bridge.multicast-startup-query-interval</code>
					</li><li class="listitem">
						<code class="literal">bridge.priority</code>
					</li><li class="listitem">
						<code class="literal">bridge.stp</code>
					</li><li class="listitem">
						<code class="literal">bridge.VLAN-filtering</code>
					</li><li class="listitem">
						<code class="literal">bridge.VLAN-protocol</code>
					</li><li class="listitem">
						<code class="literal">bridge.VLANs</code>
					</li><li class="listitem">
						<code class="literal">802-3-ethernet.accept-all-mac-addresses</code>
					</li><li class="listitem">
						<code class="literal">802-3-ethernet.cloned-mac-address</code>
					</li><li class="listitem">
						<code class="literal">IPv4.addresses</code>
					</li><li class="listitem">
						<code class="literal">IPv4.dhcp-client-id</code>
					</li><li class="listitem">
						<code class="literal">IPv4.dhcp-iaid</code>
					</li><li class="listitem">
						<code class="literal">IPv4.dhcp-timeout</code>
					</li><li class="listitem">
						<code class="literal">IPv4.DNS</code>
					</li><li class="listitem">
						<code class="literal">IPv4.DNS-priority</code>
					</li><li class="listitem">
						<code class="literal">IPv4.DNS-search</code>
					</li><li class="listitem">
						<code class="literal">IPv4.gateway</code>
					</li><li class="listitem">
						<code class="literal">IPv4.ignore-auto-DNS</code>
					</li><li class="listitem">
						<code class="literal">IPv4.ignore-auto-routes</code>
					</li><li class="listitem">
						<code class="literal">IPv4.may-fail</code>
					</li><li class="listitem">
						<code class="literal">IPv4.method</code>
					</li><li class="listitem">
						<code class="literal">IPv4.never-default</code>
					</li><li class="listitem">
						<code class="literal">IPv4.route-table</code>
					</li><li class="listitem">
						<code class="literal">IPv4.routes</code>
					</li><li class="listitem">
						<code class="literal">IPv4.routing-rules</code>
					</li><li class="listitem">
						<code class="literal">IPv6.addr-gen-mode</code>
					</li><li class="listitem">
						<code class="literal">IPv6.addresses</code>
					</li><li class="listitem">
						<code class="literal">IPv6.dhcp-duid</code>
					</li><li class="listitem">
						<code class="literal">IPv6.dhcp-iaid</code>
					</li><li class="listitem">
						<code class="literal">IPv6.dhcp-timeout</code>
					</li><li class="listitem">
						<code class="literal">IPv6.DNS</code>
					</li><li class="listitem">
						<code class="literal">IPv6.DNS-priority</code>
					</li><li class="listitem">
						<code class="literal">IPv6.DNS-search</code>
					</li><li class="listitem">
						<code class="literal">IPv6.gateway</code>
					</li><li class="listitem">
						<code class="literal">IPv6.ignore-auto-DNS</code>
					</li><li class="listitem">
						<code class="literal">IPv6.may-fail</code>
					</li><li class="listitem">
						<code class="literal">IPv6.method</code>
					</li><li class="listitem">
						<code class="literal">IPv6.never-default</code>
					</li><li class="listitem">
						<code class="literal">IPv6.ra-timeout</code>
					</li><li class="listitem">
						<code class="literal">IPv6.route-metric</code>
					</li><li class="listitem">
						<code class="literal">IPv6.route-table</code>
					</li><li class="listitem">
						<code class="literal">IPv6.routes</code>
					</li><li class="listitem">
						<code class="literal">IPv6.routing-rules</code>
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nm-settings-nmcli(5)</code> man page on your system
					</li></ul></div></section><section class="section" id="setting-the-networkmanager-log-level_introduction-to-networkmanager-debugging"><div class="titlepage"><div><div><h3 class="title">31.2. Setting the NetworkManager log level</h3></div></div></div><p class="_abstract _abstract">
				By default, all the log domains are set to record the <code class="literal">INFO</code> log level. Disable rate-limiting before collecting debug logs. With rate-limiting, <code class="literal">systemd-journald</code> drops messages if there are too many of them in a short time. This can occur when the log level is <code class="literal">TRACE</code>.
			</p><p>
				This procedure disables rate-limiting and enables recording debug logs for the all (ALL) domains.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To disable rate-limiting, edit the <code class="literal">/etc/systemd/journald.conf</code> file, uncomment the <code class="literal">RateLimitBurst</code> parameter in the <code class="literal">[Journal]</code> section, and set its value as <code class="literal">0</code>:
					</p><pre class="screen">RateLimitBurst=0</pre></li><li class="listitem"><p class="simpara">
						Restart the <code class="literal">systemd-journald</code> service.
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl restart systemd-journald</strong></span></pre></li><li class="listitem"><p class="simpara">
						Create the <code class="literal">/etc/NetworkManager/conf.d/95-nm-debug.conf</code> file with the following content:
					</p><pre class="screen">[logging]
domains=ALL:TRACE</pre><p class="simpara">
						The <code class="literal">domains</code> parameter can contain multiple comma-separated <code class="literal">domain:level</code> pairs.
					</p></li><li class="listitem"><p class="simpara">
						Restart the NetworkManager service.
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl restart NetworkManager</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Query the <code class="literal">systemd</code> journal to display the journal entries of the <code class="literal">NetworkManager</code> unit:
					</p><pre class="literallayout"># <span class="strong strong"><strong>journalctl -u NetworkManager</strong></span>
...
Jun 30 15:24:32 server NetworkManager[164187]: &lt;debug&gt; [1656595472.4939] active-connection[0x5565143c80a0]: update activation type from assume to managed
Jun 30 15:24:32 server NetworkManager[164187]: &lt;trace&gt; [1656595472.4939] device[55b33c3bdb72840c] (enp1s0): sys-iface-state: assume -&gt; managed
Jun 30 15:24:32 server NetworkManager[164187]: &lt;trace&gt; [1656595472.4939] l3cfg[4281fdf43e356454,ifindex=3]: commit type register (type "update", source "device", existing a369f23014b9ede3) -&gt; a369f23014b9ede3
Jun 30 15:24:32 server NetworkManager[164187]: &lt;info&gt;  [1656595472.4940] manager: NetworkManager state is now CONNECTED_SITE
...</pre></li></ul></div></section><section class="section" id="temporarily-setting-log-levels-at-run-time-using-nmcli_introduction-to-networkmanager-debugging"><div class="titlepage"><div><div><h3 class="title">31.3. Temporarily setting log levels at run time using <code class="literal">nmcli</code></h3></div></div></div><p class="_abstract _abstract">
				You can change the log level at run time using <code class="literal">nmcli</code>.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: Display the current logging settings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli general logging</strong></span>
  LEVEL  DOMAINS
  INFO   PLATFORM,RFKILL,ETHER,WIFI,BT,MB,DHCP4,DHCP6,PPP,WIFI_SCAN,IP4,IP6,A
UTOIP4,DNS,VPN,SHARING,SUPPLICANT,AGENTS,SETTINGS,SUSPEND,CORE,DEVICE,OLPC,
WIMAX,INFINIBAND,FIREWALL,ADSL,BOND,VLAN,BRIDGE,DBUS_PROPS,TEAM,CONCHECK,DC
B,DISPATCH</pre></li><li class="listitem"><p class="simpara">
						To modify the logging level and domains, use the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To set the log level for all domains to the same <code class="literal">LEVEL</code>, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli general logging level <span class="emphasis"><em>LEVEL</em></span> domains <span class="emphasis"><em>ALL</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
								To change the level for specific domains, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli general logging level <span class="emphasis"><em>LEVEL</em></span> domains <span class="emphasis"><em>DOMAINS</em></span></strong></span></pre><p class="simpara">
								Note that updating the logging level using this command disables logging for all the other domains.
							</p></li><li class="listitem"><p class="simpara">
								To change the level of specific domains and preserve the level of all other domains, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli general logging level KEEP domains <span class="emphasis"><em>DOMAIN:LEVEL</em></span>,<span class="emphasis"><em>DOMAIN:LEVEL</em></span></strong></span></pre></li></ul></div></li></ol></div></section><section class="section" id="viewing-networkmanager-logs_introduction-to-networkmanager-debugging"><div class="titlepage"><div><div><h3 class="title">31.4. Viewing NetworkManager logs</h3></div></div></div><p class="_abstract _abstract">
				You can view the NetworkManager logs for troubleshooting.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To view the logs, enter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>journalctl -u NetworkManager -b</strong></span></pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">NetworkManager.conf(5)</code> and <code class="literal">journalctl(1)</code> man pages on your system
					</li></ul></div></section><section class="section" id="debugging-levels-and-domains_introduction-to-networkmanager-debugging"><div class="titlepage"><div><div><h3 class="title">31.5. Debugging levels and domains</h3></div></div></div><p class="_abstract _abstract">
				You can use the <code class="literal">levels</code> and <code class="literal">domains</code> parameters to manage the debugging for NetworkManager. The level defines the verbosity level, whereas the domains define the category of the messages to record the logs with given severity (<code class="literal">level</code>).
			</p><rh-table><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"><!--Empty--><col style="width: 75%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140053157209936" scope="col">Log levels</th><th align="left" valign="top" id="idm140053157208848" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140053157209936"> <p>
								<code class="literal">OFF</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053157208848"> <p>
								Does not log any messages about NetworkManager
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053157209936"> <p>
								<code class="literal">ERR</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053157208848"> <p>
								Logs only critical errors
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053157209936"> <p>
								<code class="literal">WARN</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053157208848"> <p>
								Logs warnings that can reflect the operation
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053157209936"> <p>
								<code class="literal">INFO</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053157208848"> <p>
								Logs various informational messages that are useful for tracking state and operations
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053157209936"> <p>
								<code class="literal">DEBUG</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053157208848"> <p>
								Enables verbose logging for debugging purposes
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053157209936"> <p>
								<code class="literal">TRACE</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053157208848"> <p>
								Enables more verbose logging than the <code class="literal">DEBUG</code> level
							</p>
							 </td></tr></tbody></table></rh-table><p>
				Note that subsequent levels log all messages from earlier levels. For example, setting the log level to <code class="literal">INFO</code> also logs messages contained in the <code class="literal">ERR</code> and <code class="literal">WARN</code> log level.
			</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">NetworkManager.conf(5)</code> man page on your system
					</li></ul></div></section></section><section class="chapter" id="assembly_using-lldp-to-debug-network-configuration-problems_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 32. Using LLDP to debug network configuration problems</h2></div></div></div><p>
			You can use the Link Layer Discovery Protocol (LLDP) to debug network configuration problems in the topology. This means that, LLDP can report configuration inconsistencies with other hosts or routers and switches.
		</p><section class="section" id="proc_debugging-an-incorrect-vlan-configuration-using-lldp-information_assembly_using-lldp-to-debug-network-configuration-problems"><div class="titlepage"><div><div><h3 class="title">32.1. Debugging an incorrect VLAN configuration using LLDP information</h3></div></div></div><p>
				If you configured a switch port to use a certain VLAN and a host does not receive these VLAN packets, you can use the Link Layer Discovery Protocol (LLDP) to debug the problem. Perform this procedure on the host that does not receive the packets.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">nmstate</code> package is installed.
					</li><li class="listitem">
						The switch supports LLDP.
					</li><li class="listitem">
						LLDP is enabled on neighbor devices.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create the <code class="literal">~/enable-LLDP-enp1s0.yml</code> file with the following content:
					</p><pre class="programlisting language-yaml">interfaces:
  - name: <span class="emphasis"><em>enp1s0</em></span>
    type: ethernet
    lldp:
      enabled: true</pre></li><li class="listitem"><p class="simpara">
						Use the <code class="literal">~/enable-LLDP-enp1s0.yml</code> file to enable LLDP on interface <code class="literal">enp1s0</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmstatectl apply ~/enable-LLDP-enp1s0.yml</strong></span></pre></li><li class="listitem"><p class="simpara">
						Display the LLDP information:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmstatectl show enp1s0</strong></span>
- name: enp1s0
  type: ethernet
  state: up
  ipv4:
    enabled: false
    dhcp: false
  ipv6:
    enabled: false
    autoconf: false
    dhcp: false
  lldp:
    enabled: true
    neighbors:
    - - type: 5
        system-name: Summit300-48
      - type: 6
        system-description: Summit300-48 - Version 7.4e.1 (Build 5)
          05/27/05 04:53:11
      - type: 7
        system-capabilities:
        - MAC Bridge component
        - Router
      - type: 1
        _description: MAC address
        chassis-id: 00:01:30:F9:AD:A0
        chassis-id-type: 4
      - type: 2
        _description: Interface name
        port-id: 1/1
        port-id-type: 5
      - type: 127
        ieee-802-1-vlans:
        - name: v2-0488-03-0505
          vid: 488
        oui: 00:80:c2
        subtype: 3
      - type: 127
        ieee-802-3-mac-phy-conf:
          autoneg: true
          operational-mau-type: 16
          pmd-autoneg-cap: 27648
        oui: 00:12:0f
        subtype: 1
      - type: 127
        ieee-802-1-ppvids:
        - 0
        oui: 00:80:c2
        subtype: 2
      - type: 8
        management-addresses:
        - address: 00:01:30:F9:AD:A0
          address-subtype: MAC
          interface-number: 1001
          interface-number-subtype: 2
      - type: 127
        ieee-802-3-max-frame-size: 1522
        oui: 00:12:0f
        subtype: 4
  mac-address: 82:75:BE:6F:8C:7A
  mtu: 1500</pre></li><li class="listitem"><p class="simpara">
						Verify the output to ensure that the settings match your expected configuration. For example, the LLDP information of the interface connected to the switch shows that the switch port this host is connected to uses VLAN ID <code class="literal">448</code>:
					</p><pre class="programlisting language-yaml">- type: 127
        ieee-802-1-vlans:
        - name: v2-0488-03-0505
          vid: 488</pre><p class="simpara">
						If the network configuration of the <code class="literal">enp1s0</code> interface uses a different VLAN ID, change it accordingly.
					</p></li></ol></div><div class="_additional-resources _additional-resources"><p class="title"><strong>Additional resources</strong></p><p>
					<a class="link" href="#configuring-vlan-tagging_configuring-and-managing-networking" title="Chapter 5. Configuring VLAN tagging">Configuring VLAN tagging</a>
				</p></div></section></section><section class="chapter" id="linux-traffic-control_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 33. Linux traffic control</h2></div></div></div><p class="_abstract _abstract">
			Linux offers tools for managing and manipulating the transmission of packets. The Linux Traffic Control (TC) subsystem helps in policing, classifying, shaping, and scheduling network traffic. TC also mangles the packet content during classification by using filters and actions. The TC subsystem achieves this by using queuing disciplines (<code class="literal">qdisc</code>), a fundamental element of the TC architecture.
		</p><p>
			The scheduling mechanism arranges or rearranges the packets before they enter or exit different queues. The most common scheduler is the First-In-First-Out (FIFO) scheduler. You can do the <code class="literal">qdiscs</code> operations temporarily using the <code class="literal">tc</code> utility or permanently using NetworkManager.
		</p><p>
			In Red Hat Enterprise Linux, you can configure default queueing disciplines in various ways to manage the traffic on a network interface.
		</p><section class="section" id="overview-of-queuing-disciplines_linux-traffic-control"><div class="titlepage"><div><div><h3 class="title">33.1. Overview of queuing disciplines</h3></div></div></div><p class="_abstract _abstract">
				Queuing disciplines (<code class="literal">qdiscs</code>) help with queuing up and, later, scheduling of traffic transmission by a network interface. A <code class="literal">qdisc</code> has two operations;
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						enqueue requests so that a packet can be queued up for later transmission and
					</li><li class="listitem">
						dequeue requests so that one of the queued-up packets can be chosen for immediate transmission.
					</li></ul></div><p>
				Every <code class="literal">qdisc</code> has a 16-bit hexadecimal identification number called a <code class="literal">handle</code>, with an attached colon, such as <code class="literal">1:</code> or <code class="literal">abcd:</code>. This number is called the <code class="literal">qdisc</code> major number. If a <code class="literal">qdisc</code> has classes, then the identifiers are formed as a pair of two numbers with the major number before the minor, <code class="literal">&lt;major&gt;:&lt;minor&gt;</code>, for example <code class="literal">abcd:1</code>. The numbering scheme for the minor numbers depends on the <code class="literal">qdisc</code> type. Sometimes the numbering is systematic, where the first-class has the ID <code class="literal">&lt;major&gt;:1</code>, the second one <code class="literal">&lt;major&gt;:2</code>, and so on. Some <code class="literal">qdiscs</code> allow the user to set class minor numbers arbitrarily when creating the class.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Classful <code class="literal">qdiscs</code></span></dt><dd><p class="simpara">
							Different types of <code class="literal">qdiscs</code> exist and help in the transfer of packets to and from a networking interface. You can configure <code class="literal">qdiscs</code> with root, parent, or child classes. The point where children can be attached are called classes. Classes in <code class="literal">qdisc</code> are flexible and can always contain either multiple children classes or a single child, <code class="literal">qdisc</code>. There is no prohibition against a class containing a classful <code class="literal">qdisc</code> itself, this facilitates complex traffic control scenarios.
						</p><p class="simpara">
							Classful <code class="literal">qdiscs</code> do not store any packets themselves. Instead, they enqueue and dequeue requests down to one of their children according to criteria specific to the <code class="literal">qdisc</code>. Eventually, this recursive packet passing ends up where the packets are stored (or picked up from in the case of dequeuing).
						</p></dd><dt><span class="term">Classless <code class="literal">qdiscs</code></span></dt><dd>
							Some <code class="literal">qdiscs</code> contain no child classes and they are called classless <code class="literal">qdiscs</code>. Classless <code class="literal">qdiscs</code> require less customization compared to classful <code class="literal">qdiscs</code>. It is usually enough to attach them to an interface.
						</dd></dl></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">tc(8)</code> and <code class="literal">tc-actions(8)</code> man pages on your system
					</li></ul></div></section><section class="section" id="introduction-to-connection-tracking_linux-traffic-control"><div class="titlepage"><div><div><h3 class="title">33.2. Introduction to connection tracking</h3></div></div></div><p>
				At a firewall, the <code class="literal">Netfilter</code> framework filters packets from an external network. After a packet arrives, <code class="literal">Netfilter</code> assigns a connection tracking entry. Connection tracking is a Linux kernel networking feature for logical networks that tracks connections and identifies packet flow in those connections. This feature filters and analyzes every packet, sets up the connection tracking table to store connection status, and updates the connection status based on identified packets. For example, in the case of FTP connection, <code class="literal">Netfilter</code> assigns a connection tracking entry to ensure all packets of FTP connection work in the same manner. The connection tracking entry stores a <code class="literal">Netfilter</code> mark and tracks the connection state information in the memory table in which a new packet tuple maps with an existing entry. If the packet tuple does not map with an existing entry, the packet adds a new connection tracking entry that groups packets of the same connection.
			</p><p>
				You can control and analyze traffic on the network interface. The <code class="literal">tc</code> traffic controller utility uses the <code class="literal">qdisc</code> discipline to configure the packet scheduler in the network. The <code class="literal">qdisc</code> kernel-configured queuing discipline enqueues packets to the interface. By using <code class="literal">qdisc</code>, Kernel catches all the traffic before a network interface transmits it. Also, to limit the bandwidth rate of packets belonging to the same connection, use the <code class="literal">tc qdisc</code> command.
			</p><p>
				To retrieve data from connection tracking marks into various fields, use the <code class="literal">tc</code> utility with the <code class="literal">ctinfo</code> module and the <code class="literal">connmark</code> functionality. For storing packet mark information, the <code class="literal">ctinfo</code> module copies the <code class="literal">Netfilter</code> mark and the connection state information into a socket buffer (<code class="literal">skb</code>) mark metadata field.
			</p><p>
				Transmitting a packet over a physical medium removes all the metadata of a packet. Before the packet loses its metadata, the <code class="literal">ctinfo</code> module maps and copies the <code class="literal">Netfilter</code> mark value to a specific value of the Diffserv code point (DSCP) in the packet’s <code class="literal">IP</code> field.
			</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">tc(8)</code> and <code class="literal">tc-ctinfo(8)</code> man pages on your system
					</li></ul></div></section><section class="section" id="inspecting-qdisc-of-a-network-interface-using-the-tc-utility_linux-traffic-control"><div class="titlepage"><div><div><h3 class="title">33.3. Inspecting qdiscs of a network interface using the tc utility</h3></div></div></div><p class="_abstract _abstract">
				By default, Red Hat Enterprise Linux systems use <code class="literal">fq_codel</code> <code class="literal">qdisc</code>. You can inspect the <code class="literal">qdisc</code> counters using the <code class="literal">tc</code> utility.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: View your current <code class="literal">qdisc</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>tc qdisc show dev <span class="emphasis"><em>enp0s1</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Inspect the current <code class="literal">qdisc</code> counters:
					</p><pre class="literallayout"># <span class="strong strong"><strong>tc -s qdisc show dev <span class="emphasis"><em>enp0s1</em></span></strong></span>
qdisc fq_codel 0: root refcnt 2 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms memory_limit 32Mb ecn
Sent 1008193 bytes 5559 pkt (dropped 233, overlimits 55 requeues 77)
backlog 0b 0p requeues 0</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">dropped</code> - the number of times a packet is dropped because all queues are full
							</li><li class="listitem">
								<code class="literal">overlimits</code> - the number of times the configured link capacity is filled
							</li><li class="listitem">
								<code class="literal">sent</code> - the number of dequeues
							</li></ul></div></li></ol></div></section><section class="section" id="updating-the-default-qdisc_linux-traffic-control"><div class="titlepage"><div><div><h3 class="title">33.4. Updating the default qdisc</h3></div></div></div><p class="_abstract _abstract">
				If you observe networking packet losses with the current <code class="literal">qdisc</code>, you can change the <code class="literal">qdisc</code> based on your network-requirements.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						View the current default <code class="literal">qdisc</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>sysctl -a | grep qdisc</strong></span>
net.core.default_qdisc = fq_codel</pre></li><li class="listitem"><p class="simpara">
						View the <code class="literal">qdisc</code> of current Ethernet connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>tc -s qdisc show dev <span class="emphasis"><em>enp0s1</em></span></strong></span>
qdisc fq_codel 0: root refcnt 2 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms memory_limit 32Mb ecn
Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)
backlog 0b 0p requeues 0
maxpacket 0 drop_overlimit 0 new_flow_count 0 ecn_mark 0
new_flows_len 0 old_flows_len 0</pre></li><li class="listitem"><p class="simpara">
						Update the existing <code class="literal">qdisc</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>sysctl -w net.core.default_qdisc=pfifo_fast</strong></span></pre></li><li class="listitem"><p class="simpara">
						To apply the changes, reload the network driver:
					</p><pre class="literallayout"># <span class="strong strong"><strong>modprobe -r <span class="emphasis"><em>NETWORKDRIVERNAME</em></span></strong></span>
# <span class="strong strong"><strong>modprobe <span class="emphasis"><em>NETWORKDRIVERNAME</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Start the network interface:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip link set <span class="emphasis"><em>enp0s1</em></span> up</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						View the <code class="literal">qdisc</code> of the Ethernet connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>tc -s qdisc show dev <span class="emphasis"><em>enp0s1</em></span></strong></span>
qdisc <span class="emphasis"><em>pfifo_fast</em></span> 0: root refcnt 2 bands 3 priomap  1 2 2 2 1 2 0 0 1 1 1 1 1 1 1 1
 Sent 373186 bytes 5333 pkt (dropped 0, overlimits 0 requeues 0)
 backlog 0b 0p requeues 0
....</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/2587">How to set <code class="literal">sysctl</code> variables on Red Hat Enterprise Linux</a> (Red Hat Knowledgebase)
					</li></ul></div></section><section class="section" id="temporarily-setting-the-current-qdisc-of-a-network-interface-using-the-tc-utility_linux-traffic-control"><div class="titlepage"><div><div><h3 class="title">33.5. Temporarily setting the current qdisc of a network interface using the tc utility</h3></div></div></div><p class="_abstract _abstract">
				You can update the current <code class="literal">qdisc</code> without changing the default one.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: View the current <code class="literal">qdisc</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>tc -s qdisc show dev <span class="emphasis"><em>enp0s1</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Update the current <code class="literal">qdisc</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>tc qdisc replace dev <span class="emphasis"><em>enp0s1</em></span> root <span class="emphasis"><em>htb</em></span></strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						View the updated current <code class="literal">qdisc</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>tc -s qdisc show dev <span class="emphasis"><em>enp0s1</em></span></strong></span>
qdisc htb 8001: root refcnt 2 r2q 10 default 0 direct_packets_stat 0 direct_qlen 1000
Sent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)
backlog 0b 0p requeues 0</pre></li></ul></div></section><section class="section" id="proc_permanently-setting-the-current-qdisc-of-a-network-interface-using-networkmanager_linux-traffic-control"><div class="titlepage"><div><div><h3 class="title">33.6. Permanently setting the current qdisc of a network interface using NetworkManager</h3></div></div></div><p class="_abstract _abstract">
				You can update the current <code class="literal">qdisc</code> value of a NetworkManager connection.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: View the current <code class="literal">qdisc</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>tc qdisc show dev <span class="emphasis"><em>enp0s1</em></span></strong></span>
  qdisc fq_codel 0: root refcnt 2</pre></li><li class="listitem"><p class="simpara">
						Update the current <code class="literal">qdisc</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>enp0s1</em></span> tc.qdiscs 'root pfifo_fast'</strong></span></pre></li><li class="listitem"><p class="simpara">
						Optional: To add another <code class="literal">qdisc</code> over the existing <code class="literal">qdisc</code>, use the <code class="literal">+tc.qdisc</code> option:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>enp0s1</em></span> +tc.qdisc 'ingress handle ffff:'</strong></span></pre></li><li class="listitem"><p class="simpara">
						Activate the changes:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>enp0s1</em></span></strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						View current <code class="literal">qdisc</code> the network interface:
					</p><pre class="literallayout"># <span class="strong strong"><strong>tc qdisc show dev <span class="emphasis"><em>enp0s1</em></span></strong></span>
qdisc <span class="emphasis"><em>pfifo_fast</em></span> 8001: root refcnt 2 bands 3 priomap  1 2 2 2 1 2 0 0 1 1 1 1 1 1 1 1
qdisc ingress ffff: parent ffff:fff1 ----------------</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nm-settings(5)</code> man page on your system
					</li></ul></div></section><section class="section" id="configuring-the-rate-limiting-of-packets-by-using-the-tc-ctinfo-utility_linux-traffic-control"><div class="titlepage"><div><div><h3 class="title">33.7. Configuring the rate limiting of packets by using the tc-ctinfo utility</h3></div></div></div><p class="_abstract _abstract">
				You can limit network traffic and prevent the exhaustion of resources in the network by using rate limiting. With rate limiting, you can also reduce the load on servers by limiting repetitive packet requests in a specific time frame. In addition, you can manage bandwidth rate by configuring traffic control in the kernel with the <code class="literal">tc-ctinfo</code> utility.
			</p><p>
				The connection tracking entry stores the <code class="literal">Netfilter</code> mark and connection information. When a router forwards a packet from the firewall, the router either removes or modifies the connection tracking entry from the packet. The connection tracking information (<code class="literal">ctinfo</code>) module retrieves data from connection tracking marks into various fields. This kernel module preserves the <code class="literal">Netfilter</code> mark by copying it into socket buffer (<code class="literal">skb</code>) mark metadata field.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">iperf3</code> utility is installed on a server and a client.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Perform the following steps on the server:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Add a virtual link to the network interface:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip link add name ifb4eth0 numtxqueues 48 numrxqueues 48 type ifb</strong></span></pre><p class="simpara">
								This command has the following parameters:
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">name ifb4eth0</code> </span></dt><dd>
											Sets new virtual device interface.
										</dd><dt><span class="term"><code class="literal">numtxqueues 48</code> </span></dt><dd>
											Sets the number of transmit queues.
										</dd><dt><span class="term"><code class="literal">numrxqueues 48</code> </span></dt><dd>
											Sets the number of receive queues.
										</dd><dt><span class="term"><code class="literal">type ifb</code> </span></dt><dd>
											Sets the type of the new device.
										</dd></dl></div></li><li class="listitem"><p class="simpara">
								Change the state of the interface:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip link set dev ifb4eth0 up</strong></span></pre></li><li class="listitem"><p class="simpara">
								Add the <code class="literal">qdisc</code> attribute on the physical network interface and apply it to the incoming traffic:
							</p><pre class="literallayout"># <span class="strong strong"><strong>tc qdisc add dev enp1s0 handle ffff: ingress</strong></span></pre><p class="simpara">
								In the <code class="literal">handle ffff:</code> option, the <code class="literal">handle</code> parameter assigns the major number <code class="literal">ffff:</code> as a default value to a classful <code class="literal">qdisc</code> on the <code class="literal">enp1s0</code> physical network interface, where <code class="literal">qdisc</code> is a queueing discipline parameter to analyze traffic control.
							</p></li><li class="listitem"><p class="simpara">
								Add a filter on the physical interface of the <code class="literal">ip</code> protocol to classify packets:
							</p><pre class="literallayout"># <span class="strong strong"><strong>tc filter add dev enp1s0 parent ffff: protocol ip u32 match u32 0 0 action ctinfo cpmark 100 action mirred egress redirect dev ifb4eth0</strong></span></pre><p class="simpara">
								This command has the following attributes:
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">parent ffff:</code> </span></dt><dd>
											Sets major number <code class="literal">ffff:</code> for the parent <code class="literal">qdisc</code>.
										</dd><dt><span class="term"><code class="literal">u32 match u32 0 0</code> </span></dt><dd>
											Sets the <code class="literal">u32</code> filter to <code class="literal">match</code> the IP headers of <code class="literal">u32</code> pattern. The first <code class="literal">0</code> represents the second byte of IP header while the other <code class="literal">0</code> is for the mask match telling the filter which bits to match.
										</dd><dt><span class="term"><code class="literal">action ctinfo</code> </span></dt><dd>
											Sets action to retrieve data from the connection tracking mark into various fields.
										</dd><dt><span class="term"><code class="literal">cpmark 100</code> </span></dt><dd>
											Copies the connection tracking mark (connmark) <code class="literal">100</code> into the packet IP header field.
										</dd><dt><span class="term"><code class="literal">action mirred egress redirect dev ifb4eth0</code> </span></dt><dd>
											Sets <code class="literal">action</code> <code class="literal">mirred</code> to redirect the received packets to the <code class="literal">ifb4eth0</code> destination interface.
										</dd></dl></div></li><li class="listitem"><p class="simpara">
								Add a classful <code class="literal">qdisc</code> to the interface:
							</p><pre class="literallayout"># <span class="strong strong"><strong>tc qdisc add dev ifb4eth0 root handle 1: htb default 1000</strong></span></pre><p class="simpara">
								This command sets the major number <code class="literal">1</code> to root <code class="literal">qdisc</code> and uses the <code class="literal">htb</code> hierarchy token bucket with classful <code class="literal">qdisc</code> of minor-id <code class="literal">1000</code>.
							</p></li><li class="listitem"><p class="simpara">
								Limit the traffic on the interface to 1 Mbit/s with an upper limit of 2 Mbit/s:
							</p><pre class="literallayout"># <span class="strong strong"><strong>tc class add dev ifb4eth0 parent 1:1 classid 1:100 htb ceil 2mbit rate 1mbit prio 100</strong></span></pre><p class="simpara">
								This command has the following parameters:
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">parent 1:1</code> </span></dt><dd>
											Sets <code class="literal">parent</code> with <code class="literal">classid</code> as <code class="literal">1</code> and <code class="literal">root</code> as <code class="literal">1</code>.
										</dd><dt><span class="term"><code class="literal">classid 1:100</code> </span></dt><dd>
											Sets <code class="literal">classid</code> as <code class="literal">1:100</code> where <code class="literal">1</code> is the number of parent <code class="literal">qdisc</code> and <code class="literal">100</code> is the number of classes of the parent <code class="literal">qdisc</code>.
										</dd><dt><span class="term"><code class="literal">htb ceil 2mbit</code> </span></dt><dd>
											The <code class="literal">htb</code> classful <code class="literal">qdisc</code> allows upper limit bandwidth of <code class="literal">2 Mbit/s</code> as the <code class="literal">ceil</code> rate limit.
										</dd></dl></div></li><li class="listitem"><p class="simpara">
								Apply the Stochastic Fairness Queuing (<code class="literal">sfq</code>) of classless <code class="literal">qdisc</code> to interface with a time interval of <code class="literal">60</code> seconds to reduce queue algorithm perturbation:
							</p><pre class="literallayout"># <span class="strong strong"><strong>tc qdisc add dev ifb4eth0 parent 1:100 sfq perturb 60</strong></span></pre></li><li class="listitem"><p class="simpara">
								Add the firewall mark (<code class="literal">fw</code>) filter to the interface:
							</p><pre class="literallayout"># <span class="strong strong"><strong>tc filter add dev ifb4eth0 parent 1:0 protocol ip prio 100 handle 100 fw classid 1:100</strong></span></pre></li><li class="listitem"><p class="simpara">
								Restore the packet meta mark from the connection mark (<code class="literal">CONNMARK</code>):
							</p><pre class="literallayout"># <span class="strong strong"><strong>nft add rule ip mangle PREROUTING counter meta mark set ct mark</strong></span></pre><p class="simpara">
								In this command, the <code class="literal">nft</code> utility has a <code class="literal">mangle</code> table with the <code class="literal">PREROUTING</code> chain rule specification that alters incoming packets before routing to replace the packet mark with <code class="literal">CONNMARK</code>.
							</p></li><li class="listitem"><p class="simpara">
								If no <code class="literal">nft</code> table and chain exist, create a table and add a chain rule:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nft add table ip mangle</strong></span>
# <span class="strong strong"><strong>nft add chain ip mangle PREROUTING {type filter hook prerouting priority mangle \;}</strong></span></pre></li><li class="listitem"><p class="simpara">
								Set the meta mark on <code class="literal">tcp</code> packets that are received on the specified destination address <code class="literal">192.0.2.3</code>:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nft add rule ip mangle PREROUTING ip daddr 192.0.2.3 counter meta mark set 0x64</strong></span></pre></li><li class="listitem"><p class="simpara">
								Save the packet mark into the connection mark:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nft add rule ip mangle PREROUTING counter ct mark set mark</strong></span></pre></li><li class="listitem"><p class="simpara">
								Run the <code class="literal">iperf3</code> utility as the server on a system by using the <code class="literal">-s</code> parameter and the server then waits for the response of the client connection:
							</p><pre class="literallayout"># <span class="strong strong"><strong>iperf3 -s</strong></span></pre></li></ol></div></li><li class="listitem"><p class="simpara">
						On the client, run <code class="literal">iperf3</code> as a client and connect to the server that listens on IP address <code class="literal">192.0.2.3</code> for periodic HTTP request-response timestamp:
					</p><pre class="literallayout"># <span class="strong strong"><strong>iperf3 -c 192.0.2.3 -t TCP_STREAM | tee rate</strong></span></pre><p class="simpara">
						<code class="literal">192.0.2.3</code> is the IP address of the server while <code class="literal">192.0.2.4</code> is the IP address of the client.
					</p></li><li class="listitem"><p class="simpara">
						Terminate the <code class="literal">iperf3</code> utility on the server by pressing <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">C</kbd>:
					</p><pre class="literallayout">Accepted connection from 192.0.2.4, port 52128
[5]  local 192.0.2.3 port 5201 connected to 192.0.2.4 port 52130
[ID] Interval       	Transfer 	Bitrate
[5]   0.00-1.00   sec   119 KBytes   973 Kbits/sec
[5]   1.00-2.00   sec   116 KBytes   950 Kbits/sec
...
[ID] Interval       	Transfer 	Bitrate
[5]   0.00-14.81  sec  1.51 MBytes   853 Kbits/sec  receiver

iperf3: interrupt - the server has terminated</pre></li><li class="listitem"><p class="simpara">
						Terminate the <code class="literal">iperf3</code> utility on the client by pressing <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">C</kbd>:
					</p><pre class="literallayout">Connecting to host 192.0.2.3, port 5201
[5] local 192.0.2.4 port 52130 connected to 192.0.2.3 port 5201
[ID] Interval       	Transfer 	Bitrate     	Retr  Cwnd
[5]   0.00-1.00   sec   481 KBytes  3.94 Mbits/sec	0   76.4 KBytes
[5]   1.00-2.00   sec   223 KBytes  1.83 Mbits/sec	0   82.0 KBytes
...
[ID] Interval       	Transfer 	Bitrate     	Retr
[5]   0.00-14.00  sec  3.92 MBytes  2.35 Mbits/sec   32     sender
[5]   0.00-14.00  sec  0.00 Bytes  0.00 bits/sec            receiver

iperf3: error - the server has terminated</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the statistics about packet counts of the <code class="literal">htb</code> and <code class="literal">sfq</code> classes on the interface:
					</p><pre class="literallayout"># <span class="strong strong"><strong>tc -s qdisc show dev ifb4eth0</strong></span>

qdisc htb 1: root
...
 Sent 26611455 bytes 3054 pkt (dropped 76, overlimits 4887 requeues 0)
...
qdisc sfq 8001: parent
...
 Sent 26535030 bytes 2296 pkt (dropped 76, overlimits 0 requeues 0)
...</pre></li><li class="listitem"><p class="simpara">
						Display the statistics of packet counts for the <code class="literal">mirred</code> and <code class="literal">ctinfo</code> actions:
					</p><pre class="literallayout"># <span class="strong strong"><strong>tc -s filter show dev enp1s0 ingress</strong></span>
filter parent ffff: protocol ip pref 49152 u32 chain 0
filter parent ffff: protocol ip pref 49152 u32 chain 0 fh 800: ht divisor 1
filter parent ffff: protocol ip pref 49152 u32 chain 0 fh 800::800 order 2048 key ht 800 bkt 0 terminal flowid not_in_hw (rule hit 8075 success 8075)
  match 00000000/00000000 at 0 (success 8075 )
    action order 1: ctinfo zone 0 pipe
      index 1 ref 1 bind 1 cpmark 0x00000064 installed 3105 sec firstused 3105 sec DSCP set 0 error 0
      CPMARK set 7712
    Action statistics:
    Sent 25891504 bytes 3137 pkt (dropped 0, overlimits 0 requeues 0)
    backlog 0b 0p requeues 0

    action order 2: mirred (Egress Redirect to device ifb4eth0) stolen
       index 1 ref 1 bind 1 installed 3105 sec firstused 3105 sec
    Action statistics:
    Sent 25891504 bytes 3137 pkt (dropped 0, overlimits 61 requeues 0)
    backlog 0b 0p requeues 0</pre></li><li class="listitem"><p class="simpara">
						Display the statistics of the <code class="literal">htb</code> rate-limiter and its configuration:
					</p><pre class="literallayout"># <span class="strong strong"><strong>tc -s class show dev ifb4eth0</strong></span>
class htb 1:100 root leaf 8001: prio 7 rate 1Mbit ceil 2Mbit burst 1600b cburst 1600b
 Sent 26541716 bytes 2373 pkt (dropped 61, overlimits 4887 requeues 0)
 backlog 0b 0p requeues 0
 lended: 7248 borrowed: 0 giants: 0
 tokens: 187250 ctokens: 93625</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">tc(8)</code> and <code class="literal">tc-ctinfo(8)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">nft(8)</code> man page on your system
					</li></ul></div></section><section class="section" id="available-qdiscs-in-rhel_linux-traffic-control"><div class="titlepage"><div><div><h3 class="title">33.8. Available qdiscs in RHEL</h3></div></div></div><p class="_abstract _abstract">
				Each <code class="literal">qdisc</code> addresses unique networking-related issues. The following is the list of <code class="literal">qdiscs</code> available in RHEL. You can use any of the following <code class="literal">qdisc</code> to shape network traffic based on your networking requirements.
			</p><rh-table id="idm140053159164416"><table class="lt-4-cols lt-7-rows"><caption>Table 33.1. Available schedulers in RHEL</caption><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 33%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140053159158640" scope="col"><code class="literal">qdisc</code> name</th><th align="left" valign="top" id="idm140053159157232" scope="col">Included in</th><th align="left" valign="top" id="idm140053159156144" scope="col">Offload support</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								Asynchronous Transfer Mode (ATM)
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-modules-extra</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> </td></tr><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								Class-Based Queueing
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-modules-extra</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> </td></tr><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								Credit-Based Shaper
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-modules-extra</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> <p>
								Yes
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								CHOose and Keep for responsive flows, CHOose and Kill for unresponsive flows (CHOKE)
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-modules-extra</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> </td></tr><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								Controlled Delay (CoDel)
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-core</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> </td></tr><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								Deficit Round Robin (DRR)
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-modules-extra</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> </td></tr><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								Differentiated Services marker (DSMARK)
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-modules-extra</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> </td></tr><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								Enhanced Transmission Selection (ETS)
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-modules-extra</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> <p>
								Yes
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								Fair Queue (FQ)
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-core</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> </td></tr><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								Fair Queuing Controlled Delay (FQ_CODel)
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-core</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> </td></tr><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								Generalized Random Early Detection (GRED)
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-modules-extra</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> </td></tr><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								Hierarchical Fair Service Curve (HSFC)
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-core</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> </td></tr><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								Heavy-Hitter Filter (HHF)
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-core</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> </td></tr><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								Hierarchy Token Bucket (HTB)
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-core</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> </td></tr><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								INGRESS
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-core</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> <p>
								Yes
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								Multi Queue Priority (MQPRIO)
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-modules-extra</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> <p>
								Yes
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								Multiqueue (MULTIQ)
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-modules-extra</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> <p>
								Yes
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								Network Emulator (NETEM)
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-modules-extra</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> </td></tr><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								Proportional Integral-controller Enhanced (PIE)
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-core</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> </td></tr><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								PLUG
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-core</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> </td></tr><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								Quick Fair Queueing (QFQ)
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-modules-extra</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> </td></tr><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								Random Early Detection (RED)
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-modules-extra</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> <p>
								Yes
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								Stochastic Fair Blue (SFB)
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-modules-extra</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> </td></tr><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								Stochastic Fairness Queueing (SFQ)
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-core</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> </td></tr><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								Token Bucket Filter (TBF)
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-core</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> <p>
								Yes
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053159158640"> <p>
								Trivial Link Equalizer (TEQL)
							</p>
							 </td><td align="left" valign="top" headers="idm140053159157232"> <p>
								<code class="literal">kernel-modules-extra</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053159156144"> </td></tr></tbody></table></rh-table><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					The <code class="literal">qdisc</code> offload requires hardware and driver support on NIC.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">tc(8)</code> man page on your system
					</li></ul></div></section></section><section class="chapter" id="authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 34. Authenticating a RHEL client to the network by using the 802.1X standard with a certificate stored on the file system</h2></div></div></div><p class="_abstract _abstract">
			Administrators frequently use port-based Network Access Control (NAC) based on the IEEE 802.1X standard to protect a network from unauthorized LAN and Wi-Fi clients. To enable a client to connect to such networks, you must configure 802.1X authentication on this clients.
		</p><section class="section" id="configuring-802-1x-network-authentication-on-an-existing-ethernet-connection-by-using-nmcli_authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system"><div class="titlepage"><div><div><h3 class="title">34.1. Configuring 802.1X network authentication on an existing Ethernet connection by using <code class="literal">nmcli</code></h3></div></div></div><p class="_abstract _abstract">
				You can use the <code class="literal">nmcli</code> utility to configure an Ethernet connection with 802.1X network authentication on the command line.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The network supports 802.1X network authentication.
					</li><li class="listitem">
						The Ethernet connection profile exists in NetworkManager and has a valid IP configuration.
					</li><li class="listitem"><p class="simpara">
						The following files required for TLS authentication exist on the client:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The client key stored is in the <code class="literal">/etc/pki/tls/private/client.key</code> file, and the file is owned and only readable by the <code class="literal">root</code> user.
							</li><li class="listitem">
								The client certificate is stored in the <code class="literal">/etc/pki/tls/certs/client.crt</code> file.
							</li><li class="listitem">
								The Certificate Authority (CA) certificate is stored in the <code class="literal">/etc/pki/tls/certs/ca.crt</code> file.
							</li></ul></div></li><li class="listitem">
						The <code class="literal">wpa_supplicant</code> package is installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Set the Extensible Authentication Protocol (EAP) to <code class="literal">tls</code> and the paths to the client certificate and key file:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>enp1s0</em></span> 802-1x.eap tls 802-1x.client-cert /etc/pki/tls/certs/client.crt 802-1x.private-key /etc/pki/tls/certs/certs/client.key</strong></span></pre><p class="simpara">
						Note that you must set the <code class="literal">802-1x.eap</code>, <code class="literal">802-1x.client-cert</code>, and <code class="literal">802-1x.private-key</code> parameters in a single command.
					</p></li><li class="listitem"><p class="simpara">
						Set the path to the CA certificate:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>enp1s0</em></span> 802-1x.ca-cert /etc/pki/tls/certs/ca.crt</strong></span></pre></li><li class="listitem"><p class="simpara">
						Set the identity of the user used in the certificate:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>enp1s0</em></span> 802-1x.identity <span class="emphasis"><em>user@example.com</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Optional: Store the password in the configuration:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>enp1s0</em></span> 802-1x.private-key-password <span class="emphasis"><em>password</em></span></strong></span></pre><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							By default, NetworkManager stores the password in clear text in the connection profile on the disk, but the file is readable only by the <code class="literal">root</code> user. However, clear text passwords in a configuration file can be a security risk.
						</p><p>
							To increase the security, set the <code class="literal">802-1x.password-flags</code> parameter to <code class="literal">0x1</code>. With this setting, on servers with the GNOME desktop environment or the <code class="literal">nm-applet</code> running, NetworkManager retrieves the password from these services. In other cases, NetworkManager prompts for the password.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Activate the connection profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>enp1s0</em></span></strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Access resources on the network that require network authentication.
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#configuring-an-ethernet-connection_configuring-and-managing-networking" title="Chapter 2. Configuring an Ethernet connection">Configuring an Ethernet connection</a>
					</li></ul></div></section><section class="section" id="proc_configuring-a-static-ethernet-connection-with-802-1x-network-authentication-by-using-nmstatectl_authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system"><div class="titlepage"><div><div><h3 class="title">34.2. Configuring a static Ethernet connection with 802.1X network authentication by using <code class="literal">nmstatectl</code></h3></div></div></div><p class="_abstract _abstract">
				Use the <code class="literal">nmstatectl</code> utility to configure an Ethernet connection with 802.1X network authentication through the Nmstate API. The Nmstate API ensures that, after setting the configuration, the result matches the configuration file. If anything fails, <code class="literal">nmstatectl</code> automatically rolls back the changes to avoid leaving the system in an incorrect state.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The <code class="literal">nmstate</code> library only supports the <code class="literal">TLS</code> Extensible Authentication Protocol (EAP) method.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The network supports 802.1X network authentication.
					</li><li class="listitem">
						The managed node uses NetworkManager.
					</li><li class="listitem"><p class="simpara">
						The following files required for TLS authentication exist on the client:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The client key stored is in the <code class="literal">/etc/pki/tls/private/client.key</code> file, and the file is owned and only readable by the <code class="literal">root</code> user.
							</li><li class="listitem">
								The client certificate is stored in the <code class="literal">/etc/pki/tls/certs/client.crt</code> file.
							</li><li class="listitem">
								The Certificate Authority (CA) certificate is stored in the <code class="literal">/etc/pki/tls/certs/ca.crt</code> file.
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a YAML file, for example <code class="literal">~/create-ethernet-profile.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
interfaces:
- name: enp1s0
  type: ethernet
  state: up
  ipv4:
    enabled: true
    address:
    - ip: 192.0.2.1
      prefix-length: 24
    dhcp: false
  ipv6:
    enabled: true
    address:
    - ip: 2001:db8:1::1
      prefix-length: 64
    autoconf: false
    dhcp: false
  802.1x:
    ca-cert: /etc/pki/tls/certs/ca.crt
    client-cert: /etc/pki/tls/certs/client.crt
    eap-methods:
      - tls
    identity: client.example.org
    private-key: /etc/pki/tls/private/client.key
    private-key-password: password
routes:
  config:
  - destination: 0.0.0.0/0
    next-hop-address: 192.0.2.254
    next-hop-interface: enp1s0
  - destination: ::/0
    next-hop-address: 2001:db8:1::fffe
    next-hop-interface: enp1s0
dns-resolver:
  config:
    search:
    - example.com
    server:
    - 192.0.2.200
    - 2001:db8:1::ffbb</pre><p class="simpara">
						These settings define an Ethernet connection profile for the <code class="literal">enp1s0</code> device with the following settings:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								A static IPv4 address - <code class="literal">192.0.2.1</code> with a <code class="literal">/24</code> subnet mask
							</li><li class="listitem">
								A static IPv6 address - <code class="literal">2001:db8:1::1</code> with a <code class="literal">/64</code> subnet mask
							</li><li class="listitem">
								An IPv4 default gateway - <code class="literal">192.0.2.254</code>
							</li><li class="listitem">
								An IPv6 default gateway - <code class="literal">2001:db8:1::fffe</code>
							</li><li class="listitem">
								An IPv4 DNS server - <code class="literal">192.0.2.200</code>
							</li><li class="listitem">
								An IPv6 DNS server - <code class="literal">2001:db8:1::ffbb</code>
							</li><li class="listitem">
								A DNS search domain - <code class="literal">example.com</code>
							</li><li class="listitem">
								802.1X network authentication using the <code class="literal">TLS</code> EAP protocol
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Apply the settings to the system:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmstatectl apply ~/create-ethernet-profile.yml</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Access resources on the network that require network authentication.
					</li></ul></div></section><section class="section" id="configuring-a-static-ethernet-connection-with-802-1x-network-authentication-by-using-the-network-rhel-system-role_authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system"><div class="titlepage"><div><div><h3 class="title">34.3. Configuring a static Ethernet connection with 802.1X network authentication by using the <code class="literal">network</code> RHEL system role</h3></div></div></div><p class="_abstract _abstract">
				Network Access Control (NAC) protects a network from unauthorized clients. You can specify the details that are required for the authentication in NetworkManager connection profiles to enable clients to access the network. By using Ansible and the <code class="literal">network</code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.
			</p><p>
				You can use an Ansible playbook to copy a private key, a certificate, and the CA certificate to the client, and then use the <code class="literal">network</code> RHEL system role to configure a connection profile with 802.1X network authentication.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles">You have prepared the control node and the managed nodes</a>
					</li><li class="listitem">
						You are logged in to the control node as a user who can run playbooks on the managed nodes.
					</li><li class="listitem">
						The account you use to connect to the managed nodes has <code class="literal">sudo</code> permissions on them.
					</li><li class="listitem">
						The network supports 802.1X network authentication.
					</li><li class="listitem">
						The managed nodes use NetworkManager.
					</li><li class="listitem"><p class="simpara">
						The following files required for the TLS authentication exist on the control node:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The client key is stored in the <code class="literal">/srv/data/client.key</code> file.
							</li><li class="listitem">
								The client certificate is stored in the <code class="literal">/srv/data/client.crt</code> file.
							</li><li class="listitem">
								The Certificate Authority (CA) certificate is stored in the <code class="literal">/srv/data/ca.crt</code> file.
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Store your sensitive variables in an encrypted file:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create the vault:
							</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-vault create vault.yml</strong></span>
New Vault password: <span class="emphasis"><em>&lt;vault_password&gt;</em></span>
Confirm New Vault password: <span class="emphasis"><em>&lt;vault_password&gt;</em></span></pre></li><li class="listitem"><p class="simpara">
								After the <code class="literal">ansible-vault create</code> command opens an editor, enter the sensitive data in the <code class="literal"><span class="emphasis"><em>&lt;key&gt;</em></span>: <span class="emphasis"><em>&lt;value&gt;</em></span></code> format:
							</p><pre class="programlisting language-ini">pwd: <span class="emphasis"><em>&lt;password&gt;</em></span></pre></li><li class="listitem">
								Save the changes, and close the editor. Ansible encrypts the data in the vault.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Create a playbook file, for example <code class="literal">~/playbook.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
- name: Configure an Ethernet connection with 802.1X authentication
  hosts: managed-node-01.example.com
  vars_files:
    - vault.yml
  tasks:
    - name: Copy client key for 802.1X authentication
      ansible.builtin.copy:
        src: "/srv/data/client.key"
        dest: "/etc/pki/tls/private/client.key"
        mode: 0600

    - name: Copy client certificate for 802.1X authentication
      ansible.builtin.copy:
        src: "/srv/data/client.crt"
        dest: "/etc/pki/tls/certs/client.crt"

    - name: Copy CA certificate for 802.1X authentication
      ansible.builtin.copy:
        src: "/srv/data/ca.crt"
        dest: "/etc/pki/ca-trust/source/anchors/ca.crt"

    - name: Ethernet connection profile with static IP address settings and 802.1X
      ansible.builtin.include_role:
        name: rhel-system-roles.network
      vars:
        network_connections:
          - name: enp1s0
            type: ethernet
            autoconnect: yes
            ip:
              address:
                - 192.0.2.1/24
                - 2001:db8:1::1/64
              gateway4: 192.0.2.254
              gateway6: 2001:db8:1::fffe
              dns:
                - 192.0.2.200
                - 2001:db8:1::ffbb
              dns_search:
                - example.com
            ieee802_1x:
              identity: <span class="emphasis"><em>&lt;user_name&gt;</em></span>
              eap: tls
              private_key: "/etc/pki/tls/private/client.key"
              private_key_password: "{{ pwd }}"
              client_cert: "/etc/pki/tls/certs/client.crt"
              ca_cert: "/etc/pki/ca-trust/source/anchors/ca.crt"
              domain_suffix_match: example.com
            state: up</pre><p class="simpara">
						The settings specified in the example playbook include the following:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">ieee802_1x</code></span></dt><dd>
									This variable contains the 802.1X-related settings.
								</dd><dt><span class="term"><code class="literal">eap: tls</code></span></dt><dd>
									Configures the profile to use the certificate-based <code class="literal">TLS</code> authentication method for the Extensible Authentication Protocol (EAP).
								</dd></dl></div><p class="simpara">
						For details about all variables used in the playbook, see the <code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file on the control node.
					</p></li><li class="listitem"><p class="simpara">
						Validate the playbook syntax:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --ask-vault-pass --syntax-check ~/playbook.yml</strong></span></pre><p class="simpara">
						Note that this command only validates the syntax and does not protect against a wrong but valid configuration.
					</p></li><li class="listitem"><p class="simpara">
						Run the playbook:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --ask-vault-pass ~/playbook.yml</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Access resources on the network that require network authentication.
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/rhel-system-roles/network/</code> directory
					</li><li class="listitem">
						<a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/ansible-vault_automating-system-administration-by-using-rhel-system-roles">Ansible vault</a>
					</li></ul></div></section><section class="section" id="proc_configuring-a-wifi-connection-with-802-1x-network-authentication-by-using-the-network-rhel-system-role_authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system"><div class="titlepage"><div><div><h3 class="title">34.4. Configuring a wifi connection with 802.1X network authentication by using the <code class="literal">network</code> RHEL system role</h3></div></div></div><p class="_abstract _abstract">
				Network Access Control (NAC) protects a network from unauthorized clients. You can specify the details that are required for the authentication in NetworkManager connection profiles to enable clients to access the network. By using Ansible and the <code class="literal">network</code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.
			</p><p>
				You can use an Ansible playbook to copy a private key, a certificate, and the CA certificate to the client, and then use the <code class="literal">network</code> RHEL system role to configure a connection profile with 802.1X network authentication.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles">You have prepared the control node and the managed nodes</a>
					</li><li class="listitem">
						You are logged in to the control node as a user who can run playbooks on the managed nodes.
					</li><li class="listitem">
						The account you use to connect to the managed nodes has <code class="literal">sudo</code> permissions on them.
					</li><li class="listitem">
						The network supports 802.1X network authentication.
					</li><li class="listitem">
						You installed the <code class="literal">wpa_supplicant</code> package on the managed node.
					</li><li class="listitem">
						DHCP is available in the network of the managed node.
					</li><li class="listitem"><p class="simpara">
						The following files required for TLS authentication exist on the control node:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The client key is stored in the <code class="literal">/srv/data/client.key</code> file.
							</li><li class="listitem">
								The client certificate is stored in the <code class="literal">/srv/data/client.crt</code> file.
							</li><li class="listitem">
								The CA certificate is stored in the <code class="literal">/srv/data/ca.crt</code> file.
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Store your sensitive variables in an encrypted file:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create the vault:
							</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-vault create vault.yml</strong></span>
New Vault password: <span class="emphasis"><em>&lt;vault_password&gt;</em></span>
Confirm New Vault password: <span class="emphasis"><em>&lt;vault_password&gt;</em></span></pre></li><li class="listitem"><p class="simpara">
								After the <code class="literal">ansible-vault create</code> command opens an editor, enter the sensitive data in the <code class="literal"><span class="emphasis"><em>&lt;key&gt;</em></span>: <span class="emphasis"><em>&lt;value&gt;</em></span></code> format:
							</p><pre class="programlisting language-ini">pwd: <span class="emphasis"><em>&lt;password&gt;</em></span></pre></li><li class="listitem">
								Save the changes, and close the editor. Ansible encrypts the data in the vault.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Create a playbook file, for example <code class="literal">~/playbook.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
- name: Configure a wifi connection with 802.1X authentication
  hosts: managed-node-01.example.com
  tasks:
    - name: Copy client key for 802.1X authentication
      ansible.builtin.copy:
        src: "/srv/data/client.key"
        dest: "/etc/pki/tls/private/client.key"
        mode: 0400

    - name: Copy client certificate for 802.1X authentication
      ansible.builtin.copy:
        src: "/srv/data/client.crt"
        dest: "/etc/pki/tls/certs/client.crt"

    - name: Copy CA certificate for 802.1X authentication
      ansible.builtin.copy:
        src: "/srv/data/ca.crt"
        dest: "/etc/pki/ca-trust/source/anchors/ca.crt"

    - name: Wifi connection profile with dynamic IP address settings and 802.1X
      ansible.builtin.import_role:
        name: rhel-system-roles.network
      vars:
        network_connections:
          - name: Wifi connection profile with dynamic IP address settings and 802.1X
            interface_name: wlp1s0
            state: up
            type: wireless
            autoconnect: yes
            ip:
              dhcp4: true
              auto6: true
            wireless:
              ssid: "Example-wifi"
              key_mgmt: "wpa-eap"
            ieee802_1x:
              identity: <span class="emphasis"><em>&lt;user_name&gt;</em></span>
              eap: tls
              private_key: "/etc/pki/tls/client.key"
              private_key_password: "{{ pwd }}"
              private_key_password_flags: none
              client_cert: "/etc/pki/tls/client.pem"
              ca_cert: "/etc/pki/tls/cacert.pem"
              domain_suffix_match: "example.com"</pre><p class="simpara">
						The settings specified in the example playbook include the following:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">ieee802_1x</code></span></dt><dd>
									This variable contains the 802.1X-related settings.
								</dd><dt><span class="term"><code class="literal">eap: tls</code></span></dt><dd>
									Configures the profile to use the certificate-based <code class="literal">TLS</code> authentication method for the Extensible Authentication Protocol (EAP).
								</dd></dl></div><p class="simpara">
						For details about all variables used in the playbook, see the <code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file on the control node.
					</p></li><li class="listitem"><p class="simpara">
						Validate the playbook syntax:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --ask-vault-pass --syntax-check ~/playbook.yml</strong></span></pre><p class="simpara">
						Note that this command only validates the syntax and does not protect against a wrong but valid configuration.
					</p></li><li class="listitem"><p class="simpara">
						Run the playbook:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --ask-vault-pass ~/playbook.yml</strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/rhel-system-roles/network/</code> directory
					</li></ul></div></section></section><section class="chapter" id="assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 35. Setting up an 802.1x network authentication service for LAN clients by using <code class="literal">hostapd</code> with FreeRADIUS backend</h2></div></div></div><p class="_abstract _abstract">
			The IEEE 802.1X standard defines secure authentication and authorization methods to protect networks from unauthorized clients. By using the <code class="literal">hostapd</code> service and FreeRADIUS, you can provide network access control (NAC) in your network.
		</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
				Red Hat supports only FreeRADIUS with Red Hat Identity Management (IdM) as backend source of authentication.
			</p></div></rh-alert><p>
			In this documentation, the RHEL host acts as a bridge to connect different clients with an existing network. However, the RHEL host grants only authenticated clients access to the network.
		</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/8fadf9abfcbb769d775871aa6a9b2e22/rhel-authenticator-802-1x.png" alt="rhel authenticator 802 1x"></div></div><section class="section" id="prerequisites"><div class="titlepage"><div><div><h3 class="title">35.1. Prerequisites</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						A clean installation of the <code class="literal">freeradius</code> and <code class="literal">freeradius-ldap</code> packages.
					</p><p class="simpara">
						If the packages are already installed, remove the <code class="literal">/etc/raddb/</code> directory, uninstall and then install the packages again. Do not reinstall the packages by using the <code class="literal">dnf reinstall</code> command, because the permissions and symbolic links in the <code class="literal">/etc/raddb/</code> directory are then different.
					</p></li><li class="listitem">
						The host on which you want to configure FreeRADIUS is a <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/index">client in an IdM domain</a>.
					</li></ul></div></section><section class="section" id="proc_setting-up-the-bridge-on-the-authenticator_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend"><div class="titlepage"><div><div><h3 class="title">35.2. Setting up the bridge on the authenticator</h3></div></div></div><p class="_abstract _abstract">
				A network bridge is a link-layer device which forwards traffic between hosts and networks based on a table of MAC addresses. If you set up RHEL as an 802.1X authenticator, add both the interfaces on which to perform authentication and the LAN interface to the bridge.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The server has multiple Ethernet interfaces.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						If the bridge interface does not exist, create it:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type bridge con-name br0 ifname br0</strong></span></pre></li><li class="listitem"><p class="simpara">
						Assign the Ethernet interfaces to the bridge:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type ethernet port-type bridge con-name br0-port1 ifname enp1s0 controller br0</strong></span>
# <span class="strong strong"><strong>nmcli connection add type ethernet port-type bridge con-name br0-port2 ifname enp7s0 controller br0</strong></span>
# <span class="strong strong"><strong>nmcli connection add type ethernet port-type bridge con-name br0-port3 ifname enp8s0 controller br0</strong></span>
# <span class="strong strong"><strong>nmcli connection add type ethernet port-type bridge con-name br0-port4 ifname enp9s0 controller br0</strong></span></pre></li><li class="listitem"><p class="simpara">
						Enable the bridge to forward extensible authentication protocol over LAN (EAPOL) packets:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify br0 group-forward-mask 8</strong></span></pre></li><li class="listitem"><p class="simpara">
						Configure the connection to automatically activate the ports:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify br0 connection.autoconnect-ports 1</strong></span></pre></li><li class="listitem"><p class="simpara">
						Activate the connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up br0</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the link status of Ethernet devices that are ports of a specific bridge:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip link show master br0</strong></span>
3: enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel master br0 state UP mode DEFAULT group default qlen 1000
    link/ether 52:54:00:62:61:0e brd ff:ff:ff:ff:ff:ff
...</pre></li><li class="listitem"><p class="simpara">
						Verify if forwarding of EAPOL packets is enabled on the <code class="literal">br0</code> device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /sys/class/net/br0/bridge/group_fwd_mask</strong></span>
0x8</pre><p class="simpara">
						If the command returns <code class="literal">0x8</code>, forwarding is enabled.
					</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nm-settings(5)</code> man page on your system
					</li></ul></div></section><section class="section" id="proc_configuring-freeradius-to-authenticate-network-clients-securely-using-eap_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend"><div class="titlepage"><div><div><h3 class="title">35.3. Configuring FreeRADIUS to authenticate network clients securely by using EAP</h3></div></div></div><p class="_abstract _abstract">
				FreeRADIUS supports different methods of the Extensible authentication protocol (EAP). However, for a supported and secure scenario, use EAP-TTLS (tunneled transport layer security).
			</p><p>
				With EAP-TTLS, the clients use a secure TLS connection as the outer authentication protocol to set up the tunnel. The inner authentication then uses LDAP to authenticate to Identity Management. To use EAP-TTLS, you need a TLS server certificate.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The default FreeRADIUS configuration files serve as documentation and describe all parameters and directives. If you want to disable certain features, comment them out instead of removing the corresponding parts in the configuration files. This enables you to preserve the structure of the configuration files and the included documentation.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You installed the <code class="literal">freeradius</code> and <code class="literal">freeradius-ldap</code> packages.
					</li><li class="listitem">
						The configuration files in the <code class="literal">/etc/raddb/</code> directory are unchanged and as provided by the <code class="literal">freeradius</code> packages.
					</li><li class="listitem">
						The host is enrolled in a Red Hat Identity Management (IdM) domain.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a private key and request a certificate from IdM:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ipa-getcert request -w -k /etc/pki/tls/private/radius.key -f /etc/pki/tls/certs/radius.pem -o "root:radiusd" -m 640 -O "root:radiusd" -M 640 -T caIPAserviceCert -C 'systemctl restart radiusd.service' -N <span class="emphasis"><em>freeradius.idm.example.com</em></span> -D <span class="emphasis"><em>freeradius.idm.example.com</em></span> -K radius/<span class="emphasis"><em>freeradius.idm.example.com</em></span></strong></span></pre><p class="simpara">
						The <code class="literal">certmonger</code> service stores the private key in the <code class="literal">/etc/pki/tls/private/radius.key</code> file and the certificate in the <code class="literal">/etc/pki/tls/certs/radius.pem</code> file, and it sets secure permissions. Additionally, <code class="literal">certmonger</code> will monitor the certificate, renew it before it expires, and restart the <code class="literal">radiusd</code> service after the certificate was renewed.
					</p></li></ol></div><p>
				.
			</p><p>
				+
			</p><pre class="literallayout"># <span class="strong strong"><strong>ipa-getcert list -f /etc/pki/tls/certs/radius.pem</strong></span>
...
Number of certificates and requests being tracked: 1.
Request ID '20240918142211':
        status: MONITORING
        stuck: no
        key pair storage: type=FILE,location='/etc/pki/tls/private/radius.key'
        certificate: type=FILE,location='/etc/pki/tls/certs/radius.crt'
        ...</pre><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create the <code class="literal">/etc/raddb/certs/dh</code> file with Diffie-Hellman (DH) parameters. For example, to create a DH file with a 2048 bits prime, enter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>openssl dhparam -out /etc/raddb/certs/dh 2048</strong></span></pre><p class="simpara">
						For security reasons, do not use a DH file with less than a 2048 bits prime. Depending on the number of bits, the creation of the file can take several minutes.
					</p></li><li class="listitem"><p class="simpara">
						Edit the <code class="literal">/etc/raddb/mods-available/eap</code> file:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Configure the TLS-related settings in the <code class="literal">tls-config tls-common</code> directive:
							</p><pre class="screen">eap {
    ...
    tls-config tls-common {
        ...
	private_key_file = /etc/pki/tls/private/radius.key
	certificate_file = /etc/pki/tls/certs/radius.pem
	ca_file = /etc/ipa/ca.crt
        ...
    }
}</pre></li><li class="listitem"><p class="simpara">
								Set the <code class="literal">default_eap_type</code> parameter in the <code class="literal">eap</code> directive to <code class="literal">ttls</code>:
							</p><pre class="screen">eap {
    ...
    default_eap_type = ttls
    ...
}</pre></li><li class="listitem"><p class="simpara">
								Comment out the <code class="literal">md5</code> directives to disable the insecure EAP-MD5 authentication method:
							</p><pre class="screen">eap {
    ...
    # md5 {
    # }
    ...
}</pre><p class="simpara">
								Note that, in the default configuration file, other insecure EAP authentication methods are commented out by default.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						Edit the <code class="literal">/etc/raddb/sites-available/default</code> file, and comment out all authentication methods other than <code class="literal">eap</code>:
					</p><pre class="screen">authenticate {
    ...
    # Auth-Type PAP {
    #     pap
    # }

    # Auth-Type CHAP {
    #     chap
    # }

    # Auth-Type MS-CHAP {
    #     mschap
    # }

    # mschap

    # digest
    ...
}</pre><p class="simpara">
						This leaves only EAP enabled for the outer authentication and disables plain-text authentication methods.
					</p></li><li class="listitem"><p class="simpara">
						Edit the <code class="literal">/etc/raddb/sites-available/inner-tunnel</code> file, and make the following changes:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Comment out the <code class="literal">-ldap</code> entry and add the <code class="literal">ldap</code> module configuration to the <code class="literal">authorize</code> directive:
							</p><pre class="screen">authorize {
    ...

    #-ldap
    ldap
    if ((ok || updated) &amp;&amp; User-Password) {
        update {
            control:Auth-Type := ldap
        }
    }

    ...
}</pre></li><li class="listitem"><p class="simpara">
								Uncomment the LDAP authentication type in the <code class="literal">authenticate</code> directive:
							</p><pre class="screen">authenticate {
    Auth-Type LDAP {
        ldap
    }
}</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Enable the <code class="literal">ldap</code> module:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ln -s /etc/raddb/mods-available/ldap /etc/raddb/mods-enabled/ldap</strong></span></pre></li><li class="listitem"><p class="simpara">
						Edit the <code class="literal">/etc/raddb/mods-available/ldap</code> file, and make the following changes:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								In the <code class="literal">ldap</code> directive, set the IdM LDAP server URL and the base distinguished name (DN):
							</p><pre class="screen">ldap {
    ...
    server = 'ldaps://<span class="emphasis"><em>idm_server.idm.example.com</em></span>'
    base_dn = 'cn=users,cn=accounts,<span class="emphasis"><em>dc=idm,dc=example,dc=com</em></span>'
    ...
}</pre><p class="simpara">
								Specify the <code class="literal">ldaps</code> protocol in the server URL to use TLS-encrypted connections between the FreeRADIUS host and the IdM server.
							</p></li><li class="listitem"><p class="simpara">
								In the <code class="literal">ldap</code> directive, enable TLS certificate validation of the IdM LDAP server:
							</p><pre class="screen">tls {
    ...
        require_cert = 'demand'
    ...
}</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Edit the <code class="literal">/etc/raddb/clients.conf</code> file:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Set a secure password in the <code class="literal">localhost</code> and <code class="literal">localhost_ipv6</code> client directives:
							</p><pre class="screen">client localhost {
    ipaddr = 127.0.0.1
    ...
    secret = <span class="emphasis"><em>localhost_client_password</em></span>
    ...
}

client localhost_ipv6 {
    ipv6addr = ::1
    secret = <span class="emphasis"><em>localhost_client_password</em></span>
}</pre></li><li class="listitem"><p class="simpara">
								Add a client directive for the network authenticator:
							</p><pre class="screen">client <span class="emphasis"><em>hostapd.example.org</em></span> {
    ipaddr = <span class="emphasis"><em>192.0.2.2/32</em></span>
    secret = <span class="emphasis"><em>hostapd_client_password</em></span>
}</pre></li><li class="listitem"><p class="simpara">
								Optional: If other hosts should also be able to access the FreeRADIUS service, add client directives for them as well, for example:
							</p><pre class="screen">client <span class="emphasis"><em>&lt;hostname_or_description&gt;</em></span> {
    ipaddr = <span class="emphasis"><em>&lt;IP_address_or_range&gt;</em></span>
    secret = <span class="emphasis"><em>&lt;client_password&gt;</em></span>
}</pre><p class="simpara">
								The <code class="literal">ipaddr</code> parameter accepts IPv4 and IPv6 addresses, and you can use the optional classless inter-domain routing (CIDR) notation to specify ranges. However, you can set only one value in this parameter. For example, to grant access to both an IPv4 and IPv6 address, you must add two client directives.
							</p><p class="simpara">
								Use a descriptive name for the client directive, such as a hostname or a word that describes where the IP range is used.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						Verify the configuration files:
					</p><pre class="literallayout"># <span class="strong strong"><strong>radiusd -XC</strong></span>
...
Configuration appears to be OK</pre></li><li class="listitem"><p class="simpara">
						Open the RADIUS ports in the <code class="literal">firewalld</code> service:
					</p><pre class="literallayout"># <span class="strong strong"><strong>firewall-cmd --permanent --add-service=radius</strong></span>
# <span class="strong strong"><strong>firewall-cmd --reload</strong></span></pre></li><li class="listitem"><p class="simpara">
						Enable and start the <code class="literal">radiusd</code> service:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl enable --now radiusd</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#proc_testing-eap-ttls-authentication-against-a-freeradius-server-or-authenticator_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend" title="35.5. Testing EAP-TTLS authentication against a FreeRADIUS server or authenticator">Testing EAP-TTLS authentication against a FreeRADIUS server or authenticator</a>
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						If the <code class="literal">radiusd</code> service fails to start, verify that you can resolve the IdM server host name:
					</p><pre class="literallayout"># <span class="strong strong"><strong>host -v idm_server.idm.example.com</strong></span></pre></li><li class="listitem"><p class="simpara">
						For other problems, run <code class="literal">radiusd</code> in debug mode:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Stop the <code class="literal">radiusd</code> service:
							</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl stop radiusd</strong></span></pre></li><li class="listitem"><p class="simpara">
								Start the service in debug mode:
							</p><pre class="literallayout"># <span class="strong strong"><strong>radiusd -X</strong></span>
...
Ready to process requests</pre></li><li class="listitem">
								Perform authentication tests on the FreeRADIUS host, as referenced in the <code class="literal">Verification</code> section.
							</li></ol></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Disable no longer required authentication methods and other features you do not use.
					</li></ul></div></section><section class="section" id="proc_configuring-hostapd-as-an-authenticator-in-a-wired-network_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend"><div class="titlepage"><div><div><h3 class="title">35.4. Configuring <code class="literal">hostapd</code> as an authenticator in a wired network</h3></div></div></div><p class="_abstract _abstract">
				The host access point daemon (<code class="literal">hostapd</code>) service can act as an authenticator in a wired network to provide 802.1X authentication. For this, the <code class="literal">hostapd</code> service requires a RADIUS server that authenticates the clients.
			</p><p>
				The <code class="literal">hostapd</code> service provides an integrated RADIUS server. However, use the integrated RADIUS server only for testing purposes. For production environments, use FreeRADIUS server, which supports additional features, such as different authentication methods and access control.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					The <code class="literal">hostapd</code> service does not interact with the traffic plane. The service acts only as an authenticator. For example, use a script or service that uses the <code class="literal">hostapd</code> control interface to allow or deny traffic based on the result of authentication events.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You installed the <code class="literal">hostapd</code> package.
					</li><li class="listitem">
						The FreeRADIUS server has been configured, and it is ready to authenticate clients.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create the <code class="literal">/etc/hostapd/hostapd.conf</code> file with the following content:
					</p><pre class="screen"># General settings of hostapd
# ===========================

# Control interface settings
ctrl_interface=<span class="emphasis"><em>/var/run/hostapd</em></span>
ctrl_interface_group=<span class="emphasis"><em>wheel</em></span>

# Enable logging for all modules
logger_syslog=<span class="emphasis"><em>-1</em></span>
logger_stdout=<span class="emphasis"><em>-1</em></span>

# Log level
logger_syslog_level=<span class="emphasis"><em>2</em></span>
logger_stdout_level=<span class="emphasis"><em>2</em></span>


# Wired 802.1X authentication
# ===========================

# Driver interface type
driver=wired

# Enable IEEE 802.1X authorization
ieee8021x=1

# Use port access entry (PAE) group address
# (01:80:c2:00:00:03) when sending EAPOL frames
use_pae_group_addr=1


# Network interface for authentication requests
interface=<span class="emphasis"><em>br0</em></span>


# RADIUS client configuration
# ===========================

# Local IP address used as NAS-IP-Address
own_ip_addr=<span class="emphasis"><em>192.0.2.2</em></span>

# Unique NAS-Identifier within scope of RADIUS server
nas_identifier=<span class="emphasis"><em>hostapd.example.org</em></span>

# RADIUS authentication server
auth_server_addr=<span class="emphasis"><em>192.0.2.1</em></span>
auth_server_port=<span class="emphasis"><em>1812</em></span>
auth_server_shared_secret=<span class="emphasis"><em>hostapd_client_password</em></span>

# RADIUS accounting server
acct_server_addr=<span class="emphasis"><em>192.0.2.1</em></span>
acct_server_port=<span class="emphasis"><em>1813</em></span>
acct_server_shared_secret=<span class="emphasis"><em>hostapd_client_password</em></span></pre><p class="simpara">
						For further details about the parameters used in this configuration, see their descriptions in the <code class="literal">/usr/share/doc/hostapd/hostapd.conf</code> example configuration file.
					</p></li><li class="listitem"><p class="simpara">
						Enable and start the <code class="literal">hostapd</code> service:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl enable --now hostapd</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#proc_testing-eap-ttls-authentication-against-a-freeradius-server-or-authenticator_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend" title="35.5. Testing EAP-TTLS authentication against a FreeRADIUS server or authenticator">Testing EAP-TTLS authentication against a FreeRADIUS server or authenticator</a>
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						If the <code class="literal">hostapd</code> service fails to start, verify that the bridge interface you use in the <code class="literal">/etc/hostapd/hostapd.conf</code> file is present on the system:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip link show br0</strong></span></pre></li><li class="listitem"><p class="simpara">
						For other problems, run <code class="literal">hostapd</code> in debug mode:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Stop the <code class="literal">hostapd</code> service:
							</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl stop hostapd</strong></span></pre></li><li class="listitem"><p class="simpara">
								Start the service in debug mode:
							</p><pre class="literallayout"># <span class="strong strong"><strong>hostapd -d /etc/hostapd/hostapd.conf</strong></span></pre></li><li class="listitem">
								Perform authentication tests on the FreeRADIUS host, as referenced in the <code class="literal">Verification</code> section.
							</li></ol></div></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">hostapd.conf(5)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/hostapd/hostapd.conf</code> file
					</li></ul></div></section><section class="section" id="proc_testing-eap-ttls-authentication-against-a-freeradius-server-or-authenticator_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend"><div class="titlepage"><div><div><h3 class="title">35.5. Testing EAP-TTLS authentication against a FreeRADIUS server or authenticator</h3></div></div></div><p class="_abstract _abstract">
				To test if authentication by using extensible authentication protocol (EAP) over tunneled transport layer security (EAP-TTLS) works as expected, run this procedure:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						After you set up the FreeRADIUS server
					</li><li class="listitem">
						After you set up the <code class="literal">hostapd</code> service as an authenticator for 802.1X network authentication.
					</li></ul></div><p>
				The output of the test utilities used in this procedure provide additional information about the EAP communication and help you to debug problems.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						When you want to authenticate to:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								A FreeRADIUS server:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
										The <code class="literal">eapol_test</code> utility, provided by the <code class="literal">hostapd</code> package, is installed.
									</li><li class="listitem">
										The client, on which you run this procedure, has been authorized in the FreeRADIUS server’s client databases.
									</li></ul></div></li><li class="listitem">
								An authenticator, the <code class="literal">wpa_supplicant</code> utility, provided by the same-named package, is installed.
							</li></ul></div></li><li class="listitem">
						You stored the certificate authority (CA) certificate in the <code class="literal">/etc/ipa/ca.cert</code> file.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: Create a user in Identity Management (IdM):
					</p><pre class="literallayout"># <span class="strong strong"><strong>ipa user-add --first "<span class="emphasis"><em>Test</em></span>" --last "<span class="emphasis"><em>User</em></span>" <span class="emphasis"><em>idm_user</em></span> --password</strong></span></pre></li><li class="listitem"><p class="simpara">
						Create the <code class="literal">/etc/wpa_supplicant/wpa_supplicant-TTLS.conf</code> file with the following content:
					</p><pre class="screen">ap_scan=0

network={
    eap=TTLS
    eapol_flags=0
    key_mgmt=IEEE8021X

    # Anonymous identity (sent in unencrypted phase 1)
    # Can be any string
    anonymous_identity="<span class="emphasis"><em>anonymous</em></span>"

    # Inner authentication (sent in TLS-encrypted phase 2)
    phase2="auth=<span class="emphasis"><em>PAP</em></span>"
    identity="<span class="emphasis"><em>idm_user</em></span>"
    password="<span class="emphasis"><em>idm_user_password</em></span>"

    # CA certificate to validate the RADIUS server's identity
    ca_cert="<span class="emphasis"><em>/etc/ipa/ca.crt</em></span>"
}</pre></li><li class="listitem"><p class="simpara">
						To authenticate to:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								A FreeRADIUS server, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>eapol_test -c <span class="emphasis"><em>/etc/wpa_supplicant/wpa_supplicant-TTLS.conf</em></span> -a <span class="emphasis"><em>192.0.2.1</em></span> -s <span class="emphasis"><em>&lt;client_password&gt;</em></span></strong></span>
...
EAP: Status notification: remote certificate verification (param=success)
...
CTRL-EVENT-EAP-SUCCESS EAP authentication completed successfully
...
SUCCESS</pre><p class="simpara">
								The <code class="literal">-a</code> option defines the IP address of the FreeRADIUS server, and the <code class="literal">-s</code> option specifies the password for the host on which you run the command in the FreeRADIUS server’s client configuration.
							</p></li><li class="listitem"><p class="simpara">
								An authenticator, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>wpa_supplicant -c <span class="emphasis"><em>/etc/wpa_supplicant/wpa_supplicant-TTLS.conf</em></span> -D wired -i enp0s31f6</strong></span>
...
enp0s31f6: CTRL-EVENT-EAP-SUCCESS EAP authentication completed successfully
...</pre><p class="simpara">
								The <code class="literal">-i</code> option specifies the network interface name on which <code class="literal">wpa_supplicant</code> sends out extended authentication protocol over LAN (EAPOL) packets.
							</p><p class="simpara">
								For more debugging information, pass the <code class="literal">-d</code> option to the command.
							</p></li></ul></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/doc/wpa_supplicant/wpa_supplicant.conf</code> file
					</li></ul></div></section><section class="section" id="proc_blocking-and-allowing-traffic-based-on-hostapd-authentication-events_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend"><div class="titlepage"><div><div><h3 class="title">35.6. Blocking and allowing traffic based on <code class="literal">hostapd</code> authentication events</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">hostapd</code> service does not interact with the traffic plane. The service acts only as an authenticator. However, you can write a script to allow and deny traffic based on the result of authentication events.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					This procedure is not supported and is no enterprise-ready solution. It only demonstrates how to block or allow traffic by evaluating events retrieved by <code class="literal">hostapd_cli</code>.
				</p></div></rh-alert><p>
				When the <code class="literal">802-1x-tr-mgmt</code> systemd service starts, RHEL blocks all traffic on the listen port of <code class="literal">hostapd</code> except extensible authentication protocol over LAN (EAPOL) packets and uses the <code class="literal">hostapd_cli</code> utility to connect to the <code class="literal">hostapd</code> control interface. The <code class="literal">/usr/local/bin/802-1x-tr-mgmt</code> script then evaluates events. Depending on the different events received by <code class="literal">hostapd_cli</code>, the script allows or blocks traffic for MAC addresses. Note that, when the <code class="literal">802-1x-tr-mgmt</code> service stops, all traffic is automatically allowed again.
			</p><p>
				Perform this procedure on the <code class="literal">hostapd</code> server.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">hostapd</code> service has been configured, and the service is ready to authenticate clients.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create the <code class="literal">/usr/local/bin/802-1x-tr-mgmt</code> file with the following content:
					</p><pre class="programlisting language-bash">#!/bin/sh

TABLE="tr-mgmt-${1}"
read -r -d '' TABLE_DEF &lt;&lt; EOF
table bridge ${TABLE} {
    set allowed_macs {
        type ether_addr
    }

    chain accesscontrol {
        ether saddr @allowed_macs accept
        ether daddr @allowed_macs accept
        drop
    }

    chain forward {
        type filter hook forward priority 0; policy accept;
        meta ibrname "br0" jump accesscontrol
    }
}
EOF

case ${2:-NOTANEVENT} in
    block_all)
        nft destroy table bridge "$TABLE"
        printf "$TABLE_DEF" | nft -f -
        echo "$1: All the bridge traffic blocked. Traffic for a client with a given MAC will be allowed after 802.1x authentication"
        ;;

    AP-STA-CONNECTED | CTRL-EVENT-EAP-SUCCESS | CTRL-EVENT-EAP-SUCCESS2)
        nft add element bridge tr-mgmt-br0 allowed_macs { $3 }
        echo "$1: Allowed traffic from $3"
        ;;

    AP-STA-DISCONNECTED | CTRL-EVENT-EAP-FAILURE)
        nft delete element bridge tr-mgmt-br0 allowed_macs { $3 }
        echo "$1: Denied traffic from $3"
        ;;

    allow_all)
        nft destroy table bridge "$TABLE"
        echo "$1: Allowed all bridge traffice again"
        ;;

    NOTANEVENT)
        echo "$0 was called incorrectly, usage: $0 interface event [mac_address]"
        ;;
esac</pre></li><li class="listitem"><p class="simpara">
						Create the <code class="literal">/etc/systemd/system/802-1x-tr-mgmt@.service</code> systemd service file with the following content:
					</p><pre class="screen">[Unit]
Description=Example 802.1x traffic management for hostapd
After=hostapd.service
After=sys-devices-virtual-net-%i.device

[Service]
Type=simple
ExecStartPre=bash -c '/usr/sbin/hostapd_cli ping | grep PONG'
ExecStartPre=/usr/local/bin/802-1x-tr-mgmt %i block_all
ExecStart=/usr/sbin/hostapd_cli -i %i -a /usr/local/bin/802-1x-tr-mgmt
ExecStopPost=/usr/local/bin/802-1x-tr-mgmt %i allow_all

[Install]
WantedBy=multi-user.target</pre></li><li class="listitem"><p class="simpara">
						Reload systemd:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl daemon-reload</strong></span></pre></li><li class="listitem"><p class="simpara">
						Enable and start the <code class="literal">802-1x-tr-mgmt</code> service with the interface name <code class="literal">hostapd</code> is listening on:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl enable --now 802-1x-tr-mgmt@br0.service</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Authenticate with a client to the network. See <a class="link" href="#proc_testing-eap-ttls-authentication-against-a-freeradius-server-or-authenticator_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend" title="35.5. Testing EAP-TTLS authentication against a FreeRADIUS server or authenticator">Testing EAP-TTLS authentication against a FreeRADIUS server or authenticator</a>.
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">systemd.service(5)</code> man page on your system
					</li></ul></div></section></section><section class="chapter" id="getting-started-with-multipath-tcp_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 36. Getting started with Multipath TCP</h2></div></div></div><p class="_abstract _abstract">
			Transmission Control Protocol (TCP) ensures reliable delivery of the data through the internet and automatically adjusts its bandwidth in response to network load. Multipath TCP (MPTCP) is an extension to the original TCP protocol (single-path). MPTCP enables a transport connection to operate across multiple paths simultaneously, and brings network connection redundancy to user endpoint devices.
		</p><section class="section" id="understanding-mptcp_getting-started-with-multipath-tcp"><div class="titlepage"><div><div><h3 class="title">36.1. Understanding MPTCP</h3></div></div></div><p>
				The Multipath TCP (MPTCP) protocol allows for simultaneous usage of multiple paths between connection endpoints. The protocol design improves connection stability and also brings other benefits compared to the single-path TCP.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					In MPTCP terminology, links are considered as paths.
				</p></div></rh-alert><p>
				The following are some of the advantages of using MPTCP:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						It allows a connection to simultaneously use multiple network interfaces.
					</li><li class="listitem">
						In case a connection is bound to a link speed, the usage of multiple links can increase the connection throughput. Note, that in case of the connection is bound to a CPU, the usage of multiple links causes the connection slowdown.
					</li><li class="listitem">
						It increases the resilience to link failures.
					</li></ul></div><p>
				For more details about MPTCP, review the <span class="emphasis"><em>Additional resources</em></span>.
			</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://www.redhat.com/en/blog/understanding-multipath-tcp-networking-highway-future">Understanding Multipath TCP: High availability for endpoints and the networking highway of the future</a>
					</li><li class="listitem">
						<a class="link" href="https://www.rfc-editor.org/rfc/rfc8684">RFC8684: TCP Extensions for Multipath Operation with Multiple Addresses</a>
					</li></ul></div></section><section class="section" id="preparing-rhel-to-enable-mptcp-support_getting-started-with-multipath-tcp"><div class="titlepage"><div><div><h3 class="title">36.2. Preparing RHEL to enable MPTCP support</h3></div></div></div><p class="_abstract _abstract">
				By default the MPTCP support is disabled in RHEL. Enable MPTCP so that applications that support this feature can use it. Additionally, you have to configure user space applications to force use MPTCP sockets if those applications have TCP sockets by default.
			</p><div class="formalpara"><p class="title"><strong>Prerequisites</strong></p><p>
					The following packages are installed:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">iperf3</code>
					</li><li class="listitem">
						<code class="literal">mptcpd</code>
					</li><li class="listitem">
						<code class="literal">systemtap</code>
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enable MPTCP sockets in the kernel:
					</p><pre class="literallayout"># <span class="strong strong"><strong>echo "net.mptcp.enabled=1" &gt; /etc/sysctl.d/90-enable-MPTCP.conf</strong></span>
# <span class="strong strong"><strong>sysctl -p /etc/sysctl.d/90-enable-MPTCP.conf</strong></span></pre></li><li class="listitem"><p class="simpara">
						Start the <code class="literal">iperf3</code> server, and force it to create MPTCP sockets instead of TCP sockets:
					</p><pre class="literallayout"># <span class="strong strong"><strong>mptcpize run iperf3 -s</strong></span>

Server listening on 5201</pre></li><li class="listitem"><p class="simpara">
						Connect the client to the server, and force it to create MPTCP sockets instead of TCP sockets:
					</p><pre class="literallayout"># <span class="strong strong"><strong>mptcpize iperf3 -c 127.0.0.1 -t 3</strong></span></pre></li><li class="listitem"><p class="simpara">
						After the connection is established, verify the <code class="literal">ss</code> output to see the subflow-specific status:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ss -nti '( dport :5201 )'</strong></span>

State Recv-Q Send-Q Local Address:Port Peer Address:Port Process
ESTAB 0      0      127.0.0.1:41842    127.0.0.1:5201
cubic wscale:7,7 rto:205 rtt:4.455/8.878 ato:40 mss:21888 pmtu:65535 rcvmss:536 advmss:65483 cwnd:10 bytes_sent:141 bytes_acked:142 bytes_received:4 segs_out:8 segs_in:7 data_segs_out:3 data_segs_in:3 send 393050505bps lastsnd:2813 lastrcv:2772 lastack:2772 pacing_rate 785946640bps delivery_rate 10944000000bps delivered:4 busy:41ms rcv_space:43690 rcv_ssthresh:43690 minrtt:0.008 tcp-ulp-mptcp flags:Mmec token:0000(id:0)/2ff053ec(id:0) seq:3e2cbea12d7673d4 sfseq:3 ssnoff:ad3d00f4 maplen:2</pre></li><li class="listitem"><p class="simpara">
						Verify MPTCP counters:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nstat MPTcp</strong></span>*

#kernel
MPTcpExtMPCapableSYNRX          2                  0.0
MPTcpExtMPCapableSYNTX          2                  0.0
MPTcpExtMPCapableSYNACKRX       2                  0.0
MPTcpExtMPCapableACKRX          2                  0.0</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">tcp(7)</code> and <code class="literal">mptcpize(8)</code> man pages on your system
					</li></ul></div></section><section class="section" id="using-iproute2-to-temporarily-configure-and-enable-multiple-paths-for-mptcp-applications_getting-started-with-multipath-tcp"><div class="titlepage"><div><div><h3 class="title">36.3. Using iproute2 to temporarily configure and enable multiple paths for MPTCP applications</h3></div></div></div><p class="_abstract _abstract">
				Each MPTCP connection uses a single subflow similar to plain TCP. To get the MPTCP benefits, specify a higher limit for maximum number of subflows for each MPTCP connection. Then configure additional endpoints to create those subflows.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					The configuration in this procedure will not persist after rebooting your machine.
				</p></div></rh-alert><p>
				Note that MPTCP does not yet support mixed IPv6 and IPv4 endpoints for the same socket. Use endpoints belonging to the same address family.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">mptcpd</code> package is installed
					</li><li class="listitem">
						The <code class="literal">iperf3</code> package is installed
					</li><li class="listitem"><p class="simpara">
						Server network interface settings:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								enp4s0: <code class="literal">192.0.2.1/24</code>
							</li><li class="listitem">
								enp1s0: <code class="literal">198.51.100.1/24</code>
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Client network interface settings:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								enp4s0f0: <code class="literal">192.0.2.2/24</code>
							</li><li class="listitem">
								enp4s0f1: <code class="literal">198.51.100.2/24</code>
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Configure the client to accept up to 1 additional remote address, as provided by the server:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip mptcp limits set add_addr_accepted <span class="emphasis"><em>1</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Add IP address <code class="literal">198.51.100.1</code> as a new MPTCP endpoint on the server:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip mptcp endpoint add <span class="emphasis"><em>198.51.100.1</em></span> dev <span class="emphasis"><em>enp1s0</em></span> <span class="emphasis"><em>signal</em></span></strong></span></pre><p class="simpara">
						The <code class="literal">signal</code> option ensures that the <code class="literal">ADD_ADDR</code> packet is sent after the three-way-handshake.
					</p></li><li class="listitem"><p class="simpara">
						Start the <code class="literal">iperf3</code> server, and force it to create MPTCP sockets instead of TCP sockets:
					</p><pre class="literallayout"># <span class="strong strong"><strong>mptcpize run iperf3 -s</strong></span>

Server listening on 5201</pre></li><li class="listitem"><p class="simpara">
						Connect the client to the server, and force it to create MPTCP sockets instead of TCP sockets:
					</p><pre class="literallayout"># <span class="strong strong"><strong>mptcpize iperf3 -c 192.0.2.1 -t 3</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify the connection is established:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ss -nti '( sport :5201 )'</strong></span></pre></li><li class="listitem"><p class="simpara">
						Verify the connection and IP address limit:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip mptcp limit show</strong></span></pre></li><li class="listitem"><p class="simpara">
						Verify the newly added endpoint:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip mptcp endpoint show</strong></span></pre></li><li class="listitem"><p class="simpara">
						Verify MPTCP counters by using the <code class="literal">nstat MPTcp*</code> command on a server:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nstat MPTcp</strong></span>*

#kernel
MPTcpExtMPCapableSYNRX          2                  0.0
MPTcpExtMPCapableACKRX          2                  0.0
MPTcpExtMPJoinSynRx             2                  0.0
MPTcpExtMPJoinAckRx             2                  0.0
MPTcpExtEchoAdd                 2                  0.0</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">mptcpize(8)</code> and <code class="literal">ip-mptcp(8)</code> man pages on your system
					</li></ul></div></section><section class="section" id="proc_permanently-configuring-multiple-paths-for-mptcp-applications_getting-started-with-multipath-tcp"><div class="titlepage"><div><div><h3 class="title">36.4. Permanently configuring multiple paths for MPTCP applications</h3></div></div></div><p>
				You can configure MultiPath TCP (MPTCP) using the <code class="literal">nmcli</code> command to permanently establish multiple subflows between a source and destination system. The subflows can use different resources, different routes to the destination, and even different networks. Such as Ethernet, cellular, wifi, and so on. As a result, you achieve combined connections, which increase network resilience and throughput.
			</p><p>
				The server uses the following network interfaces in our example:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						enp4s0: <code class="literal">192.0.2.1/24</code>
					</li><li class="listitem">
						enp1s0: <code class="literal">198.51.100.1/24</code>
					</li><li class="listitem">
						enp7s0: <code class="literal">192.0.2.3/24</code>
					</li></ul></div><p>
				The client uses the following network interfaces in our example:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						enp4s0f0: <code class="literal">192.0.2.2/24</code>
					</li><li class="listitem">
						enp4s0f1: <code class="literal">198.51.100.2/24</code>
					</li><li class="listitem">
						enp6s0: <code class="literal">192.0.2.5/24</code>
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You configured the default gateway on the relevant interfaces.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enable MPTCP sockets in the kernel:
					</p><pre class="literallayout"># <span class="strong strong"><strong>echo "net.mptcp.enabled=1" &gt; /etc/sysctl.d/90-enable-MPTCP.conf</strong></span>
# <span class="strong strong"><strong>sysctl -p /etc/sysctl.d/90-enable-MPTCP.conf</strong></span></pre></li><li class="listitem"><p class="simpara">
						Optional: The RHEL kernel default for subflow limit is 2. If you require more:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create the <code class="literal">/etc/systemd/system/set_mptcp_limit.service</code> file with the following content:
							</p><pre class="screen">[Unit]
Description=Set MPTCP subflow limit to 3
After=network.target

[Service]
ExecStart=ip mptcp limits set subflows 3
Type=oneshot

[Install]
WantedBy=multi-user.target</pre><p class="simpara">
								The <span class="strong strong"><strong>oneshot</strong></span> unit executes the <code class="literal">ip mptcp limits set subflows 3</code> command after your network (<code class="literal">network.target</code>) is operational during every boot process.
							</p><p class="simpara">
								The <code class="literal">ip mptcp limits set subflows 3</code> command sets the maximum number of <span class="emphasis"><em>additional</em></span> subflows for each connection, so 4 in total. It is possible to add maximally 3 additional subflows.
							</p></li><li class="listitem"><p class="simpara">
								Enable the <code class="literal">set_mptcp_limit</code> service:
							</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl enable --now set_mptcp_limit</strong></span></pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Enable MPTCP on all connection profiles that you want to use for connection aggregation:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>&lt;profile_name&gt;</em></span> connection.mptcp-flags signal,subflow,also-without-default-route</strong></span></pre><p class="simpara">
						The <code class="literal">connection.mptcp-flags</code> parameter configures MPTCP endpoints and the IP address flags. If MPTCP is enabled in a NetworkManager connection profile, the setting will configure the IP addresses of the relevant network interface as MPTCP endpoints.
					</p><p class="simpara">
						By default, NetworkManager does not add MPTCP flags to IP addresses if there is no default gateway. If you want to bypass that check, you need to use also the <code class="literal">also-without-default-route</code> flag.
					</p></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify that you enabled the MPTCP kernel parameter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>sysctl net.mptcp.enabled</strong></span>
net.mptcp.enabled = 1</pre></li><li class="listitem"><p class="simpara">
						Verify that you set the subflow limit correctly, in case the default was not enough:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip mptcp limit show</strong></span>
add_addr_accepted 2 subflows 3</pre></li><li class="listitem"><p class="simpara">
						Verify that you configured the per-address MPTCP setting correctly:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip mptcp endpoint show</strong></span>
192.0.2.1 id 1 subflow dev enp4s0
198.51.100.1 id 2 subflow dev enp1s0
192.0.2.3 id 3 subflow dev enp7s0
192.0.2.4 id 4 subflow dev enp3s0
...</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nm-settings-nmcli(5)</code>
					</li><li class="listitem">
						<code class="literal">ip-mptcp(8)</code>
					</li><li class="listitem">
						<a class="xref" href="#understanding-mptcp_getting-started-with-multipath-tcp" title="36.1. Understanding MPTCP">Section 36.1, “Understanding MPTCP”</a>
					</li><li class="listitem">
						<a class="link" href="https://www.redhat.com/en/blog/understanding-multipath-tcp-networking-highway-future">Understanding Multipath TCP: High availability for endpoints and the networking highway of the future</a>
					</li><li class="listitem">
						<a class="link" href="https://www.rfc-editor.org/rfc/rfc8684">RFC8684: TCP Extensions for Multipath Operation with Multiple Addresses</a>
					</li><li class="listitem">
						<a class="link" href="https://www.redhat.com/en/blog/using-multipath-tcp-better-survive-outages-and-increase-bandwidth">Using Multipath TCP to better survive outages and increase bandwidth</a>
					</li></ul></div></section><section class="section" id="proc_monitoring-mptcp-sub-flows_getting-started-with-multipath-tcp"><div class="titlepage"><div><div><h3 class="title">36.5. Monitoring MPTCP sub-flows</h3></div></div></div><p>
				The life cycle of a multipath TCP (MPTCP) socket can be complex: The main MPTCP socket is created, the MPTCP path is validated, one or more sub-flows are created and eventually removed. Finally, the MPTCP socket is terminated.
			</p><p>
				The MPTCP protocol allows monitoring MPTCP-specific events related to socket and sub-flow creation and deletion, using the <code class="literal">ip</code> utility provided by the <code class="literal">iproute</code> package. This utility uses the <code class="literal">netlink</code> interface to monitor MPTCP events.
			</p><p>
				This procedure demonstrates how to monitor MPTCP events. For that, it simulates a MPTCP server application, and a client connects to this service. The involved clients in this example use the following interfaces and IP addresses:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Server: <code class="literal">192.0.2.1</code>
					</li><li class="listitem">
						Client (Ethernet connection): <code class="literal">192.0.2.2</code>
					</li><li class="listitem">
						Client (WiFi connection): <code class="literal">192.0.2.3</code>
					</li></ul></div><p>
				To simplify this example, all interfaces are within the same subnet. This is not a requirement. However, it is important that routing has been configured correctly, and the client can reach the server via both interfaces.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A RHEL client with two network interfaces, such as a laptop with Ethernet and WiFi
					</li><li class="listitem">
						The client can connect to the server via both interfaces
					</li><li class="listitem">
						A RHEL server
					</li><li class="listitem">
						Both the client and the server run RHEL 9.0 or later
					</li><li class="listitem">
						You installed the <code class="literal">mptcpd</code> package on both the client and the server
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Set the per connection additional subflow limits to <code class="literal">1</code> on both client and server:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip mptcp limits set add_addr_accepted 0 subflows 1</strong></span></pre></li><li class="listitem"><p class="simpara">
						On the server, to simulate a MPTCP server application, start <code class="literal">netcat</code> (<code class="literal">nc</code>) in listen mode with enforced MPTCP sockets instead of TCP sockets:
					</p><pre class="literallayout"># <span class="strong strong"><strong>mptcpize run nc -l -k -p <span class="emphasis"><em>12345</em></span></strong></span></pre><p class="simpara">
						The <code class="literal">-k</code> option causes that <code class="literal">nc</code> does not close the listener after the first accepted connection. This is required to demonstrate the monitoring of sub-flows.
					</p></li><li class="listitem"><p class="simpara">
						On the client:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Identify the interface with the lowest metric:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip -4 route</strong></span>
192.0.2.0/24 dev enp1s0 proto kernel scope link src 192.0.2.2 metric 100
192.0.2.0/24 dev wlp1s0 proto kernel scope link src 192.0.2.3 metric 600</pre><p class="simpara">
								The <code class="literal">enp1s0</code> interface has a lower metric than <code class="literal">wlp1s0</code>. Therefore, RHEL uses <code class="literal">enp1s0</code> by default.
							</p></li><li class="listitem"><p class="simpara">
								On the first terminal, start the monitoring:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip mptcp monitor</strong></span></pre></li><li class="listitem"><p class="simpara">
								On the second terminal, start a MPTCP connection to the server:
							</p><pre class="literallayout"># <span class="strong strong"><strong>mptcpize run nc 192.0.2.1 12345</strong></span></pre><p class="simpara">
								RHEL uses the <code class="literal">enp1s0</code> interface and its associated IP address as a source for this connection.
							</p><p class="simpara">
								On the monitoring terminal, the <code class="literal">ip mptcp monitor</code> command now logs:
							</p><pre class="literallayout">[       CREATED] token=63c070d2 remid=0 locid=0 saddr4=192.0.2.2 daddr4=192.0.2.1 sport=36444 dport=12345</pre><p class="simpara">
								The token identifies the MPTCP socket as an unique ID, and later it enables you to correlate MPTCP events on the same socket.
							</p></li><li class="listitem"><p class="simpara">
								On the terminal with the running <code class="literal">nc</code> connection to the server, press <kbd class="keycap">Enter</kbd>. This first data packet fully establishes the connection. Note that, as long as no data has been sent, the connection is not established.
							</p><p class="simpara">
								On the monitoring terminal, <code class="literal">ip mptcp monitor</code> now logs:
							</p><pre class="literallayout">[   ESTABLISHED] token=63c070d2 remid=0 locid=0 saddr4=192.0.2.2 daddr4=192.0.2.1 sport=36444 dport=12345</pre></li><li class="listitem"><p class="simpara">
								Optional: Display the connections to port <code class="literal">12345</code> on the server:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ss -taunp | grep ":12345"</strong></span>
tcp ESTAB  0  0         192.0.2.2:36444 192.0.2.1:12345</pre><p class="simpara">
								At this point, only one connection to the server has been established.
							</p></li><li class="listitem"><p class="simpara">
								On a third terminal, create another endpoint:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip mptcp endpoint add dev wlp1s0 192.0.2.3 subflow</strong></span></pre><p class="simpara">
								This command sets the name and IP address of the WiFi interface of the client in this command.
							</p><p class="simpara">
								On the monitoring terminal, <code class="literal">ip mptcp monitor</code> now logs:
							</p><pre class="literallayout">[SF_ESTABLISHED] token=63c070d2 remid=0 locid=2 saddr4=192.0.2.3 daddr4=192.0.2.1 sport=53345 dport=12345 backup=0 ifindex=3</pre><p class="simpara">
								The <code class="literal">locid</code> field displays the local address ID of the new sub-flow and identifies this sub-flow even if the connection uses network address translation (NAT). The <code class="literal">saddr4</code> field matches the endpoint’s IP address from the <code class="literal">ip mptcp endpoint add</code> command.
							</p></li><li class="listitem"><p class="simpara">
								Optional: Display the connections to port <code class="literal">12345</code> on the server:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ss -taunp | grep ":12345"</strong></span>
tcp ESTAB  0  0         192.0.2.2:36444 192.0.2.1:12345
tcp ESTAB  0  0  192.0.2.3%wlp1s0:53345 192.0.2.1:12345</pre><p class="simpara">
								The command now displays two connections:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										The connection with source address <code class="literal">192.0.2.2</code> corresponds to the first MPTCP sub-flow that you established previously.
									</li><li class="listitem">
										The connection from the sub-flow over the <code class="literal">wlp1s0</code> interface with source address <code class="literal">192.0.2.3</code>.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								On the third terminal, delete the endpoint:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip mptcp endpoint delete id 2</strong></span></pre><p class="simpara">
								Use the ID from the <code class="literal">locid</code> field from the <code class="literal">ip mptcp monitor</code> output, or retrieve the endpoint ID using the <code class="literal">ip mptcp endpoint show</code> command.
							</p><p class="simpara">
								On the monitoring terminal, <code class="literal">ip mptcp monitor</code> now logs:
							</p><pre class="literallayout">[     SF_CLOSED] token=63c070d2 remid=0 locid=2 saddr4=192.0.2.3 daddr4=192.0.2.1 sport=53345 dport=12345 backup=0 ifindex=3</pre></li><li class="listitem"><p class="simpara">
								On the first terminal with the <code class="literal">nc</code> client, press <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">C</kbd> to terminate the session.
							</p><p class="simpara">
								On the monitoring terminal, <code class="literal">ip mptcp monitor</code> now logs:
							</p><pre class="literallayout">[        CLOSED] token=63c070d2</pre></li></ol></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">ip-mptcp(1)</code> man page on your system
					</li><li class="listitem">
						<a class="link" href="#con_how-networkmanager-manages-multiple-default-gateways_managing-the-default-gateway-setting" title="25.7. How NetworkManager manages multiple default gateways">How NetworkManager manages multiple default gateways</a>
					</li></ul></div></section><section class="section" id="disabling-multipath-tcp-in-the-kernel_getting-started-with-multipath-tcp"><div class="titlepage"><div><div><h3 class="title">36.6. Disabling Multipath TCP in the kernel</h3></div></div></div><p class="_abstract _abstract">
				You can explicitly disable the MPTCP option in the kernel.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Disable the <code class="literal">mptcp.enabled</code> option.
					</p><pre class="literallayout"># <span class="strong strong"><strong>echo "net.mptcp.enabled=0" &gt; /etc/sysctl.d/90-enable-MPTCP.conf</strong></span>
# <span class="strong strong"><strong>sysctl -p /etc/sysctl.d/90-enable-MPTCP.conf</strong></span></pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify whether the <code class="literal">mptcp.enabled</code> is disabled in the kernel.
					</p><pre class="literallayout"># <span class="strong strong"><strong>sysctl -a | grep mptcp.enabled</strong></span>
net.mptcp.enabled = 0</pre></li></ul></div></section></section><section class="chapter" id="assembly_managing-the-mptcpd-service_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 37. Managing the mptcpd service</h2></div></div></div><p class="_abstract _abstract">
			This section describes the basic management of the <code class="literal">mptcpd</code> service. The <code class="literal">mptcpd</code> package provides the <code class="literal">mptcpize</code> tool, which switches on the <code class="literal">mptcp</code> protocol in the <code class="literal">TCP</code> environment.
		</p><section class="section" id="proc_configuring-mptcpd_assembly_managing-the-mptcpd-service"><div class="titlepage"><div><div><h3 class="title">37.1. Configuring mptcpd</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">mptcpd</code> service is a component of the <code class="literal">mptcp</code> protocol which provides an instrument to configure <code class="literal">mptcp</code> endpoints. The <code class="literal">mptcpd</code> service creates a subflow endpoint for each address by default. The endpoint list is updated dynamically according to IP addresses modification on the running host. The <code class="literal">mptcpd</code> service creates the list of endpoints automatically. It enables multiple paths as an alternative to using the <code class="literal">ip</code> utility.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">mptcpd</code> package installed
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enable <code class="literal">mptcp.enabled</code> option in the kernel with the following command:
					</p><pre class="literallayout"># <span class="strong strong"><strong>echo "net.mptcp.enabled=1" &gt; /etc/sysctl.d/90-enable-MPTCP.conf</strong></span>
# <span class="strong strong"><strong>sysctl -p /etc/sysctl.d/90-enable-MPTCP.conf</strong></span></pre></li><li class="listitem"><p class="simpara">
						Start the <code class="literal">mptcpd</code> service:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl start mptcp.service</strong></span></pre></li><li class="listitem"><p class="simpara">
						Verify endpoint creation:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip mptcp endpoint</strong></span></pre></li><li class="listitem"><p class="simpara">
						To stop the <code class="literal">mptcpd</code> service, use the following command:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl stop mptcp.service</strong></span></pre></li><li class="listitem">
						To configure <code class="literal">mptcpd</code> service manually, modify the <code class="literal">/etc/mptcpd/mptcpd.conf</code> configuration file.
					</li></ol></div><p>
				Note, that the endpoint, which mptcpd service creates, lasts till the host shutdown.
			</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">mptcpd(8)</code> man page on your system.
					</li></ul></div></section><section class="section" id="proc_managing-applications-with-mptcpize-tool_assembly_managing-the-mptcpd-service"><div class="titlepage"><div><div><h3 class="title">37.2. Managing applications with mptcpize tool</h3></div></div></div><p class="_abstract _abstract">
				Using the <code class="literal">mptcpize</code> tool manage applications and services.
			</p><p>
				The instruction below shows how to use the <code class="literal">mptcpize</code> tool to manage applications in the <code class="literal">TCP</code> environment.
			</p><p>
				Assuming, you need to run the <code class="literal">iperf3</code> utility with the enabled <code class="literal">MPTCP</code> socket. You can achieve this goal by following the procedure below.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">mptcpd</code> package is installed
					</li><li class="listitem">
						The <code class="literal">iperf3</code> package is installed
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Start <code class="literal">iperf3</code> utility with <code class="literal">MPTCP</code> sockets enabled:
					</p><pre class="literallayout"># <span class="strong strong"><strong>mptcpize run iperf3 -s &amp;</strong></span></pre></li></ul></div></section><section class="section" id="proc_enabling-mptcp-sockets-for-a-services-using-the-mptcpize-utility_assembly_managing-the-mptcpd-service"><div class="titlepage"><div><div><h3 class="title">37.3. Enabling MPTCP sockets for a services using the mptcpize utility</h3></div></div></div><p class="_abstract _abstract">
				The following set of commands instruct you how to manage services using the <code class="literal">mptcpize</code> tool. You can enable or disable the <code class="literal">mptcp</code> socket for a service.
			</p><p>
				Assuming, you need to manage <code class="literal">mptcp</code> socket for the <code class="literal">nginx</code> service. You can achieve this goal by following the procedure below.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">mptcpd</code> package is installed
					</li><li class="listitem">
						The <code class="literal">nginx</code> package is installed
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enable <code class="literal">MPTCP</code> sockets for a service:
					</p><pre class="literallayout"># <span class="strong strong"><strong>mptcpize enable nginx</strong></span></pre></li><li class="listitem"><p class="simpara">
						Disable the <code class="literal">MPTCP</code> sockets for a service:
					</p><pre class="literallayout"># <span class="strong strong"><strong>mptcpize disable nginx</strong></span></pre></li><li class="listitem"><p class="simpara">
						Restart the service to make the changes to take effect:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl restart nginx</strong></span></pre></li></ol></div></section></section><section class="chapter" id="assembly_networkmanager-connection-profiles-in-keyfile-format_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 38. NetworkManager connection profiles in keyfile format</h2></div></div></div><p class="_abstract _abstract">
			By default, NetworkManager in Red Hat Enterprise Linux 9 and later stores connection profiles in keyfile format. Unlike the deprecated <code class="literal">ifcfg</code> format, the keyfile format supports all connection settings that NetworkManager provides.
		</p><section class="section" id="con_the-keyfile-format-of-networkmanager-profiles_assembly_networkmanager-connection-profiles-in-keyfile-format"><div class="titlepage"><div><div><h3 class="title">38.1. The keyfile format of NetworkManager profiles</h3></div></div></div><p class="_abstract _abstract">
				The keyfile format is similar to the INI format. For example, the following is an Ethernet connection profile in keyfile format:
			</p><pre class="screen">[connection]
id=<span class="emphasis"><em>example_connection</em></span>
uuid=<span class="emphasis"><em>82c6272d-1ff7-4d56-9c7c-0eb27c300029</em></span>
type=<span class="emphasis"><em>ethernet</em></span>
autoconnect=<span class="emphasis"><em>true</em></span>

[ipv4]
method=<span class="emphasis"><em>auto</em></span>

[ipv6]
method=<span class="emphasis"><em>auto</em></span>

[ethernet]
mac-address=<span class="emphasis"><em>00:53:00:8f:fa:66</em></span></pre><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					Typos or incorrect placements of parameters can lead to unexpected behavior. Therefore, do not manually edit or create NetworkManager profiles.
				</p><p>
					Use the <code class="literal">nmcli</code> utility, the <code class="literal">network</code> RHEL system role, or the <code class="literal">nmstate</code> API to manage NetworkManager connections. For example, you can use the <a class="link" href="#proc_using-nmcli-to-create-keyfile-connection-profiles-in-offline-mode_assembly_networkmanager-connection-profiles-in-keyfile-format" title="38.2. Using nmcli to create keyfile connection profiles in offline mode"><code class="literal">nmcli</code> utility in offline mode</a> to create connection profiles.
				</p></div></rh-alert><p>
				Each section corresponds to a NetworkManager setting name as described in the <code class="literal">nm-settings(5)</code> and <code class="literal">nm-settings-keyfile(5)</code> man pages. Each key-value-pair in a section is one of the properties listed in the settings specification of the man page.
			</p><p>
				Most variables in NetworkManager keyfiles have a one-to-one mapping. This means that a NetworkManager property is stored in the keyfile as a variable of the same name and in the same format. However, there are exceptions, mainly to make the keyfile syntax easier to read. For a list of these exceptions, see the <code class="literal">nm-settings-keyfile(5)</code> man page on your system.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					For security reasons, because connection profiles can contain sensitive information, such as private keys and passphrases, NetworkManager uses only configuration files owned by the <code class="literal">root</code> user and that are only readable and writable by <code class="literal">root</code>.
				</p></div></rh-alert><p>
				Depending on the purpose of the connection profile, save it in one of the following directories:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">/etc/NetworkManager/system-connections/</code>: The location of persistent profiles. If you modify a persistent profile by using the NetworkManager API, NetworkManager writes and overwrites files in this directory.
					</li><li class="listitem">
						<code class="literal">/run/NetworkManager/system-connections/</code>: For temporary profiles that are automatically removed when you reboot the system.
					</li><li class="listitem">
						<code class="literal">/usr/lib/NetworkManager/system-connections/</code>: For pre-deployed immutable profiles. When you edit such a profile by using the NetworkManager API, NetworkManager copies this profile to either the persistent or temporary storage.
					</li></ul></div><p>
				NetworkManager does not automatically reload profiles from disk. When you create or update a connection profile in keyfile format, use the <code class="literal">nmcli connection reload</code> command to inform NetworkManager about the changes.
			</p></section><section class="section" id="proc_using-nmcli-to-create-keyfile-connection-profiles-in-offline-mode_assembly_networkmanager-connection-profiles-in-keyfile-format"><div class="titlepage"><div><div><h3 class="title">38.2. Using <code class="literal">nmcli</code> to create keyfile connection profiles in offline mode</h3></div></div></div><p>
				Use NetworkManager utilities, such as <code class="literal">nmcli</code>, the <code class="literal">network</code> RHEL system role, or the <code class="literal">nmstate</code> API to manage NetworkManager connections, to create and update configuration files. However, you can also create various connection profiles in the keyfile format in offline mode by using the <code class="literal">nmcli --offline connection add</code> command.
			</p><p>
				The offline mode ensures that <code class="literal">nmcli</code> operates without the <code class="literal">NetworkManager</code> service to produce keyfile connection profiles through standard output. This feature can be useful in the following scenarios:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						You want to create your connection profiles that need to be pre-deployed somewhere. For example in a container image, or as an RPM package.
					</li><li class="listitem">
						You want to create your connection profiles in an environment where the <code class="literal">NetworkManager</code> service is not available, for example, when you want to use the <code class="literal">chroot</code> utility. Alternatively, when you want to create or modify the network configuration of the RHEL system to be installed through the Kickstart <code class="literal">%post</code> script.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a new connection profile in the keyfile format. For example, for a connection profile of an Ethernet device that does not use DHCP, run a similar <code class="literal">nmcli</code> command:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli --offline connection add type ethernet con-name Example-Connection ipv4.addresses 192.0.2.1/24 ipv4.dns 192.0.2.200 ipv4.method manual &gt; /etc/NetworkManager/system-connections/example.nmconnection</strong></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							The connection name you specified with the <code class="literal">con-name</code> key is saved into the <code class="literal">id</code> variable of the generated profile. When you use the <code class="literal">nmcli</code> command to manage this connection later, specify the connection as follows:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									When the <code class="literal">id</code> variable is not omitted, use the connection name, for example <code class="literal">Example-Connection</code>.
								</li><li class="listitem">
									When the <code class="literal">id</code> variable is omitted, use the file name without the <code class="literal">.nmconnection</code> suffix, for example <code class="literal">output</code>.
								</li></ul></div></div></rh-alert></li><li class="listitem"><p class="simpara">
						Set permissions to the configuration file so that only the <code class="literal">root</code> user can read and update it:
					</p><pre class="literallayout"># <span class="strong strong"><strong>chmod 600 /etc/NetworkManager/system-connections/example.nmconnection</strong></span>
# <span class="strong strong"><strong>chown root:root /etc/NetworkManager/system-connections/example.nmconnection</strong></span></pre></li><li class="listitem"><p class="simpara">
						Start the <code class="literal">NetworkManager</code> service:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl start NetworkManager.service</strong></span></pre></li><li class="listitem"><p class="simpara">
						If you set the <code class="literal">autoconnect</code> variable in the profile to <code class="literal">false</code>, activate the connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up Example-Connection</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify that the <code class="literal">NetworkManager</code> service is running:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl status NetworkManager.service</strong></span>
● NetworkManager.service - Network Manager
   Loaded: loaded (/usr/lib/systemd/system/NetworkManager.service; enabled; vendor preset: enabled)
   Active: active (running) since Wed 2022-08-03 13:08:32 CEST; 1min 40s ago
...</pre></li><li class="listitem"><p class="simpara">
						Verify that NetworkManager can read the profile from the configuration file:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli -f TYPE,FILENAME,NAME connection</strong></span>
TYPE      FILENAME                                                     NAME
<span class="strong strong"><strong>ethernet /etc/NetworkManager/system-connections/examaple.nmconnection Example-Connection</strong></span>
ethernet  /etc/sysconfig/network-scripts/ifcfg-enp1s0                  enp1s0
...</pre><p class="simpara">
						If the output does not show the newly created connection, verify that the keyfile permissions and the syntax you used are correct.
					</p></li><li class="listitem"><p class="simpara">
						Display the connection profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection show Example-Connection</strong></span>
connection.id:                          Example-Connection
connection.uuid:                        232290ce-5225-422a-9228-cb83b22056b4
connection.stable-id:                   --
connection.type:                        802-3-ethernet
connection.interface-name:              --
connection.autoconnect:                 yes
...</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nmcli(1)</code> and <code class="literal">nm-settings-keyfile(5)</code> on your system
					</li></ul></div></section><section class="section" id="proc_manually-creating-a-networkmanager-profile-in-keyfile-format_assembly_networkmanager-connection-profiles-in-keyfile-format"><div class="titlepage"><div><div><h3 class="title">38.3. Manually creating a NetworkManager profile in keyfile format</h3></div></div></div><p class="_abstract _abstract">
				You can manually create a NetworkManager connection profile in keyfile format.
			</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					Manually creating or updating the configuration files can result in an unexpected or non-functional network configuration. As an alternative, you can use <code class="literal">nmcli</code> in offline mode. See <a class="link" href="#proc_using-nmcli-to-create-keyfile-connection-profiles-in-offline-mode_assembly_networkmanager-connection-profiles-in-keyfile-format" title="38.2. Using nmcli to create keyfile connection profiles in offline mode">Using nmcli to create keyfile connection profiles in offline mode</a>
				</p></div></rh-alert><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						If you create a profile for a hardware interface, such as Ethernet, display the MAC address of this interface:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip address show enp1s0</strong></span>
2: enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether <span class="strong strong"><strong>00:53:00:8f:fa:66</strong></span> brd ff:ff:ff:ff:ff:ff</pre></li><li class="listitem"><p class="simpara">
						Create a connection profile. For example, for a connection profile of an Ethernet device that uses DHCP, create the <code class="literal">/etc/NetworkManager/system-connections/example.nmconnection</code> file with the following content:
					</p><pre class="screen">[connection]
id=Example-Connection
type=ethernet
autoconnect=true

[ipv4]
method=auto

[ipv6]
method=auto

[ethernet]
mac-address=00:53:00:8f:fa:66</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							You can use any file name with a <code class="literal">.nmconnection</code> suffix. However, when you later use <code class="literal">nmcli</code> commands to manage the connection, you must use the connection name set in the <code class="literal">id</code> variable when you refer to this connection. When you omit the <code class="literal">id</code> variable, use the file name without the <code class="literal">.nmconnection</code> to refer to this connection.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Set permissions on the configuration file so that only the <code class="literal">root</code> user can read and update it:
					</p><pre class="literallayout"># <span class="strong strong"><strong>chown root:root /etc/NetworkManager/system-connections/example.nmconnection</strong></span>
# <span class="strong strong"><strong>chmod 600 /etc/NetworkManager/system-connections/example.nmconnection</strong></span></pre></li><li class="listitem"><p class="simpara">
						Reload the connection profiles:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection reload</strong></span></pre></li><li class="listitem"><p class="simpara">
						Verify that NetworkManager read the profile from the configuration file:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli -f NAME,UUID,FILENAME connection</strong></span>
NAME                UUID                                  FILENAME
Example-Connection  86da2486-068d-4d05-9ac7-957ec118afba  /etc/NetworkManager/system-connections/example.nmconnection
...</pre><p class="simpara">
						If the command does not show the newly added connection, verify that the file permissions and the syntax you used in the file are correct.
					</p></li><li class="listitem"><p class="simpara">
						If you set the <code class="literal">autoconnect</code> variable in the profile to <code class="literal">false</code>, activate the connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up example_connection</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Display the connection profile:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection show example_connection</strong></span></pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nm-settings-keyfile(5)</code> man page on your system
					</li></ul></div></section><section class="section" id="the-differences-in-interface-renaming-with-profiles-in-ifcfg-and-keyfile-format_assembly_networkmanager-connection-profiles-in-keyfile-format"><div class="titlepage"><div><div><h3 class="title">38.4. The differences in interface renaming with profiles in ifcfg and keyfile format</h3></div></div></div><p class="_abstract _abstract">
				You can define custom network interface names, such as <code class="literal">provider</code> or <code class="literal">lan</code> to make interface names more descriptive. In this case, the <code class="literal">udev</code> service renames the interfaces. The renaming process works differently depending on whether you use connection profiles in <code class="literal">ifcfg</code> or keyfile format.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">The interface renaming process when using a profile in <code class="literal">ifcfg</code> format</span></dt><dd><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
									The <code class="literal">/usr/lib/udev/rules.d/60-net.rules</code> <code class="literal">udev</code> rule calls the <code class="literal">/lib/udev/rename_device</code> helper utility.
								</li><li class="listitem">
									The helper utility searches for the <code class="literal">HWADDR</code> parameter in <code class="literal">/etc/sysconfig/network-scripts/ifcfg-*</code> files.
								</li><li class="listitem">
									If the value set in the variable matches the MAC address of an interface, the helper utility renames the interface to the name set in the <code class="literal">DEVICE</code> parameter of the file.
								</li></ol></div></dd><dt><span class="term">The interface renaming process when using a profile in keyfile format</span></dt><dd><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
									Create a <a class="link" href="#configuring-user-defined-network-interface-names-by-using-systemd-link-files_consistent-network-interface-device-naming" title="1.7. Configuring user-defined network interface names by using systemd link files">systemd link file</a> or a <a class="link" href="#configuring-user-defined-network-interface-names-by-using-systemd-link-files_consistent-network-interface-device-naming" title="1.7. Configuring user-defined network interface names by using systemd link files">udev rule</a> to rename an interface.
								</li><li class="listitem">
									Use the custom interface name in the <code class="literal">interface-name</code> property of a NetworkManager connection profile.
								</li></ol></div></dd></dl></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#how-the-udev-device-manager-renames-network-interfaces_consistent-network-interface-device-naming" title="1.1. How the udev device manager renames network interfaces">How the udev device manager renames network interfaces</a>
					</li><li class="listitem">
						<a class="link" href="#configuring-user-defined-network-interface-names-by-using-udev-rules_consistent-network-interface-device-naming" title="1.6. Configuring user-defined network interface names by using udev rules">Configuring user-defined network interface names by using udev rules</a>
					</li><li class="listitem">
						<a class="link" href="#configuring-user-defined-network-interface-names-by-using-systemd-link-files_consistent-network-interface-device-naming" title="1.7. Configuring user-defined network interface names by using systemd link files">Configuring user-defined network interface names by using systemd link files</a>
					</li></ul></div></section><section class="section" id="proc_migrating-networkmanager-profiles-from-ifcfg-to-keyfile-format_assembly_networkmanager-connection-profiles-in-keyfile-format"><div class="titlepage"><div><div><h3 class="title">38.5. Migrating NetworkManager profiles from ifcfg to keyfile format</h3></div></div></div><p>
				If you still use connection profiles in the deprecated <code class="literal">ifcfg</code> format, you can convert them to the keyfile format.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					If an <code class="literal">ifcfg</code> file contains the <code class="literal">NM_CONTROLLED=no</code> setting, NetworkManager does not control this profile and, consequently the migration process ignores it.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have connection profiles in <code class="literal">ifcfg</code> format in the <code class="literal">/etc/sysconfig/network-scripts/</code> directory.
					</li><li class="listitem">
						If the connection profiles contain a <code class="literal">DEVICE</code> variable that is set to a custom device name, such as <code class="literal">provider</code> or <code class="literal">lan</code>, you created a <a class="link" href="#configuring-user-defined-network-interface-names-by-using-systemd-link-files_consistent-network-interface-device-naming" title="1.7. Configuring user-defined network interface names by using systemd link files">systemd link file</a> or a <a class="link" href="#configuring-user-defined-network-interface-names-by-using-udev-rules_consistent-network-interface-device-naming" title="1.6. Configuring user-defined network interface names by using udev rules">udev rule</a> for each of the custom device names.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Migrate the connection profiles:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection migrate</strong></span>
Connection 'enp1s0' (43ed18ab-f0c4-4934-af3d-2b3333948e45) successfully migrated.
Connection 'enp2s0' (883333e8-1b87-4947-8ceb-1f8812a80a9b) successfully migrated.
...</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Optionally, you can verify that you successfully migrated all your connection profiles:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli <span class="emphasis"><em>-f TYPE,FILENAME,NAME</em></span> connection</strong></span>
TYPE      FILENAME                                                           NAME
ethernet  /etc/NetworkManager/system-connections/enp1s0.nmconnection         enp1s0
ethernet  /etc/NetworkManager/system-connections/enp2s0.nmconnection         enp2s0
...</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nm-settings-keyfile(5)</code>
					</li><li class="listitem">
						<code class="literal">nm-settings-ifcfg-rh(5)</code>
					</li><li class="listitem">
						<a class="link" href="#how-the-udev-device-manager-renames-network-interfaces_consistent-network-interface-device-naming" title="1.1. How the udev device manager renames network interfaces">How the udev device manager renames network interfaces</a>
					</li></ul></div></section></section><section class="chapter" id="systemd-network-targets-and-services_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 39. Systemd network targets and services</h2></div></div></div><p class="_abstract _abstract">
			NetworkManager configures the network during the system boot process. However, when booting with a remote root (/), such as if the root directory is stored on an iSCSI device, the network settings are applied in the initial RAM disk (<code class="literal">initrd</code>) before RHEL is started. For example, if the network configuration is specified on the kernel command line by using <code class="literal">rd.neednet=1</code> or a configuration is specified to mount remote file systems, then the network settings are applied on <code class="literal">initrd</code>.
		</p><p>
			RHEL uses the <code class="literal">network</code> and <code class="literal">network-online</code> targets and the <code class="literal">NetworkManager-wait-online</code> service while applying network settings. Also, you can configure <code class="literal">systemd</code> services to start after the network is fully available if these services cannot dynamically reload.
		</p><section class="section" id="differences-between-the-network-and-network-online-systemd-target_systemd-network-targets-and-services"><div class="titlepage"><div><div><h3 class="title">39.1. Differences between the network and network-online systemd target</h3></div></div></div><p class="_abstract _abstract">
				Systemd maintains the <code class="literal">network</code> and <code class="literal">network-online</code> target units. The special units such as <code class="literal">NetworkManager-wait-online.service</code>, have <code class="literal">WantedBy=network-online.target</code> and <code class="literal">Before=network-online.target</code> parameters. If enabled, these units get started with <code class="literal">network-online.target</code> and delay the target to be reached until some form of network connectivity is established. They delay the <code class="literal">network-online</code> target until the network is connected.
			</p><p>
				The <code class="literal">network-online</code> target starts a service, which adds substantial delays to further execution. Systemd automatically adds dependencies with <code class="literal">Wants</code> and <code class="literal">After</code> parameters for this target unit to all the System V (SysV) <code class="literal">init</code> script service units with a Linux Standard Base (LSB) header referring to the <code class="literal">$network</code> facility. The LSB header is metadata for <code class="literal">init</code> scripts. You can use it to specify dependencies. This is similar to the <code class="literal">systemd</code> target.
			</p><p>
				The <code class="literal">network</code> target does not significantly delay the execution of the boot process. Reaching the <code class="literal">network</code> target means that the service that is responsible for setting up the network has started. However, it does not mean that a network device was configured. This target is important during the shutdown of the system. For example, if you have a service that was ordered after the <code class="literal">network</code> target during bootup, then this dependency is reversed during the shutdown. The network does not get disconnected until your service has been stopped. All mount units for remote network file systems automatically start the <code class="literal">network-online</code> target unit and order themselves after it.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The <code class="literal">network-online</code> target unit is only useful during the system starts. After the system has completed booting up, this target does not track the online state of the network. Therefore, you cannot use <code class="literal">network-online</code> to monitor the network connection. This target provides a one-time system startup concept.
				</p></div></rh-alert></section><section class="section" id="overview-of-networkmanager-wait-online_systemd-network-targets-and-services"><div class="titlepage"><div><div><h3 class="title">39.2. Overview of NetworkManager-wait-online</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">NetworkManager-wait-online</code> service waits with a timeout for the network to be configured. This network configuration involves plugging-in an Ethernet device, scanning for a Wi-Fi device, and so forth. NetworkManager automatically activates suitable profiles that are configured to start automatically. The failure of the automatic activation process due to a DHCP timeout or similar event might keep NetworkManager busy for an extended period of time. Depending on the configuration, NetworkManager retries activating the same profile or a different profile.
			</p><p>
				When the startup completes, either all profiles are in a disconnected state or are successfully activated. You can configure profiles to auto-connect. The following are a few examples of parameters that set timeouts or define when the connection is considered active:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">connection.wait-device-timeout</code>: Sets the timeout for the driver to detect the device.
					</li><li class="listitem">
						<code class="literal">ipv4.may-fail</code> and <code class="literal">ipv6.may-fail</code>: Sets activation with one IP address family ready, or whether a particular address family must have completed configuration.
					</li><li class="listitem">
						<code class="literal">ipv4.gateway-ping-timeout</code>: Delays activation.
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nm-settings(5)</code> man page on your system
					</li></ul></div></section><section class="section" id="configuring-a-systemd-service-to-start-after-the-network-has-been-started_systemd-network-targets-and-services"><div class="titlepage"><div><div><h3 class="title">39.3. Configuring a systemd service to start after the network has been started</h3></div></div></div><p class="_abstract _abstract">
				Red Hat Enterprise Linux installs <code class="literal">systemd</code> service files in the <code class="literal">/usr/lib/systemd/system/</code> directory. This procedure creates a drop-in snippet for a service file in <code class="literal">/etc/systemd/system/<span class="emphasis"><em>&lt;service_name&gt;</em></span>.service.d/</code> that is used together with the service file in <code class="literal">/usr/lib/systemd/system/</code> to start a particular service after the network is online. It has a higher priority if settings in the drop-in snippet overlap with the ones in the service file in <code class="literal">/usr/lib/systemd/system/</code>.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open a service file in the editor:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl edit <span class="emphasis"><em>&lt;service_name&gt;</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Enter the following, and save the changes:
					</p><pre class="screen">[Unit]
After=network-online.target</pre></li><li class="listitem"><p class="simpara">
						Reload the <code class="literal">systemd</code> service.
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl daemon-reload</strong></span></pre></li></ol></div></section></section><section class="chapter" id="assembly_introduction-to-nmstate_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 40. Introduction to Nmstate</h2></div></div></div><p class="_abstract _abstract">
			Nmstate is a declarative network manager API. When you use Nmstate, you describe the expected networking state by using YAML or JSON-formatted instructions.
		</p><p>
			Nmstate has many benefits. For example, it:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Provides a stable and extensible interface to manage RHEL network capabilities
				</li><li class="listitem">
					Supports atomic and transactional operations at the host and cluster level
				</li><li class="listitem">
					Supports partial editing of most properties and preserves existing settings that are not specified in the instructions
				</li></ul></div><p>
			Nmstate consists of the following packages:
		</p><rh-table><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 67%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140053155965920" scope="col">Packages</th><th align="left" valign="top" id="idm140053155964832" scope="col">Contents</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140053155965920"> <p>
							<code class="literal">nmstate</code>
						</p>
						 </td><td align="left" valign="top" headers="idm140053155964832"> <p>
							The <code class="literal">nmstatectl</code> command-line utility
						</p>
						 </td></tr><tr><td align="left" valign="top" headers="idm140053155965920"> <p>
							<code class="literal">python3-libnmstate</code>
						</p>
						 </td><td align="left" valign="top" headers="idm140053155964832"> <p>
							The <code class="literal">libnmstate</code> Python library
						</p>
						 </td></tr><tr><td align="left" valign="top" headers="idm140053155965920"> <p>
							<code class="literal">nmstate-libs</code>
						</p>
						 </td><td align="left" valign="top" headers="idm140053155964832"> <p>
							The Nmstate C library
						</p>
						 </td></tr><tr><td align="left" valign="top" headers="idm140053155965920"> <p>
							<code class="literal">nmstate-devel</code>
						</p>
						 </td><td align="left" valign="top" headers="idm140053155964832"> <p>
							The Nmstate C library headers
						</p>
						 </td></tr></tbody></table></rh-table><section class="section" id="con_using-the-libnmstate-library-in-a-python-application_assembly_introduction-to-nmstate"><div class="titlepage"><div><div><h3 class="title">40.1. Using the libnmstate library in a Python application</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">libnmstate</code> Python library enables developers to use Nmstate in their own application
			</p><p>
				To use the library, import it in your source code:
			</p><pre class="literallayout">import libnmstate</pre><p>
				Note that you must install the <code class="literal">nmstate</code> and <code class="literal">python3-libnmstate</code> packages to use this library.
			</p><div class="example" id="idm140053155939616"><p class="title"><strong>Example 40.1. Querying the network state by using the libnmstate library</strong></p><div class="example-contents"><p>
					The following Python code imports the <code class="literal">libnmstate</code> library and displays the available network interfaces and their state:
				</p><pre class="programlisting language-python">import libnmstate
from libnmstate.schema import Interface

net_state = libnmstate.show()
for iface_state in net_state[Interface.KEY]:
    print(iface_state[Interface.NAME] + ": "
          + iface_state[Interface.STATE])</pre></div></div></section><section class="section" id="proc_updating-the-current-network-configuration-using-nmstatectl_assembly_introduction-to-nmstate"><div class="titlepage"><div><div><h3 class="title">40.2. Updating the current network configuration by using <code class="literal">nmstatectl</code></h3></div></div></div><p class="_abstract _abstract">
				You can use the <code class="literal">nmstatectl</code> utility to store the current network configuration of one or all interfaces in a file. You can then use this file to:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Modify the configuration and apply it to the same system.
					</li><li class="listitem">
						Copy the file to a different host and configure the host with the same or modified settings.
					</li></ul></div><p>
				For example, you can export the settings of the <code class="literal">enp1s0</code> interface to a file, modify the configuration, and apply the settings to the host.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">nmstate</code> package is installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Export the settings of the <code class="literal">enp1s0</code> interface to the <code class="literal">~/network-config.yml</code> file:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmstatectl show <span class="emphasis"><em>enp1s0</em></span> &gt; <span class="emphasis"><em>~/network-config.yml</em></span></strong></span></pre><p class="simpara">
						This command stores the configuration of <code class="literal">enp1s0</code> in YAML format. To store the output in JSON format, pass the <code class="literal">--json</code> option to the command.
					</p><p class="simpara">
						If you do not specify an interface name, <code class="literal">nmstatectl</code> exports the configuration of all interfaces.
					</p></li><li class="listitem">
						Modify the <code class="literal">~/network-config.yml</code> file using a text editor to update the configuration.
					</li><li class="listitem"><p class="simpara">
						Apply the settings from the <code class="literal">~/network-config.yml</code> file:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmstatectl apply <span class="emphasis"><em>~/network-config.yml</em></span></strong></span></pre><p class="simpara">
						If you exported the settings in JSON format, pass the <code class="literal">--json</code> option to the command.
					</p></li></ol></div></section><section class="section" id="the-nmstate-systemd-service_assembly_introduction-to-nmstate"><div class="titlepage"><div><div><h3 class="title">40.3. The nmstate systemd service</h3></div></div></div><p>
				You can automatically apply new network settings when the Red Hat Enterprise Linux system boots by configuring the <code class="literal">nmstate</code> <code class="literal">systemd</code> service.
			</p><p>
				With the <code class="literal">nmstate</code> package installed, you can store <code class="literal">*.yml</code> files with Nmstate instructions in the <code class="literal">/etc/nmstate/</code> directory. The <code class="literal">nmstate</code> service then automatically applies the files on the next reboot or when you manually restart the service. After Nmstate successfully applies a file, it renames the file’s <code class="literal">.yml</code> suffix to <code class="literal">.applied</code> to prevent the service from processing the same file again.
			</p><p>
				The <code class="literal">nmstate</code> service is a <code class="literal">oneshot</code> <code class="literal">systemd</code> service. Consequently, <code class="literal">systemd</code> executes it only when the system boots and when you manually restart the service.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					By default, the <code class="literal">nmstate</code> service is disabled. Use the <code class="literal">systemctl enable nmstate</code> command to enable it. Afterwards, <code class="literal">systemd</code> executes this service each time when the system starts.
				</p></div></rh-alert></section><section class="section" id="ref_network-states-for-the-network-rhel-system-roles_assembly_introduction-to-nmstate"><div class="titlepage"><div><div><h3 class="title">40.4. Network states for the <code class="literal">network</code> RHEL system role</h3></div></div></div><p>
				The <code class="literal">network</code> RHEL system role supports state configurations in playbooks to configure the devices. For this, use the <code class="literal">network_state</code> variable followed by the state configurations.
			</p><p>
				Benefits of using the <code class="literal">network_state</code> variable in a playbook:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Using the declarative method with the state configurations, you can configure interfaces, and the NetworkManager creates a profile for these interfaces in the background.
					</li><li class="listitem">
						With the <code class="literal">network_state</code> variable, you can specify the options that you require to change, and all the other options will remain the same as they are. However, with the <code class="literal">network_connections</code> variable, you must specify all settings to change the network connection profile.
					</li></ul></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					You can set only Nmstate YAML instructions in <code class="literal">network_state</code>. These instructions differ from the variables you can set in <code class="literal">network_connections</code>.
				</p></div></rh-alert><p>
				For example, to create an Ethernet connection with dynamic IP address settings, use the following <code class="literal">vars</code> block in your playbook:
			</p><rh-table><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><tbody><tr><td align="left" valign="top"> <p>
								Playbook with state configurations
							</p>
							 </td><td align="left" valign="top"> <p>
								Regular playbook
							</p>
							 </td></tr><tr><td align="left" valign="top">
<pre class="programlisting language-yaml">vars:
  network_state:
    interfaces:
    - name: enp7s0
      type: ethernet
      state: up
      ipv4:
        enabled: true
        auto-dns: true
        auto-gateway: true
        auto-routes: true
        dhcp: true
      ipv6:
        enabled: true
        auto-dns: true
        auto-gateway: true
        auto-routes: true
        autoconf: true
        dhcp: true</pre>
							 </td><td align="left" valign="top">
<pre class="programlisting language-yaml">vars:
  network_connections:
    - name: enp7s0
      interface_name: enp7s0
      type: ethernet
      autoconnect: yes
      ip:
        dhcp4: yes
        auto6: yes
      state: up</pre>
							 </td></tr></tbody></table></rh-table><p>
				For example, to only change the connection status of dynamic IP address settings that you created as above, use the following <code class="literal">vars</code> block in your playbook:
			</p><rh-table><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><tbody><tr><td align="left" valign="top"> <p>
								Playbook with state configurations
							</p>
							 </td><td align="left" valign="top"> <p>
								Regular playbook
							</p>
							 </td></tr><tr><td align="left" valign="top">
<pre class="programlisting language-yaml">vars:
  network_state:
    interfaces:
    - name: enp7s0
      type: ethernet
      state: down</pre>
							 </td><td align="left" valign="top">
<pre class="programlisting language-yaml">vars:
  network_connections:
    - name: enp7s0
      interface_name: enp7s0
      type: ethernet
      autoconnect: yes
      ip:
        dhcp4: yes
        auto6: yes
      state: down</pre>
							 </td></tr></tbody></table></rh-table><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/rhel-system-roles.network/README.md</code> file
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/rhel-system-roles/network/</code> directory
					</li></ul></div></section></section><section class="chapter" id="capturing-network-packets_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 41. Capturing network packets</h2></div></div></div><p class="_abstract _abstract">
			To debug network issues and communications, you can capture network packets. The following sections provide instructions and additional information about capturing network packets.
		</p><section class="section" id="using-xdpdump-to-capture-network-packets-including-packets-dropped-by-xdp-programs_capturing-network-packets"><div class="titlepage"><div><div><h3 class="title">41.1. Using xdpdump to capture network packets including packets dropped by XDP programs</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">xdpdump</code> utility captures network packets. Unlike the <code class="literal">tcpdump</code> utility, <code class="literal">xdpdump</code> uses an extended Berkeley Packet Filter(eBPF) program for this task. This enables <code class="literal">xdpdump</code> to also capture packets dropped by Express Data Path (XDP) programs. User-space utilities, such as <code class="literal">tcpdump</code>, are not able to capture these dropped packages, as well as original packets modified by an XDP program.
			</p><p>
				You can use <code class="literal">xdpdump</code> to debug XDP programs that are already attached to an interface. Therefore, the utility can capture packets before an XDP program is started and after it has finished. In the latter case, <code class="literal">xdpdump</code> also captures the XDP action. By default, <code class="literal">xdpdump</code> captures incoming packets at the entry of the XDP program.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					On other architectures than AMD and Intel 64-bit, the <code class="literal">xdpdump</code> utility is provided as a Technology Preview only. Technology Preview features are not supported with Red Hat production Service Level Agreements (SLAs), might not be functionally complete, and Red Hat does not recommend using them for production. These previews provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
				</p><p>
					See <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
				</p></div></rh-alert><p>
				Note that <code class="literal">xdpdump</code> has no packet filter or decode capabilities. However, you can use it in combination with <code class="literal">tcpdump</code> for packet decoding.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A network driver that supports XDP programs.
					</li><li class="listitem">
						An XDP program is loaded to the <code class="literal">enp1s0</code> interface. If no program is loaded, <code class="literal">xdpdump</code> captures packets in a similar way <code class="literal">tcpdump</code> does, for backward compatibility.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To capture packets on the <code class="literal">enp1s0</code> interface and write them to the <code class="literal">/root/capture.pcap</code> file, enter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>xdpdump -i enp1s0 -w /root/capture.pcap</strong></span></pre></li><li class="listitem">
						To stop capturing packets, press <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">C</kbd>.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">xdpdump(8)</code> man page on your system
					</li><li class="listitem">
						If you are a developer and you are interested in the source code of <code class="literal">xdpdump</code>, download and install the corresponding source RPM (SRPM) from the Red Hat Customer Portal.
					</li></ul></div></section><section class="section _additional-resources" id="additional_resources_2"><div class="titlepage"><div><div><h3 class="title">41.2. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/8787">How to capture network packets with tcpdump?</a> (Red Hat Knowledgebase)
					</li></ul></div></section></section><section class="chapter" id="assembly_understanding-the-ebpf-features-in-rhel-9_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 42. Understanding the eBPF networking features in RHEL 9</h2></div></div></div><p class="_abstract _abstract">
			The extended Berkeley Packet Filter (eBPF) is an in-kernel virtual machine that allows code execution in the kernel space. This code runs in a restricted sandbox environment with access only to a limited set of functions.
		</p><p>
			In networking, you can use eBPF to complement or replace kernel packet processing. Depending on the hook you use, eBPF programs have, for example:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Read and write access to packet data and metadata
				</li><li class="listitem">
					Can look up sockets and routes
				</li><li class="listitem">
					Can set socket options
				</li><li class="listitem">
					Can redirect packets
				</li></ul></div><section class="section" id="ref_overview-of-networking-ebpf-features-in-rhel-9_assembly_understanding-the-ebpf-features-in-rhel-9"><div class="titlepage"><div><div><h3 class="title">42.1. Overview of networking eBPF features in RHEL 9</h3></div></div></div><p class="_abstract _abstract">
				You can attach extended Berkeley Packet Filter (eBPF) networking programs to the following hooks in RHEL:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						eXpress Data Path (XDP): Provides early access to received packets before the kernel networking stack processes them.
					</li><li class="listitem">
						<code class="literal">tc</code> eBPF classifier with direct-action flag: Provides powerful packet processing on ingress and egress. Programs can be attached as an eBPF classifier with direct-action flag in the <code class="literal">qdisc</code> hierarchy, or using the link-based <code class="literal">tcx</code> API.
					</li><li class="listitem">
						Control Groups version 2 (cgroup v2): Enables filtering and overriding socket-based operations performed by programs in a control group.
					</li><li class="listitem">
						Socket filtering: Enables filtering of packets received from sockets. This feature was also available in the classic Berkeley Packet Filter (cBPF), but has been extended to support eBPF programs.
					</li><li class="listitem">
						Stream parser: Enables splitting up streams to individual messages, filtering, and redirecting them to sockets.
					</li><li class="listitem">
						<code class="literal">SO_REUSEPORT</code> socket selection: Provides a programmable selection of a receiving socket from a <code class="literal">reuseport</code> socket group.
					</li><li class="listitem">
						Flow dissector: Enables overriding the way the kernel parses packet headers in certain situations.
					</li><li class="listitem">
						TCP congestion control callbacks: Enables implementing a custom TCP congestion control algorithm.
					</li><li class="listitem">
						Routes with encapsulation: Enables creating custom tunnel encapsulation.
					</li></ul></div><h5 id="xdp">XDP</h5><p>
				You can attach programs of the <code class="literal">BPF_PROG_TYPE_XDP</code> type to a network interface. The kernel then executes the program on received packets before the kernel network stack starts processing them. This allows fast packet forwarding in certain situations, such as fast packet dropping to prevent distributed denial of service (DDoS) attacks and fast packet redirects for load balancing scenarios.
			</p><p>
				You can also use XDP for different forms of packet monitoring and sampling. The kernel allows XDP programs to modify packets and to pass them for further processing to the kernel network stack.
			</p><p>
				The following XDP modes are available:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Native (driver) XDP: The kernel executes the program from the earliest possible point during packet reception. At this moment, the kernel did not parse the packet and, therefore, no metadata provided by the kernel is available. This mode requires that the network interface driver supports XDP but not all drivers support this native mode.
					</li><li class="listitem">
						Generic XDP: The kernel network stack executes the XDP program early in the processing. At that time, kernel data structures have been allocated, and the packet has been pre-processed. If a packet should be dropped or redirected, it requires a significant overhead compared to the native mode. However, the generic mode does not require network interface driver support and works with all network interfaces.
					</li><li class="listitem">
						Offloaded XDP: The kernel executes the XDP program on the network interface instead of on the host CPU. Note that this requires specific hardware, and only certain eBPF features are available in this mode.
					</li></ul></div><p>
				On RHEL, load all XDP programs using the <code class="literal">libxdp</code> library. This library enables system-controlled usage of XDP.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					Currently, there are some system configuration limitations for XDP programs. For example, you must disable certain hardware offload features on the receiving interface. Additionally, not all features are available with all drivers that support the native mode.
				</p></div></rh-alert><p>
				In RHEL 9, Red Hat supports the XDP features only if you use the <code class="literal">libxdp</code> library to load the program into the kernel.
			</p><h5 id="af_xdp">AF_XDP</h5><p>
				Using an XDP program that filters and redirects packets to a given <code class="literal">AF_XDP</code> socket, you can use one or more sockets from the <code class="literal">AF_XDP</code> protocol family to quickly copy packets from the kernel to the user space.
			</p><h5 id="traffic_control">Traffic Control</h5><p>
				The Traffic Control (<code class="literal">tc</code>) subsystem offers the following types of eBPF programs:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">BPF_PROG_TYPE_SCHED_CLS</code>
					</li><li class="listitem">
						<code class="literal">BPF_PROG_TYPE_SCHED_ACT</code>
					</li></ul></div><p>
				These types enable you to write custom <code class="literal">tc</code> classifiers and <code class="literal">tc</code> actions in eBPF. Together with the parts of the <code class="literal">tc</code> ecosystem, this provides the ability for powerful packet processing and is the core part of several container networking orchestration solutions.
			</p><p>
				In most cases, only the classifier is used, as with the direct-action flag, the eBPF classifier can execute actions directly from the same eBPF program. The <code class="literal">clsact</code> Queueing Discipline (<code class="literal">qdisc</code>) has been designed to enable this on the ingress side.
			</p><p>
				Note that using a flow dissector eBPF program can influence operation of some other <code class="literal">qdiscs</code> and <code class="literal">tc</code> classifiers, such as <code class="literal">flower</code>.
			</p><p>
				The link-based <code class="literal">tcx</code> API is provided along the <code class="literal">qdisc</code> API. It enables your applications to maintain ownership over a BPF program to prevent accidental removal of the BPF program. Also, the <code class="literal">tcx</code> API has multiprogram support that allows multiple applications to attach BPF programs in the <code class="literal">tc</code> layer in parallel.
			</p><h5 id="socket_filter">Socket filter</h5><p>
				Several utilities use or have used the classic Berkeley Packet Filter (cBPF) for filtering packets received on a socket. For example, the <code class="literal">tcpdump</code> utility enables the user to specify expressions, which <code class="literal">tcpdump</code> then translates into cBPF code.
			</p><p>
				As an alternative to cBPF, the kernel allows eBPF programs of the <code class="literal">BPF_PROG_TYPE_SOCKET_FILTER</code> type for the same purpose.
			</p><h5 id="control_groups">Control Groups</h5><p>
				In RHEL, you can use multiple types of eBPF programs that you can attach to a cgroup. The kernel executes these programs when a program in the given cgroup performs an operation. Note that you can use only cgroups version 2.
			</p><p>
				The following networking-related cgroup eBPF programs are available in RHEL:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">BPF_PROG_TYPE_SOCK_OPS</code>: The kernel calls this program on various TCP events. The program can adjust the behavior of the kernel TCP stack, including custom TCP header options, and so on.
					</li><li class="listitem">
						<code class="literal">BPF_PROG_TYPE_CGROUP_SOCK_ADDR</code>: The kernel calls this program during <code class="literal">connect</code>, <code class="literal">bind</code>, <code class="literal">sendto</code>, <code class="literal">recvmsg</code>, <code class="literal">getpeername</code>, and <code class="literal">getsockname</code> operations. This program allows changing IP addresses and ports. This is useful when you implement socket-based network address translation (NAT) in eBPF.
					</li><li class="listitem">
						<code class="literal">BPF_PROG_TYPE_CGROUP_SOCKOPT</code>: The kernel calls this program during <code class="literal">setsockopt</code> and <code class="literal">getsockopt</code> operations and allows changing the options.
					</li><li class="listitem">
						<code class="literal">BPF_PROG_TYPE_CGROUP_SOCK</code>: The kernel calls this program during socket creation, socket releasing, and binding to addresses. You can use these programs to allow or deny the operation, or only to inspect socket creation for statistics.
					</li><li class="listitem">
						<code class="literal">BPF_PROG_TYPE_CGROUP_SKB</code>: This program filters individual packets on ingress and egress, and can accept or reject packets.
					</li><li class="listitem">
						<code class="literal">BPF_PROG_TYPE_CGROUP_SYSCTL</code>: This program allows filtering of access to system controls (<code class="literal">sysctl</code>).
					</li></ul></div><h5 id="stream_parser">Stream Parser</h5><p>
				A stream parser operates on a group of sockets that are added to a special eBPF map. The eBPF program then processes packets that the kernel receives or sends on those sockets.
			</p><p>
				The following stream parser eBPF programs are available in RHEL:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">BPF_PROG_TYPE_SK_SKB</code>: An eBPF program parses packets received on the socket into individual messages, and instructs the kernel to drop those messages, accept them, or send them to another socket.
					</li><li class="listitem">
						<code class="literal">BPF_PROG_TYPE_SK_MSG</code>: This program filters egress messages. An eBPF program parses the packets and either approves or rejects them.
					</li></ul></div><h5 id="so_reuseport_socket_selection">SO_REUSEPORT socket selection</h5><p>
				Using this socket option, you can bind multiple sockets to the same IP address and port. Without eBPF, the kernel selects the receiving socket based on a connection hash. With the <code class="literal">BPF_PROG_TYPE_SK_REUSEPORT</code> program, the selection of the receiving socket is fully programmable.
			</p><h5 id="flow_dissector">Flow dissector</h5><p>
				When the kernel needs to process packet headers without going through the full protocol decode, they are <code class="literal">dissected</code>. For example, this happens in the <code class="literal">tc</code> subsystem, in multipath routing, in bonding, or when calculating a packet hash. In this situation the kernel parses the packet headers and fills internal structures with the information from the packet headers. You can replace this internal parsing using the <code class="literal">BPF_PROG_TYPE_FLOW_DISSECTOR</code> program. Note that you can only dissect TCP and UDP over IPv4 and IPv6 in eBPF in RHEL.
			</p><h5 id="tcp_congestion_control">TCP Congestion Control</h5><p>
				You can write a custom TCP congestion control algorithm using a group of <code class="literal">BPF_PROG_TYPE_STRUCT_OPS</code> programs that implement <code class="literal">struct tcp_congestion_oops</code> callbacks. An algorithm that is implemented this way is available to the system alongside the built-in kernel algorithms.
			</p><h5 id="routes_with_encapsulation">Routes with encapsulation</h5><p>
				You can attach one of the following eBPF program types to routes in the routing table as a tunnel encapsulation attribute:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">BPF_PROG_TYPE_LWT_IN</code>
					</li><li class="listitem">
						<code class="literal">BPF_PROG_TYPE_LWT_OUT</code>
					</li><li class="listitem">
						<code class="literal">BPF_PROG_TYPE_LWT_XMIT</code>
					</li></ul></div><p>
				The functionality of such an eBPF program is limited to specific tunnel configurations and does not allow creating a generic encapsulation or decapsulation solution.
			</p><h5 id="socket_lookup">Socket lookup</h5><p>
				To bypass limitations of the <code class="literal">bind</code> system call, use an eBPF program of the <code class="literal">BPF_PROG_TYPE_SK_LOOKUP</code> type. Such programs can select a listening socket for new incoming TCP connections or an unconnected socket for UDP packets.
			</p></section><section class="section" id="ref_overview-of-xdp-features-by-network-cards_assembly_understanding-the-ebpf-features-in-rhel-9"><div class="titlepage"><div><div><h3 class="title">42.2. Overview of XDP features in RHEL 9 by network cards</h3></div></div></div><p class="_abstract _abstract">
				The following is an overview of XDP-enabled network cards and the XDP features you can use with them:
			</p><rh-table><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 34%; " class="col_1"><!--Empty--><col style="width: 17%; " class="col_2"><!--Empty--><col style="width: 8%; " class="col_3"><!--Empty--><col style="width: 8%; " class="col_4"><!--Empty--><col style="width: 8%; " class="col_5"><!--Empty--><col style="width: 8%; " class="col_6"><!--Empty--><col style="width: 8%; " class="col_7"><!--Empty--><col style="width: 8%; " class="col_8"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140053168070432" scope="col">Network card</th><th align="left" valign="top" id="idm140053168069344" scope="col">Driver</th><th align="left" valign="top" id="idm140053168068256" scope="col">Basic</th><th align="left" valign="top" id="idm140053168067168" scope="col">Redirect</th><th align="left" valign="top" id="idm140053168066080" scope="col">Target</th><th align="left" valign="top" id="idm140053168064992" scope="col">HW offload</th><th align="left" valign="top" id="idm140053168063904" scope="col">Zero-copy</th><th align="left" valign="top" id="idm140053168062816" scope="col">Large MTU</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140053168070432"> <p>
								Amazon Elastic Network Adapter
							</p>
							 </td><td align="left" valign="top" headers="idm140053168069344"> <p>
								<code class="literal">ena</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168068256"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168067168"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168066080"> <p>
								yes <a href="#ftn.xdp-on-interface" class="footnote"><sup class="footnote" id="xdp-on-interface">[a]</sup></a>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168064992"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168063904"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168062816"> <p>
								no
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053168070432"> <p>
								aQuantia AQtion Ethernet card
							</p>
							 </td><td align="left" valign="top" headers="idm140053168069344"> <p>
								<code class="literal">atlantic</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168068256"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168067168"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168066080"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168064992"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168063904"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168062816"> <p>
								no
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053168070432"> <p>
								Broadcom NetXtreme-C/E 10/25/40/50 gigabit Ethernet
							</p>
							 </td><td align="left" valign="top" headers="idm140053168069344"> <p>
								<code class="literal">bnxt_en</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168068256"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168067168"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168066080"> <p>
								yes <a href="#ftn.xdp-on-interface" class="footnoteref"><sup class="footnoteref">[a]</sup></a>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168064992"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168063904"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168062816"> <p>
								yes
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053168070432"> <p>
								Cavium Thunder Virtual function
							</p>
							 </td><td align="left" valign="top" headers="idm140053168069344"> <p>
								<code class="literal">nicvf</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168068256"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168067168"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168066080"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168064992"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168063904"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168062816"> <p>
								no
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053168070432"> <p>
								Google Virtual NIC (gVNIC) support
							</p>
							 </td><td align="left" valign="top" headers="idm140053168069344"> <p>
								<code class="literal">gve</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168068256"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168067168"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168066080"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168064992"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168063904"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168062816"> <p>
								no
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053168070432"> <p>
								Intel® 10GbE PCI Express Virtual Function Ethernet
							</p>
							 </td><td align="left" valign="top" headers="idm140053168069344"> <p>
								<code class="literal">ixgbevf</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168068256"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168067168"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168066080"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168064992"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168063904"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168062816"> <p>
								no
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053168070432"> <p>
								Intel® 10GbE PCI Express adapters
							</p>
							 </td><td align="left" valign="top" headers="idm140053168069344"> <p>
								<code class="literal">ixgbe</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168068256"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168067168"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168066080"> <p>
								yes <a href="#ftn.xdp-on-interface" class="footnoteref"><sup class="footnoteref">[a]</sup></a>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168064992"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168063904"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168062816"> <p>
								yes <a href="#ftn.transmitting-side-only" class="footnote"><sup class="footnote" id="transmitting-side-only">[b]</sup></a>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053168070432"> <p>
								Intel® Ethernet Connection E800 Series
							</p>
							 </td><td align="left" valign="top" headers="idm140053168069344"> <p>
								<code class="literal">ice</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168068256"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168067168"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168066080"> <p>
								yes <a href="#ftn.xdp-on-interface" class="footnoteref"><sup class="footnoteref">[a]</sup></a>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168064992"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168063904"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168062816"> <p>
								yes
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053168070432"> <p>
								Intel® Ethernet Controller I225-LM/I225-V family
							</p>
							 </td><td align="left" valign="top" headers="idm140053168069344"> <p>
								<code class="literal">igc</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168068256"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168067168"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168066080"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168064992"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168063904"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168062816"> <p>
								yes <a href="#ftn.transmitting-side-only" class="footnoteref"><sup class="footnoteref">[b]</sup></a>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053168070432"> <p>
								Intel® PCI Express Gigabit adapters
							</p>
							 </td><td align="left" valign="top" headers="idm140053168069344"> <p>
								<code class="literal">igb</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168068256"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168067168"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168066080"> <p>
								yes <a href="#ftn.xdp-on-interface" class="footnoteref"><sup class="footnoteref">[a]</sup></a>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168064992"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168063904"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168062816"> <p>
								yes <a href="#ftn.transmitting-side-only" class="footnoteref"><sup class="footnoteref">[b]</sup></a>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053168070432"> <p>
								Intel® Ethernet Controller XL710 Family
							</p>
							 </td><td align="left" valign="top" headers="idm140053168069344"> <p>
								<code class="literal">i40e</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168068256"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168067168"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168066080"> <p>
								yes <a href="#ftn.xdp-on-interface" class="footnoteref"><sup class="footnoteref">[a]</sup></a> <a href="#ftn.requires-queues-ge-cpu-index" class="footnote"><sup class="footnote" id="requires-queues-ge-cpu-index">[c]</sup></a>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168064992"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168063904"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168062816"> <p>
								no
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053168070432"> <p>
								Marvell OcteonTX2
							</p>
							 </td><td align="left" valign="top" headers="idm140053168069344"> <p>
								<code class="literal">rvu_nicpf</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168068256"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168067168"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168066080"> <p>
								yes <a href="#ftn.xdp-on-interface" class="footnoteref"><sup class="footnoteref">[a]</sup></a> <a href="#ftn.requires-queues-ge-cpu-index" class="footnoteref"><sup class="footnoteref">[c]</sup></a>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168064992"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168063904"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168062816"> <p>
								no
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053168070432"> <p>
								Mellanox 5th generation network adapters (ConnectX series)
							</p>
							 </td><td align="left" valign="top" headers="idm140053168069344"> <p>
								<code class="literal">mlx5_core</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168068256"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168067168"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168066080"> <p>
								yes <a href="#ftn.requires-queues-ge-cpu-index" class="footnoteref"><sup class="footnoteref">[c]</sup></a>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168064992"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168063904"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168062816"> <p>
								yes
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053168070432"> <p>
								Mellanox Technologies 1/10/40Gbit Ethernet
							</p>
							 </td><td align="left" valign="top" headers="idm140053168069344"> <p>
								<code class="literal">mlx4_en</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168068256"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168067168"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168066080"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168064992"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168063904"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168062816"> <p>
								no
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053168070432"> <p>
								Microsoft Azure Network Adapter
							</p>
							 </td><td align="left" valign="top" headers="idm140053168069344"> <p>
								<code class="literal">mana</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168068256"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168067168"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168066080"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168064992"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168063904"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168062816"> <p>
								no
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053168070432"> <p>
								Microsoft Hyper-V virtual network
							</p>
							 </td><td align="left" valign="top" headers="idm140053168069344"> <p>
								<code class="literal">hv_netvsc</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168068256"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168067168"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168066080"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168064992"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168063904"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168062816"> <p>
								no
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053168070432"> <p>
								Netronome® NFP4000/NFP6000 NIC <a href="#ftn.netronome-xdp-limitation" class="footnote"><sup class="footnote" id="netronome-xdp-limitation">[d]</sup></a>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168069344"> <p>
								<code class="literal">nfp</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168068256"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168067168"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168066080"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168064992"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168063904"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168062816"> <p>
								no
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053168070432"> <p>
								QEMU Virtio network
							</p>
							 </td><td align="left" valign="top" headers="idm140053168069344"> <p>
								<code class="literal">virtio_net</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168068256"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168067168"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168066080"> <p>
								yes <a href="#ftn.xdp-on-interface" class="footnoteref"><sup class="footnoteref">[a]</sup></a>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168064992"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168063904"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168062816"> <p>
								yes
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053168070432"> <p>
								QLogic QED 25/40/100Gb Ethernet NIC
							</p>
							 </td><td align="left" valign="top" headers="idm140053168069344"> <p>
								<code class="literal">qede</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168068256"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168067168"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168066080"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168064992"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168063904"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168062816"> <p>
								no
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053168070432"> <p>
								STMicroelectronics Multi-Gigabit Ethernet
							</p>
							 </td><td align="left" valign="top" headers="idm140053168069344"> <p>
								<code class="literal">stmmac</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168068256"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168067168"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168066080"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168064992"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168063904"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168062816"> <p>
								no
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053168070432"> <p>
								Solarflare SFC9000/SFC9100/EF100-family
							</p>
							 </td><td align="left" valign="top" headers="idm140053168069344"> <p>
								<code class="literal">sfc</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168068256"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168067168"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168066080"> <p>
								yes <a href="#ftn.requires-queues-ge-cpu-index" class="footnoteref"><sup class="footnoteref">[c]</sup></a>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168064992"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168063904"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168062816"> <p>
								no
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053168070432"> <p>
								Universal TUN/TAP device
							</p>
							 </td><td align="left" valign="top" headers="idm140053168069344"> <p>
								<code class="literal">tun</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168068256"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168067168"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168066080"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168064992"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168063904"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168062816"> <p>
								no
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053168070432"> <p>
								Virtual Ethernet pair device
							</p>
							 </td><td align="left" valign="top" headers="idm140053168069344"> <p>
								<code class="literal">veth</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168068256"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168067168"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168066080"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168064992"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168063904"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168062816"> <p>
								yes
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053168070432"> <p>
								VMware VMXNET3 ethernet driver
							</p>
							 </td><td align="left" valign="top" headers="idm140053168069344"> <p>
								<code class="literal">vmxnet3</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168068256"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168067168"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168066080"> <p>
								yes <a href="#ftn.xdp-on-interface" class="footnoteref"><sup class="footnoteref">[a]</sup></a> <a href="#ftn.requires-queues-ge-cpu-index" class="footnoteref"><sup class="footnoteref">[c]</sup></a>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168064992"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168063904"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168062816"> <p>
								no
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140053168070432"> <p>
								Xen paravirtual network device
							</p>
							 </td><td align="left" valign="top" headers="idm140053168069344"> <p>
								<code class="literal">xen-netfront</code>
							</p>
							 </td><td align="left" valign="top" headers="idm140053168068256"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168067168"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168066080"> <p>
								yes
							</p>
							 </td><td align="left" valign="top" headers="idm140053168064992"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168063904"> <p>
								no
							</p>
							 </td><td align="left" valign="top" headers="idm140053168062816"> <p>
								no
							</p>
							 </td></tr></tbody><tbody class="footnotes"><tr><td colspan="8"><div id="ftn.xdp-on-interface" class="footnote"><div class="para"><a href="#xdp-on-interface" class="simpara"><sup class="simpara">[a] </sup></a>
									Only if an XDP program is loaded on the interface.
								</div></div><div id="ftn.transmitting-side-only" class="footnote"><div class="para"><a href="#transmitting-side-only" class="simpara"><sup class="simpara">[b] </sup></a>
									Transmitting side only. Cannot receive large packets through XDP.
								</div></div><div id="ftn.requires-queues-ge-cpu-index" class="footnote"><div class="para"><a href="#requires-queues-ge-cpu-index" class="simpara"><sup class="simpara">[c] </sup></a>
									Requires several XDP TX queues allocated that is larger or equal to the largest CPU index.
								</div></div><div id="ftn.netronome-xdp-limitation" class="footnote"><div class="para"><a href="#netronome-xdp-limitation" class="simpara"><sup class="simpara">[d] </sup></a>
									Some of the listed features are not available for the Netronome® NFP3800 NIC.
								</div></div></td></tr></tbody></table></rh-table><p>
				Legend:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Basic: Supports basic return codes: <code class="literal">DROP</code>, <code class="literal">PASS</code>, <code class="literal">ABORTED</code>, and <code class="literal">TX</code>.
					</li><li class="listitem">
						Redirect: Supports the <code class="literal">XDP_REDIRECT</code> return code.
					</li><li class="listitem">
						Target: Can be a target of a <code class="literal">XDP_REDIRECT</code> return code.
					</li><li class="listitem">
						HW offload: Supports XDP hardware offload.
					</li><li class="listitem">
						Zero-copy: Supports the zero-copy mode for the <code class="literal">AF_XDP</code> protocol family.
					</li><li class="listitem">
						Large MTU: Supports packets larger than page size.
					</li></ul></div></section></section><section class="chapter" id="network-tracing-using-the-bpf-compiler-collection_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 43. Network tracing using the BPF compiler collection</h2></div></div></div><p class="_abstract _abstract">
			BPF Compiler Collection (BCC) is a library, which facilitates the creation of the extended Berkeley Packet Filter (eBPF) programs. The main utility of eBPF programs is analyzing the operating system performance and network performance without experiencing overhead or security issues.
		</p><p>
			BCC removes the need for users to know deep technical details of eBPF, and provides many out-of-the-box starting points, such as the <code class="literal systemitem">bcc-tools</code> package with pre-created eBPF programs.
		</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
				The eBPF programs are triggered on events, such as disk I/O, TCP connections, and process creations. It is unlikely that the programs should cause the kernel to crash, loop or become unresponsive because they run in a safe virtual machine in the kernel.
			</p></div></rh-alert><section class="section" id="installing-the-bcc-tools-package_network-tracing-using-the-bpf-compiler-collection"><div class="titlepage"><div><div><h3 class="title">43.1. Installing the bcc-tools package</h3></div></div></div><p class="_abstract _abstract">
				Install the <code class="literal">bcc-tools</code> package, which also installs the BPF Compiler Collection (BCC) library as a dependency.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Install <code class="literal">bcc-tools</code>.
					</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install bcc-tools</strong></span></pre><p class="simpara">
						The BCC tools are installed in the <code class="literal">/usr/share/bcc/tools/</code> directory.
					</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Inspect the installed tools:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ls -l /usr/share/bcc/tools/</strong></span>
...
-rwxr-xr-x. 1 root root  4198 Dec 14 17:53 dcsnoop
-rwxr-xr-x. 1 root root  3931 Dec 14 17:53 dcstat
-rwxr-xr-x. 1 root root 20040 Dec 14 17:53 deadlock_detector
-rw-r--r--. 1 root root  7105 Dec 14 17:53 deadlock_detector.c
drwxr-xr-x. 3 root root  8192 Mar 11 10:28 doc
-rwxr-xr-x. 1 root root  7588 Dec 14 17:53 execsnoop
-rwxr-xr-x. 1 root root  6373 Dec 14 17:53 ext4dist
-rwxr-xr-x. 1 root root 10401 Dec 14 17:53 ext4slower
...</pre><p class="simpara">
						The <code class="literal systemitem">doc</code> directory in the listing above contains documentation for each tool.
					</p></li></ul></div></section><section class="section" id="displaying-tcp-connections-added-to-the-kernels-accept-queue_network-tracing-using-the-bpf-compiler-collection"><div class="titlepage"><div><div><h3 class="title">43.2. Displaying TCP connections added to the Kernel’s accept queue</h3></div></div></div><p class="_abstract _abstract">
				After the kernel receives the <code class="literal">ACK</code> packet in a TCP 3-way handshake, the kernel moves the connection from the <code class="literal">SYN</code> queue to the <code class="literal">accept</code> queue after the connection’s state changes to <code class="literal">ESTABLISHED</code>. Therefore, only successful TCP connections are visible in this queue.
			</p><p>
				The <code class="literal">tcpaccept</code> utility uses eBPF features to display all connections the kernel adds to the <code class="literal">accept</code> queue. The utility is lightweight because it traces the <code class="literal">accept()</code> function of the kernel instead of capturing packets and filtering them. For example, use <code class="literal">tcpaccept</code> for general troubleshooting to display new connections the server has accepted.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter the following command to start the tracing the kernel <code class="literal">accept</code> queue:
					</p><pre class="literallayout"># <span class="strong strong"><strong>/usr/share/bcc/tools/tcpaccept</strong></span>
PID   COMM      IP RADDR         RPORT  LADDR    LPORT
843   sshd      4  192.0.2.17    50598  192.0.2.1  22
1107  ns-slapd  4  198.51.100.6  38772  192.0.2.1  389
1107  ns-slapd  4  203.0.113.85  38774  192.0.2.1  389
...</pre><p class="simpara">
						Each time the kernel accepts a connection, <code class="literal">tcpaccept</code> displays the details of the connections.
					</p></li><li class="listitem">
						Press <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">C</kbd> to stop the tracing process.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">tcpaccept(8)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">/usr/share/bcc/tools/doc/tcpaccept_example.txt</code> file
					</li></ul></div></section><section class="section" id="tracing-outgoing-tcp-connection-attempts_network-tracing-using-the-bpf-compiler-collection"><div class="titlepage"><div><div><h3 class="title">43.3. Tracing outgoing TCP connection attempts</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">tcpconnect</code> utility uses eBPF features to trace outgoing TCP connection attempts. The output of the utility also includes connections that failed.
			</p><p>
				The <code class="literal">tcpconnect</code> utility is lightweight because it traces, for example, the <code class="literal">connect()</code> function of the kernel instead of capturing packets and filtering them.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter the following command to start the tracing process that displays all outgoing connections:
					</p><pre class="literallayout"># <span class="strong strong"><strong>/usr/share/bcc/tools/tcpconnect</strong></span>
PID    COMM         IP SADDR      DADDR          DPORT
31346  curl         4  192.0.2.1  198.51.100.16  80
31348  telnet       4  192.0.2.1  203.0.113.231  23
31361  isc-worker00 4  192.0.2.1  192.0.2.254    53
...</pre><p class="simpara">
						Each time the kernel processes an outgoing connection, <code class="literal">tcpconnect</code> displays the details of the connections.
					</p></li><li class="listitem">
						Press <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">C</kbd> to stop the tracing process.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">tcpconnect(8)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">/usr/share/bcc/tools/doc/tcpconnect_example.txt</code> file
					</li></ul></div></section><section class="section" id="measuring-the-latency-of-outgoing-tcp-connections_network-tracing-using-the-bpf-compiler-collection"><div class="titlepage"><div><div><h3 class="title">43.4. Measuring the latency of outgoing TCP connections</h3></div></div></div><p class="_abstract _abstract">
				The TCP connection latency is the time taken to establish a connection. This typically involves the kernel TCP/IP processing and network round trip time, and not the application runtime.
			</p><p>
				The <code class="literal">tcpconnlat</code> utility uses eBPF features to measure the time between a sent <code class="literal">SYN</code> packet and the received response packet.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Start measuring the latency of outgoing connections:
					</p><pre class="literallayout"># <span class="strong strong"><strong>/usr/share/bcc/tools/tcpconnlat</strong></span>
PID    COMM         IP SADDR      DADDR          DPORT LAT(ms)
32151  isc-worker00 4  192.0.2.1  192.0.2.254    53    0.60
32155  ssh          4  192.0.2.1  203.0.113.190  22    26.34
32319  curl         4  192.0.2.1  198.51.100.59  443   188.96
...</pre><p class="simpara">
						Each time the kernel processes an outgoing connection, <code class="literal">tcpconnlat</code> displays the details of the connection after the kernel receives the response packet.
					</p></li><li class="listitem">
						Press <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">C</kbd> to stop the tracing process.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">tcpconnlat(8)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">/usr/share/bcc/tools/doc/tcpconnlat_example.txt</code> file
					</li></ul></div></section><section class="section" id="displaying-details-about-tcp-packets-and-segments-that-were-dropped-by-the-kernel_network-tracing-using-the-bpf-compiler-collection"><div class="titlepage"><div><div><h3 class="title">43.5. Displaying details about TCP packets and segments that were dropped by the kernel</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">tcpdrop</code> utility enables administrators to display details about TCP packets and segments that were dropped by the kernel. Use this utility to debug high rates of dropped packets that can cause the remote system to send timer-based retransmits. High rates of dropped packets and segments can impact the performance of a server.
			</p><p>
				Instead of capturing and filtering packets, which is resource-intensive, the <code class="literal">tcpdrop</code> utility uses eBPF features to retrieve the information directly from the kernel.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter the following command to start displaying details about dropped TCP packets and segments:
					</p><pre class="literallayout"># <span class="strong strong"><strong>/usr/share/bcc/tools/tcpdrop</strong></span>
TIME     PID    IP SADDR:SPORT       &gt; DADDR:DPORT   STATE (FLAGS)
13:28:39 32253  4  192.0.2.85:51616  &gt; 192.0.2.1:22  CLOSE_WAIT (FIN|ACK)
	b'tcp_drop+0x1'
	b'tcp_data_queue+0x2b9'
	...

13:28:39 1      4  192.0.2.85:51616  &gt; 192.0.2.1:22   CLOSE (ACK)
	b'tcp_drop+0x1'
	b'tcp_rcv_state_process+0xe2'
	...</pre><p class="simpara">
						Each time the kernel drops TCP packets and segments, <code class="literal">tcpdrop</code> displays the details of the connection, including the kernel stack trace that led to the dropped package.
					</p></li><li class="listitem">
						Press <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">C</kbd> to stop the tracing process.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">tcpdrop(8)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">/usr/share/bcc/tools/doc/tcpdrop_example.txt</code> file
					</li></ul></div></section><section class="section" id="tracing-tcp-sessions_network-tracing-using-the-bpf-compiler-collection"><div class="titlepage"><div><div><h3 class="title">43.6. Tracing TCP sessions</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">tcplife</code> utility uses eBPF to trace TCP sessions that open and close, and prints a line of output to summarize each one. Administrators can use <code class="literal">tcplife</code> to identify connections and the amount of transferred traffic.
			</p><p>
				For example, you can display connections to port <code class="literal">22</code> (SSH) to retrieve the following information:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The local process ID (PID)
					</li><li class="listitem">
						The local process name
					</li><li class="listitem">
						The local IP address and port number
					</li><li class="listitem">
						The remote IP address and port number
					</li><li class="listitem">
						The amount of received and transmitted traffic in KB.
					</li><li class="listitem">
						The time in milliseconds the connection was active
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter the following command to start the tracing of connections to the local port <code class="literal">22</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>/usr/share/bcc/tools/tcplife -L 22</strong></span>
PID   COMM    LADDR      LPORT RADDR       RPORT TX_KB  RX_KB      MS
19392 sshd    192.0.2.1  22    192.0.2.17  43892    53     52 6681.95
19431 sshd    192.0.2.1  22    192.0.2.245 43902    81 249381 7585.09
19487 sshd    192.0.2.1  22    192.0.2.121 43970  6998     7 16740.35
...</pre><p class="simpara">
						Each time a connection is closed, <code class="literal">tcplife</code> displays the details of the connections.
					</p></li><li class="listitem">
						Press <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">C</kbd> to stop the tracing process.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">tcplife(8)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">/usr/share/bcc/tools/doc/tcplife_example.txt</code> file
					</li></ul></div></section><section class="section" id="tracing-tcp-retransmissions_network-tracing-using-the-bpf-compiler-collection"><div class="titlepage"><div><div><h3 class="title">43.7. Tracing TCP retransmissions</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">tcpretrans</code> utility displays details about TCP retransmissions, such as the local and remote IP address and port number, as well as the TCP state at the time of the retransmissions.
			</p><p>
				The utility uses eBPF features and, therefore, has a very low overhead.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Use the following command to start displaying TCP retransmission details:
					</p><pre class="literallayout"># <span class="strong strong"><strong>/usr/share/bcc/tools/tcpretrans</strong></span>
TIME     PID  IP LADDR:LPORT   T&gt; RADDR:RPORT         STATE
00:23:02 0    4  192.0.2.1:22  R&gt; 198.51.100.0:26788  ESTABLISHED
00:23:02 0    4  192.0.2.1:22  R&gt; 198.51.100.0:26788  ESTABLISHED
00:45:43 0    4  192.0.2.1:22  R&gt; 198.51.100.0:17634  ESTABLISHED
...</pre><p class="simpara">
						Each time the kernel calls the TCP retransmit function, <code class="literal">tcpretrans</code> displays the details of the connection.
					</p></li><li class="listitem">
						Press <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">C</kbd> to stop the tracing process.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">tcpretrans(8)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">/usr/share/bcc/tools/doc/tcpretrans_example.txt</code> file
					</li></ul></div></section><section class="section" id="displaying-tcp-state-change-information_network-tracing-using-the-bpf-compiler-collection"><div class="titlepage"><div><div><h3 class="title">43.8. Displaying TCP state change information</h3></div></div></div><p class="_abstract _abstract">
				During a TCP session, the TCP state changes. The <code class="literal">tcpstates</code> utility uses eBPF functions to trace these state changes, and prints details including the duration in each state. For example, use <code class="literal">tcpstates</code> to identify if connections spend too much time in the initialization state.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Use the following command to start tracing TCP state changes:
					</p><pre class="literallayout"># <span class="strong strong"><strong>/usr/share/bcc/tools/tcpstates</strong></span>
SKADDR           C-PID C-COMM     LADDR     LPORT RADDR       RPORT OLDSTATE    -&gt; NEWSTATE    MS
ffff9cd377b3af80 0     swapper/1  0.0.0.0   22    0.0.0.0     0     LISTEN      -&gt; SYN_RECV    0.000
ffff9cd377b3af80 0     swapper/1  192.0.2.1 22    192.0.2.45  53152 SYN_RECV    -&gt; ESTABLISHED 0.067
ffff9cd377b3af80 818   sssd_nss   192.0.2.1 22    192.0.2.45  53152 ESTABLISHED -&gt; CLOSE_WAIT  65636.773
ffff9cd377b3af80 1432  sshd       192.0.2.1 22    192.0.2.45  53152 CLOSE_WAIT  -&gt; LAST_ACK    24.409
ffff9cd377b3af80 1267  pulseaudio 192.0.2.1 22    192.0.2.45  53152 LAST_ACK    -&gt; CLOSE       0.376
...</pre><p class="simpara">
						Each time a connection changes its state, <code class="literal">tcpstates</code> displays a new line with updated connection details.
					</p><p class="simpara">
						If multiple connections change their state at the same time, use the socket address in the first column (<code class="literal">SKADDR</code>) to determine which entries belong to the same connection.
					</p></li><li class="listitem">
						Press <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">C</kbd> to stop the tracing process.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">tcpstates(8)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">/usr/share/bcc/tools/doc/tcpstates_example.txt</code> file
					</li></ul></div></section><section class="section" id="summarizing-and-aggregating-tcp-traffic-sent-to-specific-subnets_network-tracing-using-the-bpf-compiler-collection"><div class="titlepage"><div><div><h3 class="title">43.9. Summarizing and aggregating TCP traffic sent to specific subnets</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">tcpsubnet</code> utility summarizes and aggregates IPv4 TCP traffic that the local host sends to subnets and displays the output on a fixed interval. The utility uses eBPF features to collect and summarize the data to reduce the overhead.
			</p><p>
				By default, <code class="literal">tcpsubnet</code> summarizes traffic for the following subnets:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">127.0.0.1/32</code>
					</li><li class="listitem">
						<code class="literal">10.0.0.0/8</code>
					</li><li class="listitem">
						<code class="literal">172.16.0.0/12</code>
					</li><li class="listitem">
						<code class="literal">192.0.2.0/24/16</code>
					</li><li class="listitem">
						<code class="literal">0.0.0.0/0</code>
					</li></ul></div><p>
				Note that the last subnet (<code class="literal">0.0.0.0/0</code>) is a catch-all option. The <code class="literal">tcpsubnet</code> utility counts all traffic for subnets different than the first four in this catch-all entry.
			</p><p>
				Follow the procedure to count the traffic for the <code class="literal">192.0.2.0/24</code> and <code class="literal">198.51.100.0/24</code> subnets. Traffic to other subnets will be tracked in the <code class="literal">0.0.0.0/0</code> catch-all subnet entry.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Start monitoring the amount of traffic send to the <code class="literal">192.0.2.0/24</code>, <code class="literal">198.51.100.0/24</code>, and other subnets:
					</p><pre class="literallayout"># <span class="strong strong"><strong>/usr/share/bcc/tools/tcpsubnet 192.0.2.0/24,198.51.100.0/24,0.0.0.0/0</strong></span>
Tracing... Output every 1 secs. Hit Ctrl-C to end
[02/21/20 10:04:50]
192.0.2.0/24           856
198.51.100.0/24       7467
[02/21/20 10:04:51]
192.0.2.0/24          1200
198.51.100.0/24       8763
0.0.0.0/0              673
...</pre><p class="simpara">
						This command displays the traffic in bytes for the specified subnets once per second.
					</p></li><li class="listitem">
						Press <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">C</kbd> to stop the tracing process.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">tcpsubnet(8)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">/usr/share/bcc/tools/doc/tcpsubnet.txt</code> file
					</li></ul></div></section><section class="section" id="displaying-the-network-throughput-by-ip-address-and-port_network-tracing-using-the-bpf-compiler-collection"><div class="titlepage"><div><div><h3 class="title">43.10. Displaying the network throughput by IP address and port</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">tcptop</code> utility displays TCP traffic the host sends and receives in kilobytes. The report automatically refreshes and contains only active TCP connections. The utility uses eBPF features and, therefore, has only a very low overhead.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To monitor the sent and received traffic, enter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>/usr/share/bcc/tools/tcptop</strong></span>
13:46:29 loadavg: 0.10 0.03 0.01 1/215 3875

PID    COMM         LADDR           RADDR              RX_KB   TX_KB
3853   3853         192.0.2.1:22    192.0.2.165:41838  32     102626
1285   sshd         192.0.2.1:22    192.0.2.45:39240   0           0
...</pre><p class="simpara">
						The output of the command includes only active TCP connections. If the local or remote system closes a connection, the connection is no longer visible in the output.
					</p></li><li class="listitem">
						Press <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">C</kbd> to stop the tracing process.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">tcptop(8)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">/usr/share/bcc/tools/doc/tcptop.txt</code> file
					</li></ul></div></section><section class="section" id="tracing-established-tcp-connections_network-tracing-using-the-bpf-compiler-collection"><div class="titlepage"><div><div><h3 class="title">43.11. Tracing established TCP connections</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">tcptracer</code> utility traces the kernel functions that connect, accept, and close TCP connections. The utility uses eBPF features and, therefore, has a very low overhead.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Use the following command to start the tracing process:
					</p><pre class="literallayout"># <span class="strong strong"><strong>/usr/share/bcc/tools/tcptracer</strong></span>
Tracing TCP established connections. Ctrl-C to end.
T  PID    COMM        IP SADDR        DADDR       SPORT  DPORT
A  1088   ns-slapd    4  192.0.2.153  192.0.2.1   0      65535
A  845    sshd        4  192.0.2.1    192.0.2.67  22     42302
X  4502   sshd        4  192.0.2.1    192.0.2.67  22     42302
...</pre><p class="simpara">
						Each time the kernel connects, accepts, or closes a connection, <code class="literal">tcptracer</code> displays the details of the connections.
					</p></li><li class="listitem">
						Press <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">C</kbd> to stop the tracing process.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">tcptracer(8)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">/usr/share/bcc/tools/doc/tcptracer_example.txt</code> file
					</li></ul></div></section><section class="section" id="tracing-ipv4-and-ipv6-listen-attempts_network-tracing-using-the-bpf-compiler-collection"><div class="titlepage"><div><div><h3 class="title">43.12. Tracing IPv4 and IPv6 listen attempts</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">solisten</code> utility traces all IPv4 and IPv6 listen attempts. It traces the listen attempts including that ultimately fail or the listening program that does not accept the connection. The utility traces function that the kernel calls when a program wants to listen for TCP connections.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter the following command to start the tracing process that displays all listen TCP attempts:
					</p><pre class="screen"># <span class="strong strong"><strong>/usr/share/bcc/tools/solisten</strong></span>
PID    COMM           PROTO         BACKLOG     PORT     ADDR
3643   nc             TCPv4         1           4242     0.0.0.0
3659   nc             TCPv6         1           4242     2001:db8:1::1
4221   redis-server   TCPv6         128         6379     ::
4221   redis-server   TCPv4         128         6379     0.0.0.0
....</pre></li><li class="listitem">
						Press <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">C</kbd> to stop the tracing process.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">solisten(9)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">/usr/share/bcc/tools/doc/solisten_example.txt</code> file
					</li></ul></div></section><section class="section" id="summarizing-the-service-time-of-soft-interrupts_network-tracing-using-the-bpf-compiler-collection"><div class="titlepage"><div><div><h3 class="title">43.13. Summarizing the service time of soft interrupts</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">softirqs</code> utility summarizes the time spent servicing soft interrupts (soft IRQs) and shows this time as either totals or histogram distributions. This utility uses the <code class="literal">irq:softirq_enter</code> and <code class="literal">irq:softirq_exit</code> kernel tracepoints, which is a stable tracing mechanism.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enter the following command to start the tracing <code class="literal">soft irq</code> event time:
					</p><pre class="screen"># <span class="strong strong"><strong>/usr/share/bcc/tools/softirqs</strong></span>
Tracing soft irq event time... Hit Ctrl-C to end.
^C
SOFTIRQ          TOTAL_usecs
tasklet                  166
block                   9152
net_rx                 12829
rcu                    53140
sched                 182360
timer                 306256</pre></li><li class="listitem">
						Press <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">C</kbd> to stop the tracing process.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">softirqs(8)</code> and <code class="literal">mpstat(1)</code> man pages on your system
					</li><li class="listitem">
						<code class="literal">/usr/share/bcc/tools/doc/softirqs_example.txt</code> file
					</li></ul></div></section><section class="section" id="summarizing-packets-size-and-count-on-a-network-interface_network-tracing-using-the-bpf-compiler-collection"><div class="titlepage"><div><div><h3 class="title">43.14. Summarizing packets size and count on a network interface</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">netqtop</code> utility displays statistics about the attributes of received (RX) and transmitted (TX) packets on each network queue of a particular network interface. The statistics include:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Bytes per second (BPS)
					</li><li class="listitem">
						Packets per second (PPS)
					</li><li class="listitem">
						The average packet size
					</li><li class="listitem">
						Total number of packets
					</li></ul></div><p>
				To generate these statistics, <code class="literal">netqtop</code> traces the kernel functions that perform events of transmitted packets <code class="literal">net_dev_start_xmit</code> and received packets <code class="literal">netif_receive_skb</code>.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the number of packets within the range of bytes size of the time interval of <code class="literal">2</code> seconds:
					</p><pre class="literallayout"># <span class="strong strong"><strong>/usr/share/bcc/tools/netqtop -n enp1s0 -i 2</strong></span>

Fri Jan 31 18:08:55 2023
TX
 QueueID	avg_size   [0, 64)	[64, 512)  [512, 2K)  [2K, 16K)  [16K, 64K)
 0      	0      	0      	0      	0      	0      	0
 Total  	0      	0      	0      	0      	0      	0

RX
 QueueID	avg_size   [0, 64)	[64, 512)  [512, 2K)  [2K, 16K)  [16K, 64K)
 0      	38.0   	1      	0      	0      	0      	0
 Total  	38.0   	1      	0      	0      	0      	0
-----------------------------------------------------------------------------
Fri Jan 31 18:08:57 2023
TX
 QueueID	avg_size   [0, 64)	[64, 512)  [512, 2K)  [2K, 16K)  [16K, 64K)
 0      	0      	0      	0      	0      	0      	0
 Total  	0      	0      	0      	0      	0      	0

RX
 QueueID	avg_size   [0, 64)	[64, 512)  [512, 2K)  [2K, 16K)  [16K, 64K)
 0      	38.0   	1      	0      	0      	0      	0
 Total  	38.0   	1      	0      	0      	0      	0
-----------------------------------------------------------------------------</pre></li><li class="listitem">
						Press <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">C</kbd> to stop <code class="literal">netqtop</code>.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">netqtop(8)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">/usr/share/bcc/tools/doc/netqtop_example.txt</code>
					</li></ul></div></section></section><section class="chapter" id="assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 44. Configuring network devices to accept traffic from all MAC addresses</h2></div></div></div><p class="_abstract _abstract">
			Network devices usually intercept and read packets that their controller is programmed to receive. You can configure the network devices to accept traffic from all MAC addresses in a virtual switch or at the port group level.
		</p><p>
			You can use this network mode to:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Diagnose network connectivity issues
				</li><li class="listitem">
					Monitor network activity for security reasons
				</li><li class="listitem">
					Intercept private data-in-transit or intrusion in the network
				</li></ul></div><p>
			You can enable this mode for any kind of network device, except <code class="literal">InfiniBand</code>.
		</p><section class="section" id="proc_temporarily-configuring-a-network-device-to-accept-all-traffic_assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses"><div class="titlepage"><div><div><h3 class="title">44.1. Temporarily configuring a device to accept all traffic</h3></div></div></div><p class="_abstract _abstract">
				You can use the <code class="literal">ip</code> utility to temporary configure a network device to accept all traffic regardless of the MAC addresses.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: Display the network interfaces to identify the one for which you want to receive all traffic:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip address show</strong></span>
1: enp1s0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc fq_codel state DOWN group default qlen 1000
    link/ether 98:fa:9b:a4:34:09 brd ff:ff:ff:ff:ff:ff
...</pre></li><li class="listitem"><p class="simpara">
						Modify the device to enable or disable this property:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To enable the <code class="literal">accept-all-mac-addresses</code> mode for <code class="literal">enp1s0</code>:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip link set <span class="emphasis"><em>enp1s0</em></span> promisc <span class="emphasis"><em>on</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
								To disable the <code class="literal">accept-all-mac-addresses</code> mode for <code class="literal">enp1s0</code>:
							</p><pre class="literallayout"># <span class="strong strong"><strong>ip link set <span class="emphasis"><em>enp1s0</em></span> promisc <span class="emphasis"><em>off</em></span></strong></span></pre></li></ul></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify that the <code class="literal">accept-all-mac-addresses</code> mode is enabled:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip link show <span class="emphasis"><em>enp1s0</em></span></strong></span>
1: enp1s0: &lt;NO-CARRIER,BROADCAST,MULTICAST,<span class="strong strong"><strong>PROMISC</strong></span>,UP&gt; mtu 1500 qdisc fq_codel state DOWN mode DEFAULT group default qlen 1000
    link/ether 98:fa:9b:a4:34:09 brd ff:ff:ff:ff:ff:ff</pre><p class="simpara">
						The <code class="literal">PROMISC</code> flag in the device description indicates that the mode is enabled.
					</p></li></ul></div></section><section class="section" id="proc_permanently-configuring-a-network-device-to-accept-all-traffic-using-nmcli_assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses"><div class="titlepage"><div><div><h3 class="title">44.2. Permanently configuring a network device to accept all traffic using <code class="literal">nmcli</code></h3></div></div></div><p class="_abstract _abstract">
				You can use the <code class="literal">nmcli</code> utility to permanently configure a network device to accept all traffic regardless of the MAC addresses.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: Display the network interfaces to identify the one for which you want to receive all traffic:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ip address show</strong></span>
1: enp1s0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc fq_codel state DOWN group default qlen 1000
    link/ether 98:fa:9b:a4:34:09 brd ff:ff:ff:ff:ff:ff
...</pre><p class="simpara">
						You can create a new connection, if you do not have any.
					</p></li><li class="listitem"><p class="simpara">
						Modify the network device to enable or disable this property.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To enable the <code class="literal">ethernet.accept-all-mac-addresses</code> mode for <code class="literal">enp1s0</code>:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>enp1s0</em></span> ethernet.accept-all-mac-addresses <span class="emphasis"><em>yes</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
								To disable the <code class="literal">accept-all-mac-addresses</code> mode for <code class="literal">enp1s0</code>:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>enp1s0</em></span> ethernet.accept-all-mac-addresses <span class="emphasis"><em>no</em></span></strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Apply the changes, reactivate the connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>enp1s0</em></span></strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify that the <code class="literal">ethernet.accept-all-mac-addresses</code> mode is enabled:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection show <span class="emphasis"><em>enp1s0</em></span></strong></span>
...
802-3-ethernet.accept-all-mac-addresses:1     <span class="strong strong"><strong>(true)</strong></span></pre><p class="simpara">
						The <code class="literal">802-3-ethernet.accept-all-mac-addresses: true</code> indicates that the mode is enabled.
					</p></li></ul></div></section><section class="section" id="proc_permanently-configuring-a-network-device-to-accept-all-traffic-using-nmstatectl_assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses"><div class="titlepage"><div><div><h3 class="title">44.3. Permanently configuring a network device to accept all traffic using <code class="literal">nmstatectl</code></h3></div></div></div><p class="_abstract _abstract">
				Use the <code class="literal">nmstatectl</code> utility to configure a device to accept all traffic regardless of the MAC addresses through the Nmstate API. The Nmstate API ensures that, after setting the configuration, the result matches the configuration file. If anything fails, <code class="literal">nmstatectl</code> automatically rolls back the changes to avoid leaving the system in an incorrect state.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">nmstate</code> package is installed.
					</li><li class="listitem">
						The <code class="literal">enp1s0.yml</code> file that you used to configure the device is available.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Edit the existing <code class="literal">enp1s0.yml</code> file for the <code class="literal">enp1s0</code> connection and add the following content to it:
					</p><pre class="programlisting language-yaml">---
<span class="strong strong"><strong>interfaces:</strong></span>
  <span class="strong strong"><strong>- name: <span class="emphasis"><em>enp1s0</em></span></strong></span>
    <span class="strong strong"><strong>type: ethernet</strong></span>
    <span class="strong strong"><strong>state: up</strong></span>
    <span class="strong strong"><strong>accept -all-mac-address: <span class="emphasis"><em>true</em></span></strong></span></pre><p class="simpara">
						These settings configure the <code class="literal">enp1s0</code> device to accept all traffic.
					</p></li><li class="listitem"><p class="simpara">
						Apply the network settings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmstatectl apply ~/enp1s0.yml</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify that the <code class="literal">802-3-ethernet.accept-all-mac-addresses</code> mode is enabled:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmstatectl show <span class="emphasis"><em>enp1s0</em></span></strong></span>
interfaces:
  - name: <span class="emphasis"><em>enp1s0</em></span>
    type: ethernet
    state: up
    accept-all-mac-addresses:     <span class="strong strong"><strong>true</strong></span>
...</pre><p class="simpara">
						The <code class="literal">802-3-ethernet.accept-all-mac-addresses: true</code> indicates that the mode is enabled.
					</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nmstatectl(8)</code> man page on your system
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/nmstate/examples/</code> directory
					</li></ul></div></section></section><section class="chapter" id="proc_mirroring-a-network-interface-by-using-nmcli_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 45. Mirroring a network interface by using <code class="literal">nmcli</code></h2></div></div></div><p class="_abstract _abstract">
			Network administrators can use port mirroring to replicate inbound and outbound network traffic being communicated from one network device to another. Mirroring traffic of an interface can be helpful in the following situations:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					To debug networking issues and tune the network flow
				</li><li class="listitem">
					To inspect and analyze the network traffic
				</li><li class="listitem">
					To detect an intrusion
				</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					A network interface to mirror the network traffic to.
				</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
					Add a network connection profile that you want to mirror the network traffic from:
				</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type ethernet ifname <span class="emphasis"><em>enp1s0</em></span> con-name <span class="emphasis"><em>enp1s0</em></span> autoconnect <span class="emphasis"><em>no</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
					Attach a <code class="literal">prio</code> <code class="literal">qdisc</code> to <code class="literal">enp1s0</code> for the egress (outgoing) traffic with the <code class="literal">10:</code> handle:
				</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>enp1s0</em></span> +tc.qdisc "root prio handle 10:"</strong></span></pre><p class="simpara">
					The <code class="literal">prio</code> <code class="literal">qdisc</code> attached without children allows attaching filters.
				</p></li><li class="listitem"><p class="simpara">
					Add a <code class="literal">qdisc</code> for the ingress traffic, with the <code class="literal">ffff:</code> handle:
				</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>enp1s0</em></span> +tc.qdisc "ingress handle ffff:"</strong></span></pre></li><li class="listitem"><p class="simpara">
					Add the following filters to match packets on the ingress and egress <code class="literal">qdiscs</code>, and to mirror them to <code class="literal">enp7s0</code>:
				</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>enp1s0</em></span> +tc.tfilter "parent ffff: matchall action mirred egress mirror dev <span class="emphasis"><em>enp7s0</em></span>"</strong></span>

# <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>enp1s0</em></span> +tc.tfilter "parent 10: matchall action mirred egress mirror dev <span class="emphasis"><em>enp7s0</em></span>"</strong></span></pre><p class="simpara">
					The <code class="literal">matchall</code> filter matches all packets, and the <code class="literal">mirred</code> action redirects packets to destination.
				</p></li><li class="listitem"><p class="simpara">
					Activate the connection:
				</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>enp1s0</em></span></strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
					Install the <code class="literal">tcpdump</code> utility:
				</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install tcpdump</strong></span></pre></li><li class="listitem"><p class="simpara">
					Display the traffic mirrored on the target device (<code class="literal">enp7s0</code>):
				</p><pre class="literallayout"># <span class="strong strong"><strong>tcpdump -i <span class="emphasis"><em>enp7s0</em></span></strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
					<a class="link" href="https://access.redhat.com/solutions/8787">How to capture network packets using <code class="literal">tcpdump</code></a> (Red Hat Knowledgebase)
				</li></ul></div></section><section class="chapter" id="assembly_using-nmstate-autoconf-to-automatically-configure-the-network-state-using-lldp_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 46. Using nmstate-autoconf to automatically configure the network state using LLDP</h2></div></div></div><p class="_abstract _abstract">
			Network devices can use the Link Layer Discovery Protocol (LLDP) to advertise their identity, capabilities, and neighbors in a LAN. The <code class="literal systemitem">nmstate-autoconf</code> utility can use this information to automatically configure local network interfaces.
		</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
				The <code class="literal systemitem">nmstate-autoconf</code> utility is provided as a Technology Preview only. Technology Preview features are not supported with Red Hat production Service Level Agreements (SLAs), might not be functionally complete, and Red Hat does not recommend using them for production. These previews provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
			</p><p>
				See <a class="link" href="https://access.redhat.com/support/offerings/techpreview">Technology Preview Features Support Scope</a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.
			</p></div></rh-alert><section class="section" id="proc_using-nmstate-autoconf-to-automatically-configure-network-interfaces_assembly_using-nmstate-autoconf-to-automatically-configure-the-network-state-using-lldp"><div class="titlepage"><div><div><h3 class="title">46.1. Using nmstate-autoconf to automatically configure network interfaces</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">nmstate-autoconf</code> utility uses LLDP to identify the VLAN settings of interfaces connected to a switch to configure local devices.
			</p><p>
				This procedure assumes the following scenario and that the switch broadcasts the VLAN settings using LLDP:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">enp1s0</code> and <code class="literal">enp2s0</code> interfaces of the RHEL server are connected to switch ports that are configured with VLAN ID <code class="literal">100</code> and VLAN name <code class="literal">prod-net</code>.
					</li><li class="listitem">
						The <code class="literal">enp3s0</code> interface of the RHEL server is connected to a switch port that is configured with VLAN ID <code class="literal">200</code> and VLAN name <code class="literal">mgmt-net</code>.
					</li></ul></div><p>
				The <code class="literal">nmstate-autoconf</code> utility then uses this information to create the following interfaces on the server:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">bond100</code> - A bond interface with <code class="literal">enp1s0</code> and <code class="literal">enp2s0</code> as ports.
					</li><li class="listitem">
						<code class="literal">prod-net</code> - A VLAN interface on top of <code class="literal">bond100</code> with VLAN ID <code class="literal">100</code>.
					</li><li class="listitem">
						<code class="literal">mgmt-net</code> - A VLAN interface on top of <code class="literal">enp3s0</code> with VLAN ID <code class="literal">200</code>
					</li></ul></div><p>
				If you connect multiple network interfaces to different switch ports for which LLDP broadcasts the same VLAN ID, <code class="literal">nmstate-autoconf</code> creates a bond with these interfaces and, additionally, configures the common VLAN ID on top of it.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">nmstate</code> package is installed.
					</li><li class="listitem">
						LLDP is enabled on the network switch.
					</li><li class="listitem">
						The Ethernet interfaces are up.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enable LLDP on the Ethernet interfaces:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create a YAML file, for example <code class="literal">~/enable-lldp.yml</code>, with the following content:
							</p><pre class="programlisting language-yaml">interfaces:
  - name: enp1s0
    type: ethernet
    lldp:
      enabled: true
  - name: enp2s0
    type: ethernet
    lldp:
      enabled: true
  - name: enp3s0
    type: ethernet
    lldp:
      enabled: true</pre></li><li class="listitem"><p class="simpara">
								Apply the settings to the system:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmstatectl apply ~/enable-lldp.yml</strong></span></pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Configure the network interfaces using LLDP:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Optional, start a dry-run to display and verify the YAML configuration that <code class="literal">nmstate-autoconf</code> generates:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmstate-autoconf -d <span class="emphasis"><em>enp1s0</em></span>,<span class="emphasis"><em>enp2s0</em></span>,<span class="emphasis"><em>enp3s0</em></span></strong></span>
---
interfaces:
- name: prod-net
  type: vlan
  state: up
  vlan:
    base-iface: bond100
    id: 100
- name: mgmt-net
  type: vlan
  state: up
  vlan:
    base-iface: enp3s0
    id: 200
- name: bond100
  type: bond
  state: up
  link-aggregation:
    mode: balance-rr
    port:
    - enp1s0
    - enp2s0</pre></li><li class="listitem"><p class="simpara">
								Use <code class="literal">nmstate-autoconf</code> to generate the configuration based on information received from LLDP, and apply the settings to the system:
							</p><pre class="literallayout"># <span class="strong strong"><strong>nmstate-autoconf <span class="emphasis"><em>enp1s0</em></span>,<span class="emphasis"><em>enp2s0</em></span>,<span class="emphasis"><em>enp3s0</em></span></strong></span></pre></li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						If there is no DHCP server in your network that provides the IP settings to the interfaces, configure them manual. For details, see:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<a class="link" href="#configuring-an-ethernet-connection_configuring-and-managing-networking" title="Chapter 2. Configuring an Ethernet connection">Configuring an Ethernet connection</a>
							</li><li class="listitem">
								<a class="link" href="#configuring-network-bonding_configuring-and-managing-networking" title="Chapter 3. Configuring a network bond">Configuring a network bond</a>
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the settings of the individual interfaces:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmstatectl show <span class="emphasis"><em>&lt;interface_name&gt;</em></span></strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nmstate-autoconf(8)</code> man page on your system
					</li></ul></div></section></section><section class="chapter" id="configuring-802-3-link-settings_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 47. Configuring 802.3 link settings</h2></div></div></div><p>
			Auto-negotiation is a feature of the IEEE 802.3u Fast Ethernet protocol. It targets the device ports to provide an optimal performance of speed, duplex mode, and flow control for information exchange over a link. Using the auto-negotiation protocol, you have optimal performance of data transfer over the Ethernet.
		</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
				To utilize maximum performance of auto-negotiation, use the same configuration on both sides of a link.
			</p></div></rh-alert><section class="section" id="proc_configuring-802-3-link-settings-using-the-nmcli-utility_configuring-802-3-link-settings"><div class="titlepage"><div><div><h3 class="title">47.1. Configuring 802.3 link settings using the <code class="literal">nmcli</code> utility</h3></div></div></div><p class="_abstract _abstract">
				To configure the 802.3 link settings of an Ethernet connection, modify the following configuration parameters:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">802-3-ethernet.auto-negotiate</code>
					</li><li class="listitem">
						<code class="literal">802-3-ethernet.speed</code>
					</li><li class="listitem">
						<code class="literal">802-3-ethernet.duplex</code>
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the current settings of the connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection show <span class="emphasis"><em>Example-connection</em></span></strong></span>
...
802-3-ethernet.speed:  0
802-3-ethernet.duplex: --
802-3-ethernet.auto-negotiate: no
...</pre><p class="simpara">
						You can use these values if you need to reset the parameters in case of any problems.
					</p></li><li class="listitem"><p class="simpara">
						Set the speed and duplex link settings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify <span class="emphasis"><em>Example-connection</em></span> 802-3-ethernet.auto-negotiate <span class="emphasis"><em>yes</em></span> 802-3-ethernet.speed <span class="emphasis"><em>10000</em></span> 802-3-ethernet.duplex <span class="emphasis"><em>full</em></span></strong></span></pre><p class="simpara">
						This command enables auto-negotiation and sets the speed of the connection to <code class="literal">10000</code> Mbit full duplex.
					</p></li><li class="listitem"><p class="simpara">
						Reactivate the connection:
					</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up <span class="emphasis"><em>Example-connection</em></span></strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Use the <code class="literal">ethtool</code> utility to verify the values of Ethernet interface <code class="literal">enp1s0</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ethtool <span class="emphasis"><em>enp1s0</em></span></strong></span>

Settings for enp1s0:
...
Speed: 10000 Mb/s
Duplex: Full
Auto-negotiation: on
...
Link detected: yes</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nm-settings(5)</code> man page on your system
					</li></ul></div></section></section><section class="chapter" id="getting-started-with-dpdk_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 48. Getting started with DPDK</h2></div></div></div><p class="_abstract _abstract">
			The data plane development kit (DPDK) provides libraries and network drivers to accelerate packet processing in user space.
		</p><p>
			Administrators use DPDK, for example, in virtual machines to use Single Root I/O Virtualization (SR-IOV) to reduce latencies and increase I/O throughput.
		</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
				Red Hat does not support experimental DPDK APIs.
			</p></div></rh-alert><section class="section" id="installing-the-dpdk-package_getting-started-with-dpdk"><div class="titlepage"><div><div><h3 class="title">48.1. Installing the dpdk package</h3></div></div></div><p class="_abstract _abstract">
				To use DPDK, install the <code class="literal">dpdk</code> package.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Use the <code class="literal">dnf</code> utility to install the <code class="literal">dpdk</code> package:
					</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install dpdk</strong></span></pre></li></ul></div></section><section class="section _additional-resources" id="additional_resources_3"><div class="titlepage"><div><div><h3 class="title">48.2. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/articles/3538141">Network Adapter Fast Datapath Feature Support Matrix</a>
					</li></ul></div></section></section><section class="chapter" id="getting-started-with-tipc_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 49. Getting started with TIPC</h2></div></div></div><p class="_abstract _abstract">
			Transparent Inter-process Communication (TIPC), which is also known as <code class="literal literal">Cluster Domain Sockets</code>, is an Inter-process Communication (IPC) service for cluster-wide operation.
		</p><p>
			Applications that are running in a high-available and dynamic cluster environment have special needs. The number of nodes in a cluster can vary, routers can fail, and, due to load balancing considerations, functionality can be moved to different nodes in the cluster. TIPC minimizes the effort by application developers to deal with such situations, and maximizes the chance that they are handled in a correct and optimal way. Additionally, TIPC provides a more efficient and fault-tolerant communication than general protocols, such as TCP.
		</p><section class="section" id="the-architecture-of-tipc_getting-started-with-tipc"><div class="titlepage"><div><div><h3 class="title">49.1. The architecture of TIPC</h3></div></div></div><p class="_abstract _abstract">
				TIPC is a layer between applications using TIPC and a packet transport service (<code class="literal">bearer</code>), and spans the level of transport, network, and signaling link layers. However, TIPC can use a different transport protocol as bearer, so that, for example, a TCP connection can serve as a bearer for a TIPC signaling link.
			</p><p>
				TIPC supports the following bearers:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Ethernet
					</li><li class="listitem">
						InfiniBand
					</li><li class="listitem">
						UDP protocol
					</li></ul></div><p>
				TIPC provides a reliable transfer of messages between TIPC ports, that are the endpoints of all TIPC communication.
			</p><p>
				The following is a diagram of the TIPC architecture:
			</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/05f0a1f83cfa23805891dbf10b7b6078/TIPC-architectural-overview.png" alt="TIPC architectural overview"></div></div></section><section class="section" id="loading-the-tipc-module-when-the-system-boots_getting-started-with-tipc"><div class="titlepage"><div><div><h3 class="title">49.2. Loading the tipc module when the system boots</h3></div></div></div><p class="_abstract _abstract">
				Before you can use the TIPC protocol, you must load the <code class="literal">tipc</code> kernel module. You can configure Red Hat Enterprise Linux to automatically load this kernel module automatically when the system boots.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create the <code class="literal">/etc/modules-load.d/tipc.conf</code> file with the following content:
					</p><pre class="screen">tipc</pre></li><li class="listitem"><p class="simpara">
						Restart the <code class="literal">systemd-modules-load</code> service to load the module without rebooting the system:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl start systemd-modules-load</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Use the following command to verify that RHEL loaded the <code class="literal">tipc</code> module:
					</p><pre class="literallayout"># <span class="strong strong"><strong>lsmod | grep tipc</strong></span>
tipc    <span class="emphasis"><em>311296</em></span>  0</pre><p class="simpara">
						If the command shows no entry for the <code class="literal">tipc</code> module, RHEL failed to load it.
					</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">modules-load.d(5)</code> man page on your system
					</li></ul></div></section><section class="section" id="creating-a-tipc-network_getting-started-with-tipc"><div class="titlepage"><div><div><h3 class="title">49.3. Creating a TIPC network</h3></div></div></div><p class="_abstract _abstract">
				To create a TIPC network, perform this procedure on each host that should join the TIPC network.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					The commands configure the TIPC network only temporarily. To permanently configure TIPC on a node, use the commands of this procedure in a script, and configure RHEL to execute that script when the system boots.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">tipc</code> module has been loaded. For details, see <a class="link" href="#loading-the-tipc-module-when-the-system-boots_getting-started-with-tipc" title="49.2. Loading the tipc module when the system boots">Loading the tipc module when the system boots</a>
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: Set a unique node identity, such as a UUID or the node’s host name:
					</p><pre class="literallayout"># <span class="strong strong"><strong>tipc node set identity <span class="emphasis"><em>host_name</em></span></strong></span></pre><p class="simpara">
						The identity can be any unique string consisting of a maximum 16 letters and numbers.
					</p><p class="simpara">
						You cannot set or change an identity after this step.
					</p></li><li class="listitem"><p class="simpara">
						Add a bearer. For example, to use Ethernet as media and <code class="literal">enp0s1</code> device as physical bearer device, enter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>tipc bearer enable media <span class="emphasis"><em>eth</em></span> device <span class="emphasis"><em>enp1s0</em></span></strong></span></pre></li><li class="listitem">
						Optional: For redundancy and better performance, attach further bearers using the command from the previous step. You can configure up to three bearers, but not more than two on the same media.
					</li><li class="listitem">
						Repeat all previous steps on each node that should join the TIPC network.
					</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the link status for cluster members:
					</p><pre class="literallayout"># <span class="strong strong"><strong>tipc link list</strong></span>
broadcast-link: up
5254006b74be:enp1s0-525400df55d1:enp1s0: up</pre><p class="simpara">
						This output indicates that the link between bearer <code class="literal">enp1s0</code> on node <code class="literal">5254006b74be</code> and bearer <code class="literal">enp1s0</code> on node <code class="literal">525400df55d1</code> is <code class="literal">up</code>.
					</p></li><li class="listitem"><p class="simpara">
						Display the TIPC publishing table:
					</p><pre class="literallayout"># <span class="strong strong"><strong>tipc nametable show</strong></span>
Type       Lower      Upper      Scope    Port       Node
0          1795222054 1795222054 cluster  0          5254006b74be
0          3741353223 3741353223 cluster  0          525400df55d1
1          1          1          node     2399405586 5254006b74be
2          3741353223 3741353223 node     0          5254006b74be</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The two entries with service type <code class="literal">0</code> indicate that two nodes are members of this cluster.
							</li><li class="listitem">
								The entry with service type <code class="literal">1</code> represents the built-in topology service tracking service.
							</li><li class="listitem">
								The entry with service type <code class="literal">2</code> displays the link as seen from the issuing node. The range limit <code class="literal">3741353223</code> represents the peer endpoint’s address (a unique 32-bit hash value based on the node identity) in decimal format.
							</li></ul></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">tipc-bearer(8)</code> and <code class="literal">tipc-namespace(8)</code> man pages on your system
					</li></ul></div></section><section class="section _additional-resources" id="additional_resources_4"><div class="titlepage"><div><div><h3 class="title">49.4. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Red Hat recommends to use other bearer level protocols to encrypt the communication between nodes based on the transport media. For example:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								MACSec: See <a class="link" href="#assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network_configuring-and-managing-networking" title="Chapter 13. Using MACsec to encrypt layer-2 traffic in the same physical network">Using MACsec to encrypt layer 2 traffic</a>
							</li><li class="listitem">
								IPsec: See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/securing_networks/configuring-a-vpn-with-ipsec_securing-networks">Configuring a VPN with IPsec</a>
							</li></ul></div></li><li class="listitem">
						For examples of how to use TIPC, clone the upstream GIT repository using the <code class="literal command">git clone git://git.code.sf.net/p/tipc/tipcutils</code> command. This repository contains the source code of demos and test programs that use TIPC features. Note that this repository is not provided by Red Hat.
					</li><li class="listitem">
						<code class="literal filename">/usr/share/doc/kernel-doc-<span class="emphasis"><em>&lt;kernel_version&gt;</em></span>/Documentation/output/networking/tipc.html</code> provided by the <code class="literal package">kernel-doc</code> package.
					</li></ul></div></section></section><section class="chapter" id="automatically-configuring-network-interfaces-in-public-clouds-using-nm-cloud-setup_configuring-and-managing-networking"><div class="titlepage"><div><div><h2 class="title">Chapter 50. Automatically configuring network interfaces in public clouds using nm-cloud-setup</h2></div></div></div><p class="_abstract _abstract">
			Usually, a virtual machine (VM) has only one interface that is configurable by DHCP. However, DHCP cannot configure VMs with multiple network entities, such as interfaces, IP subnets, and IP addresses. Additionally, you cannot apply settings when the VM instance is running. To solve this runtime configuration issue, the <code class="literal">nm-cloud-setup</code> utility automatically retrieves configuration information from the metadata server of the cloud service provider and updates the network configuration of the host. The utility automatically picks up multiple network interfaces, multiple IP addresses, or IP subnets on one interface and helps to reconfigure the network of the running VM instance.
		</p><section class="section" id="proc_configuring-and-pre-deploying-nm-cloud-setup_automatically-configuring-network-interfaces-in-public-clouds-using-nm-cloud-setup"><div class="titlepage"><div><div><h3 class="title">50.1. Configuring and pre-deploying nm-cloud-setup</h3></div></div></div><p class="_abstract _abstract">
				To enable and configure network interfaces in public clouds, run <code class="literal">nm-cloud-setup</code> as a timer and service.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					On Red Hat Enterprise Linux On Demand and AWS golden images, <code class="literal">nm-cloud-setup</code> is already enabled and no action is required.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisite</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A network connection exists.
					</li><li class="listitem"><p class="simpara">
						The connection uses DHCP.
					</p><p class="simpara">
						By default, NetworkManager creates a connection profile which uses DHCP. If no profile was created because you set the <code class="literal">no-auto-default</code> parameter in <code class="literal">/etc/NetworkManager/NetworkManager.conf</code>, create this initial connection manually.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the <code class="literal">nm-cloud-setup</code> package:
					</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install NetworkManager-cloud-setup</strong></span></pre></li><li class="listitem"><p class="simpara">
						Create and run the snap-in file for the <code class="literal">nm-cloud-setup</code> service:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Use the following command to start editing the snap-in file:
							</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl edit nm-cloud-setup.service</strong></span></pre><p class="simpara">
								It is important to either start the service explicitly or reboot the system to make configuration settings effective.
							</p></li><li class="listitem"><p class="simpara">
								Use the <code class="literal">systemd</code> snap-in file to configure the cloud provider in <code class="literal">nm-cloud-setup</code>. For example, to use Amazon EC2, enter:
							</p><pre class="screen">[Service]
Environment=NM_CLOUD_SETUP_EC2=yes</pre><p class="simpara">
								You can set the following environment variables to enable the cloud provide you use:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">NM_CLOUD_SETUP_AZURE</code> for Microsoft Azure
									</li><li class="listitem">
										<code class="literal">NM_CLOUD_SETUP_EC2</code> for Amazon EC2 (AWS)
									</li><li class="listitem">
										<code class="literal">NM_CLOUD_SETUP_GCP</code> for Google Cloud Platform(GCP)
									</li><li class="listitem">
										<code class="literal">NM_CLOUD_SETUP_ALIYUN</code> for Alibaba Cloud (Aliyun)
									</li></ul></div></li><li class="listitem">
								Save the file and quit the editor.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Reload the <code class="literal">systemd</code> configuration:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl daemon-reload</strong></span></pre></li><li class="listitem"><p class="simpara">
						Enable and start the <code class="literal">nm-cloud-setup</code> service:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl enable --now nm-cloud-setup.service</strong></span></pre></li><li class="listitem"><p class="simpara">
						Enable and start the <code class="literal">nm-cloud-setup</code> timer:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl enable --now nm-cloud-setup.timer</strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nm-cloud-setup(8)</code> man page on your system
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_networking/configuring-an-ethernet-connection_configuring-and-managing-networking">Configuring an Ethernet connection</a>
					</li></ul></div></section><section class="section" id="understanding-the-role-of-imdsv2-and-nm-cloud-setup-in-the-rhel-ec2-instance_automatically-configuring-network-interfaces-in-public-clouds-using-nm-cloud-setup"><div class="titlepage"><div><div><h3 class="title">50.2. Understanding the role of IMDSv2 and nm-cloud-setup in the RHEL EC2 instance</h3></div></div></div><p class="_abstract _abstract">
				The instance metadata service (IMDS) in Amazon EC2 allows you to manage permissions to access instance metadata of a running Red Hat Enterprise Linux (RHEL) EC2 instance. The RHEL EC2 instance uses IMDS version 2 (IMDSv2), a session-oriented method. By using the <code class="literal">nm-cloud-setup</code> utility, administrators can reconfigure the network and automatically update the configuration of running RHEL EC2 instances. The <code class="literal">nm-cloud-setup</code> utility handles IMDSv2 API calls by using IMDSv2 tokens without any user intervention.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						IMDS runs on a link-local address <code class="literal">169.254.169.254</code> for providing access to native applications on a RHEL EC2 instance.
					</li><li class="listitem">
						After you have specified and configured IMDSv2 for each RHEL EC2 instance for applications and users, you can no longer access IMDSv1.
					</li><li class="listitem">
						By using IMDSv2, the RHEL EC2 instance maintains metadata without using the IAM role while remaining accessible through the IAM role.
					</li><li class="listitem">
						When the RHEL EC2 instance boots, the <code class="literal">nm-cloud-setup</code> utility automatically runs to fetch the EC2 instance API access token for using the RHEL EC2 instance API.
					</li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					Use the IMDSv2 token as an HTTP header to check the details of the EC2 environment.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">nm-cloud-setup(8)</code> man page on your system
					</li></ul></div></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm140053155520160"><h2 class="legalnotice">Legal Notice</h2><div class="para">
		Copyright <span class="trademark"><!--Empty--></span>© 2024 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div></body></section><!----></div></article><aside id="layout" class="span-xs-12 span-sm-2 span-md-2 content-format-selectors" aria-label="Select page format" data-v-8589d091><div class="sticky-top page-layout-options" data-v-8589d091><label for="page-format" data-v-8589d091>Format</label><select id="page-format" class="page-format-dropdown" data-v-8589d091><option class="page-type" value="html" data-v-8589d091>Multi-page</option><option selected class="page-type" value="html-single" data-v-8589d091>Single-page</option><option class="page-type" value="pdf" data-v-8589d091>View full doc as PDF</option></select></div><!----></aside></div><div class="btn-container hidden" data-v-8589d091><pf-button class="top-scroll-btn" icon="angle-up" icon-set="fas" icon-position="right" data-v-8589d091>Back to top</pf-button></div><!--]--><!--]--></main><rh-footer data-analytics-region="page-footer" data-v-97dd2752><a slot="logo" href="/en" data-analytics-category="Footer" data-analytics-text="Logo" data-v-97dd2752><img alt="Red Hat logo" src="/Logo-Red_Hat-Documentation-A-Reverse-RGB.svg" loading="lazy" width="222" height="40" data-v-97dd2752></a><rh-footer-social-link slot="social-links" icon="github" data-v-97dd2752><a href="https://github.com/redhat-documentation" data-analytics-region="social-links-exit" data-analytics-category="Footer|social-links" data-analytics-text="LinkedIn" data-v-97dd2752>Github</a></rh-footer-social-link><rh-footer-social-link slot="social-links" icon="reddit" data-v-97dd2752><a href="https://www.reddit.com/r/redhat/" data-analytics-region="social-links-exit" data-analytics-category="Footer|social-links" data-analytics-text="YouTube" data-v-97dd2752>Reddit</a></rh-footer-social-link><rh-footer-social-link slot="social-links" icon="youtube" data-v-97dd2752><a href="https://www.youtube.com/@redhat" data-analytics-region="social-links-exit" data-analytics-category="Footer|social-links" data-analytics-text="Facebook" data-v-97dd2752>Youtube</a></rh-footer-social-link><rh-footer-social-link slot="social-links" icon="twitter" data-v-97dd2752><a href="https://twitter.com/RedHat" data-analytics-region="social-links-exit" data-analytics-category="Footer|social-links" data-analytics-text="Twitter" data-v-97dd2752>Twitter</a></rh-footer-social-link><h3 slot="links" data-analytics-text="Learn" data-v-97dd2752>Learn</h3><ul slot="links" data-v-97dd2752><li data-v-97dd2752><a href="https://developers.redhat.com/learn" data-analytics-category="Footer|Learn" data-analytics-text="Developer resources" data-v-97dd2752>Developer resources</a></li><li data-v-97dd2752><a href="https://cloud.redhat.com/learn" data-analytics-category="Footer|Learn" data-analytics-text="Cloud learning hub" data-v-97dd2752>Cloud learning hub</a></li><li data-v-97dd2752><a href="https://www.redhat.com/en/interactive-labs" data-analytics-category="Footer|Learn" data-analytics-text="Interactive labs" data-v-97dd2752>Interactive labs</a></li><li data-v-97dd2752><a href="https://www.redhat.com/services/training-and-certification" data-analytics-category="Footer|Learn" data-analytics-text="Training and certification" data-v-97dd2752>Training and certification</a></li><li data-v-97dd2752><a href="https://access.redhat.com/support" data-analytics-category="Footer|Learn" data-analytics-text="Customer support" data-v-97dd2752>Customer support</a></li><li data-v-97dd2752><a href="/products" data-analytics-category="Footer|Learn" data-analytics-text="See all documentation" data-v-97dd2752>See all documentation</a></li></ul><h3 slot="links" data-analytics-text="Try buy sell" data-v-97dd2752>Try, buy, &amp; sell</h3><ul slot="links" data-v-97dd2752><li data-v-97dd2752><a href="https://redhat.com/en/products/trials" data-analytics-category="Footer|Try buy sell" data-analytics-text="Product trial center" data-v-97dd2752>Product trial center</a></li><li data-v-97dd2752><a href="https://marketplace.redhat.com" data-analytics-category="Footer|Try buy sell" data-analytics-text="Red Hat Marketplace" data-v-97dd2752>Red Hat Marketplace</a></li><li data-v-97dd2752><a href="https://catalog.redhat.com/" data-analytics-category="Footer|Try buy sell" data-analytics-text="Red Hat Ecosystem Catalog" data-v-97dd2752>Red Hat Ecosystem Catalog</a></li><li data-v-97dd2752><a href="https://www.redhat.com/en/store" data-analytics-category="Footer|Try buy sell" data-analytics-text="Red Hat Store" data-v-97dd2752>Red Hat Store</a></li><li data-v-97dd2752><a href="https://www.redhat.com/about/japan-buy" data-analytics-category="Footer|Try buy sell" data-analytics-text="Buy online (Japan)" data-v-97dd2752>Buy online (Japan)</a></li></ul><h3 slot="links" data-analytics-text="Communities" data-v-97dd2752>Communities</h3><ul slot="links" data-v-97dd2752><li data-v-97dd2752><a href="https://access.redhat.com/community" data-analytics-category="Footer|Communities" data-analytics-text="Customer Portal Community" data-v-97dd2752>Customer Portal Community</a></li><li data-v-97dd2752><a href="https://www.redhat.com/events" data-analytics-category="Footer|Communities" data-analytics-text="Events" data-v-97dd2752>Events</a></li><li data-v-97dd2752><a href="https://www.redhat.com/about/our-community-contributions" data-analytics-category="Footer|Communities" data-analytics-text="How we contribute" data-v-97dd2752>How we contribute</a></li></ul><rh-footer-block slot="main-secondary" data-v-97dd2752><h3 slot="header" data-analytics-text="About Red Hat Documentation" data-v-97dd2752>About Red Hat Documentation</h3><p data-v-97dd2752>We help Red Hat users innovate and achieve their goals with our products and services with content they can trust.</p></rh-footer-block><rh-footer-block slot="main-secondary" data-v-97dd2752><h3 slot="header" data-analytics-text="Making open source more inclusive" data-v-97dd2752>Making open source more inclusive</h3><p data-v-97dd2752>Red Hat is committed to replacing problematic language in our code, documentation, and web properties. For more details, see the <a href=" https://www.redhat.com/en/blog/making-open-source-more-inclusive-eradicating-problematic-language" data-analytics-category="Footer|Making open source more inclusive" data-analytics-text="Red Hat Blog" data-v-97dd2752>Red Hat Blog</a>.</p></rh-footer-block><rh-footer-block slot="main-secondary" data-v-97dd2752><h3 slot="header" data-analytics-text="About Red Hat" data-v-97dd2752>About Red Hat</h3><p data-v-97dd2752>We deliver hardened solutions that make it easier for enterprises to work across platforms and environments, from the core datacenter to the network edge.</p></rh-footer-block><rh-footer-universal slot="universal" data-v-97dd2752><h3 slot="links-primary" data-analytics-text="Red Hat legal and privacy links" hidden data-v-97dd2752>Red Hat legal and privacy links</h3><ul slot="links-primary" data-analytics-region="page-footer-bottom-primary" data-v-97dd2752><li data-v-97dd2752><a href="https://redhat.com/en/about/company" data-analytics-category="Footer|Corporate" data-analytics-text="About Red Hat" data-v-97dd2752>About Red Hat</a></li><li data-v-97dd2752><a href="https://redhat.com/en/jobs" data-analytics-category="Footer|Corporate" data-analytics-text="Jobs" data-v-97dd2752>Jobs</a></li><li data-v-97dd2752><a href="https://redhat.com/en/events" data-analytics-category="Footer|Corporate" data-analytics-text="Events" data-v-97dd2752>Events</a></li><li data-v-97dd2752><a href="https://redhat.com/en/about/office-locations" data-analytics-category="Footer|Corporate" data-analytics-text="Locations" data-v-97dd2752>Locations</a></li><li data-v-97dd2752><a href="https://redhat.com/en/contact" data-analytics-category="Footer|Corporate" data-analytics-text="Contact Red Hat" data-v-97dd2752>Contact Red Hat</a></li><li data-v-97dd2752><a href="https://redhat.com/en/blog" data-analytics-category="Footer|Corporate" data-analytics-text="Red Hat Blog" data-v-97dd2752>Red Hat Blog</a></li><li data-v-97dd2752><a href="https://redhat.com/en/about/our-culture/diversity-equity-inclusion" data-analytics-category="Footer|Corporate" data-analytics-text="Diversity equity and inclusion" data-v-97dd2752>Diversity, equity, and inclusion</a></li><li data-v-97dd2752><a href="https://coolstuff.redhat.com/" data-analytics-category="Footer|Corporate" data-analytics-text="Cool Stuff Store" data-v-97dd2752>Cool Stuff Store</a></li><li data-v-97dd2752><a href="https://www.redhat.com/en/summit" data-analytics-category="Footer|Corporate" data-analytics-text="Red Hat Summit" data-v-97dd2752>Red Hat Summit</a></li></ul><span data-v-97dd2752 data-v-5f538988></span><rh-footer-copyright slot="links-secondary" data-v-97dd2752>© 2024 Red Hat, Inc.</rh-footer-copyright><h3 slot="links-secondary" data-analytics-text="Red Hat legal and privacy links" hidden data-v-97dd2752>Red Hat legal and privacy links</h3><ul slot="links-secondary" data-analytics-region="page-footer-bottom-secondary" data-v-97dd2752><li data-v-97dd2752><a href="https://redhat.com/en/about/privacy-policy" data-analytics-category="Footer|Red Hat legal and privacy links" data-analytics-text="Privacy statement" data-v-97dd2752>Privacy statement</a></li><li data-v-97dd2752><a href="https://redhat.com/en/about/terms-use" data-analytics-category="Footer|Red Hat legal and privacy links" data-analytics-text="Terms of use" data-v-97dd2752>Terms of use</a></li><li data-v-97dd2752><a href="https://redhat.com/en/about/all-policies-guidelines" data-analytics-category="Footer|Red Hat legal and privacy links" data-analytics-text="All policies and guidelines" data-v-97dd2752>All policies and guidelines</a></li><li data-v-97dd2752><a href="https://redhat.com/en/about/digital-accessibility" data-analytics-category="Footer|Red Hat legal and privacy links" data-analytics-text="Digital accessibility" class="active" data-v-97dd2752>Digital accessibility</a></li><li data-v-97dd2752><span id="teconsent" data-v-97dd2752></span></li></ul></rh-footer-universal></rh-footer><div id="consent_blackbar" style="position:fixed;bottom:0;width:100%;z-index:5;padding:10px;"></div><!--]--><!--]--></div><div id="teleports"></div><script type="application/json" id="__NUXT_DATA__" data-ssr="true">[["ShallowReactive",1],{"data":2,"state":1490,"once":1494,"_errors":1495,"serverRendered":17,"path":1497},["ShallowReactive",3],{"s8LoCEfG4A":4,"rFVLKcOK8e":10,"uUstF4AIyn":12,"Pn02PlJOas":1419},[5,6,7,8,9],"fr-fr","en-us","zh-cn","ko-kr","ja-jp",{"product":11},"Red Hat Enterprise Linux",{"name":13,"html":14,"type":-1,"toc":15,"breadcrumbs":1301,"error":20,"title":1308,"productName":11,"productVersions":1317,"pagination":1346,"redirect":1400,"canonicalLinks":1401,"openShiftProducts":1403,"tocFromVolume":-1,"jumpLinks":1418},"Configuring and managing networking","\u003Cbody>\u003Cdiv xml:lang=\"en-US\" class=\"book\" id=\"idm140053190969200\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv class=\"producttitle\">\u003Cspan class=\"productname\">Red Hat Enterprise Linux\u003C/span> \u003Cspan class=\"productnumber\">9\u003C/span>\u003C/div>\u003Cdiv>\u003Ch3 class=\"subtitle\">Managing network interfaces and advanced networking features\u003C/h3>\u003C/div>\u003Cdiv>\u003Cdiv xml:lang=\"en-US\" class=\"authorgroup\">\u003Cspan class=\"orgname\">Red Hat\u003C/span> \u003Cspan class=\"orgdiv\">Customer Content Services\u003C/span>\u003C/div>\u003C/div>\u003Cdiv>\u003Ca href=\"#idm140053155520160\">Legal Notice\u003C/a>\u003C/div>\u003Cdiv>\u003Cdiv class=\"abstract\">\u003Cp class=\"title\">\u003Cstrong>Abstract\u003C/strong>\u003C/p>\u003Cdiv class=\"para\">\n\t\t\t\tUsing the networking capabilities of Red Hat Enterprise Linux (RHEL), you can configure your host to meet your organization's network and security requirements. For example:\n\t\t\t\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cdiv class=\"para\">\n\t\t\t\t\t\tYou can configure bonds, VLANs, bridges, tunnels and other network types to connect the host to the network.\n\t\t\t\t\t\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cdiv class=\"para\">\n\t\t\t\t\t\tIPSec and WireGuard provide secure VPNs between hosts and networks.\n\t\t\t\t\t\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cdiv class=\"para\">\n\t\t\t\t\t\tRHEL also supports advanced networking features, such as policy-based routing and Multipath TCP (MPTCP).\n\t\t\t\t\t\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/div>\u003C/div>\u003Chr/>\u003C/div>\u003Csection class=\"preface\" id=\"proc_providing-feedback-on-red-hat-documentation_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Providing feedback on Red Hat documentation\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tWe appreciate your feedback on our documentation. Let us know how we can improve it.\n\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Submitting feedback through Jira (account required)\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\tLog in to the \u003Ca class=\"link\" href=\"https://issues.redhat.com/projects/RHELDOCS/issues\">Jira\u003C/a> website.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Create\u003C/strong>\u003C/span> in the top navigation bar\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tEnter a descriptive title in the \u003Cspan class=\"strong strong\">\u003Cstrong>Summary\u003C/strong>\u003C/span> field.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tEnter your suggestion for improvement in the \u003Cspan class=\"strong strong\">\u003Cstrong>Description\u003C/strong>\u003C/span> field. Include links to the relevant parts of the documentation.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Create\u003C/strong>\u003C/span> at the bottom of the dialogue.\n\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"chapter\" id=\"consistent-network-interface-device-naming_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 1. Implementing consistent network interface naming\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tThe \u003Ccode class=\"literal\">udev\u003C/code> device manager implements consistent device naming in Red Hat Enterprise Linux. The device manager supports different naming schemes and, by default, assigns fixed names based on firmware, topology, and location information.\n\t\t\u003C/p>\u003Cp>\n\t\t\tWithout consistent device naming, the Linux kernel assigns names to network interfaces by combining a fixed prefix and an index. The index increases as the kernel initializes the network devices. For example, \u003Ccode class=\"literal\">eth0\u003C/code> represents the first Ethernet device being probed on start-up. If you add another network interface controller to the system, the assignment of the kernel device names is no longer fixed because, after a reboot, the devices can initialize in a different order. In that case, the kernel can name the devices differently.\n\t\t\u003C/p>\u003Cp>\n\t\t\tTo solve this problem, \u003Ccode class=\"literal\">udev\u003C/code> assigns consistent device names. This has the following advantages:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tDevice names are stable across reboots.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tDevice names stay fixed even if you add or remove hardware.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tDefective hardware can be seamlessly replaced.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tThe network naming is stateless and does not require explicit configuration files.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tGenerally, Red Hat does not support systems where consistent device naming is disabled. For exceptions, see the \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/2435891\">Is it safe to set net.ifnames=0\u003C/a> solution.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"how-the-udev-device-manager-renames-network-interfaces_consistent-network-interface-device-naming\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.1. How the udev device manager renames network interfaces\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo implement a consistent naming scheme for network interfaces, the \u003Ccode class=\"literal\">udev\u003C/code> device manager processes the following rule files in the listed order:\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: \u003Ccode class=\"literal\">/usr/lib/udev/rules.d/60-net.rules\u003C/code>\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis file exists only if you install the \u003Ccode class=\"literal\">initscripts-rename-device\u003C/code> package. The \u003Ccode class=\"literal\">/usr/lib/udev/rules.d/60-net.rules\u003C/code> file defines that the deprecated \u003Ccode class=\"literal\">/usr/lib/udev/rename_device\u003C/code> helper utility searches for the \u003Ccode class=\"literal\">HWADDR\u003C/code> parameter in \u003Ccode class=\"literal\">/etc/sysconfig/network-scripts/ifcfg-*\u003C/code> files. If the value set in the variable matches the MAC address of an interface, the helper utility renames the interface to the name set in the \u003Ccode class=\"literal\">DEVICE\u003C/code> parameter of the \u003Ccode class=\"literal\">ifcfg\u003C/code> file.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the system uses only NetworkManager connection profiles in keyfile format, \u003Ccode class=\"literal\">udev\u003C/code> skips this step.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOnly on Dell systems: \u003Ccode class=\"literal\">/usr/lib/udev/rules.d/71-biosdevname.rules\u003C/code>\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis file exists only if the \u003Ccode class=\"literal\">biosdevname\u003C/code> package is installed, and the rules file defines that the \u003Ccode class=\"literal\">biosdevname\u003C/code> utility renames the interface according to its naming policy, if it was not renamed in the previous step.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tInstall and use \u003Ccode class=\"literal\">biosdevname\u003C/code> only on Dell systems.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/lib/udev/rules.d/75-net-description.rules\u003C/code>\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis file defines how \u003Ccode class=\"literal\">udev\u003C/code> examines the network interface and sets the properties in \u003Ccode class=\"literal\">udev\u003C/code>-internal variables. These variables are then processed in the next step by the \u003Ccode class=\"literal\">/usr/lib/udev/rules.d/80-net-setup-link.rules\u003C/code> file. Some of the properties can be undefined.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/lib/udev/rules.d/80-net-setup-link.rules\u003C/code>\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis file calls the \u003Ccode class=\"literal\">net_setup_link\u003C/code> builtin of the \u003Ccode class=\"literal\">udev\u003C/code> service, and \u003Ccode class=\"literal\">udev\u003C/code> renames the interface based on the order of the policies in the \u003Ccode class=\"literal\">NamePolicy\u003C/code> parameter in the \u003Ccode class=\"literal\">/usr/lib/systemd/network/99-default.link\u003C/code> file. For further details, see \u003Ca class=\"link\" href=\"#network-interface-naming-policies_consistent-network-interface-device-naming\" title=\"1.2. Network interface naming policies\">Network interface naming policies\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf none of the policies applies, \u003Ccode class=\"literal\">udev\u003C/code> does not rename the interface.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/5984311\">Why are systemd network interface names different between major RHEL versions\u003C/a> (Red Hat Knowledgebase)\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"network-interface-naming-policies_consistent-network-interface-device-naming\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.2. Network interface naming policies\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBy default, the \u003Ccode class=\"literal\">udev\u003C/code> device manager uses the \u003Ccode class=\"literal\">/usr/lib/systemd/network/99-default.link\u003C/code> file to determine which device naming policies to apply when it renames interfaces. The \u003Ccode class=\"literal\">NamePolicy\u003C/code> parameter in this file defines which policies \u003Ccode class=\"literal\">udev\u003C/code> uses and in which order:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">NamePolicy=keep kernel database onboard slot path\u003C/pre>\u003Cp>\n\t\t\t\tThe following table describes the different actions of \u003Ccode class=\"literal\">udev\u003C/code> based on which policy matches first as specified by the \u003Ccode class=\"literal\">NamePolicy\u003C/code> parameter:\n\t\t\t\u003C/p>\u003Crh-table>\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccolgroup>\u003Ccol style=\"width: 20%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 60%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 20%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140053185506688\" scope=\"col\">Policy\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140053185505600\" scope=\"col\">Description\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140053185504512\" scope=\"col\">Example name\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053185506688\"> \u003Cp>\n\t\t\t\t\t\t\t\tkeep\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053185505600\"> \u003Cp>\n\t\t\t\t\t\t\t\tIf the device already has a name that was assigned in the user space, \u003Ccode class=\"literal\">udev\u003C/code> does not rename this device. For example, this is the case if the name was assigned during device creation or by a rename operation.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053185504512\"> \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053185506688\"> \u003Cp>\n\t\t\t\t\t\t\t\tkernel\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053185505600\"> \u003Cp>\n\t\t\t\t\t\t\t\tIf the kernel indicates that a device name is predictable, \u003Ccode class=\"literal\">udev\u003C/code> does not rename this device.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053185504512\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">lo\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053185506688\"> \u003Cp>\n\t\t\t\t\t\t\t\tdatabase\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053185505600\"> \u003Cp>\n\t\t\t\t\t\t\t\tThis policy assigns names based on mappings in the \u003Ccode class=\"literal\">udev\u003C/code> hardware database. For details, see the \u003Ccode class=\"literal\">hwdb(7)\u003C/code> man page on your system.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053185504512\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">idrac\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053185506688\"> \u003Cp>\n\t\t\t\t\t\t\t\tonboard\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053185505600\"> \u003Cp>\n\t\t\t\t\t\t\t\tDevice names incorporate firmware or BIOS-provided index numbers for onboard devices.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053185504512\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">eno1\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053185506688\"> \u003Cp>\n\t\t\t\t\t\t\t\tslot\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053185505600\"> \u003Cp>\n\t\t\t\t\t\t\t\tDevice names incorporate firmware or BIOS-provided PCI Express (PCIe) hot-plug slot-index numbers.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053185504512\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">ens1\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053185506688\"> \u003Cp>\n\t\t\t\t\t\t\t\tpath\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053185505600\"> \u003Cp>\n\t\t\t\t\t\t\t\tDevice names incorporate the physical location of the connector of the hardware.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053185504512\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">enp1s0\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053185506688\"> \u003Cp>\n\t\t\t\t\t\t\t\tmac\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053185505600\"> \u003Cp>\n\t\t\t\t\t\t\t\tDevice names incorporate the MAC address. By default, Red Hat Enterprise Linux does not use this policy, but administrators can enable it.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053185504512\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">enx525400d5e0fb\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#how-the-udev-device-manager-renames-network-interfaces_consistent-network-interface-device-naming\" title=\"1.1. How the udev device manager renames network interfaces\">How the udev device manager renames network interfaces\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">systemd.link(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"network-interface-naming-schemes_consistent-network-interface-device-naming\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.3. Network interface naming schemes\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">udev\u003C/code> device manager uses certain stable interface attributes that device drivers provide to generate consistent device names.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIf a new \u003Ccode class=\"literal\">udev\u003C/code> version changes how the service creates names for certain interfaces, Red Hat adds a new scheme version and documents the details in the \u003Ccode class=\"literal\">systemd.net-naming-scheme(7)\u003C/code> man page on your system. By default, Red Hat Enterprise Linux (RHEL) 9 uses the \u003Ccode class=\"literal\">rhel-9.0\u003C/code> naming scheme, even if you install or update to a later minor version of RHEL.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo prevent new drivers from providing more or other attributes for a network interface, the \u003Ccode class=\"literal\">rhel-net-naming-sysattrs\u003C/code> package provides the \u003Ccode class=\"literal\">/usr/lib/udev/hwdb.d/50-net-naming-sysattr-allowlist.hwdb\u003C/code> database. This database defines which \u003Ccode class=\"literal\">sysfs\u003C/code> values the \u003Ccode class=\"literal\">udev\u003C/code> service can use to create network interface names. The entries in the database are also versioned and influenced by the scheme version.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tOn RHEL 9.4 and later, you can also use all \u003Ccode class=\"literal\">rhel-8.*\u003C/code> naming schemes.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tIf you want to use a scheme other than the default, you can \u003Ca class=\"link\" href=\"#switching-to-a-different-network-interface-naming-scheme_consistent-network-interface-device-naming\" title=\"1.4. Switching to a different network interface naming scheme\">switch the network interface naming scheme\u003C/a>.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor further details about the naming schemes for different device types and platforms, see the \u003Ccode class=\"literal\">systemd.net-naming-scheme(7)\u003C/code> man page on your system.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"switching-to-a-different-network-interface-naming-scheme_consistent-network-interface-device-naming\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.4. Switching to a different network interface naming scheme\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBy default, Red Hat Enterprise Linux (RHEL) 9 uses the \u003Ccode class=\"literal\">rhel-9.0\u003C/code> naming scheme, even if you install or update to a later minor version of RHEL. While the default naming scheme fits in most scenarios, there might be reasons to switch to a different scheme version, for example:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA new scheme can help to better identify a device if it adds additional attributes, such as a slot number, to an interface name.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAn new scheme can prevent \u003Ccode class=\"literal\">udev\u003C/code> from falling back to the kernel-assigned device names (\u003Ccode class=\"literal\">eth*\u003C/code>). This happens if the driver does not provide enough unique attributes for two or more interfaces to generate unique names for them.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have access to the console of the server.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tList the network interfaces:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link show\u003C/strong>\u003C/span>\n2: eno1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000\n    link/ether 00:00:5e:00:53:1a brd ff:ff:ff:ff:ff:ff\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRecord the MAC addresses of the interfaces.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Display the \u003Ccode class=\"literal\">ID_NET_NAMING_SCHEME\u003C/code> property of a network interface to identify the naming scheme that RHEL currently uses:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>udevadm info --query=property --property=ID_NET_NAMING_SCHEME /sys/class/net/eno1'\u003C/strong>\u003C/span>\nID_NET_NAMING_SCHEME=rhel-9.0\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that the property is not available on the \u003Ccode class=\"literal\">lo\u003C/code> loopback device.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAppend the \u003Ccode class=\"literal\">net.naming-scheme=\u003Cspan class=\"emphasis\">\u003Cem>&lt;scheme&gt;\u003C/em>\u003C/span>\u003C/code> option to the command line of all installed kernels, for example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --update-kernel=ALL --args=net.naming-scheme=\u003Cspan class=\"emphasis\">\u003Cem>rhel-9.4\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReboot the system.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>reboot\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tBased on the MAC addresses you recorded, identify the new names of network interfaces that have changed due to the different naming scheme:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link show\u003C/strong>\u003C/span>\n2: eno1np0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000\n    link/ether 00:00:5e:00:53:1a brd ff:ff:ff:ff:ff:ff\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAfter switching the scheme, \u003Ccode class=\"literal\">udev\u003C/code> names in this example the device with MAC address \u003Ccode class=\"literal\">00:00:5e:00:53:1a\u003C/code> \u003Ccode class=\"literal\">eno1np0\u003C/code>, whereas it was named \u003Ccode class=\"literal\">eno1\u003C/code> before.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIdentify which NetworkManager connection profile uses an interface with the previous name:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli -f device,name connection show\u003C/strong>\u003C/span>\nDEVICE  NAME\neno1  example_profile\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the \u003Ccode class=\"literal\">connection.interface-name\u003C/code> property in the connection profile to the new interface name:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify example_profile connection.interface-name \"eno1np0\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReactivate the connection profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up example_profile\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIdentify the naming scheme that RHEL now uses by displaying the \u003Ccode class=\"literal\">ID_NET_NAMING_SCHEME\u003C/code> property of a network interface:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>udevadm info --query=property --property=ID_NET_NAMING_SCHEME /sys/class/net/eno1np0'\u003C/strong>\u003C/span>\nID_NET_NAMING_SCHEME=_rhel-9.4\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#network-interface-naming-schemes_consistent-network-interface-device-naming\" title=\"1.3. Network interface naming schemes\">Network interface naming schemes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_customizing-the-prefix-for-ethernet-interfaces-during-installation_consistent-network-interface-device-naming\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.5. Customizing the prefix for Ethernet interfaces during installation\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIf you do not want to use the default device-naming policy for Ethernet interfaces, you can set a custom device prefix during the Red Hat Enterprise Linux (RHEL) installation.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tRed Hat supports systems with customized Ethernet prefixes only if you set the prefix during the RHEL installation. Using the \u003Ccode class=\"literal\">prefixdevname\u003C/code> utility on already deployed systems is not supported.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tIf you set a device prefix during the installation, the \u003Ccode class=\"literal\">udev\u003C/code> service uses the \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>&lt;prefix&gt;&lt;index&gt;\u003C/em>\u003C/span>\u003C/code> format for Ethernet interfaces after the installation. For example, if you set the prefix \u003Ccode class=\"literal\">net\u003C/code>, the service assigns the names \u003Ccode class=\"literal\">net0\u003C/code>, \u003Ccode class=\"literal\">net1\u003C/code>, and so on to the Ethernet interfaces.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">udev\u003C/code> service appends the index to the custom prefix, and preserves the index values of known Ethernet interfaces. If you add an interface, \u003Ccode class=\"literal\">udev\u003C/code> assigns an index value that is one greater than the previously-assigned index value to the new interface.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe prefix consists of ASCII characters.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe prefix is an alphanumeric string.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe prefix is shorter than 16 characters.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe prefix does not conflict with any other well-known network interface prefix, such as \u003Ccode class=\"literal\">eth\u003C/code>, \u003Ccode class=\"literal\">eno\u003C/code>, \u003Ccode class=\"literal\">ens\u003C/code>, and \u003Ccode class=\"literal\">em\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tBoot the Red Hat Enterprise Linux installation media.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the boot manager, follow these steps:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSelect the \u003Ccode class=\"literal\">Install Red Hat Enterprise Linux \u003Cspan class=\"emphasis\">\u003Cem>&lt;version&gt;\u003C/em>\u003C/span>\u003C/code> entry.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPress \u003Ckbd class=\"keycap\">Tab\u003C/kbd> to edit the entry.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAppend \u003Ccode class=\"literal\">net.ifnames.prefix=\u003Cspan class=\"emphasis\">\u003Cem>&lt;prefix&gt;\u003C/em>\u003C/span>\u003C/code> to the kernel options.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPress \u003Ckbd class=\"keycap\">Enter\u003C/kbd> to start the installation program.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tInstall Red Hat Enterprise Linux.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo verify the interface names, display the network interfaces:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link show\u003C/strong>\u003C/span>\n...\n2: net0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000\n    link/ether 00:00:5e:00:53:1a brd ff:ff:ff:ff:ff:ff\n...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/interactively_installing_rhel_from_installation_media/index\">Interactively installing RHEL from installation media\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-user-defined-network-interface-names-by-using-udev-rules_consistent-network-interface-device-naming\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.6. Configuring user-defined network interface names by using udev rules\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can use \u003Ccode class=\"literal\">udev\u003C/code> rules to implement custom network interface names that reflect your organization’s requirements.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIdentify the network interface that you want to rename:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link show\u003C/strong>\u003C/span>\n...\nenp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000\n    link/ether 00:00:5e:00:53:1a brd ff:ff:ff:ff:ff:ff\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRecord the MAC address of the interface.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the device type ID of the interface:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /sys/class/net/enp1s0/type\u003C/strong>\u003C/span>\n1\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">/etc/udev/rules.d/70-persistent-net.rules\u003C/code> file, and add a rule for each interface that you want to rename:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">SUBSYSTEM==\"net\",ACTION==\"add\",ATTR{address}==\"\u003Cspan class=\"emphasis\">\u003Cem>&lt;MAC_address&gt;\u003C/em>\u003C/span>\",ATTR{type}==\"\u003Cspan class=\"emphasis\">\u003Cem>&lt;device_type_id&gt;\u003C/em>\u003C/span>\",NAME=\"\u003Cspan class=\"emphasis\">\u003Cem>&lt;new_interface_name&gt;\u003C/em>\u003C/span>\"\u003C/pre>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tUse only \u003Ccode class=\"literal\">70-persistent-net.rules\u003C/code> as a file name if you require consistent device names during the boot process. The \u003Ccode class=\"literal\">dracut\u003C/code> utility adds a file with this name to the \u003Ccode class=\"literal\">initrd\u003C/code> image if you regenerate the RAM disk image.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, use the following rule to rename the interface with MAC address \u003Ccode class=\"literal\">00:00:5e:00:53:1a\u003C/code> to \u003Ccode class=\"literal\">provider0\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">SUBSYSTEM==\"net\",ACTION==\"add\",ATTR{address}==\"\u003Cspan class=\"emphasis\">\u003Cem>00:00:5e:00:53:1a\u003C/em>\u003C/span>\",ATTR{type}==\"\u003Cspan class=\"emphasis\">\u003Cem>1\u003C/em>\u003C/span>\",NAME=\"\u003Cspan class=\"emphasis\">\u003Cem>provider0\u003C/em>\u003C/span>\"\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Regenerate the \u003Ccode class=\"literal\">initrd\u003C/code> RAM disk image:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dracut -f\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou require this step only if you need networking capabilities in the RAM disk. For example, this is the case if the root file system is stored on a network device, such as iSCSI.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIdentify which NetworkManager connection profile uses the interface that you want to rename:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli -f device,name connection show\u003C/strong>\u003C/span>\nDEVICE  NAME\nenp1s0  example_profile\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUnset the \u003Ccode class=\"literal\">connection.interface-name\u003C/code> property in the connection profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify example_profile connection.interface-name \"\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTemporarily, configure the connection profile to match both the new and the previous interface name:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify example_profile match.interface-name \"provider0 enp1s0\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReboot the system:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>reboot\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the device with the MAC address that you specified in the link file has been renamed to \u003Ccode class=\"literal\">provider0\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link show\u003C/strong>\u003C/span>\nprovider0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000\n    link/ether 00:00:5e:00:53:1a brd ff:ff:ff:ff:ff:ff\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the connection profile to match only the new interface name:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify example_profile match.interface-name \"provider0\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have now removed the old interface name from the connection profile.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReactivate the connection profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up example_profile\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">udev(7)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-user-defined-network-interface-names-by-using-systemd-link-files_consistent-network-interface-device-naming\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.7. Configuring user-defined network interface names by using systemd link files\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can use \u003Ccode class=\"literal\">systemd\u003C/code> link files to implement custom network interface names that reflect your organization’s requirements.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou must meet one of these conditions: NetworkManager does not manage this interface, or the corresponding connection profile uses the \u003Ca class=\"link\" href=\"#assembly_networkmanager-connection-profiles-in-keyfile-format_configuring-and-managing-networking\" title=\"Chapter 38. NetworkManager connection profiles in keyfile format\">keyfile format\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIdentify the network interface that you want to rename:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link show\u003C/strong>\u003C/span>\n...\nenp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000\n    link/ether 00:00:5e:00:53:1a brd ff:ff:ff:ff:ff:ff\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRecord the MAC address of the interface.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf it does not already exist, create the \u003Ccode class=\"literal\">/etc/systemd/network/\u003C/code> directory:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mkdir -p /etc/systemd/network/\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor each interface that you want to rename, create a \u003Ccode class=\"literal\">70-*.link\u003C/code> file in the \u003Ccode class=\"literal\">/etc/systemd/network/\u003C/code> directory with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">[Match]\nMACAddress=\u003Cspan class=\"emphasis\">\u003Cem>&lt;MAC_address&gt;\u003C/em>\u003C/span>\n\n[Link]\nName=\u003Cspan class=\"emphasis\">\u003Cem>&lt;new_interface_name&gt;\u003C/em>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tUse a file name with a \u003Ccode class=\"literal\">70-\u003C/code> prefix to keep the file names consistent with the \u003Ccode class=\"literal\">udev\u003C/code> rules-based solution.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, create the \u003Ccode class=\"literal\">/etc/systemd/network/70-provider0.link\u003C/code> file with the following content to rename the interface with MAC address \u003Ccode class=\"literal\">00:00:5e:00:53:1a\u003C/code> to \u003Ccode class=\"literal\">provider0\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">[Match]\nMACAddress=00:00:5e:00:53:1a\n\n[Link]\nName=provider0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Regenerate the \u003Ccode class=\"literal\">initrd\u003C/code> RAM disk image:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dracut -f\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou require this step only if you need networking capabilities in the RAM disk. For example, this is the case if the root file system is stored on a network device, such as iSCSI.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIdentify which NetworkManager connection profile uses the interface that you want to rename:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli -f device,name connection show\u003C/strong>\u003C/span>\nDEVICE  NAME\nenp1s0  example_profile\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUnset the \u003Ccode class=\"literal\">connection.interface-name\u003C/code> property in the connection profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify example_profile connection.interface-name \"\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTemporarily, configure the connection profile to match both the new and the previous interface name:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify example_profile match.interface-name \"provider0 enp1s0\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReboot the system:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>reboot\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the device with the MAC address that you specified in the link file has been renamed to \u003Ccode class=\"literal\">provider0\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link show\u003C/strong>\u003C/span>\nprovider0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP mode DEFAULT group default qlen 1000\n    link/ether 00:00:5e:00:53:1a brd ff:ff:ff:ff:ff:ff\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the connection profile to match only the new interface name:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify example_profile match.interface-name \"provider0\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have now removed the old interface name from the connection profile.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReactivate the connection profile.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up example_profile\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">systemd.link(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"assigning-alternative-names-to-a-network-interface-by-using-systemd-link-files_consistent-network-interface-device-naming\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.8. Assigning alternative names to a network interface by using systemd link files\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tWith alternative interface naming, the kernel can assign additional names to network interfaces. You can use these alternative names in the same way as the normal interface names in commands that require a network interface name.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou must use ASCII characters for the alternative name.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe alternative name must be shorter than 128 characters.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the network interface names and their MAC addresses:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link show\u003C/strong>\u003C/span>\n...\nenp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000\n    link/ether 00:00:5e:00:53:1a brd ff:ff:ff:ff:ff:ff\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRecord the MAC address of the interface to which you want to assign an alternative name.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf it does not already exist, create the \u003Ccode class=\"literal\">/etc/systemd/network/\u003C/code> directory:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mkdir -p /etc/systemd/network/\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor each interface that must have an alternative name, create a \u003Ccode class=\"literal\">*.link\u003C/code> file in the \u003Ccode class=\"literal\">/etc/systemd/network/\u003C/code> directory with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">[Match]\nMACAddress=\u003Cspan class=\"emphasis\">\u003Cem>&lt;MAC_address&gt;\u003C/em>\u003C/span>\n\n[Link]\nAlternativeName=\u003Cspan class=\"emphasis\">\u003Cem>&lt;alternative_interface_name_1&gt;\u003C/em>\u003C/span>\nAlternativeName=\u003Cspan class=\"emphasis\">\u003Cem>&lt;alternative_interface_name_2&gt;\u003C/em>\u003C/span>\nAlternativeName=\u003Cspan class=\"emphasis\">\u003Cem>&lt;alternative_interface_name_n&gt;\u003C/em>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, create the \u003Ccode class=\"literal\">/etc/systemd/network/70-altname.link\u003C/code> file with the following content to assign \u003Ccode class=\"literal\">provider\u003C/code> as an alternative name to the interface with MAC address \u003Ccode class=\"literal\">00:00:5e:00:53:1a\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">[Match]\nMACAddress=00:00:5e:00:53:1a\n\n[Link]\nAlternativeName=provider\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRegenerate the \u003Ccode class=\"literal\">initrd\u003C/code> RAM disk image:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dracut -f\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReboot the system:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>reboot\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the alternative interface name. For example, display the IP address settings of the device with the alternative name \u003Ccode class=\"literal\">provider\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip address show provider\u003C/strong>\u003C/span>\n2: enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000\n    link/ether 00:00:5e:00:53:1a brd ff:ff:ff:ff:ff:ff\n    altname \u003Cspan class=\"strong strong\">\u003Cstrong>provider\u003C/strong>\u003C/span>\n    ...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/6964829\">What is AlternativeNamesPolicy in Interface naming scheme?\u003C/a> (Red Hat Knowledgebase)\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-an-ethernet-connection_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 2. Configuring an Ethernet connection\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tNetworkManager creates a connection profile for each Ethernet adapter that is installed in a host. By default, this profile uses DHCP for both IPv4 and IPv6 connections. Modify this automatically-created profile or add a new one in the following cases:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tThe network requires custom settings, such as a static IP address configuration.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tYou require multiple profiles because the host roams among different networks.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tRed Hat Enterprise Linux provides administrators different options to configure Ethernet connections. For example:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tUse \u003Ccode class=\"literal\">nmcli\u003C/code> to configure connections on the command line.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tUse \u003Ccode class=\"literal\">nmtui\u003C/code> to configure connections in a text-based user interface.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tUse the GNOME Settings menu or \u003Ccode class=\"literal\">nm-connection-editor\u003C/code> application to configure connections in a graphical interface.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tUse \u003Ccode class=\"literal\">nmstatectl\u003C/code> to configure connections through the Nmstate API.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tUse RHEL system roles to automate the configuration of connections on one or multiple hosts.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tIf you want to manually configure Ethernet connections on hosts running in the Microsoft Azure cloud, disable the \u003Ccode class=\"literal\">cloud-init\u003C/code> service or configure it to ignore the network settings retrieved from the cloud environment. Otherwise, \u003Ccode class=\"literal\">cloud-init\u003C/code> will override on the next reboot the network settings that you have manually configured.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"configuring-an-ethernet-connection-by-using-nmcli_configuring-an-ethernet-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.1. Configuring an Ethernet connection by using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIf you connect a host to the network over Ethernet, you can manage the connection’s settings on the command line by using the \u003Ccode class=\"literal\">nmcli\u003C/code> utility.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA physical or virtual Ethernet Network Interface Controller (NIC) exists in the server’s configuration.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tList the NetworkManager connection profiles:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection show\u003C/strong>\u003C/span>\nNAME                UUID                                  TYPE      DEVICE\nWired connection 1  a5eb6490-cc20-3668-81f8-0314a27f3f75  ethernet  enp1s0\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tBy default, NetworkManager creates a profile for each NIC in the host. If you plan to connect this NIC only to a specific network, adapt the automatically-created profile. If you plan to connect this NIC to networks with different settings, create individual profiles for each network.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you want to create an additional connection profile, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add con-name \u003Cspan class=\"emphasis\">\u003Cem>&lt;connection-name&gt;\u003C/em>\u003C/span> ifname \u003Cspan class=\"emphasis\">\u003Cem>&lt;device-name&gt;\u003C/em>\u003C/span> type ethernet\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSkip this step to modify an existing profile.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Rename the connection profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \"Wired connection 1\" connection.id \"Internal-LAN\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn hosts with multiple profiles, a meaningful name makes it easier to identify the purpose of a profile.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the current settings of the connection profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection show Internal-LAN\u003C/strong>\u003C/span>\n...\nconnection.interface-name:     enp1s0\nconnection.autoconnect:        yes\nipv4.method:                   auto\nipv6.method:                   auto\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the IPv4 settings:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo use DHCP, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify Internal-LAN ipv4.method auto\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSkip this step if \u003Ccode class=\"literal\">ipv4.method\u003C/code> is already set to \u003Ccode class=\"literal\">auto\u003C/code> (default).\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo set a static IPv4 address, network mask, default gateway, DNS servers, and search domain, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify Internal-LAN ipv4.method manual ipv4.addresses 192.0.2.1/24 ipv4.gateway 192.0.2.254 ipv4.dns 192.0.2.200 ipv4.dns-search example.com\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the IPv6 settings:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo use stateless address autoconfiguration (SLAAC), enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify Internal-LAN ipv6.method auto\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSkip this step if \u003Ccode class=\"literal\">ipv6.method\u003C/code> is already set to \u003Ccode class=\"literal\">auto\u003C/code> (default).\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo set a static IPv6 address, network mask, default gateway, DNS servers, and search domain, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify Internal-LAN ipv6.method manual ipv6.addresses 2001:db8:1::fffe/64 ipv6.gateway 2001:db8:1::fffe ipv6.dns 2001:db8:1::ffbb ipv6.dns-search example.com\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo customize other settings in the profile, use the following command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>&lt;connection-name&gt;\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>&lt;setting&gt;\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>&lt;value&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnclose values with spaces or semicolons in quotes.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tActivate the profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up Internal-LAN\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IP settings of the NIC:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip address show enp1s0\u003C/strong>\u003C/span>\n2: enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000\n    link/ether 52:54:00:17:b8:b6 brd ff:ff:ff:ff:ff:ff\n    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute enp1s0\n       valid_lft forever preferred_lft forever\n    inet6 2001:db8:1::fffe/64 scope global noprefixroute\n       valid_lft forever preferred_lft forever\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv4 default gateway:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip route show default\u003C/strong>\u003C/span>\ndefault via 192.0.2.254 dev enp1s0 proto static metric 102\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv6 default gateway:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -6 route show default\u003C/strong>\u003C/span>\ndefault via 2001:db8:1::ffee dev enp1s0 proto static metric 102 pref medium\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the DNS settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /etc/resolv.conf\u003C/strong>\u003C/span>\nsearch example.com\nnameserver 192.0.2.200\nnameserver 2001:db8:1::ffbb\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf multiple connection profiles are active at the same time, the order of \u003Ccode class=\"literal\">nameserver\u003C/code> entries depend on the DNS priority values in these profile and the connection types.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ping\u003C/code> utility to verify that this host can send packets to other hosts:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping \u003Cspan class=\"emphasis\">\u003Cem>&lt;host-name-or-IP-address&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tVerify that the network cable is plugged-in to the host and a switch.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCheck whether the link failure exists only on this host or also on other hosts connected to the same switch.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tVerify that the network cable and the network interface are working as expected. Perform hardware diagnosis steps and replace defect cables and network interface cards.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf the configuration on the disk does not match the configuration on the device, starting or restarting NetworkManager creates an in-memory connection that reflects the configuration of the device. For further details and how to avoid this problem, see the \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/3068421\">NetworkManager duplicates a connection after restart of NetworkManager service\u003C/a> solution.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-an-ethernet-connection-by-using-the-nmcli-interactive-editor_configuring-an-ethernet-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.2. Configuring an Ethernet connection by using the \u003Ccode class=\"literal\">nmcli\u003C/code> interactive editor\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIf you connect a host to the network over Ethernet, you can manage the connection’s settings on the command line by using the \u003Ccode class=\"literal\">nmcli\u003C/code> utility.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA physical or virtual Ethernet Network Interface Controller (NIC) exists in the server’s configuration.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tList the NetworkManager connection profiles:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection show\u003C/strong>\u003C/span>\nNAME                UUID                                  TYPE      DEVICE\nWired connection 1  a5eb6490-cc20-3668-81f8-0314a27f3f75  ethernet  enp1s0\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tBy default, NetworkManager creates a profile for each NIC in the host. If you plan to connect this NIC only to a specific network, adapt the automatically-created profile. If you plan to connect this NIC to networks with different settings, create individual profiles for each network.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart \u003Ccode class=\"literal\">nmcli\u003C/code> in interactive mode:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo create an additional connection profile, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection edit type ethernet con-name \"\u003Cspan class=\"emphasis\">\u003Cem>&lt;connection-name&gt;\u003C/em>\u003C/span>\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo modify an existing connection profile, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection edit con-name \"\u003Cspan class=\"emphasis\">\u003Cem>&lt;connection-name&gt;\u003C/em>\u003C/span>\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Rename the connection profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">nmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>set connection.id Internal-LAN\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn hosts with multiple profiles, a meaningful name makes it easier to identify the purpose of a profile.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDo not use quotes to set an ID that contains spaces to avoid that \u003Ccode class=\"literal\">nmcli\u003C/code> makes the quotes part of the name. For example, to set \u003Ccode class=\"literal\">Example Connection\u003C/code> as ID, enter \u003Ccode class=\"literal\">set connection.id Example Connection\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the current settings of the connection profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">nmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>print\u003C/strong>\u003C/span>\n...\nconnection.interface-name:     enp1s0\nconnection.autoconnect:        yes\nipv4.method:                   auto\nipv6.method:                   auto\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you create a new connection profile, set the network interface:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">nmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>set connection.interface-name enp1s0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the IPv4 settings:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo use DHCP, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">nmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>set ipv4.method auto\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSkip this step if \u003Ccode class=\"literal\">ipv4.method\u003C/code> is already set to \u003Ccode class=\"literal\">auto\u003C/code> (default).\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo set a static IPv4 address, network mask, default gateway, DNS servers, and search domain, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">nmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>ipv4.addresses 192.0.2.1/24\u003C/strong>\u003C/span>\nDo you also want to set 'ipv4.method' to 'manual'? [yes]: \u003Cspan class=\"strong strong\">\u003Cstrong>yes\u003C/strong>\u003C/span>\nnmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>ipv4.gateway 192.0.2.254\u003C/strong>\u003C/span>\nnmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>ipv4.dns 192.0.2.200\u003C/strong>\u003C/span>\nnmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>ipv4.dns-search example.com\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the IPv6 settings:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo use stateless address autoconfiguration (SLAAC), enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">nmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>set ipv6.method auto\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSkip this step if \u003Ccode class=\"literal\">ipv6.method\u003C/code> is already set to \u003Ccode class=\"literal\">auto\u003C/code> (default).\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo set a static IPv6 address, network mask, default gateway, DNS servers, and search domain, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">nmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>ipv6.addresses 2001:db8:1::fffe/64\u003C/strong>\u003C/span>\nDo you also want to set 'ipv6.method' to 'manual'? [yes]: \u003Cspan class=\"strong strong\">\u003Cstrong>yes\u003C/strong>\u003C/span>\nnmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>ipv6.gateway 2001:db8:1::fffe\u003C/strong>\u003C/span>\nnmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>ipv6.dns 2001:db8:1::ffbb\u003C/strong>\u003C/span>\nnmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>ipv6.dns-search example.com\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSave and activate the connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">nmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>save persistent\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLeave the interactive mode:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">nmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>quit\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IP settings of the NIC:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip address show enp1s0\u003C/strong>\u003C/span>\n2: enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000\n    link/ether 52:54:00:17:b8:b6 brd ff:ff:ff:ff:ff:ff\n    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute enp1s0\n       valid_lft forever preferred_lft forever\n    inet6 2001:db8:1::fffe/64 scope global noprefixroute\n       valid_lft forever preferred_lft forever\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv4 default gateway:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip route show default\u003C/strong>\u003C/span>\ndefault via 192.0.2.254 dev enp1s0 proto static metric 102\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv6 default gateway:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -6 route show default\u003C/strong>\u003C/span>\ndefault via 2001:db8:1::ffee dev enp1s0 proto static metric 102 pref medium\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the DNS settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /etc/resolv.conf\u003C/strong>\u003C/span>\nsearch example.com\nnameserver 192.0.2.200\nnameserver 2001:db8:1::ffbb\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf multiple connection profiles are active at the same time, the order of \u003Ccode class=\"literal\">nameserver\u003C/code> entries depend on the DNS priority values in these profile and the connection types.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ping\u003C/code> utility to verify that this host can send packets to other hosts:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping \u003Cspan class=\"emphasis\">\u003Cem>&lt;host-name-or-IP-address&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tVerify that the network cable is plugged-in to the host and a switch.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCheck whether the link failure exists only on this host or also on other hosts connected to the same switch.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tVerify that the network cable and the network interface are working as expected. Perform hardware diagnosis steps and replace defect cables and network interface cards.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf the configuration on the disk does not match the configuration on the device, starting or restarting NetworkManager creates an in-memory connection that reflects the configuration of the device. For further details and how to avoid this problem, see the \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/3068421\">NetworkManager duplicates a connection after restart of NetworkManager service\u003C/a> solution\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings(5)\u003C/code> and \u003Ccode class=\"literal\">nmcli(1)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-an-ethernet-connection-by-using-nmtui_configuring-an-ethernet-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.3. Configuring an Ethernet connection by using \u003Ccode class=\"literal\">nmtui\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tIf you connect a host to the network over Ethernet, you can manage the connection’s settings in a text-based user interface by using the \u003Ccode class=\"literal\">nmtui\u003C/code> application. Use \u003Ccode class=\"literal\">nmtui\u003C/code> to create new profiles and to update existing ones on a host without a graphical interface.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIn \u003Ccode class=\"literal\">nmtui\u003C/code>:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tNavigate by using the cursor keys.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tPress a button by selecting it and hitting \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tSelect and clear checkboxes by using \u003Ckbd class=\"keycap\">Space\u003C/kbd>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA physical or virtual Ethernet Network Interface Controller (NIC) exists in the server’s configuration.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you do not know the network device name you want to use in the connection, display the available devices:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device status\u003C/strong>\u003C/span>\nDEVICE     TYPE      STATE                   CONNECTION\nenp1s0     ethernet  unavailable             --\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart \u003Ccode class=\"literal\">nmtui\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmtui\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Cspan class=\"strong strong\">\u003Cstrong>Edit a connection\u003C/strong>\u003C/span>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tChoose whether to add a new connection profile or to modify an existing one:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo create a new profile:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tPress \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tSelect \u003Cspan class=\"strong strong\">\u003Cstrong>Ethernet\u003C/strong>\u003C/span> from the list of network types, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo modify an existing profile, select the profile from the list, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Update the name of the connection profile.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn hosts with multiple profiles, a meaningful name makes it easier to identify the purpose of a profile.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf you create a new connection profile, enter the network device name into the \u003Cspan class=\"strong strong\">\u003Cstrong>Device\u003C/strong>\u003C/span> field.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDepending on your environment, configure the IP address settings in the \u003Ccode class=\"literal\">IPv4 configuration\u003C/code> and \u003Ccode class=\"literal\">IPv6 configuration\u003C/code> areas accordingly. For this, press the button next to these areas, and select:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Disabled\u003C/strong>\u003C/span>, if this connection does not require an IP address.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Automatic\u003C/strong>\u003C/span>, if a DHCP server dynamically assigns an IP address to this NIC.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Manual\u003C/strong>\u003C/span>, if the network requires static IP address settings. In this case, you must fill further fields:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tPress \u003Cspan class=\"strong strong\">\u003Cstrong>Show\u003C/strong>\u003C/span> next to the protocol you want to configure to display additional fields.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tPress \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span> next to \u003Cspan class=\"strong strong\">\u003Cstrong>Addresses\u003C/strong>\u003C/span>, and enter the IP address and the subnet mask in Classless Inter-Domain Routing (CIDR) format.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tIf you do not specify a subnet mask, NetworkManager sets a \u003Ccode class=\"literal\">/32\u003C/code> subnet mask for IPv4 addresses and \u003Ccode class=\"literal\">/64\u003C/code> for IPv6 addresses.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tEnter the address of the default gateway.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tPress \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span> next to \u003Cspan class=\"strong strong\">\u003Cstrong>DNS servers\u003C/strong>\u003C/span>, and enter the DNS server address.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tPress \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span> next to \u003Cspan class=\"strong strong\">\u003Cstrong>Search domains\u003C/strong>\u003C/span>, and enter the DNS search domain.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"figure\" id=\"idm140053189655760\">\u003Cp class=\"title\">\u003Cstrong>Figure 2.1. Example of an Ethernet connection with static IP address settings\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/31ecc89b0c0aad7279a15f02132175ae/nmtui-ethernet-static-IP.png\" alt=\"nmtui ethernet static IP\"/>\u003C/div>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Cspan class=\"strong strong\">\u003Cstrong>OK\u003C/strong>\u003C/span> to create and automatically activate the new connection.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Cspan class=\"strong strong\">\u003Cstrong>Back\u003C/strong>\u003C/span> to return to the main menu.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Cspan class=\"strong strong\">\u003Cstrong>Quit\u003C/strong>\u003C/span>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd> to close the \u003Ccode class=\"literal\">nmtui\u003C/code> application.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IP settings of the NIC:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip address show enp1s0\u003C/strong>\u003C/span>\n2: enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000\n    link/ether 52:54:00:17:b8:b6 brd ff:ff:ff:ff:ff:ff\n    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute enp1s0\n       valid_lft forever preferred_lft forever\n    inet6 2001:db8:1::fffe/64 scope global noprefixroute\n       valid_lft forever preferred_lft forever\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv4 default gateway:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip route show default\u003C/strong>\u003C/span>\ndefault via 192.0.2.254 dev enp1s0 proto static metric 102\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv6 default gateway:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -6 route show default\u003C/strong>\u003C/span>\ndefault via 2001:db8:1::ffee dev enp1s0 proto static metric 102 pref medium\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the DNS settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /etc/resolv.conf\u003C/strong>\u003C/span>\nsearch example.com\nnameserver 192.0.2.200\nnameserver 2001:db8:1::ffbb\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf multiple connection profiles are active at the same time, the order of \u003Ccode class=\"literal\">nameserver\u003C/code> entries depend on the DNS priority values in these profile and the connection types.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ping\u003C/code> utility to verify that this host can send packets to other hosts:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping \u003Cspan class=\"emphasis\">\u003Cem>&lt;host-name-or-IP-address&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tVerify that the network cable is plugged-in to the host and a switch.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCheck whether the link failure exists only on this host or also on other hosts connected to the same switch.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tVerify that the network cable and the network interface are working as expected. Perform hardware diagnosis steps and replace defect cables and network interface cards.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf the configuration on the disk does not match the configuration on the device, starting or restarting NetworkManager creates an in-memory connection that reflects the configuration of the device. For further details and how to avoid this problem, see the \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/3068421\">NetworkManager duplicates a connection after restart of NetworkManager service\u003C/a> solution.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_configuring-networkmanager-to-avoid-using-a-specific-profile-to-provide-a-default-gateway_managing-the-default-gateway-setting\" title=\"25.8. Configuring NetworkManager to avoid using a specific profile to provide a default gateway\">Configuring NetworkManager to avoid using a specific profile to provide a default gateway\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-the-order-of-dns-servers_configuring-and-managing-networking\" title=\"Chapter 23. Configuring the order of DNS servers\">Configuring the order of DNS servers\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-an-ethernet-connection-by-using-control-center_configuring-an-ethernet-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.4. Configuring an Ethernet connection by using control-center\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIf you connect a host to the network over Ethernet, you can manage the connection’s settings with a graphical interface by using the GNOME Settings menu.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tNote that \u003Ccode class=\"literal\">control-center\u003C/code> does not support as many configuration options as the \u003Ccode class=\"literal\">nm-connection-editor\u003C/code> application or the \u003Ccode class=\"literal\">nmcli\u003C/code> utility.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA physical or virtual Ethernet Network Interface Controller (NIC) exists in the server’s configuration.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tGNOME is installed.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress the \u003Ckbd class=\"keycap\">Super\u003C/kbd> key, enter \u003Ccode class=\"literal\">Settings\u003C/code>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Cspan class=\"strong strong\">\u003Cstrong>Network\u003C/strong>\u003C/span> in the navigation on the left.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tChoose whether to add a new connection profile or to modify an existing one:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo create a new profile, click the \u003Cspan class=\"guibutton\">+\u003C/span> button next to the \u003Cspan class=\"strong strong\">\u003Cstrong>Ethernet\u003C/strong>\u003C/span> entry.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo modify an existing profile, click the gear icon next to the profile entry.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: On the \u003Cspan class=\"strong strong\">\u003Cstrong>Identity\u003C/strong>\u003C/span> tab, update the name of the connection profile.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn hosts with multiple profiles, a meaningful name makes it easier to identify the purpose of a profile.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDepending on your environment, configure the IP address settings on the \u003Cspan class=\"strong strong\">\u003Cstrong>IPv4\u003C/strong>\u003C/span> and \u003Cspan class=\"strong strong\">\u003Cstrong>IPv6\u003C/strong>\u003C/span> tabs accordingly:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo use DHCP or IPv6 stateless address autoconfiguration (SLAAC), select \u003Ccode class=\"literal\">Automatic (DHCP)\u003C/code> as method (default).\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo set a static IP address, network mask, default gateway, DNS servers, and search domain, select \u003Ccode class=\"literal\">Manual\u003C/code> as method, and fill the fields on the tabs:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/8baa88d20b14f3a7489b0312ed6b1d9d/IP-settings-gnome-settings.png\" alt=\"IP settings gnome settings\"/>\u003C/div>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDepending on whether you add or modify a connection profile, click the \u003Cspan class=\"guibutton\">Add\u003C/span> or \u003Cspan class=\"guibutton\">Apply\u003C/span> button to save the connection.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe GNOME \u003Ccode class=\"literal\">control-center\u003C/code> automatically activates the connection.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IP settings of the NIC:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip address show enp1s0\u003C/strong>\u003C/span>\n2: enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000\n    link/ether 52:54:00:17:b8:b6 brd ff:ff:ff:ff:ff:ff\n    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute enp1s0\n       valid_lft forever preferred_lft forever\n    inet6 2001:db8:1::fffe/64 scope global noprefixroute\n       valid_lft forever preferred_lft forever\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv4 default gateway:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip route show default\u003C/strong>\u003C/span>\ndefault via 192.0.2.254 dev enp1s0 proto static metric 102\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv6 default gateway:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -6 route show default\u003C/strong>\u003C/span>\ndefault via 2001:db8:1::ffee dev enp1s0 proto static metric 102 pref medium\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the DNS settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /etc/resolv.conf\u003C/strong>\u003C/span>\nsearch example.com\nnameserver 192.0.2.200\nnameserver 2001:db8:1::ffbb\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf multiple connection profiles are active at the same time, the order of \u003Ccode class=\"literal\">nameserver\u003C/code> entries depend on the DNS priority values in these profile and the connection types.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ping\u003C/code> utility to verify that this host can send packets to other hosts:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping \u003Cspan class=\"emphasis\">\u003Cem>&lt;host-name-or-IP-address&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting steps\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tVerify that the network cable is plugged-in to the host and a switch.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCheck whether the link failure exists only on this host or also on other hosts connected to the same switch.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tVerify that the network cable and the network interface are working as expected. Perform hardware diagnosis steps and replace defect cables and network interface cards.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf the configuration on the disk does not match the configuration on the device, starting or restarting NetworkManager creates an in-memory connection that reflects the configuration of the device. For further details and how to avoid this problem, see the \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/3068421\">NetworkManager duplicates a connection after restart of NetworkManager service\u003C/a> solution.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-an-ethernet-connection-by-using-nm-connection-editor_configuring-an-ethernet-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.5. Configuring an Ethernet connection by using nm-connection-editor\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIf you connect a host to the network over Ethernet, you can manage the connection’s settings with a graphical interface by using the \u003Cspan class=\"strong strong\">\u003Cstrong>nm-connection-editor\u003C/strong>\u003C/span> application.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA physical or virtual Ethernet Network Interface Controller (NIC) exists in the server’s configuration.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tGNOME is installed.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen a terminal, and enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>nm-connection-editor\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tChoose whether to add a new connection profile or to modify an existing one:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo create a new profile:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tClick the \u003Cspan class=\"guibutton\">+\u003C/span> button\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tSelect \u003Cspan class=\"strong strong\">\u003Cstrong>Ethernet\u003C/strong>\u003C/span> as connection type, and click \u003Cspan class=\"guibutton\">Create\u003C/span>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo modify an existing profile, double-click the profile entry.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Update the name of the profile in the \u003Cspan class=\"strong strong\">\u003Cstrong>Connection Name\u003C/strong>\u003C/span> field.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn hosts with multiple profiles, a meaningful name makes it easier to identify the purpose of a profile.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you create a new profile, select the device on the \u003Ccode class=\"literal\">Ethernet\u003C/code> tab:\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Cspan class=\"inlinemediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/9f36492b2b912efd359b06666cc77232/ethernet-connection-settings.png\" alt=\"ethernet connection settings\"/>\u003C/span>\n\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDepending on your environment, configure the IP address settings on the \u003Cspan class=\"strong strong\">\u003Cstrong>IPv4 Settings\u003C/strong>\u003C/span> and \u003Cspan class=\"strong strong\">\u003Cstrong>IPv6 Settings\u003C/strong>\u003C/span> tabs accordingly:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo use DHCP or IPv6 stateless address autoconfiguration (SLAAC), select \u003Ccode class=\"literal\">Automatic (DHCP)\u003C/code> as method (default).\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo set a static IP address, network mask, default gateway, DNS servers, and search domain, select \u003Ccode class=\"literal\">Manual\u003C/code> as method, and fill the fields on the tabs:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/bb18949e31978a2e7cd0da433268afb6/IP-settings-nm-connection-editor.png\" alt=\"IP settings nm connection editor\"/>\u003C/div>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Save\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClose \u003Cspan class=\"strong strong\">\u003Cstrong>nm-connection-editor\u003C/strong>\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IP settings of the NIC:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip address show \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n2: enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000\n    link/ether 52:54:00:17:b8:b6 brd ff:ff:ff:ff:ff:ff\n    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute enp1s0\n       valid_lft forever preferred_lft forever\n    inet6 2001:db8:1::fffe/64 scope global noprefixroute\n       valid_lft forever preferred_lft forever\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv4 default gateway:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip route show default\u003C/strong>\u003C/span>\ndefault via 192.0.2.254 dev enp1s0 proto static metric 102\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv6 default gateway:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -6 route show default\u003C/strong>\u003C/span>\ndefault via 2001:db8:1::ffee dev enp1s0 proto static metric 102 pref medium\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the DNS settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /etc/resolv.conf\u003C/strong>\u003C/span>\nsearch example.com\nnameserver 192.0.2.200\nnameserver 2001:db8:1::ffbb\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf multiple connection profiles are active at the same time, the order of \u003Ccode class=\"literal\">nameserver\u003C/code> entries depend on the DNS priority values in these profile and the connection types.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ping\u003C/code> utility to verify that this host can send packets to other hosts:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping \u003Cspan class=\"emphasis\">\u003Cem>&lt;host-name-or-IP-address&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting steps\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tVerify that the network cable is plugged-in to the host and a switch.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCheck whether the link failure exists only on this host or also on other hosts connected to the same switch.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tVerify that the network cable and the network interface are working as expected. Perform hardware diagnosis steps and replace defect cables and network interface cards.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf the configuration on the disk does not match the configuration on the device, starting or restarting NetworkManager creates an in-memory connection that reflects the configuration of the device. For further details and how to avoid this problem, see the \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/3068421\">NetworkManager duplicates a connection after restart of NetworkManager service\u003C/a> solution.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional Resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_configuring-networkmanager-to-avoid-using-a-specific-profile-to-provide-a-default-gateway_managing-the-default-gateway-setting\" title=\"25.8. Configuring NetworkManager to avoid using a specific profile to provide a default gateway\">Configuring NetworkManager to avoid using a specific profile to provide a default gateway\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-the-order-of-dns-servers_configuring-and-managing-networking\" title=\"Chapter 23. Configuring the order of DNS servers\">Configuring the order of DNS servers\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-an-ethernet-connection-with-a-static-ip-address-by-using-nmstatectl_configuring-an-ethernet-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.6. Configuring an Ethernet connection with a static IP address by using \u003Ccode class=\"literal\">nmstatectl\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tUse the \u003Ccode class=\"literal\">nmstatectl\u003C/code> utility to configure an Ethernet connection through the Nmstate API. The Nmstate API ensures that, after setting the configuration, the result matches the configuration file. If anything fails, \u003Ccode class=\"literal\">nmstatectl\u003C/code> automatically rolls back the changes to avoid leaving the system in an incorrect state.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA physical or virtual Ethernet Network Interface Controller (NIC) exists in the server’s configuration.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">nmstate\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a YAML file, for example \u003Ccode class=\"literal\">~/create-ethernet-profile.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\ninterfaces:\n- name: enp1s0\n  type: ethernet\n  state: up\n  ipv4:\n    enabled: true\n    address:\n    - ip: 192.0.2.1\n      prefix-length: 24\n    dhcp: false\n  ipv6:\n    enabled: true\n    address:\n    - ip: 2001:db8:1::1\n      prefix-length: 64\n    autoconf: false\n    dhcp: false\nroutes:\n  config:\n  - destination: 0.0.0.0/0\n    next-hop-address: 192.0.2.254\n    next-hop-interface: enp1s0\n  - destination: ::/0\n    next-hop-address: 2001:db8:1::fffe\n    next-hop-interface: enp1s0\ndns-resolver:\n  config:\n    search:\n    - example.com\n    server:\n    - 192.0.2.200\n    - 2001:db8:1::ffbb\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThese settings define an Ethernet connection profile for the \u003Ccode class=\"literal\">enp1s0\u003C/code> device with the following settings:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tA static IPv4 address - \u003Ccode class=\"literal\">192.0.2.1\u003C/code> with the \u003Ccode class=\"literal\">/24\u003C/code> subnet mask\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tA static IPv6 address - \u003Ccode class=\"literal\">2001:db8:1::1\u003C/code> with the \u003Ccode class=\"literal\">/64\u003C/code> subnet mask\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAn IPv4 default gateway - \u003Ccode class=\"literal\">192.0.2.254\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAn IPv6 default gateway - \u003Ccode class=\"literal\">2001:db8:1::fffe\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAn IPv4 DNS server - \u003Ccode class=\"literal\">192.0.2.200\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAn IPv6 DNS server - \u003Ccode class=\"literal\">2001:db8:1::ffbb\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tA DNS search domain - \u003Ccode class=\"literal\">example.com\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: You can define the \u003Ccode class=\"literal\">identifier: mac-address\u003C/code> and \u003Ccode class=\"literal\">mac-address: \u003Cspan class=\"emphasis\">\u003Cem>&lt;mac_address&gt;\u003C/em>\u003C/span>\u003C/code> properties in the \u003Ccode class=\"literal\">interfaces\u003C/code> property to identify the network interface card by its MAC address instead of its name, for example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\ninterfaces:\n- name: \u003Cspan class=\"emphasis\">\u003Cem>&lt;profile_name&gt;\u003C/em>\u003C/span>\n  type: ethernet\n  \u003Cspan class=\"strong strong\">\u003Cstrong>identifier: mac-address\u003C/strong>\u003C/span>\n  \u003Cspan class=\"strong strong\">\u003Cstrong>mac-address: \u003Cspan class=\"emphasis\">\u003Cem>&lt;mac_address&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n  ...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tApply the settings to the system:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl apply ~/create-ethernet-profile.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the current state in YAML format:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl show enp1s0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IP settings of the NIC:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip address show enp1s0\u003C/strong>\u003C/span>\n2: enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000\n    link/ether 52:54:00:17:b8:b6 brd ff:ff:ff:ff:ff:ff\n    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute enp1s0\n       valid_lft forever preferred_lft forever\n    inet6 2001:db8:1::fffe/64 scope global noprefixroute\n       valid_lft forever preferred_lft forever\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv4 default gateway:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip route show default\u003C/strong>\u003C/span>\ndefault via 192.0.2.254 dev enp1s0 proto static metric 102\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv6 default gateway:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -6 route show default\u003C/strong>\u003C/span>\ndefault via 2001:db8:1::ffee dev enp1s0 proto static metric 102 pref medium\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the DNS settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /etc/resolv.conf\u003C/strong>\u003C/span>\nsearch example.com\nnameserver 192.0.2.200\nnameserver 2001:db8:1::ffbb\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf multiple connection profiles are active at the same time, the order of \u003Ccode class=\"literal\">nameserver\u003C/code> entries depend on the DNS priority values in these profile and the connection types.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ping\u003C/code> utility to verify that this host can send packets to other hosts:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping \u003Cspan class=\"emphasis\">\u003Cem>&lt;host-name-or-IP-address&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nmstatectl(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/nmstate/examples/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-an-ethernet-connection-with-a-static-ip-address-by-using-the-network-rhel-system-role-with-an-interface-name_configuring-an-ethernet-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.7. Configuring an Ethernet connection with a static IP address by using the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role with an interface name\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo connect a Red Hat Enterprise Linux host to an Ethernet network, create a NetworkManager connection profile for the network device. By using Ansible and the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role to configure an Ethernet connection with static IP addresses, gateways, and DNS settings, and assign them to a specified interface name.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTypically, administrators want to reuse a playbook and not maintain individual playbooks for each host to which Ansible should assign static IP addresses. In this case, you can use variables in the playbook and maintain the settings in the inventory. As a result, you need only one playbook to dynamically assign individual settings to multiple hosts.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles\">You have prepared the control node and the managed nodes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in to the control node as a user who can run playbooks on the managed nodes.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe account you use to connect to the managed nodes has \u003Ccode class=\"literal\">sudo\u003C/code> permissions on them.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA physical or virtual Ethernet device exists in the server configuration.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe managed nodes use NetworkManager to configure the network.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEdit the \u003Ccode class=\"literal\">~/inventory\u003C/code> file, and append the host-specific settings to the host entries:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-ini\">managed-node-01.example.com \u003Cspan class=\"strong strong\">\u003Cstrong>interface=enp1s0 ip_v4=192.0.2.1/24 ip_v6=2001:db8:1::1/64 gateway_v4=192.0.2.254 gateway_v6=2001:db8:1::fffe\u003C/strong>\u003C/span>\n\nmanaged-node-02.example.com \u003Cspan class=\"strong strong\">\u003Cstrong>interface=enp1s0 ip_v4=192.0.2.2/24 ip_v6=2001:db8:1::2/64 gateway_v4=192.0.2.254 gateway_v6=2001:db8:1::fffe\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a playbook file, for example \u003Ccode class=\"literal\">~/playbook.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\n- name: Configure the network\n  hosts: managed-node-01.example.com,managed-node-02.example.com\n  tasks:\n    - name: Ethernet connection profile with static IP address settings\n      ansible.builtin.include_role:\n        name: rhel-system-roles.network\n      vars:\n        network_connections:\n          - name: \"{{ interface }}\"\n            interface_name: \"{{ interface }}\"\n            type: ethernet\n            autoconnect: yes\n            ip:\n              address:\n                - \"{{ ip_v4 }}\"\n                - \"{{ ip_v6 }}\"\n              gateway4: \"{{ gateway_v4 }}\"\n              gateway6: \"{{ gateway_v6 }}\"\n              dns:\n                - 192.0.2.200\n                - 2001:db8:1::ffbb\n              dns_search:\n                - example.com\n            state: up\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis playbook reads certain values dynamically for each host from the inventory file and uses static values in the playbook for settings which are the same for all hosts.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details about all variables used in the playbook, see the \u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file on the control node.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tValidate the playbook syntax:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --syntax-check ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that this command only validates the syntax and does not protect against a wrong but valid configuration.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the playbook:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tQuery the Ansible facts of the managed node and verify the active network settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ansible managed-node-01.example.com -m ansible.builtin.setup\u003C/strong>\u003C/span>\n...\n        \"ansible_default_ipv4\": {\n            \"address\": \"192.0.2.1\",\n            \"alias\": \"enp1s0\",\n            \"broadcast\": \"192.0.2.255\",\n            \"gateway\": \"192.0.2.254\",\n            \"interface\": \"enp1s0\",\n            \"macaddress\": \"52:54:00:17:b8:b6\",\n            \"mtu\": 1500,\n            \"netmask\": \"255.255.255.0\",\n            \"network\": \"192.0.2.0\",\n            \"prefix\": \"24\",\n            \"type\": \"ether\"\n        },\n        \"ansible_default_ipv6\": {\n            \"address\": \"2001:db8:1::1\",\n            \"gateway\": \"2001:db8:1::fffe\",\n            \"interface\": \"enp1s0\",\n            \"macaddress\": \"52:54:00:17:b8:b6\",\n            \"mtu\": 1500,\n            \"prefix\": \"64\",\n            \"scope\": \"global\",\n            \"type\": \"ether\"\n        },\n        ...\n        \"ansible_dns\": {\n            \"nameservers\": [\n                \"192.0.2.1\",\n                \"2001:db8:1::ffbb\"\n            ],\n            \"search\": [\n                \"example.com\"\n            ]\n        },\n...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/rhel-system-roles/network/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-an-ethernet-connection-with-a-static-ip-address-by-using-the-network-rhel-system-role-with-a-device-path_configuring-an-ethernet-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.8. Configuring an Ethernet connection with a static IP address by using the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role with a device path\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo connect a Red Hat Enterprise Linux host to an Ethernet network, create a NetworkManager connection profile for the network device. By using Ansible and the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role to configure an Ethernet connection with static IP addresses, gateways, and DNS settings, and assign them to a device based on its path instead of its name.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles\">You have prepared the control node and the managed nodes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in to the control node as a user who can run playbooks on the managed nodes.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe account you use to connect to the managed nodes has \u003Ccode class=\"literal\">sudo\u003C/code> permissions on them.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA physical or virtual Ethernet device exists in the servers configuration.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe managed nodes use NetworkManager to configure the network.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou know the path of the device. You can display the device path by using the \u003Ccode class=\"literal\">udevadm info /sys/class/net/\u003Cspan class=\"emphasis\">\u003Cem>&lt;device_name&gt;\u003C/em>\u003C/span> | grep ID_PATH=\u003C/code> command.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a playbook file, for example \u003Ccode class=\"literal\">~/playbook.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\n- name: Configure the network\n  hosts: managed-node-01.example.com\n  tasks:\n    - name: Ethernet connection profile with static IP address settings\n      ansible.builtin.include_role:\n        name: rhel-system-roles.network\n      vars:\n        network_connections:\n          - name: example\n            match:\n              path:\n                - pci-0000:00:0[1-3].0\n                - &amp;!pci-0000:00:02.0\n            type: ethernet\n            autoconnect: yes\n            ip:\n              address:\n                - 192.0.2.1/24\n                - 2001:db8:1::1/64\n              gateway4: 192.0.2.254\n              gateway6: 2001:db8:1::fffe\n              dns:\n                - 192.0.2.200\n                - 2001:db8:1::ffbb\n              dns_search:\n                - example.com\n            state: up\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe settings specified in the example playbook include the following:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">match\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tDefines that a condition must be met in order to apply the settings. You can only use this variable with the \u003Ccode class=\"literal\">path\u003C/code> option.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">path\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tDefines the persistent path of a device. You can set it as a fixed path or an expression. Its value can contain modifiers and wildcards. The example applies the settings to devices that match PCI ID \u003Ccode class=\"literal\">0000:00:0[1-3].0\u003C/code>, but not \u003Ccode class=\"literal\">0000:00:02.0\u003C/code>.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details about all variables used in the playbook, see the \u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file on the control node.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tValidate the playbook syntax:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --syntax-check ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that this command only validates the syntax and does not protect against a wrong but valid configuration.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the playbook:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tQuery the Ansible facts of the managed node and verify the active network settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ansible managed-node-01.example.com -m ansible.builtin.setup\u003C/strong>\u003C/span>\n...\n        \"ansible_default_ipv4\": {\n            \"address\": \"192.0.2.1\",\n            \"alias\": \"enp1s0\",\n            \"broadcast\": \"192.0.2.255\",\n            \"gateway\": \"192.0.2.254\",\n            \"interface\": \"enp1s0\",\n            \"macaddress\": \"52:54:00:17:b8:b6\",\n            \"mtu\": 1500,\n            \"netmask\": \"255.255.255.0\",\n            \"network\": \"192.0.2.0\",\n            \"prefix\": \"24\",\n            \"type\": \"ether\"\n        },\n        \"ansible_default_ipv6\": {\n            \"address\": \"2001:db8:1::1\",\n            \"gateway\": \"2001:db8:1::fffe\",\n            \"interface\": \"enp1s0\",\n            \"macaddress\": \"52:54:00:17:b8:b6\",\n            \"mtu\": 1500,\n            \"prefix\": \"64\",\n            \"scope\": \"global\",\n            \"type\": \"ether\"\n        },\n        ...\n        \"ansible_dns\": {\n            \"nameservers\": [\n                \"192.0.2.1\",\n                \"2001:db8:1::ffbb\"\n            ],\n            \"search\": [\n                \"example.com\"\n            ]\n        },\n...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/rhel-system-roles/network/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-an-ethernet-connection-with-a-dynamic-ip-address-by-using-nmstatectl_configuring-an-ethernet-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.9. Configuring an Ethernet connection with a dynamic IP address by using \u003Ccode class=\"literal\">nmstatectl\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tUse the \u003Ccode class=\"literal\">nmstatectl\u003C/code> utility to configure an Ethernet connection through the Nmstate API. The Nmstate API ensures that, after setting the configuration, the result matches the configuration file. If anything fails, \u003Ccode class=\"literal\">nmstatectl\u003C/code> automatically rolls back the changes to avoid leaving the system in an incorrect state.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA physical or virtual Ethernet Network Interface Controller (NIC) exists in the server’s configuration.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA DHCP server is available in the network.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">nmstate\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a YAML file, for example \u003Ccode class=\"literal\">~/create-ethernet-profile.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\ninterfaces:\n- name: enp1s0\n  type: ethernet\n  state: up\n  ipv4:\n    enabled: true\n    auto-dns: true\n    auto-gateway: true\n    auto-routes: true\n    dhcp: true\n  ipv6:\n    enabled: true\n    auto-dns: true\n    auto-gateway: true\n    auto-routes: true\n    autoconf: true\n    dhcp: true\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThese settings define an Ethernet connection profile for the \u003Ccode class=\"literal\">enp1s0\u003C/code> device. The connection retrieves IPv4 addresses, IPv6 addresses, default gateway, routes, DNS servers, and search domains from a DHCP server and IPv6 stateless address autoconfiguration (SLAAC).\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: You can define the \u003Ccode class=\"literal\">identifier: mac-address\u003C/code> and \u003Ccode class=\"literal\">mac-address: \u003Cspan class=\"emphasis\">\u003Cem>&lt;mac_address&gt;\u003C/em>\u003C/span>\u003C/code> properties in the \u003Ccode class=\"literal\">interfaces\u003C/code> property to identify the network interface card by its MAC address instead of its name, for example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\ninterfaces:\n- name: \u003Cspan class=\"emphasis\">\u003Cem>&lt;profile_name&gt;\u003C/em>\u003C/span>\n  type: ethernet\n  \u003Cspan class=\"strong strong\">\u003Cstrong>identifier: mac-address\u003C/strong>\u003C/span>\n  \u003Cspan class=\"strong strong\">\u003Cstrong>mac-address: \u003Cspan class=\"emphasis\">\u003Cem>&lt;mac_address&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n  ...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tApply the settings to the system:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl apply ~/create-ethernet-profile.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the current state in YAML format:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl show enp1s0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IP settings of the NIC:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip address show enp1s0\u003C/strong>\u003C/span>\n2: enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000\n    link/ether 52:54:00:17:b8:b6 brd ff:ff:ff:ff:ff:ff\n    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute enp1s0\n       valid_lft forever preferred_lft forever\n    inet6 2001:db8:1::fffe/64 scope global noprefixroute\n       valid_lft forever preferred_lft forever\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv4 default gateway:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip route show default\u003C/strong>\u003C/span>\ndefault via 192.0.2.254 dev enp1s0 proto static metric 102\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv6 default gateway:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -6 route show default\u003C/strong>\u003C/span>\ndefault via 2001:db8:1::ffee dev enp1s0 proto static metric 102 pref medium\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the DNS settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /etc/resolv.conf\u003C/strong>\u003C/span>\nsearch example.com\nnameserver 192.0.2.200\nnameserver 2001:db8:1::ffbb\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf multiple connection profiles are active at the same time, the order of \u003Ccode class=\"literal\">nameserver\u003C/code> entries depend on the DNS priority values in these profile and the connection types.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ping\u003C/code> utility to verify that this host can send packets to other hosts:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping \u003Cspan class=\"emphasis\">\u003Cem>&lt;host-name-or-IP-address&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nmstatectl(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/nmstate/examples/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-an-ethernet-connection-with-a-dynamic-ip-address-by-using-the-network-rhel-system-role-with-an-interface-name_configuring-an-ethernet-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.10. Configuring an Ethernet connection with a dynamic IP address by using the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role with an interface name\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo connect a Red Hat Enterprise Linux host to an Ethernet network, create a NetworkManager connection profile for the network device. By using Ansible and the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role to configure an Ethernet connection that retrieves its IP addresses, gateways, and DNS settings from a DHCP server and IPv6 stateless address autoconfiguration (SLAAC). With this role you can assign the connection profile to the specified interface name.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles\">You have prepared the control node and the managed nodes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in to the control node as a user who can run playbooks on the managed nodes.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe account you use to connect to the managed nodes has \u003Ccode class=\"literal\">sudo\u003C/code> permissions on them.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA physical or virtual Ethernet device exists in the servers configuration.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA DHCP server and SLAAC are available in the network.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe managed nodes use the NetworkManager service to configure the network.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a playbook file, for example \u003Ccode class=\"literal\">~/playbook.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\n- name: Configure the network\n  hosts: managed-node-01.example.com\n  tasks:\n    - name: Ethernet connection profile with dynamic IP address settings\n      ansible.builtin.include_role:\n        name: rhel-system-roles.network\n      vars:\n        network_connections:\n          - name: enp1s0\n            interface_name: enp1s0\n            type: ethernet\n            autoconnect: yes\n            ip:\n              dhcp4: yes\n              auto6: yes\n            state: up\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe settings specified in the example playbook include the following:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">dhcp4: yes\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tEnables automatic IPv4 address assignment from DHCP, PPP, or similar services.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">auto6: yes\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tEnables IPv6 auto-configuration. By default, NetworkManager uses Router Advertisements. If the router announces the \u003Ccode class=\"literal\">managed\u003C/code> flag, NetworkManager requests an IPv6 address and prefix from a DHCPv6 server.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details about all variables used in the playbook, see the \u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file on the control node.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tValidate the playbook syntax:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --syntax-check ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that this command only validates the syntax and does not protect against a wrong but valid configuration.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the playbook:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tQuery the Ansible facts of the managed node and verify that the interface received IP addresses and DNS settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ansible managed-node-01.example.com -m ansible.builtin.setup\u003C/strong>\u003C/span>\n...\n        \"ansible_default_ipv4\": {\n            \"address\": \"192.0.2.1\",\n            \"alias\": \"enp1s0\",\n            \"broadcast\": \"192.0.2.255\",\n            \"gateway\": \"192.0.2.254\",\n            \"interface\": \"enp1s0\",\n            \"macaddress\": \"52:54:00:17:b8:b6\",\n            \"mtu\": 1500,\n            \"netmask\": \"255.255.255.0\",\n            \"network\": \"192.0.2.0\",\n            \"prefix\": \"24\",\n            \"type\": \"ether\"\n        },\n        \"ansible_default_ipv6\": {\n            \"address\": \"2001:db8:1::1\",\n            \"gateway\": \"2001:db8:1::fffe\",\n            \"interface\": \"enp1s0\",\n            \"macaddress\": \"52:54:00:17:b8:b6\",\n            \"mtu\": 1500,\n            \"prefix\": \"64\",\n            \"scope\": \"global\",\n            \"type\": \"ether\"\n        },\n        ...\n        \"ansible_dns\": {\n            \"nameservers\": [\n                \"192.0.2.1\",\n                \"2001:db8:1::ffbb\"\n            ],\n            \"search\": [\n                \"example.com\"\n            ]\n        },\n...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/rhel-system-roles/network/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-an-ethernet-connection-with-a-dynamic-ip-address-by-using-the-network-rhel-system-role-with-a-device-path_configuring-an-ethernet-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.11. Configuring an Ethernet connection with a dynamic IP address by using the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role with a device path\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo connect a Red Hat Enterprise Linux host to an Ethernet network, create a NetworkManager connection profile for the network device. By using Ansible and the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role to configure an Ethernet connection that retrieves its IP addresses, gateways, and DNS settings from a DHCP server and IPv6 stateless address autoconfiguration (SLAAC). The role can assign the connection profile to a device based on its path instead of an interface name.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles\">You have prepared the control node and the managed nodes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in to the control node as a user who can run playbooks on the managed nodes.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe account you use to connect to the managed nodes has \u003Ccode class=\"literal\">sudo\u003C/code> permissions on them.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA physical or virtual Ethernet device exists in the servers configuration.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA DHCP server and SLAAC are available in the network.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe managed hosts use NetworkManager to configure the network.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou know the path of the device. You can display the device path by using the \u003Ccode class=\"literal\">udevadm info /sys/class/net/\u003Cspan class=\"emphasis\">\u003Cem>&lt;device_name&gt;\u003C/em>\u003C/span> | grep ID_PATH=\u003C/code> command.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a playbook file, for example \u003Ccode class=\"literal\">~/playbook.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\n- name: Configure the network\n  hosts: managed-node-01.example.com\n  tasks:\n    - name: Ethernet connection profile with dynamic IP address settings\n      ansible.builtin.include_role:\n        name: rhel-system-roles.network\n      vars:\n        network_connections:\n          - name: example\n            match:\n              path:\n                - pci-0000:00:0[1-3].0\n                - &amp;!pci-0000:00:02.0\n            type: ethernet\n            autoconnect: yes\n            ip:\n              dhcp4: yes\n              auto6: yes\n            state: up\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe settings specified in the example playbook include the following:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">match: path\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tDefines that a condition must be met in order to apply the settings. You can only use this variable with the \u003Ccode class=\"literal\">path\u003C/code> option.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">path: \u003Cspan class=\"emphasis\">\u003Cem>&lt;path_and_expressions&gt;\u003C/em>\u003C/span>\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tDefines the persistent path of a device. You can set it as a fixed path or an expression. Its value can contain modifiers and wildcards. The example applies the settings to devices that match PCI ID \u003Ccode class=\"literal\">0000:00:0[1-3].0\u003C/code>, but not \u003Ccode class=\"literal\">0000:00:02.0\u003C/code>.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">dhcp4: yes\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tEnables automatic IPv4 address assignment from DHCP, PPP, or similar services.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">auto6: yes\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tEnables IPv6 auto-configuration. By default, NetworkManager uses Router Advertisements. If the router announces the \u003Ccode class=\"literal\">managed\u003C/code> flag, NetworkManager requests an IPv6 address and prefix from a DHCPv6 server.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details about all variables used in the playbook, see the \u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file on the control node.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tValidate the playbook syntax:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --syntax-check ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that this command only validates the syntax and does not protect against a wrong but valid configuration.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the playbook:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tQuery the Ansible facts of the managed node and verify that the interface received IP addresses and DNS settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ansible managed-node-01.example.com -m ansible.builtin.setup\u003C/strong>\u003C/span>\n...\n        \"ansible_default_ipv4\": {\n            \"address\": \"192.0.2.1\",\n            \"alias\": \"enp1s0\",\n            \"broadcast\": \"192.0.2.255\",\n            \"gateway\": \"192.0.2.254\",\n            \"interface\": \"enp1s0\",\n            \"macaddress\": \"52:54:00:17:b8:b6\",\n            \"mtu\": 1500,\n            \"netmask\": \"255.255.255.0\",\n            \"network\": \"192.0.2.0\",\n            \"prefix\": \"24\",\n            \"type\": \"ether\"\n        },\n        \"ansible_default_ipv6\": {\n            \"address\": \"2001:db8:1::1\",\n            \"gateway\": \"2001:db8:1::fffe\",\n            \"interface\": \"enp1s0\",\n            \"macaddress\": \"52:54:00:17:b8:b6\",\n            \"mtu\": 1500,\n            \"prefix\": \"64\",\n            \"scope\": \"global\",\n            \"type\": \"ether\"\n        },\n        ...\n        \"ansible_dns\": {\n            \"nameservers\": [\n                \"192.0.2.1\",\n                \"2001:db8:1::ffbb\"\n            ],\n            \"search\": [\n                \"example.com\"\n            ]\n        },\n...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/rhel-system-roles/network/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-multiple-ethernet-interfaces-by-using-a-single-connection-profile-by-interface-name_configuring-an-ethernet-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.12. Configuring multiple Ethernet interfaces by using a single connection profile by interface name\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIn most cases, one connection profile contains the settings of one network device. However, NetworkManager also supports wildcards when you set the interface name in connection profiles. If a host roams between Ethernet networks with dynamic IP address assignment, you can use this feature to create a single connection profile that you can use for multiple Ethernet interfaces.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tMultiple physical or virtual Ethernet devices exist in the server’s configuration.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA DHCP server is available in the network.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tNo connection profile exists on the host.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd a connection profile that applies to all interface names starting with \u003Ccode class=\"literal\">enp\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add con-name \"Wired connection 1\" connection.multi-connect multiple match.interface-name enp* type ethernet\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay all settings of the single connection profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection show \"Wired connection 1\"\u003C/strong>\u003C/span>\nconnection.id:                      Wired connection 1\n...\nconnection.multi-connect:           3 (multiple)\nmatch.interface-name:               \u003Ccode class=\"literal\">enp*\u003C/code>\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">3\u003C/code> indicates the number of interfaces active on the connection profile at the same time, and not the number of network interfaces in the connection profile. The connection profile uses all devices that match the pattern in the \u003Ccode class=\"literal\">match.interface-name\u003C/code> parameter and, therefore, the connection profiles have the same Universally Unique Identifier (UUID).\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the status of the connections:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection show\u003C/strong>\u003C/span>\nNAME                UUID                                  TYPE      DEVICE\n...\nWired connection 1  6f22402e-c0cc-49cf-b702-eaf0cd5ea7d1  ethernet  enp7s0\nWired connection 1  6f22402e-c0cc-49cf-b702-eaf0cd5ea7d1  ethernet  enp8s0\nWired connection 1  6f22402e-c0cc-49cf-b702-eaf0cd5ea7d1  ethernet  enp9s0\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nmcli(1)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings(5)\u003C/code> man page\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-single-connection-profile-for-multiple-ethernet-interfaces-using-pci-ids_configuring-an-ethernet-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.13. Configuring a single connection profile for multiple Ethernet interfaces using PCI IDs\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe PCI ID is a unique identifier of the devices connected to the system. The connection profile adds multiple devices by matching interfaces based on a list of PCI IDs. You can use this procedure to connect multiple device PCI IDs to the single connection profile.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tMultiple physical or virtual Ethernet devices exist in the server’s configuration.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA DHCP server is available in the network.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tNo connection profile exists on the host.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIdentify the device path. For example, to display the device paths of all interfaces starting with \u003Ccode class=\"literal\">enp\u003C/code>, enter :\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>udevadm info /sys/class/net/enp\u003C/strong>\u003C/span> | grep ID_PATH=*\n...\nE: ID_PATH=pci-0000:07:00.0\nE: ID_PATH=pci-0000:08:00.0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd a connection profile that applies to all PCI IDs matching the \u003Ccode class=\"literal\">0000:00:0[7-8].0\u003C/code> expression:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ethernet connection.multi-connect multiple match.path \"pci-0000:07:00.0 pci-0000:08:00.0\" con-name \"Wired connection 1\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the status of the connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection show\u003C/strong>\u003C/span>\nNAME                 UUID                                  TYPE      DEVICE\nWired connection 1   9cee0958-512f-4203-9d3d-b57af1d88466  ethernet  enp7s0\nWired connection 1   9cee0958-512f-4203-9d3d-b57af1d88466  ethernet  enp8s0\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display all settings of the connection profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection show \"Wired connection 1\"\u003C/strong>\u003C/span>\nconnection.id:               Wired connection 1\n...\nconnection.multi-connect:    3 (multiple)\nmatch.path:                  pci-0000:07:00.0,pci-0000:08:00.0\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis connection profile uses all devices with a PCI ID which match the pattern in the \u003Ccode class=\"literal\">match.path\u003C/code> parameter and, therefore, the connection profiles have the same Universally Unique Identifier (UUID).\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nmcli(1)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings(5)\u003C/code> man page\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-network-bonding_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 3. Configuring a network bond\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tA network bond is a method to combine or aggregate physical and virtual network interfaces to provide a logical interface with higher throughput or redundancy. In a bond, the kernel handles all operations exclusively. You can create bonds on different types of devices, such as Ethernet devices or VLANs.\n\t\t\u003C/p>\u003Cp>\n\t\t\tRed Hat Enterprise Linux provides administrators different options to configure team devices. For example:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tUse \u003Ccode class=\"literal\">nmcli\u003C/code> to configure bond connections using the command line.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tUse the RHEL web console to configure bond connections using a web browser.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tUse \u003Ccode class=\"literal\">nmtui\u003C/code> to configure bond connections in a text-based user interface.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tUse the \u003Ccode class=\"literal\">nm-connection-editor\u003C/code> application to configure bond connections in a graphical interface.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tUse \u003Ccode class=\"literal\">nmstatectl\u003C/code> to configure bond connections through the Nmstate API.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tUse RHEL system roles to automate the bond configuration on one or multiple hosts.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"understanding-the-default-behavior-of-controller-and-port-interfaces_configuring-network-bonding\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.1. Understanding the default behavior of controller and port interfaces\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tConsider the following default behavior when managing or troubleshooting team or bond port interfaces using the \u003Ccode class=\"literal\">NetworkManager\u003C/code> service:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStarting the controller interface does not automatically start the port interfaces.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStarting a port interface always starts the controller interface.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStopping the controller interface also stops the port interface.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA controller without ports can start static IP connections.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA controller without ports waits for ports when starting DHCP connections.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA controller with a DHCP connection waiting for ports completes when you add a port with a carrier.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA controller with a DHCP connection waiting for ports continues waiting when you add a port without carrier.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"upstream-switch-configuration-depending-on-the-bonding-modes_configuring-network-bonding\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.2. Upstream switch configuration depending on the bonding modes\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tDepending on the bonding mode you want to use, you must configure the ports on the switch:\n\t\t\t\u003C/p>\u003Crh-table>\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccolgroup>\u003Ccol style=\"width: 40%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 60%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140053175463728\" scope=\"col\">Bonding mode\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140053175462640\" scope=\"col\">Configuration on the switch\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053175463728\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">0\u003C/code> - \u003Ccode class=\"literal\">balance-rr\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053175462640\"> \u003Cp>\n\t\t\t\t\t\t\t\tRequires static EtherChannel enabled, not Link Aggregation Control Protocol (LACP)-negotiated.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053175463728\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">1\u003C/code> - \u003Ccode class=\"literal\">active-backup\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053175462640\"> \u003Cp>\n\t\t\t\t\t\t\t\tNo configuration required on the switch.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053175463728\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">2\u003C/code> - \u003Ccode class=\"literal\">balance-xor\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053175462640\"> \u003Cp>\n\t\t\t\t\t\t\t\tRequires static EtherChannel enabled, not LACP-negotiated.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053175463728\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">3\u003C/code> - \u003Ccode class=\"literal\">broadcast\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053175462640\"> \u003Cp>\n\t\t\t\t\t\t\t\tRequires static EtherChannel enabled, not LACP-negotiated.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053175463728\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">4\u003C/code> - \u003Ccode class=\"literal\">802.3ad\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053175462640\"> \u003Cp>\n\t\t\t\t\t\t\t\tRequires LACP-negotiated EtherChannel enabled.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053175463728\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">5\u003C/code> - \u003Ccode class=\"literal\">balance-tlb\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053175462640\"> \u003Cp>\n\t\t\t\t\t\t\t\tNo configuration required on the switch.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053175463728\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">6\u003C/code> - \u003Ccode class=\"literal\">balance-alb\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053175462640\"> \u003Cp>\n\t\t\t\t\t\t\t\tNo configuration required on the switch.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053175463728\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">balance-slb\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053175462640\"> \u003Cp>\n\t\t\t\t\t\t\t\tNo configuration required on the switch.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cp>\n\t\t\t\tFor details how to configure your switch, see the documentation of the switch.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tCertain network bonding features, such as the fail-over mechanism, do not support direct cable connections without a network switch. For further details, see the \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/202583\">Is bonding supported with direct connection using crossover cables?\u003C/a> KCS solution.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-network-bond-by-using-nmcli_configuring-network-bonding\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.3. Configuring a network bond by using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo configure a network bond on the command line, use the \u003Ccode class=\"literal\">nmcli\u003C/code> utility.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTwo or more physical or virtual network devices are installed on the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo use Ethernet devices as ports of the bond, the physical or virtual Ethernet devices must be installed on the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo use team, bridge, or VLAN devices as ports of the bond, you can either create these devices while you create the bond or you can create them in advance as described in:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-a-network-team-by-using-nmcli_configuring-network-teaming\" title=\"4.4. Configuring a NIC team by using nmcli\">Configuring a network team by using nmcli\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-a-network-bridge-by-using-nmcli_configuring-a-network-bridge\" title=\"6.1. Configuring a network bridge by using nmcli\">Configuring a network bridge by using nmcli\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-vlan-tagging-by-using-nmcli_configuring-vlan-tagging\" title=\"5.1. Configuring VLAN tagging by using nmcli\">Configuring VLAN tagging by using nmcli\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a bond interface:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type bond con-name bond0 ifname bond0 bond.options \"mode=active-backup\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis command creates a bond named \u003Ccode class=\"literal\">bond0\u003C/code> that uses the \u003Ccode class=\"literal\">active-backup\u003C/code> mode.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo additionally set a Media Independent Interface (MII) monitoring interval, add the \u003Ccode class=\"literal\">miimon=interval\u003C/code> option to the \u003Ccode class=\"literal\">bond.options\u003C/code> property, for example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type bond con-name bond0 ifname bond0 bond.options \"mode=active-backup,miimon=1000\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the network interfaces, and note names of interfaces you plan to add to the bond:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device status\u003C/strong>\u003C/span>\nDEVICE   TYPE      STATE         CONNECTION\nenp7s0   ethernet  disconnected  --\nenp8s0   ethernet  disconnected  --\nbridge0  bridge    connected     bridge0\nbridge1  bridge    connected     bridge1\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn this example:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">enp7s0\u003C/code> and \u003Ccode class=\"literal\">enp8s0\u003C/code> are not configured. To use these devices as ports, add connection profiles in the next step.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge0\u003C/code> and \u003Ccode class=\"literal\">bridge1\u003C/code> have existing connection profiles. To use these devices as ports, modify their profiles in the next step.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAssign interfaces to the bond:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf the interfaces you want to assign to the bond are not configured, create new connection profiles for them:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ethernet port-type bond con-name bond0-port1 ifname enp7s0 controller bond0\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ethernet port-type bond con-name bond0-port2 ifname enp8s0 controller bond0\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThese commands create profiles for \u003Ccode class=\"literal\">enp7s0\u003C/code> and \u003Ccode class=\"literal\">enp8s0\u003C/code>, and add them to the \u003Ccode class=\"literal\">bond0\u003C/code> connection.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo assign an existing connection profile to the bond:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tSet the \u003Ccode class=\"literal\">controller\u003C/code> parameter of these connections to \u003Ccode class=\"literal\">bond0\u003C/code>:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bridge0 controller bond0\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bridge1 controller bond0\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tThese commands assign the existing connection profiles named \u003Ccode class=\"literal\">bridge0\u003C/code> and \u003Ccode class=\"literal\">bridge1\u003C/code> to the \u003Ccode class=\"literal\">bond0\u003C/code> connection.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tReactivate the connections:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up bridge0\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up bridge1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the IPv4 settings:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo use this bond device as a port of other devices, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond0 ipv4.method disabled\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo use DHCP, no action is required.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo set a static IPv4 address, network mask, default gateway, and DNS server to the \u003Ccode class=\"literal\">bond0\u003C/code> connection, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond0 ipv4.addresses '192.0.2.1/24' ipv4.gateway '192.0.2.254' ipv4.dns '192.0.2.253' ipv4.dns-search 'example.com' ipv4.method manual\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the IPv6 settings:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo use this bond device as a port of other devices, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond0 ipv6.method disabled\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo use stateless address autoconfiguration (SLAAC), no action is required.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo set a static IPv6 address, network mask, default gateway, and DNS server to the \u003Ccode class=\"literal\">bond0\u003C/code> connection, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond0 ipv6.addresses '2001:db8:1::1/64' ipv6.gateway '2001:db8:1::fffe' ipv6.dns '2001:db8:1::fffd' ipv6.dns-search 'example.com' ipv6.method manual\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: If you want to set any parameters on the bond ports, use the following command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond0-port1 bond-port.\u003Cspan class=\"emphasis\">\u003Cem>&lt;parameter&gt;\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>&lt;value&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tActivate the connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up bond0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the ports are connected, and the \u003Ccode class=\"literal\">CONNECTION\u003C/code> column displays the port’s connection name:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device\u003C/strong>\u003C/span>\nDEVICE   TYPE      STATE      CONNECTION\n...\nenp7s0   ethernet  connected  bond0-port1\nenp8s0   ethernet  connected  bond0-port2\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tWhen you activate any port of the connection, NetworkManager also activates the bond, but not the other ports of it. You can configure that Red Hat Enterprise Linux enables all ports automatically when the bond is enabled:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnable the \u003Ccode class=\"literal\">connection.autoconnect-ports\u003C/code> parameter of the bond’s connection:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond0 connection.autoconnect-ports 1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tReactivate the bridge:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up bond0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTemporarily remove the network cable from one of the network devices and check if the other device in the bond handling the traffic.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that there is no method to properly test link failure events using software utilities. Tools that deactivate connections, such as \u003Ccode class=\"literal\">nmcli\u003C/code>, show only the bonding driver’s ability to handle port configuration changes and not actual link failure events.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the status of the bond:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /proc/net/bonding/bond0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-network-bond-by-using-the-rhel-web-console_configuring-network-bonding\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.4. Configuring a network bond by using the RHEL web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tUse the RHEL web console to configure a network bond if you prefer to manage network settings using a web browser-based interface.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTwo or more physical or virtual network devices are installed on the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo use Ethernet devices as members of the bond, the physical or virtual Ethernet devices must be installed on the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo use team, bridge, or VLAN devices as members of the bond, create them in advance as described in:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_configuring-a-network-team-by-using-the-rhel-web-console_configuring-network-teaming\" title=\"4.5. Configuring a NIC team by using the RHEL web console\">Configuring a network team by using the RHEL web console\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_configuring-a-network-bridge-by-using-the-rhel-web-console_configuring-a-network-bridge\" title=\"6.2. Configuring a network bridge by using the RHEL web console\">Configuring a network bridge by using the RHEL web console\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_configuring-vlan-tagging-by-using-the-rhel-web-console_configuring-vlan-tagging\" title=\"5.3. Configuring VLAN tagging by using the RHEL web console\">Configuring VLAN tagging by using the RHEL web console\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the \u003Cspan class=\"strong strong\">\u003Cstrong>Networking\u003C/strong>\u003C/span> tab in the navigation on the left side of the screen.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Add bond\u003C/span> in the \u003Cspan class=\"strong strong\">\u003Cstrong>Interfaces\u003C/strong>\u003C/span> section.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnter the name of the bond device you want to create.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the interfaces that should be members of the bond.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSelect the mode of the bond.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you select \u003Cspan class=\"strong strong\">\u003Cstrong>Active backup\u003C/strong>\u003C/span>, the web console shows the additional field \u003Cspan class=\"strong strong\">\u003Cstrong>Primary\u003C/strong>\u003C/span> in which you can select the preferred active device.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSet the link monitoring mode. For example, when you use the \u003Cspan class=\"strong strong\">\u003Cstrong>Adaptive load balancing\u003C/strong>\u003C/span> mode, set it to \u003Ccode class=\"literal\">ARP\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Adjust the monitoring interval, link up delay, and link down delay settings. Typically, you only change the defaults for troubleshooting purposes.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/28c01d3e4242ea42f96037e208f662e7/bond-settings.png\" alt=\"bond settings\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Apply\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tBy default, the bond uses a dynamic IP address. If you want to set a static IP address:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick the name of the bond in the \u003Cspan class=\"strong strong\">\u003Cstrong>Interfaces\u003C/strong>\u003C/span> section.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Edit\u003C/strong>\u003C/span> next to the protocol you want to configure.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSelect \u003Cspan class=\"strong strong\">\u003Cstrong>Manual\u003C/strong>\u003C/span> next to \u003Cspan class=\"strong strong\">\u003Cstrong>Addresses\u003C/strong>\u003C/span>, and enter the IP address, prefix, and default gateway.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>DNS\u003C/strong>\u003C/span> section, click the \u003Cspan class=\"guibutton\">+\u003C/span> button, and enter the IP address of the DNS server. Repeat this step to set multiple DNS servers.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>DNS search domains\u003C/strong>\u003C/span> section, click the \u003Cspan class=\"guibutton\">+\u003C/span> button, and enter the search domain.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf the interface requires static routes, configure them in the \u003Cspan class=\"strong strong\">\u003Cstrong>Routes\u003C/strong>\u003C/span> section.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/7994cde2fafedf1c5a1436807dc34096/bond-team-bridge-vlan.ipv4.png\" alt=\"bond team bridge vlan.ipv4\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Apply\u003C/span>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSelect the \u003Cspan class=\"strong strong\">\u003Cstrong>Networking\u003C/strong>\u003C/span> tab in the navigation on the left side of the screen, and check if there is incoming and outgoing traffic on the interface:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/7eb80fb00d3136600392a9172ad9a8a4/bond-verify.png\" alt=\"bond verify\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTemporarily remove the network cable from one of the network devices and check if the other device in the bond handling the traffic.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that there is no method to properly test link failure events using software utilities. Tools that deactivate connections, such as the web console, show only the bonding driver’s ability to handle member configuration changes and not actual link failure events.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the status of the bond:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /proc/net/bonding/bond0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-network-by-bond-using-nmtui_configuring-network-bonding\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.5. Configuring a network bond by using \u003Ccode class=\"literal\">nmtui\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">nmtui\u003C/code> application provides a text-based user interface for NetworkManager. You can use \u003Ccode class=\"literal\">nmtui\u003C/code> to configure a network bond on a host without a graphical interface.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIn \u003Ccode class=\"literal\">nmtui\u003C/code>:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tNavigate by using the cursor keys.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tPress a button by selecting it and hitting \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tSelect and clear checkboxes by using \u003Ckbd class=\"keycap\">Space\u003C/kbd>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTwo or more physical or virtual network devices are installed on the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo use Ethernet devices as ports of the bond, the physical or virtual Ethernet devices must be installed on the server.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you do not know the network device names on which you want configure a network bond, display the available devices:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device status\u003C/strong>\u003C/span>\nDEVICE     TYPE      STATE                   CONNECTION\nenp7s0     ethernet  unavailable             --\nenp8s0     ethernet  unavailable             --\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart \u003Ccode class=\"literal\">nmtui\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmtui\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Cspan class=\"strong strong\">\u003Cstrong>Edit a connection\u003C/strong>\u003C/span>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Cspan class=\"strong strong\">\u003Cstrong>Bond\u003C/strong>\u003C/span> from the list of network types, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Enter a name for the NetworkManager profile to be created.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn hosts with multiple profiles, a meaningful name makes it easier to identify the purpose of a profile.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnter the bond device name to be created into the \u003Cspan class=\"strong strong\">\u003Cstrong>Device\u003C/strong>\u003C/span> field.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd ports to the bond to be created:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPress \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span> next to the \u003Cspan class=\"strong strong\">\u003Cstrong>Slaves\u003C/strong>\u003C/span> list.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSelect the type of the interface you want to add as port to the bond, for example, \u003Cspan class=\"strong strong\">\u003Cstrong>Ethernet\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOptional: Enter a name for the NetworkManager profile to be created for this bond port.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tEnter the port’s device name into the \u003Cspan class=\"strong strong\">\u003Cstrong>Device\u003C/strong>\u003C/span> field.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tPress \u003Cspan class=\"strong strong\">\u003Cstrong>OK\u003C/strong>\u003C/span> to return to the window with the bond settings.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"figure\" id=\"idm140053180592640\">\u003Cp class=\"title\">\u003Cstrong>Figure 3.1. Adding an Ethernet device as port to a bond\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/738fc53f48edcb37714e09e4c793be0f/nmtui-bond-add-port.png\" alt=\"nmtui bond add port\"/>\u003C/div>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tRepeat these steps to add more ports to the bond.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSet the bond mode. Depending on the value you set, \u003Ccode class=\"literal\">nmtui\u003C/code> displays additional fields for settings that are related to the selected mode.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDepending on your environment, configure the IP address settings in the \u003Cspan class=\"strong strong\">\u003Cstrong>IPv4 configuration\u003C/strong>\u003C/span> and \u003Cspan class=\"strong strong\">\u003Cstrong>IPv6 configuration\u003C/strong>\u003C/span> areas accordingly. For this, press the button next to these areas, and select:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Disabled\u003C/code>, if the bond does not require an IP address.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Automatic\u003C/code>, if a DHCP server or stateless address autoconfiguration (SLAAC) dynamically assigns an IP address to the bond.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Manual\u003C/code>, if the network requires static IP address settings. In this case, you must fill further fields:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tPress \u003Cspan class=\"strong strong\">\u003Cstrong>Show\u003C/strong>\u003C/span> next to the protocol you want to configure to display additional fields.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tPress \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span> next to \u003Cspan class=\"strong strong\">\u003Cstrong>Addresses\u003C/strong>\u003C/span>, and enter the IP address and the subnet mask in Classless Inter-Domain Routing (CIDR) format.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tIf you do not specify a subnet mask, NetworkManager sets a \u003Ccode class=\"literal\">/32\u003C/code> subnet mask for IPv4 addresses and \u003Ccode class=\"literal\">/64\u003C/code> for IPv6 addresses.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tEnter the address of the default gateway.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tPress \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span> next to \u003Cspan class=\"strong strong\">\u003Cstrong>DNS servers\u003C/strong>\u003C/span>, and enter the DNS server address.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tPress \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span> next to \u003Cspan class=\"strong strong\">\u003Cstrong>Search domains\u003C/strong>\u003C/span>, and enter the DNS search domain.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"figure\" id=\"idm140053189482080\">\u003Cp class=\"title\">\u003Cstrong>Figure 3.2. Example of a bond connection with static IP address settings\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/2bec7d095c8adc5a6cc12c088a3c7da4/nmtui-bond-static-IP.png\" alt=\"nmtui bond static IP\"/>\u003C/div>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Cspan class=\"strong strong\">\u003Cstrong>OK\u003C/strong>\u003C/span> to create and automatically activate the new connection.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Cspan class=\"strong strong\">\u003Cstrong>Back\u003C/strong>\u003C/span> to return to the main menu.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Cspan class=\"strong strong\">\u003Cstrong>Quit\u003C/strong>\u003C/span>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd> to close the \u003Ccode class=\"literal\">nmtui\u003C/code> application.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTemporarily remove the network cable from one of the network devices and check if the other device in the bond handling the traffic.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that there is no method to properly test link failure events using software utilities. Tools that deactivate connections, such as \u003Ccode class=\"literal\">nmcli\u003C/code>, show only the bonding driver’s ability to handle port configuration changes and not actual link failure events.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the status of the bond:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /proc/net/bonding/bond0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-network-bond-by-using-nm-connection-editor_configuring-network-bonding\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.6. Configuring a network bond by using nm-connection-editor\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIf you use Red Hat Enterprise Linux with a graphical interface, you can configure network bonds using the \u003Ccode class=\"literal\">nm-connection-editor\u003C/code> application.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tNote that \u003Ccode class=\"literal\">nm-connection-editor\u003C/code> can add only new ports to a bond. To use an existing connection profile as a port, create the bond by using the \u003Ccode class=\"literal\">nmcli\u003C/code> utility as described in \u003Ca class=\"link\" href=\"#configuring-a-network-bond-by-using-nmcli_configuring-network-bonding\" title=\"3.3. Configuring a network bond by using nmcli\">Configuring a network bond by using nmcli\u003C/a>.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTwo or more physical or virtual network devices are installed on the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo use Ethernet devices as ports of the bond, the physical or virtual Ethernet devices must be installed on the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo use team, bond, or VLAN devices as ports of the bond, ensure that these devices are not already configured.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen a terminal, and enter \u003Ccode class=\"literal\">nm-connection-editor\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>nm-connection-editor\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick the \u003Cspan class=\"guibutton\">+\u003C/span> button to add a new connection.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the \u003Cspan class=\"strong strong\">\u003Cstrong>Bond\u003C/strong>\u003C/span> connection type, and click \u003Cspan class=\"guibutton\">Create\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the \u003Cspan class=\"strong strong\">\u003Cstrong>Bond\u003C/strong>\u003C/span> tab:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOptional: Set the name of the bond interface in the \u003Cspan class=\"strong strong\">\u003Cstrong>Interface name\u003C/strong>\u003C/span> field.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tClick the \u003Cspan class=\"guibutton\">Add\u003C/span> button to add a network interface as a port to the bond.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tSelect the connection type of the interface. For example, select \u003Cspan class=\"strong strong\">\u003Cstrong>Ethernet\u003C/strong>\u003C/span> for a wired connection.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tOptional: Set a connection name for the port.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tIf you create a connection profile for an Ethernet device, open the \u003Cspan class=\"strong strong\">\u003Cstrong>Ethernet\u003C/strong>\u003C/span> tab, and select in the \u003Cspan class=\"strong strong\">\u003Cstrong>Device\u003C/strong>\u003C/span> field the network interface you want to add as a port to the bond. If you selected a different device type, configure it accordingly. Note that you can only use Ethernet interfaces in a bond that are not configured.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Save\u003C/span>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRepeat the previous step for each interface you want to add to the bond:\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"inlinemediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/06165ace0bbc5a7dc1ca3ded35d69437/add-nic-to-bond-in-nm-connection-editor.png\" alt=\"add nic to bond in nm connection editor\"/>\u003C/span>\n\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOptional: Set other options, such as the Media Independent Interface (MII) monitoring interval.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the IP address settings on both the \u003Cspan class=\"strong strong\">\u003Cstrong>IPv4 Settings\u003C/strong>\u003C/span> and \u003Cspan class=\"strong strong\">\u003Cstrong>IPv6 Settings\u003C/strong>\u003C/span> tabs:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo use this bridge device as a port of other devices, set the \u003Cspan class=\"strong strong\">\u003Cstrong>Method\u003C/strong>\u003C/span> field to \u003Cspan class=\"strong strong\">\u003Cstrong>Disabled\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo use DHCP, leave the \u003Cspan class=\"strong strong\">\u003Cstrong>Method\u003C/strong>\u003C/span> field at its default, \u003Cspan class=\"strong strong\">\u003Cstrong>Automatic (DHCP)\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo use static IP settings, set the \u003Cspan class=\"strong strong\">\u003Cstrong>Method\u003C/strong>\u003C/span> field to \u003Cspan class=\"strong strong\">\u003Cstrong>Manual\u003C/strong>\u003C/span> and fill the fields accordingly:\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"inlinemediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/8885955edff3803e58f40526782cd2ed/bond-IP-settings-nm-connection-editor.png\" alt=\"bond IP settings nm connection editor\"/>\u003C/span>\n\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Save\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClose \u003Ccode class=\"literal\">nm-connection-editor\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTemporarily remove the network cable from one of the network devices and check if the other device in the bond handling the traffic.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that there is no method to properly test link failure events using software utilities. Tools that deactivate connections, such as \u003Ccode class=\"literal\">nmcli\u003C/code>, show only the bonding driver’s ability to handle port configuration changes and not actual link failure events.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the status of the bond:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /proc/net/bonding/\u003Cspan class=\"emphasis\">\u003Cem>bond0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_configuring-networkmanager-to-avoid-using-a-specific-profile-to-provide-a-default-gateway_managing-the-default-gateway-setting\" title=\"25.8. Configuring NetworkManager to avoid using a specific profile to provide a default gateway\">Configuring NetworkManager to avoid using a specific profile to provide a default gateway\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-a-network-team-by-using-nm-connection-editor_configuring-network-teaming\" title=\"4.6. Configuring a NIC team by using nm-connection-editor\">Configuring a network team by using nm-connection-editor\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-a-network-bridge-by-using-nm-connection-editor_configuring-a-network-bridge\" title=\"6.4. Configuring a network bridge by using nm-connection-editor\">Configuring a network bridge by using nm-connection-editor\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-vlan-tagging-by-using-nm-connection-editor_configuring-vlan-tagging\" title=\"5.5. Configuring VLAN tagging by using nm-connection-editor\">Configuring VLAN tagging by using nm-connection-editor\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-network-bond-by-using-nmstatectl_configuring-network-bonding\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.7. Configuring a network bond by using \u003Ccode class=\"literal\">nmstatectl\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tUse the \u003Ccode class=\"literal\">nmstatectl\u003C/code> utility to configure a network bond through the Nmstate API. The Nmstate API ensures that, after setting the configuration, the result matches the configuration file. If anything fails, \u003Ccode class=\"literal\">nmstatectl\u003C/code> automatically rolls back the changes to avoid leaving the system in an incorrect state.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tDepending on your environment, adjust the YAML file accordingly. For example, to use different devices than Ethernet adapters in the bond, adapt the \u003Ccode class=\"literal\">base-iface\u003C/code> attribute and \u003Ccode class=\"literal\">type\u003C/code> attributes of the ports you use in the bond.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTwo or more physical or virtual network devices are installed on the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo use Ethernet devices as ports in the bond, the physical or virtual Ethernet devices must be installed on the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo use team, bridge, or VLAN devices as ports in the bond, set the interface name in the \u003Ccode class=\"literal\">port\u003C/code> list, and define the corresponding interfaces.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">nmstate\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a YAML file, for example \u003Ccode class=\"literal\">~/create-bond.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\ninterfaces:\n- name: bond0\n  type: bond\n  state: up\n  ipv4:\n    enabled: true\n    address:\n    - ip: 192.0.2.1\n      prefix-length: 24\n    dhcp: false\n  ipv6:\n    enabled: true\n    address:\n    - ip: 2001:db8:1::1\n      prefix-length: 64\n    autoconf: false\n    dhcp: false\n  link-aggregation:\n    mode: active-backup\n    port:\n    - enp1s0\n    - enp7s0\n- name: enp1s0\n  type: ethernet\n  state: up\n- name: enp7s0\n  type: ethernet\n  state: up\n\nroutes:\n  config:\n  - destination: 0.0.0.0/0\n    next-hop-address: 192.0.2.254\n    next-hop-interface: bond0\n  - destination: ::/0\n    next-hop-address: 2001:db8:1::fffe\n    next-hop-interface: bond0\n\ndns-resolver:\n  config:\n    search:\n    - example.com\n    server:\n    - 192.0.2.200\n    - 2001:db8:1::ffbb\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThese settings define a network bond with the following settings:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tNetwork interfaces in the bond: \u003Ccode class=\"literal\">enp1s0\u003C/code> and \u003Ccode class=\"literal\">enp7s0\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tMode: \u003Ccode class=\"literal\">active-backup\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tStatic IPv4 address: \u003Ccode class=\"literal\">192.0.2.1\u003C/code> with a \u003Ccode class=\"literal\">/24\u003C/code> subnet mask\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tStatic IPv6 address: \u003Ccode class=\"literal\">2001:db8:1::1\u003C/code> with a \u003Ccode class=\"literal\">/64\u003C/code> subnet mask\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIPv4 default gateway: \u003Ccode class=\"literal\">192.0.2.254\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIPv6 default gateway: \u003Ccode class=\"literal\">2001:db8:1::fffe\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIPv4 DNS server: \u003Ccode class=\"literal\">192.0.2.200\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIPv6 DNS server: \u003Ccode class=\"literal\">2001:db8:1::ffbb\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tDNS search domain: \u003Ccode class=\"literal\">example.com\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tApply the settings to the system:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl apply ~/create-bond.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the status of the devices and connections:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device status\u003C/strong>\u003C/span>\nDEVICE      TYPE      STATE      CONNECTION\nbond0       bond      \u003Cspan class=\"strong strong\">\u003Cstrong>connected\u003C/strong>\u003C/span>  bond0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay all settings of the connection profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection show bond0\u003C/strong>\u003C/span>\nconnection.id:              bond0\nconnection.uuid:            79cbc3bd-302e-4b1f-ad89-f12533b818ee\nconnection.stable-id:       --\nconnection.type:            bond\nconnection.interface-name:  bond0\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the connection settings in YAML format:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl show bond0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nmstatectl(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/nmstate/examples/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-network-bond-by-using-network-rhel-system-role_configuring-network-bonding\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.8. Configuring a network bond by using the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can combine network interfaces in a bond to provide a logical interface with higher throughput or redundancy. To configure a bond, create a NetworkManager connection profile. By using Ansible and the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role to configure a network bond and, if a connection profile for the bond’s parent device does not exist, the role can create it as well.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles\">You have prepared the control node and the managed nodes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in to the control node as a user who can run playbooks on the managed nodes.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe account you use to connect to the managed nodes has \u003Ccode class=\"literal\">sudo\u003C/code> permissions on them.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTwo or more physical or virtual network devices are installed on the server.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a playbook file, for example \u003Ccode class=\"literal\">~/playbook.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\n- name: Configure the network\n  hosts: managed-node-01.example.com\n  tasks:\n    - name: Bond connection profile with two Ethernet ports\n      ansible.builtin.include_role:\n        name: rhel-system-roles.network\n      vars:\n        network_connections:\n          # Bond profile\n          - name: bond0\n            type: bond\n            interface_name: bond0\n            ip:\n              dhcp4: yes\n              auto6: yes\n            bond:\n              mode: active-backup\n            state: up\n\n          # Port profile for the 1st Ethernet device\n          - name: bond0-port1\n            interface_name: enp7s0\n            type: ethernet\n            controller: bond0\n            state: up\n\n          # Port profile for the 2nd Ethernet device\n          - name: bond0-port2\n            interface_name: enp8s0\n            type: ethernet\n            controller: bond0\n            state: up\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe settings specified in the example playbook include the following:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">type: \u003Cspan class=\"emphasis\">\u003Cem>&lt;profile_type&gt;\u003C/em>\u003C/span>\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tSets the type of the profile to create. The example playbook creates three connection profiles: One for the bond and two for the Ethernet devices.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">dhcp4: yes\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tEnables automatic IPv4 address assignment from DHCP, PPP, or similar services.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">auto6: yes\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tEnables IPv6 auto-configuration. By default, NetworkManager uses Router Advertisements. If the router announces the \u003Ccode class=\"literal\">managed\u003C/code> flag, NetworkManager requests an IPv6 address and prefix from a DHCPv6 server.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">mode: \u003Cspan class=\"emphasis\">\u003Cem>&lt;bond_mode&gt;\u003C/em>\u003C/span>\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tSets the bonding mode. Possible values are:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">balance-rr\u003C/code> (default)\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">active-backup\u003C/code>\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">balance-xor\u003C/code>\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">broadcast\u003C/code>\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">802.3ad\u003C/code>\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">balance-tlb\u003C/code>\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">balance-alb\u003C/code>.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tDepending on the mode you set, you need to set additional variables in the playbook.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003C/dl>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details about all variables used in the playbook, see the \u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file on the control node.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tValidate the playbook syntax:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --syntax-check ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that this command only validates the syntax and does not protect against a wrong but valid configuration.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the playbook:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTemporarily remove the network cable from one of the network devices and check if the other device in the bond handling the traffic.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that there is no method to properly test link failure events using software utilities. Tools that deactivate connections, such as \u003Ccode class=\"literal\">nmcli\u003C/code>, show only the bonding driver’s ability to handle port configuration changes and not actual link failure events.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/rhel-system-roles/network/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-a-network-bond-to-enable-switching-between-an-ethernet-and-wireless-connection-without-interrupting-the-vpn_configuring-network-bonding\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.9. Creating a network bond to enable switching between an Ethernet and wireless connection without interrupting the VPN\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tRHEL users who connect their workstation to their company’s network typically use a VPN to access remote resources. However, if the workstation switches between an Ethernet and Wi-Fi connection, for example, if you release a laptop from a docking station with an Ethernet connection, the VPN connection is interrupted. To avoid this problem, you can create a network bond that uses the Ethernet and Wi-Fi connection in \u003Ccode class=\"literal\">active-backup\u003C/code> mode.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe host contains an Ethernet and a Wi-Fi device.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAn Ethernet and Wi-Fi NetworkManager connection profile has been created and both connections work independently.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis procedure uses the following connection profiles to create a network bond named \u003Ccode class=\"literal\">bond0\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Docking_station\u003C/code> associated with the \u003Ccode class=\"literal\">enp11s0u1\u003C/code> Ethernet device\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Wi-Fi\u003C/code> associated with the \u003Ccode class=\"literal\">wlp1s0\u003C/code> Wi-Fi device\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a bond interface in \u003Ccode class=\"literal\">active-backup\u003C/code> mode:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type bond con-name bond0 ifname bond0 bond.options \"mode=active-backup\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis command names both the interface and connection profile \u003Ccode class=\"literal\">bond0\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the IPv4 settings of the bond:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIf a DHCP server in your network assigns IPv4 addresses to hosts, no action is required.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf your local network requires static IPv4 addresses, set the address, network mask, default gateway, DNS server, and DNS search domain to the \u003Ccode class=\"literal\">bond0\u003C/code> connection:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond0 ipv4.addresses '\u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1/24\u003C/em>\u003C/span>'\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond0 ipv4.gateway '\u003Cspan class=\"emphasis\">\u003Cem>192.0.2.254\u003C/em>\u003C/span>'\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond0 ipv4.dns '\u003Cspan class=\"emphasis\">\u003Cem>192.0.2.253\u003C/em>\u003C/span>'\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond0 ipv4.dns-search '\u003Cspan class=\"emphasis\">\u003Cem>example.com\u003C/em>\u003C/span>'\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond0 ipv4.method manual\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the IPv6 settings of the bond:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIf your router or a DHCP server in your network assigns IPv6 addresses to hosts, no action is required.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf your local network requires static IPv6 addresses, set the address, network mask, default gateway, DNS server, and DNS search domain to the \u003Ccode class=\"literal\">bond0\u003C/code> connection:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond0 ipv6.addresses '\u003Cspan class=\"emphasis\">\u003Cem>2001:db8:1::1/64\u003C/em>\u003C/span>'\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond0 ipv6.gateway '\u003Cspan class=\"emphasis\">\u003Cem>2001:db8:1::fffe\u003C/em>\u003C/span>'\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond0 ipv6.dns '\u003Cspan class=\"emphasis\">\u003Cem>2001:db8:1::fffd\u003C/em>\u003C/span>'\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond0 ipv6.dns-search '\u003Cspan class=\"emphasis\">\u003Cem>example.com\u003C/em>\u003C/span>'\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond0 ipv6.method manual\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the connection profiles:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection show\u003C/strong>\u003C/span>\nNAME             UUID                                  TYPE      DEVICE\nDocking_station  256dd073-fecc-339d-91ae-9834a00407f9  ethernet  enp11s0u1\nWi-Fi            1f1531c7-8737-4c60-91af-2d21164417e8  wifi      wlp1s0\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou require the names of the connection profiles and the Ethernet device name in the next steps.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAssign the connection profile of the Ethernet connection to the bond:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>Docking_station\u003C/em>\u003C/span> controller bond0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAssign the connection profile of the Wi-Fi connection to the bond:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>Wi-Fi\u003C/em>\u003C/span> controller bond0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf your Wi-Fi network uses MAC filtering to allow only MAC addresses on a allow list to access the network, configure that NetworkManager dynamically assigns the MAC address of the active port to the bond:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond0 +bond.options fail_over_mac=1\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tWith this setting, you must set only the MAC address of the Wi-Fi device to the allow list instead of the MAC address of both the Ethernet and Wi-Fi device.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the device associated with the Ethernet connection as primary device of the bond:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli con modify bond0 +bond.options \"primary=enp11s0u1\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tWith this setting, the bond always uses the Ethernet connection if it is available.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure that NetworkManager automatically activates ports when the \u003Ccode class=\"literal\">bond0\u003C/code> device is activated:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond0 connection.autoconnect-ports 1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tActivate the \u003Ccode class=\"literal\">bond0\u003C/code> connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up bond0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the currently active device, the status of the bond and its ports:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /proc/net/bonding/bond0\u003C/strong>\u003C/span>\nEthernet Channel Bonding Driver: v3.7.1 (April 27, 2011)\n\nBonding Mode: fault-tolerance (active-backup) (fail_over_mac active)\nPrimary Slave: enp11s0u1 (primary_reselect always)\n\u003Cspan class=\"strong strong\">\u003Cstrong>Currently Active Slave: enp11s0u1\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>MII Status: up\u003C/strong>\u003C/span>\nMII Polling Interval (ms): 1\nUp Delay (ms): 0\nDown Delay (ms): 0\nPeer Notification Delay (ms): 0\n\nSlave Interface: enp11s0u1\n\u003Cspan class=\"strong strong\">\u003Cstrong>MII Status: up\u003C/strong>\u003C/span>\nSpeed: 1000 Mbps\nDuplex: full\nLink Failure Count: 0\nPermanent HW addr: 00:53:00:59:da:b7\nSlave queue ID: 0\n\nSlave Interface: wlp1s0\n\u003Cspan class=\"strong strong\">\u003Cstrong>MII Status: up\u003C/strong>\u003C/span>\nSpeed: Unknown\nDuplex: Unknown\nLink Failure Count: 2\nPermanent HW addr: 00:53:00:b3:22:ba\nSlave queue ID: 0\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-an-ethernet-connection_configuring-and-managing-networking\" title=\"Chapter 2. Configuring an Ethernet connection\">Configuring an Ethernet connection\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#assembly_managing-wifi-connections_configuring-and-managing-networking\" title=\"Chapter 11. Managing wifi connections\">Managing Wi-Fi connections\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-network-bonding_configuring-and-managing-networking\" title=\"Chapter 3. Configuring a network bond\">Configuring a network bond\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"the-different-network-bonding-modes_configuring-network-bonding\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.10. The different network bonding modes\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe Linux bonding driver provides link aggregation. Bonding is the process of aggregating multiple network interfaces in parallel to provide a single logical bonded interface. The actions of a bonded interface depend on the bonding policy that is also known as mode. The different modes provide either load-balancing or hot standby services.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe Linux bonding driver supports the following modes:\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Balance-rr (Mode 0)\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Balance-rr\u003C/code> uses the round-robin algorithm that sequentially transmits packets from the first available port to the last one. This mode provides load balancing and fault tolerance.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThis mode requires switch configuration of a port aggregation group, also called EtherChannel or similar port grouping. An EtherChannel is a port link aggregation technology to group multiple physical Ethernet links to one logical Ethernet link.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe drawback of this mode is that it is not suitable for heavy workloads and if TCP throughput or ordered packet delivery is essential.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Active-backup (Mode 1)\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Active-backup\u003C/code> uses the policy that determines that only one port is active in the bond. This mode provides fault tolerance and does not require any switch configuration.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf the active port fails, an alternate port becomes active. The bond sends a gratuitous address resolution protocol (ARP) response to the network. The gratuitous ARP forces the receiver of the ARP frame to update their forwarding table. The \u003Ccode class=\"literal\">Active-backup\u003C/code> mode transmits a gratuitous ARP to announce the new path to maintain connectivity for the host.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">primary\u003C/code> option defines the preferred port of the bonding interface.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Balance-xor (Mode 2)\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Balance-xor\u003C/code> uses the selected transmit hash policy to send the packets. This mode provides load balancing, fault tolerance, and requires switch configuration to set up an Etherchannel or similar port grouping.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo alter packet transmission and balance transmit, this mode uses the \u003Ccode class=\"literal\">xmit_hash_policy\u003C/code> option. Depending on the source or destination of traffic on the interface, the interface requires an additional load-balancing configuration. See description \u003Ca class=\"link\" href=\"#ref_xmit-hash-policy-bonding-parameter_configuring-network-bonding\" title=\"3.11. The xmit_hash_policy bonding parameter\">xmit_hash_policy bonding parameter\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Broadcast (Mode 3)\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Broadcast\u003C/code> uses a policy that transmits every packet on all interfaces. This mode provides fault tolerance and requires a switch configuration to set up an EtherChannel or similar port grouping.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe drawback of this mode is that it is not suitable for heavy workloads and if TCP throughput or ordered packet delivery is essential.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">802.3ad (Mode 4)\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">802.3ad\u003C/code> uses the same-named IEEE standard dynamic link aggregation policy. This mode provides fault tolerance. This mode requires switch configuration to set up a Link Aggregation Control Protocol (LACP) port grouping.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThis mode creates aggregation groups that share the same speed and duplex settings and utilizes all ports in the active aggregator. Depending on the source or destination of traffic on the interface, this mode requires an additional load-balancing configuration.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tBy default, the port selection for outgoing traffic depends on the transmit hash policy. Use the \u003Ccode class=\"literal\">xmit_hash_policy\u003C/code> option of the transmit hash policy to change the port selection and balance transmit.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe difference between the \u003Ccode class=\"literal\">802.3ad\u003C/code> and the \u003Ccode class=\"literal\">Balance-xor\u003C/code> is compliance. The \u003Ccode class=\"literal\">802.3ad\u003C/code> policy negotiates LACP between the port aggregation groups. See description \u003Ca class=\"link\" href=\"#ref_xmit-hash-policy-bonding-parameter_configuring-network-bonding\" title=\"3.11. The xmit_hash_policy bonding parameter\">xmit_hash_policy bonding parameter\u003C/a>\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Balance-tlb (Mode 5)\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Balance-tlb\u003C/code> uses the transmit load balancing policy. This mode provides fault tolerance, load balancing, and establishes channel bonding that does not require any switch support.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe active port receives the incoming traffic. In case of failure of the active port, another one takes over the MAC address of the failed port. To decide which interface processes the outgoing traffic, use one of the following modes:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tValue \u003Ccode class=\"literal\">0\u003C/code>: Uses the hash distribution policy to distribute traffic without load balancing\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tValue \u003Ccode class=\"literal\">1\u003C/code>: Distributes traffic to each port by using load balancing\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tWith the bonding option \u003Ccode class=\"literal\">tlb_dynamic_lb=0\u003C/code>, this bonding mode uses the \u003Ccode class=\"literal\">xmit_hash_policy\u003C/code> bonding option to balance transmit. The \u003Ccode class=\"literal\">primary\u003C/code> option defines the preferred port of the bonding interface.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tSee description \u003Ca class=\"link\" href=\"#ref_xmit-hash-policy-bonding-parameter_configuring-network-bonding\" title=\"3.11. The xmit_hash_policy bonding parameter\">xmit_hash_policy bonding parameter\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Balance-alb (Mode 6)\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Balance-alb\u003C/code> uses an adaptive load balancing policy. This mode provides fault tolerance, load balancing, and does not require any special switch support.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThis mode includes balance-transmit load balancing (\u003Ccode class=\"literal\">balance-tlb\u003C/code>) and receive-load balancing for IPv4 and IPv6 traffic. The bonding intercepts ARP replies sent by the local system and overwrites the source hardware address of one of the ports in the bond. ARP negotiation manages the receive-load balancing. Therefore, different ports use different hardware addresses for the server.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">primary\u003C/code> option defines the preferred port of the bonding interface. With the bonding option \u003Ccode class=\"literal\">tlb_dynamic_lb=0\u003C/code>, this bonding mode uses the \u003Ccode class=\"literal\">xmit_hash_policy\u003C/code> bonding option to balance transmit. See description \u003Ca class=\"link\" href=\"#ref_xmit-hash-policy-bonding-parameter_configuring-network-bonding\" title=\"3.11. The xmit_hash_policy bonding parameter\">xmit_hash_policy bonding parameter\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003C/dl>\u003C/div>\u003Cp>\n\t\t\t\tAdditionally, you can use NetworkManager to configure the following mode:\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Balance-slb\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe source load balancing (SLB) bonding mode distributes outgoing data streams across multiple network interfaces based on the source address of the traffic and a VLAN hash. This mode does not require any switch configuration.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tNetworkManager uses the \u003Ccode class=\"literal\">balance-xor\u003C/code> mode in combination with \u003Ccode class=\"literal\">nftables\u003C/code> rules to provide SLB. For details about configuring this mode, see \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/7094905\">Configuring a network bond on RHEL with source load balancing\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/kernel-doc-&lt;\u003Cspan class=\"emphasis\">\u003Cem>version\u003C/em>\u003C/span>&gt;/Documentation/networking/bonding.rst\u003C/code> provided by the \u003Ccode class=\"literal\">kernel-doc\u003C/code> package\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/kernel-doc-&lt;\u003Cspan class=\"emphasis\">\u003Cem>version\u003C/em>\u003C/span>&gt;/Documentation/networking/bonding.txt\u003C/code> provided by the \u003Ccode class=\"literal\">kernel-doc\u003C/code> package\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/67546\">Which bonding modes work when used with a bridge that virtual machine guests or containers connect to?\u003C/a> (Red Hat Knowledgebase)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/71883\">How are the values for different policies in \"xmit_hash_policy\" bonding parameter calculated?\u003C/a> (Red Hat Knowledgebase)\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"ref_xmit-hash-policy-bonding-parameter_configuring-network-bonding\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.11. The xmit_hash_policy bonding parameter\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">xmit_hash_policy\u003C/code> load balancing parameter selects the transmit hash policy for a node selection in the \u003Ccode class=\"literal\">balance-xor\u003C/code>, \u003Ccode class=\"literal\">802.3ad\u003C/code>, \u003Ccode class=\"literal\">balance-alb\u003C/code>, and \u003Ccode class=\"literal\">balance-tlb\u003C/code> modes. It is only applicable to mode 5 and 6 if the \u003Ccode class=\"literal\">tlb_dynamic_lb parameter is 0\u003C/code>. The possible values of this parameter are \u003Ccode class=\"literal\">layer2\u003C/code>, \u003Ccode class=\"literal\">layer2+3\u003C/code>, \u003Ccode class=\"literal\">layer3+4\u003C/code>, \u003Ccode class=\"literal\">encap2+3\u003C/code>, \u003Ccode class=\"literal\">encap3+4\u003C/code>, and \u003Ccode class=\"literal\">vlan+srcmac\u003C/code>.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tRefer the table for details:\n\t\t\t\u003C/p>\u003Crh-table>\u003Ctable class=\"gt-4-cols lt-7-rows\">\u003Ccolgroup>\u003Ccol style=\"width: 14%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 14%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 14%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 14%; \" class=\"col_4\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 14%; \" class=\"col_5\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 14%; \" class=\"col_6\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 14%; \" class=\"col_7\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Policy or Network layers\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Layer2\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Layer2+3\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Layer3+4\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>encap2+3\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>encap3+4\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>VLAN+srcmac\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Uses\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\tXOR of source and destination MAC addresses and Ethernet protocol type\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\tXOR of source and destination MAC addresses and IP addresses\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\tXOR of source and destination ports and IP addresses\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\tXOR of source and destination MAC addresses and IP addresses inside a supported tunnel, for example, Virtual Extensible LAN (VXLAN). This mode relies on \u003Ccode class=\"literal\">skb_flow_dissect()\u003C/code> function to obtain the header fields\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\tXOR of source and destination ports and IP addresses inside a supported tunnel, for example, VXLAN. This mode relies on \u003Ccode class=\"literal\">skb_flow_dissect()\u003C/code> function to obtain the header fields\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\tXOR of VLAN ID and source MAC vendor and source MAC device\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Placement of traffic\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\tAll traffic to a particular network peer on the same underlying network interface\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\tAll traffic to a particular IP address on the same underlying network interface\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\tAll traffic to a particular IP address and port on the same underlying network interface\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Primary choice\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\tIf network traffic is between this system and multiple other systems in the same broadcast domain\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\tIf network traffic between this system and multiple other systems goes through a default gateway\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\tIf network traffic between this system and another system uses the same IP addresses but goes through multiple ports\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe encapsulated traffic is between the source system and multiple other systems using multiple IP addresses\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe encapsulated traffic is between the source system and other systems using multiple port numbers\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\tIf the bond carries network traffic, from multiple containers or virtual machines (VM), that expose their MAC address directly to the external network such as the bridge network, and you can not configure a switch for Mode 2 or Mode 4\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Secondary choice\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\tIf network traffic is mostly between this system and multiple other systems behind a default gateway\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\tIf network traffic is mostly between this system and another system\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Compliant\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t802.3ad\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t802.3ad\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\tNot 802.3ad\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Default policy\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\tThis is the default policy if no configuration is provided\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\tFor non-IP traffic, the formula is the same as for the \u003Ccode class=\"literal\">layer2\u003C/code> transmit policy\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\tFor non-IP traffic, the formula is the same as for the \u003Ccode class=\"literal\">layer2\u003C/code> transmit policy\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-network-teaming_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 4. Configuring a NIC team\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tNetwork interface controller (NIC) teaming is a method to combine or aggregate physical and virtual network interfaces to provide a logical interface with higher throughput or redundancy. NIC teaming uses a small kernel module to implement fast handling of packet flows and a user-space service for other tasks. This way, NIC teaming is an easily extensible and scalable solution for load-balancing and redundancy requirements.\n\t\t\u003C/p>\u003Cp>\n\t\t\tRed Hat Enterprise Linux provides administrators different options to configure team devices. For example:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tUse \u003Ccode class=\"literal\">nmcli\u003C/code> to configure teams connections using the command line.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tUse the RHEL web console to configure team connections using a web browser.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tUse the \u003Ccode class=\"literal\">nm-connection-editor\u003C/code> application to configure team connections in a graphical interface.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tNIC teaming is deprecated in Red Hat Enterprise Linux 9. Consider using the network bonding driver as an alternative. For details, see \u003Ca class=\"link\" href=\"#configuring-network-bonding_configuring-and-managing-networking\" title=\"Chapter 3. Configuring a network bond\">Configuring a network bond\u003C/a>.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"proc_migrating-a-network-team-configuration-to-network-bond_configuring-network-teaming\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">4.1. Migrating a NIC team configuration to network bond\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tNetwork interface controller (NIC) teaming is deprecated in Red Hat Enterprise Linux 9. If you already have a working NIC team configured, for example because you upgraded from an earlier RHEL version, you can migrate the configuration to a network bond that is managed by NetworkManager.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe \u003Ccode class=\"literal\">team2bond\u003C/code> utility only converts the team configuration to a bond. Afterwards, you must manually configure further settings of the bond, such as IP addresses and DNS configuration.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">team-team0\u003C/code> NetworkManager connection profile is configured and manages the \u003Ccode class=\"literal\">team0\u003C/code> device.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">teamd\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Display the IP configuration of the \u003Ccode class=\"literal\">team-team0\u003C/code> NetworkManager connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection show \u003Cspan class=\"emphasis\">\u003Cem>team-team0\u003C/em>\u003C/span> | egrep \"^ip\"\u003C/strong>\u003C/span>\n...\nipv4.method:                            manual\nipv4.dns:                               192.0.2.253\nipv4.dns-search:                        example.com\nipv4.addresses:                         192.0.2.1/24\nipv4.gateway:                           192.0.2.254\n...\nipv6.method:                            manual\nipv6.dns:                               2001:db8:1::fffd\nipv6.dns-search:                        example.com\nipv6.addresses:                         2001:db8:1::1/64\nipv6.gateway:                           2001:db8:1::fffe\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tExport the configuration of the \u003Ccode class=\"literal\">team0\u003C/code> device to a JSON file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>teamdctl \u003Cspan class=\"emphasis\">\u003Cem>team0\u003C/em>\u003C/span> config dump actual &gt; \u003Cspan class=\"emphasis\">\u003Cem>/tmp/team0.json\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRemove the NIC team. For example, if you configured the team in NetworkManager, remove the \u003Ccode class=\"literal\">team-team0\u003C/code> connection profile and the profiles of associated ports:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection delete \u003Cspan class=\"emphasis\">\u003Cem>team-team0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection delete \u003Cspan class=\"emphasis\">\u003Cem>team-team0-port1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection delete \u003Cspan class=\"emphasis\">\u003Cem>team-team0-port2\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the \u003Ccode class=\"literal\">team2bond\u003C/code> utility in dry-run mode to display \u003Ccode class=\"literal\">nmcli\u003C/code> commands that set up a network bond with similar settings as the team device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>team2bond --config=\u003Cspan class=\"emphasis\">\u003Cem>/tmp/team0.json\u003C/em>\u003C/span> --rename=\u003Cspan class=\"emphasis\">\u003Cem>bond0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nnmcli con add type bond ifname \u003Cspan class=\"emphasis\">\u003Cem>bond0\u003C/em>\u003C/span> bond.options \"\u003Cspan class=\"emphasis\">\u003Cem>mode=active-backup,num_grat_arp=1,num_unsol_na=1,resend_igmp=1,miimon=100,miimon=100\u003C/em>\u003C/span>\"\nnmcli con add type ethernet ifname \u003Cspan class=\"emphasis\">\u003Cem>enp7s0\u003C/em>\u003C/span> controller \u003Cspan class=\"emphasis\">\u003Cem>bond0\u003C/em>\u003C/span>\nnmcli con add type ethernet ifname \u003Cspan class=\"emphasis\">\u003Cem>enp8s0\u003C/em>\u003C/span> controller \u003Cspan class=\"emphasis\">\u003Cem>bond0\u003C/em>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe first command contains two \u003Ccode class=\"literal\">miimon\u003C/code> options because the team configuration file contained two \u003Ccode class=\"literal\">link_watch\u003C/code> entries. Note that this does not affect the creation of the bond.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you bound services to the device name of the team and want to avoid updating or breaking these services, omit the \u003Ccode class=\"literal\">--rename=bond0\u003C/code> option. In this case, \u003Ccode class=\"literal\">team2bond\u003C/code> uses the same interface name for the bond as for the team.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tVerify that the options for the bond the \u003Ccode class=\"literal\">team2bond\u003C/code> utility suggested are correct.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the bond. You can execute the suggested \u003Ccode class=\"literal\">nmcli\u003C/code> commands or re-run the \u003Ccode class=\"literal\">team2bond\u003C/code> command with the \u003Ccode class=\"literal\">--exec-cmd\u003C/code> option:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>team2bond --config=\u003Cspan class=\"emphasis\">\u003Cem>/tmp/team0.json\u003C/em>\u003C/span> --rename=\u003Cspan class=\"emphasis\">\u003Cem>bond0\u003C/em>\u003C/span> --exec-cmd\u003C/strong>\u003C/span>\nConnection '\u003Cspan class=\"strong strong\">\u003Cstrong>\u003Cspan class=\"emphasis\">\u003Cem>bond-bond0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>' (\u003Cspan class=\"emphasis\">\u003Cem>0241a531-0c72-4202-80df-73eadfc126b5\u003C/em>\u003C/span>) successfully added.\nConnection '\u003Cspan class=\"emphasis\">\u003Cem>bond-port-enp7s0\u003C/em>\u003C/span>' (\u003Cspan class=\"emphasis\">\u003Cem>38489729-b624-4606-a784-1ccf01e2f6d6\u003C/em>\u003C/span>) successfully added.\nConnection '\u003Cspan class=\"emphasis\">\u003Cem>bond-port-enp8s0\u003C/em>\u003C/span>' (\u003Cspan class=\"emphasis\">\u003Cem>de97ec06-7daa-4298-9a71-9d4c7909daa1\u003C/em>\u003C/span>) successfully added.\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou require the name of the bond connection profile (\u003Ccode class=\"literal\">bond-bond0\u003C/code>) in the next steps.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the IPv4 settings that were previously configured on \u003Ccode class=\"literal\">team-team0\u003C/code> to the \u003Ccode class=\"literal\">bond-bond0\u003C/code> connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond-bond0 ipv4.addresses '\u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1/24\u003C/em>\u003C/span>'\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond-bond0 ipv4.gateway '\u003Cspan class=\"emphasis\">\u003Cem>192.0.2.254\u003C/em>\u003C/span>'\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond-bond0 ipv4.dns '\u003Cspan class=\"emphasis\">\u003Cem>192.0.2.253\u003C/em>\u003C/span>'\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond-bond0 ipv4.dns-search '\u003Cspan class=\"emphasis\">\u003Cem>example.com\u003C/em>\u003C/span>'\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond-bond0 ipv4.method \u003Cspan class=\"emphasis\">\u003Cem>manual\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the IPv6 settings that were previously configured on \u003Ccode class=\"literal\">team-team0\u003C/code> to the \u003Ccode class=\"literal\">bond-bond0\u003C/code> connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond-bond0 ipv6.addresses '\u003Cspan class=\"emphasis\">\u003Cem>2001:db8:1::1/64\u003C/em>\u003C/span>'\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond-bond0 ipv6.gateway '\u003Cspan class=\"emphasis\">\u003Cem>2001:db8:1::fffe\u003C/em>\u003C/span>'\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond-bond0 ipv6.dns '\u003Cspan class=\"emphasis\">\u003Cem>2001:db8:1::fffd\u003C/em>\u003C/span>'\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond-bond0 ipv6.dns-search '\u003Cspan class=\"emphasis\">\u003Cem>example.com\u003C/em>\u003C/span>'\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond-bond0 ipv6.method \u003Cspan class=\"emphasis\">\u003Cem>manual\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tActivate the connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>bond-bond0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IP configuration of the \u003Ccode class=\"literal\">bond-bond0\u003C/code> NetworkManager connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection show \u003Cspan class=\"emphasis\">\u003Cem>bond-bond0\u003C/em>\u003C/span> | egrep \"^ip\"\u003C/strong>\u003C/span>\n...\nipv4.method:                            manual\nipv4.dns:                               192.0.2.253\nipv4.dns-search:                        example.com\nipv4.addresses:                         192.0.2.1/24\nipv4.gateway:                           192.0.2.254\n...\nipv6.method:                            manual\nipv6.dns:                               2001:db8:1::fffd\nipv6.dns-search:                        example.com\nipv6.addresses:                         2001:db8:1::1/64\nipv6.gateway:                           2001:db8:1::fffe\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the status of the bond:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /proc/net/bonding/bond0\u003C/strong>\u003C/span>\nEthernet Channel Bonding Driver: v5.13.0-0.rc7.51.el9.x86_64\n\nBonding Mode: fault-tolerance (active-backup)\nPrimary Slave: None\nCurrently Active Slave: enp7s0\nMII Status: up\nMII Polling Interval (ms): 100\nUp Delay (ms): 0\nDown Delay (ms): 0\nPeer Notification Delay (ms): 0\n\nSlave Interface: enp7s0\nMII Status: up\nSpeed: Unknown\nDuplex: Unknown\nLink Failure Count: 0\nPermanent HW addr: 52:54:00:bf:b1:a9\nSlave queue ID: 0\n\nSlave Interface: enp8s0\nMII Status: up\nSpeed: Unknown\nDuplex: Unknown\nLink Failure Count: 0\nPermanent HW addr: 52:54:00:04:36:0f\nSlave queue ID: 0\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn this example, both ports are up.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo verify that bonding failover works:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTemporarily remove the network cable from the host. Note that there is no method to properly test link failure events using the command line.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tDisplay the status of the bond:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /proc/net/bonding/\u003Cspan class=\"emphasis\">\u003Cem>bond0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"understanding-the-default-behavior-of-controller-and-port-interfaces_configuring-network-teaming\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">4.2. Understanding the default behavior of controller and port interfaces\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tConsider the following default behavior when managing or troubleshooting team or bond port interfaces using the \u003Ccode class=\"literal\">NetworkManager\u003C/code> service:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStarting the controller interface does not automatically start the port interfaces.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStarting a port interface always starts the controller interface.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStopping the controller interface also stops the port interface.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA controller without ports can start static IP connections.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA controller without ports waits for ports when starting DHCP connections.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA controller with a DHCP connection waiting for ports completes when you add a port with a carrier.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA controller with a DHCP connection waiting for ports continues waiting when you add a port without carrier.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"understanding-the-teamd-service-runners-and-link-watchers_configuring-network-teaming\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">4.3. Understanding the teamd service, runners, and link-watchers\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe team service, \u003Ccode class=\"literal\">teamd\u003C/code>, controls one instance of the team driver. This instance of the driver adds instances of a hardware device driver to form a team of network interfaces. The team driver presents a network interface, for example \u003Ccode class=\"literal\">team0\u003C/code>, to the kernel.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">teamd\u003C/code> service implements the common logic to all methods of teaming. Those functions are unique to the different load sharing and backup methods, such as round-robin, and implemented by separate units of code referred to as \u003Ccode class=\"literal\">runners\u003C/code>. Administrators specify runners in JavaScript Object Notation (JSON) format, and the JSON code is compiled into an instance of \u003Ccode class=\"literal\">teamd\u003C/code> when the instance is created. Alternatively, when using \u003Ccode class=\"literal\">NetworkManager\u003C/code>, you can set the runner in the \u003Ccode class=\"literal\">team.runner\u003C/code> parameter, and \u003Ccode class=\"literal\">NetworkManager\u003C/code> auto-creates the corresponding JSON code.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe following runners are available:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">broadcast\u003C/code>: Transmits data over all ports.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">roundrobin\u003C/code>: Transmits data over all ports in turn.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">activebackup\u003C/code>: Transmits data over one port while the others are kept as a backup.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">loadbalance\u003C/code>: Transmits data over all ports with active Tx load balancing and Berkeley Packet Filter (BPF)-based Tx port selectors.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">random\u003C/code>: Transmits data on a randomly selected port.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">lacp\u003C/code>: Implements the 802.3ad Link Aggregation Control Protocol (LACP).\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">teamd\u003C/code> services uses a link watcher to monitor the state of subordinate devices. The following link-watchers are available:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">ethtool\u003C/code>: The \u003Ccode class=\"literal\">libteam\u003C/code> library uses the \u003Ccode class=\"literal\">ethtool\u003C/code> utility to watch for link state changes. This is the default link-watcher.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">arp_ping\u003C/code>: The \u003Ccode class=\"literal\">libteam\u003C/code> library uses the \u003Ccode class=\"literal\">arp_ping\u003C/code> utility to monitor the presence of a far-end hardware address using Address Resolution Protocol (ARP).\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nsna_ping\u003C/code>: On IPv6 connections, the \u003Ccode class=\"literal\">libteam\u003C/code> library uses the Neighbor Advertisement and Neighbor Solicitation features from the IPv6 Neighbor Discovery protocol to monitor the presence of a neighbor’s interface.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tEach runner can use any link watcher, with the exception of \u003Ccode class=\"literal\">lacp\u003C/code>. This runner can only use the \u003Ccode class=\"literal\">ethtool\u003C/code> link watcher.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-network-team-by-using-nmcli_configuring-network-teaming\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">4.4. Configuring a NIC team by using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo configure a network interface controller (NIC) team on the command line, use the \u003Ccode class=\"literal\">nmcli\u003C/code> utility.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tNIC teaming is deprecated in Red Hat Enterprise Linux 9. Consider using the network bonding driver as an alternative. For details, see \u003Ca class=\"link\" href=\"#configuring-network-bonding_configuring-and-managing-networking\" title=\"Chapter 3. Configuring a network bond\">Configuring a network bond\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">teamd\u003C/code> and \u003Ccode class=\"literal\">NetworkManager-team\u003C/code> packages are installed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTwo or more physical or virtual network devices are installed on the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo use Ethernet devices as ports of the team, the physical or virtual Ethernet devices must be installed on the server and connected to a switch.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo use bond, bridge, or VLAN devices as ports of the team, you can either create these devices while you create the team or you can create them in advance as described in:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-a-network-bond-by-using-nmcli_configuring-network-bonding\" title=\"3.3. Configuring a network bond by using nmcli\">Configuring a network bond by using nmcli\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-a-network-bridge-by-using-nmcli_configuring-a-network-bridge\" title=\"6.1. Configuring a network bridge by using nmcli\">Configuring a network bridge by using nmcli\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-vlan-tagging-by-using-nmcli_configuring-vlan-tagging\" title=\"5.1. Configuring VLAN tagging by using nmcli\">Configuring VLAN tagging by using nmcli\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a team interface:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type team con-name \u003Cspan class=\"emphasis\">\u003Cem>team0\u003C/em>\u003C/span> ifname \u003Cspan class=\"emphasis\">\u003Cem>team0\u003C/em>\u003C/span> team.runner \u003Cspan class=\"emphasis\">\u003Cem>activebackup\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis command creates a NIC team named \u003Ccode class=\"literal\">team0\u003C/code> that uses the \u003Ccode class=\"literal\">activebackup\u003C/code> runner.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Set a link watcher. For example, to set the \u003Ccode class=\"literal\">ethtool\u003C/code> link watcher in the \u003Ccode class=\"literal\">team0\u003C/code> connection profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify team0 team.link-watchers \"name=\u003Cspan class=\"emphasis\">\u003Cem>ethtool\u003C/em>\u003C/span>\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLink watchers support different parameters. To set parameters for a link watcher, specify them space-separated in the \u003Ccode class=\"literal\">name\u003C/code> property. Note that the name property must be surrounded by quotation marks. For example, to use the \u003Ccode class=\"literal\">ethtool\u003C/code> link watcher and set its \u003Ccode class=\"literal\">delay-up\u003C/code> parameter to \u003Ccode class=\"literal\">2500\u003C/code> milliseconds (2.5 seconds):\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify team0 team.link-watchers \"name=\u003Cspan class=\"emphasis\">\u003Cem>ethtool\u003C/em>\u003C/span> delay-up=\u003Cspan class=\"emphasis\">\u003Cem>2500\u003C/em>\u003C/span>\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo set multiple link watchers and each of them with specific parameters, the link watchers must be separated by a comma. The following example sets the \u003Ccode class=\"literal\">ethtool\u003C/code> link watcher with the \u003Ccode class=\"literal\">delay-up\u003C/code> parameter and the \u003Ccode class=\"literal\">arp_ping\u003C/code> link watcher with the \u003Ccode class=\"literal\">source-host\u003C/code> and \u003Ccode class=\"literal\">target-host\u003C/code> parameter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify team0 team.link-watchers \"name=\u003Cspan class=\"emphasis\">\u003Cem>ethtool\u003C/em>\u003C/span> delay-up=\u003Cspan class=\"emphasis\">\u003Cem>2\u003C/em>\u003C/span>, name=\u003Cspan class=\"emphasis\">\u003Cem>arp_ping\u003C/em>\u003C/span> source-host=\u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1\u003C/em>\u003C/span> target-host=\u003Cspan class=\"emphasis\">\u003Cem>192.0.2.2\u003C/em>\u003C/span>\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the network interfaces, and note the names of the interfaces you want to add to the team:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device status\u003C/strong>\u003C/span>\nDEVICE  TYPE      STATE         CONNECTION\nenp7s0  ethernet  disconnected  --\nenp8s0  ethernet  disconnected  --\nbond0   bond      connected  bond0\nbond1   bond      connected  bond1\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn this example:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">enp7s0\u003C/code> and \u003Ccode class=\"literal\">enp8s0\u003C/code> are not configured. To use these devices as ports, add connection profiles in the next step. Note that you can only use Ethernet interfaces in a team that are not assigned to any connection.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">bond0\u003C/code> and \u003Ccode class=\"literal\">bond1\u003C/code> have existing connection profiles. To use these devices as ports, modify their profiles in the next step.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAssign the port interfaces to the team:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf the interfaces you want to assign to the team are not configured, create new connection profiles for them:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ethernet port-type team con-name team0-port1 ifname enp7s0 controller team0\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ethernet port--type team con-name team0-port2 ifname enp8s0 controller team0\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThese commands create profiles for \u003Ccode class=\"literal\">enp7s0\u003C/code> and \u003Ccode class=\"literal\">enp8s0\u003C/code>, and add them to the \u003Ccode class=\"literal\">team0\u003C/code> connection.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo assign an existing connection profile to the team:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tSet the \u003Ccode class=\"literal\">controller\u003C/code> parameter of these connections to \u003Ccode class=\"literal\">team0\u003C/code>:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>bond0\u003C/em>\u003C/span> controller team0\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>bond1\u003C/em>\u003C/span> controller team0\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tThese commands assign the existing connection profiles named \u003Ccode class=\"literal\">bond0\u003C/code> and \u003Ccode class=\"literal\">bond1\u003C/code> to the \u003Ccode class=\"literal\">team0\u003C/code> connection.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tReactivate the connections:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>bond0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>bond1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the IPv4 settings:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo use this team device as a port of other devices, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify team0 ipv4.method disabled\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo use DHCP, no action is required.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo set a static IPv4 address, network mask, default gateway, and DNS server to the \u003Ccode class=\"literal\">team0\u003C/code> connection, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify team0 ipv4.addresses '\u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1/24\u003C/em>\u003C/span>' ipv4.gateway '\u003Cspan class=\"emphasis\">\u003Cem>192.0.2.254\u003C/em>\u003C/span>' ipv4.dns '\u003Cspan class=\"emphasis\">\u003Cem>192.0.2.253\u003C/em>\u003C/span>' ipv4.dns-search '\u003Cspan class=\"emphasis\">\u003Cem>example.com\u003C/em>\u003C/span>' ipv4.method manual\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the IPv6 settings:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo use this team device as a port of other devices, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify team0 ipv6.method disabled\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo use stateless address autoconfiguration (SLAAC), no action is required.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo set a static IPv6 address, network mask, default gateway, and DNS server to the \u003Ccode class=\"literal\">team0\u003C/code> connection, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify team0 ipv6.addresses '\u003Cspan class=\"emphasis\">\u003Cem>2001:db8:1::1/64\u003C/em>\u003C/span>' ipv6.gateway '\u003Cspan class=\"emphasis\">\u003Cem>2001:db8:1::fffe\u003C/em>\u003C/span>' ipv6.dns '\u003Cspan class=\"emphasis\">\u003Cem>2001:db8:1::fffd\u003C/em>\u003C/span>' ipv6.dns-search '\u003Cspan class=\"emphasis\">\u003Cem>example.com\u003C/em>\u003C/span>' ipv6.method manual\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tActivate the connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up team0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the status of the team:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>teamdctl team0 state\u003C/strong>\u003C/span>\nsetup:\n  runner: activebackup\nports:\n  enp7s0\n    link watches:\n      link summary: up\n      instance[link_watch_0]:\n        name: ethtool\n        link: up\n        down count: 0\n  enp8s0\n    link watches:\n      link summary: up\n      instance[link_watch_0]:\n        name: ethtool\n        link: up\n        down count: 0\nrunner:\n  active port: enp7s0\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn this example, both ports are up.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_configuring-networkmanager-to-avoid-using-a-specific-profile-to-provide-a-default-gateway_managing-the-default-gateway-setting\" title=\"25.8. Configuring NetworkManager to avoid using a specific profile to provide a default gateway\">Configuring NetworkManager to avoid using a specific profile to provide a default gateway\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#understanding-the-teamd-service-runners-and-link-watchers_configuring-network-teaming\" title=\"4.3. Understanding the teamd service, runners, and link-watchers\">Understanding the teamd service, runners, and link-watchers\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings(5)\u003C/code> and \u003Ccode class=\"literal\">teamd.conf(5)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-network-team-by-using-the-rhel-web-console_configuring-network-teaming\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">4.5. Configuring a NIC team by using the RHEL web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tUse the RHEL web console to configure a network interface controller (NIC) team if you prefer to manage network settings using a web browser-based interface.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tNIC teaming is deprecated in Red Hat Enterprise Linux 9. Consider using the network bonding driver as an alternative. For details, see \u003Ca class=\"link\" href=\"#configuring-network-bonding_configuring-and-managing-networking\" title=\"Chapter 3. Configuring a network bond\">Configuring a network bond\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">teamd\u003C/code> and \u003Ccode class=\"literal\">NetworkManager-team\u003C/code> packages are installed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTwo or more physical or virtual network devices are installed on the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo use Ethernet devices as ports of the team, the physical or virtual Ethernet devices must be installed on the server and connected to a switch.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo use bond, bridge, or VLAN devices as ports of the team, create them in advance as described in:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_configuring-a-network-bond-by-using-the-rhel-web-console_configuring-network-bonding\" title=\"3.4. Configuring a network bond by using the RHEL web console\">Configuring a network bond by using the RHEL web console\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_configuring-a-network-bridge-by-using-the-rhel-web-console_configuring-a-network-bridge\" title=\"6.2. Configuring a network bridge by using the RHEL web console\">Configuring a network bridge by using the RHEL web console\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_configuring-vlan-tagging-by-using-the-rhel-web-console_configuring-vlan-tagging\" title=\"5.3. Configuring VLAN tagging by using the RHEL web console\">Configuring VLAN tagging by using the RHEL web console\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the \u003Ccode class=\"literal\">Networking\u003C/code> tab in the navigation on the left side of the screen.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Add team\u003C/span> in the \u003Ccode class=\"literal\">Interfaces\u003C/code> section.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnter the name of the team device you want to create.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the interfaces that should be ports of the team.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSelect the runner of the team.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you select \u003Ccode class=\"literal\">Load balancing\u003C/code> or \u003Ccode class=\"literal\">802.3ad LACP\u003C/code>, the web console shows the additional field \u003Ccode class=\"literal\">Balancer\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the link watcher:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIf you select \u003Ccode class=\"literal\">Ethtool\u003C/code>, additionally, set a link up and link down delay.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIf you set \u003Ccode class=\"literal\">ARP ping\u003C/code> or \u003Ccode class=\"literal\">NSNA ping\u003C/code>, additionally, set a ping interval and ping target.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/40261fab9f753389526117eb22339366/team-settings.png\" alt=\"team settings\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Apply\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tBy default, the team uses a dynamic IP address. If you want to set a static IP address:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick the name of the team in the \u003Ccode class=\"literal\">Interfaces\u003C/code> section.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick \u003Ccode class=\"literal\">Edit\u003C/code> next to the protocol you want to configure.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSelect \u003Ccode class=\"literal\">Manual\u003C/code> next to \u003Ccode class=\"literal\">Addresses\u003C/code>, and enter the IP address, prefix, and default gateway.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIn the \u003Ccode class=\"literal\">DNS\u003C/code> section, click the \u003Cspan class=\"guibutton\">+\u003C/span> button, and enter the IP address of the DNS server. Repeat this step to set multiple DNS servers.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIn the \u003Ccode class=\"literal\">DNS search domains\u003C/code> section, click the \u003Cspan class=\"guibutton\">+\u003C/span> button, and enter the search domain.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf the interface requires static routes, configure them in the \u003Ccode class=\"literal\">Routes\u003C/code> section.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/7994cde2fafedf1c5a1436807dc34096/bond-team-bridge-vlan.ipv4.png\" alt=\"bond team bridge vlan.ipv4\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Apply\u003C/span>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSelect the \u003Ccode class=\"literal\">Networking\u003C/code> tab in the navigation on the left side of the screen, and check if there is incoming and outgoing traffic on the interface.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/9d0d1abde2e82451bdadc815e6e9e8d8/team-verify.png\" alt=\"team verify\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the status of the team:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>teamdctl team0 state\u003C/strong>\u003C/span>\nsetup:\n  runner: activebackup\nports:\n  enp7s0\n    link watches:\n      link summary: up\n      instance[link_watch_0]:\n        name: ethtool\n        link: up\n        down count: 0\n  enp8s0\n    link watches:\n      link summary: up\n      instance[link_watch_0]:\n        name: ethtool\n        link: up\n        down count: 0\nrunner:\n  active port: enp7s0\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn this example, both ports are up.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#understanding-the-teamd-service-runners-and-link-watchers_configuring-network-teaming\" title=\"4.3. Understanding the teamd service, runners, and link-watchers\">Understanding the teamd service, runners, and link-watchers\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-network-team-by-using-nm-connection-editor_configuring-network-teaming\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">4.6. Configuring a NIC team by using nm-connection-editor\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIf you use Red Hat Enterprise Linux with a graphical interface, you can configure network interface controller (NIC) teams using the \u003Ccode class=\"literal\">nm-connection-editor\u003C/code> application.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tNote that \u003Ccode class=\"literal\">nm-connection-editor\u003C/code> can add only new ports to a team. To use an existing connection profile as a port, create the team using the \u003Ccode class=\"literal\">nmcli\u003C/code> utility as described in \u003Ca class=\"link\" href=\"#configuring-a-network-team-by-using-nmcli_configuring-network-teaming\" title=\"4.4. Configuring a NIC team by using nmcli\">Configuring a NIC team by using nmcli\u003C/a>.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tNIC teaming is deprecated in Red Hat Enterprise Linux 9. Consider using the network bonding driver as an alternative. For details, see \u003Ca class=\"link\" href=\"#configuring-network-bonding_configuring-and-managing-networking\" title=\"Chapter 3. Configuring a network bond\">Configuring a network bond\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">teamd\u003C/code> and \u003Ccode class=\"literal\">NetworkManager-team\u003C/code> packages are installed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTwo or more physical or virtual network devices are installed on the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo use Ethernet devices as ports of the team, the physical or virtual Ethernet devices must be installed on the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo use team, bond, or VLAN devices as ports of the team, ensure that these devices are not already configured.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen a terminal, and enter \u003Ccode class=\"literal\">nm-connection-editor\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>nm-connection-editor\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick the \u003Cspan class=\"guibutton\">+\u003C/span> button to add a new connection.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the \u003Cspan class=\"strong strong\">\u003Cstrong>Team\u003C/strong>\u003C/span> connection type, and click \u003Cspan class=\"guibutton\">Create\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the \u003Cspan class=\"strong strong\">\u003Cstrong>Team\u003C/strong>\u003C/span> tab:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOptional: Set the name of the team interface in the \u003Cspan class=\"strong strong\">\u003Cstrong>Interface name\u003C/strong>\u003C/span> field.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tClick the \u003Cspan class=\"guibutton\">Add\u003C/span> button to add a new connection profile for a network interface and adding the profile as a port to the team.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tSelect the connection type of the interface. For example, select \u003Cspan class=\"strong strong\">\u003Cstrong>Ethernet\u003C/strong>\u003C/span> for a wired connection.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tOptional: Set a connection name for the port.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tIf you create a connection profile for an Ethernet device, open the \u003Cspan class=\"strong strong\">\u003Cstrong>Ethernet\u003C/strong>\u003C/span> tab, and select in the \u003Cspan class=\"strong strong\">\u003Cstrong>Device\u003C/strong>\u003C/span> field the network interface you want to add as a port to the team. If you selected a different device type, configure it accordingly. Note that you can only use Ethernet interfaces in a team that are not assigned to any connection.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Save\u003C/span>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRepeat the previous step for each interface you want to add to the team.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"inlinemediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/4b65ed717fe654b2b157a42b495db63a/add-nic-to-team-in-nm-connection-editor.png\" alt=\"add nic to team in nm connection editor\"/>\u003C/span>\n\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tClick the \u003Cspan class=\"guibutton\">Advanced\u003C/span> button to set advanced options to the team connection.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tOn the \u003Cspan class=\"strong strong\">\u003Cstrong>Runner\u003C/strong>\u003C/span> tab, select the runner.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tOn the \u003Cspan class=\"strong strong\">\u003Cstrong>Link Watcher\u003C/strong>\u003C/span> tab, set the link watcher and its optional settings.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">OK\u003C/span>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the IP address settings on both the \u003Cspan class=\"strong strong\">\u003Cstrong>IPv4 Settings\u003C/strong>\u003C/span> and \u003Cspan class=\"strong strong\">\u003Cstrong>IPv6 Settings\u003C/strong>\u003C/span> tabs:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo use this bridge device as a port of other devices, set the \u003Cspan class=\"strong strong\">\u003Cstrong>Method\u003C/strong>\u003C/span> field to \u003Cspan class=\"strong strong\">\u003Cstrong>Disabled\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo use DHCP, leave the \u003Cspan class=\"strong strong\">\u003Cstrong>Method\u003C/strong>\u003C/span> field at its default, \u003Cspan class=\"strong strong\">\u003Cstrong>Automatic (DHCP)\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo use static IP settings, set the \u003Cspan class=\"strong strong\">\u003Cstrong>Method\u003C/strong>\u003C/span> field to \u003Cspan class=\"strong strong\">\u003Cstrong>Manual\u003C/strong>\u003C/span> and fill the fields accordingly:\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"inlinemediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/ac14e59ffe03b911d613933c29b1a6c7/team-IP-settings-nm-connection-editor.png\" alt=\"team IP settings nm connection editor\"/>\u003C/span>\n\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Save\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClose \u003Ccode class=\"literal\">nm-connection-editor\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the status of the team:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>teamdctl team0 state\u003C/strong>\u003C/span>\nsetup:\n  runner: activebackup\nports:\n  enp7s0\n    link watches:\n      link summary: up\n      instance[link_watch_0]:\n        name: ethtool\n        link: up\n        down count: 0\n  enp8s0\n    link watches:\n      link summary: up\n      instance[link_watch_0]:\n        name: ethtool\n        link: up\n        down count: 0\nrunner:\n  active port: enp7s0\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-a-network-bond-by-using-nm-connection-editor_configuring-network-bonding\" title=\"3.6. Configuring a network bond by using nm-connection-editor\">Configuring a network bond by using nm-connection-editor\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-a-network-bridge-by-using-nm-connection-editor_configuring-a-network-bridge\" title=\"6.4. Configuring a network bridge by using nm-connection-editor\">Configuring a NIC team by using nm-connection-editor\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-vlan-tagging-by-using-nm-connection-editor_configuring-vlan-tagging\" title=\"5.5. Configuring VLAN tagging by using nm-connection-editor\">Configuring VLAN tagging by using nm-connection-editor\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_configuring-networkmanager-to-avoid-using-a-specific-profile-to-provide-a-default-gateway_managing-the-default-gateway-setting\" title=\"25.8. Configuring NetworkManager to avoid using a specific profile to provide a default gateway\">Configuring NetworkManager to avoid using a specific profile to provide a default gateway\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#understanding-the-teamd-service-runners-and-link-watchers_configuring-network-teaming\" title=\"4.3. Understanding the teamd service, runners, and link-watchers\">Understanding the teamd service, runners, and link-watchers\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/3068421\">NetworkManager duplicates a connection after restart of NetworkManager service\u003C/a> (Red Hat Knowledgebase)\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-vlan-tagging_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 5. Configuring VLAN tagging\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tA Virtual Local Area Network (VLAN) is a logical network within a physical network. The VLAN interface tags packets with the VLAN ID as they pass through the interface, and removes tags of returning packets. You create VLAN interfaces on top of another interface, such as Ethernet, bond, team, or bridge devices. These interfaces are called the \u003Ccode class=\"literal\">parent interface\u003C/code>.\n\t\t\u003C/p>\u003Cp>\n\t\t\tRed Hat Enterprise Linux provides administrators different options to configure VLAN devices. For example:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tUse \u003Ccode class=\"literal\">nmcli\u003C/code> to configure VLAN tagging using the command line.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tUse the RHEL web console to configure VLAN tagging using a web browser.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tUse \u003Ccode class=\"literal\">nmtui\u003C/code> to configure VLAN tagging in a text-based user interface.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tUse the \u003Ccode class=\"literal\">nm-connection-editor\u003C/code> application to configure connections in a graphical interface.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tUse \u003Ccode class=\"literal\">nmstatectl\u003C/code> to configure connections through the Nmstate API.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tUse RHEL system roles to automate the VLAN configuration on one or multiple hosts.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"configuring-vlan-tagging-by-using-nmcli_configuring-vlan-tagging\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.1. Configuring VLAN tagging by using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can configure Virtual Local Area Network (VLAN) tagging on the command line using the \u003Ccode class=\"literal\">nmcli\u003C/code> utility.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe interface you plan to use as a parent to the virtual VLAN interface supports VLAN tags.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you configure the VLAN on top of a bond interface:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe ports of the bond are up.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe bond is not configured with the \u003Ccode class=\"literal\">fail_over_mac=follow\u003C/code> option. A VLAN virtual device cannot change its MAC address to match the parent’s new MAC address. In such a case, the traffic would still be sent with the incorrect source MAC address.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe bond is usually not expected to get IP addresses from a DHCP server or IPv6 auto-configuration. Ensure it by setting the \u003Ccode class=\"literal\">ipv4.method=disable\u003C/code> and \u003Ccode class=\"literal\">ipv6.method=ignore\u003C/code> options while creating the bond. Otherwise, if DHCP or IPv6 auto-configuration fails after some time, the interface might be brought down.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe switch, the host is connected to, is configured to support VLAN tags. For details, see the documentation of your switch.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the network interfaces:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device status\u003C/strong>\u003C/span>\nDEVICE   TYPE      STATE         CONNECTION\nenp1s0   ethernet  disconnected  enp1s0\nbridge0  bridge    connected     bridge0\nbond0    bond      connected     bond0\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the VLAN interface. For example, to create a VLAN interface named \u003Ccode class=\"literal\">vlan10\u003C/code> that uses \u003Ccode class=\"literal\">enp1s0\u003C/code> as its parent interface and that tags packets with VLAN ID \u003Ccode class=\"literal\">10\u003C/code>, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type vlan con-name vlan10 ifname vlan10 vlan.parent enp1s0 vlan.id 10\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that the VLAN must be within the range from \u003Ccode class=\"literal\">0\u003C/code> to \u003Ccode class=\"literal\">4094\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tBy default, the VLAN connection inherits the maximum transmission unit (MTU) from the parent interface. Optionally, set a different MTU value:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify vlan10 ethernet.mtu 2000\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the IPv4 settings:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo use this VLAN device as a port of other devices, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify vlan10 ipv4.method disabled\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo use DHCP, no action is required.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo set a static IPv4 address, network mask, default gateway, and DNS server to the \u003Ccode class=\"literal\">vlan10\u003C/code> connection, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify vlan10 ipv4.addresses '192.0.2.1/24' ipv4.gateway '192.0.2.254' ipv4.dns '192.0.2.253' ipv4.method manual\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the IPv6 settings:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo use this VLAN device as a port of other devices, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify vlan10 ipv6.method disabled\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo use stateless address autoconfiguration (SLAAC), no action is required.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo set a static IPv6 address, network mask, default gateway, and DNS server to the \u003Ccode class=\"literal\">vlan10\u003C/code> connection, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify vlan10 ipv6.addresses '2001:db8:1::1/32' ipv6.gateway '2001:db8:1::fffe' ipv6.dns '2001:db8:1::fffd' ipv6.method manual\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tActivate the connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up vlan10\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify the settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -d addr show vlan10\u003C/strong>\u003C/span>\n4: vlan10@enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000\n    link/ether 52:54:00:72:2f:6e brd ff:ff:ff:ff:ff:ff promiscuity 0\n    vlan protocol 802.1Q id 10 &lt;REORDER_HDR&gt; numtxqueues 1 numrxqueues 1 gso_max_size 65536 gso_max_segs 65535\n    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute vlan10\n       valid_lft forever preferred_lft forever\n    inet6 2001:db8:1::1/32 scope global noprefixroute\n       valid_lft forever preferred_lft forever\n    inet6 fe80::8dd7:9030:6f8e:89e6/64 scope link noprefixroute\n       valid_lft forever preferred_lft forever\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-nested-vlans-using-nmcli-commands_configuring-vlan-tagging\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.2. Configuring nested VLANs by using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t802.1ad is a protocol used for Virtual Local Area Network (VLAN) tagging. It is also known as Q-in-Q tagging. You can use this technology to create multiple VLAN tags within a single Ethernet frame to achieve the following benefits:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIncreased network scalability by creating multiple isolated network segments within a VLAN. This enables you to segment and organize large networks into smaller, manageable units.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tImproved traffic management by isolating and controlling different types of network traffic. This can improve the network performance and reduce network congestion.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEfficient resource utilization by enabling the creation of smaller, more targeted network segments.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnhanced security by isolating network traffic and reducing the risk of unauthorized access to sensitive data.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe interface you plan to use as a parent to the virtual VLAN interface supports VLAN tags.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you configure the VLAN on top of a bond interface:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe ports of the bond are up.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe bond is not configured with the \u003Ccode class=\"literal\">fail_over_mac=follow\u003C/code> option. A VLAN virtual device cannot change its MAC address to match the parent’s new MAC address. In such a case, the traffic would still be sent with the incorrect source MAC address.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe bond is usually not expected to get IP addresses from a DHCP server or IPv6 auto-configuration. Ensure it by setting the \u003Ccode class=\"literal\">ipv4.method=disable\u003C/code> and \u003Ccode class=\"literal\">ipv6.method=ignore\u003C/code> options while creating the bond. Otherwise, if DHCP or IPv6 auto-configuration fails after some time, the interface might be brought down.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe switch, the host is connected to, is configured to support VLAN tags. For details, see the documentation of your switch.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the physical network devices:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device status\u003C/strong>\u003C/span>\nDEVICE   TYPE      STATE         CONNECTION\nenp1s0  ethernet  connected      enp1s0\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the base VLAN interface. For example, to create a base VLAN interface named \u003Ccode class=\"literal\">vlan10\u003C/code> that uses \u003Ccode class=\"literal\">enp1s0\u003C/code> as its parent interface and that tags packets with VLAN ID \u003Ccode class=\"literal\">10\u003C/code>, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type vlan con-name vlan10 dev enp1s0 vlan.id 10\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that the VLAN must be within the range from \u003Ccode class=\"literal\">0\u003C/code> to \u003Ccode class=\"literal\">4094\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tBy default, the VLAN connection inherits the maximum transmission unit (MTU) from the parent interface. Optionally, set a different MTU value:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify vlan10 ethernet.mtu 2000\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the nested VLAN interface on top of the base VLAN interface:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type vlan con-name vlan10.20 dev enp1s0.10 id 20 vlan.protocol 802.1ad\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis command creates a new VLAN connection with a name of \u003Ccode class=\"literal\">vlan10.20\u003C/code> and a VLAN ID of \u003Ccode class=\"literal\">20\u003C/code> on the parent VLAN connection \u003Ccode class=\"literal\">vlan10\u003C/code>. The \u003Ccode class=\"literal\">dev\u003C/code> option specifies the parent network device. In this case it is \u003Ccode class=\"literal\">enp1s0.10\u003C/code>. The \u003Ccode class=\"literal\">vlan.protocol\u003C/code> option specifies the VLAN encapsulation protocol. In this case it is \u003Ccode class=\"literal\">802.1ad\u003C/code> (Q-in-Q).\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the IPv4 settings of the nested VLAN interface:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo use DHCP, no action is required.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo set a static IPv4 address, network mask, default gateway, and DNS server to the \u003Ccode class=\"literal\">vlan10.20\u003C/code> connection, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify vlan10.20 ipv4.method manual ipv4.addresses 192.0.2.1/24 ipv4.gateway 192.0.2.254 ipv4.dns 192.0.2.200\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the IPv6 settings of the nested VLAN interface:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo use stateless address autoconfiguration (SLAAC), no action is required.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo set a static IPv4 address, network mask, default gateway, and DNS server to the vlan10 connection, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify vlan10 ipv4.addresses '192.0.2.1/24' ipv4.gateway '192.0.2.254' ipv4.dns '192.0.2.253' ipv4.method manual\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tActivate the profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up vlan10.20\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify the configuration of the nested VLAN interface:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -d addr show enp1s0.10.20\u003C/strong>\u003C/span>\n10: enp1s0.10.20@enp1s0.10: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000\n    link/ether 52:54:00:d2:74:3e brd ff:ff:ff:ff:ff:ff promiscuity 0 minmtu 0 maxmtu 65535\n    vlan protocol 802.1ad id 20 &lt;REORDER_HDR&gt; numtxqueues 1 numrxqueues 1 gso_max_size 65536 gso_max_segs 65535 tso_max_size 65536 tso_max_segs 65535 gro_max_size 65536\n    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute enp1s0.10.20\n       valid_lft forever preferred_lft forever\n    inet6 2001:db8:1::1/32 scope global noprefixroute\n       valid_lft forever preferred_lft forever\n    inet6 fe80::ce3b:84c5:9ef8:d0e6/64 scope link noprefixroute\n       valid_lft forever preferred_lft forever\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-vlan-tagging-by-using-the-rhel-web-console_configuring-vlan-tagging\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.3. Configuring VLAN tagging by using the RHEL web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can configure VLAN tagging if you prefer to manage network settings using a web browser-based interface in the RHEL web console.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe interface you plan to use as a parent to the virtual VLAN interface supports VLAN tags.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you configure the VLAN on top of a bond interface:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe ports of the bond are up.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe bond is not configured with the \u003Ccode class=\"literal\">fail_over_mac=follow\u003C/code> option. A VLAN virtual device cannot change its MAC address to match the parent’s new MAC address. In such a case, the traffic would still be sent with the incorrect source MAC address.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe bond is usually not expected to get IP addresses from a DHCP server or IPv6 auto-configuration. Ensure it by disabling the IPv4 and IPv6 protocol creating the bond. Otherwise, if DHCP or IPv6 auto-configuration fails after some time, the interface might be brought down.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe switch, the host is connected to, is configured to support VLAN tags. For details, see the documentation of your switch.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the \u003Ccode class=\"literal\">Networking\u003C/code> tab in the navigation on the left side of the screen.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Add VLAN\u003C/span> in the \u003Ccode class=\"literal\">Interfaces\u003C/code> section.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the parent device.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnter the VLAN ID.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter the name of the VLAN device or keep the automatically-generated name.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/801dda277f220b3c96bdcb152d1487ef/vlan-settings.png\" alt=\"vlan settings\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Apply\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tBy default, the VLAN device uses a dynamic IP address. If you want to set a static IP address:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick the name of the VLAN device in the \u003Ccode class=\"literal\">Interfaces\u003C/code> section.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick \u003Ccode class=\"literal\">Edit\u003C/code> next to the protocol you want to configure.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSelect \u003Ccode class=\"literal\">Manual\u003C/code> next to \u003Ccode class=\"literal\">Addresses\u003C/code>, and enter the IP address, prefix, and default gateway.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIn the \u003Ccode class=\"literal\">DNS\u003C/code> section, click the \u003Cspan class=\"guibutton\">+\u003C/span> button, and enter the IP address of the DNS server. Repeat this step to set multiple DNS servers.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIn the \u003Ccode class=\"literal\">DNS search domains\u003C/code> section, click the \u003Cspan class=\"guibutton\">+\u003C/span> button, and enter the search domain.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf the interface requires static routes, configure them in the \u003Ccode class=\"literal\">Routes\u003C/code> section.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/7994cde2fafedf1c5a1436807dc34096/bond-team-bridge-vlan.ipv4.png\" alt=\"bond team bridge vlan.ipv4\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Apply\u003C/span>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSelect the \u003Ccode class=\"literal\">Networking\u003C/code> tab in the navigation on the left side of the screen, and check if there is incoming and outgoing traffic on the interface:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/85f426e0a5c782a8a6407d35d3d57bdc/vlan-verify.png\" alt=\"vlan verify\"/>\u003C/div>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-vlan-tagging-by-using-nmtui_configuring-vlan-tagging\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.4. Configuring VLAN tagging by using \u003Ccode class=\"literal\">nmtui\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">nmtui\u003C/code> application provides a text-based user interface for NetworkManager. You can use \u003Ccode class=\"literal\">nmtui\u003C/code> to configure VLAN tagging on a host without a graphical interface.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIn \u003Ccode class=\"literal\">nmtui\u003C/code>:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tNavigate by using the cursor keys.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tPress a button by selecting it and hitting \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tSelect and clear checkboxes by using \u003Ckbd class=\"keycap\">Space\u003C/kbd>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe interface you plan to use as a parent to the virtual VLAN interface supports VLAN tags.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you configure the VLAN on top of a bond interface:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe ports of the bond are up.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe bond is not configured with the \u003Ccode class=\"literal\">fail_over_mac=follow\u003C/code> option. A VLAN virtual device cannot change its MAC address to match the parent’s new MAC address. In such a case, the traffic would still be sent with the then incorrect source MAC address.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe bond is usually not expected to get IP addresses from a DHCP server or IPv6 auto-configuration. Ensure it by setting the \u003Ccode class=\"literal\">ipv4.method=disable\u003C/code> and \u003Ccode class=\"literal\">ipv6.method=ignore\u003C/code> options while creating the bond. Otherwise, if DHCP or IPv6 auto-configuration fails after some time, the interface might be brought down.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe switch the host is connected to is configured to support VLAN tags. For details, see the documentation of your switch.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you do not know the network device name on which you want configure VLAN tagging, display the available devices:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device status\u003C/strong>\u003C/span>\nDEVICE     TYPE      STATE                   CONNECTION\nenp1s0     ethernet  unavailable             --\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart \u003Ccode class=\"literal\">nmtui\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmtui\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Cspan class=\"strong strong\">\u003Cstrong>Edit a connection\u003C/strong>\u003C/span>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Cspan class=\"strong strong\">\u003Cstrong>VLAN\u003C/strong>\u003C/span> from the list of network types, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Enter a name for the NetworkManager profile to be created.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn hosts with multiple profiles, a meaningful name makes it easier to identify the purpose of a profile.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnter the VLAN device name to be created into the \u003Cspan class=\"strong strong\">\u003Cstrong>Device\u003C/strong>\u003C/span> field.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnter the name of the device on which you want to configure VLAN tagging into the \u003Cspan class=\"strong strong\">\u003Cstrong>Parent\u003C/strong>\u003C/span> field.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnter the VLAN ID. The ID must be within the range from \u003Ccode class=\"literal\">0\u003C/code> to \u003Ccode class=\"literal\">4094\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDepending on your environment, configure the IP address settings in the \u003Cspan class=\"strong strong\">\u003Cstrong>IPv4 configuration\u003C/strong>\u003C/span> and \u003Cspan class=\"strong strong\">\u003Cstrong>IPv6 configuration\u003C/strong>\u003C/span> areas accordingly. For this, press the button next to these areas, and select:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Disabled\u003C/code>, if this VLAN device does not require an IP address or you want to use it as a port of other devices.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Automatic\u003C/code>, if a DHCP server or stateless address autoconfiguration (SLAAC) dynamically assigns an IP address to the VLAN device.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Manual\u003C/code>, if the network requires static IP address settings. In this case, you must fill further fields:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tPress \u003Cspan class=\"strong strong\">\u003Cstrong>Show\u003C/strong>\u003C/span> next to the protocol you want to configure to display additional fields.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tPress \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span> next to \u003Cspan class=\"strong strong\">\u003Cstrong>Addresses\u003C/strong>\u003C/span>, and enter the IP address and the subnet mask in Classless Inter-Domain Routing (CIDR) format.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tIf you do not specify a subnet mask, NetworkManager sets a \u003Ccode class=\"literal\">/32\u003C/code> subnet mask for IPv4 addresses and \u003Ccode class=\"literal\">/64\u003C/code> for IPv6 addresses.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tEnter the address of the default gateway.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tPress \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span> next to \u003Cspan class=\"strong strong\">\u003Cstrong>DNS servers\u003C/strong>\u003C/span>, and enter the DNS server address.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tPress \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span> next to \u003Cspan class=\"strong strong\">\u003Cstrong>Search domains\u003C/strong>\u003C/span>, and enter the DNS search domain.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"figure\" id=\"idm140053179751200\">\u003Cp class=\"title\">\u003Cstrong>Figure 5.1. Example of a VLAN connection with static IP address settings\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/a5d4747d7ed76a4eb618b7543c4d871a/nmtui-vlan-static-IP.png\" alt=\"nmtui vlan static IP\"/>\u003C/div>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Cspan class=\"strong strong\">\u003Cstrong>OK\u003C/strong>\u003C/span> to create and automatically activate the new connection.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Cspan class=\"strong strong\">\u003Cstrong>Back\u003C/strong>\u003C/span> to return to the main menu.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Cspan class=\"strong strong\">\u003Cstrong>Quit\u003C/strong>\u003C/span>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd> to close the \u003Ccode class=\"literal\">nmtui\u003C/code> application.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify the settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -d addr show vlan10\u003C/strong>\u003C/span>\n4: vlan10@enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000\n    link/ether 52:54:00:72:2f:6e brd ff:ff:ff:ff:ff:ff promiscuity 0\n    vlan protocol 802.1Q id 10 &lt;REORDER_HDR&gt; numtxqueues 1 numrxqueues 1 gso_max_size 65536 gso_max_segs 65535\n    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute vlan10\n       valid_lft forever preferred_lft forever\n    inet6 2001:db8:1::1/32 scope global noprefixroute\n       valid_lft forever preferred_lft forever\n    inet6 fe80::8dd7:9030:6f8e:89e6/64 scope link noprefixroute\n       valid_lft forever preferred_lft forever\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-vlan-tagging-by-using-nm-connection-editor_configuring-vlan-tagging\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.5. Configuring VLAN tagging by using nm-connection-editor\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can configure Virtual Local Area Network (VLAN) tagging in a graphical interface using the \u003Ccode class=\"literal\">nm-connection-editor\u003C/code> application.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe interface you plan to use as a parent to the virtual VLAN interface supports VLAN tags.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you configure the VLAN on top of a bond interface:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe ports of the bond are up.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe bond is not configured with the \u003Ccode class=\"literal\">fail_over_mac=follow\u003C/code> option. A VLAN virtual device cannot change its MAC address to match the parent’s new MAC address. In such a case, the traffic would still be sent with the incorrect source MAC address.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe switch, the host is connected, to is configured to support VLAN tags. For details, see the documentation of your switch.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen a terminal, and enter \u003Ccode class=\"literal\">nm-connection-editor\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>nm-connection-editor\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick the \u003Cspan class=\"guibutton\">+\u003C/span> button to add a new connection.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the \u003Cspan class=\"strong strong\">\u003Cstrong>VLAN\u003C/strong>\u003C/span> connection type, and click \u003Cspan class=\"guibutton\">Create\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the \u003Cspan class=\"strong strong\">\u003Cstrong>VLAN\u003C/strong>\u003C/span> tab:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSelect the parent interface.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSelect the VLAN id. Note that the VLAN must be within the range from \u003Cspan class=\"strong strong\">\u003Cstrong>0\u003C/strong>\u003C/span> to \u003Cspan class=\"strong strong\">\u003Cstrong>4094\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tBy default, the VLAN connection inherits the maximum transmission unit (MTU) from the parent interface. Optionally, set a different MTU value.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOptional: Set the name of the VLAN interface and further VLAN-specific options.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"inlinemediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/ff0007383bc91088754591692d73bded/vlan-settings-nm-connection-editor.png\" alt=\"vlan settings nm connection editor\"/>\u003C/span>\n\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the IP address settings on both the \u003Cspan class=\"strong strong\">\u003Cstrong>IPv4 Settings\u003C/strong>\u003C/span> and \u003Cspan class=\"strong strong\">\u003Cstrong>IPv6 Settings\u003C/strong>\u003C/span> tabs:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo use this bridge device as a port of other devices, set the \u003Cspan class=\"strong strong\">\u003Cstrong>Method\u003C/strong>\u003C/span> field to \u003Cspan class=\"strong strong\">\u003Cstrong>Disabled\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo use DHCP, leave the \u003Cspan class=\"strong strong\">\u003Cstrong>Method\u003C/strong>\u003C/span> field at its default, \u003Cspan class=\"strong strong\">\u003Cstrong>Automatic (DHCP)\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo use static IP settings, set the \u003Cspan class=\"strong strong\">\u003Cstrong>Method\u003C/strong>\u003C/span> field to \u003Cspan class=\"strong strong\">\u003Cstrong>Manual\u003C/strong>\u003C/span> and fill the fields accordingly:\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"inlinemediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/ec7d0982317cda2a7be796749d21793f/vlan-IP-settings-nm-connection-editor.png\" alt=\"vlan IP settings nm connection editor\"/>\u003C/span>\n\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Save\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClose \u003Ccode class=\"literal\">nm-connection-editor\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify the settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -d addr show \u003Cspan class=\"emphasis\">\u003Cem>vlan10\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n4: vlan10@enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000\n    link/ether 52:54:00:d5:e0:fb brd ff:ff:ff:ff:ff:ff promiscuity 0\n    vlan protocol 802.1Q id 10 &lt;REORDER_HDR&gt; numtxqueues 1 numrxqueues 1 gso_max_size 65536 gso_max_segs 65535\n    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute vlan10\n       valid_lft forever preferred_lft forever\n    inet6 2001:db8:1::1/32 scope global noprefixroute\n       valid_lft forever preferred_lft forever\n    inet6 fe80::8dd7:9030:6f8e:89e6/64 scope link noprefixroute\n       valid_lft forever preferred_lft forever\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_configuring-networkmanager-to-avoid-using-a-specific-profile-to-provide-a-default-gateway_managing-the-default-gateway-setting\" title=\"25.8. Configuring NetworkManager to avoid using a specific profile to provide a default gateway\">Configuring NetworkManager to avoid using a specific profile to provide a default gateway\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-vlan-tagging-by-using-nmstatectl_configuring-vlan-tagging\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.6. Configuring VLAN tagging by using \u003Ccode class=\"literal\">nmstatectl\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tUse the \u003Ccode class=\"literal\">nmstatectl\u003C/code> utility to configure Virtual Local Area Network VLAN through the Nmstate API. The Nmstate API ensures that, after setting the configuration, the result matches the configuration file. If anything fails, \u003Ccode class=\"literal\">nmstatectl\u003C/code> automatically rolls back the changes to avoid leaving the system in an incorrect state.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tDepending on your environment, adjust the YAML file accordingly. For example, to use different devices than Ethernet adapters in the VLAN, adapt the \u003Ccode class=\"literal\">base-iface\u003C/code> attribute and \u003Ccode class=\"literal\">type\u003C/code> attributes of the ports you use in the VLAN.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo use Ethernet devices as ports in the VLAN, the physical or virtual Ethernet devices must be installed on the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">nmstate\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a YAML file, for example \u003Ccode class=\"literal\">~/create-vlan.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\ninterfaces:\n- name: vlan10\n  type: vlan\n  state: up\n  ipv4:\n    enabled: true\n    address:\n    - ip: 192.0.2.1\n      prefix-length: 24\n    dhcp: false\n  ipv6:\n    enabled: true\n    address:\n    - ip: 2001:db8:1::1\n      prefix-length: 64\n    autoconf: false\n    dhcp: false\n  vlan:\n    base-iface: enp1s0\n    id: 10\n- name: enp1s0\n  type: ethernet\n  state: up\n\nroutes:\n  config:\n  - destination: 0.0.0.0/0\n    next-hop-address: 192.0.2.254\n    next-hop-interface: vlan10\n  - destination: ::/0\n    next-hop-address: 2001:db8:1::fffe\n    next-hop-interface: vlan10\n\ndns-resolver:\n  config:\n    search:\n    - example.com\n    server:\n    - 192.0.2.200\n    - 2001:db8:1::ffbb\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThese settings define a VLAN with ID 10 that uses the \u003Ccode class=\"literal\">enp1s0\u003C/code> device. As the child device, the VLAN connection has the following settings:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tA static IPv4 address - \u003Ccode class=\"literal\">192.0.2.1\u003C/code> with the \u003Ccode class=\"literal\">/24\u003C/code> subnet mask\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tA static IPv6 address - \u003Ccode class=\"literal\">2001:db8:1::1\u003C/code> with the \u003Ccode class=\"literal\">/64\u003C/code> subnet mask\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAn IPv4 default gateway - \u003Ccode class=\"literal\">192.0.2.254\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAn IPv6 default gateway - \u003Ccode class=\"literal\">2001:db8:1::fffe\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAn IPv4 DNS server - \u003Ccode class=\"literal\">192.0.2.200\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAn IPv6 DNS server - \u003Ccode class=\"literal\">2001:db8:1::ffbb\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tA DNS search domain - \u003Ccode class=\"literal\">example.com\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tApply the settings to the system:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl apply ~/create-vlan.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the status of the devices and connections:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device status\u003C/strong>\u003C/span>\nDEVICE      TYPE      STATE      CONNECTION\nvlan10      vlan      \u003Cspan class=\"strong strong\">\u003Cstrong>connected\u003C/strong>\u003C/span>  vlan10\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay all settings of the connection profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection show vlan10\u003C/strong>\u003C/span>\nconnection.id:              vlan10\nconnection.uuid:            1722970f-788e-4f81-bd7d-a86bf21c9df5\nconnection.stable-id:       --\nconnection.type:            vlan\nconnection.interface-name:  vlan10\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the connection settings in YAML format:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl show vlan0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nmstatectl(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/nmstate/examples/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-vlan-tagging-by-using-the-network-rhel-system-role_configuring-vlan-tagging\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.7. Configuring VLAN tagging by using the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIf your network uses Virtual Local Area Networks (VLANs) to separate network traffic into logical networks, create a NetworkManager connection profile to configure VLAN tagging. By using Ansible and the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role to configure VLAN tagging and, if a connection profile for the VLAN’s parent device does not exists, the role can create it as well.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIf the VLAN device requires an IP address, default gateway, and DNS settings, configure them on the VLAN device and not on the parent device.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles\">You have prepared the control node and the managed nodes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in to the control node as a user who can run playbooks on the managed nodes.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe account you use to connect to the managed nodes has \u003Ccode class=\"literal\">sudo\u003C/code> permissions on them.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a playbook file, for example \u003Ccode class=\"literal\">~/playbook.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\n- name: Configure the network\n  hosts: managed-node-01.example.com\n  tasks:\n    - name: VLAN connection profile with Ethernet port\n      ansible.builtin.include_role:\n        name: rhel-system-roles.network\n      vars:\n        network_connections:\n          # Ethernet profile\n          - name: enp1s0\n            type: ethernet\n            interface_name: enp1s0\n            autoconnect: yes\n            state: up\n            ip:\n              dhcp4: no\n              auto6: no\n\n          # VLAN profile\n          - name: enp1s0.10\n            type: vlan\n            vlan:\n              id: 10\n            ip:\n              dhcp4: yes\n              auto6: yes\n            parent: enp1s0\n            state: up\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\te settings specified in the example playbook include the following:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">type: \u003Cspan class=\"emphasis\">\u003Cem>&lt;profile_type&gt;\u003C/em>\u003C/span>\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tSets the type of the profile to create. The example playbook creates two connection profiles: One for the parent Ethernet device and one for the VLAN device.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">dhcp4: \u003Cspan class=\"emphasis\">\u003Cem>&lt;value&gt;\u003C/em>\u003C/span>\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tIf set to \u003Ccode class=\"literal\">yes\u003C/code>, automatic IPv4 address assignment from DHCP, PPP, or similar services is enabled. Disable the IP address configuration on the parent device.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">auto6: \u003Cspan class=\"emphasis\">\u003Cem>&lt;value&gt;\u003C/em>\u003C/span>\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tIf set to \u003Ccode class=\"literal\">yes\u003C/code>, IPv6 auto-configuration is enabled. In this case, by default, NetworkManager uses Router Advertisements and, if the router announces the \u003Ccode class=\"literal\">managed\u003C/code> flag, NetworkManager requests an IPv6 address and prefix from a DHCPv6 server. Disable the IP address configuration on the parent device.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">parent: \u003Cspan class=\"emphasis\">\u003Cem>&lt;parent_device&gt;\u003C/em>\u003C/span>\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tSets the parent device of the VLAN connection profile. In the example, the parent is the Ethernet interface.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details about all variables used in the playbook, see the \u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file on the control node.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tValidate the playbook syntax:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --syntax-check ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that this command only validates the syntax and does not protect against a wrong but valid configuration.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the playbook:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify the VLAN settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ansible managed-node-01.example.com -m command -a 'ip -d addr show enp1s0.10'\u003C/strong>\u003C/span>\nmanaged-node-01.example.com | CHANGED | rc=0 &gt;&gt;\n4: vlan10@enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000\n    link/ether 52:54:00:72:2f:6e brd ff:ff:ff:ff:ff:ff promiscuity 0\n    vlan protocol 802.1Q id 10 &lt;REORDER_HDR&gt; numtxqueues 1 numrxqueues 1 gso_max_size 65536 gso_max_segs 65535\n    ...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/rhel-system-roles/network/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-a-network-bridge_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 6. Configuring a network bridge\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tA network bridge is a link-layer device which forwards traffic between networks based on a table of MAC addresses. The bridge builds the MAC addresses table by listening to network traffic and thereby learning what hosts are connected to each network. For example, you can use a software bridge on a Red Hat Enterprise Linux host to emulate a hardware bridge or in virtualization environments, to integrate virtual machines (VM) to the same network as the host.\n\t\t\u003C/p>\u003Cp>\n\t\t\tA bridge requires a network device in each network the bridge should connect. When you configure a bridge, the bridge is called \u003Ccode class=\"literal literal\">controller\u003C/code> and the devices it uses \u003Ccode class=\"literal literal\">ports\u003C/code>.\n\t\t\u003C/p>\u003Cp>\n\t\t\tYou can create bridges on different types of devices, such as:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tPhysical and virtual Ethernet devices\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tNetwork bonds\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tNetwork teams\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tVLAN devices\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tDue to the IEEE 802.11 standard which specifies the use of 3-address frames in Wi-Fi for the efficient use of airtime, you cannot configure a bridge over Wi-Fi networks operating in Ad-Hoc or Infrastructure modes.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"configuring-a-network-bridge-by-using-nmcli_configuring-a-network-bridge\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">6.1. Configuring a network bridge by using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo configure a network bridge on the command line, use the \u003Ccode class=\"literal\">nmcli\u003C/code> utility.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTwo or more physical or virtual network devices are installed on the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo use Ethernet devices as ports of the bridge, the physical or virtual Ethernet devices must be installed on the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo use team, bond, or VLAN devices as ports of the bridge, you can either create these devices while you create the bridge or you can create them in advance as described in:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-a-network-team-by-using-nmcli_configuring-network-teaming\" title=\"4.4. Configuring a NIC team by using nmcli\">Configuring a network team by using nmcli\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-a-network-bond-by-using-nmcli_configuring-network-bonding\" title=\"3.3. Configuring a network bond by using nmcli\">Configuring a network bond by using nmcli\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-vlan-tagging-by-using-nmcli_configuring-vlan-tagging\" title=\"5.1. Configuring VLAN tagging by using nmcli\">Configuring VLAN tagging by using nmcli\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a bridge interface:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type bridge con-name bridge0 ifname bridge0\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis command creates a bridge named \u003Ccode class=\"literal\">bridge0\u003C/code>, enter:\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the network interfaces, and note the names of the interfaces you want to add to the bridge:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device status\u003C/strong>\u003C/span>\nDEVICE  TYPE      STATE         CONNECTION\nenp7s0  ethernet  disconnected  --\nenp8s0  ethernet  disconnected  --\nbond0   bond      connected     bond0\nbond1   bond      connected     bond1\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn this example:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">enp7s0\u003C/code> and \u003Ccode class=\"literal\">enp8s0\u003C/code> are not configured. To use these devices as ports, add connection profiles in the next step.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">bond0\u003C/code> and \u003Ccode class=\"literal\">bond1\u003C/code> have existing connection profiles. To use these devices as ports, modify their profiles in the next step.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAssign the interfaces to the bridge.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf the interfaces you want to assign to the bridge are not configured, create new connection profiles for them:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ethernet port-type bridge con-name bridge0-port1 ifname enp7s0 controller bridge0\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ethernet port-type bridge con-name bridge0-port2 ifname enp8s0 controller bridge0\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThese commands create profiles for \u003Ccode class=\"literal\">enp7s0\u003C/code> and \u003Ccode class=\"literal\">enp8s0\u003C/code>, and add them to the \u003Ccode class=\"literal\">bridge0\u003C/code> connection.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you want to assign an existing connection profile to the bridge:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tSet the \u003Ccode class=\"literal\">controller\u003C/code> parameter of these connections to \u003Ccode class=\"literal\">bridge0\u003C/code>:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond0 controller bridge0\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond1 controller bridge0\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tThese commands assign the existing connection profiles named \u003Ccode class=\"literal\">bond0\u003C/code> and \u003Ccode class=\"literal\">bond1\u003C/code> to the \u003Ccode class=\"literal\">bridge0\u003C/code> connection.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tReactivate the connections:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up bond0\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up bond1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the IPv4 settings:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo use this bridge device as a port of other devices, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bridge0 ipv4.method disabled\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo use DHCP, no action is required.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo set a static IPv4 address, network mask, default gateway, and DNS server to the \u003Ccode class=\"literal\">bridge0\u003C/code> connection, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bridge0 ipv4.addresses '192.0.2.1/24' ipv4.gateway '192.0.2.254' ipv4.dns '192.0.2.253' ipv4.dns-search 'example.com' ipv4.method manual\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the IPv6 settings:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo use this bridge device as a port of other devices, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bridge0 ipv6.method disabled\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo use stateless address autoconfiguration (SLAAC), no action is required.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo set a static IPv6 address, network mask, default gateway, and DNS server to the \u003Ccode class=\"literal\">bridge0\u003C/code> connection, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bridge0 ipv6.addresses '2001:db8:1::1/64' ipv6.gateway '2001:db8:1::fffe' ipv6.dns '2001:db8:1::fffd' ipv6.dns-search 'example.com' ipv6.method manual\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Configure further properties of the bridge. For example, to set the Spanning Tree Protocol (STP) priority of \u003Ccode class=\"literal\">bridge0\u003C/code> to \u003Ccode class=\"literal\">16384\u003C/code>, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bridge0 bridge.priority '16384'\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tBy default, STP is enabled.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tActivate the connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up bridge0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the ports are connected, and the \u003Ccode class=\"literal\">CONNECTION\u003C/code> column displays the port’s connection name:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device\u003C/strong>\u003C/span>\nDEVICE   TYPE      STATE      CONNECTION\n...\nenp7s0   ethernet  connected  bridge0-port1\nenp8s0   ethernet  connected  bridge0-port2\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tWhen you activate any port of the connection, NetworkManager also activates the bridge, but not the other ports of it. You can configure that Red Hat Enterprise Linux enables all ports automatically when the bridge is enabled:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnable the \u003Ccode class=\"literal\">connection.autoconnect-ports\u003C/code> parameter of the bridge connection:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bridge0 connection.autoconnect-ports 1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tReactivate the bridge:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up bridge0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ip\u003C/code> utility to display the link status of Ethernet devices that are ports of a specific bridge:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link show master bridge0\u003C/strong>\u003C/span>\n3: enp7s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel master bridge0 state UP mode DEFAULT group default qlen 1000\n    link/ether 52:54:00:62:61:0e brd ff:ff:ff:ff:ff:ff\n4: enp8s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel master bridge0 state UP mode DEFAULT group default qlen 1000\n    link/ether 52:54:00:9e:f1:ce brd ff:ff:ff:ff:ff:ff\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">bridge\u003C/code> utility to display the status of Ethernet devices that are ports of any bridge device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>bridge link show\u003C/strong>\u003C/span>\n3: enp7s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge0 state forwarding priority 32 cost 100\n4: enp8s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge0 state listening priority 32 cost 100\n5: enp9s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge1 state forwarding priority 32 cost 100\n6: enp11s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge1 state blocking priority 32 cost 100\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display the status for a specific Ethernet device, use the \u003Ccode class=\"literal\">bridge link show dev \u003Cspan class=\"emphasis\">\u003Cem>&lt;ethernet_device_name&gt;\u003C/em>\u003C/span>\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge(8)\u003C/code> and \u003Ccode class=\"literal\">nm-settings(5)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/3068421\">NetworkManager duplicates a connection after restart of NetworkManager service\u003C/a> (Red Hat Knowledgebase)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/5314671\">How to configure a bridge with VLAN information?\u003C/a> (Red Hat Knowledgebase)\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-network-bridge-by-using-the-rhel-web-console_configuring-a-network-bridge\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">6.2. Configuring a network bridge by using the RHEL web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tUse the RHEL web console to configure a network bridge if you prefer to manage network settings using a web browser-based interface.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTwo or more physical or virtual network devices are installed on the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo use Ethernet devices as ports of the bridge, the physical or virtual Ethernet devices must be installed on the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo use team, bond, or VLAN devices as ports of the bridge, you can either create these devices while you create the bridge or you can create them in advance as described in:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_configuring-a-network-team-by-using-the-rhel-web-console_configuring-network-teaming\" title=\"4.5. Configuring a NIC team by using the RHEL web console\">Configuring a network team using the RHEL web console\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_configuring-a-network-bond-by-using-the-rhel-web-console_configuring-network-bonding\" title=\"3.4. Configuring a network bond by using the RHEL web console\">Configuring a network bond by using the RHEL web console\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_configuring-vlan-tagging-by-using-the-rhel-web-console_configuring-vlan-tagging\" title=\"5.3. Configuring VLAN tagging by using the RHEL web console\">Configuring VLAN tagging by using the RHEL web console\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the \u003Cspan class=\"strong strong\">\u003Cstrong>Networking\u003C/strong>\u003C/span> tab in the navigation on the left side of the screen.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Add bridge\u003C/span> in the \u003Cspan class=\"strong strong\">\u003Cstrong>Interfaces\u003C/strong>\u003C/span> section.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnter the name of the bridge device you want to create.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the interfaces that should be ports of the bridge.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Enable the \u003Cspan class=\"strong strong\">\u003Cstrong>Spanning tree protocol (STP)\u003C/strong>\u003C/span> feature to avoid bridge loops and broadcast radiation.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/e758f042791734bacdcdff5e3b54f5c5/bridge-settings.png\" alt=\"bridge settings\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Apply\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tBy default, the bridge uses a dynamic IP address. If you want to set a static IP address:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick the name of the bridge in the \u003Cspan class=\"strong strong\">\u003Cstrong>Interfaces\u003C/strong>\u003C/span> section.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Edit\u003C/strong>\u003C/span> next to the protocol you want to configure.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSelect \u003Cspan class=\"strong strong\">\u003Cstrong>Manual\u003C/strong>\u003C/span> next to \u003Cspan class=\"strong strong\">\u003Cstrong>Addresses\u003C/strong>\u003C/span>, and enter the IP address, prefix, and default gateway.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>DNS\u003C/strong>\u003C/span> section, click the \u003Cspan class=\"guibutton\">+\u003C/span> button, and enter the IP address of the DNS server. Repeat this step to set multiple DNS servers.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>DNS search domains\u003C/strong>\u003C/span> section, click the \u003Cspan class=\"guibutton\">+\u003C/span> button, and enter the search domain.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf the interface requires static routes, configure them in the \u003Cspan class=\"strong strong\">\u003Cstrong>Routes\u003C/strong>\u003C/span> section.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/7994cde2fafedf1c5a1436807dc34096/bond-team-bridge-vlan.ipv4.png\" alt=\"bond team bridge vlan.ipv4\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Apply\u003C/span>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSelect the \u003Cspan class=\"strong strong\">\u003Cstrong>Networking\u003C/strong>\u003C/span> tab in the navigation on the left side of the screen, and check if there is incoming and outgoing traffic on the interface:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/f4b42ba76f5890a0113eaaa9254ac6c0/bridge-verify.png\" alt=\"bridge verify\"/>\u003C/div>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-network-bridge-by-using-nmtui_configuring-a-network-bridge\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">6.3. Configuring a network bridge by using \u003Ccode class=\"literal\">nmtui\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">nmtui\u003C/code> application provides a text-based user interface for NetworkManager. You can use \u003Ccode class=\"literal\">nmtui\u003C/code> to configure a network bridge on a host without a graphical interface.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIn \u003Ccode class=\"literal\">nmtui\u003C/code>:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tNavigate by using the cursor keys.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tPress a button by selecting it and hitting \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tSelect and clear checkboxes by using \u003Ckbd class=\"keycap\">Space\u003C/kbd>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTwo or more physical or virtual network devices are installed on the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo use Ethernet devices as ports of the bridge, the physical or virtual Ethernet devices must be installed on the server.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you do not know the network device names on which you want configure a network bridge, display the available devices:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device status\u003C/strong>\u003C/span>\nDEVICE     TYPE      STATE                   CONNECTION\nenp7s0     ethernet  unavailable             --\nenp8s0     ethernet  unavailable             --\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart \u003Ccode class=\"literal\">nmtui\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmtui\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Ccode class=\"literal\">Edit a connection\u003C/code>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Ccode class=\"literal\">Add\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Ccode class=\"literal\">Bridge\u003C/code> from the list of network types, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Enter a name for the NetworkManager profile to be created.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn hosts with multiple profiles, a meaningful name makes it easier to identify the purpose of a profile.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnter the bridge device name to be created into the \u003Ccode class=\"literal\">Device\u003C/code> field.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd ports to the bridge to be created:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPress \u003Ccode class=\"literal\">Add\u003C/code> next to the \u003Ccode class=\"literal\">Slaves\u003C/code> list.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSelect the type of the interface you want to add as port to the bridge, for example, \u003Ccode class=\"literal\">Ethernet\u003C/code>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOptional: Enter a name for the NetworkManager profile to be created for this bridge port.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tEnter the port’s device name into the \u003Ccode class=\"literal\">Device\u003C/code> field.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tPress \u003Ccode class=\"literal\">OK\u003C/code> to return to the window with the bridge settings.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"figure\" id=\"idm140053191572416\">\u003Cp class=\"title\">\u003Cstrong>Figure 6.1. Adding an Ethernet device as port to a bridge\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/af7f9f663bd362235d183af1a76cc888/nmtui-bridge-add-port.png\" alt=\"nmtui bridge add port\"/>\u003C/div>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tRepeat these steps to add more ports to the bridge.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDepending on your environment, configure the IP address settings in the \u003Ccode class=\"literal\">IPv4 configuration\u003C/code> and \u003Ccode class=\"literal\">IPv6 configuration\u003C/code> areas accordingly. For this, press the button next to these areas, and select:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Disabled\u003C/code>, if the bridge does not require an IP address.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Automatic\u003C/code>, if a DHCP server or stateless address autoconfiguration (SLAAC) dynamically assigns an IP address to the bridge.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Manual\u003C/code>, if the network requires static IP address settings. In this case, you must fill further fields:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tPress \u003Ccode class=\"literal\">Show\u003C/code> next to the protocol you want to configure to display additional fields.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tPress \u003Ccode class=\"literal\">Add\u003C/code> next to \u003Ccode class=\"literal\">Addresses\u003C/code>, and enter the IP address and the subnet mask in Classless Inter-Domain Routing (CIDR) format.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tIf you do not specify a subnet mask, NetworkManager sets a \u003Ccode class=\"literal\">/32\u003C/code> subnet mask for IPv4 addresses and \u003Ccode class=\"literal\">/64\u003C/code> for IPv6 addresses.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tEnter the address of the default gateway.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tPress \u003Ccode class=\"literal\">Add\u003C/code> next to \u003Ccode class=\"literal\">DNS servers\u003C/code>, and enter the DNS server address.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tPress \u003Ccode class=\"literal\">Add\u003C/code> next to \u003Ccode class=\"literal\">Search domains\u003C/code>, and enter the DNS search domain.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"figure\" id=\"idm140053178001600\">\u003Cp class=\"title\">\u003Cstrong>Figure 6.2. Example of a bridge connection without IP address settings\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/35cd0dc4968269049afb37203aae4308/nmtui-bridge-no-IP.png\" alt=\"nmtui bridge no IP\"/>\u003C/div>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Ccode class=\"literal\">OK\u003C/code> to create and automatically activate the new connection.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Ccode class=\"literal\">Back\u003C/code> to return to the main menu.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Ccode class=\"literal\">Quit\u003C/code>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd> to close the \u003Ccode class=\"literal\">nmtui\u003C/code> application.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ip\u003C/code> utility to display the link status of Ethernet devices that are ports of a specific bridge:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link show master bridge0\u003C/strong>\u003C/span>\n3: enp7s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel master bridge0 state UP mode DEFAULT group default qlen 1000\n    link/ether 52:54:00:62:61:0e brd ff:ff:ff:ff:ff:ff\n4: enp8s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel master bridge0 state UP mode DEFAULT group default qlen 1000\n    link/ether 52:54:00:9e:f1:ce brd ff:ff:ff:ff:ff:ff\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">bridge\u003C/code> utility to display the status of Ethernet devices that are ports of any bridge device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>bridge link show\u003C/strong>\u003C/span>\n3: enp7s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge0 state forwarding priority 32 cost 100\n4: enp8s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge0 state listening priority 32 cost 100\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display the status for a specific Ethernet device, use the \u003Ccode class=\"literal\">bridge link show dev \u003Cspan class=\"emphasis\">\u003Cem>&lt;ethernet_device_name&gt;\u003C/em>\u003C/span>\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-network-bridge-by-using-nm-connection-editor_configuring-a-network-bridge\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">6.4. Configuring a network bridge by using nm-connection-editor\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIf you use Red Hat Enterprise Linux with a graphical interface, you can configure network bridges using the \u003Ccode class=\"literal\">nm-connection-editor\u003C/code> application.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tNote that \u003Ccode class=\"literal\">nm-connection-editor\u003C/code> can add only new ports to a bridge. To use an existing connection profile as a port, create the bridge using the \u003Ccode class=\"literal\">nmcli\u003C/code> utility as described in \u003Ca class=\"link\" href=\"#configuring-a-network-bridge-by-using-nmcli_configuring-a-network-bridge\" title=\"6.1. Configuring a network bridge by using nmcli\">Configuring a network bridge by using nmcli\u003C/a>.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTwo or more physical or virtual network devices are installed on the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo use Ethernet devices as ports of the bridge, the physical or virtual Ethernet devices must be installed on the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo use team, bond, or VLAN devices as ports of the bridge, ensure that these devices are not already configured.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen a terminal, and enter \u003Ccode class=\"literal\">nm-connection-editor\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>nm-connection-editor\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick the \u003Cspan class=\"guibutton\">+\u003C/span> button to add a new connection.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the \u003Cspan class=\"strong strong\">\u003Cstrong>Bridge\u003C/strong>\u003C/span> connection type, and click \u003Cspan class=\"guibutton\">Create\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the \u003Cspan class=\"strong strong\">\u003Cstrong>Bridge\u003C/strong>\u003C/span> tab:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOptional: Set the name of the bridge interface in the \u003Cspan class=\"strong strong\">\u003Cstrong>Interface name\u003C/strong>\u003C/span> field.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tClick the \u003Cspan class=\"guibutton\">Add\u003C/span> button to create a new connection profile for a network interface and adding the profile as a port to the bridge.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tSelect the connection type of the interface. For example, select \u003Cspan class=\"strong strong\">\u003Cstrong>Ethernet\u003C/strong>\u003C/span> for a wired connection.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tOptional: Set a connection name for the port device.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tIf you create a connection profile for an Ethernet device, open the \u003Cspan class=\"strong strong\">\u003Cstrong>Ethernet\u003C/strong>\u003C/span> tab, and select in the \u003Cspan class=\"strong strong\">\u003Cstrong>Device\u003C/strong>\u003C/span> field the network interface you want to add as a port to the bridge. If you selected a different device type, configure it accordingly.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Save\u003C/span>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRepeat the previous step for each interface you want to add to the bridge.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"inlinemediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/5c31ecb2114fcc2de555ebd602d97b43/add-nic-to-bridge-in-nm-connection-editor.png\" alt=\"add nic to bridge in nm connection editor\"/>\u003C/span>\n\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOptional: Configure further bridge settings, such as Spanning Tree Protocol (STP) options.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the IP address settings on both the \u003Cspan class=\"strong strong\">\u003Cstrong>IPv4 Settings\u003C/strong>\u003C/span> and \u003Cspan class=\"strong strong\">\u003Cstrong>IPv6 Settings\u003C/strong>\u003C/span> tabs:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo use this bridge device as a port of other devices, set the \u003Cspan class=\"strong strong\">\u003Cstrong>Method\u003C/strong>\u003C/span> field to \u003Cspan class=\"strong strong\">\u003Cstrong>Disabled\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo use DHCP, leave the \u003Cspan class=\"strong strong\">\u003Cstrong>Method\u003C/strong>\u003C/span> field at its default, \u003Cspan class=\"strong strong\">\u003Cstrong>Automatic (DHCP)\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo use static IP settings, set the \u003Cspan class=\"strong strong\">\u003Cstrong>Method\u003C/strong>\u003C/span> field to \u003Cspan class=\"strong strong\">\u003Cstrong>Manual\u003C/strong>\u003C/span> and fill the fields accordingly:\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"inlinemediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/30c02785f203fbeb36a70ca1c31f4099/bridge-IP-settings-nm-connection-editor.png\" alt=\"bridge IP settings nm connection editor\"/>\u003C/span>\n\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Save\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClose \u003Ccode class=\"literal\">nm-connection-editor\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ip\u003C/code> utility to display the link status of Ethernet devices that are ports of a specific bridge.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link show master \u003Cspan class=\"emphasis\">\u003Cem>bridge0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n3: enp7s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel master bridge0 state UP mode DEFAULT group default qlen 1000\n    link/ether 52:54:00:62:61:0e brd ff:ff:ff:ff:ff:ff\n4: enp8s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel master bridge0 state UP mode DEFAULT group default qlen 1000\n    link/ether 52:54:00:9e:f1:ce brd ff:ff:ff:ff:ff:ff\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">bridge\u003C/code> utility to display the status of Ethernet devices that are ports in any bridge device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>bridge link show\u003C/strong>\u003C/span>\n3: enp7s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge0 state forwarding priority 32 cost 100\n4: enp8s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge0 state listening priority 32 cost 100\n5: enp9s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge1 state forwarding priority 32 cost 100\n6: enp11s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge1 state blocking priority 32 cost 100\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display the status for a specific Ethernet device, use the \u003Ccode class=\"literal\">bridge link show dev \u003Cspan class=\"emphasis\">\u003Cem>ethernet_device_name\u003C/em>\u003C/span>\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-a-network-bond-by-using-nm-connection-editor_configuring-network-bonding\" title=\"3.6. Configuring a network bond by using nm-connection-editor\">Configuring a network bond by using nm-connection-editor\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-a-network-team-by-using-nm-connection-editor_configuring-network-teaming\" title=\"4.6. Configuring a NIC team by using nm-connection-editor\">Configuring a network team by using nm-connection-editor\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-vlan-tagging-by-using-nm-connection-editor_configuring-vlan-tagging\" title=\"5.5. Configuring VLAN tagging by using nm-connection-editor\">Configuring VLAN tagging by using nm-connection-editor\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_configuring-networkmanager-to-avoid-using-a-specific-profile-to-provide-a-default-gateway_managing-the-default-gateway-setting\" title=\"25.8. Configuring NetworkManager to avoid using a specific profile to provide a default gateway\">Configuring NetworkManager to avoid using a specific profile to provide a default gateway\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/5314671\">How to configure a bridge with VLAN information?\u003C/a> (Red Hat Knowledgebase)\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-network-bridge-by-using-nmstatectl_configuring-a-network-bridge\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">6.5. Configuring a network bridge by using \u003Ccode class=\"literal\">nmstatectl\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tUse the \u003Ccode class=\"literal\">nmstatectl\u003C/code> utility to configure a network bridge through the Nmstate API. The Nmstate API ensures that, after setting the configuration, the result matches the configuration file. If anything fails, \u003Ccode class=\"literal\">nmstatectl\u003C/code> automatically rolls back the changes to avoid leaving the system in an incorrect state.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tDepending on your environment, adjust the YAML file accordingly. For example, to use different devices than Ethernet adapters in the bridge, adapt the \u003Ccode class=\"literal\">base-iface\u003C/code> attribute and \u003Ccode class=\"literal\">type\u003C/code> attributes of the ports you use in the bridge.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTwo or more physical or virtual network devices are installed on the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo use Ethernet devices as ports in the bridge, the physical or virtual Ethernet devices must be installed on the server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo use team, bond, or VLAN devices as ports in the bridge, set the interface name in the \u003Ccode class=\"literal\">port\u003C/code> list, and define the corresponding interfaces.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">nmstate\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a YAML file, for example \u003Ccode class=\"literal\">~/create-bridge.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\ninterfaces:\n- name: bridge0\n  type: linux-bridge\n  state: up\n  ipv4:\n    enabled: true\n    address:\n    - ip: 192.0.2.1\n      prefix-length: 24\n    dhcp: false\n  ipv6:\n    enabled: true\n    address:\n    - ip: 2001:db8:1::1\n      prefix-length: 64\n    autoconf: false\n    dhcp: false\n  bridge:\n    options:\n      stp:\n        enabled: true\n    port:\n      - name: enp1s0\n      - name: enp7s0\n- name: enp1s0\n  type: ethernet\n  state: up\n- name: enp7s0\n  type: ethernet\n  state: up\n\nroutes:\n  config:\n  - destination: 0.0.0.0/0\n    next-hop-address: 192.0.2.254\n    next-hop-interface: bridge0\n  - destination: ::/0\n    next-hop-address: 2001:db8:1::fffe\n    next-hop-interface: bridge0\ndns-resolver:\n  config:\n    search:\n    - example.com\n    server:\n    - 192.0.2.200\n    - 2001:db8:1::ffbb\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThese settings define a network bridge with the following settings:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tNetwork interfaces in the bridge: \u003Ccode class=\"literal\">enp1s0\u003C/code> and \u003Ccode class=\"literal\">enp7s0\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSpanning Tree Protocol (STP): Enabled\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tStatic IPv4 address: \u003Ccode class=\"literal\">192.0.2.1\u003C/code> with the \u003Ccode class=\"literal\">/24\u003C/code> subnet mask\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tStatic IPv6 address: \u003Ccode class=\"literal\">2001:db8:1::1\u003C/code> with the \u003Ccode class=\"literal\">/64\u003C/code> subnet mask\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIPv4 default gateway: \u003Ccode class=\"literal\">192.0.2.254\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIPv6 default gateway: \u003Ccode class=\"literal\">2001:db8:1::fffe\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIPv4 DNS server: \u003Ccode class=\"literal\">192.0.2.200\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIPv6 DNS server: \u003Ccode class=\"literal\">2001:db8:1::ffbb\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tDNS search domain: \u003Ccode class=\"literal\">example.com\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tApply the settings to the system:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl apply ~/create-bridge.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the status of the devices and connections:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device status\u003C/strong>\u003C/span>\nDEVICE      TYPE      STATE      CONNECTION\nbridge0     bridge    \u003Cspan class=\"strong strong\">\u003Cstrong>connected\u003C/strong>\u003C/span>  bridge0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay all settings of the connection profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection show bridge0\u003C/strong>\u003C/span>\nconnection.id:              bridge0_\nconnection.uuid:            e2cc9206-75a2-4622-89cf-1252926060a9\nconnection.stable-id:       --\nconnection.type:            bridge\nconnection.interface-name:  bridge0\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the connection settings in YAML format:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl show bridge0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nmstatectl(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/nmstate/examples/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/5314671\">How to configure a bridge with VLAN information?\u003C/a> (Red Hat Knowledgebase)\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-network-bridge-by-using-the-network-rhel-system-role_configuring-a-network-bridge\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">6.6. Configuring a network bridge by using the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can connect multiple networks on layer 2 of the Open Systems Interconnection (OSI) model by creating a network bridge. To configure a bridge, create a connection profile in NetworkManager. By using Ansible and the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role to configure a bridge and, if a connection profile for the bridge’s parent device does not exists, the role can create it as well.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIf you want to assign IP addresses, gateways, and DNS settings to a bridge, configure them on the bridge and not on its ports.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles\">You have prepared the control node and the managed nodes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in to the control node as a user who can run playbooks on the managed nodes.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe account you use to connect to the managed nodes has \u003Ccode class=\"literal\">sudo\u003C/code> permissions on them.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTwo or more physical or virtual network devices are installed on the server.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a playbook file, for example \u003Ccode class=\"literal\">~/playbook.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\n- name: Configure the network\n  hosts: managed-node-01.example.com\n  tasks:\n    - name: Bridge connection profile with two Ethernet ports\n      ansible.builtin.include_role:\n        name: rhel-system-roles.network\n      vars:\n        network_connections:\n          # Bridge profile\n          - name: bridge0\n            type: bridge\n            interface_name: bridge0\n            ip:\n              dhcp4: yes\n              auto6: yes\n            state: up\n\n          # Port profile for the 1st Ethernet device\n          - name: bridge0-port1\n            interface_name: enp7s0\n            type: ethernet\n            controller: bridge0\n            port_type: bridge\n            state: up\n\n          # Port profile for the 2nd Ethernet device\n          - name: bridge0-port2\n            interface_name: enp8s0\n            type: ethernet\n            controller: bridge0\n            port_type: bridge\n            state: up\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe settings specified in the example playbook include the following:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">type: \u003Cspan class=\"emphasis\">\u003Cem>&lt;profile_type&gt;\u003C/em>\u003C/span>\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tSets the type of the profile to create. The example playbook creates three connection profiles: One for the bridge and two for the Ethernet devices.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">dhcp4: yes\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tEnables automatic IPv4 address assignment from DHCP, PPP, or similar services.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">auto6: yes\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tEnables IPv6 auto-configuration. By default, NetworkManager uses Router Advertisements. If the router announces the \u003Ccode class=\"literal\">managed\u003C/code> flag, NetworkManager requests an IPv6 address and prefix from a DHCPv6 server.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details about all variables used in the playbook, see the \u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file on the control node.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tValidate the playbook syntax:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --syntax-check ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that this command only validates the syntax and does not protect against a wrong but valid configuration.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the playbook:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the link status of Ethernet devices that are ports of a specific bridge:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ansible managed-node-01.example.com -m command -a 'ip link show master bridge0'\u003C/strong>\u003C/span>\nmanaged-node-01.example.com | CHANGED | rc=0 &gt;&gt;\n3: enp7s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel master bridge0 state UP mode DEFAULT group default qlen 1000\n    link/ether 52:54:00:62:61:0e brd ff:ff:ff:ff:ff:ff\n4: enp8s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel master bridge0 state UP mode DEFAULT group default qlen 1000\n    link/ether 52:54:00:9e:f1:ce brd ff:ff:ff:ff:ff:ff\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the status of Ethernet devices that are ports of any bridge device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ansible managed-node-01.example.com -m command -a 'bridge link show'\u003C/strong>\u003C/span>\nmanaged-node-01.example.com | CHANGED | rc=0 &gt;&gt;\n3: enp7s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge0 state forwarding priority 32 cost 100\n4: enp8s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 master bridge0 state listening priority 32 cost 100\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/rhel-system-roles/network/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-a-vpn-connection_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 7. Setting up an IPsec VPN\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\u003Cspan id=\"configuring-a-vpn-with-ipsec_configuring-and-managing-networking\">\u003C!--Empty-->\u003C/span>\n\t\t\u003C/p>\u003Cp class=\"_abstract _abstract\">\n\t\t\tA virtual private network (VPN) is a way of connecting to a local network over the internet. \u003Ccode class=\"literal\">IPsec\u003C/code> provided by \u003Ccode class=\"literal\">Libreswan\u003C/code> is the preferred method for creating a VPN. \u003Ccode class=\"literal\">Libreswan\u003C/code> is a user-space \u003Ccode class=\"literal\">IPsec\u003C/code> implementation for VPN. A VPN enables the communication between your LAN, and another, remote LAN by setting up a tunnel across an intermediate network such as the internet. For security reasons, a VPN tunnel always uses authentication and encryption. For cryptographic operations, \u003Ccode class=\"literal\">Libreswan\u003C/code> uses the \u003Ccode class=\"literal\">NSS\u003C/code> library.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"libreswan-as-an-ipsec-vpn-implementation_configuring-a-vpn-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.1. Libreswan as an IPsec VPN implementation\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIn RHEL, you can configure a Virtual Private Network (VPN) by using the IPsec protocol, which is supported by the Libreswan application. Libreswan is a continuation of the Openswan application, and many examples from the Openswan documentation are interchangeable with Libreswan.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe IPsec protocol for a VPN is configured using the Internet Key Exchange (IKE) protocol. The terms IPsec and IKE are used interchangeably. An IPsec VPN is also called an IKE VPN, IKEv2 VPN, XAUTH VPN, Cisco VPN or IKE/IPsec VPN. A variant of an IPsec VPN that also uses the Layer 2 Tunneling Protocol (L2TP) is usually called an L2TP/IPsec VPN, which requires the \u003Ccode class=\"literal\">xl2tpd\u003C/code> package provided by the \u003Ccode class=\"literal\">optional\u003C/code> repository.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tLibreswan is an open-source, user-space IKE implementation. IKE v1 and v2 are implemented as a user-level daemon. The IKE protocol is also encrypted. The IPsec protocol is implemented by the Linux kernel, and Libreswan configures the kernel to add and remove VPN tunnel configurations.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe IKE protocol uses UDP port 500 and 4500. The IPsec protocol consists of two protocols:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEncapsulated Security Payload (ESP), which has protocol number 50.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAuthenticated Header (AH), which has protocol number 51.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThe AH protocol is not recommended for use. Users of AH are recommended to migrate to ESP with null encryption.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe IPsec protocol provides two modes of operation:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTunnel Mode (the default)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTransport Mode.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tYou can configure the kernel with IPsec without IKE. This is called \u003Cspan class=\"emphasis\">\u003Cem>manual keying\u003C/em>\u003C/span>. You can also configure manual keying using the \u003Ccode class=\"literal command\">ip xfrm\u003C/code> commands, however, this is strongly discouraged for security reasons. Libreswan communicates with the Linux kernel using the Netlink interface. The kernel performs packet encryption and decryption.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tLibreswan uses the Network Security Services (NSS) cryptographic library. NSS is certified for use with the \u003Cspan class=\"emphasis\">\u003Cem>Federal Information Processing Standard\u003C/em>\u003C/span> (\u003Cspan class=\"emphasis\">\u003Cem>FIPS\u003C/em>\u003C/span>) Publication 140-2.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIKE/IPsec VPNs, implemented by Libreswan and the Linux kernel, is the only VPN technology recommended for use in RHEL. Do not use any other VPN technology without understanding the risks of doing so.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tIn RHEL, Libreswan follows \u003Cspan class=\"strong strong\">\u003Cstrong>system-wide cryptographic policies\u003C/strong>\u003C/span> by default. This ensures that Libreswan uses secure settings for current threat models including IKEv2 as a default protocol. See \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/security_hardening/using-the-system-wide-cryptographic-policies_security-hardening\">Using system-wide crypto policies\u003C/a> for more information.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tLibreswan does not use the terms \"source\" and \"destination\" or \"server\" and \"client\" because IKE/IPsec are peer to peer protocols. Instead, it uses the terms \"left\" and \"right\" to refer to end points (the hosts). This also allows you to use the same configuration on both end points in most cases. However, administrators usually choose to always use \"left\" for the local host and \"right\" for the remote host.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal option\">leftid\u003C/code> and \u003Ccode class=\"literal option\">rightid\u003C/code> options serve as identification of the respective hosts in the authentication process. See the \u003Ccode class=\"literal\">ipsec.conf(5)\u003C/code> man page for more information.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"con_authentication-methods-in-libreswan_configuring-a-vpn-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.2. Authentication methods in Libreswan\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tLibreswan supports several authentication methods, each of which fits a different scenario.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Pre-Shared key (PSK)\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>Pre-Shared Key\u003C/em>\u003C/span> (PSK) is the simplest authentication method. For security reasons, do not use PSKs shorter than 64 random characters. In FIPS mode, PSKs must comply with a minimum-strength requirement depending on the integrity algorithm used. You can set PSK by using the \u003Ccode class=\"literal\">authby=secret\u003C/code> connection.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Raw RSA keys\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>Raw RSA keys\u003C/em>\u003C/span> are commonly used for static host-to-host or subnet-to-subnet IPsec configurations. Each host is manually configured with the public RSA keys of all other hosts, and Libreswan sets up an IPsec tunnel between each pair of hosts. This method does not scale well for large numbers of hosts.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tYou can generate a raw RSA key on a host using the \u003Ccode class=\"literal\">ipsec newhostkey\u003C/code> command. You can list generated keys by using the \u003Ccode class=\"literal\">ipsec showhostkey\u003C/code> command. The \u003Ccode class=\"literal\">leftrsasigkey=\u003C/code> line is required for connection configurations that use CKA ID keys. Use the \u003Ccode class=\"literal\">authby=rsasig\u003C/code> connection option for raw RSA keys.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>X.509 certificates\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>X.509 certificates\u003C/em>\u003C/span> are commonly used for large-scale deployments with hosts that connect to a common IPsec gateway. A central \u003Cspan class=\"emphasis\">\u003Cem>certificate authority\u003C/em>\u003C/span> (CA) signs RSA certificates for hosts or users. This central CA is responsible for relaying trust, including the revocations of individual hosts or users.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tFor example, you can generate X.509 certificates using the \u003Ccode class=\"literal\">openssl\u003C/code> command and the NSS \u003Ccode class=\"literal\">certutil\u003C/code> command. Because Libreswan reads user certificates from the NSS database using the certificates' nickname in the \u003Ccode class=\"literal\">leftcert=\u003C/code> configuration option, provide a nickname when you create a certificate.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIf you use a custom CA certificate, you must import it to the Network Security Services (NSS) database. You can import any certificate in the PKCS #12 format to the Libreswan NSS database by using the \u003Ccode class=\"literal\">ipsec import\u003C/code> command.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tLibreswan requires an Internet Key Exchange (IKE) peer ID as a subject alternative name (SAN) for every peer certificate as described in \u003Ca class=\"link\" href=\"https://datatracker.ietf.org/doc/html/rfc4945#section-3.1\">section 3.1 of RFC 4945\u003C/a>. Disabling this check by changing the \u003Ccode class=\"literal\">require-id-on-certificated=\u003C/code> option can make the system vulnerable to man-in-the-middle attacks.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tUse the \u003Ccode class=\"literal\">authby=rsasig\u003C/code> connection option for authentication based on X.509 certificates using RSA with SHA-2. You can further limit it for ECDSA digital signatures using SHA-2 by setting \u003Ccode class=\"literal\">authby=\u003C/code> to \u003Ccode class=\"literal\">ecdsa\u003C/code> and RSA Probabilistic Signature Scheme (RSASSA-PSS) digital signatures based authentication with SHA-2 through \u003Ccode class=\"literal\">authby=rsa-sha2\u003C/code>. The default value is \u003Ccode class=\"literal\">authby=rsasig,ecdsa\u003C/code>.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe certificates and the \u003Ccode class=\"literal\">authby=\u003C/code> signature methods should match. This increases interoperability and preserves authentication in one digital signature system.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>NULL authentication\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>NULL authentication\u003C/em>\u003C/span> is used to gain mesh encryption without authentication. It protects against passive attacks but not against active attacks. However, because IKEv2 allows asymmetric authentication methods, NULL authentication can also be used for internet-scale opportunistic IPsec. In this model, clients authenticate the server, but servers do not authenticate the client. This model is similar to secure websites using TLS. Use \u003Ccode class=\"literal\">authby=null\u003C/code> for NULL authentication.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Protection against quantum computers\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tIn addition to the previously mentioned authentication methods, you can use the \u003Cspan class=\"emphasis\">\u003Cem>Post-quantum Pre-shared Key\u003C/em>\u003C/span> (PPK) method to protect against possible attacks by quantum computers. Individual clients or groups of clients can use their own PPK by specifying a PPK ID that corresponds to an out-of-band configured pre-shared key.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tUsing IKEv1 with pre-shared keys protects against quantum attackers. The redesign of IKEv2 does not offer this protection natively. Libreswan offers the use of a \u003Cspan class=\"emphasis\">\u003Cem>Post-quantum Pre-shared Key\u003C/em>\u003C/span> (PPK) to protect IKEv2 connections against quantum attacks.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo enable optional PPK support, add \u003Ccode class=\"literal option\">ppk=yes\u003C/code> to the connection definition. To require PPK, add \u003Ccode class=\"literal option\">ppk=insist\u003C/code>. Then, each client can be given a PPK ID with a secret value that is communicated out-of-band (and preferably quantum-safe). The PPK’s should be very strong in randomness and not based on dictionary words. The PPK ID and PPK data are stored in the \u003Ccode class=\"literal\">ipsec.secrets\u003C/code> file, for example:\n\t\t\t\u003C/p>\u003Cpre class=\"screen\">@west @east : PPKS \"user1\" \"thestringismeanttobearandomstr\"\u003C/pre>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal option\">PPKS\u003C/code> option refers to static PPKs. This experimental function uses one-time-pad-based Dynamic PPKs. Upon each connection, a new part of the one-time pad is used as the PPK. When used, that part of the dynamic PPK inside the file is overwritten with zeros to prevent re-use. If there is no more one-time-pad material left, the connection fails. See the \u003Ccode class=\"literal\">ipsec.secrets(5)\u003C/code> man page for more information.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe implementation of dynamic PPKs is provided as an unsupported Technology Preview. Use with caution.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"installing-libreswan_configuring-a-vpn-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.3. Installing Libreswan\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tBefore you can set a VPN through the Libreswan IPsec/IKE implementation, you must install the corresponding packages, start the \u003Ccode class=\"literal\">ipsec\u003C/code> service, and allow the service in your firewall.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">AppStream\u003C/code> repository is enabled.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the \u003Ccode class=\"literal package\">libreswan\u003C/code> packages:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install libreswan\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you are re-installing Libreswan, remove its old database files and create a new database:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl stop ipsec\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>rm /var/lib/ipsec/nss/*db\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec initnss\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart the \u003Ccode class=\"literal\">ipsec\u003C/code> service, and enable the service to be started automatically on boot:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable ipsec --now\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the firewall to allow 500 and 4500/UDP ports for the IKE, ESP, and AH protocols by adding the \u003Ccode class=\"literal\">ipsec\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>firewall-cmd --add-service=\"ipsec\"\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>firewall-cmd --runtime-to-permanent\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-a-host-to-host-vpn_configuring-a-vpn-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.4. Creating a host-to-host VPN\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can configure Libreswan to create a host-to-host IPsec VPN between two hosts referred to as \u003Cspan class=\"emphasis\">\u003Cem>left\u003C/em>\u003C/span> and \u003Cspan class=\"emphasis\">\u003Cem>right\u003C/em>\u003C/span> using authentication by raw RSA keys.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tLibreswan is installed and the \u003Ccode class=\"literal\">ipsec\u003C/code> service is started on each node.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tGenerate a raw RSA key pair on each host:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec newhostkey\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe previous step returned the generated key’s \u003Ccode class=\"literal\">ckaid\u003C/code>. Use that \u003Ccode class=\"literal\">ckaid\u003C/code> with the following command on \u003Cspan class=\"emphasis\">\u003Cem>left\u003C/em>\u003C/span>, for example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec showhostkey --left --ckaid 2d3ea57b61c9419dfd6cf43a1eb6cb306c0e857d\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe output of the previous command generated the \u003Ccode class=\"literal\">leftrsasigkey=\u003C/code> line required for the configuration. Do the same on the second host (\u003Cspan class=\"emphasis\">\u003Cem>right\u003C/em>\u003C/span>):\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec showhostkey --right --ckaid a9e1f6ce9ecd3608c24e8f701318383f41798f03\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the \u003Ccode class=\"literal filename\">/etc/ipsec.d/\u003C/code> directory, create a new \u003Ccode class=\"literal filename\">my_host-to-host.conf\u003C/code> file. Write the RSA host keys from the output of the \u003Ccode class=\"literal command\">ipsec showhostkey\u003C/code> commands in the previous step to the new file. For example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">conn mytunnel\n    leftid=@west\n    left=192.1.2.23\n    leftrsasigkey=0sAQOrlo+hOafUZDlCQmXFrje/oZm [...] W2n417C/4urYHQkCvuIQ==\n    rightid=@east\n    right=192.1.2.45\n    rightrsasigkey=0sAQO3fwC6nSSGgt64DWiYZzuHbc4 [...] D/v8t5YTQ==\n    authby=rsasig\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAfter importing keys, restart the \u003Ccode class=\"literal\">ipsec\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl restart ipsec\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLoad the connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec auto --add mytunnel\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEstablish the tunnel:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec auto --up mytunnel\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo automatically start the tunnel when the \u003Ccode class=\"literal\">ipsec\u003C/code> service is started, add the following line to the connection definition:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">auto=start\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-site-to-site-vpn_configuring-a-vpn-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.5. Configuring a site-to-site VPN\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo create a site-to-site IPsec VPN, by joining two networks, an IPsec tunnel between the two hosts, is created. The hosts thus act as the end points, which are configured to permit traffic from one or more subnets to pass through. Therefore you can think of the host as gateways to the remote portion of the network.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe configuration of the site-to-site VPN only differs from the host-to-host VPN in that one or more networks or subnets must be specified in the configuration file.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA \u003Ca class=\"link\" href=\"#creating-a-host-to-host-vpn_configuring-a-vpn-connection\" title=\"7.4. Creating a host-to-host VPN\">host-to-host VPN\u003C/a> is already configured.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCopy the file with the configuration of your host-to-host VPN to a new file, for example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cp /etc/ipsec.d/\u003Cspan class=\"emphasis\">\u003Cem>my_host-to-host.conf\u003C/em>\u003C/span> /etc/ipsec.d/\u003Cspan class=\"emphasis\">\u003Cem>my_site-to-site\u003C/em>\u003C/span>.conf\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the subnet configuration to the file created in the previous step, for example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">conn mysubnet\n     also=mytunnel\n     leftsubnet=192.0.1.0/24\n     rightsubnet=192.0.2.0/24\n     auto=start\n\nconn mysubnet6\n     also=mytunnel\n     leftsubnet=2001:db8:0:1::/64\n     rightsubnet=2001:db8:0:2::/64\n     auto=start\n\n# the following part of the configuration file is the same for both host-to-host and site-to-site connections:\n\nconn mytunnel\n    leftid=@west\n    left=192.1.2.23\n    leftrsasigkey=0sAQOrlo+hOafUZDlCQmXFrje/oZm [...] W2n417C/4urYHQkCvuIQ==\n    rightid=@east\n    right=192.1.2.45\n    rightrsasigkey=0sAQO3fwC6nSSGgt64DWiYZzuHbc4 [...] D/v8t5YTQ==\n    authby=rsasig\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-remote-access-vpn_configuring-a-vpn-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.6. Configuring a remote access VPN\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tRoad warriors are traveling users with mobile clients and a dynamically assigned IP address. The mobile clients authenticate using X.509 certificates.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe following example shows configuration for \u003Ccode class=\"literal\">IKEv2\u003C/code>, and it avoids using the \u003Ccode class=\"literal\">IKEv1\u003C/code> XAUTH protocol.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tOn the server:\n\t\t\t\u003C/p>\u003Cpre class=\"screen\">conn roadwarriors\n    ikev2=insist\n    # support (roaming) MOBIKE clients (RFC 4555)\n    mobike=yes\n    fragmentation=yes\n    left=1.2.3.4\n    # if access to the LAN is given, enable this, otherwise use 0.0.0.0/0\n    # leftsubnet=10.10.0.0/16\n    leftsubnet=0.0.0.0/0\n    leftcert=gw.example.com\n    leftid=%fromcert\n    leftxauthserver=yes\n    leftmodecfgserver=yes\n    right=%any\n    # trust our own Certificate Agency\n    rightca=%same\n    # pick an IP address pool to assign to remote users\n    # 100.64.0.0/16 prevents RFC1918 clashes when remote users are behind NAT\n    rightaddresspool=100.64.13.100-100.64.13.254\n    # if you want remote clients to use some local DNS zones and servers\n    modecfgdns=\"1.2.3.4, 5.6.7.8\"\n    modecfgdomains=\"internal.company.com, corp\"\n    rightxauthclient=yes\n    rightmodecfgclient=yes\n    authby=rsasig\n    # optionally, run the client X.509 ID through pam to allow or deny client\n    # pam-authorize=yes\n    # load connection, do not initiate\n    auto=add\n    # kill vanished roadwarriors\n    dpddelay=1m\n    dpdtimeout=5m\n    dpdaction=clear\u003C/pre>\u003Cp>\n\t\t\t\tOn the mobile client, the road warrior’s device, use a slight variation of the previous configuration:\n\t\t\t\u003C/p>\u003Cpre class=\"screen\">conn to-vpn-server\n    ikev2=insist\n    # pick up our dynamic IP\n    left=%defaultroute\n    leftsubnet=0.0.0.0/0\n    leftcert=myname.example.com\n    leftid=%fromcert\n    leftmodecfgclient=yes\n    # right can also be a DNS hostname\n    right=1.2.3.4\n    # if access to the remote LAN is required, enable this, otherwise use 0.0.0.0/0\n    # rightsubnet=10.10.0.0/16\n    rightsubnet=0.0.0.0/0\n    fragmentation=yes\n    # trust our own Certificate Agency\n    rightca=%same\n    authby=rsasig\n    # allow narrowing to the server’s suggested assigned IP and remote subnet\n    narrowing=yes\n    # support (roaming) MOBIKE clients (RFC 4555)\n    mobike=yes\n    # initiate connection\n    auto=start\u003C/pre>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-mesh-vpn_configuring-a-vpn-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.7. Configuring a mesh VPN\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tA mesh VPN network, which is also known as an \u003Cspan class=\"emphasis\">\u003Cem>any-to-any\u003C/em>\u003C/span> VPN, is a network where all nodes communicate using IPsec. The configuration allows for exceptions for nodes that cannot use IPsec. The mesh VPN network can be configured in two ways:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo require IPsec.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo prefer IPsec but allow a fallback to clear-text communication.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tAuthentication between the nodes can be based on X.509 certificates or on DNS Security Extensions (DNSSEC).\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can use any regular IKEv2 authentication method for \u003Cspan class=\"emphasis\">\u003Cem>opportunistic IPsec\u003C/em>\u003C/span>, because these connections are regular Libreswan configurations, except for the opportunistic IPsec that is defined by \u003Ccode class=\"literal\">right=%opportunisticgroup\u003C/code> entry. A common authentication method is for hosts to authenticate each other based on X.509 certificates using a commonly shared certification authority (CA). Cloud deployments typically issue certificates for each node in the cloud as part of the standard procedure.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tDo not use PreSharedKey (PSK) authentication because one compromised host would result in group PSK secret being compromised as well.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tYou can use NULL authentication to deploy encryption between nodes without authentication, which protects only against passive attackers.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe following procedure uses X.509 certificates. You can generate these certificates by using any kind of CA management system, such as the Dogtag Certificate System. Dogtag assumes that the certificates for each node are available in the PKCS #12 format (\u003Ccode class=\"literal\">.p12\u003C/code> files), which contain the private key, the node certificate, and the Root CA certificate used to validate other nodes' X.509 certificates.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tEach node has an identical configuration with the exception of its X.509 certificate. This allows for adding new nodes without reconfiguring any of the existing nodes in the network. The PKCS #12 files require a \"friendly name\", for which we use the name \"node\" so that the configuration files referencing the friendly name can be identical for all nodes.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tLibreswan is installed, and the \u003Ccode class=\"literal\">ipsec\u003C/code> service is started on each node.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA new NSS database is initialized.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you already have an old NSS database, remove the old database files:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl stop ipsec\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>rm /var/lib/ipsec/nss/*db\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tYou can initialize a new database with the following command:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec initnss\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn each node, import PKCS #12 files. This step requires the password used to generate the PKCS #12 files:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec import nodeXXX.p12\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the following three connection definitions for the \u003Ccode class=\"literal\">IPsec required\u003C/code> (private), \u003Ccode class=\"literal\">IPsec optional\u003C/code> (private-or-clear), and \u003Ccode class=\"literal\">No IPsec\u003C/code> (clear) profiles:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /etc/ipsec.d/mesh.conf\u003C/strong>\u003C/span>\nconn clear\n\tauto=ondemand \u003Cspan id=\"CO1-1\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">1\u003C/span>\n\ttype=passthrough\n\tauthby=never\n\tleft=%defaultroute\n\tright=%group\n\nconn private\n\tauto=ondemand\n\ttype=transport\n\tauthby=rsasig\n\tfailureshunt=drop\n\tnegotiationshunt=drop\n\tikev2=insist\n\tleft=%defaultroute\n\tleftcert=\u003Cspan class=\"emphasis\">\u003Cem>nodeXXXX\u003C/em>\u003C/span>\n\tleftid=%fromcert \u003Cspan id=\"CO1-2\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">2\u003C/span>\n\trightid=%fromcert\n\tright=%opportunisticgroup\n\nconn private-or-clear\n\tauto=ondemand\n\ttype=transport\n\tauthby=rsasig\n\tfailureshunt=passthrough\n\tnegotiationshunt=passthrough\n\t# left\n\tleft=%defaultroute\n\tleftcert=\u003Cspan class=\"emphasis\">\u003Cem>nodeXXXX\u003C/em>\u003C/span> \u003Cspan id=\"CO1-3\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">3\u003C/span>\n\tleftid=%fromcert\n\tleftrsasigkey=%cert\n\t# right\n\trightrsasigkey=%cert\n\trightid=%fromcert\n\tright=%opportunisticgroup\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"calloutlist\">\u003Cdl class=\"calloutlist\">\u003Cdt>\u003Ca href=\"#CO1-1\">\u003Cspan class=\"callout\">1\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">auto\u003C/code> variable has several options:\n\t\t\t\t\t\u003C/div>\u003Cp>\n\t\t\t\t\t\tYou can use the \u003Ccode class=\"literal\">ondemand\u003C/code> connection option with opportunistic IPsec to initiate the IPsec connection, or for explicitly configured connections that do not need to be active all the time. This option sets up a trap XFRM policy in the kernel, enabling the IPsec connection to begin when it receives the first packet that matches that policy.\n\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\tYou can effectively configure and manage your IPsec connections, whether you use Opportunistic IPsec or explicitly configured connections, by using the following options:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">The \u003Ccode class=\"literal\">add\u003C/code> option\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tLoads the connection configuration and prepares it for responding to remote initiations. However, the connection is not automatically initiated from the local side. You can manually start the IPsec connection by using the command \u003Ccode class=\"literal\">ipsec auto --up\u003C/code>.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">The \u003Ccode class=\"literal\">start\u003C/code> option\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tLoads the connection configuration and prepares it for responding to remote initiations. Additionally, it immediately initiates a connection to the remote peer. You can use this option for permanent and always active connections.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO1-2\">\u003Cspan class=\"callout\">2\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">leftid\u003C/code> and \u003Ccode class=\"literal\">rightid\u003C/code> variables identify the right and the left channel of the IPsec tunnel connection. You can use these variables to obtain the value of the local IP address or the subject DN of the local certificate, if you have configured one.\n\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO1-3\">\u003Cspan class=\"callout\">3\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">leftcert\u003C/code> variable defines the nickname of the NSS database that you want to use.\n\t\t\t\t\t\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" start=\"3\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd the IP address of the network to the corresponding category. For example, if all nodes reside in the \u003Ccode class=\"literal\">10.15.0.0/16\u003C/code> network, and all nodes must use IPsec encryption:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"10.15.0.0/16\" &gt;&gt; /etc/ipsec.d/policies/private\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo allow certain nodes, for example, \u003Ccode class=\"literal\">10.15.34.0/24\u003C/code>, to work with and without IPsec, add those nodes to the private-or-clear group:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"10.15.34.0/24\" &gt;&gt; /etc/ipsec.d/policies/private-or-clear\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo define a host, for example, \u003Ccode class=\"literal\">10.15.1.2\u003C/code>, which is not capable of IPsec into the clear group, use:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"10.15.1.2/32\" &gt;&gt; /etc/ipsec.d/policies/clear\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tYou can create the files in the \u003Ccode class=\"literal\">/etc/ipsec.d/policies\u003C/code> directory from a template for each new node, or you can provision them by using Puppet or Ansible.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tNote that every node has the same list of exceptions or different traffic flow expectations. Two nodes, therefore, might not be able to communicate because one requires IPsec and the other cannot use IPsec.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRestart the node to add it to the configured mesh:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl restart ipsec\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen an IPsec tunnel by using the \u003Ccode class=\"literal\">ping\u003C/code> command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping \u003Cspan class=\"emphasis\">\u003Cem>&lt;nodeYYY&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the NSS database with the imported certification:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>certutil -L -d sql:/etc/ipsec.d\u003C/strong>\u003C/span>\n\nCertificate Nickname    Trust Attributes\n                        SSL,S/MIME,JAR/XPI\n\nwest                    u,u,u\nca                      CT,,\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSee which tunnels are open on the node:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec trafficstatus\u003C/strong>\u003C/span>\n006 #2: \"private#10.15.0.0/16\"[1] ...\u003Cspan class=\"emphasis\">\u003Cem>&lt;nodeYYY&gt;\u003C/em>\u003C/span>, type=ESP, add_time=1691399301, inBytes=512, outBytes=512, maxBytes=2^63B, id='C=US, ST=NC, O=Example Organization, CN=east'\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">ipsec.conf(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor more information about the \u003Ccode class=\"literal\">authby\u003C/code> variable, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/securing_networks/configuring-a-vpn-with-ipsec_securing-networks#con_authentication-methods-in-libreswan_configuring-a-vpn-with-ipsec\">6.2. Authentication methods in Libreswan\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"deploying-a-fips-compliant-ipsec-vpn_configuring-a-vpn-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.8. Deploying a FIPS-compliant IPsec VPN\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can deploy a FIPS-compliant IPsec VPN solution with Libreswan. To do so, you can identify which cryptographic algorithms are available and which are disabled for Libreswan in FIPS mode.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">AppStream\u003C/code> repository is enabled.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the \u003Ccode class=\"literal package\">libreswan\u003C/code> packages:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install libreswan\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you are re-installing Libreswan, remove its old NSS database:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl stop ipsec\u003C/strong>\u003C/span>\n\n# \u003Cspan class=\"strong strong\">\u003Cstrong>rm /var/lib/ipsec/nss/*db\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart the \u003Ccode class=\"literal\">ipsec\u003C/code> service, and enable the service to be started automatically on boot:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable ipsec --now\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the firewall to allow \u003Ccode class=\"literal\">500\u003C/code> and \u003Ccode class=\"literal\">4500\u003C/code> UDP ports for the IKE, ESP, and AH protocols by adding the \u003Ccode class=\"literal\">ipsec\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>firewall-cmd --add-service=\"ipsec\"\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>firewall-cmd --runtime-to-permanent\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSwitch the system to FIPS mode:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>fips-mode-setup --enable\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRestart your system to allow the kernel to switch to FIPS mode:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>reboot\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfirm Libreswan is running in FIPS mode:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec whack --fipsstatus\u003C/strong>\u003C/span>\n000 FIPS mode enabled\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAlternatively, check entries for the \u003Ccode class=\"literal\">ipsec\u003C/code> unit in the \u003Ccode class=\"literal\">systemd\u003C/code> journal:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>journalctl -u ipsec\u003C/strong>\u003C/span>\n...\nJan 22 11:26:50 localhost.localdomain pluto[3076]: FIPS Mode: YES\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo see the available algorithms in FIPS mode:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec pluto --selftest 2&gt;&amp;1 | head -6\u003C/strong>\u003C/span>\nInitializing NSS using read-write database \"sql:/var/lib/ipsec/nss\"\nFIPS Mode: YES\nNSS crypto library initialized\nFIPS mode enabled for pluto daemon\nNSS library is running in FIPS mode\nFIPS HMAC integrity support [disabled]\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo query disabled algorithms in FIPS mode:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec pluto --selftest 2&gt;&amp;1 | grep disabled\u003C/strong>\u003C/span>\nEncryption algorithm CAMELLIA_CTR disabled; not FIPS compliant\nEncryption algorithm CAMELLIA_CBC disabled; not FIPS compliant\nEncryption algorithm NULL disabled; not FIPS compliant\nEncryption algorithm CHACHA20_POLY1305 disabled; not FIPS compliant\nHash algorithm MD5 disabled; not FIPS compliant\nPRF algorithm HMAC_MD5 disabled; not FIPS compliant\nPRF algorithm AES_XCBC disabled; not FIPS compliant\nIntegrity algorithm HMAC_MD5_96 disabled; not FIPS compliant\nIntegrity algorithm HMAC_SHA2_256_TRUNCBUG disabled; not FIPS compliant\nIntegrity algorithm AES_XCBC_96 disabled; not FIPS compliant\nDH algorithm MODP1536 disabled; not FIPS compliant\nDH algorithm DH31 disabled; not FIPS compliant\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo list all allowed algorithms and ciphers in FIPS mode:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec pluto --selftest 2&gt;&amp;1 | grep ESP | grep FIPS | sed \"s/^.*FIPS//\"\u003C/strong>\u003C/span>\naes_ccm, aes_ccm_c\naes_ccm_b\naes_ccm_a\nNSS(CBC)  3des\nNSS(GCM)  aes_gcm, aes_gcm_c\nNSS(GCM)  aes_gcm_b\nNSS(GCM)  aes_gcm_a\nNSS(CTR)  aesctr\nNSS(CBC)  aes\naes_gmac\nNSS       sha, sha1, sha1_96, hmac_sha1\nNSS       sha512, sha2_512, sha2_512_256, hmac_sha2_512\nNSS       sha384, sha2_384, sha2_384_192, hmac_sha2_384\nNSS       sha2, sha256, sha2_256, sha2_256_128, hmac_sha2_256\naes_cmac\nnull\nNSS(MODP) null, dh0\nNSS(MODP) dh14\nNSS(MODP) dh15\nNSS(MODP) dh16\nNSS(MODP) dh17\nNSS(MODP) dh18\nNSS(ECP)  ecp_256, ecp256\nNSS(ECP)  ecp_384, ecp384\nNSS(ECP)  ecp_521, ecp521\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/security_hardening/using-the-system-wide-cryptographic-policies_security-hardening\">Using system-wide cryptographic policies\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"protecting-the-ipsec-nss-database-by-a-password_configuring-a-vpn-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.9. Protecting the IPsec NSS database by a password\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tBy default, the IPsec service creates its Network Security Services (NSS) database with an empty password during the first start. To enhance security, you can add password protection.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">/var/lib/ipsec/nss/\u003C/code> directory contains NSS database files.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable password protection for the \u003Ccode class=\"literal\">NSS\u003C/code> database for Libreswan:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>certutil -N -d sql:/var/lib/ipsec/nss\u003C/strong>\u003C/span>\nEnter Password or Pin for \"NSS Certificate DB\":\nEnter a password which will be used to encrypt your keys.\nThe password should be at least 8 characters long,\nand should contain at least one non-alphabetic character.\n\nEnter new password:\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">/etc/ipsec.d/nsspassword\u003C/code> file that containins the password you have set in the previous step, for example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /etc/ipsec.d/nsspassword\u003C/strong>\u003C/span>\nNSS Certificate DB:_&lt;password&gt;_\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">nsspassword\u003C/code> file use the following syntax:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">\u003Cspan class=\"emphasis\">\u003Cem>&lt;token_1&gt;\u003C/em>\u003C/span>:\u003Cspan class=\"emphasis\">\u003Cem>&lt;password1&gt;\u003C/em>\u003C/span>\n\u003Cspan class=\"emphasis\">\u003Cem>&lt;token_2&gt;\u003C/em>\u003C/span>:\u003Cspan class=\"emphasis\">\u003Cem>&lt;password2&gt;\u003C/em>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe default NSS software token is \u003Ccode class=\"literal\">NSS Certificate DB\u003C/code>. If your system is running in FIPS mode, the name of the token is \u003Ccode class=\"literal\">NSS FIPS 140-2 Certificate DB\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDepending on your scenario, either start or restart the \u003Ccode class=\"literal\">ipsec\u003C/code> service after you finish the \u003Ccode class=\"literal\">nsspassword\u003C/code> file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl restart ipsec\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCheck that the \u003Ccode class=\"literal\">ipsec\u003C/code> service is running after you have added a non-empty password to its NSS database:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl status ipsec\u003C/strong>\u003C/span>\n● ipsec.service - Internet Key Exchange (IKE) Protocol Daemon for IPsec\n   Loaded: loaded (/usr/lib/systemd/system/ipsec.service; enabled; vendor preset: disable&gt;\n   Active: active (running)...\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCheck that the \u003Ccode class=\"literal\">Journal\u003C/code> log contains entries that confirm a successful initialization:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>journalctl -u ipsec\u003C/strong>\u003C/span>\n...\npluto[6214]: Initializing NSS using read-write database \"sql:/var/lib/ipsec/nss\"\npluto[6214]: NSS Password from file \"/etc/ipsec.d/nsspassword\" for token \"NSS Certificate DB\" with length 20 passed to NSS\npluto[6214]: NSS crypto library initialized\n...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">certutil(1)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFIPS 140-2 and FIPS 140-3 in the \u003Ca class=\"link\" href=\"https://access.redhat.com/articles/2918071#fips-140-2-and-fips-140-3-2\">Compliance Activities and Government Standards\u003C/a> Knowledgebase article.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-an-ipsec-vpn-to-use-tcp_configuring-a-vpn-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.10. Configuring an IPsec VPN to use TCP\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tLibreswan supports TCP encapsulation of IKE and IPsec packets as described in RFC 8229. With this feature, you can establish IPsec VPNs on networks that prevent traffic transmitted via UDP and Encapsulating Security Payload (ESP). You can configure VPN servers and clients to use TCP either as a fallback or as the main VPN transport protocol. Because TCP encapsulation has bigger performance costs, use TCP as the main VPN protocol only if UDP is permanently blocked in your scenario.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA \u003Ca class=\"link\" href=\"#configuring-a-remote-access-vpn_configuring-a-vpn-connection\" title=\"7.6. Configuring a remote access VPN\">remote-access VPN\u003C/a> is already configured.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the following option to the \u003Ccode class=\"literal\">/etc/ipsec.conf\u003C/code> file in the \u003Ccode class=\"literal\">config setup\u003C/code> section:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">listen-tcp=yes\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo use TCP encapsulation as a fallback option when the first attempt over UDP fails, add the following two options to the client’s connection definition:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">enable-tcp=fallback\ntcp-remoteport=4500\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAlternatively, if you know that UDP is permanently blocked, use the following options in the client’s connection configuration:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">enable-tcp=yes\ntcp-remoteport=4500\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://tools.ietf.org/html/rfc8229\">IETF RFC 8229: TCP Encapsulation of IKE and IPsec Packets\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-automatic-detection-and-usage-of-esp-hardware-offload-to-accelerate-an-ipsec-connection_configuring-a-vpn-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.11. Configuring automatic detection and usage of ESP hardware offload to accelerate an IPsec connection\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tOffloading Encapsulating Security Payload (ESP) to the hardware accelerates IPsec connections over Ethernet. By default, Libreswan detects if hardware supports this feature and, as a result, enables ESP hardware offload. In case that the feature was disabled or explicitly enabled, you can switch back to automatic detection.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe network card supports ESP hardware offload.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe network driver supports ESP hardware offload.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe IPsec connection is configured and works.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEdit the Libreswan configuration file in the \u003Ccode class=\"literal\">/etc/ipsec.d/\u003C/code> directory of the connection that should use automatic detection of ESP hardware offload support.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnsure the \u003Ccode class=\"literal\">nic-offload\u003C/code> parameter is not set in the connection’s settings.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you removed \u003Ccode class=\"literal\">nic-offload\u003C/code>, restart the \u003Ccode class=\"literal\">ipsec\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl restart ipsec\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the \u003Ccode class=\"literal\">tx_ipsec\u003C/code> and \u003Ccode class=\"literal\">rx_ipsec\u003C/code> counters of the Ethernet device the IPsec connection uses:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ethtool -S \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> | egrep \"_ipsec\"\u003C/strong>\u003C/span>\n     tx_ipsec: 10\n     rx_ipsec: 10\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSend traffic through the IPsec tunnel. For example, ping a remote IP address:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping -c 5 \u003Cspan class=\"emphasis\">\u003Cem>remote_ip_address\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the \u003Ccode class=\"literal\">tx_ipsec\u003C/code> and \u003Ccode class=\"literal\">rx_ipsec\u003C/code> counters of the Ethernet device again:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ethtool -S \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> | egrep \"_ipsec\"\u003C/strong>\u003C/span>\n     tx_ipsec: 15\n     rx_ipsec: 15\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the counter values have increased, ESP hardware offload works.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/securing_networks/configuring-a-vpn-with-ipsec_securing-networks\">Configuring a VPN with IPsec\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-esp-hardware-offload-on-a-bond-to-accelerate-an-ipsec-connection_configuring-a-vpn-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.12. Configuring ESP hardware offload on a bond to accelerate an IPsec connection\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tOffloading Encapsulating Security Payload (ESP) to the hardware accelerates IPsec connections. If you use a network bond for fail-over reasons, the requirements and the procedure to configure ESP hardware offload are different from those using a regular Ethernet device. For example, in this scenario, you enable the offload support on the bond, and the kernel applies the settings to the ports of the bond.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAll network cards in the bond support ESP hardware offload. Use the \u003Ccode class=\"literal\">ethtool -k \u003Cspan class=\"emphasis\">\u003Cem>&lt;interface_name&gt;\u003C/em>\u003C/span> | grep \"esp-hw-offload\"\u003C/code> command to verify whether each bond port supports this feature.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe bond is configured and works.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe bond uses the \u003Ccode class=\"literal\">active-backup\u003C/code> mode. The bonding driver does not support any other modes for this feature.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe IPsec connection is configured and works.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable ESP hardware offload support on the network bond:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>bond0\u003C/em>\u003C/span> ethtool.feature-esp-hw-offload on\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis command enables ESP hardware offload support on the \u003Ccode class=\"literal systemitem\">bond0\u003C/code> connection.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReactivate the \u003Ccode class=\"literal systemitem\">bond0\u003C/code> connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>bond0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEdit the Libreswan configuration file in the \u003Ccode class=\"literal\">/etc/ipsec.d/\u003C/code> directory of the connection that should use ESP hardware offload, and append the \u003Ccode class=\"literal\">nic-offload=yes\u003C/code> statement to the connection entry:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">conn \u003Cspan class=\"emphasis\">\u003Cem>example\u003C/em>\u003C/span>\n    ...\n    \u003Cspan class=\"strong strong\">\u003Cstrong>nic-offload=yes\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRestart the \u003Ccode class=\"literal\">ipsec\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl restart ipsec\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tThe verification methods depend on various aspects, such as the kernel version and driver. For example, certain drivers provide counters, but their names can vary. See the documentation of your network driver for details.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tThe following verification steps work for the \u003Ccode class=\"literal\">ixgbe\u003C/code> driver on Red Hat Enterprise Linux 9:\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the active port of the bond:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grep \"Currently Active Slave\" /proc/net/bonding/\u003Cspan class=\"emphasis\">\u003Cem>bond0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nCurrently Active Slave: \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the \u003Ccode class=\"literal\">tx_ipsec\u003C/code> and \u003Ccode class=\"literal\">rx_ipsec\u003C/code> counters of the active port:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ethtool -S \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> | egrep \"_ipsec\"\u003C/strong>\u003C/span>\n     tx_ipsec: 10\n     rx_ipsec: 10\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSend traffic through the IPsec tunnel. For example, ping a remote IP address:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping -c 5 \u003Cspan class=\"emphasis\">\u003Cem>remote_ip_address\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the \u003Ccode class=\"literal\">tx_ipsec\u003C/code> and \u003Ccode class=\"literal\">rx_ipsec\u003C/code> counters of the active port again:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ethtool -S enp1s0 | egrep \"_ipsec\"\u003C/strong>\u003C/span>\n     tx_ipsec: 15\n     rx_ipsec: 15\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the counter values have increased, ESP hardware offload works.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-network-bonding_configuring-and-managing-networking\" title=\"Chapter 3. Configuring a network bond\">Configuring a network bond\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/securing_networks/configuring-a-vpn-connection_securing-networks\">Setting up an IPsec VPN\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"assembly_configuring-vpn-connections-with-ipsec-by-using-the-rhel-vpn-system-role_configuring-a-vpn-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.13. Configuring VPN connections with IPsec by using RHEL system roles\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tWith the \u003Ccode class=\"literal\">vpn\u003C/code> system role, you can configure VPN connections on RHEL systems by using Red Hat Ansible Automation Platform. You can use it to set up host-to-host, network-to-network, VPN Remote Access Server, and mesh configurations.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor host-to-host connections, the role sets up a VPN tunnel between each pair of hosts in the list of \u003Ccode class=\"literal\">vpn_connections\u003C/code> using the default parameters, including generating keys as needed. Alternatively, you can configure it to create an opportunistic mesh configuration between all hosts listed. The role assumes that the names of the hosts under \u003Ccode class=\"literal\">hosts\u003C/code> are the same as the names of the hosts used in the Ansible inventory, and that you can use those names to configure the tunnels.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe \u003Ccode class=\"literal\">vpn\u003C/code> RHEL system role currently supports only Libreswan, which is an IPsec implementation, as the VPN provider.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"proc_creating-a-host-to-host-vpn-with-ipsec-using-the-vpn-system-role_assembly_configuring-vpn-connections-with-ipsec-by-using-the-rhel-vpn-system-role\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">7.13.1. Creating a host-to-host VPN with IPsec by using the \u003Ccode class=\"literal\">vpn\u003C/code> RHEL system role\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tYou can use the \u003Ccode class=\"literal\">vpn\u003C/code> system role to configure host-to-host connections by running an Ansible playbook on the control node, which configures all managed nodes listed in an inventory file.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles\">You have prepared the control node and the managed nodes\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou are logged in to the control node as a user who can run playbooks on the managed nodes.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe account you use to connect to the managed nodes has \u003Ccode class=\"literal\">sudo\u003C/code> permissions on them.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tCreate a playbook file, for example \u003Ccode class=\"literal\">~/playbook.yml\u003C/code>, with the following content:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">- name: Host to host VPN\n  hosts: managed-node-01.example.com, managed-node-02.example.com\n  roles:\n    - rhel-system-roles.vpn\n  vars:\n    vpn_connections:\n      - hosts:\n          managed-node-01.example.com:\n          managed-node-02.example.com:\n    vpn_manage_firewall: true\n    vpn_manage_selinux: true\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThis playbook configures the connection \u003Ccode class=\"literal\">managed-node-01.example.com-to-managed-node-02.example.com\u003C/code> by using pre-shared key authentication with keys auto-generated by the system role. Because \u003Ccode class=\"literal\">vpn_manage_firewall\u003C/code> and \u003Ccode class=\"literal\">vpn_manage_selinux\u003C/code> are both set to \u003Ccode class=\"literal\">true\u003C/code>, the \u003Ccode class=\"literal\">vpn\u003C/code> role uses the \u003Ccode class=\"literal\">firewall\u003C/code> and \u003Ccode class=\"literal\">selinux\u003C/code> roles to manage the ports used by the \u003Ccode class=\"literal\">vpn\u003C/code> role.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo configure connections from managed hosts to external hosts that are not listed in the inventory file, add the following section to the \u003Ccode class=\"literal\">vpn_connections\u003C/code> list of hosts:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">    vpn_connections:\n      - hosts:\n          managed-node-01.example.com:\n          \u003Cspan class=\"strong strong\">\u003Cstrong>\u003Cspan class=\"emphasis\">\u003Cem>&lt;external_node&gt;\u003C/em>\u003C/span>:\u003C/strong>\u003C/span>\n            \u003Cspan class=\"strong strong\">\u003Cstrong>hostname: \u003Cspan class=\"emphasis\">\u003Cem>&lt;IP_address_or_hostname&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThis configures one additional connection: \u003Ccode class=\"literal\">managed-node-01.example.com-to-\u003Cspan class=\"emphasis\">\u003Cem>&lt;external_node&gt;\u003C/em>\u003C/span>\u003C/code>\n\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tThe connections are configured only on the managed nodes and not on the external node.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: You can specify multiple VPN connections for the managed nodes by using additional sections within \u003Ccode class=\"literal\">vpn_connections\u003C/code>, for example, a control plane and a data plane:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">- name: Multiple VPN\n  hosts: managed-node-01.example.com, managed-node-02.example.com\n  roles:\n    - rhel-system-roles.vpn\n  vars:\n    vpn_connections:\n      - name: control_plane_vpn\n        hosts:\n          managed-node-01.example.com:\n            hostname: 192.0.2.0 # IP for the control plane\n          managed-node-02.example.com:\n            hostname: 192.0.2.1\n      - name: data_plane_vpn\n        hosts:\n          managed-node-01.example.com:\n            hostname: 10.0.0.1 # IP for the data plane\n          managed-node-02.example.com:\n            hostname: 10.0.0.2\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tValidate the playbook syntax:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --syntax-check ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tNote that this command only validates the syntax and does not protect against a wrong but valid configuration.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tRun the playbook:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOn the managed nodes, confirm that the connection is successfully loaded:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec status | grep \u003Cspan class=\"emphasis\">\u003Cem>&lt;connection_name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tReplace \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>&lt;connection_name&gt;\u003C/em>\u003C/span>\u003C/code> with the name of the connection from this node, for example \u003Ccode class=\"literal\">managed_node1-to-managed_node2\u003C/code>.\n\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tBy default, the role generates a descriptive name for each connection it creates from the perspective of each system. For example, when creating a connection between \u003Ccode class=\"literal\">managed_node1\u003C/code> and \u003Ccode class=\"literal\">managed_node2\u003C/code>, the descriptive name of this connection on \u003Ccode class=\"literal\">managed_node1\u003C/code> is \u003Ccode class=\"literal\">managed_node1-to-managed_node2\u003C/code> but on \u003Ccode class=\"literal\">managed_node2\u003C/code> the connection is named \u003Ccode class=\"literal\">managed_node2-to-managed_node1\u003C/code>.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOn the managed nodes, confirm that the connection is successfully started:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec trafficstatus | grep \u003Cspan class=\"emphasis\">\u003Cem>&lt;connection_name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: If a connection does not successfully load, manually add the connection by entering the following command. This provides more specific information indicating why the connection failed to establish:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec auto --add \u003Cspan class=\"emphasis\">\u003Cem>&lt;connection_name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tAny errors that may occur during the process of loading and starting the connection are reported in the \u003Ccode class=\"literal\">/var/log/pluto.log\u003C/code> file. Because these logs are hard to parse, manually add the connection to obtain log messages from the standard output instead.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.vpn/README.md\u003C/code> file\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/rhel-system-roles/vpn/\u003C/code> directory\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_creating-an-opportunistic-mesh-vpn-connection-with-ipsec-by-using-the-vpn-system-role_assembly_configuring-vpn-connections-with-ipsec-by-using-the-rhel-vpn-system-role\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">7.13.2. Creating an opportunistic mesh VPN connection with IPsec by using the \u003Ccode class=\"literal\">vpn\u003C/code> RHEL system role\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tYou can use the \u003Ccode class=\"literal\">vpn\u003C/code> system role to configure an opportunistic mesh VPN connection that uses certificates for authentication by running an Ansible playbook on the control node, which will configure all the managed nodes listed in an inventory file.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles\">You have prepared the control node and the managed nodes\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou are logged in to the control node as a user who can run playbooks on the managed nodes.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe account you use to connect to the managed nodes has \u003Ccode class=\"literal\">sudo\u003C/code> permissions on them.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe IPsec Network Security Services (NSS) crypto library in the \u003Ccode class=\"literal\">/etc/ipsec.d/\u003C/code> directory contains the necessary certificates.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tCreate a playbook file, for example \u003Ccode class=\"literal\">~/playbook.yml\u003C/code>, with the following content:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">- name: \u003Cspan class=\"emphasis\">\u003Cem>Mesh VPN\u003C/em>\u003C/span>\n  hosts: managed-node-01.example.com, managed-node-02.example.com, managed-node-03.example.com\n  roles:\n    - rhel-system-roles.vpn\n  vars:\n    vpn_connections:\n      - opportunistic: true\n        auth_method: cert\n        policies:\n          - policy: private\n            cidr: default\n          - policy: private-or-clear\n            cidr: 198.51.100.0/24\n          - policy: private\n            cidr: 192.0.2.0/24\n          - policy: clear\n            cidr: 192.0.2.7/32\n    vpn_manage_firewall: true\n    vpn_manage_selinux: true\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tAuthentication with certificates is configured by defining the \u003Ccode class=\"literal\">auth_method: cert\u003C/code> parameter in the playbook. By default, the node name is used as the certificate nickname. In this example, this is \u003Ccode class=\"literal\">managed-node-01.example.com\u003C/code>. You can define different certificate names by using the \u003Ccode class=\"literal\">cert_name\u003C/code> attribute in your inventory.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn this example procedure, the control node, which is the system from which you will run the Ansible playbook, shares the same classless inter-domain routing (CIDR) number as both of the managed nodes (192.0.2.0/24) and has the IP address 192.0.2.7. Therefore, the control node falls under the private policy which is automatically created for CIDR 192.0.2.0/24.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo prevent SSH connection loss during the play, a clear policy for the control node is included in the list of policies. Note that there is also an item in the policies list where the CIDR is equal to default. This is because this playbook overrides the rule from the default policy to make it private instead of private-or-clear.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tBecause \u003Ccode class=\"literal\">vpn_manage_firewall\u003C/code> and \u003Ccode class=\"literal\">vpn_manage_selinux\u003C/code> are both set to \u003Ccode class=\"literal\">true\u003C/code>, the \u003Ccode class=\"literal\">vpn\u003C/code> role uses the \u003Ccode class=\"literal\">firewall\u003C/code> and \u003Ccode class=\"literal\">selinux\u003C/code> roles to manage the ports used by the \u003Ccode class=\"literal\">vpn\u003C/code> role.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tValidate the playbook syntax:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --syntax-check ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tNote that this command only validates the syntax and does not protect against a wrong but valid configuration.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tRun the playbook:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.vpn/README.md\u003C/code> file\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/rhel-system-roles/vpn/\u003C/code> directory\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"configuring-ipsec-connections-that-opt-out-of-the-system-wide-crypto-policies_configuring-a-vpn-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.14. Configuring IPsec connections that opt out of the system-wide crypto policies\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"_abstract _abstract\">\u003Cp class=\"title\">\u003Cstrong>Overriding system-wide crypto-policies for a connection\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tThe RHEL system-wide cryptographic policies create a special connection called \u003Ccode class=\"literal\">%default\u003C/code>. This connection contains the default values for the \u003Ccode class=\"literal\">ikev2\u003C/code>, \u003Ccode class=\"literal\">esp\u003C/code>, and \u003Ccode class=\"literal\">ike\u003C/code> options. However, you can override the default values by specifying the mentioned option in the connection configuration file.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tFor example, the following configuration allows connections that use IKEv1 with AES and SHA-1 or SHA-2, and IPsec (ESP) with either AES-GCM or AES-CBC:\n\t\t\t\u003C/p>\u003Cpre class=\"screen\">conn MyExample\n  ...\n  ikev2=never\n  ike=aes-sha2,aes-sha1;modp2048\n  esp=aes_gcm,aes-sha2,aes-sha1\n  ...\u003C/pre>\u003Cp>\n\t\t\t\tNote that AES-GCM is available for IPsec (ESP) and for IKEv2, but not for IKEv1.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Disabling system-wide crypto policies for all connections\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tTo disable system-wide crypto policies for all IPsec connections, comment out the following line in the \u003Ccode class=\"literal\">/etc/ipsec.conf\u003C/code> file:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cpre class=\"screen\">include /etc/crypto-policies/back-ends/libreswan.config\u003C/pre>\u003Cp>\n\t\t\t\tThen add the \u003Ccode class=\"literal\">ikev2=never\u003C/code> option to your connection configuration file.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/security_hardening/using-the-system-wide-cryptographic-policies_security-hardening\">Using system-wide cryptographic policies\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"ref_troubleshooting-ipsec-vpn-configurations_configuring-a-vpn-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.15. Troubleshooting IPsec VPN configurations\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tProblems related to IPsec VPN configurations most commonly occur due to several main reasons. If you are encountering such problems, you can check if the cause of the problem corresponds to any of the following scenarios, and apply the corresponding solution.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Basic connection troubleshooting\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tMost problems with VPN connections occur in new deployments, where administrators configured endpoints with mismatched configuration options. Also, a working configuration can suddenly stop working, often due to newly introduced incompatible values. This could be the result of an administrator changing the configuration. Alternatively, an administrator may have installed a firmware update or a package update with different default values for certain options, such as encryption algorithms.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tTo confirm that an IPsec VPN connection is established:\n\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec trafficstatus\u003C/strong>\u003C/span>\n006 #8: \"vpn.example.com\"[1] 192.0.2.1, type=ESP, add_time=1595296930, inBytes=5999, outBytes=3231, id='@vpn.example.com', lease=100.64.13.5/32\u003C/pre>\u003Cp>\n\t\t\t\tIf the output is empty or does not show an entry with the connection name, the tunnel is broken.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo check that the problem is in the connection:\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReload the \u003Cspan class=\"emphasis\">\u003Cem>vpn.example.com\u003C/em>\u003C/span> connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec auto --add \u003Cspan class=\"emphasis\">\u003Cem>vpn.example.com\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n002 added connection description \"vpn.example.com\"\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNext, initiate the VPN connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec auto --up \u003Cspan class=\"emphasis\">\u003Cem>vpn.example.com\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Firewall-related problems\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tThe most common problem is that a firewall on one of the IPsec endpoints or on a router between the endpoints is dropping all Internet Key Exchange (IKE) packets.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor IKEv2, an output similar to the following example indicates a problem with a firewall:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec auto --up \u003Cspan class=\"emphasis\">\u003Cem>vpn.example.com\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n181 \"vpn.example.com\"[1] 192.0.2.2 #15: initiating IKEv2 IKE SA\n181 \"vpn.example.com\"[1] 192.0.2.2 #15: STATE_PARENT_I1: sent v2I1, expected v2R1\n010 \"vpn.example.com\"[1] 192.0.2.2 #15: STATE_PARENT_I1: retransmission; will wait 0.5 seconds for response\n010 \"vpn.example.com\"[1] 192.0.2.2 #15: STATE_PARENT_I1: retransmission; will wait 1 seconds for response\n010 \"vpn.example.com\"[1] 192.0.2.2 #15: STATE_PARENT_I1: retransmission; will wait 2 seconds for\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor IKEv1, the output of the initiating command looks like:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec auto --up \u003Cspan class=\"emphasis\">\u003Cem>vpn.example.com\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n002 \"vpn.example.com\" #9: initiating Main Mode\n102 \"vpn.example.com\" #9: STATE_MAIN_I1: sent MI1, expecting MR1\n010 \"vpn.example.com\" #9: STATE_MAIN_I1: retransmission; will wait 0.5 seconds for response\n010 \"vpn.example.com\" #9: STATE_MAIN_I1: retransmission; will wait 1 seconds for response\n010 \"vpn.example.com\" #9: STATE_MAIN_I1: retransmission; will wait 2 seconds for response\n...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tBecause the IKE protocol, which is used to set up IPsec, is encrypted, you can troubleshoot only a limited subset of problems using the \u003Ccode class=\"literal\">tcpdump\u003C/code> tool. If a firewall is dropping IKE or IPsec packets, you can try to find the cause using the \u003Ccode class=\"literal\">tcpdump\u003C/code> utility. However, \u003Ccode class=\"literal\">tcpdump\u003C/code> cannot diagnose other problems with IPsec VPN connections.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo capture the negotiation of the VPN and all encrypted data on the \u003Ccode class=\"literal\">eth0\u003C/code> interface:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tcpdump -i eth0 -n -n esp or udp port 500 or udp port 4500 or tcp port 4500\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Mismatched algorithms, protocols, and policies\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tVPN connections require that the endpoints have matching IKE algorithms, IPsec algorithms, and IP address ranges. If a mismatch occurs, the connection fails. If you identify a mismatch by using one of the following methods, fix it by aligning algorithms, protocols, or policies.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the remote endpoint is not running IKE/IPsec, you can see an ICMP packet indicating it. For example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec auto --up \u003Cspan class=\"emphasis\">\u003Cem>vpn.example.com\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n...\n000 \"vpn.example.com\"[1] 192.0.2.2 #16: ERROR: asynchronous network error report on wlp2s0 (192.0.2.2:500), complainant 198.51.100.1: Connection refused [errno 111, origin ICMP type 3 code 3 (not authenticated)]\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tExample of mismatched IKE algorithms:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec auto --up vpn.example.com\u003C/strong>\u003C/span>\n...\n003 \"vpn.example.com\"[1] 193.110.157.148 #3: dropping unexpected IKE_SA_INIT message containing NO_PROPOSAL_CHOSEN notification; message payloads: N; missing payloads: SA,KE,Ni\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tExample of mismatched IPsec algorithms:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec auto --up vpn.example.com\u003C/strong>\u003C/span>\n...\n182 \"vpn.example.com\"[1] 193.110.157.148 #5: STATE_PARENT_I2: sent v2I2, expected v2R2 {auth=IKEv2 cipher=AES_GCM_16_256 integ=n/a prf=HMAC_SHA2_256 group=MODP2048}\n002 \"vpn.example.com\"[1] 193.110.157.148 #6: IKE_AUTH response contained the error notification NO_PROPOSAL_CHOSEN\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA mismatched IKE version could also result in the remote endpoint dropping the request without a response. This looks identical to a firewall dropping all IKE packets.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tExample of mismatched IP address ranges for IKEv2 (called Traffic Selectors - TS):\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec auto --up vpn.example.com\u003C/strong>\u003C/span>\n...\n1v2 \"vpn.example.com\" #1: STATE_PARENT_I2: sent v2I2, expected v2R2 {auth=IKEv2 cipher=AES_GCM_16_256 integ=n/a prf=HMAC_SHA2_512 group=MODP2048}\n002 \"vpn.example.com\" #2: IKE_AUTH response contained the error notification TS_UNACCEPTABLE\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tExample of mismatched IP address ranges for IKEv1:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec auto --up vpn.example.com\u003C/strong>\u003C/span>\n...\n031 \"vpn.example.com\" #2: STATE_QUICK_I1: 60 second timeout exceeded after 0 retransmits.  No acceptable response to our first Quick Mode message: perhaps peer likes no proposal\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tWhen using PreSharedKeys (PSK) in IKEv1, if both sides do not put in the same PSK, the entire IKE message becomes unreadable:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec auto --up vpn.example.com\u003C/strong>\u003C/span>\n...\n003 \"vpn.example.com\" #1: received Hash Payload does not match computed value\n223 \"vpn.example.com\" #1: sending notification INVALID_HASH_INFORMATION to 192.0.2.23:500\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn IKEv2, the mismatched-PSK error results in an AUTHENTICATION_FAILED message:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec auto --up vpn.example.com\u003C/strong>\u003C/span>\n...\n002 \"vpn.example.com\" #1: IKE SA authentication request rejected by peer: AUTHENTICATION_FAILED\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Maximum transmission unit\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tOther than firewalls blocking IKE or IPsec packets, the most common cause of networking problems relates to an increased packet size of encrypted packets. Network hardware fragments packets larger than the maximum transmission unit (MTU), for example, 1500 bytes. Often, the fragments are lost and the packets fail to re-assemble. This leads to intermittent failures, when a ping test, which uses small-sized packets, works but other traffic fails. In this case, you can establish an SSH session but the terminal freezes as soon as you use it, for example, by entering the 'ls -al /usr' command on the remote host.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tTo work around the problem, reduce MTU size by adding the \u003Ccode class=\"literal\">mtu=1400\u003C/code> option to the tunnel configuration file.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tAlternatively, for TCP connections, enable an iptables rule that changes the MSS value:\n\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>iptables -I FORWARD -p tcp --tcp-flags SYN,RST SYN -j TCPMSS --clamp-mss-to-pmtu\u003C/strong>\u003C/span>\u003C/pre>\u003Cp>\n\t\t\t\tIf the previous command does not solve the problem in your scenario, directly specify a lower size in the \u003Ccode class=\"literal\">set-mss\u003C/code> parameter:\n\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>iptables -I FORWARD -p tcp --tcp-flags SYN,RST SYN -j TCPMSS --set-mss 1380\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Network address translation (NAT)\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tWhen an IPsec host also serves as a NAT router, it could accidentally remap packets. The following example configuration demonstrates the problem:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cpre class=\"screen\">conn myvpn\n    left=172.16.0.1\n    leftsubnet=10.0.2.0/24\n    right=172.16.0.2\n    rightsubnet=192.168.0.0/16\n…\u003C/pre>\u003Cp>\n\t\t\t\tThe system with address 172.16.0.1 have a NAT rule:\n\t\t\t\u003C/p>\u003Cpre class=\"screen\">iptables -t nat -I POSTROUTING -o eth0 -j MASQUERADE\u003C/pre>\u003Cp>\n\t\t\t\tIf the system on address 10.0.2.33 sends a packet to 192.168.0.1, then the router translates the source 10.0.2.33 to 172.16.0.1 before it applies the IPsec encryption.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThen, the packet with the source address 10.0.2.33 no longer matches the \u003Ccode class=\"literal\">conn myvpn\u003C/code> configuration, and IPsec does not encrypt this packet.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo solve this problem, insert rules that exclude NAT for target IPsec subnet ranges on the router, in this example:\n\t\t\t\u003C/p>\u003Cpre class=\"screen\">iptables -t nat -I POSTROUTING -s 10.0.2.0/24 -d 192.168.0.0/16 -j RETURN\u003C/pre>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Kernel IPsec subsystem bugs\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tThe kernel IPsec subsystem might fail, for example, when a bug causes a desynchronizing of the IKE user space and the IPsec kernel. To check for such problems:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>cat /proc/net/xfrm_stat\u003C/strong>\u003C/span>\nXfrmInError                 0\nXfrmInBufferError           0\n...\u003C/pre>\u003Cp>\n\t\t\t\tAny non-zero value in the output of the previous command indicates a problem. If you encounter this problem, open a new \u003Ca class=\"link\" href=\"https://access.redhat.com/support\">support case\u003C/a>, and attach the output of the previous command along with the corresponding IKE logs.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Libreswan logs\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tLibreswan logs using the \u003Ccode class=\"literal\">syslog\u003C/code> protocol by default. You can use the \u003Ccode class=\"literal\">journalctl\u003C/code> command to find log entries related to IPsec. Because the corresponding entries to the log are sent by the \u003Ccode class=\"literal\">pluto\u003C/code> IKE daemon, search for the “pluto” keyword, for example:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>journalctl -b | grep pluto\u003C/strong>\u003C/span>\u003C/pre>\u003Cp>\n\t\t\t\tTo show a live log for the \u003Ccode class=\"literal\">ipsec\u003C/code> service:\n\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>journalctl -f -u ipsec\u003C/strong>\u003C/span>\u003C/pre>\u003Cp>\n\t\t\t\tIf the default level of logging does not reveal your configuration problem, enable debug logs by adding the \u003Ccode class=\"literal\">plutodebug=all\u003C/code> option to the \u003Ccode class=\"literal\">config setup\u003C/code> section in the \u003Ccode class=\"literal\">/etc/ipsec.conf\u003C/code> file.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tNote that debug logging produces a lot of entries, and it is possible that either the \u003Ccode class=\"literal\">journald\u003C/code> or \u003Ccode class=\"literal\">syslogd\u003C/code> service rate-limits the \u003Ccode class=\"literal\">syslog\u003C/code> messages. To ensure you have complete logs, redirect the logging to a file. Edit the \u003Ccode class=\"literal\">/etc/ipsec.conf\u003C/code>, and add the \u003Ccode class=\"literal\">logfile=/var/log/pluto.log\u003C/code> in the \u003Ccode class=\"literal\">config setup\u003C/code> section.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/assembly_troubleshooting-problems-using-log-files_configuring-basic-system-settings\">Troubleshooting problems by using log files\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">tcpdump(8)\u003C/code> and \u003Ccode class=\"literal\">ipsec.conf(5)\u003C/code> man pages.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_firewalls_and_packet_filters/using-and-configuring-firewalld_firewall-packet-filters\">Using and configuring firewalld\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-VPN-connection-with-control-center_configuring-a-vpn-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.16. Configuring a VPN connection with control-center\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIf you use Red Hat Enterprise Linux with a graphical interface, you can configure a VPN connection in the GNOME \u003Ccode class=\"literal\">control-center\u003C/code>.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">NetworkManager-libreswan-gnome\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress the \u003Ckbd class=\"keycap\">Super\u003C/kbd> key, type \u003Ccode class=\"literal\">Settings\u003C/code>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd> to open the \u003Ccode class=\"literal\">control-center\u003C/code> application.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the \u003Ccode class=\"literal\">Network\u003C/code> entry on the left.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick the \u003Ckbd class=\"keycap\">+\u003C/kbd> icon.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Ccode class=\"literal\">VPN\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSelect the \u003Ccode class=\"literal\">Identity\u003C/code> menu entry to see the basic configuration options:\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>General\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">Gateway\u003C/code> — The name or \u003Ccode class=\"literal\">IP\u003C/code> address of the remote VPN gateway.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Authentication\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">Type\u003C/code>\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">IKEv2 (Certificate)\u003C/code>- client is authenticated by certificate. It is more secure (default).\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">IKEv1 (XAUTH)\u003C/code> - client is authenticated by user name and password, or a pre-shared key (PSK).\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe following configuration settings are available under the \u003Ccode class=\"literal\">Advanced\u003C/code> section:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"figure\" id=\"figu-Advanced-options-of-a-VPN-connection\">\u003Cp class=\"title\">\u003Cstrong>Figure 7.1. Advanced options of a VPN connection\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/8bbdb7fbdba750f4225e1c151d3db025/networking_vpn_advanced_options.png\" alt=\"networking vpn advanced options\"/>\u003C/div>\u003C/div>\u003C/div>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tWhen configuring an IPsec-based VPN connection using the \u003Ccode class=\"literal\">gnome-control-center\u003C/code> application, the \u003Ccode class=\"literal\">Advanced\u003C/code> dialog displays the configuration, but it does not allow any changes. As a consequence, users cannot change any advanced IPsec options. Use the \u003Ccode class=\"literal\">nm-connection-editor\u003C/code> or \u003Ccode class=\"literal\">nmcli\u003C/code> tools instead to perform configuration of the advanced properties.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Identification\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Domain\u003C/code> — If required, enter the Domain Name.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Security\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Phase1 Algorithms\u003C/code> — corresponds to the \u003Ccode class=\"literal\">ike\u003C/code> Libreswan parameter — enter the algorithms to be used to authenticate and set up an encrypted channel.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Phase2 Algorithms\u003C/code> — corresponds to the \u003Ccode class=\"literal\">esp\u003C/code> Libreswan parameter — enter the algorithms to be used for the \u003Ccode class=\"literal\">IPsec\u003C/code> negotiations.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCheck the \u003Ccode class=\"literal\">Disable PFS\u003C/code> field to turn off Perfect Forward Secrecy (PFS) to ensure compatibility with old servers that do not support PFS.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Phase1 Lifetime\u003C/code> — corresponds to the \u003Ccode class=\"literal\">ikelifetime\u003C/code> Libreswan parameter — how long the key used to encrypt the traffic will be valid.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Phase2 Lifetime\u003C/code> — corresponds to the \u003Ccode class=\"literal\">salifetime\u003C/code> Libreswan parameter — how long a particular instance of a connection should last before expiring.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tNote that the encryption key should be changed from time to time for security reasons.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Remote network\u003C/code> — corresponds to the \u003Ccode class=\"literal\">rightsubnet\u003C/code> Libreswan parameter — the destination private remote network that should be reached through the VPN.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCheck the \u003Ccode class=\"literal\">narrowing\u003C/code> field to enable narrowing. Note that it is only effective in IKEv2 negotiation.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Enable fragmentation\u003C/code> — corresponds to the \u003Ccode class=\"literal\">fragmentation\u003C/code> Libreswan parameter — whether or not to allow IKE fragmentation. Valid values are \u003Ccode class=\"literal\">yes\u003C/code> (default) or \u003Ccode class=\"literal\">no\u003C/code>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Enable Mobike\u003C/code> — corresponds to the \u003Ccode class=\"literal\">mobike\u003C/code> Libreswan parameter — whether to allow Mobility and Multihoming Protocol (MOBIKE, RFC 4555) to enable a connection to migrate its endpoint without needing to restart the connection from scratch. This is used on mobile devices that switch between wired, wireless, or mobile data connections. The values are \u003Ccode class=\"literal\">no\u003C/code> (default) or \u003Ccode class=\"literal\">yes\u003C/code>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSelect the \u003Cspan class=\"guibutton\">IPv4\u003C/span> menu entry:\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>IPv4 Method\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Automatic (DHCP)\u003C/code> — Choose this option if the network you are connecting to uses a \u003Ccode class=\"literal\">DHCP\u003C/code> server to assign dynamic \u003Ccode class=\"literal\">IP\u003C/code> addresses.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Link-Local Only\u003C/code> — Choose this option if the network you are connecting to does not have a \u003Ccode class=\"literal\">DHCP\u003C/code> server and you do not want to assign \u003Ccode class=\"literal\">IP\u003C/code> addresses manually. Random addresses will be assigned as per \u003Cspan class=\"emphasis\">\u003Cem>\u003Cspan class=\"citetitle citetitle\">\u003Ca class=\"link\" href=\"http://www.rfc-editor.org/info/rfc3927\">RFC 3927\u003C/a>\u003C/span>\u003C/em>\u003C/span> with prefix \u003Ccode class=\"literal\">169.254/16\u003C/code>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Manual\u003C/code> — Choose this option if you want to assign \u003Ccode class=\"literal\">IP\u003C/code> addresses manually.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Disable\u003C/code> — \u003Ccode class=\"literal\">IPv4\u003C/code> is disabled for this connection.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>DNS\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIn the \u003Ccode class=\"literal\">DNS\u003C/code> section, when \u003Ccode class=\"literal\">Automatic\u003C/code> is \u003Ccode class=\"literal\">ON\u003C/code>, switch it to \u003Ccode class=\"literal\">OFF\u003C/code> to enter the IP address of a DNS server you want to use separating the IPs by comma.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Routes\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tNote that in the \u003Ccode class=\"literal\">Routes\u003C/code> section, when \u003Ccode class=\"literal\">Automatic\u003C/code> is \u003Ccode class=\"literal\">ON\u003C/code>, routes from DHCP are used, but you can also add additional static routes. When \u003Ccode class=\"literal\">OFF\u003C/code>, only static routes are used.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Address\u003C/code> — Enter the \u003Ccode class=\"literal\">IP\u003C/code> address of a remote network or host.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Netmask\u003C/code> — The netmask or prefix length of the \u003Ccode class=\"literal\">IP\u003C/code> address entered above.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Gateway\u003C/code> — The \u003Ccode class=\"literal\">IP\u003C/code> address of the gateway leading to the remote network or host entered above.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Metric\u003C/code> — A network cost, a preference value to give to this route. Lower values will be preferred over higher values.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Use this connection only for resources on its network\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSelect this check box to prevent the connection from becoming the default route. Selecting this option means that only traffic specifically destined for routes learned automatically over the connection or entered here manually is routed over the connection.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo configure \u003Ccode class=\"literal\">IPv6\u003C/code> settings in a \u003Ccode class=\"literal\">VPN\u003C/code> connection, select the \u003Cspan class=\"guibutton\">IPv6\u003C/span> menu entry:\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>IPv6 Method\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Automatic\u003C/code> — Choose this option to use \u003Ccode class=\"literal\">IPv6\u003C/code> Stateless Address AutoConfiguration (SLAAC) to create an automatic, stateless configuration based on the hardware address and Router Advertisements (RA).\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Automatic, DHCP only\u003C/code> — Choose this option to not use RA, but request information from \u003Ccode class=\"literal\">DHCPv6\u003C/code> directly to create a stateful configuration.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Link-Local Only\u003C/code> — Choose this option if the network you are connecting to does not have a \u003Ccode class=\"literal\">DHCP\u003C/code> server and you do not want to assign \u003Ccode class=\"literal\">IP\u003C/code> addresses manually. Random addresses will be assigned as per \u003Cspan class=\"emphasis\">\u003Cem>\u003Cspan class=\"citetitle citetitle\">\u003Ca class=\"link\" href=\"http://www.rfc-editor.org/info/rfc4862\">RFC 4862\u003C/a>\u003C/span>\u003C/em>\u003C/span> with prefix \u003Ccode class=\"literal\">FE80::0\u003C/code>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Manual\u003C/code> — Choose this option if you want to assign \u003Ccode class=\"literal\">IP\u003C/code> addresses manually.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Disable\u003C/code> — \u003Ccode class=\"literal\">IPv6\u003C/code> is disabled for this connection.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tNote that \u003Ccode class=\"literal\">DNS\u003C/code>, \u003Ccode class=\"literal\">Routes\u003C/code>, \u003Ccode class=\"literal\">Use this connection only for resources on its network\u003C/code> are common to \u003Ccode class=\"literal\">IPv4\u003C/code> settings.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOnce you have finished editing the \u003Ccode class=\"literal\">VPN\u003C/code> connection, click the \u003Cspan class=\"guibutton\">Add\u003C/span> button to customize the configuration or the \u003Cspan class=\"guibutton\">Apply\u003C/span> button to save it for the existing one.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSwitch the profile to \u003Ccode class=\"literal\">ON\u003C/code> to active the \u003Ccode class=\"literal\">VPN\u003C/code> connection.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings-libreswan(5)\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section _abstract\" id=\"configuring-a-vpn-connection-using-nm-connection-editor_configuring-a-vpn-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.17. Configuring a VPN connection using nm-connection-editor\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tIf you use Red Hat Enterprise Linux with a graphical interface, you can configure a VPN connection in the \u003Ccode class=\"literal\">nm-connection-editor\u003C/code> application.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">NetworkManager-libreswan-gnome\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you configure an Internet Key Exchange version 2 (IKEv2) connection:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe certificate is imported into the IPsec network security services (NSS) database.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe nickname of the certificate in the NSS database is known.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen a terminal, and enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>nm-connection-editor\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick the \u003Cspan class=\"guibutton\">+\u003C/span> button to add a new connection.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the \u003Ccode class=\"literal\">IPsec based VPN\u003C/code> connection type, and click \u003Cspan class=\"guibutton\">Create\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the \u003Ccode class=\"literal\">VPN\u003C/code> tab:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnter the host name or IP address of the VPN gateway into the \u003Ccode class=\"literal\">Gateway\u003C/code> field, and select an authentication type. Based on the authentication type, you must enter different additional information:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">IKEv2 (Certifiate)\u003C/code> authenticates the client by using a certificate, which is more secure. This setting requires the nickname of the certificate in the IPsec NSS database\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">IKEv1 (XAUTH)\u003C/code> authenticates the user by using a user name and password (pre-shared key). This setting requires that you enter the following values:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\tUser name\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\tPassword\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\tGroup name\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\tSecret\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf the remote server specifies a local identifier for the IKE exchange, enter the exact string in the \u003Ccode class=\"literal\">Remote ID\u003C/code> field. In the remote server runs Libreswan, this value is set in the server’s \u003Ccode class=\"literal\">leftid\u003C/code> parameter.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"inlinemediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/dbd1201152429f3672224d2020f5ffab/nm-connection-editor-vpn-tab.png\" alt=\"nm connection editor vpn tab\"/>\u003C/span>\n\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOptional: Configure additional settings by clicking the \u003Cspan class=\"guibutton\">Advanced\u003C/span> button. You can configure the following settings:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tIdentification\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Domain\u003C/code> — If required, enter the domain name.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tSecurity\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Phase1 Algorithms\u003C/code> corresponds to the \u003Ccode class=\"literal\">ike\u003C/code> Libreswan parameter. Enter the algorithms to be used to authenticate and set up an encrypted channel.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Phase2 Algorithms\u003C/code> corresponds to the \u003Ccode class=\"literal\">esp\u003C/code> Libreswan parameter. Enter the algorithms to be used for the \u003Ccode class=\"literal\">IPsec\u003C/code> negotiations.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\t\tCheck the \u003Ccode class=\"literal\">Disable PFS\u003C/code> field to turn off Perfect Forward Secrecy (PFS) to ensure compatibility with old servers that do not support PFS.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Phase1 Lifetime\u003C/code> corresponds to the \u003Ccode class=\"literal\">ikelifetime\u003C/code> Libreswan parameter. This parameter defines how long the key used to encrypt the traffic is valid.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Phase2 Lifetime\u003C/code> corresponds to the \u003Ccode class=\"literal\">salifetime\u003C/code> Libreswan parameter. This parameter defines how long a security association is valid.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tConnectivity\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Remote network\u003C/code> corresponds to the \u003Ccode class=\"literal\">rightsubnet\u003C/code> Libreswan parameter and defines the destination private remote network that should be reached through the VPN.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\t\tCheck the \u003Ccode class=\"literal\">narrowing\u003C/code> field to enable narrowing. Note that it is only effective in the IKEv2 negotiation.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Enable fragmentation\u003C/code> corresponds to the \u003Ccode class=\"literal\">fragmentation\u003C/code> Libreswan parameter and defines whether or not to allow IKE fragmentation. Valid values are \u003Ccode class=\"literal\">yes\u003C/code> (default) or \u003Ccode class=\"literal\">no\u003C/code>.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Enable Mobike\u003C/code> corresponds to the \u003Ccode class=\"literal\">mobike\u003C/code> Libreswan parameter. The parameter defines whether to allow Mobility and Multihoming Protocol (MOBIKE) (RFC 4555) to enable a connection to migrate its endpoint without needing to restart the connection from scratch. This is used on mobile devices that switch between wired, wireless or mobile data connections. The values are \u003Ccode class=\"literal\">no\u003C/code> (default) or \u003Ccode class=\"literal\">yes\u003C/code>.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the \u003Ccode class=\"literal\">IPv4 Settings\u003C/code> tab, select the IP assignment method and, optionally, set additional static addresses, DNS servers, search domains, and routes.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Cspan class=\"inlinemediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/df41fd675600971c8b41909d6b8a522e/IPsec-IPv4-tab.png\" alt=\"IPsec IPv4 tab\"/>\u003C/span>\n\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSave the connection.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClose \u003Ccode class=\"literal\">nm-connection-editor\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tWhen you add a new connection by clicking the \u003Cspan class=\"guibutton\">+\u003C/span> button, \u003Cspan class=\"strong strong\">\u003Cstrong>NetworkManager\u003C/strong>\u003C/span> creates a new configuration file for that connection and then opens the same dialog that is used for editing an existing connection. The difference between these dialogs is that an existing connection profile has a \u003Cspan class=\"strong strong\">\u003Cstrong>Details\u003C/strong>\u003C/span> menu entry.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings-libreswan(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl_configuring-a-vpn-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.18. Configuring an IPsec based VPN connection by using nmstatectl\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIPsec (Internet Protocol Security) is a security protocol suite, provided by \u003Ccode class=\"literal\">Libreswan\u003C/code>, for implementation of VPN. IPsec includes protocols to initiate authentication at the time of connection establishment and manage keys during the data transfer. When an application deploys in a network and communicates by using the IP protocol, IPsec can protect data communication.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo manage an IPsec-based configuration for authenticating VPN connections, you can use the \u003Ccode class=\"literal\">nmstatectl\u003C/code> utility. This utility provides command line access to a declarative API for host network management. The following are the authentication types for the \u003Ccode class=\"literal\">host-to-subnet\u003C/code> and \u003Ccode class=\"literal\">host-to-host\u003C/code> communication modes:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tHost-to-subnet PKI authentication\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tHost-to-subnet RSA authentication\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tHost-to-subnet PSK authentication\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tHost-to-host tunnel mode authentication\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tHost-to-host transport mode authentication\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"configuring-a-host-to-subnet-ipsec-vpn-with-pki-authentication-and-tunnel-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">7.18.1. Configuring a host-to-subnet IPSec VPN with PKI authentication and tunnel mode by using nmstatectl\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tIf you want to use encryption based on the trusted entity authentication in IPsec, Public Key Infrastructure (PKI) provides secure communication by using cryptographic keys between two hosts. Both communicating hosts generate private and public keys where each host maintains a private key by sharing public key with the trusted entity Certificate Authority (CA). The CA generates a digital certificate after verifying the authenticity. In case of encryption and decryption, the host uses a private key for encryption and public key for decryption.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tBy using Nmstate, a declarative API for network management, you can configure a PKI authentication-based IPsec connection. After setting the configuration, the Nmstate API ensures that the result matches with the configuration file. If anything fails, \u003Ccode class=\"literal\">nmstate\u003C/code> automatically rolls back the changes to avoid an incorrect state of the system.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tTo establish encrypted communication in \u003Ccode class=\"literal\">host-to-subnet\u003C/code> configuration, remote IPsec end provides another IP to host by using parameter \u003Ccode class=\"literal\">dhcp: true\u003C/code>. In the case of defining systems for \u003Ccode class=\"literal\">IPsec\u003C/code> in nmstate, the \u003Ccode class=\"literal\">left\u003C/code>-named system is the local host while the \u003Ccode class=\"literal\">right\u003C/code>-named system is the remote host. The following procedure needs to run on both hosts.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tBy using a password, you have generated a PKCS #12 file that stores certificates and cryptographic keys.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tInstall the required packages:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install nmstate libreswan NetworkManager-libreswan\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tRestart the NetworkManager service:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl restart NetworkManager\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tAs \u003Ccode class=\"literal\">Libreswan\u003C/code> was already installed, remove its old database files and re-create them:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl stop ipsec\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>rm /etc/ipsec.d/*db\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec initnss\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnable and start the \u003Ccode class=\"literal\">ipsec\u003C/code> service:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable --now ipsec\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tImport the PKCS#12 file:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec import node-example.p12\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tWhen importing the PKCS#12 file, enter the password that was used to create the file.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tCreate a YAML file, for example \u003Ccode class=\"literal\">~/create-pki-authentication.yml\u003C/code>, with the following content:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\ninterfaces:\n- name: 'example_ipsec_conn1'            \u003Cspan id=\"CO2-1\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">1\u003C/span>\n  type: ipsec\n  ipv4:\n    enabled: true\n    dhcp: true\n  libreswan:\n    ipsec-interface: 'yes'               \u003Cspan id=\"CO2-2\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">2\u003C/span>\n    left: '192.0.2.250'                  \u003Cspan id=\"CO2-3\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">3\u003C/span>\n    leftid: '%fromcert'                  \u003Cspan id=\"CO2-4\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">4\u003C/span>\n    leftcert: 'local-host.example.com'   \u003Cspan id=\"CO2-5\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">5\u003C/span>\n    right: '192.0.2.150'                 \u003Cspan id=\"CO2-6\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">6\u003C/span>\n    rightid: '%fromcert'                 \u003Cspan id=\"CO2-7\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">7\u003C/span>\n    ikev2: 'insist'                      \u003Cspan id=\"CO2-8\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">8\u003C/span>\n    ikelifetime: '24h'                   \u003Cspan id=\"CO2-9\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">9\u003C/span>\n    salifetime: '24h'                    \u003Cspan id=\"CO2-10\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">10\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe YAML file defines the following settings:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"calloutlist\">\u003Cdl class=\"calloutlist\">\u003Cdt>\u003Ca href=\"#CO2-1\">\u003Cspan class=\"callout\">1\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tAn IPsec connection name\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO2-2\">\u003Cspan class=\"callout\">2\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tThe value \u003Ccode class=\"literal\">yes\u003C/code> means \u003Ccode class=\"literal\">libreswan\u003C/code> creates an IPsec \u003Ccode class=\"literal\">xfrm\u003C/code> virtual interface \u003Ccode class=\"literal\">ipsec&lt;number&gt;\u003C/code> and automatically finds the next available number\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO2-3\">\u003Cspan class=\"callout\">3\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tA static IPv4 address of public network interface for a local host\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO2-4\">\u003Cspan class=\"callout\">4\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tOn a local host, the value of \u003Ccode class=\"literal\">%fromcert\u003C/code> sets the ID to a Distinguished Name (DN) that is fetched from a loaded certificate\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO2-5\">\u003Cspan class=\"callout\">5\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tA Distinguished Name (DN) of a local host’s public key\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO2-6\">\u003Cspan class=\"callout\">6\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tA static IPv4 address of public network interface for a remote host\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO2-7\">\u003Cspan class=\"callout\">7\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tOn a remote host, the value of \u003Ccode class=\"literal\">%fromcert\u003C/code> sets the ID to a Distinguished Name (DN) that is fetched from a loaded certificate.\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO2-8\">\u003Cspan class=\"callout\">8\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">insist\u003C/code> value accepts and receives only the Internet Key Exchange (IKEv2) protocol\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO2-9\">\u003Cspan class=\"callout\">9\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tThe duration of IKE protocol\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO2-10\">\u003Cspan class=\"callout\">10\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tThe duration of IPsec security association (SA)\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003C/dl>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tApply settings to the system:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl apply ~/create-pki-authentication.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tVerify IPsec status:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip xfrm status\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tVerify IPsec policies:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip xfrm policy\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">ipsec.conf(5)\u003C/code> man page on your system\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-host-to-subnet-ipsec-vpn-with-rsa-authentication-and-tunnel-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">7.18.2. Configuring a host-to-subnet IPSec VPN with RSA authentication and tunnel mode by using nmstatectl\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tIf you want to use asymmetric cryptography-based key authentication in IPsec, the RSA algorithm provides secure communication by using either of private and public keys for encryption and decryption between two hosts. This method uses a private key for encryption, and a public key for decryption.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tBy using Nmstate, a declarative API for network management, you can configure RSA-based IPsec authentication. After setting the configuration, the Nmstate API ensures that the result matches with the configuration file. If anything fails, \u003Ccode class=\"literal\">nmstate\u003C/code> automatically rolls back the changes to avoid an incorrect state of the system.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tTo establish encrypted communication in \u003Ccode class=\"literal\">host-to-subnet\u003C/code> configuration, remote IPsec end provides another IP to host by using parameter \u003Ccode class=\"literal\">dhcp: true\u003C/code>. In the case of defining systems for \u003Ccode class=\"literal\">IPsec\u003C/code> in nmstate, the \u003Ccode class=\"literal\">left\u003C/code>-named system is the local host while the \u003Ccode class=\"literal\">right\u003C/code>-named system is the remote host. The following procedure needs to run on both hosts.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tInstall the required packages:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install nmstate libreswan NetworkManager-libreswan\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tRestart the NetworkManager service:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl restart NetworkManager\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf \u003Ccode class=\"literal\">Libreswan\u003C/code> was already installed, remove its old database files and re-create them:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl stop ipsec\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>rm /etc/ipsec.d/*db\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec initnss\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tGenerate a RSA key pair on each host:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec newhostkey --output\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tDisplay the public keys:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec showhostkey --list\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe previous step returned the generated key \u003Ccode class=\"literal\">ckaid\u003C/code>. Use that \u003Ccode class=\"literal\">ckaid\u003C/code> with the following command on left, for example:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec showhostkey --left --ckaid \u003Cspan class=\"emphasis\">\u003Cem>&lt;0sAwEAAesFfVZqFzRA9F&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe output of the previous command generated the \u003Ccode class=\"literal\">leftrsasigkey=\u003C/code> line required for the configuration. Do the same on the second host (right):\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec showhostkey --right --ckaid \u003Cspan class=\"emphasis\">\u003Cem>&lt;0sAwEAAesFfVZqFzRA9E&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnable the \u003Ccode class=\"literal\">ipsec\u003C/code> service to automatically start it on boot:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable --now ipsec\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tCreate a YAML file, for example \u003Ccode class=\"literal\">~/create-rsa-authentication.yml\u003C/code>, with the following content:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\ninterfaces:\n- name: 'example_ipsec_conn1'               \u003Cspan id=\"CO3-1\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">1\u003C/span>\n  type: ipsec                               \u003Cspan id=\"CO3-2\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">2\u003C/span>\n  ipv4:\n    enabled: true\n    dhcp: true\n  libreswan:\n    ipsec-interface: '99'                   \u003Cspan id=\"CO3-3\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">3\u003C/span>\n    leftrsasigkey: '0sAwEAAesFfVZqFzRA9F'   \u003Cspan id=\"CO3-4\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">4\u003C/span>\n    left: '192.0.2.250'                     \u003Cspan id=\"CO3-5\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">5\u003C/span>\n    leftid: 'local-host-rsa.example.com'    \u003Cspan id=\"CO3-6\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">6\u003C/span>\n    right: '192.0.2.150'                    \u003Cspan id=\"CO3-7\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">7\u003C/span>\n    rightrsasigkey: '0sAwEAAesFfVZqFzRA9E'  \u003Cspan id=\"CO3-8\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">8\u003C/span>\n    rightid: 'remote-host-rsa.example.com'  \u003Cspan id=\"CO3-9\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">9\u003C/span>\n    ikev2: 'insist'                         \u003Cspan id=\"CO3-10\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">10\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe YAML file defines the following settings:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"calloutlist\">\u003Cdl class=\"calloutlist\">\u003Cdt>\u003Ca href=\"#CO3-1\">\u003Cspan class=\"callout\">1\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tAn IPsec connection name\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO3-2\">\u003Cspan class=\"callout\">2\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tAn interface name\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO3-3\">\u003Cspan class=\"callout\">3\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tThe value \u003Ccode class=\"literal\">99\u003C/code> means that \u003Ccode class=\"literal\">libreswan\u003C/code> creates an IPsec \u003Ccode class=\"literal\">xfrm\u003C/code> virtual interface \u003Ccode class=\"literal\">ipsec&lt;number&gt;\u003C/code> and automatically finds the next available number\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO3-4\">\u003Cspan class=\"callout\">4\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tThe RSA public key of a local host\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO3-5\">\u003Cspan class=\"callout\">5\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tA static IPv4 address of public network interface of a local host\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO3-6\">\u003Cspan class=\"callout\">6\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tA Distinguished Name (DN) for a local host\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO3-7\">\u003Cspan class=\"callout\">7\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tThe RSA public key of a remote host\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO3-8\">\u003Cspan class=\"callout\">8\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tA static IPv4 address of public network interface of a remote host\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO3-9\">\u003Cspan class=\"callout\">9\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tA Distinguished Name(DN) for a remote host\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO3-10\">\u003Cspan class=\"callout\">10\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">insist\u003C/code> value accepts and receives only the Internet Key Exchange (IKEv2) protocol\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003C/dl>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tApply the settings to the system:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl apply ~/create-rsa-authentication.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tDisplay the IP settings of the network interface:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip addr show example_ipsec_conn1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tVerify IPsec status:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip xfrm status\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tVerify IPsec policies:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip xfrm policy\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">ipsec.conf(5)\u003C/code> man page on your system\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-host-to-subnet-ipsec-vpn-with-psk-authentication-and-tunnel-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">7.18.3. Configuring a host-to-subnet IPSec VPN with PSK authentication and tunnel mode by using nmstatectl\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tIf you want to use encryption based on mutual authentication in IPsec, the Pre-Shared Key (PSK) method provides secure communication by using a secret key between two hosts. A file stores the secret key and the same key encrypts the data flowing through the tunnel.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tBy using Nmstate, a declarative API for network management, you can configure PSK-based IPsec authentication. After setting the configuration, the Nmstate API ensures that the result matches with the configuration file. If anything fails, \u003Ccode class=\"literal\">nmstate\u003C/code> automatically rolls back the changes to avoid incorrect state of the system.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tTo establish encrypted communication in \u003Ccode class=\"literal\">host-to-subnet\u003C/code> configuration, remote IPsec end provides another IP to host by using parameter \u003Ccode class=\"literal\">dhcp: true\u003C/code>. In the case of defining systems for \u003Ccode class=\"literal\">IPsec\u003C/code> in nmstate, the \u003Ccode class=\"literal\">left\u003C/code>-named system is the local host while the \u003Ccode class=\"literal\">right\u003C/code>-named system is the remote host. The following procedure needs to run on both hosts.\n\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tAs this method uses static strings for authentication and encryption, use it only for testing/development purposes.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tInstall the required packages:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install nmstate libreswan NetworkManager-libreswan\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tRestart the NetworkManager service:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl restart NetworkManager\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf \u003Ccode class=\"literal\">Libreswan\u003C/code> was already installed, remove its old database files and re-create them:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl stop ipsec\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>rm /etc/ipsec.d/*db\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec initnss\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnable the \u003Ccode class=\"literal\">ipsec\u003C/code> service to automatically start it on boot:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable --now ipsec\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tCreate a YAML file, for example \u003Ccode class=\"literal\">~/create-pks-authentication.yml\u003C/code>, with the following content:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\ninterfaces:\n- name: 'example_ipsec_conn1'           \u003Cspan id=\"CO4-1\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">1\u003C/span>\n  type: ipsec\n  ipv4:\n    enabled: true\n    dhcp: true\n  libreswan:\n    ipsec-interface: 'no'               \u003Cspan id=\"CO4-2\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">2\u003C/span>\n    right: '192.0.2.250'                \u003Cspan id=\"CO4-3\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">3\u003C/span>\n    rightid: 'remote-host.example.org'  \u003Cspan id=\"CO4-4\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">4\u003C/span>\n    left: '192.0.2.150'                 \u003Cspan id=\"CO4-5\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">5\u003C/span>\n    leftid: 'local-host.example.org'    \u003Cspan id=\"CO4-6\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">6\u003C/span>\n    psk: \"example_password\"\n    ikev2: 'insist'                     \u003Cspan id=\"CO4-7\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">7\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe YAML file defines the following settings:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"calloutlist\">\u003Cdl class=\"calloutlist\">\u003Cdt>\u003Ca href=\"#CO4-1\">\u003Cspan class=\"callout\">1\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tAn IPsec connection name\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO4-2\">\u003Cspan class=\"callout\">2\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tSetting \u003Ccode class=\"literal\">no\u003C/code> value indicates that \u003Ccode class=\"literal\">libreswan\u003C/code> creates only \u003Ccode class=\"literal\">xfrm\u003C/code> policies, and not a virtual \u003Ccode class=\"literal\">xfrm\u003C/code> interface\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO4-3\">\u003Cspan class=\"callout\">3\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tA static IPv4 address of public network interface of a remote host\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO4-4\">\u003Cspan class=\"callout\">4\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tA Distinguished Name (DN) for a remote host\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO4-5\">\u003Cspan class=\"callout\">5\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tA static IPv4 address of public network interface of a local host\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO4-6\">\u003Cspan class=\"callout\">6\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tA Distinguished Name (DN) for a local host\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO4-7\">\u003Cspan class=\"callout\">7\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">insist\u003C/code> value accepts and receives only the Internet Key Exchange (IKEv2) protocol\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003C/dl>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tApply the settings to the system:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl apply ~/create-pks-authentication.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tDisplay the IP settings of network interface:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip addr show example_ipsec_conn1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tVerify IPsec status:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip xfrm status\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tVerify IPsec policies:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip xfrm policy\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-host-to-host-ipsec-vpn-with-pki-authentication-and-tunnel-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">7.18.4. Configuring a host-to-host IPsec VPN with PKI authentication and tunnel mode by using nmstatectl\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tIPsec (Internet Protocol Security) is a security protocol suite to authenticate and encrypt IP communications within networks and devices. The \u003Ccode class=\"literal\">Libreswan\u003C/code> software provides an IPsec implementation for VPNs.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIn tunnel mode, the source and destination IP address of communication is encrypted in the IPsec tunnel. External network sniffers can only get left IP and right IP. In general, for tunnel mode, it supports \u003Ccode class=\"literal\">host-to-host\u003C/code>, \u003Ccode class=\"literal\">host-to-subnet\u003C/code>, and \u003Ccode class=\"literal\">subnet-to-subnet\u003C/code>. In this mode, a new IP packet encapsulates an existing packet along with its payload and header. Encapsulation in this mode protects IP data, source, and destination headers over an unsecure network. This mode is useful to transfer data in \u003Ccode class=\"literal\">subnet-to-subnet\u003C/code>, remote access connections, and untrusted networks, such as open public Wi-Fi networks. By default, IPsec establishes a secure channel between two sites in tunnel mode. With the following configuration, you can establish a VPN connection as a \u003Ccode class=\"literal\">host-to-host\u003C/code> architecture.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tBy using Nmstate, a declarative API for network management, you can configure an IPsec VPN connection. After setting the configuration, the Nmstate API ensures that the result matches with the configuration file. If anything fails, \u003Ccode class=\"literal\">nmstate\u003C/code> automatically rolls back the changes to avoid incorrect state of the system.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIn \u003Ccode class=\"literal\">host-to-host\u003C/code> configuration, you need to set \u003Ccode class=\"literal\">leftmodecfgclient: no\u003C/code> so that it can’t receive network configuration from the server, hence the value \u003Ccode class=\"literal\">no\u003C/code>. In the case of defining systems for \u003Ccode class=\"literal\">IPsec\u003C/code> in nmstate, the \u003Ccode class=\"literal\">left\u003C/code>-named system is the local host while the \u003Ccode class=\"literal\">right\u003C/code>-named system is the remote host. The following procedure needs to run on both hosts.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tBy using a password, you have generated a PKCS #12 file that stores certificates and cryptographic keys.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tInstall the required packages:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install nmstate libreswan NetworkManager-libreswan\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tRestart the NetworkManager service:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl restart NetworkManager\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tAs \u003Ccode class=\"literal\">Libreswan\u003C/code> was already installed, remove its old database files and re-create them:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl stop ipsec\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>rm /etc/ipsec.d/*db\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec initnss\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tImport the PKCS#12 file:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec import node-example.p12\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tWhen importing the PKCS#12 file, enter the password that was used to generate the file.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnable and start the \u003Ccode class=\"literal\">ipsec\u003C/code> service:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable --now ipsec\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tCreate a YAML file, for example \u003Ccode class=\"literal\">~/create-p2p-vpn-authentication.yml\u003C/code>, with the following content:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\ninterfaces:\n- name: 'example_ipsec_conn1'             \u003Cspan id=\"CO5-1\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">1\u003C/span>\n  type: ipsec\n  libreswan:\n    left: '192.0.2.250'                   \u003Cspan id=\"CO5-2\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">2\u003C/span>\n    leftid:  'local-host.example.com'     \u003Cspan id=\"CO5-3\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">3\u003C/span>\n    leftcert: 'local-host.example.com'    \u003Cspan id=\"CO5-4\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">4\u003C/span>\n    leftmodecfgclient: 'no'               \u003Cspan id=\"CO5-5\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">5\u003C/span>\n    right: '192.0.2.150'                  \u003Cspan id=\"CO5-6\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">6\u003C/span>\n    rightid: 'remote-host.example.com'    \u003Cspan id=\"CO5-7\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">7\u003C/span>\n    rightsubnet: '192.0.2.150/32'         \u003Cspan id=\"CO5-8\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">8\u003C/span>\n    ikev2: 'insist'                       \u003Cspan id=\"CO5-9\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">9\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe YAML file defines the following settings:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"calloutlist\">\u003Cdl class=\"calloutlist\">\u003Cdt>\u003Ca href=\"#CO5-1\">\u003Cspan class=\"callout\">1\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tAn IPsec connection name\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO5-2\">\u003Cspan class=\"callout\">2\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tA static IPv4 address of public network interface for a local host\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO5-3\">\u003Cspan class=\"callout\">3\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tA distinguished Name (DN) of a local host\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO5-4\">\u003Cspan class=\"callout\">4\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tA certificate name installed on a local host\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO5-5\">\u003Cspan class=\"callout\">5\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tThe value for not to retrieve client configuration from a remote host\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO5-6\">\u003Cspan class=\"callout\">6\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tA static IPv4 address of public network interface for a remote host\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO5-7\">\u003Cspan class=\"callout\">7\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tA distinguished Name (DN) of a remote host\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO5-8\">\u003Cspan class=\"callout\">8\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tThe subnet range of a remote host - \u003Ccode class=\"literal\">192.0.2.150\u003C/code> with \u003Ccode class=\"literal\">32\u003C/code> IPv4 addresses\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO5-9\">\u003Cspan class=\"callout\">9\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tThe value to accept and receive only the Internet Key Exchange (IKEv2) protocol\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003C/dl>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tApply the settings to the system:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl apply ~/create-p2p-vpn-authentication.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tDisplay the created P2P policy:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip xfrm policy\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tVerify IPsec status:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip xfrm status\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">ipsec.conf(5)\u003C/code> man page on your system\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-host-to-host-ipsec-vpn-with-psk-authentication-and-transport-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">7.18.5. Configuring a host-to-host IPsec VPN with PSK authentication and transport mode by using nmstatectl\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tIPsec (Internet Protocol Security) is a security protocol suite to authenticate and encrypt IP communications within networks and devices. The \u003Ccode class=\"literal\">Libreswan\u003C/code> utility provides IPsec based implementation for VPN.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIn transport mode, encryption works only for the payload of an IP packet. Also, a new IPsec header gets appended to the IP packet by keeping the original IP header as it is. Transport mode does not encrypt the source and destination IP of communication but copies them to an external IP header. Hence, encryption protects only IP data across the network. This mode is useful to transfer data in a \u003Ccode class=\"literal\">host-to-host\u003C/code> connection of a network. This mode is often used along with the GRE tunnel to save 20 bytes (IP header) of overheads. By default, the \u003Ccode class=\"literal\">IPsec\u003C/code> utility uses tunnel mode. To use transfer mode, set \u003Ccode class=\"literal\">type: transport\u003C/code> for \u003Ccode class=\"literal\">host-to-host\u003C/code> connection data transfer.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tBy using Nmstate, a declarative API for network management, you can configure an IPsec VPN connection. After setting the configuration, the Nmstate API ensures that the result matches with the configuration file. If anything fails, \u003Ccode class=\"literal\">nmstate\u003C/code> automatically rolls back the changes to avoid incorrect state of the system. To override the default \u003Ccode class=\"literal\">tunnel\u003C/code> mode, specify \u003Ccode class=\"literal\">transport\u003C/code> mode.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIn the case of defining systems for \u003Ccode class=\"literal\">IPsec\u003C/code> in nmstate, the \u003Ccode class=\"literal\">left\u003C/code>-named system is the local host while the \u003Ccode class=\"literal\">right\u003C/code>-named system is the remote host. The following procedure needs to run on both hosts.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tBy using a password, you have generated a PKCS #12 file that stores certificates and cryptographic keys.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tInstall the required packages:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install nmstate libreswan NetworkManager-libreswan\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tRestart the NetworkManager service:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl restart NetworkManager\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tAs \u003Ccode class=\"literal\">Libreswan\u003C/code> was already installed, remove its old database files and re-create them:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl stop ipsec\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>rm /etc/ipsec.d/*db\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec initnss\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tImport the PKCS#12 file:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipsec import node-example.p12\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tWhen importing the PKCS#12 file, enter the password that was used to create the file.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnable and start the \u003Ccode class=\"literal\">ipsec\u003C/code> service:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable --now ipsec\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tCreate a YAML file, for example \u003Ccode class=\"literal\">~/create-p2p-transport-authentication.yml\u003C/code>, with the following content:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\ninterfaces:\n- name: 'example_ipsec_conn1'           \u003Cspan id=\"CO6-1\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">1\u003C/span>\n  type: ipsec\n  libreswan:\n    type: 'transport'                   \u003Cspan id=\"CO6-2\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">2\u003C/span>\n    ipsec-interface: '99'               \u003Cspan id=\"CO6-3\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">3\u003C/span>\n    left: '192.0.2.250'                 \u003Cspan id=\"CO6-4\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">4\u003C/span>\n    leftid: '%fromcert'                 \u003Cspan id=\"CO6-5\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">5\u003C/span>\n    leftcert: 'local-host.example.org'  \u003Cspan id=\"CO6-6\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">6\u003C/span>\n    right: '192.0.2.150'                \u003Cspan id=\"CO6-7\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">7\u003C/span>\n    prefix-length: '32'                 \u003Cspan id=\"CO6-8\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">8\u003C/span>\n    rightid: '%fromcert'                \u003Cspan id=\"CO6-9\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">9\u003C/span>\n    ikev2: 'insist'                     \u003Cspan id=\"CO6-10\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">10\u003C/span>\n    ikelifetime: '24h'                  \u003Cspan id=\"CO6-11\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">11\u003C/span>\n    salifetime: '24h'                   \u003Cspan id=\"CO6-12\">\u003C!--Empty-->\u003C/span>\u003Cspan class=\"callout\">12\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe YAML file defines the following settings:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"calloutlist\">\u003Cdl class=\"calloutlist\">\u003Cdt>\u003Ca href=\"#CO6-1\">\u003Cspan class=\"callout\">1\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tAn IPsec connection name\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO6-2\">\u003Cspan class=\"callout\">2\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tAn IPsec mode\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO6-3\">\u003Cspan class=\"callout\">3\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tThe value \u003Ccode class=\"literal\">99\u003C/code> means that \u003Ccode class=\"literal\">libreswan\u003C/code> creates an IPsec \u003Ccode class=\"literal\">xfrm\u003C/code> virtual interface \u003Ccode class=\"literal\">ipsec&lt;number&gt;\u003C/code> and automatically finds the next available number\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO6-4\">\u003Cspan class=\"callout\">4\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tA static IPv4 address of public network interface for a local host\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO6-5\">\u003Cspan class=\"callout\">5\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tOn a local host, the value of \u003Ccode class=\"literal\">%fromcert\u003C/code> sets the ID to a Distinguished Name (DN) which is fetched from a loaded certificate\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO6-6\">\u003Cspan class=\"callout\">6\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tA Distinguished Name (DN) of a local host’s public key\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO6-7\">\u003Cspan class=\"callout\">7\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tA static IPv4 address of public network interface for a remote host\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO6-8\">\u003Cspan class=\"callout\">8\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tThe subnet mask of a static IPv4 address of a local host\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO6-9\">\u003Cspan class=\"callout\">9\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tOn a remote host, the value of \u003Ccode class=\"literal\">%fromcert\u003C/code> sets the ID to a Distinguished Name (DN) which is fetched from a loaded certificate\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO6-10\">\u003Cspan class=\"callout\">10\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tThe value to accept and receive only the Internet Key Exchange (IKEv2) protocol\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO6-11\">\u003Cspan class=\"callout\">11\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tThe duration of IKE protocol\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003Cdt>\u003Ca href=\"#CO6-12\">\u003Cspan class=\"callout\">12\u003C/span>\u003C/a> \u003C/dt>\u003Cdd>\u003Cdiv class=\"para\">\n\t\t\t\t\t\t\t\t\tThe duration of IPsec security association (SA)\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/dd>\u003C/dl>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tApply the settings to the system:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl apply ~/create-p2p-transport-authentication.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tVerify IPsec status:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip xfrm status\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tVerify IPsec policies:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip xfrm policy\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">ipsec.conf(5)\u003C/code> man page on your system\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section _additional-resources\" id=\"related-information-configuring-a-vpn-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.19. Additional resources\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">ipsec(8)\u003C/code>, \u003Ccode class=\"literal\">ipsec.conf(5)\u003C/code>, \u003Ccode class=\"literal\">ipsec.secrets(5)\u003C/code>, \u003Ccode class=\"literal\">ipsec_auto(8)\u003C/code>, and \u003Ccode class=\"literal\">ipsec_rsasigkey(8)\u003C/code> man pages.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/libreswan-\u003Cspan class=\"emphasis\">\u003Cem>version\u003C/em>\u003C/span>/\u003C/code> directory.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://libreswan.org/wiki\">The Libreswan Project Wiki\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://libreswan.org/man/\">All Libreswan man pages\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://doi.org/10.6028/NIST.SP.800-77r1\">NIST Special Publication 800-77: Guide to IPsec VPNs\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_setting-up-a-wireguard-vpn_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 8. Setting up a WireGuard VPN\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tWireGuard is a high-performance VPN solution that runs in the Linux kernel. It uses modern cryptography and is easier to configure than many other VPN solutions. Additionally, WireGuard’s small codebase reduces the surface for attacks and, therefore, improves security. For authentication and encryption, WireGuard uses keys similar to SSH.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tWireGuard is provided as a Technology Preview only. Technology Preview features are not supported with Red Hat production Service Level Agreements (SLAs), might not be functionally complete, and Red Hat does not recommend using them for production. These previews provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tSee \u003Ca class=\"link\" href=\"https://access.redhat.com/support/offerings/techpreview\">Technology Preview Features Support Scope\u003C/a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\tNote that all hosts that participate in a WireGuard VPN are peers. This documentation uses the terms \u003Ccode class=\"literal\">client\u003C/code> to describe hosts that establish a connection and \u003Ccode class=\"literal\">server\u003C/code> to describe the host with the fixed hostname or IP address that the clients connect to and optionally route all traffic through this server.\n\t\t\u003C/p>\u003Cp>\n\t\t\tTo set up a WireGuard VPN, you must complete the following steps. You can perform most steps by using different options:\n\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_creating-private-and-public-keys-to-be-used-in-wireguard-connections_assembly_setting-up-a-wireguard-vpn\" title=\"8.4. Creating private and public keys to be used in WireGuard connections\">Create public and private keys for every host in the VPN\u003C/a>.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tConfigure the WireGuard server by using \u003Ca class=\"link\" href=\"#proc_configuring-a-wireguard-by-using-nmcli_assembly_setting-up-a-wireguard-vpn\" title=\"8.5. Configuring a WireGuard server by using nmcli\">nmcli\u003C/a>, \u003Ca class=\"link\" href=\"#proc_configuring-a-wireguard-server-by-using-nmtui_assembly_setting-up-a-wireguard-vpn\" title=\"8.6. Configuring a WireGuard server by using nmtui\">nmtui\u003C/a>, the \u003Ca class=\"link\" href=\"#configuring-a-wireguard-server-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn\" title=\"8.7. Configuring a WireGuard server by using the RHEL web console\">RHEL web console\u003C/a>, \u003Ca class=\"link\" href=\"#proc_configuring-a-wireguard-server-by-using-nm-connection-editor_assembly_setting-up-a-wireguard-vpn\" title=\"8.8. Configuring a WireGuard server by using nm-connection-editor\">nm-connection-editor\u003C/a>, or the \u003Ca class=\"link\" href=\"#proc_configuring-a-wireguard-server-by-using-the-wg-quick-service_assembly_setting-up-a-wireguard-vpn\" title=\"8.9. Configuring a WireGuard server by using the wg-quick service\">wg-quick\u003C/a> service.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tConfigure firewalld on the WireGuard server by using the \u003Ca class=\"link\" href=\"#proc_configuring-firewalld-on-a-wireguard-server-by-using-the-command-line_assembly_setting-up-a-wireguard-vpn\" title=\"8.10. Configuring firewalld on a WireGuard server by using the command line\">command line\u003C/a>, the \u003Ca class=\"link\" href=\"#configuring-firewalld-on-a-wireguard-server-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn\" title=\"8.11. Configuring firewalld on a WireGuard server by using the RHEL web console\">RHEL web console\u003C/a>, or \u003Ca class=\"link\" href=\"#proc_configuring-firewalld-on-a-wireguard-server-by-using-the-graphical-interface_assembly_setting-up-a-wireguard-vpn\" title=\"8.12. Configuring firewalld on a WireGuard server by using the graphical interface\">graphical interface\u003C/a>.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tConfigure the WireGuard client by using \u003Ca class=\"link\" href=\"#proc_configuring-a-wireguard-client-by-using-nmcli_assembly_setting-up-a-wireguard-vpn\" title=\"8.13. Configuring a WireGuard client by using nmcli\">nmcli\u003C/a>, \u003Ca class=\"link\" href=\"#proc_configuring-a-wireguard-client-by-using-nmtui_assembly_setting-up-a-wireguard-vpn\" title=\"8.14. Configuring a WireGuard client by using nmtui\">nmtui\u003C/a>, the \u003Ca class=\"link\" href=\"#configuring-a-wireguard-client-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn\" title=\"8.15. Configuring a WireGuard client by using the RHEL web console\">RHEL web console\u003C/a>, \u003Ca class=\"link\" href=\"#proc_configuring-a-wireguard-client-by-using-nm-connection-editor_assembly_setting-up-a-wireguard-vpn\" title=\"8.16. Configuring a WireGuard client by using nm-connection-editor\">nm-connection-editor\u003C/a>, or the \u003Ca class=\"link\" href=\"#proc_configuring-a-wireguard-client-by-using-the-wg-quick-service_assembly_setting-up-a-wireguard-vpn\" title=\"8.17. Configuring a WireGuard client by using the wg-quick service\">wg-quick\u003C/a> service.\n\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\tWireGuard operates on the network layer (layer 3). Therefore, you cannot use DHCP and must assign static IP addresses or IPv6 link-local addresses to the tunnel devices on both the server and clients.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tYou can use WireGuard only if the Federal Information Processing Standard (FIPS) mode in RHEL is disabled.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"ref_protocols-and-primitives-used-by-wireguard_assembly_setting-up-a-wireguard-vpn\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.1. Protocols and primitives used by WireGuard\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tWireGuard uses the following protocols and primitives:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tChaCha20 for symmetric encryption, authenticated with Poly1305, using Authenticated Encryption with Associated Data (AEAD) construction as described in \u003Ca class=\"link\" href=\"https://tools.ietf.org/html/rfc7539\">RFC7539\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCurve25519 for Elliptic-curve Diffie–Hellman (ECDH) key exchange\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tBLAKE2s for hashing and keyed hashing, as described in \u003Ca class=\"link\" href=\"https://tools.ietf.org/html/rfc7693\">RFC7693\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSipHash24 for hash table keys\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tHKDF for key derivation, as described in \u003Ca class=\"link\" href=\"https://tools.ietf.org/html/rfc5869\">RFC5869\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"con_how-wireguard-uses-tunnel-ip-addresses-public-keys-and-remote-endpoints_assembly_setting-up-a-wireguard-vpn\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.2. How WireGuard uses tunnel IP addresses, public keys, and remote endpoints\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tWhen WireGuard sends a network packet to a peer:\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWireGuard reads the destination IP from the packet and compares it to the list of allowed IP addresses in the local configuration. If the peer is not found, WireGuard drops the packet.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf the peer is valid, WireGuard encrypts the packet using the peer’s public key.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe sending host looks up the most recent Internet IP address of the host and sends the encrypted packet to it.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tWhen WireGuard receives a packet:\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWireGuard decrypts the packet using the private key of the remote host.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWireGuard reads the internal source address from the packet and looks up whether the IP is configured in the list of allowed IP addresses in the settings for the peer on the local host. If the source IP is on the allowlist, WireGuard accepts the packet. If the IP address is not on the list, WireGuard drops the packet.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tThe association of public keys and allowed IP addresses is called \u003Ccode class=\"literal\">Cryptokey Routing Table\u003C/code>. This means that the list of IP addresses behaves similar to a routing table when sending packets, and as a kind of access control list when receiving packets.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"con_using-a-wireguard-client-behind-nat-and-firewalls_assembly_setting-up-a-wireguard-vpn\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.3. Using a WireGuard client behind NAT and firewalls\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tWireGuard uses the UDP protocol and transmits data only when a peer sends packets. Stateful firewalls and network address translation (NAT) on routers track connections to enable a peer behind NAT or a firewall to receive packets.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo keep the connection active, WireGuard supports \u003Ccode class=\"literal\">persistent keepalives\u003C/code>. This means you can set an interval at which WireGuard sends keepalive packets. By default, the persistent keep-alive feature is disabled to reduce network traffic. Enable this feature on the client if you use the client in a network with NAT or if a firewall closes the connection after some time of inactivity.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tNote that you cannot configure keepalive packets in WireGuard connections by using the RHEL web console. To configure this feature, edit the connection profile by using the \u003Ccode class=\"literal\">nmcli\u003C/code> utility.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"proc_creating-private-and-public-keys-to-be-used-in-wireguard-connections_assembly_setting-up-a-wireguard-vpn\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.4. Creating private and public keys to be used in WireGuard connections\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tWireGuard uses base64-encoded private and public keys to authenticate hosts to each other. Therefore, you must create the keys on each host that participates in the WireGuard VPN.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tFor secure connections, create different keys for each host, and ensure that you only share the public key with the remote WireGuard host. Do not use the example keys used in this documentation.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tIf you plan to use the RHEL web console to create a WireGuard VPN connection, you can, alternatively, generate the public and private key pairs in the web console.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">wireguard-tools\u003C/code> package:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install wireguard-tools\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a private key and a corresponding public key for the host:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>wg genkey | tee /etc/wireguard/$HOSTNAME.private.key | wg pubkey &gt; /etc/wireguard/$HOSTNAME.public.key\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou will need the content of the key files, but not the files themselves. However, Red Hat recommends keeping the files in case that you need to remember the keys in future.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet secure permissions on the key files:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>chmod 600 /etc/wireguard/$HOSTNAME.private.key /etc/wireguard/$HOSTNAME.public.key\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the private key:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /etc/wireguard/$HOSTNAME.private.key\u003C/strong>\u003C/span>\nYFAnE0psgIdiAF7XR4abxiwVRnlMfeltxu10s/c4JXg=\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou will need the private key to configure the WireGuard connection on the local host. Do not share the private key.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the public key:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /etc/wireguard/$HOSTNAME.public.key\u003C/strong>\u003C/span>\nUtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou will need the public key to configure the WireGuard connection on the remote host.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">wg(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-wireguard-by-using-nmcli_assembly_setting-up-a-wireguard-vpn\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.5. Configuring a WireGuard server by using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can configure the WireGuard server by creating a connection profile in NetworkManager. Use this method to let NetworkManager manage the WireGuard connection.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThis procedure assumes the following settings:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tServer:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPrivate key: \u003Ccode class=\"literal\">YFAnE0psgIdiAF7XR4abxiwVRnlMfeltxu10s/c4JXg=\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTunnel IPv4 address: \u003Ccode class=\"literal\">192.0.2.1/24\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTunnel IPv6 address: \u003Ccode class=\"literal\">2001:db8:1::1/32\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tClient:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPublic key: \u003Ccode class=\"literal\">bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTunnel IPv4 address: \u003Ccode class=\"literal\">192.0.2.2/24\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTunnel IPv6 address: \u003Ccode class=\"literal\">2001:db8:1::2/32\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have generated the public and private key for both the server and client.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou know the following information:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe private key of the server\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe static tunnel IP addresses and subnet masks of the client\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe public key of the client\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe static tunnel IP addresses and subnet masks of the server\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd a NetworkManager WireGuard connection profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type wireguard con-name server-wg0 ifname wg0 autoconnect no\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis command creates a profile named \u003Ccode class=\"literal\">server-wg0\u003C/code> and assigns the virtual interface \u003Ccode class=\"literal\">wg0\u003C/code> to it. To prevent the connection from starting automatically after you add it without finalizing the configuration, disable the \u003Ccode class=\"literal\">autoconnect\u003C/code> parameter.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the tunnel IPv4 address and subnet mask of the server:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify server-wg0 ipv4.method manual ipv4.addresses 192.0.2.1/24\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the tunnel IPv6 address and subnet mask of the server:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify server-wg0 ipv6.method manual ipv6.addresses 2001:db8:1::1/32\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the server’s private key to the connection profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify server-wg0 wireguard.private-key \"YFAnE0psgIdiAF7XR4abxiwVRnlMfeltxu10s/c4JXg=\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the port for incoming WireGuard connections:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify server-wg0 wireguard.listen-port 51820\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAlways set a fixed port number on hosts that receive incoming WireGuard connections. If you do not set a port, WireGuard uses a random free port each time you activate the \u003Ccode class=\"literal\">wg0\u003C/code> interface.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd peer configurations for each client that you want to allow to communicate with this server. You must add these settings manually, because the \u003Ccode class=\"literal\">nmcli\u003C/code> utility does not support setting the corresponding connection properties.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEdit the \u003Ccode class=\"literal\">/etc/NetworkManager/system-connections/server-wg0.nmconnection\u003C/code> file, and append:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Cspan class=\"strong strong\">\u003Cstrong>[wireguard-peer.bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=]\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>allowed-ips=192.0.2.2;2001:db8:1::2;\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">[wireguard-peer.\u003Cspan class=\"emphasis\">\u003Cem>&lt;public_key_of_the_client\u003C/em>\u003C/span>&gt;]\u003C/code> entry defines the peer section of the client, and the section name contains the public key of the client.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">allowed-ips\u003C/code> parameter sets the tunnel IP addresses of the client that are allowed to send data to this server.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tAdd a section for each client.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tReload the \u003Ccode class=\"literal\">server-wg0\u003C/code> connection profile:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection load /etc/NetworkManager/system-connections/server-wg0.nmconnection\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Configure the connection to start automatically, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify server-wg0 autoconnect yes\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReactivate the \u003Ccode class=\"literal\">server-wg0\u003C/code> connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up server-wg0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Next steps\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_configuring-firewalld-on-a-wireguard-server-by-using-the-command-line_assembly_setting-up-a-wireguard-vpn\" title=\"8.10. Configuring firewalld on a WireGuard server by using the command line\">Configure the firewalld service on the WireGuard server\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the interface configuration of the \u003Ccode class=\"literal\">wg0\u003C/code> device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>wg show wg0\u003C/strong>\u003C/span>\ninterface: wg0\n  public key: UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=\n  private key: (hidden)\n  listening port: 51820\n\npeer: bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=\n  allowed ips: 192.0.2.2/32, 2001:db8:1::2/128\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display the private key in the output, use the \u003Ccode class=\"literal\">WG_HIDE_KEYS=never wg show wg0\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IP configuration of the \u003Ccode class=\"literal\">wg0\u003C/code> device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip address show wg0\u003C/strong>\u003C/span>\n20: wg0: &lt;POINTOPOINT,NOARP,UP,LOWER_UP&gt; mtu 1420 qdisc noqueue state UNKNOWN group default qlen 1000\n    link/none\n    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute wg0\n       valid_lft forever preferred_lft forever\n    inet6 2001:db8:1::1/32 scope global noprefixroute\n       valid_lft forever preferred_lft forever\n    inet6 fe80::3ef:8863:1ce2:844/64 scope link noprefixroute\n       valid_lft forever preferred_lft forever\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">wg(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">WireGuard setting\u003C/code> section in the \u003Ccode class=\"literal\">nm-settings(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-wireguard-server-by-using-nmtui_assembly_setting-up-a-wireguard-vpn\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.6. Configuring a WireGuard server by using \u003Ccode class=\"literal\">nmtui\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can configure the WireGuard server by creating a connection profile in NetworkManager. Use this method to let NetworkManager manage the WireGuard connection.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThis procedure assumes the following settings:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tServer:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPrivate key: \u003Ccode class=\"literal\">YFAnE0psgIdiAF7XR4abxiwVRnlMfeltxu10s/c4JXg=\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTunnel IPv4 address: \u003Ccode class=\"literal\">192.0.2.1/24\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTunnel IPv6 address: \u003Ccode class=\"literal\">2001:db8:1::1/32\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tClient:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPublic key: \u003Ccode class=\"literal\">bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTunnel IPv4 address: \u003Ccode class=\"literal\">192.0.2.2/24\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTunnel IPv6 address: \u003Ccode class=\"literal\">2001:db8:1::2/32\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have generated the public and private key for both the server and client.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou know the following information:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe private key of the server\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe static tunnel IP addresses and subnet masks of the client\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe public key of the client\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe static tunnel IP addresses and subnet masks of the server\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou installed the \u003Ccode class=\"literal\">NetworkManager-tui\u003C/code> package.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart the \u003Ccode class=\"literal\">nmtui\u003C/code> application:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmtui\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Cspan class=\"strong strong\">\u003Cstrong>Edit a connection\u003C/strong>\u003C/span>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Cspan class=\"guibutton\">Add\u003C/span>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the \u003Cspan class=\"strong strong\">\u003Cstrong>WireGuard\u003C/strong>\u003C/span> connection type in the list, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Edit connection\u003C/strong>\u003C/span> window:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tEnter the name of the connection and the virtual interface, such as \u003Ccode class=\"literal\">wg0\u003C/code>, that NetworkManager should assign to the connection.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tEnter the private key of the server.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSet the listen port number, such as \u003Ccode class=\"literal\">51820\u003C/code>, for incoming WireGuard connections.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAlways set a fixed port number on hosts that receive incoming WireGuard connections. If you do not set a port, WireGuard uses a random free port each time you activate the interface.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/402c2b376712a623c49bccb63a4580b4/nmtui-WireGuard-server-general.png\" alt=\"nmtui WireGuard server general\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Add\u003C/span> next to the \u003Cspan class=\"strong strong\">\u003Cstrong>Peers\u003C/strong>\u003C/span> pane:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tEnter the public key of the client.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tSet the \u003Cspan class=\"strong strong\">\u003Cstrong>Allowed IPs\u003C/strong>\u003C/span> field to the tunnel IP addresses of the client that are allowed to send data to this server.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tSelect \u003Cspan class=\"guibutton\">OK\u003C/span>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/37188b01ed3cc20ed842193dfdab8167/nmtui-WireGuard-server-peer-config.png\" alt=\"nmtui WireGuard server peer config\"/>\u003C/div>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSelect \u003Cspan class=\"guibutton\">Show\u003C/span> next to *IPv4 Configuration, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tSelect the IPv4 configuration method \u003Cspan class=\"strong strong\">\u003Cstrong>Manual\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tEnter the tunnel IPv4 address and the subnet mask. Leave the \u003Cspan class=\"strong strong\">\u003Cstrong>Gateway\u003C/strong>\u003C/span> field empty.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSelect \u003Cspan class=\"guibutton\">Show\u003C/span> next to \u003Cspan class=\"strong strong\">\u003Cstrong>IPv6 Configuration\u003C/strong>\u003C/span>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tSelect the IPv6 configuration method \u003Cspan class=\"strong strong\">\u003Cstrong>Manual\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tEnter the tunnel IPv6 address and the subnet mask. Leave the \u003Ccode class=\"literal\">Gateway\u003C/code> field empty.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSelect \u003Cspan class=\"guibutton\">OK\u003C/span>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/b87320fd3d0a4fd17ddf34f4de5cbe08/nmtui-WireGuard-server-ip-config.png\" alt=\"nmtui WireGuard server ip config\"/>\u003C/div>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIn the window with the list of connections, select \u003Cspan class=\"guibutton\">Back\u003C/span>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>NetworkManager TUI\u003C/strong>\u003C/span> main window, select \u003Cspan class=\"guibutton\">Quit\u003C/span>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Next steps\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_configuring-firewalld-on-a-wireguard-server-by-using-the-command-line_assembly_setting-up-a-wireguard-vpn\" title=\"8.10. Configuring firewalld on a WireGuard server by using the command line\">Configure the firewalld service on the WireGuard server\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the interface configuration of the \u003Ccode class=\"literal\">wg0\u003C/code> device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>wg show wg0\u003C/strong>\u003C/span>\ninterface: wg0\n  public key: UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=\n  private key: (hidden)\n  listening port: 51820\n\npeer: bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=\n  allowed ips: 192.0.2.2/32, 2001:db8:1::2/128\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display the private key in the output, use the \u003Ccode class=\"literal\">WG_HIDE_KEYS=never wg show wg0\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IP configuration of the \u003Ccode class=\"literal\">wg0\u003C/code> device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip address show wg0\u003C/strong>\u003C/span>\n20: wg0: &lt;POINTOPOINT,NOARP,UP,LOWER_UP&gt; mtu 1420 qdisc noqueue state UNKNOWN group default qlen 1000\n    link/none\n    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute wg0\n       valid_lft forever preferred_lft forever\n    inet6 _2001:db8:1::1/32 scope global noprefixroute\n       valid_lft forever preferred_lft forever\n    inet6 fe80::3ef:8863:1ce2:844/64 scope link noprefixroute\n       valid_lft forever preferred_lft forever\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">wg(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-wireguard-server-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.7. Configuring a WireGuard server by using the RHEL web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can configure a WireGuard server by using the browser-based RHEL web console. Use this method to let NetworkManager manage the WireGuard connection.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in to the RHEL web console.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou know the following information:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe static tunnel IP addresses and subnet masks of both the server and client\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe public key of the client\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the \u003Cspan class=\"strong strong\">\u003Cstrong>Networking\u003C/strong>\u003C/span> tab in the navigation on the left side of the screen.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Add VPN\u003C/strong>\u003C/span> in the \u003Cspan class=\"strong strong\">\u003Cstrong>Interfaces\u003C/strong>\u003C/span> section.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf the \u003Ccode class=\"literal\">wireguard-tools\u003C/code> and \u003Ccode class=\"literal\">systemd-resolved\u003C/code> packages are not already installed, the web console displays a corresponding notification. Click \u003Cspan class=\"strong strong\">\u003Cstrong>Install\u003C/strong>\u003C/span> to install these packages.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnter the name of the WireGuard device that you want to create.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the key pair of this host:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you want use the keys that the web console has created:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tKeep the pre-selected \u003Cspan class=\"strong strong\">\u003Cstrong>Generated\u003C/strong>\u003C/span> option in the \u003Cspan class=\"strong strong\">\u003Cstrong>Private key\u003C/strong>\u003C/span> area.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tNote the \u003Cspan class=\"strong strong\">\u003Cstrong>Public key\u003C/strong>\u003C/span> value. You require this information when you configure the client.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you want to use an existing private key:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tSelect \u003Cspan class=\"strong strong\">\u003Cstrong>Paste existing key\u003C/strong>\u003C/span> in the \u003Cspan class=\"strong strong\">\u003Cstrong>Private key\u003C/strong>\u003C/span> area.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tPaste the private key into the text field. The web console automatically calculates the corresponding public key.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet a listen port number, such as \u003Ccode class=\"literal\">51820\u003C/code>, for incoming WireGuard connections.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAlways set a fixed port number on hosts that receive incoming WireGuard connections. If you do not set a port, WireGuard uses a random free port each time you activate the interface.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the tunnel IPv4 address and subnet mask of the server.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo also set an IPv6 address, you must edit the connection after you have created it.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd peer configurations for each client that you want to allow to communicate with this server:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Add peer\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tEnter the public key of the client.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tLeave the \u003Cspan class=\"strong strong\">\u003Cstrong>Endpoint\u003C/strong>\u003C/span> field empty.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSet the \u003Cspan class=\"strong strong\">\u003Cstrong>Allowed IPs\u003C/strong>\u003C/span> field to the tunnel IP addresses of the clients that are allowed to send data to this server.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/793444cafc3db6309bf1ff66b5835634/wireguard-server-settings.png\" alt=\"WireGuard server settings\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span> to create the WireGuard connection.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you want to also set a tunnel IPv6 address:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick on the WireGuard connection’s name in the \u003Cspan class=\"strong strong\">\u003Cstrong>Interfaces\u003C/strong>\u003C/span> section.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>edit\u003C/strong>\u003C/span> next to \u003Cspan class=\"strong strong\">\u003Cstrong>IPv6\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSet the \u003Cspan class=\"strong strong\">\u003Cstrong>Addresses\u003C/strong>\u003C/span> field to \u003Ccode class=\"literal\">Manual\u003C/code>, and enter the tunnel IPv6 address and prefix of the server.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Save\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Next steps\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-firewalld-on-a-wireguard-server-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn\" title=\"8.11. Configuring firewalld on a WireGuard server by using the RHEL web console\">Configure the firewalld service on the WireGuard server\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the interface configuration of the \u003Ccode class=\"literal\">wg0\u003C/code> device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>wg show wg0\u003C/strong>\u003C/span>\ninterface: wg0\n  public key: UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=\n  private key: (hidden)\n  listening port: 51820\n\npeer: bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=\n  allowed ips: 192.0.2.2/32, 2001:db8:1::2/128\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display the private key in the output, use the \u003Ccode class=\"literal\">WG_HIDE_KEYS=never wg show wg0\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IP configuration of the \u003Ccode class=\"literal\">wg0\u003C/code> device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip address show wg0\u003C/strong>\u003C/span>\n20: wg0: &lt;POINTOPOINT,NOARP,UP,LOWERUP&gt; mtu 1420 qdisc noqueue state UNKNOWN group default qlen 1000\n    link/none\n    inet 192.0.2.1/24 brd 192.0.2.255 scope global noprefixroute wg0\n       valid_lft forever preferred_lft forever\n    inet6 2001:db8:1::1/32 scope global noprefixroute\n       valid_lft forever preferred_lft forever\n    inet6 fe80::3ef:8863:1ce2:844/64 scope link noprefixroute\n       valid_lft forever preferred_lft forever\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-wireguard-server-by-using-nm-connection-editor_assembly_setting-up-a-wireguard-vpn\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.8. Configuring a WireGuard server by using nm-connection-editor\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can configure the WireGuard server by creating a connection profile in NetworkManager. Use this method to let NetworkManager manage the WireGuard connection.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have generated the public and private key for both the server and client.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou know the following information:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe private key of the server\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe static tunnel IP addresses and subnet masks of the client\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe public key of the client\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe static tunnel IP addresses and subnet masks of the server\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen a terminal, and enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nm-connection-editor\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAdd a new connection by clicking the \u003Cspan class=\"guibutton\">+\u003C/span> button.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the \u003Ccode class=\"literal\">WireGuard\u003C/code> connection type, and click \u003Cspan class=\"guibutton\">Create\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOptional: Update the connection name.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOn the \u003Ccode class=\"literal\">General\u003C/code> tab, select \u003Ccode class=\"literal\">Connect automatically with priority\u003C/code>. Optionally, set a priority value.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the \u003Ccode class=\"literal\">WireGuard\u003C/code> tab:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tEnter the name of the virtual interface, such as \u003Ccode class=\"literal\">wg0\u003C/code>, that NetworkManager should assign to the connection.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tEnter the private key of the server.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSet the listen port number, such as \u003Ccode class=\"literal\">51820\u003C/code>, for incoming WireGuard connections.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAlways set a fixed port number on hosts that receive incoming WireGuard connections. If you do not set a port, WireGuard uses a random free port each time you activate the interface.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Add\u003C/span> to add peers:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tEnter the public key of the client.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tSet the \u003Ccode class=\"literal\">Allowed IPs\u003C/code> field to the tunnel IP addresses of the client that are allowed to send data to this server.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Apply\u003C/span>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the \u003Ccode class=\"literal\">IPv4 Settings\u003C/code> tab:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSelect \u003Ccode class=\"literal\">Manual\u003C/code> in the \u003Ccode class=\"literal\">Method\u003C/code> list.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Add\u003C/span> to enter the tunnel IPv4 address and the subnet mask. Leave the \u003Ccode class=\"literal\">Gateway\u003C/code> field empty.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the \u003Ccode class=\"literal\">IPv6 Settings\u003C/code> tab:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSelect \u003Ccode class=\"literal\">Manual\u003C/code> in the \u003Ccode class=\"literal\">Method\u003C/code> list.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Add\u003C/span> to enter the tunnel IPv6 address and the subnet mask. Leave the \u003Ccode class=\"literal\">Gateway\u003C/code> field empty.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Save\u003C/span> to store the connection profile.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Next steps\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_configuring-firewalld-on-a-wireguard-server-by-using-the-graphical-interface_assembly_setting-up-a-wireguard-vpn\" title=\"8.12. Configuring firewalld on a WireGuard server by using the graphical interface\">Configure the firewalld service on the WireGuard server\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the interface configuration of the \u003Ccode class=\"literal\">wg0\u003C/code> device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>wg show \u003Cspan class=\"emphasis\">\u003Cem>wg0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\ninterface: \u003Cspan class=\"emphasis\">\u003Cem>wg0\u003C/em>\u003C/span>\n  public key: \u003Cspan class=\"emphasis\">\u003Cem>UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=\u003C/em>\u003C/span>\n  private key: (hidden)\n  listening port: \u003Cspan class=\"emphasis\">\u003Cem>51820\u003C/em>\u003C/span>\n\npeer: \u003Cspan class=\"emphasis\">\u003Cem>bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=\u003C/em>\u003C/span>\n  allowed ips: \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.2/32, 2001:db8:1::2/128\u003C/em>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display the private key in the output, use the \u003Ccode class=\"literal\">WG_HIDE_KEYS=never wg show \u003Cspan class=\"emphasis\">\u003Cem>wg0\u003C/em>\u003C/span>\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IP configuration of the \u003Ccode class=\"literal\">wg0\u003C/code> device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip address show \u003Cspan class=\"emphasis\">\u003Cem>wg0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n\u003Cspan class=\"emphasis\">\u003Cem>20\u003C/em>\u003C/span>: \u003Cspan class=\"emphasis\">\u003Cem>wg0\u003C/em>\u003C/span>: &lt;POINTOPOINT,NOARP,UP,LOWER_UP&gt; mtu 1420 qdisc noqueue state UNKNOWN group default qlen 1000\n    link/none\n    inet \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1/24\u003C/em>\u003C/span> brd \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.255\u003C/em>\u003C/span> scope global noprefixroute wg0\n       valid_lft forever preferred_lft forever\n    inet6 \u003Cspan class=\"emphasis\">\u003Cem>2001:db8:1::1/32\u003C/em>\u003C/span> scope global noprefixroute\n       valid_lft forever preferred_lft forever\n    inet6 \u003Cspan class=\"emphasis\">\u003Cem>fe80::3ef:8863:1ce2:844/64\u003C/em>\u003C/span> scope link noprefixroute\n       valid_lft forever preferred_lft forever\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">wg(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-wireguard-server-by-using-the-wg-quick-service_assembly_setting-up-a-wireguard-vpn\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.9. Configuring a WireGuard server by using the \u003Ccode class=\"literal\">wg-quick\u003C/code> service\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can configure the WireGuard server by creating a configuration file in the \u003Ccode class=\"literal\">/etc/wireguard/\u003C/code> directory. Use this method to configure the service independently from NetworkManager.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThis procedure assumes the following settings:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tServer:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPrivate key: \u003Ccode class=\"literal\">YFAnE0psgIdiAF7XR4abxiwVRnlMfeltxu10s/c4JXg=\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTunnel IPv4 address: \u003Ccode class=\"literal\">192.0.2.1/24\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTunnel IPv6 address: \u003Ccode class=\"literal\">2001:db8:1::1/32\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tClient:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPublic key: \u003Ccode class=\"literal\">bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTunnel IPv4 address: \u003Ccode class=\"literal\">192.0.2.2/24\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTunnel IPv6 address: \u003Ccode class=\"literal\">2001:db8:1::2/32\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have generated the public and private key for both the server and client.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou know the following information:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe private key of the server\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe static tunnel IP addresses and subnet masks of the client\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe public key of the client\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe static tunnel IP addresses and subnet masks of the server\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">wireguard-tools\u003C/code> package:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install wireguard-tools\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">/etc/wireguard/wg0.conf\u003C/code> file with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Cspan class=\"strong strong\">\u003Cstrong>[Interface]\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>Address = 192.0.2.1/24, 2001:db8:1::1/32\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>ListenPort = 51820\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>PrivateKey = YFAnE0psgIdiAF7XR4abxiwVRnlMfeltxu10s/c4JXg=\u003C/strong>\u003C/span>\n\n\u003Cspan class=\"strong strong\">\u003Cstrong>[Peer]\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>PublicKey = bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>AllowedIPs = 192.0.2.2, 2001:db8:1::2\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">[Interface]\u003C/code> section describes the WireGuard settings of the interface on the server:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Address\u003C/code>: A comma-separated list of the server’s tunnel IP addresses.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">PrivateKey\u003C/code>: The private key of the server.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">ListenPort\u003C/code>: The port on which WireGuard listens for incoming UDP connections.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tAlways set a fixed port number on hosts that receive incoming WireGuard connections. If you do not set a port, WireGuard uses a random free port each time you activate the \u003Ccode class=\"literal\">wg0\u003C/code> interface.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEach \u003Ccode class=\"literal\">[Peer]\u003C/code> section describes the settings of one client:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">PublicKey\u003C/code>: The public key of the client.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">AllowedIPs\u003C/code>: The tunnel IP addresses of the client that are allowed to send data to this server.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable and start the WireGuard connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable --now wg-quick@wg0\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe systemd instance name must match the name of the configuration file in the \u003Ccode class=\"literal\">/etc/wireguard/\u003C/code> directory without the \u003Ccode class=\"literal\">.conf\u003C/code> suffix. The service also uses this name for the virtual network interface.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Next steps\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_configuring-firewalld-on-a-wireguard-server-by-using-the-command-line_assembly_setting-up-a-wireguard-vpn\" title=\"8.10. Configuring firewalld on a WireGuard server by using the command line\">Configure the firewalld service on the WireGuard server\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the interface configuration of the \u003Ccode class=\"literal\">wg0\u003C/code> device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>wg show wg0\u003C/strong>\u003C/span>\ninterface: wg0\n  public key: UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=\n  private key: (hidden)\n  listening port: 51820\n\npeer: bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=\n  allowed ips: 192.0.2.2/32, 2001:db8:1::2/128\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display the private key in the output, use the \u003Ccode class=\"literal\">WG_HIDE_KEYS=never wg show wg0\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IP configuration of the \u003Ccode class=\"literal\">wg0\u003C/code> device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip address show wg0\u003C/strong>\u003C/span>\n20: wg0: &lt;POINTOPOINT,NOARP,UP,LOWER_UP&gt; mtu 1420 qdisc noqueue state UNKNOWN group default qlen 1000\n    link/none\n    inet 192.0.2.1/24 scope global wg0\n       valid_lft forever preferred_lft forever\n    inet6 2001:db8:1::1/32 scope global\n       valid_lft forever preferred_lft forever\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">wg(8)\u003C/code> and \u003Ccode class=\"literal\">wg-quick(8)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-firewalld-on-a-wireguard-server-by-using-the-command-line_assembly_setting-up-a-wireguard-vpn\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.10. Configuring \u003Ccode class=\"literal\">firewalld\u003C/code> on a WireGuard server by using the command line\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou must configure the \u003Ccode class=\"literal\">firewalld\u003C/code> service on the WireGuard server to allow incoming connections from clients. Additionally, if clients should be able to use the WireGuard server as the default gateway and route all traffic through the tunnel, you must enable masquerading.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen the WireGuard port for incoming connections in the \u003Ccode class=\"literal\">firewalld\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>firewall-cmd --permanent --add-port=51820/udp --zone=public\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf clients should route all traffic through the tunnel and use the WireGuard server as the default gateway, enable masquerading for the \u003Ccode class=\"literal\">public\u003C/code> zone:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>firewall-cmd --permanent --zone=public --add-masquerade\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReload the \u003Ccode class=\"literal\">firewalld\u003C/code> rules.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>firewall-cmd --reload\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the configuration of the \u003Ccode class=\"literal\">public\u003C/code> zone:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>firewall-cmd --list-all\u003C/strong>\u003C/span>\npublic (active)\n  ...\n  ports: 51820/udp\n  masquerade: yes\n  ...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">firewall-cmd(1)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-firewalld-on-a-wireguard-server-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.11. Configuring \u003Ccode class=\"literal\">firewalld\u003C/code> on a WireGuard server by using the RHEL web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou must configure the \u003Cspan class=\"strong strong\">\u003Cstrong>firewalld\u003C/strong>\u003C/span> service on the WireGuard server to allow incoming connections from clients. Additionally, if clients should be able to use the WireGuard server as the default gateway and route all traffic through the tunnel, you must enable masquerading.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in to the RHEL web console.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the \u003Cspan class=\"strong strong\">\u003Cstrong>Networking\u003C/strong>\u003C/span> tab in the navigation on the left side of the screen.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Edit rules and zones\u003C/strong>\u003C/span> in the \u003Cspan class=\"strong strong\">\u003Cstrong>Firewall\u003C/strong>\u003C/span> section.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnter \u003Ccode class=\"literal\">wireguard\u003C/code> into the \u003Cspan class=\"strong strong\">\u003Cstrong>Filter services\u003C/strong>\u003C/span> field.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSelect the \u003Ccode class=\"literal\">wireguard\u003C/code> entry from the list.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/c145934f61275ee71f08e23484ca665e/wireguard-server-firewalld.png\" alt=\"firewalld settings for a WireGuard server\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Add services\u003C/strong>\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf clients should route all traffic through the tunnel and use the WireGuard server as the default gateway, enable masquerading for the \u003Ccode class=\"literal\">public\u003C/code> zone:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>firewall-cmd --permanent --zone=public --add-masquerade\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>firewall-cmd --reload\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that you cannot enable masquerading in \u003Ccode class=\"literal\">firewalld\u003C/code> zones in the web console.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the \u003Cspan class=\"strong strong\">\u003Cstrong>Networking\u003C/strong>\u003C/span> tab in the navigation on the left side of the screen.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Edit rules and zones\u003C/strong>\u003C/span> in the \u003Cspan class=\"strong strong\">\u003Cstrong>Firewall\u003C/strong>\u003C/span> section.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe list contains an entry for the \u003Ccode class=\"literal\">wireguard\u003C/code> service and displays the UDP port that you configured in the WireGuard connection profile.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo verify that masquerading is enabled in the \u003Ccode class=\"literal\">firewalld\u003C/code> \u003Ccode class=\"literal\">public\u003C/code> zone, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>firewall-cmd --list-all --zone=public\u003C/strong>\u003C/span>\npublic (active)\n  ...\n  ports: 51820/udp\n  masquerade: yes\n  ...\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-firewalld-on-a-wireguard-server-by-using-the-graphical-interface_assembly_setting-up-a-wireguard-vpn\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.12. Configuring \u003Ccode class=\"literal\">firewalld\u003C/code> on a WireGuard server by using the graphical interface\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou must configure the \u003Ccode class=\"literal\">firewalld\u003C/code> service on the WireGuard server to allow incoming connections from clients. Additionally, if clients should be able to use the WireGuard server as the default gateway and route all traffic through the tunnel, you must enable masquerading.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress the \u003Ckbd class=\"keycap\">Super\u003C/kbd> key, enter \u003Ccode class=\"literal\">firewall\u003C/code>, and select the \u003Cspan class=\"strong strong\">\u003Cstrong>Firewall\u003C/strong>\u003C/span> application from the results.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Ccode class=\"literal\">Permanent\u003C/code> in the \u003Cspan class=\"strong strong\">\u003Cstrong>Configuration\u003C/strong>\u003C/span> list.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the \u003Ccode class=\"literal\">public\u003C/code> zone.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAllow incoming connections to the WireGuard port:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOn the \u003Cspan class=\"strong strong\">\u003Cstrong>Ports\u003C/strong>\u003C/span> tab, click \u003Cspan class=\"guibutton\">Add\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tEnter the port number you set for incoming WireGuard connections:\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSelect \u003Ccode class=\"literal\">udp\u003C/code> from the \u003Ccode class=\"literal\">Protocol\u003C/code> list.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">OK\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf clients should route all traffic through the tunnel and use the WireGuard server as the default gateway:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tNavigate to the \u003Cspan class=\"strong strong\">\u003Cstrong>Masquerading\u003C/strong>\u003C/span> tab of the \u003Cspan class=\"strong strong\">\u003Cstrong>public\u003C/strong>\u003C/span> zone.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSelect \u003Ccode class=\"literal\">Masquerade zone\u003C/code>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Cspan class=\"guimenu\">Options\u003C/span> → \u003Cspan class=\"guimenuitem\">Reload Firewalld\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the configuration of the \u003Ccode class=\"literal\">public\u003C/code> zone:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>firewall-cmd --list-all\u003C/strong>\u003C/span>\npublic (active)\n  ...\n  ports: 51820/udp\n  masquerade: yes\n  ...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-wireguard-client-by-using-nmcli_assembly_setting-up-a-wireguard-vpn\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.13. Configuring a WireGuard client by using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can configure a WireGuard client by creating a connection profile in NetworkManager. Use this method to let NetworkManager manage the WireGuard connection.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThis procedure assumes the following settings:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tClient:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPrivate key: \u003Ccode class=\"literal\">aPUcp5vHz8yMLrzk8SsDyYnV33IhE/k20e52iKJFV0A=\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTunnel IPv4 address: \u003Ccode class=\"literal\">192.0.2.2/24\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTunnel IPv6 address: \u003Ccode class=\"literal\">2001:db8:1::2/32\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tServer:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPublic key: \u003Ccode class=\"literal\">UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTunnel IPv4 address: \u003Ccode class=\"literal\">192.0.2.1/24\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTunnel IPv6 address: \u003Ccode class=\"literal\">2001:db8:1::1/32\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have generated the public and private key for both the server and client.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou know the following information:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe private key of the client\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe static tunnel IP addresses and subnet masks of the client\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe public key of the server\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe static tunnel IP addresses and subnet masks of the server\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd a NetworkManager WireGuard connection profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type wireguard con-name client-wg0 ifname wg0 autoconnect no\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis command creates a profile named \u003Ccode class=\"literal\">client-wg0\u003C/code> and assigns the virtual interface \u003Ccode class=\"literal\">wg0\u003C/code> to it. To prevent the connection from starting automatically after you add it without finalizing the configuration, disable the \u003Ccode class=\"literal\">autoconnect\u003C/code> parameter.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Configure NetworkManager so that it does not automatically start the \u003Ccode class=\"literal\">client-wg\u003C/code> connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify client-wg0 autoconnect no\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the tunnel IPv4 address and subnet mask of the client:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify client-wg0 ipv4.method manual ipv4.addresses 192.0.2.2/24\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the tunnel IPv6 address and subnet mask of the client:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify client-wg0 ipv6.method manual ipv6.addresses 2001:db8:1::2/32\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you want to route all traffic through the tunnel, set the tunnel IP addresses of the server as the default gateway:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify client-wg0 ipv4.gateway 192.0.2.1 ipv6.gateway 2001:db8:1::1\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRouting all traffic through the tunnel requires that you set, in a later step, the \u003Ccode class=\"literal\">allowed-ips\u003C/code> on the this client to \u003Ccode class=\"literal\">0.0.0.0/0;::/0\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that routing all traffic through the tunnel can impact the connectivity to other hosts based on the server routing and firewall configuration.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the client’s private key to the connection profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify client-wg0 wireguard.private-key \"aPUcp5vHz8yMLrzk8SsDyYnV33IhE/k20e52iKJFV0A=\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd peer configurations for each server that you want to allow to communicate with this client. You must add these settings manually, because the \u003Ccode class=\"literal\">nmcli\u003C/code> utility does not support setting the corresponding connection properties.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEdit the \u003Ccode class=\"literal\">/etc/NetworkManager/system-connections/client-wg0.nmconnection\u003C/code> file, and append:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Cspan class=\"strong strong\">\u003Cstrong>[wireguard-peer.UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=]\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>endpoint=server.example.com:51820\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>allowed-ips=192.0.2.1;2001:db8:1::1;\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>persistent-keepalive=20\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">[wireguard-peer.\u003Cspan class=\"emphasis\">\u003Cem>&lt;public_key_of_the_server\u003C/em>\u003C/span>&gt;]\u003C/code> entry defines the peer section of the server, and the section name has the public key of the server.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">endpoint\u003C/code> parameter sets the hostname or IP address and the port of the server. The client uses this information to establish the connection.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">allowed-ips\u003C/code> parameter sets a list of IP addresses that can send data to this client. For example, set the parameter to:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\tThe tunnel IP addresses of the server to allow only the server to communicate with this client. The value in the example above configures this scenario.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">0.0.0.0/0;::/0;\u003C/code> to allow any remote IPv4 and IPv6 address to communicate with this client. Use this setting to route all traffic through the tunnel and use the WireGuard server as default gateway.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tThe optional \u003Ccode class=\"literal\">persistent-keepalive\u003C/code> parameter defines an interval in seconds in which WireGuard sends a keep alive packet to the server. Set this parameter if you use the client in a network with network address translation (NAT) or if a firewall closes the UDP connection after some time of inactivity.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tReload the \u003Ccode class=\"literal\">client-wg0\u003C/code> connection profile:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection load /etc/NetworkManager/system-connections/client-wg0.nmconnection\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReactivate the \u003Ccode class=\"literal\">client-wg0\u003C/code> connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up client-wg0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tPing the IP addresses of the server:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping 192.0.2.1\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>ping6 2001:db8:1::1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the interface configuration of the \u003Ccode class=\"literal\">wg0\u003C/code> device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>wg show wg0\u003C/strong>\u003C/span>\ninterface: wg0\n  public key: bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=\n  private key: (hidden)\n  listening port: 51820\n\npeer: UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=\n  endpoint: server.example.com:51820\n  allowed ips: 192.0.2.1/32, 2001:db8:1::1/128\n  latest handshake: 1 minute, 41 seconds ago\n  transfer: 824 B received, 1.01 KiB sent\n  persistent keepalive: every 20 seconds\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display the private key in the output, use the \u003Ccode class=\"literal\">WG_HIDE_KEYS=never wg show wg0\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that the output has only the \u003Ccode class=\"literal\">latest handshake\u003C/code> and \u003Ccode class=\"literal\">transfer\u003C/code> entries if you have already sent traffic through the VPN tunnel.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IP configuration of the \u003Ccode class=\"literal\">wg0\u003C/code> device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip address show wg0\u003C/strong>\u003C/span>\n10: wg0: &lt;POINTOPOINT,NOARP,UP,LOWER_UP&gt; mtu 1420 qdisc noqueue state UNKNOWN group default qlen 1000\n    link/none\n    inet 192.0.2.2/24 brd 192.0.2.255 scope global noprefixroute wg0\n       valid_lft forever preferred_lft forever\n    inet6 2001:db8:1::2/32 scope global noprefixroute\n       valid_lft forever preferred_lft forever\n    inet6 fe80::73d9:6f51:ea6f:863e/64 scope link noprefixroute\n       valid_lft forever preferred_lft forever\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">wg(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">WireGuard setting\u003C/code> section in the \u003Ccode class=\"literal\">nm-settings(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-wireguard-client-by-using-nmtui_assembly_setting-up-a-wireguard-vpn\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.14. Configuring a WireGuard client by using \u003Ccode class=\"literal\">nmtui\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can configure a WireGuard client by creating a connection profile in NetworkManager. Use this method to let NetworkManager manage the WireGuard connection.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThis procedure assumes the following settings:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tClient:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPrivate key: \u003Ccode class=\"literal\">aPUcp5vHz8yMLrzk8SsDyYnV33IhE/k20e52iKJFV0A=\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTunnel IPv4 address: \u003Ccode class=\"literal\">192.0.2.2/24\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTunnel IPv6 address: \u003Ccode class=\"literal\">2001:db8:1::2/32\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tServer:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPublic key: \u003Ccode class=\"literal\">UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTunnel IPv4 address: \u003Ccode class=\"literal\">192.0.2.1/24\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTunnel IPv6 address: \u003Ccode class=\"literal\">2001:db8:1::1/32\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have generated the public and private key for both the server and client.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou know the following information:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe private key of the client\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe static tunnel IP addresses and subnet masks of the client\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe public key of the server\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe static tunnel IP addresses and subnet masks of the server\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou installed the \u003Ccode class=\"literal\">NetworkManager-tui\u003C/code> package\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart the \u003Ccode class=\"literal\">nmtui\u003C/code> application:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmtui\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Cspan class=\"strong strong\">\u003Cstrong>Edit a connection\u003C/strong>\u003C/span>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Cspan class=\"guibutton\">Add\u003C/span>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the \u003Cspan class=\"strong strong\">\u003Cstrong>WireGuard\u003C/strong>\u003C/span> connection type in the list, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Edit connection\u003C/strong>\u003C/span> window:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tEnter the name of the connection and the virtual interface, such as \u003Ccode class=\"literal\">wg0\u003C/code>, that NetworkManager should assign to the connection.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnter the private key of the client.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/a4f53bf5e7711ead1a2f3ce033b0e097/nmtui-WireGuard-client-general.png\" alt=\"nmtui WireGuard client general\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Add\u003C/span> next to the \u003Cspan class=\"strong strong\">\u003Cstrong>Peers\u003C/strong>\u003C/span> pane:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tEnter the public key of the server.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tSet the \u003Cspan class=\"strong strong\">\u003Cstrong>Allowed IPs\u003C/strong>\u003C/span> field. For example, set it to:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\tThe tunnel IP addresses of the server to allow only the server to communicate with this client.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">0.0.0.0/0,::/0\u003C/code> to allow any remote IPv4 and IPv6 address to communicate with this client. Use this setting to route all traffic through the tunnel and use the WireGuard server as default gateway.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tEnter the host name or IP address and port of the WireGuard server into the \u003Cspan class=\"strong strong\">\u003Cstrong>Endpoint\u003C/strong>\u003C/span> field. Use the following format: \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>&lt;hostname_or_IP&gt;\u003C/em>\u003C/span>:\u003Cspan class=\"emphasis\">\u003Cem>&lt;port_number&gt;\u003C/em>\u003C/span>\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tOptional: If you use the client in a network with network address translation (NAT) or if a firewall closes the UDP connection after some time of inactivity, set a persistent keep alive interval in seconds. In this interval, the client sends a keepalive packet to the server.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tSelect \u003Cspan class=\"guibutton\">OK\u003C/span>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/341938ab4848be519e2fecff960f4afe/nmtui-WireGuard-client-peer-config.png\" alt=\"nmtui WireGuard client peer config\"/>\u003C/div>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSelect \u003Cspan class=\"guibutton\">Show\u003C/span> next to \u003Cspan class=\"strong strong\">\u003Cstrong>IPv4 Configuration\u003C/strong>\u003C/span>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tSelect the IPv4 configuration method \u003Cspan class=\"strong strong\">\u003Cstrong>Manual\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tEnter the tunnel IPv4 address and the subnet mask. Leave the \u003Cspan class=\"strong strong\">\u003Cstrong>Gateway\u003C/strong>\u003C/span> field empty.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSelect \u003Cspan class=\"guibutton\">Show\u003C/span> next to \u003Cspan class=\"strong strong\">\u003Cstrong>IPv6 Configuration\u003C/strong>\u003C/span>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tSelect the IPv6 configuration method \u003Cspan class=\"strong strong\">\u003Cstrong>Manual\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tEnter the tunnel IPv6 address and the subnet mask. Leave the \u003Cspan class=\"strong strong\">\u003Cstrong>Gateway\u003C/strong>\u003C/span> field empty.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOptional: Select \u003Cspan class=\"strong strong\">\u003Cstrong>Automatically connect\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSelect \u003Cspan class=\"guibutton\">OK\u003C/span>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/c40c64154356c1cb540eddb6891df248/nmtui-WireGuard-client-ip-config.png\" alt=\"nmtui WireGuard client ip config\"/>\u003C/div>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIn the window with the list of connections, select \u003Cspan class=\"guibutton\">Back\u003C/span>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>NetworkManager TUI\u003C/strong>\u003C/span> main window, select \u003Cspan class=\"guibutton\">Quit\u003C/span>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tPing the IP addresses of the server:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping 192.0.2.1\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>ping6 2001:db8:1::1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the interface configuration of the \u003Ccode class=\"literal\">wg0\u003C/code> device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>wg show wg0\u003C/strong>\u003C/span>\ninterface: wg0\n  public key: bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=\n  private key: (hidden)\n  listening port: 51820\n\npeer: UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=\n  endpoint: server.example.com:51820_\n  allowed ips: 192.0.2.1/32, 2001:db8:1::1/128\n  latest handshake: 1 minute, 41 seconds ago\n  transfer: 824 B received, 1.01 KiB sent\n  persistent keepalive: every 20 seconds\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display the private key in the output, use the \u003Ccode class=\"literal\">WG_HIDE_KEYS=never wg show wg0\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that the output contains only the \u003Ccode class=\"literal\">latest handshake\u003C/code> and \u003Ccode class=\"literal\">transfer\u003C/code> entries if you have already sent traffic through the VPN tunnel.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IP configuration of the \u003Ccode class=\"literal\">wg0\u003C/code> device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip address show wg0\u003C/strong>\u003C/span>\n10: wg0: &lt;POINTOPOINT,NOARP,UP,LOWER_UP&gt; mtu 1420 qdisc noqueue state UNKNOWN group default qlen 1000\n    link/none\n    inet 192.0.2.2/24 brd 192.0.2.255 scope global noprefixroute wg0\n       valid_lft forever preferred_lft forever\n    inet6 2001:db8:1::2/32 scope global noprefixroute\n       valid_lft forever preferred_lft forever\n    inet6 fe80::73d9:6f51:ea6f:863e/64 scope link noprefixroute\n       valid_lft forever preferred_lft forever\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">wg(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-wireguard-client-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.15. Configuring a WireGuard client by using the RHEL web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can configure a WireGuard client by using the browser-based RHEL web console. Use this method to let NetworkManager manage the WireGuard connection.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in to the RHEL web console.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou know the following information:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe static tunnel IP addresses and subnet masks of both the server and client\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe public key of the server\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the \u003Cspan class=\"strong strong\">\u003Cstrong>Networking\u003C/strong>\u003C/span> tab in the navigation on the left side of the screen.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Add VPN\u003C/strong>\u003C/span> in the \u003Cspan class=\"strong strong\">\u003Cstrong>Interfaces\u003C/strong>\u003C/span> section.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf the \u003Ccode class=\"literal\">wireguard-tools\u003C/code> and \u003Ccode class=\"literal\">systemd-resolved\u003C/code> packages are not already installed, the web console displays a corresponding notification. Click \u003Cspan class=\"strong strong\">\u003Cstrong>Install\u003C/strong>\u003C/span> to install these packages.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnter the name of the WireGuard device that you want to create.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the key pair of this host:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you want use the keys that the web console has created:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tKeep the pre-selected \u003Cspan class=\"strong strong\">\u003Cstrong>Generated\u003C/strong>\u003C/span> option in the \u003Cspan class=\"strong strong\">\u003Cstrong>Private key\u003C/strong>\u003C/span> area.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tNote the \u003Cspan class=\"strong strong\">\u003Cstrong>Public key\u003C/strong>\u003C/span> value. You require this information when you configure the client.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you want to use an existing private key:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tSelect \u003Cspan class=\"strong strong\">\u003Cstrong>Paste existing key\u003C/strong>\u003C/span> in the \u003Cspan class=\"strong strong\">\u003Cstrong>Private key\u003C/strong>\u003C/span> area.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tPaste the private key into the text field. The web console automatically calculates the corresponding public key.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPreserve the \u003Ccode class=\"literal\">0\u003C/code> value in the \u003Cspan class=\"strong strong\">\u003Cstrong>Listen port\u003C/strong>\u003C/span> field.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the tunnel IPv4 address and subnet mask of the client.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo also set an IPv6 address, you must edit the connection after you have created it.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd a peer configuration for the server that you want to allow to communicate with this client:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Add peer\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tEnter the public key of the server.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSet the \u003Cspan class=\"strong strong\">\u003Cstrong>Endpoint\u003C/strong>\u003C/span> field to the hostname or IP address and the port of the server, for example \u003Ccode class=\"literal\">server.example.com:51820\u003C/code>. The client uses this information to establish the connection.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSet the \u003Cspan class=\"strong strong\">\u003Cstrong>Allowed IPs\u003C/strong>\u003C/span> field to the tunnel IP addresses of the clients that are allowed to send data to this server. For example, set the field to one of the following:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tThe tunnel IP addresses of the server to allow only the server to communicate with this client. The value in the screen capture below configures this scenario.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">0.0.0.0/0\u003C/code> to allow any remote IPv4 address to communicate with this client. Use this setting to route all traffic through the tunnel and use the WireGuard server as default gateway.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/5638863bffd3887907b69106b76db8bb/wireguard-client-settings.png\" alt=\"WireGuard client settings\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span> to create the WireGuard connection.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you want to also set a tunnel IPv6 address:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick on the WireGuard connection’s name in the \u003Cspan class=\"strong strong\">\u003Cstrong>Interfaces\u003C/strong>\u003C/span> section.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Edit\u003C/strong>\u003C/span> next to \u003Cspan class=\"strong strong\">\u003Cstrong>IPv6\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSet the \u003Cspan class=\"strong strong\">\u003Cstrong>Addresses\u003C/strong>\u003C/span> field to \u003Ccode class=\"literal\">Manual\u003C/code>, and enter the tunnel IPv6 address and prefix of the client.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Save\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tPing the IP addresses of the server:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping 192.0.2.1\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tWireGuard establishes the connection when you try to send traffic through the tunnel.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the interface configuration of the \u003Ccode class=\"literal\">wg0\u003C/code> device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>wg show wg0\u003C/strong>\u003C/span>\ninterface: wg0\n  public key: bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=\n  private key: (hidden)\n  listening port: 45513\n\npeer: UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=\n  endpoint: server.example.com:51820\n  allowed ips: 192.0.2.1/32, 2001:db8:1::1/128\n  latest handshake: 1 minute, 41 seconds ago\n  transfer: 824 B received, 1.01 KiB sent\n  persistent keepalive: every 20 seconds\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display the private key in the output, use the \u003Ccode class=\"literal\">WG_HIDE_KEYS=never wg show wg0\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that the output has only the \u003Ccode class=\"literal\">latest handshake\u003C/code> and \u003Ccode class=\"literal\">transfer\u003C/code> entries if you have already sent traffic through the VPN tunnel.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IP configuration of the \u003Ccode class=\"literal\">wg0\u003C/code> device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip address show wg0\u003C/strong>\u003C/span>\n10: wg0: &lt;POINTOPOINT,NOARP,UP,LOWERUP&gt; mtu 1420 qdisc noqueue state UNKNOWN group default qlen 1000\n    link/none\n    inet 192.0.2.2/24 brd 192.0.2.255 scope global noprefixroute wg0\n       valid_lft forever preferred_lft forever\n    inet6 2001:db8:1::2/32 scope global noprefixroute\n       valid_lft forever preferred_lft forever\n    inet6 fe80::73d9:6f51:ea6f:863e/64 scope link noprefixroute\n       valid_lft forever preferred_lft forever\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-wireguard-client-by-using-nm-connection-editor_assembly_setting-up-a-wireguard-vpn\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.16. Configuring a WireGuard client by using nm-connection-editor\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can configure a WireGuard client by creating a connection profile in NetworkManager. Use this method to let NetworkManager manage the WireGuard connection.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have generated the public and private key for both the server and client.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou know the following information:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe private key of the client\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe static tunnel IP addresses and subnet masks of the client\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe public key of the server\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe static tunnel IP addresses and subnet masks of the server\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen a terminal, and enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nm-connection-editor\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAdd a new connection by clicking the \u003Cspan class=\"guibutton\">+\u003C/span> button.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the \u003Cspan class=\"strong strong\">\u003Cstrong>WireGuard\u003C/strong>\u003C/span> connection type, and click \u003Cspan class=\"guibutton\">Create\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOptional: Update the connection name.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOptional: On the \u003Cspan class=\"strong strong\">\u003Cstrong>General\u003C/strong>\u003C/span> tab, select \u003Cspan class=\"strong strong\">\u003Cstrong>Connect automatically with priority\u003C/strong>\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the \u003Cspan class=\"strong strong\">\u003Cstrong>WireGuard\u003C/strong>\u003C/span> tab:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tEnter the name of the virtual interface, such as \u003Ccode class=\"literal\">wg0\u003C/code>, that NetworkManager should assign to the connection.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tEnter client’s private key.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Add\u003C/span> to add peers:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tEnter the public key of the server.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tSet the \u003Cspan class=\"strong strong\">\u003Cstrong>Allowed IPs\u003C/strong>\u003C/span> field. For example, set it to:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\tThe tunnel IP addresses of the server to allow only the server to communicate with this client.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">0.0.0.0/0;::/0;\u003C/code> to allow any remote IPv4 and IPv6 address to communicate with this client. Use this setting to route all traffic through the tunnel and use the WireGuard server as default gateway.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\t\tNote that routing all traffic through the tunnel can impact the connectivity to other hosts based on the server routing and firewall configuration.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tEnter the hostname or IP address and port of the WireGuard server into the \u003Cspan class=\"strong strong\">\u003Cstrong>Endpoint\u003C/strong>\u003C/span> field. Use the following format: \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>&lt;hostname_or_IP&lt;\u003C/em>\u003C/span>:\u003Cspan class=\"emphasis\">\u003Cem>&lt;port_number&gt;\u003C/em>\u003C/span>\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tOptional: If you use the client in a network with network address translation (NAT) or if a firewall closes the UDP connection after some time of inactivity, set a persistent keep alive interval in seconds. In this interval, the client sends a keep alive packet to the server.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Apply\u003C/span>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the \u003Cspan class=\"strong strong\">\u003Cstrong>IPv4 Settings\u003C/strong>\u003C/span> tab:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSelect \u003Cspan class=\"strong strong\">\u003Cstrong>Manual\u003C/strong>\u003C/span> in the \u003Cspan class=\"strong strong\">\u003Cstrong>Method\u003C/strong>\u003C/span> list.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Add\u003C/span> to enter the tunnel IPv4 address and the subnet mask.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you want to route all traffic through the tunnel, set the tunnel IPv4 address of the server in the \u003Cspan class=\"strong strong\">\u003Cstrong>Gateway\u003C/strong>\u003C/span> field. Otherwise, leave the field empty.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRouting all IPv4 traffic through the tunnel requires that you included \u003Ccode class=\"literal\">0.0.0.0/0\u003C/code> in the \u003Cspan class=\"strong strong\">\u003Cstrong>Allowed IPs\u003C/strong>\u003C/span> field on this client.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the \u003Cspan class=\"strong strong\">\u003Cstrong>IPv6 Settings\u003C/strong>\u003C/span> tab:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSelect \u003Cspan class=\"strong strong\">\u003Cstrong>Manual\u003C/strong>\u003C/span> in the \u003Cspan class=\"strong strong\">\u003Cstrong>Method\u003C/strong>\u003C/span> list.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Add\u003C/span> to enter the tunnel IPv6 address and the subnet mask.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you want to route all traffic through the tunnel, set the tunnel IPv6 address of the server in the \u003Cspan class=\"strong strong\">\u003Cstrong>Gateway\u003C/strong>\u003C/span> field. Otherwise, leave the field empty.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRouting all IPv4 traffic through the tunnel requires that you included \u003Ccode class=\"literal\">::/0\u003C/code> in the \u003Cspan class=\"strong strong\">\u003Cstrong>Allowed IPs\u003C/strong>\u003C/span> field on this client.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Save\u003C/span> to store the connection profile.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tPing the IP addresses of the server:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping 192.0.2.1\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>ping6 2001:db8:1::1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the interface configuration of the \u003Ccode class=\"literal\">wg0\u003C/code> device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>wg show wg0\u003C/strong>\u003C/span>\ninterface: wg0\n  public key: bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=\n  private key: (hidden)\n  listening port: 51820\n\npeer: UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=\n  endpoint: server.example.com:51820\n  allowed ips: 192.0.2.1/32, 2001:db8:1::1/128\n  latest handshake: 1 minute, 41 seconds ago\n  transfer: 824 B received, 1.01 KiB sent\n  persistent keepalive: every 20 seconds\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display the private key in the output, use the \u003Ccode class=\"literal\">WG_HIDE_KEYS=never wg show wg0\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that the output only has the \u003Ccode class=\"literal\">latest handshake\u003C/code> and \u003Ccode class=\"literal\">transfer\u003C/code> entries if you have already sent traffic through the VPN tunnel.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IP configuration of the \u003Ccode class=\"literal\">wg0\u003C/code> device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip address show wg0\u003C/strong>\u003C/span>\n10: wg0: &lt;POINTOPOINT,NOARP,UP,LOWER_UP&gt; mtu 1420 qdisc noqueue state UNKNOWN group default qlen 1000\n    link/none\n    inet 192.0.2.2/24 brd 192.0.2.255 scope global noprefixroute wg0\n       valid_lft forever preferred_lft forever\n    inet6 2001:db8:1::2/32 scope global noprefixroute\n       valid_lft forever preferred_lft forever\n    inet6 fe80::73d9:6f51:ea6f:863e/64 scope link noprefixroute\n       valid_lft forever preferred_lft forever\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">wg(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-wireguard-client-by-using-the-wg-quick-service_assembly_setting-up-a-wireguard-vpn\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.17. Configuring a WireGuard client by using the \u003Ccode class=\"literal\">wg-quick\u003C/code> service\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can configure a WireGuard client by creating a configuration file in the \u003Ccode class=\"literal\">/etc/wireguard/\u003C/code> directory. Use this method to configure the service independently from NetworkManager.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThis procedure assumes the following settings:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tClient:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPrivate key: \u003Ccode class=\"literal\">aPUcp5vHz8yMLrzk8SsDyYnV33IhE/k20e52iKJFV0A=\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTunnel IPv4 address: \u003Ccode class=\"literal\">192.0.2.2/24\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTunnel IPv6 address: \u003Ccode class=\"literal\">2001:db8:1::2/32\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tServer:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPublic key: \u003Ccode class=\"literal\">UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTunnel IPv4 address: \u003Ccode class=\"literal\">192.0.2.1/24\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTunnel IPv6 address: \u003Ccode class=\"literal\">2001:db8:1::1/32\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have generated the public and private key for both the server and client.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou know the following information:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe private key of the client\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe static tunnel IP addresses and subnet masks of the client\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe public key of the server\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe static tunnel IP addresses and subnet masks of the server\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">wireguard-tools\u003C/code> package:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install wireguard-tools\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">/etc/wireguard/wg0.conf\u003C/code> file with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Cspan class=\"strong strong\">\u003Cstrong>[Interface]\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>Address = 192.0.2.2/24, 2001:db8:1::2/32\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>PrivateKey = aPUcp5vHz8yMLrzk8SsDyYnV33IhE/k20e52iKJFV0A=\u003C/strong>\u003C/span>\n\n\u003Cspan class=\"strong strong\">\u003Cstrong>[Peer]\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>PublicKey = UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>AllowedIPs = 192.0.2.1, 2001:db8:1::1\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>Endpoint = server.example.com:51820\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>PersistentKeepalive = 20\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">[Interface]\u003C/code> section describes the WireGuard settings of the interface on the client:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Address\u003C/code>: A comma-separated list of the client’s tunnel IP addresses.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">PrivateKey\u003C/code>: The private key of the client.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">[Peer]\u003C/code> section describes the settings of the server:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">PublicKey\u003C/code>: The public key of the server.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">AllowedIPs\u003C/code>: The IP addresses that are allowed to send data to this client. For example, set the parameter to:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"square\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\tThe tunnel IP addresses of the server to allow only the server to communicate with this client. The value in the example above configures this scenario.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">0.0.0.0/0, ::/0\u003C/code> to allow any remote IPv4 and IPv6 address to communicate with this client. Use this setting to route all traffic through the tunnel and use the WireGuard server as default gateway.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Endpoint\u003C/code>: Sets the hostname or IP address and the port of the server. The client uses this information to establish the connection.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tThe optional \u003Ccode class=\"literal\">persistent-keepalive\u003C/code> parameter defines an interval in seconds in which WireGuard sends a keepalive packet to the server. Set this parameter if you use the client in a network with network address translation (NAT) or if a firewall closes the UDP connection after some time of inactivity.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable and start the WireGuard connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable --now wg-quick@wg0\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe systemd instance name must match the name of the configuration file in the \u003Ccode class=\"literal\">/etc/wireguard/\u003C/code> directory without the \u003Ccode class=\"literal\">.conf\u003C/code> suffix. The service also uses this name for the virtual network interface.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tPing the IP addresses of the server:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping 192.0.2.1\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>ping6 2001:db8:1::1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the interface configuration of the \u003Ccode class=\"literal\">wg0\u003C/code> device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>wg show wg0\u003C/strong>\u003C/span>\ninterface: wg0\n  public key: bnwfQcC8/g2i4vvEqcRUM2e6Hi3Nskk6G9t4r26nFVM=\n  private key: (hidden)\n  listening port: 51820\n\npeer: UtjqCJ57DeAscYKRfp7cFGiQqdONRn69u249Fa4O6BE=\n  endpoint: server.example.com:51820\n  allowed ips: 192.0.2.1/32, 2001:db8:1::1/128\n  latest handshake: 1 minute, 41 seconds ago\n  transfer: 824 B received, 1.01 KiB sent\n  persistent keepalive: every 20 seconds\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display the private key in the output, use the \u003Ccode class=\"literal\">WG_HIDE_KEYS=never wg show wg0\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that the output contains only the \u003Ccode class=\"literal\">latest handshake\u003C/code> and \u003Ccode class=\"literal\">transfer\u003C/code> entries if you have already sent traffic through the VPN tunnel.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IP configuration of the \u003Ccode class=\"literal\">wg0\u003C/code> device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip address show wg0\u003C/strong>\u003C/span>\n10: wg0: &lt;POINTOPOINT,NOARP,UP,LOWER_UP&gt; mtu 1420 qdisc noqueue state UNKNOWN group default qlen 1000\n    link/none\n    inet 192.0.2.2/24 scope global wg0\n       valid_lft forever preferred_lft forever\n    inet6 2001:db8:1::2/32 scope global\n       valid_lft forever preferred_lft forever\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">wg(8)\u003C/code> and \u003Ccode class=\"literal\">wg-quick(8)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-ip-tunnels_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 9. Configuring IP tunnels\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tSimilar to a VPN, an IP tunnel directly connects two networks over a third network, such as the internet. However, not all tunnel protocols support encryption.\n\t\t\u003C/p>\u003Cp>\n\t\t\tThe routers in both networks that establish the tunnel requires at least two interfaces:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tOne interface that is connected to the local network\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tOne interface that is connected to the network through which the tunnel is established.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tTo establish the tunnel, you create a virtual interface on both routers with an IP address from the remote subnet.\n\t\t\u003C/p>\u003Cp>\n\t\t\tNetworkManager supports the following IP tunnels:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tGeneric Routing Encapsulation (GRE)\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tGeneric Routing Encapsulation over IPv6 (IP6GRE)\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tGeneric Routing Encapsulation Terminal Access Point (GRETAP)\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tGeneric Routing Encapsulation Terminal Access Point over IPv6 (IP6GRETAP)\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tIPv4 over IPv4 (IPIP)\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tIPv4 over IPv6 (IPIP6)\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tIPv6 over IPv6 (IP6IP6)\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tSimple Internet Transition (SIT)\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tDepending on the type, these tunnels act either on layer 2 or 3 of the Open Systems Interconnection (OSI) model.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"configuring-an-ipip-tunnel-using-nmcli-to-encapsulate--ipv4-traffic-in-ipv4-packets_configuring-ip-tunnels\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">9.1. Configuring an IPIP tunnel to encapsulate IPv4 traffic in IPv4 packets\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tAn IP over IP (IPIP) tunnel operates on OSI layer 3 and encapsulates IPv4 traffic in IPv4 packets as described in \u003Ca class=\"link\" href=\"https://tools.ietf.org/html/rfc2003\">RFC 2003\u003C/a>.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tData sent through an IPIP tunnel is not encrypted. For security reasons, use the tunnel only for data that is already encrypted, for example, by other protocols, such as HTTPS.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tNote that IPIP tunnels support only unicast packets. If you require an IPv4 tunnel that supports multicast, see \u003Ca class=\"link\" href=\"#configuring-a-gre-tunnel-using-nmcli-to-encapsulate-layer-3-traffic-in-ipv4-packets_configuring-ip-tunnels\" title=\"9.2. Configuring a GRE tunnel to encapsulate layer-3 traffic in IPv4 packets\">Configuring a GRE tunnel to encapsulate layer-3 traffic in IPv4 packets\u003C/a>.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor example, you can create an IPIP tunnel between two RHEL routers to connect two internal subnets over the internet as shown in the following diagram:\n\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/7a4baade335da7cdc9159871199529bb/IPIP-tunnel.png\" alt=\"IPIP tunnel\"/>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEach RHEL router has a network interface that is connected to its local subnet.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEach RHEL router has a network interface that is connected to the internet.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe traffic you want to send through the tunnel is IPv4 unicast.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the RHEL router in network A:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate an IPIP tunnel interface named \u003Ccode class=\"literal\">tun0\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ip-tunnel ip-tunnel.mode ipip con-name tun0 ifname tun0 remote 198.51.100.5 local 203.0.113.10\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">remote\u003C/code> and \u003Ccode class=\"literal\">local\u003C/code> parameters set the public IP addresses of the remote and the local routers.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSet the IPv4 address to the \u003Ccode class=\"literal\">tun0\u003C/code> device:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify tun0 ipv4.addresses '10.0.1.1/30'\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tNote that a \u003Ccode class=\"literal\">/30\u003C/code> subnet with two usable IP addresses is sufficient for the tunnel.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tConfigure the \u003Ccode class=\"literal\">tun0\u003C/code> connection to use a manual IPv4 configuration:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify tun0 ipv4.method manual\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd a static route that routes traffic to the \u003Ccode class=\"literal\">172.16.0.0/24\u003C/code> network to the tunnel IP on router B:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify tun0 +ipv4.routes \"172.16.0.0/24 10.0.1.2\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnable the \u003Ccode class=\"literal\">tun0\u003C/code> connection.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up tun0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnable packet forwarding:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"net.ipv4.ip_forward=1\" &gt; /etc/sysctl.d/95-IPv4-forwarding.conf\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>sysctl -p /etc/sysctl.d/95-IPv4-forwarding.conf\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the RHEL router in network B:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate an IPIP tunnel interface named \u003Ccode class=\"literal\">tun0\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ip-tunnel ip-tunnel.mode ipip con-name tun0 ifname tun0 remote 203.0.113.10 local 198.51.100.5\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">remote\u003C/code> and \u003Ccode class=\"literal\">local\u003C/code> parameters set the public IP addresses of the remote and local routers.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSet the IPv4 address to the \u003Ccode class=\"literal\">tun0\u003C/code> device:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify tun0 ipv4.addresses '10.0.1.2/30'\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tConfigure the \u003Ccode class=\"literal\">tun0\u003C/code> connection to use a manual IPv4 configuration:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify tun0 ipv4.method manual\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd a static route that routes traffic to the \u003Ccode class=\"literal\">192.0.2.0/24\u003C/code> network to the tunnel IP on router A:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify tun0 +ipv4.routes \"192.0.2.0/24 10.0.1.1\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnable the \u003Ccode class=\"literal\">tun0\u003C/code> connection.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up tun0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnable packet forwarding:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"net.ipv4.ip_forward=1\" &gt; /etc/sysctl.d/95-IPv4-forwarding.conf\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>sysctl -p /etc/sysctl.d/95-IPv4-forwarding.conf\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFrom each RHEL router, ping the IP address of the internal interface of the other router:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn Router A, ping \u003Ccode class=\"literal\">172.16.0.1\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping 172.16.0.1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn Router B, ping \u003Ccode class=\"literal\">192.0.2.1\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping 192.0.2.1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-gre-tunnel-using-nmcli-to-encapsulate-layer-3-traffic-in-ipv4-packets_configuring-ip-tunnels\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">9.2. Configuring a GRE tunnel to encapsulate layer-3 traffic in IPv4 packets\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tA Generic Routing Encapsulation (GRE) tunnel encapsulates layer-3 traffic in IPv4 packets as described in \u003Ca class=\"link\" href=\"https://tools.ietf.org/html/rfc2784\">RFC 2784\u003C/a>. A GRE tunnel can encapsulate any layer 3 protocol with a valid Ethernet type.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tData sent through a GRE tunnel is not encrypted. For security reasons, use the tunnel only for data that is already encrypted, for example, by other protocols, such as HTTPS.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tFor example, you can create a GRE tunnel between two RHEL routers to connect two internal subnets over the internet as shown in the following diagram:\n\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/ee24ab1cb16aa24353c8a2fd6fbbb556/GRE-tunnel.png\" alt=\"GRE tunnel\"/>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEach RHEL router has a network interface that is connected to its local subnet.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEach RHEL router has a network interface that is connected to the internet.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the RHEL router in network A:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate a GRE tunnel interface named \u003Ccode class=\"literal\">gre1\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ip-tunnel ip-tunnel.mode gre con-name gre1 ifname gre1 remote 198.51.100.5 local 203.0.113.10\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">remote\u003C/code> and \u003Ccode class=\"literal\">local\u003C/code> parameters set the public IP addresses of the remote and the local routers.\n\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">gre0\u003C/code> device name is reserved. Use \u003Ccode class=\"literal\">gre1\u003C/code> or a different name for the device.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSet the IPv4 address to the \u003Ccode class=\"literal\">gre1\u003C/code> device:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify gre1 ipv4.addresses '10.0.1.1/30'\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tNote that a \u003Ccode class=\"literal\">/30\u003C/code> subnet with two usable IP addresses is sufficient for the tunnel.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tConfigure the \u003Ccode class=\"literal\">gre1\u003C/code> connection to use a manual IPv4 configuration:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify gre1 ipv4.method manual\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd a static route that routes traffic to the \u003Ccode class=\"literal\">172.16.0.0/24\u003C/code> network to the tunnel IP on router B:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify gre1 +ipv4.routes \"172.16.0.0/24 10.0.1.2\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnable the \u003Ccode class=\"literal\">gre1\u003C/code> connection.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up gre1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnable packet forwarding:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"net.ipv4.ip_forward=1\" &gt; /etc/sysctl.d/95-IPv4-forwarding.conf\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>sysctl -p /etc/sysctl.d/95-IPv4-forwarding.conf\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the RHEL router in network B:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate a GRE tunnel interface named \u003Ccode class=\"literal\">gre1\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ip-tunnel ip-tunnel.mode gre con-name gre1 ifname gre1 remote 203.0.113.10 local 198.51.100.5\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">remote\u003C/code> and \u003Ccode class=\"literal\">local\u003C/code> parameters set the public IP addresses of the remote and the local routers.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSet the IPv4 address to the \u003Ccode class=\"literal\">gre1\u003C/code> device:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify gre1 ipv4.addresses '10.0.1.2/30'\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tConfigure the \u003Ccode class=\"literal\">gre1\u003C/code> connection to use a manual IPv4 configuration:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify gre1 ipv4.method manual\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd a static route that routes traffic to the \u003Ccode class=\"literal\">192.0.2.0/24\u003C/code> network to the tunnel IP on router A:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify gre1 +ipv4.routes \"192.0.2.0/24 10.0.1.1\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnable the \u003Ccode class=\"literal\">gre1\u003C/code> connection.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up gre1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnable packet forwarding:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"net.ipv4.ip_forward=1\" &gt; /etc/sysctl.d/95-IPv4-forwarding.conf\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>sysctl -p /etc/sysctl.d/95-IPv4-forwarding.conf\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFrom each RHEL router, ping the IP address of the internal interface of the other router:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn Router A, ping \u003Ccode class=\"literal\">172.16.0.1\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping 172.16.0.1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn Router B, ping \u003Ccode class=\"literal\">192.0.2.1\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping 192.0.2.1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-gretap-tunnel-to-transfer-ethernet-frames-over-ipv4_configuring-ip-tunnels\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">9.3. Configuring a GRETAP tunnel to transfer Ethernet frames over IPv4\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tA Generic Routing Encapsulation Terminal Access Point (GRETAP) tunnel operates on OSI level 2 and encapsulates Ethernet traffic in IPv4 packets as described in \u003Ca class=\"link\" href=\"https://tools.ietf.org/html/rfc2784\">RFC 2784\u003C/a>.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tData sent through a GRETAP tunnel is not encrypted. For security reasons, establish the tunnel over a VPN or a different encrypted connection.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tFor example, you can create a GRETAP tunnel between two RHEL routers to connect two networks using a bridge as shown in the following diagram:\n\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/00b6e5003f5f139db0b0f35dfd051213/GRETAP-tunnel.png\" alt=\"GRETAP tunnel\"/>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEach RHEL router has a network interface that is connected to its local network, and the interface has no IP configuration assigned.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEach RHEL router has a network interface that is connected to the internet.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the RHEL router in network A:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate a bridge interface named \u003Ccode class=\"literal\">bridge0\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type bridge con-name bridge0 ifname bridge0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tConfigure the IP settings of the bridge:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bridge0 ipv4.addresses '192.0.2.1/24'\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bridge0 ipv4.method manual\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd a new connection profile for the interface that is connected to local network to the bridge:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ethernet port-type bridge con-name bridge0-port1 ifname enp1s0 controller bridge0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd a new connection profile for the GRETAP tunnel interface to the bridge:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ip-tunnel ip-tunnel.mode gretap port-type bridge con-name bridge0-port2 ifname gretap1 remote 198.51.100.5 local 203.0.113.10 controller bridge0\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">remote\u003C/code> and \u003Ccode class=\"literal\">local\u003C/code> parameters set the public IP addresses of the remote and the local routers.\n\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">gretap0\u003C/code> device name is reserved. Use \u003Ccode class=\"literal\">gretap1\u003C/code> or a different name for the device.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOptional: Disable the Spanning Tree Protocol (STP) if you do not need it:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bridge0 bridge.stp no\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tBy default, STP is enabled and causes a delay before you can use the connection.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tConfigure that activating the \u003Ccode class=\"literal\">bridge0\u003C/code> connection automatically activates the ports of the bridge:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bridge0 connection.autoconnect-ports 1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tActive the \u003Ccode class=\"literal\">bridge0\u003C/code> connection:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up bridge0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the RHEL router in network B:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate a bridge interface named \u003Ccode class=\"literal\">bridge0\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type bridge con-name bridge0 ifname bridge0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tConfigure the IP settings of the bridge:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bridge0 ipv4.addresses '192.0.2.2/24'\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bridge0 ipv4.method manual\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd a new connection profile for the interface that is connected to local network to the bridge:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ethernet port-type bridge con-name bridge0-port1 ifname enp1s0 controller bridge0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd a new connection profile for the GRETAP tunnel interface to the bridge:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ip-tunnel ip-tunnel.mode gretap port-type bridge con-name bridge0-port2 ifname gretap1 remote 203.0.113.10 local 198.51.100.5 controller bridge0\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">remote\u003C/code> and \u003Ccode class=\"literal\">local\u003C/code> parameters set the public IP addresses of the remote and the local routers.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOptional: Disable the Spanning Tree Protocol (STP) if you do not need it:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bridge0 bridge.stp no\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tConfigure that activating the \u003Ccode class=\"literal\">bridge0\u003C/code> connection automatically activates the ports of the bridge:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bridge0 connection.autoconnect-ports 1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tActive the \u003Ccode class=\"literal\">bridge0\u003C/code> connection:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up bridge0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn both routers, verify that the \u003Ccode class=\"literal\">enp1s0\u003C/code> and \u003Ccode class=\"literal\">gretap1\u003C/code> connections are connected and that the \u003Ccode class=\"literal\">CONNECTION\u003C/code> column displays the connection name of the port:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device\u003C/strong>\u003C/span>\nnmcli device\nDEVICE   TYPE      STATE      CONNECTION\n...\nbridge0  bridge    connected  bridge0\nenp1s0   ethernet  connected  bridge0-port1\ngretap1  iptunnel  connected  bridge0-port2\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFrom each RHEL router, ping the IP address of the internal interface of the other router:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn Router A, ping \u003Ccode class=\"literal\">192.0.2.2\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping 192.0.2.2\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn Router B, ping \u003Ccode class=\"literal\">192.0.2.1\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping 192.0.2.1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 10. Using a VXLAN to create a virtual layer-2 domain for VMs\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tA virtual extensible LAN (VXLAN) is a networking protocol that tunnels layer-2 traffic over an IP network using the UDP protocol. For example, certain virtual machines (VMs), that are running on different hosts can communicate over a VXLAN tunnel. The hosts can be in different subnets or even in different data centers around the world. From the perspective of the VMs, other VMs in the same VXLAN are within the same layer-2 domain:\n\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/f0ed0f273b7b4b9f8ed9ab229efc49fd/vxlan-tunnel.png\" alt=\"vxlan tunnel\"/>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tIn this example, RHEL-host-A and RHEL-host-B use a bridge, \u003Ccode class=\"literal\">br0\u003C/code>, to connect the virtual network of a VM on each host with a VXLAN named \u003Ccode class=\"literal\">vxlan10\u003C/code>. Due to this configuration, the VXLAN is invisible to the VMs, and the VMs do not require any special configuration. If you later connect more VMs to the same virtual network, the VMs are automatically members of the same virtual layer-2 domain.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tJust as normal layer-2 traffic, data in a VXLAN is not encrypted. For security reasons, use a VXLAN over a VPN or other types of encrypted connections.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"con_benefits-of-vxlans_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">10.1. Benefits of VXLANs\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tA virtual extensible LAN (VXLAN) provides the following major benefits:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tVXLANs use a 24-bit ID. Therefore, you can create up to 16,777,216 isolated networks. For example, a virtual LAN (VLAN), supports only 4,096 isolated networks.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tVXLANs use the IP protocol. This enables you to route the traffic and virtually run systems in different networks and locations within the same layer-2 domain.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tUnlike most tunnel protocols, a VXLAN is not only a point-to-point network. A VXLAN can learn the IP addresses of the other endpoints either dynamically or use statically-configured forwarding entries.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCertain network cards support UDP tunnel-related offload features.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/kernel-doc-\u003Cspan class=\"emphasis\">\u003Cem>&lt;kernel_version&gt;\u003C/em>\u003C/span>/Documentation/networking/vxlan.rst\u003C/code> provided by the \u003Ccode class=\"literal\">kernel-doc\u003C/code> package\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-the-ethernet-interface-on-the-hosts_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">10.2. Configuring the Ethernet interface on the hosts\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tTo connect a RHEL VM host to the Ethernet, create a network connection profile, configure the IP settings, and activate the profile.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tRun this procedure on both RHEL hosts, and adjust the IP address configuration accordingly.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist _abstract\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _abstract\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe host is connected to the Ethernet.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd a new Ethernet connection profile to NetworkManager:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add con-name \u003Cspan class=\"emphasis\">\u003Cem>Example\u003C/em>\u003C/span> ifname \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> type ethernet\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the IPv4 settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>Example\u003C/em>\u003C/span> ipv4.addresses \u003Cspan class=\"emphasis\">\u003Cem>198.51.100.2/24\u003C/em>\u003C/span> ipv4.method manual ipv4.gateway \u003Cspan class=\"emphasis\">\u003Cem>198.51.100.254\u003C/em>\u003C/span> ipv4.dns \u003Cspan class=\"emphasis\">\u003Cem>198.51.100.200\u003C/em>\u003C/span> ipv4.dns-search \u003Cspan class=\"emphasis\">\u003Cem>example.com\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSkip this step if the network uses DHCP.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tActivate the \u003Ccode class=\"literal\">Example\u003C/code> connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>Example\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the status of the devices and connections:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device status\u003C/strong>\u003C/span>\nDEVICE      TYPE      STATE      CONNECTION\nenp1s0      ethernet  connected  \u003Cspan class=\"emphasis\">\u003Cem>Example\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tPing a host in a remote network to verify the IP settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping \u003Cspan class=\"emphasis\">\u003Cem>RHEL-host-B.example.com\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that you cannot ping the other VM host before you have configured the network on that host as well.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_creating-a-network-bridge-with-a-vxlan-attached_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">10.3. Creating a network bridge with a VXLAN attached\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo make a virtual extensible LAN (VXLAN) invisible to virtual machines (VMs), create a bridge on a host, and attach the VXLAN to the bridge. Use NetworkManager to create both the bridge and the VXLAN. You do not add any traffic access point (TAP) devices of the VMs, typically named \u003Ccode class=\"literal\">vnet*\u003C/code> on the host, to the bridge. The \u003Ccode class=\"literal\">libvirtd\u003C/code> service adds them dynamically when the VMs start.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tRun this procedure on both RHEL hosts, and adjust the IP addresses accordingly.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the bridge \u003Ccode class=\"literal\">br0\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type bridge con-name br0 ifname br0 ipv4.method disabled ipv6.method disabled\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis command sets no IPv4 and IPv6 addresses on the bridge device, because this bridge works on layer 2.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the VXLAN interface and attach it to \u003Ccode class=\"literal\">br0\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type vxlan port-type bridge con-name \u003Cspan class=\"emphasis\">\u003Cem>br0-vxlan10\u003C/em>\u003C/span> ifname \u003Cspan class=\"emphasis\">\u003Cem>vxlan10\u003C/em>\u003C/span> id \u003Cspan class=\"emphasis\">\u003Cem>10\u003C/em>\u003C/span> local \u003Cspan class=\"emphasis\">\u003Cem>198.51.100.2\u003C/em>\u003C/span> remote \u003Cspan class=\"emphasis\">\u003Cem>203.0.113.1\u003C/em>\u003C/span> controller \u003Cspan class=\"emphasis\">\u003Cem>br0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis command uses the following settings:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">id 10\u003C/code>: Sets the VXLAN identifier.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">local 198.51.100.2\u003C/code>: Sets the source IP address of outgoing packets.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">remote 203.0.113.1\u003C/code>: Sets the unicast or multicast IP address to use in outgoing packets when the destination link layer address is not known in the VXLAN device forwarding database.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">controller br0\u003C/code>: Sets this VXLAN connection to be created as a port in the \u003Ccode class=\"literal\">br0\u003C/code> connection.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">ipv4.method disabled\u003C/code> and \u003Ccode class=\"literal\">ipv6.method disabled\u003C/code>: Disables IPv4 and IPv6 on the bridge.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tBy default, NetworkManager uses \u003Ccode class=\"literal\">8472\u003C/code> as the destination port. If the destination port is different, additionally, pass the \u003Ccode class=\"literal\">destination-port \u003Cspan class=\"emphasis\">\u003Cem>&lt;port_number&gt;\u003C/em>\u003C/span>\u003C/code> option to the command.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tActivate the \u003Ccode class=\"literal\">br0\u003C/code> connection profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>br0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen port \u003Ccode class=\"literal\">8472\u003C/code> for incoming UDP connections in the local firewall:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>firewall-cmd --permanent --add-port=8472/udp\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>firewall-cmd --reload\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the forwarding table:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>bridge fdb show dev \u003Cspan class=\"emphasis\">\u003Cem>vxlan10\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n2a:53:bd:d5:b3:0a master br0 permanent\n00:00:00:00:00:00 dst 203.0.113.1 self permanent\n...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_creating-a-virtual-network-in-libvirt-with-an-existing-bridge_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">10.4. Creating a virtual network in libvirt with an existing bridge\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo enable virtual machines (VM) to use the \u003Ccode class=\"literal\">br0\u003C/code> bridge with the attached virtual extensible LAN (VXLAN), first add a virtual network to the \u003Ccode class=\"literal\">libvirtd\u003C/code> service that uses this bridge.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou installed the \u003Ccode class=\"literal\">libvirt\u003C/code> package.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou started and enabled the \u003Ccode class=\"literal\">libvirtd\u003C/code> service.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou configured the \u003Ccode class=\"literal\">br0\u003C/code> device with the VXLAN on RHEL.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">~/vxlan10-bridge.xml\u003C/code> file with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Cspan class=\"strong strong\">\u003Cstrong>&lt;network&gt;\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong> &lt;name&gt;vxlan10-bridge&lt;/name&gt;\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong> &lt;forward mode=\"bridge\" /&gt;\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong> &lt;bridge name=\"br0\" /&gt;\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>&lt;/network&gt;\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">~/vxlan10-bridge.xml\u003C/code> file to create a new virtual network in \u003Ccode class=\"literal\">libvirt\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh net-define \u003Cspan class=\"emphasis\">\u003Cem>~/vxlan10-bridge.xml\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRemove the \u003Ccode class=\"literal\">~/vxlan10-bridge.xml\u003C/code> file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>rm \u003Cspan class=\"emphasis\">\u003Cem>~/vxlan10-bridge.xml\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart the \u003Ccode class=\"literal\">vxlan10-bridge\u003C/code> virtual network:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh net-start \u003Cspan class=\"emphasis\">\u003Cem>vxlan10-bridge\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the \u003Ccode class=\"literal\">vxlan10-bridge\u003C/code> virtual network to start automatically when the \u003Ccode class=\"literal\">libvirtd\u003C/code> service starts:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh net-autostart \u003Cspan class=\"emphasis\">\u003Cem>vxlan10-bridge\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the list of virtual networks:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh net-list\u003C/strong>\u003C/span>\n Name              State    Autostart   Persistent\n----------------------------------------------------\n \u003Cspan class=\"emphasis\">\u003Cem>vxlan10-bridge\u003C/em>\u003C/span>    active   yes         yes\n ...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">virsh(1)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_proc_configuring-virtual-machines-to-use-vxlan_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">10.5. Configuring virtual machines to use VXLAN\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo configure a VM to use a bridge device with an attached virtual extensible LAN (VXLAN) on the host, create a new VM that uses the \u003Ccode class=\"literal\">vxlan10-bridge\u003C/code> virtual network or update the settings of existing VMs to use this network.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tPerform this procedure on the RHEL hosts.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou configured the \u003Ccode class=\"literal\">vxlan10-bridge\u003C/code> virtual network in \u003Ccode class=\"literal\">libvirtd\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo create a new VM and configure it to use the \u003Ccode class=\"literal\">vxlan10-bridge\u003C/code> network, pass the \u003Ccode class=\"literal\">--network network:\u003Cspan class=\"emphasis\">\u003Cem>vxlan10-bridge\u003C/em>\u003C/span>\u003C/code> option to the \u003Ccode class=\"literal\">virt-install\u003C/code> command when you create the VM:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-install ... --network network:\u003Cspan class=\"emphasis\">\u003Cem>vxlan10-bridge\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo change the network settings of an existing VM:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tConnect the VM’s network interface to the \u003Ccode class=\"literal\">vxlan10-bridge\u003C/code> virtual network:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-xml \u003Cspan class=\"emphasis\">\u003Cem>VM_name\u003C/em>\u003C/span> --edit --network network=\u003Cspan class=\"emphasis\">\u003Cem>vxlan10-bridge\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tShut down the VM, and start it again:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh shutdown \u003Cspan class=\"emphasis\">\u003Cem>VM_name\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>virsh start \u003Cspan class=\"emphasis\">\u003Cem>VM_name\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the virtual network interfaces of the VM on the host:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh domiflist \u003Cspan class=\"emphasis\">\u003Cem>VM_name\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n Interface   Type     Source           Model    MAC\n-------------------------------------------------------------------\n \u003Cspan class=\"emphasis\">\u003Cem>vnet1\u003C/em>\u003C/span>       bridge   \u003Cspan class=\"emphasis\">\u003Cem>vxlan10-bridge\u003C/em>\u003C/span>   virtio   \u003Cspan class=\"emphasis\">\u003Cem>52:54:00:c5:98:1c\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the interfaces attached to the \u003Ccode class=\"literal\">vxlan10-bridge\u003C/code> bridge:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link show master vxlan10-bridge\u003C/strong>\u003C/span>\n18: vxlan10: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master \u003Cspan class=\"emphasis\">\u003Cem>br0\u003C/em>\u003C/span> state UNKNOWN mode DEFAULT group default qlen 1000\n    link/ether \u003Cspan class=\"emphasis\">\u003Cem>2a:53:bd:d5:b3:0a\u003C/em>\u003C/span> brd ff:ff:ff:ff:ff:ff\n19: vnet1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master \u003Cspan class=\"emphasis\">\u003Cem>br0\u003C/em>\u003C/span> state UNKNOWN mode DEFAULT group default qlen 1000\n    link/ether \u003Cspan class=\"emphasis\">\u003Cem>52:54:00:c5:98:1c\u003C/em>\u003C/span> brd ff:ff:ff:ff:ff:ff\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that the \u003Ccode class=\"literal\">libvirtd\u003C/code> service dynamically updates the bridge’s configuration. When you start a VM which uses the \u003Ccode class=\"literal\">vxlan10-bridge\u003C/code> network, the corresponding \u003Ccode class=\"literal\">vnet*\u003C/code> device on the host appears as a port of the bridge.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse address resolution protocol (ARP) requests to verify whether VMs are in the same VXLAN:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tStart two or more VMs in the same VXLAN.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSend an ARP request from one VM to the other one:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>arping -c 1 \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.2\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nARPING \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.2\u003C/em>\u003C/span> from \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\nUnicast reply from \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.2\u003C/em>\u003C/span> [\u003Cspan class=\"emphasis\">\u003Cem>52:54:00:c5:98:1c\u003C/em>\u003C/span>] \u003Cspan class=\"emphasis\">\u003Cem>1.450ms\u003C/em>\u003C/span>\nSent 1 probe(s) (0 broadcast(s))\nReceived 1 response(s) (0 request(s), 0 broadcast(s))\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf the command shows a reply, the VM is in the same layer-2 domain and, in this case in the same VXLAN.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">iputils\u003C/code> package to use the \u003Ccode class=\"literal\">arping\u003C/code> utility.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">virt-install(1)\u003C/code> and \u003Ccode class=\"literal\">virt-xml(1)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">virsh(1)\u003C/code> and \u003Ccode class=\"literal\">arping(8)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_managing-wifi-connections_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 11. Managing wifi connections\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tRHEL provides multiple utilities and applications to configure and connect to wifi networks, for example:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tUse the \u003Ccode class=\"literal\">nmcli\u003C/code> utility to configure connections by using the command line.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tUse the \u003Ccode class=\"literal\">nmtui\u003C/code> application to configure connections in a text-based user interface.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tUse the GNOME system menu to quickly connect to wifi networks that do not require any configuration.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tUse the \u003Ccode class=\"literal\">GNOME Settings\u003C/code> application to configure connections by using the GNOME application.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tUse the \u003Ccode class=\"literal\">nm-connection-editor\u003C/code> application to configure connections in a graphical user interface.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tUse the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role to automate the configuration of connections on one or multiple hosts.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"ref_supported-wifi-security-types_assembly_managing-wifi-connections\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">11.1. Supported wifi security types\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tDepending on the security type a wifi network supports, you can transmitted data more or less securely.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tDo not connect to wifi networks that do not use encryption or which support only the insecure WEP or WPA standards.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tRed Hat Enterprise Linux 9 supports the following wifi security types:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">None\u003C/code>: Encryption is disabled, and data is transferred in plain text over the network.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">Enhanced Open\u003C/code>: With opportunistic wireless encryption (OWE), devices negotiate unique pairwise master keys (PMK) to encrypt connections in wireless networks without authentication.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">LEAP\u003C/code>: The Lightweight Extensible Authentication Protocol, which was developed by Cisco, is a proprietary version of the extensible authentication protocol (EAP).\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">WPA &amp; WPA2 Personal\u003C/code>: In personal mode, the Wi-Fi Protected Access (WPA) and Wi-Fi Protected Access 2 (WPA2) authentication methods use a pre-shared key.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">WPA &amp; WPA2 Enterprise\u003C/code>: In enterprise mode, WPA and WPA2 use the EAP framework and authenticate users to a remote authentication dial-in user service (RADIUS) server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">WPA3 Personal\u003C/code>: Wi-Fi Protected Access 3 (WPA3) Personal uses simultaneous authentication of equals (SAE) instead of pre-shared keys (PSK) to prevent dictionary attacks. WPA3 uses perfect forward secrecy (PFS).\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_connecting-to-a-wifi-network-by-using-nmcli_assembly_managing-wifi-connections\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">11.2. Connecting to a wifi network by using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">nmcli\u003C/code> utility to connect to a wifi network. When you attempt to connect to a network for the first time, the utility automatically creates a NetworkManager connection profile for it. If the network requires additional settings, such as static IP addresses, you can then modify the profile after it has been automatically created.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA wifi device is installed on the host.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe wifi device is enabled, if it has a hardware switch.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the wifi radio has been disabled in NetworkManager, enable this feature:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli radio wifi on\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Display the available wifi networks:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device wifi list\u003C/strong>\u003C/span>\nIN-USE  BSSID              SSID          MODE   CHAN  RATE        SIGNAL  BARS  SECURITY\n        00:53:00:2F:3B:08  Office        Infra  44    270 Mbit/s  57      ▂▄▆_  WPA2 WPA3\n        00:53:00:15:03:BF  --            Infra  1     130 Mbit/s  48      ▂▄__  WPA2 WPA3\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe service set identifier (\u003Ccode class=\"literal\">SSID\u003C/code>) column contains the names of the networks. If the column shows \u003Ccode class=\"literal\">--\u003C/code>, the access point of this network does not broadcast an SSID.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConnect to the wifi network:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device wifi connect Office --ask\u003C/strong>\u003C/span>\nPassword: \u003Cspan class=\"strong strong\">\u003Cstrong>wifi-password\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you prefer to set the password in the command instead of entering it interactively, use the \u003Ccode class=\"literal\">password \u003Cspan class=\"emphasis\">\u003Cem>&lt;wifi_password&gt;\u003C/em>\u003C/span>\u003C/code> option in the command instead of \u003Ccode class=\"literal\">--ask\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device wifi connect Office &lt;wifi_password&gt;\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that, if the network requires static IP addresses, NetworkManager fails to activate the connection at this point. You can configure the IP addresses in later steps.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the network requires static IP addresses:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tConfigure the IPv4 address settings, for example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify Office ipv4.method manual ipv4.addresses 192.0.2.1/24 ipv4.gateway 192.0.2.254 ipv4.dns 192.0.2.200 ipv4.dns-search example.com\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tConfigure the IPv6 address settings, for example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify Office ipv6.method manual ipv6.addresses 2001:db8:1::1/64 ipv6.gateway 2001:db8:1::fffe ipv6.dns 2001:db8:1::ffbb ipv6.dns-search example.com\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRe-activate the connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up Office\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the active connections:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection show --active\u003C/strong>\u003C/span>\nNAME    ID                                    TYPE  DEVICE\nOffice  2501eb7e-7b16-4dc6-97ef-7cc460139a58  wifi  wlp0s20f3\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the output lists the wifi connection you have created, the connection is active.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tPing a hostname or IP address:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># *ping -c 3 example.com\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings-nmcli(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_connecting-to-a-wifi-network-by-using-the-gnome-system-menu_assembly_managing-wifi-connections\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">11.3. Connecting to a wifi network by using the GNOME system menu\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can use the GNOME system menu to connect to a wifi network. When you connect to a network for the first time, GNOME creates a NetworkManager connection profile for it. If you configure the connection profile to not automatically connect, you can also use the GNOME system menu to manually connect to a wifi network with an existing NetworkManager connection profile.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tUsing the GNOME system menu to establish a connection to a wifi network for the first time has certain limitations. For example, you can not configure IP address settings. In this case first configure the connections:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_connecting-to-a-wifi-network-by-using-the-gnome-settings-application_assembly_managing-wifi-connections\" title=\"11.4. Connecting to a wifi network by using the GNOME settings application\">In the \u003Ccode class=\"literal\">GNOME settings\u003C/code> application\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_configuring-a-wifi-connection-by-using-nm-connection-editor_assembly_managing-wifi-connections\" title=\"11.6. Configuring a wifi connection by using nm-connection-editor\">In the \u003Ccode class=\"literal\">nm-connection-editor\u003C/code> application\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_connecting-to-a-wifi-network-by-using-the-gnome-settings-application_assembly_managing-wifi-connections\" title=\"11.4. Connecting to a wifi network by using the GNOME settings application\">Using \u003Ccode class=\"literal\">nmcli\u003C/code> commands\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA wifi device is installed on the host.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe wifi device is enabled, if it has a hardware switch.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOpen the system menu on the right side of the top bar.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tExpand the \u003Ccode class=\"literal\">Wi-Fi Not Connected\u003C/code> entry.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tClick \u003Ccode class=\"literal\">Select Network\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/aac3271d7697b62b03c02ee4ae7bc7fd/gnome-select-wifi.png\" alt=\"gnome select wifi\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the wifi network you want to connect to.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Ccode class=\"literal\">Connect\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf this is the first time you connect to this network, enter the password for the network, and click \u003Ccode class=\"literal\">Connect\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen the system menu on the right side of the top bar, and verify that the wifi network is connected:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/7970d8467ca6412554e5ccd8bb312956/gnome-wifi-connected.png\" alt=\"gnome wifi connected\"/>\u003C/div>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the network appears in the list, it is connected.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tPing a hostname or IP address:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping -c 3 \u003Cspan class=\"emphasis\">\u003Cem>example.com\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_connecting-to-a-wifi-network-by-using-the-gnome-settings-application_assembly_managing-wifi-connections\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">11.4. Connecting to a wifi network by using the GNOME settings application\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">GNOME settings\u003C/code> application, also named \u003Ccode class=\"literal\">gnome-control-center\u003C/code>, to connect to a wifi network and configure the connection. When you connect to the network for the first time, GNOME creates a NetworkManager connection profile for it.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIn \u003Ccode class=\"literal\">GNOME settings\u003C/code>, you can configure wifi connections for all wifi network security types that RHEL supports.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA wifi device is installed on the host.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe wifi device is enabled, if it has a hardware switch.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress the \u003Ckbd class=\"keycap\">Super\u003C/kbd> key, type \u003Ccode class=\"literal\">Wi-Fi\u003C/code>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick on the name of the wifi network you want to connect to.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnter the password for the network, and click \u003Ccode class=\"literal\">Connect\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the network requires additional settings, such as static IP addresses or a security type other than WPA2 Personal:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick the gear icon next to the network’s name.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOptional: Configure the network profile on the \u003Ccode class=\"literal\">Details\u003C/code> tab to not automatically connect.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you deactivate this feature, you must always manually connect to the network, for example, by using \u003Ccode class=\"literal\">GNOME settings\u003C/code> or the GNOME system menu.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tConfigure IPv4 settings on the \u003Ccode class=\"literal\">IPv4\u003C/code> tab, and IPv6 settings on the \u003Ccode class=\"literal\">IPv6\u003C/code> tab.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn the \u003Ccode class=\"literal\">Security\u003C/code> tab, select the authentication of the network, such as \u003Ccode class=\"literal\">WPA3 Personal\u003C/code>, and enter the password.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tDepending on the selected security, the application shows additional fields. Fill them accordingly. For details, ask the administrator of the wifi network.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick \u003Ccode class=\"literal\">Apply\u003C/code>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen the system menu on the right side of the top bar, and verify that the wifi network is connected:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/7970d8467ca6412554e5ccd8bb312956/gnome-wifi-connected.png\" alt=\"gnome wifi connected\"/>\u003C/div>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the network appears in the list, it is connected.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tPing a hostname or IP address:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping -c 3 example.com\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-wifi-connection-by-using-nmtui_assembly_managing-wifi-connections\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">11.5. Configuring a wifi connection by using \u003Ccode class=\"literal\">nmtui\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">nmtui\u003C/code> application provides a text-based user interface for NetworkManager. You can use \u003Ccode class=\"literal\">nmtui\u003C/code> to connect to a wifi network.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIn \u003Ccode class=\"literal\">nmtui\u003C/code>:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tNavigate by using the cursor keys.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tPress a button by selecting it and hitting \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tSelect and clear checkboxes by using \u003Ckbd class=\"keycap\">Space\u003C/kbd>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you do not know the network device name you want to use in the connection, display the available devices:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device status\u003C/strong>\u003C/span>\nDEVICE     TYPE      STATE                   CONNECTION\nwlp2s0     wifi      unavailable             --\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart \u003Ccode class=\"literal\">nmtui\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmtui\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Ccode class=\"literal\">Edit a connection\u003C/code>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress the \u003Ccode class=\"literal\">Add\u003C/code> button.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Ccode class=\"literal\">Wi-Fi\u003C/code> from the list of network types, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Enter a name for the NetworkManager profile to be created.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn hosts with multiple profiles, a meaningful name makes it easier to identify the purpose of a profile.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnter the network device name into the \u003Ccode class=\"literal\">Device\u003C/code> field.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnter the name of the Wi-Fi network, the Service Set Identifier (SSID), into the \u003Ccode class=\"literal\">SSID\u003C/code> field.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tLeave the \u003Ccode class=\"literal\">Mode\u003C/code> field set to its default, \u003Ccode class=\"literal\">Client\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSelect the \u003Ccode class=\"literal\">Security\u003C/code> field, press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>, and set the authentication type of the network from the list.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDepending on the authentication type you have selected, \u003Ccode class=\"literal\">nmtui\u003C/code> displays different fields.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFill the authentication type-related fields.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the Wi-Fi network requires static IP addresses:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPress the \u003Ccode class=\"literal\">Automatic\u003C/code> button next to the protocol, and select \u003Ccode class=\"literal\">Manual\u003C/code> from the displayed list.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPress the \u003Ccode class=\"literal\">Show\u003C/code> button next to the protocol you want to configure to display additional fields, and fill them.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tPress the \u003Ccode class=\"literal\">OK\u003C/code> button to create and automatically activate the new connection.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/e2449736835d1f891b1360c3de0ba23a/nmtui-wi-fi-dynamic-IP.png\" alt=\"nmtui wi fi dynamic IP\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress the \u003Ccode class=\"literal\">Back\u003C/code> button to return to the main menu.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Ccode class=\"literal\">Quit\u003C/code>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd> to close the \u003Ccode class=\"literal\">nmtui\u003C/code> application.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the active connections:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection show --active\u003C/strong>\u003C/span>\nNAME    ID                                    TYPE  DEVICE\nOffice  2501eb7e-7b16-4dc6-97ef-7cc460139a58  wifi  wlp0s20f3\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the output lists the wifi connection you have created, the connection is active.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tPing a hostname or IP address:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping -c 3 example.com\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-wifi-connection-by-using-nm-connection-editor_assembly_managing-wifi-connections\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">11.6. Configuring a wifi connection by using nm-connection-editor\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">nm-connection-editor\u003C/code> application to create a connection profile for a wireless network. In this application you can configure all wifi network authentication types that RHEL supports.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tBy default, NetworkManager enables the auto-connect feature for connection profiles and automatically connects to a saved network if it is available.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA wifi device is installed on the host.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe wifi device is enabled, if it has a hardware switch.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen a terminal and enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nm-connection-editor\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick the \u003Cspan class=\"guibutton\">+\u003C/span> button to add a new connection.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the \u003Ccode class=\"literal\">Wi-Fi\u003C/code> connection type, and click \u003Cspan class=\"guibutton\">Create\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOptional: Set a name for the connection profile.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Configure the network profile on the \u003Ccode class=\"literal\">General\u003C/code> tab to not automatically connect.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you deactivate this feature, you must always manually connect to the network, for example, by using \u003Ccode class=\"literal\">GNOME settings\u003C/code> or the GNOME system menu.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOn the \u003Ccode class=\"literal\">Wi-Fi\u003C/code> tab, enter the service set identifier (SSID) in the \u003Ccode class=\"literal\">SSID\u003C/code> field.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the \u003Ccode class=\"literal\">Wi-Fi Security\u003C/code> tab, select the authentication type for the network, such as \u003Ccode class=\"literal\">WPA3 Personal\u003C/code>, and enter the password.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDepending on the selected security, the application shows additional fields. Fill them accordingly. For details, ask the administrator of the wifi network.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tConfigure IPv4 settings on the \u003Ccode class=\"literal\">IPv4\u003C/code> tab, and IPv6 settings on the \u003Ccode class=\"literal\">IPv6\u003C/code> tab.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Ccode class=\"literal\">Save\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClose the \u003Ccode class=\"literal\">Network Connections\u003C/code> window.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen the system menu on the right side of the top bar, and verify that the wifi network is connected:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/7970d8467ca6412554e5ccd8bb312956/gnome-wifi-connected.png\" alt=\"gnome wifi connected\"/>\u003C/div>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the network appears in the list, it is connected.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tPing a hostname or IP address:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping -c 3 \u003Cspan class=\"emphasis\">\u003Cem>example.com\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-wifi-connection-with-802-1x-network-authentication-by-using-the-network-rhel-system-role_assembly_managing-wifi-connections\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">11.7. Configuring a wifi connection with 802.1X network authentication by using the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tNetwork Access Control (NAC) protects a network from unauthorized clients. You can specify the details that are required for the authentication in NetworkManager connection profiles to enable clients to access the network. By using Ansible and the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can use an Ansible playbook to copy a private key, a certificate, and the CA certificate to the client, and then use the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role to configure a connection profile with 802.1X network authentication.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles\">You have prepared the control node and the managed nodes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in to the control node as a user who can run playbooks on the managed nodes.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe account you use to connect to the managed nodes has \u003Ccode class=\"literal\">sudo\u003C/code> permissions on them.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe network supports 802.1X network authentication.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou installed the \u003Ccode class=\"literal\">wpa_supplicant\u003C/code> package on the managed node.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tDHCP is available in the network of the managed node.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe following files required for TLS authentication exist on the control node:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe client key is stored in the \u003Ccode class=\"literal\">/srv/data/client.key\u003C/code> file.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe client certificate is stored in the \u003Ccode class=\"literal\">/srv/data/client.crt\u003C/code> file.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe CA certificate is stored in the \u003Ccode class=\"literal\">/srv/data/ca.crt\u003C/code> file.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStore your sensitive variables in an encrypted file:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate the vault:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-vault create vault.yml\u003C/strong>\u003C/span>\nNew Vault password: \u003Cspan class=\"emphasis\">\u003Cem>&lt;vault_password&gt;\u003C/em>\u003C/span>\nConfirm New Vault password: \u003Cspan class=\"emphasis\">\u003Cem>&lt;vault_password&gt;\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAfter the \u003Ccode class=\"literal\">ansible-vault create\u003C/code> command opens an editor, enter the sensitive data in the \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>&lt;key&gt;\u003C/em>\u003C/span>: \u003Cspan class=\"emphasis\">\u003Cem>&lt;value&gt;\u003C/em>\u003C/span>\u003C/code> format:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-ini\">pwd: \u003Cspan class=\"emphasis\">\u003Cem>&lt;password&gt;\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSave the changes, and close the editor. Ansible encrypts the data in the vault.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a playbook file, for example \u003Ccode class=\"literal\">~/playbook.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\n- name: Configure a wifi connection with 802.1X authentication\n  hosts: managed-node-01.example.com\n  tasks:\n    - name: Copy client key for 802.1X authentication\n      ansible.builtin.copy:\n        src: \"/srv/data/client.key\"\n        dest: \"/etc/pki/tls/private/client.key\"\n        mode: 0400\n\n    - name: Copy client certificate for 802.1X authentication\n      ansible.builtin.copy:\n        src: \"/srv/data/client.crt\"\n        dest: \"/etc/pki/tls/certs/client.crt\"\n\n    - name: Copy CA certificate for 802.1X authentication\n      ansible.builtin.copy:\n        src: \"/srv/data/ca.crt\"\n        dest: \"/etc/pki/ca-trust/source/anchors/ca.crt\"\n\n    - name: Wifi connection profile with dynamic IP address settings and 802.1X\n      ansible.builtin.import_role:\n        name: rhel-system-roles.network\n      vars:\n        network_connections:\n          - name: Wifi connection profile with dynamic IP address settings and 802.1X\n            interface_name: wlp1s0\n            state: up\n            type: wireless\n            autoconnect: yes\n            ip:\n              dhcp4: true\n              auto6: true\n            wireless:\n              ssid: \"Example-wifi\"\n              key_mgmt: \"wpa-eap\"\n            ieee802_1x:\n              identity: \u003Cspan class=\"emphasis\">\u003Cem>&lt;user_name&gt;\u003C/em>\u003C/span>\n              eap: tls\n              private_key: \"/etc/pki/tls/client.key\"\n              private_key_password: \"{{ pwd }}\"\n              private_key_password_flags: none\n              client_cert: \"/etc/pki/tls/client.pem\"\n              ca_cert: \"/etc/pki/tls/cacert.pem\"\n              domain_suffix_match: \"example.com\"\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe settings specified in the example playbook include the following:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">ieee802_1x\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tThis variable contains the 802.1X-related settings.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">eap: tls\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tConfigures the profile to use the certificate-based \u003Ccode class=\"literal\">TLS\u003C/code> authentication method for the Extensible Authentication Protocol (EAP).\n\t\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details about all variables used in the playbook, see the \u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file on the control node.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tValidate the playbook syntax:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --ask-vault-pass --syntax-check ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that this command only validates the syntax and does not protect against a wrong but valid configuration.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the playbook:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --ask-vault-pass ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/rhel-system-roles/network/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-wifi-connection-with-802-1x-network-authentication-in-an-existing-profile-by-using-nmcli_assembly_managing-wifi-connections\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">11.8. Configuring a wifi connection with 802.1X network authentication in an existing profile by using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tUsing the \u003Ccode class=\"literal\">nmcli\u003C/code> utility, you can configure the client to authenticate itself to the network. For example, you can configure Protected Extensible Authentication Protocol (PEAP) authentication with the Microsoft Challenge-Handshake Authentication Protocol version 2 (MSCHAPv2) in an existing NetworkManager wifi connection profile named \u003Ccode class=\"literal\">wlp1s0\u003C/code>.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe network must have 802.1X network authentication.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe wifi connection profile exists in NetworkManager and has a valid IP configuration.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf the client is required to verify the certificate of the authenticator, the Certificate Authority (CA) certificate must be stored in the \u003Ccode class=\"literal\">/etc/pki/ca-trust/source/anchors/\u003C/code> directory.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">wpa_supplicant\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the wifi security mode to \u003Ccode class=\"literal\">wpa-eap\u003C/code>, the Extensible Authentication Protocol (EAP) to \u003Ccode class=\"literal\">peap\u003C/code>, the inner authentication protocol to \u003Ccode class=\"literal\">mschapv2\u003C/code>, and the user name:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>wlp1s0\u003C/em>\u003C/span> wireless-security.key-mgmt wpa-eap 802-1x.eap peap 802-1x.phase2-auth mschapv2 802-1x.identity \u003Cspan class=\"emphasis\">\u003Cem>user_name\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that you must set the \u003Ccode class=\"literal\">wireless-security.key-mgmt\u003C/code>, \u003Ccode class=\"literal\">802-1x.eap\u003C/code>, \u003Ccode class=\"literal\">802-1x.phase2-auth\u003C/code>, and \u003Ccode class=\"literal\">802-1x.identity\u003C/code> parameters in a single command.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Store the password in the configuration:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>wlp1s0\u003C/em>\u003C/span> 802-1x.password \u003Cspan class=\"emphasis\">\u003Cem>password\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tBy default, NetworkManager stores the password in plain text in the \u003Ccode class=\"literal\">/etc/sysconfig/network-scripts/keys-\u003Cspan class=\"emphasis\">\u003Cem>connection_name\u003C/em>\u003C/span>\u003C/code> file, which is readable only by the \u003Ccode class=\"literal\">root\u003C/code> user. However, plain text passwords in a configuration file can be a security risk.\n\t\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\t\tTo increase the security, set the \u003Ccode class=\"literal\">802-1x.password-flags\u003C/code> parameter to \u003Ccode class=\"literal\">0x1\u003C/code>. With this setting, on servers with the GNOME desktop environment or the \u003Ccode class=\"literal\">nm-applet\u003C/code> running, NetworkManager retrieves the password from these services. In other cases, NetworkManager prompts for the password.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the client needs to verify the certificate of the authenticator, set the \u003Ccode class=\"literal\">802-1x.ca-cert\u003C/code> parameter in the connection profile to the path of the CA certificate:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>wlp1s0\u003C/em>\u003C/span> 802-1x.ca-cert \u003Cspan class=\"emphasis\">\u003Cem>/etc/pki/ca-trust/source/anchors/ca.crt\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tFor security reasons, clients should validate the certiciate of the authenticator.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tActivate the connection profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>wlp1s0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAccess resources on the network that require network authentication.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#assembly_managing-wifi-connections_configuring-and-managing-networking\" title=\"Chapter 11. Managing wifi connections\">Managing wifi connections\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings(5)\u003C/code> and \u003Ccode class=\"literal\">nmcli(1)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_manually-setting-the-wireless-regulatory-domain_assembly_managing-wifi-connections\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">11.9. Manually setting the wireless regulatory domain\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tOn RHEL, a \u003Ccode class=\"literal\">udev\u003C/code> rule executes the \u003Ccode class=\"literal\">setregdomain\u003C/code> utility to set the wireless regulatory domain. The utility then provides this information to the kernel.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tBy default, \u003Ccode class=\"literal\">setregdomain\u003C/code> attempts to determine the country code automatically. If this fails, the wireless regulatory domain setting might be wrong. To work around this problem, you can manually set the country code.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tManually setting the regulatory domain disables the automatic detection. Therefore, if you later use the computer in a different country, the previously configured setting might no longer be correct. In this case, remove the \u003Ccode class=\"literal\">/etc/sysconfig/regdomain\u003C/code> file to switch back to automatic detection or use this procedure to manually update the regulatory domain setting again.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Display the current regulatory domain settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>iw reg get\u003C/strong>\u003C/span>\nglobal\ncountry US: DFS-FCC\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">/etc/sysconfig/regdomain\u003C/code> file with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Cspan class=\"strong strong\">\u003Cstrong>COUNTRY=\u003Cspan class=\"emphasis\">\u003Cem>&lt;country_code&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the \u003Ccode class=\"literal\">COUNTRY\u003C/code> variable to an ISO 3166-1 alpha2 country code, such as \u003Ccode class=\"literal\">DE\u003C/code> for Germany or \u003Ccode class=\"literal\">US\u003C/code> for the United States of America.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the regulatory domain:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>setregdomain\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the regulatory domain settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>iw reg get\u003C/strong>\u003C/span>\nglobal\ncountry DE: DFS-ETSI\n...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">iw(8)\u003C/code>, \u003Ccode class=\"literal\">setregdomain(1)\u003C/code>, and \u003Ccode class=\"literal\">regulatory.bin(5)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://www.iso.org/iso-3166-country-codes.html\">ISO 3166 Country Codes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"proc_configuring-rhel-as-a-wpa2-or-wpa3-personal-access-point_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 12. Configuring RHEL as a WPA2 or WPA3 Personal access point\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tOn a host with a wifi device, you can use NetworkManager to configure this host as an access point. Wi-Fi Protected Access 2 (WPA2) and Wi-Fi Protected Access 3 (WPA3) Personal provide secure authentication methods, and wireless clients can use a pre-shared key (PSK) to connect to the access point and use services on the RHEL host and in the network.\n\t\t\u003C/p>\u003Cp>\n\t\t\tWhen you configure an access point, NetworkManager automatically:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tConfigures the \u003Ccode class=\"literal\">dnsmasq\u003C/code> service to provide DHCP and DNS services for clients\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tEnables IP forwarding\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tAdds \u003Ccode class=\"literal\">nftables\u003C/code> firewall rules to masquerade traffic from the wifi device and configures IP forwarding\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tThe wifi device supports running in access point mode.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tThe wifi device is not in use.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tThe host has internet access.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tList the wifi devices to identify the one that should provide the access point:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device status | grep wifi\u003C/strong>\u003C/span>\n\u003Cspan class=\"emphasis\">\u003Cem>wlp0s20f3\u003C/em>\u003C/span>    wifi   disconnected    --\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tVerify that the device supports the access point mode:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli -f WIFI-PROPERTIES.AP device show \u003Cspan class=\"emphasis\">\u003Cem>wlp0s20f3\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nWIFI-PROPERTIES.AP:     yes\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\tTo use a wifi device as an access point, the device must support this feature.\n\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tInstall the \u003Ccode class=\"literal\">dnsmasq\u003C/code> and \u003Ccode class=\"literal\">NetworkManager-wifi\u003C/code> packages:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install dnsmasq NetworkManager-wifi\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\tNetworkManager uses the \u003Ccode class=\"literal\">dnsmasq\u003C/code> service to provide DHCP and DNS services to clients of the access point.\n\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tCreate the initial access point configuration:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device wifi hotspot ifname \u003Cspan class=\"emphasis\">\u003Cem>wlp0s20f3\u003C/em>\u003C/span> con-name \u003Cspan class=\"emphasis\">\u003Cem>Example-Hotspot\u003C/em>\u003C/span> ssid \u003Cspan class=\"emphasis\">\u003Cem>Example-Hotspot\u003C/em>\u003C/span> password \"\u003Cspan class=\"emphasis\">\u003Cem>password\u003C/em>\u003C/span>\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\tThis command creates a connection profile for an access point on the \u003Ccode class=\"literal\">wlp0s20f3\u003C/code> device that provides WPA2 and WPA3 Personal authentication. The name of the wireless network, the Service Set Identifier (SSID), is \u003Ccode class=\"literal\">Example-Hotspot\u003C/code> and uses the pre-shared key \u003Ccode class=\"literal\">password\u003C/code>.\n\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tOptional: Configure the access point to support only WPA3:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>Example-Hotspot\u003C/em>\u003C/span> 802-11-wireless-security.key-mgmt sae\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tBy default, NetworkManager uses the IP address \u003Ccode class=\"literal\">10.42.0.1\u003C/code> for the wifi device and assigns IP addresses from the remaining \u003Ccode class=\"literal\">10.42.0.0/24\u003C/code> subnet to clients. To configure a different subnet and IP address, enter:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>Example-Hotspot\u003C/em>\u003C/span> ipv4.addresses \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.254/24\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\tThe IP address you set, in this case \u003Ccode class=\"literal\">192.0.2.254\u003C/code>, is the one that NetworkManager assigns to the wifi device. Clients will use this IP address as default gateway and DNS server.\n\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tActivate the connection profile:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>Example-Hotspot\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tOn the server:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tVerify that NetworkManager started the \u003Ccode class=\"literal\">dnsmasq\u003C/code> service and that the service listens on port 67 (DHCP) and 53 (DNS):\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ss -tulpn | egrep \":53|:67\"\u003C/strong>\u003C/span>\nudp   UNCONN 0  0   \u003Cspan class=\"emphasis\">\u003Cem>10.42.0.1\u003C/em>\u003C/span>:53    0.0.0.0:*    users:((\"dnsmasq\",pid=\u003Cspan class=\"emphasis\">\u003Cem>55905\u003C/em>\u003C/span>,fd=\u003Cspan class=\"emphasis\">\u003Cem>6\u003C/em>\u003C/span>))\nudp   UNCONN 0  0     0.0.0.0:67    0.0.0.0:*    users:((\"dnsmasq\",pid=\u003Cspan class=\"emphasis\">\u003Cem>55905\u003C/em>\u003C/span>,fd=\u003Cspan class=\"emphasis\">\u003Cem>4\u003C/em>\u003C/span>))\ntcp   LISTEN 0  32  \u003Cspan class=\"emphasis\">\u003Cem>10.42.0.1\u003C/em>\u003C/span>:53    0.0.0.0:*    users:((\"dnsmasq\",pid=\u003Cspan class=\"emphasis\">\u003Cem>55905\u003C/em>\u003C/span>,fd=\u003Cspan class=\"emphasis\">\u003Cem>7\u003C/em>\u003C/span>))\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tDisplay the \u003Ccode class=\"literal\">nftables\u003C/code> rule set to ensure that NetworkManager enabled forwarding and masquerading for traffic from the \u003Ccode class=\"literal\">10.42.0.0/24\u003C/code> subnet:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nft list ruleset\u003C/strong>\u003C/span>\ntable ip nm-shared-wlp0s20f3 {\n    chain nat_postrouting {\n        type nat hook postrouting priority srcnat; policy accept;\n        ip saddr \u003Cspan class=\"emphasis\">\u003Cem>10.42.0.0/24\u003C/em>\u003C/span> ip daddr != \u003Cspan class=\"emphasis\">\u003Cem>10.42.0.0/24\u003C/em>\u003C/span> masquerade\n    }\n\n    chain filter_forward {\n        type filter hook forward priority filter; policy accept;\n        ip daddr \u003Cspan class=\"emphasis\">\u003Cem>10.42.0.0/24\u003C/em>\u003C/span> oifname \"\u003Cspan class=\"emphasis\">\u003Cem>wlp0s20f3\u003C/em>\u003C/span>\" ct state { established, related } accept\n        ip saddr \u003Cspan class=\"emphasis\">\u003Cem>10.42.0.0/24\u003C/em>\u003C/span> iifname \"\u003Cspan class=\"emphasis\">\u003Cem>wlp0s20f3\u003C/em>\u003C/span>\" accept\n        iifname \"\u003Cspan class=\"emphasis\">\u003Cem>wlp0s20f3\u003C/em>\u003C/span>\" oifname \"\u003Cspan class=\"emphasis\">\u003Cem>wlp0s20f3\u003C/em>\u003C/span>\" accept\n        iifname \"\u003Cspan class=\"emphasis\">\u003Cem>wlp0s20f3\u003C/em>\u003C/span>\" reject\n        oifname \"\u003Cspan class=\"emphasis\">\u003Cem>wlp0s20f3\u003C/em>\u003C/span>\" reject\n    }\n}\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tOn a client with a wifi adapter:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tDisplay the list of available networks:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device wifi\u003C/strong>\u003C/span>\nIN-USE  BSSID              SSID             MODE   CHAN  RATE      SIGNAL  BARS  SECURITY\n        \u003Cspan class=\"emphasis\">\u003Cem>00:53:00:88:29:04\u003C/em>\u003C/span>  \u003Cspan class=\"emphasis\">\u003Cem>Example-Hotspot\u003C/em>\u003C/span>  Infra  \u003Cspan class=\"emphasis\">\u003Cem>11\u003C/em>\u003C/span>    \u003Cspan class=\"emphasis\">\u003Cem>130\u003C/em>\u003C/span> Mbit/s  \u003Cspan class=\"emphasis\">\u003Cem>62\u003C/em>\u003C/span>      ▂▄▆_  \u003Cspan class=\"emphasis\">\u003Cem>WPA3\u003C/em>\u003C/span>\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tConnect to the \u003Ccode class=\"literal\">Example-Hotspot\u003C/code> wireless network. See \u003Ca class=\"link\" href=\"#assembly_managing-wifi-connections_configuring-and-managing-networking\" title=\"Chapter 11. Managing wifi connections\">Managing Wi-Fi connections\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tPing a host on the remote network or the internet to verify that the connection works:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping -c 3 www.redhat.com\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings(5)\u003C/code> man page on your system\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 13. Using MACsec to encrypt layer-2 traffic in the same physical network\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tYou can use MACsec to secure the communication between two devices (point-to-point). For example, your branch office is connected over a Metro-Ethernet connection with the central office, you can configure MACsec on the two hosts that connect the offices to increase the security.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"how-macsec-increases-security_assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">13.1. How MACsec increases security\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tMedia Access Control security (MACsec) is a layer-2 protocol that secures different traffic types over the Ethernet links, including:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tDynamic host configuration protocol (DHCP)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\taddress resolution protocol (ARP)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIPv4 and IPv6 traffic\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAny traffic over IP such as TCP or UDP\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tMACsec encrypts and authenticates all traffic in LANs, by default with the GCM-AES-128 algorithm, and uses a pre-shared key to establish the connection between the participant hosts. To change the pre-shared key, you must update the NM configuration on all network hosts that use MACsec.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tA MACsec connection uses an Ethernet device, such as an Ethernet network card, VLAN, or tunnel device, as a parent. You can either set an IP configuration only on the MACsec device to communicate with other hosts only by using the encrypted connection, or you can also set an IP configuration on the parent device. In the latter case, you can use the parent device to communicate with other hosts using an unencrypted connection and the MACsec device for encrypted connections.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tMACsec does not require any special hardware. For example, you can use any switch, except if you want to encrypt traffic only between a host and a switch. In this scenario, the switch must also support MACsec.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIn other words, you can configure MACsec for two common scenarios:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tHost-to-host\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tHost-to-switch and switch-to-other-hosts\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tYou can use MACsec only between hosts being in the same physical or virtual LAN.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://developers.redhat.com/blog/2016/10/14/macsec-a-different-solution-to-encrypt-network-traffic\">MACsec: a different solution to encrypt network traffic\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-macsec-connection-using-nmcli_assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">13.2. Configuring a MACsec connection by using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">nmcli\u003C/code> utility to configure Ethernet interfaces to use MACsec. For example, you can create a MACsec connection between two hosts that are connected over Ethernet.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the first host on which you configure MACsec:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate the connectivity association key (CAK) and connectivity-association key name (CKN) for the pre-shared key:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tCreate a 16-byte hexadecimal CAK:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dd if=/dev/urandom count=16 bs=1 2&gt; /dev/null | hexdump -e '1/2 \"%04x\"'\u003C/strong>\u003C/span>\n50b71a8ef0bd5751ea76de6d6c98c03a\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tCreate a 32-byte hexadecimal CKN:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dd if=/dev/urandom count=32 bs=1 2&gt; /dev/null | hexdump -e '1/2 \"%04x\"'\u003C/strong>\u003C/span>\nf2b4297d39da7330910a74abc0449feb45b5c0b9fc23df1430e1898fcf1c4550\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOn both hosts you want to connect over a MACsec connection:\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the MACsec connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type macsec con-name macsec0 ifname macsec0 connection.autoconnect yes macsec.parent enp1s0 macsec.mode psk macsec.mka-cak 50b71a8ef0bd5751ea76de6d6c98c03a macsec.mka-ckn f2b4297d39da7330910a74abc0449feb45b5c0b9fc23df1430e1898fcf1c4550\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the CAK and CKN generated in the previous step in the \u003Ccode class=\"literal\">macsec.mka-cak\u003C/code> and \u003Ccode class=\"literal\">macsec.mka-ckn\u003C/code> parameters. The values must be the same on every host in the MACsec-protected network.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the IP settings on the MACsec connection.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tConfigure the \u003Ccode class=\"literal\">IPv4\u003C/code> settings. For example, to set a static \u003Ccode class=\"literal\">IPv4\u003C/code> address, network mask, default gateway, and DNS server to the \u003Ccode class=\"literal\">macsec0\u003C/code> connection, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify macsec0 ipv4.method manual ipv4.addresses '192.0.2.1/24' ipv4.gateway '192.0.2.254' ipv4.dns '192.0.2.253'\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tConfigure the \u003Ccode class=\"literal\">IPv6\u003C/code> settings. For example, to set a static \u003Ccode class=\"literal\">IPv6\u003C/code> address, network mask, default gateway, and DNS server to the \u003Ccode class=\"literal\">macsec0\u003C/code> connection, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify macsec0 ipv6.method manual ipv6.addresses '2001:db8:1::1/32' ipv6.gateway '2001:db8:1::fffe' ipv6.dns '2001:db8:1::fffd'\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tActivate the connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up macsec0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the traffic is encrypted:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tcpdump -nn -i enp1s0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Display the unencrypted traffic:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tcpdump -nn -i macsec0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay MACsec statistics:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip macsec show\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay individual counters for each type of protection: integrity-only (encrypt off) and encryption (encrypt on)\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -s macsec show\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://developers.redhat.com/blog/2016/10/14/macsec-a-different-solution-to-encrypt-network-traffic\">MACsec: a different solution to encrypt network traffic\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-macsec-connection-using-nmstatectl_assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">13.3. Configuring a MACsec connection by using \u003Ccode class=\"literal\">nmstatectl\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can configure Ethernet interfaces to use MACsec through the \u003Ccode class=\"literal\">nmstatectl\u003C/code> utility in a declarative way. For example, in a YAML file, you describe the desired state of your network, which is supposed to have a MACsec connection between two hosts connected over Ethernet. The \u003Ccode class=\"literal\">nmstatectl\u003C/code> utility interprets the YAML file and deploys persistent and consistent network configuration across the hosts.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tUsing the MACsec security standard for securing communication at the link layer, also known as layer 2 of the Open Systems Interconnection (OSI) model provides the following notable benefits:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEncryption at layer 2 eliminates the need for encrypting individual services at layer 7. This reduces the overhead associated with managing a large number of certificates for each endpoint on each host.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPoint-to-point security between directly connected network devices such as routers and switches.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tNo changes needed for applications and higher-layer protocols.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA physical or virtual Ethernet Network Interface Controller (NIC) exists in the server configuration.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">nmstate\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the first host on which you configure MACsec, create the connectivity association key (CAK) and connectivity-association key name (CKN) for the pre-shared key:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate a 16-byte hexadecimal CAK:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dd if=/dev/urandom count=16 bs=1 2&gt; /dev/null | hexdump -e '1/2 \"%04x\"'\u003C/strong>\u003C/span>\n50b71a8ef0bd5751ea76de6d6c98c03a\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate a 32-byte hexadecimal CKN:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dd if=/dev/urandom count=32 bs=1 2&gt; /dev/null | hexdump -e '1/2 \"%04x\"'\u003C/strong>\u003C/span>\nf2b4297d39da7330910a74abc0449feb45b5c0b9fc23df1430e1898fcf1c4550\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn both hosts that you want to connect over a MACsec connection, complete the following steps:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate a YAML file, for example \u003Ccode class=\"literal\">create-macsec-connection.yml\u003C/code>, with the following settings:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">---\nroutes:\n  config:\n  - destination: 0.0.0.0/0\n    next-hop-interface: macsec0\n    next-hop-address: 192.0.2.2\n    table-id: 254\n  - destination: 192.0.2.2/32\n    next-hop-interface: macsec0\n    next-hop-address: 0.0.0.0\n    table-id: 254\ndns-resolver:\n  config:\n    search:\n    - example.com\n    server:\n    - 192.0.2.200\n    - 2001:db8:1::ffbb\ninterfaces:\n- name: macsec0\n  type: macsec\n  state: up\n  ipv4:\n    enabled: true\n    address:\n    - ip: 192.0.2.1\n      prefix-length: 32\n  ipv6:\n    enabled: true\n    address:\n    - ip: 2001:db8:1::1\n      prefix-length: 64\n  macsec:\n    encrypt: true\n    base-iface: enp0s1\n    mka-cak: 50b71a8ef0bd5751ea76de6d6c98c03a\n    mka-ckn: f2b4297d39da7330910a74abc0449feb45b5c0b9fc23df1430e1898fcf1c4550\n    port: 0\n    validation: strict\n    send-sci: true\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tUse the CAK and CKN generated in the previous step in the \u003Ccode class=\"literal\">mka-cak\u003C/code> and \u003Ccode class=\"literal\">mka-ckn\u003C/code> parameters. The values must be the same on every host in the MACsec-protected network.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOptional: In the same YAML configuration file, you can also configure the following settings:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tA static IPv4 address - \u003Ccode class=\"literal\">192.0.2.1\u003C/code> with the \u003Ccode class=\"literal\">/32\u003C/code> subnet mask\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tA static IPv6 address - \u003Ccode class=\"literal\">2001:db8:1::1\u003C/code> with the \u003Ccode class=\"literal\">/64\u003C/code> subnet mask\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tAn IPv4 default gateway - \u003Ccode class=\"literal\">192.0.2.2\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tAn IPv4 DNS server - \u003Ccode class=\"literal\">192.0.2.200\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tAn IPv6 DNS server - \u003Ccode class=\"literal\">2001:db8:1::ffbb\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tA DNS search domain - \u003Ccode class=\"literal\">example.com\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tApply the settings to the system:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl apply create-macsec-connection.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the current state in YAML format:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl show macsec0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the traffic is encrypted:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tcpdump -nn -i enp0s1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Display the unencrypted traffic:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tcpdump -nn -i macsec0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay MACsec statistics:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip macsec show\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay individual counters for each type of protection: integrity-only (encrypt off) and encryption (encrypt on)\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -s macsec show\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://developers.redhat.com/blog/2016/10/14/macsec-a-different-solution-to-encrypt-network-traffic\">MACsec: a different solution to encrypt network traffic\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"getting-started-with-ipvlan_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 14. Getting started with IPVLAN\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tIPVLAN is a driver for a virtual network device that can be used in container environment to access the host network. IPVLAN exposes a single MAC address to the external network regardless the number of IPVLAN device created inside the host network. This means that a user can have multiple IPVLAN devices in multiple containers and the corresponding switch reads a single MAC address. IPVLAN driver is useful when the local switch imposes constraints on the total number of MAC addresses that it can manage.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"ipvlan-modes_getting-started-with-ipvlan\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.1. IPVLAN modes\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe following modes are available for IPVLAN:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>L2 mode\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn IPVLAN \u003Cspan class=\"strong strong\">\u003Cstrong>L2 mode\u003C/strong>\u003C/span>, virtual devices receive and respond to address resolution protocol (ARP) requests. The \u003Ccode class=\"literal\">netfilter\u003C/code> framework runs only inside the container that owns the virtual device. No \u003Ccode class=\"literal\">netfilter\u003C/code> chains are executed in the default namespace on the containerized traffic. Using \u003Cspan class=\"strong strong\">\u003Cstrong>L2 mode\u003C/strong>\u003C/span> provides good performance, but less control on the network traffic.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>L3 mode\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn \u003Cspan class=\"strong strong\">\u003Cstrong>L3 mode\u003C/strong>\u003C/span>, virtual devices process only \u003Cspan class=\"strong strong\">\u003Cstrong>L3\u003C/strong>\u003C/span> traffic and above. Virtual devices do not respond to ARP request and users must configure the neighbour entries for the IPVLAN IP addresses on the relevant peers manually. The egress traffic of a relevant container is landed on the \u003Ccode class=\"literal\">netfilter\u003C/code> POSTROUTING and OUTPUT chains in the default namespace while the ingress traffic is threaded in the same way as \u003Cspan class=\"strong strong\">\u003Cstrong>L2 mode\u003C/strong>\u003C/span>. Using \u003Cspan class=\"strong strong\">\u003Cstrong>L3 mode\u003C/strong>\u003C/span> provides good control but decreases the network traffic performance.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>L3S mode\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn \u003Cspan class=\"strong strong\">\u003Cstrong>L3S mode\u003C/strong>\u003C/span>, virtual devices process the same way as in \u003Cspan class=\"strong strong\">\u003Cstrong>L3 mode\u003C/strong>\u003C/span>, except that both egress and ingress traffics of a relevant container are landed on \u003Ccode class=\"literal\">netfilter\u003C/code> chain in the default namespace. \u003Cspan class=\"strong strong\">\u003Cstrong>L3S mode\u003C/strong>\u003C/span> behaves in a similar way to \u003Cspan class=\"strong strong\">\u003Cstrong>L3 mode\u003C/strong>\u003C/span> but provides greater control of the network.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe IPVLAN virtual device does not receive broadcast and multicast traffic in case of \u003Cspan class=\"strong strong\">\u003Cstrong>L3\u003C/strong>\u003C/span> and \u003Cspan class=\"strong strong\">\u003Cstrong>L3S\u003C/strong>\u003C/span> modes.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"ipvlan-and-macvlan_getting-started-with-ipvlan\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.2. Comparison of IPVLAN and MACVLAN\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe following table shows the major differences between MACVLAN and IPVLAN:\n\t\t\t\u003C/p>\u003Crh-table>\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccolgroup>\u003Ccol style=\"width: 50%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 50%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140053157978624\" scope=\"col\">MACVLAN\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140053161176944\" scope=\"col\">IPVLAN\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053157978624\"> \u003Cp>\n\t\t\t\t\t\t\t\tUses MAC address for each MACVLAN device.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003Cp>\n\t\t\t\t\t\t\t\tNote that, if a switch reaches the maximum number of MAC addresses it can store in its MAC table, connectivity can be lost.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053161176944\"> \u003Cp>\n\t\t\t\t\t\t\t\tUses single MAC address which does not limit the number of IPVLAN devices.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053157978624\"> \u003Cp>\n\t\t\t\t\t\t\t\tNetfilter rules for a global namespace cannot affect traffic to or from a MACVLAN device in a child namespace.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053161176944\"> \u003Cp>\n\t\t\t\t\t\t\t\tIt is possible to control traffic to or from a IPVLAN device in \u003Cspan class=\"strong strong\">\u003Cstrong>L3 mode\u003C/strong>\u003C/span> and \u003Cspan class=\"strong strong\">\u003Cstrong>L3S mode\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cp>\n\t\t\t\tBoth IPVLAN and MACVLAN do not require any level of encapsulation.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"creating-and-configuring-the-ipvlan-device-using-iproute2_getting-started-with-ipvlan\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.3. Creating and configuring the IPVLAN device using iproute2\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThis procedure shows how to set up the IPVLAN device using \u003Ccode class=\"literal\">iproute2\u003C/code>.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo create an IPVLAN device, enter the following command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link add link \u003Cspan class=\"emphasis\">\u003Cem>real_NIC_device\u003C/em>\u003C/span> name \u003Cspan class=\"emphasis\">\u003Cem>IPVLAN_device\u003C/em>\u003C/span> type ipvlan mode l2\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that network interface controller (NIC) is a hardware component which connects a computer to a network.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"example\" id=\"idm140053161156560\">\u003Cp class=\"title\">\u003Cstrong>Example 14.1. Creating an IPVLAN device\u003C/strong>\u003C/p>\u003Cdiv class=\"example-contents\">\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link add link enp0s31f6 name my_ipvlan type ipvlan mode l2\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>ip link\u003C/strong>\u003C/span>\n47: my_ipvlan@enp0s31f6: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc noop state DOWN mode DEFAULT group default qlen 1000 link/ether e8:6a:6e:8a:a2:44 brd ff:ff:ff:ff:ff:ff\u003C/pre>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo assign an \u003Ccode class=\"literal\">IPv4\u003C/code> or \u003Ccode class=\"literal\">IPv6\u003C/code> address to the interface, enter the following command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip addr add dev \u003Cspan class=\"emphasis\">\u003Cem>IPVLAN_device\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>IP_address/subnet_mask_prefix\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn case of configuring an IPVLAN device in \u003Cspan class=\"strong strong\">\u003Cstrong>L3 mode\u003C/strong>\u003C/span> or \u003Cspan class=\"strong strong\">\u003Cstrong>L3S mode\u003C/strong>\u003C/span>, make the following setups:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tConfigure the neighbor setup for the remote peer on the remote host:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip neigh add dev \u003Cspan class=\"emphasis\">\u003Cem>peer_device\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>IPVLAN_device_IP_address\u003C/em>\u003C/span> lladdr \u003Cspan class=\"emphasis\">\u003Cem>MAC_address\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\twhere \u003Cspan class=\"emphasis\">\u003Cem>MAC_address\u003C/em>\u003C/span> is the MAC address of the real NIC on which an IPVLAN device is based on.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tConfigure an IPVLAN device for \u003Cspan class=\"strong strong\">\u003Cstrong>L3 mode\u003C/strong>\u003C/span> with the following command:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip route add dev \u003Cspan class=\"emphasis\">\u003Cem>&lt;real_NIC_device&gt;\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>&lt;peer_IP_address/32&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tFor \u003Cspan class=\"strong strong\">\u003Cstrong>L3S mode\u003C/strong>\u003C/span>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip route add dev \u003Cspan class=\"emphasis\">\u003Cem>real_NIC_device\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>peer_IP_address/32\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\twhere IP-address represents the address of the remote peer.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo set an IPVLAN device active, enter the following command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link set dev \u003Cspan class=\"emphasis\">\u003Cem>IPVLAN_device\u003C/em>\u003C/span> up\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo check if the IPVLAN device is active, execute the following command on the remote host:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping \u003Cspan class=\"emphasis\">\u003Cem>IP_address\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\twhere the \u003Cspan class=\"emphasis\">\u003Cem>IP_address\u003C/em>\u003C/span> uses the IP address of the IPVLAN device.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-networkmanager-to-ignore-certain-devices_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 15. Configuring NetworkManager to ignore certain devices\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tBy default, NetworkManager manages all devices. To ignore certain devices, you can configure NetworkManager by setting as \u003Ccode class=\"literal\">unmanaged\u003C/code>.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"permanently-configuring-a-device-as-unmanaged-in-networkmanager_configuring-networkmanager-to-ignore-certain-devices\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">15.1. Permanently configuring a device as unmanaged in NetworkManager\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can permanently configure devices as \u003Ccode class=\"literal\">unmanaged\u003C/code> based on several criteria, such as the interface name, MAC address, or device type.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Display the list of devices to identify the device or MAC address you want to set as \u003Ccode class=\"literal\">unmanaged\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link show\u003C/strong>\u003C/span>\n...\n2: enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000\n    link/ether 52:54:00:74:79:56 brd ff:ff:ff:ff:ff:ff\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">/etc/NetworkManager/conf.d/99-unmanaged-devices.conf\u003C/code> file with the following content:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo configure a specific interface as unmanaged, add:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">[keyfile]\nunmanaged-devices=interface-name:enp1s0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo configure a device with a specific MAC address as unmanaged, add:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">[keyfile]\nunmanaged-devices=mac:52:54:00:74:79:56\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo configure all devices of a specific type as unmanaged, add:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">[keyfile]\nunmanaged-devices=type:ethernet\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo set multiple devices as unmanaged, separate the entries in the \u003Ccode class=\"literal\">unmanaged-devices\u003C/code> parameter with a semicolon, for example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">[keyfile]\nunmanaged-devices=interface-name:enp1s0;interface-name:enp7s0\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReload the \u003Ccode class=\"literal\">NetworkManager\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl reload NetworkManager\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the list of devices:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device status\u003C/strong>\u003C/span>\nDEVICE  TYPE      STATE      CONNECTION\nenp1s0  ethernet  \u003Cspan class=\"strong strong\">\u003Cstrong>unmanaged\u003C/strong>\u003C/span>  --\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">unmanaged\u003C/code> state next to the \u003Ccode class=\"literal\">enp1s0\u003C/code> device indicates that NetworkManager does not manage this device.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the device is not shown as \u003Ccode class=\"literal\">unmanaged\u003C/code>, display the NetworkManager configuration:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>NetworkManager --print-config\u003C/strong>\u003C/span>\n...\n[keyfile]\nunmanaged-devices=interface-name:enp1s0\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the output does not match the settings that you configured, ensure that no configuration file with a higher priority overrides your settings. For details about how NetworkManager merges multiple configuration files, see the \u003Ccode class=\"literal\">NetworkManager.conf(5)\u003C/code> man page on your system.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"temporarily-configuring-a-device-as-unmanaged-in-networkmanager_configuring-networkmanager-to-ignore-certain-devices\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">15.2. Temporarily configuring a device as unmanaged in NetworkManager\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can temporarily configure devices as \u003Ccode class=\"literal\">unmanaged\u003C/code>, for example, for testing purposes.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Display the list of devices to identify the device you want to set as \u003Ccode class=\"literal\">unmanaged\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device status\u003C/strong>\u003C/span>\nDEVICE  TYPE      STATE         CONNECTION\nenp1s0  ethernet  disconnected  --\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the \u003Ccode class=\"literal\">enp1s0\u003C/code> device to the \u003Ccode class=\"literal\">unmanaged\u003C/code> state:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device set enp1s0 managed no\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the list of devices:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli device status\u003C/strong>\u003C/span>\nDEVICE  TYPE      STATE      CONNECTION\nenp1s0  ethernet  \u003Cspan class=\"strong strong\">\u003Cstrong>unmanaged\u003C/strong>\u003C/span>  --\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">unmanaged\u003C/code> state next to the \u003Ccode class=\"literal\">enp1s0\u003C/code> device indicates that NetworkManager does not manage this device.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">NetworkManager.conf(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"proc_configuring-the-loopback-interface-by-using-nmcli_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 16. Configuring the loopback interface by using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tBy default, NetworkManager does not manage the loopback (\u003Ccode class=\"literal\">lo\u003C/code>) interface. After creating a connection profile for the \u003Ccode class=\"literal\">lo\u003C/code> interface, you can configure this device by using NetworkManager. Some of the examples are as follows:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tAssign additional IP addresses to the \u003Ccode class=\"literal\">lo\u003C/code> interface\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tDefine DNS addresses\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tChange the Maximum Transmission Unit (MTU) size of the \u003Ccode class=\"literal\">lo\u003C/code> interface\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tCreate a new connection of type \u003Ccode class=\"literal\">loopback\u003C/code>:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add con-name \u003Cspan class=\"emphasis\">\u003Cem>example-loopback\u003C/em>\u003C/span> type loopback\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tConfigure custom connection settings, for example:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo assign an additional IP address to the interface, enter:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>example-loopback\u003C/em>\u003C/span> +ipv4.addresses \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1/24\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tNetworkManager manages the \u003Ccode class=\"literal\">lo\u003C/code> interface by always assigning the IP addresses \u003Ccode class=\"literal\">127.0.0.1\u003C/code> and \u003Ccode class=\"literal\">::1\u003C/code> that are persistent across the reboots. You can not override \u003Ccode class=\"literal\">127.0.0.1\u003C/code> and \u003Ccode class=\"literal\">::1\u003C/code>. However, you can assign additional IP addresses to the interface.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo set a custom Maximum Transmission Unit (MTU), enter:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli con mod \u003Cspan class=\"emphasis\">\u003Cem>example-loopback\u003C/em>\u003C/span> loopback.mtu \u003Cspan class=\"emphasis\">\u003Cem>16384\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo set an IP address to your DNS server, enter:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>example-loopback\u003C/em>\u003C/span> ipv4.dns \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf you set a DNS server in the loopback connection profile, this entry is always available in the \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> file. The DNS server entry remains independent of whether or not the host roams between different networks.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tActivate the connection:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up example-loopback\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tDisplay the settings of the \u003Ccode class=\"literal\">lo\u003C/code> interface:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip address show lo\u003C/strong>\u003C/span>\n\n1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu \u003Cspan class=\"strong strong\">\u003Cstrong>16384\u003C/strong>\u003C/span> qdisc noqueue state UNKNOWN group default qlen 1000\n\nlink/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet \u003Ccode class=\"literal\">192.0.2.1/24\u003C/code> brd \u003Ccode class=\"literal\">192.0.2.255\u003C/code> scope global lo valid_lft forever preferred_lft forever\n\ninet6 ::1/128 scope host\nvalid_lft forever preferred_lft forever\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tVerify the DNS address:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /etc/resolv.conf\u003C/strong>\u003C/span>\n...\nnameserver \u003Ccode class=\"literal\">192.0.2.0\u003C/code>\n...\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"chapter\" id=\"creating-a-dummy-interface_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 17. Creating a dummy interface\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tAs a Red Hat Enterprise Linux user, you can create and use dummy network interfaces for debugging and testing purposes. A dummy interface provides a device to route packets without actually transmitting them. It enables you to create additional loopback-like devices managed by NetworkManager and makes an inactive SLIP (Serial Line Internet Protocol) address look like a real address for local programs.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"creating-a-dummy-interface-with-both-an-ipv4-and-ipv6-address-using-nmcli_creating-a-dummy-interface\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">17.1. Creating a dummy interface with both an IPv4 and IPv6 address by using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can create a dummy interface with various settings, such as IPv4 and IPv6 addresses. After creating the interface, NetworkManager automatically assigns it to the default \u003Ccode class=\"literal\">public\u003C/code> \u003Ccode class=\"literal\">firewalld\u003C/code> zone.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a dummy interface named \u003Ccode class=\"literal\">dummy0\u003C/code> with static IPv4 and IPv6 addresses:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type dummy ifname \u003Cspan class=\"emphasis\">\u003Cem>dummy0\u003C/em>\u003C/span> ipv4.method manual ipv4.addresses \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1/24\u003C/em>\u003C/span> ipv6.method manual ipv6.addresses \u003Cspan class=\"emphasis\">\u003Cem>2001:db8:2::1/64\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tTo configure a dummy interface without IPv4 and IPv6 addresses, set both the \u003Ccode class=\"literal\">ipv4.method\u003C/code> and \u003Ccode class=\"literal\">ipv6.method\u003C/code> parameters to \u003Ccode class=\"literal\">disabled\u003C/code>. Otherwise, IP auto-configuration fails, and NetworkManager deactivates the connection and removes the device.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tList the connection profiles:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection show\u003C/strong>\u003C/span>\nNAME            UUID                                  TYPE     DEVICE\ndummy-dummy0    aaf6eb56-73e5-4746-9037-eed42caa8a65  dummy    dummy0\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"using-networkmanager-to-disable-ipv6-for-a-specific-connection_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 18. Using NetworkManager to disable IPv6 for a specific connection\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tOn a system that uses NetworkManager to manage network interfaces, you can disable the IPv6 protocol if the network only uses IPv4. If you disable \u003Ccode class=\"literal\">IPv6\u003C/code>, NetworkManager automatically sets the corresponding \u003Ccode class=\"literal\">sysctl\u003C/code> values in the Kernel.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tIf disabling IPv6 using kernel tunables or kernel boot parameters, additional consideration must be given to system configuration. For more information, see the \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/8709\">How do I disable or enable the IPv6 protocol in RHEL?\u003C/a> article.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"disabling-ipv6-on-a-connection-using-nmcli_using-networkmanager-to-disable-ipv6-for-a-specific-connection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">18.1. Disabling IPv6 on a connection using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">nmcli\u003C/code> utility to disable the \u003Ccode class=\"literal\">IPv6\u003C/code> protocol on the command line.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe system uses NetworkManager to manage network interfaces.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Display the list of network connections:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection show\u003C/strong>\u003C/span>\nNAME    UUID                                  TYPE      DEVICE\nExample 7a7e0151-9c18-4e6f-89ee-65bb2d64d365  ethernet  enp1s0\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the \u003Ccode class=\"literal\">ipv6.method\u003C/code> parameter of the connection to \u003Ccode class=\"literal\">disabled\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>Example\u003C/em>\u003C/span> ipv6.method \"disabled\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRestart the network connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>Example\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IP settings of the device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip address show \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n2: \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000\n    link/ether 52:54:00:6b:74:be brd ff:ff:ff:ff:ff:ff\n    inet 192.0.2.1/24 brd 192.10.2.255 scope global noprefixroute \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\n       valid_lft forever preferred_lft forever\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf no \u003Ccode class=\"literal\">inet6\u003C/code> entry is displayed, \u003Ccode class=\"literal\">IPv6\u003C/code> is disabled on the device.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the \u003Ccode class=\"literal\">/proc/sys/net/ipv6/conf/\u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>/disable_ipv6\u003C/code> file now contains the value \u003Ccode class=\"literal\">1\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /proc/sys/net/ipv6/conf/\u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>/disable_ipv6\u003C/strong>\u003C/span>\n1\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe value \u003Ccode class=\"literal\">1\u003C/code> means that \u003Ccode class=\"literal\">IPv6\u003C/code> is disabled for the device.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_changing-a-hostname_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 19. Changing a hostname\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tThe hostname of a system is the name on the system itself. You can set the name when you install RHEL, and you can change it afterwards.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"proc_changing-a-hostname-using-nmcli_assembly_changing-a-hostname\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">19.1. Changing a hostname by using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">nmcli\u003C/code> utility to update the system hostname. Note that other utilities might use a different term, such as static or persistent hostname.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Display the current hostname setting:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli general hostname\u003C/strong>\u003C/span>\n\u003Cspan class=\"emphasis\">\u003Cem>old-hostname.example.com\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the new hostname:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli general hostname \u003Cspan class=\"emphasis\">\u003Cem>new-hostname.example.com\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNetworkManager automatically restarts the \u003Ccode class=\"literal\">systemd-hostnamed\u003C/code> to activate the new name. For the changes to take effect, reboot the host:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>reboot\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAlternatively, if you know which services use the hostname:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRestart all services that only read the hostname when the service starts:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl restart \u003Cspan class=\"emphasis\">\u003Cem>&lt;service_name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tActive shell users must re-login for the changes to take effect.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the hostname:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli general hostname\u003C/strong>\u003C/span>\n\u003Cspan class=\"emphasis\">\u003Cem>new-hostname.example.com\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_changing-a-hostname-using-hostnamectl_assembly_changing-a-hostname\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">19.2. Changing a hostname by using hostnamectl\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">hostnamectl\u003C/code> utility to update the hostname. By default, this utility sets the following hostname types:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStatic hostname: Stored in the \u003Ccode class=\"literal\">/etc/hostname\u003C/code> file. Typically, services use this name as the hostname.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPretty hostname: A descriptive name, such as \u003Ccode class=\"literal\">Proxy server in data center A\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTransient hostname: A fall-back value that is typically received from the network configuration.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Display the current hostname setting:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>hostnamectl status --static\u003C/strong>\u003C/span>\n\u003Cspan class=\"emphasis\">\u003Cem>old-hostname.example.com\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the new hostname:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>hostnamectl set-hostname \u003Cspan class=\"emphasis\">\u003Cem>new-hostname.example.com\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis command sets the static, pretty, and transient hostname to the new value. To set only a specific type, pass the \u003Ccode class=\"literal\">--static\u003C/code>, \u003Ccode class=\"literal\">--pretty\u003C/code>, or \u003Ccode class=\"literal\">--transient\u003C/code> option to the command.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">hostnamectl\u003C/code> utility automatically restarts the \u003Ccode class=\"literal\">systemd-hostnamed\u003C/code> to activate the new name. For the changes to take effect, reboot the host:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>reboot\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAlternatively, if you know which services use the hostname:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRestart all services that only read the hostname when the service starts:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl restart \u003Cspan class=\"emphasis\">\u003Cem>&lt;service_name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tActive shell users must re-login for the changes to take effect.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the hostname:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>hostnamectl status --static\u003C/strong>\u003C/span>\n\u003Cspan class=\"emphasis\">\u003Cem>new-hostname.example.com\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-networkmanager-dhcp-settings_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 20. Configuring NetworkManager DHCP settings\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tNetworkManager provides different configuration options related to DHCP. For example, you can configure NetworkManager to use the build-in DHCP client (default) or an external client, and you can influence DHCP settings of individual profiles.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"proc_changing-the-dhcp-client-of-networkmanager_configuring-networkmanager-dhcp-settings\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">20.1. Changing the DHCP client of NetworkManager\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tBy default, NetworkManager uses its internal DHCP client. However, if you require a DHCP client with features that the built-in client does not provide, you can alternatively configure NetworkManager to use \u003Ccode class=\"literal\">dhclient\u003C/code>.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tNote that RHEL does not provide \u003Ccode class=\"literal\">dhcpcd\u003C/code> and, therefore, NetworkManager can not use this client.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">/etc/NetworkManager/conf.d/dhcp-client.conf\u003C/code> file with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">[main]\ndhcp=dhclient\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou can set the \u003Ccode class=\"literal\">dhcp\u003C/code> parameter to \u003Ccode class=\"literal\">internal\u003C/code> (default) or \u003Ccode class=\"literal\">dhclient\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you set the \u003Ccode class=\"literal\">dhcp\u003C/code> parameter to \u003Ccode class=\"literal\">dhclient\u003C/code>, install the \u003Ccode class=\"literal\">dhcp-client\u003C/code> package:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install dhcp-client\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRestart NetworkManager:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl restart NetworkManager\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that the restart temporarily interrupts all network connections.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSearch in the \u003Ccode class=\"literal\">/var/log/messages\u003C/code> log file for an entry similar to the following:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">Apr 26 09:54:19 server NetworkManager[27748]: &lt;info&gt;  [1650959659.8483] dhcp-init: Using DHCP client 'dhclient'\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis log entry confirms that NetworkManager uses \u003Ccode class=\"literal\">dhclient\u003C/code> as DHCP client.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">NetworkManager.conf(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-the-dhcp-behavior-of-a-networkmanager-connection_configuring-networkmanager-dhcp-settings\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">20.2. Configuring the DHCP behavior of a NetworkManager connection\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tA Dynamic Host Configuration Protocol (DHCP) client requests the dynamic IP address and corresponding configuration information from a DHCP server each time a client connects to the network.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tWhen you configured a connection to retrieve an IP address from a DHCP server, the NetworkManager requests an IP address from a DHCP server. By default, the client waits 45 seconds for this request to be completed. When a \u003Ccode class=\"literal\">DHCP\u003C/code> connection is started, a dhcp client requests an IP address from a \u003Ccode class=\"literal\">DHCP\u003C/code> server.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA connection that uses DHCP is configured on the host.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the \u003Ccode class=\"literal\">ipv4.dhcp-timeout\u003C/code> and \u003Ccode class=\"literal\">ipv6.dhcp-timeout\u003C/code> properties. For example, to set both options to \u003Ccode class=\"literal\">30\u003C/code> seconds, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>&lt;connection_name&gt;\u003C/em>\u003C/span> ipv4.dhcp-timeout 30 ipv6.dhcp-timeout 30\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAlternatively, set the parameters to \u003Ccode class=\"literal\">infinity\u003C/code> to configure that NetworkManager does not stop trying to request and renew an IP address until it is successful.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Configure the behavior if NetworkManager does not receive an IPv4 address before the timeout:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>&lt;connection_name&gt;\u003C/em>\u003C/span> ipv4.may-fail \u003Cspan class=\"emphasis\">\u003Cem>&lt;value&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you set the \u003Ccode class=\"literal\">ipv4.may-fail\u003C/code> option to:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">yes\u003C/code>, the status of the connection depends on the IPv6 configuration:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tIf the IPv6 configuration is enabled and successful, NetworkManager activates the IPv6 connection and no longer tries to activate the IPv4 connection.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tIf the IPv6 configuration is disabled or not configured, the connection fails.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">no\u003C/code>, the connection is deactivated. In this case:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tIf the \u003Ccode class=\"literal\">autoconnect\u003C/code> property of the connection is enabled, NetworkManager retries to activate the connection as many times as set in the \u003Ccode class=\"literal\">autoconnect-retries\u003C/code> property. The default is \u003Ccode class=\"literal\">4\u003C/code>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tIf the connection still cannot acquire a DHCP address, auto-activation fails. Note that after 5 minutes, the auto-connection process starts again to acquire an IP address from the DHCP server.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Configure the behavior if NetworkManager does not receive an IPv6 address before the timeout:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>&lt;connection_name&gt;\u003C/em>\u003C/span> ipv6.may-fail \u003Cspan class=\"emphasis\">\u003Cem>&lt;value&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_running-dhclient-exit-hooks-using-networkmanager-a-dispatcher-script_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 21. Running dhclient exit hooks using NetworkManager a dispatcher script\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tYou can use a NetworkManager dispatcher script to execute \u003Ccode class=\"literal systemitem\">dhclient\u003C/code> exit hooks.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"con_the-concept-of-networkmanager-dispatcher-scripts_assembly_running-dhclient-exit-hooks-using-networkmanager-a-dispatcher-script\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.1. The concept of NetworkManager dispatcher scripts\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">NetworkManager-dispatcher\u003C/code> service executes user-provided scripts in alphabetical order when network events happen. These scripts are typically shell scripts, but can be any executable script or application. You can use dispatcher scripts, for example, to adjust network-related settings that you cannot manage with NetworkManager.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can store dispatcher scripts in the following directories:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/etc/NetworkManager/dispatcher.d/\u003C/code>: The general location for dispatcher scripts the \u003Ccode class=\"literal\">root\u003C/code> user can edit.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/lib/NetworkManager/dispatcher.d/\u003C/code>: For pre-deployed immutable dispatcher scripts.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tFor security reasons, the \u003Ccode class=\"literal\">NetworkManager-dispatcher\u003C/code> service executes scripts only if the following conditions met:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe script is owned by the \u003Ccode class=\"literal\">root\u003C/code> user.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe script is only readable and writable by \u003Ccode class=\"literal\">root\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">setuid\u003C/code> bit is not set on the script.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">NetworkManager-dispatcher\u003C/code> service runs each script with two arguments:\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe interface name of the device the operation happened on.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe action, such as \u003Ccode class=\"literal\">up\u003C/code>, when the interface has been activated.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">Dispatcher scripts\u003C/code> section in the \u003Ccode class=\"literal\">NetworkManager(8)\u003C/code> man page provides an overview of actions and environment variables you can use in scripts.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">NetworkManager-dispatcher\u003C/code> service runs one script at a time, but asynchronously from the main NetworkManager process. Note that, if a script is queued, the service will always run it, even if a later event makes it obsolete. However, the \u003Ccode class=\"literal\">NetworkManager-dispatcher\u003C/code> service runs scripts that are symbolic links referring to files in \u003Ccode class=\"literal\">/etc/NetworkManager/dispatcher.d/no-wait.d/\u003C/code> immediately, without waiting for the termination of previous scripts, and in parallel.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">NetworkManager(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_creating-a-networkmanager-dispatcher-script-that-runs-dhclient-exit-hooks_assembly_running-dhclient-exit-hooks-using-networkmanager-a-dispatcher-script\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.2. Creating a NetworkManager dispatcher script that runs dhclient exit hooks\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tWhen a DHCP server assigns or updates an IPv4 address, NetworkManager can run a dispatcher script stored in the \u003Ccode class=\"literal\">/etc/dhcp/dhclient-exit-hooks.d/\u003C/code> directory. This dispatcher script can then, for example, run \u003Ccode class=\"literal\">dhclient\u003C/code> exit hooks.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">dhclient\u003C/code> exit hooks are stored in the \u003Ccode class=\"literal\">/etc/dhcp/dhclient-exit-hooks.d/\u003C/code> directory.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">/etc/NetworkManager/dispatcher.d/12-dhclient-down\u003C/code> file with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-bash\">#!/bin/bash\n# Run dhclient.exit-hooks.d scripts\n\nif [ -n \"$DHCP4_DHCP_LEASE_TIME\" ] ; then\n  if [ \"$2\" = \"dhcp4-change\" ] || [ \"$2\" = \"up\" ] ; then\n    if [ -d /etc/dhcp/dhclient-exit-hooks.d ] ; then\n      for f in /etc/dhcp/dhclient-exit-hooks.d/*.sh ; do\n        if [ -x \"${f}\" ]; then\n          . \"${f}\"\n        fi\n      done\n    fi\n  fi\nfi\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the \u003Ccode class=\"literal\">root\u003C/code> user as owner of the file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>chown root:root \u003Cspan class=\"emphasis\">\u003Cem>/etc/NetworkManager/dispatcher.d/12-dhclient-down\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the permissions so that only the root user can execute it:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>chmod 0700 \u003Cspan class=\"emphasis\">\u003Cem>/etc/NetworkManager/dispatcher.d/12-dhclient-down\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRestore the SELinux context:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>restorecon \u003Cspan class=\"emphasis\">\u003Cem>/etc/NetworkManager/dispatcher.d/12-dhclient-down\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">NetworkManager(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"manually-configuring-the-etc-resolv-conf-file_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 22. Manually configuring the /etc/resolv.conf file\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tBy default, NetworkManager dynamically updates the \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> file with the DNS settings from active NetworkManager connection profiles. However, you can disable this behavior and manually configure DNS settings in \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code>.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tAlternatively, if you require a specific order of DNS servers in \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code>, see \u003Ca class=\"link\" href=\"#configuring-the-order-of-dns-servers_configuring-and-managing-networking\" title=\"Chapter 23. Configuring the order of DNS servers\">Configuring the order of DNS servers\u003C/a>.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"disabling-dns-processing-in-the-networkmanager-configuration_manually-configuring-the-etc-resolv-conf-file\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">22.1. Disabling DNS processing in the NetworkManager configuration\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBy default, NetworkManager manages DNS settings in the \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> file, and you can configure the order of DNS servers. Alternatively, you can disable DNS processing in NetworkManager if you prefer to manually configure DNS settings in \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code>.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAs the root user, create the \u003Ccode class=\"literal\">/etc/NetworkManager/conf.d/90-dns-none.conf\u003C/code> file with the following content by using a text editor:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">[main]\ndns=none\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReload the \u003Ccode class=\"literal\">NetworkManager\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl reload NetworkManager\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tAfter you reload the service, NetworkManager no longer updates the \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> file. However, the last contents of the file are preserved.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOptional: Remove the \u003Ccode class=\"literal\">Generated by NetworkManager\u003C/code> comment from \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> to avoid confusion.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEdit the \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> file and manually update the configuration.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReload the \u003Ccode class=\"literal\">NetworkManager\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl reload NetworkManager\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /etc/resolv.conf\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you successfully disabled DNS processing, NetworkManager did not override the manually configured settings.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the NetworkManager configuration to ensure that no other configuration file with a higher priority overrode the setting:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>NetworkManager --print-config\u003C/strong>\u003C/span>\n...\ndns=none\n...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">NetworkManager.conf(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-the-order-of-dns-servers_configuring-and-managing-networking\" title=\"Chapter 23. Configuring the order of DNS servers\">Configuring the order of DNS servers using NetworkManager\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"replacing-etc-resolv-conf-with-a-symbolic-link-to-manually-configure-dns-settings_manually-configuring-the-etc-resolv-conf-file\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">22.2. Replacing /etc/resolv.conf with a symbolic link to manually configure DNS settings\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBy default, NetworkManager manages DNS settings in the \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> file, and you can configure the order of DNS servers. Alternatively, you can disable DNS processing in NetworkManager if you prefer to manually configure DNS settings in \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code>. For example, NetworkManager does not automatically update the DNS configuration if \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> is a symbolic link.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe NetworkManager \u003Ccode class=\"literal\">rc-manager\u003C/code> configuration option is not set to \u003Ccode class=\"literal\">file\u003C/code>. To verify, use the \u003Ccode class=\"literal\">NetworkManager --print-config\u003C/code> command.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCreate a file, such as \u003Ccode class=\"literal\">/etc/resolv.conf.manually-configured\u003C/code>, and add the DNS configuration for your environment to it. Use the same parameters and syntax as in the original \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRemove the \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>rm /etc/resolv.conf\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a symbolic link named \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> that refers to \u003Ccode class=\"literal\">/etc/resolv.conf.manually-configured\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ln -s /etc/resolv.conf.manually-configured /etc/resolv.conf\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">resolv.conf(5)\u003C/code> and \u003Ccode class=\"literal\">NetworkManager.conf(5)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-the-order-of-dns-servers_configuring-and-managing-networking\" title=\"Chapter 23. Configuring the order of DNS servers\">Configuring the order of DNS servers using NetworkManager\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-the-order-of-dns-servers_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 23. Configuring the order of DNS servers\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tMost applications use the \u003Ccode class=\"literal\">getaddrinfo()\u003C/code> function of the \u003Ccode class=\"literal\">glibc\u003C/code> library to resolve DNS requests. By default, \u003Ccode class=\"literal\">glibc\u003C/code> sends all DNS requests to the first DNS server specified in the \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> file. If this server does not reply, RHEL uses the next server in this file. NetworkManager enables you to influence the order of DNS servers in \u003Ccode class=\"literal\">etc/resolv.conf\u003C/code>.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"how-networkmanager-orders-dns-servers-in-etc-resolv-conf_configuring-the-order-of-dns-servers\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.1. How NetworkManager orders DNS servers in /etc/resolv.conf\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tNetworkManager orders DNS servers in the \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> file based on the following rules:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf only one connection profile exists, NetworkManager uses the order of IPv4 and IPv6 DNS server specified in that connection.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf multiple connection profiles are activated, NetworkManager orders DNS servers based on a DNS priority value. If you set DNS priorities, the behavior of NetworkManager depends on the value set in the \u003Ccode class=\"literal\">dns\u003C/code> parameter. You can set this parameter in the \u003Ccode class=\"literal\">[main]\u003C/code> section in the \u003Ccode class=\"literal\">/etc/NetworkManager/NetworkManager.conf\u003C/code> file:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">dns=default\u003C/code> or if the \u003Ccode class=\"literal\">dns\u003C/code> parameter is not set:\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tNetworkManager orders the DNS servers from different connections based on the \u003Ccode class=\"literal\">ipv4.dns-priority\u003C/code> and \u003Ccode class=\"literal\">ipv6.dns-priority\u003C/code> parameter in each connection.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you set no value or you set \u003Ccode class=\"literal\">ipv4.dns-priority\u003C/code> and \u003Ccode class=\"literal\">ipv6.dns-priority\u003C/code> to \u003Ccode class=\"literal\">0\u003C/code>, NetworkManager uses the global default value. See \u003Ca class=\"link\" href=\"#default-values-of-dns-priority-parameters_configuring-the-order-of-dns-servers\" title=\"Default values of DNS priority parameters\">Default values of DNS priority parameters\u003C/a>.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">dns=dnsmasq\u003C/code> or \u003Ccode class=\"literal\">dns=systemd-resolved\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tWhen you use one of these settings, NetworkManager sets either \u003Ccode class=\"literal\">127.0.0.1\u003C/code> for \u003Ccode class=\"literal\">dnsmasq\u003C/code> or \u003Ccode class=\"literal\">127.0.0.53\u003C/code> as \u003Ccode class=\"literal\">nameserver\u003C/code> entry in the \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> file.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tBoth the \u003Ccode class=\"literal\">dnsmasq\u003C/code> and \u003Ccode class=\"literal\">systemd-resolved\u003C/code> services forward queries for the search domain set in a NetworkManager connection to the DNS server specified in that connection, and forwardes queries to other domains to the connection with the default route. When multiple connections have the same search domain set, \u003Ccode class=\"literal\">dnsmasq\u003C/code> and \u003Ccode class=\"literal\">systemd-resolved\u003C/code> forward queries for this domain to the DNS server set in the connection with the lowest priority value.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Ch5 id=\"default-values-of-dns-priority-parameters_configuring-the-order-of-dns-servers\">Default values of DNS priority parameters\u003C/h5>\u003Cp>\n\t\t\t\tNetworkManager uses the following default values for connections:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">50\u003C/code> for VPN connections\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">100\u003C/code> for other connections\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Ch5 id=\"valid-dns-priority-values_configuring-the-order-of-dns-servers\">Valid DNS priority values:\u003C/h5>\u003Cp>\n\t\t\t\tYou can set both the global default and connection-specific \u003Ccode class=\"literal\">ipv4.dns-priority\u003C/code> and \u003Ccode class=\"literal\">ipv6.dns-priority\u003C/code> parameters to a value between \u003Ccode class=\"literal\">-2147483647\u003C/code> and \u003Ccode class=\"literal\">2147483647\u003C/code>.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA lower value has a higher priority.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tNegative values have the special effect of excluding other configurations with a greater value. For example, if at least one connection with a negative priority value exists, NetworkManager uses only the DNS servers specified in the connection profile with the lowest priority.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf multiple connections have the same DNS priority, NetworkManager prioritizes the DNS in the following order:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tVPN connections\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tConnection with an active default route. The active default route is the default route with the lowest metric.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#using-different-dns-servers-for-different-domains_configuring-and-managing-networking\" title=\"Chapter 24. Using different DNS servers for different domains\">Using different DNS servers for different domains\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"setting-a-networkmanager-wide-default-dns-server-priority-value_configuring-the-order-of-dns-servers\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.2. Setting a NetworkManager-wide default DNS server priority value\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tNetworkManager uses the following DNS priority default values for connections:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">50\u003C/code> for VPN connections\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">100\u003C/code> for other connections\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tYou can override these system-wide defaults with a custom default value for IPv4 and IPv6 connections.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEdit the \u003Ccode class=\"literal\">/etc/NetworkManager/NetworkManager.conf\u003C/code> file:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd the \u003Ccode class=\"literal\">[connection]\u003C/code> section, if it does not exist:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">[connection]\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd the custom default values to the \u003Ccode class=\"literal\">[connection]\u003C/code> section. For example, to set the new default for both IPv4 and IPv6 to \u003Ccode class=\"literal\">200\u003C/code>, add:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">ipv4.dns-priority=200\nipv6.dns-priority=200\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tYou can set the parameters to a value between \u003Ccode class=\"literal\">-2147483647\u003C/code> and \u003Ccode class=\"literal\">2147483647\u003C/code>. Note that setting the parameters to \u003Ccode class=\"literal\">0\u003C/code> enables the built-in defaults (\u003Ccode class=\"literal\">50\u003C/code> for VPN connections and \u003Ccode class=\"literal\">100\u003C/code> for other connections).\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReload the \u003Ccode class=\"literal\">NetworkManager\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl reload NetworkManager\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">NetworkManager.conf(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"setting-the-dns-priority-of-a-networkmanager-connection_configuring-the-order-of-dns-servers\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.3. Setting the DNS priority of a NetworkManager connection\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIf you require a specific order of DNS servers you can set priority values in connection profiles. NetworkManager uses these values to order the servers when the service creates or updates the \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> file.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tNote that setting DNS priorities makes only sense if you have multiple connections with different DNS servers configured. If you have only one connection with multiple DNS servers configured, manually set the DNS servers in the preferred order in the connection profile.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe system has multiple NetworkManager connections configured.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe system either has no \u003Ccode class=\"literal\">dns\u003C/code> parameter set in the \u003Ccode class=\"literal\">/etc/NetworkManager/NetworkManager.conf\u003C/code> file or the parameter is set to \u003Ccode class=\"literal\">default\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Display the available connections:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection show\u003C/strong>\u003C/span>\nNAME           UUID                                  TYPE      DEVICE\nExample_con_1  d17ee488-4665-4de2-b28a-48befab0cd43  ethernet  enp1s0\nExample_con_2  916e4f67-7145-3ffa-9f7b-e7cada8f6bf7  ethernet  enp7s0\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the \u003Ccode class=\"literal\">ipv4.dns-priority\u003C/code> and \u003Ccode class=\"literal\">ipv6.dns-priority\u003C/code> parameters. For example, to set both parameters to \u003Ccode class=\"literal\">10\u003C/code>, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>&lt;connection_name&gt;\u003C/em>\u003C/span> ipv4.dns-priority 10 ipv6.dns-priority 10\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOptional: Repeat the previous step for other connections.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRe-activate the connection you updated:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>&lt;connection_name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the contents of the \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> file to verify that the DNS server order is correct:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /etc/resolv.conf\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"using-different-dns-servers-for-different-domains_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 24. Using different DNS servers for different domains\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tBy default, Red Hat Enterprise Linux (RHEL) sends all DNS requests to the first DNS server specified in the \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> file. If this server does not reply, RHEL uses the next server in this file. In environments where one DNS server cannot resolve all domains, administrators can configure RHEL to send DNS requests for a specific domain to a selected DNS server.\n\t\t\u003C/p>\u003Cp>\n\t\t\tFor example, you connect a server to a Virtual Private Network (VPN), and hosts in the VPN use the \u003Ccode class=\"literal\">example.com\u003C/code> domain. In this case, you can configure RHEL to process DNS queries in the following way:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tSend only DNS requests for \u003Ccode class=\"literal\">example.com\u003C/code> to the DNS server in the VPN network.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tSend all other requests to the DNS server that is configured in the connection profile with the default gateway.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"using-dnsmasq-in-networkmanager-to-send-dns-requests-for-a-specific-domain-to-a-selected-dns-server_using-different-dns-servers-for-different-domains\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.1. Using dnsmasq in NetworkManager to send DNS requests for a specific domain to a selected DNS server\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can configure NetworkManager to start an instance of \u003Ccode class=\"literal\">dnsmasq\u003C/code>. This DNS caching server then listens on port \u003Ccode class=\"literal\">53\u003C/code> on the \u003Ccode class=\"literal\">loopback\u003C/code> device. Consequently, this service is only reachable from the local system and not from the network.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tWith this configuration, NetworkManager adds the \u003Ccode class=\"literal\">nameserver 127.0.0.1\u003C/code> entry to the \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> file, and \u003Ccode class=\"literal\">dnsmasq\u003C/code> dynamically routes DNS requests to the corresponding DNS servers specified in the NetworkManager connection profiles.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe system has multiple NetworkManager connections configured.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA DNS server and search domain are configured in the NetworkManager connection profile that is responsible for resolving a specific domain.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, to ensure that the DNS server specified in a VPN connection resolves queries for the \u003Ccode class=\"literal\">example.com\u003C/code> domain, the VPN connection profile must contain the following settings:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tA DNS server that can resolve \u003Ccode class=\"literal\">example.com\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tA search domain set to \u003Ccode class=\"literal\">example.com\u003C/code> in the \u003Ccode class=\"literal\">ipv4.dns-search\u003C/code> and \u003Ccode class=\"literal\">ipv6.dns-search\u003C/code> parameters\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">dnsmasq\u003C/code> service is not running or configured to listen on a different interface then \u003Ccode class=\"literal\">localhost\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">dnsmasq\u003C/code> package:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install dnsmasq\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEdit the \u003Ccode class=\"literal\">/etc/NetworkManager/NetworkManager.conf\u003C/code> file, and set the following entry in the \u003Ccode class=\"literal\">[main]\u003C/code> section:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">dns=dnsmasq\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReload the \u003Ccode class=\"literal\">NetworkManager\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl reload NetworkManager\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSearch in the \u003Ccode class=\"literal\">systemd\u003C/code> journal of the \u003Ccode class=\"literal\">NetworkManager\u003C/code> unit for which domains the service uses a different DNS server:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>journalctl -xeu NetworkManager\u003C/strong>\u003C/span>\n...\nJun 02 13:30:17 &lt;client_hostname&gt;_ dnsmasq[5298]: using nameserver 198.51.100.7#53 for domain example.com\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">tcpdump\u003C/code> packet sniffer to verify the correct route of DNS requests:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">tcpdump\u003C/code> package:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install tcpdump\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn one terminal, start \u003Ccode class=\"literal\">tcpdump\u003C/code> to capture DNS traffic on all interfaces:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tcpdump -i any port 53\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn a different terminal, resolve host names for a domain for which an exception exists and another domain, for example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>host -t A \u003Cspan class=\"emphasis\">\u003Cem>www.example.com\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>host -t A \u003Cspan class=\"emphasis\">\u003Cem>www.redhat.com\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tVerify in the \u003Ccode class=\"literal\">tcpdump\u003C/code> output that Red Hat Enterprise Linux sends only DNS queries for the \u003Ccode class=\"literal\">example.com\u003C/code> domain to the designated DNS server and through the corresponding interface:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">...\n13:52:42.234533 tun0   Out IP \u003Cspan class=\"emphasis\">\u003Cem>server\u003C/em>\u003C/span>.43534 &gt; \u003Cspan class=\"emphasis\">\u003Cem>198.51.100.7\u003C/em>\u003C/span>.domain: 50121+ A? www.example.com. (33)\n...\n13:52:57.753235 enp1s0 Out IP \u003Cspan class=\"emphasis\">\u003Cem>server\u003C/em>\u003C/span>.40864 &gt; \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1\u003C/em>\u003C/span>.domain: 6906+ A? www.redhat.com. (33)\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRed Hat Enterprise Linux sends the DNS query for \u003Ccode class=\"literal\">www.example.com\u003C/code> to the DNS server on \u003Ccode class=\"literal\">198.51.100.7\u003C/code> and the query for \u003Ccode class=\"literal\">www.redhat.com\u003C/code> to \u003Ccode class=\"literal\">192.0.2.1\u003C/code>.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the \u003Ccode class=\"literal\">nameserver\u003C/code> entry in the \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> file refers to \u003Ccode class=\"literal\">127.0.0.1\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /etc/resolv.conf\u003C/strong>\u003C/span>\nnameserver 127.0.0.1\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the entry is missing, check the \u003Ccode class=\"literal\">dns\u003C/code> parameter in the \u003Ccode class=\"literal\">/etc/NetworkManager/NetworkManager.conf\u003C/code> file.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the \u003Ccode class=\"literal\">dnsmasq\u003C/code> service listens on port \u003Ccode class=\"literal\">53\u003C/code> on the \u003Ccode class=\"literal\">loopback\u003C/code> device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ss -tulpn | grep \"127.0.0.1:53\"\u003C/strong>\u003C/span>\nudp  UNCONN 0  0    127.0.0.1:53   0.0.0.0:*    users:((\"dnsmasq\",pid=7340,fd=18))\ntcp  LISTEN 0  32   127.0.0.1:53   0.0.0.0:*    users:((\"dnsmasq\",pid=7340,fd=19))\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the service does not listen on \u003Ccode class=\"literal\">127.0.0.1:53\u003C/code>, check the journal entries of the \u003Ccode class=\"literal\">NetworkManager\u003C/code> unit:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>journalctl -u NetworkManager\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"using-systemd-resolved-in-networkmanager-to-send-dns-requests-for-a-specific-domain-to-a-selected-dns-server_using-different-dns-servers-for-different-domains\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.2. Using systemd-resolved in NetworkManager to send DNS requests for a specific domain to a selected DNS server\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can configure NetworkManager to start an instance of \u003Ccode class=\"literal\">systemd-resolved\u003C/code>. This DNS stub resolver then listens on port \u003Ccode class=\"literal\">53\u003C/code> on IP address \u003Ccode class=\"literal\">127.0.0.53\u003C/code>. Consequently, this stub resolver is only reachable from the local system and not from the network.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tWith this configuration, NetworkManager adds the \u003Ccode class=\"literal\">nameserver 127.0.0.53\u003C/code> entry to the \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> file, and \u003Ccode class=\"literal\">systemd-resolved\u003C/code> dynamically routes DNS requests to the corresponding DNS servers specified in the NetworkManager connection profiles.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe \u003Ccode class=\"literal\">systemd-resolved\u003C/code> service is provided as a Technology Preview only. Technology Preview features are not supported with Red Hat production Service Level Agreements (SLAs), might not be functionally complete, and Red Hat does not recommend using them for production. These previews provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tSee \u003Ca class=\"link\" href=\"https://access.redhat.com/support/offerings/techpreview\">Technology Preview Features Support Scope\u003C/a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tFor a supported solution, see \u003Ca class=\"link\" href=\"#using-dnsmasq-in-networkmanager-to-send-dns-requests-for-a-specific-domain-to-a-selected-dns-server_using-different-dns-servers-for-different-domains\" title=\"24.1. Using dnsmasq in NetworkManager to send DNS requests for a specific domain to a selected DNS server\">Using dnsmasq in NetworkManager to send DNS requests for a specific domain to a selected DNS server\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe system has multiple NetworkManager connections configured.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA DNS server and search domain are configured in the NetworkManager connection profile that is responsible for resolving a specific domain.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, to ensure that the DNS server specified in a VPN connection resolves queries for the \u003Ccode class=\"literal\">example.com\u003C/code> domain, the VPN connection profile must contain the following settings:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tA DNS server that can resolve \u003Ccode class=\"literal\">example.com\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tA search domain set to \u003Ccode class=\"literal\">example.com\u003C/code> in the \u003Ccode class=\"literal\">ipv4.dns-search\u003C/code> and \u003Ccode class=\"literal\">ipv6.dns-search\u003C/code> parameters\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable and start the \u003Ccode class=\"literal\">systemd-resolved\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl --now enable systemd-resolved\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEdit the \u003Ccode class=\"literal\">/etc/NetworkManager/NetworkManager.conf\u003C/code> file, and set the following entry in the \u003Ccode class=\"literal\">[main]\u003C/code> section:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">dns=systemd-resolved\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReload the \u003Ccode class=\"literal\">NetworkManager\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl reload NetworkManager\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the DNS servers \u003Ccode class=\"literal\">systemd-resolved\u003C/code> uses and for which domains the service uses a different DNS server:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>resolvectl\u003C/strong>\u003C/span>\n...\nLink 2 (\u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>)\n    Current Scopes: DNS\n         Protocols: +DefaultRoute ...\nCurrent DNS Server: \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1\u003C/em>\u003C/span>\n       DNS Servers: \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1\u003C/em>\u003C/span>\n\nLink 3 (\u003Cspan class=\"emphasis\">\u003Cem>tun0\u003C/em>\u003C/span>)\n    Current Scopes: DNS\n         Protocols: -DefaultRoute ...\nCurrent DNS Server: \u003Cspan class=\"emphasis\">\u003Cem>198.51.100.7\u003C/em>\u003C/span>\n       DNS Servers: \u003Cspan class=\"emphasis\">\u003Cem>198.51.100.7\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>203.0.113.19\u003C/em>\u003C/span>\n        DNS Domain: \u003Cspan class=\"emphasis\">\u003Cem>example.com\u003C/em>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe output confirms that \u003Ccode class=\"literal\">systemd-resolved\u003C/code> uses different DNS servers for the \u003Ccode class=\"literal\">example.com\u003C/code> domain.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">tcpdump\u003C/code> packet sniffer to verify the correct route of DNS requests:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">tcpdump\u003C/code> package:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install tcpdump\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn one terminal, start \u003Ccode class=\"literal\">tcpdump\u003C/code> to capture DNS traffic on all interfaces:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tcpdump -i any port 53\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn a different terminal, resolve host names for a domain for which an exception exists and another domain, for example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>host -t A \u003Cspan class=\"emphasis\">\u003Cem>www.example.com\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>host -t A \u003Cspan class=\"emphasis\">\u003Cem>www.redhat.com\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tVerify in the \u003Ccode class=\"literal\">tcpdump\u003C/code> output that Red Hat Enterprise Linux sends only DNS queries for the \u003Ccode class=\"literal\">example.com\u003C/code> domain to the designated DNS server and through the corresponding interface:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">...\n13:52:42.234533 tun0   Out IP \u003Cspan class=\"emphasis\">\u003Cem>server\u003C/em>\u003C/span>.43534 &gt; \u003Cspan class=\"emphasis\">\u003Cem>198.51.100.7\u003C/em>\u003C/span>.domain: 50121+ A? www.example.com. (33)\n...\n13:52:57.753235 enp1s0 Out IP \u003Cspan class=\"emphasis\">\u003Cem>server\u003C/em>\u003C/span>.40864 &gt; \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1\u003C/em>\u003C/span>.domain: 6906+ A? www.redhat.com. (33)\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRed Hat Enterprise Linux sends the DNS query for \u003Ccode class=\"literal\">www.example.com\u003C/code> to the DNS server on \u003Ccode class=\"literal\">198.51.100.7\u003C/code> and the query for \u003Ccode class=\"literal\">www.redhat.com\u003C/code> to \u003Ccode class=\"literal\">192.0.2.1\u003C/code>.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the \u003Ccode class=\"literal\">nameserver\u003C/code> entry in the \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> file refers to \u003Ccode class=\"literal\">127.0.0.53\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /etc/resolv.conf\u003C/strong>\u003C/span>\nnameserver 127.0.0.53\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the entry is missing, check the \u003Ccode class=\"literal\">dns\u003C/code> parameter in the \u003Ccode class=\"literal\">/etc/NetworkManager/NetworkManager.conf\u003C/code> file.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the \u003Ccode class=\"literal\">systemd-resolved\u003C/code> service listens on port \u003Ccode class=\"literal\">53\u003C/code> on the local IP address \u003Ccode class=\"literal\">127.0.0.53\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ss -tulpn | grep \"127.0.0.53\"\u003C/strong>\u003C/span>\nudp  UNCONN 0  0      127.0.0.53%lo:53   0.0.0.0:*    users:((\"systemd-resolve\",pid=1050,fd=12))\ntcp  LISTEN 0  4096   127.0.0.53%lo:53   0.0.0.0:*    users:((\"systemd-resolve\",pid=1050,fd=13))\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the service does not listen on \u003Ccode class=\"literal\">127.0.0.53:53\u003C/code>, check if the \u003Ccode class=\"literal\">systemd-resolved\u003C/code> service is running.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"managing-the-default-gateway-setting_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 25. Managing the default gateway setting\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tThe default gateway is a router that forwards network packets when no other route matches the destination of a packet. In a local network, the default gateway is typically the host that is one hop closer to the internet.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"setting-the-default-gateway-on-an-existing-connection-by-using-nmcli_managing-the-default-gateway-setting\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">25.1. Setting the default gateway on an existing connection by using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIn most situations, administrators set the default gateway when they create a connection. However, you can also set or update the default gateway setting on a previously created connection by using the \u003Ccode class=\"literal\">nmcli\u003C/code> utility.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAt least one static IP address must be configured on the connection on which the default gateway will be set.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf the user is logged in on a physical console, user permissions are sufficient. Otherwise, user must have \u003Ccode class=\"literal\">root\u003C/code> permissions.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the IP addresses of the default gateway:\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo set the IPv4 default gateway, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>&lt;connection_name&gt;\u003C/em>\u003C/span> ipv4.gateway \"\u003Cspan class=\"emphasis\">\u003Cem>&lt;IPv4_gateway_address&gt;\u003C/em>\u003C/span>\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo set the IPv6 default gateway, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>&lt;connection_name&gt;\u003C/em>\u003C/span> ipv6.gateway \"\u003Cspan class=\"emphasis\">\u003Cem>&lt;IPv6_gateway_address&gt;\u003C/em>\u003C/span>\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRestart the network connection for changes to take effect:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>&lt;connection_name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tAll connections currently using this network connection are temporarily interrupted during the restart.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the route is active:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo display the IPv4 default gateway, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -4 route\u003C/strong>\u003C/span>\ndefault via 192.0.2.1 dev \u003Cspan class=\"emphasis\">\u003Cem>example\u003C/em>\u003C/span> proto static metric 100\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo display the IPv6 default gateway, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -6 route\u003C/strong>\u003C/span>\ndefault via 2001:db8:1::1 dev \u003Cspan class=\"emphasis\">\u003Cem>example\u003C/em>\u003C/span> proto static metric 100 pref medium\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"setting-the-default-gateway-on-an-existing-connection-by-using-the-nmcli-interactive-mode_managing-the-default-gateway-setting\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">25.2. Setting the default gateway on an existing connection by using the \u003Ccode class=\"literal\">nmcli\u003C/code> interactive mode\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIn most situations, administrators set the default gateway when they create a connection. However, you can also set or update the default gateway setting on a previously created connection by using the interactive mode of the \u003Ccode class=\"literal\">nmcli\u003C/code> utility.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAt least one static IP address must be configured on the connection on which the default gateway will be set.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf the user is logged in on a physical console, user permissions are sufficient. Otherwise, the user must have \u003Ccode class=\"literal\">root\u003C/code> permissions.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen the \u003Ccode class=\"literal\">nmcli\u003C/code> interactive mode for the required connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection edit \u003Cspan class=\"emphasis\">\u003Cem>&lt;connection_name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the default gateway\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo set the IPv4 default gateway, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">nmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>set ipv4.gateway \"\u003Cspan class=\"emphasis\">\u003Cem>&lt;IPv4_gateway_address&gt;\u003C/em>\u003C/span>\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo set the IPv6 default gateway, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">nmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>set ipv6.gateway \"\u003Cspan class=\"emphasis\">\u003Cem>&lt;IPv6_gateway_address&gt;\u003C/em>\u003C/span>\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Verify that the default gateway was set correctly:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">nmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>print\u003C/strong>\u003C/span>\n...\nipv4.gateway:            \u003Cspan class=\"emphasis\">\u003Cem>&lt;IPv4_gateway_address&gt;\u003C/em>\u003C/span>\n...\nipv6.gateway:            \u003Cspan class=\"emphasis\">\u003Cem>&lt;IPv6_gateway_address&gt;\u003C/em>\u003C/span>\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSave the configuration:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">nmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>save persistent\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRestart the network connection for changes to take effect:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">nmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>activate \u003Cspan class=\"emphasis\">\u003Cem>&lt;connection_name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tAll connections currently using this network connection are temporarily interrupted during the restart.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLeave the \u003Ccode class=\"literal\">nmcli\u003C/code> interactive mode:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">nmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>quit\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the route is active:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo display the IPv4 default gateway, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -4 route\u003C/strong>\u003C/span>\ndefault via 192.0.2.1 dev \u003Cspan class=\"emphasis\">\u003Cem>example\u003C/em>\u003C/span> proto static metric 100\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo display the IPv6 default gateway, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -6 route\u003C/strong>\u003C/span>\ndefault via 2001:db8:1::1 dev \u003Cspan class=\"emphasis\">\u003Cem>example\u003C/em>\u003C/span> proto static metric 100 pref medium\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"setting-the-default-gateway-on-an-existing-connection-by-using-nm-connection-editor_managing-the-default-gateway-setting\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">25.3. Setting the default gateway on an existing connection by using nm-connection-editor\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIn most situations, administrators set the default gateway when they create a connection. However, you can also set or update the default gateway setting on a previously created connection using the \u003Ccode class=\"literal\">nm-connection-editor\u003C/code> application.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAt least one static IP address must be configured on the connection on which the default gateway will be set.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen a terminal, and enter \u003Ccode class=\"literal\">nm-connection-editor\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nm-connection-editor\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the connection to modify, and click the gear wheel icon to edit the existing connection.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the IPv4 default gateway. For example, to set the IPv4 address of the default gateway on the connection to \u003Ccode class=\"literal\">192.0.2.1\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOpen the \u003Ccode class=\"literal\">IPv4 Settings\u003C/code> tab.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnter the address in the \u003Ccode class=\"literal\">gateway\u003C/code> field next to the IP range the gateway’s address is within:\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"inlinemediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/56226401e835521d75a086ae74514fd6/set-default-gw-in-nm-connection-editor_ipv4.png\" alt=\"set default gw in nm connection editor ipv4\"/>\u003C/span>\n\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the IPv6 default gateway. For example, to set the IPv6 address of the default gateway on the connection to \u003Ccode class=\"literal\">2001:db8:1::1\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOpen the \u003Ccode class=\"literal\">IPv6\u003C/code> tab.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnter the address in the \u003Ccode class=\"literal\">gateway\u003C/code> field next to the IP range the gateway’s address is within:\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"inlinemediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/1fef17a7c651e34d4b1a45d450d3a218/set-default-gw-in-nm-connection-editor_ipv6.png\" alt=\"set default gw in nm connection editor ipv6\"/>\u003C/span>\n\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">OK\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Save\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRestart the network connection for changes to take effect. For example, to restart the \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>example\u003C/em>\u003C/span>\u003C/code> connection using the command line:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>example\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tAll connections currently using this network connection are temporarily interrupted during the restart.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the route is active.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display the IPv4 default gateway:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -4 route\u003C/strong>\u003C/span>\ndefault via 192.0.2.1 dev \u003Cspan class=\"emphasis\">\u003Cem>example\u003C/em>\u003C/span> proto static metric 100\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display the IPv6 default gateway:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -6 route\u003C/strong>\u003C/span>\ndefault via 2001:db8:1::1 dev \u003Cspan class=\"emphasis\">\u003Cem>example\u003C/em>\u003C/span> proto static metric 100 pref medium\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-an-ethernet-connection-by-using-nm-connection-editor_configuring-an-ethernet-connection\" title=\"2.5. Configuring an Ethernet connection by using nm-connection-editor\">Configuring an Ethernet connection by using nm-connection-editor\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"setting-the-default-gateway-on-an-existing-connection-by-using-control-center_managing-the-default-gateway-setting\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">25.4. Setting the default gateway on an existing connection by using control-center\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIn most situations, administrators set the default gateway when they create a connection. However, you can also set or update the default gateway setting on a previously created connection using the \u003Ccode class=\"literal\">control-center\u003C/code> application.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAt least one static IP address must be configured on the connection on which the default gateway will be set.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe network configuration of the connection is open in the \u003Ccode class=\"literal\">control-center\u003C/code> application.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the IPv4 default gateway. For example, to set the IPv4 address of the default gateway on the connection to \u003Ccode class=\"literal\">192.0.2.1\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOpen the \u003Ccode class=\"literal\">IPv4\u003C/code> tab.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnter the address in the \u003Ccode class=\"literal\">gateway\u003C/code> field next to the IP range the gateway’s address is within:\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"inlinemediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/96a6115b9e587e4c1c9441214367b891/set-default-gw-in-control-center_ipv4.png\" alt=\"set default gw in control center ipv4\"/>\u003C/span>\n\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the IPv6 default gateway. For example, to set the IPv6 address of the default gateway on the connection to \u003Ccode class=\"literal\">2001:db8:1::1\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOpen the \u003Ccode class=\"literal\">IPv6\u003C/code> tab.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnter the address in the \u003Ccode class=\"literal\">gateway\u003C/code> field next to the IP range the gateway’s address is within:\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"inlinemediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/fb0f4c495f08cecf8226ac2424fa8bf3/set-default-gw-in-control-center_ipv6.png\" alt=\"set default gw in control center ipv6\"/>\u003C/span>\n\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Apply\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tBack in the \u003Ccode class=\"literal\">Network\u003C/code> window, disable and re-enable the connection by switching the button for the connection to \u003Cspan class=\"guibutton\">Off\u003C/span> and back to \u003Cspan class=\"guibutton\">On\u003C/span> for changes to take effect.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tAll connections currently using this network connection are temporarily interrupted during the restart.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the route is active.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display the IPv4 default gateway:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ip -4 route\u003C/strong>\u003C/span>\ndefault via 192.0.2.1 dev \u003Cspan class=\"emphasis\">\u003Cem>example\u003C/em>\u003C/span> proto static metric 100\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display the IPv6 default gateway:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ip -6 route\u003C/strong>\u003C/span>\ndefault via 2001:db8:1::1 dev \u003Cspan class=\"emphasis\">\u003Cem>example\u003C/em>\u003C/span> proto static metric 100 pref medium\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-an-ethernet-connection-by-using-nm-connection-editor_configuring-an-ethernet-connection\" title=\"2.5. Configuring an Ethernet connection by using nm-connection-editor\">Configuring an Ethernet connection by using control-center\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_setting-the-default-gateway-on-an-existing-connection-by-using-nmstatectl_managing-the-default-gateway-setting\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">25.5. Setting the default gateway on an existing connection by using \u003Ccode class=\"literal\">nmstatectl\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIn most situations, administrators set the default gateway when they create a connection. However, you can also set or update the default gateway setting on a previously created connection by using the \u003Ccode class=\"literal\">nmstatectl\u003C/code> utility.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tUse the \u003Ccode class=\"literal\">nmstatectl\u003C/code> utility to set the default gateway through the Nmstate API. The Nmstate API ensures that, after setting the configuration, the result matches the configuration file. If anything fails, \u003Ccode class=\"literal\">nmstatectl\u003C/code> automatically rolls back the changes to avoid leaving the system in an incorrect state.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAt least one static IP address must be configured on the connection on which the default gateway will be set.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">enp1s0\u003C/code> interface is configured, and the IP address of the default gateway is within the subnet of the IP configuration of this interface.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">nmstate\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a YAML file, for example \u003Ccode class=\"literal\">~/set-default-gateway.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\nroutes:\n  config:\n  - destination: 0.0.0.0/0\n    next-hop-address: 192.0.2.1\n    next-hop-interface: enp1s0\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThese settings define \u003Ccode class=\"literal\">192.0.2.1\u003C/code> as the default gateway, and the default gateway is reachable through the \u003Ccode class=\"literal\">enp1s0\u003C/code> interface.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tApply the settings to the system:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl apply ~/set-default-gateway.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nmstatectl(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/nmstate/examples/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_setting-the-default-gateway-on-an-existing-connection-by-using-the-network-rhel-system-role_managing-the-default-gateway-setting\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">25.6. Setting the default gateway on an existing connection by using the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tA host forwards a network packet to its default gateway if the packet’s destination can neither be reached through the directly-connected networks nor through any of the routes configured on the host. To configure the default gateway of a host, set it in the NetworkManager connection profile of the interface that is connected to the same network as the default gateway. By using Ansible and the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIn most situations, administrators set the default gateway when they create a connection. However, you can also set or update the default gateway setting on a previously-created connection.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tYou cannot use the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role to update only specific values in an existing connection profile. The role ensures that a connection profile exactly matches the settings in a playbook. If a connection profile with the same name already exists, the role applies the settings from the playbook and resets all other settings in the profile to their defaults. To prevent resetting values, always specify the whole configuration of the network connection profile in the playbook, including the settings that you do not want to change.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles\">You have prepared the control node and the managed nodes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in to the control node as a user who can run playbooks on the managed nodes.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe account you use to connect to the managed nodes has \u003Ccode class=\"literal\">sudo\u003C/code> permissions on them.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a playbook file, for example \u003Ccode class=\"literal\">~/playbook.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\n- name: Configure the network\n  hosts: managed-node-01.example.com\n  tasks:\n    - name: Ethernet connection profile with static IP address settings\n      ansible.builtin.include_role:\n        name: rhel-system-roles.network\n      vars:\n        network_connections:\n          - name: enp1s0\n            type: ethernet\n            autoconnect: yes\n            ip:\n              address:\n                - 198.51.100.20/24\n                - 2001:db8:1::1/64\n              \u003Cspan class=\"strong strong\">\u003Cstrong>gateway4: 198.51.100.254\u003C/strong>\u003C/span>\n              \u003Cspan class=\"strong strong\">\u003Cstrong>gateway6: 2001:db8:1::fffe\u003C/strong>\u003C/span>\n              dns:\n                - 198.51.100.200\n                - 2001:db8:1::ffbb\n              dns_search:\n                - example.com\n            state: up\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details about all variables used in the playbook, see the \u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file on the control node.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tValidate the playbook syntax:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --syntax-check ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that this command only validates the syntax and does not protect against a wrong but valid configuration.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the playbook:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tQuery the Ansible facts of the managed node and verify the active network settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ansible managed-node-01.example.com -m ansible.builtin.setup\u003C/strong>\u003C/span>\n...\n        \"ansible_default_ipv4\": {\n\t    ...\n            \"gateway\": \"198.51.100.254\",\n            \"interface\": \"enp1s0\",\n\t    ...\n        },\n        \"ansible_default_ipv6\": {\n\t    ...\n            \"gateway\": \"2001:db8:1::fffe\",\n            \"interface\": \"enp1s0\",\n\t    ...\n\t}\n...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/rhel-system-roles/network/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"con_how-networkmanager-manages-multiple-default-gateways_managing-the-default-gateway-setting\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">25.7. How NetworkManager manages multiple default gateways\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIn certain situations, for example for fallback reasons, you set multiple default gateways on a host. However, to avoid asynchronous routing issues, each default gateway of the same protocol requires a separate metric value. Note that RHEL only uses the connection to the default gateway that has the lowest metric set.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can set the metric for both the IPv4 and IPv6 gateway of a connection using the following command:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>&lt;connection_name&gt;\u003C/em>\u003C/span> ipv4.route-metric &lt;value&gt; ipv6.route-metric &lt;value&gt;\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tDo not set the same metric value for the same protocol in multiple connection profiles to avoid routing issues.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tIf you set a default gateway without a metric value, NetworkManager automatically sets the metric value based on the interface type. For that, NetworkManager assigns the default value of this network type to the first connection that is activated, and sets an incremented value to each other connection of the same type in the order they are activated. For example, if two Ethernet connections with a default gateway exist, NetworkManager sets a metric of \u003Ccode class=\"literal\">100\u003C/code> on the route to the default gateway of the connection that you activate first. For the second connection, NetworkManager sets \u003Ccode class=\"literal\">101\u003C/code>.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe following is an overview of frequently-used network types and their default metrics:\n\t\t\t\u003C/p>\u003Crh-table>\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccolgroup>\u003Ccol style=\"width: 50%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 50%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140053167159856\" scope=\"col\">Connection type\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140053167158768\" scope=\"col\">Default metric value\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053167159856\"> \u003Cp>\n\t\t\t\t\t\t\t\tVPN\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053167158768\"> \u003Cp>\n\t\t\t\t\t\t\t\t50\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053167159856\"> \u003Cp>\n\t\t\t\t\t\t\t\tEthernet\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053167158768\"> \u003Cp>\n\t\t\t\t\t\t\t\t100\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053167159856\"> \u003Cp>\n\t\t\t\t\t\t\t\tMACsec\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053167158768\"> \u003Cp>\n\t\t\t\t\t\t\t\t125\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053167159856\"> \u003Cp>\n\t\t\t\t\t\t\t\tInfiniBand\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053167158768\"> \u003Cp>\n\t\t\t\t\t\t\t\t150\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053167159856\"> \u003Cp>\n\t\t\t\t\t\t\t\tBond\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053167158768\"> \u003Cp>\n\t\t\t\t\t\t\t\t300\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053167159856\"> \u003Cp>\n\t\t\t\t\t\t\t\tTeam\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053167158768\"> \u003Cp>\n\t\t\t\t\t\t\t\t350\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053167159856\"> \u003Cp>\n\t\t\t\t\t\t\t\tVLAN\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053167158768\"> \u003Cp>\n\t\t\t\t\t\t\t\t400\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053167159856\"> \u003Cp>\n\t\t\t\t\t\t\t\tBridge\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053167158768\"> \u003Cp>\n\t\t\t\t\t\t\t\t425\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053167159856\"> \u003Cp>\n\t\t\t\t\t\t\t\tTUN\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053167158768\"> \u003Cp>\n\t\t\t\t\t\t\t\t450\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053167159856\"> \u003Cp>\n\t\t\t\t\t\t\t\tWi-Fi\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053167158768\"> \u003Cp>\n\t\t\t\t\t\t\t\t600\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053167159856\"> \u003Cp>\n\t\t\t\t\t\t\t\tIP tunnel\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053167158768\"> \u003Cp>\n\t\t\t\t\t\t\t\t675\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-policy-based-routing-to-define-alternative-routes_configuring-and-managing-networking\" title=\"Chapter 27. Configuring policy-based routing to define alternative routes\">Configuring policy-based routing to define alternative routes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-networkmanager-to-avoid-using-a-specific-profile-to-provide-a-default-gateway_managing-the-default-gateway-setting\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">25.8. Configuring NetworkManager to avoid using a specific profile to provide a default gateway\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can configure that NetworkManager never uses a specific profile to provide the default gateway. Follow this procedure for connection profiles that are not connected to the default gateway.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe NetworkManager connection profile for the connection that is not connected to the default gateway exists.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the connection uses a dynamic IP configuration, configure that NetworkManager does not use the connection as the default route for IPv4 and IPv6 connections:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>&lt;connection_name&gt;\u003C/em>\u003C/span> ipv4.never-default yes ipv6.never-default yes\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that setting \u003Ccode class=\"literal\">ipv4.never-default\u003C/code> and \u003Ccode class=\"literal\">ipv6.never-default\u003C/code> to \u003Ccode class=\"literal\">yes\u003C/code>, automatically removes the default gateway’s IP address for the corresponding protocol from the connection profile.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tActivate the connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>&lt;connection_name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ip -4 route\u003C/code> and \u003Ccode class=\"literal\">ip -6 route\u003C/code> commands to verify that RHEL does not use the network interface for the default route for the IPv4 and IPv6 protocol.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_fixing-unexpected-routing-behavior-due-to-multiple-default-gateways_managing-the-default-gateway-setting\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">25.9. Fixing unexpected routing behavior due to multiple default gateways\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThere are only a few scenarios, such as when using Multipath TCP, in which you require multiple default gateways on a host. In most cases, you configure only a single default gateway to avoid unexpected routing behavior or asynchronous routing issues.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tTo route traffic to different internet providers, use policy-based routing instead of multiple default gateways.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe host uses NetworkManager to manage network connections, which is the default.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe host has multiple network interfaces.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe host has multiple default gateways configured.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the routing table:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tFor IPv4, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -4 route\u003C/strong>\u003C/span>\ndefault via 192.0.2.1 dev enp1s0 proto static metric 101\ndefault via 198.51.100.1 dev enp7s0 proto static metric 102\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tFor IPv6, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -6 route\u003C/strong>\u003C/span>\ndefault via 2001:db8:1::1 dev enp1s0 proto static metric 101 pref medium\ndefault via 2001:db8:2::1 dev enp7s0 proto static metric 102 pref medium\n...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEntries starting with \u003Ccode class=\"literal\">default\u003C/code> indicate a default route. Note the interface names of these entries displayed next to \u003Ccode class=\"literal\">dev\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the following commands to display the NetworkManager connections that use the interfaces you identified in the previous step:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli -f GENERAL.CONNECTION,IP4.GATEWAY,IP6.GATEWAY device show enp1s0\u003C/strong>\u003C/span>\nGENERAL.CONNECTION:      Corporate-LAN\nIP4.GATEWAY:             192.0.2.1\nIP6.GATEWAY:             2001:db8:1::1\n\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli -f GENERAL.CONNECTION,IP4.GATEWAY,IP6.GATEWAY device show enp7s0\u003C/strong>\u003C/span>\nGENERAL.CONNECTION:      Internet-Provider\nIP4.GATEWAY:             198.51.100.1\nIP6.GATEWAY:             2001:db8:2::1\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn these examples, the profiles named \u003Ccode class=\"literal\">Corporate-LAN\u003C/code> and \u003Ccode class=\"literal\">Internet-Provider\u003C/code> have the default gateways set. Because, in a local network, the default gateway is typically the host that is one hop closer to the internet, the rest of this procedure assumes that the default gateways in the \u003Ccode class=\"literal\">Corporate-LAN\u003C/code> are incorrect.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure that NetworkManager does not use the \u003Ccode class=\"literal\">Corporate-LAN\u003C/code> connection as the default route for IPv4 and IPv6 connections:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify Corporate-LAN ipv4.never-default yes ipv6.never-default yes\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that setting \u003Ccode class=\"literal\">ipv4.never-default\u003C/code> and \u003Ccode class=\"literal\">ipv6.never-default\u003C/code> to \u003Ccode class=\"literal\">yes\u003C/code>, automatically removes the default gateway’s IP address for the corresponding protocol from the connection profile.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tActivate the \u003Ccode class=\"literal\">Corporate-LAN\u003C/code> connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up Corporate-LAN\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv4 and IPv6 routing tables and verify that only one default gateway is available for each protocol:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tFor IPv4, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -4 route\u003C/strong>\u003C/span>\ndefault via 192.0.2.1 dev enp1s0 proto static metric 101\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tFor IPv6, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -6 route\u003C/strong>\u003C/span>\ndefault via 2001:db8:1::1 dev enp1s0 proto static metric 101 pref medium\n...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-policy-based-routing-to-define-alternative-routes_configuring-and-managing-networking\" title=\"Chapter 27. Configuring policy-based routing to define alternative routes\">Configuring policy-based routing to define alternative routes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-static-routes_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 26. Configuring a static route\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tRouting ensures that you can send and receive traffic between mutually-connected networks. In larger environments, administrators typically configure services so that routers can dynamically learn about other routers. In smaller environments, administrators often configure static routes to ensure that traffic can reach from one network to the next.\n\t\t\u003C/p>\u003Cp>\n\t\t\tYou need static routes to achieve a functioning communication among multiple networks if all of these conditions apply:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tThe traffic has to pass multiple networks.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tThe exclusive traffic flow through the default gateways is not sufficient.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tThe \u003Ca class=\"link\" href=\"#ref_example-of-a-network-that-requires-static-routes_configuring-static-routes\" title=\"26.1. Example of a network that requires static routes\">Example of a network that requires static routes\u003C/a> section describes scenarios and how the traffic flows between different networks when you do not configure static routes.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"ref_example-of-a-network-that-requires-static-routes_configuring-static-routes\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">26.1. Example of a network that requires static routes\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou require static routes in this example because not all IP networks are directly connected through one router. Without the static routes, some networks cannot communicate with each other. Additionally, traffic from some networks flows only in one direction.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe network topology in this example is artificial and only used to explain the concept of static routing. It is not a recommended topology in production environments.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tFor a functioning communication among all networks in this example, configure a static route to Raleigh (\u003Ccode class=\"literal\">198.51.100.0/24\u003C/code>) with next the hop Router 2 (\u003Ccode class=\"literal\">203.0.113.10\u003C/code>). The IP address of the next hop is the one of Router 2 in the data center network (\u003Ccode class=\"literal\">203.0.113.0/24\u003C/code>).\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can configure the static route as follows:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor a simplified configuration, set this static route only on Router 1. However, this increases the traffic on Router 1 because hosts from the data center (\u003Ccode class=\"literal\">203.0.113.0/24\u003C/code>) send traffic to Raleigh (\u003Ccode class=\"literal\">198.51.100.0/24\u003C/code>) always through Router 1 to Router 2.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor a more complex configuration, configure this static route on all hosts in the data center (\u003Ccode class=\"literal\">203.0.113.0/24\u003C/code>). All hosts in this subnet then send traffic directly to Router 2 (\u003Ccode class=\"literal\">203.0.113.10\u003C/code>) that is closer to Raleigh (\u003Ccode class=\"literal\">198.51.100.0/24\u003C/code>).\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tFor more details between which networks traffic flows or not, see the explanations below the diagram.\n\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/723cecf0994423cbfbdf04daff0df7ea/routing-example.png\" alt=\"routing example\"/>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>In case that the required static routes are not configured\u003C/strong>\u003C/span>, the following are the situations in which the communication works and when it does not:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tHosts in the Berlin network (\u003Ccode class=\"literal\">192.0.2.0/24\u003C/code>):\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tCan communicate with other hosts in the same subnet because they are directly connected.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tCan communicate with the internet because Router 1 is in the Berlin network (\u003Ccode class=\"literal\">192.0.2.0/24\u003C/code>) and has a default gateway, which leads to the internet.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tCan communicate with the data center network (\u003Ccode class=\"literal\">203.0.113.0/24\u003C/code>) because Router 1 has interfaces in both the Berlin (\u003Ccode class=\"literal\">192.0.2.0/24\u003C/code>) and the data center (\u003Ccode class=\"literal\">203.0.113.0/24\u003C/code>) networks.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tCannot communicate with the Raleigh network (\u003Ccode class=\"literal\">198.51.100.0/24\u003C/code>) because Router 1 has no interface in this network. Therefore, Router 1 sends the traffic to its own default gateway (internet).\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tHosts in the data center network (\u003Ccode class=\"literal\">203.0.113.0/24\u003C/code>):\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tCan communicate with other hosts in the same subnet because they are directly connected.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tCan communicate with the internet because they have their default gateway set to Router 1, and Router 1 has interfaces in both networks, the data center (\u003Ccode class=\"literal\">203.0.113.0/24\u003C/code>) and to the internet.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tCan communicate with the Berlin network (\u003Ccode class=\"literal\">192.0.2.0/24\u003C/code>) because they have their default gateway set to Router 1, and Router 1 has interfaces in both the data center (\u003Ccode class=\"literal\">203.0.113.0/24\u003C/code>) and the Berlin (\u003Ccode class=\"literal\">192.0.2.0/24\u003C/code>) networks.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tCannot communicate with the Raleigh network (\u003Ccode class=\"literal\">198.51.100.0/24\u003C/code>) because the data center network has no interface in this network. Therefore, hosts in the data center (\u003Ccode class=\"literal\">203.0.113.0/24\u003C/code>) send traffic to their default gateway (Router 1). Router 1 also has no interface in the Raleigh network (\u003Ccode class=\"literal\">198.51.100.0/24\u003C/code>) and, as a result, Router 1 sends this traffic to its own default gateway (internet).\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tHosts in the Raleigh network (\u003Ccode class=\"literal\">198.51.100.0/24\u003C/code>):\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tCan communicate with other hosts in the same subnet because they are directly connected.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tCannot communicate with hosts on the internet. Router 2 sends the traffic to Router 1 because of the default gateway settings. The actual behavior of Router 1 depends on the reverse path filter (\u003Ccode class=\"literal\">rp_filter\u003C/code>) system control (\u003Ccode class=\"literal\">sysctl\u003C/code>) setting. By default on RHEL, Router 1 drops the outgoing traffic instead of routing it to the internet. However, regardless of the configured behavior, communication is not possible without the static route.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tCannot communicate with the data center network (\u003Ccode class=\"literal\">203.0.113.0/24\u003C/code>). The outgoing traffic reaches the destination through Router 2 because of the default gateway setting. However, replies to packets do not reach the sender because hosts in the data center network (\u003Ccode class=\"literal\">203.0.113.0/24\u003C/code>) send replies to their default gateway (Router 1). Router 1 then sends the traffic to the internet.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tCannot communicate with the Berlin network (\u003Ccode class=\"literal\">192.0.2.0/24\u003C/code>). Router 2 sends the traffic to Router 1 because of the default gateway settings. The actual behavior of Router 1 depends on the \u003Ccode class=\"literal\">rp_filter\u003C/code> \u003Ccode class=\"literal\">sysctl\u003C/code> setting. By default on RHEL, Router 1 drops the outgoing traffic instead of sending it to the Berlin network (\u003Ccode class=\"literal\">192.0.2.0/24\u003C/code>). However, regardless of the configured behavior, communication is not possible without the static route.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIn addition to configuring the static routes, you must enable IP forwarding on both routers.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/32261\">Why cannot a server be pinged if net.ipv4.conf.all.rp_filter is set on the server?\u003C/a> (Red Hat Knowledgebase)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/2854141\">Enabling IP forwarding\u003C/a> (Red Hat Knowledgebase)\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"how-to-use-the-nmcli-command-to-configure-a-static-route_configuring-static-routes\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">26.2. How to use the \u003Ccode class=\"literal\">nmcli\u003C/code> utility to configure a static route\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo configure a static route, use the \u003Ccode class=\"literal\">nmcli\u003C/code> utility with the following syntax:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>connection_name\u003C/em>\u003C/span> ipv4.routes \"\u003Cspan class=\"emphasis\">\u003Cem>ip\u003C/em>\u003C/span>[/\u003Cspan class=\"emphasis\">\u003Cem>prefix\u003C/em>\u003C/span>] [\u003Cspan class=\"emphasis\">\u003Cem>next_hop\u003C/em>\u003C/span>] [\u003Cspan class=\"emphasis\">\u003Cem>metric\u003C/em>\u003C/span>] [\u003Cspan class=\"emphasis\">\u003Cem>attribute\u003C/em>\u003C/span>=\u003Cspan class=\"emphasis\">\u003Cem>value\u003C/em>\u003C/span>] [\u003Cspan class=\"emphasis\">\u003Cem>attribute\u003C/em>\u003C/span>=\u003Cspan class=\"emphasis\">\u003Cem>value\u003C/em>\u003C/span>] ...\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp>\n\t\t\t\tThe command supports the following route attributes:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">cwnd=\u003Cspan class=\"emphasis\">\u003Cem>n\u003C/em>\u003C/span>\u003C/code>: Sets the congestion window (CWND) size, defined in number of packets.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">lock-cwnd=true|false\u003C/code>: Defines whether or not the kernel can update the CWND value.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">lock-mtu=true|false\u003C/code>: Defines whether or not the kernel can update the MTU to path MTU discovery.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">lock-window=true|false\u003C/code>: Defines whether or not the kernel can update the maximum window size for TCP packets.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">mtu=\u003Cspan class=\"emphasis\">\u003Cem>&lt;mtu_value&gt;\u003C/em>\u003C/span>\u003C/code>: Sets the maximum transfer unit (MTU) to use along the path to the destination.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">onlink=true|false\u003C/code>: Defines whether the next hop is directly attached to this link even if it does not match any interface prefix.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">scope=\u003Cspan class=\"emphasis\">\u003Cem>&lt;scope&gt;\u003C/em>\u003C/span>\u003C/code>: For an IPv4 route, this attribute sets the scope of the destinations covered by the route prefix. Set the value as an integer (0-255).\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">src=\u003Cspan class=\"emphasis\">\u003Cem>&lt;source_address&gt;\u003C/em>\u003C/span>\u003C/code>: Sets the source address to prefer when sending traffic to the destinations covered by the route prefix.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">table=\u003Cspan class=\"emphasis\">\u003Cem>&lt;table_id&gt;\u003C/em>\u003C/span>\u003C/code>: Sets the ID of the table the route should be added to. If you omit this parameter, NetworkManager uses the \u003Ccode class=\"literal\">main\u003C/code> table.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">tos=\u003Cspan class=\"emphasis\">\u003Cem>&lt;type_of_service_key&gt;\u003C/em>\u003C/span>\u003C/code>: Sets the type of service (TOS) key. Set the value as an integer (0-255).\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">type=\u003Cspan class=\"emphasis\">\u003Cem>&lt;route_type&gt;\u003C/em>\u003C/span>\u003C/code>: Sets the route type. NetworkManager supports the \u003Ccode class=\"literal\">unicast\u003C/code>, \u003Ccode class=\"literal\">local\u003C/code>, \u003Ccode class=\"literal\">blackhole\u003C/code>, \u003Ccode class=\"literal\">unreachable\u003C/code>, \u003Ccode class=\"literal\">prohibit\u003C/code>, and \u003Ccode class=\"literal\">throw\u003C/code> route types. The default is \u003Ccode class=\"literal\">unicast\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">window=\u003Cspan class=\"emphasis\">\u003Cem>&lt;window_size&gt;\u003C/em>\u003C/span>\u003C/code>: Sets the maximal window size for TCP to advertise to these destinations, measured in bytes.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIf you use the \u003Ccode class=\"literal\">ipv4.routes\u003C/code> option without a preceding \u003Ccode class=\"literal\">+\u003C/code> sign, \u003Ccode class=\"literal\">nmcli\u003C/code> overrides all current settings of this parameter.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo create an additional route, enter:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>connection_name\u003C/em>\u003C/span> +ipv4.routes \"\u003Cspan class=\"emphasis\">\u003Cem>&lt;route&gt;\u003C/em>\u003C/span>\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo remove a specific route, enter:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>connection_name\u003C/em>\u003C/span> -ipv4.routes \"\u003Cspan class=\"emphasis\">\u003Cem>&lt;route&gt;\u003C/em>\u003C/span>\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-static-route-by-using-nmcli_configuring-static-routes\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">26.3. Configuring a static route by using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can add a static route to an existing NetworkManager connection profile using the \u003Ccode class=\"literal\">nmcli connection modify\u003C/code> command.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe procedure below configures the following routes:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAn IPv4 route to the remote \u003Ccode class=\"literal\">198.51.100.0/24\u003C/code> network. The corresponding gateway with the IP address \u003Ccode class=\"literal\">192.0.2.10\u003C/code> is reachable through the \u003Ccode class=\"literal\">LAN\u003C/code> connection profile.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAn IPv6 route to the remote \u003Ccode class=\"literal\">2001:db8:2::/64\u003C/code> network. The corresponding gateway with the IP address \u003Ccode class=\"literal\">2001:db8:1::10\u003C/code> is reachable through the \u003Ccode class=\"literal\">LAN\u003C/code> connection profile.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">LAN\u003C/code> connection profile exists and it configures this host to be in the same IP subnet as the gateways.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the static IPv4 route to the \u003Ccode class=\"literal\">LAN\u003C/code> connection profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify LAN +ipv4.routes \"198.51.100.0/24 192.0.2.10\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo set multiple routes in one step, pass the individual routes comma-separated to the command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>&lt;connection_profile&gt;\u003C/em>\u003C/span> +ipv4.routes \"\u003Cspan class=\"emphasis\">\u003Cem>&lt;remote_network_1&gt;\u003C/em>\u003C/span>/\u003Cspan class=\"emphasis\">\u003Cem>&lt;subnet_mask_1&gt;\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>&lt;gateway_1&gt;\u003C/em>\u003C/span>, \u003Cspan class=\"emphasis\">\u003Cem>&lt;remote_network_n&gt;\u003C/em>\u003C/span>/\u003Cspan class=\"emphasis\">\u003Cem>&lt;subnet_mask_n&gt;\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>&lt;gateway_n&gt;\u003C/em>\u003C/span>, ...\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the static IPv6 route to the \u003Ccode class=\"literal\">LAN\u003C/code> connection profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify LAN +ipv6.routes \"2001:db8:2::/64 2001:db8:1::10\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRe-activate the connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up LAN\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv4 routes:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -4 route\u003C/strong>\u003C/span>\n...\n198.51.100.0/24 via 192.0.2.10 dev enp1s0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv6 routes:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -6 route\u003C/strong>\u003C/span>\n...\n2001:db8:2::/64 via 2001:db8:1::10 dev enp1s0 metric 1024 pref medium\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-static-route-by-using-nmtui_configuring-static-routes\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">26.4. Configuring a static route by using \u003Ccode class=\"literal\">nmtui\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">nmtui\u003C/code> application provides a text-based user interface for NetworkManager. You can use \u003Ccode class=\"literal\">nmtui\u003C/code> to configure static routes on a host without a graphical interface.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor example, the procedure below adds a route to the \u003Ccode class=\"literal\">192.0.2.0/24\u003C/code> network that uses the gateway running on \u003Ccode class=\"literal\">198.51.100.1\u003C/code>, which is reachable through an existing connection profile.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIn \u003Ccode class=\"literal\">nmtui\u003C/code>:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tNavigate by using the cursor keys.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tPress a button by selecting it and hitting \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tSelect and clear checkboxes by using \u003Ckbd class=\"keycap\">Space\u003C/kbd>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe network is configured.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe gateway for the static route must be directly reachable on the interface.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf the user is logged in on a physical console, user permissions are sufficient. Otherwise, the command requires root permissions.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart \u003Ccode class=\"literal\">nmtui\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmtui\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Cspan class=\"strong strong\">\u003Cstrong>Edit a connection\u003C/strong>\u003C/span>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the connection profile through which you can reach the next hop to the destination network, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tDepending on whether it is an IPv4 or IPv6 route, press the \u003Cspan class=\"strong strong\">\u003Cstrong>Show\u003C/strong>\u003C/span> button next to the protocol’s configuration area.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tPress the \u003Cspan class=\"strong strong\">\u003Cstrong>Edit\u003C/strong>\u003C/span> button next to \u003Cspan class=\"strong strong\">\u003Cstrong>Routing\u003C/strong>\u003C/span>. This opens a new window where you configure static routes:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tPress the \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span> button and fill in:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tThe destination network, including the prefix in Classless Inter-Domain Routing (CIDR) format\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tThe IP address of the next hop\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tA metric value, if you add multiple routes to the same network and want to prioritize the routes by efficiency\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tRepeat the previous step for every route you want to add and that is reachable through this connection profile.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tPress the \u003Cspan class=\"strong strong\">\u003Cstrong>OK\u003C/strong>\u003C/span> button to return to the window with the connection settings.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"figure\" id=\"idm140053159836704\">\u003Cp class=\"title\">\u003Cstrong>Figure 26.1. Example of a static route without metric\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/e91ddea1baa3c92192eab56b58293aee/nmtui-add-static-route.png\" alt=\"nmtui add static route\"/>\u003C/div>\u003C/div>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress the OK button to return to the \u003Ccode class=\"literal\">nmtui\u003C/code> main menu.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Cspan class=\"strong strong\">\u003Cstrong>Activate a connection\u003C/strong>\u003C/span> and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSelect the connection profile that you edited, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd> twice to deactivate and activate it again.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tSkip this step if you run \u003Ccode class=\"literal\">nmtui\u003C/code> over a remote connection, such as SSH, that uses the connection profile you want to reactivate. In this case, if you would deactivate it in \u003Ccode class=\"literal\">nmtui\u003C/code>, the connection is terminated and, consequently, you cannot activate it again. To avoid this problem, use the \u003Ccode class=\"literal\">nmcli connection \u003Cspan class=\"emphasis\">\u003Cem>&lt;connection_profile&gt;\u003C/em>\u003C/span> up\u003C/code> command to reactivate the connection in the mentioned scenario.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress the \u003Cspan class=\"strong strong\">\u003Cstrong>Back\u003C/strong>\u003C/span> button to return to the main menu.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect \u003Cspan class=\"strong strong\">\u003Cstrong>Quit\u003C/strong>\u003C/span>, and press \u003Ckbd class=\"keycap\">Enter\u003C/kbd> to close the \u003Ccode class=\"literal\">nmtui\u003C/code> application.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the route is active:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ip route\u003C/strong>\u003C/span>\n...\n192.0.2.0/24 via 198.51.100.1 dev \u003Cspan class=\"emphasis\">\u003Cem>example\u003C/em>\u003C/span> proto static metric 100\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-static-route-by-using-control-center_configuring-static-routes\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">26.5. Configuring a static route by using control-center\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can use \u003Ccode class=\"literal\">control-center\u003C/code> in GNOME to add a static route to the configuration of a network connection.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe procedure below configures the following routes:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAn IPv4 route to the remote \u003Ccode class=\"literal\">198.51.100.0/24\u003C/code> network. The corresponding gateway has the IP address \u003Ccode class=\"literal\">192.0.2.10\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAn IPv6 route to the remote \u003Ccode class=\"literal\">2001:db8:2::/64\u003C/code> network. The corresponding gateway has the IP address \u003Ccode class=\"literal\">2001:db8:1::10\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe network is configured.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThis host is in the same IP subnet as the gateways.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe network configuration of the connection is opened in the \u003Ccode class=\"literal\">control-center\u003C/code> application. See \u003Ca class=\"link\" href=\"#configuring-an-ethernet-connection-by-using-nm-connection-editor_configuring-an-ethernet-connection\" title=\"2.5. Configuring an Ethernet connection by using nm-connection-editor\">Configuring an Ethernet connection by using nm-connection-editor\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the \u003Ccode class=\"literal\">IPv4\u003C/code> tab:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOptional: Disable automatic routes by clicking the \u003Cspan class=\"guibutton\">On\u003C/span> button in the \u003Ccode class=\"literal\">Routes\u003C/code> section of the \u003Ccode class=\"literal\">IPv4\u003C/code> tab to use only static routes. If automatic routes are enabled, Red Hat Enterprise Linux uses static routes and routes received from a DHCP server.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnter the address, netmask, gateway, and optionally a metric value of the IPv4 route:\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"inlinemediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/a5404d88a2894d0ce04363eac41de56e/IPv4-static-route-in-control-center.png\" alt=\"IPv4 static route in control center\"/>\u003C/span>\n\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the \u003Ccode class=\"literal\">IPv6\u003C/code> tab:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOptional: Disable automatic routes by clicking the \u003Cspan class=\"guibutton\">On\u003C/span> button i the \u003Ccode class=\"literal\">Routes\u003C/code> section of the \u003Ccode class=\"literal\">IPv4\u003C/code> tab to use only static routes.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnter the address, netmask, gateway, and optionally a metric value of the IPv6 route:\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"inlinemediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/03be77b0735011cebc9b76b057090520/IPv6-static-route-in-control-center.png\" alt=\"IPv6 static route in control center\"/>\u003C/span>\n\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Apply\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tBack in the \u003Ccode class=\"literal\">Network\u003C/code> window, disable and re-enable the connection by switching the button for the connection to \u003Cspan class=\"guibutton\">Off\u003C/span> and back to \u003Cspan class=\"guibutton\">On\u003C/span> for changes to take effect.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tRestarting the connection briefly disrupts connectivity on that interface.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv4 routes:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -4 route\u003C/strong>\u003C/span>\n...\n\u003Cspan class=\"emphasis\">\u003Cem>198.51.100.0/24\u003C/em>\u003C/span> via \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.10\u003C/em>\u003C/span> dev \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv6 routes:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -6 route\u003C/strong>\u003C/span>\n...\n\u003Cspan class=\"emphasis\">\u003Cem>2001:db8:2::/64\u003C/em>\u003C/span> via \u003Cspan class=\"emphasis\">\u003Cem>2001:db8:1::10\u003C/em>\u003C/span> dev \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> metric \u003Cspan class=\"emphasis\">\u003Cem>1024\u003C/em>\u003C/span> pref \u003Cspan class=\"emphasis\">\u003Cem>medium\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-static-route-by-using-nm-connection-editor_configuring-static-routes\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">26.6. Configuring a static route by using nm-connection-editor\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">nm-connection-editor\u003C/code> application to add a static route to the configuration of a network connection.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe procedure below configures the following routes:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAn IPv4 route to the remote \u003Ccode class=\"literal\">198.51.100.0/24\u003C/code> network. The corresponding gateway with the IP address \u003Ccode class=\"literal\">192.0.2.10\u003C/code> is reachable through the \u003Ccode class=\"literal\">example\u003C/code> connection.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAn IPv6 route to the remote \u003Ccode class=\"literal\">2001:db8:2::/64\u003C/code> network. The corresponding gateway with the IP address \u003Ccode class=\"literal\">2001:db8:1::10\u003C/code> is reachable through the \u003Ccode class=\"literal\">example\u003C/code> connection.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe network is configured.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThis host is in the same IP subnet as the gateways.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen a terminal, and enter \u003Ccode class=\"literal\">nm-connection-editor\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>nm-connection-editor\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the \u003Ccode class=\"literal\">example\u003C/code> connection profile, and click the gear wheel icon to edit the existing connection.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the \u003Ccode class=\"literal\">IPv4 Settings\u003C/code> tab:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick the \u003Cspan class=\"guibutton\">Routes\u003C/span> button.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tClick the \u003Cspan class=\"guibutton\">Add\u003C/span> button and enter the address, netmask, gateway, and optionally a metric value.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"inlinemediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/14976bccf922e5c20f086a3beccd823f/IPv4-static-route-in-nm-connection-editor.png\" alt=\"IPv4 static route in nm connection editor\"/>\u003C/span>\n\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">OK\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the \u003Ccode class=\"literal\">IPv6 Settings\u003C/code> tab:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick the \u003Cspan class=\"guibutton\">Routes\u003C/span> button.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tClick the \u003Cspan class=\"guibutton\">Add\u003C/span> button and enter the address, netmask, gateway, and optionally a metric value.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"inlinemediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/bd5dd813a45da55c4b21f6e4756e4947/IPv6-static-route-in-nm-connection-editor.png\" alt=\"IPv6 static route in nm connection editor\"/>\u003C/span>\n\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">OK\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Save\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRestart the network connection for changes to take effect. For example, to restart the \u003Ccode class=\"literal\">example\u003C/code> connection using the command line:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>example\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv4 routes:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -4 route\u003C/strong>\u003C/span>\n...\n\u003Cspan class=\"emphasis\">\u003Cem>198.51.100.0/24\u003C/em>\u003C/span> via \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.10\u003C/em>\u003C/span> dev \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv6 routes:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -6 route\u003C/strong>\u003C/span>\n...\n\u003Cspan class=\"emphasis\">\u003Cem>2001:db8:2::/64\u003C/em>\u003C/span> via \u003Cspan class=\"emphasis\">\u003Cem>2001:db8:1::10\u003C/em>\u003C/span> dev \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> metric \u003Cspan class=\"emphasis\">\u003Cem>1024\u003C/em>\u003C/span> pref \u003Cspan class=\"emphasis\">\u003Cem>medium\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-static-route-by-using-the-nmcli-interactive-mode_configuring-static-routes\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">26.7. Configuring a static route by using the \u003Ccode class=\"literal\">nmcli\u003C/code> interactive mode\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can use the interactive mode of the \u003Ccode class=\"literal\">nmcli\u003C/code> utility to add a static route to the configuration of a network connection.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe procedure below configures the following routes:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAn IPv4 route to the remote \u003Ccode class=\"literal\">198.51.100.0/24\u003C/code> network. The corresponding gateway with the IP address \u003Ccode class=\"literal\">192.0.2.10\u003C/code> is reachable through the \u003Ccode class=\"literal\">example\u003C/code> connection.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAn IPv6 route to the remote \u003Ccode class=\"literal\">2001:db8:2::/64\u003C/code> network. The corresponding gateway with the IP address \u003Ccode class=\"literal\">2001:db8:1::10\u003C/code> is reachable through the \u003Ccode class=\"literal\">example\u003C/code> connection.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">example\u003C/code> connection profile exists and it configures this host to be in the same IP subnet as the gateways.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen the \u003Ccode class=\"literal\">nmcli\u003C/code> interactive mode for the \u003Ccode class=\"literal\">example\u003C/code> connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection edit \u003Cspan class=\"emphasis\">\u003Cem>example\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the static IPv4 route:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">nmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>set ipv4.routes \u003Cspan class=\"emphasis\">\u003Cem>198.51.100.0/24 192.0.2.10\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the static IPv6 route:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">nmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>set ipv6.routes \u003Cspan class=\"emphasis\">\u003Cem>2001:db8:2::/64 2001:db8:1::10\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Verify that the routes were added correctly to the configuration:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">nmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>print\u003C/strong>\u003C/span>\n...\nipv4.routes:    { ip = \u003Cspan class=\"emphasis\">\u003Cem>198.51.100.0/24\u003C/em>\u003C/span>, nh = \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.10\u003C/em>\u003C/span> }\n...\nipv6.routes:    { ip = \u003Cspan class=\"emphasis\">\u003Cem>2001:db8:2::/64\u003C/em>\u003C/span>, nh = \u003Cspan class=\"emphasis\">\u003Cem>2001:db8:1::10\u003C/em>\u003C/span> }\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">ip\u003C/code> attribute displays the network to route and the \u003Ccode class=\"literal\">nh\u003C/code> attribute the gateway (next hop).\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSave the configuration:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">nmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>save persistent\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRestart the network connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">nmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>activate \u003Cspan class=\"emphasis\">\u003Cem>example\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLeave the \u003Ccode class=\"literal\">nmcli\u003C/code> interactive mode:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">nmcli&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>quit\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv4 routes:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -4 route\u003C/strong>\u003C/span>\n...\n\u003Cspan class=\"emphasis\">\u003Cem>198.51.100.0/24\u003C/em>\u003C/span> via \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.10\u003C/em>\u003C/span> dev \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv6 routes:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -6 route\u003C/strong>\u003C/span>\n...\n\u003Cspan class=\"emphasis\">\u003Cem>2001:db8:2::/64\u003C/em>\u003C/span> via \u003Cspan class=\"emphasis\">\u003Cem>2001:db8:1::10\u003C/em>\u003C/span> dev \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> metric \u003Cspan class=\"emphasis\">\u003Cem>1024\u003C/em>\u003C/span> pref \u003Cspan class=\"emphasis\">\u003Cem>medium\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nmcli(1)\u003C/code> and \u003Ccode class=\"literal\">nm-settings-nmcli(5)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-static-route-by-using-nmstatectl_configuring-static-routes\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">26.8. Configuring a static route by using \u003Ccode class=\"literal\">nmstatectl\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tUse the \u003Ccode class=\"literal\">nmstatectl\u003C/code> utility to configure a static route through the Nmstate API. The Nmstate API ensures that, after setting the configuration, the result matches the configuration file. If anything fails, \u003Ccode class=\"literal\">nmstatectl\u003C/code> automatically rolls back the changes to avoid leaving the system in an incorrect state.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">enp1s0\u003C/code> network interface is configured and is in the same IP subnet as the gateways.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">nmstate\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a YAML file, for example \u003Ccode class=\"literal\">~/add-static-route-to-enp1s0.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\nroutes:\n  config:\n  - destination: 198.51.100.0/24\n    next-hop-address: 192.0.2.10\n    next-hop-interface: enp1s0\n  - destination: 2001:db8:2::/64\n    next-hop-address: 2001:db8:1::10\n    next-hop-interface: enp1s0\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThese settings define the following static routes:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAn IPv4 route to the remote \u003Ccode class=\"literal\">198.51.100.0/24\u003C/code> network. The corresponding gateway with the IP address \u003Ccode class=\"literal\">192.0.2.10\u003C/code> is reachable through the \u003Ccode class=\"literal\">enp1s0\u003C/code> interface.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAn IPv6 route to the remote \u003Ccode class=\"literal\">2001:db8:2::/64\u003C/code> network. The corresponding gateway with the IP address \u003Ccode class=\"literal\">2001:db8:1::10\u003C/code> is reachable through the \u003Ccode class=\"literal\">enp1s0\u003C/code> interface.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tApply the settings to the system:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl apply ~/add-static-route-to-enp1s0.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv4 routes:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -4 route\u003C/strong>\u003C/span>\n...\n198.51.100.0/24 via 192.0.2.10 dev enp1s0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv6 routes:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -6 route\u003C/strong>\u003C/span>\n...\n2001:db8:2::/64 via 2001:db8:1::10 dev enp1s0 metric 1024 pref medium\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nmstatectl(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/nmstate/examples/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-static-route-by-using-the-network-rhel-system-role_configuring-static-routes\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">26.9. Configuring a static route by using the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tA static route ensures that you can send traffic to a destination that cannot be reached through the default gateway. You configure static routes in the NetworkManager connection profile of the interface that is connected to the same network as the next hop. By using Ansible and the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tYou cannot use the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role to update only specific values in an existing connection profile. The role ensures that a connection profile exactly matches the settings in a playbook. If a connection profile with the same name already exists, the role applies the settings from the playbook and resets all other settings in the profile to their defaults. To prevent resetting values, always specify the whole configuration of the network connection profile in the playbook, including the settings that you do not want to change.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles\">You have prepared the control node and the managed nodes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in to the control node as a user who can run playbooks on the managed nodes.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe account you use to connect to the managed nodes has \u003Ccode class=\"literal\">sudo\u003C/code> permissions on them.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a playbook file, for example \u003Ccode class=\"literal\">~/playbook.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\n- name: Configure the network\n  hosts: managed-node-01.example.com\n  tasks:\n    - name: Ethernet connection profile with static IP address settings\n      ansible.builtin.include_role:\n        name: rhel-system-roles.network\n      vars:\n        network_connections:\n          - name: enp7s0\n            type: ethernet\n            autoconnect: yes\n            ip:\n              address:\n                - 192.0.2.1/24\n                - 2001:db8:1::1/64\n              gateway4: 192.0.2.254\n              gateway6: 2001:db8:1::fffe\n              dns:\n                - 192.0.2.200\n                - 2001:db8:1::ffbb\n              dns_search:\n                - example.com\n              \u003Cspan class=\"strong strong\">\u003Cstrong>route:\u003C/strong>\u003C/span>\n                \u003Cspan class=\"strong strong\">\u003Cstrong>- network: 198.51.100.0\u003C/strong>\u003C/span>\n                  \u003Cspan class=\"strong strong\">\u003Cstrong>prefix: 24\u003C/strong>\u003C/span>\n                  \u003Cspan class=\"strong strong\">\u003Cstrong>gateway: 192.0.2.10\u003C/strong>\u003C/span>\n                \u003Cspan class=\"strong strong\">\u003Cstrong>- network: 2001:db8:2::\u003C/strong>\u003C/span>\n                  \u003Cspan class=\"strong strong\">\u003Cstrong>prefix: 64\u003C/strong>\u003C/span>\n                  \u003Cspan class=\"strong strong\">\u003Cstrong>gateway: 2001:db8:1::10\u003C/strong>\u003C/span>\n            state: up\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details about all variables used in the playbook, see the \u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file on the control node.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tValidate the playbook syntax:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --syntax-check ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that this command only validates the syntax and does not protect against a wrong but valid configuration.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the playbook:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv4 routes:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ansible managed-node-01.example.com -m command -a 'ip -4 route'\u003C/strong>\u003C/span>\nmanaged-node-01.example.com | CHANGED | rc=0 &gt;&gt;\n...\n198.51.100.0/24 via 192.0.2.10 dev enp7s0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IPv6 routes:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ansible managed-node-01.example.com -m command -a 'ip -6 route'\u003C/strong>\u003C/span>\nmanaged-node-01.example.com | CHANGED | rc=0 &gt;&gt;\n...\n2001:db8:2::/64 via 2001:db8:1::10 dev enp7s0 metric 1024 pref medium\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/rhel-system-roles/network/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-policy-based-routing-to-define-alternative-routes_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 27. Configuring policy-based routing to define alternative routes\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tBy default, the kernel in RHEL decides where to forward network packets based on the destination address using a routing table. Policy-based routing enables you to configure complex routing scenarios. For example, you can route packets based on various criteria, such as the source address, packet metadata, or protocol.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"routing-traffic-from-a-specific-subnet-to-a-different-default-gateway-by-using-nmcli_configuring-policy-based-routing-to-define-alternative-routes\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">27.1. Routing traffic from a specific subnet to a different default gateway by using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can use policy-based routing to configure a different default gateway for traffic from certain subnets. For example, you can configure RHEL as a router that, by default, routes all traffic to internet provider A using the default route. However, traffic received from the internal workstations subnet is routed to provider B.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe procedure assumes the following network topology:\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\u003Cspan class=\"inlinemediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/13d0843cf47a810942ae325682f70d0c/policy-based-routing.png\" alt=\"policy based routing\"/>\u003C/span>\n\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe system uses \u003Ccode class=\"literal\">NetworkManager\u003C/code> to configure the network, which is the default.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe RHEL router you want to set up in the procedure has four network interfaces:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">enp7s0\u003C/code> interface is connected to the network of provider A. The gateway IP in the provider’s network is \u003Ccode class=\"literal\">198.51.100.2\u003C/code>, and the network uses a \u003Ccode class=\"literal\">/30\u003C/code> network mask.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">enp1s0\u003C/code> interface is connected to the network of provider B. The gateway IP in the provider’s network is \u003Ccode class=\"literal\">192.0.2.2\u003C/code>, and the network uses a \u003Ccode class=\"literal\">/30\u003C/code> network mask.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">enp8s0\u003C/code> interface is connected to the \u003Ccode class=\"literal\">10.0.0.0/24\u003C/code> subnet with internal workstations.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">enp9s0\u003C/code> interface is connected to the \u003Ccode class=\"literal\">203.0.113.0/24\u003C/code> subnet with the company’s servers.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tHosts in the internal workstations subnet use \u003Ccode class=\"literal\">10.0.0.1\u003C/code> as the default gateway. In the procedure, you assign this IP address to the \u003Ccode class=\"literal\">enp8s0\u003C/code> network interface of the router.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tHosts in the server subnet use \u003Ccode class=\"literal\">203.0.113.1\u003C/code> as the default gateway. In the procedure, you assign this IP address to the \u003Ccode class=\"literal\">enp9s0\u003C/code> network interface of the router.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">firewalld\u003C/code> service is enabled and active.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the network interface to provider A:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ethernet con-name Provider-A ifname enp7s0 ipv4.method manual ipv4.addresses 198.51.100.1/30 ipv4.gateway 198.51.100.2 ipv4.dns 198.51.100.200 connection.zone external\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">nmcli connection add\u003C/code> command creates a NetworkManager connection profile. The command uses the following options:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">type\u003C/code> \u003Ccode class=\"literal\">ethernet\u003C/code>: Defines that the connection type is Ethernet.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">con-name\u003C/code> \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>&lt;connection_name&gt;\u003C/em>\u003C/span>\u003C/code>: Sets the name of the profile. Use a meaningful name to avoid confusion.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">ifname\u003C/code> \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>&lt;network_device&gt;\u003C/em>\u003C/span>\u003C/code>: Sets the network interface.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">ipv4.method\u003C/code> \u003Ccode class=\"literal\">manual\u003C/code>: Enables to configure a static IP address.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">ipv4.addresses\u003C/code> \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>&lt;IP_address&gt;\u003C/em>\u003C/span>/\u003Cspan class=\"emphasis\">\u003Cem>&lt;subnet_mask&gt;\u003C/em>\u003C/span>\u003C/code>: Sets the IPv4 addresses and subnet mask.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">ipv4.gateway\u003C/code> \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>&lt;IP_address&gt;\u003C/em>\u003C/span>\u003C/code>: Sets the default gateway address.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">ipv4.dns\u003C/code> \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>&lt;IP_of_DNS_server&gt;\u003C/em>\u003C/span>\u003C/code>: Sets the IPv4 address of the DNS server.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">connection.zone\u003C/code> \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>&lt;firewalld_zone&gt;\u003C/em>\u003C/span>\u003C/code>: Assigns the network interface to the defined \u003Ccode class=\"literal\">firewalld\u003C/code> zone. Note that \u003Ccode class=\"literal\">firewalld\u003C/code> automatically enables masquerading for interfaces assigned to the \u003Ccode class=\"literal\">external\u003C/code> zone.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the network interface to provider B:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ethernet con-name Provider-B ifname enp1s0 ipv4.method manual ipv4.addresses 192.0.2.1/30 ipv4.routes \"0.0.0.0/0 192.0.2.2 table=5000\" connection.zone external\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis command uses the \u003Ccode class=\"literal\">ipv4.routes\u003C/code> parameter instead of \u003Ccode class=\"literal\">ipv4.gateway\u003C/code> to set the default gateway. This is required to assign the default gateway for this connection to a different routing table (\u003Ccode class=\"literal\">5000\u003C/code>) than the default. NetworkManager automatically creates this new routing table when the connection is activated.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the network interface to the internal workstations subnet:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ethernet con-name Internal-Workstations ifname enp8s0 ipv4.method manual ipv4.addresses 10.0.0.1/24 ipv4.routes \"10.0.0.0/24 table=5000\" ipv4.routing-rules \"priority 5 from 10.0.0.0/24 table 5000\" connection.zone trusted\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis command uses the \u003Ccode class=\"literal\">ipv4.routes\u003C/code> parameter to add a static route to the routing table with ID \u003Ccode class=\"literal\">5000\u003C/code>. This static route for the \u003Ccode class=\"literal\">10.0.0.0/24\u003C/code> subnet uses the IP of the local network interface to provider B (\u003Ccode class=\"literal\">192.0.2.1\u003C/code>) as next hop.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdditionally, the command uses the \u003Ccode class=\"literal\">ipv4.routing-rules\u003C/code> parameter to add a routing rule with priority \u003Ccode class=\"literal\">5\u003C/code> that routes traffic from the \u003Ccode class=\"literal\">10.0.0.0/24\u003C/code> subnet to table \u003Ccode class=\"literal\">5000\u003C/code>. Low values have a high priority.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that the syntax in the \u003Ccode class=\"literal\">ipv4.routing-rules\u003C/code> parameter is the same as in an \u003Ccode class=\"literal\">ip rule add\u003C/code> command, except that \u003Ccode class=\"literal\">ipv4.routing-rules\u003C/code> always requires specifying a priority.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the network interface to the server subnet:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ethernet con-name Servers ifname enp9s0 ipv4.method manual ipv4.addresses 203.0.113.1/24 connection.zone trusted\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn a RHEL host in the internal workstation subnet:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">traceroute\u003C/code> package:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install traceroute\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">traceroute\u003C/code> utility to display the route to a host on the internet:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>traceroute redhat.com\u003C/strong>\u003C/span>\ntraceroute to redhat.com (209.132.183.105), 30 hops max, 60 byte packets\n 1  10.0.0.1 (10.0.0.1)     0.337 ms  0.260 ms  0.223 ms\n 2  192.0.2.1 (192.0.2.1)   0.884 ms  1.066 ms  1.248 ms\n ...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe output of the command displays that the router sends packets over \u003Ccode class=\"literal\">192.0.2.1\u003C/code>, which is the network of provider B.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn a RHEL host in the server subnet:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">traceroute\u003C/code> package:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install traceroute\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">traceroute\u003C/code> utility to display the route to a host on the internet:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>traceroute redhat.com\u003C/strong>\u003C/span>\ntraceroute to redhat.com (209.132.183.105), 30 hops max, 60 byte packets\n 1  203.0.113.1 (203.0.113.1)    2.179 ms  2.073 ms  1.944 ms\n 2  198.51.100.2 (198.51.100.2)  1.868 ms  1.798 ms  1.549 ms\n ...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe output of the command displays that the router sends packets over \u003Ccode class=\"literal\">198.51.100.2\u003C/code>, which is the network of provider A.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting steps\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tOn the RHEL router:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the rule list:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip rule list\u003C/strong>\u003C/span>\n0:\tfrom all lookup local\n\u003Cspan class=\"strong strong\">\u003Cstrong>5\u003C/strong>\u003C/span>:\t\u003Cspan class=\"strong strong\">\u003Cstrong>from 10.0.0.0/24 lookup 5000\u003C/strong>\u003C/span>\n32766:\tfrom all lookup main\n32767:\tfrom all lookup default\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tBy default, RHEL contains rules for the tables \u003Ccode class=\"literal\">local\u003C/code>, \u003Ccode class=\"literal\">main\u003C/code>, and \u003Ccode class=\"literal\">default\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the routes in table \u003Ccode class=\"literal\">5000\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip route list table 5000\u003C/strong>\u003C/span>\n0.0.0.0/0 via 192.0.2.2 dev enp1s0 proto static metric 100\n10.0.0.0/24 dev enp8s0 proto static scope link src 192.0.2.1 metric 102\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the interfaces and firewall zones:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>firewall-cmd --get-active-zones\u003C/strong>\u003C/span>\nexternal\n  interfaces: enp1s0 enp7s0\ntrusted\n  interfaces: enp8s0 enp9s0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the \u003Ccode class=\"literal\">external\u003C/code> zone has masquerading enabled:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>firewall-cmd --info-zone=external\u003C/strong>\u003C/span>\nexternal (active)\n  target: default\n  icmp-block-inversion: no\n  interfaces: enp1s0 enp7s0\n  sources:\n  services: ssh\n  ports:\n  protocols:\n  \u003Cspan class=\"strong strong\">\u003Cstrong>masquerade: yes\u003C/strong>\u003C/span>\n  ...\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nmcli(1)\u003C/code> and \u003Ccode class=\"literal\">nm-settings(5)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_routing-traffic-from-a-specific-subnet-to-a-different-default-gateway-by-using-the-network-rhel-system-role_configuring-policy-based-routing-to-define-alternative-routes\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">27.2. Routing traffic from a specific subnet to a different default gateway by using the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can use policy-based routing to configure a different default gateway for traffic from certain subnets. For example, you can configure RHEL as a router that, by default, routes all traffic to internet provider A using the default route. However, traffic received from the internal workstations subnet is routed to provider B. By using Ansible and the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role to configure the connection profiles, including routing tables and rules.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThis procedure assumes the following network topology:\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\u003Cspan class=\"inlinemediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/13d0843cf47a810942ae325682f70d0c/policy-based-routing.png\" alt=\"policy based routing\"/>\u003C/span>\n\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles\">You have prepared the control node and the managed nodes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in to the control node as a user who can run playbooks on the managed nodes.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe account you use to connect to the managed nodes has \u003Ccode class=\"literal\">sudo\u003C/code> permissions on them.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe managed nodes uses the \u003Ccode class=\"literal\">NetworkManager\u003C/code> and \u003Ccode class=\"literal\">firewalld\u003C/code> services.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe managed nodes you want to configure has four network interfaces:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">enp7s0\u003C/code> interface is connected to the network of provider A. The gateway IP in the provider’s network is \u003Ccode class=\"literal\">198.51.100.2\u003C/code>, and the network uses a \u003Ccode class=\"literal\">/30\u003C/code> network mask.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">enp1s0\u003C/code> interface is connected to the network of provider B. The gateway IP in the provider’s network is \u003Ccode class=\"literal\">192.0.2.2\u003C/code>, and the network uses a \u003Ccode class=\"literal\">/30\u003C/code> network mask.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">enp8s0\u003C/code> interface is connected to the \u003Ccode class=\"literal\">10.0.0.0/24\u003C/code> subnet with internal workstations.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">enp9s0\u003C/code> interface is connected to the \u003Ccode class=\"literal\">203.0.113.0/24\u003C/code> subnet with the company’s servers.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tHosts in the internal workstations subnet use \u003Ccode class=\"literal\">10.0.0.1\u003C/code> as the default gateway. In the procedure, you assign this IP address to the \u003Ccode class=\"literal\">enp8s0\u003C/code> network interface of the router.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tHosts in the server subnet use \u003Ccode class=\"literal\">203.0.113.1\u003C/code> as the default gateway. In the procedure, you assign this IP address to the \u003Ccode class=\"literal\">enp9s0\u003C/code> network interface of the router.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a playbook file, for example \u003Ccode class=\"literal\">~/playbook.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\n- name: Configuring policy-based routing\n  hosts: managed-node-01.example.com\n  tasks:\n    - name: Routing traffic from a specific subnet to a different default gateway\n      ansible.builtin.include_role:\n        name: rhel-system-roles.network\n      vars:\n        network_connections:\n          - name: Provider-A\n            interface_name: enp7s0\n            type: ethernet\n            autoconnect: True\n            ip:\n              address:\n                - 198.51.100.1/30\n              gateway4: 198.51.100.2\n              dns:\n                - 198.51.100.200\n            state: up\n            zone: external\n\n          - name: Provider-B\n            interface_name: enp1s0\n            type: ethernet\n            autoconnect: True\n            ip:\n              address:\n                - 192.0.2.1/30\n              route:\n                - network: 0.0.0.0\n                  prefix: 0\n                  gateway: 192.0.2.2\n                  table: 5000\n            state: up\n            zone: external\n\n          - name: Internal-Workstations\n            interface_name: enp8s0\n            type: ethernet\n            autoconnect: True\n            ip:\n              address:\n                - 10.0.0.1/24\n              route:\n                - network: 10.0.0.0\n                  prefix: 24\n                  table: 5000\n              routing_rule:\n                - priority: 5\n                  from: 10.0.0.0/24\n                  table: 5000\n            state: up\n            zone: trusted\n\n          - name: Servers\n            interface_name: enp9s0\n            type: ethernet\n            autoconnect: True\n            ip:\n              address:\n                - 203.0.113.1/24\n            state: up\n            zone: trusted\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe settings specified in the example playbook include the following:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">table: \u003Cspan class=\"emphasis\">\u003Cem>&lt;value&gt;\u003C/em>\u003C/span>\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tAssigns the route from the same list entry as the \u003Ccode class=\"literal\">table\u003C/code> variable to the specified routing table.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">routing_rule: \u003Cspan class=\"emphasis\">\u003Cem>&lt;list&gt;\u003C/em>\u003C/span>\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tDefines the priority of the specified routing rule and from a connection profile to which routing table the rule is assigned.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">zone: \u003Cspan class=\"emphasis\">\u003Cem>&lt;zone_name&gt;\u003C/em>\u003C/span>\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tAssigns the network interface from a connection profile to the specified \u003Ccode class=\"literal\">firewalld\u003C/code> zone.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details about all variables used in the playbook, see the \u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file on the control node.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tValidate the playbook syntax:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --syntax-check ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that this command only validates the syntax and does not protect against a wrong but valid configuration.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the playbook:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn a RHEL host in the internal workstation subnet:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">traceroute\u003C/code> package:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install traceroute\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">traceroute\u003C/code> utility to display the route to a host on the internet:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>traceroute redhat.com\u003C/strong>\u003C/span>\ntraceroute to redhat.com (209.132.183.105), 30 hops max, 60 byte packets\n 1  10.0.0.1 (10.0.0.1)     0.337 ms  0.260 ms  0.223 ms\n 2  192.0.2.1 (192.0.2.1)   0.884 ms  1.066 ms  1.248 ms\n ...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe output of the command displays that the router sends packets over \u003Ccode class=\"literal\">192.0.2.1\u003C/code>, which is the network of provider B.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn a RHEL host in the server subnet:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">traceroute\u003C/code> package:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install traceroute\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">traceroute\u003C/code> utility to display the route to a host on the internet:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>traceroute redhat.com\u003C/strong>\u003C/span>\ntraceroute to redhat.com (209.132.183.105), 30 hops max, 60 byte packets\n 1  203.0.113.1 (203.0.113.1)    2.179 ms  2.073 ms  1.944 ms\n 2  198.51.100.2 (198.51.100.2)  1.868 ms  1.798 ms  1.549 ms\n ...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe output of the command displays that the router sends packets over \u003Ccode class=\"literal\">198.51.100.2\u003C/code>, which is the network of provider A.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the RHEL router that you configured using the RHEL system role:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tDisplay the rule list:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip rule list\u003C/strong>\u003C/span>\n0:      from all lookup local\n\u003Cspan class=\"strong strong\">\u003Cstrong>5\u003C/strong>\u003C/span>:    \u003Cspan class=\"strong strong\">\u003Cstrong>from 10.0.0.0/24 lookup 5000\u003C/strong>\u003C/span>\n32766:  from all lookup main\n32767:  from all lookup default\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tBy default, RHEL contains rules for the tables \u003Ccode class=\"literal\">local\u003C/code>, \u003Ccode class=\"literal\">main\u003C/code>, and \u003Ccode class=\"literal\">default\u003C/code>.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tDisplay the routes in table \u003Ccode class=\"literal\">5000\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip route list table 5000\u003C/strong>\u003C/span>\n0.0.0.0/0 via 192.0.2.2 dev enp1s0 proto static metric 100\n10.0.0.0/24 dev enp8s0 proto static scope link src 192.0.2.1 metric 102\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tDisplay the interfaces and firewall zones:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>firewall-cmd --get-active-zones\u003C/strong>\u003C/span>\nexternal\n  interfaces: enp1s0 enp7s0\ntrusted\n  interfaces: enp8s0 enp9s0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tVerify that the \u003Ccode class=\"literal\">external\u003C/code> zone has masquerading enabled:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>firewall-cmd --info-zone=external\u003C/strong>\u003C/span>\nexternal (active)\n  target: default\n  icmp-block-inversion: no\n  interfaces: enp1s0 enp7s0\n  sources:\n  services: ssh\n  ports:\n  protocols:\n  \u003Cspan class=\"strong strong\">\u003Cstrong>masquerade: yes\u003C/strong>\u003C/span>\n  ...\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/rhel-system-roles/network/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"reusing-the-same-ip-address-on-different-interfaces_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 28. Reusing the same IP address on different interfaces\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tWith Virtual routing and forwarding (VRF), administrators can use multiple routing tables simultaneously on the same host. For that, VRF partitions a network at layer 3. This enables the administrator to isolate traffic using separate and independent route tables per VRF domain. This technique is similar to virtual LANs (VLAN), which partitions a network at layer 2, where the operating system uses different VLAN tags to isolate traffic sharing the same physical medium.\n\t\t\u003C/p>\u003Cp>\n\t\t\tOne benefit of VRF over partitioning on layer 2 is that routing scales better considering the number of peers involved.\n\t\t\u003C/p>\u003Cp>\n\t\t\tRed Hat Enterprise Linux uses a virtual \u003Ccode class=\"literal systemitem\">vrt\u003C/code> device for each VRF domain and adds routes to a VRF domain by adding existing network devices to a VRF device. Addresses and routes previously attached to the original device will be moved inside the VRF domain.\n\t\t\u003C/p>\u003Cp>\n\t\t\tNote that each VRF domain is isolated from each other.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"permanently-reusing-the-same-ip-address-on-different-interfaces_reusing-the-same-ip-address-on-different-interfaces\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">28.1. Permanently reusing the same IP address on different interfaces\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can use the virtual routing and forwarding (VRF) feature to permanently use the same IP address on different interfaces in one server.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tTo enable remote peers to contact both VRF interfaces while reusing the same IP address, the network interfaces must belong to different broadcasting domains. A broadcast domain in a network is a set of nodes, which receive broadcast traffic sent by any of them. In most configurations, all nodes connected to the same switch belong to the same broadcasting domain.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in as the \u003Ccode class=\"literal\">root\u003C/code> user.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe network interfaces are not configured.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate and configure the first VRF device:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate a connection for the VRF device and assign it to a routing table. For example, to create a VRF device named \u003Ccode class=\"literal\">vrf0\u003C/code> that is assigned to the \u003Ccode class=\"literal\">1001\u003C/code> routing table:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type vrf ifname \u003Cspan class=\"emphasis\">\u003Cem>vrf0\u003C/em>\u003C/span> con-name \u003Cspan class=\"emphasis\">\u003Cem>vrf0\u003C/em>\u003C/span> table 1001 ipv4.method disabled ipv6.method disabled\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnable the \u003Ccode class=\"literal\">vrf0\u003C/code> device:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>vrf0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAssign a network device to the VRF just created. For example, to add the \u003Ccode class=\"literal\">enp1s0\u003C/code> Ethernet device to the \u003Ccode class=\"literal\">vrf0\u003C/code> VRF device and assign an IP address and the subnet mask to \u003Ccode class=\"literal\">enp1s0\u003C/code>, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ethernet con-name \u003Cspan class=\"emphasis\">\u003Cem>vrf.enp1s0\u003C/em>\u003C/span> ifname \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> controller vrf0 ipv4.method \u003Cspan class=\"emphasis\">\u003Cem>manual\u003C/em>\u003C/span> ipv4.address \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1/24\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tActivate the \u003Ccode class=\"literal\">vrf.enp1s0\u003C/code> connection:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>vrf.enp1s0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate and configure the next VRF device:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate the VRF device and assign it to a routing table. For example, to create a VRF device named \u003Ccode class=\"literal\">vrf1\u003C/code> that is assigned to the \u003Ccode class=\"literal\">1002\u003C/code> routing table, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type vrf ifname \u003Cspan class=\"emphasis\">\u003Cem>vrf1\u003C/em>\u003C/span> con-name \u003Cspan class=\"emphasis\">\u003Cem>vrf1\u003C/em>\u003C/span> table 1002 ipv4.method disabled ipv6.method disabled\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tActivate the \u003Ccode class=\"literal\">vrf1\u003C/code> device:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>vrf1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAssign a network device to the VRF just created. For example, to add the \u003Ccode class=\"literal\">enp7s0\u003C/code> Ethernet device to the \u003Ccode class=\"literal\">vrf1\u003C/code> VRF device and assign an IP address and the subnet mask to \u003Ccode class=\"literal\">enp7s0\u003C/code>, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ethernet con-name \u003Cspan class=\"emphasis\">\u003Cem>vrf.enp7s0\u003C/em>\u003C/span> ifname \u003Cspan class=\"emphasis\">\u003Cem>enp7s0\u003C/em>\u003C/span> controller \u003Cspan class=\"emphasis\">\u003Cem>vrf1\u003C/em>\u003C/span> ipv4.method \u003Cspan class=\"emphasis\">\u003Cem>manual\u003C/em>\u003C/span> ipv4.address \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1/24\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tActivate the \u003Ccode class=\"literal\">vrf.enp7s0\u003C/code> device:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>vrf.enp7s0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"temporarily-reusing-the-same-ip-address-on-different-interfaces_reusing-the-same-ip-address-on-different-interfaces\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">28.2. Temporarily reusing the same IP address on different interfaces\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can use the virtual routing and forwarding (VRF) feature to temporarily use the same IP address on different interfaces in one server. Use this procedure only for testing purposes, because the configuration is temporary and lost after you reboot the system.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tTo enable remote peers to contact both VRF interfaces while reusing the same IP address, the network interfaces must belong to different broadcasting domains. A broadcast domain in a network is a set of nodes which receive broadcast traffic sent by any of them. In most configurations, all nodes connected to the same switch belong to the same broadcasting domain.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in as the \u003Ccode class=\"literal\">root\u003C/code> user.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe network interfaces are not configured.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate and configure the first VRF device:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate the VRF device and assign it to a routing table. For example, to create a VRF device named \u003Ccode class=\"literal\">blue\u003C/code> that is assigned to the \u003Ccode class=\"literal\">1001\u003C/code> routing table:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link add dev blue type vrf table 1001\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnable the \u003Ccode class=\"literal\">blue\u003C/code> device:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link set dev blue up\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAssign a network device to the VRF device. For example, to add the \u003Ccode class=\"literal\">enp1s0\u003C/code> Ethernet device to the \u003Ccode class=\"literal\">blue\u003C/code> VRF device:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link set dev enp1s0 master blue\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnable the \u003Ccode class=\"literal\">enp1s0\u003C/code> device:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link set dev enp1s0 up\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAssign an IP address and subnet mask to the \u003Ccode class=\"literal\">enp1s0\u003C/code> device. For example, to set it to \u003Ccode class=\"literal\">192.0.2.1/24\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip addr add dev enp1s0 192.0.2.1/24\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate and configure the next VRF device:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate the VRF device and assign it to a routing table. For example, to create a VRF device named \u003Ccode class=\"literal\">red\u003C/code> that is assigned to the \u003Ccode class=\"literal\">1002\u003C/code> routing table:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link add dev red type vrf table 1002\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnable the \u003Ccode class=\"literal\">red\u003C/code> device:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link set dev red up\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAssign a network device to the VRF device. For example, to add the \u003Ccode class=\"literal\">enp7s0\u003C/code> Ethernet device to the \u003Ccode class=\"literal\">red\u003C/code> VRF device:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link set dev enp7s0 master red\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnable the \u003Ccode class=\"literal\">enp7s0\u003C/code> device:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link set dev enp7s0 up\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAssign the same IP address and subnet mask to the \u003Ccode class=\"literal\">enp7s0\u003C/code> device as you used for \u003Ccode class=\"literal\">enp1s0\u003C/code> in the \u003Ccode class=\"literal\">blue\u003C/code> VRF domain:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip addr add dev enp7s0 192.0.2.1/24\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOptional: Create further VRF devices as described above.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section _additional-resources\" id=\"additional_resources\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">28.3. Additional resources\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/kernel-doc-&lt;\u003Cspan class=\"emphasis\">\u003Cem>kernel_version\u003C/em>\u003C/span>&gt;/Documentation/networking/vrf.txt\u003C/code> from the \u003Ccode class=\"literal package\">kernel-doc\u003C/code> package\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_starting-a-service-within-an-isolated-vrf-network_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 29. Starting a service within an isolated VRF network\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tWith virtual routing and forwarding (VRF), you can create isolated networks with a routing table that is different to the main routing table of the operating system. You can then start services and applications so that they have only access to the network defined in that routing table.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"proc_configuring-a-vrf-device_assembly_starting-a-service-within-an-isolated-vrf-network\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">29.1. Configuring a VRF device\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo use virtual routing and forwarding (VRF), you create a VRF device and attach a physical or virtual network interface and routing information to it.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tTo prevent that you lock out yourself out remotely, perform this procedure on the local console or remotely over a network interface that you do not want to assign to the VRF device.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in locally or using a network interface that is different to the one you want to assign to the VRF device.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">vrf0\u003C/code> connection with a same-named virtual device, and attach it to routing table \u003Ccode class=\"literal\">1000\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type vrf ifname \u003Cspan class=\"emphasis\">\u003Cem>vrf0\u003C/em>\u003C/span> con-name \u003Cspan class=\"emphasis\">\u003Cem>vrf0\u003C/em>\u003C/span> table \u003Cspan class=\"emphasis\">\u003Cem>1000\u003C/em>\u003C/span> ipv4.method disabled ipv6.method disabled\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the \u003Ccode class=\"literal\">enp1s0\u003C/code> device to the \u003Ccode class=\"literal\">vrf0\u003C/code> connection, and configure the IP settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ethernet con-name \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> ifname \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> controller \u003Cspan class=\"emphasis\">\u003Cem>vrf0\u003C/em>\u003C/span> ipv4.method \u003Cspan class=\"emphasis\">\u003Cem>manual\u003C/em>\u003C/span> ipv4.address \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1/24\u003C/em>\u003C/span> ipv4.gateway \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.254\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis command creates the \u003Ccode class=\"literal\">enp1s0\u003C/code> connection as a port of the \u003Ccode class=\"literal\">vrf0\u003C/code> connection. Due to this configuration, the routing information are automatically assigned to the routing table \u003Ccode class=\"literal\">1000\u003C/code> that is associated with the \u003Ccode class=\"literal\">vrf0\u003C/code> device.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you require static routes in the isolated network:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd the static routes:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> +ipv4.routes \"\u003Cspan class=\"emphasis\">\u003Cem>198.51.100.0/24\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.2\u003C/em>\u003C/span>\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThis adds a route to the \u003Ccode class=\"literal\">198.51.100.0/24\u003C/code> network that uses \u003Ccode class=\"literal\">192.0.2.2\u003C/code> as the router.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tActivate the connection:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the IP settings of the device that is associated with \u003Ccode class=\"literal\">vrf0\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -br addr show vrf \u003Cspan class=\"emphasis\">\u003Cem>vrf0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n\u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>    UP    \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1/24\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the VRF devices and their associated routing table:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip vrf show\u003C/strong>\u003C/span>\nName              Table\n-----------------------\n\u003Cspan class=\"emphasis\">\u003Cem>vrf0\u003C/em>\u003C/span>              \u003Cspan class=\"emphasis\">\u003Cem>1000\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the main routing table:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip route show\u003C/strong>\u003C/span>\ndefault via \u003Cspan class=\"emphasis\">\u003Cem>203.0.113.0/24\u003C/em>\u003C/span> dev \u003Cspan class=\"emphasis\">\u003Cem>enp7s0\u003C/em>\u003C/span> proto static metric 100\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe main routing table does not mention any routes associated with the device \u003Ccode class=\"literal\">enp1s0\u003C/code> device or the \u003Ccode class=\"literal\">192.0.2.1/24\u003C/code> subnet.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the routing table \u003Ccode class=\"literal\">1000\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip route show table \u003Cspan class=\"emphasis\">\u003Cem>1000\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\ndefault via \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.254\u003C/em>\u003C/span> dev \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> proto static metric 101\nbroadcast \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.0\u003C/em>\u003C/span> dev \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> proto kernel scope link src \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1\u003C/em>\u003C/span>\n\u003Cspan class=\"emphasis\">\u003Cem>192.0.2.0\u003C/em>\u003C/span>/24 dev \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> proto kernel scope link src \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1\u003C/em>\u003C/span> metric 101\nlocal \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1\u003C/em>\u003C/span> dev \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> proto kernel scope host src \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1\u003C/em>\u003C/span>\nbroadcast \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.255\u003C/em>\u003C/span> dev \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> proto kernel scope link src \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1\u003C/em>\u003C/span>\n\u003Cspan class=\"emphasis\">\u003Cem>198.51.100.0/24\u003C/em>\u003C/span> via \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.2\u003C/em>\u003C/span> dev \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> proto static metric 101\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">default\u003C/code> entry indicates that services that use this routing table, use \u003Ccode class=\"literal\">192.0.2.254\u003C/code> as their default gateway and not the default gateway in the main routing table.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tExecute the \u003Ccode class=\"literal\">traceroute\u003C/code> utility in the network associated with \u003Ccode class=\"literal\">vrf0\u003C/code> to verify that the utility uses the route from table \u003Ccode class=\"literal\">1000\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip vrf exec \u003Cspan class=\"emphasis\">\u003Cem>vrf0\u003C/em>\u003C/span> traceroute \u003Cspan class=\"emphasis\">\u003Cem>203.0.113.1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\ntraceroute to \u003Cspan class=\"emphasis\">\u003Cem>203.0.113.1\u003C/em>\u003C/span> (\u003Cspan class=\"emphasis\">\u003Cem>203.0.113.1\u003C/em>\u003C/span>), 30 hops max, 60 byte packets\n 1  \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.254\u003C/em>\u003C/span> (\u003Cspan class=\"emphasis\">\u003Cem>192.0.2.254\u003C/em>\u003C/span>)  0.516 ms  0.459 ms  0.430 ms\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe first hop is the default gateway that is assigned to the routing table \u003Ccode class=\"literal\">1000\u003C/code> and not the default gateway from the system’s main routing table.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">ip-vrf(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_starting-a-service-within-an-isolated-vrf-network_assembly_starting-a-service-within-an-isolated-vrf-network\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">29.2. Starting a service within an isolated VRF network\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can configure a service, such as the Apache HTTP Server, to start within an isolated virtual routing and forwarding (VRF) network.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tServices can only bind to local IP addresses that are in the same VRF network.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou configured the \u003Ccode class=\"literal\">vrf0\u003C/code> device.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou configured Apache HTTP Server to listen only on the IP address that is assigned to the interface associated with the \u003Ccode class=\"literal\">vrf0\u003C/code> device.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the content of the \u003Ccode class=\"literal\">httpd\u003C/code> systemd service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl cat httpd\u003C/strong>\u003C/span>\n...\n[Service]\nExecStart=/usr/sbin/httpd $OPTIONS -DFOREGROUND\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou require the content of the \u003Ccode class=\"literal\">ExecStart\u003C/code> parameter in a later step to run the same command within the isolated VRF network.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">/etc/systemd/system/httpd.service.d/\u003C/code> directory:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mkdir /etc/systemd/system/httpd.service.d/\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">/etc/systemd/system/httpd.service.d/override.conf\u003C/code> file with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">[Service]\nExecStart=\nExecStart=/usr/sbin/ip vrf exec \u003Cspan class=\"emphasis\">\u003Cem>vrf0\u003C/em>\u003C/span> /usr/sbin/httpd $OPTIONS -DFOREGROUND\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo override the \u003Ccode class=\"literal\">ExecStart\u003C/code> parameter, you first need to unset it and then set it to the new value as shown.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReload systemd.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl daemon-reload\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRestart the \u003Ccode class=\"literal\">httpd\u003C/code> service.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl restart httpd\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the process IDs (PID) of \u003Ccode class=\"literal\">httpd\u003C/code> processes:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>pidof -c httpd\u003C/strong>\u003C/span>\n1904 ...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the VRF association for the PIDs, for example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip vrf identify 1904\u003C/strong>\u003C/span>\nvrf0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay all PIDs associated with the \u003Ccode class=\"literal\">vrf0\u003C/code> device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip vrf pids vrf0\u003C/strong>\u003C/span>\n1904  httpd\n...\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">ip-vrf(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-ethtool-settings-in-networkmanager-connection-profiles_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 30. Configuring ethtool settings in NetworkManager connection profiles\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tNetworkManager can configure certain network driver and hardware settings persistently. Compared to using the \u003Ccode class=\"literal\">ethtool\u003C/code> utility to manage these settings, this has the benefit of not losing the settings after a reboot.\n\t\t\u003C/p>\u003Cp>\n\t\t\tYou can set the following \u003Ccode class=\"literal\">ethtool\u003C/code> settings in NetworkManager connection profiles:\n\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Offload features\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\tNetwork interface controllers can use the TCP offload engine (TOE) to offload processing certain operations to the network controller. This improves the network throughput.\n\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Interrupt coalesce settings\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\tBy using interrupt coalescing, the system collects network packets and generates a single interrupt for multiple packets. This increases the amount of data sent to the kernel with one hardware interrupt, which reduces the interrupt load, and maximizes the throughput.\n\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Ring buffers\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\tThese buffers store incoming and outgoing network packets. You can increase the ring buffer sizes to reduce a high packet drop rate.\n\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Channel settings\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA network interface manages its associated number of channels along with hardware settings and network drivers. All devices associated with a network interface communicate with each other through interrupt requests (IRQ). Each device queue holds pending IRQ and communicates with each other over a data line known as channel. Types of queues are associated with specific channel types. These channel types include:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">rx\u003C/code> for receiving queues\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">tx\u003C/code> for transmit queues\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">other\u003C/code> for link interrupts or single root input/output virtualization (SR-IOV) coordination\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">combined\u003C/code> for hardware capacity-based multipurpose channels\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003C/dl>\u003C/div>\u003Csection class=\"section\" id=\"configuring-an-ethtool-offload-feature-by-using-nmcli_configuring-ethtool-settings-in-networkmanager-connection-profiles\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">30.1. Configuring an ethtool offload feature by using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can use NetworkManager to enable and disable \u003Ccode class=\"literal\">ethtool\u003C/code> offload features in a connection profile.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, to enable the RX offload feature and disable TX offload in the \u003Ccode class=\"literal\">enp1s0\u003C/code> connection profile, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli con modify \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> ethtool.feature-rx on ethtool.feature-tx off\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis command explicitly enables RX offload and disables TX offload.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo remove the setting of an offload feature that you previously enabled or disabled, set the feature’s parameter to a null value. For example, to remove the configuration for TX offload, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli con modify \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> ethtool.feature-tx \"\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReactivate the network profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ethtool -k\u003C/code> command to display the current offload features of a network device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ethtool -k \u003Cspan class=\"emphasis\">\u003Cem>network_device\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings-nmcli(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-an-ethtool-offload-feature-by-using-the-network-rhel-system-role_configuring-ethtool-settings-in-networkmanager-connection-profiles\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">30.2. Configuring an \u003Ccode class=\"literal\">ethtool\u003C/code> offload feature by using the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tNetwork interface controllers can use the TCP offload engine (TOE) to offload processing certain operations to the network controller. This improves the network throughput. You configure offload features in the connection profile of the network interface. By using Ansible and the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tYou cannot use the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role to update only specific values in an existing connection profile. The role ensures that a connection profile exactly matches the settings in a playbook. If a connection profile with the same name already exists, the role applies the settings from the playbook and resets all other settings in the profile to their defaults. To prevent resetting values, always specify the whole configuration of the network connection profile in the playbook, including the settings that you do not want to change.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles\">You have prepared the control node and the managed nodes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in to the control node as a user who can run playbooks on the managed nodes.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe account you use to connect to the managed nodes has \u003Ccode class=\"literal\">sudo\u003C/code> permissions on them.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a playbook file, for example \u003Ccode class=\"literal\">~/playbook.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\n- name: Configure the network\n  hosts: managed-node-01.example.com\n  tasks:\n    - name: Ethernet connection profile with dynamic IP address settings and offload features\n      ansible.builtin.include_role:\n        name: rhel-system-roles.network\n      vars:\n        network_connections:\n          - name: enp1s0\n            type: ethernet\n            autoconnect: yes\n            ip:\n              dhcp4: yes\n              auto6: yes\n            \u003Cspan class=\"strong strong\">\u003Cstrong>ethtool:\u003C/strong>\u003C/span>\n              \u003Cspan class=\"strong strong\">\u003Cstrong>features:\u003C/strong>\u003C/span>\n                \u003Cspan class=\"strong strong\">\u003Cstrong>gro: no\u003C/strong>\u003C/span>\n                \u003Cspan class=\"strong strong\">\u003Cstrong>gso: yes\u003C/strong>\u003C/span>\n                \u003Cspan class=\"strong strong\">\u003Cstrong>tx_sctp_segmentation: no\u003C/strong>\u003C/span>\n            state: up\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe settings specified in the example playbook include the following:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">gro: no\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tDisables Generic receive offload (GRO).\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">gso: yes\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tEnables Generic segmentation offload (GSO).\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">tx_sctp_segmentation: no\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tDisables TX stream control transmission protocol (SCTP) segmentation.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details about all variables used in the playbook, see the \u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file on the control node.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tValidate the playbook syntax:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --syntax-check ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that this command only validates the syntax and does not protect against a wrong but valid configuration.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the playbook:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tQuery the Ansible facts of the managed node and verify the offload settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ansible managed-node-01.example.com -m ansible.builtin.setup\u003C/strong>\u003C/span>\n...\n        \"ansible_enp1s0\": {\n            \"active\": true,\n            \"device\": \"enp1s0\",\n\t    \"features\": {\n\t        ...\n\t\t\"rx_gro_hw\": \"off,\n\t        ...\n\t\t\"tx_gso_list\": \"on,\n\t        ...\n\t\t\"tx_sctp_segmentation\": \"off\",\n\t\t...\n            }\n...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/rhel-system-roles/network/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-an-ethtool-coalesce-settings-by-using-nmcli_configuring-ethtool-settings-in-networkmanager-connection-profiles\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">30.3. Configuring an ethtool coalesce settings by using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can use NetworkManager to set \u003Ccode class=\"literal\">ethtool\u003C/code> coalesce settings in connection profiles.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, to set the maximum number of received packets to delay to \u003Ccode class=\"literal\">128\u003C/code> in the \u003Ccode class=\"literal\">enp1s0\u003C/code> connection profile, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> ethtool.coalesce-rx-frames \u003Cspan class=\"emphasis\">\u003Cem>128\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo remove a coalesce setting, set it to a null value. For example, to remove the \u003Ccode class=\"literal\">ethtool.coalesce-rx-frames\u003C/code> setting, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> ethtool.coalesce-rx-frames \"\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo reactivate the network profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ethtool -c\u003C/code> command to display the current offload features of a network device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ethtool -c \u003Cspan class=\"emphasis\">\u003Cem>network_device\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings-nmcli(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-an-ethtool-coalesce-settings-by-using-the-network-rhel-system-role_configuring-ethtool-settings-in-networkmanager-connection-profiles\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">30.4. Configuring an \u003Ccode class=\"literal\">ethtool\u003C/code> coalesce settings by using the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBy using interrupt coalescing, the system collects network packets and generates a single interrupt for multiple packets. This increases the amount of data sent to the kernel with one hardware interrupt, which reduces the interrupt load, and maximizes the throughput. You configure coalesce settings in the connection profile of the network interface. By using Ansible and the \u003Ccode class=\"literal\">network\u003C/code> RHEL role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tYou cannot use the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role to update only specific values in an existing connection profile. The role ensures that a connection profile exactly matches the settings in a playbook. If a connection profile with the same name already exists, the role applies the settings from the playbook and resets all other settings in the profile to their defaults. To prevent resetting values, always specify the whole configuration of the network connection profile in the playbook, including the settings that you do not want to change.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles\">You have prepared the control node and the managed nodes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in to the control node as a user who can run playbooks on the managed nodes.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe account you use to connect to the managed nodes has \u003Ccode class=\"literal\">sudo\u003C/code> permissions on them.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a playbook file, for example \u003Ccode class=\"literal\">~/playbook.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\n- name: Configure the network\n  hosts: managed-node-01.example.com\n  tasks:\n    - name: Ethernet connection profile with dynamic IP address settings and coalesce settings\n      ansible.builtin.include_role:\n        name: rhel-system-roles.network\n      vars:\n        network_connections:\n          - name: enp1s0\n            type: ethernet\n            autoconnect: yes\n            ip:\n              dhcp4: yes\n              auto6: yes\n            \u003Cspan class=\"strong strong\">\u003Cstrong>ethtool:\u003C/strong>\u003C/span>\n              \u003Cspan class=\"strong strong\">\u003Cstrong>coalesce:\u003C/strong>\u003C/span>\n                \u003Cspan class=\"strong strong\">\u003Cstrong>rx_frames: 128\u003C/strong>\u003C/span>\n                \u003Cspan class=\"strong strong\">\u003Cstrong>tx_frames: 128\u003C/strong>\u003C/span>\n            state: up\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe settings specified in the example playbook include the following:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">rx_frames: \u003Cspan class=\"emphasis\">\u003Cem>&lt;value&gt;\u003C/em>\u003C/span>\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tSets the number of RX frames.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">gso: \u003Cspan class=\"emphasis\">\u003Cem>&lt;value&gt;\u003C/em>\u003C/span>\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tSets the number of TX frames.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details about all variables used in the playbook, see the \u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file on the control node.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tValidate the playbook syntax:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --syntax-check ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that this command only validates the syntax and does not protect against a wrong but valid configuration.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the playbook:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the current offload features of the network device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ansible managed-node-01.example.com -m command -a 'ethtool -c enp1s0'\u003C/strong>\u003C/span>\nmanaged-node-01.example.com | CHANGED | rc=0 &gt;&gt;\n...\nrx-frames:\t128\n...\ntx-frames:\t128\n...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/rhel-system-roles/network/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"increasing-the-ring-buffers-to-reduce-a-high-packet-drop-rate_configuring-ethtool-settings-in-networkmanager-connection-profiles\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">30.5. Increasing the ring buffer size to reduce a high packet drop rate by using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIncrease the size of an Ethernet device’s ring buffers if the packet drop rate causes applications to report a loss of data, timeouts, or other issues.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tReceive ring buffers are shared between the device driver and network interface controller (NIC). The card assigns a transmit (TX) and receive (RX) ring buffer. As the name implies, the ring buffer is a circular buffer where an overflow overwrites existing data. There are two ways to move data from the NIC to the kernel, hardware interrupts and software interrupts, also called SoftIRQs.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe kernel uses the RX ring buffer to store incoming packets until the device driver can process them. The device driver drains the RX ring, typically by using SoftIRQs, which puts the incoming packets into a kernel data structure called an \u003Ccode class=\"literal\">sk_buff\u003C/code> or \u003Ccode class=\"literal\">skb\u003C/code> to begin its journey through the kernel and up to the application that owns the relevant socket.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe kernel uses the TX ring buffer to hold outgoing packets which should be sent to the network. These ring buffers reside at the bottom of the stack and are a crucial point at which packet drop can occur, which in turn will adversely affect network performance.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the packet drop statistics of the interface:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ethtool -S \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n    ...\n    rx_queue_0_drops: \u003Cspan class=\"emphasis\">\u003Cem>97326\u003C/em>\u003C/span>\n    rx_queue_1_drops: \u003Cspan class=\"emphasis\">\u003Cem>63783\u003C/em>\u003C/span>\n    ...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that the output of the command depends on the network card and the driver.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tHigh values in \u003Ccode class=\"literal\">discard\u003C/code> or \u003Ccode class=\"literal\">drop\u003C/code> counters indicate that the available buffer fills up faster than the kernel can process the packets. Increasing the ring buffers can help to avoid such loss.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the maximum ring buffer sizes:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ethtool -g \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n Ring parameters for \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>:\n Pre-set maximums:\n RX:             \u003Cspan class=\"emphasis\">\u003Cem>4096\u003C/em>\u003C/span>\n RX Mini:        \u003Cspan class=\"emphasis\">\u003Cem>0\u003C/em>\u003C/span>\n RX Jumbo:       \u003Cspan class=\"emphasis\">\u003Cem>16320\u003C/em>\u003C/span>\n TX:             \u003Cspan class=\"emphasis\">\u003Cem>4096\u003C/em>\u003C/span>\n Current hardware settings:\n RX:             \u003Cspan class=\"emphasis\">\u003Cem>255\u003C/em>\u003C/span>\n RX Mini:        \u003Cspan class=\"emphasis\">\u003Cem>0\u003C/em>\u003C/span>\n RX Jumbo:       \u003Cspan class=\"emphasis\">\u003Cem>0\u003C/em>\u003C/span>\n TX:             \u003Cspan class=\"emphasis\">\u003Cem>255\u003C/em>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the values in the \u003Ccode class=\"literal\">Pre-set maximums\u003C/code> section are higher than in the \u003Ccode class=\"literal\">Current hardware settings\u003C/code> section, you can change the settings in the next steps.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIdentify the NetworkManager connection profile that uses the interface:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection show\u003C/strong>\u003C/span>\nNAME                UUID                                  TYPE      DEVICE\n\u003Cspan class=\"emphasis\">\u003Cem>Example-Connection\u003C/em>\u003C/span>  \u003Cspan class=\"emphasis\">\u003Cem>a5eb6490-cc20-3668-81f8-0314a27f3f75\u003C/em>\u003C/span>  ethernet  \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUpdate the connection profile, and increase the ring buffers:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo increase the RX ring buffer, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>Example-Connection\u003C/em>\u003C/span> ethtool.ring-rx \u003Cspan class=\"emphasis\">\u003Cem>4096\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo increase the TX ring buffer, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>Example-Connection\u003C/em>\u003C/span> ethtool.ring-tx \u003Cspan class=\"emphasis\">\u003Cem>4096\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReload the NetworkManager connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>Example-Connection\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tDepending on the driver your NIC uses, changing in the ring buffer can shortly interrupt the network connection.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/2073223\">ifconfig and ip commands report packet drops\u003C/a> (Red Hat Knowledgebase)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/742043\">Should I be concerned about a 0.05% packet drop rate?\u003C/a> (Red Hat Knowledgebase)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">ethtool(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_increasing-the-ring-buffer-size-to-reduce-a-high-packet-drop-rate-using-the-network-rhel-system-role_configuring-ethtool-settings-in-networkmanager-connection-profiles\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">30.6. Increasing the ring buffer size to reduce a high packet drop rate by using the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIncrease the size of an Ethernet device’s ring buffers if the packet drop rate causes applications to report a loss of data, timeouts, or other issues.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tRing buffers are circular buffers where an overflow overwrites existing data. The network card assigns a transmit (TX) and receive (RX) ring buffer. Receive ring buffers are shared between the device driver and the network interface controller (NIC). Data can move from NIC to the kernel through either hardware interrupts or software interrupts, also called SoftIRQs.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe kernel uses the RX ring buffer to store incoming packets until the device driver can process them. The device driver drains the RX ring, typically by using SoftIRQs, which puts the incoming packets into a kernel data structure called an \u003Ccode class=\"literal\">sk_buff\u003C/code> or \u003Ccode class=\"literal\">skb\u003C/code> to begin its journey through the kernel and up to the application that owns the relevant socket.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe kernel uses the TX ring buffer to hold outgoing packets which should be sent to the network. These ring buffers reside at the bottom of the stack and are a crucial point at which packet drop can occur, which in turn will adversely affect network performance.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou configure ring buffer settings in the NetworkManager connection profiles. By using Ansible and the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tYou cannot use the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role to update only specific values in an existing connection profile. The role ensures that a connection profile exactly matches the settings in a playbook. If a connection profile with the same name already exists, the role applies the settings from the playbook and resets all other settings in the profile to their defaults. To prevent resetting values, always specify the whole configuration of the network connection profile in the playbook, including the settings that you do not want to change.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles\">You have prepared the control node and the managed nodes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in to the control node as a user who can run playbooks on the managed nodes.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe account you use to connect to the managed nodes has \u003Ccode class=\"literal\">sudo\u003C/code> permissions on them.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou know the maximum ring buffer sizes that the device supports.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a playbook file, for example \u003Ccode class=\"literal\">~/playbook.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\n- name: Configure the network\n  hosts: managed-node-01.example.com\n  tasks:\n    - name: Ethernet connection profile with dynamic IP address setting and increased ring buffer sizes\n      ansible.builtin.include_role:\n        name: rhel-system-roles.network\n      vars:\n        network_connections:\n          - name: enp1s0\n            type: ethernet\n            autoconnect: yes\n            ip:\n              dhcp4: yes\n              auto6: yes\n            \u003Cspan class=\"strong strong\">\u003Cstrong>ethtool:\u003C/strong>\u003C/span>\n              \u003Cspan class=\"strong strong\">\u003Cstrong>ring:\u003C/strong>\u003C/span>\n                \u003Cspan class=\"strong strong\">\u003Cstrong>rx: 4096\u003C/strong>\u003C/span>\n                \u003Cspan class=\"strong strong\">\u003Cstrong>tx: 4096\u003C/strong>\u003C/span>\n            state: up\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe settings specified in the example playbook include the following:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">rx: \u003Cspan class=\"emphasis\">\u003Cem>&lt;value&gt;\u003C/em>\u003C/span>\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tSets the maximum number of received ring buffer entries.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">tx: \u003Cspan class=\"emphasis\">\u003Cem>&lt;value&gt;\u003C/em>\u003C/span>\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tSets the maximum number of transmitted ring buffer entries.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details about all variables used in the playbook, see the \u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file on the control node.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tValidate the playbook syntax:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --syntax-check ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that this command only validates the syntax and does not protect against a wrong but valid configuration.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the playbook:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the maximum ring buffer sizes:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ansible managed-node-01.example.com -m command -a 'ethtool -g enp1s0'\u003C/strong>\u003C/span>\nmanaged-node-01.example.com | CHANGED | rc=0 &gt;&gt;\n...\nCurrent hardware settings:\nRX:             4096\nRX Mini:        0\nRX Jumbo:       0\nTX:             4096\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/rhel-system-roles/network/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-an-ethtool-channels-settings-by-using-nmcli_configuring-ethtool-settings-in-networkmanager-connection-profiles\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">30.7. Configuring an ethtool channels settings by using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBy using NetworkManager, you can manage network devices and connections. The \u003Ccode class=\"literal\">ethtool\u003C/code> utility manages the link speed and related settings of a network interface card. \u003Ccode class=\"literal\">ethtool\u003C/code> handles IRQ based communication with associated devices to manage related channels settings in connection profiles.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the channels associated with a network device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ethtool --show-channels \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nChannel parameters for \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>:\nPre-set maximums:\nRX:\t\t4\nTX:\t\t3\nOther:\t   10\nCombined:  63\n\nCurrent hardware settings:\nRX:   \t 1\nTX:   \t 1\nOther:   1\nCombined:  1\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUpdate the channel settings of a network interface:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> ethtool.channels-rx \u003Cspan class=\"emphasis\">\u003Cem>4\u003C/em>\u003C/span> ethtool.channels-tx \u003Cspan class=\"emphasis\">\u003Cem>3\u003C/em>\u003C/span> ethtools.channels-other \u003Cspan class=\"emphasis\">\u003Cem>9\u003C/em>\u003C/span> ethtool.channels-combined \u003Cspan class=\"emphasis\">\u003Cem>50\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReactivate the network profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCheck the updated channel settings associated with the network device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ethtool --show-channels \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nChannel parameters for \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>:\nPre-set maximums:\nRX:\t\t4\nTX:\t\t3\nOther:\t  10\nCombined: 63\n\nCurrent hardware settings:\nRX:   \t 4\nTX:   \t 3\nOther:   9\nCombined:  50\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nmcli(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"introduction-to-networkmanager-debugging_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 31. Introduction to NetworkManager Debugging\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tIncreasing the log levels for all or certain domains helps to log more details of the operations that NetworkManager performs. You can use this information to troubleshoot problems. NetworkManager provides different levels and domains to produce logging information. The \u003Ccode class=\"literal\">/etc/NetworkManager/NetworkManager.conf\u003C/code> file is the main configuration file for NetworkManager. The logs are stored in the journal.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"introduction-to-networkmanager-reapply-method_introduction-to-networkmanager-debugging\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">31.1. Introduction to NetworkManager reapply method\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">NetworkManager\u003C/code> service uses a profile to manage the connection settings of a device. Desktop Bus (D-Bus) API can create, modify, and delete these connection settings. For any changes in a profile, D-Bus API clones the existing settings to the modified settings of a connection. Despite cloning, changes do not apply to the modified settings. To make it effective, reactivate the existing settings of a connection or use the \u003Ccode class=\"literal\">reapply()\u003C/code> method.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">reapply()\u003C/code> method has the following features:\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tUpdating modified connection settings without deactivation or restart of a network interface.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRemoving pending changes from the modified connection settings. As \u003Ccode class=\"literal\">NetworkManager\u003C/code> does not revert the manual changes, you can reconfigure the device and revert external or manual parameters.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCreating different modified connection settings than that of the existing connection settings.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tAlso, \u003Ccode class=\"literal\">reapply()\u003C/code> method supports the following attributes:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge.ageing-time\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge.forward-delay\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge.group-address\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge.group-forward-mask\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge.hello-time\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge.max-age\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge.multicast-hash-max\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge.multicast-last-member-count\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge.multicast-last-member-interval\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge.multicast-membership-interval\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge.multicast-querier\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge.multicast-querier-interval\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge.multicast-query-interval\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge.multicast-query-response-interval\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge.multicast-query-use-ifaddr\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge.multicast-router\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge.multicast-snooping\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge.multicast-startup-query-count\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge.multicast-startup-query-interval\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge.priority\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge.stp\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge.VLAN-filtering\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge.VLAN-protocol\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge.VLANs\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">802-3-ethernet.accept-all-mac-addresses\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">802-3-ethernet.cloned-mac-address\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv4.addresses\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv4.dhcp-client-id\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv4.dhcp-iaid\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv4.dhcp-timeout\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv4.DNS\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv4.DNS-priority\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv4.DNS-search\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv4.gateway\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv4.ignore-auto-DNS\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv4.ignore-auto-routes\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv4.may-fail\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv4.method\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv4.never-default\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv4.route-table\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv4.routes\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv4.routing-rules\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv6.addr-gen-mode\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv6.addresses\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv6.dhcp-duid\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv6.dhcp-iaid\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv6.dhcp-timeout\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv6.DNS\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv6.DNS-priority\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv6.DNS-search\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv6.gateway\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv6.ignore-auto-DNS\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv6.may-fail\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv6.method\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv6.never-default\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv6.ra-timeout\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv6.route-metric\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv6.route-table\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv6.routes\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">IPv6.routing-rules\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings-nmcli(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"setting-the-networkmanager-log-level_introduction-to-networkmanager-debugging\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">31.2. Setting the NetworkManager log level\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBy default, all the log domains are set to record the \u003Ccode class=\"literal\">INFO\u003C/code> log level. Disable rate-limiting before collecting debug logs. With rate-limiting, \u003Ccode class=\"literal\">systemd-journald\u003C/code> drops messages if there are too many of them in a short time. This can occur when the log level is \u003Ccode class=\"literal\">TRACE\u003C/code>.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThis procedure disables rate-limiting and enables recording debug logs for the all (ALL) domains.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo disable rate-limiting, edit the \u003Ccode class=\"literal\">/etc/systemd/journald.conf\u003C/code> file, uncomment the \u003Ccode class=\"literal\">RateLimitBurst\u003C/code> parameter in the \u003Ccode class=\"literal\">[Journal]\u003C/code> section, and set its value as \u003Ccode class=\"literal\">0\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">RateLimitBurst=0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRestart the \u003Ccode class=\"literal\">systemd-journald\u003C/code> service.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl restart systemd-journald\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">/etc/NetworkManager/conf.d/95-nm-debug.conf\u003C/code> file with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">[logging]\ndomains=ALL:TRACE\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">domains\u003C/code> parameter can contain multiple comma-separated \u003Ccode class=\"literal\">domain:level\u003C/code> pairs.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRestart the NetworkManager service.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl restart NetworkManager\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tQuery the \u003Ccode class=\"literal\">systemd\u003C/code> journal to display the journal entries of the \u003Ccode class=\"literal\">NetworkManager\u003C/code> unit:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>journalctl -u NetworkManager\u003C/strong>\u003C/span>\n...\nJun 30 15:24:32 server NetworkManager[164187]: &lt;debug&gt; [1656595472.4939] active-connection[0x5565143c80a0]: update activation type from assume to managed\nJun 30 15:24:32 server NetworkManager[164187]: &lt;trace&gt; [1656595472.4939] device[55b33c3bdb72840c] (enp1s0): sys-iface-state: assume -&gt; managed\nJun 30 15:24:32 server NetworkManager[164187]: &lt;trace&gt; [1656595472.4939] l3cfg[4281fdf43e356454,ifindex=3]: commit type register (type \"update\", source \"device\", existing a369f23014b9ede3) -&gt; a369f23014b9ede3\nJun 30 15:24:32 server NetworkManager[164187]: &lt;info&gt;  [1656595472.4940] manager: NetworkManager state is now CONNECTED_SITE\n...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"temporarily-setting-log-levels-at-run-time-using-nmcli_introduction-to-networkmanager-debugging\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">31.3. Temporarily setting log levels at run time using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can change the log level at run time using \u003Ccode class=\"literal\">nmcli\u003C/code>.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Display the current logging settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli general logging\u003C/strong>\u003C/span>\n  LEVEL  DOMAINS\n  INFO   PLATFORM,RFKILL,ETHER,WIFI,BT,MB,DHCP4,DHCP6,PPP,WIFI_SCAN,IP4,IP6,A\nUTOIP4,DNS,VPN,SHARING,SUPPLICANT,AGENTS,SETTINGS,SUSPEND,CORE,DEVICE,OLPC,\nWIMAX,INFINIBAND,FIREWALL,ADSL,BOND,VLAN,BRIDGE,DBUS_PROPS,TEAM,CONCHECK,DC\nB,DISPATCH\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo modify the logging level and domains, use the following options:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo set the log level for all domains to the same \u003Ccode class=\"literal\">LEVEL\u003C/code>, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli general logging level \u003Cspan class=\"emphasis\">\u003Cem>LEVEL\u003C/em>\u003C/span> domains \u003Cspan class=\"emphasis\">\u003Cem>ALL\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo change the level for specific domains, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli general logging level \u003Cspan class=\"emphasis\">\u003Cem>LEVEL\u003C/em>\u003C/span> domains \u003Cspan class=\"emphasis\">\u003Cem>DOMAINS\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tNote that updating the logging level using this command disables logging for all the other domains.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo change the level of specific domains and preserve the level of all other domains, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli general logging level KEEP domains \u003Cspan class=\"emphasis\">\u003Cem>DOMAIN:LEVEL\u003C/em>\u003C/span>,\u003Cspan class=\"emphasis\">\u003Cem>DOMAIN:LEVEL\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"viewing-networkmanager-logs_introduction-to-networkmanager-debugging\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">31.4. Viewing NetworkManager logs\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can view the NetworkManager logs for troubleshooting.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo view the logs, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>journalctl -u NetworkManager -b\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">NetworkManager.conf(5)\u003C/code> and \u003Ccode class=\"literal\">journalctl(1)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"debugging-levels-and-domains_introduction-to-networkmanager-debugging\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">31.5. Debugging levels and domains\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">levels\u003C/code> and \u003Ccode class=\"literal\">domains\u003C/code> parameters to manage the debugging for NetworkManager. The level defines the verbosity level, whereas the domains define the category of the messages to record the logs with given severity (\u003Ccode class=\"literal\">level\u003C/code>).\n\t\t\t\u003C/p>\u003Crh-table>\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccolgroup>\u003Ccol style=\"width: 25%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 75%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140053157209936\" scope=\"col\">Log levels\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140053157208848\" scope=\"col\">Description\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053157209936\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">OFF\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053157208848\"> \u003Cp>\n\t\t\t\t\t\t\t\tDoes not log any messages about NetworkManager\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053157209936\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">ERR\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053157208848\"> \u003Cp>\n\t\t\t\t\t\t\t\tLogs only critical errors\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053157209936\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">WARN\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053157208848\"> \u003Cp>\n\t\t\t\t\t\t\t\tLogs warnings that can reflect the operation\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053157209936\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">INFO\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053157208848\"> \u003Cp>\n\t\t\t\t\t\t\t\tLogs various informational messages that are useful for tracking state and operations\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053157209936\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">DEBUG\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053157208848\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnables verbose logging for debugging purposes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053157209936\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">TRACE\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053157208848\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnables more verbose logging than the \u003Ccode class=\"literal\">DEBUG\u003C/code> level\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cp>\n\t\t\t\tNote that subsequent levels log all messages from earlier levels. For example, setting the log level to \u003Ccode class=\"literal\">INFO\u003C/code> also logs messages contained in the \u003Ccode class=\"literal\">ERR\u003C/code> and \u003Ccode class=\"literal\">WARN\u003C/code> log level.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">NetworkManager.conf(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_using-lldp-to-debug-network-configuration-problems_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 32. Using LLDP to debug network configuration problems\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tYou can use the Link Layer Discovery Protocol (LLDP) to debug network configuration problems in the topology. This means that, LLDP can report configuration inconsistencies with other hosts or routers and switches.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"proc_debugging-an-incorrect-vlan-configuration-using-lldp-information_assembly_using-lldp-to-debug-network-configuration-problems\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">32.1. Debugging an incorrect VLAN configuration using LLDP information\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tIf you configured a switch port to use a certain VLAN and a host does not receive these VLAN packets, you can use the Link Layer Discovery Protocol (LLDP) to debug the problem. Perform this procedure on the host that does not receive the packets.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">nmstate\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe switch supports LLDP.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tLLDP is enabled on neighbor devices.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">~/enable-LLDP-enp1s0.yml\u003C/code> file with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">interfaces:\n  - name: \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\n    type: ethernet\n    lldp:\n      enabled: true\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">~/enable-LLDP-enp1s0.yml\u003C/code> file to enable LLDP on interface \u003Ccode class=\"literal\">enp1s0\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl apply ~/enable-LLDP-enp1s0.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the LLDP information:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl show enp1s0\u003C/strong>\u003C/span>\n- name: enp1s0\n  type: ethernet\n  state: up\n  ipv4:\n    enabled: false\n    dhcp: false\n  ipv6:\n    enabled: false\n    autoconf: false\n    dhcp: false\n  lldp:\n    enabled: true\n    neighbors:\n    - - type: 5\n        system-name: Summit300-48\n      - type: 6\n        system-description: Summit300-48 - Version 7.4e.1 (Build 5)\n          05/27/05 04:53:11\n      - type: 7\n        system-capabilities:\n        - MAC Bridge component\n        - Router\n      - type: 1\n        _description: MAC address\n        chassis-id: 00:01:30:F9:AD:A0\n        chassis-id-type: 4\n      - type: 2\n        _description: Interface name\n        port-id: 1/1\n        port-id-type: 5\n      - type: 127\n        ieee-802-1-vlans:\n        - name: v2-0488-03-0505\n          vid: 488\n        oui: 00:80:c2\n        subtype: 3\n      - type: 127\n        ieee-802-3-mac-phy-conf:\n          autoneg: true\n          operational-mau-type: 16\n          pmd-autoneg-cap: 27648\n        oui: 00:12:0f\n        subtype: 1\n      - type: 127\n        ieee-802-1-ppvids:\n        - 0\n        oui: 00:80:c2\n        subtype: 2\n      - type: 8\n        management-addresses:\n        - address: 00:01:30:F9:AD:A0\n          address-subtype: MAC\n          interface-number: 1001\n          interface-number-subtype: 2\n      - type: 127\n        ieee-802-3-max-frame-size: 1522\n        oui: 00:12:0f\n        subtype: 4\n  mac-address: 82:75:BE:6F:8C:7A\n  mtu: 1500\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify the output to ensure that the settings match your expected configuration. For example, the LLDP information of the interface connected to the switch shows that the switch port this host is connected to uses VLAN ID \u003Ccode class=\"literal\">448\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">- type: 127\n        ieee-802-1-vlans:\n        - name: v2-0488-03-0505\n          vid: 488\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the network configuration of the \u003Ccode class=\"literal\">enp1s0\u003C/code> interface uses a different VLAN ID, change it accordingly.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"_additional-resources _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-vlan-tagging_configuring-and-managing-networking\" title=\"Chapter 5. Configuring VLAN tagging\">Configuring VLAN tagging\u003C/a>\n\t\t\t\t\u003C/p>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"linux-traffic-control_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 33. Linux traffic control\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tLinux offers tools for managing and manipulating the transmission of packets. The Linux Traffic Control (TC) subsystem helps in policing, classifying, shaping, and scheduling network traffic. TC also mangles the packet content during classification by using filters and actions. The TC subsystem achieves this by using queuing disciplines (\u003Ccode class=\"literal\">qdisc\u003C/code>), a fundamental element of the TC architecture.\n\t\t\u003C/p>\u003Cp>\n\t\t\tThe scheduling mechanism arranges or rearranges the packets before they enter or exit different queues. The most common scheduler is the First-In-First-Out (FIFO) scheduler. You can do the \u003Ccode class=\"literal\">qdiscs\u003C/code> operations temporarily using the \u003Ccode class=\"literal\">tc\u003C/code> utility or permanently using NetworkManager.\n\t\t\u003C/p>\u003Cp>\n\t\t\tIn Red Hat Enterprise Linux, you can configure default queueing disciplines in various ways to manage the traffic on a network interface.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"overview-of-queuing-disciplines_linux-traffic-control\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">33.1. Overview of queuing disciplines\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tQueuing disciplines (\u003Ccode class=\"literal\">qdiscs\u003C/code>) help with queuing up and, later, scheduling of traffic transmission by a network interface. A \u003Ccode class=\"literal\">qdisc\u003C/code> has two operations;\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tenqueue requests so that a packet can be queued up for later transmission and\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tdequeue requests so that one of the queued-up packets can be chosen for immediate transmission.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tEvery \u003Ccode class=\"literal\">qdisc\u003C/code> has a 16-bit hexadecimal identification number called a \u003Ccode class=\"literal\">handle\u003C/code>, with an attached colon, such as \u003Ccode class=\"literal\">1:\u003C/code> or \u003Ccode class=\"literal\">abcd:\u003C/code>. This number is called the \u003Ccode class=\"literal\">qdisc\u003C/code> major number. If a \u003Ccode class=\"literal\">qdisc\u003C/code> has classes, then the identifiers are formed as a pair of two numbers with the major number before the minor, \u003Ccode class=\"literal\">&lt;major&gt;:&lt;minor&gt;\u003C/code>, for example \u003Ccode class=\"literal\">abcd:1\u003C/code>. The numbering scheme for the minor numbers depends on the \u003Ccode class=\"literal\">qdisc\u003C/code> type. Sometimes the numbering is systematic, where the first-class has the ID \u003Ccode class=\"literal\">&lt;major&gt;:1\u003C/code>, the second one \u003Ccode class=\"literal\">&lt;major&gt;:2\u003C/code>, and so on. Some \u003Ccode class=\"literal\">qdiscs\u003C/code> allow the user to set class minor numbers arbitrarily when creating the class.\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Classful \u003Ccode class=\"literal\">qdiscs\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tDifferent types of \u003Ccode class=\"literal\">qdiscs\u003C/code> exist and help in the transfer of packets to and from a networking interface. You can configure \u003Ccode class=\"literal\">qdiscs\u003C/code> with root, parent, or child classes. The point where children can be attached are called classes. Classes in \u003Ccode class=\"literal\">qdisc\u003C/code> are flexible and can always contain either multiple children classes or a single child, \u003Ccode class=\"literal\">qdisc\u003C/code>. There is no prohibition against a class containing a classful \u003Ccode class=\"literal\">qdisc\u003C/code> itself, this facilitates complex traffic control scenarios.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClassful \u003Ccode class=\"literal\">qdiscs\u003C/code> do not store any packets themselves. Instead, they enqueue and dequeue requests down to one of their children according to criteria specific to the \u003Ccode class=\"literal\">qdisc\u003C/code>. Eventually, this recursive packet passing ends up where the packets are stored (or picked up from in the case of dequeuing).\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Classless \u003Ccode class=\"literal\">qdiscs\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tSome \u003Ccode class=\"literal\">qdiscs\u003C/code> contain no child classes and they are called classless \u003Ccode class=\"literal\">qdiscs\u003C/code>. Classless \u003Ccode class=\"literal\">qdiscs\u003C/code> require less customization compared to classful \u003Ccode class=\"literal\">qdiscs\u003C/code>. It is usually enough to attach them to an interface.\n\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">tc(8)\u003C/code> and \u003Ccode class=\"literal\">tc-actions(8)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"introduction-to-connection-tracking_linux-traffic-control\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">33.2. Introduction to connection tracking\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tAt a firewall, the \u003Ccode class=\"literal\">Netfilter\u003C/code> framework filters packets from an external network. After a packet arrives, \u003Ccode class=\"literal\">Netfilter\u003C/code> assigns a connection tracking entry. Connection tracking is a Linux kernel networking feature for logical networks that tracks connections and identifies packet flow in those connections. This feature filters and analyzes every packet, sets up the connection tracking table to store connection status, and updates the connection status based on identified packets. For example, in the case of FTP connection, \u003Ccode class=\"literal\">Netfilter\u003C/code> assigns a connection tracking entry to ensure all packets of FTP connection work in the same manner. The connection tracking entry stores a \u003Ccode class=\"literal\">Netfilter\u003C/code> mark and tracks the connection state information in the memory table in which a new packet tuple maps with an existing entry. If the packet tuple does not map with an existing entry, the packet adds a new connection tracking entry that groups packets of the same connection.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can control and analyze traffic on the network interface. The \u003Ccode class=\"literal\">tc\u003C/code> traffic controller utility uses the \u003Ccode class=\"literal\">qdisc\u003C/code> discipline to configure the packet scheduler in the network. The \u003Ccode class=\"literal\">qdisc\u003C/code> kernel-configured queuing discipline enqueues packets to the interface. By using \u003Ccode class=\"literal\">qdisc\u003C/code>, Kernel catches all the traffic before a network interface transmits it. Also, to limit the bandwidth rate of packets belonging to the same connection, use the \u003Ccode class=\"literal\">tc qdisc\u003C/code> command.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo retrieve data from connection tracking marks into various fields, use the \u003Ccode class=\"literal\">tc\u003C/code> utility with the \u003Ccode class=\"literal\">ctinfo\u003C/code> module and the \u003Ccode class=\"literal\">connmark\u003C/code> functionality. For storing packet mark information, the \u003Ccode class=\"literal\">ctinfo\u003C/code> module copies the \u003Ccode class=\"literal\">Netfilter\u003C/code> mark and the connection state information into a socket buffer (\u003Ccode class=\"literal\">skb\u003C/code>) mark metadata field.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTransmitting a packet over a physical medium removes all the metadata of a packet. Before the packet loses its metadata, the \u003Ccode class=\"literal\">ctinfo\u003C/code> module maps and copies the \u003Ccode class=\"literal\">Netfilter\u003C/code> mark value to a specific value of the Diffserv code point (DSCP) in the packet’s \u003Ccode class=\"literal\">IP\u003C/code> field.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">tc(8)\u003C/code> and \u003Ccode class=\"literal\">tc-ctinfo(8)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"inspecting-qdisc-of-a-network-interface-using-the-tc-utility_linux-traffic-control\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">33.3. Inspecting qdiscs of a network interface using the tc utility\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBy default, Red Hat Enterprise Linux systems use \u003Ccode class=\"literal\">fq_codel\u003C/code> \u003Ccode class=\"literal\">qdisc\u003C/code>. You can inspect the \u003Ccode class=\"literal\">qdisc\u003C/code> counters using the \u003Ccode class=\"literal\">tc\u003C/code> utility.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: View your current \u003Ccode class=\"literal\">qdisc\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tc qdisc show dev \u003Cspan class=\"emphasis\">\u003Cem>enp0s1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInspect the current \u003Ccode class=\"literal\">qdisc\u003C/code> counters:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tc -s qdisc show dev \u003Cspan class=\"emphasis\">\u003Cem>enp0s1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nqdisc fq_codel 0: root refcnt 2 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms memory_limit 32Mb ecn\nSent 1008193 bytes 5559 pkt (dropped 233, overlimits 55 requeues 77)\nbacklog 0b 0p requeues 0\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">dropped\u003C/code> - the number of times a packet is dropped because all queues are full\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">overlimits\u003C/code> - the number of times the configured link capacity is filled\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">sent\u003C/code> - the number of dequeues\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"updating-the-default-qdisc_linux-traffic-control\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">33.4. Updating the default qdisc\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIf you observe networking packet losses with the current \u003Ccode class=\"literal\">qdisc\u003C/code>, you can change the \u003Ccode class=\"literal\">qdisc\u003C/code> based on your network-requirements.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tView the current default \u003Ccode class=\"literal\">qdisc\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>sysctl -a | grep qdisc\u003C/strong>\u003C/span>\nnet.core.default_qdisc = fq_codel\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tView the \u003Ccode class=\"literal\">qdisc\u003C/code> of current Ethernet connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tc -s qdisc show dev \u003Cspan class=\"emphasis\">\u003Cem>enp0s1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nqdisc fq_codel 0: root refcnt 2 limit 10240p flows 1024 quantum 1514 target 5.0ms interval 100.0ms memory_limit 32Mb ecn\nSent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)\nbacklog 0b 0p requeues 0\nmaxpacket 0 drop_overlimit 0 new_flow_count 0 ecn_mark 0\nnew_flows_len 0 old_flows_len 0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUpdate the existing \u003Ccode class=\"literal\">qdisc\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>sysctl -w net.core.default_qdisc=pfifo_fast\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo apply the changes, reload the network driver:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>modprobe -r \u003Cspan class=\"emphasis\">\u003Cem>NETWORKDRIVERNAME\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>modprobe \u003Cspan class=\"emphasis\">\u003Cem>NETWORKDRIVERNAME\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart the network interface:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link set \u003Cspan class=\"emphasis\">\u003Cem>enp0s1\u003C/em>\u003C/span> up\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tView the \u003Ccode class=\"literal\">qdisc\u003C/code> of the Ethernet connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tc -s qdisc show dev \u003Cspan class=\"emphasis\">\u003Cem>enp0s1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nqdisc \u003Cspan class=\"emphasis\">\u003Cem>pfifo_fast\u003C/em>\u003C/span> 0: root refcnt 2 bands 3 priomap  1 2 2 2 1 2 0 0 1 1 1 1 1 1 1 1\n Sent 373186 bytes 5333 pkt (dropped 0, overlimits 0 requeues 0)\n backlog 0b 0p requeues 0\n....\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/2587\">How to set \u003Ccode class=\"literal\">sysctl\u003C/code> variables on Red Hat Enterprise Linux\u003C/a> (Red Hat Knowledgebase)\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"temporarily-setting-the-current-qdisc-of-a-network-interface-using-the-tc-utility_linux-traffic-control\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">33.5. Temporarily setting the current qdisc of a network interface using the tc utility\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can update the current \u003Ccode class=\"literal\">qdisc\u003C/code> without changing the default one.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: View the current \u003Ccode class=\"literal\">qdisc\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tc -s qdisc show dev \u003Cspan class=\"emphasis\">\u003Cem>enp0s1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUpdate the current \u003Ccode class=\"literal\">qdisc\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tc qdisc replace dev \u003Cspan class=\"emphasis\">\u003Cem>enp0s1\u003C/em>\u003C/span> root \u003Cspan class=\"emphasis\">\u003Cem>htb\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tView the updated current \u003Ccode class=\"literal\">qdisc\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tc -s qdisc show dev \u003Cspan class=\"emphasis\">\u003Cem>enp0s1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nqdisc htb 8001: root refcnt 2 r2q 10 default 0 direct_packets_stat 0 direct_qlen 1000\nSent 0 bytes 0 pkt (dropped 0, overlimits 0 requeues 0)\nbacklog 0b 0p requeues 0\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_permanently-setting-the-current-qdisc-of-a-network-interface-using-networkmanager_linux-traffic-control\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">33.6. Permanently setting the current qdisc of a network interface using NetworkManager\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can update the current \u003Ccode class=\"literal\">qdisc\u003C/code> value of a NetworkManager connection.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: View the current \u003Ccode class=\"literal\">qdisc\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tc qdisc show dev \u003Cspan class=\"emphasis\">\u003Cem>enp0s1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n  qdisc fq_codel 0: root refcnt 2\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUpdate the current \u003Ccode class=\"literal\">qdisc\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>enp0s1\u003C/em>\u003C/span> tc.qdiscs 'root pfifo_fast'\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: To add another \u003Ccode class=\"literal\">qdisc\u003C/code> over the existing \u003Ccode class=\"literal\">qdisc\u003C/code>, use the \u003Ccode class=\"literal\">+tc.qdisc\u003C/code> option:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>enp0s1\u003C/em>\u003C/span> +tc.qdisc 'ingress handle ffff:'\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tActivate the changes:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>enp0s1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tView current \u003Ccode class=\"literal\">qdisc\u003C/code> the network interface:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tc qdisc show dev \u003Cspan class=\"emphasis\">\u003Cem>enp0s1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nqdisc \u003Cspan class=\"emphasis\">\u003Cem>pfifo_fast\u003C/em>\u003C/span> 8001: root refcnt 2 bands 3 priomap  1 2 2 2 1 2 0 0 1 1 1 1 1 1 1 1\nqdisc ingress ffff: parent ffff:fff1 ----------------\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-the-rate-limiting-of-packets-by-using-the-tc-ctinfo-utility_linux-traffic-control\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">33.7. Configuring the rate limiting of packets by using the tc-ctinfo utility\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can limit network traffic and prevent the exhaustion of resources in the network by using rate limiting. With rate limiting, you can also reduce the load on servers by limiting repetitive packet requests in a specific time frame. In addition, you can manage bandwidth rate by configuring traffic control in the kernel with the \u003Ccode class=\"literal\">tc-ctinfo\u003C/code> utility.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe connection tracking entry stores the \u003Ccode class=\"literal\">Netfilter\u003C/code> mark and connection information. When a router forwards a packet from the firewall, the router either removes or modifies the connection tracking entry from the packet. The connection tracking information (\u003Ccode class=\"literal\">ctinfo\u003C/code>) module retrieves data from connection tracking marks into various fields. This kernel module preserves the \u003Ccode class=\"literal\">Netfilter\u003C/code> mark by copying it into socket buffer (\u003Ccode class=\"literal\">skb\u003C/code>) mark metadata field.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">iperf3\u003C/code> utility is installed on a server and a client.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tPerform the following steps on the server:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd a virtual link to the network interface:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link add name ifb4eth0 numtxqueues 48 numrxqueues 48 type ifb\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThis command has the following parameters:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">name ifb4eth0\u003C/code> \u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\t\t\tSets new virtual device interface.\n\t\t\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">numtxqueues 48\u003C/code> \u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\t\t\tSets the number of transmit queues.\n\t\t\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">numrxqueues 48\u003C/code> \u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\t\t\tSets the number of receive queues.\n\t\t\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">type ifb\u003C/code> \u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\t\t\tSets the type of the new device.\n\t\t\t\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tChange the state of the interface:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link set dev ifb4eth0 up\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd the \u003Ccode class=\"literal\">qdisc\u003C/code> attribute on the physical network interface and apply it to the incoming traffic:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tc qdisc add dev enp1s0 handle ffff: ingress\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIn the \u003Ccode class=\"literal\">handle ffff:\u003C/code> option, the \u003Ccode class=\"literal\">handle\u003C/code> parameter assigns the major number \u003Ccode class=\"literal\">ffff:\u003C/code> as a default value to a classful \u003Ccode class=\"literal\">qdisc\u003C/code> on the \u003Ccode class=\"literal\">enp1s0\u003C/code> physical network interface, where \u003Ccode class=\"literal\">qdisc\u003C/code> is a queueing discipline parameter to analyze traffic control.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd a filter on the physical interface of the \u003Ccode class=\"literal\">ip\u003C/code> protocol to classify packets:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tc filter add dev enp1s0 parent ffff: protocol ip u32 match u32 0 0 action ctinfo cpmark 100 action mirred egress redirect dev ifb4eth0\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThis command has the following attributes:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">parent ffff:\u003C/code> \u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\t\t\tSets major number \u003Ccode class=\"literal\">ffff:\u003C/code> for the parent \u003Ccode class=\"literal\">qdisc\u003C/code>.\n\t\t\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">u32 match u32 0 0\u003C/code> \u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\t\t\tSets the \u003Ccode class=\"literal\">u32\u003C/code> filter to \u003Ccode class=\"literal\">match\u003C/code> the IP headers of \u003Ccode class=\"literal\">u32\u003C/code> pattern. The first \u003Ccode class=\"literal\">0\u003C/code> represents the second byte of IP header while the other \u003Ccode class=\"literal\">0\u003C/code> is for the mask match telling the filter which bits to match.\n\t\t\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">action ctinfo\u003C/code> \u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\t\t\tSets action to retrieve data from the connection tracking mark into various fields.\n\t\t\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">cpmark 100\u003C/code> \u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\t\t\tCopies the connection tracking mark (connmark) \u003Ccode class=\"literal\">100\u003C/code> into the packet IP header field.\n\t\t\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">action mirred egress redirect dev ifb4eth0\u003C/code> \u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\t\t\tSets \u003Ccode class=\"literal\">action\u003C/code> \u003Ccode class=\"literal\">mirred\u003C/code> to redirect the received packets to the \u003Ccode class=\"literal\">ifb4eth0\u003C/code> destination interface.\n\t\t\t\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd a classful \u003Ccode class=\"literal\">qdisc\u003C/code> to the interface:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tc qdisc add dev ifb4eth0 root handle 1: htb default 1000\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThis command sets the major number \u003Ccode class=\"literal\">1\u003C/code> to root \u003Ccode class=\"literal\">qdisc\u003C/code> and uses the \u003Ccode class=\"literal\">htb\u003C/code> hierarchy token bucket with classful \u003Ccode class=\"literal\">qdisc\u003C/code> of minor-id \u003Ccode class=\"literal\">1000\u003C/code>.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tLimit the traffic on the interface to 1 Mbit/s with an upper limit of 2 Mbit/s:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tc class add dev ifb4eth0 parent 1:1 classid 1:100 htb ceil 2mbit rate 1mbit prio 100\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThis command has the following parameters:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">parent 1:1\u003C/code> \u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\t\t\tSets \u003Ccode class=\"literal\">parent\u003C/code> with \u003Ccode class=\"literal\">classid\u003C/code> as \u003Ccode class=\"literal\">1\u003C/code> and \u003Ccode class=\"literal\">root\u003C/code> as \u003Ccode class=\"literal\">1\u003C/code>.\n\t\t\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">classid 1:100\u003C/code> \u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\t\t\tSets \u003Ccode class=\"literal\">classid\u003C/code> as \u003Ccode class=\"literal\">1:100\u003C/code> where \u003Ccode class=\"literal\">1\u003C/code> is the number of parent \u003Ccode class=\"literal\">qdisc\u003C/code> and \u003Ccode class=\"literal\">100\u003C/code> is the number of classes of the parent \u003Ccode class=\"literal\">qdisc\u003C/code>.\n\t\t\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">htb ceil 2mbit\u003C/code> \u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">htb\u003C/code> classful \u003Ccode class=\"literal\">qdisc\u003C/code> allows upper limit bandwidth of \u003Ccode class=\"literal\">2 Mbit/s\u003C/code> as the \u003Ccode class=\"literal\">ceil\u003C/code> rate limit.\n\t\t\t\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tApply the Stochastic Fairness Queuing (\u003Ccode class=\"literal\">sfq\u003C/code>) of classless \u003Ccode class=\"literal\">qdisc\u003C/code> to interface with a time interval of \u003Ccode class=\"literal\">60\u003C/code> seconds to reduce queue algorithm perturbation:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tc qdisc add dev ifb4eth0 parent 1:100 sfq perturb 60\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd the firewall mark (\u003Ccode class=\"literal\">fw\u003C/code>) filter to the interface:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tc filter add dev ifb4eth0 parent 1:0 protocol ip prio 100 handle 100 fw classid 1:100\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRestore the packet meta mark from the connection mark (\u003Ccode class=\"literal\">CONNMARK\u003C/code>):\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nft add rule ip mangle PREROUTING counter meta mark set ct mark\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIn this command, the \u003Ccode class=\"literal\">nft\u003C/code> utility has a \u003Ccode class=\"literal\">mangle\u003C/code> table with the \u003Ccode class=\"literal\">PREROUTING\u003C/code> chain rule specification that alters incoming packets before routing to replace the packet mark with \u003Ccode class=\"literal\">CONNMARK\u003C/code>.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf no \u003Ccode class=\"literal\">nft\u003C/code> table and chain exist, create a table and add a chain rule:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nft add table ip mangle\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nft add chain ip mangle PREROUTING {type filter hook prerouting priority mangle \\;}\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSet the meta mark on \u003Ccode class=\"literal\">tcp\u003C/code> packets that are received on the specified destination address \u003Ccode class=\"literal\">192.0.2.3\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nft add rule ip mangle PREROUTING ip daddr 192.0.2.3 counter meta mark set 0x64\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSave the packet mark into the connection mark:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nft add rule ip mangle PREROUTING counter ct mark set mark\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRun the \u003Ccode class=\"literal\">iperf3\u003C/code> utility as the server on a system by using the \u003Ccode class=\"literal\">-s\u003C/code> parameter and the server then waits for the response of the client connection:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>iperf3 -s\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the client, run \u003Ccode class=\"literal\">iperf3\u003C/code> as a client and connect to the server that listens on IP address \u003Ccode class=\"literal\">192.0.2.3\u003C/code> for periodic HTTP request-response timestamp:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>iperf3 -c 192.0.2.3 -t TCP_STREAM | tee rate\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">192.0.2.3\u003C/code> is the IP address of the server while \u003Ccode class=\"literal\">192.0.2.4\u003C/code> is the IP address of the client.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTerminate the \u003Ccode class=\"literal\">iperf3\u003C/code> utility on the server by pressing \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">C\u003C/kbd>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">Accepted connection from 192.0.2.4, port 52128\n[5]  local 192.0.2.3 port 5201 connected to 192.0.2.4 port 52130\n[ID] Interval       \tTransfer \tBitrate\n[5]   0.00-1.00   sec   119 KBytes   973 Kbits/sec\n[5]   1.00-2.00   sec   116 KBytes   950 Kbits/sec\n...\n[ID] Interval       \tTransfer \tBitrate\n[5]   0.00-14.81  sec  1.51 MBytes   853 Kbits/sec  receiver\n\niperf3: interrupt - the server has terminated\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTerminate the \u003Ccode class=\"literal\">iperf3\u003C/code> utility on the client by pressing \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">C\u003C/kbd>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">Connecting to host 192.0.2.3, port 5201\n[5] local 192.0.2.4 port 52130 connected to 192.0.2.3 port 5201\n[ID] Interval       \tTransfer \tBitrate     \tRetr  Cwnd\n[5]   0.00-1.00   sec   481 KBytes  3.94 Mbits/sec\t0   76.4 KBytes\n[5]   1.00-2.00   sec   223 KBytes  1.83 Mbits/sec\t0   82.0 KBytes\n...\n[ID] Interval       \tTransfer \tBitrate     \tRetr\n[5]   0.00-14.00  sec  3.92 MBytes  2.35 Mbits/sec   32     sender\n[5]   0.00-14.00  sec  0.00 Bytes  0.00 bits/sec            receiver\n\niperf3: error - the server has terminated\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the statistics about packet counts of the \u003Ccode class=\"literal\">htb\u003C/code> and \u003Ccode class=\"literal\">sfq\u003C/code> classes on the interface:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tc -s qdisc show dev ifb4eth0\u003C/strong>\u003C/span>\n\nqdisc htb 1: root\n...\n Sent 26611455 bytes 3054 pkt (dropped 76, overlimits 4887 requeues 0)\n...\nqdisc sfq 8001: parent\n...\n Sent 26535030 bytes 2296 pkt (dropped 76, overlimits 0 requeues 0)\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the statistics of packet counts for the \u003Ccode class=\"literal\">mirred\u003C/code> and \u003Ccode class=\"literal\">ctinfo\u003C/code> actions:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tc -s filter show dev enp1s0 ingress\u003C/strong>\u003C/span>\nfilter parent ffff: protocol ip pref 49152 u32 chain 0\nfilter parent ffff: protocol ip pref 49152 u32 chain 0 fh 800: ht divisor 1\nfilter parent ffff: protocol ip pref 49152 u32 chain 0 fh 800::800 order 2048 key ht 800 bkt 0 terminal flowid not_in_hw (rule hit 8075 success 8075)\n  match 00000000/00000000 at 0 (success 8075 )\n    action order 1: ctinfo zone 0 pipe\n      index 1 ref 1 bind 1 cpmark 0x00000064 installed 3105 sec firstused 3105 sec DSCP set 0 error 0\n      CPMARK set 7712\n    Action statistics:\n    Sent 25891504 bytes 3137 pkt (dropped 0, overlimits 0 requeues 0)\n    backlog 0b 0p requeues 0\n\n    action order 2: mirred (Egress Redirect to device ifb4eth0) stolen\n       index 1 ref 1 bind 1 installed 3105 sec firstused 3105 sec\n    Action statistics:\n    Sent 25891504 bytes 3137 pkt (dropped 0, overlimits 61 requeues 0)\n    backlog 0b 0p requeues 0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the statistics of the \u003Ccode class=\"literal\">htb\u003C/code> rate-limiter and its configuration:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tc -s class show dev ifb4eth0\u003C/strong>\u003C/span>\nclass htb 1:100 root leaf 8001: prio 7 rate 1Mbit ceil 2Mbit burst 1600b cburst 1600b\n Sent 26541716 bytes 2373 pkt (dropped 61, overlimits 4887 requeues 0)\n backlog 0b 0p requeues 0\n lended: 7248 borrowed: 0 giants: 0\n tokens: 187250 ctokens: 93625\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">tc(8)\u003C/code> and \u003Ccode class=\"literal\">tc-ctinfo(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nft(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"available-qdiscs-in-rhel_linux-traffic-control\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">33.8. Available qdiscs in RHEL\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tEach \u003Ccode class=\"literal\">qdisc\u003C/code> addresses unique networking-related issues. The following is the list of \u003Ccode class=\"literal\">qdiscs\u003C/code> available in RHEL. You can use any of the following \u003Ccode class=\"literal\">qdisc\u003C/code> to shape network traffic based on your networking requirements.\n\t\t\t\u003C/p>\u003Crh-table id=\"idm140053159164416\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 33.1. Available schedulers in RHEL\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 33%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 33%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 33%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140053159158640\" scope=\"col\">\u003Ccode class=\"literal\">qdisc\u003C/code> name\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140053159157232\" scope=\"col\">Included in\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140053159156144\" scope=\"col\">Offload support\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tAsynchronous Transfer Mode (ATM)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-modules-extra\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tClass-Based Queueing\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-modules-extra\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tCredit-Based Shaper\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-modules-extra\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003Cp>\n\t\t\t\t\t\t\t\tYes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tCHOose and Keep for responsive flows, CHOose and Kill for unresponsive flows (CHOKE)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-modules-extra\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tControlled Delay (CoDel)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-core\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tDeficit Round Robin (DRR)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-modules-extra\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tDifferentiated Services marker (DSMARK)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-modules-extra\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnhanced Transmission Selection (ETS)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-modules-extra\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003Cp>\n\t\t\t\t\t\t\t\tYes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tFair Queue (FQ)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-core\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tFair Queuing Controlled Delay (FQ_CODel)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-core\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tGeneralized Random Early Detection (GRED)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-modules-extra\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tHierarchical Fair Service Curve (HSFC)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-core\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tHeavy-Hitter Filter (HHF)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-core\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tHierarchy Token Bucket (HTB)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-core\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tINGRESS\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-core\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003Cp>\n\t\t\t\t\t\t\t\tYes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tMulti Queue Priority (MQPRIO)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-modules-extra\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003Cp>\n\t\t\t\t\t\t\t\tYes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tMultiqueue (MULTIQ)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-modules-extra\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003Cp>\n\t\t\t\t\t\t\t\tYes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tNetwork Emulator (NETEM)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-modules-extra\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tProportional Integral-controller Enhanced (PIE)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-core\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tPLUG\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-core\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tQuick Fair Queueing (QFQ)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-modules-extra\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tRandom Early Detection (RED)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-modules-extra\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003Cp>\n\t\t\t\t\t\t\t\tYes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tStochastic Fair Blue (SFB)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-modules-extra\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tStochastic Fairness Queueing (SFQ)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-core\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tToken Bucket Filter (TBF)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-core\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003Cp>\n\t\t\t\t\t\t\t\tYes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159158640\"> \u003Cp>\n\t\t\t\t\t\t\t\tTrivial Link Equalizer (TEQL)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159157232\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-modules-extra\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053159156144\"> \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe \u003Ccode class=\"literal\">qdisc\u003C/code> offload requires hardware and driver support on NIC.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">tc(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 34. Authenticating a RHEL client to the network by using the 802.1X standard with a certificate stored on the file system\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tAdministrators frequently use port-based Network Access Control (NAC) based on the IEEE 802.1X standard to protect a network from unauthorized LAN and Wi-Fi clients. To enable a client to connect to such networks, you must configure 802.1X authentication on this clients.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"configuring-802-1x-network-authentication-on-an-existing-ethernet-connection-by-using-nmcli_authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">34.1. Configuring 802.1X network authentication on an existing Ethernet connection by using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">nmcli\u003C/code> utility to configure an Ethernet connection with 802.1X network authentication on the command line.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe network supports 802.1X network authentication.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe Ethernet connection profile exists in NetworkManager and has a valid IP configuration.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe following files required for TLS authentication exist on the client:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe client key stored is in the \u003Ccode class=\"literal\">/etc/pki/tls/private/client.key\u003C/code> file, and the file is owned and only readable by the \u003Ccode class=\"literal\">root\u003C/code> user.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe client certificate is stored in the \u003Ccode class=\"literal\">/etc/pki/tls/certs/client.crt\u003C/code> file.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe Certificate Authority (CA) certificate is stored in the \u003Ccode class=\"literal\">/etc/pki/tls/certs/ca.crt\u003C/code> file.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">wpa_supplicant\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the Extensible Authentication Protocol (EAP) to \u003Ccode class=\"literal\">tls\u003C/code> and the paths to the client certificate and key file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> 802-1x.eap tls 802-1x.client-cert /etc/pki/tls/certs/client.crt 802-1x.private-key /etc/pki/tls/certs/certs/client.key\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that you must set the \u003Ccode class=\"literal\">802-1x.eap\u003C/code>, \u003Ccode class=\"literal\">802-1x.client-cert\u003C/code>, and \u003Ccode class=\"literal\">802-1x.private-key\u003C/code> parameters in a single command.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the path to the CA certificate:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> 802-1x.ca-cert /etc/pki/tls/certs/ca.crt\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the identity of the user used in the certificate:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> 802-1x.identity \u003Cspan class=\"emphasis\">\u003Cem>user@example.com\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Store the password in the configuration:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> 802-1x.private-key-password \u003Cspan class=\"emphasis\">\u003Cem>password\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tBy default, NetworkManager stores the password in clear text in the connection profile on the disk, but the file is readable only by the \u003Ccode class=\"literal\">root\u003C/code> user. However, clear text passwords in a configuration file can be a security risk.\n\t\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\t\tTo increase the security, set the \u003Ccode class=\"literal\">802-1x.password-flags\u003C/code> parameter to \u003Ccode class=\"literal\">0x1\u003C/code>. With this setting, on servers with the GNOME desktop environment or the \u003Ccode class=\"literal\">nm-applet\u003C/code> running, NetworkManager retrieves the password from these services. In other cases, NetworkManager prompts for the password.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tActivate the connection profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAccess resources on the network that require network authentication.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-an-ethernet-connection_configuring-and-managing-networking\" title=\"Chapter 2. Configuring an Ethernet connection\">Configuring an Ethernet connection\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-static-ethernet-connection-with-802-1x-network-authentication-by-using-nmstatectl_authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">34.2. Configuring a static Ethernet connection with 802.1X network authentication by using \u003Ccode class=\"literal\">nmstatectl\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tUse the \u003Ccode class=\"literal\">nmstatectl\u003C/code> utility to configure an Ethernet connection with 802.1X network authentication through the Nmstate API. The Nmstate API ensures that, after setting the configuration, the result matches the configuration file. If anything fails, \u003Ccode class=\"literal\">nmstatectl\u003C/code> automatically rolls back the changes to avoid leaving the system in an incorrect state.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe \u003Ccode class=\"literal\">nmstate\u003C/code> library only supports the \u003Ccode class=\"literal\">TLS\u003C/code> Extensible Authentication Protocol (EAP) method.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe network supports 802.1X network authentication.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe managed node uses NetworkManager.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe following files required for TLS authentication exist on the client:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe client key stored is in the \u003Ccode class=\"literal\">/etc/pki/tls/private/client.key\u003C/code> file, and the file is owned and only readable by the \u003Ccode class=\"literal\">root\u003C/code> user.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe client certificate is stored in the \u003Ccode class=\"literal\">/etc/pki/tls/certs/client.crt\u003C/code> file.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe Certificate Authority (CA) certificate is stored in the \u003Ccode class=\"literal\">/etc/pki/tls/certs/ca.crt\u003C/code> file.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a YAML file, for example \u003Ccode class=\"literal\">~/create-ethernet-profile.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\ninterfaces:\n- name: enp1s0\n  type: ethernet\n  state: up\n  ipv4:\n    enabled: true\n    address:\n    - ip: 192.0.2.1\n      prefix-length: 24\n    dhcp: false\n  ipv6:\n    enabled: true\n    address:\n    - ip: 2001:db8:1::1\n      prefix-length: 64\n    autoconf: false\n    dhcp: false\n  802.1x:\n    ca-cert: /etc/pki/tls/certs/ca.crt\n    client-cert: /etc/pki/tls/certs/client.crt\n    eap-methods:\n      - tls\n    identity: client.example.org\n    private-key: /etc/pki/tls/private/client.key\n    private-key-password: password\nroutes:\n  config:\n  - destination: 0.0.0.0/0\n    next-hop-address: 192.0.2.254\n    next-hop-interface: enp1s0\n  - destination: ::/0\n    next-hop-address: 2001:db8:1::fffe\n    next-hop-interface: enp1s0\ndns-resolver:\n  config:\n    search:\n    - example.com\n    server:\n    - 192.0.2.200\n    - 2001:db8:1::ffbb\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThese settings define an Ethernet connection profile for the \u003Ccode class=\"literal\">enp1s0\u003C/code> device with the following settings:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tA static IPv4 address - \u003Ccode class=\"literal\">192.0.2.1\u003C/code> with a \u003Ccode class=\"literal\">/24\u003C/code> subnet mask\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tA static IPv6 address - \u003Ccode class=\"literal\">2001:db8:1::1\u003C/code> with a \u003Ccode class=\"literal\">/64\u003C/code> subnet mask\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAn IPv4 default gateway - \u003Ccode class=\"literal\">192.0.2.254\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAn IPv6 default gateway - \u003Ccode class=\"literal\">2001:db8:1::fffe\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAn IPv4 DNS server - \u003Ccode class=\"literal\">192.0.2.200\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAn IPv6 DNS server - \u003Ccode class=\"literal\">2001:db8:1::ffbb\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tA DNS search domain - \u003Ccode class=\"literal\">example.com\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t802.1X network authentication using the \u003Ccode class=\"literal\">TLS\u003C/code> EAP protocol\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tApply the settings to the system:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl apply ~/create-ethernet-profile.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAccess resources on the network that require network authentication.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-static-ethernet-connection-with-802-1x-network-authentication-by-using-the-network-rhel-system-role_authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">34.3. Configuring a static Ethernet connection with 802.1X network authentication by using the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tNetwork Access Control (NAC) protects a network from unauthorized clients. You can specify the details that are required for the authentication in NetworkManager connection profiles to enable clients to access the network. By using Ansible and the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can use an Ansible playbook to copy a private key, a certificate, and the CA certificate to the client, and then use the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role to configure a connection profile with 802.1X network authentication.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles\">You have prepared the control node and the managed nodes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in to the control node as a user who can run playbooks on the managed nodes.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe account you use to connect to the managed nodes has \u003Ccode class=\"literal\">sudo\u003C/code> permissions on them.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe network supports 802.1X network authentication.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe managed nodes use NetworkManager.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe following files required for the TLS authentication exist on the control node:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe client key is stored in the \u003Ccode class=\"literal\">/srv/data/client.key\u003C/code> file.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe client certificate is stored in the \u003Ccode class=\"literal\">/srv/data/client.crt\u003C/code> file.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe Certificate Authority (CA) certificate is stored in the \u003Ccode class=\"literal\">/srv/data/ca.crt\u003C/code> file.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStore your sensitive variables in an encrypted file:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate the vault:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-vault create vault.yml\u003C/strong>\u003C/span>\nNew Vault password: \u003Cspan class=\"emphasis\">\u003Cem>&lt;vault_password&gt;\u003C/em>\u003C/span>\nConfirm New Vault password: \u003Cspan class=\"emphasis\">\u003Cem>&lt;vault_password&gt;\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAfter the \u003Ccode class=\"literal\">ansible-vault create\u003C/code> command opens an editor, enter the sensitive data in the \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>&lt;key&gt;\u003C/em>\u003C/span>: \u003Cspan class=\"emphasis\">\u003Cem>&lt;value&gt;\u003C/em>\u003C/span>\u003C/code> format:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-ini\">pwd: \u003Cspan class=\"emphasis\">\u003Cem>&lt;password&gt;\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSave the changes, and close the editor. Ansible encrypts the data in the vault.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a playbook file, for example \u003Ccode class=\"literal\">~/playbook.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\n- name: Configure an Ethernet connection with 802.1X authentication\n  hosts: managed-node-01.example.com\n  vars_files:\n    - vault.yml\n  tasks:\n    - name: Copy client key for 802.1X authentication\n      ansible.builtin.copy:\n        src: \"/srv/data/client.key\"\n        dest: \"/etc/pki/tls/private/client.key\"\n        mode: 0600\n\n    - name: Copy client certificate for 802.1X authentication\n      ansible.builtin.copy:\n        src: \"/srv/data/client.crt\"\n        dest: \"/etc/pki/tls/certs/client.crt\"\n\n    - name: Copy CA certificate for 802.1X authentication\n      ansible.builtin.copy:\n        src: \"/srv/data/ca.crt\"\n        dest: \"/etc/pki/ca-trust/source/anchors/ca.crt\"\n\n    - name: Ethernet connection profile with static IP address settings and 802.1X\n      ansible.builtin.include_role:\n        name: rhel-system-roles.network\n      vars:\n        network_connections:\n          - name: enp1s0\n            type: ethernet\n            autoconnect: yes\n            ip:\n              address:\n                - 192.0.2.1/24\n                - 2001:db8:1::1/64\n              gateway4: 192.0.2.254\n              gateway6: 2001:db8:1::fffe\n              dns:\n                - 192.0.2.200\n                - 2001:db8:1::ffbb\n              dns_search:\n                - example.com\n            ieee802_1x:\n              identity: \u003Cspan class=\"emphasis\">\u003Cem>&lt;user_name&gt;\u003C/em>\u003C/span>\n              eap: tls\n              private_key: \"/etc/pki/tls/private/client.key\"\n              private_key_password: \"{{ pwd }}\"\n              client_cert: \"/etc/pki/tls/certs/client.crt\"\n              ca_cert: \"/etc/pki/ca-trust/source/anchors/ca.crt\"\n              domain_suffix_match: example.com\n            state: up\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe settings specified in the example playbook include the following:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">ieee802_1x\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tThis variable contains the 802.1X-related settings.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">eap: tls\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tConfigures the profile to use the certificate-based \u003Ccode class=\"literal\">TLS\u003C/code> authentication method for the Extensible Authentication Protocol (EAP).\n\t\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details about all variables used in the playbook, see the \u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file on the control node.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tValidate the playbook syntax:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --ask-vault-pass --syntax-check ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that this command only validates the syntax and does not protect against a wrong but valid configuration.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the playbook:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --ask-vault-pass ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAccess resources on the network that require network authentication.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/rhel-system-roles/network/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/ansible-vault_automating-system-administration-by-using-rhel-system-roles\">Ansible vault\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-a-wifi-connection-with-802-1x-network-authentication-by-using-the-network-rhel-system-role_authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">34.4. Configuring a wifi connection with 802.1X network authentication by using the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tNetwork Access Control (NAC) protects a network from unauthorized clients. You can specify the details that are required for the authentication in NetworkManager connection profiles to enable clients to access the network. By using Ansible and the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role, you can automate this process and remotely configure connection profiles on the hosts defined in a playbook.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can use an Ansible playbook to copy a private key, a certificate, and the CA certificate to the client, and then use the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role to configure a connection profile with 802.1X network authentication.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles\">You have prepared the control node and the managed nodes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in to the control node as a user who can run playbooks on the managed nodes.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe account you use to connect to the managed nodes has \u003Ccode class=\"literal\">sudo\u003C/code> permissions on them.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe network supports 802.1X network authentication.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou installed the \u003Ccode class=\"literal\">wpa_supplicant\u003C/code> package on the managed node.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tDHCP is available in the network of the managed node.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe following files required for TLS authentication exist on the control node:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe client key is stored in the \u003Ccode class=\"literal\">/srv/data/client.key\u003C/code> file.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe client certificate is stored in the \u003Ccode class=\"literal\">/srv/data/client.crt\u003C/code> file.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe CA certificate is stored in the \u003Ccode class=\"literal\">/srv/data/ca.crt\u003C/code> file.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStore your sensitive variables in an encrypted file:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate the vault:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-vault create vault.yml\u003C/strong>\u003C/span>\nNew Vault password: \u003Cspan class=\"emphasis\">\u003Cem>&lt;vault_password&gt;\u003C/em>\u003C/span>\nConfirm New Vault password: \u003Cspan class=\"emphasis\">\u003Cem>&lt;vault_password&gt;\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAfter the \u003Ccode class=\"literal\">ansible-vault create\u003C/code> command opens an editor, enter the sensitive data in the \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>&lt;key&gt;\u003C/em>\u003C/span>: \u003Cspan class=\"emphasis\">\u003Cem>&lt;value&gt;\u003C/em>\u003C/span>\u003C/code> format:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-ini\">pwd: \u003Cspan class=\"emphasis\">\u003Cem>&lt;password&gt;\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSave the changes, and close the editor. Ansible encrypts the data in the vault.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a playbook file, for example \u003Ccode class=\"literal\">~/playbook.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\n- name: Configure a wifi connection with 802.1X authentication\n  hosts: managed-node-01.example.com\n  tasks:\n    - name: Copy client key for 802.1X authentication\n      ansible.builtin.copy:\n        src: \"/srv/data/client.key\"\n        dest: \"/etc/pki/tls/private/client.key\"\n        mode: 0400\n\n    - name: Copy client certificate for 802.1X authentication\n      ansible.builtin.copy:\n        src: \"/srv/data/client.crt\"\n        dest: \"/etc/pki/tls/certs/client.crt\"\n\n    - name: Copy CA certificate for 802.1X authentication\n      ansible.builtin.copy:\n        src: \"/srv/data/ca.crt\"\n        dest: \"/etc/pki/ca-trust/source/anchors/ca.crt\"\n\n    - name: Wifi connection profile with dynamic IP address settings and 802.1X\n      ansible.builtin.import_role:\n        name: rhel-system-roles.network\n      vars:\n        network_connections:\n          - name: Wifi connection profile with dynamic IP address settings and 802.1X\n            interface_name: wlp1s0\n            state: up\n            type: wireless\n            autoconnect: yes\n            ip:\n              dhcp4: true\n              auto6: true\n            wireless:\n              ssid: \"Example-wifi\"\n              key_mgmt: \"wpa-eap\"\n            ieee802_1x:\n              identity: \u003Cspan class=\"emphasis\">\u003Cem>&lt;user_name&gt;\u003C/em>\u003C/span>\n              eap: tls\n              private_key: \"/etc/pki/tls/client.key\"\n              private_key_password: \"{{ pwd }}\"\n              private_key_password_flags: none\n              client_cert: \"/etc/pki/tls/client.pem\"\n              ca_cert: \"/etc/pki/tls/cacert.pem\"\n              domain_suffix_match: \"example.com\"\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe settings specified in the example playbook include the following:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">ieee802_1x\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tThis variable contains the 802.1X-related settings.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">eap: tls\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tConfigures the profile to use the certificate-based \u003Ccode class=\"literal\">TLS\u003C/code> authentication method for the Extensible Authentication Protocol (EAP).\n\t\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details about all variables used in the playbook, see the \u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file on the control node.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tValidate the playbook syntax:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --ask-vault-pass --syntax-check ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that this command only validates the syntax and does not protect against a wrong but valid configuration.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the playbook:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --ask-vault-pass ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/rhel-system-roles/network/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 35. Setting up an 802.1x network authentication service for LAN clients by using \u003Ccode class=\"literal\">hostapd\u003C/code> with FreeRADIUS backend\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tThe IEEE 802.1X standard defines secure authentication and authorization methods to protect networks from unauthorized clients. By using the \u003Ccode class=\"literal\">hostapd\u003C/code> service and FreeRADIUS, you can provide network access control (NAC) in your network.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tRed Hat supports only FreeRADIUS with Red Hat Identity Management (IdM) as backend source of authentication.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\tIn this documentation, the RHEL host acts as a bridge to connect different clients with an existing network. However, the RHEL host grants only authenticated clients access to the network.\n\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/8fadf9abfcbb769d775871aa6a9b2e22/rhel-authenticator-802-1x.png\" alt=\"rhel authenticator 802 1x\"/>\u003C/div>\u003C/div>\u003Csection class=\"section\" id=\"prerequisites\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">35.1. Prerequisites\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA clean installation of the \u003Ccode class=\"literal\">freeradius\u003C/code> and \u003Ccode class=\"literal\">freeradius-ldap\u003C/code> packages.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the packages are already installed, remove the \u003Ccode class=\"literal\">/etc/raddb/\u003C/code> directory, uninstall and then install the packages again. Do not reinstall the packages by using the \u003Ccode class=\"literal\">dnf reinstall\u003C/code> command, because the permissions and symbolic links in the \u003Ccode class=\"literal\">/etc/raddb/\u003C/code> directory are then different.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe host on which you want to configure FreeRADIUS is a \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/index\">client in an IdM domain\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_setting-up-the-bridge-on-the-authenticator_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">35.2. Setting up the bridge on the authenticator\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tA network bridge is a link-layer device which forwards traffic between hosts and networks based on a table of MAC addresses. If you set up RHEL as an 802.1X authenticator, add both the interfaces on which to perform authentication and the LAN interface to the bridge.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe server has multiple Ethernet interfaces.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the bridge interface does not exist, create it:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type bridge con-name br0 ifname br0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAssign the Ethernet interfaces to the bridge:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ethernet port-type bridge con-name br0-port1 ifname enp1s0 controller br0\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ethernet port-type bridge con-name br0-port2 ifname enp7s0 controller br0\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ethernet port-type bridge con-name br0-port3 ifname enp8s0 controller br0\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ethernet port-type bridge con-name br0-port4 ifname enp9s0 controller br0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable the bridge to forward extensible authentication protocol over LAN (EAPOL) packets:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify br0 group-forward-mask 8\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the connection to automatically activate the ports:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify br0 connection.autoconnect-ports 1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tActivate the connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up br0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the link status of Ethernet devices that are ports of a specific bridge:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link show master br0\u003C/strong>\u003C/span>\n3: enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel master br0 state UP mode DEFAULT group default qlen 1000\n    link/ether 52:54:00:62:61:0e brd ff:ff:ff:ff:ff:ff\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify if forwarding of EAPOL packets is enabled on the \u003Ccode class=\"literal\">br0\u003C/code> device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /sys/class/net/br0/bridge/group_fwd_mask\u003C/strong>\u003C/span>\n0x8\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the command returns \u003Ccode class=\"literal\">0x8\u003C/code>, forwarding is enabled.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-freeradius-to-authenticate-network-clients-securely-using-eap_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">35.3. Configuring FreeRADIUS to authenticate network clients securely by using EAP\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFreeRADIUS supports different methods of the Extensible authentication protocol (EAP). However, for a supported and secure scenario, use EAP-TTLS (tunneled transport layer security).\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tWith EAP-TTLS, the clients use a secure TLS connection as the outer authentication protocol to set up the tunnel. The inner authentication then uses LDAP to authenticate to Identity Management. To use EAP-TTLS, you need a TLS server certificate.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe default FreeRADIUS configuration files serve as documentation and describe all parameters and directives. If you want to disable certain features, comment them out instead of removing the corresponding parts in the configuration files. This enables you to preserve the structure of the configuration files and the included documentation.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou installed the \u003Ccode class=\"literal\">freeradius\u003C/code> and \u003Ccode class=\"literal\">freeradius-ldap\u003C/code> packages.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe configuration files in the \u003Ccode class=\"literal\">/etc/raddb/\u003C/code> directory are unchanged and as provided by the \u003Ccode class=\"literal\">freeradius\u003C/code> packages.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe host is enrolled in a Red Hat Identity Management (IdM) domain.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a private key and request a certificate from IdM:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-getcert request -w -k /etc/pki/tls/private/radius.key -f /etc/pki/tls/certs/radius.pem -o \"root:radiusd\" -m 640 -O \"root:radiusd\" -M 640 -T caIPAserviceCert -C 'systemctl restart radiusd.service' -N \u003Cspan class=\"emphasis\">\u003Cem>freeradius.idm.example.com\u003C/em>\u003C/span> -D \u003Cspan class=\"emphasis\">\u003Cem>freeradius.idm.example.com\u003C/em>\u003C/span> -K radius/\u003Cspan class=\"emphasis\">\u003Cem>freeradius.idm.example.com\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">certmonger\u003C/code> service stores the private key in the \u003Ccode class=\"literal\">/etc/pki/tls/private/radius.key\u003C/code> file and the certificate in the \u003Ccode class=\"literal\">/etc/pki/tls/certs/radius.pem\u003C/code> file, and it sets secure permissions. Additionally, \u003Ccode class=\"literal\">certmonger\u003C/code> will monitor the certificate, renew it before it expires, and restart the \u003Ccode class=\"literal\">radiusd\u003C/code> service after the certificate was renewed.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\t.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t+\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-getcert list -f /etc/pki/tls/certs/radius.pem\u003C/strong>\u003C/span>\n...\nNumber of certificates and requests being tracked: 1.\nRequest ID '20240918142211':\n        status: MONITORING\n        stuck: no\n        key pair storage: type=FILE,location='/etc/pki/tls/private/radius.key'\n        certificate: type=FILE,location='/etc/pki/tls/certs/radius.crt'\n        ...\u003C/pre>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">/etc/raddb/certs/dh\u003C/code> file with Diffie-Hellman (DH) parameters. For example, to create a DH file with a 2048 bits prime, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>openssl dhparam -out /etc/raddb/certs/dh 2048\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor security reasons, do not use a DH file with less than a 2048 bits prime. Depending on the number of bits, the creation of the file can take several minutes.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEdit the \u003Ccode class=\"literal\">/etc/raddb/mods-available/eap\u003C/code> file:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tConfigure the TLS-related settings in the \u003Ccode class=\"literal\">tls-config tls-common\u003C/code> directive:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">eap {\n    ...\n    tls-config tls-common {\n        ...\n\tprivate_key_file = /etc/pki/tls/private/radius.key\n\tcertificate_file = /etc/pki/tls/certs/radius.pem\n\tca_file = /etc/ipa/ca.crt\n        ...\n    }\n}\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSet the \u003Ccode class=\"literal\">default_eap_type\u003C/code> parameter in the \u003Ccode class=\"literal\">eap\u003C/code> directive to \u003Ccode class=\"literal\">ttls\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">eap {\n    ...\n    default_eap_type = ttls\n    ...\n}\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tComment out the \u003Ccode class=\"literal\">md5\u003C/code> directives to disable the insecure EAP-MD5 authentication method:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">eap {\n    ...\n    # md5 {\n    # }\n    ...\n}\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tNote that, in the default configuration file, other insecure EAP authentication methods are commented out by default.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEdit the \u003Ccode class=\"literal\">/etc/raddb/sites-available/default\u003C/code> file, and comment out all authentication methods other than \u003Ccode class=\"literal\">eap\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">authenticate {\n    ...\n    # Auth-Type PAP {\n    #     pap\n    # }\n\n    # Auth-Type CHAP {\n    #     chap\n    # }\n\n    # Auth-Type MS-CHAP {\n    #     mschap\n    # }\n\n    # mschap\n\n    # digest\n    ...\n}\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis leaves only EAP enabled for the outer authentication and disables plain-text authentication methods.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEdit the \u003Ccode class=\"literal\">/etc/raddb/sites-available/inner-tunnel\u003C/code> file, and make the following changes:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tComment out the \u003Ccode class=\"literal\">-ldap\u003C/code> entry and add the \u003Ccode class=\"literal\">ldap\u003C/code> module configuration to the \u003Ccode class=\"literal\">authorize\u003C/code> directive:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">authorize {\n    ...\n\n    #-ldap\n    ldap\n    if ((ok || updated) &amp;&amp; User-Password) {\n        update {\n            control:Auth-Type := ldap\n        }\n    }\n\n    ...\n}\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tUncomment the LDAP authentication type in the \u003Ccode class=\"literal\">authenticate\u003C/code> directive:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">authenticate {\n    Auth-Type LDAP {\n        ldap\n    }\n}\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable the \u003Ccode class=\"literal\">ldap\u003C/code> module:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ln -s /etc/raddb/mods-available/ldap /etc/raddb/mods-enabled/ldap\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEdit the \u003Ccode class=\"literal\">/etc/raddb/mods-available/ldap\u003C/code> file, and make the following changes:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIn the \u003Ccode class=\"literal\">ldap\u003C/code> directive, set the IdM LDAP server URL and the base distinguished name (DN):\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">ldap {\n    ...\n    server = 'ldaps://\u003Cspan class=\"emphasis\">\u003Cem>idm_server.idm.example.com\u003C/em>\u003C/span>'\n    base_dn = 'cn=users,cn=accounts,\u003Cspan class=\"emphasis\">\u003Cem>dc=idm,dc=example,dc=com\u003C/em>\u003C/span>'\n    ...\n}\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSpecify the \u003Ccode class=\"literal\">ldaps\u003C/code> protocol in the server URL to use TLS-encrypted connections between the FreeRADIUS host and the IdM server.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIn the \u003Ccode class=\"literal\">ldap\u003C/code> directive, enable TLS certificate validation of the IdM LDAP server:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">tls {\n    ...\n        require_cert = 'demand'\n    ...\n}\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEdit the \u003Ccode class=\"literal\">/etc/raddb/clients.conf\u003C/code> file:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSet a secure password in the \u003Ccode class=\"literal\">localhost\u003C/code> and \u003Ccode class=\"literal\">localhost_ipv6\u003C/code> client directives:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">client localhost {\n    ipaddr = 127.0.0.1\n    ...\n    secret = \u003Cspan class=\"emphasis\">\u003Cem>localhost_client_password\u003C/em>\u003C/span>\n    ...\n}\n\nclient localhost_ipv6 {\n    ipv6addr = ::1\n    secret = \u003Cspan class=\"emphasis\">\u003Cem>localhost_client_password\u003C/em>\u003C/span>\n}\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd a client directive for the network authenticator:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">client \u003Cspan class=\"emphasis\">\u003Cem>hostapd.example.org\u003C/em>\u003C/span> {\n    ipaddr = \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.2/32\u003C/em>\u003C/span>\n    secret = \u003Cspan class=\"emphasis\">\u003Cem>hostapd_client_password\u003C/em>\u003C/span>\n}\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOptional: If other hosts should also be able to access the FreeRADIUS service, add client directives for them as well, for example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">client \u003Cspan class=\"emphasis\">\u003Cem>&lt;hostname_or_description&gt;\u003C/em>\u003C/span> {\n    ipaddr = \u003Cspan class=\"emphasis\">\u003Cem>&lt;IP_address_or_range&gt;\u003C/em>\u003C/span>\n    secret = \u003Cspan class=\"emphasis\">\u003Cem>&lt;client_password&gt;\u003C/em>\u003C/span>\n}\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">ipaddr\u003C/code> parameter accepts IPv4 and IPv6 addresses, and you can use the optional classless inter-domain routing (CIDR) notation to specify ranges. However, you can set only one value in this parameter. For example, to grant access to both an IPv4 and IPv6 address, you must add two client directives.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tUse a descriptive name for the client directive, such as a hostname or a word that describes where the IP range is used.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify the configuration files:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>radiusd -XC\u003C/strong>\u003C/span>\n...\nConfiguration appears to be OK\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen the RADIUS ports in the \u003Ccode class=\"literal\">firewalld\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>firewall-cmd --permanent --add-service=radius\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>firewall-cmd --reload\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable and start the \u003Ccode class=\"literal\">radiusd\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable --now radiusd\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_testing-eap-ttls-authentication-against-a-freeradius-server-or-authenticator_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend\" title=\"35.5. Testing EAP-TTLS authentication against a FreeRADIUS server or authenticator\">Testing EAP-TTLS authentication against a FreeRADIUS server or authenticator\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the \u003Ccode class=\"literal\">radiusd\u003C/code> service fails to start, verify that you can resolve the IdM server host name:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>host -v idm_server.idm.example.com\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor other problems, run \u003Ccode class=\"literal\">radiusd\u003C/code> in debug mode:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tStop the \u003Ccode class=\"literal\">radiusd\u003C/code> service:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl stop radiusd\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tStart the service in debug mode:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>radiusd -X\u003C/strong>\u003C/span>\n...\nReady to process requests\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPerform authentication tests on the FreeRADIUS host, as referenced in the \u003Ccode class=\"literal\">Verification\u003C/code> section.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Next steps\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tDisable no longer required authentication methods and other features you do not use.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-hostapd-as-an-authenticator-in-a-wired-network_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">35.4. Configuring \u003Ccode class=\"literal\">hostapd\u003C/code> as an authenticator in a wired network\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe host access point daemon (\u003Ccode class=\"literal\">hostapd\u003C/code>) service can act as an authenticator in a wired network to provide 802.1X authentication. For this, the \u003Ccode class=\"literal\">hostapd\u003C/code> service requires a RADIUS server that authenticates the clients.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">hostapd\u003C/code> service provides an integrated RADIUS server. However, use the integrated RADIUS server only for testing purposes. For production environments, use FreeRADIUS server, which supports additional features, such as different authentication methods and access control.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe \u003Ccode class=\"literal\">hostapd\u003C/code> service does not interact with the traffic plane. The service acts only as an authenticator. For example, use a script or service that uses the \u003Ccode class=\"literal\">hostapd\u003C/code> control interface to allow or deny traffic based on the result of authentication events.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou installed the \u003Ccode class=\"literal\">hostapd\u003C/code> package.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe FreeRADIUS server has been configured, and it is ready to authenticate clients.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">/etc/hostapd/hostapd.conf\u003C/code> file with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># General settings of hostapd\n# ===========================\n\n# Control interface settings\nctrl_interface=\u003Cspan class=\"emphasis\">\u003Cem>/var/run/hostapd\u003C/em>\u003C/span>\nctrl_interface_group=\u003Cspan class=\"emphasis\">\u003Cem>wheel\u003C/em>\u003C/span>\n\n# Enable logging for all modules\nlogger_syslog=\u003Cspan class=\"emphasis\">\u003Cem>-1\u003C/em>\u003C/span>\nlogger_stdout=\u003Cspan class=\"emphasis\">\u003Cem>-1\u003C/em>\u003C/span>\n\n# Log level\nlogger_syslog_level=\u003Cspan class=\"emphasis\">\u003Cem>2\u003C/em>\u003C/span>\nlogger_stdout_level=\u003Cspan class=\"emphasis\">\u003Cem>2\u003C/em>\u003C/span>\n\n\n# Wired 802.1X authentication\n# ===========================\n\n# Driver interface type\ndriver=wired\n\n# Enable IEEE 802.1X authorization\nieee8021x=1\n\n# Use port access entry (PAE) group address\n# (01:80:c2:00:00:03) when sending EAPOL frames\nuse_pae_group_addr=1\n\n\n# Network interface for authentication requests\ninterface=\u003Cspan class=\"emphasis\">\u003Cem>br0\u003C/em>\u003C/span>\n\n\n# RADIUS client configuration\n# ===========================\n\n# Local IP address used as NAS-IP-Address\nown_ip_addr=\u003Cspan class=\"emphasis\">\u003Cem>192.0.2.2\u003C/em>\u003C/span>\n\n# Unique NAS-Identifier within scope of RADIUS server\nnas_identifier=\u003Cspan class=\"emphasis\">\u003Cem>hostapd.example.org\u003C/em>\u003C/span>\n\n# RADIUS authentication server\nauth_server_addr=\u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1\u003C/em>\u003C/span>\nauth_server_port=\u003Cspan class=\"emphasis\">\u003Cem>1812\u003C/em>\u003C/span>\nauth_server_shared_secret=\u003Cspan class=\"emphasis\">\u003Cem>hostapd_client_password\u003C/em>\u003C/span>\n\n# RADIUS accounting server\nacct_server_addr=\u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1\u003C/em>\u003C/span>\nacct_server_port=\u003Cspan class=\"emphasis\">\u003Cem>1813\u003C/em>\u003C/span>\nacct_server_shared_secret=\u003Cspan class=\"emphasis\">\u003Cem>hostapd_client_password\u003C/em>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor further details about the parameters used in this configuration, see their descriptions in the \u003Ccode class=\"literal\">/usr/share/doc/hostapd/hostapd.conf\u003C/code> example configuration file.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable and start the \u003Ccode class=\"literal\">hostapd\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable --now hostapd\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_testing-eap-ttls-authentication-against-a-freeradius-server-or-authenticator_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend\" title=\"35.5. Testing EAP-TTLS authentication against a FreeRADIUS server or authenticator\">Testing EAP-TTLS authentication against a FreeRADIUS server or authenticator\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the \u003Ccode class=\"literal\">hostapd\u003C/code> service fails to start, verify that the bridge interface you use in the \u003Ccode class=\"literal\">/etc/hostapd/hostapd.conf\u003C/code> file is present on the system:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link show br0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor other problems, run \u003Ccode class=\"literal\">hostapd\u003C/code> in debug mode:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tStop the \u003Ccode class=\"literal\">hostapd\u003C/code> service:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl stop hostapd\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tStart the service in debug mode:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>hostapd -d /etc/hostapd/hostapd.conf\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPerform authentication tests on the FreeRADIUS host, as referenced in the \u003Ccode class=\"literal\">Verification\u003C/code> section.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">hostapd.conf(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/hostapd/hostapd.conf\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_testing-eap-ttls-authentication-against-a-freeradius-server-or-authenticator_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">35.5. Testing EAP-TTLS authentication against a FreeRADIUS server or authenticator\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo test if authentication by using extensible authentication protocol (EAP) over tunneled transport layer security (EAP-TTLS) works as expected, run this procedure:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAfter you set up the FreeRADIUS server\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAfter you set up the \u003Ccode class=\"literal\">hostapd\u003C/code> service as an authenticator for 802.1X network authentication.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThe output of the test utilities used in this procedure provide additional information about the EAP communication and help you to debug problems.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tWhen you want to authenticate to:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tA FreeRADIUS server:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"square\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">eapol_test\u003C/code> utility, provided by the \u003Ccode class=\"literal\">hostapd\u003C/code> package, is installed.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tThe client, on which you run this procedure, has been authorized in the FreeRADIUS server’s client databases.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAn authenticator, the \u003Ccode class=\"literal\">wpa_supplicant\u003C/code> utility, provided by the same-named package, is installed.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou stored the certificate authority (CA) certificate in the \u003Ccode class=\"literal\">/etc/ipa/ca.cert\u003C/code> file.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Create a user in Identity Management (IdM):\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa user-add --first \"\u003Cspan class=\"emphasis\">\u003Cem>Test\u003C/em>\u003C/span>\" --last \"\u003Cspan class=\"emphasis\">\u003Cem>User\u003C/em>\u003C/span>\" \u003Cspan class=\"emphasis\">\u003Cem>idm_user\u003C/em>\u003C/span> --password\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">/etc/wpa_supplicant/wpa_supplicant-TTLS.conf\u003C/code> file with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">ap_scan=0\n\nnetwork={\n    eap=TTLS\n    eapol_flags=0\n    key_mgmt=IEEE8021X\n\n    # Anonymous identity (sent in unencrypted phase 1)\n    # Can be any string\n    anonymous_identity=\"\u003Cspan class=\"emphasis\">\u003Cem>anonymous\u003C/em>\u003C/span>\"\n\n    # Inner authentication (sent in TLS-encrypted phase 2)\n    phase2=\"auth=\u003Cspan class=\"emphasis\">\u003Cem>PAP\u003C/em>\u003C/span>\"\n    identity=\"\u003Cspan class=\"emphasis\">\u003Cem>idm_user\u003C/em>\u003C/span>\"\n    password=\"\u003Cspan class=\"emphasis\">\u003Cem>idm_user_password\u003C/em>\u003C/span>\"\n\n    # CA certificate to validate the RADIUS server's identity\n    ca_cert=\"\u003Cspan class=\"emphasis\">\u003Cem>/etc/ipa/ca.crt\u003C/em>\u003C/span>\"\n}\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo authenticate to:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tA FreeRADIUS server, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>eapol_test -c \u003Cspan class=\"emphasis\">\u003Cem>/etc/wpa_supplicant/wpa_supplicant-TTLS.conf\u003C/em>\u003C/span> -a \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1\u003C/em>\u003C/span> -s \u003Cspan class=\"emphasis\">\u003Cem>&lt;client_password&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n...\nEAP: Status notification: remote certificate verification (param=success)\n...\nCTRL-EVENT-EAP-SUCCESS EAP authentication completed successfully\n...\nSUCCESS\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">-a\u003C/code> option defines the IP address of the FreeRADIUS server, and the \u003Ccode class=\"literal\">-s\u003C/code> option specifies the password for the host on which you run the command in the FreeRADIUS server’s client configuration.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAn authenticator, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>wpa_supplicant -c \u003Cspan class=\"emphasis\">\u003Cem>/etc/wpa_supplicant/wpa_supplicant-TTLS.conf\u003C/em>\u003C/span> -D wired -i enp0s31f6\u003C/strong>\u003C/span>\n...\nenp0s31f6: CTRL-EVENT-EAP-SUCCESS EAP authentication completed successfully\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">-i\u003C/code> option specifies the network interface name on which \u003Ccode class=\"literal\">wpa_supplicant\u003C/code> sends out extended authentication protocol over LAN (EAPOL) packets.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tFor more debugging information, pass the \u003Ccode class=\"literal\">-d\u003C/code> option to the command.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/wpa_supplicant/wpa_supplicant.conf\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_blocking-and-allowing-traffic-based-on-hostapd-authentication-events_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">35.6. Blocking and allowing traffic based on \u003Ccode class=\"literal\">hostapd\u003C/code> authentication events\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">hostapd\u003C/code> service does not interact with the traffic plane. The service acts only as an authenticator. However, you can write a script to allow and deny traffic based on the result of authentication events.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThis procedure is not supported and is no enterprise-ready solution. It only demonstrates how to block or allow traffic by evaluating events retrieved by \u003Ccode class=\"literal\">hostapd_cli\u003C/code>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tWhen the \u003Ccode class=\"literal\">802-1x-tr-mgmt\u003C/code> systemd service starts, RHEL blocks all traffic on the listen port of \u003Ccode class=\"literal\">hostapd\u003C/code> except extensible authentication protocol over LAN (EAPOL) packets and uses the \u003Ccode class=\"literal\">hostapd_cli\u003C/code> utility to connect to the \u003Ccode class=\"literal\">hostapd\u003C/code> control interface. The \u003Ccode class=\"literal\">/usr/local/bin/802-1x-tr-mgmt\u003C/code> script then evaluates events. Depending on the different events received by \u003Ccode class=\"literal\">hostapd_cli\u003C/code>, the script allows or blocks traffic for MAC addresses. Note that, when the \u003Ccode class=\"literal\">802-1x-tr-mgmt\u003C/code> service stops, all traffic is automatically allowed again.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tPerform this procedure on the \u003Ccode class=\"literal\">hostapd\u003C/code> server.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">hostapd\u003C/code> service has been configured, and the service is ready to authenticate clients.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">/usr/local/bin/802-1x-tr-mgmt\u003C/code> file with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-bash\">#!/bin/sh\n\nTABLE=\"tr-mgmt-${1}\"\nread -r -d '' TABLE_DEF &lt;&lt; EOF\ntable bridge ${TABLE} {\n    set allowed_macs {\n        type ether_addr\n    }\n\n    chain accesscontrol {\n        ether saddr @allowed_macs accept\n        ether daddr @allowed_macs accept\n        drop\n    }\n\n    chain forward {\n        type filter hook forward priority 0; policy accept;\n        meta ibrname \"br0\" jump accesscontrol\n    }\n}\nEOF\n\ncase ${2:-NOTANEVENT} in\n    block_all)\n        nft destroy table bridge \"$TABLE\"\n        printf \"$TABLE_DEF\" | nft -f -\n        echo \"$1: All the bridge traffic blocked. Traffic for a client with a given MAC will be allowed after 802.1x authentication\"\n        ;;\n\n    AP-STA-CONNECTED | CTRL-EVENT-EAP-SUCCESS | CTRL-EVENT-EAP-SUCCESS2)\n        nft add element bridge tr-mgmt-br0 allowed_macs { $3 }\n        echo \"$1: Allowed traffic from $3\"\n        ;;\n\n    AP-STA-DISCONNECTED | CTRL-EVENT-EAP-FAILURE)\n        nft delete element bridge tr-mgmt-br0 allowed_macs { $3 }\n        echo \"$1: Denied traffic from $3\"\n        ;;\n\n    allow_all)\n        nft destroy table bridge \"$TABLE\"\n        echo \"$1: Allowed all bridge traffice again\"\n        ;;\n\n    NOTANEVENT)\n        echo \"$0 was called incorrectly, usage: $0 interface event [mac_address]\"\n        ;;\nesac\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">/etc/systemd/system/802-1x-tr-mgmt@.service\u003C/code> systemd service file with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">[Unit]\nDescription=Example 802.1x traffic management for hostapd\nAfter=hostapd.service\nAfter=sys-devices-virtual-net-%i.device\n\n[Service]\nType=simple\nExecStartPre=bash -c '/usr/sbin/hostapd_cli ping | grep PONG'\nExecStartPre=/usr/local/bin/802-1x-tr-mgmt %i block_all\nExecStart=/usr/sbin/hostapd_cli -i %i -a /usr/local/bin/802-1x-tr-mgmt\nExecStopPost=/usr/local/bin/802-1x-tr-mgmt %i allow_all\n\n[Install]\nWantedBy=multi-user.target\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReload systemd:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl daemon-reload\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable and start the \u003Ccode class=\"literal\">802-1x-tr-mgmt\u003C/code> service with the interface name \u003Ccode class=\"literal\">hostapd\u003C/code> is listening on:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable --now 802-1x-tr-mgmt@br0.service\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAuthenticate with a client to the network. See \u003Ca class=\"link\" href=\"#proc_testing-eap-ttls-authentication-against-a-freeradius-server-or-authenticator_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend\" title=\"35.5. Testing EAP-TTLS authentication against a FreeRADIUS server or authenticator\">Testing EAP-TTLS authentication against a FreeRADIUS server or authenticator\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">systemd.service(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"getting-started-with-multipath-tcp_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 36. Getting started with Multipath TCP\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tTransmission Control Protocol (TCP) ensures reliable delivery of the data through the internet and automatically adjusts its bandwidth in response to network load. Multipath TCP (MPTCP) is an extension to the original TCP protocol (single-path). MPTCP enables a transport connection to operate across multiple paths simultaneously, and brings network connection redundancy to user endpoint devices.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"understanding-mptcp_getting-started-with-multipath-tcp\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">36.1. Understanding MPTCP\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe Multipath TCP (MPTCP) protocol allows for simultaneous usage of multiple paths between connection endpoints. The protocol design improves connection stability and also brings other benefits compared to the single-path TCP.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIn MPTCP terminology, links are considered as paths.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tThe following are some of the advantages of using MPTCP:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIt allows a connection to simultaneously use multiple network interfaces.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIn case a connection is bound to a link speed, the usage of multiple links can increase the connection throughput. Note, that in case of the connection is bound to a CPU, the usage of multiple links causes the connection slowdown.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIt increases the resilience to link failures.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tFor more details about MPTCP, review the \u003Cspan class=\"emphasis\">\u003Cem>Additional resources\u003C/em>\u003C/span>.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://www.redhat.com/en/blog/understanding-multipath-tcp-networking-highway-future\">Understanding Multipath TCP: High availability for endpoints and the networking highway of the future\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://www.rfc-editor.org/rfc/rfc8684\">RFC8684: TCP Extensions for Multipath Operation with Multiple Addresses\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"preparing-rhel-to-enable-mptcp-support_getting-started-with-multipath-tcp\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">36.2. Preparing RHEL to enable MPTCP support\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBy default the MPTCP support is disabled in RHEL. Enable MPTCP so that applications that support this feature can use it. Additionally, you have to configure user space applications to force use MPTCP sockets if those applications have TCP sockets by default.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tThe following packages are installed:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">iperf3\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">mptcpd\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">systemtap\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable MPTCP sockets in the kernel:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"net.mptcp.enabled=1\" &gt; /etc/sysctl.d/90-enable-MPTCP.conf\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>sysctl -p /etc/sysctl.d/90-enable-MPTCP.conf\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart the \u003Ccode class=\"literal\">iperf3\u003C/code> server, and force it to create MPTCP sockets instead of TCP sockets:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mptcpize run iperf3 -s\u003C/strong>\u003C/span>\n\nServer listening on 5201\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConnect the client to the server, and force it to create MPTCP sockets instead of TCP sockets:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mptcpize iperf3 -c 127.0.0.1 -t 3\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAfter the connection is established, verify the \u003Ccode class=\"literal\">ss\u003C/code> output to see the subflow-specific status:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ss -nti '( dport :5201 )'\u003C/strong>\u003C/span>\n\nState Recv-Q Send-Q Local Address:Port Peer Address:Port Process\nESTAB 0      0      127.0.0.1:41842    127.0.0.1:5201\ncubic wscale:7,7 rto:205 rtt:4.455/8.878 ato:40 mss:21888 pmtu:65535 rcvmss:536 advmss:65483 cwnd:10 bytes_sent:141 bytes_acked:142 bytes_received:4 segs_out:8 segs_in:7 data_segs_out:3 data_segs_in:3 send 393050505bps lastsnd:2813 lastrcv:2772 lastack:2772 pacing_rate 785946640bps delivery_rate 10944000000bps delivered:4 busy:41ms rcv_space:43690 rcv_ssthresh:43690 minrtt:0.008 tcp-ulp-mptcp flags:Mmec token:0000(id:0)/2ff053ec(id:0) seq:3e2cbea12d7673d4 sfseq:3 ssnoff:ad3d00f4 maplen:2\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify MPTCP counters:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nstat MPTcp\u003C/strong>\u003C/span>*\n\n#kernel\nMPTcpExtMPCapableSYNRX          2                  0.0\nMPTcpExtMPCapableSYNTX          2                  0.0\nMPTcpExtMPCapableSYNACKRX       2                  0.0\nMPTcpExtMPCapableACKRX          2                  0.0\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">tcp(7)\u003C/code> and \u003Ccode class=\"literal\">mptcpize(8)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"using-iproute2-to-temporarily-configure-and-enable-multiple-paths-for-mptcp-applications_getting-started-with-multipath-tcp\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">36.3. Using iproute2 to temporarily configure and enable multiple paths for MPTCP applications\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tEach MPTCP connection uses a single subflow similar to plain TCP. To get the MPTCP benefits, specify a higher limit for maximum number of subflows for each MPTCP connection. Then configure additional endpoints to create those subflows.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe configuration in this procedure will not persist after rebooting your machine.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tNote that MPTCP does not yet support mixed IPv6 and IPv4 endpoints for the same socket. Use endpoints belonging to the same address family.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">mptcpd\u003C/code> package is installed\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">iperf3\u003C/code> package is installed\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tServer network interface settings:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tenp4s0: \u003Ccode class=\"literal\">192.0.2.1/24\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tenp1s0: \u003Ccode class=\"literal\">198.51.100.1/24\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tClient network interface settings:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tenp4s0f0: \u003Ccode class=\"literal\">192.0.2.2/24\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tenp4s0f1: \u003Ccode class=\"literal\">198.51.100.2/24\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the client to accept up to 1 additional remote address, as provided by the server:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip mptcp limits set add_addr_accepted \u003Cspan class=\"emphasis\">\u003Cem>1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd IP address \u003Ccode class=\"literal\">198.51.100.1\u003C/code> as a new MPTCP endpoint on the server:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip mptcp endpoint add \u003Cspan class=\"emphasis\">\u003Cem>198.51.100.1\u003C/em>\u003C/span> dev \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>signal\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">signal\u003C/code> option ensures that the \u003Ccode class=\"literal\">ADD_ADDR\u003C/code> packet is sent after the three-way-handshake.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart the \u003Ccode class=\"literal\">iperf3\u003C/code> server, and force it to create MPTCP sockets instead of TCP sockets:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mptcpize run iperf3 -s\u003C/strong>\u003C/span>\n\nServer listening on 5201\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConnect the client to the server, and force it to create MPTCP sockets instead of TCP sockets:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mptcpize iperf3 -c 192.0.2.1 -t 3\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify the connection is established:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ss -nti '( sport :5201 )'\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify the connection and IP address limit:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip mptcp limit show\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify the newly added endpoint:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip mptcp endpoint show\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify MPTCP counters by using the \u003Ccode class=\"literal\">nstat MPTcp*\u003C/code> command on a server:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nstat MPTcp\u003C/strong>\u003C/span>*\n\n#kernel\nMPTcpExtMPCapableSYNRX          2                  0.0\nMPTcpExtMPCapableACKRX          2                  0.0\nMPTcpExtMPJoinSynRx             2                  0.0\nMPTcpExtMPJoinAckRx             2                  0.0\nMPTcpExtEchoAdd                 2                  0.0\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">mptcpize(8)\u003C/code> and \u003Ccode class=\"literal\">ip-mptcp(8)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_permanently-configuring-multiple-paths-for-mptcp-applications_getting-started-with-multipath-tcp\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">36.4. Permanently configuring multiple paths for MPTCP applications\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can configure MultiPath TCP (MPTCP) using the \u003Ccode class=\"literal\">nmcli\u003C/code> command to permanently establish multiple subflows between a source and destination system. The subflows can use different resources, different routes to the destination, and even different networks. Such as Ethernet, cellular, wifi, and so on. As a result, you achieve combined connections, which increase network resilience and throughput.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe server uses the following network interfaces in our example:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tenp4s0: \u003Ccode class=\"literal\">192.0.2.1/24\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tenp1s0: \u003Ccode class=\"literal\">198.51.100.1/24\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tenp7s0: \u003Ccode class=\"literal\">192.0.2.3/24\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThe client uses the following network interfaces in our example:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tenp4s0f0: \u003Ccode class=\"literal\">192.0.2.2/24\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tenp4s0f1: \u003Ccode class=\"literal\">198.51.100.2/24\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tenp6s0: \u003Ccode class=\"literal\">192.0.2.5/24\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou configured the default gateway on the relevant interfaces.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable MPTCP sockets in the kernel:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"net.mptcp.enabled=1\" &gt; /etc/sysctl.d/90-enable-MPTCP.conf\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>sysctl -p /etc/sysctl.d/90-enable-MPTCP.conf\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: The RHEL kernel default for subflow limit is 2. If you require more:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">/etc/systemd/system/set_mptcp_limit.service\u003C/code> file with the following content:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">[Unit]\nDescription=Set MPTCP subflow limit to 3\nAfter=network.target\n\n[Service]\nExecStart=ip mptcp limits set subflows 3\nType=oneshot\n\n[Install]\nWantedBy=multi-user.target\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>oneshot\u003C/strong>\u003C/span> unit executes the \u003Ccode class=\"literal\">ip mptcp limits set subflows 3\u003C/code> command after your network (\u003Ccode class=\"literal\">network.target\u003C/code>) is operational during every boot process.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">ip mptcp limits set subflows 3\u003C/code> command sets the maximum number of \u003Cspan class=\"emphasis\">\u003Cem>additional\u003C/em>\u003C/span> subflows for each connection, so 4 in total. It is possible to add maximally 3 additional subflows.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnable the \u003Ccode class=\"literal\">set_mptcp_limit\u003C/code> service:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable --now set_mptcp_limit\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable MPTCP on all connection profiles that you want to use for connection aggregation:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>&lt;profile_name&gt;\u003C/em>\u003C/span> connection.mptcp-flags signal,subflow,also-without-default-route\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">connection.mptcp-flags\u003C/code> parameter configures MPTCP endpoints and the IP address flags. If MPTCP is enabled in a NetworkManager connection profile, the setting will configure the IP addresses of the relevant network interface as MPTCP endpoints.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tBy default, NetworkManager does not add MPTCP flags to IP addresses if there is no default gateway. If you want to bypass that check, you need to use also the \u003Ccode class=\"literal\">also-without-default-route\u003C/code> flag.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that you enabled the MPTCP kernel parameter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>sysctl net.mptcp.enabled\u003C/strong>\u003C/span>\nnet.mptcp.enabled = 1\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that you set the subflow limit correctly, in case the default was not enough:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip mptcp limit show\u003C/strong>\u003C/span>\nadd_addr_accepted 2 subflows 3\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that you configured the per-address MPTCP setting correctly:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip mptcp endpoint show\u003C/strong>\u003C/span>\n192.0.2.1 id 1 subflow dev enp4s0\n198.51.100.1 id 2 subflow dev enp1s0\n192.0.2.3 id 3 subflow dev enp7s0\n192.0.2.4 id 4 subflow dev enp3s0\n...\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings-nmcli(5)\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">ip-mptcp(8)\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"xref\" href=\"#understanding-mptcp_getting-started-with-multipath-tcp\" title=\"36.1. Understanding MPTCP\">Section 36.1, “Understanding MPTCP”\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://www.redhat.com/en/blog/understanding-multipath-tcp-networking-highway-future\">Understanding Multipath TCP: High availability for endpoints and the networking highway of the future\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://www.rfc-editor.org/rfc/rfc8684\">RFC8684: TCP Extensions for Multipath Operation with Multiple Addresses\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://www.redhat.com/en/blog/using-multipath-tcp-better-survive-outages-and-increase-bandwidth\">Using Multipath TCP to better survive outages and increase bandwidth\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_monitoring-mptcp-sub-flows_getting-started-with-multipath-tcp\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">36.5. Monitoring MPTCP sub-flows\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe life cycle of a multipath TCP (MPTCP) socket can be complex: The main MPTCP socket is created, the MPTCP path is validated, one or more sub-flows are created and eventually removed. Finally, the MPTCP socket is terminated.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe MPTCP protocol allows monitoring MPTCP-specific events related to socket and sub-flow creation and deletion, using the \u003Ccode class=\"literal\">ip\u003C/code> utility provided by the \u003Ccode class=\"literal\">iproute\u003C/code> package. This utility uses the \u003Ccode class=\"literal\">netlink\u003C/code> interface to monitor MPTCP events.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThis procedure demonstrates how to monitor MPTCP events. For that, it simulates a MPTCP server application, and a client connects to this service. The involved clients in this example use the following interfaces and IP addresses:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tServer: \u003Ccode class=\"literal\">192.0.2.1\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClient (Ethernet connection): \u003Ccode class=\"literal\">192.0.2.2\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClient (WiFi connection): \u003Ccode class=\"literal\">192.0.2.3\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tTo simplify this example, all interfaces are within the same subnet. This is not a requirement. However, it is important that routing has been configured correctly, and the client can reach the server via both interfaces.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA RHEL client with two network interfaces, such as a laptop with Ethernet and WiFi\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe client can connect to the server via both interfaces\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA RHEL server\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tBoth the client and the server run RHEL 9.0 or later\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou installed the \u003Ccode class=\"literal\">mptcpd\u003C/code> package on both the client and the server\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the per connection additional subflow limits to \u003Ccode class=\"literal\">1\u003C/code> on both client and server:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip mptcp limits set add_addr_accepted 0 subflows 1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the server, to simulate a MPTCP server application, start \u003Ccode class=\"literal\">netcat\u003C/code> (\u003Ccode class=\"literal\">nc\u003C/code>) in listen mode with enforced MPTCP sockets instead of TCP sockets:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mptcpize run nc -l -k -p \u003Cspan class=\"emphasis\">\u003Cem>12345\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">-k\u003C/code> option causes that \u003Ccode class=\"literal\">nc\u003C/code> does not close the listener after the first accepted connection. This is required to demonstrate the monitoring of sub-flows.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the client:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIdentify the interface with the lowest metric:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip -4 route\u003C/strong>\u003C/span>\n192.0.2.0/24 dev enp1s0 proto kernel scope link src 192.0.2.2 metric 100\n192.0.2.0/24 dev wlp1s0 proto kernel scope link src 192.0.2.3 metric 600\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">enp1s0\u003C/code> interface has a lower metric than \u003Ccode class=\"literal\">wlp1s0\u003C/code>. Therefore, RHEL uses \u003Ccode class=\"literal\">enp1s0\u003C/code> by default.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn the first terminal, start the monitoring:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip mptcp monitor\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn the second terminal, start a MPTCP connection to the server:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mptcpize run nc 192.0.2.1 12345\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRHEL uses the \u003Ccode class=\"literal\">enp1s0\u003C/code> interface and its associated IP address as a source for this connection.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn the monitoring terminal, the \u003Ccode class=\"literal\">ip mptcp monitor\u003C/code> command now logs:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[       CREATED] token=63c070d2 remid=0 locid=0 saddr4=192.0.2.2 daddr4=192.0.2.1 sport=36444 dport=12345\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe token identifies the MPTCP socket as an unique ID, and later it enables you to correlate MPTCP events on the same socket.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn the terminal with the running \u003Ccode class=\"literal\">nc\u003C/code> connection to the server, press \u003Ckbd class=\"keycap\">Enter\u003C/kbd>. This first data packet fully establishes the connection. Note that, as long as no data has been sent, the connection is not established.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn the monitoring terminal, \u003Ccode class=\"literal\">ip mptcp monitor\u003C/code> now logs:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[   ESTABLISHED] token=63c070d2 remid=0 locid=0 saddr4=192.0.2.2 daddr4=192.0.2.1 sport=36444 dport=12345\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOptional: Display the connections to port \u003Ccode class=\"literal\">12345\u003C/code> on the server:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ss -taunp | grep \":12345\"\u003C/strong>\u003C/span>\ntcp ESTAB  0  0         192.0.2.2:36444 192.0.2.1:12345\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAt this point, only one connection to the server has been established.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn a third terminal, create another endpoint:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip mptcp endpoint add dev wlp1s0 192.0.2.3 subflow\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThis command sets the name and IP address of the WiFi interface of the client in this command.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn the monitoring terminal, \u003Ccode class=\"literal\">ip mptcp monitor\u003C/code> now logs:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[SF_ESTABLISHED] token=63c070d2 remid=0 locid=2 saddr4=192.0.2.3 daddr4=192.0.2.1 sport=53345 dport=12345 backup=0 ifindex=3\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">locid\u003C/code> field displays the local address ID of the new sub-flow and identifies this sub-flow even if the connection uses network address translation (NAT). The \u003Ccode class=\"literal\">saddr4\u003C/code> field matches the endpoint’s IP address from the \u003Ccode class=\"literal\">ip mptcp endpoint add\u003C/code> command.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOptional: Display the connections to port \u003Ccode class=\"literal\">12345\u003C/code> on the server:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ss -taunp | grep \":12345\"\u003C/strong>\u003C/span>\ntcp ESTAB  0  0         192.0.2.2:36444 192.0.2.1:12345\ntcp ESTAB  0  0  192.0.2.3%wlp1s0:53345 192.0.2.1:12345\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe command now displays two connections:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tThe connection with source address \u003Ccode class=\"literal\">192.0.2.2\u003C/code> corresponds to the first MPTCP sub-flow that you established previously.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tThe connection from the sub-flow over the \u003Ccode class=\"literal\">wlp1s0\u003C/code> interface with source address \u003Ccode class=\"literal\">192.0.2.3\u003C/code>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn the third terminal, delete the endpoint:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip mptcp endpoint delete id 2\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tUse the ID from the \u003Ccode class=\"literal\">locid\u003C/code> field from the \u003Ccode class=\"literal\">ip mptcp monitor\u003C/code> output, or retrieve the endpoint ID using the \u003Ccode class=\"literal\">ip mptcp endpoint show\u003C/code> command.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn the monitoring terminal, \u003Ccode class=\"literal\">ip mptcp monitor\u003C/code> now logs:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[     SF_CLOSED] token=63c070d2 remid=0 locid=2 saddr4=192.0.2.3 daddr4=192.0.2.1 sport=53345 dport=12345 backup=0 ifindex=3\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn the first terminal with the \u003Ccode class=\"literal\">nc\u003C/code> client, press \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">C\u003C/kbd> to terminate the session.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn the monitoring terminal, \u003Ccode class=\"literal\">ip mptcp monitor\u003C/code> now logs:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[        CLOSED] token=63c070d2\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">ip-mptcp(1)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#con_how-networkmanager-manages-multiple-default-gateways_managing-the-default-gateway-setting\" title=\"25.7. How NetworkManager manages multiple default gateways\">How NetworkManager manages multiple default gateways\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"disabling-multipath-tcp-in-the-kernel_getting-started-with-multipath-tcp\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">36.6. Disabling Multipath TCP in the kernel\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can explicitly disable the MPTCP option in the kernel.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisable the \u003Ccode class=\"literal\">mptcp.enabled\u003C/code> option.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"net.mptcp.enabled=0\" &gt; /etc/sysctl.d/90-enable-MPTCP.conf\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>sysctl -p /etc/sysctl.d/90-enable-MPTCP.conf\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify whether the \u003Ccode class=\"literal\">mptcp.enabled\u003C/code> is disabled in the kernel.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>sysctl -a | grep mptcp.enabled\u003C/strong>\u003C/span>\nnet.mptcp.enabled = 0\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_managing-the-mptcpd-service_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 37. Managing the mptcpd service\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tThis section describes the basic management of the \u003Ccode class=\"literal\">mptcpd\u003C/code> service. The \u003Ccode class=\"literal\">mptcpd\u003C/code> package provides the \u003Ccode class=\"literal\">mptcpize\u003C/code> tool, which switches on the \u003Ccode class=\"literal\">mptcp\u003C/code> protocol in the \u003Ccode class=\"literal\">TCP\u003C/code> environment.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"proc_configuring-mptcpd_assembly_managing-the-mptcpd-service\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">37.1. Configuring mptcpd\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">mptcpd\u003C/code> service is a component of the \u003Ccode class=\"literal\">mptcp\u003C/code> protocol which provides an instrument to configure \u003Ccode class=\"literal\">mptcp\u003C/code> endpoints. The \u003Ccode class=\"literal\">mptcpd\u003C/code> service creates a subflow endpoint for each address by default. The endpoint list is updated dynamically according to IP addresses modification on the running host. The \u003Ccode class=\"literal\">mptcpd\u003C/code> service creates the list of endpoints automatically. It enables multiple paths as an alternative to using the \u003Ccode class=\"literal\">ip\u003C/code> utility.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">mptcpd\u003C/code> package installed\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable \u003Ccode class=\"literal\">mptcp.enabled\u003C/code> option in the kernel with the following command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"net.mptcp.enabled=1\" &gt; /etc/sysctl.d/90-enable-MPTCP.conf\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>sysctl -p /etc/sysctl.d/90-enable-MPTCP.conf\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart the \u003Ccode class=\"literal\">mptcpd\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl start mptcp.service\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify endpoint creation:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip mptcp endpoint\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo stop the \u003Ccode class=\"literal\">mptcpd\u003C/code> service, use the following command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl stop mptcp.service\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo configure \u003Ccode class=\"literal\">mptcpd\u003C/code> service manually, modify the \u003Ccode class=\"literal\">/etc/mptcpd/mptcpd.conf\u003C/code> configuration file.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tNote, that the endpoint, which mptcpd service creates, lasts till the host shutdown.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">mptcpd(8)\u003C/code> man page on your system.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_managing-applications-with-mptcpize-tool_assembly_managing-the-mptcpd-service\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">37.2. Managing applications with mptcpize tool\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tUsing the \u003Ccode class=\"literal\">mptcpize\u003C/code> tool manage applications and services.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe instruction below shows how to use the \u003Ccode class=\"literal\">mptcpize\u003C/code> tool to manage applications in the \u003Ccode class=\"literal\">TCP\u003C/code> environment.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tAssuming, you need to run the \u003Ccode class=\"literal\">iperf3\u003C/code> utility with the enabled \u003Ccode class=\"literal\">MPTCP\u003C/code> socket. You can achieve this goal by following the procedure below.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">mptcpd\u003C/code> package is installed\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">iperf3\u003C/code> package is installed\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart \u003Ccode class=\"literal\">iperf3\u003C/code> utility with \u003Ccode class=\"literal\">MPTCP\u003C/code> sockets enabled:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mptcpize run iperf3 -s &amp;\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_enabling-mptcp-sockets-for-a-services-using-the-mptcpize-utility_assembly_managing-the-mptcpd-service\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">37.3. Enabling MPTCP sockets for a services using the mptcpize utility\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe following set of commands instruct you how to manage services using the \u003Ccode class=\"literal\">mptcpize\u003C/code> tool. You can enable or disable the \u003Ccode class=\"literal\">mptcp\u003C/code> socket for a service.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tAssuming, you need to manage \u003Ccode class=\"literal\">mptcp\u003C/code> socket for the \u003Ccode class=\"literal\">nginx\u003C/code> service. You can achieve this goal by following the procedure below.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">mptcpd\u003C/code> package is installed\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">nginx\u003C/code> package is installed\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable \u003Ccode class=\"literal\">MPTCP\u003C/code> sockets for a service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mptcpize enable nginx\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisable the \u003Ccode class=\"literal\">MPTCP\u003C/code> sockets for a service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mptcpize disable nginx\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRestart the service to make the changes to take effect:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl restart nginx\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_networkmanager-connection-profiles-in-keyfile-format_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 38. NetworkManager connection profiles in keyfile format\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tBy default, NetworkManager in Red Hat Enterprise Linux 9 and later stores connection profiles in keyfile format. Unlike the deprecated \u003Ccode class=\"literal\">ifcfg\u003C/code> format, the keyfile format supports all connection settings that NetworkManager provides.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"con_the-keyfile-format-of-networkmanager-profiles_assembly_networkmanager-connection-profiles-in-keyfile-format\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">38.1. The keyfile format of NetworkManager profiles\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe keyfile format is similar to the INI format. For example, the following is an Ethernet connection profile in keyfile format:\n\t\t\t\u003C/p>\u003Cpre class=\"screen\">[connection]\nid=\u003Cspan class=\"emphasis\">\u003Cem>example_connection\u003C/em>\u003C/span>\nuuid=\u003Cspan class=\"emphasis\">\u003Cem>82c6272d-1ff7-4d56-9c7c-0eb27c300029\u003C/em>\u003C/span>\ntype=\u003Cspan class=\"emphasis\">\u003Cem>ethernet\u003C/em>\u003C/span>\nautoconnect=\u003Cspan class=\"emphasis\">\u003Cem>true\u003C/em>\u003C/span>\n\n[ipv4]\nmethod=\u003Cspan class=\"emphasis\">\u003Cem>auto\u003C/em>\u003C/span>\n\n[ipv6]\nmethod=\u003Cspan class=\"emphasis\">\u003Cem>auto\u003C/em>\u003C/span>\n\n[ethernet]\nmac-address=\u003Cspan class=\"emphasis\">\u003Cem>00:53:00:8f:fa:66\u003C/em>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tTypos or incorrect placements of parameters can lead to unexpected behavior. Therefore, do not manually edit or create NetworkManager profiles.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tUse the \u003Ccode class=\"literal\">nmcli\u003C/code> utility, the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role, or the \u003Ccode class=\"literal\">nmstate\u003C/code> API to manage NetworkManager connections. For example, you can use the \u003Ca class=\"link\" href=\"#proc_using-nmcli-to-create-keyfile-connection-profiles-in-offline-mode_assembly_networkmanager-connection-profiles-in-keyfile-format\" title=\"38.2. Using nmcli to create keyfile connection profiles in offline mode\">\u003Ccode class=\"literal\">nmcli\u003C/code> utility in offline mode\u003C/a> to create connection profiles.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tEach section corresponds to a NetworkManager setting name as described in the \u003Ccode class=\"literal\">nm-settings(5)\u003C/code> and \u003Ccode class=\"literal\">nm-settings-keyfile(5)\u003C/code> man pages. Each key-value-pair in a section is one of the properties listed in the settings specification of the man page.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tMost variables in NetworkManager keyfiles have a one-to-one mapping. This means that a NetworkManager property is stored in the keyfile as a variable of the same name and in the same format. However, there are exceptions, mainly to make the keyfile syntax easier to read. For a list of these exceptions, see the \u003Ccode class=\"literal\">nm-settings-keyfile(5)\u003C/code> man page on your system.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tFor security reasons, because connection profiles can contain sensitive information, such as private keys and passphrases, NetworkManager uses only configuration files owned by the \u003Ccode class=\"literal\">root\u003C/code> user and that are only readable and writable by \u003Ccode class=\"literal\">root\u003C/code>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tDepending on the purpose of the connection profile, save it in one of the following directories:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/etc/NetworkManager/system-connections/\u003C/code>: The location of persistent profiles. If you modify a persistent profile by using the NetworkManager API, NetworkManager writes and overwrites files in this directory.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/run/NetworkManager/system-connections/\u003C/code>: For temporary profiles that are automatically removed when you reboot the system.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/lib/NetworkManager/system-connections/\u003C/code>: For pre-deployed immutable profiles. When you edit such a profile by using the NetworkManager API, NetworkManager copies this profile to either the persistent or temporary storage.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tNetworkManager does not automatically reload profiles from disk. When you create or update a connection profile in keyfile format, use the \u003Ccode class=\"literal\">nmcli connection reload\u003C/code> command to inform NetworkManager about the changes.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"proc_using-nmcli-to-create-keyfile-connection-profiles-in-offline-mode_assembly_networkmanager-connection-profiles-in-keyfile-format\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">38.2. Using \u003Ccode class=\"literal\">nmcli\u003C/code> to create keyfile connection profiles in offline mode\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tUse NetworkManager utilities, such as \u003Ccode class=\"literal\">nmcli\u003C/code>, the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role, or the \u003Ccode class=\"literal\">nmstate\u003C/code> API to manage NetworkManager connections, to create and update configuration files. However, you can also create various connection profiles in the keyfile format in offline mode by using the \u003Ccode class=\"literal\">nmcli --offline connection add\u003C/code> command.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe offline mode ensures that \u003Ccode class=\"literal\">nmcli\u003C/code> operates without the \u003Ccode class=\"literal\">NetworkManager\u003C/code> service to produce keyfile connection profiles through standard output. This feature can be useful in the following scenarios:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou want to create your connection profiles that need to be pre-deployed somewhere. For example in a container image, or as an RPM package.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou want to create your connection profiles in an environment where the \u003Ccode class=\"literal\">NetworkManager\u003C/code> service is not available, for example, when you want to use the \u003Ccode class=\"literal\">chroot\u003C/code> utility. Alternatively, when you want to create or modify the network configuration of the RHEL system to be installed through the Kickstart \u003Ccode class=\"literal\">%post\u003C/code> script.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a new connection profile in the keyfile format. For example, for a connection profile of an Ethernet device that does not use DHCP, run a similar \u003Ccode class=\"literal\">nmcli\u003C/code> command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli --offline connection add type ethernet con-name Example-Connection ipv4.addresses 192.0.2.1/24 ipv4.dns 192.0.2.200 ipv4.method manual &gt; /etc/NetworkManager/system-connections/example.nmconnection\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe connection name you specified with the \u003Ccode class=\"literal\">con-name\u003C/code> key is saved into the \u003Ccode class=\"literal\">id\u003C/code> variable of the generated profile. When you use the \u003Ccode class=\"literal\">nmcli\u003C/code> command to manage this connection later, specify the connection as follows:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tWhen the \u003Ccode class=\"literal\">id\u003C/code> variable is not omitted, use the connection name, for example \u003Ccode class=\"literal\">Example-Connection\u003C/code>.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tWhen the \u003Ccode class=\"literal\">id\u003C/code> variable is omitted, use the file name without the \u003Ccode class=\"literal\">.nmconnection\u003C/code> suffix, for example \u003Ccode class=\"literal\">output\u003C/code>.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet permissions to the configuration file so that only the \u003Ccode class=\"literal\">root\u003C/code> user can read and update it:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>chmod 600 /etc/NetworkManager/system-connections/example.nmconnection\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>chown root:root /etc/NetworkManager/system-connections/example.nmconnection\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart the \u003Ccode class=\"literal\">NetworkManager\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl start NetworkManager.service\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you set the \u003Ccode class=\"literal\">autoconnect\u003C/code> variable in the profile to \u003Ccode class=\"literal\">false\u003C/code>, activate the connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up Example-Connection\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the \u003Ccode class=\"literal\">NetworkManager\u003C/code> service is running:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl status NetworkManager.service\u003C/strong>\u003C/span>\n● NetworkManager.service - Network Manager\n   Loaded: loaded (/usr/lib/systemd/system/NetworkManager.service; enabled; vendor preset: enabled)\n   Active: active (running) since Wed 2022-08-03 13:08:32 CEST; 1min 40s ago\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that NetworkManager can read the profile from the configuration file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli -f TYPE,FILENAME,NAME connection\u003C/strong>\u003C/span>\nTYPE      FILENAME                                                     NAME\n\u003Cspan class=\"strong strong\">\u003Cstrong>ethernet /etc/NetworkManager/system-connections/examaple.nmconnection Example-Connection\u003C/strong>\u003C/span>\nethernet  /etc/sysconfig/network-scripts/ifcfg-enp1s0                  enp1s0\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the output does not show the newly created connection, verify that the keyfile permissions and the syntax you used are correct.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the connection profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection show Example-Connection\u003C/strong>\u003C/span>\nconnection.id:                          Example-Connection\nconnection.uuid:                        232290ce-5225-422a-9228-cb83b22056b4\nconnection.stable-id:                   --\nconnection.type:                        802-3-ethernet\nconnection.interface-name:              --\nconnection.autoconnect:                 yes\n...\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nmcli(1)\u003C/code> and \u003Ccode class=\"literal\">nm-settings-keyfile(5)\u003C/code> on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_manually-creating-a-networkmanager-profile-in-keyfile-format_assembly_networkmanager-connection-profiles-in-keyfile-format\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">38.3. Manually creating a NetworkManager profile in keyfile format\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can manually create a NetworkManager connection profile in keyfile format.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tManually creating or updating the configuration files can result in an unexpected or non-functional network configuration. As an alternative, you can use \u003Ccode class=\"literal\">nmcli\u003C/code> in offline mode. See \u003Ca class=\"link\" href=\"#proc_using-nmcli-to-create-keyfile-connection-profiles-in-offline-mode_assembly_networkmanager-connection-profiles-in-keyfile-format\" title=\"38.2. Using nmcli to create keyfile connection profiles in offline mode\">Using nmcli to create keyfile connection profiles in offline mode\u003C/a>\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you create a profile for a hardware interface, such as Ethernet, display the MAC address of this interface:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip address show enp1s0\u003C/strong>\u003C/span>\n2: enp1s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000\n    link/ether \u003Cspan class=\"strong strong\">\u003Cstrong>00:53:00:8f:fa:66\u003C/strong>\u003C/span> brd ff:ff:ff:ff:ff:ff\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a connection profile. For example, for a connection profile of an Ethernet device that uses DHCP, create the \u003Ccode class=\"literal\">/etc/NetworkManager/system-connections/example.nmconnection\u003C/code> file with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">[connection]\nid=Example-Connection\ntype=ethernet\nautoconnect=true\n\n[ipv4]\nmethod=auto\n\n[ipv6]\nmethod=auto\n\n[ethernet]\nmac-address=00:53:00:8f:fa:66\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tYou can use any file name with a \u003Ccode class=\"literal\">.nmconnection\u003C/code> suffix. However, when you later use \u003Ccode class=\"literal\">nmcli\u003C/code> commands to manage the connection, you must use the connection name set in the \u003Ccode class=\"literal\">id\u003C/code> variable when you refer to this connection. When you omit the \u003Ccode class=\"literal\">id\u003C/code> variable, use the file name without the \u003Ccode class=\"literal\">.nmconnection\u003C/code> to refer to this connection.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet permissions on the configuration file so that only the \u003Ccode class=\"literal\">root\u003C/code> user can read and update it:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>chown root:root /etc/NetworkManager/system-connections/example.nmconnection\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>chmod 600 /etc/NetworkManager/system-connections/example.nmconnection\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReload the connection profiles:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection reload\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that NetworkManager read the profile from the configuration file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli -f NAME,UUID,FILENAME connection\u003C/strong>\u003C/span>\nNAME                UUID                                  FILENAME\nExample-Connection  86da2486-068d-4d05-9ac7-957ec118afba  /etc/NetworkManager/system-connections/example.nmconnection\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the command does not show the newly added connection, verify that the file permissions and the syntax you used in the file are correct.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you set the \u003Ccode class=\"literal\">autoconnect\u003C/code> variable in the profile to \u003Ccode class=\"literal\">false\u003C/code>, activate the connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up example_connection\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the connection profile:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection show example_connection\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings-keyfile(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"the-differences-in-interface-renaming-with-profiles-in-ifcfg-and-keyfile-format_assembly_networkmanager-connection-profiles-in-keyfile-format\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">38.4. The differences in interface renaming with profiles in ifcfg and keyfile format\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can define custom network interface names, such as \u003Ccode class=\"literal\">provider\u003C/code> or \u003Ccode class=\"literal\">lan\u003C/code> to make interface names more descriptive. In this case, the \u003Ccode class=\"literal\">udev\u003C/code> service renames the interfaces. The renaming process works differently depending on whether you use connection profiles in \u003Ccode class=\"literal\">ifcfg\u003C/code> or keyfile format.\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">The interface renaming process when using a profile in \u003Ccode class=\"literal\">ifcfg\u003C/code> format\u003C/span>\u003C/dt>\u003Cdd>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">/usr/lib/udev/rules.d/60-net.rules\u003C/code> \u003Ccode class=\"literal\">udev\u003C/code> rule calls the \u003Ccode class=\"literal\">/lib/udev/rename_device\u003C/code> helper utility.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tThe helper utility searches for the \u003Ccode class=\"literal\">HWADDR\u003C/code> parameter in \u003Ccode class=\"literal\">/etc/sysconfig/network-scripts/ifcfg-*\u003C/code> files.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tIf the value set in the variable matches the MAC address of an interface, the helper utility renames the interface to the name set in the \u003Ccode class=\"literal\">DEVICE\u003C/code> parameter of the file.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">The interface renaming process when using a profile in keyfile format\u003C/span>\u003C/dt>\u003Cdd>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tCreate a \u003Ca class=\"link\" href=\"#configuring-user-defined-network-interface-names-by-using-systemd-link-files_consistent-network-interface-device-naming\" title=\"1.7. Configuring user-defined network interface names by using systemd link files\">systemd link file\u003C/a> or a \u003Ca class=\"link\" href=\"#configuring-user-defined-network-interface-names-by-using-systemd-link-files_consistent-network-interface-device-naming\" title=\"1.7. Configuring user-defined network interface names by using systemd link files\">udev rule\u003C/a> to rename an interface.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tUse the custom interface name in the \u003Ccode class=\"literal\">interface-name\u003C/code> property of a NetworkManager connection profile.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#how-the-udev-device-manager-renames-network-interfaces_consistent-network-interface-device-naming\" title=\"1.1. How the udev device manager renames network interfaces\">How the udev device manager renames network interfaces\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-user-defined-network-interface-names-by-using-udev-rules_consistent-network-interface-device-naming\" title=\"1.6. Configuring user-defined network interface names by using udev rules\">Configuring user-defined network interface names by using udev rules\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-user-defined-network-interface-names-by-using-systemd-link-files_consistent-network-interface-device-naming\" title=\"1.7. Configuring user-defined network interface names by using systemd link files\">Configuring user-defined network interface names by using systemd link files\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_migrating-networkmanager-profiles-from-ifcfg-to-keyfile-format_assembly_networkmanager-connection-profiles-in-keyfile-format\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">38.5. Migrating NetworkManager profiles from ifcfg to keyfile format\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tIf you still use connection profiles in the deprecated \u003Ccode class=\"literal\">ifcfg\u003C/code> format, you can convert them to the keyfile format.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIf an \u003Ccode class=\"literal\">ifcfg\u003C/code> file contains the \u003Ccode class=\"literal\">NM_CONTROLLED=no\u003C/code> setting, NetworkManager does not control this profile and, consequently the migration process ignores it.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have connection profiles in \u003Ccode class=\"literal\">ifcfg\u003C/code> format in the \u003Ccode class=\"literal\">/etc/sysconfig/network-scripts/\u003C/code> directory.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf the connection profiles contain a \u003Ccode class=\"literal\">DEVICE\u003C/code> variable that is set to a custom device name, such as \u003Ccode class=\"literal\">provider\u003C/code> or \u003Ccode class=\"literal\">lan\u003C/code>, you created a \u003Ca class=\"link\" href=\"#configuring-user-defined-network-interface-names-by-using-systemd-link-files_consistent-network-interface-device-naming\" title=\"1.7. Configuring user-defined network interface names by using systemd link files\">systemd link file\u003C/a> or a \u003Ca class=\"link\" href=\"#configuring-user-defined-network-interface-names-by-using-udev-rules_consistent-network-interface-device-naming\" title=\"1.6. Configuring user-defined network interface names by using udev rules\">udev rule\u003C/a> for each of the custom device names.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tMigrate the connection profiles:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection migrate\u003C/strong>\u003C/span>\nConnection 'enp1s0' (43ed18ab-f0c4-4934-af3d-2b3333948e45) successfully migrated.\nConnection 'enp2s0' (883333e8-1b87-4947-8ceb-1f8812a80a9b) successfully migrated.\n...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptionally, you can verify that you successfully migrated all your connection profiles:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli \u003Cspan class=\"emphasis\">\u003Cem>-f TYPE,FILENAME,NAME\u003C/em>\u003C/span> connection\u003C/strong>\u003C/span>\nTYPE      FILENAME                                                           NAME\nethernet  /etc/NetworkManager/system-connections/enp1s0.nmconnection         enp1s0\nethernet  /etc/NetworkManager/system-connections/enp2s0.nmconnection         enp2s0\n...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings-keyfile(5)\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings-ifcfg-rh(5)\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#how-the-udev-device-manager-renames-network-interfaces_consistent-network-interface-device-naming\" title=\"1.1. How the udev device manager renames network interfaces\">How the udev device manager renames network interfaces\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"systemd-network-targets-and-services_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 39. Systemd network targets and services\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tNetworkManager configures the network during the system boot process. However, when booting with a remote root (/), such as if the root directory is stored on an iSCSI device, the network settings are applied in the initial RAM disk (\u003Ccode class=\"literal\">initrd\u003C/code>) before RHEL is started. For example, if the network configuration is specified on the kernel command line by using \u003Ccode class=\"literal\">rd.neednet=1\u003C/code> or a configuration is specified to mount remote file systems, then the network settings are applied on \u003Ccode class=\"literal\">initrd\u003C/code>.\n\t\t\u003C/p>\u003Cp>\n\t\t\tRHEL uses the \u003Ccode class=\"literal\">network\u003C/code> and \u003Ccode class=\"literal\">network-online\u003C/code> targets and the \u003Ccode class=\"literal\">NetworkManager-wait-online\u003C/code> service while applying network settings. Also, you can configure \u003Ccode class=\"literal\">systemd\u003C/code> services to start after the network is fully available if these services cannot dynamically reload.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"differences-between-the-network-and-network-online-systemd-target_systemd-network-targets-and-services\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">39.1. Differences between the network and network-online systemd target\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tSystemd maintains the \u003Ccode class=\"literal\">network\u003C/code> and \u003Ccode class=\"literal\">network-online\u003C/code> target units. The special units such as \u003Ccode class=\"literal\">NetworkManager-wait-online.service\u003C/code>, have \u003Ccode class=\"literal\">WantedBy=network-online.target\u003C/code> and \u003Ccode class=\"literal\">Before=network-online.target\u003C/code> parameters. If enabled, these units get started with \u003Ccode class=\"literal\">network-online.target\u003C/code> and delay the target to be reached until some form of network connectivity is established. They delay the \u003Ccode class=\"literal\">network-online\u003C/code> target until the network is connected.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">network-online\u003C/code> target starts a service, which adds substantial delays to further execution. Systemd automatically adds dependencies with \u003Ccode class=\"literal\">Wants\u003C/code> and \u003Ccode class=\"literal\">After\u003C/code> parameters for this target unit to all the System V (SysV) \u003Ccode class=\"literal\">init\u003C/code> script service units with a Linux Standard Base (LSB) header referring to the \u003Ccode class=\"literal\">$network\u003C/code> facility. The LSB header is metadata for \u003Ccode class=\"literal\">init\u003C/code> scripts. You can use it to specify dependencies. This is similar to the \u003Ccode class=\"literal\">systemd\u003C/code> target.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">network\u003C/code> target does not significantly delay the execution of the boot process. Reaching the \u003Ccode class=\"literal\">network\u003C/code> target means that the service that is responsible for setting up the network has started. However, it does not mean that a network device was configured. This target is important during the shutdown of the system. For example, if you have a service that was ordered after the \u003Ccode class=\"literal\">network\u003C/code> target during bootup, then this dependency is reversed during the shutdown. The network does not get disconnected until your service has been stopped. All mount units for remote network file systems automatically start the \u003Ccode class=\"literal\">network-online\u003C/code> target unit and order themselves after it.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe \u003Ccode class=\"literal\">network-online\u003C/code> target unit is only useful during the system starts. After the system has completed booting up, this target does not track the online state of the network. Therefore, you cannot use \u003Ccode class=\"literal\">network-online\u003C/code> to monitor the network connection. This target provides a one-time system startup concept.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"overview-of-networkmanager-wait-online_systemd-network-targets-and-services\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">39.2. Overview of NetworkManager-wait-online\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">NetworkManager-wait-online\u003C/code> service waits with a timeout for the network to be configured. This network configuration involves plugging-in an Ethernet device, scanning for a Wi-Fi device, and so forth. NetworkManager automatically activates suitable profiles that are configured to start automatically. The failure of the automatic activation process due to a DHCP timeout or similar event might keep NetworkManager busy for an extended period of time. Depending on the configuration, NetworkManager retries activating the same profile or a different profile.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tWhen the startup completes, either all profiles are in a disconnected state or are successfully activated. You can configure profiles to auto-connect. The following are a few examples of parameters that set timeouts or define when the connection is considered active:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">connection.wait-device-timeout\u003C/code>: Sets the timeout for the driver to detect the device.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">ipv4.may-fail\u003C/code> and \u003Ccode class=\"literal\">ipv6.may-fail\u003C/code>: Sets activation with one IP address family ready, or whether a particular address family must have completed configuration.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">ipv4.gateway-ping-timeout\u003C/code>: Delays activation.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-systemd-service-to-start-after-the-network-has-been-started_systemd-network-targets-and-services\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">39.3. Configuring a systemd service to start after the network has been started\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tRed Hat Enterprise Linux installs \u003Ccode class=\"literal\">systemd\u003C/code> service files in the \u003Ccode class=\"literal\">/usr/lib/systemd/system/\u003C/code> directory. This procedure creates a drop-in snippet for a service file in \u003Ccode class=\"literal\">/etc/systemd/system/\u003Cspan class=\"emphasis\">\u003Cem>&lt;service_name&gt;\u003C/em>\u003C/span>.service.d/\u003C/code> that is used together with the service file in \u003Ccode class=\"literal\">/usr/lib/systemd/system/\u003C/code> to start a particular service after the network is online. It has a higher priority if settings in the drop-in snippet overlap with the ones in the service file in \u003Ccode class=\"literal\">/usr/lib/systemd/system/\u003C/code>.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen a service file in the editor:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl edit \u003Cspan class=\"emphasis\">\u003Cem>&lt;service_name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter the following, and save the changes:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">[Unit]\nAfter=network-online.target\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReload the \u003Ccode class=\"literal\">systemd\u003C/code> service.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl daemon-reload\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_introduction-to-nmstate_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 40. Introduction to Nmstate\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tNmstate is a declarative network manager API. When you use Nmstate, you describe the expected networking state by using YAML or JSON-formatted instructions.\n\t\t\u003C/p>\u003Cp>\n\t\t\tNmstate has many benefits. For example, it:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tProvides a stable and extensible interface to manage RHEL network capabilities\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tSupports atomic and transactional operations at the host and cluster level\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tSupports partial editing of most properties and preserves existing settings that are not specified in the instructions\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tNmstate consists of the following packages:\n\t\t\u003C/p>\u003Crh-table>\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccolgroup>\u003Ccol style=\"width: 33%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 67%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140053155965920\" scope=\"col\">Packages\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140053155964832\" scope=\"col\">Contents\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053155965920\"> \u003Cp>\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">nmstate\u003C/code>\n\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053155964832\"> \u003Cp>\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">nmstatectl\u003C/code> command-line utility\n\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053155965920\"> \u003Cp>\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">python3-libnmstate\u003C/code>\n\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053155964832\"> \u003Cp>\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">libnmstate\u003C/code> Python library\n\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053155965920\"> \u003Cp>\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">nmstate-libs\u003C/code>\n\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053155964832\"> \u003Cp>\n\t\t\t\t\t\t\tThe Nmstate C library\n\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053155965920\"> \u003Cp>\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">nmstate-devel\u003C/code>\n\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053155964832\"> \u003Cp>\n\t\t\t\t\t\t\tThe Nmstate C library headers\n\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Csection class=\"section\" id=\"con_using-the-libnmstate-library-in-a-python-application_assembly_introduction-to-nmstate\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">40.1. Using the libnmstate library in a Python application\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">libnmstate\u003C/code> Python library enables developers to use Nmstate in their own application\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo use the library, import it in your source code:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">import libnmstate\u003C/pre>\u003Cp>\n\t\t\t\tNote that you must install the \u003Ccode class=\"literal\">nmstate\u003C/code> and \u003Ccode class=\"literal\">python3-libnmstate\u003C/code> packages to use this library.\n\t\t\t\u003C/p>\u003Cdiv class=\"example\" id=\"idm140053155939616\">\u003Cp class=\"title\">\u003Cstrong>Example 40.1. Querying the network state by using the libnmstate library\u003C/strong>\u003C/p>\u003Cdiv class=\"example-contents\">\u003Cp>\n\t\t\t\t\tThe following Python code imports the \u003Ccode class=\"literal\">libnmstate\u003C/code> library and displays the available network interfaces and their state:\n\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-python\">import libnmstate\nfrom libnmstate.schema import Interface\n\nnet_state = libnmstate.show()\nfor iface_state in net_state[Interface.KEY]:\n    print(iface_state[Interface.NAME] + \": \"\n          + iface_state[Interface.STATE])\u003C/pre>\u003C/div>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_updating-the-current-network-configuration-using-nmstatectl_assembly_introduction-to-nmstate\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">40.2. Updating the current network configuration by using \u003Ccode class=\"literal\">nmstatectl\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">nmstatectl\u003C/code> utility to store the current network configuration of one or all interfaces in a file. You can then use this file to:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tModify the configuration and apply it to the same system.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCopy the file to a different host and configure the host with the same or modified settings.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tFor example, you can export the settings of the \u003Ccode class=\"literal\">enp1s0\u003C/code> interface to a file, modify the configuration, and apply the settings to the host.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">nmstate\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tExport the settings of the \u003Ccode class=\"literal\">enp1s0\u003C/code> interface to the \u003Ccode class=\"literal\">~/network-config.yml\u003C/code> file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl show \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> &gt; \u003Cspan class=\"emphasis\">\u003Cem>~/network-config.yml\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis command stores the configuration of \u003Ccode class=\"literal\">enp1s0\u003C/code> in YAML format. To store the output in JSON format, pass the \u003Ccode class=\"literal\">--json\u003C/code> option to the command.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you do not specify an interface name, \u003Ccode class=\"literal\">nmstatectl\u003C/code> exports the configuration of all interfaces.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tModify the \u003Ccode class=\"literal\">~/network-config.yml\u003C/code> file using a text editor to update the configuration.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tApply the settings from the \u003Ccode class=\"literal\">~/network-config.yml\u003C/code> file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl apply \u003Cspan class=\"emphasis\">\u003Cem>~/network-config.yml\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you exported the settings in JSON format, pass the \u003Ccode class=\"literal\">--json\u003C/code> option to the command.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"the-nmstate-systemd-service_assembly_introduction-to-nmstate\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">40.3. The nmstate systemd service\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can automatically apply new network settings when the Red Hat Enterprise Linux system boots by configuring the \u003Ccode class=\"literal\">nmstate\u003C/code> \u003Ccode class=\"literal\">systemd\u003C/code> service.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tWith the \u003Ccode class=\"literal\">nmstate\u003C/code> package installed, you can store \u003Ccode class=\"literal\">*.yml\u003C/code> files with Nmstate instructions in the \u003Ccode class=\"literal\">/etc/nmstate/\u003C/code> directory. The \u003Ccode class=\"literal\">nmstate\u003C/code> service then automatically applies the files on the next reboot or when you manually restart the service. After Nmstate successfully applies a file, it renames the file’s \u003Ccode class=\"literal\">.yml\u003C/code> suffix to \u003Ccode class=\"literal\">.applied\u003C/code> to prevent the service from processing the same file again.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">nmstate\u003C/code> service is a \u003Ccode class=\"literal\">oneshot\u003C/code> \u003Ccode class=\"literal\">systemd\u003C/code> service. Consequently, \u003Ccode class=\"literal\">systemd\u003C/code> executes it only when the system boots and when you manually restart the service.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tBy default, the \u003Ccode class=\"literal\">nmstate\u003C/code> service is disabled. Use the \u003Ccode class=\"literal\">systemctl enable nmstate\u003C/code> command to enable it. Afterwards, \u003Ccode class=\"literal\">systemd\u003C/code> executes this service each time when the system starts.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"ref_network-states-for-the-network-rhel-system-roles_assembly_introduction-to-nmstate\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">40.4. Network states for the \u003Ccode class=\"literal\">network\u003C/code> RHEL system role\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">network\u003C/code> RHEL system role supports state configurations in playbooks to configure the devices. For this, use the \u003Ccode class=\"literal\">network_state\u003C/code> variable followed by the state configurations.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tBenefits of using the \u003Ccode class=\"literal\">network_state\u003C/code> variable in a playbook:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tUsing the declarative method with the state configurations, you can configure interfaces, and the NetworkManager creates a profile for these interfaces in the background.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWith the \u003Ccode class=\"literal\">network_state\u003C/code> variable, you can specify the options that you require to change, and all the other options will remain the same as they are. However, with the \u003Ccode class=\"literal\">network_connections\u003C/code> variable, you must specify all settings to change the network connection profile.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tYou can set only Nmstate YAML instructions in \u003Ccode class=\"literal\">network_state\u003C/code>. These instructions differ from the variables you can set in \u003Ccode class=\"literal\">network_connections\u003C/code>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tFor example, to create an Ethernet connection with dynamic IP address settings, use the following \u003Ccode class=\"literal\">vars\u003C/code> block in your playbook:\n\t\t\t\u003C/p>\u003Crh-table>\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccolgroup>\u003Ccol style=\"width: 50%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 50%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\tPlaybook with state configurations\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\tRegular playbook\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\">\n\u003Cpre class=\"programlisting language-yaml\">vars:\n  network_state:\n    interfaces:\n    - name: enp7s0\n      type: ethernet\n      state: up\n      ipv4:\n        enabled: true\n        auto-dns: true\n        auto-gateway: true\n        auto-routes: true\n        dhcp: true\n      ipv6:\n        enabled: true\n        auto-dns: true\n        auto-gateway: true\n        auto-routes: true\n        autoconf: true\n        dhcp: true\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\">\n\u003Cpre class=\"programlisting language-yaml\">vars:\n  network_connections:\n    - name: enp7s0\n      interface_name: enp7s0\n      type: ethernet\n      autoconnect: yes\n      ip:\n        dhcp4: yes\n        auto6: yes\n      state: up\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cp>\n\t\t\t\tFor example, to only change the connection status of dynamic IP address settings that you created as above, use the following \u003Ccode class=\"literal\">vars\u003C/code> block in your playbook:\n\t\t\t\u003C/p>\u003Crh-table>\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccolgroup>\u003Ccol style=\"width: 50%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 50%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\tPlaybook with state configurations\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\tRegular playbook\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\">\n\u003Cpre class=\"programlisting language-yaml\">vars:\n  network_state:\n    interfaces:\n    - name: enp7s0\n      type: ethernet\n      state: down\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\">\n\u003Cpre class=\"programlisting language-yaml\">vars:\n  network_connections:\n    - name: enp7s0\n      interface_name: enp7s0\n      type: ethernet\n      autoconnect: yes\n      ip:\n        dhcp4: yes\n        auto6: yes\n      state: down\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.network/README.md\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/rhel-system-roles/network/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"capturing-network-packets_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 41. Capturing network packets\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tTo debug network issues and communications, you can capture network packets. The following sections provide instructions and additional information about capturing network packets.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"using-xdpdump-to-capture-network-packets-including-packets-dropped-by-xdp-programs_capturing-network-packets\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">41.1. Using xdpdump to capture network packets including packets dropped by XDP programs\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">xdpdump\u003C/code> utility captures network packets. Unlike the \u003Ccode class=\"literal\">tcpdump\u003C/code> utility, \u003Ccode class=\"literal\">xdpdump\u003C/code> uses an extended Berkeley Packet Filter(eBPF) program for this task. This enables \u003Ccode class=\"literal\">xdpdump\u003C/code> to also capture packets dropped by Express Data Path (XDP) programs. User-space utilities, such as \u003Ccode class=\"literal\">tcpdump\u003C/code>, are not able to capture these dropped packages, as well as original packets modified by an XDP program.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can use \u003Ccode class=\"literal\">xdpdump\u003C/code> to debug XDP programs that are already attached to an interface. Therefore, the utility can capture packets before an XDP program is started and after it has finished. In the latter case, \u003Ccode class=\"literal\">xdpdump\u003C/code> also captures the XDP action. By default, \u003Ccode class=\"literal\">xdpdump\u003C/code> captures incoming packets at the entry of the XDP program.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tOn other architectures than AMD and Intel 64-bit, the \u003Ccode class=\"literal\">xdpdump\u003C/code> utility is provided as a Technology Preview only. Technology Preview features are not supported with Red Hat production Service Level Agreements (SLAs), might not be functionally complete, and Red Hat does not recommend using them for production. These previews provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tSee \u003Ca class=\"link\" href=\"https://access.redhat.com/support/offerings/techpreview\">Technology Preview Features Support Scope\u003C/a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tNote that \u003Ccode class=\"literal\">xdpdump\u003C/code> has no packet filter or decode capabilities. However, you can use it in combination with \u003Ccode class=\"literal\">tcpdump\u003C/code> for packet decoding.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA network driver that supports XDP programs.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAn XDP program is loaded to the \u003Ccode class=\"literal\">enp1s0\u003C/code> interface. If no program is loaded, \u003Ccode class=\"literal\">xdpdump\u003C/code> captures packets in a similar way \u003Ccode class=\"literal\">tcpdump\u003C/code> does, for backward compatibility.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo capture packets on the \u003Ccode class=\"literal\">enp1s0\u003C/code> interface and write them to the \u003Ccode class=\"literal\">/root/capture.pcap\u003C/code> file, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>xdpdump -i enp1s0 -w /root/capture.pcap\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo stop capturing packets, press \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">C\u003C/kbd>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">xdpdump(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf you are a developer and you are interested in the source code of \u003Ccode class=\"literal\">xdpdump\u003C/code>, download and install the corresponding source RPM (SRPM) from the Red Hat Customer Portal.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section _additional-resources\" id=\"additional_resources_2\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">41.2. Additional resources\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/8787\">How to capture network packets with tcpdump?\u003C/a> (Red Hat Knowledgebase)\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_understanding-the-ebpf-features-in-rhel-9_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 42. Understanding the eBPF networking features in RHEL 9\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tThe extended Berkeley Packet Filter (eBPF) is an in-kernel virtual machine that allows code execution in the kernel space. This code runs in a restricted sandbox environment with access only to a limited set of functions.\n\t\t\u003C/p>\u003Cp>\n\t\t\tIn networking, you can use eBPF to complement or replace kernel packet processing. Depending on the hook you use, eBPF programs have, for example:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tRead and write access to packet data and metadata\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tCan look up sockets and routes\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tCan set socket options\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tCan redirect packets\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"ref_overview-of-networking-ebpf-features-in-rhel-9_assembly_understanding-the-ebpf-features-in-rhel-9\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">42.1. Overview of networking eBPF features in RHEL 9\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can attach extended Berkeley Packet Filter (eBPF) networking programs to the following hooks in RHEL:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\teXpress Data Path (XDP): Provides early access to received packets before the kernel networking stack processes them.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">tc\u003C/code> eBPF classifier with direct-action flag: Provides powerful packet processing on ingress and egress. Programs can be attached as an eBPF classifier with direct-action flag in the \u003Ccode class=\"literal\">qdisc\u003C/code> hierarchy, or using the link-based \u003Ccode class=\"literal\">tcx\u003C/code> API.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tControl Groups version 2 (cgroup v2): Enables filtering and overriding socket-based operations performed by programs in a control group.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSocket filtering: Enables filtering of packets received from sockets. This feature was also available in the classic Berkeley Packet Filter (cBPF), but has been extended to support eBPF programs.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStream parser: Enables splitting up streams to individual messages, filtering, and redirecting them to sockets.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">SO_REUSEPORT\u003C/code> socket selection: Provides a programmable selection of a receiving socket from a \u003Ccode class=\"literal\">reuseport\u003C/code> socket group.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFlow dissector: Enables overriding the way the kernel parses packet headers in certain situations.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTCP congestion control callbacks: Enables implementing a custom TCP congestion control algorithm.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRoutes with encapsulation: Enables creating custom tunnel encapsulation.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Ch5 id=\"xdp\">XDP\u003C/h5>\u003Cp>\n\t\t\t\tYou can attach programs of the \u003Ccode class=\"literal\">BPF_PROG_TYPE_XDP\u003C/code> type to a network interface. The kernel then executes the program on received packets before the kernel network stack starts processing them. This allows fast packet forwarding in certain situations, such as fast packet dropping to prevent distributed denial of service (DDoS) attacks and fast packet redirects for load balancing scenarios.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can also use XDP for different forms of packet monitoring and sampling. The kernel allows XDP programs to modify packets and to pass them for further processing to the kernel network stack.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe following XDP modes are available:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tNative (driver) XDP: The kernel executes the program from the earliest possible point during packet reception. At this moment, the kernel did not parse the packet and, therefore, no metadata provided by the kernel is available. This mode requires that the network interface driver supports XDP but not all drivers support this native mode.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tGeneric XDP: The kernel network stack executes the XDP program early in the processing. At that time, kernel data structures have been allocated, and the packet has been pre-processed. If a packet should be dropped or redirected, it requires a significant overhead compared to the native mode. However, the generic mode does not require network interface driver support and works with all network interfaces.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOffloaded XDP: The kernel executes the XDP program on the network interface instead of on the host CPU. Note that this requires specific hardware, and only certain eBPF features are available in this mode.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tOn RHEL, load all XDP programs using the \u003Ccode class=\"literal\">libxdp\u003C/code> library. This library enables system-controlled usage of XDP.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tCurrently, there are some system configuration limitations for XDP programs. For example, you must disable certain hardware offload features on the receiving interface. Additionally, not all features are available with all drivers that support the native mode.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tIn RHEL 9, Red Hat supports the XDP features only if you use the \u003Ccode class=\"literal\">libxdp\u003C/code> library to load the program into the kernel.\n\t\t\t\u003C/p>\u003Ch5 id=\"af_xdp\">AF_XDP\u003C/h5>\u003Cp>\n\t\t\t\tUsing an XDP program that filters and redirects packets to a given \u003Ccode class=\"literal\">AF_XDP\u003C/code> socket, you can use one or more sockets from the \u003Ccode class=\"literal\">AF_XDP\u003C/code> protocol family to quickly copy packets from the kernel to the user space.\n\t\t\t\u003C/p>\u003Ch5 id=\"traffic_control\">Traffic Control\u003C/h5>\u003Cp>\n\t\t\t\tThe Traffic Control (\u003Ccode class=\"literal\">tc\u003C/code>) subsystem offers the following types of eBPF programs:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">BPF_PROG_TYPE_SCHED_CLS\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">BPF_PROG_TYPE_SCHED_ACT\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThese types enable you to write custom \u003Ccode class=\"literal\">tc\u003C/code> classifiers and \u003Ccode class=\"literal\">tc\u003C/code> actions in eBPF. Together with the parts of the \u003Ccode class=\"literal\">tc\u003C/code> ecosystem, this provides the ability for powerful packet processing and is the core part of several container networking orchestration solutions.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIn most cases, only the classifier is used, as with the direct-action flag, the eBPF classifier can execute actions directly from the same eBPF program. The \u003Ccode class=\"literal\">clsact\u003C/code> Queueing Discipline (\u003Ccode class=\"literal\">qdisc\u003C/code>) has been designed to enable this on the ingress side.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tNote that using a flow dissector eBPF program can influence operation of some other \u003Ccode class=\"literal\">qdiscs\u003C/code> and \u003Ccode class=\"literal\">tc\u003C/code> classifiers, such as \u003Ccode class=\"literal\">flower\u003C/code>.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe link-based \u003Ccode class=\"literal\">tcx\u003C/code> API is provided along the \u003Ccode class=\"literal\">qdisc\u003C/code> API. It enables your applications to maintain ownership over a BPF program to prevent accidental removal of the BPF program. Also, the \u003Ccode class=\"literal\">tcx\u003C/code> API has multiprogram support that allows multiple applications to attach BPF programs in the \u003Ccode class=\"literal\">tc\u003C/code> layer in parallel.\n\t\t\t\u003C/p>\u003Ch5 id=\"socket_filter\">Socket filter\u003C/h5>\u003Cp>\n\t\t\t\tSeveral utilities use or have used the classic Berkeley Packet Filter (cBPF) for filtering packets received on a socket. For example, the \u003Ccode class=\"literal\">tcpdump\u003C/code> utility enables the user to specify expressions, which \u003Ccode class=\"literal\">tcpdump\u003C/code> then translates into cBPF code.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tAs an alternative to cBPF, the kernel allows eBPF programs of the \u003Ccode class=\"literal\">BPF_PROG_TYPE_SOCKET_FILTER\u003C/code> type for the same purpose.\n\t\t\t\u003C/p>\u003Ch5 id=\"control_groups\">Control Groups\u003C/h5>\u003Cp>\n\t\t\t\tIn RHEL, you can use multiple types of eBPF programs that you can attach to a cgroup. The kernel executes these programs when a program in the given cgroup performs an operation. Note that you can use only cgroups version 2.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe following networking-related cgroup eBPF programs are available in RHEL:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">BPF_PROG_TYPE_SOCK_OPS\u003C/code>: The kernel calls this program on various TCP events. The program can adjust the behavior of the kernel TCP stack, including custom TCP header options, and so on.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">BPF_PROG_TYPE_CGROUP_SOCK_ADDR\u003C/code>: The kernel calls this program during \u003Ccode class=\"literal\">connect\u003C/code>, \u003Ccode class=\"literal\">bind\u003C/code>, \u003Ccode class=\"literal\">sendto\u003C/code>, \u003Ccode class=\"literal\">recvmsg\u003C/code>, \u003Ccode class=\"literal\">getpeername\u003C/code>, and \u003Ccode class=\"literal\">getsockname\u003C/code> operations. This program allows changing IP addresses and ports. This is useful when you implement socket-based network address translation (NAT) in eBPF.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">BPF_PROG_TYPE_CGROUP_SOCKOPT\u003C/code>: The kernel calls this program during \u003Ccode class=\"literal\">setsockopt\u003C/code> and \u003Ccode class=\"literal\">getsockopt\u003C/code> operations and allows changing the options.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">BPF_PROG_TYPE_CGROUP_SOCK\u003C/code>: The kernel calls this program during socket creation, socket releasing, and binding to addresses. You can use these programs to allow or deny the operation, or only to inspect socket creation for statistics.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">BPF_PROG_TYPE_CGROUP_SKB\u003C/code>: This program filters individual packets on ingress and egress, and can accept or reject packets.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">BPF_PROG_TYPE_CGROUP_SYSCTL\u003C/code>: This program allows filtering of access to system controls (\u003Ccode class=\"literal\">sysctl\u003C/code>).\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Ch5 id=\"stream_parser\">Stream Parser\u003C/h5>\u003Cp>\n\t\t\t\tA stream parser operates on a group of sockets that are added to a special eBPF map. The eBPF program then processes packets that the kernel receives or sends on those sockets.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe following stream parser eBPF programs are available in RHEL:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">BPF_PROG_TYPE_SK_SKB\u003C/code>: An eBPF program parses packets received on the socket into individual messages, and instructs the kernel to drop those messages, accept them, or send them to another socket.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">BPF_PROG_TYPE_SK_MSG\u003C/code>: This program filters egress messages. An eBPF program parses the packets and either approves or rejects them.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Ch5 id=\"so_reuseport_socket_selection\">SO_REUSEPORT socket selection\u003C/h5>\u003Cp>\n\t\t\t\tUsing this socket option, you can bind multiple sockets to the same IP address and port. Without eBPF, the kernel selects the receiving socket based on a connection hash. With the \u003Ccode class=\"literal\">BPF_PROG_TYPE_SK_REUSEPORT\u003C/code> program, the selection of the receiving socket is fully programmable.\n\t\t\t\u003C/p>\u003Ch5 id=\"flow_dissector\">Flow dissector\u003C/h5>\u003Cp>\n\t\t\t\tWhen the kernel needs to process packet headers without going through the full protocol decode, they are \u003Ccode class=\"literal\">dissected\u003C/code>. For example, this happens in the \u003Ccode class=\"literal\">tc\u003C/code> subsystem, in multipath routing, in bonding, or when calculating a packet hash. In this situation the kernel parses the packet headers and fills internal structures with the information from the packet headers. You can replace this internal parsing using the \u003Ccode class=\"literal\">BPF_PROG_TYPE_FLOW_DISSECTOR\u003C/code> program. Note that you can only dissect TCP and UDP over IPv4 and IPv6 in eBPF in RHEL.\n\t\t\t\u003C/p>\u003Ch5 id=\"tcp_congestion_control\">TCP Congestion Control\u003C/h5>\u003Cp>\n\t\t\t\tYou can write a custom TCP congestion control algorithm using a group of \u003Ccode class=\"literal\">BPF_PROG_TYPE_STRUCT_OPS\u003C/code> programs that implement \u003Ccode class=\"literal\">struct tcp_congestion_oops\u003C/code> callbacks. An algorithm that is implemented this way is available to the system alongside the built-in kernel algorithms.\n\t\t\t\u003C/p>\u003Ch5 id=\"routes_with_encapsulation\">Routes with encapsulation\u003C/h5>\u003Cp>\n\t\t\t\tYou can attach one of the following eBPF program types to routes in the routing table as a tunnel encapsulation attribute:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">BPF_PROG_TYPE_LWT_IN\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">BPF_PROG_TYPE_LWT_OUT\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">BPF_PROG_TYPE_LWT_XMIT\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThe functionality of such an eBPF program is limited to specific tunnel configurations and does not allow creating a generic encapsulation or decapsulation solution.\n\t\t\t\u003C/p>\u003Ch5 id=\"socket_lookup\">Socket lookup\u003C/h5>\u003Cp>\n\t\t\t\tTo bypass limitations of the \u003Ccode class=\"literal\">bind\u003C/code> system call, use an eBPF program of the \u003Ccode class=\"literal\">BPF_PROG_TYPE_SK_LOOKUP\u003C/code> type. Such programs can select a listening socket for new incoming TCP connections or an unconnected socket for UDP packets.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"ref_overview-of-xdp-features-by-network-cards_assembly_understanding-the-ebpf-features-in-rhel-9\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">42.2. Overview of XDP features in RHEL 9 by network cards\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe following is an overview of XDP-enabled network cards and the XDP features you can use with them:\n\t\t\t\u003C/p>\u003Crh-table>\u003Ctable class=\"gt-4-cols lt-7-rows\">\u003Ccolgroup>\u003Ccol style=\"width: 34%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 17%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 8%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 8%; \" class=\"col_4\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 8%; \" class=\"col_5\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 8%; \" class=\"col_6\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 8%; \" class=\"col_7\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 8%; \" class=\"col_8\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140053168070432\" scope=\"col\">Network card\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140053168069344\" scope=\"col\">Driver\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140053168068256\" scope=\"col\">Basic\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140053168067168\" scope=\"col\">Redirect\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140053168066080\" scope=\"col\">Target\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140053168064992\" scope=\"col\">HW offload\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140053168063904\" scope=\"col\">Zero-copy\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140053168062816\" scope=\"col\">Large MTU\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168070432\"> \u003Cp>\n\t\t\t\t\t\t\t\tAmazon Elastic Network Adapter\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168069344\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">ena\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168068256\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168067168\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168066080\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes \u003Ca href=\"#ftn.xdp-on-interface\" class=\"footnote\">\u003Csup class=\"footnote\" id=\"xdp-on-interface\">[a]\u003C/sup>\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168064992\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168063904\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168062816\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168070432\"> \u003Cp>\n\t\t\t\t\t\t\t\taQuantia AQtion Ethernet card\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168069344\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">atlantic\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168068256\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168067168\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168066080\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168064992\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168063904\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168062816\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168070432\"> \u003Cp>\n\t\t\t\t\t\t\t\tBroadcom NetXtreme-C/E 10/25/40/50 gigabit Ethernet\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168069344\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">bnxt_en\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168068256\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168067168\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168066080\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes \u003Ca href=\"#ftn.xdp-on-interface\" class=\"footnoteref\">\u003Csup class=\"footnoteref\">[a]\u003C/sup>\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168064992\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168063904\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168062816\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168070432\"> \u003Cp>\n\t\t\t\t\t\t\t\tCavium Thunder Virtual function\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168069344\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">nicvf\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168068256\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168067168\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168066080\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168064992\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168063904\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168062816\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168070432\"> \u003Cp>\n\t\t\t\t\t\t\t\tGoogle Virtual NIC (gVNIC) support\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168069344\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">gve\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168068256\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168067168\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168066080\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168064992\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168063904\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168062816\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168070432\"> \u003Cp>\n\t\t\t\t\t\t\t\tIntel® 10GbE PCI Express Virtual Function Ethernet\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168069344\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">ixgbevf\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168068256\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168067168\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168066080\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168064992\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168063904\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168062816\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168070432\"> \u003Cp>\n\t\t\t\t\t\t\t\tIntel® 10GbE PCI Express adapters\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168069344\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">ixgbe\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168068256\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168067168\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168066080\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes \u003Ca href=\"#ftn.xdp-on-interface\" class=\"footnoteref\">\u003Csup class=\"footnoteref\">[a]\u003C/sup>\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168064992\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168063904\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168062816\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes \u003Ca href=\"#ftn.transmitting-side-only\" class=\"footnote\">\u003Csup class=\"footnote\" id=\"transmitting-side-only\">[b]\u003C/sup>\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168070432\"> \u003Cp>\n\t\t\t\t\t\t\t\tIntel® Ethernet Connection E800 Series\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168069344\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">ice\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168068256\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168067168\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168066080\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes \u003Ca href=\"#ftn.xdp-on-interface\" class=\"footnoteref\">\u003Csup class=\"footnoteref\">[a]\u003C/sup>\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168064992\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168063904\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168062816\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168070432\"> \u003Cp>\n\t\t\t\t\t\t\t\tIntel® Ethernet Controller I225-LM/I225-V family\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168069344\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">igc\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168068256\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168067168\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168066080\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168064992\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168063904\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168062816\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes \u003Ca href=\"#ftn.transmitting-side-only\" class=\"footnoteref\">\u003Csup class=\"footnoteref\">[b]\u003C/sup>\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168070432\"> \u003Cp>\n\t\t\t\t\t\t\t\tIntel® PCI Express Gigabit adapters\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168069344\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">igb\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168068256\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168067168\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168066080\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes \u003Ca href=\"#ftn.xdp-on-interface\" class=\"footnoteref\">\u003Csup class=\"footnoteref\">[a]\u003C/sup>\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168064992\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168063904\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168062816\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes \u003Ca href=\"#ftn.transmitting-side-only\" class=\"footnoteref\">\u003Csup class=\"footnoteref\">[b]\u003C/sup>\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168070432\"> \u003Cp>\n\t\t\t\t\t\t\t\tIntel® Ethernet Controller XL710 Family\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168069344\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">i40e\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168068256\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168067168\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168066080\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes \u003Ca href=\"#ftn.xdp-on-interface\" class=\"footnoteref\">\u003Csup class=\"footnoteref\">[a]\u003C/sup>\u003C/a> \u003Ca href=\"#ftn.requires-queues-ge-cpu-index\" class=\"footnote\">\u003Csup class=\"footnote\" id=\"requires-queues-ge-cpu-index\">[c]\u003C/sup>\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168064992\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168063904\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168062816\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168070432\"> \u003Cp>\n\t\t\t\t\t\t\t\tMarvell OcteonTX2\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168069344\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">rvu_nicpf\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168068256\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168067168\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168066080\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes \u003Ca href=\"#ftn.xdp-on-interface\" class=\"footnoteref\">\u003Csup class=\"footnoteref\">[a]\u003C/sup>\u003C/a> \u003Ca href=\"#ftn.requires-queues-ge-cpu-index\" class=\"footnoteref\">\u003Csup class=\"footnoteref\">[c]\u003C/sup>\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168064992\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168063904\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168062816\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168070432\"> \u003Cp>\n\t\t\t\t\t\t\t\tMellanox 5th generation network adapters (ConnectX series)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168069344\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">mlx5_core\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168068256\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168067168\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168066080\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes \u003Ca href=\"#ftn.requires-queues-ge-cpu-index\" class=\"footnoteref\">\u003Csup class=\"footnoteref\">[c]\u003C/sup>\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168064992\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168063904\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168062816\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168070432\"> \u003Cp>\n\t\t\t\t\t\t\t\tMellanox Technologies 1/10/40Gbit Ethernet\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168069344\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">mlx4_en\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168068256\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168067168\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168066080\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168064992\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168063904\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168062816\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168070432\"> \u003Cp>\n\t\t\t\t\t\t\t\tMicrosoft Azure Network Adapter\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168069344\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">mana\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168068256\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168067168\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168066080\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168064992\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168063904\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168062816\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168070432\"> \u003Cp>\n\t\t\t\t\t\t\t\tMicrosoft Hyper-V virtual network\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168069344\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">hv_netvsc\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168068256\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168067168\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168066080\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168064992\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168063904\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168062816\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168070432\"> \u003Cp>\n\t\t\t\t\t\t\t\tNetronome® NFP4000/NFP6000 NIC \u003Ca href=\"#ftn.netronome-xdp-limitation\" class=\"footnote\">\u003Csup class=\"footnote\" id=\"netronome-xdp-limitation\">[d]\u003C/sup>\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168069344\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">nfp\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168068256\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168067168\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168066080\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168064992\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168063904\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168062816\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168070432\"> \u003Cp>\n\t\t\t\t\t\t\t\tQEMU Virtio network\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168069344\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">virtio_net\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168068256\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168067168\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168066080\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes \u003Ca href=\"#ftn.xdp-on-interface\" class=\"footnoteref\">\u003Csup class=\"footnoteref\">[a]\u003C/sup>\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168064992\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168063904\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168062816\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168070432\"> \u003Cp>\n\t\t\t\t\t\t\t\tQLogic QED 25/40/100Gb Ethernet NIC\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168069344\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">qede\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168068256\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168067168\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168066080\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168064992\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168063904\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168062816\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168070432\"> \u003Cp>\n\t\t\t\t\t\t\t\tSTMicroelectronics Multi-Gigabit Ethernet\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168069344\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">stmmac\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168068256\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168067168\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168066080\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168064992\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168063904\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168062816\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168070432\"> \u003Cp>\n\t\t\t\t\t\t\t\tSolarflare SFC9000/SFC9100/EF100-family\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168069344\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">sfc\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168068256\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168067168\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168066080\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes \u003Ca href=\"#ftn.requires-queues-ge-cpu-index\" class=\"footnoteref\">\u003Csup class=\"footnoteref\">[c]\u003C/sup>\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168064992\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168063904\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168062816\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168070432\"> \u003Cp>\n\t\t\t\t\t\t\t\tUniversal TUN/TAP device\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168069344\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">tun\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168068256\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168067168\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168066080\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168064992\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168063904\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168062816\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168070432\"> \u003Cp>\n\t\t\t\t\t\t\t\tVirtual Ethernet pair device\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168069344\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">veth\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168068256\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168067168\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168066080\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168064992\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168063904\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168062816\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168070432\"> \u003Cp>\n\t\t\t\t\t\t\t\tVMware VMXNET3 ethernet driver\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168069344\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">vmxnet3\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168068256\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168067168\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168066080\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes \u003Ca href=\"#ftn.xdp-on-interface\" class=\"footnoteref\">\u003Csup class=\"footnoteref\">[a]\u003C/sup>\u003C/a> \u003Ca href=\"#ftn.requires-queues-ge-cpu-index\" class=\"footnoteref\">\u003Csup class=\"footnoteref\">[c]\u003C/sup>\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168064992\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168063904\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168062816\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168070432\"> \u003Cp>\n\t\t\t\t\t\t\t\tXen paravirtual network device\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168069344\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">xen-netfront\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168068256\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168067168\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168066080\"> \u003Cp>\n\t\t\t\t\t\t\t\tyes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168064992\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168063904\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140053168062816\"> \u003Cp>\n\t\t\t\t\t\t\t\tno\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003Ctbody class=\"footnotes\">\u003Ctr>\u003Ctd colspan=\"8\">\u003Cdiv id=\"ftn.xdp-on-interface\" class=\"footnote\">\u003Cdiv class=\"para\">\u003Ca href=\"#xdp-on-interface\" class=\"simpara\">\u003Csup class=\"simpara\">[a] \u003C/sup>\u003C/a>\n\t\t\t\t\t\t\t\t\tOnly if an XDP program is loaded on the interface.\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/div>\u003Cdiv id=\"ftn.transmitting-side-only\" class=\"footnote\">\u003Cdiv class=\"para\">\u003Ca href=\"#transmitting-side-only\" class=\"simpara\">\u003Csup class=\"simpara\">[b] \u003C/sup>\u003C/a>\n\t\t\t\t\t\t\t\t\tTransmitting side only. Cannot receive large packets through XDP.\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/div>\u003Cdiv id=\"ftn.requires-queues-ge-cpu-index\" class=\"footnote\">\u003Cdiv class=\"para\">\u003Ca href=\"#requires-queues-ge-cpu-index\" class=\"simpara\">\u003Csup class=\"simpara\">[c] \u003C/sup>\u003C/a>\n\t\t\t\t\t\t\t\t\tRequires several XDP TX queues allocated that is larger or equal to the largest CPU index.\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/div>\u003Cdiv id=\"ftn.netronome-xdp-limitation\" class=\"footnote\">\u003Cdiv class=\"para\">\u003Ca href=\"#netronome-xdp-limitation\" class=\"simpara\">\u003Csup class=\"simpara\">[d] \u003C/sup>\u003C/a>\n\t\t\t\t\t\t\t\t\tSome of the listed features are not available for the Netronome® NFP3800 NIC.\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/div>\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cp>\n\t\t\t\tLegend:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tBasic: Supports basic return codes: \u003Ccode class=\"literal\">DROP\u003C/code>, \u003Ccode class=\"literal\">PASS\u003C/code>, \u003Ccode class=\"literal\">ABORTED\u003C/code>, and \u003Ccode class=\"literal\">TX\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRedirect: Supports the \u003Ccode class=\"literal\">XDP_REDIRECT\u003C/code> return code.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTarget: Can be a target of a \u003Ccode class=\"literal\">XDP_REDIRECT\u003C/code> return code.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tHW offload: Supports XDP hardware offload.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tZero-copy: Supports the zero-copy mode for the \u003Ccode class=\"literal\">AF_XDP\u003C/code> protocol family.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tLarge MTU: Supports packets larger than page size.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"network-tracing-using-the-bpf-compiler-collection_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 43. Network tracing using the BPF compiler collection\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tBPF Compiler Collection (BCC) is a library, which facilitates the creation of the extended Berkeley Packet Filter (eBPF) programs. The main utility of eBPF programs is analyzing the operating system performance and network performance without experiencing overhead or security issues.\n\t\t\u003C/p>\u003Cp>\n\t\t\tBCC removes the need for users to know deep technical details of eBPF, and provides many out-of-the-box starting points, such as the \u003Ccode class=\"literal systemitem\">bcc-tools\u003C/code> package with pre-created eBPF programs.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tThe eBPF programs are triggered on events, such as disk I/O, TCP connections, and process creations. It is unlikely that the programs should cause the kernel to crash, loop or become unresponsive because they run in a safe virtual machine in the kernel.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"installing-the-bcc-tools-package_network-tracing-using-the-bpf-compiler-collection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">43.1. Installing the bcc-tools package\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tInstall the \u003Ccode class=\"literal\">bcc-tools\u003C/code> package, which also installs the BPF Compiler Collection (BCC) library as a dependency.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall \u003Ccode class=\"literal\">bcc-tools\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install bcc-tools\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe BCC tools are installed in the \u003Ccode class=\"literal\">/usr/share/bcc/tools/\u003C/code> directory.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInspect the installed tools:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ls -l /usr/share/bcc/tools/\u003C/strong>\u003C/span>\n...\n-rwxr-xr-x. 1 root root  4198 Dec 14 17:53 dcsnoop\n-rwxr-xr-x. 1 root root  3931 Dec 14 17:53 dcstat\n-rwxr-xr-x. 1 root root 20040 Dec 14 17:53 deadlock_detector\n-rw-r--r--. 1 root root  7105 Dec 14 17:53 deadlock_detector.c\ndrwxr-xr-x. 3 root root  8192 Mar 11 10:28 doc\n-rwxr-xr-x. 1 root root  7588 Dec 14 17:53 execsnoop\n-rwxr-xr-x. 1 root root  6373 Dec 14 17:53 ext4dist\n-rwxr-xr-x. 1 root root 10401 Dec 14 17:53 ext4slower\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal systemitem\">doc\u003C/code> directory in the listing above contains documentation for each tool.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"displaying-tcp-connections-added-to-the-kernels-accept-queue_network-tracing-using-the-bpf-compiler-collection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">43.2. Displaying TCP connections added to the Kernel’s accept queue\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tAfter the kernel receives the \u003Ccode class=\"literal\">ACK\u003C/code> packet in a TCP 3-way handshake, the kernel moves the connection from the \u003Ccode class=\"literal\">SYN\u003C/code> queue to the \u003Ccode class=\"literal\">accept\u003C/code> queue after the connection’s state changes to \u003Ccode class=\"literal\">ESTABLISHED\u003C/code>. Therefore, only successful TCP connections are visible in this queue.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">tcpaccept\u003C/code> utility uses eBPF features to display all connections the kernel adds to the \u003Ccode class=\"literal\">accept\u003C/code> queue. The utility is lightweight because it traces the \u003Ccode class=\"literal\">accept()\u003C/code> function of the kernel instead of capturing packets and filtering them. For example, use \u003Ccode class=\"literal\">tcpaccept\u003C/code> for general troubleshooting to display new connections the server has accepted.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter the following command to start the tracing the kernel \u003Ccode class=\"literal\">accept\u003C/code> queue:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>/usr/share/bcc/tools/tcpaccept\u003C/strong>\u003C/span>\nPID   COMM      IP RADDR         RPORT  LADDR    LPORT\n843   sshd      4  192.0.2.17    50598  192.0.2.1  22\n1107  ns-slapd  4  198.51.100.6  38772  192.0.2.1  389\n1107  ns-slapd  4  203.0.113.85  38774  192.0.2.1  389\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEach time the kernel accepts a connection, \u003Ccode class=\"literal\">tcpaccept\u003C/code> displays the details of the connections.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">C\u003C/kbd> to stop the tracing process.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">tcpaccept(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/bcc/tools/doc/tcpaccept_example.txt\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"tracing-outgoing-tcp-connection-attempts_network-tracing-using-the-bpf-compiler-collection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">43.3. Tracing outgoing TCP connection attempts\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">tcpconnect\u003C/code> utility uses eBPF features to trace outgoing TCP connection attempts. The output of the utility also includes connections that failed.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">tcpconnect\u003C/code> utility is lightweight because it traces, for example, the \u003Ccode class=\"literal\">connect()\u003C/code> function of the kernel instead of capturing packets and filtering them.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter the following command to start the tracing process that displays all outgoing connections:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>/usr/share/bcc/tools/tcpconnect\u003C/strong>\u003C/span>\nPID    COMM         IP SADDR      DADDR          DPORT\n31346  curl         4  192.0.2.1  198.51.100.16  80\n31348  telnet       4  192.0.2.1  203.0.113.231  23\n31361  isc-worker00 4  192.0.2.1  192.0.2.254    53\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEach time the kernel processes an outgoing connection, \u003Ccode class=\"literal\">tcpconnect\u003C/code> displays the details of the connections.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">C\u003C/kbd> to stop the tracing process.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">tcpconnect(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/bcc/tools/doc/tcpconnect_example.txt\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"measuring-the-latency-of-outgoing-tcp-connections_network-tracing-using-the-bpf-compiler-collection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">43.4. Measuring the latency of outgoing TCP connections\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe TCP connection latency is the time taken to establish a connection. This typically involves the kernel TCP/IP processing and network round trip time, and not the application runtime.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">tcpconnlat\u003C/code> utility uses eBPF features to measure the time between a sent \u003Ccode class=\"literal\">SYN\u003C/code> packet and the received response packet.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart measuring the latency of outgoing connections:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>/usr/share/bcc/tools/tcpconnlat\u003C/strong>\u003C/span>\nPID    COMM         IP SADDR      DADDR          DPORT LAT(ms)\n32151  isc-worker00 4  192.0.2.1  192.0.2.254    53    0.60\n32155  ssh          4  192.0.2.1  203.0.113.190  22    26.34\n32319  curl         4  192.0.2.1  198.51.100.59  443   188.96\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEach time the kernel processes an outgoing connection, \u003Ccode class=\"literal\">tcpconnlat\u003C/code> displays the details of the connection after the kernel receives the response packet.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">C\u003C/kbd> to stop the tracing process.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">tcpconnlat(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/bcc/tools/doc/tcpconnlat_example.txt\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"displaying-details-about-tcp-packets-and-segments-that-were-dropped-by-the-kernel_network-tracing-using-the-bpf-compiler-collection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">43.5. Displaying details about TCP packets and segments that were dropped by the kernel\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">tcpdrop\u003C/code> utility enables administrators to display details about TCP packets and segments that were dropped by the kernel. Use this utility to debug high rates of dropped packets that can cause the remote system to send timer-based retransmits. High rates of dropped packets and segments can impact the performance of a server.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tInstead of capturing and filtering packets, which is resource-intensive, the \u003Ccode class=\"literal\">tcpdrop\u003C/code> utility uses eBPF features to retrieve the information directly from the kernel.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter the following command to start displaying details about dropped TCP packets and segments:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>/usr/share/bcc/tools/tcpdrop\u003C/strong>\u003C/span>\nTIME     PID    IP SADDR:SPORT       &gt; DADDR:DPORT   STATE (FLAGS)\n13:28:39 32253  4  192.0.2.85:51616  &gt; 192.0.2.1:22  CLOSE_WAIT (FIN|ACK)\n\tb'tcp_drop+0x1'\n\tb'tcp_data_queue+0x2b9'\n\t...\n\n13:28:39 1      4  192.0.2.85:51616  &gt; 192.0.2.1:22   CLOSE (ACK)\n\tb'tcp_drop+0x1'\n\tb'tcp_rcv_state_process+0xe2'\n\t...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEach time the kernel drops TCP packets and segments, \u003Ccode class=\"literal\">tcpdrop\u003C/code> displays the details of the connection, including the kernel stack trace that led to the dropped package.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">C\u003C/kbd> to stop the tracing process.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">tcpdrop(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/bcc/tools/doc/tcpdrop_example.txt\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"tracing-tcp-sessions_network-tracing-using-the-bpf-compiler-collection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">43.6. Tracing TCP sessions\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">tcplife\u003C/code> utility uses eBPF to trace TCP sessions that open and close, and prints a line of output to summarize each one. Administrators can use \u003Ccode class=\"literal\">tcplife\u003C/code> to identify connections and the amount of transferred traffic.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor example, you can display connections to port \u003Ccode class=\"literal\">22\u003C/code> (SSH) to retrieve the following information:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe local process ID (PID)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe local process name\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe local IP address and port number\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe remote IP address and port number\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe amount of received and transmitted traffic in KB.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe time in milliseconds the connection was active\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter the following command to start the tracing of connections to the local port \u003Ccode class=\"literal\">22\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>/usr/share/bcc/tools/tcplife -L 22\u003C/strong>\u003C/span>\nPID   COMM    LADDR      LPORT RADDR       RPORT TX_KB  RX_KB      MS\n19392 sshd    192.0.2.1  22    192.0.2.17  43892    53     52 6681.95\n19431 sshd    192.0.2.1  22    192.0.2.245 43902    81 249381 7585.09\n19487 sshd    192.0.2.1  22    192.0.2.121 43970  6998     7 16740.35\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEach time a connection is closed, \u003Ccode class=\"literal\">tcplife\u003C/code> displays the details of the connections.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">C\u003C/kbd> to stop the tracing process.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">tcplife(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/bcc/tools/doc/tcplife_example.txt\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"tracing-tcp-retransmissions_network-tracing-using-the-bpf-compiler-collection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">43.7. Tracing TCP retransmissions\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">tcpretrans\u003C/code> utility displays details about TCP retransmissions, such as the local and remote IP address and port number, as well as the TCP state at the time of the retransmissions.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe utility uses eBPF features and, therefore, has a very low overhead.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the following command to start displaying TCP retransmission details:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>/usr/share/bcc/tools/tcpretrans\u003C/strong>\u003C/span>\nTIME     PID  IP LADDR:LPORT   T&gt; RADDR:RPORT         STATE\n00:23:02 0    4  192.0.2.1:22  R&gt; 198.51.100.0:26788  ESTABLISHED\n00:23:02 0    4  192.0.2.1:22  R&gt; 198.51.100.0:26788  ESTABLISHED\n00:45:43 0    4  192.0.2.1:22  R&gt; 198.51.100.0:17634  ESTABLISHED\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEach time the kernel calls the TCP retransmit function, \u003Ccode class=\"literal\">tcpretrans\u003C/code> displays the details of the connection.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">C\u003C/kbd> to stop the tracing process.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">tcpretrans(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/bcc/tools/doc/tcpretrans_example.txt\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"displaying-tcp-state-change-information_network-tracing-using-the-bpf-compiler-collection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">43.8. Displaying TCP state change information\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tDuring a TCP session, the TCP state changes. The \u003Ccode class=\"literal\">tcpstates\u003C/code> utility uses eBPF functions to trace these state changes, and prints details including the duration in each state. For example, use \u003Ccode class=\"literal\">tcpstates\u003C/code> to identify if connections spend too much time in the initialization state.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the following command to start tracing TCP state changes:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>/usr/share/bcc/tools/tcpstates\u003C/strong>\u003C/span>\nSKADDR           C-PID C-COMM     LADDR     LPORT RADDR       RPORT OLDSTATE    -&gt; NEWSTATE    MS\nffff9cd377b3af80 0     swapper/1  0.0.0.0   22    0.0.0.0     0     LISTEN      -&gt; SYN_RECV    0.000\nffff9cd377b3af80 0     swapper/1  192.0.2.1 22    192.0.2.45  53152 SYN_RECV    -&gt; ESTABLISHED 0.067\nffff9cd377b3af80 818   sssd_nss   192.0.2.1 22    192.0.2.45  53152 ESTABLISHED -&gt; CLOSE_WAIT  65636.773\nffff9cd377b3af80 1432  sshd       192.0.2.1 22    192.0.2.45  53152 CLOSE_WAIT  -&gt; LAST_ACK    24.409\nffff9cd377b3af80 1267  pulseaudio 192.0.2.1 22    192.0.2.45  53152 LAST_ACK    -&gt; CLOSE       0.376\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEach time a connection changes its state, \u003Ccode class=\"literal\">tcpstates\u003C/code> displays a new line with updated connection details.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf multiple connections change their state at the same time, use the socket address in the first column (\u003Ccode class=\"literal\">SKADDR\u003C/code>) to determine which entries belong to the same connection.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">C\u003C/kbd> to stop the tracing process.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">tcpstates(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/bcc/tools/doc/tcpstates_example.txt\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"summarizing-and-aggregating-tcp-traffic-sent-to-specific-subnets_network-tracing-using-the-bpf-compiler-collection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">43.9. Summarizing and aggregating TCP traffic sent to specific subnets\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">tcpsubnet\u003C/code> utility summarizes and aggregates IPv4 TCP traffic that the local host sends to subnets and displays the output on a fixed interval. The utility uses eBPF features to collect and summarize the data to reduce the overhead.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tBy default, \u003Ccode class=\"literal\">tcpsubnet\u003C/code> summarizes traffic for the following subnets:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">127.0.0.1/32\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">10.0.0.0/8\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">172.16.0.0/12\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">192.0.2.0/24/16\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">0.0.0.0/0\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tNote that the last subnet (\u003Ccode class=\"literal\">0.0.0.0/0\u003C/code>) is a catch-all option. The \u003Ccode class=\"literal\">tcpsubnet\u003C/code> utility counts all traffic for subnets different than the first four in this catch-all entry.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFollow the procedure to count the traffic for the \u003Ccode class=\"literal\">192.0.2.0/24\u003C/code> and \u003Ccode class=\"literal\">198.51.100.0/24\u003C/code> subnets. Traffic to other subnets will be tracked in the \u003Ccode class=\"literal\">0.0.0.0/0\u003C/code> catch-all subnet entry.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart monitoring the amount of traffic send to the \u003Ccode class=\"literal\">192.0.2.0/24\u003C/code>, \u003Ccode class=\"literal\">198.51.100.0/24\u003C/code>, and other subnets:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>/usr/share/bcc/tools/tcpsubnet 192.0.2.0/24,198.51.100.0/24,0.0.0.0/0\u003C/strong>\u003C/span>\nTracing... Output every 1 secs. Hit Ctrl-C to end\n[02/21/20 10:04:50]\n192.0.2.0/24           856\n198.51.100.0/24       7467\n[02/21/20 10:04:51]\n192.0.2.0/24          1200\n198.51.100.0/24       8763\n0.0.0.0/0              673\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis command displays the traffic in bytes for the specified subnets once per second.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">C\u003C/kbd> to stop the tracing process.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">tcpsubnet(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/bcc/tools/doc/tcpsubnet.txt\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"displaying-the-network-throughput-by-ip-address-and-port_network-tracing-using-the-bpf-compiler-collection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">43.10. Displaying the network throughput by IP address and port\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">tcptop\u003C/code> utility displays TCP traffic the host sends and receives in kilobytes. The report automatically refreshes and contains only active TCP connections. The utility uses eBPF features and, therefore, has only a very low overhead.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo monitor the sent and received traffic, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>/usr/share/bcc/tools/tcptop\u003C/strong>\u003C/span>\n13:46:29 loadavg: 0.10 0.03 0.01 1/215 3875\n\nPID    COMM         LADDR           RADDR              RX_KB   TX_KB\n3853   3853         192.0.2.1:22    192.0.2.165:41838  32     102626\n1285   sshd         192.0.2.1:22    192.0.2.45:39240   0           0\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe output of the command includes only active TCP connections. If the local or remote system closes a connection, the connection is no longer visible in the output.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">C\u003C/kbd> to stop the tracing process.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">tcptop(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/bcc/tools/doc/tcptop.txt\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"tracing-established-tcp-connections_network-tracing-using-the-bpf-compiler-collection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">43.11. Tracing established TCP connections\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">tcptracer\u003C/code> utility traces the kernel functions that connect, accept, and close TCP connections. The utility uses eBPF features and, therefore, has a very low overhead.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the following command to start the tracing process:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>/usr/share/bcc/tools/tcptracer\u003C/strong>\u003C/span>\nTracing TCP established connections. Ctrl-C to end.\nT  PID    COMM        IP SADDR        DADDR       SPORT  DPORT\nA  1088   ns-slapd    4  192.0.2.153  192.0.2.1   0      65535\nA  845    sshd        4  192.0.2.1    192.0.2.67  22     42302\nX  4502   sshd        4  192.0.2.1    192.0.2.67  22     42302\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEach time the kernel connects, accepts, or closes a connection, \u003Ccode class=\"literal\">tcptracer\u003C/code> displays the details of the connections.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">C\u003C/kbd> to stop the tracing process.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">tcptracer(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/bcc/tools/doc/tcptracer_example.txt\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"tracing-ipv4-and-ipv6-listen-attempts_network-tracing-using-the-bpf-compiler-collection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">43.12. Tracing IPv4 and IPv6 listen attempts\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">solisten\u003C/code> utility traces all IPv4 and IPv6 listen attempts. It traces the listen attempts including that ultimately fail or the listening program that does not accept the connection. The utility traces function that the kernel calls when a program wants to listen for TCP connections.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter the following command to start the tracing process that displays all listen TCP attempts:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>/usr/share/bcc/tools/solisten\u003C/strong>\u003C/span>\nPID    COMM           PROTO         BACKLOG     PORT     ADDR\n3643   nc             TCPv4         1           4242     0.0.0.0\n3659   nc             TCPv6         1           4242     2001:db8:1::1\n4221   redis-server   TCPv6         128         6379     ::\n4221   redis-server   TCPv4         128         6379     0.0.0.0\n....\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">C\u003C/kbd> to stop the tracing process.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">solisten(9)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/bcc/tools/doc/solisten_example.txt\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"summarizing-the-service-time-of-soft-interrupts_network-tracing-using-the-bpf-compiler-collection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">43.13. Summarizing the service time of soft interrupts\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">softirqs\u003C/code> utility summarizes the time spent servicing soft interrupts (soft IRQs) and shows this time as either totals or histogram distributions. This utility uses the \u003Ccode class=\"literal\">irq:softirq_enter\u003C/code> and \u003Ccode class=\"literal\">irq:softirq_exit\u003C/code> kernel tracepoints, which is a stable tracing mechanism.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter the following command to start the tracing \u003Ccode class=\"literal\">soft irq\u003C/code> event time:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>/usr/share/bcc/tools/softirqs\u003C/strong>\u003C/span>\nTracing soft irq event time... Hit Ctrl-C to end.\n^C\nSOFTIRQ          TOTAL_usecs\ntasklet                  166\nblock                   9152\nnet_rx                 12829\nrcu                    53140\nsched                 182360\ntimer                 306256\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">C\u003C/kbd> to stop the tracing process.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">softirqs(8)\u003C/code> and \u003Ccode class=\"literal\">mpstat(1)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/bcc/tools/doc/softirqs_example.txt\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"summarizing-packets-size-and-count-on-a-network-interface_network-tracing-using-the-bpf-compiler-collection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">43.14. Summarizing packets size and count on a network interface\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">netqtop\u003C/code> utility displays statistics about the attributes of received (RX) and transmitted (TX) packets on each network queue of a particular network interface. The statistics include:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tBytes per second (BPS)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPackets per second (PPS)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe average packet size\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTotal number of packets\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tTo generate these statistics, \u003Ccode class=\"literal\">netqtop\u003C/code> traces the kernel functions that perform events of transmitted packets \u003Ccode class=\"literal\">net_dev_start_xmit\u003C/code> and received packets \u003Ccode class=\"literal\">netif_receive_skb\u003C/code>.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the number of packets within the range of bytes size of the time interval of \u003Ccode class=\"literal\">2\u003C/code> seconds:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>/usr/share/bcc/tools/netqtop -n enp1s0 -i 2\u003C/strong>\u003C/span>\n\nFri Jan 31 18:08:55 2023\nTX\n QueueID\tavg_size   [0, 64)\t[64, 512)  [512, 2K)  [2K, 16K)  [16K, 64K)\n 0      \t0      \t0      \t0      \t0      \t0      \t0\n Total  \t0      \t0      \t0      \t0      \t0      \t0\n\nRX\n QueueID\tavg_size   [0, 64)\t[64, 512)  [512, 2K)  [2K, 16K)  [16K, 64K)\n 0      \t38.0   \t1      \t0      \t0      \t0      \t0\n Total  \t38.0   \t1      \t0      \t0      \t0      \t0\n-----------------------------------------------------------------------------\nFri Jan 31 18:08:57 2023\nTX\n QueueID\tavg_size   [0, 64)\t[64, 512)  [512, 2K)  [2K, 16K)  [16K, 64K)\n 0      \t0      \t0      \t0      \t0      \t0      \t0\n Total  \t0      \t0      \t0      \t0      \t0      \t0\n\nRX\n QueueID\tavg_size   [0, 64)\t[64, 512)  [512, 2K)  [2K, 16K)  [16K, 64K)\n 0      \t38.0   \t1      \t0      \t0      \t0      \t0\n Total  \t38.0   \t1      \t0      \t0      \t0      \t0\n-----------------------------------------------------------------------------\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">C\u003C/kbd> to stop \u003Ccode class=\"literal\">netqtop\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">netqtop(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/bcc/tools/doc/netqtop_example.txt\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 44. Configuring network devices to accept traffic from all MAC addresses\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tNetwork devices usually intercept and read packets that their controller is programmed to receive. You can configure the network devices to accept traffic from all MAC addresses in a virtual switch or at the port group level.\n\t\t\u003C/p>\u003Cp>\n\t\t\tYou can use this network mode to:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tDiagnose network connectivity issues\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tMonitor network activity for security reasons\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tIntercept private data-in-transit or intrusion in the network\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tYou can enable this mode for any kind of network device, except \u003Ccode class=\"literal\">InfiniBand\u003C/code>.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"proc_temporarily-configuring-a-network-device-to-accept-all-traffic_assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">44.1. Temporarily configuring a device to accept all traffic\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">ip\u003C/code> utility to temporary configure a network device to accept all traffic regardless of the MAC addresses.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Display the network interfaces to identify the one for which you want to receive all traffic:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip address show\u003C/strong>\u003C/span>\n1: enp1s0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc fq_codel state DOWN group default qlen 1000\n    link/ether 98:fa:9b:a4:34:09 brd ff:ff:ff:ff:ff:ff\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tModify the device to enable or disable this property:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo enable the \u003Ccode class=\"literal\">accept-all-mac-addresses\u003C/code> mode for \u003Ccode class=\"literal\">enp1s0\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link set \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> promisc \u003Cspan class=\"emphasis\">\u003Cem>on\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo disable the \u003Ccode class=\"literal\">accept-all-mac-addresses\u003C/code> mode for \u003Ccode class=\"literal\">enp1s0\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link set \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> promisc \u003Cspan class=\"emphasis\">\u003Cem>off\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the \u003Ccode class=\"literal\">accept-all-mac-addresses\u003C/code> mode is enabled:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link show \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n1: enp1s0: &lt;NO-CARRIER,BROADCAST,MULTICAST,\u003Cspan class=\"strong strong\">\u003Cstrong>PROMISC\u003C/strong>\u003C/span>,UP&gt; mtu 1500 qdisc fq_codel state DOWN mode DEFAULT group default qlen 1000\n    link/ether 98:fa:9b:a4:34:09 brd ff:ff:ff:ff:ff:ff\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">PROMISC\u003C/code> flag in the device description indicates that the mode is enabled.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_permanently-configuring-a-network-device-to-accept-all-traffic-using-nmcli_assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">44.2. Permanently configuring a network device to accept all traffic using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">nmcli\u003C/code> utility to permanently configure a network device to accept all traffic regardless of the MAC addresses.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Display the network interfaces to identify the one for which you want to receive all traffic:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip address show\u003C/strong>\u003C/span>\n1: enp1s0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc fq_codel state DOWN group default qlen 1000\n    link/ether 98:fa:9b:a4:34:09 brd ff:ff:ff:ff:ff:ff\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou can create a new connection, if you do not have any.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tModify the network device to enable or disable this property.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo enable the \u003Ccode class=\"literal\">ethernet.accept-all-mac-addresses\u003C/code> mode for \u003Ccode class=\"literal\">enp1s0\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> ethernet.accept-all-mac-addresses \u003Cspan class=\"emphasis\">\u003Cem>yes\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo disable the \u003Ccode class=\"literal\">accept-all-mac-addresses\u003C/code> mode for \u003Ccode class=\"literal\">enp1s0\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> ethernet.accept-all-mac-addresses \u003Cspan class=\"emphasis\">\u003Cem>no\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tApply the changes, reactivate the connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the \u003Ccode class=\"literal\">ethernet.accept-all-mac-addresses\u003C/code> mode is enabled:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection show \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n...\n802-3-ethernet.accept-all-mac-addresses:1     \u003Cspan class=\"strong strong\">\u003Cstrong>(true)\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">802-3-ethernet.accept-all-mac-addresses: true\u003C/code> indicates that the mode is enabled.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_permanently-configuring-a-network-device-to-accept-all-traffic-using-nmstatectl_assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">44.3. Permanently configuring a network device to accept all traffic using \u003Ccode class=\"literal\">nmstatectl\u003C/code>\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tUse the \u003Ccode class=\"literal\">nmstatectl\u003C/code> utility to configure a device to accept all traffic regardless of the MAC addresses through the Nmstate API. The Nmstate API ensures that, after setting the configuration, the result matches the configuration file. If anything fails, \u003Ccode class=\"literal\">nmstatectl\u003C/code> automatically rolls back the changes to avoid leaving the system in an incorrect state.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">nmstate\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">enp1s0.yml\u003C/code> file that you used to configure the device is available.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEdit the existing \u003Ccode class=\"literal\">enp1s0.yml\u003C/code> file for the \u003Ccode class=\"literal\">enp1s0\u003C/code> connection and add the following content to it:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\n\u003Cspan class=\"strong strong\">\u003Cstrong>interfaces:\u003C/strong>\u003C/span>\n  \u003Cspan class=\"strong strong\">\u003Cstrong>- name: \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>type: ethernet\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>state: up\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>accept -all-mac-address: \u003Cspan class=\"emphasis\">\u003Cem>true\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThese settings configure the \u003Ccode class=\"literal\">enp1s0\u003C/code> device to accept all traffic.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tApply the network settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl apply ~/enp1s0.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the \u003Ccode class=\"literal\">802-3-ethernet.accept-all-mac-addresses\u003C/code> mode is enabled:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl show \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\ninterfaces:\n  - name: \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\n    type: ethernet\n    state: up\n    accept-all-mac-addresses:     \u003Cspan class=\"strong strong\">\u003Cstrong>true\u003C/strong>\u003C/span>\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">802-3-ethernet.accept-all-mac-addresses: true\u003C/code> indicates that the mode is enabled.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nmstatectl(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/nmstate/examples/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"proc_mirroring-a-network-interface-by-using-nmcli_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 45. Mirroring a network interface by using \u003Ccode class=\"literal\">nmcli\u003C/code>\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tNetwork administrators can use port mirroring to replicate inbound and outbound network traffic being communicated from one network device to another. Mirroring traffic of an interface can be helpful in the following situations:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tTo debug networking issues and tune the network flow\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tTo inspect and analyze the network traffic\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tTo detect an intrusion\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tA network interface to mirror the network traffic to.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tAdd a network connection profile that you want to mirror the network traffic from:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ethernet ifname \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> con-name \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> autoconnect \u003Cspan class=\"emphasis\">\u003Cem>no\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tAttach a \u003Ccode class=\"literal\">prio\u003C/code> \u003Ccode class=\"literal\">qdisc\u003C/code> to \u003Ccode class=\"literal\">enp1s0\u003C/code> for the egress (outgoing) traffic with the \u003Ccode class=\"literal\">10:\u003C/code> handle:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> +tc.qdisc \"root prio handle 10:\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\tThe \u003Ccode class=\"literal\">prio\u003C/code> \u003Ccode class=\"literal\">qdisc\u003C/code> attached without children allows attaching filters.\n\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tAdd a \u003Ccode class=\"literal\">qdisc\u003C/code> for the ingress traffic, with the \u003Ccode class=\"literal\">ffff:\u003C/code> handle:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> +tc.qdisc \"ingress handle ffff:\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tAdd the following filters to match packets on the ingress and egress \u003Ccode class=\"literal\">qdiscs\u003C/code>, and to mirror them to \u003Ccode class=\"literal\">enp7s0\u003C/code>:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> +tc.tfilter \"parent ffff: matchall action mirred egress mirror dev \u003Cspan class=\"emphasis\">\u003Cem>enp7s0\u003C/em>\u003C/span>\"\u003C/strong>\u003C/span>\n\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span> +tc.tfilter \"parent 10: matchall action mirred egress mirror dev \u003Cspan class=\"emphasis\">\u003Cem>enp7s0\u003C/em>\u003C/span>\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\tThe \u003Ccode class=\"literal\">matchall\u003C/code> filter matches all packets, and the \u003Ccode class=\"literal\">mirred\u003C/code> action redirects packets to destination.\n\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tActivate the connection:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tInstall the \u003Ccode class=\"literal\">tcpdump\u003C/code> utility:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install tcpdump\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tDisplay the traffic mirrored on the target device (\u003Ccode class=\"literal\">enp7s0\u003C/code>):\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tcpdump -i \u003Cspan class=\"emphasis\">\u003Cem>enp7s0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/8787\">How to capture network packets using \u003Ccode class=\"literal\">tcpdump\u003C/code>\u003C/a> (Red Hat Knowledgebase)\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_using-nmstate-autoconf-to-automatically-configure-the-network-state-using-lldp_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 46. Using nmstate-autoconf to automatically configure the network state using LLDP\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tNetwork devices can use the Link Layer Discovery Protocol (LLDP) to advertise their identity, capabilities, and neighbors in a LAN. The \u003Ccode class=\"literal systemitem\">nmstate-autoconf\u003C/code> utility can use this information to automatically configure local network interfaces.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal systemitem\">nmstate-autoconf\u003C/code> utility is provided as a Technology Preview only. Technology Preview features are not supported with Red Hat production Service Level Agreements (SLAs), might not be functionally complete, and Red Hat does not recommend using them for production. These previews provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tSee \u003Ca class=\"link\" href=\"https://access.redhat.com/support/offerings/techpreview\">Technology Preview Features Support Scope\u003C/a> on the Red Hat Customer Portal for information about the support scope for Technology Preview features.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"proc_using-nmstate-autoconf-to-automatically-configure-network-interfaces_assembly_using-nmstate-autoconf-to-automatically-configure-the-network-state-using-lldp\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">46.1. Using nmstate-autoconf to automatically configure network interfaces\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">nmstate-autoconf\u003C/code> utility uses LLDP to identify the VLAN settings of interfaces connected to a switch to configure local devices.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThis procedure assumes the following scenario and that the switch broadcasts the VLAN settings using LLDP:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">enp1s0\u003C/code> and \u003Ccode class=\"literal\">enp2s0\u003C/code> interfaces of the RHEL server are connected to switch ports that are configured with VLAN ID \u003Ccode class=\"literal\">100\u003C/code> and VLAN name \u003Ccode class=\"literal\">prod-net\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">enp3s0\u003C/code> interface of the RHEL server is connected to a switch port that is configured with VLAN ID \u003Ccode class=\"literal\">200\u003C/code> and VLAN name \u003Ccode class=\"literal\">mgmt-net\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">nmstate-autoconf\u003C/code> utility then uses this information to create the following interfaces on the server:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">bond100\u003C/code> - A bond interface with \u003Ccode class=\"literal\">enp1s0\u003C/code> and \u003Ccode class=\"literal\">enp2s0\u003C/code> as ports.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">prod-net\u003C/code> - A VLAN interface on top of \u003Ccode class=\"literal\">bond100\u003C/code> with VLAN ID \u003Ccode class=\"literal\">100\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">mgmt-net\u003C/code> - A VLAN interface on top of \u003Ccode class=\"literal\">enp3s0\u003C/code> with VLAN ID \u003Ccode class=\"literal\">200\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tIf you connect multiple network interfaces to different switch ports for which LLDP broadcasts the same VLAN ID, \u003Ccode class=\"literal\">nmstate-autoconf\u003C/code> creates a bond with these interfaces and, additionally, configures the common VLAN ID on top of it.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">nmstate\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tLLDP is enabled on the network switch.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe Ethernet interfaces are up.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable LLDP on the Ethernet interfaces:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate a YAML file, for example \u003Ccode class=\"literal\">~/enable-lldp.yml\u003C/code>, with the following content:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">interfaces:\n  - name: enp1s0\n    type: ethernet\n    lldp:\n      enabled: true\n  - name: enp2s0\n    type: ethernet\n    lldp:\n      enabled: true\n  - name: enp3s0\n    type: ethernet\n    lldp:\n      enabled: true\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tApply the settings to the system:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl apply ~/enable-lldp.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the network interfaces using LLDP:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOptional, start a dry-run to display and verify the YAML configuration that \u003Ccode class=\"literal\">nmstate-autoconf\u003C/code> generates:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstate-autoconf -d \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>,\u003Cspan class=\"emphasis\">\u003Cem>enp2s0\u003C/em>\u003C/span>,\u003Cspan class=\"emphasis\">\u003Cem>enp3s0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n---\ninterfaces:\n- name: prod-net\n  type: vlan\n  state: up\n  vlan:\n    base-iface: bond100\n    id: 100\n- name: mgmt-net\n  type: vlan\n  state: up\n  vlan:\n    base-iface: enp3s0\n    id: 200\n- name: bond100\n  type: bond\n  state: up\n  link-aggregation:\n    mode: balance-rr\n    port:\n    - enp1s0\n    - enp2s0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tUse \u003Ccode class=\"literal\">nmstate-autoconf\u003C/code> to generate the configuration based on information received from LLDP, and apply the settings to the system:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstate-autoconf \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>,\u003Cspan class=\"emphasis\">\u003Cem>enp2s0\u003C/em>\u003C/span>,\u003Cspan class=\"emphasis\">\u003Cem>enp3s0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Next steps\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf there is no DHCP server in your network that provides the IP settings to the interfaces, configure them manual. For details, see:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-an-ethernet-connection_configuring-and-managing-networking\" title=\"Chapter 2. Configuring an Ethernet connection\">Configuring an Ethernet connection\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-network-bonding_configuring-and-managing-networking\" title=\"Chapter 3. Configuring a network bond\">Configuring a network bond\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the settings of the individual interfaces:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmstatectl show \u003Cspan class=\"emphasis\">\u003Cem>&lt;interface_name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nmstate-autoconf(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-802-3-link-settings_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 47. Configuring 802.3 link settings\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tAuto-negotiation is a feature of the IEEE 802.3u Fast Ethernet protocol. It targets the device ports to provide an optimal performance of speed, duplex mode, and flow control for information exchange over a link. Using the auto-negotiation protocol, you have optimal performance of data transfer over the Ethernet.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tTo utilize maximum performance of auto-negotiation, use the same configuration on both sides of a link.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"proc_configuring-802-3-link-settings-using-the-nmcli-utility_configuring-802-3-link-settings\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">47.1. Configuring 802.3 link settings using the \u003Ccode class=\"literal\">nmcli\u003C/code> utility\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo configure the 802.3 link settings of an Ethernet connection, modify the following configuration parameters:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">802-3-ethernet.auto-negotiate\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">802-3-ethernet.speed\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">802-3-ethernet.duplex\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the current settings of the connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection show \u003Cspan class=\"emphasis\">\u003Cem>Example-connection\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n...\n802-3-ethernet.speed:  0\n802-3-ethernet.duplex: --\n802-3-ethernet.auto-negotiate: no\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou can use these values if you need to reset the parameters in case of any problems.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the speed and duplex link settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify \u003Cspan class=\"emphasis\">\u003Cem>Example-connection\u003C/em>\u003C/span> 802-3-ethernet.auto-negotiate \u003Cspan class=\"emphasis\">\u003Cem>yes\u003C/em>\u003C/span> 802-3-ethernet.speed \u003Cspan class=\"emphasis\">\u003Cem>10000\u003C/em>\u003C/span> 802-3-ethernet.duplex \u003Cspan class=\"emphasis\">\u003Cem>full\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis command enables auto-negotiation and sets the speed of the connection to \u003Ccode class=\"literal\">10000\u003C/code> Mbit full duplex.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReactivate the connection:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up \u003Cspan class=\"emphasis\">\u003Cem>Example-connection\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ethtool\u003C/code> utility to verify the values of Ethernet interface \u003Ccode class=\"literal\">enp1s0\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ethtool \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n\nSettings for enp1s0:\n...\nSpeed: 10000 Mb/s\nDuplex: Full\nAuto-negotiation: on\n...\nLink detected: yes\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"getting-started-with-dpdk_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 48. Getting started with DPDK\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tThe data plane development kit (DPDK) provides libraries and network drivers to accelerate packet processing in user space.\n\t\t\u003C/p>\u003Cp>\n\t\t\tAdministrators use DPDK, for example, in virtual machines to use Single Root I/O Virtualization (SR-IOV) to reduce latencies and increase I/O throughput.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tRed Hat does not support experimental DPDK APIs.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"installing-the-dpdk-package_getting-started-with-dpdk\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">48.1. Installing the dpdk package\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo use DPDK, install the \u003Ccode class=\"literal\">dpdk\u003C/code> package.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">dnf\u003C/code> utility to install the \u003Ccode class=\"literal\">dpdk\u003C/code> package:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install dpdk\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section _additional-resources\" id=\"additional_resources_3\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">48.2. Additional resources\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/articles/3538141\">Network Adapter Fast Datapath Feature Support Matrix\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"getting-started-with-tipc_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 49. Getting started with TIPC\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tTransparent Inter-process Communication (TIPC), which is also known as \u003Ccode class=\"literal literal\">Cluster Domain Sockets\u003C/code>, is an Inter-process Communication (IPC) service for cluster-wide operation.\n\t\t\u003C/p>\u003Cp>\n\t\t\tApplications that are running in a high-available and dynamic cluster environment have special needs. The number of nodes in a cluster can vary, routers can fail, and, due to load balancing considerations, functionality can be moved to different nodes in the cluster. TIPC minimizes the effort by application developers to deal with such situations, and maximizes the chance that they are handled in a correct and optimal way. Additionally, TIPC provides a more efficient and fault-tolerant communication than general protocols, such as TCP.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"the-architecture-of-tipc_getting-started-with-tipc\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">49.1. The architecture of TIPC\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTIPC is a layer between applications using TIPC and a packet transport service (\u003Ccode class=\"literal\">bearer\u003C/code>), and spans the level of transport, network, and signaling link layers. However, TIPC can use a different transport protocol as bearer, so that, for example, a TCP connection can serve as a bearer for a TIPC signaling link.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTIPC supports the following bearers:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEthernet\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tInfiniBand\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tUDP protocol\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tTIPC provides a reliable transfer of messages between TIPC ports, that are the endpoints of all TIPC communication.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe following is a diagram of the TIPC architecture:\n\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US/images/05f0a1f83cfa23805891dbf10b7b6078/TIPC-architectural-overview.png\" alt=\"TIPC architectural overview\"/>\u003C/div>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"loading-the-tipc-module-when-the-system-boots_getting-started-with-tipc\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">49.2. Loading the tipc module when the system boots\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBefore you can use the TIPC protocol, you must load the \u003Ccode class=\"literal\">tipc\u003C/code> kernel module. You can configure Red Hat Enterprise Linux to automatically load this kernel module automatically when the system boots.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">/etc/modules-load.d/tipc.conf\u003C/code> file with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">tipc\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRestart the \u003Ccode class=\"literal\">systemd-modules-load\u003C/code> service to load the module without rebooting the system:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl start systemd-modules-load\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the following command to verify that RHEL loaded the \u003Ccode class=\"literal\">tipc\u003C/code> module:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lsmod | grep tipc\u003C/strong>\u003C/span>\ntipc    \u003Cspan class=\"emphasis\">\u003Cem>311296\u003C/em>\u003C/span>  0\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the command shows no entry for the \u003Ccode class=\"literal\">tipc\u003C/code> module, RHEL failed to load it.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">modules-load.d(5)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-a-tipc-network_getting-started-with-tipc\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">49.3. Creating a TIPC network\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo create a TIPC network, perform this procedure on each host that should join the TIPC network.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe commands configure the TIPC network only temporarily. To permanently configure TIPC on a node, use the commands of this procedure in a script, and configure RHEL to execute that script when the system boots.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">tipc\u003C/code> module has been loaded. For details, see \u003Ca class=\"link\" href=\"#loading-the-tipc-module-when-the-system-boots_getting-started-with-tipc\" title=\"49.2. Loading the tipc module when the system boots\">Loading the tipc module when the system boots\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Set a unique node identity, such as a UUID or the node’s host name:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tipc node set identity \u003Cspan class=\"emphasis\">\u003Cem>host_name\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe identity can be any unique string consisting of a maximum 16 letters and numbers.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou cannot set or change an identity after this step.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd a bearer. For example, to use Ethernet as media and \u003Ccode class=\"literal\">enp0s1\u003C/code> device as physical bearer device, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tipc bearer enable media \u003Cspan class=\"emphasis\">\u003Cem>eth\u003C/em>\u003C/span> device \u003Cspan class=\"emphasis\">\u003Cem>enp1s0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOptional: For redundancy and better performance, attach further bearers using the command from the previous step. You can configure up to three bearers, but not more than two on the same media.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRepeat all previous steps on each node that should join the TIPC network.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the link status for cluster members:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tipc link list\u003C/strong>\u003C/span>\nbroadcast-link: up\n5254006b74be:enp1s0-525400df55d1:enp1s0: up\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis output indicates that the link between bearer \u003Ccode class=\"literal\">enp1s0\u003C/code> on node \u003Ccode class=\"literal\">5254006b74be\u003C/code> and bearer \u003Ccode class=\"literal\">enp1s0\u003C/code> on node \u003Ccode class=\"literal\">525400df55d1\u003C/code> is \u003Ccode class=\"literal\">up\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the TIPC publishing table:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tipc nametable show\u003C/strong>\u003C/span>\nType       Lower      Upper      Scope    Port       Node\n0          1795222054 1795222054 cluster  0          5254006b74be\n0          3741353223 3741353223 cluster  0          525400df55d1\n1          1          1          node     2399405586 5254006b74be\n2          3741353223 3741353223 node     0          5254006b74be\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe two entries with service type \u003Ccode class=\"literal\">0\u003C/code> indicate that two nodes are members of this cluster.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe entry with service type \u003Ccode class=\"literal\">1\u003C/code> represents the built-in topology service tracking service.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe entry with service type \u003Ccode class=\"literal\">2\u003C/code> displays the link as seen from the issuing node. The range limit \u003Ccode class=\"literal\">3741353223\u003C/code> represents the peer endpoint’s address (a unique 32-bit hash value based on the node identity) in decimal format.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">tipc-bearer(8)\u003C/code> and \u003Ccode class=\"literal\">tipc-namespace(8)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section _additional-resources\" id=\"additional_resources_4\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">49.4. Additional resources\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRed Hat recommends to use other bearer level protocols to encrypt the communication between nodes based on the transport media. For example:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tMACSec: See \u003Ca class=\"link\" href=\"#assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network_configuring-and-managing-networking\" title=\"Chapter 13. Using MACsec to encrypt layer-2 traffic in the same physical network\">Using MACsec to encrypt layer 2 traffic\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIPsec: See \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/securing_networks/configuring-a-vpn-with-ipsec_securing-networks\">Configuring a VPN with IPsec\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor examples of how to use TIPC, clone the upstream GIT repository using the \u003Ccode class=\"literal command\">git clone git://git.code.sf.net/p/tipc/tipcutils\u003C/code> command. This repository contains the source code of demos and test programs that use TIPC features. Note that this repository is not provided by Red Hat.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal filename\">/usr/share/doc/kernel-doc-\u003Cspan class=\"emphasis\">\u003Cem>&lt;kernel_version&gt;\u003C/em>\u003C/span>/Documentation/output/networking/tipc.html\u003C/code> provided by the \u003Ccode class=\"literal package\">kernel-doc\u003C/code> package.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"automatically-configuring-network-interfaces-in-public-clouds-using-nm-cloud-setup_configuring-and-managing-networking\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 50. Automatically configuring network interfaces in public clouds using nm-cloud-setup\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tUsually, a virtual machine (VM) has only one interface that is configurable by DHCP. However, DHCP cannot configure VMs with multiple network entities, such as interfaces, IP subnets, and IP addresses. Additionally, you cannot apply settings when the VM instance is running. To solve this runtime configuration issue, the \u003Ccode class=\"literal\">nm-cloud-setup\u003C/code> utility automatically retrieves configuration information from the metadata server of the cloud service provider and updates the network configuration of the host. The utility automatically picks up multiple network interfaces, multiple IP addresses, or IP subnets on one interface and helps to reconfigure the network of the running VM instance.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"proc_configuring-and-pre-deploying-nm-cloud-setup_automatically-configuring-network-interfaces-in-public-clouds-using-nm-cloud-setup\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">50.1. Configuring and pre-deploying nm-cloud-setup\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo enable and configure network interfaces in public clouds, run \u003Ccode class=\"literal\">nm-cloud-setup\u003C/code> as a timer and service.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tOn Red Hat Enterprise Linux On Demand and AWS golden images, \u003Ccode class=\"literal\">nm-cloud-setup\u003C/code> is already enabled and no action is required.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisite\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA network connection exists.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe connection uses DHCP.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tBy default, NetworkManager creates a connection profile which uses DHCP. If no profile was created because you set the \u003Ccode class=\"literal\">no-auto-default\u003C/code> parameter in \u003Ccode class=\"literal\">/etc/NetworkManager/NetworkManager.conf\u003C/code>, create this initial connection manually.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">nm-cloud-setup\u003C/code> package:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install NetworkManager-cloud-setup\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate and run the snap-in file for the \u003Ccode class=\"literal\">nm-cloud-setup\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tUse the following command to start editing the snap-in file:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl edit nm-cloud-setup.service\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIt is important to either start the service explicitly or reboot the system to make configuration settings effective.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">systemd\u003C/code> snap-in file to configure the cloud provider in \u003Ccode class=\"literal\">nm-cloud-setup\u003C/code>. For example, to use Amazon EC2, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">[Service]\nEnvironment=NM_CLOUD_SETUP_EC2=yes\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tYou can set the following environment variables to enable the cloud provide you use:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">NM_CLOUD_SETUP_AZURE\u003C/code> for Microsoft Azure\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">NM_CLOUD_SETUP_EC2\u003C/code> for Amazon EC2 (AWS)\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">NM_CLOUD_SETUP_GCP\u003C/code> for Google Cloud Platform(GCP)\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">NM_CLOUD_SETUP_ALIYUN\u003C/code> for Alibaba Cloud (Aliyun)\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSave the file and quit the editor.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReload the \u003Ccode class=\"literal\">systemd\u003C/code> configuration:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl daemon-reload\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable and start the \u003Ccode class=\"literal\">nm-cloud-setup\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable --now nm-cloud-setup.service\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable and start the \u003Ccode class=\"literal\">nm-cloud-setup\u003C/code> timer:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable --now nm-cloud-setup.timer\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-cloud-setup(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_networking/configuring-an-ethernet-connection_configuring-and-managing-networking\">Configuring an Ethernet connection\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"understanding-the-role-of-imdsv2-and-nm-cloud-setup-in-the-rhel-ec2-instance_automatically-configuring-network-interfaces-in-public-clouds-using-nm-cloud-setup\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">50.2. Understanding the role of IMDSv2 and nm-cloud-setup in the RHEL EC2 instance\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe instance metadata service (IMDS) in Amazon EC2 allows you to manage permissions to access instance metadata of a running Red Hat Enterprise Linux (RHEL) EC2 instance. The RHEL EC2 instance uses IMDS version 2 (IMDSv2), a session-oriented method. By using the \u003Ccode class=\"literal\">nm-cloud-setup\u003C/code> utility, administrators can reconfigure the network and automatically update the configuration of running RHEL EC2 instances. The \u003Ccode class=\"literal\">nm-cloud-setup\u003C/code> utility handles IMDSv2 API calls by using IMDSv2 tokens without any user intervention.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIMDS runs on a link-local address \u003Ccode class=\"literal\">169.254.169.254\u003C/code> for providing access to native applications on a RHEL EC2 instance.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAfter you have specified and configured IMDSv2 for each RHEL EC2 instance for applications and users, you can no longer access IMDSv1.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tBy using IMDSv2, the RHEL EC2 instance maintains metadata without using the IAM role while remaining accessible through the IAM role.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWhen the RHEL EC2 instance boots, the \u003Ccode class=\"literal\">nm-cloud-setup\u003C/code> utility automatically runs to fetch the EC2 instance API access token for using the RHEL EC2 instance API.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tUse the IMDSv2 token as an HTTP header to check the details of the EC2 environment.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-cloud-setup(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Cdiv>\u003Cdiv xml:lang=\"en-US\" class=\"legalnotice\" id=\"idm140053155520160\">\u003Ch2 class=\"legalnotice\">Legal Notice\u003C/h2>\u003Cdiv class=\"para\">\n\t\tCopyright \u003Cspan class=\"trademark\">\u003C!--Empty-->\u003C/span>© 2024 Red Hat, Inc.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\tThe text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license (\"CC-BY-SA\"). An explanation of CC-BY-SA is available at \u003Ca class=\"uri\" href=\"http://creativecommons.org/licenses/by-sa/3.0/\">http://creativecommons.org/licenses/by-sa/3.0/\u003C/a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\tRed Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\tRed Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\u003Cspan class=\"trademark\">Linux\u003C/span>® is the registered trademark of Linus Torvalds in the United States and other countries.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\u003Cspan class=\"trademark\">Java\u003C/span>® is a registered trademark of Oracle and/or its affiliates.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\u003Cspan class=\"trademark\">XFS\u003C/span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\u003Cspan class=\"trademark\">MySQL\u003C/span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\u003Cspan class=\"trademark\">Node.js\u003C/span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\tThe \u003Cspan class=\"trademark\">OpenStack\u003C/span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\tAll other trademarks are the property of their respective owners.\n\t\u003C/div>\u003C/div>\u003C/div>\u003C/div>\u003C/body>",[16,23,28,71,133,182,211,244,273,390,463,480,505,546,550,567,584,597,601,610,620,634,648,662,676,694,708,750,792,806,824,838,872,898,908,946,968,998,1028,1046,1072,1090,1112,1126,1140,1202,1220,1225,1235,1245,1259,1281,1295],{"title":13,"visible":17,"weight":18,"urlFragment":19,"anchor":20,"singlePageAnchor":20,"docTitle":21,"url":22},true,1,"index",null,"configuring_and_managing_networking","#",{"title":24,"visible":17,"weight":25,"urlFragment":26,"anchor":20,"singlePageAnchor":26,"docTitle":21,"url":27},"Providing feedback on Red Hat documentation",2,"proc_providing-feedback-on-red-hat-documentation_configuring-and-managing-networking","#proc_providing-feedback-on-red-hat-documentation_configuring-and-managing-networking",{"title":29,"visible":17,"weight":30,"urlFragment":31,"anchor":20,"singlePageAnchor":31,"sections":32,"docTitle":21,"url":70},"1. Implementing consistent network interface naming",3,"consistent-network-interface-device-naming_configuring-and-managing-networking",[33,37,41,45,50,55,60,65],{"title":34,"visible":17,"weight":18,"urlFragment":31,"anchor":35,"singlePageAnchor":35,"docTitle":21,"url":36},"1.1. How the udev device manager renames network interfaces","how-the-udev-device-manager-renames-network-interfaces_consistent-network-interface-device-naming","#how-the-udev-device-manager-renames-network-interfaces_consistent-network-interface-device-naming",{"title":38,"visible":17,"weight":25,"urlFragment":31,"anchor":39,"singlePageAnchor":39,"docTitle":21,"url":40},"1.2. Network interface naming policies","network-interface-naming-policies_consistent-network-interface-device-naming","#network-interface-naming-policies_consistent-network-interface-device-naming",{"title":42,"visible":17,"weight":30,"urlFragment":31,"anchor":43,"singlePageAnchor":43,"docTitle":21,"url":44},"1.3. Network interface naming schemes","network-interface-naming-schemes_consistent-network-interface-device-naming","#network-interface-naming-schemes_consistent-network-interface-device-naming",{"title":46,"visible":17,"weight":47,"urlFragment":31,"anchor":48,"singlePageAnchor":48,"docTitle":21,"url":49},"1.4. Switching to a different network interface naming scheme",4,"switching-to-a-different-network-interface-naming-scheme_consistent-network-interface-device-naming","#switching-to-a-different-network-interface-naming-scheme_consistent-network-interface-device-naming",{"title":51,"visible":17,"weight":52,"urlFragment":31,"anchor":53,"singlePageAnchor":53,"docTitle":21,"url":54},"1.5. Customizing the prefix for Ethernet interfaces during installation",5,"proc_customizing-the-prefix-for-ethernet-interfaces-during-installation_consistent-network-interface-device-naming","#proc_customizing-the-prefix-for-ethernet-interfaces-during-installation_consistent-network-interface-device-naming",{"title":56,"visible":17,"weight":57,"urlFragment":31,"anchor":58,"singlePageAnchor":58,"docTitle":21,"url":59},"1.6. Configuring user-defined network interface names by using udev rules",6,"configuring-user-defined-network-interface-names-by-using-udev-rules_consistent-network-interface-device-naming","#configuring-user-defined-network-interface-names-by-using-udev-rules_consistent-network-interface-device-naming",{"title":61,"visible":17,"weight":62,"urlFragment":31,"anchor":63,"singlePageAnchor":63,"docTitle":21,"url":64},"1.7. Configuring user-defined network interface names by using systemd link files",7,"configuring-user-defined-network-interface-names-by-using-systemd-link-files_consistent-network-interface-device-naming","#configuring-user-defined-network-interface-names-by-using-systemd-link-files_consistent-network-interface-device-naming",{"title":66,"visible":17,"weight":67,"urlFragment":31,"anchor":68,"singlePageAnchor":68,"docTitle":21,"url":69},"1.8. Assigning alternative names to a network interface by using systemd link files",8,"assigning-alternative-names-to-a-network-interface-by-using-systemd-link-files_consistent-network-interface-device-naming","#assigning-alternative-names-to-a-network-interface-by-using-systemd-link-files_consistent-network-interface-device-naming","#consistent-network-interface-device-naming_configuring-and-managing-networking",{"title":72,"visible":17,"weight":47,"urlFragment":73,"anchor":20,"singlePageAnchor":73,"sections":74,"docTitle":21,"url":132},"2. Configuring an Ethernet connection","configuring-an-ethernet-connection_configuring-and-managing-networking",[75,79,83,87,91,95,99,103,107,112,117,122,127],{"title":76,"visible":17,"weight":18,"urlFragment":73,"anchor":77,"singlePageAnchor":77,"docTitle":21,"url":78},"2.1. Configuring an Ethernet connection by using nmcli","configuring-an-ethernet-connection-by-using-nmcli_configuring-an-ethernet-connection","#configuring-an-ethernet-connection-by-using-nmcli_configuring-an-ethernet-connection",{"title":80,"visible":17,"weight":25,"urlFragment":73,"anchor":81,"singlePageAnchor":81,"docTitle":21,"url":82},"2.2. Configuring an Ethernet connection by using the nmcli interactive editor","configuring-an-ethernet-connection-by-using-the-nmcli-interactive-editor_configuring-an-ethernet-connection","#configuring-an-ethernet-connection-by-using-the-nmcli-interactive-editor_configuring-an-ethernet-connection",{"title":84,"visible":17,"weight":30,"urlFragment":73,"anchor":85,"singlePageAnchor":85,"docTitle":21,"url":86},"2.3. Configuring an Ethernet connection by using nmtui","configuring-an-ethernet-connection-by-using-nmtui_configuring-an-ethernet-connection","#configuring-an-ethernet-connection-by-using-nmtui_configuring-an-ethernet-connection",{"title":88,"visible":17,"weight":47,"urlFragment":73,"anchor":89,"singlePageAnchor":89,"docTitle":21,"url":90},"2.4. Configuring an Ethernet connection by using control-center","configuring-an-ethernet-connection-by-using-control-center_configuring-an-ethernet-connection","#configuring-an-ethernet-connection-by-using-control-center_configuring-an-ethernet-connection",{"title":92,"visible":17,"weight":52,"urlFragment":73,"anchor":93,"singlePageAnchor":93,"docTitle":21,"url":94},"2.5. Configuring an Ethernet connection by using nm-connection-editor","configuring-an-ethernet-connection-by-using-nm-connection-editor_configuring-an-ethernet-connection","#configuring-an-ethernet-connection-by-using-nm-connection-editor_configuring-an-ethernet-connection",{"title":96,"visible":17,"weight":57,"urlFragment":73,"anchor":97,"singlePageAnchor":97,"docTitle":21,"url":98},"2.6. Configuring an Ethernet connection with a static IP address by using nmstatectl","configuring-an-ethernet-connection-with-a-static-ip-address-by-using-nmstatectl_configuring-an-ethernet-connection","#configuring-an-ethernet-connection-with-a-static-ip-address-by-using-nmstatectl_configuring-an-ethernet-connection",{"title":100,"visible":17,"weight":62,"urlFragment":73,"anchor":101,"singlePageAnchor":101,"docTitle":21,"url":102},"2.7. Configuring an Ethernet connection with a static IP address by using the network RHEL system role with an interface name","configuring-an-ethernet-connection-with-a-static-ip-address-by-using-the-network-rhel-system-role-with-an-interface-name_configuring-an-ethernet-connection","#configuring-an-ethernet-connection-with-a-static-ip-address-by-using-the-network-rhel-system-role-with-an-interface-name_configuring-an-ethernet-connection",{"title":104,"visible":17,"weight":67,"urlFragment":73,"anchor":105,"singlePageAnchor":105,"docTitle":21,"url":106},"2.8. Configuring an Ethernet connection with a static IP address by using the network RHEL system role with a device path","configuring-an-ethernet-connection-with-a-static-ip-address-by-using-the-network-rhel-system-role-with-a-device-path_configuring-an-ethernet-connection","#configuring-an-ethernet-connection-with-a-static-ip-address-by-using-the-network-rhel-system-role-with-a-device-path_configuring-an-ethernet-connection",{"title":108,"visible":17,"weight":109,"urlFragment":73,"anchor":110,"singlePageAnchor":110,"docTitle":21,"url":111},"2.9. Configuring an Ethernet connection with a dynamic IP address by using nmstatectl",9,"configuring-an-ethernet-connection-with-a-dynamic-ip-address-by-using-nmstatectl_configuring-an-ethernet-connection","#configuring-an-ethernet-connection-with-a-dynamic-ip-address-by-using-nmstatectl_configuring-an-ethernet-connection",{"title":113,"visible":17,"weight":114,"urlFragment":73,"anchor":115,"singlePageAnchor":115,"docTitle":21,"url":116},"2.10. Configuring an Ethernet connection with a dynamic IP address by using the network RHEL system role with an interface name",10,"configuring-an-ethernet-connection-with-a-dynamic-ip-address-by-using-the-network-rhel-system-role-with-an-interface-name_configuring-an-ethernet-connection","#configuring-an-ethernet-connection-with-a-dynamic-ip-address-by-using-the-network-rhel-system-role-with-an-interface-name_configuring-an-ethernet-connection",{"title":118,"visible":17,"weight":119,"urlFragment":73,"anchor":120,"singlePageAnchor":120,"docTitle":21,"url":121},"2.11. Configuring an Ethernet connection with a dynamic IP address by using the network RHEL system role with a device path",11,"configuring-an-ethernet-connection-with-a-dynamic-ip-address-by-using-the-network-rhel-system-role-with-a-device-path_configuring-an-ethernet-connection","#configuring-an-ethernet-connection-with-a-dynamic-ip-address-by-using-the-network-rhel-system-role-with-a-device-path_configuring-an-ethernet-connection",{"title":123,"visible":17,"weight":124,"urlFragment":73,"anchor":125,"singlePageAnchor":125,"docTitle":21,"url":126},"2.12. Configuring multiple Ethernet interfaces by using a single connection profile by interface name",12,"proc_configuring-multiple-ethernet-interfaces-by-using-a-single-connection-profile-by-interface-name_configuring-an-ethernet-connection","#proc_configuring-multiple-ethernet-interfaces-by-using-a-single-connection-profile-by-interface-name_configuring-an-ethernet-connection",{"title":128,"visible":17,"weight":129,"urlFragment":73,"anchor":130,"singlePageAnchor":130,"docTitle":21,"url":131},"2.13. Configuring a single connection profile for multiple Ethernet interfaces using PCI IDs",13,"proc_configuring-a-single-connection-profile-for-multiple-ethernet-interfaces-using-pci-ids_configuring-an-ethernet-connection","#proc_configuring-a-single-connection-profile-for-multiple-ethernet-interfaces-using-pci-ids_configuring-an-ethernet-connection","#configuring-an-ethernet-connection_configuring-and-managing-networking",{"title":134,"visible":17,"weight":52,"urlFragment":135,"anchor":20,"singlePageAnchor":135,"sections":136,"docTitle":21,"url":181},"3. Configuring a network bond","configuring-network-bonding_configuring-and-managing-networking",[137,141,145,149,153,157,161,165,169,173,177],{"title":138,"visible":17,"weight":18,"urlFragment":135,"anchor":139,"singlePageAnchor":139,"docTitle":21,"url":140},"3.1. Understanding the default behavior of controller and port interfaces","understanding-the-default-behavior-of-controller-and-port-interfaces_configuring-network-bonding","#understanding-the-default-behavior-of-controller-and-port-interfaces_configuring-network-bonding",{"title":142,"visible":17,"weight":25,"urlFragment":135,"anchor":143,"singlePageAnchor":143,"docTitle":21,"url":144},"3.2. Upstream switch configuration depending on the bonding modes","upstream-switch-configuration-depending-on-the-bonding-modes_configuring-network-bonding","#upstream-switch-configuration-depending-on-the-bonding-modes_configuring-network-bonding",{"title":146,"visible":17,"weight":30,"urlFragment":135,"anchor":147,"singlePageAnchor":147,"docTitle":21,"url":148},"3.3. Configuring a network bond by using nmcli","configuring-a-network-bond-by-using-nmcli_configuring-network-bonding","#configuring-a-network-bond-by-using-nmcli_configuring-network-bonding",{"title":150,"visible":17,"weight":47,"urlFragment":135,"anchor":151,"singlePageAnchor":151,"docTitle":21,"url":152},"3.4. Configuring a network bond by using the RHEL web console","proc_configuring-a-network-bond-by-using-the-rhel-web-console_configuring-network-bonding","#proc_configuring-a-network-bond-by-using-the-rhel-web-console_configuring-network-bonding",{"title":154,"visible":17,"weight":52,"urlFragment":135,"anchor":155,"singlePageAnchor":155,"docTitle":21,"url":156},"3.5. Configuring a network bond by using nmtui","proc_configuring-a-network-by-bond-using-nmtui_configuring-network-bonding","#proc_configuring-a-network-by-bond-using-nmtui_configuring-network-bonding",{"title":158,"visible":17,"weight":57,"urlFragment":135,"anchor":159,"singlePageAnchor":159,"docTitle":21,"url":160},"3.6. Configuring a network bond by using nm-connection-editor","configuring-a-network-bond-by-using-nm-connection-editor_configuring-network-bonding","#configuring-a-network-bond-by-using-nm-connection-editor_configuring-network-bonding",{"title":162,"visible":17,"weight":62,"urlFragment":135,"anchor":163,"singlePageAnchor":163,"docTitle":21,"url":164},"3.7. Configuring a network bond by using nmstatectl","proc_configuring-a-network-bond-by-using-nmstatectl_configuring-network-bonding","#proc_configuring-a-network-bond-by-using-nmstatectl_configuring-network-bonding",{"title":166,"visible":17,"weight":67,"urlFragment":135,"anchor":167,"singlePageAnchor":167,"docTitle":21,"url":168},"3.8. Configuring a network bond by using the network RHEL system role","proc_configuring-a-network-bond-by-using-network-rhel-system-role_configuring-network-bonding","#proc_configuring-a-network-bond-by-using-network-rhel-system-role_configuring-network-bonding",{"title":170,"visible":17,"weight":109,"urlFragment":135,"anchor":171,"singlePageAnchor":171,"docTitle":21,"url":172},"3.9. Creating a network bond to enable switching between an Ethernet and wireless connection without interrupting the VPN","creating-a-network-bond-to-enable-switching-between-an-ethernet-and-wireless-connection-without-interrupting-the-vpn_configuring-network-bonding","#creating-a-network-bond-to-enable-switching-between-an-ethernet-and-wireless-connection-without-interrupting-the-vpn_configuring-network-bonding",{"title":174,"visible":17,"weight":114,"urlFragment":135,"anchor":175,"singlePageAnchor":175,"docTitle":21,"url":176},"3.10. The different network bonding modes","the-different-network-bonding-modes_configuring-network-bonding","#the-different-network-bonding-modes_configuring-network-bonding",{"title":178,"visible":17,"weight":119,"urlFragment":135,"anchor":179,"singlePageAnchor":179,"docTitle":21,"url":180},"3.11. The xmit_hash_policy bonding parameter","ref_xmit-hash-policy-bonding-parameter_configuring-network-bonding","#ref_xmit-hash-policy-bonding-parameter_configuring-network-bonding","#configuring-network-bonding_configuring-and-managing-networking",{"title":183,"visible":17,"weight":57,"urlFragment":184,"anchor":20,"singlePageAnchor":184,"sections":185,"docTitle":21,"url":210},"4. Configuring a NIC team","configuring-network-teaming_configuring-and-managing-networking",[186,190,194,198,202,206],{"title":187,"visible":17,"weight":18,"urlFragment":184,"anchor":188,"singlePageAnchor":188,"docTitle":21,"url":189},"4.1. Migrating a NIC team configuration to network bond","proc_migrating-a-network-team-configuration-to-network-bond_configuring-network-teaming","#proc_migrating-a-network-team-configuration-to-network-bond_configuring-network-teaming",{"title":191,"visible":17,"weight":25,"urlFragment":184,"anchor":192,"singlePageAnchor":192,"docTitle":21,"url":193},"4.2. Understanding the default behavior of controller and port interfaces","understanding-the-default-behavior-of-controller-and-port-interfaces_configuring-network-teaming","#understanding-the-default-behavior-of-controller-and-port-interfaces_configuring-network-teaming",{"title":195,"visible":17,"weight":30,"urlFragment":184,"anchor":196,"singlePageAnchor":196,"docTitle":21,"url":197},"4.3. Understanding the teamd service, runners, and link-watchers","understanding-the-teamd-service-runners-and-link-watchers_configuring-network-teaming","#understanding-the-teamd-service-runners-and-link-watchers_configuring-network-teaming",{"title":199,"visible":17,"weight":47,"urlFragment":184,"anchor":200,"singlePageAnchor":200,"docTitle":21,"url":201},"4.4. Configuring a NIC team by using nmcli","configuring-a-network-team-by-using-nmcli_configuring-network-teaming","#configuring-a-network-team-by-using-nmcli_configuring-network-teaming",{"title":203,"visible":17,"weight":52,"urlFragment":184,"anchor":204,"singlePageAnchor":204,"docTitle":21,"url":205},"4.5. Configuring a NIC team by using the RHEL web console","proc_configuring-a-network-team-by-using-the-rhel-web-console_configuring-network-teaming","#proc_configuring-a-network-team-by-using-the-rhel-web-console_configuring-network-teaming",{"title":207,"visible":17,"weight":57,"urlFragment":184,"anchor":208,"singlePageAnchor":208,"docTitle":21,"url":209},"4.6. Configuring a NIC team by using nm-connection-editor","configuring-a-network-team-by-using-nm-connection-editor_configuring-network-teaming","#configuring-a-network-team-by-using-nm-connection-editor_configuring-network-teaming","#configuring-network-teaming_configuring-and-managing-networking",{"title":212,"visible":17,"weight":62,"urlFragment":213,"anchor":20,"singlePageAnchor":213,"sections":214,"docTitle":21,"url":243},"5. Configuring VLAN tagging","configuring-vlan-tagging_configuring-and-managing-networking",[215,219,223,227,231,235,239],{"title":216,"visible":17,"weight":18,"urlFragment":213,"anchor":217,"singlePageAnchor":217,"docTitle":21,"url":218},"5.1. Configuring VLAN tagging by using nmcli","configuring-vlan-tagging-by-using-nmcli_configuring-vlan-tagging","#configuring-vlan-tagging-by-using-nmcli_configuring-vlan-tagging",{"title":220,"visible":17,"weight":25,"urlFragment":213,"anchor":221,"singlePageAnchor":221,"docTitle":21,"url":222},"5.2. Configuring nested VLANs by using nmcli","configuring-nested-vlans-using-nmcli-commands_configuring-vlan-tagging","#configuring-nested-vlans-using-nmcli-commands_configuring-vlan-tagging",{"title":224,"visible":17,"weight":30,"urlFragment":213,"anchor":225,"singlePageAnchor":225,"docTitle":21,"url":226},"5.3. Configuring VLAN tagging by using the RHEL web console","proc_configuring-vlan-tagging-by-using-the-rhel-web-console_configuring-vlan-tagging","#proc_configuring-vlan-tagging-by-using-the-rhel-web-console_configuring-vlan-tagging",{"title":228,"visible":17,"weight":47,"urlFragment":213,"anchor":229,"singlePageAnchor":229,"docTitle":21,"url":230},"5.4. Configuring VLAN tagging by using nmtui","proc_configuring-vlan-tagging-by-using-nmtui_configuring-vlan-tagging","#proc_configuring-vlan-tagging-by-using-nmtui_configuring-vlan-tagging",{"title":232,"visible":17,"weight":52,"urlFragment":213,"anchor":233,"singlePageAnchor":233,"docTitle":21,"url":234},"5.5. Configuring VLAN tagging by using nm-connection-editor","configuring-vlan-tagging-by-using-nm-connection-editor_configuring-vlan-tagging","#configuring-vlan-tagging-by-using-nm-connection-editor_configuring-vlan-tagging",{"title":236,"visible":17,"weight":57,"urlFragment":213,"anchor":237,"singlePageAnchor":237,"docTitle":21,"url":238},"5.6. Configuring VLAN tagging by using nmstatectl","proc_configuring-vlan-tagging-by-using-nmstatectl_configuring-vlan-tagging","#proc_configuring-vlan-tagging-by-using-nmstatectl_configuring-vlan-tagging",{"title":240,"visible":17,"weight":62,"urlFragment":213,"anchor":241,"singlePageAnchor":241,"docTitle":21,"url":242},"5.7. Configuring VLAN tagging by using the network RHEL system role","configuring-vlan-tagging-by-using-the-network-rhel-system-role_configuring-vlan-tagging","#configuring-vlan-tagging-by-using-the-network-rhel-system-role_configuring-vlan-tagging","#configuring-vlan-tagging_configuring-and-managing-networking",{"title":245,"visible":17,"weight":67,"urlFragment":246,"anchor":20,"singlePageAnchor":246,"sections":247,"docTitle":21,"url":272},"6. Configuring a network bridge","configuring-a-network-bridge_configuring-and-managing-networking",[248,252,256,260,264,268],{"title":249,"visible":17,"weight":18,"urlFragment":246,"anchor":250,"singlePageAnchor":250,"docTitle":21,"url":251},"6.1. Configuring a network bridge by using nmcli","configuring-a-network-bridge-by-using-nmcli_configuring-a-network-bridge","#configuring-a-network-bridge-by-using-nmcli_configuring-a-network-bridge",{"title":253,"visible":17,"weight":25,"urlFragment":246,"anchor":254,"singlePageAnchor":254,"docTitle":21,"url":255},"6.2. Configuring a network bridge by using the RHEL web console","proc_configuring-a-network-bridge-by-using-the-rhel-web-console_configuring-a-network-bridge","#proc_configuring-a-network-bridge-by-using-the-rhel-web-console_configuring-a-network-bridge",{"title":257,"visible":17,"weight":30,"urlFragment":246,"anchor":258,"singlePageAnchor":258,"docTitle":21,"url":259},"6.3. Configuring a network bridge by using nmtui","proc_configuring-a-network-bridge-by-using-nmtui_configuring-a-network-bridge","#proc_configuring-a-network-bridge-by-using-nmtui_configuring-a-network-bridge",{"title":261,"visible":17,"weight":47,"urlFragment":246,"anchor":262,"singlePageAnchor":262,"docTitle":21,"url":263},"6.4. Configuring a network bridge by using nm-connection-editor","configuring-a-network-bridge-by-using-nm-connection-editor_configuring-a-network-bridge","#configuring-a-network-bridge-by-using-nm-connection-editor_configuring-a-network-bridge",{"title":265,"visible":17,"weight":52,"urlFragment":246,"anchor":266,"singlePageAnchor":266,"docTitle":21,"url":267},"6.5. Configuring a network bridge by using nmstatectl","proc_configuring-a-network-bridge-by-using-nmstatectl_configuring-a-network-bridge","#proc_configuring-a-network-bridge-by-using-nmstatectl_configuring-a-network-bridge",{"title":269,"visible":17,"weight":57,"urlFragment":246,"anchor":270,"singlePageAnchor":270,"docTitle":21,"url":271},"6.6. Configuring a network bridge by using the network RHEL system role","configuring-a-network-bridge-by-using-the-network-rhel-system-role_configuring-a-network-bridge","#configuring-a-network-bridge-by-using-the-network-rhel-system-role_configuring-a-network-bridge","#configuring-a-network-bridge_configuring-and-managing-networking",{"title":274,"visible":17,"weight":109,"urlFragment":275,"anchor":20,"singlePageAnchor":275,"sections":276,"docTitle":21,"url":389},"7. Setting up an IPsec VPN","configuring-a-vpn-connection_configuring-and-managing-networking",[277,281,285,289,293,297,301,305,309,313,317,321,325,338,343,348,353,358,384],{"title":278,"visible":17,"weight":18,"urlFragment":275,"anchor":279,"singlePageAnchor":279,"docTitle":21,"url":280},"7.1. Libreswan as an IPsec VPN implementation","libreswan-as-an-ipsec-vpn-implementation_configuring-a-vpn-connection","#libreswan-as-an-ipsec-vpn-implementation_configuring-a-vpn-connection",{"title":282,"visible":17,"weight":25,"urlFragment":275,"anchor":283,"singlePageAnchor":283,"docTitle":21,"url":284},"7.2. Authentication methods in Libreswan","con_authentication-methods-in-libreswan_configuring-a-vpn-connection","#con_authentication-methods-in-libreswan_configuring-a-vpn-connection",{"title":286,"visible":17,"weight":30,"urlFragment":275,"anchor":287,"singlePageAnchor":287,"docTitle":21,"url":288},"7.3. Installing Libreswan","installing-libreswan_configuring-a-vpn-connection","#installing-libreswan_configuring-a-vpn-connection",{"title":290,"visible":17,"weight":47,"urlFragment":275,"anchor":291,"singlePageAnchor":291,"docTitle":21,"url":292},"7.4. Creating a host-to-host VPN","creating-a-host-to-host-vpn_configuring-a-vpn-connection","#creating-a-host-to-host-vpn_configuring-a-vpn-connection",{"title":294,"visible":17,"weight":52,"urlFragment":275,"anchor":295,"singlePageAnchor":295,"docTitle":21,"url":296},"7.5. Configuring a site-to-site VPN","configuring-a-site-to-site-vpn_configuring-a-vpn-connection","#configuring-a-site-to-site-vpn_configuring-a-vpn-connection",{"title":298,"visible":17,"weight":57,"urlFragment":275,"anchor":299,"singlePageAnchor":299,"docTitle":21,"url":300},"7.6. Configuring a remote access VPN","configuring-a-remote-access-vpn_configuring-a-vpn-connection","#configuring-a-remote-access-vpn_configuring-a-vpn-connection",{"title":302,"visible":17,"weight":62,"urlFragment":275,"anchor":303,"singlePageAnchor":303,"docTitle":21,"url":304},"7.7. Configuring a mesh VPN","configuring-a-mesh-vpn_configuring-a-vpn-connection","#configuring-a-mesh-vpn_configuring-a-vpn-connection",{"title":306,"visible":17,"weight":67,"urlFragment":275,"anchor":307,"singlePageAnchor":307,"docTitle":21,"url":308},"7.8. Deploying a FIPS-compliant IPsec VPN","deploying-a-fips-compliant-ipsec-vpn_configuring-a-vpn-connection","#deploying-a-fips-compliant-ipsec-vpn_configuring-a-vpn-connection",{"title":310,"visible":17,"weight":109,"urlFragment":275,"anchor":311,"singlePageAnchor":311,"docTitle":21,"url":312},"7.9. Protecting the IPsec NSS database by a password","protecting-the-ipsec-nss-database-by-a-password_configuring-a-vpn-connection","#protecting-the-ipsec-nss-database-by-a-password_configuring-a-vpn-connection",{"title":314,"visible":17,"weight":114,"urlFragment":275,"anchor":315,"singlePageAnchor":315,"docTitle":21,"url":316},"7.10. Configuring an IPsec VPN to use TCP","proc_configuring-an-ipsec-vpn-to-use-tcp_configuring-a-vpn-connection","#proc_configuring-an-ipsec-vpn-to-use-tcp_configuring-a-vpn-connection",{"title":318,"visible":17,"weight":119,"urlFragment":275,"anchor":319,"singlePageAnchor":319,"docTitle":21,"url":320},"7.11. Configuring automatic detection and usage of ESP hardware offload to accelerate an IPsec connection","proc_configuring-automatic-detection-and-usage-of-esp-hardware-offload-to-accelerate-an-ipsec-connection_configuring-a-vpn-connection","#proc_configuring-automatic-detection-and-usage-of-esp-hardware-offload-to-accelerate-an-ipsec-connection_configuring-a-vpn-connection",{"title":322,"visible":17,"weight":124,"urlFragment":275,"anchor":323,"singlePageAnchor":323,"docTitle":21,"url":324},"7.12. Configuring ESP hardware offload on a bond to accelerate an IPsec connection","proc_configuring-esp-hardware-offload-on-a-bond-to-accelerate-an-ipsec-connection_configuring-a-vpn-connection","#proc_configuring-esp-hardware-offload-on-a-bond-to-accelerate-an-ipsec-connection_configuring-a-vpn-connection",{"title":326,"visible":17,"weight":129,"urlFragment":275,"anchor":327,"singlePageAnchor":327,"sections":328,"docTitle":21,"url":337},"7.13. Configuring VPN connections with IPsec by using RHEL system roles","assembly_configuring-vpn-connections-with-ipsec-by-using-the-rhel-vpn-system-role_configuring-a-vpn-connection",[329,333],{"title":330,"visible":17,"weight":18,"urlFragment":275,"anchor":331,"singlePageAnchor":331,"docTitle":21,"url":332},"7.13.1. Creating a host-to-host VPN with IPsec by using the vpn RHEL system role","proc_creating-a-host-to-host-vpn-with-ipsec-using-the-vpn-system-role_assembly_configuring-vpn-connections-with-ipsec-by-using-the-rhel-vpn-system-role","#proc_creating-a-host-to-host-vpn-with-ipsec-using-the-vpn-system-role_assembly_configuring-vpn-connections-with-ipsec-by-using-the-rhel-vpn-system-role",{"title":334,"visible":17,"weight":25,"urlFragment":275,"anchor":335,"singlePageAnchor":335,"docTitle":21,"url":336},"7.13.2. Creating an opportunistic mesh VPN connection with IPsec by using the vpn RHEL system role","proc_creating-an-opportunistic-mesh-vpn-connection-with-ipsec-by-using-the-vpn-system-role_assembly_configuring-vpn-connections-with-ipsec-by-using-the-rhel-vpn-system-role","#proc_creating-an-opportunistic-mesh-vpn-connection-with-ipsec-by-using-the-vpn-system-role_assembly_configuring-vpn-connections-with-ipsec-by-using-the-rhel-vpn-system-role","#assembly_configuring-vpn-connections-with-ipsec-by-using-the-rhel-vpn-system-role_configuring-a-vpn-connection",{"title":339,"visible":17,"weight":340,"urlFragment":275,"anchor":341,"singlePageAnchor":341,"docTitle":21,"url":342},"7.14. Configuring IPsec connections that opt out of the system-wide crypto policies",14,"configuring-ipsec-connections-that-opt-out-of-the-system-wide-crypto-policies_configuring-a-vpn-connection","#configuring-ipsec-connections-that-opt-out-of-the-system-wide-crypto-policies_configuring-a-vpn-connection",{"title":344,"visible":17,"weight":345,"urlFragment":275,"anchor":346,"singlePageAnchor":346,"docTitle":21,"url":347},"7.15. Troubleshooting IPsec VPN configurations",15,"ref_troubleshooting-ipsec-vpn-configurations_configuring-a-vpn-connection","#ref_troubleshooting-ipsec-vpn-configurations_configuring-a-vpn-connection",{"title":349,"visible":17,"weight":350,"urlFragment":275,"anchor":351,"singlePageAnchor":351,"docTitle":21,"url":352},"7.16. Configuring a VPN connection with control-center",16,"configuring-a-VPN-connection-with-control-center_configuring-a-vpn-connection","#configuring-a-VPN-connection-with-control-center_configuring-a-vpn-connection",{"title":354,"visible":17,"weight":355,"urlFragment":275,"anchor":356,"singlePageAnchor":356,"docTitle":21,"url":357},"7.17. Configuring a VPN connection using nm-connection-editor",17,"configuring-a-vpn-connection-using-nm-connection-editor_configuring-a-vpn-connection","#configuring-a-vpn-connection-using-nm-connection-editor_configuring-a-vpn-connection",{"title":359,"visible":17,"weight":360,"urlFragment":275,"anchor":361,"singlePageAnchor":361,"sections":362,"docTitle":21,"url":383},"7.18. Configuring an IPsec based VPN connection by using nmstatectl",18,"configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl_configuring-a-vpn-connection",[363,367,371,375,379],{"title":364,"visible":17,"weight":18,"urlFragment":275,"anchor":365,"singlePageAnchor":365,"docTitle":21,"url":366},"7.18.1. Configuring a host-to-subnet IPSec VPN with PKI authentication and tunnel mode by using nmstatectl","configuring-a-host-to-subnet-ipsec-vpn-with-pki-authentication-and-tunnel-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl","#configuring-a-host-to-subnet-ipsec-vpn-with-pki-authentication-and-tunnel-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl",{"title":368,"visible":17,"weight":25,"urlFragment":275,"anchor":369,"singlePageAnchor":369,"docTitle":21,"url":370},"7.18.2. Configuring a host-to-subnet IPSec VPN with RSA authentication and tunnel mode by using nmstatectl","configuring-a-host-to-subnet-ipsec-vpn-with-rsa-authentication-and-tunnel-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl","#configuring-a-host-to-subnet-ipsec-vpn-with-rsa-authentication-and-tunnel-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl",{"title":372,"visible":17,"weight":30,"urlFragment":275,"anchor":373,"singlePageAnchor":373,"docTitle":21,"url":374},"7.18.3. Configuring a host-to-subnet IPSec VPN with PSK authentication and tunnel mode by using nmstatectl","configuring-a-host-to-subnet-ipsec-vpn-with-psk-authentication-and-tunnel-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl","#configuring-a-host-to-subnet-ipsec-vpn-with-psk-authentication-and-tunnel-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl",{"title":376,"visible":17,"weight":47,"urlFragment":275,"anchor":377,"singlePageAnchor":377,"docTitle":21,"url":378},"7.18.4. Configuring a host-to-host IPsec VPN with PKI authentication and tunnel mode by using nmstatectl","configuring-a-host-to-host-ipsec-vpn-with-pki-authentication-and-tunnel-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl","#configuring-a-host-to-host-ipsec-vpn-with-pki-authentication-and-tunnel-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl",{"title":380,"visible":17,"weight":52,"urlFragment":275,"anchor":381,"singlePageAnchor":381,"docTitle":21,"url":382},"7.18.5. Configuring a host-to-host IPsec VPN with PSK authentication and transport mode by using nmstatectl","configuring-a-host-to-host-ipsec-vpn-with-psk-authentication-and-transport-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl","#configuring-a-host-to-host-ipsec-vpn-with-psk-authentication-and-transport-mode-by-using-nmstatectl_configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl","#configuring-an-ipsec-based-vpn-connection-by-using-nmstatectl_configuring-a-vpn-connection",{"title":385,"visible":17,"weight":386,"urlFragment":275,"anchor":387,"singlePageAnchor":387,"docTitle":21,"url":388},"7.19. Additional resources",19,"related-information-configuring-a-vpn-connection","#related-information-configuring-a-vpn-connection","#configuring-a-vpn-connection_configuring-and-managing-networking",{"title":391,"visible":17,"weight":114,"urlFragment":392,"anchor":20,"singlePageAnchor":392,"sections":393,"docTitle":21,"url":462},"8. Setting up a WireGuard VPN","assembly_setting-up-a-wireguard-vpn_configuring-and-managing-networking",[394,398,402,406,410,414,418,422,426,430,434,438,442,446,450,454,458],{"title":395,"visible":17,"weight":18,"urlFragment":392,"anchor":396,"singlePageAnchor":396,"docTitle":21,"url":397},"8.1. Protocols and primitives used by WireGuard","ref_protocols-and-primitives-used-by-wireguard_assembly_setting-up-a-wireguard-vpn","#ref_protocols-and-primitives-used-by-wireguard_assembly_setting-up-a-wireguard-vpn",{"title":399,"visible":17,"weight":25,"urlFragment":392,"anchor":400,"singlePageAnchor":400,"docTitle":21,"url":401},"8.2. How WireGuard uses tunnel IP addresses, public keys, and remote endpoints","con_how-wireguard-uses-tunnel-ip-addresses-public-keys-and-remote-endpoints_assembly_setting-up-a-wireguard-vpn","#con_how-wireguard-uses-tunnel-ip-addresses-public-keys-and-remote-endpoints_assembly_setting-up-a-wireguard-vpn",{"title":403,"visible":17,"weight":30,"urlFragment":392,"anchor":404,"singlePageAnchor":404,"docTitle":21,"url":405},"8.3. Using a WireGuard client behind NAT and firewalls","con_using-a-wireguard-client-behind-nat-and-firewalls_assembly_setting-up-a-wireguard-vpn","#con_using-a-wireguard-client-behind-nat-and-firewalls_assembly_setting-up-a-wireguard-vpn",{"title":407,"visible":17,"weight":47,"urlFragment":392,"anchor":408,"singlePageAnchor":408,"docTitle":21,"url":409},"8.4. Creating private and public keys to be used in WireGuard connections","proc_creating-private-and-public-keys-to-be-used-in-wireguard-connections_assembly_setting-up-a-wireguard-vpn","#proc_creating-private-and-public-keys-to-be-used-in-wireguard-connections_assembly_setting-up-a-wireguard-vpn",{"title":411,"visible":17,"weight":52,"urlFragment":392,"anchor":412,"singlePageAnchor":412,"docTitle":21,"url":413},"8.5. Configuring a WireGuard server by using nmcli","proc_configuring-a-wireguard-by-using-nmcli_assembly_setting-up-a-wireguard-vpn","#proc_configuring-a-wireguard-by-using-nmcli_assembly_setting-up-a-wireguard-vpn",{"title":415,"visible":17,"weight":57,"urlFragment":392,"anchor":416,"singlePageAnchor":416,"docTitle":21,"url":417},"8.6. Configuring a WireGuard server by using nmtui","proc_configuring-a-wireguard-server-by-using-nmtui_assembly_setting-up-a-wireguard-vpn","#proc_configuring-a-wireguard-server-by-using-nmtui_assembly_setting-up-a-wireguard-vpn",{"title":419,"visible":17,"weight":62,"urlFragment":392,"anchor":420,"singlePageAnchor":420,"docTitle":21,"url":421},"8.7. Configuring a WireGuard server by using the RHEL web console","configuring-a-wireguard-server-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn","#configuring-a-wireguard-server-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn",{"title":423,"visible":17,"weight":67,"urlFragment":392,"anchor":424,"singlePageAnchor":424,"docTitle":21,"url":425},"8.8. Configuring a WireGuard server by using nm-connection-editor","proc_configuring-a-wireguard-server-by-using-nm-connection-editor_assembly_setting-up-a-wireguard-vpn","#proc_configuring-a-wireguard-server-by-using-nm-connection-editor_assembly_setting-up-a-wireguard-vpn",{"title":427,"visible":17,"weight":109,"urlFragment":392,"anchor":428,"singlePageAnchor":428,"docTitle":21,"url":429},"8.9. Configuring a WireGuard server by using the wg-quick service","proc_configuring-a-wireguard-server-by-using-the-wg-quick-service_assembly_setting-up-a-wireguard-vpn","#proc_configuring-a-wireguard-server-by-using-the-wg-quick-service_assembly_setting-up-a-wireguard-vpn",{"title":431,"visible":17,"weight":114,"urlFragment":392,"anchor":432,"singlePageAnchor":432,"docTitle":21,"url":433},"8.10. Configuring firewalld on a WireGuard server by using the command line","proc_configuring-firewalld-on-a-wireguard-server-by-using-the-command-line_assembly_setting-up-a-wireguard-vpn","#proc_configuring-firewalld-on-a-wireguard-server-by-using-the-command-line_assembly_setting-up-a-wireguard-vpn",{"title":435,"visible":17,"weight":119,"urlFragment":392,"anchor":436,"singlePageAnchor":436,"docTitle":21,"url":437},"8.11. Configuring firewalld on a WireGuard server by using the RHEL web console","configuring-firewalld-on-a-wireguard-server-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn","#configuring-firewalld-on-a-wireguard-server-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn",{"title":439,"visible":17,"weight":124,"urlFragment":392,"anchor":440,"singlePageAnchor":440,"docTitle":21,"url":441},"8.12. Configuring firewalld on a WireGuard server by using the graphical interface","proc_configuring-firewalld-on-a-wireguard-server-by-using-the-graphical-interface_assembly_setting-up-a-wireguard-vpn","#proc_configuring-firewalld-on-a-wireguard-server-by-using-the-graphical-interface_assembly_setting-up-a-wireguard-vpn",{"title":443,"visible":17,"weight":129,"urlFragment":392,"anchor":444,"singlePageAnchor":444,"docTitle":21,"url":445},"8.13. Configuring a WireGuard client by using nmcli","proc_configuring-a-wireguard-client-by-using-nmcli_assembly_setting-up-a-wireguard-vpn","#proc_configuring-a-wireguard-client-by-using-nmcli_assembly_setting-up-a-wireguard-vpn",{"title":447,"visible":17,"weight":340,"urlFragment":392,"anchor":448,"singlePageAnchor":448,"docTitle":21,"url":449},"8.14. Configuring a WireGuard client by using nmtui","proc_configuring-a-wireguard-client-by-using-nmtui_assembly_setting-up-a-wireguard-vpn","#proc_configuring-a-wireguard-client-by-using-nmtui_assembly_setting-up-a-wireguard-vpn",{"title":451,"visible":17,"weight":345,"urlFragment":392,"anchor":452,"singlePageAnchor":452,"docTitle":21,"url":453},"8.15. Configuring a WireGuard client by using the RHEL web console","configuring-a-wireguard-client-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn","#configuring-a-wireguard-client-by-using-the-rhel-web-console_assembly_setting-up-a-wireguard-vpn",{"title":455,"visible":17,"weight":350,"urlFragment":392,"anchor":456,"singlePageAnchor":456,"docTitle":21,"url":457},"8.16. Configuring a WireGuard client by using nm-connection-editor","proc_configuring-a-wireguard-client-by-using-nm-connection-editor_assembly_setting-up-a-wireguard-vpn","#proc_configuring-a-wireguard-client-by-using-nm-connection-editor_assembly_setting-up-a-wireguard-vpn",{"title":459,"visible":17,"weight":355,"urlFragment":392,"anchor":460,"singlePageAnchor":460,"docTitle":21,"url":461},"8.17. Configuring a WireGuard client by using the wg-quick service","proc_configuring-a-wireguard-client-by-using-the-wg-quick-service_assembly_setting-up-a-wireguard-vpn","#proc_configuring-a-wireguard-client-by-using-the-wg-quick-service_assembly_setting-up-a-wireguard-vpn","#assembly_setting-up-a-wireguard-vpn_configuring-and-managing-networking",{"title":464,"visible":17,"weight":119,"urlFragment":465,"anchor":20,"singlePageAnchor":465,"sections":466,"docTitle":21,"url":479},"9. Configuring IP tunnels","configuring-ip-tunnels_configuring-and-managing-networking",[467,471,475],{"title":468,"visible":17,"weight":18,"urlFragment":465,"anchor":469,"singlePageAnchor":469,"docTitle":21,"url":470},"9.1. Configuring an IPIP tunnel to encapsulate IPv4 traffic in IPv4 packets","configuring-an-ipip-tunnel-using-nmcli-to-encapsulate--ipv4-traffic-in-ipv4-packets_configuring-ip-tunnels","#configuring-an-ipip-tunnel-using-nmcli-to-encapsulate--ipv4-traffic-in-ipv4-packets_configuring-ip-tunnels",{"title":472,"visible":17,"weight":25,"urlFragment":465,"anchor":473,"singlePageAnchor":473,"docTitle":21,"url":474},"9.2. Configuring a GRE tunnel to encapsulate layer-3 traffic in IPv4 packets","configuring-a-gre-tunnel-using-nmcli-to-encapsulate-layer-3-traffic-in-ipv4-packets_configuring-ip-tunnels","#configuring-a-gre-tunnel-using-nmcli-to-encapsulate-layer-3-traffic-in-ipv4-packets_configuring-ip-tunnels",{"title":476,"visible":17,"weight":30,"urlFragment":465,"anchor":477,"singlePageAnchor":477,"docTitle":21,"url":478},"9.3. Configuring a GRETAP tunnel to transfer Ethernet frames over IPv4","configuring-a-gretap-tunnel-to-transfer-ethernet-frames-over-ipv4_configuring-ip-tunnels","#configuring-a-gretap-tunnel-to-transfer-ethernet-frames-over-ipv4_configuring-ip-tunnels","#configuring-ip-tunnels_configuring-and-managing-networking",{"title":481,"visible":17,"weight":124,"urlFragment":482,"anchor":20,"singlePageAnchor":482,"sections":483,"docTitle":21,"url":504},"10. Using a VXLAN to create a virtual layer-2 domain for VMs","assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms_configuring-and-managing-networking",[484,488,492,496,500],{"title":485,"visible":17,"weight":18,"urlFragment":482,"anchor":486,"singlePageAnchor":486,"docTitle":21,"url":487},"10.1. Benefits of VXLANs","con_benefits-of-vxlans_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms","#con_benefits-of-vxlans_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms",{"title":489,"visible":17,"weight":25,"urlFragment":482,"anchor":490,"singlePageAnchor":490,"docTitle":21,"url":491},"10.2. Configuring the Ethernet interface on the hosts","proc_configuring-the-ethernet-interface-on-the-hosts_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms","#proc_configuring-the-ethernet-interface-on-the-hosts_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms",{"title":493,"visible":17,"weight":30,"urlFragment":482,"anchor":494,"singlePageAnchor":494,"docTitle":21,"url":495},"10.3. Creating a network bridge with a VXLAN attached","proc_creating-a-network-bridge-with-a-vxlan-attached_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms","#proc_creating-a-network-bridge-with-a-vxlan-attached_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms",{"title":497,"visible":17,"weight":47,"urlFragment":482,"anchor":498,"singlePageAnchor":498,"docTitle":21,"url":499},"10.4. Creating a virtual network in libvirt with an existing bridge","proc_creating-a-virtual-network-in-libvirt-with-an-existing-bridge_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms","#proc_creating-a-virtual-network-in-libvirt-with-an-existing-bridge_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms",{"title":501,"visible":17,"weight":52,"urlFragment":482,"anchor":502,"singlePageAnchor":502,"docTitle":21,"url":503},"10.5. Configuring virtual machines to use VXLAN","proc_proc_configuring-virtual-machines-to-use-vxlan_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms","#proc_proc_configuring-virtual-machines-to-use-vxlan_assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms","#assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms_configuring-and-managing-networking",{"title":506,"visible":17,"weight":129,"urlFragment":507,"anchor":20,"singlePageAnchor":507,"sections":508,"docTitle":21,"url":545},"11. Managing wifi connections","assembly_managing-wifi-connections_configuring-and-managing-networking",[509,513,517,521,525,529,533,537,541],{"title":510,"visible":17,"weight":18,"urlFragment":507,"anchor":511,"singlePageAnchor":511,"docTitle":21,"url":512},"11.1. Supported wifi security types","ref_supported-wifi-security-types_assembly_managing-wifi-connections","#ref_supported-wifi-security-types_assembly_managing-wifi-connections",{"title":514,"visible":17,"weight":25,"urlFragment":507,"anchor":515,"singlePageAnchor":515,"docTitle":21,"url":516},"11.2. Connecting to a wifi network by using nmcli","proc_connecting-to-a-wifi-network-by-using-nmcli_assembly_managing-wifi-connections","#proc_connecting-to-a-wifi-network-by-using-nmcli_assembly_managing-wifi-connections",{"title":518,"visible":17,"weight":30,"urlFragment":507,"anchor":519,"singlePageAnchor":519,"docTitle":21,"url":520},"11.3. Connecting to a wifi network by using the GNOME system menu","proc_connecting-to-a-wifi-network-by-using-the-gnome-system-menu_assembly_managing-wifi-connections","#proc_connecting-to-a-wifi-network-by-using-the-gnome-system-menu_assembly_managing-wifi-connections",{"title":522,"visible":17,"weight":47,"urlFragment":507,"anchor":523,"singlePageAnchor":523,"docTitle":21,"url":524},"11.4. Connecting to a wifi network by using the GNOME settings application","proc_connecting-to-a-wifi-network-by-using-the-gnome-settings-application_assembly_managing-wifi-connections","#proc_connecting-to-a-wifi-network-by-using-the-gnome-settings-application_assembly_managing-wifi-connections",{"title":526,"visible":17,"weight":52,"urlFragment":507,"anchor":527,"singlePageAnchor":527,"docTitle":21,"url":528},"11.5. Configuring a wifi connection by using nmtui","proc_configuring-a-wifi-connection-by-using-nmtui_assembly_managing-wifi-connections","#proc_configuring-a-wifi-connection-by-using-nmtui_assembly_managing-wifi-connections",{"title":530,"visible":17,"weight":57,"urlFragment":507,"anchor":531,"singlePageAnchor":531,"docTitle":21,"url":532},"11.6. Configuring a wifi connection by using nm-connection-editor","proc_configuring-a-wifi-connection-by-using-nm-connection-editor_assembly_managing-wifi-connections","#proc_configuring-a-wifi-connection-by-using-nm-connection-editor_assembly_managing-wifi-connections",{"title":534,"visible":17,"weight":62,"urlFragment":507,"anchor":535,"singlePageAnchor":535,"docTitle":21,"url":536},"11.7. Configuring a wifi connection with 802.1X network authentication by using the network RHEL system role","proc_configuring-a-wifi-connection-with-802-1x-network-authentication-by-using-the-network-rhel-system-role_assembly_managing-wifi-connections","#proc_configuring-a-wifi-connection-with-802-1x-network-authentication-by-using-the-network-rhel-system-role_assembly_managing-wifi-connections",{"title":538,"visible":17,"weight":67,"urlFragment":507,"anchor":539,"singlePageAnchor":539,"docTitle":21,"url":540},"11.8. Configuring a wifi connection with 802.1X network authentication in an existing profile by using nmcli","proc_configuring-a-wifi-connection-with-802-1x-network-authentication-in-an-existing-profile-by-using-nmcli_assembly_managing-wifi-connections","#proc_configuring-a-wifi-connection-with-802-1x-network-authentication-in-an-existing-profile-by-using-nmcli_assembly_managing-wifi-connections",{"title":542,"visible":17,"weight":109,"urlFragment":507,"anchor":543,"singlePageAnchor":543,"docTitle":21,"url":544},"11.9. Manually setting the wireless regulatory domain","proc_manually-setting-the-wireless-regulatory-domain_assembly_managing-wifi-connections","#proc_manually-setting-the-wireless-regulatory-domain_assembly_managing-wifi-connections","#assembly_managing-wifi-connections_configuring-and-managing-networking",{"title":547,"visible":17,"weight":340,"urlFragment":548,"anchor":20,"singlePageAnchor":548,"docTitle":21,"url":549},"12. Configuring RHEL as a WPA2 or WPA3 Personal access point","proc_configuring-rhel-as-a-wpa2-or-wpa3-personal-access-point_configuring-and-managing-networking","#proc_configuring-rhel-as-a-wpa2-or-wpa3-personal-access-point_configuring-and-managing-networking",{"title":551,"visible":17,"weight":345,"urlFragment":552,"anchor":20,"singlePageAnchor":552,"sections":553,"docTitle":21,"url":566},"13. Using MACsec to encrypt layer-2 traffic in the same physical network","assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network_configuring-and-managing-networking",[554,558,562],{"title":555,"visible":17,"weight":18,"urlFragment":552,"anchor":556,"singlePageAnchor":556,"docTitle":21,"url":557},"13.1. How MACsec increases security","how-macsec-increases-security_assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network","#how-macsec-increases-security_assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network",{"title":559,"visible":17,"weight":25,"urlFragment":552,"anchor":560,"singlePageAnchor":560,"docTitle":21,"url":561},"13.2. Configuring a MACsec connection by using nmcli","proc_configuring-a-macsec-connection-using-nmcli_assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network","#proc_configuring-a-macsec-connection-using-nmcli_assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network",{"title":563,"visible":17,"weight":30,"urlFragment":552,"anchor":564,"singlePageAnchor":564,"docTitle":21,"url":565},"13.3. Configuring a MACsec connection by using nmstatectl","configuring-a-macsec-connection-using-nmstatectl_assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network","#configuring-a-macsec-connection-using-nmstatectl_assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network","#assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network_configuring-and-managing-networking",{"title":568,"visible":17,"weight":350,"urlFragment":569,"anchor":20,"singlePageAnchor":569,"sections":570,"docTitle":21,"url":583},"14. Getting started with IPVLAN","getting-started-with-ipvlan_configuring-and-managing-networking",[571,575,579],{"title":572,"visible":17,"weight":18,"urlFragment":569,"anchor":573,"singlePageAnchor":573,"docTitle":21,"url":574},"14.1. IPVLAN modes","ipvlan-modes_getting-started-with-ipvlan","#ipvlan-modes_getting-started-with-ipvlan",{"title":576,"visible":17,"weight":25,"urlFragment":569,"anchor":577,"singlePageAnchor":577,"docTitle":21,"url":578},"14.2. Comparison of IPVLAN and MACVLAN","ipvlan-and-macvlan_getting-started-with-ipvlan","#ipvlan-and-macvlan_getting-started-with-ipvlan",{"title":580,"visible":17,"weight":30,"urlFragment":569,"anchor":581,"singlePageAnchor":581,"docTitle":21,"url":582},"14.3. Creating and configuring the IPVLAN device using iproute2","creating-and-configuring-the-ipvlan-device-using-iproute2_getting-started-with-ipvlan","#creating-and-configuring-the-ipvlan-device-using-iproute2_getting-started-with-ipvlan","#getting-started-with-ipvlan_configuring-and-managing-networking",{"title":585,"visible":17,"weight":355,"urlFragment":586,"anchor":20,"singlePageAnchor":586,"sections":587,"docTitle":21,"url":596},"15. Configuring NetworkManager to ignore certain devices","configuring-networkmanager-to-ignore-certain-devices_configuring-and-managing-networking",[588,592],{"title":589,"visible":17,"weight":18,"urlFragment":586,"anchor":590,"singlePageAnchor":590,"docTitle":21,"url":591},"15.1. Permanently configuring a device as unmanaged in NetworkManager","permanently-configuring-a-device-as-unmanaged-in-networkmanager_configuring-networkmanager-to-ignore-certain-devices","#permanently-configuring-a-device-as-unmanaged-in-networkmanager_configuring-networkmanager-to-ignore-certain-devices",{"title":593,"visible":17,"weight":25,"urlFragment":586,"anchor":594,"singlePageAnchor":594,"docTitle":21,"url":595},"15.2. Temporarily configuring a device as unmanaged in NetworkManager","temporarily-configuring-a-device-as-unmanaged-in-networkmanager_configuring-networkmanager-to-ignore-certain-devices","#temporarily-configuring-a-device-as-unmanaged-in-networkmanager_configuring-networkmanager-to-ignore-certain-devices","#configuring-networkmanager-to-ignore-certain-devices_configuring-and-managing-networking",{"title":598,"visible":17,"weight":360,"urlFragment":599,"anchor":20,"singlePageAnchor":599,"docTitle":21,"url":600},"16. Configuring the loopback interface by using nmcli","proc_configuring-the-loopback-interface-by-using-nmcli_configuring-and-managing-networking","#proc_configuring-the-loopback-interface-by-using-nmcli_configuring-and-managing-networking",{"title":602,"visible":17,"weight":386,"urlFragment":603,"anchor":20,"singlePageAnchor":603,"sections":604,"docTitle":21,"url":609},"17. Creating a dummy interface","creating-a-dummy-interface_configuring-and-managing-networking",[605],{"title":606,"visible":17,"weight":18,"urlFragment":603,"anchor":607,"singlePageAnchor":607,"docTitle":21,"url":608},"17.1. Creating a dummy interface with both an IPv4 and IPv6 address by using nmcli","creating-a-dummy-interface-with-both-an-ipv4-and-ipv6-address-using-nmcli_creating-a-dummy-interface","#creating-a-dummy-interface-with-both-an-ipv4-and-ipv6-address-using-nmcli_creating-a-dummy-interface","#creating-a-dummy-interface_configuring-and-managing-networking",{"title":611,"visible":17,"weight":612,"urlFragment":613,"anchor":20,"singlePageAnchor":613,"sections":614,"docTitle":21,"url":619},"18. Using NetworkManager to disable IPv6 for a specific connection",20,"using-networkmanager-to-disable-ipv6-for-a-specific-connection_configuring-and-managing-networking",[615],{"title":616,"visible":17,"weight":18,"urlFragment":613,"anchor":617,"singlePageAnchor":617,"docTitle":21,"url":618},"18.1. Disabling IPv6 on a connection using nmcli","disabling-ipv6-on-a-connection-using-nmcli_using-networkmanager-to-disable-ipv6-for-a-specific-connection","#disabling-ipv6-on-a-connection-using-nmcli_using-networkmanager-to-disable-ipv6-for-a-specific-connection","#using-networkmanager-to-disable-ipv6-for-a-specific-connection_configuring-and-managing-networking",{"title":621,"visible":17,"weight":622,"urlFragment":623,"anchor":20,"singlePageAnchor":623,"sections":624,"docTitle":21,"url":633},"19. Changing a hostname",21,"assembly_changing-a-hostname_configuring-and-managing-networking",[625,629],{"title":626,"visible":17,"weight":18,"urlFragment":623,"anchor":627,"singlePageAnchor":627,"docTitle":21,"url":628},"19.1. Changing a hostname by using nmcli","proc_changing-a-hostname-using-nmcli_assembly_changing-a-hostname","#proc_changing-a-hostname-using-nmcli_assembly_changing-a-hostname",{"title":630,"visible":17,"weight":25,"urlFragment":623,"anchor":631,"singlePageAnchor":631,"docTitle":21,"url":632},"19.2. Changing a hostname by using hostnamectl","proc_changing-a-hostname-using-hostnamectl_assembly_changing-a-hostname","#proc_changing-a-hostname-using-hostnamectl_assembly_changing-a-hostname","#assembly_changing-a-hostname_configuring-and-managing-networking",{"title":635,"visible":17,"weight":636,"urlFragment":637,"anchor":20,"singlePageAnchor":637,"sections":638,"docTitle":21,"url":647},"20. Configuring NetworkManager DHCP settings",22,"configuring-networkmanager-dhcp-settings_configuring-and-managing-networking",[639,643],{"title":640,"visible":17,"weight":18,"urlFragment":637,"anchor":641,"singlePageAnchor":641,"docTitle":21,"url":642},"20.1. Changing the DHCP client of NetworkManager","proc_changing-the-dhcp-client-of-networkmanager_configuring-networkmanager-dhcp-settings","#proc_changing-the-dhcp-client-of-networkmanager_configuring-networkmanager-dhcp-settings",{"title":644,"visible":17,"weight":25,"urlFragment":637,"anchor":645,"singlePageAnchor":645,"docTitle":21,"url":646},"20.2. Configuring the DHCP behavior of a NetworkManager connection","configuring-the-dhcp-behavior-of-a-networkmanager-connection_configuring-networkmanager-dhcp-settings","#configuring-the-dhcp-behavior-of-a-networkmanager-connection_configuring-networkmanager-dhcp-settings","#configuring-networkmanager-dhcp-settings_configuring-and-managing-networking",{"title":649,"visible":17,"weight":650,"urlFragment":651,"anchor":20,"singlePageAnchor":651,"sections":652,"docTitle":21,"url":661},"21. Running dhclient exit hooks using NetworkManager a dispatcher script",23,"assembly_running-dhclient-exit-hooks-using-networkmanager-a-dispatcher-script_configuring-and-managing-networking",[653,657],{"title":654,"visible":17,"weight":18,"urlFragment":651,"anchor":655,"singlePageAnchor":655,"docTitle":21,"url":656},"21.1. The concept of NetworkManager dispatcher scripts","con_the-concept-of-networkmanager-dispatcher-scripts_assembly_running-dhclient-exit-hooks-using-networkmanager-a-dispatcher-script","#con_the-concept-of-networkmanager-dispatcher-scripts_assembly_running-dhclient-exit-hooks-using-networkmanager-a-dispatcher-script",{"title":658,"visible":17,"weight":25,"urlFragment":651,"anchor":659,"singlePageAnchor":659,"docTitle":21,"url":660},"21.2. Creating a NetworkManager dispatcher script that runs dhclient exit hooks","proc_creating-a-networkmanager-dispatcher-script-that-runs-dhclient-exit-hooks_assembly_running-dhclient-exit-hooks-using-networkmanager-a-dispatcher-script","#proc_creating-a-networkmanager-dispatcher-script-that-runs-dhclient-exit-hooks_assembly_running-dhclient-exit-hooks-using-networkmanager-a-dispatcher-script","#assembly_running-dhclient-exit-hooks-using-networkmanager-a-dispatcher-script_configuring-and-managing-networking",{"title":663,"visible":17,"weight":664,"urlFragment":665,"anchor":20,"singlePageAnchor":665,"sections":666,"docTitle":21,"url":675},"22. Manually configuring the /etc/resolv.conf file",24,"manually-configuring-the-etc-resolv-conf-file_configuring-and-managing-networking",[667,671],{"title":668,"visible":17,"weight":18,"urlFragment":665,"anchor":669,"singlePageAnchor":669,"docTitle":21,"url":670},"22.1. Disabling DNS processing in the NetworkManager configuration","disabling-dns-processing-in-the-networkmanager-configuration_manually-configuring-the-etc-resolv-conf-file","#disabling-dns-processing-in-the-networkmanager-configuration_manually-configuring-the-etc-resolv-conf-file",{"title":672,"visible":17,"weight":25,"urlFragment":665,"anchor":673,"singlePageAnchor":673,"docTitle":21,"url":674},"22.2. Replacing /etc/resolv.conf with a symbolic link to manually configure DNS settings","replacing-etc-resolv-conf-with-a-symbolic-link-to-manually-configure-dns-settings_manually-configuring-the-etc-resolv-conf-file","#replacing-etc-resolv-conf-with-a-symbolic-link-to-manually-configure-dns-settings_manually-configuring-the-etc-resolv-conf-file","#manually-configuring-the-etc-resolv-conf-file_configuring-and-managing-networking",{"title":677,"visible":17,"weight":678,"urlFragment":679,"anchor":20,"singlePageAnchor":679,"sections":680,"docTitle":21,"url":693},"23. Configuring the order of DNS servers",25,"configuring-the-order-of-dns-servers_configuring-and-managing-networking",[681,685,689],{"title":682,"visible":17,"weight":18,"urlFragment":679,"anchor":683,"singlePageAnchor":683,"docTitle":21,"url":684},"23.1. How NetworkManager orders DNS servers in /etc/resolv.conf","how-networkmanager-orders-dns-servers-in-etc-resolv-conf_configuring-the-order-of-dns-servers","#how-networkmanager-orders-dns-servers-in-etc-resolv-conf_configuring-the-order-of-dns-servers",{"title":686,"visible":17,"weight":25,"urlFragment":679,"anchor":687,"singlePageAnchor":687,"docTitle":21,"url":688},"23.2. Setting a NetworkManager-wide default DNS server priority value","setting-a-networkmanager-wide-default-dns-server-priority-value_configuring-the-order-of-dns-servers","#setting-a-networkmanager-wide-default-dns-server-priority-value_configuring-the-order-of-dns-servers",{"title":690,"visible":17,"weight":30,"urlFragment":679,"anchor":691,"singlePageAnchor":691,"docTitle":21,"url":692},"23.3. Setting the DNS priority of a NetworkManager connection","setting-the-dns-priority-of-a-networkmanager-connection_configuring-the-order-of-dns-servers","#setting-the-dns-priority-of-a-networkmanager-connection_configuring-the-order-of-dns-servers","#configuring-the-order-of-dns-servers_configuring-and-managing-networking",{"title":695,"visible":17,"weight":696,"urlFragment":697,"anchor":20,"singlePageAnchor":697,"sections":698,"docTitle":21,"url":707},"24. Using different DNS servers for different domains",26,"using-different-dns-servers-for-different-domains_configuring-and-managing-networking",[699,703],{"title":700,"visible":17,"weight":18,"urlFragment":697,"anchor":701,"singlePageAnchor":701,"docTitle":21,"url":702},"24.1. Using dnsmasq in NetworkManager to send DNS requests for a specific domain to a selected DNS server","using-dnsmasq-in-networkmanager-to-send-dns-requests-for-a-specific-domain-to-a-selected-dns-server_using-different-dns-servers-for-different-domains","#using-dnsmasq-in-networkmanager-to-send-dns-requests-for-a-specific-domain-to-a-selected-dns-server_using-different-dns-servers-for-different-domains",{"title":704,"visible":17,"weight":25,"urlFragment":697,"anchor":705,"singlePageAnchor":705,"docTitle":21,"url":706},"24.2. Using systemd-resolved in NetworkManager to send DNS requests for a specific domain to a selected DNS server","using-systemd-resolved-in-networkmanager-to-send-dns-requests-for-a-specific-domain-to-a-selected-dns-server_using-different-dns-servers-for-different-domains","#using-systemd-resolved-in-networkmanager-to-send-dns-requests-for-a-specific-domain-to-a-selected-dns-server_using-different-dns-servers-for-different-domains","#using-different-dns-servers-for-different-domains_configuring-and-managing-networking",{"title":709,"visible":17,"weight":710,"urlFragment":711,"anchor":20,"singlePageAnchor":711,"sections":712,"docTitle":21,"url":749},"25. Managing the default gateway setting",27,"managing-the-default-gateway-setting_configuring-and-managing-networking",[713,717,721,725,729,733,737,741,745],{"title":714,"visible":17,"weight":18,"urlFragment":711,"anchor":715,"singlePageAnchor":715,"docTitle":21,"url":716},"25.1. Setting the default gateway on an existing connection by using nmcli","setting-the-default-gateway-on-an-existing-connection-by-using-nmcli_managing-the-default-gateway-setting","#setting-the-default-gateway-on-an-existing-connection-by-using-nmcli_managing-the-default-gateway-setting",{"title":718,"visible":17,"weight":25,"urlFragment":711,"anchor":719,"singlePageAnchor":719,"docTitle":21,"url":720},"25.2. Setting the default gateway on an existing connection by using the nmcli interactive mode","setting-the-default-gateway-on-an-existing-connection-by-using-the-nmcli-interactive-mode_managing-the-default-gateway-setting","#setting-the-default-gateway-on-an-existing-connection-by-using-the-nmcli-interactive-mode_managing-the-default-gateway-setting",{"title":722,"visible":17,"weight":30,"urlFragment":711,"anchor":723,"singlePageAnchor":723,"docTitle":21,"url":724},"25.3. Setting the default gateway on an existing connection by using nm-connection-editor","setting-the-default-gateway-on-an-existing-connection-by-using-nm-connection-editor_managing-the-default-gateway-setting","#setting-the-default-gateway-on-an-existing-connection-by-using-nm-connection-editor_managing-the-default-gateway-setting",{"title":726,"visible":17,"weight":47,"urlFragment":711,"anchor":727,"singlePageAnchor":727,"docTitle":21,"url":728},"25.4. Setting the default gateway on an existing connection by using control-center","setting-the-default-gateway-on-an-existing-connection-by-using-control-center_managing-the-default-gateway-setting","#setting-the-default-gateway-on-an-existing-connection-by-using-control-center_managing-the-default-gateway-setting",{"title":730,"visible":17,"weight":52,"urlFragment":711,"anchor":731,"singlePageAnchor":731,"docTitle":21,"url":732},"25.5. Setting the default gateway on an existing connection by using nmstatectl","proc_setting-the-default-gateway-on-an-existing-connection-by-using-nmstatectl_managing-the-default-gateway-setting","#proc_setting-the-default-gateway-on-an-existing-connection-by-using-nmstatectl_managing-the-default-gateway-setting",{"title":734,"visible":17,"weight":57,"urlFragment":711,"anchor":735,"singlePageAnchor":735,"docTitle":21,"url":736},"25.6. Setting the default gateway on an existing connection by using the network RHEL system role","proc_setting-the-default-gateway-on-an-existing-connection-by-using-the-network-rhel-system-role_managing-the-default-gateway-setting","#proc_setting-the-default-gateway-on-an-existing-connection-by-using-the-network-rhel-system-role_managing-the-default-gateway-setting",{"title":738,"visible":17,"weight":62,"urlFragment":711,"anchor":739,"singlePageAnchor":739,"docTitle":21,"url":740},"25.7. How NetworkManager manages multiple default gateways","con_how-networkmanager-manages-multiple-default-gateways_managing-the-default-gateway-setting","#con_how-networkmanager-manages-multiple-default-gateways_managing-the-default-gateway-setting",{"title":742,"visible":17,"weight":67,"urlFragment":711,"anchor":743,"singlePageAnchor":743,"docTitle":21,"url":744},"25.8. Configuring NetworkManager to avoid using a specific profile to provide a default gateway","proc_configuring-networkmanager-to-avoid-using-a-specific-profile-to-provide-a-default-gateway_managing-the-default-gateway-setting","#proc_configuring-networkmanager-to-avoid-using-a-specific-profile-to-provide-a-default-gateway_managing-the-default-gateway-setting",{"title":746,"visible":17,"weight":109,"urlFragment":711,"anchor":747,"singlePageAnchor":747,"docTitle":21,"url":748},"25.9. Fixing unexpected routing behavior due to multiple default gateways","proc_fixing-unexpected-routing-behavior-due-to-multiple-default-gateways_managing-the-default-gateway-setting","#proc_fixing-unexpected-routing-behavior-due-to-multiple-default-gateways_managing-the-default-gateway-setting","#managing-the-default-gateway-setting_configuring-and-managing-networking",{"title":751,"visible":17,"weight":752,"urlFragment":753,"anchor":20,"singlePageAnchor":753,"sections":754,"docTitle":21,"url":791},"26. Configuring a static route",28,"configuring-static-routes_configuring-and-managing-networking",[755,759,763,767,771,775,779,783,787],{"title":756,"visible":17,"weight":18,"urlFragment":753,"anchor":757,"singlePageAnchor":757,"docTitle":21,"url":758},"26.1. Example of a network that requires static routes","ref_example-of-a-network-that-requires-static-routes_configuring-static-routes","#ref_example-of-a-network-that-requires-static-routes_configuring-static-routes",{"title":760,"visible":17,"weight":25,"urlFragment":753,"anchor":761,"singlePageAnchor":761,"docTitle":21,"url":762},"26.2. How to use the nmcli utility to configure a static route","how-to-use-the-nmcli-command-to-configure-a-static-route_configuring-static-routes","#how-to-use-the-nmcli-command-to-configure-a-static-route_configuring-static-routes",{"title":764,"visible":17,"weight":30,"urlFragment":753,"anchor":765,"singlePageAnchor":765,"docTitle":21,"url":766},"26.3. Configuring a static route by using nmcli","configuring-a-static-route-by-using-nmcli_configuring-static-routes","#configuring-a-static-route-by-using-nmcli_configuring-static-routes",{"title":768,"visible":17,"weight":47,"urlFragment":753,"anchor":769,"singlePageAnchor":769,"docTitle":21,"url":770},"26.4. Configuring a static route by using nmtui","proc_configuring-a-static-route-by-using-nmtui_configuring-static-routes","#proc_configuring-a-static-route-by-using-nmtui_configuring-static-routes",{"title":772,"visible":17,"weight":52,"urlFragment":753,"anchor":773,"singlePageAnchor":773,"docTitle":21,"url":774},"26.5. Configuring a static route by using control-center","configuring-a-static-route-by-using-control-center_configuring-static-routes","#configuring-a-static-route-by-using-control-center_configuring-static-routes",{"title":776,"visible":17,"weight":57,"urlFragment":753,"anchor":777,"singlePageAnchor":777,"docTitle":21,"url":778},"26.6. Configuring a static route by using nm-connection-editor","configuring-a-static-route-by-using-nm-connection-editor_configuring-static-routes","#configuring-a-static-route-by-using-nm-connection-editor_configuring-static-routes",{"title":780,"visible":17,"weight":62,"urlFragment":753,"anchor":781,"singlePageAnchor":781,"docTitle":21,"url":782},"26.7. Configuring a static route by using the nmcli interactive mode","configuring-a-static-route-by-using-the-nmcli-interactive-mode_configuring-static-routes","#configuring-a-static-route-by-using-the-nmcli-interactive-mode_configuring-static-routes",{"title":784,"visible":17,"weight":67,"urlFragment":753,"anchor":785,"singlePageAnchor":785,"docTitle":21,"url":786},"26.8. Configuring a static route by using nmstatectl","proc_configuring-a-static-route-by-using-nmstatectl_configuring-static-routes","#proc_configuring-a-static-route-by-using-nmstatectl_configuring-static-routes",{"title":788,"visible":17,"weight":109,"urlFragment":753,"anchor":789,"singlePageAnchor":789,"docTitle":21,"url":790},"26.9. Configuring a static route by using the network RHEL system role","proc_configuring-a-static-route-by-using-the-network-rhel-system-role_configuring-static-routes","#proc_configuring-a-static-route-by-using-the-network-rhel-system-role_configuring-static-routes","#configuring-static-routes_configuring-and-managing-networking",{"title":793,"visible":17,"weight":794,"urlFragment":795,"anchor":20,"singlePageAnchor":795,"sections":796,"docTitle":21,"url":805},"27. Configuring policy-based routing to define alternative routes",29,"configuring-policy-based-routing-to-define-alternative-routes_configuring-and-managing-networking",[797,801],{"title":798,"visible":17,"weight":18,"urlFragment":795,"anchor":799,"singlePageAnchor":799,"docTitle":21,"url":800},"27.1. Routing traffic from a specific subnet to a different default gateway by using nmcli","routing-traffic-from-a-specific-subnet-to-a-different-default-gateway-by-using-nmcli_configuring-policy-based-routing-to-define-alternative-routes","#routing-traffic-from-a-specific-subnet-to-a-different-default-gateway-by-using-nmcli_configuring-policy-based-routing-to-define-alternative-routes",{"title":802,"visible":17,"weight":25,"urlFragment":795,"anchor":803,"singlePageAnchor":803,"docTitle":21,"url":804},"27.2. Routing traffic from a specific subnet to a different default gateway by using the network RHEL system role","proc_routing-traffic-from-a-specific-subnet-to-a-different-default-gateway-by-using-the-network-rhel-system-role_configuring-policy-based-routing-to-define-alternative-routes","#proc_routing-traffic-from-a-specific-subnet-to-a-different-default-gateway-by-using-the-network-rhel-system-role_configuring-policy-based-routing-to-define-alternative-routes","#configuring-policy-based-routing-to-define-alternative-routes_configuring-and-managing-networking",{"title":807,"visible":17,"weight":808,"urlFragment":809,"anchor":20,"singlePageAnchor":809,"sections":810,"docTitle":21,"url":823},"28. Reusing the same IP address on different interfaces",30,"reusing-the-same-ip-address-on-different-interfaces_configuring-and-managing-networking",[811,815,819],{"title":812,"visible":17,"weight":18,"urlFragment":809,"anchor":813,"singlePageAnchor":813,"docTitle":21,"url":814},"28.1. Permanently reusing the same IP address on different interfaces","permanently-reusing-the-same-ip-address-on-different-interfaces_reusing-the-same-ip-address-on-different-interfaces","#permanently-reusing-the-same-ip-address-on-different-interfaces_reusing-the-same-ip-address-on-different-interfaces",{"title":816,"visible":17,"weight":25,"urlFragment":809,"anchor":817,"singlePageAnchor":817,"docTitle":21,"url":818},"28.2. Temporarily reusing the same IP address on different interfaces","temporarily-reusing-the-same-ip-address-on-different-interfaces_reusing-the-same-ip-address-on-different-interfaces","#temporarily-reusing-the-same-ip-address-on-different-interfaces_reusing-the-same-ip-address-on-different-interfaces",{"title":820,"visible":17,"weight":30,"urlFragment":809,"anchor":821,"singlePageAnchor":821,"docTitle":21,"url":822},"28.3. Additional resources","additional_resources","#additional_resources","#reusing-the-same-ip-address-on-different-interfaces_configuring-and-managing-networking",{"title":825,"visible":17,"weight":826,"urlFragment":827,"anchor":20,"singlePageAnchor":827,"sections":828,"docTitle":21,"url":837},"29. Starting a service within an isolated VRF network",31,"assembly_starting-a-service-within-an-isolated-vrf-network_configuring-and-managing-networking",[829,833],{"title":830,"visible":17,"weight":18,"urlFragment":827,"anchor":831,"singlePageAnchor":831,"docTitle":21,"url":832},"29.1. Configuring a VRF device","proc_configuring-a-vrf-device_assembly_starting-a-service-within-an-isolated-vrf-network","#proc_configuring-a-vrf-device_assembly_starting-a-service-within-an-isolated-vrf-network",{"title":834,"visible":17,"weight":25,"urlFragment":827,"anchor":835,"singlePageAnchor":835,"docTitle":21,"url":836},"29.2. Starting a service within an isolated VRF network","proc_starting-a-service-within-an-isolated-vrf-network_assembly_starting-a-service-within-an-isolated-vrf-network","#proc_starting-a-service-within-an-isolated-vrf-network_assembly_starting-a-service-within-an-isolated-vrf-network","#assembly_starting-a-service-within-an-isolated-vrf-network_configuring-and-managing-networking",{"title":839,"visible":17,"weight":840,"urlFragment":841,"anchor":20,"singlePageAnchor":841,"sections":842,"docTitle":21,"url":871},"30. Configuring ethtool settings in NetworkManager connection profiles",32,"configuring-ethtool-settings-in-networkmanager-connection-profiles_configuring-and-managing-networking",[843,847,851,855,859,863,867],{"title":844,"visible":17,"weight":18,"urlFragment":841,"anchor":845,"singlePageAnchor":845,"docTitle":21,"url":846},"30.1. Configuring an ethtool offload feature by using nmcli","configuring-an-ethtool-offload-feature-by-using-nmcli_configuring-ethtool-settings-in-networkmanager-connection-profiles","#configuring-an-ethtool-offload-feature-by-using-nmcli_configuring-ethtool-settings-in-networkmanager-connection-profiles",{"title":848,"visible":17,"weight":25,"urlFragment":841,"anchor":849,"singlePageAnchor":849,"docTitle":21,"url":850},"30.2. Configuring an ethtool offload feature by using the network RHEL system role","proc_configuring-an-ethtool-offload-feature-by-using-the-network-rhel-system-role_configuring-ethtool-settings-in-networkmanager-connection-profiles","#proc_configuring-an-ethtool-offload-feature-by-using-the-network-rhel-system-role_configuring-ethtool-settings-in-networkmanager-connection-profiles",{"title":852,"visible":17,"weight":30,"urlFragment":841,"anchor":853,"singlePageAnchor":853,"docTitle":21,"url":854},"30.3. Configuring an ethtool coalesce settings by using nmcli","proc_configuring-an-ethtool-coalesce-settings-by-using-nmcli_configuring-ethtool-settings-in-networkmanager-connection-profiles","#proc_configuring-an-ethtool-coalesce-settings-by-using-nmcli_configuring-ethtool-settings-in-networkmanager-connection-profiles",{"title":856,"visible":17,"weight":47,"urlFragment":841,"anchor":857,"singlePageAnchor":857,"docTitle":21,"url":858},"30.4. Configuring an ethtool coalesce settings by using the network RHEL system role","proc_configuring-an-ethtool-coalesce-settings-by-using-the-network-rhel-system-role_configuring-ethtool-settings-in-networkmanager-connection-profiles","#proc_configuring-an-ethtool-coalesce-settings-by-using-the-network-rhel-system-role_configuring-ethtool-settings-in-networkmanager-connection-profiles",{"title":860,"visible":17,"weight":52,"urlFragment":841,"anchor":861,"singlePageAnchor":861,"docTitle":21,"url":862},"30.5. Increasing the ring buffer size to reduce a high packet drop rate by using nmcli","increasing-the-ring-buffers-to-reduce-a-high-packet-drop-rate_configuring-ethtool-settings-in-networkmanager-connection-profiles","#increasing-the-ring-buffers-to-reduce-a-high-packet-drop-rate_configuring-ethtool-settings-in-networkmanager-connection-profiles",{"title":864,"visible":17,"weight":57,"urlFragment":841,"anchor":865,"singlePageAnchor":865,"docTitle":21,"url":866},"30.6. Increasing the ring buffer size to reduce a high packet drop rate by using the network RHEL system role","proc_increasing-the-ring-buffer-size-to-reduce-a-high-packet-drop-rate-using-the-network-rhel-system-role_configuring-ethtool-settings-in-networkmanager-connection-profiles","#proc_increasing-the-ring-buffer-size-to-reduce-a-high-packet-drop-rate-using-the-network-rhel-system-role_configuring-ethtool-settings-in-networkmanager-connection-profiles",{"title":868,"visible":17,"weight":62,"urlFragment":841,"anchor":869,"singlePageAnchor":869,"docTitle":21,"url":870},"30.7. Configuring an ethtool channels settings by using nmcli","configuring-an-ethtool-channels-settings-by-using-nmcli_configuring-ethtool-settings-in-networkmanager-connection-profiles","#configuring-an-ethtool-channels-settings-by-using-nmcli_configuring-ethtool-settings-in-networkmanager-connection-profiles","#configuring-ethtool-settings-in-networkmanager-connection-profiles_configuring-and-managing-networking",{"title":873,"visible":17,"weight":874,"urlFragment":875,"anchor":20,"singlePageAnchor":875,"sections":876,"docTitle":21,"url":897},"31. Introduction to NetworkManager Debugging",33,"introduction-to-networkmanager-debugging_configuring-and-managing-networking",[877,881,885,889,893],{"title":878,"visible":17,"weight":18,"urlFragment":875,"anchor":879,"singlePageAnchor":879,"docTitle":21,"url":880},"31.1. Introduction to NetworkManager reapply method","introduction-to-networkmanager-reapply-method_introduction-to-networkmanager-debugging","#introduction-to-networkmanager-reapply-method_introduction-to-networkmanager-debugging",{"title":882,"visible":17,"weight":25,"urlFragment":875,"anchor":883,"singlePageAnchor":883,"docTitle":21,"url":884},"31.2. Setting the NetworkManager log level","setting-the-networkmanager-log-level_introduction-to-networkmanager-debugging","#setting-the-networkmanager-log-level_introduction-to-networkmanager-debugging",{"title":886,"visible":17,"weight":30,"urlFragment":875,"anchor":887,"singlePageAnchor":887,"docTitle":21,"url":888},"31.3. Temporarily setting log levels at run time using nmcli","temporarily-setting-log-levels-at-run-time-using-nmcli_introduction-to-networkmanager-debugging","#temporarily-setting-log-levels-at-run-time-using-nmcli_introduction-to-networkmanager-debugging",{"title":890,"visible":17,"weight":47,"urlFragment":875,"anchor":891,"singlePageAnchor":891,"docTitle":21,"url":892},"31.4. Viewing NetworkManager logs","viewing-networkmanager-logs_introduction-to-networkmanager-debugging","#viewing-networkmanager-logs_introduction-to-networkmanager-debugging",{"title":894,"visible":17,"weight":52,"urlFragment":875,"anchor":895,"singlePageAnchor":895,"docTitle":21,"url":896},"31.5. Debugging levels and domains","debugging-levels-and-domains_introduction-to-networkmanager-debugging","#debugging-levels-and-domains_introduction-to-networkmanager-debugging","#introduction-to-networkmanager-debugging_configuring-and-managing-networking",{"title":899,"visible":17,"weight":900,"urlFragment":901,"anchor":20,"singlePageAnchor":901,"sections":902,"docTitle":21,"url":907},"32. Using LLDP to debug network configuration problems",34,"assembly_using-lldp-to-debug-network-configuration-problems_configuring-and-managing-networking",[903],{"title":904,"visible":17,"weight":18,"urlFragment":901,"anchor":905,"singlePageAnchor":905,"docTitle":21,"url":906},"32.1. Debugging an incorrect VLAN configuration using LLDP information","proc_debugging-an-incorrect-vlan-configuration-using-lldp-information_assembly_using-lldp-to-debug-network-configuration-problems","#proc_debugging-an-incorrect-vlan-configuration-using-lldp-information_assembly_using-lldp-to-debug-network-configuration-problems","#assembly_using-lldp-to-debug-network-configuration-problems_configuring-and-managing-networking",{"title":909,"visible":17,"weight":910,"urlFragment":911,"anchor":20,"singlePageAnchor":911,"sections":912,"docTitle":21,"url":945},"33. Linux traffic control",35,"linux-traffic-control_configuring-and-managing-networking",[913,917,921,925,929,933,937,941],{"title":914,"visible":17,"weight":18,"urlFragment":911,"anchor":915,"singlePageAnchor":915,"docTitle":21,"url":916},"33.1. Overview of queuing disciplines","overview-of-queuing-disciplines_linux-traffic-control","#overview-of-queuing-disciplines_linux-traffic-control",{"title":918,"visible":17,"weight":25,"urlFragment":911,"anchor":919,"singlePageAnchor":919,"docTitle":21,"url":920},"33.2. Introduction to connection tracking","introduction-to-connection-tracking_linux-traffic-control","#introduction-to-connection-tracking_linux-traffic-control",{"title":922,"visible":17,"weight":30,"urlFragment":911,"anchor":923,"singlePageAnchor":923,"docTitle":21,"url":924},"33.3. Inspecting qdiscs of a network interface using the tc utility","inspecting-qdisc-of-a-network-interface-using-the-tc-utility_linux-traffic-control","#inspecting-qdisc-of-a-network-interface-using-the-tc-utility_linux-traffic-control",{"title":926,"visible":17,"weight":47,"urlFragment":911,"anchor":927,"singlePageAnchor":927,"docTitle":21,"url":928},"33.4. Updating the default qdisc","updating-the-default-qdisc_linux-traffic-control","#updating-the-default-qdisc_linux-traffic-control",{"title":930,"visible":17,"weight":52,"urlFragment":911,"anchor":931,"singlePageAnchor":931,"docTitle":21,"url":932},"33.5. Temporarily setting the current qdisc of a network interface using the tc utility","temporarily-setting-the-current-qdisc-of-a-network-interface-using-the-tc-utility_linux-traffic-control","#temporarily-setting-the-current-qdisc-of-a-network-interface-using-the-tc-utility_linux-traffic-control",{"title":934,"visible":17,"weight":57,"urlFragment":911,"anchor":935,"singlePageAnchor":935,"docTitle":21,"url":936},"33.6. Permanently setting the current qdisc of a network interface using NetworkManager","proc_permanently-setting-the-current-qdisc-of-a-network-interface-using-networkmanager_linux-traffic-control","#proc_permanently-setting-the-current-qdisc-of-a-network-interface-using-networkmanager_linux-traffic-control",{"title":938,"visible":17,"weight":62,"urlFragment":911,"anchor":939,"singlePageAnchor":939,"docTitle":21,"url":940},"33.7. Configuring the rate limiting of packets by using the tc-ctinfo utility","configuring-the-rate-limiting-of-packets-by-using-the-tc-ctinfo-utility_linux-traffic-control","#configuring-the-rate-limiting-of-packets-by-using-the-tc-ctinfo-utility_linux-traffic-control",{"title":942,"visible":17,"weight":67,"urlFragment":911,"anchor":943,"singlePageAnchor":943,"docTitle":21,"url":944},"33.8. Available qdiscs in RHEL","available-qdiscs-in-rhel_linux-traffic-control","#available-qdiscs-in-rhel_linux-traffic-control","#linux-traffic-control_configuring-and-managing-networking",{"title":947,"visible":17,"weight":948,"urlFragment":949,"anchor":20,"singlePageAnchor":949,"sections":950,"docTitle":21,"url":967},"34. Authenticating a RHEL client to the network by using the 802.1X standard with a certificate stored on the file system",36,"authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system_configuring-and-managing-networking",[951,955,959,963],{"title":952,"visible":17,"weight":18,"urlFragment":949,"anchor":953,"singlePageAnchor":953,"docTitle":21,"url":954},"34.1. Configuring 802.1X network authentication on an existing Ethernet connection by using nmcli","configuring-802-1x-network-authentication-on-an-existing-ethernet-connection-by-using-nmcli_authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system","#configuring-802-1x-network-authentication-on-an-existing-ethernet-connection-by-using-nmcli_authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system",{"title":956,"visible":17,"weight":25,"urlFragment":949,"anchor":957,"singlePageAnchor":957,"docTitle":21,"url":958},"34.2. Configuring a static Ethernet connection with 802.1X network authentication by using nmstatectl","proc_configuring-a-static-ethernet-connection-with-802-1x-network-authentication-by-using-nmstatectl_authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system","#proc_configuring-a-static-ethernet-connection-with-802-1x-network-authentication-by-using-nmstatectl_authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system",{"title":960,"visible":17,"weight":30,"urlFragment":949,"anchor":961,"singlePageAnchor":961,"docTitle":21,"url":962},"34.3. Configuring a static Ethernet connection with 802.1X network authentication by using the network RHEL system role","configuring-a-static-ethernet-connection-with-802-1x-network-authentication-by-using-the-network-rhel-system-role_authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system","#configuring-a-static-ethernet-connection-with-802-1x-network-authentication-by-using-the-network-rhel-system-role_authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system",{"title":964,"visible":17,"weight":47,"urlFragment":949,"anchor":965,"singlePageAnchor":965,"docTitle":21,"url":966},"34.4. Configuring a wifi connection with 802.1X network authentication by using the network RHEL system role","proc_configuring-a-wifi-connection-with-802-1x-network-authentication-by-using-the-network-rhel-system-role_authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system","#proc_configuring-a-wifi-connection-with-802-1x-network-authentication-by-using-the-network-rhel-system-role_authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system","#authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system_configuring-and-managing-networking",{"title":969,"visible":17,"weight":970,"urlFragment":971,"anchor":20,"singlePageAnchor":971,"sections":972,"docTitle":21,"url":997},"35. Setting up an 802.1x network authentication service for LAN clients by using hostapd with FreeRADIUS backend",37,"assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend_configuring-and-managing-networking",[973,977,981,985,989,993],{"title":974,"visible":17,"weight":18,"urlFragment":971,"anchor":975,"singlePageAnchor":975,"docTitle":21,"url":976},"35.1. Prerequisites","prerequisites","#prerequisites",{"title":978,"visible":17,"weight":25,"urlFragment":971,"anchor":979,"singlePageAnchor":979,"docTitle":21,"url":980},"35.2. Setting up the bridge on the authenticator","proc_setting-up-the-bridge-on-the-authenticator_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend","#proc_setting-up-the-bridge-on-the-authenticator_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend",{"title":982,"visible":17,"weight":30,"urlFragment":971,"anchor":983,"singlePageAnchor":983,"docTitle":21,"url":984},"35.3. Configuring FreeRADIUS to authenticate network clients securely by using EAP","proc_configuring-freeradius-to-authenticate-network-clients-securely-using-eap_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend","#proc_configuring-freeradius-to-authenticate-network-clients-securely-using-eap_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend",{"title":986,"visible":17,"weight":47,"urlFragment":971,"anchor":987,"singlePageAnchor":987,"docTitle":21,"url":988},"35.4. Configuring hostapd as an authenticator in a wired network","proc_configuring-hostapd-as-an-authenticator-in-a-wired-network_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend","#proc_configuring-hostapd-as-an-authenticator-in-a-wired-network_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend",{"title":990,"visible":17,"weight":52,"urlFragment":971,"anchor":991,"singlePageAnchor":991,"docTitle":21,"url":992},"35.5. Testing EAP-TTLS authentication against a FreeRADIUS server or authenticator","proc_testing-eap-ttls-authentication-against-a-freeradius-server-or-authenticator_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend","#proc_testing-eap-ttls-authentication-against-a-freeradius-server-or-authenticator_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend",{"title":994,"visible":17,"weight":57,"urlFragment":971,"anchor":995,"singlePageAnchor":995,"docTitle":21,"url":996},"35.6. Blocking and allowing traffic based on hostapd authentication events","proc_blocking-and-allowing-traffic-based-on-hostapd-authentication-events_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend","#proc_blocking-and-allowing-traffic-based-on-hostapd-authentication-events_assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend","#assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend_configuring-and-managing-networking",{"title":999,"visible":17,"weight":1000,"urlFragment":1001,"anchor":20,"singlePageAnchor":1001,"sections":1002,"docTitle":21,"url":1027},"36. Getting started with Multipath TCP",38,"getting-started-with-multipath-tcp_configuring-and-managing-networking",[1003,1007,1011,1015,1019,1023],{"title":1004,"visible":17,"weight":18,"urlFragment":1001,"anchor":1005,"singlePageAnchor":1005,"docTitle":21,"url":1006},"36.1. Understanding MPTCP","understanding-mptcp_getting-started-with-multipath-tcp","#understanding-mptcp_getting-started-with-multipath-tcp",{"title":1008,"visible":17,"weight":25,"urlFragment":1001,"anchor":1009,"singlePageAnchor":1009,"docTitle":21,"url":1010},"36.2. Preparing RHEL to enable MPTCP support","preparing-rhel-to-enable-mptcp-support_getting-started-with-multipath-tcp","#preparing-rhel-to-enable-mptcp-support_getting-started-with-multipath-tcp",{"title":1012,"visible":17,"weight":30,"urlFragment":1001,"anchor":1013,"singlePageAnchor":1013,"docTitle":21,"url":1014},"36.3. Using iproute2 to temporarily configure and enable multiple paths for MPTCP applications","using-iproute2-to-temporarily-configure-and-enable-multiple-paths-for-mptcp-applications_getting-started-with-multipath-tcp","#using-iproute2-to-temporarily-configure-and-enable-multiple-paths-for-mptcp-applications_getting-started-with-multipath-tcp",{"title":1016,"visible":17,"weight":47,"urlFragment":1001,"anchor":1017,"singlePageAnchor":1017,"docTitle":21,"url":1018},"36.4. Permanently configuring multiple paths for MPTCP applications","proc_permanently-configuring-multiple-paths-for-mptcp-applications_getting-started-with-multipath-tcp","#proc_permanently-configuring-multiple-paths-for-mptcp-applications_getting-started-with-multipath-tcp",{"title":1020,"visible":17,"weight":52,"urlFragment":1001,"anchor":1021,"singlePageAnchor":1021,"docTitle":21,"url":1022},"36.5. Monitoring MPTCP sub-flows","proc_monitoring-mptcp-sub-flows_getting-started-with-multipath-tcp","#proc_monitoring-mptcp-sub-flows_getting-started-with-multipath-tcp",{"title":1024,"visible":17,"weight":57,"urlFragment":1001,"anchor":1025,"singlePageAnchor":1025,"docTitle":21,"url":1026},"36.6. Disabling Multipath TCP in the kernel","disabling-multipath-tcp-in-the-kernel_getting-started-with-multipath-tcp","#disabling-multipath-tcp-in-the-kernel_getting-started-with-multipath-tcp","#getting-started-with-multipath-tcp_configuring-and-managing-networking",{"title":1029,"visible":17,"weight":1030,"urlFragment":1031,"anchor":20,"singlePageAnchor":1031,"sections":1032,"docTitle":21,"url":1045},"37. Managing the mptcpd service",39,"assembly_managing-the-mptcpd-service_configuring-and-managing-networking",[1033,1037,1041],{"title":1034,"visible":17,"weight":18,"urlFragment":1031,"anchor":1035,"singlePageAnchor":1035,"docTitle":21,"url":1036},"37.1. Configuring mptcpd","proc_configuring-mptcpd_assembly_managing-the-mptcpd-service","#proc_configuring-mptcpd_assembly_managing-the-mptcpd-service",{"title":1038,"visible":17,"weight":25,"urlFragment":1031,"anchor":1039,"singlePageAnchor":1039,"docTitle":21,"url":1040},"37.2. Managing applications with mptcpize tool","proc_managing-applications-with-mptcpize-tool_assembly_managing-the-mptcpd-service","#proc_managing-applications-with-mptcpize-tool_assembly_managing-the-mptcpd-service",{"title":1042,"visible":17,"weight":30,"urlFragment":1031,"anchor":1043,"singlePageAnchor":1043,"docTitle":21,"url":1044},"37.3. Enabling MPTCP sockets for a services using the mptcpize utility","proc_enabling-mptcp-sockets-for-a-services-using-the-mptcpize-utility_assembly_managing-the-mptcpd-service","#proc_enabling-mptcp-sockets-for-a-services-using-the-mptcpize-utility_assembly_managing-the-mptcpd-service","#assembly_managing-the-mptcpd-service_configuring-and-managing-networking",{"title":1047,"visible":17,"weight":1048,"urlFragment":1049,"anchor":20,"singlePageAnchor":1049,"sections":1050,"docTitle":21,"url":1071},"38. NetworkManager connection profiles in keyfile format",40,"assembly_networkmanager-connection-profiles-in-keyfile-format_configuring-and-managing-networking",[1051,1055,1059,1063,1067],{"title":1052,"visible":17,"weight":18,"urlFragment":1049,"anchor":1053,"singlePageAnchor":1053,"docTitle":21,"url":1054},"38.1. The keyfile format of NetworkManager profiles","con_the-keyfile-format-of-networkmanager-profiles_assembly_networkmanager-connection-profiles-in-keyfile-format","#con_the-keyfile-format-of-networkmanager-profiles_assembly_networkmanager-connection-profiles-in-keyfile-format",{"title":1056,"visible":17,"weight":25,"urlFragment":1049,"anchor":1057,"singlePageAnchor":1057,"docTitle":21,"url":1058},"38.2. Using nmcli to create keyfile connection profiles in offline mode","proc_using-nmcli-to-create-keyfile-connection-profiles-in-offline-mode_assembly_networkmanager-connection-profiles-in-keyfile-format","#proc_using-nmcli-to-create-keyfile-connection-profiles-in-offline-mode_assembly_networkmanager-connection-profiles-in-keyfile-format",{"title":1060,"visible":17,"weight":30,"urlFragment":1049,"anchor":1061,"singlePageAnchor":1061,"docTitle":21,"url":1062},"38.3. Manually creating a NetworkManager profile in keyfile format","proc_manually-creating-a-networkmanager-profile-in-keyfile-format_assembly_networkmanager-connection-profiles-in-keyfile-format","#proc_manually-creating-a-networkmanager-profile-in-keyfile-format_assembly_networkmanager-connection-profiles-in-keyfile-format",{"title":1064,"visible":17,"weight":47,"urlFragment":1049,"anchor":1065,"singlePageAnchor":1065,"docTitle":21,"url":1066},"38.4. The differences in interface renaming with profiles in ifcfg and keyfile format","the-differences-in-interface-renaming-with-profiles-in-ifcfg-and-keyfile-format_assembly_networkmanager-connection-profiles-in-keyfile-format","#the-differences-in-interface-renaming-with-profiles-in-ifcfg-and-keyfile-format_assembly_networkmanager-connection-profiles-in-keyfile-format",{"title":1068,"visible":17,"weight":52,"urlFragment":1049,"anchor":1069,"singlePageAnchor":1069,"docTitle":21,"url":1070},"38.5. Migrating NetworkManager profiles from ifcfg to keyfile format","proc_migrating-networkmanager-profiles-from-ifcfg-to-keyfile-format_assembly_networkmanager-connection-profiles-in-keyfile-format","#proc_migrating-networkmanager-profiles-from-ifcfg-to-keyfile-format_assembly_networkmanager-connection-profiles-in-keyfile-format","#assembly_networkmanager-connection-profiles-in-keyfile-format_configuring-and-managing-networking",{"title":1073,"visible":17,"weight":1074,"urlFragment":1075,"anchor":20,"singlePageAnchor":1075,"sections":1076,"docTitle":21,"url":1089},"39. Systemd network targets and services",41,"systemd-network-targets-and-services_configuring-and-managing-networking",[1077,1081,1085],{"title":1078,"visible":17,"weight":18,"urlFragment":1075,"anchor":1079,"singlePageAnchor":1079,"docTitle":21,"url":1080},"39.1. Differences between the network and network-online systemd target","differences-between-the-network-and-network-online-systemd-target_systemd-network-targets-and-services","#differences-between-the-network-and-network-online-systemd-target_systemd-network-targets-and-services",{"title":1082,"visible":17,"weight":25,"urlFragment":1075,"anchor":1083,"singlePageAnchor":1083,"docTitle":21,"url":1084},"39.2. Overview of NetworkManager-wait-online","overview-of-networkmanager-wait-online_systemd-network-targets-and-services","#overview-of-networkmanager-wait-online_systemd-network-targets-and-services",{"title":1086,"visible":17,"weight":30,"urlFragment":1075,"anchor":1087,"singlePageAnchor":1087,"docTitle":21,"url":1088},"39.3. Configuring a systemd service to start after the network has been started","configuring-a-systemd-service-to-start-after-the-network-has-been-started_systemd-network-targets-and-services","#configuring-a-systemd-service-to-start-after-the-network-has-been-started_systemd-network-targets-and-services","#systemd-network-targets-and-services_configuring-and-managing-networking",{"title":1091,"visible":17,"weight":1092,"urlFragment":1093,"anchor":20,"singlePageAnchor":1093,"sections":1094,"docTitle":21,"url":1111},"40. Introduction to Nmstate",42,"assembly_introduction-to-nmstate_configuring-and-managing-networking",[1095,1099,1103,1107],{"title":1096,"visible":17,"weight":18,"urlFragment":1093,"anchor":1097,"singlePageAnchor":1097,"docTitle":21,"url":1098},"40.1. Using the libnmstate library in a Python application","con_using-the-libnmstate-library-in-a-python-application_assembly_introduction-to-nmstate","#con_using-the-libnmstate-library-in-a-python-application_assembly_introduction-to-nmstate",{"title":1100,"visible":17,"weight":25,"urlFragment":1093,"anchor":1101,"singlePageAnchor":1101,"docTitle":21,"url":1102},"40.2. Updating the current network configuration by using nmstatectl","proc_updating-the-current-network-configuration-using-nmstatectl_assembly_introduction-to-nmstate","#proc_updating-the-current-network-configuration-using-nmstatectl_assembly_introduction-to-nmstate",{"title":1104,"visible":17,"weight":30,"urlFragment":1093,"anchor":1105,"singlePageAnchor":1105,"docTitle":21,"url":1106},"40.3. The nmstate systemd service","the-nmstate-systemd-service_assembly_introduction-to-nmstate","#the-nmstate-systemd-service_assembly_introduction-to-nmstate",{"title":1108,"visible":17,"weight":47,"urlFragment":1093,"anchor":1109,"singlePageAnchor":1109,"docTitle":21,"url":1110},"40.4. Network states for the network RHEL system role","ref_network-states-for-the-network-rhel-system-roles_assembly_introduction-to-nmstate","#ref_network-states-for-the-network-rhel-system-roles_assembly_introduction-to-nmstate","#assembly_introduction-to-nmstate_configuring-and-managing-networking",{"title":1113,"visible":17,"weight":1114,"urlFragment":1115,"anchor":20,"singlePageAnchor":1115,"sections":1116,"docTitle":21,"url":1125},"41. Capturing network packets",43,"capturing-network-packets_configuring-and-managing-networking",[1117,1121],{"title":1118,"visible":17,"weight":18,"urlFragment":1115,"anchor":1119,"singlePageAnchor":1119,"docTitle":21,"url":1120},"41.1. Using xdpdump to capture network packets including packets dropped by XDP programs","using-xdpdump-to-capture-network-packets-including-packets-dropped-by-xdp-programs_capturing-network-packets","#using-xdpdump-to-capture-network-packets-including-packets-dropped-by-xdp-programs_capturing-network-packets",{"title":1122,"visible":17,"weight":25,"urlFragment":1115,"anchor":1123,"singlePageAnchor":1123,"docTitle":21,"url":1124},"41.2. Additional resources","additional_resources_2","#additional_resources_2","#capturing-network-packets_configuring-and-managing-networking",{"title":1127,"visible":17,"weight":1128,"urlFragment":1129,"anchor":20,"singlePageAnchor":1129,"sections":1130,"docTitle":21,"url":1139},"42. Understanding the eBPF networking features in RHEL 9",44,"assembly_understanding-the-ebpf-features-in-rhel-9_configuring-and-managing-networking",[1131,1135],{"title":1132,"visible":17,"weight":18,"urlFragment":1129,"anchor":1133,"singlePageAnchor":1133,"docTitle":21,"url":1134},"42.1. Overview of networking eBPF features in RHEL 9","ref_overview-of-networking-ebpf-features-in-rhel-9_assembly_understanding-the-ebpf-features-in-rhel-9","#ref_overview-of-networking-ebpf-features-in-rhel-9_assembly_understanding-the-ebpf-features-in-rhel-9",{"title":1136,"visible":17,"weight":25,"urlFragment":1129,"anchor":1137,"singlePageAnchor":1137,"docTitle":21,"url":1138},"42.2. Overview of XDP features in RHEL 9 by network cards","ref_overview-of-xdp-features-by-network-cards_assembly_understanding-the-ebpf-features-in-rhel-9","#ref_overview-of-xdp-features-by-network-cards_assembly_understanding-the-ebpf-features-in-rhel-9","#assembly_understanding-the-ebpf-features-in-rhel-9_configuring-and-managing-networking",{"title":1141,"visible":17,"weight":1142,"urlFragment":1143,"anchor":20,"singlePageAnchor":1143,"sections":1144,"docTitle":21,"url":1201},"43. Network tracing using the BPF compiler collection",45,"network-tracing-using-the-bpf-compiler-collection_configuring-and-managing-networking",[1145,1149,1153,1157,1161,1165,1169,1173,1177,1181,1185,1189,1193,1197],{"title":1146,"visible":17,"weight":18,"urlFragment":1143,"anchor":1147,"singlePageAnchor":1147,"docTitle":21,"url":1148},"43.1. Installing the bcc-tools package","installing-the-bcc-tools-package_network-tracing-using-the-bpf-compiler-collection","#installing-the-bcc-tools-package_network-tracing-using-the-bpf-compiler-collection",{"title":1150,"visible":17,"weight":25,"urlFragment":1143,"anchor":1151,"singlePageAnchor":1151,"docTitle":21,"url":1152},"43.2. Displaying TCP connections added to the Kernel’s accept queue","displaying-tcp-connections-added-to-the-kernels-accept-queue_network-tracing-using-the-bpf-compiler-collection","#displaying-tcp-connections-added-to-the-kernels-accept-queue_network-tracing-using-the-bpf-compiler-collection",{"title":1154,"visible":17,"weight":30,"urlFragment":1143,"anchor":1155,"singlePageAnchor":1155,"docTitle":21,"url":1156},"43.3. Tracing outgoing TCP connection attempts","tracing-outgoing-tcp-connection-attempts_network-tracing-using-the-bpf-compiler-collection","#tracing-outgoing-tcp-connection-attempts_network-tracing-using-the-bpf-compiler-collection",{"title":1158,"visible":17,"weight":47,"urlFragment":1143,"anchor":1159,"singlePageAnchor":1159,"docTitle":21,"url":1160},"43.4. Measuring the latency of outgoing TCP connections","measuring-the-latency-of-outgoing-tcp-connections_network-tracing-using-the-bpf-compiler-collection","#measuring-the-latency-of-outgoing-tcp-connections_network-tracing-using-the-bpf-compiler-collection",{"title":1162,"visible":17,"weight":52,"urlFragment":1143,"anchor":1163,"singlePageAnchor":1163,"docTitle":21,"url":1164},"43.5. Displaying details about TCP packets and segments that were dropped by the kernel","displaying-details-about-tcp-packets-and-segments-that-were-dropped-by-the-kernel_network-tracing-using-the-bpf-compiler-collection","#displaying-details-about-tcp-packets-and-segments-that-were-dropped-by-the-kernel_network-tracing-using-the-bpf-compiler-collection",{"title":1166,"visible":17,"weight":57,"urlFragment":1143,"anchor":1167,"singlePageAnchor":1167,"docTitle":21,"url":1168},"43.6. Tracing TCP sessions","tracing-tcp-sessions_network-tracing-using-the-bpf-compiler-collection","#tracing-tcp-sessions_network-tracing-using-the-bpf-compiler-collection",{"title":1170,"visible":17,"weight":62,"urlFragment":1143,"anchor":1171,"singlePageAnchor":1171,"docTitle":21,"url":1172},"43.7. Tracing TCP retransmissions","tracing-tcp-retransmissions_network-tracing-using-the-bpf-compiler-collection","#tracing-tcp-retransmissions_network-tracing-using-the-bpf-compiler-collection",{"title":1174,"visible":17,"weight":67,"urlFragment":1143,"anchor":1175,"singlePageAnchor":1175,"docTitle":21,"url":1176},"43.8. Displaying TCP state change information","displaying-tcp-state-change-information_network-tracing-using-the-bpf-compiler-collection","#displaying-tcp-state-change-information_network-tracing-using-the-bpf-compiler-collection",{"title":1178,"visible":17,"weight":109,"urlFragment":1143,"anchor":1179,"singlePageAnchor":1179,"docTitle":21,"url":1180},"43.9. Summarizing and aggregating TCP traffic sent to specific subnets","summarizing-and-aggregating-tcp-traffic-sent-to-specific-subnets_network-tracing-using-the-bpf-compiler-collection","#summarizing-and-aggregating-tcp-traffic-sent-to-specific-subnets_network-tracing-using-the-bpf-compiler-collection",{"title":1182,"visible":17,"weight":114,"urlFragment":1143,"anchor":1183,"singlePageAnchor":1183,"docTitle":21,"url":1184},"43.10. Displaying the network throughput by IP address and port","displaying-the-network-throughput-by-ip-address-and-port_network-tracing-using-the-bpf-compiler-collection","#displaying-the-network-throughput-by-ip-address-and-port_network-tracing-using-the-bpf-compiler-collection",{"title":1186,"visible":17,"weight":119,"urlFragment":1143,"anchor":1187,"singlePageAnchor":1187,"docTitle":21,"url":1188},"43.11. Tracing established TCP connections","tracing-established-tcp-connections_network-tracing-using-the-bpf-compiler-collection","#tracing-established-tcp-connections_network-tracing-using-the-bpf-compiler-collection",{"title":1190,"visible":17,"weight":124,"urlFragment":1143,"anchor":1191,"singlePageAnchor":1191,"docTitle":21,"url":1192},"43.12. Tracing IPv4 and IPv6 listen attempts","tracing-ipv4-and-ipv6-listen-attempts_network-tracing-using-the-bpf-compiler-collection","#tracing-ipv4-and-ipv6-listen-attempts_network-tracing-using-the-bpf-compiler-collection",{"title":1194,"visible":17,"weight":129,"urlFragment":1143,"anchor":1195,"singlePageAnchor":1195,"docTitle":21,"url":1196},"43.13. Summarizing the service time of soft interrupts","summarizing-the-service-time-of-soft-interrupts_network-tracing-using-the-bpf-compiler-collection","#summarizing-the-service-time-of-soft-interrupts_network-tracing-using-the-bpf-compiler-collection",{"title":1198,"visible":17,"weight":340,"urlFragment":1143,"anchor":1199,"singlePageAnchor":1199,"docTitle":21,"url":1200},"43.14. Summarizing packets size and count on a network interface","summarizing-packets-size-and-count-on-a-network-interface_network-tracing-using-the-bpf-compiler-collection","#summarizing-packets-size-and-count-on-a-network-interface_network-tracing-using-the-bpf-compiler-collection","#network-tracing-using-the-bpf-compiler-collection_configuring-and-managing-networking",{"title":1203,"visible":17,"weight":1204,"urlFragment":1205,"anchor":20,"singlePageAnchor":1205,"sections":1206,"docTitle":21,"url":1219},"44. Configuring network devices to accept traffic from all MAC addresses",46,"assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses_configuring-and-managing-networking",[1207,1211,1215],{"title":1208,"visible":17,"weight":18,"urlFragment":1205,"anchor":1209,"singlePageAnchor":1209,"docTitle":21,"url":1210},"44.1. Temporarily configuring a device to accept all traffic","proc_temporarily-configuring-a-network-device-to-accept-all-traffic_assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses","#proc_temporarily-configuring-a-network-device-to-accept-all-traffic_assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses",{"title":1212,"visible":17,"weight":25,"urlFragment":1205,"anchor":1213,"singlePageAnchor":1213,"docTitle":21,"url":1214},"44.2. Permanently configuring a network device to accept all traffic using nmcli","proc_permanently-configuring-a-network-device-to-accept-all-traffic-using-nmcli_assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses","#proc_permanently-configuring-a-network-device-to-accept-all-traffic-using-nmcli_assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses",{"title":1216,"visible":17,"weight":30,"urlFragment":1205,"anchor":1217,"singlePageAnchor":1217,"docTitle":21,"url":1218},"44.3. Permanently configuring a network device to accept all traffic using nmstatectl","proc_permanently-configuring-a-network-device-to-accept-all-traffic-using-nmstatectl_assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses","#proc_permanently-configuring-a-network-device-to-accept-all-traffic-using-nmstatectl_assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses","#assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses_configuring-and-managing-networking",{"title":1221,"visible":17,"weight":1222,"urlFragment":1223,"anchor":20,"singlePageAnchor":1223,"docTitle":21,"url":1224},"45. Mirroring a network interface by using nmcli",47,"proc_mirroring-a-network-interface-by-using-nmcli_configuring-and-managing-networking","#proc_mirroring-a-network-interface-by-using-nmcli_configuring-and-managing-networking",{"title":1226,"visible":17,"weight":1227,"urlFragment":1228,"anchor":20,"singlePageAnchor":1228,"sections":1229,"docTitle":21,"url":1234},"46. Using nmstate-autoconf to automatically configure the network state using LLDP",48,"assembly_using-nmstate-autoconf-to-automatically-configure-the-network-state-using-lldp_configuring-and-managing-networking",[1230],{"title":1231,"visible":17,"weight":18,"urlFragment":1228,"anchor":1232,"singlePageAnchor":1232,"docTitle":21,"url":1233},"46.1. Using nmstate-autoconf to automatically configure network interfaces","proc_using-nmstate-autoconf-to-automatically-configure-network-interfaces_assembly_using-nmstate-autoconf-to-automatically-configure-the-network-state-using-lldp","#proc_using-nmstate-autoconf-to-automatically-configure-network-interfaces_assembly_using-nmstate-autoconf-to-automatically-configure-the-network-state-using-lldp","#assembly_using-nmstate-autoconf-to-automatically-configure-the-network-state-using-lldp_configuring-and-managing-networking",{"title":1236,"visible":17,"weight":1237,"urlFragment":1238,"anchor":20,"singlePageAnchor":1238,"sections":1239,"docTitle":21,"url":1244},"47. Configuring 802.3 link settings",49,"configuring-802-3-link-settings_configuring-and-managing-networking",[1240],{"title":1241,"visible":17,"weight":18,"urlFragment":1238,"anchor":1242,"singlePageAnchor":1242,"docTitle":21,"url":1243},"47.1. Configuring 802.3 link settings using the nmcli utility","proc_configuring-802-3-link-settings-using-the-nmcli-utility_configuring-802-3-link-settings","#proc_configuring-802-3-link-settings-using-the-nmcli-utility_configuring-802-3-link-settings","#configuring-802-3-link-settings_configuring-and-managing-networking",{"title":1246,"visible":17,"weight":1247,"urlFragment":1248,"anchor":20,"singlePageAnchor":1248,"sections":1249,"docTitle":21,"url":1258},"48. Getting started with DPDK",50,"getting-started-with-dpdk_configuring-and-managing-networking",[1250,1254],{"title":1251,"visible":17,"weight":18,"urlFragment":1248,"anchor":1252,"singlePageAnchor":1252,"docTitle":21,"url":1253},"48.1. Installing the dpdk package","installing-the-dpdk-package_getting-started-with-dpdk","#installing-the-dpdk-package_getting-started-with-dpdk",{"title":1255,"visible":17,"weight":25,"urlFragment":1248,"anchor":1256,"singlePageAnchor":1256,"docTitle":21,"url":1257},"48.2. Additional resources","additional_resources_3","#additional_resources_3","#getting-started-with-dpdk_configuring-and-managing-networking",{"title":1260,"visible":17,"weight":1261,"urlFragment":1262,"anchor":20,"singlePageAnchor":1262,"sections":1263,"docTitle":21,"url":1280},"49. Getting started with TIPC",51,"getting-started-with-tipc_configuring-and-managing-networking",[1264,1268,1272,1276],{"title":1265,"visible":17,"weight":18,"urlFragment":1262,"anchor":1266,"singlePageAnchor":1266,"docTitle":21,"url":1267},"49.1. The architecture of TIPC","the-architecture-of-tipc_getting-started-with-tipc","#the-architecture-of-tipc_getting-started-with-tipc",{"title":1269,"visible":17,"weight":25,"urlFragment":1262,"anchor":1270,"singlePageAnchor":1270,"docTitle":21,"url":1271},"49.2. Loading the tipc module when the system boots","loading-the-tipc-module-when-the-system-boots_getting-started-with-tipc","#loading-the-tipc-module-when-the-system-boots_getting-started-with-tipc",{"title":1273,"visible":17,"weight":30,"urlFragment":1262,"anchor":1274,"singlePageAnchor":1274,"docTitle":21,"url":1275},"49.3. Creating a TIPC network","creating-a-tipc-network_getting-started-with-tipc","#creating-a-tipc-network_getting-started-with-tipc",{"title":1277,"visible":17,"weight":47,"urlFragment":1262,"anchor":1278,"singlePageAnchor":1278,"docTitle":21,"url":1279},"49.4. Additional resources","additional_resources_4","#additional_resources_4","#getting-started-with-tipc_configuring-and-managing-networking",{"title":1282,"visible":17,"weight":1283,"urlFragment":1284,"anchor":20,"singlePageAnchor":1284,"sections":1285,"docTitle":21,"url":1294},"50. Automatically configuring network interfaces in public clouds using nm-cloud-setup",52,"automatically-configuring-network-interfaces-in-public-clouds-using-nm-cloud-setup_configuring-and-managing-networking",[1286,1290],{"title":1287,"visible":17,"weight":18,"urlFragment":1284,"anchor":1288,"singlePageAnchor":1288,"docTitle":21,"url":1289},"50.1. Configuring and pre-deploying nm-cloud-setup","proc_configuring-and-pre-deploying-nm-cloud-setup_automatically-configuring-network-interfaces-in-public-clouds-using-nm-cloud-setup","#proc_configuring-and-pre-deploying-nm-cloud-setup_automatically-configuring-network-interfaces-in-public-clouds-using-nm-cloud-setup",{"title":1291,"visible":17,"weight":25,"urlFragment":1284,"anchor":1292,"singlePageAnchor":1292,"docTitle":21,"url":1293},"50.2. Understanding the role of IMDSv2 and nm-cloud-setup in the RHEL EC2 instance","understanding-the-role-of-imdsv2-and-nm-cloud-setup-in-the-rhel-ec2-instance_automatically-configuring-network-interfaces-in-public-clouds-using-nm-cloud-setup","#understanding-the-role-of-imdsv2-and-nm-cloud-setup-in-the-rhel-ec2-instance_automatically-configuring-network-interfaces-in-public-clouds-using-nm-cloud-setup","#automatically-configuring-network-interfaces-in-public-clouds-using-nm-cloud-setup_configuring-and-managing-networking",{"title":1296,"visible":17,"weight":1297,"urlFragment":1298,"anchor":20,"singlePageAnchor":1299,"docTitle":21,"url":1300},"Legal Notice",53,"legal-notice","idm140053155520160","#idm140053155520160",[1302,1304,1307],{"text":11,"link":1303},"/documentation/red_hat_enterprise_linux/",{"text":1305,"link":1306},"9","/documentation/red_hat_enterprise_linux/9/",{"text":13},{"name":13,"translations":1309,"productVersion":1310,"singlePage":1311,"pdf":1314,"publishingStatus":1316},[5,6,7,8,9],{"name":1305},{"contentUrl":1312,"name":13,"new":1313,"url":21},"https://d2bhdhkti9t3uj.cloudfront.net/html/86b5e1e3-b7d8-4b1f-a9af-f0c257dab7c3/f6ed61126acd928e93675c5abef31478.html","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html-single/configuring_and_managing_networking/index",{"url":1315},"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/pdf/configuring_and_managing_networking/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_networking-en-US.pdf","PUBLISHED",[1318,1323,1326,1330,1334,1338,1342],{"name":1319,"new":1320,"url":1321,"urlAliases":1322},"10.0-Beta","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/10-beta","10-beta",[],{"name":1305,"new":1324,"url":1305,"urlAliases":1325},"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9",[],{"name":1327,"new":1328,"url":1327,"urlAliases":1329},"8","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/8",[],{"name":1331,"new":1332,"url":1331,"urlAliases":1333},"7","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/7",[],{"name":1335,"new":1336,"url":1335,"urlAliases":1337},"6","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/6",[],{"name":1339,"new":1340,"url":1339,"urlAliases":1341},"5","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/5",[],{"name":1343,"new":1344,"url":1343,"urlAliases":1345},"4","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/4",[],{"configuring_and_managing_networking/index":1347,"configuring_and_managing_networking/proc_providing-feedback-on-red-hat-documentation_configuring-and-managing-networking":1348,"configuring_and_managing_networking/consistent-network-interface-device-naming_configuring-and-managing-networking":1349,"configuring_and_managing_networking/configuring-an-ethernet-connection_configuring-and-managing-networking":1350,"configuring_and_managing_networking/configuring-network-bonding_configuring-and-managing-networking":1351,"configuring_and_managing_networking/configuring-network-teaming_configuring-and-managing-networking":1352,"configuring_and_managing_networking/configuring-vlan-tagging_configuring-and-managing-networking":1353,"configuring_and_managing_networking/configuring-a-network-bridge_configuring-and-managing-networking":1354,"configuring_and_managing_networking/configuring-a-vpn-connection_configuring-and-managing-networking":1355,"configuring_and_managing_networking/assembly_setting-up-a-wireguard-vpn_configuring-and-managing-networking":1356,"configuring_and_managing_networking/configuring-ip-tunnels_configuring-and-managing-networking":1357,"configuring_and_managing_networking/assembly_using-a-vxlan-to-create-a-virtual-layer-2-domain-for-vms_configuring-and-managing-networking":1358,"configuring_and_managing_networking/assembly_managing-wifi-connections_configuring-and-managing-networking":1359,"configuring_and_managing_networking/proc_configuring-rhel-as-a-wpa2-or-wpa3-personal-access-point_configuring-and-managing-networking":1360,"configuring_and_managing_networking/assembly_using-macsec-to-encrypt-layer-2-traffic-in-the-same-physical-network_configuring-and-managing-networking":1361,"configuring_and_managing_networking/getting-started-with-ipvlan_configuring-and-managing-networking":1362,"configuring_and_managing_networking/configuring-networkmanager-to-ignore-certain-devices_configuring-and-managing-networking":1363,"configuring_and_managing_networking/proc_configuring-the-loopback-interface-by-using-nmcli_configuring-and-managing-networking":1364,"configuring_and_managing_networking/creating-a-dummy-interface_configuring-and-managing-networking":1365,"configuring_and_managing_networking/using-networkmanager-to-disable-ipv6-for-a-specific-connection_configuring-and-managing-networking":1366,"configuring_and_managing_networking/assembly_changing-a-hostname_configuring-and-managing-networking":1367,"configuring_and_managing_networking/configuring-networkmanager-dhcp-settings_configuring-and-managing-networking":1368,"configuring_and_managing_networking/assembly_running-dhclient-exit-hooks-using-networkmanager-a-dispatcher-script_configuring-and-managing-networking":1369,"configuring_and_managing_networking/manually-configuring-the-etc-resolv-conf-file_configuring-and-managing-networking":1370,"configuring_and_managing_networking/configuring-the-order-of-dns-servers_configuring-and-managing-networking":1371,"configuring_and_managing_networking/using-different-dns-servers-for-different-domains_configuring-and-managing-networking":1372,"configuring_and_managing_networking/managing-the-default-gateway-setting_configuring-and-managing-networking":1373,"configuring_and_managing_networking/configuring-static-routes_configuring-and-managing-networking":1374,"configuring_and_managing_networking/configuring-policy-based-routing-to-define-alternative-routes_configuring-and-managing-networking":1375,"configuring_and_managing_networking/reusing-the-same-ip-address-on-different-interfaces_configuring-and-managing-networking":1376,"configuring_and_managing_networking/assembly_starting-a-service-within-an-isolated-vrf-network_configuring-and-managing-networking":1377,"configuring_and_managing_networking/configuring-ethtool-settings-in-networkmanager-connection-profiles_configuring-and-managing-networking":1378,"configuring_and_managing_networking/introduction-to-networkmanager-debugging_configuring-and-managing-networking":1379,"configuring_and_managing_networking/assembly_using-lldp-to-debug-network-configuration-problems_configuring-and-managing-networking":1380,"configuring_and_managing_networking/linux-traffic-control_configuring-and-managing-networking":1381,"configuring_and_managing_networking/authenticating-a-rhel-client-to-the-network-using-the-802-1x-standard-with-a-certificate-stored-on-the-file-system_configuring-and-managing-networking":1382,"configuring_and_managing_networking/assembly_setting-up-an-802-1x-network-authentication-service-for-lan-clients-using-hostapd-with-freeradius-backend_configuring-and-managing-networking":1383,"configuring_and_managing_networking/getting-started-with-multipath-tcp_configuring-and-managing-networking":1384,"configuring_and_managing_networking/assembly_managing-the-mptcpd-service_configuring-and-managing-networking":1385,"configuring_and_managing_networking/assembly_networkmanager-connection-profiles-in-keyfile-format_configuring-and-managing-networking":1386,"configuring_and_managing_networking/systemd-network-targets-and-services_configuring-and-managing-networking":1387,"configuring_and_managing_networking/assembly_introduction-to-nmstate_configuring-and-managing-networking":1388,"configuring_and_managing_networking/capturing-network-packets_configuring-and-managing-networking":1389,"configuring_and_managing_networking/assembly_understanding-the-ebpf-features-in-rhel-9_configuring-and-managing-networking":1390,"configuring_and_managing_networking/network-tracing-using-the-bpf-compiler-collection_configuring-and-managing-networking":1391,"configuring_and_managing_networking/assembly_configuring-network-devices-to-accept-traffic-from-all-mac-addresses_configuring-and-managing-networking":1392,"configuring_and_managing_networking/proc_mirroring-a-network-interface-by-using-nmcli_configuring-and-managing-networking":1393,"configuring_and_managing_networking/assembly_using-nmstate-autoconf-to-automatically-configure-the-network-state-using-lldp_configuring-and-managing-networking":1394,"configuring_and_managing_networking/configuring-802-3-link-settings_configuring-and-managing-networking":1395,"configuring_and_managing_networking/getting-started-with-dpdk_configuring-and-managing-networking":1396,"configuring_and_managing_networking/getting-started-with-tipc_configuring-and-managing-networking":1397,"configuring_and_managing_networking/automatically-configuring-network-interfaces-in-public-clouds-using-nm-cloud-setup_configuring-and-managing-networking":1398,"configuring_and_managing_networking/legal-notice":1399},{"prevt":20,"next":26},{"prevt":19,"next":31},{"prevt":20,"next":31},{"prevt":20,"next":73},{"prevt":20,"next":135},{"prevt":20,"next":184},{"prevt":20,"next":213},{"prevt":20,"next":246},{"prevt":20,"next":275},{"prevt":20,"next":392},{"prevt":20,"next":465},{"prevt":20,"next":482},{"prevt":20,"next":507},{"prevt":507,"next":552},{"prevt":20,"next":552},{"prevt":20,"next":569},{"prevt":20,"next":586},{"prevt":586,"next":603},{"prevt":20,"next":20},{"prevt":20,"next":20},{"prevt":20,"next":623},{"prevt":20,"next":637},{"prevt":20,"next":651},{"prevt":20,"next":665},{"prevt":20,"next":679},{"prevt":20,"next":697},{"prevt":20,"next":711},{"prevt":20,"next":753},{"prevt":20,"next":795},{"prevt":20,"next":809},{"prevt":20,"next":827},{"prevt":20,"next":841},{"prevt":20,"next":875},{"prevt":20,"next":20},{"prevt":20,"next":911},{"prevt":20,"next":949},{"prevt":20,"next":971},{"prevt":20,"next":1001},{"prevt":20,"next":1031},{"prevt":20,"next":1049},{"prevt":20,"next":1075},{"prevt":20,"next":1093},{"prevt":20,"next":1115},{"prevt":20,"next":1129},{"prevt":20,"next":1143},{"prevt":20,"next":1205},{"prevt":1205,"next":1228},{"prevt":20,"next":20},{"prevt":20,"next":20},{"prevt":20,"next":1248},{"prevt":20,"next":1262},{"prevt":20,"next":1284},{"prevt":1284,"next":20},{"product":20,"version":20},{"configuring_and_managing_networking":1402},[1313],{"products":1404},[1405,1406,1407,1408,1409,1410,1411,1412,1413,1414,1415,1416,1417],"builds_for_red_hat_openshift","migration_toolkit_for_virtualization","openshift_container_platform","openshift_sandboxed_containers","red_hat_advanced_cluster_security_for_kubernetes","red_hat_advanced_cluster_management_for_kubernetes","red_hat_openshift_data_foundation","red_hat_openshift_dev_spaces","red_hat_openshift_gitops","red_hat_openshift_local","red_hat_openshift_pipelines","red_hat_openshift_serverless","workload_availability_for_red_hat_openshift",[],{"default":1420},[1421,1430,1436,1445,1453,1461,1468,1476,1483],{"nid":1422,"type":1423,"langcode":1424,"Published":18,"title":1425,"Created":1426,"Updated":1427,"body_value":20,"field_documentation banner_text_value":20,"field_documentation banner_text_format":20,"field_paths_value":1428,"field_documentation_training_url_uri":20,"field_title_title_id":20,"field_rebrand banner_link_uri":1429},580,"rebrand banner","en","OpenShift Container Storage is now OpenShift Data Foundation starting with version 4.9.","2023-01-11 15:38:32","2023-01-11 15:40:04","/documentation/red_hat_openshift_container_storage\r\n/documentation/red_hat_openshift_container_storage/\r\n/documentation/red_hat_openshift_container_storage/*","internal:/documentation/red_hat_openshift_data_foundation/",{"nid":1431,"type":1423,"langcode":1424,"Published":18,"title":1425,"Created":1432,"Updated":1433,"body_value":20,"field_documentation banner_text_value":20,"field_documentation banner_text_format":20,"field_paths_value":1434,"field_documentation_training_url_uri":20,"field_title_title_id":20,"field_rebrand banner_link_uri":1435},581,"2023-01-11 15:41:31","2023-01-11 15:42:04","/documentation/red_hat_openshift_data_foundation/4.9\r\n/documentation/red_hat_openshift_data_foundation/4.9/\r\n/documentation/red_hat_openshift_data_foundation/4.9/*\r\n/documentation/red_hat_openshift_data_foundation/4.10\r\n/documentation/red_hat_openshift_data_foundation/4.10/\r\n/documentation/red_hat_openshift_data_foundation/4.10/*\r\n/documentation/red_hat_openshift_data_foundation/4.11\r\n/documentation/red_hat_openshift_data_foundation/4.11/\r\n/documentation/red_hat_openshift_data_foundation/4.11/*","internal:/documentation/red_hat_openshift_container_storage/",{"nid":1437,"type":1438,"langcode":1424,"Published":18,"title":1439,"Created":1440,"Updated":1441,"body_value":20,"field_documentation banner_text_value":1442,"field_documentation banner_text_format":1443,"field_paths_value":1444,"field_documentation_training_url_uri":20,"field_title_title_id":20,"field_rebrand banner_link_uri":20},582,"developer preview banner","MicroShift is Developer Preview software only","2023-01-11 15:50:24","2023-01-30 19:00:52","\u003Cp slot=header>MicroShift is Developer Preview software only.\u003C/p>For more information about the support scope of Red Hat Developer Preview software, see \u003Ca href=\"https://access.redhat.com/support/offerings/devpreview/\">Developer Preview Support Scope\u003C/a>.","documentation banner","/documentation/microshift/4.12\r\n/documentation/microshift/4.12/*\r\n/documentation/red_hat_build_of_microshift/4.12\r\n/documentation/red_hat_build_of_microshift/4.12/*",{"nid":1446,"type":1447,"langcode":1424,"Published":18,"title":1448,"Created":1449,"Updated":1450,"body_value":20,"field_documentation banner_text_value":1451,"field_documentation banner_text_format":1443,"field_paths_value":1452,"field_documentation_training_url_uri":20,"field_title_title_id":20,"field_rebrand banner_link_uri":20},583,"obsolete documentation banner","RHACS EOL - DAT-3433","2023-01-23 16:36:43","2023-01-23 16:39:14","\u003Cp slot=header>You are viewing documentation for a release that is no longer maintained. To view the documentation for the most recent version, see the \u003Ca href=\"/documentation/red_hat_advanced_cluster_security_for_kubernetes/\">latest RHACS docs\u003C/a>.\u003C/p>","/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.69\r\n/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.69/*\r\n/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.70\r\n/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.70/*\r\n/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.71\r\n/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.71/*",{"nid":1454,"type":1455,"langcode":1424,"Published":18,"title":1456,"Created":1457,"Updated":1458,"body_value":20,"field_documentation banner_text_value":1459,"field_documentation banner_text_format":1443,"field_paths_value":1460,"field_documentation_training_url_uri":20,"field_title_title_id":20,"field_rebrand banner_link_uri":20},584,"end of life banner","EOL banner for RHV","2023-05-23 14:58:05","2023-05-24 15:19:42","\u003Cp slot=header>The Red Hat Virtualization\u003C/p>Maintenance Phase runs until August 31, 2024, followed by the Extended Life Phase with no more software fixes through August 31, 2026. See \u003Ca href=\"https://access.redhat.com/articles/6975303\">Migration Paths for OpenShift Container Platform deployed on Red Hat Virtualization\u003C/a> for details.","/documentation/red_hat_virtualization/4.4",{"nid":1462,"type":1455,"langcode":1424,"Published":18,"title":1463,"Created":1464,"Updated":1465,"body_value":20,"field_documentation banner_text_value":1466,"field_documentation banner_text_format":1443,"field_paths_value":1467,"field_documentation_training_url_uri":20,"field_title_title_id":20,"field_rebrand banner_link_uri":20},585,"RHHI-V EOL","2023-06-01 16:52:57","2023-06-01 17:03:44","\u003Cp slot=header>Red Hat Hyperconverged Infrastructure for Virtualization\u003C/p> is in the \u003Ca href=\"https://access.redhat.com/support/policy/updates/rhhiv\">Maintenance Support Phase\u003C/a> of its lifecycle until October 31, 2024. After that date, the product will be End of Life. See the \u003Ca href=\"https://access.redhat.com/announcements/6972521\">RHHI-V announcement\u003C/a> for next steps.","/documentation/red_hat_hyperconverged_infrastructure_for_virtualization/1.8",{"nid":1469,"type":1470,"langcode":1424,"Published":18,"title":1471,"Created":1472,"Updated":1473,"body_value":20,"field_documentation banner_text_value":1474,"field_documentation banner_text_format":1443,"field_paths_value":1475,"field_documentation_training_url_uri":20,"field_title_title_id":20,"field_rebrand banner_link_uri":20},586,"preview banner","MicroShift is Technology Preview software only","2024-03-18 16:53:05","2024-03-18 16:54:56","\u003Cp slot=header>MicroShift is Technology Preview software only.\u003C/p>For more information about the support scope of Red Hat Technology Preview software, see \u003Ca href=\"https://access.redhat.com/support/offerings/techpreview/\">Technology Preview Support Scope\u003C/a>.","/documentation/red_hat_build_of_microshift/4.13\r\n/documentation/red_hat_build_of_microshift/4.13/*",{"nid":1477,"type":1470,"langcode":1424,"Published":18,"title":1478,"Created":1479,"Updated":1480,"body_value":20,"field_documentation banner_text_value":1481,"field_documentation banner_text_format":1443,"field_paths_value":1482,"field_documentation_training_url_uri":20,"field_title_title_id":20,"field_rebrand banner_link_uri":20},588,"Ansible 2.5 upgrade limitation","2024-09-30 16:53:05","2024-10-28 16:54:56","\u003Cp slot=\"header\">Support added for upgrades from 2.4\u003C/p>Ansible Automation Platform 2.5-3, released on October 28, 2024, adds support for upgrades from 2.4. See the upgrade documentation for more information.","",{"nid":1484,"alertType":1485,"type":1486,"langcode":1424,"Published":18,"title":1487,"Created":1482,"Updated":1482,"body_value":20,"field_documentation banner_text_value":1488,"field_documentation banner_text_format":1443,"field_paths_value":1489,"field_documentation_training_url_uri":20,"field_title_title_id":20,"field_rebrand banner_link_uri":20},587,"warning","Warning banner","Red Hat build of Apache Camel K","\u003Cp slot=header>Red Hat Camel K is deprecated\u003C/p>Red Hat Camel K is deprecated and the End of Life date for this product is June 30, 2025. For help migrating to the current go-to solution, \u003Ca target=_blank href=\"https://docs.redhat.com/en/documentation/red_hat_build_of_apache_camel\">Red Hat build of Apache Camel\u003C/a>, see the \u003Ca target=_blank href=\"https://docs.redhat.com/en/documentation/red_hat_build_of_apache_camel_k/1.10.7/html/migration_guide_camel_k_to_camel_extensions_for_quarkus/index\">Migration Guide\u003C/a>.","/documentation/red_hat_build_of_apache_camel_k/*",["Reactive",1491],{"$snuxt-i18n-meta":1492,"$sisLoading":1493,"$sisSinglePage":17,"$sisInFocusMode":1493,"$smobileTocOpen":1493,"$sisLargeTOC":1493,"$scurrentChapter":19,"$scurrentSection":19,"$scurrentSubSection":1482},{},false,["Set"],["ShallowReactive",1496],{"s8LoCEfG4A":20,"rFVLKcOK8e":20,"uUstF4AIyn":20,"MdHNSZP4nR":20,"Pn02PlJOas":20},"/en/documentation/red_hat_enterprise_linux/9/html-single/configuring_and_managing_networking/index"]</script>
<script>window.__NUXT__={};window.__NUXT__.config={public:{contentEnv:"",collectFeedback:true,i18n:{baseUrl:"",defaultLocale:"en",defaultDirection:"ltr",strategy:"prefix",lazy:false,rootRedirect:"",routesNameSeparator:"___",defaultLocaleRouteNameSuffix:"default",skipSettingLocaleOnNavigate:false,differentDomains:false,trailingSlash:false,configLocales:[{code:"en",name:"English",iso:"en-US"},{code:"fr",name:"Français",iso:"fr-FR"},{code:"ko",name:"한국어",iso:"ko-KR"},{code:"ja",name:"日本語",iso:"ja-JP"},{code:"zh-cn",name:"中文 (中国)",iso:"zh-CN"},{code:"de",name:"Deutsch",iso:"de_DE"},{code:"it",name:"Italiano",iso:"it_IT"},{code:"pt-br",name:"Português",iso:"pt_BR"},{code:"es",name:"Español",iso:"es-ES"}],locales:{en:{domain:""},fr:{domain:""},ko:{domain:""},ja:{domain:""},"zh-cn":{domain:""},de:{domain:""},it:{domain:""},"pt-br":{domain:""},es:{domain:""}},detectBrowserLanguage:{alwaysRedirect:false,cookieCrossOrigin:false,cookieDomain:"",cookieKey:"i18n_redirected",cookieSecure:false,fallbackLocale:"",redirectOn:"root",useCookie:true},experimental:{localeDetector:"",switchLocalePathLinkSSR:false,autoImportTranslationFunctions:false}}},app:{baseURL:"/",buildId:"5ff82c51-785e-4a7d-aca6-77d6692e8c7a",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>
