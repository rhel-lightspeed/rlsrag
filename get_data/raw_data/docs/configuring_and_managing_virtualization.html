<!DOCTYPE html><html  data-capo=""><head><script type="importmap">
  {
    "imports": {
      "@patternfly/elements/": "/scripts/v1/@patternfly/elements/",
      "@patternfly/pfe-clipboard/": "/scripts/v1/@patternfly/pfe-clipboard/",
      "@rhds/elements/": "/scripts/v1/@rhds/elements/elements/",
      "@cpelements/elements/": "/scripts/v1/@cpelements/elements/elements/"
    },
    "scopes": {
      "/": {
        "@floating-ui/core": "/scripts/v1/@floating-ui/core/dist/floating-ui.core.mjs",
        "@floating-ui/dom": "/scripts/v1/@floating-ui/dom/dist/floating-ui.dom.mjs",
        "@floating-ui/utils": "/scripts/v1/@floating-ui/utils/dist/floating-ui.utils.mjs",
        "@floating-ui/utils/dom": "/scripts/v1/@floating-ui/utils/dom/dist/floating-ui.utils.dom.mjs",
        "@lit/reactive-element": "/scripts/v1/@lit/reactive-element/reactive-element.js",
        "@lit/reactive-element/decorators/": "/scripts/v1/@lit/reactive-element/decorators/",
        "@patternfly/pfe-core": "/scripts/v1/@patternfly/pfe-core/core.js",
        "@patternfly/pfe-core/": "/scripts/v1/@patternfly/pfe-core/",
        "@rhds/tokens/media.js": "/scripts/v1/@rhds/tokens/js/media.js",
        "lit": "/scripts/v1/lit/index.js",
        "lit-element/lit-element.js": "/scripts/v1/lit-element/lit-element.js",
        "lit-html": "/scripts/v1/lit-html/lit-html.js",
        "lit-html/": "/scripts/v1/lit-html/",
        "lit/": "/scripts/v1/lit/",
        "tslib": "/scripts/v1/tslib/tslib.es6.mjs",
        "@cpelements/rh-table/dist/rh-table.js": "/scripts/v1/@cpelements/rh-table/dist/rh-table.js"
      }
    }
  }
</script><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Configuring and managing virtualization | Red Hat Product Documentation</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<script type="text/javascript" id="trustarc" src="//static.redhat.com/libs/redhat/marketing/latest/trustarc/trustarc.js"></script>
<script src="//www.redhat.com/dtm.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:wght@400;500;700&family=Red+Hat+Text:wght@400;500;700&display=swap">
<link rel="stylesheet" href="/styles/rh-table--lightdom.min.css">
<style>.section .titlepage{gap:.75rem}.section .titlepage,div.edit{align-items:center;display:flex}div.edit{font-size:.9rem;margin-bottom:8px}div.edit>a{align-items:center;display:flex}.edit pf-icon{margin-right:4px}</style>
<style>#error[data-v-df31ff14]{align-items:center;display:flex;flex-direction:column;justify-content:center;min-height:80vh}h1[data-v-df31ff14]{font-size:calc(var(--rh-font-size-body-text-md, 1rem)*4);font-weight:700;margin-bottom:0}h1[data-v-df31ff14],h1 span[data-v-df31ff14]{line-height:var(--rh-line-height-heading,1.3)}h1 span[data-v-df31ff14]{color:var(--rh-color-text-brand-on-light,#e00);display:block;text-transform:uppercase}h1 span[data-v-df31ff14],p[data-v-df31ff14]{font-size:var(--rh-font-size-body-text-lg,1.125rem)}aside[data-v-df31ff14]{align-items:center;background:var(--rh-color-surface-lightest,#fff);border:var(--rh-border-width-sm,1px) solid var(--rh-color-border-subtle-on-light,#c7c7c7);border-radius:var(--rh-border-radius-default,3px);border-top:calc(var(--rh-border-width-md, 2px)*2) solid var(--rh-color-text-brand-on-light,#e00);box-shadow:var(--rh-box-shadow-sm,0 2px 4px 0 hsla(0,0%,8%,.2));display:flex;flex-direction:column;justify-content:space-between;margin-top:var(--rh-space-2xl,32px);padding:var(--rh-space-xl,24px)}aside[data-v-df31ff14],aside>div[data-v-df31ff14]{width:100%}.text-container[data-v-df31ff14]{margin:auto;max-width:442px;text-align:center}.desktop[data-v-df31ff14]{display:none}.sr-only[data-v-df31ff14]{height:1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);border:0;clip-path:inset(50%);white-space:nowrap}form[data-v-df31ff14]{display:flex}button[data-v-df31ff14],input[data-v-df31ff14]{border:1px solid var(--rh-color-black-500,#8a8d90);box-sizing:border-box;height:40px}input[data-v-df31ff14]{border-right:none;flex:1;font-family:var(--rh-font-family-heading,RedHatDisplay,"Red Hat Display","Noto Sans Arabic","Noto Sans Hebrew","Noto Sans JP","Noto Sans KR","Noto Sans Malayalam","Noto Sans SC","Noto Sans TC","Noto Sans Thai",Helvetica,Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);padding-left:var(--rh-space-md,8px);width:100%}button[data-v-df31ff14]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent;border-left:none;display:flex;width:var(--rh-size-icon-04,40px)}button[data-v-df31ff14]:before{background:var(--rh-context-light-color-text-link,#06c);content:"";cursor:pointer;display:block;height:28px;margin:auto;width:28px}.search-icon[data-v-df31ff14]{margin:auto}ul[data-v-df31ff14]{max-width:275px;padding:0}ul li[data-v-df31ff14]{display:inline-block;list-style:none;margin-right:var(--rh-space-xl,24px);padding:var(--rh-space-xs,4px) 0}ul li a[data-v-df31ff14]{color:var(--rh-context-light-color-text-link,#06c);text-decoration:none}@media (min-width:992px){aside[data-v-df31ff14]{flex-direction:row}.mobile[data-v-df31ff14]{display:none}.desktop[data-v-df31ff14]{display:block}input[data-v-df31ff14]{width:auto}}</style>
<style>@keyframes fade-in{0%{opacity:0;visibility:hidden}1%{visibility:visible}to{opacity:1;visibility:visible}}@media (min-height:48em){.rhdocs{--rh-table--maxHeight:calc(100vh - 12.5rem)}}*,.rhdocs *,.rhdocs :after,.rhdocs :before,:after,:before{box-sizing:border-box}.rhdocs img,.rhdocs object,.rhdocs svg,img,object,svg{display:inline-block;max-width:100%;vertical-align:middle}.rhdocs hr{border:0;border-top:.0625rem solid #d2d2d2;clear:both;margin:1rem 0}.rhdocs a{color:#06c;text-decoration:underline}.rhdocs a:focus,.rhdocs a:hover{color:#036}.rhdocs a.anchor-heading{color:#151515;cursor:pointer;text-decoration:none;word-break:break-all}.rhdocs p{margin:1.49963rem 0}.rhdocs li>p{margin:0}.rhdocs h1,.rhdocs h2,.rhdocs h3,.rhdocs h4,.rhdocs h5,.rhdocs h6{font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-weight:500;margin:0 0 .625rem}.rhdocs h1{font-size:2.25rem;margin:2rem 0}.rhdocs h2{font-size:1.625rem;margin:2rem 0}.rhdocs h3{font-size:1.5rem;font-weight:400}.rhdocs h4,.rhdocs h5{font-size:1.25rem}.rhdocs h5{font-weight:400}.rhdocs h6{font-size:1.125rem;font-weight:500;line-height:1.6667}.rhdocs ol,.rhdocs ul{margin:1rem 0;padding:0 0 0 1.5rem}.rhdocs ol ::marker,.rhdocs ul ::marker{font:inherit}.rhdocs li{margin:0 0 .5em;padding:0}.rhdocs li>p{margin:.5rem 0}.rhdocs li>ol,.rhdocs li>ul{margin:0}.rhdocs dl dd{margin:.5rem 0 .5rem 1rem}.rhdocs dl dd>p{margin:.5rem 0}.rhdocs .informaltable,.rhdocs .table-contents,.rhdocs .table-wrapper{max-height:var(--rh-table--maxHeight);overflow:auto}.rhdocs table{border:0;font-size:1rem;line-height:1.6667;table-layout:fixed}.rhdocs table caption{color:#585858;margin-bottom:.5rem;margin-top:.5rem;text-align:left}.rhdocs table td,.rhdocs table th{border:0;border-bottom:.0625rem solid #d2d2d2;border-bottom:.0625rem solid var(--pfe-table--Border,#d2d2d2);padding:.5em 1rem}.rhdocs table td.halign-left,.rhdocs table th.halign-left{text-align:left}.rhdocs table td.halign-center,.rhdocs table th.halign-center,table td.halign-center,table th.halign-center{text-align:center}.rhdocs table td.halign-right,.rhdocs table th.halign-right{text-align:right}.rhdocs table td.valign-top,.rhdocs table th.valign-top{vertical-align:top}.rhdocs table td.valign-middle,.rhdocs table th.valign-middle{vertical-align:middle}.rhdocs table td.valign-bottom,.rhdocs table th.valign-bottom{vertical-align:bottom}.rhdocs table thead td,.rhdocs table thead th{background:#f5f5f5;font-weight:600}.rhdocs rh-table table,.rhdocs rh-table.rh-table--expanded-vertically{max-height:-moz-max-content;max-height:max-content}.rhdocs pre.nowrap{overflow:auto;overflow-wrap:normal;white-space:pre;word-break:normal}.rhdocs .codeblock__wrapper pre{background:transparent}.rh-table--full-screen code,.rhdocs .content--md code,.rhdocs .content--sm code,.rhdocs .rh-table--full-screen code{overflow-wrap:normal;word-break:normal}.rhdocs[class] pre code,[class] pre code{background:inherit;color:inherit;font-family:inherit;font-size:inherit;font-weight:inherit;line-height:inherit;padding:0}.rhdocs .keycap,.rhdocs kbd{background-color:#eee;background-image:linear-gradient(180deg,#ddd,#eee,#fff);border-radius:.1875rem;box-shadow:0 -.0625rem 0 0 #fff,0 .0625rem 0 .1875rem #aaa;font-family:RedHatMono,Red Hat Mono,Consolas,monospace;font-size:90%;font-weight:400;margin:0 .25rem;padding:.125rem .375rem}.keycap strong,.rhdocs .keycap strong{font-weight:inherit}.rhdocs kbd.keyseq,kbd.keyseq{background:transparent;border:0;box-shadow:none;padding:0}.rhdocs kbd.keyseq kbd,kbd.keyseq kbd{display:inline-block;margin:0 .375rem}.rhdocs kbd.keyseq kbd:first-child,kbd.keyseq kbd:first-child{margin-left:0}.rhdocs b.button{font-size:90%;font-weight:700;padding:.1875rem}.rhdocs b.button:before{content:"["}.rhdocs b.button:after{content:"]"}html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}.rhdocs audio,.rhdocs canvas,.rhdocs progress,.rhdocs video{display:inline-block;vertical-align:baseline}.rhdocs audio:not([controls]){display:none;height:0}[hidden],template{display:none}.rhdocs a{background:transparent}.rhdocs a:active,.rhdocs a:hover{outline:0}.rhdocs a.anchor-heading:hover:before{color:#151515;content:"#";margin-left:-1.6rem;position:absolute}.rhdocs a.anchor-heading:focus-visible{color:#151515}@media screen and (max-width:990px){.rhdocs a.anchor-heading:hover:before{font-size:16px;margin-left:-1rem;padding-top:8px}.rhdocs h1 a.anchor-heading:hover:before{padding-top:12px}.rhdocs h4 a.anchor-heading:hover:before,.rhdocs h5 a.anchor-heading:hover:before{padding-top:4px}.rhdocs h6 a.anchor-heading:hover:before{padding-top:2px}}.rhdocs abbr[title]{border-bottom:.0625rem dotted}.rhdocs dfn{font-style:italic}.rhdocs h1{font-size:2em;margin:.67em 0}.rhdocs mark{background:#ff0;color:#000}.rhdocs small{font-size:80%}.rhdocs sub,.rhdocs sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}.rhdocs sup{top:-.5em}.rhdocs sub{bottom:-.25em}.rhdocs img{border:0}.rhdocs svg:not(:root){overflow:hidden}.rhdocs figure{margin:1em 2.5rem}.rhdocs hr{box-sizing:content-box;height:0}.rhdocs code,.rhdocs kbd,.rhdocs pre,.rhdocs samp{font-family:monospace,monospace;font-size:1em}.rhdocs button,.rhdocs optgroup,.rhdocs select,.rhdocs textarea,.rhdocsinput{color:inherit;font:inherit;margin:0}.rhdocs button.copy-link-btn{background:none;border:2px solid #fff;font:1px Red Hat Text}.rhdocs button.copy-link-btn:hover{border-bottom:2px solid #06c}.rhdocs button.copy-link-btn .link-icon{padding-bottom:4px}.rhdocs button{overflow:visible}.rhdocs button,.rhdocs select{text-transform:none}.rhdocs button,.rhdocs html input[type=button],.rhdocs input[type=reset],.rhdocs input[type=submit]{-moz-appearance:button;appearance:button;-webkit-appearance:button;cursor:pointer}.rhdocs button[disabled],.rhdocs html input[disabled]{cursor:default}.rhdocs button::-moz-focus-inner,.rhdocs input::-moz-focus-inner{border:0;padding:0}.rhdocs input{line-height:normal}.rhdocs input[type=checkbox],.rhdocs input[type=radio]{box-sizing:border-box;padding:0}.rhdocs input[type=number]::-webkit-inner-spin-button,.rhdocs input[type=number]::-webkit-outer-spin-button{height:auto}.rhdocs input[type=search]{-moz-appearance:textfield;appearance:textfield;-webkit-appearance:textfield;box-sizing:content-box}.rhdocs input[type=search]::-webkit-search-cancel-button,.rhdocs input[type=search]::-webkit-search-decoration{-webkit-appearance:none}.rhdocs fieldset{border:.0625rem solid silver;margin:0 .125rem;padding:.35em .625em .75em}.rhdocs legend{border:0;padding:0}.rhdocs textarea{overflow:auto}.rhdocs optgroup{font-weight:700}.rhdocs table{border-collapse:collapse;border-spacing:0}.rhdocs td,.rhdocs th{padding:0}.rhdocs ._additional-resources[class][class][id]:last-child{margin-top:-2rem}.rhdocs ._additional-resources[class][class]:only-child{grid-column:1/-1}._additional-resources[class][class] .additional-resources__heading,._additional-resources[class][class] .heading,._additional-resources[class][class] h1,._additional-resources[class][class] h2,._additional-resources[class][class] h3,._additional-resources[class][class] h4,._additional-resources[class][class] h5,._additional-resources[class][class] h6,._additional-resources[class][class] p.title{display:block;font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-size:1.125rem;font-weight:700;line-height:1.5rem;margin:0 0 .5rem;padding:0;text-transform:uppercase}._additional-resources[class][class] ul{border:0;list-style:none;margin:0;padding:0;position:relative}.related-topic-content__wrapper ._additional-resources[class][class] ul{display:block}._additional-resources[class][class] ul:after{background-color:#fff;bottom:0;content:"";display:block;height:.125rem;position:absolute;width:100%}._additional-resources[class][class] li{border-bottom:.0625rem solid #d2d2d2;box-sizing:content-box;margin:0;padding:1rem 1.5rem 1rem 0;-moz-column-break-inside:avoid;break-inside:avoid}._additional-resources[class][class] li:only-child{grid-column:1/-1}._additional-resources[class][class] li:last-child{border:0}@media (min-width:1100px){._additional-resources[class][class] li:last-child{border-bottom:.0625rem solid #d2d2d2}}._additional-resources[class][class] li p:only-child{margin:0;padding:0}._additional-resources[class][class] li a{text-decoration:none}._additional-resources[class][class] li a:focus,._additional-resources[class][class] li a:hover{text-decoration:underline}.rhdocs table .admonitionblock>div:nth-child(2),.rhdocs table .caution>div:nth-child(2),.rhdocs table .important>div:nth-child(2),.rhdocs table .note>div:nth-child(2),.rhdocs table .tip>div:nth-child(2),.rhdocs table .warning>div:nth-child(2){margin:.5rem 0}.rhdocs table .admonitionblock>div:nth-child(2)>:first-child,.rhdocs table .caution>div:nth-child(2)>:first-child,.rhdocs table .important>div:nth-child(2)>:first-child,.rhdocs table .note>div:nth-child(2)>:first-child,.rhdocs table .tip>div:nth-child(2)>:first-child,.rhdocs table .warning>div:nth-child(2)>:first-child{margin-top:0}.rhdocs table .admonitionblock>div:nth-child(2)>:last-child,.rhdocs table .caution>div:nth-child(2)>:last-child,.rhdocs table .important>div:nth-child(2)>:last-child,.rhdocs table .note>div:nth-child(2)>:last-child,.rhdocs table .tip>div:nth-child(2)>:last-child,.rhdocs table .warning>div:nth-child(2)>:last-child{margin-bottom:0}.rhdocs .codeblock__wrapper+.codeblock__wrapper,.rhdocs pre+pre,.rhdocs pre[class]+pre[class]{margin-top:2rem}.rhdocs .codeblock__wrapper{background:#f8f8f8;overflow:visible;position:relative;transform:translate(0);z-index:0}.codeblock__wrapper:before{background-repeat:no-repeat;background-size:6.25rem 100%;bottom:var(--scrollbar__height,1px);content:"";display:block;height:7.125rem;max-height:100%;max-height:calc(100% - var(--scrollbar__height, 2px));position:absolute;right:var(--scrollbar__width,6px);top:.0625rem;width:4.0625rem;z-index:1}.rhdocs .codeblock__inner-wrapper,.rhdocs pre{max-height:calc(100vh - 6.25rem)}@media (min-height:48em){.rhdocs .codeblock__inner-wrapper,.rhdocs pre{max-height:calc(100vh - 12.5rem)}}.rhdocs .codeblock__inner-wrapper{display:grid;grid-template-columns:1fr 4.375rem}.rhdocs .codeblock__wrapper--expanded .codeblock__inner-wrapper{max-height:-moz-max-content;max-height:max-content}.codeblock__copy span{display:block;height:0;position:absolute;visibility:hidden;width:0}.codeblock__copy:focus{outline:.0625rem dashed currentcolor}.codeblock__copy svg#icon--copy{height:1rem;width:1rem}.codeblock__expand{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#f0efef;border:0;cursor:pointer;height:1.75rem;left:calc(100% - 2.75rem - var(--scrollbar__width, 0px));position:absolute;text-indent:-9999em;top:3.25rem;width:1.75rem;z-index:2}.codeblock__expand:before{background:#6a6e73;content:"";height:100%;left:0;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512'%3E%3C!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc.--%3E%3Cpath d='M182.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l41.4-41.4v293.4l-41.4-41.3c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 402.7V109.3l41.4 41.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-96-96z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512'%3E%3C!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc.--%3E%3Cpath d='M182.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l41.4-41.4v293.4l-41.4-41.3c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 402.7V109.3l41.4 41.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-96-96z'/%3E%3C/svg%3E");-webkit-mask-position:center center;mask-position:center center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:auto 1rem;mask-size:auto 1rem;position:absolute;top:0;width:100%}.codeblock__wrapper--expanded .codeblock__expand{background:#2b9af3}.codeblock__wrapper--expanded .codeblock__expand:before{background:#fff}.codeblock__expand:focus:before,.codeblock__expand:hover:before{background:#06c}.codeblock__wrapper--expanded .codeblock__expand:focus:before,.codeblock__wrapper--expanded .codeblock__expand:hover:before{background:#fff}.codeblock__expand:focus{outline:.0625rem dashed currentcolor}.rhdocs .calloutlist>ol,.rhdocs .colist>ol{counter-reset:colist;list-style:none;margin:1rem 0 2rem;padding:0}.rhdocs .calloutlist>ol>li,.rhdocs .colist>ol>li{counter-increment:colist;font-size:1rem;margin:.5rem 0;padding-left:1.75rem;position:relative}.rhdocs .calloutlist>ol>li .colist-num,.rhdocs .colist>ol>li .colist-num{display:none}.calloutlist>ol>li:before,.colist>ol>li:before{content:counter(colist);left:0;position:absolute;top:.1875rem}.calloutlist dt{clear:left;float:left;margin:0;padding:0 .5rem 0 0}.included-in-guides[class],.included-in-guides[class][id]:last-child{background:#fff;border:.0625rem solid #d2d2d2;border-radius:.1875rem;margin:2em 0 4em;padding:2rem 2rem 1rem}.included-in-guides[class][id]:last-child{margin-top:-2rem}.included-in-guides[class]:only-child{grid-column:1/-1}.included-in-guides[class] .additional-resources__heading,.included-in-guides[class] .heading,.included-in-guides[class] h1,.included-in-guides[class] h2,.included-in-guides[class] h3,.included-in-guides[class] h4,.included-in-guides[class] h5,.included-in-guides[class] h6,.included-in-guides[class] p.title{display:block;font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-size:1.125rem;font-weight:700;line-height:1.5rem;margin:0 0 .5rem;padding:0;text-transform:uppercase}.included-in-guides[class] ul{border:0;list-style:none;margin:0;padding:0;position:relative}.related-topic-content__wrapper .included-in-guides[class] ul{display:block}.included-in-guides[class] ul:after{background-color:#fff;bottom:0;content:"";display:block;height:.125rem;position:absolute;width:100%}.included-in-guides[class] li{border-bottom:.0625rem solid #d2d2d2;box-sizing:content-box;margin:0;padding:1rem 1.5rem 1rem 0;-moz-column-break-inside:avoid;break-inside:avoid}.included-in-guides[class] li:only-child{grid-column:1/-1}.included-in-guides[class] li:last-child{border:0}@media (min-width:1100px){.included-in-guides[class] li:last-child{border-bottom:.0625rem solid #d2d2d2}}.included-in-guides[class] li p:only-child{margin:0;padding:0}.included-in-guides[class] li a{text-decoration:none}.included-in-guides[class] li a:focus,.included-in-guides[class] li a:hover{text-decoration:underline}.menuseq{display:inline-flex;overflow:hidden;text-indent:-9999em}.menuseq .menu,.menuseq .menuitem,.menuseq .submenu{display:block;position:relative;text-indent:0}.menuseq .menu+.menu:before,.menuseq .menu+.menuitem:before,.menuseq .menu+.submenu:before,.menuseq .menuitem+.menu:before,.menuseq .menuitem+.menuitem:before,.menuseq .menuitem+.submenu:before,.menuseq .submenu+.menu:before,.menuseq .submenu+.menuitem:before,.menuseq .submenu+.submenu:before{content:">";display:inline-block;font-weight:700;padding:0 .25em}.related-topic-content__wrapper{margin:2em 0}.related-topic-content__wrapper--for-guide{margin-bottom:-2.5rem;padding-bottom:.0625rem;position:relative;z-index:1}.related-topic-content__wrapper--for-guide:before{background:#f0f0f0;content:"";display:block;height:100%;left:-3rem;position:absolute;right:-4.5rem;top:0;width:auto;z-index:-1}@media (min-width:1100px){.related-topic-content__wrapper--for-guide:before{left:-2.5rem;right:-3.625rem}}.related-topic-content__wrapper--for-guide summary{padding:1em 2em 1em 2.1875rem}@media (min-width:950px){.related-topic-content__inner-wrapper{display:grid;gap:2em;grid-template-columns:repeat(2,minmax(0,1fr))}}.local-render .rhdocs-content{margin:0 auto}.rhdocs cp-documentation{display:block;padding-bottom:2.5rem}.rhdocs cp-documentation.PFElement,.rhdocs cp-documentation[pfelement]{padding:0}rh-table{display:block}::-webkit-scrollbar,:host .rhdocs ::-webkit-scrollbar{height:.625rem;width:.625rem}::-webkit-scrollbar,::-webkit-scrollbar-track,:host .rhdocs ::-webkit-scrollbar,:host .rhdocs ::-webkit-scrollbar-track{background-color:#d6d6d6}::-webkit-scrollbar-thumb,:host .rhdocs ::-webkit-scrollbar-thumb{background-color:#8e8e8e}*,:host .rhdocs *{scrollbar-color:#8e8e8e #d6d6d6}.rhdocs p:empty,p:empty{display:none}.rhdocs[class] h1 code,.rhdocs[class] h2 code,.rhdocs[class] h3 code,.rhdocs[class] h4 code,.rhdocs[class] h5 code,.rhdocs[class] h6 code,[class] h1 code,[class] h2 code,[class] h3 code,[class] h4 code,[class] h5 code,[class] h6 code{background:transparent;border:0;color:inherit;font:inherit;margin:0;padding:0}.pane-page-title h1,.rhdocs__header__primary-wrapper h1{font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-size:2.25rem;line-height:1.333}.rhdocs details[class]{list-style:none;margin:1rem 0 3rem;padding:0}.rhdocs-toc[class]{background:#f2f2f2;margin:1rem 0 2rem;padding:1rem}.rhdocs-toc[class]>:last-child{margin-bottom:0}.rhdocs-toc[class] .rhdocs-toctitle{font-size:1.25rem;font-weight:400;line-height:1.6667;margin-top:0;text-transform:none}.rhdocs-toc[class] li{margin-bottom:.25em;padding-left:.5em}.preamble{margin:0 0 2rem}.sect1{margin:2rem 0 1rem}:host .sect1,cp-documentation .sect1{margin:0 0 2rem;padding:.0625rem 0 0}:host(.cp-documentation--has-external-header) .sect1:first-child>h2:first-child,:host(.cp-documentation--has-external-header) .sect1:first-child>h3:first-child{margin-top:0}.listingblock,.literalblock{margin:1rem 0}.quoteblock,.verseblock{border-left:.25rem solid #d2d2d2;margin:1rem 0;padding:1rem 1rem 1rem 2rem}.quoteblock.pullleft,.verseblock.pullleft{float:left;margin-right:3rem;width:25rem}@media (min-width:768px){.quoteblock.pullleft,.verseblock.pullleft{margin-left:-1rem}}.quoteblock.pullright,.verseblock.pullright{float:right;margin-left:3rem;width:25rem}@media (min-width:768){.quoteblock.pullright,.verseblock.pullright{margin-right:-2rem}}@media (min-width:1100px){.quoteblock.pullright,.verseblock.pullright{margin-right:-10rem}}.quoteblock>:first-child,.verseblock>:first-child{margin-top:0}.quoteblock .content,.verseblock .content{font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;font-size:1.25rem;line-height:1.6667}.quoteblock .attribution,.verseblock .attribution{font-size:.875rem;font-style:italic;font-weight:600;line-height:1.6667;text-transform:uppercase}.quoteblock .attribution .citetitle,.verseblock .attribution .citetitle{color:#585858}.quoteblock .attribution cite,.verseblock .attribution cite{font-size:1em}.quoteblock blockquote{font-style:italic;margin:0;padding:0}.quoteblock blockquote .content>:first-child{margin-top:0}.quoteblock blockquote .content>:first-child:before{color:#e00;content:"â€œ";display:block;float:left;font-size:2.75rem;font-style:normal;line-height:1.125em;margin-right:.5rem}.quoteblock blockquote .content>:first-child .content>:first-child:before{content:none}.imageblock{margin:1rem 0}.imageblock.pullleft{float:left;margin-right:3rem;width:25rem}@media (min-width:768px){.imageblock.pullleft{margin-left:-1rem}}.imageblock.pullright{float:right;margin-left:3rem;width:25rem}@media (min-width:768){.imageblock.pullright{margin-right:-2rem}}@media (min-width:1100px){.imageblock.pullright{margin-right:-10rem}}.imageblock.interrupter{margin:2rem 0}@media (min-width:768px){.imageblock.interrupter{margin-left:-1rem;margin-right:-2rem}.imageblock.interrupter .caption{margin-left:1rem;margin-right:2rem}}@media (min-width:1100px){.imageblock.interrupter{margin-right:-10rem}.imageblock.interrupter .caption{margin-right:10rem}}.imageblock.interrupter img{max-width:100%}.imageblock .caption{color:#585858;display:block;font-size:.875rem;line-height:1.6667;margin:.5rem 0 0}.rhdocs-footnotes{border-top:.0625rem solid #d2d2d2;margin:3rem 0 1rem;padding:1rem 0 0}.rhdocs-footnotes>ol{margin:0;padding:0 0 0 1.5rem}@supports (counter-reset:footnotenum){.rhdocs-footnotes>ol{counter-reset:footnotenum;list-style:none;padding:0}.rhdocs-footnotes>ol>li{counter-increment:footnotenum}.rhdocs-footnotes>ol>li:before{color:#585858;content:"[" counter(footnotenum) "]";display:inline-block;margin-right:.25rem}}.rhdocs-footer{background:#ededed;color:#151515;font-size:.875rem;line-height:1.6667;margin:3rem 0 0;padding:1rem}.center{margin-left:auto;margin-right:auto}.stretch{width:100%}.visually-hidden{overflow:hidden;position:absolute;clip:rect(0,0,0,0);border:0;height:.0625rem;margin:-.0625rem;padding:0;width:.0625rem}.rh-docs-legal-notice{margin-top:4em}pre,pre[class]{margin:0;padding:1.25em 1em;position:relative}code[class*=language-],pre[class*=language-]{color:#151515;-moz-tab-size:4;-o-tab-size:4;tab-size:4}code.language-none,code.language-text,code.language-txt,pre.language-none,pre.language-text,pre.language-txt{color:#151515}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{background:#cceae7;color:#263238}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#cceae7;color:#263238}:not(pre)>code[class*=language-]{border-radius:.2em;padding:.1em;white-space:normal}.token.atrule{color:#40199a}.token.attr-name{color:#06c}.token.attr-value,.token.attribute{color:#b300b3}.token.boolean{color:#40199a}.token.builtin,.token.cdata,.token.char,.token.class,.token.class-name{color:#06c}.token.comment{color:#6a6e73}.token.constant{color:#40199a}.token.deleted{color:#c9190b}.token.doctype{color:#6a6e73}.token.entity{color:#c9190b}.token.function{color:#40199a}.token.hexcode{color:#b300b3}.token.id,.token.important{color:#40199a;font-weight:700}.token.inserted{color:#06c}.token.keyword{color:#40199a}.token.number{color:#b300b3}.token.operator{color:#06c}.token.prolog{color:#6a6e73}.token.property{color:#06c}.token.pseudo-class,.token.pseudo-element{color:#b300b3}.token.punctuation,.token.regex{color:#06c}.token.selector{color:#c9190b}.token.string{color:#b300b3}.token.symbol{color:#40199a}.token.unit{color:#b300b3}.token.url,.token.variable{color:#c9190b}.rhdocs.local-render{margin:0 auto;max-width:45.8125rem;padding:0 1.5rem}@media print{.field code,.field pre,code[class*=language-],pre,pre[class*=language-]{white-space:pre-wrap!important;word-wrap:break-word!important;overflow-wrap:break-word!important;word-break:break-word!important}}.book-nav__list[class]{display:flex;justify-content:space-between;line-height:var(--jupiter__lineHeight--xs,1.3333);list-style:none;margin:5rem 0 0;padding:0}@media (min-width:1200px){.book-nav__list[class]{display:grid;gap:2rem;grid-template-columns:repeat(2,minmax(0,1fr))}}.book-nav__item a{display:inline-block;font-size:.875rem;font-weight:500;padding-left:1.25rem;position:relative;text-transform:uppercase}.book-nav__item a:before{background:url(/sites/dxp-docs/penumbra-dist/jupiter/images/arrow-down-solid.svg) no-repeat;background-size:contain;content:"";display:block;height:.875rem;left:0;position:absolute;top:.125rem;transform:rotate(90deg);width:.875rem}.book>.titlepage:not(:last-child),.rhdocs .chapter,section[id]{padding-bottom:3.75rem}.book>.titlepage .chapter:last-child,.book>.titlepage section[id]:last-child,.chapter .chapter:last-child,.chapter section[id]:last-child,section[id] .chapter:last-child,section[id] section[id]:last-child{margin-bottom:-3.75rem}.rhdocs .codeblock__wrapper+section[id],pre+section[id]{padding-top:3.75rem}.rhdocs .cta-link{font-size:inherit}.rhdocs a{word-wrap:break-word;overflow-wrap:break-word}.rhdocs .caution,.rhdocs .important,.rhdocs .note,.rhdocs .tip,.rhdocs .warning{padding:.8888888889em;position:relative}.rhdocs .QSIPopOver{bottom:18.75rem!important;top:auto!important}.rhdocs .alert{position:relative}.rhdocs button.dismiss-button{background:none;border:0;cursor:pointer;height:2.5rem;margin-top:-1.25rem;padding:0;position:absolute;right:.3125rem;text-align:center;top:50%;width:2.5rem;z-index:50}.rhdocs button.dismiss-button:after{content:"\f109";display:inline-block;filter:alpha(opacity=30);font-family:rh-web-iconfont;font-size:1.3125rem;font-style:normal;font-variant:normal;font-weight:400;line-height:1;line-height:2.5rem;opacity:.3;text-decoration:inherit;text-rendering:optimizeLegibility;text-transform:none!important;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-smoothing:antialiased}.rhdocs .book>.titlepage,.rhdocs .chapter,.rhdocs section[id]{padding-bottom:var(--rh-space-4xl,64px)}.rhdocs .alert{border:0;border-radius:0}.rhdocs .alert>h2:first-child,.rhdocs .alert>h3:first-child,.rhdocs .alert>h4:first-child,.rhdocs .alert>h5:first-child,.rhdocs .alert>h6:first-child,.rhdocs .alert>p:first-child{margin-top:0!important}.rhdocs .alert>p:last-child{margin-bottom:0!important}.rhdocs .alert-w-icon[class]{padding-left:2.8125rem}.rhdocs .alert-w-icon .alert-icon{float:left;font-size:1.125rem;margin-left:-1.875rem;margin-right:.625rem}.rhdocs .alert-w-icon .alert-icon[class*=" rh-icon-"],.rhdocs .alert-w-icon .alert-icon[class^=rh-icon-]{font-size:2.25rem;line-height:1em;margin-left:-2.5rem;margin-top:-.375rem}.rhdocs .alert-w-icon .alert-icon[class*=" icon-innov-prev"],.rhdocs .alert-w-icon .alert-icon[class^=icon-innov-prev]{font-size:1.3125rem;margin-top:.25rem}.rhdocs .alert-w-icon.alert-plain{background:none;color:#151515;padding-left:5rem}.rhdocs .alert-w-icon.alert-plain .alert-icon{font-size:3rem;margin-left:-4.375rem;margin-right:0}.rhdocs .alert-w-icon.alert-plain.alert-success .alert-icon{color:#3f9c35}.rhdocs .alert-w-icon.alert-plain.alert-info .alert-icon{color:#0088ce}.rhdocs .alert-w-icon.alert-plain.alert-warning .alert-icon{color:#f0ab00}.rhdocs .alert-w-icon.alert-plain.alert-danger .alert-icon{color:#e00}#target_banner .copy-url{float:right;margin-top:0}#target_banner .dropdown-menu{font-size:inherit}.titlepage .svg-img[data*="title_logo.svg"]{margin:1.5rem 0;width:15rem}.para{margin:1.49963rem 0}.para[class]{margin-bottom:1.49963rem}dd{margin-bottom:2.5rem}.rhdocs .card-light,.rhdocs .card-light-gray,.rhdocs .card-light-grey{background:#f0f0f0;border:.0625rem solid #f0f0f0;color:#151515}.rhdocs .card-light-gray.push-bottom:first-child,.rhdocs .card-light-grey.push-bottom:first-child,.rhdocs .card-light.push-bottom:first-child{margin-bottom:3.125rem!important}.rhdocs .card-light a.card-link,.rhdocs .card-light h1,.rhdocs .card-light h2,.rhdocs .card-light h3,.rhdocs .card-light h4,.rhdocs .card-light h5,.rhdocs .card-light h6,.rhdocs .card-light-gray a.card-link,.rhdocs .card-light-gray h1,.rhdocs .card-light-gray h2,.rhdocs .card-light-gray h3,.rhdocs .card-light-gray h4,.rhdocs .card-light-gray h5,.rhdocs .card-light-gray h6,.rhdocs .card-light-grey a.card-link,.rhdocs .card-light-grey h1,.rhdocs .card-light-grey h2,.rhdocs .card-light-grey h3,.rhdocs .card-light-grey h4,.rhdocs .card-light-grey h5,.rhdocs .card-light-grey h6{color:#151515}.rhdocs .card-light-gray.card-active:after,.rhdocs .card-light-grey.card-active:after,.rhdocs .card-light.card-active:after{border-top-color:#f0f0f0}.rhdocs .card-md,.rhdocs .card-narrow{display:block;padding:1.1875rem;white-space:normal;word-wrap:break-word}.rhdocs .card .card-heading.card-heading-sm,.rhdocs .card-sm .card .card-heading{font-size:1.0625em;font-weight:500;line-height:1.5}.rhdocs .card .card-heading.card-heading-flush{margin-bottom:.25rem}.rhdocs .card .card-heading.card-heading-red{color:#d10000}.rhdocs .card>p{margin-top:0}.rhdocs .card>p:last-child{margin-bottom:0}.rhdocs .new-experience{background-color:#e7f1fa;border:.0625rem solid #bee1f4;font-size:1rem;margin:1.5rem;padding:1.5rem;position:relative;z-index:1}@media (min-width:48rem){.new-experience{display:flex}.new-experience--contained{left:50%;position:relative;transform:translateX(-50%);width:calc(100vw - 2.5rem)}}.new-experience__primary-content{flex-grow:1}@media (min-width:48rem){.new-experience__primary-content{margin-right:1.25rem}}.new-experience__title{font-size:inherit;font-weight:inherit;line-height:1.6;margin:0;padding:0}.new-experience__title+a,.new-experience__title+pfe-cta{display:inline-block;margin-top:1.5em}.new-experience__secondary-content{min-width:12.5rem}@media (min-width:48rem){.new-experience__secondary-content{text-align:right}}.example{border-left:.3125rem solid #ccc;margin-bottom:2rem;padding:1rem 0 1rem 1rem}dl.calloutlist[class]{display:grid;gap:1.25em .75em;grid-template-columns:min-content 1fr}dl.calloutlist[class] dt{float:none;margin:0;padding:0}dl.calloutlist[class] dd{margin:0;padding:0}dl.calloutlist[class] dd>:first-child{margin-top:0}dl.calloutlist[class] dd>:last-child{margin-bottom:0}.toast{background-color:#000;background-color:rgba(0,0,0,.9);bottom:.9375rem;box-shadow:0 .125rem .3125rem 0 rgba(0,0,0,.26);color:#fff;left:.9375rem;max-width:32.8125rem;min-width:6.25rem;padding:.9375rem;position:fixed;right:.9375rem;transform:translate3d(0,150%,0);transition:transform .2s cubic-bezier(.465,.183,.153,.946);will-change:transform;z-index:999}.toast.show{transform:translateZ(0)}.toast a{color:#fff;text-decoration:underline}.toast a:focus,.toast a:hover{color:#2b9af3}.toast a.btn{text-decoration:none}.toast .btn.btn-link{color:#fff}.toast .close{color:#fff;opacity:.3;text-decoration:none}.toast .close:focus,.toast .close:hover{color:#fff;opacity:.5}.no-csstransforms3d.csstransitions .toast{transition:all .2s cubic-bezier(.465,.183,.153,.946)}.no-csstransforms3d .toast{opacity:0;visibility:hidden}.no-csstransforms3d .toast.show{opacity:1;visibility:visible}.annotator-outer[class][class]{display:none;flex-direction:column;flex-grow:1;height:auto;margin:0;position:static;width:auto}@media (min-width:1400px){.annotator-outer[class][class]{display:flex}}.annotator-frame[class] *{height:auto}@media (min-width:1400px){.annotator-frame .h-sidebar-iframe[class]{position:static;width:calc(100% + 1.5rem)}}.annotator-toolbar[class][class]{position:static;width:auto}.annotator-toolbar>ul,.annotator-toolbar>ul>li{display:block;height:auto;list-style:none;margin:0;padding:0;width:auto}.annotator-toolbar>ul>li{display:flex;justify-content:flex-end}.annotator-frame[class] .annotator-frame-button--sidebar_toggle,.annotator-outer .annotator-frame-button[class][class],.app-content-wrapper *{font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif!important}.annotator-outer .annotator-frame-button[class][class]{font-size:.9375rem;font-weight:500;height:auto;line-height:1.333;margin-right:1.875rem;padding:.75em 1em;position:static}@media (min-width:1400px){.annotator-outer .annotator-frame-button[class][class]{margin-right:0}}.annotator-outer iframe{flex-grow:1;margin-bottom:1.25rem}@media (min-width:1400px){.annotator-outer iframe{min-height:37.5rem}}.producttitle{color:#000;font-size:1.25rem;text-transform:uppercase}.producttitle .productnumber{color:var(--jupiter__palette__red--50,#e00)}.cp-modal-open,.zoom-open{overflow:hidden}.cp-modal,.cp-video-modal,.zoom-modal{bottom:0;display:none;filter:alpha(opacity=0);left:0;opacity:0;outline:0;overflow:hidden;position:fixed;right:0;top:0;transition:all .2s cubic-bezier(.465,.183,.153,.946);z-index:1040;z-index:1050;-webkit-overflow-scrolling:touch}.rhdocs .in.cp-modal,.rhdocs .in.cp-video-modal,.rhdocs .in.zoom-modal{display:block;filter:alpha(opacity=100);opacity:1;overflow-x:hidden;overflow-y:auto}.rhdocs .cp-modal .close,.rhdocs .cp-video-modal .close,.rhdocs .zoom-modal .close{background-color:#fff;border-radius:50%;color:#1a1a1a;font-size:1.75rem;height:28px;height:1.75rem;line-height:1.75rem;margin-bottom:.375rem;margin-top:0;opacity:.9;position:absolute;right:-.5rem;text-shadow:none;top:0;width:28px;width:1.75rem}.cp-modal .close:after,.cp-video-modal .close:after,.zoom-modal .close:after{line-height:1.75rem}.cp-modal-wrap,.zoom-wrap{margin:.625rem;padding-top:.5rem;position:relative}@media (min-width:48rem){.rhdocs .cp-modal-wrap,.rhdocs .zoom-wrap{margin:2.8125rem auto;width:38.4375rem}}@media (min-width:62rem){.rhdocs .cp-modal-wrap,.rhdocs .zoom-wrap{width:49.8958rem}}@media (min-width:75rem){.rhdocs .cp-modal-wrap,.rhdocs .zoom-wrap{width:60.3125rem}}.rhdocs .cp-modal-body :last-child{margin-bottom:0}.rhdocs .cp-modal-backdrop,.rhdocs .zoom-backdrop{background-color:#000;bottom:0;display:none;filter:alpha(opacity=0);left:0;opacity:0;position:fixed;right:0;top:0;transition:opacity .2s cubic-bezier(.465,.183,.153,.946);z-index:1040}.rhdocs .in.cp-modal-backdrop,.rhdocs .in.zoom-backdrop{display:block;filter:alpha(opacity=80);opacity:.8}.rhdocs .cp-modal-body{background:#fff;padding:1.875rem}.rhdocs .cp-modal[data-cp-modal-video=true] .cp-modal-body,.rhdocs .cp-video-modal .cp-modal-body{padding:0}.rhdocs [data-action=zoom]{position:relative}.rhdocs [data-action=zoom]:after{background:rgba(0,0,0,.4);bottom:0;color:#fff;display:inline-block;font-family:rh-web-iconfont;font-style:normal;font-variant:normal;font-weight:400;line-height:1;padding:.375rem;position:absolute;right:0;text-decoration:inherit;text-decoration:none!important;text-rendering:optimizeLegibility;text-transform:none!important;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-smoothing:antialiased}.rhdocs [data-action=zoom]:focus:after,.rhdocs [data-action=zoom]:hover:after{background:rgba(0,0,0,.9)}.rhdocs .zoom-wrap .zoom-larger{text-align:center}.rhdocs .zoom-wrap .zoom-larger a{color:#fff}.rhdocs .zoom-wrap .zoom-larger a:focus,.rhdocs .zoom-wrap .zoom-larger a:hover{color:#fff;text-decoration:underline}.rhdocs .zoom-wrap .zoom-larger a:after{content:"â¿»";display:inline-block;margin-left:.25rem}.rhdocs .zoom-body{background:#fff;border-radius:.5rem;margin:0 0 1rem;padding:1rem;text-align:center}.rhdocs .zoom-body .video-wrapper{height:0;overflow:hidden;padding-bottom:56.25%;position:relative}.rhdocs .zoom-body .video-wrapper[data-aspect-ratio="4:3"]{padding-bottom:75%}.rhdocs .zoom-body iframe{height:100%;left:0;position:absolute;top:0;width:100%}.rhdocs .para>.title[class],.rhdocs p.title[class]{font-size:1rem;font-style:normal;font-weight:700;line-height:1.6667;margin:1.25rem 0 0;text-transform:none}.rhdocs .para>.title[class]+.content>:first-child,.rhdocs .para>.title[class]+p,.rhdocs p.title[class]+.content>:first-child,.rhdocs p.title[class]+p{margin-top:0}.rhdocs [class] pre .caution,.rhdocs [class] pre .important,.rhdocs [class] pre .note,.rhdocs [class] pre .tip,.rhdocs [class] pre .warning{background:transparent;border:0;color:inherit;font:inherit;margin:0;padding:0}.rhdocs [class] pre .caution:after,.rhdocs [class] pre .important:after,.rhdocs [class] pre .note:after,.rhdocs [class] pre .tip:after,.rhdocs [class] pre .warning:after{content:none}.rhdocs [class] code.email{background-color:transparent;font:inherit;padding:0}.rhdocs [class] .author{margin-bottom:1.5rem}.rhdocs [class] .author .author{margin-bottom:0}.rhdocs table{margin:2rem 0}.rhdocs [class] table{width:auto}.rhdocs table .table-contents table{max-width:100%;overflow:auto}.rhdocs rh-table table{margin:0;max-width:9999em;overflow:visible}.rhdocs td,.rhdocs th{border-left:0;padding:.5em 1rem;transition:background .25s ease-out}.rhdocs td.content--md[class][class],.rhdocs th.content--md[class][class]{min-width:13em}.rhdocs td.content--lg[class][class],.rhdocs th.content--lg[class][class]{min-width:20em}.rhdocs thead th{padding-top:1.5em}.rhdocs caption{color:currentColor;color:var(--pfe-table__caption--Color,currentColor);font-weight:700;margin-bottom:.5rem;margin-top:.5rem;text-align:center}.rhdocs .revhistory table td,.rhdocs .revhistory table th{border-color:transparent}.rhdocs .revhistory table td{padding:.625rem .875rem}.rhdocs .revhistory table.simplelist{margin:0}@media print{#masthead{display:none!important}}.rh-table--is-full-screen #to-top{display:none}.rhdocs{--rh-table--maxHeight:calc(100vh - 6.25rem);color:#151515;font-family:var(--rh-font-family-body-text,RedHatText,"Red Hat Text","Noto Sans Arabic","Noto Sans Hebrew","Noto Sans JP","Noto Sans KR","Noto Sans Malayalam","Noto Sans SC","Noto Sans TC","Noto Sans Thai",Helvetica,Arial,sans-serif);font-size:var(--rh-body-copy-lage,1.125rem);line-height:1.6667;-moz-tab-size:4;-o-tab-size:4;tab-size:4}.rhdocs rh-codeblock::slotted(#content){border-radius:.25rem;padding:var (--rh-space-lg,16px)}.rhdocs rh-codeblock .screen{display:grid;grid-template-columns:1fr 4.375rem}.rhdocs rh-codeblock[class][class][class][class][class]{max-width:99999em}.rhdocs .codeblock__copy span{display:block;height:0;position:absolute;visibility:hidden;width:0}.rhdocs .codeblock__copy:focus{outline:.0625rem dashed currentcolor}.rhdocs .codeblock__copy svg#icon--copy{height:1rem;width:1rem}.rhdocs pre{border:0;max-height:-moz-max-content;max-height:max-content}.rhdocs pre,pre[class]{margin:0;padding:1.25em 1em;position:relative}.rhdocs rh-code-block>div.codeblock__inner-wrapper>pre,.rhdocs rh-code-block>div.codeblock__inner-wrapper>pre[class]{margin:0;padding:0;position:relative}.rhdocs code[class*=language-],pre[class*=language-]{color:#151515;-moz-tab-size:4;-o-tab-size:4;tab-size:4}.rhdocs code.literal{background:#eee;border-radius:.25rem;color:#000;font-size:.875rem;line-height:1.6667;overflow-wrap:break-word;padding:.125em .5em;word-break:break-word}.rhdocs code.literal,.rhdocs kbd,.rhdocs span.keycap{font-family:RedHatMono,Red Hat Mono,Consolas,monospace}.rhdocs kbd,.rhdocs span.keycap{background-color:#eee;background-image:linear-gradient(180deg,#ddd,#eee,#fff);border-radius:.1875rem;box-shadow:0 -.0625rem 0 0 #fff,0 .0625rem 0 .1875rem #aaa;font-size:90%;font-weight:400;margin:0 .25rem;padding:.125rem .375rem}.rhdocs ol,.rhdocs ul{margin:1rem 0;padding:0 0 0 1.5rem}.rhdocs ._additional-resources[class][class],.rhdocs ._additional-resources[class][class][id]:last-child{background:#fff;border:.0625rem solid #d2d2d2;border-radius:.1875rem;margin:2em 0 4em;padding:2rem 2rem 1rem}.rhdocs ._additional-resources[class][class] ul{border:0;list-style:none;margin:0;padding:0;position:relative}.rhdocs ._additional-resources[class][class] li{border-bottom:.0625rem solid #d2d2d2;box-sizing:content-box;margin:0;padding:1rem 1.5rem 1rem 0;-moz-column-break-inside:avoid;break-inside:avoid}.rhdocs ._additional-resources[class][class] li:last-child{border:0}.rhdocs section.section#additional_resource .additional-resources__heading,.rhdocs section.section#additional_resource .heading,.rhdocs section.section#additional_resource h1,.rhdocs section.section#additional_resource h2,.rhdocs section.section#additional_resource h3,.rhdocs section.section#additional_resource h4,.rhdocs section.section#additional_resource h5,.rhdocs section.section#additional_resource h6,.rhdocs section.section#additional_resource p.title{display:block;font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-size:1.125rem;font-weight:700;line-height:1.5rem;margin:0 0 .5rem;padding:0;text-transform:uppercase}.rhdocs section.section:first-of-type{margin-top:var(--rh-space-4xl,64px)}.rhdocs section.section p{margin-bottom:var(--rh-space-lg,16px);margin-top:0;word-wrap:break-word}.rhdocs .section.section h1,.rhdocs .section.section h2,.rhdocs .section.section h3,.rhdocs .section.section h4,.rhdocs .section.section h5,.rhdocs .section.section h6,.rhdocs h1,.rhdocs h2,.rhdocs h3,.rhdocs h4,.rhdocs h5,.rhdocs h6{font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-weight:400;line-height:1.3333}.rhdocs h1:first-of-type,.rhdocs h2:first-of-type,.rhdocs h3:first-of-type,.rhdocs h4:first-of-type,.rhdocs h5:first-of-type,.rhdocs h6:first-of-type{margin-top:0}.rhdocs h1,.rhdocs h2,.rhdocs h3,.rhdocs h4,.rhdocs h5,.rhdocs h6{font-family:RedHatDisplay,Red Hat Display,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.3333}.rhdocs h2,.rhdocs section.section h2{font-size:var(--rh-font-size-heading-md,1.75rem)}.rhdocs h3,.rhdocs section.section h3{font-size:1.5rem;font-weight:400}.rhdocs dl dt{font-weight:600;margin:.5rem 0}.rhdocs dl{display:block;margin-block-end:1em;margin-block-start:1em;margin-inline-end:0;margin-inline-start:0}.rhdocs .para{margin:1.49963rem 0}.rhdocs dl.calloutlist[class] dt{float:none;margin:0;padding:0}.rhdocs dl.calloutlist[class] dd>:last-child{margin-bottom:0}.rhdocs dl.calloutlist[class]{display:grid;gap:1.25em .75em;grid-template-columns:fit-content(40%) 1fr}.rhdocs .calloutlist dt{clear:left;display:flex;flex-wrap:wrap;float:left;margin:0;padding:0 .5rem 0 0}.rhdocs .calloutlist dt a:not(:first-child){padding-left:4px}.rhdocs dl.calloutlist[class] dd{margin:0;padding:0}.rhdocs .callout,.rhdocs .colist>ol>li:before,.rhdocs .conum{background:#06c;border-radius:50%;color:#fff;display:inline-block;font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;font-size:.75rem;font-style:normal;font-weight:600;height:1.25rem;line-height:1.35rem;padding:0;position:relative;text-align:center;top:-.125em;vertical-align:middle;width:1.25rem}.rhdocs img,.rhdocs object,.rhdocs svg{display:inline-block;max-width:100%;vertical-align:middle}.rhdocs .titlepage .svg-img[data*="title_logo.svg"]{margin:1.5rem 0;width:15rem}.rhdocs[class] .author{margin-bottom:1.5rem}.rhdocs[class] .author .author{margin-bottom:0}.rhdocs .para>.title[class],p.title[class]{font-size:1rem;font-style:normal;font-weight:700;line-height:1.6667;margin:1.25rem 0 0}.rhdocs .example{border-left:.3125rem solid #ccc;margin-bottom:2rem;padding:1rem 0 1rem 1rem}.rhdocs code{background:#eee;color:#000;font-family:RedHatMono,Red Hat Mono,Consolas,monospace;font-size:.875rem;line-height:1.6667;overflow-wrap:break-word;padding:.125em .5em;word-break:break-word}.rhdocs .para[class]{margin-bottom:1.49963rem}.rhdocs[class] code.email{background-color:transparent;font:inherit;padding:0}rh-alert.admonition #description,rh-alert.admonition p{font-size:var(--rh-font-size-body-text-md,1rem)}rh-alert{width:-moz-fit-content;width:fit-content}.rhdocs .producttitle{color:#000;font-size:1.25rem;text-transform:uppercase}.rhdocs dl{margin:1rem 0}.rhdocs dl dt{font-weight:600;margin:.5rem 0}.rhdocs ol ol{list-style:lower-roman}.rhdocs .codeblock--processed pf-clipboard-copy::part(input),.rhdocs .codeblock--processed pf-clipboard-copy::part(span){display:none}.token.tag{color:#c9190b}.calloutlist div.para{margin:0}rh-alert.admonition{margin-bottom:var(--rh-space-lg,1rem)}.guibutton,.guimenu,.guimenuitem{font-weight:700}.guibutton{font-size:90%;padding:.1875rem}.guibutton:before{content:"["}.guibutton:after{content:"]"}.docs-content-container,.rhdocs{--rh-table--maxHeight:calc(100vh - 6.25rem);color:#151515;font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;font-size:1.125rem;line-height:1.6667;-moz-tab-size:4;-o-tab-size:4;tab-size:4}pre[hidden]{display:none}.codeblock[class][class][class][class][class]{max-width:99999em}.codeblock__wrapper{background:var(--rh-color-surface-lighter,#f2f2f2);margin:1rem 0;overflow:visible;position:relative;transform:translate(0);z-index:0}.codeblock__inner-wrapper:after{content:"";display:block;min-height:.625rem;width:4.375rem}.codeblock__copy{--pfe-clipboard--icon--Color--hover:#06c;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#f0efef;height:1.75rem;left:calc(100% - 2.75rem - var(--scrollbar__width, 0px));padding:.3125rem .375rem;position:absolute;top:1rem;width:1.75rem;z-index:2}.codeblock__inner-wrapper pre{border:0;max-height:-moz-max-content;max-height:max-content}.pfe-clipboard:not([copied]) .pfe-clipboard__text--success,:host(:not([copied])) .pfe-clipboard__text--success{display:none!important}.codeblock[class]{margin:0;overflow:visible;padding-right:0}pre{display:block;font-size:.8125rem;line-height:1.42857;margin:0 0 .625rem;word-break:break-all;word-wrap:break-word;background-color:var(--rh-color-surface-lighter,#f2f2f2);border:.0625rem solid #ccc;border-radius:.25rem;color:#333}.docs-content-container pre,.rhdocs pre{background:var(--rh-color-surface-lighter,#f2f2f2);color:#151515;font-family:RedHatMono,Red Hat Mono,Consolas,monospace;font-size:.875rem;line-height:1.6667;overflow-wrap:normal;white-space:pre;word-break:normal}.rhdocs pre[class]{line-height:1.6667;overflow-x:auto}rh-codeblock pre[class][class]{overflow-x:auto}.pfe-clipboard__text--success{background-color:#ddd;border:1px solid #000;border-radius:2px}*,:after,:before{box-sizing:border-box}:root{--rh-space-xs:4px;--rh-space-sm:6px;--rh-space-md:8px;--rh-space-lg:16px;--rh-space-xl:24px;--rh-space-2xl:32px;--rh-space-3xl:48px;--rh-space-4xl:64px;--rh-space-5xl:80px;--rh-space-6xl:96px;--rh-space-7xl:128px;--rh-font-size-body-text-xs:.75rem;--rh-font-size-body-text-sm:.875rem;--rh-font-size-body-text-md:1rem;--rh-font-size-body-text-lg:1.125rem;--rh-font-size-body-text-xl:1.25rem;--rh-font-size-body-text-2xl:1.5rem;--rh-font-size-heading-xs:1.25rem;--rh-font-size-heading-sm:1.5rem;--rh-font-size-heading-md:1.75rem;--rh-font-size-heading-lg:2.25rem;--rh-font-size-heading-xl:2.5rem;--rh-font-size-heading-2xl:3rem;--pfe-navigation--logo--maxWidth:200px;--pfe-navigation__logo--height:40px;--pfe-navigation--fade-transition-delay:500ms;--pfe-navigation__nav-bar--highlight-color:var(--rh-color-brand-red-on-dark,#e00);--pf-global--icon--FontSize--sm:.75rem}body,html{font-family:Red Hat Text,sans-serif;font-size:var(--rh-font-size-body-text-md,1rem);line-height:var(--rh-line-height-body-text,1.5);margin:0}h1,h2,h3,h4,h5,h6{font-family:Red Hat Display,sans-serif;font-weight:400;line-height:var(--rh-line-height-heading,1.3)}h1{font-size:var(--rh-font-size-heading-2xl,3rem);line-height:62px}h2{font-size:var(--rh-font-size-heading-xl,2.5rem);line-height:48px}h3{font-size:var(--rh-font-size-heading-lg,2.25rem)}h4{font-size:var(--rh-font-size-heading-md,2.25rem)}h5{font-size:var(--rh-font-size-heading-sm,2.25rem)}h6{font-size:var(--rh-font-size-heading-xs,2.25rem)}main{line-height:30px}section{padding-bottom:3rem;padding-top:3rem}img{height:auto;max-width:100%}a{color:var(--rh-color-interactive-blue-darker,#06c);text-decoration:none}a:hover{color:var(--rh-color-interactive-blue-darkest,#004080)}rh-alert.html-container a{text-decoration:underline}.container{padding-left:12px;padding-right:12px}.container,.container-fluid{margin-left:auto;margin-right:auto;width:100%}.container-fluid{padding:12px}@media (min-width:576px){.container{max-width:540px}}@media (min-width:768px){.container{max-width:720px}}@media (min-width:992px){.container{max-width:960px}}@media (min-width:1200px){.container{min-width:1140px}}@media (min-width:1400px){.container{min-width:1320px}}.grid{display:grid;gap:var(--rh-space-xl,24px)}.grid-center{margin:auto}.grid.grid-col-2{grid-template-columns:repeat(2,1fr)}.grid.grid-col-3{grid-template-columns:repeat(3,1fr)}.grid.grid-col-4{grid-template-columns:repeat(4,1fr)}.grid.grid-col-5{grid-template-columns:repeat(5,1fr)}.grid.grid-col-6{grid-template-columns:repeat(6,1fr)}.grid.grid-col-7{grid-template-columns:repeat(7,1fr)}.grid.grid-col-8{grid-template-columns:repeat(8,1fr)}.grid.grid-col-9{grid-template-columns:repeat(9,1fr)}.grid.grid-col-10{grid-template-columns:repeat(10,1fr)}.grid.grid-col-11{grid-template-columns:repeat(11,1fr)}.grid.grid-col-12{grid-template-columns:repeat(12,1fr)}@media (min-width:768px){.grid.grid-col-md-2{grid-template-columns:repeat(2,1fr)}.grid.grid-col-md-3{grid-template-columns:repeat(3,1fr)}.grid.grid-col-md-4{grid-template-columns:repeat(4,1fr)}.grid.grid-col-md-5{grid-template-columns:repeat(5,1fr)}.grid.grid-col-md-6{grid-template-columns:repeat(6,1fr)}.grid.grid-col-md-7{grid-template-columns:repeat(7,1fr)}.grid.grid-col-md-8{grid-template-columns:repeat(8,1fr)}.grid.grid-col-md-9{grid-template-columns:repeat(9,1fr)}.grid.grid-col-md-10{grid-template-columns:repeat(10,1fr)}.grid.grid-col-md-11{grid-template-columns:repeat(11,1fr)}.grid.grid-col-md-12{grid-template-columns:repeat(12,1fr)}}@media (min-width:992px){.grid.grid-col-lg-2{grid-template-columns:repeat(2,1fr)}.grid.grid-col-lg-3{grid-template-columns:repeat(3,1fr)}.grid.grid-col-lg-4{grid-template-columns:repeat(4,1fr)}.grid.grid-col-lg-5{grid-template-columns:repeat(5,1fr)}.grid.grid-col-lg-6{grid-template-columns:repeat(6,1fr)}.grid.grid-col-lg-7{grid-template-columns:repeat(7,1fr)}.grid.grid-col-lg-8{grid-template-columns:repeat(8,1fr)}.grid.grid-col-lg-9{grid-template-columns:repeat(9,1fr)}.grid.grid-col-lg-10{grid-template-columns:repeat(10,1fr)}.grid.grid-col-lg-11{grid-template-columns:repeat(11,1fr)}.grid.grid-col-lg-12{grid-template-columns:repeat(12,1fr)}}.span-1{grid-column:span 1}.span-2{grid-column:span 2}.span-3{grid-column:span 3}.span-4{grid-column:span 4}.span-5{grid-column:span 5}.span-6{grid-column:span 6}.span-7{grid-column:span 7}.span-8{grid-column:span 8}.span-9{grid-column:span 9}.span-10{grid-column:span 10}.span-11{grid-column:span 11}.span-12{grid-column:span 12}@media (min-width:399px){.span-xs-1{grid-column:span 1}.span-xs-2{grid-column:span 2}.span-xs-3{grid-column:span 3}.span-xs-4{grid-column:span 4}.span-xs-5{grid-column:span 5}.span-xs-6{grid-column:span 6}.span-xs-7{grid-column:span 7}.span-xs-8{grid-column:span 8}.span-xs-9{grid-column:span 9}.span-xs-10{grid-column:span 10}.span-xs-11{grid-column:span 11}.span-xs-12{grid-column:span 12}}@media (min-width:768px){.span-md-1{grid-column:span 1}.span-md-2{grid-column:span 2}.span-md-3{grid-column:span 3}.span-md-4{grid-column:span 4}.span-md-5{grid-column:span 5}.span-md-6{grid-column:span 6}.span-md-7{grid-column:span 7}.span-md-8{grid-column:span 8}.span-md-9{grid-column:span 9}.span-md-10{grid-column:span 10}.span-md-11{grid-column:span 11}.span-md-12{grid-column:span 12}}@media (min-width:992px){.span-lg-1{grid-column:span 1}.span-lg-2{grid-column:span 2}.span-lg-3{grid-column:span 3}.span-lg-4{grid-column:span 4}.span-lg-5{grid-column:span 5}.span-lg-6{grid-column:span 6}.span-lg-7{grid-column:span 7}.span-lg-8{grid-column:span 8}.span-lg-9{grid-column:span 9}.span-lg-10{grid-column:span 10}.span-lg-11{grid-column:span 11}.span-lg-12{grid-column:span 12}}@media (min-width:1025px){.span-xl-1{grid-column:span 1}.span-xl-2{grid-column:span 2}.span-xl-3{grid-column:span 3}.span-xl-4{grid-column:span 4}.span-xl-5{grid-column:span 5}.span-xl-6{grid-column:span 6}.span-xl-7{grid-column:span 7}.span-xl-8{grid-column:span 8}.span-xl-9{grid-column:span 9}.span-xl-10{grid-column:span 10}.span-xl-11{grid-column:span 11}.span-xl-12{grid-column:span 12}}@media (min-width:1200px){.span-2xl-1{grid-column:span 1}.span-2xl-2{grid-column:span 2}.span-2xl-3{grid-column:span 3}.span-2xl-4{grid-column:span 4}.span-2xl-5{grid-column:span 5}.span-2xl-6{grid-column:span 6}.span-2xl-7{grid-column:span 7}.span-2xl-8{grid-column:span 8}.span-2xl-9{grid-column:span 9}.span-2xl-10{grid-column:span 10}.span-2xl-11{grid-column:span 11}.span-2xl-12{grid-column:span 12}}.flex{display:flex;flex-direction:column;gap:var(--rh-space-lg,16px)}.flex-row{flex-direction:row}.flex-column{flex-direction:column}@media (min-width:768px){.flex-md-row{flex-direction:row}.flex-md-column{flex-direction:column}}.typography-h1{font-size:var(--rh-font-size-heading-2xl,3rem)}.typography-h2{font-size:var(--rh-font-size-heading-xl,2.5rem)}.typography-h3{font-size:var(--rh-font-size-heading-lg,2.25rem)}.typography-h4{font-size:var(--rh-font-size-heading-md,1.75rem)}.typography-h5{font-size:var(--rh-font-size-heading-sm,1.5rem)}.typography-h6{font-size:var(--rh-font-size-heading-xs,1.25rem)}.content section{padding:0}.content h1,.content h2,.content h3,.content h4,.content h5,.content h6{margin:var(--rh-space-lg,16px) 0}.sr-only{height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);border:0}.list-unstyled{list-style:none;padding-left:0}.tooltip-content{align-items:center;display:flex;font-family:Red Hat Text;justify-content:center;text-transform:none}.tooltip-content .check-icon{margin-left:var(--rh-space-md,8px)}.doc-image-link{display:inline-block;text-decoration:none}.modal-img{display:block;width:100%}.modal-helper-text{margin-top:.5rem;text-align:center}.modal-helper-text a{color:#000;cursor:pointer}.modal-helper-text a:hover{text-decoration:underline}.modal-helper-text a:after{content:"⿻";margin-left:.25rem}pf-modal.pf-img-modal{--pf-c-modal-box--MaxHeight:90vh;overflow-y:scroll}pf-modal.pf-img-modal::part(close-button){background-color:#fff;border-radius:50%;color:#000;margin-right:-2rem;margin-top:-2rem}pf-modal.pf-img-modal::part(close-button):hover{opacity:.7}h2.truste-title{line-height:normal;margin-top:0}rh-alert p[slot=header]{color:#002952}@media (width < 992px){html:has(nav.mobile-nav .mobile-nav-wrapper){scroll-behavior:smooth;scroll-padding-top:4rem}html:has(nav.mobile-nav .mobile-jump-links){scroll-padding-top:7rem}html:has(nav.mobile-nav.hide-mobile-nav){scroll-padding-top:2rem}}.highlight{background:#fff4cc;color:#000}</style>
<style>rh-alert[data-v-84359384]{width:100%}</style>
<style>.search-btn[data-v-edc0d12c]{align-items:center;background-color:var(--rh-color-canvas-black,#151515);border:3px solid var(--rh-color-canvas-black,#151515);cursor:pointer;display:flex;flex-direction:column;height:100%;justify-content:center;outline:none;padding:14px var(--rh-space-md,8px)}.search-btn[data-v-edc0d12c]:focus{border-top:3px solid var(--rh-color-accent-brand-on-light,#e00);outline:2px dotted var(--rh-color-white,#fff)}.search-btn .search-icon[data-v-edc0d12c]{height:26px;padding:2px 0 var(--rh-space-xs,4px);width:20px}.search-btn .search-icon[data-v-edc0d12c],.search-icon-helper-text[data-v-edc0d12c]{color:var(--rh-color-white,#fff)}.search-mobile[data-v-edc0d12c]{margin-bottom:var(--rh-space-2xl,32px)}.search-mobile form[data-v-edc0d12c]{display:flex;gap:var(--rh-space-md,8px);margin:auto}.search-box[data-v-edc0d12c]{width:35rem}nav[data-v-edc0d12c]{background-color:#151515;justify-content:space-between;width:100%}a[data-v-edc0d12c],a[data-v-edc0d12c]:visited{color:#fff;display:inline-block;font-size:var(--rh-font-size-body-text-md,1rem)}.skip-link[class][class][data-v-edc0d12c]{font-size:var(--pf-global--FontSize--sm,.875rem);line-height:18px}.skip-link[class][class][data-v-edc0d12c]:focus{border-radius:.21429em;height:auto;left:50%;padding:.42857em .57143em;position:fixed;top:8px;transform:translateX(-50%);width:auto;z-index:99999;clip:auto;background:#fff;background:var(--pfe-navigation__skip-link--BackgroundColor,var(--pfe-theme--color--surface--lightest,#fff));color:#06c;color:var(--pfe-navigation__skip-link--Color,var(--pfe-theme--color--link,#06c));text-decoration:none}.visually-hidden[data-v-edc0d12c]{border:1px solid #06c;height:1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);white-space:nowrap}h3[data-v-edc0d12c]{color:#464646;font-family:var(--rh-font-family-heading,"Red Hat Display",Helvetica,Arial,sans-serif);font-size:var(--rh-font-size-body-text-lg,1.125rem)}.language-picker[data-v-edc0d12c]{align-items:center;background-color:#fff;display:flex;flex-direction:column;padding:var(--rh-space-xl,24px);width:100%}.language-picker h3[data-v-edc0d12c]{margin:0;padding:0 1rem 1rem}.language-picker ul[data-v-edc0d12c]{margin:0;padding:0}.language-picker a[data-v-edc0d12c]{color:#06c}.language-picker li[data-v-edc0d12c]{list-style:none}.language-dropdown[data-v-edc0d12c]{background:#fff;box-shadow:0 3px 6px rgba(0,0,0,.098);display:block!important;position:absolute;right:0;width:100%;z-index:104}.pfe-navigation.pfe-navigation--processed>[slot=secondary-links][data-v-edc0d12c]{height:auto;overflow:visible;visibility:visible;width:auto}.upper-navigation[data-v-edc0d12c]{padding:0 var(--rh-space-2xl,32px)}.upper-nav-container[data-v-edc0d12c]{border-bottom:1px solid #404040;margin:0}.upper-nav-hidden[data-v-edc0d12c]:not(:focus):not(:active){clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}.upper-nav-menu[data-v-edc0d12c]{align-items:center;display:flex;justify-content:flex-end;line-height:1.444;list-style:none;margin-bottom:0;margin-top:0;padding-left:0}.upper-nav-menu[data-v-edc0d12c],.upper-nav-menu>li[data-v-edc0d12c]{position:relative}.upper-nav-menu>li:not(:first-child)>a[data-v-edc0d12c]:before,.upper-nav-menu>li:not(:first-child)>button[data-v-edc0d12c]:before{background-color:#404040;content:"";height:40%;left:0;position:absolute;top:30%;width:1px}li[data-v-edc0d12c]{display:list-item;margin:0;padding:0;text-align:-webkit-match-parent}.upper-nav-menu button.upper-nav-links[data-v-edc0d12c]{border:0;border-top:3px solid transparent;cursor:pointer;line-height:1.444}.upper-nav-menu button.upper-nav-links[aria-expanded=true][data-v-edc0d12c]{outline-color:#151515}.upper-nav-menu button.upper-nav-links[aria-expanded=true] .upper-nav-arrow[data-v-edc0d12c]{filter:invert(0) sepia(2%) saturate(21%) hue-rotate(257deg) brightness(108%) contrast(100%);transform:rotate(270deg)}.upper-nav-menu button.upper-nav-links[aria-expanded=true][data-v-edc0d12c]:before{display:none}.upper-nav-menu .upper-nav-links[data-v-edc0d12c]{background-color:var(--pfe-navigation--BackgroundColor,var(--pfe-theme--color--surface--darkest,#151515));border-top:3px solid transparent;color:#fff;display:block;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-sm,.875rem);outline:none;padding:12px 12px 14px;text-decoration:none}.upper-nav-menu .upper-nav-links[data-v-edc0d12c]:hover{border-top-color:#b8bbbe}.upper-nav-menu .upper-nav-links[data-v-edc0d12c]:focus-within{outline:1px dashed var(--rh-color-white,#fff);outline-offset:-1px}.upper-nav-menu .upper-nav-links[data-v-edc0d12c]:focus-within:before{display:none}.upper-nav-dropdown-container[data-v-edc0d12c]{background:#fff;box-shadow:0 3px 6px rgba(0,0,0,.098);display:none;padding:5px 30px 24px;position:absolute;right:0;top:100%;width:500px;z-index:105}.upper-nav-dropdown-container>ul[data-v-edc0d12c]{-moz-column-count:2;column-count:2;list-style-type:none;padding:0;width:auto}.upper-nav-dropdown-container>ul li[data-v-edc0d12c]{color:#151515;font-family:var(--rh-font-family-heading,"Red Hat Display",Helvetica,Arial,sans-serif);font-size:var(--rh-font-size-body-text-sm,.875rem);list-style-type:none;margin-bottom:0}.upper-nav-dropdown-container>ul li span[data-v-edc0d12c]{font-weight:var(--rh-font-weight-body-text-medium,500)}.upper-nav-dropdown-container>ul ul[data-v-edc0d12c]{padding-left:0;padding-top:9px}.upper-nav-dropdown-container>ul>li[data-v-edc0d12c]{padding-top:19px;-moz-column-break-inside:avoid;break-inside:avoid}.upper-nav-dropdown-container>ul>li>ul>li[data-v-edc0d12c]{line-height:1.45;padding:4px 0}.upper-nav-menu .upper-nav-arrow[data-v-edc0d12c]{display:inline-block;filter:invert(100%) sepia(8%) saturate(7%) hue-rotate(1turn) brightness(100%) contrast(93%);height:18px;margin-left:5px;transform:rotate(90deg);vertical-align:middle;width:8px}#pfe-navigation__secondary-links .show[data-v-edc0d12c],.upper-navigation .show[data-v-edc0d12c]{display:block}.upper-nav-menu .upper-nav-links[aria-expanded=true][data-v-edc0d12c]:active,.upper-nav-menu .upper-nav-links[aria-expanded=true][data-v-edc0d12c]:focus,.upper-nav-menu .upper-nav-links[aria-expanded=true][data-v-edc0d12c]:hover{background-color:#fff;color:#151515}.upper-nav-menu .upper-nav-links[aria-expanded=true][data-v-edc0d12c]{background-color:#fff;border-top-color:#b8bbbe;color:#000;position:relative;z-index:1}.upper-nav-dropdown-container>ul a[data-v-edc0d12c]{color:var(--rh-color-accent-base-on-light,#06c);font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:14px;text-decoration:none}.pfe-navigation__search[data-v-edc0d12c]{background-color:var(--rh-color-white,#fff)}.pfe-navigation__search form[data-v-edc0d12c]{display:flex;gap:var(--rh-space-md,8px);margin:auto;max-width:992px}pfe-navigation [slot=secondary-links] .buttons[data-v-edc0d12c]{display:flex;flex-wrap:wrap;gap:var(--rh-space-md,8px);margin-top:4px}pfe-navigation [slot=secondary-links] .buttons a[data-v-edc0d12c]{border:1px solid #d2d2d2;border-radius:3px;color:#06c;cursor:pointer;flex-basis:calc(50% - 5px);font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-weight:var(--rh-font-weight-code-regular,400);padding:1em;text-align:center;text-decoration:none}pfe-navigation [slot=secondary-links] .mobile-lang-select[data-v-edc0d12c]{border:1px solid #d2d2d2;border-bottom-color:#3c3f42;cursor:pointer;display:flex;margin:3rem 0;position:relative}pfe-navigation [slot=secondary-links] .mobile-lang-select label[data-v-edc0d12c]{bottom:100%;color:#000;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:14px;font-weight:500;margin-bottom:5px;position:absolute}pfe-navigation [slot=secondary-links] .mobile-lang-select select[data-v-edc0d12c]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border-style:none;color:#000;flex-basis:100%;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:16px;line-height:24px;padding:6px 24px 6px 8px}select[data-v-edc0d12c]{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6' fill='none' viewBox='0 0 10 6'%3E%3Cpath fill='%23151515' d='M.678 0h8.644c.596 0 .895.797.497 1.195l-4.372 4.58c-.298.3-.695.3-.993 0L.18 1.196C-.216.797.081 0 .678 0'/%3E%3C/svg%3E");background-position:98% 50%;background-repeat:no-repeat}#inputLabel[data-v-edc0d12c]{align-items:center;display:flex;position:relative}#inputLabel form[data-v-edc0d12c]{width:100%}.input-box[data-v-edc0d12c]{font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);height:36px;padding:0 8px;width:100%}.input-box[data-v-edc0d12c]::-moz-placeholder{color:#6a6e73;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);font-weight:var(--rh-font-weight-code-regular,400);line-height:24px}.input-box[data-v-edc0d12c]::placeholder{color:#6a6e73;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);font-weight:var(--rh-font-weight-code-regular,400);line-height:24px}@media(max-width:960px){.search-box[data-v-edc0d12c]{width:28rem}}@media (max-width:768px){.right-navigation[data-v-edc0d12c],.upper-navigation[data-v-edc0d12c]{display:none}}@media (min-width:767px){.pfe-navigation__search form[data-v-edc0d12c]{padding:var(--rh-space-2xl,32px) 0}}</style>
<style>.element-invisible,.sr-only,.visually-hidden{height:1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);border:0;white-space:nowrap}@keyframes reveal-nav{0%{max-height:72px;max-height:var(--pfe-navigation__nav-bar--Height,72px);opacity:0;visibility:hidden}99%{max-height:72px;max-height:var(--pfe-navigation__nav-bar--Height,72px)}to{max-height:9999em;opacity:1;visibility:visible}}@keyframes reveal-nav-parts{0%{max-height:72px;max-height:var(--pfe-navigation__nav-bar--Height,72px);opacity:0;visibility:hidden}1%{visibility:visible}99%{max-height:72px;max-height:var(--pfe-navigation__nav-bar--Height,72px)}to{max-height:9999em;opacity:1;visibility:visible}}@media print{.pfe-navigation__menu,pfe-navigation [slot]{display:none!important}}pfe-navigation{--pfe-broadcasted--text:var(--pfe-theme--color--text,#151515);--pfe-broadcasted--text--muted:var(--pfe-theme--color--text--muted,#6a6e73);--pfe-broadcasted--link:var(--pfe-theme--color--link,#06c);--pfe-broadcasted--link--hover:var(--pfe-theme--color--link--hover,#004080);--pfe-broadcasted--link--focus:var(--pfe-theme--color--link--focus,#004080);--pfe-broadcasted--link--visited:var(--pfe-theme--color--link--visited,#6753ac);--pfe-broadcasted--link-decoration:var(--pfe-theme--link-decoration,none);--pfe-broadcasted--link-decoration--hover:var(--pfe-theme--link-decoration--hover,underline);--pfe-broadcasted--link-decoration--focus:var(--pfe-theme--link-decoration--focus,underline);--pfe-broadcasted--link-decoration--visited:var(--pfe-theme--link-decoration--visited,none)}@supports (display:grid){pfe-navigation{animation:reveal-nav .1618s 4s 1 forwards;max-height:72px;max-height:var(--pfe-navigation__nav-bar--Height,72px)}pfe-navigation>*{animation:reveal-nav-parts .1618s 4s 1 forwards;opacity:0;transition:opacity .1618s ease-in-out;transition:opacity var(--pfe-reveal-duration,.1618s) ease-in-out;visibility:hidden}}pfe-navigation.pfe-navigation--processed,pfe-navigation.pfe-navigation--processed>*{animation:none;opacity:1;visibility:visible}pfe-navigation pfe-primary-detail{display:none}pfe-navigation[pfelement]{display:block}pfe-navigation-dropdown{color:#151515;color:var(--pfe-navigation__dropdown--Color,#151515)}#pfe-navigation[breakpoint=desktop] .hidden-at-desktop[class][class][class],#pfe-navigation[breakpoint=mobile] .hidden-at-mobile[class][class][class],#pfe-navigation[breakpoint=tablet] .hidden-at-tablet[class][class][class],pfe-navigation[breakpoint=desktop] .hidden-at-desktop[class][class][class],pfe-navigation[breakpoint=mobile] .hidden-at-mobile[class][class][class],pfe-navigation[breakpoint=tablet] .hidden-at-tablet[class][class][class]{display:none}#pfe-navigation,#pfe-navigation *,pfe-navigation,pfe-navigation *{box-sizing:border-box}#pfe-navigation [pfelement] .pfe-navigation__log-in-link,pfe-navigation [pfelement] .pfe-navigation__log-in-link{display:none}#pfe-navigation,pfe-navigation{align-items:stretch;background:#151515;background:var(--pfe-navigation__nav-bar--Background,#151515);color:#fff;color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));display:flex;font-family:Red Hat Text,RedHatText,Arial,Helvetica,sans-serif;font-family:var(--pfe-navigation--FontFamily,Red Hat Text,RedHatText,Arial,Helvetica,sans-serif);font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);height:72px;height:var(--pfe-navigation__nav-bar--Height,72px);height:auto;line-height:1.5;margin:0;max-width:9999em;min-height:72px;min-height:var(--pfe-navigation__nav-bar--Height,72px);padding:0 16px;position:relative;z-index:95;z-index:var(--pfe-navigation--ZIndex,var(--pfe-theme--zindex--navigation,95))}@media (min-width:768px){#pfe-navigation,pfe-navigation{flex-wrap:wrap;margin:0;max-width:9999em;padding:0 16px}}@media (min-width:1200px){#pfe-navigation,pfe-navigation{margin:0 auto;padding:0 32px}}#pfe-navigation .pfe-navigation__dropdown,#pfe-navigation pfe-navigation-dropdown,pfe-navigation .pfe-navigation__dropdown,pfe-navigation pfe-navigation-dropdown{display:none}#pfe-navigation>[slot=account],#pfe-navigation>[slot=search],#pfe-navigation>[slot=secondary-links],pfe-navigation>[slot=account],pfe-navigation>[slot=search],pfe-navigation>[slot=secondary-links]{height:0;overflow:hidden;visibility:hidden;width:0}@media (min-width:768px){#pfe-navigation nav.pfe-navigation,pfe-navigation nav.pfe-navigation{align-items:stretch;display:flex;flex-wrap:wrap}}@media (min-width:992px){#pfe-navigation nav.pfe-navigation,pfe-navigation nav.pfe-navigation{flex-wrap:nowrap}}#pfe-navigation .pfe-navigation__logo-wrapper,pfe-navigation .pfe-navigation__logo-wrapper{align-items:center;display:flex;justify-content:flex-start;margin:0;min-width:150px;padding:10px 16px 10px 0}@media (min-width:768px){.pfe-navigation--no-main-menu #pfe-navigation .pfe-navigation__logo-wrapper,.pfe-navigation--no-main-menu pfe-navigation .pfe-navigation__logo-wrapper{margin-right:auto}}.pfe-navigation--collapse-secondary-links .pfe-navigation--no-main-menu #pfe-navigation .pfe-navigation__logo-wrapper,.pfe-navigation--collapse-secondary-links .pfe-navigation--no-main-menu pfe-navigation .pfe-navigation__logo-wrapper{margin-right:0}#pfe-navigation .pfe-navigation__logo-link,pfe-navigation .pfe-navigation__logo-link{border-radius:3px;display:block;margin-left:-8px;outline:0;padding:6px 8px;position:relative}#pfe-navigation .pfe-navigation__logo-link:focus,pfe-navigation .pfe-navigation__logo-link:focus{outline:0}#pfe-navigation .pfe-navigation__logo-link:focus:after,pfe-navigation .pfe-navigation__logo-link:focus:after{border:1px dashed #fff;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation .pfe-navigation__logo-image,pfe-navigation .pfe-navigation__logo-image{display:block;height:auto;width:100%}@media (min-width:576px){#pfe-navigation .pfe-navigation__logo-image,pfe-navigation .pfe-navigation__logo-image{height:40px;height:var(--pfe-navigation__logo--height,40px);width:auto}}@media print{#pfe-navigation .pfe-navigation__logo-image,pfe-navigation .pfe-navigation__logo-image{display:none}}#pfe-navigation .pfe-navigation__logo-image:only-child,pfe-navigation .pfe-navigation__logo-image:only-child{display:block}@media (min-width:576px){#pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--small,pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--small{height:32px;height:var(--pfe-navigation__logo--height,32px)}}@media print{#pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--screen,pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--screen{display:none!important}}@media screen{#pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--print,pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--print{display:none!important}}#pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--screen.pfe-navigation__logo-image--print,pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--screen.pfe-navigation__logo-image--print{display:inline-block!important}#pfe-navigation .pfe-navigation__fallback-links a,#pfe-navigation .pfe-navigation__log-in-link,#pfe-navigation .pfe-navigation__menu-link,#pfe-navigation .pfe-navigation__secondary-link,pfe-navigation .pfe-navigation__fallback-links a,pfe-navigation .pfe-navigation__log-in-link,pfe-navigation .pfe-navigation__menu-link,pfe-navigation .pfe-navigation__secondary-link{--pfe-icon--color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:0 0;border:0;color:#06c;color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));color:#fff;color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));cursor:pointer;display:flex;font-family:inherit;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);justify-content:flex-start;justify-content:center;margin:0;outline:0;padding:8px 24px;position:relative;text-align:center;text-decoration:none;white-space:nowrap;width:100%}@media print{#pfe-navigation .pfe-navigation__fallback-links a,#pfe-navigation .pfe-navigation__log-in-link,#pfe-navigation .pfe-navigation__menu-link,#pfe-navigation .pfe-navigation__secondary-link,pfe-navigation .pfe-navigation__fallback-links a,pfe-navigation .pfe-navigation__log-in-link,pfe-navigation .pfe-navigation__menu-link,pfe-navigation .pfe-navigation__secondary-link{display:none!important}}@media (min-width:768px){#pfe-navigation .pfe-navigation__fallback-links a,#pfe-navigation .pfe-navigation__log-in-link,#pfe-navigation .pfe-navigation__menu-link,#pfe-navigation .pfe-navigation__secondary-link,pfe-navigation .pfe-navigation__fallback-links a,pfe-navigation .pfe-navigation__log-in-link,pfe-navigation .pfe-navigation__menu-link,pfe-navigation .pfe-navigation__secondary-link{--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));color:#fff;color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));display:flex;flex-direction:column;font-size:12px;font-size:var(--pfe-navigation--FontSize--xs,12px);height:72px;height:var(--pfe-navigation__nav-bar--Height,72px);justify-content:flex-end;padding:14px 8px;width:auto}@supports (display:grid){#pfe-navigation .pfe-navigation__fallback-links a,#pfe-navigation .pfe-navigation__log-in-link,#pfe-navigation .pfe-navigation__menu-link,#pfe-navigation .pfe-navigation__secondary-link,pfe-navigation .pfe-navigation__fallback-links a,pfe-navigation .pfe-navigation__log-in-link,pfe-navigation .pfe-navigation__menu-link,pfe-navigation .pfe-navigation__secondary-link{align-items:center;display:grid;grid-template-rows:26px 18px;justify-items:center}}#pfe-navigation .pfe-navigation__fallback-links a[class]:focus,#pfe-navigation .pfe-navigation__fallback-links a[class]:hover,#pfe-navigation .pfe-navigation__log-in-link[class]:focus,#pfe-navigation .pfe-navigation__log-in-link[class]:hover,#pfe-navigation .pfe-navigation__menu-link[class]:focus,#pfe-navigation .pfe-navigation__menu-link[class]:hover,#pfe-navigation .pfe-navigation__secondary-link[class]:focus,#pfe-navigation .pfe-navigation__secondary-link[class]:hover,pfe-navigation .pfe-navigation__fallback-links a[class]:focus,pfe-navigation .pfe-navigation__fallback-links a[class]:hover,pfe-navigation .pfe-navigation__log-in-link[class]:focus,pfe-navigation .pfe-navigation__log-in-link[class]:hover,pfe-navigation .pfe-navigation__menu-link[class]:focus,pfe-navigation .pfe-navigation__menu-link[class]:hover,pfe-navigation .pfe-navigation__secondary-link[class]:focus,pfe-navigation .pfe-navigation__secondary-link[class]:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}}#pfe-navigation .pfe-navigation__fallback-links a:focus,#pfe-navigation .pfe-navigation__fallback-links a:hover,#pfe-navigation .pfe-navigation__log-in-link:focus,#pfe-navigation .pfe-navigation__log-in-link:hover,#pfe-navigation .pfe-navigation__menu-link:focus,#pfe-navigation .pfe-navigation__menu-link:hover,#pfe-navigation .pfe-navigation__secondary-link:focus,#pfe-navigation .pfe-navigation__secondary-link:hover,pfe-navigation .pfe-navigation__fallback-links a:focus,pfe-navigation .pfe-navigation__fallback-links a:hover,pfe-navigation .pfe-navigation__log-in-link:focus,pfe-navigation .pfe-navigation__log-in-link:hover,pfe-navigation .pfe-navigation__menu-link:focus,pfe-navigation .pfe-navigation__menu-link:hover,pfe-navigation .pfe-navigation__secondary-link:focus,pfe-navigation .pfe-navigation__secondary-link:hover{box-shadow:inset 4px 0 0 0 #06c;box-shadow:inset 4px 0 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}@media (min-width:768px){#pfe-navigation .pfe-navigation__fallback-links a:focus,#pfe-navigation .pfe-navigation__fallback-links a:hover,#pfe-navigation .pfe-navigation__log-in-link:focus,#pfe-navigation .pfe-navigation__log-in-link:hover,#pfe-navigation .pfe-navigation__menu-link:focus,#pfe-navigation .pfe-navigation__menu-link:hover,#pfe-navigation .pfe-navigation__secondary-link:focus,#pfe-navigation .pfe-navigation__secondary-link:hover,pfe-navigation .pfe-navigation__fallback-links a:focus,pfe-navigation .pfe-navigation__fallback-links a:hover,pfe-navigation .pfe-navigation__log-in-link:focus,pfe-navigation .pfe-navigation__log-in-link:hover,pfe-navigation .pfe-navigation__menu-link:focus,pfe-navigation .pfe-navigation__menu-link:hover,pfe-navigation .pfe-navigation__secondary-link:focus,pfe-navigation .pfe-navigation__secondary-link:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}}.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__fallback-links a:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__fallback-links a:hover,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__log-in-link:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__log-in-link:hover,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__menu-link:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__menu-link:hover,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__secondary-link:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__secondary-link:hover,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__fallback-links a:focus,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__fallback-links a:hover,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__log-in-link:focus,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__log-in-link:hover,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__menu-link:focus,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__menu-link:hover,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__secondary-link:focus,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__secondary-link:hover{box-shadow:inset 4px 0 0 0 #06c;box-shadow:inset 4px 0 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}#pfe-navigation .pfe-navigation__fallback-links a:focus,#pfe-navigation .pfe-navigation__log-in-link:focus,#pfe-navigation .pfe-navigation__menu-link:focus,#pfe-navigation .pfe-navigation__secondary-link:focus,pfe-navigation .pfe-navigation__fallback-links a:focus,pfe-navigation .pfe-navigation__log-in-link:focus,pfe-navigation .pfe-navigation__menu-link:focus,pfe-navigation .pfe-navigation__secondary-link:focus{outline:0}#pfe-navigation .pfe-navigation__fallback-links a:focus:after,#pfe-navigation .pfe-navigation__log-in-link:focus:after,#pfe-navigation .pfe-navigation__menu-link:focus:after,#pfe-navigation .pfe-navigation__secondary-link:focus:after,pfe-navigation .pfe-navigation__fallback-links a:focus:after,pfe-navigation .pfe-navigation__log-in-link:focus:after,pfe-navigation .pfe-navigation__menu-link:focus:after,pfe-navigation .pfe-navigation__secondary-link:focus:after{border:1px dashed;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation .pfe-navigation__fallback-links a pfe-icon,#pfe-navigation .pfe-navigation__log-in-link pfe-icon,#pfe-navigation .pfe-navigation__menu-link pfe-icon,#pfe-navigation .pfe-navigation__secondary-link pfe-icon,pfe-navigation .pfe-navigation__fallback-links a pfe-icon,pfe-navigation .pfe-navigation__log-in-link pfe-icon,pfe-navigation .pfe-navigation__menu-link pfe-icon,pfe-navigation .pfe-navigation__secondary-link pfe-icon{pointer-events:none}#pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,#pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__log-in-link>pfe-icon,#pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__menu-link>pfe-icon,#pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__secondary-link>pfe-icon,pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__log-in-link>pfe-icon,pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__menu-link>pfe-icon,pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__secondary-link>pfe-icon{--pfe-icon--size:18px;padding-right:5px}@media (min-width:768px){#pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,#pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__log-in-link>pfe-icon,#pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__menu-link>pfe-icon,#pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__secondary-link>pfe-icon,pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__log-in-link>pfe-icon,pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__menu-link>pfe-icon,pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__secondary-link>pfe-icon{padding-right:0;padding:2px 0 4px}}.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__log-in-link>pfe-icon,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__menu-link>pfe-icon,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__secondary-link>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__log-in-link>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__menu-link>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__secondary-link>pfe-icon{padding:0 16px 0 0}#pfe-navigation .pfe-navigation__fallback-links a pfe-icon,#pfe-navigation .pfe-navigation__log-in-link pfe-icon,#pfe-navigation .pfe-navigation__menu-link pfe-icon,#pfe-navigation .pfe-navigation__secondary-link pfe-icon,pfe-navigation .pfe-navigation__fallback-links a pfe-icon,pfe-navigation .pfe-navigation__log-in-link pfe-icon,pfe-navigation .pfe-navigation__menu-link pfe-icon,pfe-navigation .pfe-navigation__secondary-link pfe-icon{display:block;height:18px}#pfe-navigation .pfe-navigation__fallback-links a[class],#pfe-navigation .pfe-navigation__fallback-links a[href],#pfe-navigation .pfe-navigation__log-in-link[class],#pfe-navigation .pfe-navigation__log-in-link[href],#pfe-navigation .pfe-navigation__menu-link[class],#pfe-navigation .pfe-navigation__menu-link[href],#pfe-navigation .pfe-navigation__secondary-link[class],#pfe-navigation .pfe-navigation__secondary-link[href],pfe-navigation .pfe-navigation__fallback-links a[class],pfe-navigation .pfe-navigation__fallback-links a[href],pfe-navigation .pfe-navigation__log-in-link[class],pfe-navigation .pfe-navigation__log-in-link[href],pfe-navigation .pfe-navigation__menu-link[class],pfe-navigation .pfe-navigation__menu-link[href],pfe-navigation .pfe-navigation__secondary-link[class],pfe-navigation .pfe-navigation__secondary-link[href]{align-items:center;justify-content:center}#pfe-navigation .pfe-navigation__account-toggle,#pfe-navigation [slot=account]>a[href],pfe-navigation .pfe-navigation__account-toggle,pfe-navigation [slot=account]>a[href]{--pfe-icon--color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:0 0;border:0;color:#06c;color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));cursor:pointer;font-family:inherit;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);justify-content:flex-start;margin:0;outline:0;position:relative;text-align:center;text-decoration:none;white-space:nowrap;width:100%;--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));color:#fff;color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));display:flex;flex-direction:column;font-size:12px;font-size:var(--pfe-navigation--FontSize--xs,12px);height:72px;height:var(--pfe-navigation__nav-bar--Height,72px);justify-content:flex-end;padding:14px 8px;width:auto}@media print{#pfe-navigation .pfe-navigation__account-toggle,#pfe-navigation [slot=account]>a[href],pfe-navigation .pfe-navigation__account-toggle,pfe-navigation [slot=account]>a[href]{display:none!important}}#pfe-navigation .pfe-navigation__account-toggle:focus,#pfe-navigation .pfe-navigation__account-toggle:hover,#pfe-navigation [slot=account]>a[href]:focus,#pfe-navigation [slot=account]>a[href]:hover,pfe-navigation .pfe-navigation__account-toggle:focus,pfe-navigation .pfe-navigation__account-toggle:hover,pfe-navigation [slot=account]>a[href]:focus,pfe-navigation [slot=account]>a[href]:hover{box-shadow:inset 4px 0 0 0 #06c;box-shadow:inset 4px 0 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}#pfe-navigation .pfe-navigation__account-toggle:focus,#pfe-navigation [slot=account]>a[href]:focus,pfe-navigation .pfe-navigation__account-toggle:focus,pfe-navigation [slot=account]>a[href]:focus{outline:0}#pfe-navigation .pfe-navigation__account-toggle:focus:after,#pfe-navigation [slot=account]>a[href]:focus:after,pfe-navigation .pfe-navigation__account-toggle:focus:after,pfe-navigation [slot=account]>a[href]:focus:after{border:1px dashed;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation .pfe-navigation__account-toggle pfe-icon,#pfe-navigation [slot=account]>a[href] pfe-icon,pfe-navigation .pfe-navigation__account-toggle pfe-icon,pfe-navigation [slot=account]>a[href] pfe-icon{pointer-events:none}@supports (display:grid){#pfe-navigation .pfe-navigation__account-toggle,#pfe-navigation [slot=account]>a[href],pfe-navigation .pfe-navigation__account-toggle,pfe-navigation [slot=account]>a[href]{align-items:center;display:grid;grid-template-rows:26px 18px;justify-items:center}}#pfe-navigation .pfe-navigation__account-toggle[class]:focus,#pfe-navigation .pfe-navigation__account-toggle[class]:hover,#pfe-navigation [slot=account]>a[href][class]:focus,#pfe-navigation [slot=account]>a[href][class]:hover,pfe-navigation .pfe-navigation__account-toggle[class]:focus,pfe-navigation .pfe-navigation__account-toggle[class]:hover,pfe-navigation [slot=account]>a[href][class]:focus,pfe-navigation [slot=account]>a[href][class]:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}@media print{#pfe-navigation .pfe-navigation__account-toggle,#pfe-navigation [slot=account]>a[href],pfe-navigation .pfe-navigation__account-toggle,pfe-navigation [slot=account]>a[href]{display:none}}#pfe-navigation .pfe-navigation__account-toggle pfe-icon,#pfe-navigation [slot=account]>a[href] pfe-icon,pfe-navigation .pfe-navigation__account-toggle pfe-icon,pfe-navigation [slot=account]>a[href] pfe-icon{--pfe-icon--size:18px;padding:2px 0 4px}@media (min-width:768px){#pfe-navigation .pfe-navigation__account-toggle pfe-icon,#pfe-navigation [slot=account]>a[href] pfe-icon,pfe-navigation .pfe-navigation__account-toggle pfe-icon,pfe-navigation [slot=account]>a[href] pfe-icon{padding-right:0}}#pfe-navigation .pfe-navigation__account-toggle:focus,#pfe-navigation .pfe-navigation__account-toggle:hover,#pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true],#pfe-navigation [slot=account]>a[href][href]:focus,#pfe-navigation [slot=account]>a[href][href]:hover,pfe-navigation .pfe-navigation__account-toggle:focus,pfe-navigation .pfe-navigation__account-toggle:hover,pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true],pfe-navigation [slot=account]>a[href][href]:focus,pfe-navigation [slot=account]>a[href][href]:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}#pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true],pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true]{--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515));background:#fff;background:var(--pfe-navigation__nav-bar--toggle--BackgroundColor--active,var(--pfe-theme--color--surface--lightest,#fff));color:#151515;color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515))}#pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true]:focus,pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true]:focus{outline:0}#pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true]:focus:after,pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true]:focus:after{border:1px dashed #151515;border:1px dashed var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515));bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation .pfe-navigation__fallback-links,#pfe-navigation .pfe-navigation__menu,pfe-navigation .pfe-navigation__fallback-links,pfe-navigation .pfe-navigation__menu{font-size:inherit;list-style:none;margin:0;padding:0}@media (min-width:768px){#pfe-navigation .pfe-navigation__fallback-links,#pfe-navigation .pfe-navigation__menu,pfe-navigation .pfe-navigation__fallback-links,pfe-navigation .pfe-navigation__menu{align-items:stretch;display:flex}}#pfe-navigation .pfe-navigation__fallback-links li,#pfe-navigation .pfe-navigation__menu li,pfe-navigation .pfe-navigation__fallback-links li,pfe-navigation .pfe-navigation__menu li{font-size:inherit;margin:0;padding:0}#pfe-navigation .pfe-navigation__fallback-links li:before,#pfe-navigation .pfe-navigation__menu li:before,pfe-navigation .pfe-navigation__fallback-links li:before,pfe-navigation .pfe-navigation__menu li:before{content:none}#pfe-navigation .pfe-navigation__fallback-links,pfe-navigation .pfe-navigation__fallback-links{margin-left:auto}#pfe-navigation .pfe-navigation__menu-link,pfe-navigation .pfe-navigation__menu-link{display:flex;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);white-space:nowrap}#pfe-navigation.pfe-navigation--processed,pfe-navigation.pfe-navigation--processed{display:block;padding:0}#pfe-navigation.pfe-navigation--processed:before,pfe-navigation.pfe-navigation--processed:before{content:none}#pfe-navigation.pfe-navigation--processed>[slot=account],#pfe-navigation.pfe-navigation--processed>[slot=search],#pfe-navigation.pfe-navigation--processed>[slot=secondary-links],pfe-navigation.pfe-navigation--processed>[slot=account],pfe-navigation.pfe-navigation--processed>[slot=search],pfe-navigation.pfe-navigation--processed>[slot=secondary-links]{height:auto;overflow:visible;visibility:visible;width:auto}#pfe-navigation.pfe-navigation--processed pfe-navigation-dropdown,pfe-navigation.pfe-navigation--processed pfe-navigation-dropdown{display:block}#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown,#pfe-navigation.pfe-navigation--processed pfe-navigation-dropdown,#pfe-navigation.pfe-navigation--processed>[slot],pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown,pfe-navigation.pfe-navigation--processed pfe-navigation-dropdown,pfe-navigation.pfe-navigation--processed>[slot]{animation:none;opacity:1}#pfe-navigation.pfe-navigation--processed [slot=secondary-links],pfe-navigation.pfe-navigation--processed [slot=secondary-links]{display:block;height:auto;list-style:none;margin:0 0 8px;padding:0;width:auto}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links],pfe-navigation.pfe-navigation--processed [slot=secondary-links]{margin:0}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]{margin:0 0 8px}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button{--pfe-icon--color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:0 0;border:0;color:#06c;color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));cursor:pointer;display:flex;font-family:inherit;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);justify-content:flex-start;margin:0;outline:0;padding:8px 24px;position:relative;text-align:center;text-decoration:none;white-space:nowrap;width:100%}@media print{#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button{display:none!important}}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button{--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));color:#fff;color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));display:flex;flex-direction:column;font-size:12px;font-size:var(--pfe-navigation--FontSize--xs,12px);height:72px;height:var(--pfe-navigation__nav-bar--Height,72px);justify-content:flex-end;padding:14px 8px;width:auto}@supports (display:grid){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button{align-items:center;display:grid;grid-template-rows:26px 18px;justify-items:center}}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[class]:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[class]:hover,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[class]:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[class]:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[class]:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[class]:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[class]:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[class]:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover{box-shadow:inset 4px 0 0 0 #06c;box-shadow:inset 4px 0 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover{box-shadow:inset 4px 0 0 0 #06c;box-shadow:inset 4px 0 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus{outline:0}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus:after,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus:after,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus:after,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus:after{border:1px dashed;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a pfe-icon,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button pfe-icon{pointer-events:none}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon{--pfe-icon--size:18px;padding-right:5px}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon{padding-right:0;padding:2px 0 4px}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon{padding:0 16px 0 0}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a pfe-icon,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button pfe-icon{display:block;height:18px}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus{outline:0}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus:after,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus:after,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus:after,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus:after{border:1px dashed #fff;border:1px dashed var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus{box-shadow:none}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[aria-expanded=true],#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[aria-expanded=true],pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[aria-expanded=true],pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[aria-expanded=true]{--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515));background:#fff;background:var(--pfe-navigation__nav-bar--toggle--BackgroundColor--active,var(--pfe-theme--color--surface--lightest,#fff));color:#151515;color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515))}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[aria-expanded=true],.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[aria-expanded=true],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[aria-expanded=true],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[aria-expanded=true]{background:0 0;box-shadow:none}#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown__wrapper--single-column,pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown__wrapper--single-column{position:relative}#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown__wrapper,pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown__wrapper{display:block}#pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class],pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class]{height:0;transition:height .25s ease-in-out;transition:var(--pfe-navigation--accordion-transition,height .25s ease-in-out)}@media (prefers-reduced-motion){#pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class],pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class]{transition:none}}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class],pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class]{position:absolute;right:0;top:72px;top:var(--pfe-navigation__nav-bar--Height,72px)}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class]{position:static}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class][aria-hidden=false],pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class][aria-hidden=false]{height:auto}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class][aria-hidden=false],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class][aria-hidden=false]{height:0}#pfe-navigation.pfe-navigation--processed[breakpoint=mobile] [slot=secondary-links][mobile-slider] .pfe-navigation__dropdown-wrapper,pfe-navigation.pfe-navigation--processed[breakpoint=mobile] [slot=secondary-links][mobile-slider] .pfe-navigation__dropdown-wrapper{left:100vw;left:calc(100vw - 32px);left:calc(100vw - var(--pfe-navigation__mobile-dropdown--PaddingHorizontal,32px));position:absolute;top:0;width:100vw}#pfe-navigation.pfe-navigation--processed[breakpoint=mobile] [slot=secondary-links][mobile-slider] .pfe-navigation__dropdown-wrapper[aria-hidden=false],pfe-navigation.pfe-navigation--processed[breakpoint=mobile] [slot=secondary-links][mobile-slider] .pfe-navigation__dropdown-wrapper[aria-hidden=false]{height:100vh;height:calc(100vh - 72px);height:calc(100vh - var(--pfe-navigation__nav-bar--Height,72px));overflow-y:scroll}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper{background:#fff;background:var(--pfe-navigation__dropdown--Background,var(--pfe-theme--color--surface--lightest,#fff));padding:0 24px;padding:0 var(--pfe-navigation__dropdown--full-width--spacing--mobile,24px)}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper{padding:0 64px24px;padding:0 var(--pfe-navigation__dropdown--full-width--spacing--desktop,64px) var(--pfe-navigation__dropdown--full-width--spacing--mobile,24px)}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper{padding:0 24px;padding:0 var(--pfe-navigation__dropdown--full-width--spacing--mobile,24px)}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a{border:1px solid transparent;color:#06c;color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));display:inline-block}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:hover{color:#036;color:var(--pfe-navigation__dropdown--link--Color--hover,#036);text-decoration:underline}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:focus{border:1px dashed;outline:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level],#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level],#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level],pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level],pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6{margin:32px 0 .75em;margin:var(--pfe-navigation--gutter,32px) 0 .75em;padding:0;-moz-column-break-inside:avoid;break-inside:avoid;color:#464646;color:var(--pfe-navigation__dropdown--headings--Color,#464646);font-family:Red Hat Display,RedHatDisplay,Arial,Helvetica,sans-serif;font-family:var(--pfe-navigation--FontFamilyHeadline,Red Hat Display,RedHatDisplay,Arial,Helvetica,sans-serif);font-size:1.125rem;font-size:var(--pf-global--FontSize--lg,1.125rem);font-weight:500}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level]:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level]:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level]:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level]:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6:first-child{margin-top:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a{border:1px solid transparent;color:#464646;color:var(--pfe-navigation__dropdown--headings--Color,#464646);text-decoration:underline}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:hover{color:#036;color:var(--pfe-navigation__dropdown--link--Color--hover,#036);text-decoration:none}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:focus{border:1px dashed;outline:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container li,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles li,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container li,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles li{margin:0 0 16px;-moz-column-break-inside:avoid;break-inside:avoid}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-card,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-card,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-card,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-card,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta{-moz-column-break-inside:avoid;break-inside:avoid}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary],#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary],#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary],#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary],pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary],pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary],pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary],pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary]{--pfe-cta--BackgroundColor:var(--pfe-navigation__dropdown--pfe-cta--BackgroundColor,#e00);--pfe-cta--BackgroundColor--hover:var(--pfe-navigation__dropdown--pfe-cta--hover--BackgroundColor,#c00);--pfe-theme--ui--border-width:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary]:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary]:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary]:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary]:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary]:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary]:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary]:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary]:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary]:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary]:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary]:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary]:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary]:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary]:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary]:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary]:hover{--pfe-cta--BackgroundColor:var(--pfe-navigation__dropdown--pfe-cta--hover--BackgroundColor,#c00)}pfe-card #pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta,pfe-card #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta,pfe-card pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta,pfe-card pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta{margin-top:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container li,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container ul,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles li,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles ul,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container li,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container ul,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles li,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles ul{list-style:none;margin:0;padding:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{color:#151515;color:var(--pfe-navigation__dropdown--Color,#151515);-moz-column-count:auto;column-count:auto;display:block;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);gap:0;margin-left:auto;margin-right:auto;max-width:1136px;max-width:var(--pfe-navigation--content-max-width,1136px);padding-bottom:12px;padding-top:12px;width:calc(100% + 32px)}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{-moz-column-count:3;column-count:3;display:block;gap:32px;gap:var(--pfe-navigation--gutter,32px);padding-bottom:12px;padding-top:12px}}@media (min-width:1200px){#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{-moz-column-count:auto;column-count:auto;display:flex;flex-wrap:wrap;padding-bottom:32px;padding-top:32px}@supports (display:grid){#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{display:grid;gap:32px;gap:var(--pfe-navigation--gutter,32px);grid-auto-flow:row;grid-template-columns:repeat(4,minmax(0,1fr))}}}.pfe-navigation--collapse-main-menu #pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation--collapse-main-menu #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,.pfe-navigation--collapse-main-menu pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation--collapse-main-menu pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{-moz-column-count:3;column-count:3;display:block;gap:32px;gap:var(--pfe-navigation--gutter,32px);padding-bottom:12px;padding-top:12px}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{-moz-column-count:auto;column-count:auto;display:block;gap:0;margin-left:-16px;margin-right:-16px;max-width:1136px;max-width:var(--pfe-navigation--content-max-width,1136px);padding-bottom:12px;padding-top:12px;width:calc(100% + 32px)}.pfe-navigation__menu-item--open #pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation__menu-item--open #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,.pfe-navigation__menu-item--open pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation__menu-item--open pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{transition-delay:0s;visibility:visible}#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*{margin:0 0 18px;-moz-column-break-inside:avoid;break-inside:avoid}@media (min-width:1200px){#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*{margin:0}}.pfe-navigation--collapse-main-menu #pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,.pfe-navigation--collapse-main-menu #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*,.pfe-navigation--collapse-main-menu pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,.pfe-navigation--collapse-main-menu pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*{margin:0 0 18px}#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid{max-width:100%}#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--1-x,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--1-x{display:block}#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown{background:#fff}#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher{margin-left:auto;margin-right:auto;max-width:1136px;max-width:var(--pfe-navigation--content-max-width,1136px);padding:12px 24px;padding:12px var(--pfe-navigation__dropdown--full-width--spacing--mobile,24px)}@media (min-width:1200px){#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher{padding:32px 64px;padding:32px var(--pfe-navigation__dropdown--full-width--spacing--desktop,64px)}}.pfe-navigation--collapse-main-menu #pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher,.pfe-navigation--collapse-main-menu pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher{padding:12px 24px;padding:12px var(--pfe-navigation__dropdown--full-width--spacing--mobile,24px)}#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher .container,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher .container{margin:0;padding:0;width:auto}#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--invisible[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--invisible[class]{padding:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--invisible pfe-navigation-dropdown,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--invisible pfe-navigation-dropdown{visibility:hidden}#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class]{padding:0}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class]{box-shadow:0 1px 2px rgba(0,0,0,.12);box-shadow:var(--pfe-navigation__dropdown--BoxShadow,0 1px 2px rgba(0,0,0,.12));max-width:100%;min-width:13em;padding:0 32px;position:absolute;top:100%}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class]{box-shadow:none;max-width:100%;position:static}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class]{right:0}}#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class]{width:100%}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class]{left:0;position:absolute;right:0}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class]{position:static}#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class] .pfe-navigation__dropdown,pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class] .pfe-navigation__dropdown{width:100%}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles{padding-left:16px;padding-right:16px}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles form,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles form{align-items:center;display:flex}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button,#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input{padding:10px;transition:box-shadow .2s}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input{border:1px solid #f0f0f0;border-bottom-color:#8b8e91;color:#717579;flex-basis:0%;flex-grow:1;flex-shrink:1;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);margin-right:8px}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input::-moz-placeholder,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input::-moz-placeholder{color:#717579}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input::placeholder,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input::placeholder{color:#717579}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button{background-color:#e00;border:1px solid #e00;border-radius:2px;color:#fff;flex-basis:auto;flex-grow:0;flex-shrink:1;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem)}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:hover{outline:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:focus:after,#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:hover:after,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:focus:after,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:hover:after{border:1px dashed #000;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:hover{outline:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:focus:after,#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:hover:after,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:focus:after,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:hover:after{border:1px dashed #fff;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation .pfe-navigation__site-switcher__back-wrapper,pfe-navigation .pfe-navigation__site-switcher__back-wrapper{border-bottom:1px solid #d2d2d2;border-bottom:var(--pfe-navigation__dropdown--separator--Border,1px solid var(--pfe-theme--color--ui--border--lighter,#d2d2d2));display:block}@media (min-width:768px){#pfe-navigation .pfe-navigation__site-switcher__back-wrapper,pfe-navigation .pfe-navigation__site-switcher__back-wrapper{display:none}}.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__site-switcher__back-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__site-switcher__back-wrapper{display:block}#pfe-navigation .pfe-navigation__site-switcher__back-button,pfe-navigation .pfe-navigation__site-switcher__back-button{background-color:transparent;border:1px solid transparent;color:#06c;color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));cursor:pointer;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);padding:21px 21px 21px 45px;position:relative;text-align:left;width:100%}#pfe-navigation .pfe-navigation__site-switcher__back-button:before,pfe-navigation .pfe-navigation__site-switcher__back-button:before{border:2px solid #06c;border:2px solid var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));border-right:0;border-top:0;content:"";display:block;height:8px;left:35px;position:absolute;right:auto;top:27px;transform:rotate(45deg);transform-origin:left top;width:8px}#pfe-navigation .pfe-navigation__site-switcher__back-button:focus,#pfe-navigation .pfe-navigation__site-switcher__back-button:hover,pfe-navigation .pfe-navigation__site-switcher__back-button:focus,pfe-navigation .pfe-navigation__site-switcher__back-button:hover{border:1px dashed #151515;border-top:1px dashed #151515;border:1px dashed var(--pfe-navigation__dropdown--Color,#151515);color:#036;color:var(--pfe-navigation__dropdown--link--Color--hover,#036);outline:0}#pfe-navigation.pfe-navigation--processed site-switcher,pfe-navigation.pfe-navigation--processed site-switcher{-moz-columns:auto;columns:auto;display:block}#pfe-navigation.pfe-navigation--stuck,pfe-navigation.pfe-navigation--stuck{left:0;position:fixed;top:0;width:100%;z-index:95;z-index:var(--pfe-theme--zindex--navigation,95)}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__outer-menu-wrapper__inner,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__outer-menu-wrapper__inner{opacity:1!important}#pfe-navigation.pfe-navigation--in-crusty-browser pfe-navigation-account,#pfe-navigation.pfe-navigation--in-crusty-browser rh-account-dropdown,pfe-navigation.pfe-navigation--in-crusty-browser pfe-navigation-account,pfe-navigation.pfe-navigation--in-crusty-browser rh-account-dropdown{display:none!important}#pfe-navigation.pfe-navigation--in-crusty-browser[open-toggle=pfe-navigation__account-toggle] pfe-navigation-account,#pfe-navigation.pfe-navigation--in-crusty-browser[open-toggle=pfe-navigation__account-toggle] rh-account-dropdown,pfe-navigation.pfe-navigation--in-crusty-browser[open-toggle=pfe-navigation__account-toggle] pfe-navigation-account,pfe-navigation.pfe-navigation--in-crusty-browser[open-toggle=pfe-navigation__account-toggle] rh-account-dropdown{display:block!important}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-item,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-item{display:block}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true],pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true]{--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515));background:#fff;background:var(--pfe-navigation__nav-bar--toggle--BackgroundColor--active,var(--pfe-theme--color--surface--lightest,#fff));color:#151515;color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515))}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true]:focus,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true]:focus{outline:0}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true]:focus:after,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true]:focus:after{border:1px dashed;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown{display:flex;flex-wrap:wrap}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown>.style-scope,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown>.style-scope{flex-basis:25%}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown .pfe-navigation__footer.style-scope,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown .pfe-navigation__footer.style-scope{flex-basis:100%}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown .pfe-navigation__footer.style-scope>.style-scope,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown .pfe-navigation__footer.style-scope>.style-scope{margin-right:16px}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column ul,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column>.style-scope,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column ul,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column>.style-scope{display:flex;flex-direction:column;flex-wrap:nowrap}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column>.style-scope,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column>.style-scope{flex-basis:auto}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link,#pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link,pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a{color:#fff!important;justify-content:center!important}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle[aria-expanded=true],#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link[aria-expanded=true],#pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a[aria-expanded=true],pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle[aria-expanded=true],pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link[aria-expanded=true],pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a[aria-expanded=true]{color:#151515!important}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__account-wrapper--logged-in .pfe-navigation__log-in-link,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle pfe-icon,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link pfe-icon,#pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a pfe-icon,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__account-wrapper--logged-in .pfe-navigation__log-in-link,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle pfe-icon,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link pfe-icon,pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a pfe-icon{display:none!important}[id=pfe-navigation__account-dropdown][class][class]{display:block;height:auto;left:0;padding:0;position:absolute;top:72px;top:var(--pfe-navigation__nav-bar--Height,72px);width:100%}[id=pfe-navigation__account-dropdown].pfe-navigation__dropdown-wrapper--invisible[class]{display:none}.pfe-navigation__dropdown-wrapper{overflow:hidden}@media (min-width:768px){.pfe-navigation__custom-dropdown--single-column{min-width:25em}}.pfe-navigation--collapse-secondary-links .pfe-navigation__custom-dropdown--single-column{min-width:0}.secondary-link__icon-wrapper{align-items:center;display:flex;justify-content:center}.secondary-link__alert-count{background:#06c;background:var(--pfe-navigation__nav-bar--alert-color,var(--pfe-theme--color--link,#06c));border-radius:20px;color:#fff;color:var(--pfe-navigation__nav-bar--Color--on-highlight,var(--pfe-theme--color--text--on-saturated,#fff));display:block;font-size:12px;font-size:var(--pfe-navigation--FontSize--xs,12px);line-height:20px;margin:0 4px 0 2px;min-width:23px;overflow:hidden;padding:0 8px}.secondary-link__alert-count:empty{display:none}#pfe-navigation__1x-skip-links{left:0;position:absolute;top:0}#pfe-navigation__1x-skip-links,#pfe-navigation__1x-skip-links li{height:0;list-style:none;margin:0;padding:0;width:0}.skip-link[class][class]{font-size:.875rem;font-size:var(--pf-global--FontSize--sm,.875rem);line-height:18px}.skip-link[class][class]:focus{border-radius:.21429em;height:auto;left:50%;padding:.42857em .57143em;position:fixed;top:8px;transform:translateX(-50%);width:auto;z-index:99999;clip:auto;background:#fff;background:var(--pfe-navigation__skip-link--BackgroundColor,var(--pfe-theme--color--surface--lightest,#fff));color:#06c;color:var(--pfe-navigation__skip-link--Color,var(--pfe-theme--color--link,#06c));text-decoration:none}pfe-navigation pfe-navigation-account[slot=account]{background:#fff;background:var(--pfe-navigation__dropdown--Background,var(--pfe-theme--color--surface--lightest,#fff));width:100%}</style>
<style>:host([size=sm]) #container[data-v-8589d091]{--_size:var(--pf-global--icon--FontSize--sm,12px)}.content-wrapper[data-v-8589d091]{height:auto;margin:0 auto;min-height:46vh}.content[data-v-8589d091]{max-width:1000px}#left-content[data-v-8589d091]{max-width:330px;z-index:1}.line-below-chp[data-v-8589d091]{margin:var(--rh-space-xl,24px) 0 var(--rh-space-3xl,48px)}.toc-container[data-v-8589d091]{border-right:1px solid var(--rh-color-gray-30,#c7c7c7);min-height:100vh;position:sticky;top:0;transition:transform .3s ease-in-out}nav#toc[data-v-8589d091]{height:auto;overflow-y:auto;padding-bottom:var(--rh-space-2xl,32px)}.max-height-85[data-v-8589d091]{max-height:85vh}.max-height-75[data-v-8589d091]{max-height:75vh}.toc-filter[data-v-8589d091]{background-color:#fff;padding:var(--rh-space-lg,16px) var(--rh-space-2xl,32px);position:sticky;top:-1px;width:100%;z-index:1}#text[data-v-8589d091],.toc-filter[data-v-8589d091]{align-items:center;display:flex}#text[data-v-8589d091]{flex:1;flex-direction:row}#search-icon[data-v-8589d091]{color:#151515;left:2.5rem;position:absolute;top:55%;transform:translateY(-50%)}pf-icon[data-v-8589d091]{--pf-icon--size:16px}#text:focus-within #icon[data-v-8589d091],#text:hover #icon[data-v-8589d091]{color:#151515}#text[data-v-8589d091]:after,#text[data-v-8589d091]:before{content:"";inset:0;pointer-events:none;position:absolute}#text-input[data-v-8589d091]:focus,#text-input:focus+#utilities[data-v-8589d091]{border-bottom:2px solid #06c;outline:none}#text-input[data-v-8589d091]{background-color:transparent;border:1px solid #f0f0f0;border-bottom-color:#8a8d90;color:#151515;font-family:inherit;font-size:100%;grid-area:text-input;line-height:1.5;overflow:hidden;padding:.375rem .25rem .375rem 2rem;position:relative;text-overflow:ellipsis;white-space:nowrap;width:100%}#utilities[data-v-8589d091]{align-items:center;border:1px solid #f0f0f0;border-bottom:1px solid #8a8d90;border-left:0;display:flex}#utilities rh-badge[data-v-8589d091]{border-radius:80px;font-weight:var(--rh-font-weight-heading-medium,500);--_background-color:#e0e0e0;margin-right:8px}#clear-button[data-v-8589d091]{--pf-c-button--PaddingTop:0.625rem;--pf-c-button--PaddingRight:.25rem;--pf-c-button--PaddingBottom:0.625rem;--pf-c-button--PaddingLeft:.25rem;margin-right:8px}#text-input.no-right-border[data-v-8589d091]{border-right:0}.btn-container[data-v-8589d091]{bottom:0;display:flex;justify-content:flex-end;padding:1rem;pointer-events:none;position:fixed;right:0;z-index:2}.top-scroll-btn[data-v-8589d091]{--pf-c-button--BorderRadius:64px;pointer-events:all}.focusable[data-v-8589d091]:focus-visible{border:2px solid var(--rh-color-interactive-blue,#06c)}.mobile-nav-wrapper[data-v-8589d091]{align-items:center;border-bottom:1px solid #c7c7c7;display:flex;height:auto;justify-content:space-between;padding:var(--rh-space-sm,.5rem)}.mobile-nav[data-v-8589d091]{align-items:center;background-color:var(--rh-color-bg-page,#fff);min-height:51px;position:sticky;top:0;z-index:5}.active-mobile-menu[data-v-8589d091]{color:#151515;padding-left:.5rem}.hidden[data-v-8589d091]{display:none}.mobile-nav-btn[data-v-8589d091]{background-color:transparent;border:none;font-family:inherit;font-size:.875rem;font-weight:500;margin:0;min-height:40px;min-width:40px}.border-right[data-v-8589d091]{border-right:1px solid #c7c7c7}.toc-focus-container[data-v-8589d091]{position:sticky;top:0;z-index:2}.toc-focus-btn[data-v-8589d091]{align-items:center;background-color:var(--rh-color-white,#fff);border:1px solid var(--rh-color-blue-50,#06c);border-radius:50%;cursor:pointer;display:flex;height:40px;justify-content:center;position:absolute;right:-20px;top:15px;width:40px}.toc-focus-btn[data-v-8589d091]:focus-visible,.toc-focus-btn[data-v-8589d091]:hover{background-color:var(--rh-color-blue-10,#e0f0ff);box-shadow:var(--rh-box-shadow-sm,0 2px 4px 0 hsla(0,0%,8%,.2))}.toc-focus-btn[data-v-8589d091]:focus-visible{border:2px solid var(--rh-color-blue-50,#06c)}.toc-focus-btn-icon[data-v-8589d091]{color:var(--rh-color-blue-50,#06c)}.toc-wrapper[data-v-8589d091]{padding:0}.product-container[data-v-8589d091]{border-bottom:1px solid var(--rh-color-gray-30,#c7c7c7);padding:var(--rh-space-xl,24px) var(--rh-space-2xl,32px)}.product-container h1.product-title[data-v-8589d091]{font-size:var(--rh-font-size-code-xl,1.25rem);line-height:30px;margin-bottom:0;margin-top:0}.product-container .product-version[data-v-8589d091]{align-items:center;display:flex;flex-wrap:wrap;margin-top:var(--rh-space-lg,16px)}.product-version .version-label[data-v-8589d091]{color:var(--rh-color-canvas-black,#151515);font-family:Red Hat Text;font-size:var(--rh-font-size-body-text-sm,.875rem);font-weight:500}.product-version .version-select-dropdown[data-v-8589d091]{margin:var(--rh-space-md,8px) var(--rh-space-sm,6px);max-width:9.75rem;min-height:2rem;min-width:3rem;overflow:hidden;width:-moz-min-content;width:min-content;word-wrap:nowrap;-webkit-appearance:none;-moz-appearance:none;background:var(--rh-color-white,#fff);background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6' fill='none' viewBox='0 0 10 6'%3E%3Cpath fill='%23151515' d='M.678 0h8.644c.596 0 .895.797.497 1.195l-4.372 4.58c-.298.3-.695.3-.993 0L.18 1.196C-.216.797.081 0 .678 0'/%3E%3C/svg%3E");background-position-x:85%;background-position-y:50%;background-repeat:no-repeat;border:1px solid var(--rh-color-gray-30,#c7c7c7);border-bottom:0;box-shadow:0 -1px 0 0 var(--rh-color-gray-60,#4d4d4d) inset;cursor:pointer;font-size:var(--rh-font-size-body-text-md,1rem);padding:var(--rh-space-md,8px);padding-right:24px;text-overflow:ellipsis}pf-popover[data-v-8589d091]{margin-top:var(--rh-space-md,8px);--pf-c-popover__arrow--BackgroundColor:var(--rh-color-canvas-black,#151515);--pf-c-popover__content--BackgroundColor:var(--rh-color-canvas-black,#151515);--pf-c-popover--BoxShadow:0px 4px 8px 0px #15151540;--pf-c-popover__title-text--Color:var(--rh-color-white,#fff);--pf-c-popover--MaxWidth:300px;--pf-c-popover--MinWidth:300px;--pf-c-popover--c-button--Top:20px;--pf-c-popover--c-button--Right:4px;--pf-c-button--m-plain--hover--Color:var(--rh-color-white,#fff)}pf-popover[data-v-8589d091]::part(content){padding:var(--rh-space-2xl,32px)}pf-popover[data-v-8589d091]::part(body){margin-top:var(--rh-space-lg,16px)}pf-popover[data-v-8589d091]::part(close-button){--pf-c-button--m-plain--focus--Color:var(--rh-color-gray-30,#c7c7c7);--pf-c-button--m-plain--Color:var(--rh-color-gray-30,#c7c7c7)}.popover-header-text[data-v-8589d091]{color:var(--rh-color-white,#fff);font-size:var(--rh-font-size-code-md,1rem);margin:0;max-width:80%;padding:0}.popover-body-link[data-v-8589d091]{color:var(--rh-color-blue-30,#92c5f9);text-decoration:none}.popover-trigger-btn[data-v-8589d091]{align-items:center;background:none;border:none;cursor:pointer;display:flex;justify-content:center}#first-button[data-v-8589d091]{width:80%}#second-button[data-v-8589d091]{text-align:right;width:20%}#toc-btn[data-v-8589d091]{text-align:left;width:100%}.toc-error[data-v-8589d091]{margin:0;max-width:100%}#layout label[data-v-8589d091]{font-weight:500}.page-layout-options[data-v-8589d091]{background-color:#fff;display:flex;flex-direction:column;padding-bottom:var(--rh-space-lg,16px)}.sticky-top[data-v-8589d091]{position:sticky;top:0}summary[data-v-8589d091]{cursor:pointer;list-style:none;position:relative}summary[data-v-8589d091]::-webkit-details-marker{display:none}details#jump-links-details .jump-links-heading[data-v-8589d091]{background-color:var(--rh-color-white,#fff);display:block;margin-top:var(--rh-space-lg,16px);padding:var(--rh-space-lg,16px) 0 0 var(--rh-space-xl,24px);position:sticky;top:0}details#jump-links-details .jump-links-heading[data-v-8589d091]:before{border-right:3px solid #151515;border-top:3px solid #151515;color:#151515;content:"";display:flex;height:9px;left:2px;position:absolute;top:26px;transform:rotate(-135deg);width:9px}details#jump-links-details[open] .jump-links-heading[data-v-8589d091]:before{transform:rotate(135deg)}.table-of-contents>ol[data-v-8589d091]{list-style:none;margin:0;padding:0}nav.table-of-contents[data-v-8589d091]{z-index:1}nav.table-of-contents ol[data-v-8589d091]{list-style:none;margin:0;padding:0}#mobile-browse-docs[data-v-8589d091]{font-weight:var(--rh-font-weight-body-text-medium,500);padding-left:var(--rh-space-2xl,32px)}.docs-content-container[data-v-8589d091]{font-size:var(--rh-font-size-body-text-lg,1.125rem);font-weight:var(--rh-font-weight-body-text-regular,400);line-height:1.6667;padding-left:6rem;padding-right:6rem;padding-top:var(--rh-space-3xl,4rem)}.chapter-title[data-v-8589d091]{font-family:Red Hat Display}h1.chapter-title[data-v-8589d091]{font-size:var(--rh-fontsize-heading-xl,2.25rem);line-height:46.8px;margin:0;padding:0}.chapter .section h4[data-v-8589d091]{font-size:24px;font-weight:400}.banner-wrapper[data-v-8589d091]{padding:3rem 6rem 0}.page-format-dropdown[data-v-8589d091]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#fff;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABtSURBVHgBhc4xCoAwDAXQxE6li0K76w0cPZqjHsEb6AlcHb2BR9ADdG7GmIKTWv0QSOAFPjrndgAo4TtHxszTD4JoVAhh1VoXiNgkUO+971Q8iGgxxlSy1jc3CGof39baWTrzNSOkkksEbG/oBGEJIn6gD3jAAAAAAElFTkSuQmCC");background-position:8.5rem;background-repeat:no-repeat;background-size:auto;border:1px solid #c7c7c7;box-shadow:inset 0 -1px 0 0 #4d4d4d;font-family:Red Hat Text;font-size:var(--rh-font-size-body-text-md,1rem);margin-top:var(--rh-space-xs,4px);max-width:168px;min-height:36px;min-width:168px;overflow:hidden;padding:0 var(--rh-space-xl,24px) 0 var(--rh-space-md,8px);text-overflow:ellipsis;white-space:nowrap}.content-format-selectors[data-v-8589d091]{color:#151515;font-family:Red Hat Text;font-size:var(--rh-font-size-body-text-sm,.875rem);font-weight:var(--rh-font-weight-body-text-medium,500);margin-right:var(--rh-space-2xl,32px);max-width:250px;min-width:250px;padding-top:var(--rh-space-2xl,32px)}.chapter .section .simpara[data-v-8589d091],.chapter .section p[data-v-8589d091]{font-family:Red Hat Text;font-size:var(--rh-font-size-body-text-lg,1.125rem);font-weight:var(--rh-font-weight-body-text-regular,400);line-height:30px}#toggle-focus-mode[data-v-8589d091]{padding-right:var(--rh-space-lg,1rem)}@keyframes slideaway-left-8589d091{0%{display:block}to{opacity:0;transform:translateX(-40px)}}@keyframes slideaway-right-8589d091{0%{display:block}to{opacity:0;transform:translateX(40px)}}@keyframes enter-left-8589d091{0%{display:none;transform:translateX(-40px)}to{opacity:1}}@keyframes enter-right-8589d091{0%{display:none;transform:translateX(40px)}to{opacity:1}}.hide-left[data-v-8589d091]{animation:slideaway-left-8589d091 .2s;display:none}.enter-left[data-v-8589d091]{animation:enter-left-8589d091 .3s;border-right:none;display:block}.enter-right[data-v-8589d091]{animation:enter-right-8589d091 .3s;display:block}.hide-right[data-v-8589d091]{animation:slideaway-right-8589d091 .2s;display:none}.toc-container.enter-toc-container-left[data-v-8589d091]{transform:translateX(-85%)}.alert-section[data-v-8589d091]{padding-bottom:3rem}rh-alert[data-v-8589d091]{width:auto}@media (min-width:992px){#mobile-nav[data-v-8589d091],#toc-list-mobile[data-v-8589d091]{display:none}}@media (min-width:992px) and (max-width:1400px){.docs-ocp-content-container[data-v-8589d091]{padding:var(--rh-space-4xl,64px) var(--rh-space-lg,16px) 0}}@media (width < 992px){#breadcrumbs[data-v-8589d091],.content-format-selectors[data-v-8589d091],.toc-container[data-v-8589d091]{display:none}#mobile-nav-content-wrapper[data-v-8589d091]{border-bottom:1px solid #c7c7c7;border-top:1px solid #c7c7c7}#toc-wrapper-mobile[data-v-8589d091]{padding:var(--rh-space-md,1.5rem)}.product-container[data-v-8589d091]{padding:var(--rh-space-2xl,32px) var(--rh-space-lg,16px)}.product-container.shrink-product-padding[data-v-8589d091]{padding:var(--rh-space-lg,16px)}.product-version .version-select-dropdown[data-v-8589d091]{margin:0 var(--rh-space-lg,16px)}#page-content-options-mobile[data-v-8589d091]{padding:var(--rh-space-lg,2rem)}label[for=page-format][data-v-8589d091],label[for=toggle-focus-mode][data-v-8589d091]{display:block}.page-format-dropdown[data-v-8589d091]{background-position:97%;max-width:100%}nav#mobile-toc-menu[data-v-8589d091]{max-height:50vh;overflow-y:scroll}.mobile-jump-links #first-button[data-v-8589d091]{width:100%}#jump-links-btn[data-v-8589d091]{text-align:left;width:100%}#mobile-jump-links-content-wrapper[data-v-8589d091]{border-bottom:1px solid #c7c7c7;border-top:1px solid #c7c7c7;padding:0 var(--rh-space-lg,16px) var(--rh-space-2xl,32px)}.table-of-contents #browse-docs[data-v-8589d091]{margin-top:1rem;padding-top:var(--rh-space-md,1.5rem)}.mobile-nav[data-v-8589d091]{display:block}.hide-mobile-nav[data-v-8589d091],.mobile-nav[data-v-8589d091]{transition:transform .3s ease-in-out}.hide-mobile-nav[data-v-8589d091]{transform:translateY(-100%)}.docs-content-container[data-v-8589d091]{padding-left:1.25rem;padding-right:1.25rem;padding-top:var(--rh-space-xl,24px)}.banner-wrapper[data-v-8589d091]{padding:0 1rem}.toc-filter-mobile[data-v-8589d091]{align-items:center;display:flex;padding:var(--rh-space-lg,16px);width:100%}#text-input[data-v-8589d091]{padding-left:.5rem}.toc-filter[data-v-8589d091]{display:none}}@media (width <=576px){.content-format-selectors[data-v-8589d091]{display:none}}.informaltable[data-v-8589d091],.rhdocs .informaltable[data-v-8589d091],.rhdocs .table-contents[data-v-8589d091],.rhdocs .table-wrapper[data-v-8589d091],.table-contents[data-v-8589d091],.table-wrapper[data-v-8589d091]{max-height:var(--rh-table--maxHeight);overflow:auto}rh-table[data-v-8589d091]{display:block;margin:2rem 0;max-width:100%}.pvof-doc__wrapper[data-v-8589d091],.rhdocs[data-v-8589d091]{--rh-table--maxHeight:calc(100vh - 12.5rem)}</style>
<style>:is(rh-footer-block) a[data-v-97dd2752]{text-decoration:underline}</style>
<style>:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) a{color:var(--rh-color-link-inline-on-dark,var(--rh-color-interactive-blue-lighter,#92c5f9));text-decoration:none}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) a:hover{color:var(--rh-color-link-inline-hover-on-dark,var(--rh-color-interactive-blue-lightest,#b9dafc));text-decoration:underline}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) a:is(:focus,:focus-within){color:var(--rh-color-link-inline-focus-on-dark,var(--rh-color-interactive-blue-lightest,#b9dafc));text-decoration:underline}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) a:visited{color:var(--rh-color-link-inline-visited-on-dark,var(--rh-color-interactive-blue-lightest,#b9dafc));text-decoration:none}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) a[slot^=logo]{display:block}:is(rh-footer) a[slot^=logo]>img{display:block;height:100%;height:var(--rh-size-icon-04,40px);width:auto}:is(rh-footer,rh-footer-universal,rh-global-footer) :is(h1,h2,h3,h4,h5,h6){font-family:var(--rh-font-family-heading,RedHatDisplay,"Red Hat Display","Noto Sans Arabic","Noto Sans Hebrew","Noto Sans JP","Noto Sans KR","Noto Sans Malayalam","Noto Sans SC","Noto Sans TC","Noto Sans Thai",Helvetica,Arial,sans-serif);line-height:var(--rh-line-height-heading,1.3)}rh-footer [slot=links]:is(h1,h2,h3,h4,h5):nth-of-type(n+5){--_link-header-margin:calc(var(--rh-space-2xl, 32px) - var(--rh-space-lg, 16px))}rh-footer [slot^=links] a{gap:var(--rh-footer-links-gap,var(--rh-space-md,8px))}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) [slot^=links] li{display:contents;margin:0;padding:0}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) [slot^=links] a{color:var(--rh-color-text-primary-on-dark,#fff)!important;display:block;font-size:var(--rh-footer-link-font-size,var(--rh-font-size-body-text-sm,.875rem));width:-moz-fit-content;width:fit-content}:is(rh-footer-universal,rh-global-footer) [slot^=links] a{font-size:inherit}:is(rh-footer,rh-footer-universal,rh-global-footer){--rh-footer-section-side-gap:var(--rh-space-lg,16px)}@media screen and (min-width:768px){:is(rh-footer,rh-footer-universal,rh-global-footer){--rh-footer-section-side-gap:var(--rh-space-2xl,32px)}}@media screen and (min-width:1440px){:is(rh-footer,rh-footer-universal,rh-global-footer){--rh-footer-section-side-gap:var(--rh-space-4xl,64px)}}rh-footer:not(:defined){background-color:var(--rh-color-surface-darker,#1f1f1f);display:grid;grid-template-areas:"footer" "global";grid-template-rows:1fr auto;min-height:var(--rh-footer-nojs-min-height,750px);width:100%}:is(rh-footer-universal,rh-global-footer):not(:defined):before{grid-area:global}rh-footer:not(:defined)>[slot=logo]{padding:var(--rh-space-2xl,32px) var(--_section-side-gap)}:is(rh-footer-universal,rh-global-footer):not(:defined)>*,rh-footer:not(:defined)>:not([slot=logo],:is(rh-footer-universal,rh-global-footer)){border:0;clip:rect(1px,1px,1px,1px);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}:is(rh-footer-universal,rh-global-footer):not(:defined){background-color:var(--rh-color-surface-darkest,#151515);display:block;min-height:176px;width:100%}rh-footer-universal rh-footer-copyright{grid-column:-1/1}</style>
<style>.status-legal .status-page-widget[data-v-5f538988]{display:block;margin:.5rem 0;width:11.3125rem;width:-moz-max-content;width:max-content}.status-page-widget[data-v-5f538988]{align-items:center;display:flex;flex-direction:row}.status-legal .status-page-widget .status-description[data-v-5f538988]{color:#ccc;font-weight:600;letter-spacing:.0125rem;line-height:1.5;margin-right:.5rem}.status-good[data-v-5f538988]{background-color:#3e8536}.status-critical[data-v-5f538988]{background-color:#a30100}.status-partial[data-v-5f538988]{background-color:#f5c12d}.status-maintentance[data-v-5f538988]{background-color:#316dc1}.status-minor[data-v-5f538988]{background-color:#b85c00}.status-description[data-v-5f538988]{color:#ccc;font-weight:500;letter-spacing:.2px;line-height:1.5}.current-status-indicator[data-v-5f538988]{border-radius:6px;display:inline-block;height:12px;margin:0 0 0 5px;width:12px}.current-status-indicator.small[data-v-5f538988]{border-radius:4px;display:inline-block;height:8px;margin:0 0 0 5px;width:8px}</style>
<style>.breadcrumbs[data-v-798f280c]{align-items:center;background-color:#f6f6f6;display:flex;gap:var(--rh-space-xl,24px);padding:var(--rh-space-lg,16px) var(--rh-space-2xl,32px)}nav[data-v-798f280c]{flex:1}ol[data-v-798f280c]{background-color:#f6f6f6;font-size:.875rem;list-style:none;margin:0;padding:0}li[data-v-798f280c]{color:#151515;display:inline}a[data-v-798f280c]:after{border-bottom-color:transparent;border-left-color:transparent;box-shadow:inset .25rem .25rem 0 .0625rem #8a8d8d;content:"";display:inline-block;height:1.07143em;margin:0 .5em;position:relative;right:0;top:.75em;transform:translateY(-.5em) rotate(135deg) scale(.5);width:1.07143em}</style>
<style>ol[data-v-fa0dae77]{margin:0;padding:0}li[data-v-fa0dae77],ol[data-v-fa0dae77],ul[data-v-fa0dae77]{list-style:none;margin:0}.chapter-title[data-v-fa0dae77]{font-size:1em}.sub-chapter-title[data-v-fa0dae77],.sub-chapter-title a[data-v-fa0dae77]{font-size:.875rem}#toc .link[data-v-fa0dae77],#toc-mobile .link[data-v-fa0dae77],.heading[data-v-fa0dae77],.sub-nav .link[data-v-fa0dae77],.sub-nav .link .link[data-v-fa0dae77]{display:block;padding:var(--rh-space-md,8px) var(--rh-space-2xl,32px);padding-right:2.5em;text-decoration:none;transition:background-color .25s}.heading[data-v-fa0dae77]:hover,.link[data-v-fa0dae77]:hover,.sub-nav .link[data-v-fa0dae77]:hover{background:var(--rh-color-surface-lighter,#f2f2f2);box-shadow:inset 3px 0 0 0 #d2d2d2;color:#151515}details[open]:first-of-type>.heading[data-v-fa0dae77]:after{transform:rotate(135deg)}.item[data-v-fa0dae77]{line-height:22px}#toc .link[data-v-fa0dae77],#toc-mobile .link[data-v-fa0dae77]{color:var(--rh-color-text-primary-on-light,#151515)}.sub-nav[data-v-fa0dae77],.toc-wrapper[data-v-fa0dae77]{list-style:none;margin:0}.toc-wrapper[data-v-fa0dae77]{min-width:100%;padding:0}.sub-nav[data-v-fa0dae77]{font-size:1em;line-height:24px;padding-left:1rem;padding-left:16px}.sub-nav .link[data-v-fa0dae77]:hover{color:#151515}.active[data-v-fa0dae77]{background:var(--rh-color-surface-lighter,#f2f2f2);box-shadow:inset 3px 0 0 0 var(--rh-color-icon-primary-on-light,#e00)}.chapter-landing-page[data-v-fa0dae77]{font-weight:500}summary[data-v-fa0dae77]{cursor:pointer;list-style:none;position:relative}summary[data-v-fa0dae77]::-webkit-details-marker{display:none}@keyframes slideDown-fa0dae77{0%{height:0;opacity:0}to{height:var(--details-height-open,"100%");opacity:1}}html[data-v-fa0dae77]{--details-transition-time:400ms}details[data-v-fa0dae77]{max-height:var(--details-height-closed,auto);transition:all ease-out var(--details-transition-time,0)}details[open][data-v-fa0dae77]{max-height:var(--details-height-open,auto)}details .heading.sub-chapter-title[data-v-fa0dae77]:after,details .heading[data-v-fa0dae77]:after{border-right:3px solid #151515;border-top:3px solid #151515;color:#151515;content:"";display:flex;float:right;height:9px;margin-left:16px;position:absolute;right:var(--rh-space-xl,24px);top:14px;transform:rotate(45deg);width:9px}details .heading.sub-chapter-title[data-v-fa0dae77]:after{height:8px;width:8px}</style>
<style>.item[data-v-b883c74f]{line-height:22px}#toc .link[data-v-b883c74f],#toc-mobile .link[data-v-b883c74f]{color:var(--rh-color-text-primary-on-light,#151515)}#toc .link[data-v-b883c74f],#toc-mobile .link[data-v-b883c74f],.heading[data-v-b883c74f],.sub-nav .link[data-v-b883c74f],.sub-nav .link .link[data-v-b883c74f]{display:block;padding:var(--rh-space-md,8px) var(--rh-space-2xl,32px);padding-right:2.5em;text-decoration:none;transition:background-color .25s}.heading[data-v-b883c74f]:hover,.link[data-v-b883c74f]:hover,.sub-nav .link[data-v-b883c74f]:hover{background:var(--rh-color-surface-lighter,#f2f2f2);box-shadow:inset 3px 0 0 0 #d2d2d2;color:#151515}ol[data-v-b883c74f]{margin:0;padding:0}li[data-v-b883c74f],ol[data-v-b883c74f],ul[data-v-b883c74f]{list-style:none;margin:0}.chapter-title[data-v-b883c74f]{font-size:1em}.sub-nav[data-v-b883c74f]{font-size:1em;line-height:24px;list-style:none;margin:0;padding-left:1rem;padding-left:16px}.sub-nav .link[data-v-b883c74f]:hover{color:#151515}.active[data-v-b883c74f]{background:var(--rh-color-surface-lighter,#f2f2f2);box-shadow:inset 3px 0 0 0 var(--rh-color-icon-primary-on-light,#e00)}.sub-chapter-title[data-v-b883c74f],.sub-chapter-title a[data-v-b883c74f]{font-size:.875rem}summary[data-v-b883c74f]{cursor:pointer;list-style:none;position:relative}summary[data-v-b883c74f]::-webkit-details-marker{display:none}html[data-v-b883c74f]{--details-transition-time:400ms}.chapter-landing-page[data-v-b883c74f]{font-weight:500}details[open]:first-of-type>.heading[data-v-b883c74f]:after{transform:rotate(135deg)}details[data-v-b883c74f]{max-height:var(--details-height-closed,auto);transition:all ease-out var(--details-transition-time,0)}details[open][data-v-b883c74f]{max-height:var(--details-height-open,auto)}details .heading.sub-chapter-title[data-v-b883c74f]:after,details .heading[data-v-b883c74f]:after{border-right:3px solid #151515;border-top:3px solid #151515;color:#151515;content:"";display:flex;float:right;height:9px;margin-left:16px;position:absolute;right:var(--rh-space-xl,24px);top:14px;transform:rotate(45deg);width:9px}details .heading.sub-chapter-title[data-v-b883c74f]:after{height:8px;width:8px}</style>
<style>.html-container[data-v-9c2a9ddb]{padding:2rem 1.5rem 0}rh-alert[data-v-9c2a9ddb]{color:#151515}@media (max-width:772px){.html-container[data-v-9c2a9ddb]{padding:3rem 1rem 0}}</style>
<style>.search-container[data-v-69710f44]{height:100%}.form-box[data-v-69710f44],.search-container[data-v-69710f44]{justify-content:center}.form-box[data-v-69710f44],.search-box[data-v-69710f44],.search-container[data-v-69710f44]{align-items:center;display:flex;width:100%}.search-box[data-v-69710f44]{justify-content:space-between;position:relative}ul[data-v-69710f44]{list-style-type:none}#search-list[data-v-69710f44]{background:#fff;border:1px solid #f0f0f0;box-shadow:0 4px 4px 0 #00000040;color:#151515;display:block;left:0;margin:0;padding:0;position:absolute;top:37px;width:100%;z-index:200}#search-list li[data-v-69710f44]{align-items:center;display:flex;justify-content:space-between;padding:.75rem}#search-list .active[data-v-69710f44],#search-list li[data-v-69710f44]:hover{background:#f0f0f0}.group-title[data-v-69710f44]{border-top:1px solid #4d4d4d;color:#4d4d4d;cursor:default;font-size:12px;font-weight:400;pointer-events:none}.group-title[data-v-69710f44],.group-title[data-v-69710f44]:hover{background:#fff}.search-item-text-elipsis[data-v-69710f44]{display:inline-block;max-width:48%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.search-item-text[data-v-69710f44]{padding-left:1.75rem}.search-item-chip[data-v-69710f44]{float:right}.search-product-version[data-v-69710f44]{background:#fff;border:1px solid #f0f0f0;border-radius:3px;font-size:1rem;font-weight:400;line-height:24px}.search-icon-form[data-v-69710f44]{color:var(--rh-color-gray-50,#707070);left:12px;position:absolute}.input-search-box[data-v-69710f44]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);height:36px;padding:0 40px;width:100%}.input-clear-btn[data-v-69710f44]{align-items:center;background-color:transparent;border:none;display:flex;height:36px;justify-content:center;margin-right:-30px;outline:none;transform:translateX(-30px)}.input-clear-btn[data-v-69710f44]:focus{border:1px solid var(--rh-color-accent-base-on-light,#06c)}.input-clear-btn:focus .input-clear-icon[data-v-69710f44]{color:var(--rh-color-canvas-black,#151515)}.input-clear-icon[data-v-69710f44]{color:#6b6e72;cursor:pointer}.input-clear-icon[data-v-69710f44]:hover{color:var(--rh-color-canvas-black,#151515)}.form-submit-btn[data-v-69710f44]::part(button){align-items:center;background-color:var(--rh-color-gray-20,#e0e0e0);border-radius:0;display:flex;height:36px;justify-content:center;--_default-border-color:var(--rh-color-gray-20,#e0e0e0)}.input-close-btn[data-v-69710f44]{background:none;border:none;cursor:pointer;margin:0 var(--rh-space-lg,16px)}.input-close-icon[data-v-69710f44]{color:var(--rh-color-white,#fff)}@media (max-width:992px){.form-box[data-v-69710f44]{gap:var(--rh-space-md,8px);margin:auto;width:100%}.input-search-box[data-v-69710f44]{border:1px solid var(--rh-color-gray-30,#c7c7c7)}.input-search-box[data-v-69710f44]::-moz-placeholder{color:#6a6e73;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);font-weight:var(--rh-font-weight-code-regular,400);line-height:24px}.input-search-box[data-v-69710f44]::placeholder{color:#6a6e73;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);font-weight:var(--rh-font-weight-code-regular,400);line-height:24px}.search-item-text-elipsis[data-v-69710f44]{max-width:60%}}@media (max-width:767px){.input-close-btn[data-v-69710f44]{display:none}.search-container[data-v-69710f44]{border:1px solid #f0f0f0}}</style>
<link rel="stylesheet" href="/_nuxt/entry.DNAluCmw.css" integrity="sha384-FnrZajt9k3u4tri3ClqikI96k+jP7kyrvgKKgdzBr5Y8CQEi3gusKE0+eMSLvGxm">
<link rel="stylesheet" href="/_nuxt/SearchAutocomplete.DkrJaF8R.css" integrity="sha384-Zw8gf6w7SrpWDmknvrab5QanIN+DSJRS/bPB9/lgDkhR7JhDmG/VF++MTMKU8mKB">
<link rel="stylesheet" href="/_nuxt/Breadcrumbs.BLkLxUMB.css" integrity="sha384-f6iEfCywVoZB0/hIKTRaxywtS21KzhBx2JOI/uVjjU9aqFcP7X9cqLH29w2HQvLe">
<link rel="stylesheet" href="/_nuxt/Alert.fTkXFs3h.css" integrity="sha384-yFMpT5E64LAQi3qJ10AJJ1oOH3DrI68OvLSjSivjNCQXZ25pmFxlPavPQ0TEyEpq">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/C3PvZR0C.js" integrity="sha384-H9Can2ny34kmIBk2SNFJRaBH6FotFjI6LVF8tQ4HqJnqY0a1tGDF/4RHxK2LFs7c">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Ds9UYxCD.js" integrity="sha384-PFyBx6Pvk48yXM+prD4CDErW/3HFtPEqORVyAch5qDvJSyubA93+vR4jsWGRQKZs">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BUXK7nH-.js" integrity="sha384-Kqf3r1QrD7+NOn9EuK/ba9sTBZjn7vLAjnCoRtq7IKz+QV0JUUBFf1Snf1yVkkgr">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BxBriHwM.js" integrity="sha384-bejD6BN5N1iVRo5Ymn+LdVN0jvrnJTzgqgFD9xQ5+Yi46U6ff+s5W2AISzRWvJaM">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DB5Lt3x5.js" integrity="sha384-Ae/gV/4Dt4jnJApC0CWbckKJ7omq+W9Hb4jjdMyhxGJpwk6FlO7pGYMD3bPO/h1y">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/D8BFaW0S.js" integrity="sha384-/m09v/yYk14L9Hra6/9jYtMTn2IdkKQvzpFPRQ5P/baRKwdZQN98873hqvwuYXFS">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/_58Q44fW.js" integrity="sha384-EdSd8jpnetO/BWDAc8C4SpQExZ7pYjMygNPvbLmiA1TaYsNUdVOqIIyOIzaErEeU">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DOCUiUcq.js" integrity="sha384-9H868K5q7MLzC8TSRXT3pVqDzsOVxZLYvUQ8cLGpHPZCFEyEJjnwSHE+/7FWrJPV">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CiTVMRA7.js" integrity="sha384-xBIJ2xO0t62/oREKqSxPtW1tRxKY+5YYXbGcJ0QR9IRM28JhL+53NOiAvVFn3rmF">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/CR3F0y4K.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/Bn-QuJwp.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/T_zvNmZe.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/Ciddaed-.js">
<link rel="prefetch" as="image" type="image/svg+xml" href="/_nuxt/Footer_Cloud.DpSdW8MR.svg">
<script type="module">
      import "@rhds/elements/rh-cta/rh-cta.js";
      </script>
<script type="module">
      import '@rhds/elements/rh-alert/rh-alert.js';
      </script>
<script type="module">
        import "/scripts/v1/@cpelements/pfe-navigation/dist/pfe-navigation.min.js";
        import "/scripts/v1/@rhds/elements/elements/rh-button/rh-button.js";
      </script>
<script type="module">import "@rhds/elements/rh-footer/rh-footer.js"</script>
<link rel="canonical" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html-single/configuring_and_managing_virtualization/index">
<script type="module">
      import "@rhds/elements/rh-alert/rh-alert.js";
      import "@rhds/elements/rh-code-block/rh-code-block.js";
      import '@rhds/elements/rh-cta/rh-cta.js';
      import '@patternfly/elements/pf-switch/pf-switch.js';
      import '@cpelements/rh-table/dist/rh-table.js';
      import '@patternfly/pfe-clipboard/dist/pfe-clipboard.min.js';
      import '@patternfly/elements/pf-button/pf-button.js';
      import '@patternfly/elements/pf-modal/pf-modal.js';
      import '@patternfly/elements/pf-icon/pf-icon.js';
      import '@patternfly/elements/pf-popover/pf-popover.js';
      import '@patternfly/elements/pf-tooltip/pf-tooltip.js';
      import '@rhds/elements/rh-badge/rh-badge.js';
      </script>
<meta name="description" content="Configuring and managing virtualization | Red Hat Documentation">
<meta name="app-version" content="v0.0.1">
<script type="module">
        import "/scripts/v1/@rhds/elements/elements/rh-button/rh-button.js";
      </script>
<script type="module">
      import '@rhds/elements/rh-alert/rh-alert.js';
      </script>
<script type="module">
        import "/scripts/v1/@rhds/elements/elements/rh-button/rh-button.js";
        import "@patternfly/elements/pf-badge/pf-badge.js";
      </script>
<script type="module" src="/_nuxt/C3PvZR0C.js" crossorigin integrity="sha384-H9Can2ny34kmIBk2SNFJRaBH6FotFjI6LVF8tQ4HqJnqY0a1tGDF/4RHxK2LFs7c"></script></head><body><div id="__nuxt"><!--[--><!--[--><!----><header data-v-edc0d12c><a href="#pfe-navigation" id="global-skip-to-nav" class="skip-link visually-hidden" data-v-edc0d12c>Skip to navigation</a><a href="#main-content" class="skip-link visually-hidden" data-v-edc0d12c>Skip to content</a><nav id="upper-navigation" class="upper-navigation" aria-labelledby="upper-navigation-label" data-analytics-region="upper-navigation" data-v-edc0d12c><p id="upper-navigation-label" class="upper-nav-hidden" data-v-edc0d12c>Featured links</p><div class="upper-nav-container" data-v-edc0d12c><ul class="upper-nav-menu" data-v-edc0d12c><li data-v-edc0d12c><a href="https://access.redhat.com/" class="upper-nav-links" data-analytics-text="Support" data-analytics-category="Featured Links" data-v-edc0d12c>Support</a></li><li data-v-edc0d12c><a href="https://console.redhat.com/" class="upper-nav-links" data-analytics-text="Console" data-analytics-category="Featured Links" data-v-edc0d12c>Console</a></li><li data-v-edc0d12c><a href="https://developers.redhat.com/" class="upper-nav-links" data-analytics-text="Developers" data-analytics-category="Featured Links" data-v-edc0d12c>Developers</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/products/trials" class="upper-nav-links" data-analytics-text="Start a trial" data-analytics-category="Featured Links" data-v-edc0d12c>Start a trial</a></li><li data-v-edc0d12c><button id="all-red-hat" class="upper-nav-links" data-analytics-text="All Red Hat" data-analytics-category="Featured Links" aria-expanded="false" data-analytics-linktype="tab" data-v-edc0d12c>All Red Hat<svg class="upper-nav-arrow" xmlns="http://www.w3.org/2000/svg" width="1024" height="1024" viewBox="0 0 1024 1024" aria-hidden="true" data-v-edc0d12c=""><path d="M810.642 511.557c0 8.905-3.447 16.776-10.284 23.613L322.31 1013.216c-6.835 6.837-14.706 10.284-23.61 10.284s-16.776-3.447-23.613-10.284l-51.303-51.303c-6.837-6.837-10.284-14.707-10.284-23.612s3.447-16.775 10.284-23.61L626.972 511.5 223.784 108.31c-6.837-6.835-10.284-14.706-10.284-23.61s3.447-16.776 10.284-23.613l51.303-51.303C281.924 2.947 289.794-.5 298.7-.5s16.775 3.447 23.61 10.284L800.36 487.83c6.837 6.837 10.284 14.708 10.284 23.613v.114" data-v-edc0d12c=""/></svg></button><div class="upper-nav-dropdown-container" data-v-edc0d12c><ul data-v-edc0d12c><li data-v-edc0d12c><span data-v-edc0d12c>For customers</span><ul data-v-edc0d12c><li data-v-edc0d12c><a href="https://access.redhat.com/support" data-pzn-audience="customers" data-analytics-category="All Red Hat|For customers" data-analytics-text="Customer support" data-v-edc0d12c>Customer support</a></li><li data-v-edc0d12c><a href="/products" data-pzn-audience="customers" data-analytics-category="All Red Hat|For customers" data-analytics-text="Documentation" data-v-edc0d12c>Documentation</a></li><li data-v-edc0d12c><a href="https://access.redhat.com/support/cases" data-pzn-audience="customers" data-analytics-category="All Red Hat|For customers" data-analytics-text="Support cases" data-v-edc0d12c>Support Cases</a></li><li data-v-edc0d12c><a href="https://access.redhat.com/management" data-pzn-audience="customers" data-analytics-category="All Red Hat|For customers" data-analytics-text="Subscription management" data-v-edc0d12c>Subscription management</a></li><li data-v-edc0d12c><a href="https://catalog.redhat.com/" data-analytics-category="All Red Hat|For customers" data-analytics-text="Red Hat Ecosystem Catalog" data-v-edc0d12c>Red Hat Ecosystem Catalog</a></li><li data-v-edc0d12c><a href="https://catalog.redhat.com/partners" data-analytics-category="All Red Hat|For customers" data-analytics-text="Find a partner" data-v-edc0d12c>Find a partner</a></li></ul></li><li data-v-edc0d12c><span data-v-edc0d12c>For partners</span><ul data-v-edc0d12c><li data-v-edc0d12c><a href="https://connect.redhat.com/login" data-pzn-audience="partners" data-analytics-category="All Red Hat|For partners" data-analytics-text="Partner login" data-v-edc0d12c>Partner login</a></li><li data-v-edc0d12c><a href="https://connect.redhat.com/en/support" data-pzn-audience="partners" data-analytics-category="All Red Hat|For partners" data-analytics-text="Partner support" data-v-edc0d12c>Partner support</a></li><li data-v-edc0d12c><a href="https://connect.redhat.com/" data-pzn-audience="partners" data-analytics-category="All Red Hat|For partners" data-analytics-text="Become a partner " data-v-edc0d12c>Become a partner</a></li></ul></li><li data-v-edc0d12c><span data-v-edc0d12c>Try, buy, &amp; sell</span><ul data-v-edc0d12c><li data-v-edc0d12c><a href="https://marketplace.redhat.com/en-us" data-analytics-category="All Red Hat|Try, buy, &amp; sell" data-analytics-text="Red Hat Marketplace" data-v-edc0d12c>Red Hat Marketplace</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/store" data-analytics-category="All Red Hat|Try, buy, &amp; sell" data-analytics-text="Red Hat Store" data-v-edc0d12c>Red Hat Store</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/contact" data-analytics-category="All Red Hat|Try, buy, &amp; sell" data-analytics-text="Contact sales" data-v-edc0d12c>Contact Sales</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/products/trials" data-analytics-category="All Red Hat|Try, buy, &amp; sell" data-analytics-text="Start a trial" data-v-edc0d12c>Start a trial</a></li></ul></li><li data-v-edc0d12c><span data-v-edc0d12c>Learning resources</span><ul data-v-edc0d12c><li data-v-edc0d12c><a href="https://www.redhat.com/en/services/training-and-certification" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="Training and certification " data-v-edc0d12c>Training and certification</a></li><li data-v-edc0d12c><a href="https://developers.redhat.com/" data-pzn-audience="developers|community" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="For developers" data-v-edc0d12c>For developers</a></li><li data-v-edc0d12c><a href="https://cloud.redhat.com/learn" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="Hybrid cloud learning hub" data-v-edc0d12c>Hybrid cloud learning hub</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/interactive-labs" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="Interactive labs" data-v-edc0d12c>Interactive labs</a></li><li data-v-edc0d12c><a href="https://learn.redhat.com/" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="Learning community" data-v-edc0d12c>Learning community</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/tv" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="Red Hat TV" data-v-edc0d12c>Red Hat TV</a></li></ul></li><li data-v-edc0d12c><span data-v-edc0d12c>Open source communities</span><ul data-v-edc0d12c><li data-v-edc0d12c><a href="https://www.ansible.com/community" data-analytics-category="All Red Hat|Open source communities" data-analytics-text="Ansible" data-v-edc0d12c>Ansible</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/sysadmin/" id="community" data-analytics-category="All Red Hat|Open source communities" data-analytics-text="For system administrators" data-v-edc0d12c>For system administrators</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/architect/" data-pzn-audience="community" data-analytics-category="All Red Hat|Open source communities" data-analytics-text="For architects" data-v-edc0d12c>For architects</a></li></ul></li></ul></div></li></ul></div></nav><pfe-navigation full-width id="pfe-navigation" pf-sticky="true" lang="en" data-v-edc0d12c><nav class="pfe-navigation" aria-label="Main Navigation" data-v-edc0d12c><div class="pfe-navigation__logo-wrapper" id="pfe-navigation__logo-wrapper" data-v-edc0d12c><a href="/en" class="pfe-navigation__logo-link" data-v-edc0d12c><img class="pfe-navigation__logo-image pfe-navigation__logo-image--screen pfe-navigation__logo-image--small" src="/Logo-Red_Hat-Documentation-A-Reverse-RGB.svg" width="240" height="40" alt="Red Hat Documentation" data-v-edc0d12c></a></div></nav><span data-v-edc0d12c></span><div slot="secondary-links" data-v-edc0d12c><div class="hidden-at-desktop hidden-at-tablet search-mobile" data-v-edc0d12c><div id="search-form" class="search-container" opensearchbox="true" data-v-edc0d12c data-v-69710f44><form role="search" class="form-box" autocomplete="off" data-v-69710f44><div class="search-box" data-v-69710f44><pf-icon icon="search" size="md" class="search-icon-form" data-v-69710f44></pf-icon><input type="text" id="input-search" class="input-search-box" placeholder="Search documentation" value aria-autocomplete="list" data-v-69710f44><!----><!----><!----><rh-button disabled variant="tertiary" class="form-submit-btn" data-v-69710f44><img src="data:image/svg+xml,%3csvg%20width=&#39;14&#39;%20height=&#39;14&#39;%20viewBox=&#39;0%200%2014%2014&#39;%20fill=&#39;none&#39;%20xmlns=&#39;http://www.w3.org/2000/svg&#39;%3e%3cpath%20d=&#39;M7%200L5.6%201.4L10.3%206H0V8H10.3L5.6%2012.6L7%2014L14%207L7%200Z&#39;%20fill=&#39;%23707070&#39;/%3e%3c/svg%3e" alt="Submit button" data-v-69710f44></rh-button></div></form><!----></div></div><div class="hidden-at-desktop hidden-at-tablet buttons" data-v-edc0d12c><a href="https://access.redhat.com/" data-analytics-category="More Red Hat" data-analytics-text="Support" data-v-edc0d12c>Support</a><a href="https://console.redhat.com/" data-analytics-category="More Red Hat" data-analytics-text="Console" data-v-edc0d12c>Console</a><a href="https://developers.redhat.com/" data-analytics-category="More Red Hat" data-analytics-text="Developers" data-v-edc0d12c>Developers</a><a href="https://www.redhat.com/en/products/trials" data-analytics-category="More Red Hat" data-analytics-text="Start a trial" data-v-edc0d12c>Start a trial</a><a href="https://www.redhat.com/en/contact" data-analytics-category="More Red Hat" data-analytics-text="Contact" data-v-edc0d12c>Contact</a></div><div class="hidden-at-desktop hidden-at-tablet mobile-lang-select" data-v-edc0d12c><label for="lang_selection" data-v-edc0d12c>Select your language</label><select id="lang_selection" data-v-edc0d12c><!--[--><option value="en" xml:lang="en" hreflang="en" data-v-edc0d12c>English</option><option value="fr" xml:lang="fr" hreflang="fr" data-v-edc0d12c>Français</option><option value="ko" xml:lang="ko" hreflang="ko" data-v-edc0d12c>한국어</option><option value="ja" xml:lang="ja" hreflang="ja" data-v-edc0d12c>日本語</option><option value="zh-cn" xml:lang="zh-cn" hreflang="zh-cn" data-v-edc0d12c>中文 (中国)</option><option value="de" xml:lang="de" hreflang="de" data-v-edc0d12c>Deutsch</option><option value="it" xml:lang="it" hreflang="it" data-v-edc0d12c>Italiano</option><option value="pt-br" xml:lang="pt-br" hreflang="pt-br" data-v-edc0d12c>Português</option><option value="es" xml:lang="es" hreflang="es" data-v-edc0d12c>Español</option><!--]--></select></div></div></pfe-navigation></header><main id="main-content"><!--[--><!--[--><!--[--><!----><!----><!--]--><div class="breadcrumbs" id="breadcrumbs" data-v-8589d091 data-v-798f280c><nav aria-label="Breadcrumb" class="breadcrumb" data-v-798f280c><ol data-v-798f280c><li data-v-798f280c><a href="/" data-v-798f280c>Home</a></li><li data-v-798f280c><a href="/en/products" data-v-798f280c>Products</a></li><!--[--><li data-v-798f280c><a href="/en/documentation/red_hat_enterprise_linux/" data-v-798f280c>Red Hat Enterprise Linux</a></li><li data-v-798f280c><a href="/en/documentation/red_hat_enterprise_linux/9/" data-v-798f280c>9</a></li><li data-v-798f280c><!--[-->Configuring and managing virtualization<!--]--></li><!--]--></ol></nav><span data-v-798f280c></span></div><!----><nav id="mobile-nav" class="mobile-nav" aria-label="mobile menu" data-v-8589d091><div class="mobile-nav-wrapper" data-v-8589d091><div id="first-button" data-v-8589d091><button id="toc-btn" aria-expanded="false" aria-controls="mobile-nav-content-wrapper" class="mobile-nav-btn" data-v-8589d091><span class="sr-only" data-v-8589d091>Open </span>Table of contents</button></div><div id="second-button" data-v-8589d091><button id="settings-btn" aria-expanded="false" aria-controls="mobile-nav-content-wrapper" class="mobile-nav-btn" data-v-8589d091><pf-icon icon="cog" size="md" data-v-8589d091></pf-icon><span class="sr-only" data-v-8589d091>Open page settings</span></button></div></div><div id="mobile-nav-content-wrapper" class="hidden" role="navigation" tabindex="0" data-v-8589d091><div id="toc-mobile" class="hidden" aria-labelledby="toc-btn" data-v-8589d091><div class="shrink-product-padding product-container" id="product-container-mobile" data-v-8589d091><h1 class="product-title" data-v-8589d091>Red Hat Enterprise Linux</h1><!----></div><div class="toc-filter-mobile" data-v-8589d091><span id="text" part="text" data-v-8589d091><input id="text-input" aria-label="Search input" part="text-input" placeholder="Filter table of contents" type="text" class value data-v-8589d091><!----></span></div><div id="toc-wrapper-mobile" class="span-xs-12 span-sm-4 span-md-3" lang="en" data-v-8589d091><nav id="mobile-toc-menu" class="table-of-contents" aria-label="table of content - mobile" data-v-8589d091><!----></nav></div><!----></div><div id="page-content-options-mobile" class="hidden" aria-labelledby="settings-btn" data-v-8589d091><div class="page-layout-options" data-v-8589d091><label for="page-format-mobile" data-v-8589d091>Format</label><select id="page-format-mobile" class="page-format-dropdown" data-v-8589d091><option class="page-type" value="html" data-v-8589d091>Multi-page</option><option selected class="page-type" value="html-single" data-v-8589d091>Single-page</option><option class="page-type" value="pdf" data-v-8589d091>View full doc as PDF</option></select></div></div></div><!----><!----></nav><div class="grid grid-col-12 content-wrapper" data-v-8589d091><aside id="left-content" class="span-xs-12 span-sm-4 span-md-3" lang="en-us" aria-label="left navigation" xml:lang="en-us" data-v-8589d091><div class="toc-container" id="toc-container" visible="true" data-v-8589d091><div class="toc-focus-container" id="toc-focus-container" data-v-8589d091><button class="toc-focus-btn" aria-label="toggle left menu" aria-controls="toc-container" aria-expanded="true" data-v-8589d091><pf-icon size="md" icon="angle-left" class="toc-focus-btn-icon" data-v-8589d091></pf-icon></button></div><div class="product-container" id="product-container-desktop" data-v-8589d091><h1 class="product-title" data-v-8589d091>Red Hat Enterprise Linux</h1><!----></div><div class="toc-filter" id="toc-filter" data-v-8589d091><span id="text" part="text" data-v-8589d091><span id="search-icon" part="search-icon" data-v-8589d091><pf-icon icon="filter" size="md" data-v-8589d091></pf-icon></span><input id="text-input" aria-label="Search input" part="text-input" placeholder="Filter table of contents" type="text" class value data-v-8589d091><!----></span></div><div id="toc-wrapper" class="toc-wrapper" data-v-8589d091><nav id="toc" class="max-height-85 table-of-contents" aria-label="Table of contents" data-v-8589d091><ol id="toc-list" data-v-8589d091><!--[--><li class="item chapter" data-v-fa0dae77><a class="link active" href id="chapter-index" data-v-fa0dae77>Configuring and managing virtualization</a></li><li class="item chapter" data-v-fa0dae77><a class="link" href="#proc_providing-feedback-on-red-hat-documentation_configuring-and-managing-virtualization" id="chapter-landing--configuring_and_managing_virtualization-proc_providing-feedback-on-red-hat-documentation_configuring-and-managing-virtualization" data-v-fa0dae77>Providing feedback on Red Hat documentation</a></li><li class="item chapter" data-v-fa0dae77><details id="toc--introducing-virtualization-in-rhel_configuring-and-managing-virtualization" data-v-fa0dae77><summary class="heading chapter-title" id="introducing-virtualization-in-rhel_configuring-and-managing-virtualization--summary" data-v-fa0dae77>1. Introducing virtualization in RHEL</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#introducing-virtualization-in-rhel_configuring-and-managing-virtualization" id="chapter-landing--configuring_and_managing_virtualization-introducing-virtualization-in-rhel_configuring-and-managing-virtualization" data-v-fa0dae77>Introducing virtualization in RHEL</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#what-is-virtualization_introducing-virtualization-in-rhel" id="sub-link-to-configuring_and_managing_virtualization-what-is-virtualization_introducing-virtualization-in-rhel" data-v-b883c74f>1.1. What is virtualization?</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#advantages-of-virtualization_introducing-virtualization-in-rhel" id="sub-link-to-configuring_and_managing_virtualization-advantages-of-virtualization_introducing-virtualization-in-rhel" data-v-b883c74f>1.2. Advantages of virtualization</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#rhel-virtual-machine-components-and-their-interaction_introducing-virtualization-in-rhel" id="sub-link-to-configuring_and_managing_virtualization-rhel-virtual-machine-components-and-their-interaction_introducing-virtualization-in-rhel" data-v-b883c74f>1.3. Virtual machine components and their interaction</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_tools-and-interfaces-for-virtualization-management_introducing-virtualization-in-rhel" id="sub-link-to-configuring_and_managing_virtualization-con_tools-and-interfaces-for-virtualization-management_introducing-virtualization-in-rhel" data-v-b883c74f>1.4. Tools and interfaces for virtualization management</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#red-hat-virtualization-solutions_introducing-virtualization-in-rhel" id="sub-link-to-configuring_and_managing_virtualization-red-hat-virtualization-solutions_introducing-virtualization-in-rhel" data-v-b883c74f>1.5. Red Hat virtualization solutions</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_enabling-virtualization-in-rhel-9_configuring-and-managing-virtualization" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_enabling-virtualization-in-rhel-9_configuring-and-managing-virtualization--summary" data-v-fa0dae77>2. Enabling virtualization</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_enabling-virtualization-in-rhel-9_configuring-and-managing-virtualization" id="chapter-landing--configuring_and_managing_virtualization-assembly_enabling-virtualization-in-rhel-9_configuring-and-managing-virtualization" data-v-fa0dae77>Enabling virtualization</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_enabling-virtualization-in-rhel-9_assembly_enabling-virtualization-in-rhel-9" id="sub-link-to-configuring_and_managing_virtualization-proc_enabling-virtualization-in-rhel-9_assembly_enabling-virtualization-in-rhel-9" data-v-b883c74f>2.1. Enabling virtualization on AMD64 and Intel 64</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#enabling-virtualization-on-ibm-z_assembly_enabling-virtualization-in-rhel-9" id="sub-link-to-configuring_and_managing_virtualization-enabling-virtualization-on-ibm-z_assembly_enabling-virtualization-in-rhel-9" data-v-b883c74f>2.2. Enabling virtualization on IBM Z</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#enabling-virtualization-on-arm-64_assembly_enabling-virtualization-in-rhel-9" id="sub-link-to-configuring_and_managing_virtualization-enabling-virtualization-on-arm-64_assembly_enabling-virtualization-in-rhel-9" data-v-b883c74f>2.3. Enabling virtualization on ARM 64</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--enabling-qemu-guest-agent-features-on-your-virtual-machines_assembly_enabling-virtualization-in-rhel-9" data-v-b883c74f><summary class="heading sub-chapter-title" id="enabling-qemu-guest-agent-features-on-your-virtual-machines_assembly_enabling-virtualization-in-rhel-9--summary" data-v-b883c74f>2.4. Enabling QEMU Guest Agent features on your virtual machines</summary><ol id="sub-nav--enabling-qemu-guest-agent-features-on-your-virtual-machines_assembly_enabling-virtualization-in-rhel-9" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#enabling-qemu-guest-agent-features-on-your-virtual-machines_assembly_enabling-virtualization-in-rhel-9" id="chapter-landing--configuring_and_managing_virtualization-enabling-qemu-guest-agent-features-on-your-virtual-machines_assembly_enabling-virtualization-in-rhel-9" data-v-b883c74f>Enabling QEMU Guest Agent features on your virtual machines</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-qemu-guest-agent-on-linux-guests_enabling-qemu-guest-agent-features-on-your-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-installing-qemu-guest-agent-on-linux-guests_enabling-qemu-guest-agent-features-on-your-virtual-machines" data-v-b883c74f>2.4.1. Enabling QEMU Guest Agent on Linux guests</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_installing-qemu-guest-agent-on-windows-guests_enabling-qemu-guest-agent-features-on-your-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-proc_installing-qemu-guest-agent-on-windows-guests_enabling-qemu-guest-agent-features-on-your-virtual-machines" data-v-b883c74f>2.4.2. Enabling QEMU Guest Agent on Windows guests</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#virtualization-features-that-require-qemu-guest-agent_enabling-qemu-guest-agent-features-on-your-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-virtualization-features-that-require-qemu-guest-agent_enabling-qemu-guest-agent-features-on-your-virtual-machines" data-v-b883c74f>2.4.3. Virtualization features that require QEMU Guest Agent</a></li><!--]--><!--]--></ol></details></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_creating-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_creating-virtual-machines_configuring-and-managing-virtualization--summary" data-v-fa0dae77>3. Creating virtual machines</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_creating-virtual-machines_configuring-and-managing-virtualization" id="chapter-landing--configuring_and_managing_virtualization-assembly_creating-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77>Creating virtual machines</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines" data-v-b883c74f>3.1. Creating virtual machines by using the command-line interface</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--creating-vms-and-installing-an-os-using-the-rhel-web-console_assembly_creating-virtual-machines" data-v-b883c74f><summary class="heading sub-chapter-title" id="creating-vms-and-installing-an-os-using-the-rhel-web-console_assembly_creating-virtual-machines--summary" data-v-b883c74f>3.2. Creating virtual machines and installing guest operating systems by using the web console</summary><ol id="sub-nav--creating-vms-and-installing-an-os-using-the-rhel-web-console_assembly_creating-virtual-machines" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#creating-vms-and-installing-an-os-using-the-rhel-web-console_assembly_creating-virtual-machines" id="chapter-landing--configuring_and_managing_virtualization-creating-vms-and-installing-an-os-using-the-rhel-web-console_assembly_creating-virtual-machines" data-v-b883c74f>Creating virtual machines and installing guest operating systems by using the web console</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-vms-using-the-rhel-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console" id="sub-link-to-configuring_and_managing_virtualization-creating-vms-using-the-rhel-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console" data-v-b883c74f>3.2.1. Creating virtual machines by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-virtual-machines-by-importing-disk-images-using-the-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console" id="sub-link-to-configuring_and_managing_virtualization-creating-virtual-machines-by-importing-disk-images-using-the-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console" data-v-b883c74f>3.2.2. Creating virtual machines by importing disk images by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-an-os-using-the-rhel-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console" id="sub-link-to-configuring_and_managing_virtualization-installing-an-os-using-the-rhel-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console" data-v-b883c74f>3.2.3. Installing guest operating systems by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_creating-virtual-machines-with-cloud-image-authentication-using-the-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console" id="sub-link-to-configuring_and_managing_virtualization-proc_creating-virtual-machines-with-cloud-image-authentication-using-the-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console" data-v-b883c74f>3.2.4. Creating virtual machines with cloud image authentication by using the web console</a></li><!--]--><!--]--></ol></details></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_starting-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_starting-virtual-machines_configuring-and-managing-virtualization--summary" data-v-fa0dae77>4. Starting virtual machines</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_starting-virtual-machines_configuring-and-managing-virtualization" id="chapter-landing--configuring_and_managing_virtualization-assembly_starting-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77>Starting virtual machines</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#starting-a-virtual-machine-using-the-command-line-interface_assembly_starting-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-starting-a-virtual-machine-using-the-command-line-interface_assembly_starting-virtual-machines" data-v-b883c74f>4.1. Starting a virtual machine by using the command-line interface</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#powering-up-vms-using-the-rhel-web-console_assembly_starting-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-powering-up-vms-using-the-rhel-web-console_assembly_starting-virtual-machines" data-v-b883c74f>4.2. Starting virtual machines by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#starting-virtual-machines-automatically-when-the-host-starts_assembly_starting-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-starting-virtual-machines-automatically-when-the-host-starts_assembly_starting-virtual-machines" data-v-b883c74f>4.3. Starting virtual machines automatically when the host starts</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_connecting-to-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_connecting-to-virtual-machines_configuring-and-managing-virtualization--summary" data-v-fa0dae77>5. Connecting to virtual machines</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_connecting-to-virtual-machines_configuring-and-managing-virtualization" id="chapter-landing--configuring_and_managing_virtualization-assembly_connecting-to-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77>Connecting to virtual machines</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--viewing-vm-consoles-using-the-rhel-web-console_assembly_connecting-to-virtual-machines" data-v-b883c74f><summary class="heading sub-chapter-title" id="viewing-vm-consoles-using-the-rhel-web-console_assembly_connecting-to-virtual-machines--summary" data-v-b883c74f>5.1. Interacting with virtual machines by using the web console</summary><ol id="sub-nav--viewing-vm-consoles-using-the-rhel-web-console_assembly_connecting-to-virtual-machines" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#viewing-vm-consoles-using-the-rhel-web-console_assembly_connecting-to-virtual-machines" id="chapter-landing--configuring_and_managing_virtualization-viewing-vm-consoles-using-the-rhel-web-console_assembly_connecting-to-virtual-machines" data-v-b883c74f>Interacting with virtual machines by using the web console</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#viewing-guest-graphical-console-in-the-rhel-web-console_viewing-vm-consoles-using-the-rhel-web-console" id="sub-link-to-configuring_and_managing_virtualization-viewing-guest-graphical-console-in-the-rhel-web-console_viewing-vm-consoles-using-the-rhel-web-console" data-v-b883c74f>5.1.1. Viewing the virtual machine graphical console in the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#viewing-graphical-console-in-remote-viewer_viewing-vm-consoles-using-the-rhel-web-console" id="sub-link-to-configuring_and_managing_virtualization-viewing-graphical-console-in-remote-viewer_viewing-vm-consoles-using-the-rhel-web-console" data-v-b883c74f>5.1.2. Viewing the graphical console in a remote viewer by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#viewing-vm-serial-console-in-the-rhel-web-console_viewing-vm-consoles-using-the-rhel-web-console" id="sub-link-to-configuring_and_managing_virtualization-viewing-vm-serial-console-in-the-rhel-web-console_viewing-vm-consoles-using-the-rhel-web-console" data-v-b883c74f>5.1.3. Viewing the virtual machine serial console in the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#replacing-spice-virtual-device-with-vnc_viewing-vm-consoles-using-the-rhel-web-console" id="sub-link-to-configuring_and_managing_virtualization-replacing-spice-virtual-device-with-vnc_viewing-vm-consoles-using-the-rhel-web-console" data-v-b883c74f>5.1.4. Replacing the SPICE remote display protocol with VNC in the web console</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines" data-v-b883c74f>5.2. Opening a virtual machine graphical console by using Virt Viewer</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_connecting-to-a-virtual-machine-using-ssh_assembly_connecting-to-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-proc_connecting-to-a-virtual-machine-using-ssh_assembly_connecting-to-virtual-machines" data-v-b883c74f>5.3. Connecting to a virtual machine by using SSH</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_opening-a-virtual-machine-serial-console_assembly_connecting-to-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-proc_opening-a-virtual-machine-serial-console_assembly_connecting-to-virtual-machines" data-v-b883c74f>5.4. Opening a virtual machine serial console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines" data-v-b883c74f>5.5. Setting up easy access to remote virtualization hosts</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-vnc-passwords_assembly_connecting-to-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-configuring-vnc-passwords_assembly_connecting-to-virtual-machines" data-v-b883c74f>5.6. Configuring VNC passwords</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_shutting-down-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_shutting-down-virtual-machines_configuring-and-managing-virtualization--summary" data-v-fa0dae77>6. Shutting down virtual machines</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_shutting-down-virtual-machines_configuring-and-managing-virtualization" id="chapter-landing--configuring_and_managing_virtualization-assembly_shutting-down-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77>Shutting down virtual machines</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#shutting-down-a-virtual-machine-using-the-command-line-interface_assembly_shutting-down-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-shutting-down-a-virtual-machine-using-the-command-line-interface_assembly_shutting-down-virtual-machines" data-v-b883c74f>6.1. Shutting down a virtual machine by using the command-line interface</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--powering-down-and-restarting-vms-using-the-rhel-web-console_assembly_shutting-down-virtual-machines" data-v-b883c74f><summary class="heading sub-chapter-title" id="powering-down-and-restarting-vms-using-the-rhel-web-console_assembly_shutting-down-virtual-machines--summary" data-v-b883c74f>6.2. Shutting down and restarting virtual machines by using the web console</summary><ol id="sub-nav--powering-down-and-restarting-vms-using-the-rhel-web-console_assembly_shutting-down-virtual-machines" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#powering-down-and-restarting-vms-using-the-rhel-web-console_assembly_shutting-down-virtual-machines" id="chapter-landing--configuring_and_managing_virtualization-powering-down-and-restarting-vms-using-the-rhel-web-console_assembly_shutting-down-virtual-machines" data-v-b883c74f>Shutting down and restarting virtual machines by using the web console</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#powering-down-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console" id="sub-link-to-configuring_and_managing_virtualization-powering-down-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console" data-v-b883c74f>6.2.1. Shutting down virtual machines in the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#restarting-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console" id="sub-link-to-configuring_and_managing_virtualization-restarting-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console" data-v-b883c74f>6.2.2. Restarting virtual machines by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#sending-NMIs-to-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console" id="sub-link-to-configuring_and_managing_virtualization-sending-NMIs-to-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console" data-v-b883c74f>6.2.3. Sending non-maskable interrupts to VMs by using the web console</a></li><!--]--><!--]--></ol></details></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_deleting-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_deleting-virtual-machines_configuring-and-managing-virtualization--summary" data-v-fa0dae77>7. Deleting virtual machines</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_deleting-virtual-machines_configuring-and-managing-virtualization" id="chapter-landing--configuring_and_managing_virtualization-assembly_deleting-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77>Deleting virtual machines</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#deleting-virtual-machines-using-cli_assembly_deleting-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-deleting-virtual-machines-using-cli_assembly_deleting-virtual-machines" data-v-b883c74f>7.1. Deleting virtual machines by using the command-line interface</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#deleting-vms-using-the-rhel-web-console_assembly_deleting-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-deleting-vms-using-the-rhel-web-console_assembly_deleting-virtual-machines" data-v-b883c74f>7.2. Deleting virtual machines by using the web console</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--managing-virtual-machines-in-the-web-console_configuring-and-managing-virtualization" data-v-fa0dae77><summary class="heading chapter-title" id="managing-virtual-machines-in-the-web-console_configuring-and-managing-virtualization--summary" data-v-fa0dae77>8. Managing virtual machines in the web console</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#managing-virtual-machines-in-the-web-console_configuring-and-managing-virtualization" id="chapter-landing--configuring_and_managing_virtualization-managing-virtual-machines-in-the-web-console_configuring-and-managing-virtualization" data-v-fa0dae77>Managing virtual machines in the web console</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#overview-of-virtual-machine-management-using-the-web-console_managing-virtual-machines-in-the-web-console" id="sub-link-to-configuring_and_managing_virtualization-overview-of-virtual-machine-management-using-the-web-console_managing-virtual-machines-in-the-web-console" data-v-b883c74f>8.1. Overview of virtual machine management by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" id="sub-link-to-configuring_and_managing_virtualization-setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" data-v-b883c74f>8.2. Setting up the web console to manage virtual machines</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_renaming-virtual-machines-using-the-web-console_managing-virtual-machines-in-the-web-console" id="sub-link-to-configuring_and_managing_virtualization-proc_renaming-virtual-machines-using-the-web-console_managing-virtual-machines-in-the-web-console" data-v-b883c74f>8.3. Renaming virtual machines by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#virtual-machine-management-features-available-in-the-web-console_managing-virtual-machines-in-the-web-console" id="sub-link-to-configuring_and_managing_virtualization-virtual-machine-management-features-available-in-the-web-console_managing-virtual-machines-in-the-web-console" data-v-b883c74f>8.4. Virtual machine management features available in the web console</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--viewing-information-about-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77><summary class="heading chapter-title" id="viewing-information-about-virtual-machines_configuring-and-managing-virtualization--summary" data-v-fa0dae77>9. Viewing information about virtual machines</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#viewing-information-about-virtual-machines_configuring-and-managing-virtualization" id="chapter-landing--configuring_and_managing_virtualization-viewing-information-about-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77>Viewing information about virtual machines</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#viewing-virtual-machine-information-using-the-command-line-interface_viewing-information-about-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-viewing-virtual-machine-information-using-the-command-line-interface_viewing-information-about-virtual-machines" data-v-b883c74f>9.1. Viewing virtual machine information by using the command-line interface</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines" data-v-b883c74f><summary class="heading sub-chapter-title" id="viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines--summary" data-v-b883c74f>9.2. Viewing virtual machine information by using the web console</summary><ol id="sub-nav--viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines" id="chapter-landing--configuring_and_managing_virtualization-viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines" data-v-b883c74f>Viewing virtual machine information by using the web console</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#viewing-vm-state-and-connection-information-in-the-rhel-web-console_viewing-vm-information-using-the-rhel-web-console" id="sub-link-to-configuring_and_managing_virtualization-viewing-vm-state-and-connection-information-in-the-rhel-web-console_viewing-vm-information-using-the-rhel-web-console" data-v-b883c74f>9.2.1. Viewing a virtualization overview in the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#viewing-storage-pool-information-using-the-web-console_viewing-vm-information-using-the-rhel-web-console" id="sub-link-to-configuring_and_managing_virtualization-viewing-storage-pool-information-using-the-web-console_viewing-vm-information-using-the-rhel-web-console" data-v-b883c74f>9.2.2. Viewing storage pool information by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#viewing-basic-vm-information-in-the-rhel-web-console_viewing-vm-information-using-the-rhel-web-console" id="sub-link-to-configuring_and_managing_virtualization-viewing-basic-vm-information-in-the-rhel-web-console_viewing-vm-information-using-the-rhel-web-console" data-v-b883c74f>9.2.3. Viewing basic virtual machine information in the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#viewing-vm-resource-usage-in-the-rhel-web-console_viewing-vm-information-using-the-rhel-web-console" id="sub-link-to-configuring_and_managing_virtualization-viewing-vm-resource-usage-in-the-rhel-web-console_viewing-vm-information-using-the-rhel-web-console" data-v-b883c74f>9.2.4. Viewing virtual machine resource usage in the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#viewing-vm-disk-information-in-the-web-console_viewing-vm-information-using-the-rhel-web-console" id="sub-link-to-configuring_and_managing_virtualization-viewing-vm-disk-information-in-the-web-console_viewing-vm-information-using-the-rhel-web-console" data-v-b883c74f>9.2.5. Viewing virtual machine disk information in the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#viewing-and-editing-virtual-network-interface-information-in-the-web-console_viewing-vm-information-using-the-rhel-web-console" id="sub-link-to-configuring_and_managing_virtualization-viewing-and-editing-virtual-network-interface-information-in-the-web-console_viewing-vm-information-using-the-rhel-web-console" data-v-b883c74f>9.2.6. Viewing and editing virtual network interface information in the web console</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#sample-virtual-machine-xml-configuration_viewing-information-about-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-sample-virtual-machine-xml-configuration_viewing-information-about-virtual-machines" data-v-b883c74f>9.3. Sample virtual machine XML configuration</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--saving-and-restoring-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77><summary class="heading chapter-title" id="saving-and-restoring-virtual-machines_configuring-and-managing-virtualization--summary" data-v-fa0dae77>10. Saving and restoring virtual machines</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#saving-and-restoring-virtual-machines_configuring-and-managing-virtualization" id="chapter-landing--configuring_and_managing_virtualization-saving-and-restoring-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77>Saving and restoring virtual machines</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#how-saving-and-restoring-vms-works_saving-and-restoring-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-how-saving-and-restoring-vms-works_saving-and-restoring-virtual-machines" data-v-b883c74f>10.1. How saving and restoring virtual machines works</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#saving-a-virtual-machines-using-cli_saving-and-restoring-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-saving-a-virtual-machines-using-cli_saving-and-restoring-virtual-machines" data-v-b883c74f>10.2. Saving a virtual machine by using the command-line interface</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#starting-a-virtual-machine-using-the-command-line-interface_saving-and-restoring-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-starting-a-virtual-machine-using-the-command-line-interface_saving-and-restoring-virtual-machines" data-v-b883c74f>10.3. Starting a virtual machine by using the command-line interface</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#powering-up-vms-using-the-rhel-web-console_saving-and-restoring-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-powering-up-vms-using-the-rhel-web-console_saving-and-restoring-virtual-machines" data-v-b883c74f>10.4. Starting virtual machines by using the web console</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--cloning-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77><summary class="heading chapter-title" id="cloning-virtual-machines_configuring-and-managing-virtualization--summary" data-v-fa0dae77>11. Cloning virtual machines</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#cloning-virtual-machines_configuring-and-managing-virtualization" id="chapter-landing--configuring_and_managing_virtualization-cloning-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77>Cloning virtual machines</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#how-cloning-virtual-machines-works_cloning-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-how-cloning-virtual-machines-works_cloning-virtual-machines" data-v-b883c74f>11.1. How cloning virtual machines works</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--assembly_creating-virtual-machine-templates_cloning-virtual-machines" data-v-b883c74f><summary class="heading sub-chapter-title" id="assembly_creating-virtual-machine-templates_cloning-virtual-machines--summary" data-v-b883c74f>11.2. Creating virtual machine templates</summary><ol id="sub-nav--assembly_creating-virtual-machine-templates_cloning-virtual-machines" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#assembly_creating-virtual-machine-templates_cloning-virtual-machines" id="chapter-landing--configuring_and_managing_virtualization-assembly_creating-virtual-machine-templates_cloning-virtual-machines" data-v-b883c74f>Creating virtual machine templates</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#preparing-a-virtual-machine-template_assembly_creating-virtual-machine-templates" id="sub-link-to-configuring_and_managing_virtualization-preparing-a-virtual-machine-template_assembly_creating-virtual-machine-templates" data-v-b883c74f>11.2.1. Creating a virtual machine template by using virt-sysprep</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_creating-a-virtual-machine-template-manually_assembly_creating-virtual-machine-templates" id="sub-link-to-configuring_and_managing_virtualization-proc_creating-a-virtual-machine-template-manually_assembly_creating-virtual-machine-templates" data-v-b883c74f>11.2.2. Creating a virtual machine template manually</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#cloning-a-virtual-machine-using-the-command-line-interface_cloning-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-cloning-a-virtual-machine-using-the-command-line-interface_cloning-virtual-machines" data-v-b883c74f>11.3. Cloning a virtual machine by using the command-line interface</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#cloning-a-virtual-machine-using-the-web-console_cloning-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-cloning-a-virtual-machine-using-the-web-console_cloning-virtual-machines" data-v-b883c74f>11.4. Cloning a virtual machine by using the web console</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--migrating-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77><summary class="heading chapter-title" id="migrating-virtual-machines_configuring-and-managing-virtualization--summary" data-v-fa0dae77>12. Migrating virtual machines</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#migrating-virtual-machines_configuring-and-managing-virtualization" id="chapter-landing--configuring_and_managing_virtualization-migrating-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77>Migrating virtual machines</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#how-migrating-virtual-machines-works_migrating-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-how-migrating-virtual-machines-works_migrating-virtual-machines" data-v-b883c74f>12.1. How migrating virtual machines works</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#benefits-of-migrating-virtual-machines_migrating-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-benefits-of-migrating-virtual-machines_migrating-virtual-machines" data-v-b883c74f>12.2. Benefits of migrating virtual machines</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#limitations-for-migrating-virtual-machines_migrating-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-limitations-for-migrating-virtual-machines_migrating-virtual-machines" data-v-b883c74f>12.3. Limitations for migrating virtual machines</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#verifying-host-cpu-compatibility-for-virtual-machine-migration_migrating-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-verifying-host-cpu-compatibility-for-virtual-machine-migration_migrating-virtual-machines" data-v-b883c74f>12.4. Verifying host CPU compatibility for virtual machine migration</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#sharing-virtual-machine-disk-images-with-other-hosts_migrating-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-sharing-virtual-machine-disk-images-with-other-hosts_migrating-virtual-machines" data-v-b883c74f>12.5. Sharing virtual machine disk images with other hosts</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#migrating-a-virtual-machine-using-the-cli_migrating-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-migrating-a-virtual-machine-using-the-cli_migrating-virtual-machines" data-v-b883c74f>12.6. Migrating a virtual machine by using the command-line interface</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_live-migrating-a-virtual-machine-using-the-web-console_migrating-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-proc_live-migrating-a-virtual-machine-using-the-web-console_migrating-virtual-machines" data-v-b883c74f>12.7. Live migrating a virtual machine by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#live-migrating-a-virtual-machine-with-an-attached-mellanox-virtual-function_migrating-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-live-migrating-a-virtual-machine-with-an-attached-mellanox-virtual-function_migrating-virtual-machines" data-v-b883c74f>12.8. Live migrating a virtual machine with an attached Mellanox virtual function</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--troubleshooting-virtual-machine-migrations_migrating-virtual-machines" data-v-b883c74f><summary class="heading sub-chapter-title" id="troubleshooting-virtual-machine-migrations_migrating-virtual-machines--summary" data-v-b883c74f>12.9. Troubleshooting virtual machine migrations</summary><ol id="sub-nav--troubleshooting-virtual-machine-migrations_migrating-virtual-machines" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#troubleshooting-virtual-machine-migrations_migrating-virtual-machines" id="chapter-landing--configuring_and_managing_virtualization-troubleshooting-virtual-machine-migrations_migrating-virtual-machines" data-v-b883c74f>Troubleshooting virtual machine migrations</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#live_migration_of_a_vm_takes_a_long_time_without_completing" id="sub-link-to-configuring_and_managing_virtualization-live_migration_of_a_vm_takes_a_long_time_without_completing" data-v-b883c74f>12.9.1. Live migration of a VM takes a long time without completing</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#supported-hosts-for-virtual-machine-migration_migrating-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-supported-hosts-for-virtual-machine-migration_migrating-virtual-machines" data-v-b883c74f>12.10. Supported hosts for virtual machine migration</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--creating-virtual-machine-snapshots_configuring-and-managing-virtualization" data-v-fa0dae77><summary class="heading chapter-title" id="creating-virtual-machine-snapshots_configuring-and-managing-virtualization--summary" data-v-fa0dae77>13. Saving and restoring virtual machine state by using snapshots</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#creating-virtual-machine-snapshots_configuring-and-managing-virtualization" id="chapter-landing--configuring_and_managing_virtualization-creating-virtual-machine-snapshots_configuring-and-managing-virtualization" data-v-fa0dae77>Saving and restoring virtual machine state by using snapshots</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#support-limitations-for-virtual-machine-snapshots_creating-virtual-machine-snapshots" id="sub-link-to-configuring_and_managing_virtualization-support-limitations-for-virtual-machine-snapshots_creating-virtual-machine-snapshots" data-v-b883c74f>13.1. Support limitations for virtual machine snapshots</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-virtual-machine-snapshots-entering-metadata-on-the-command-line_creating-virtual-machine-snapshots" id="sub-link-to-configuring_and_managing_virtualization-creating-virtual-machine-snapshots-entering-metadata-on-the-command-line_creating-virtual-machine-snapshots" data-v-b883c74f>13.2. Creating virtual machine snapshots by using the command-line interface</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-virtual-machine-snapshots-by-using-the-web-console_creating-virtual-machine-snapshots" id="sub-link-to-configuring_and_managing_virtualization-creating-virtual-machine-snapshots-by-using-the-web-console_creating-virtual-machine-snapshots" data-v-b883c74f>13.3. Creating virtual machine snapshots by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#reverting-to-a-virtual-machine-snapshot-by-using-the-command-line-interface_creating-virtual-machine-snapshots" id="sub-link-to-configuring_and_managing_virtualization-reverting-to-a-virtual-machine-snapshot-by-using-the-command-line-interface_creating-virtual-machine-snapshots" data-v-b883c74f>13.4. Reverting to a virtual machine snapshot by using the command-line interface</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#reverting-to-a-virtual-machine-snapshot-by-using-the-web-console_creating-virtual-machine-snapshots" id="sub-link-to-configuring_and_managing_virtualization-reverting-to-a-virtual-machine-snapshot-by-using-the-web-console_creating-virtual-machine-snapshots" data-v-b883c74f>13.5. Reverting to a virtual machine snapshot by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#deleting-virtual-machine-snapshots-by-using-the-command-line-interface_creating-virtual-machine-snapshots" id="sub-link-to-configuring_and_managing_virtualization-deleting-virtual-machine-snapshots-by-using-the-command-line-interface_creating-virtual-machine-snapshots" data-v-b883c74f>13.6. Deleting virtual machine snapshots by using the command-line interface</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#deleting-virtual-machine-snapshots-by-using-the-web-console_creating-virtual-machine-snapshots" id="sub-link-to-configuring_and_managing_virtualization-deleting-virtual-machine-snapshots-by-using-the-web-console_creating-virtual-machine-snapshots" data-v-b883c74f>13.7. Deleting virtual machine snapshots by using the web console</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--managing-virtual-devices_configuring-and-managing-virtualization" data-v-fa0dae77><summary class="heading chapter-title" id="managing-virtual-devices_configuring-and-managing-virtualization--summary" data-v-fa0dae77>14. Managing virtual devices</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#managing-virtual-devices_configuring-and-managing-virtualization" id="chapter-landing--configuring_and_managing_virtualization-managing-virtual-devices_configuring-and-managing-virtualization" data-v-fa0dae77>Managing virtual devices</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#how-virtual-devices-work_managing-virtual-devices" id="sub-link-to-configuring_and_managing_virtualization-how-virtual-devices-work_managing-virtual-devices" data-v-b883c74f>14.1. How virtual devices work</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#types-of-virtual-devices_managing-virtual-devices" id="sub-link-to-configuring_and_managing_virtualization-types-of-virtual-devices_managing-virtual-devices" data-v-b883c74f>14.2. Types of virtual devices</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--assembly_managing-virtual-devices-using-the-cli_managing-virtual-devices" data-v-b883c74f><summary class="heading sub-chapter-title" id="assembly_managing-virtual-devices-using-the-cli_managing-virtual-devices--summary" data-v-b883c74f>14.3. Managing devices attached to virtual machines by using the CLI</summary><ol id="sub-nav--assembly_managing-virtual-devices-using-the-cli_managing-virtual-devices" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#assembly_managing-virtual-devices-using-the-cli_managing-virtual-devices" id="chapter-landing--configuring_and_managing_virtualization-assembly_managing-virtual-devices-using-the-cli_managing-virtual-devices" data-v-b883c74f>Managing devices attached to virtual machines by using the CLI</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#attaching-devices-to-virtual-machines_assembly_managing-virtual-devices-using-the-cli" id="sub-link-to-configuring_and_managing_virtualization-attaching-devices-to-virtual-machines_assembly_managing-virtual-devices-using-the-cli" data-v-b883c74f>14.3.1. Attaching devices to virtual machines</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#modifying-devices-attached-to-virtual-machines_assembly_managing-virtual-devices-using-the-cli" id="sub-link-to-configuring_and_managing_virtualization-modifying-devices-attached-to-virtual-machines_assembly_managing-virtual-devices-using-the-cli" data-v-b883c74f>14.3.2. Modifying devices attached to virtual machines</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#removing-devices-from-virtual-machines_assembly_managing-virtual-devices-using-the-cli" id="sub-link-to-configuring_and_managing_virtualization-removing-devices-from-virtual-machines_assembly_managing-virtual-devices-using-the-cli" data-v-b883c74f>14.3.3. Removing devices from virtual machines</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--assembly_managing-virtual-devices-using-the-web-console_managing-virtual-devices" data-v-b883c74f><summary class="heading sub-chapter-title" id="assembly_managing-virtual-devices-using-the-web-console_managing-virtual-devices--summary" data-v-b883c74f>14.4. Managing host devices by using the web console</summary><ol id="sub-nav--assembly_managing-virtual-devices-using-the-web-console_managing-virtual-devices" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#assembly_managing-virtual-devices-using-the-web-console_managing-virtual-devices" id="chapter-landing--configuring_and_managing_virtualization-assembly_managing-virtual-devices-using-the-web-console_managing-virtual-devices" data-v-b883c74f>Managing host devices by using the web console</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_viewing-devices-attached-to-virtual-machines-using-the-web-console_assembly_managing-virtual-devices-using-the-web-console" id="sub-link-to-configuring_and_managing_virtualization-proc_viewing-devices-attached-to-virtual-machines-using-the-web-console_assembly_managing-virtual-devices-using-the-web-console" data-v-b883c74f>14.4.1. Viewing devices attached to virtual machines by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_attaching-devices-to-virtual-machines-using-the-web-console_assembly_managing-virtual-devices-using-the-web-console" id="sub-link-to-configuring_and_managing_virtualization-proc_attaching-devices-to-virtual-machines-using-the-web-console_assembly_managing-virtual-devices-using-the-web-console" data-v-b883c74f>14.4.2. Attaching devices to virtual machines by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_removing-devices-from-virtual-machines-using-the-web-console_assembly_managing-virtual-devices-using-the-web-console" id="sub-link-to-configuring_and_managing_virtualization-proc_removing-devices-from-virtual-machines-using-the-web-console_assembly_managing-virtual-devices-using-the-web-console" data-v-b883c74f>14.4.3. Removing devices from virtual machines by using the web console</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--managing-virtual-usb-devices_managing-virtual-devices" data-v-b883c74f><summary class="heading sub-chapter-title" id="managing-virtual-usb-devices_managing-virtual-devices--summary" data-v-b883c74f>14.5. Managing virtual USB devices</summary><ol id="sub-nav--managing-virtual-usb-devices_managing-virtual-devices" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#managing-virtual-usb-devices_managing-virtual-devices" id="chapter-landing--configuring_and_managing_virtualization-managing-virtual-usb-devices_managing-virtual-devices" data-v-b883c74f>Managing virtual USB devices</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#attaching-usb-devices-to-virtual-machines_managing-virtual-usb-devices" id="sub-link-to-configuring_and_managing_virtualization-attaching-usb-devices-to-virtual-machines_managing-virtual-usb-devices" data-v-b883c74f>14.5.1. Attaching USB devices to virtual machines</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#removing-usb-devices-from-virtual-machines_managing-virtual-usb-devices" id="sub-link-to-configuring_and_managing_virtualization-removing-usb-devices-from-virtual-machines_managing-virtual-usb-devices" data-v-b883c74f>14.5.2. Removing USB devices from virtual machines</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--managing-virtual-optical-drives_managing-virtual-devices" data-v-b883c74f><summary class="heading sub-chapter-title" id="managing-virtual-optical-drives_managing-virtual-devices--summary" data-v-b883c74f>14.6. Managing virtual optical drives</summary><ol id="sub-nav--managing-virtual-optical-drives_managing-virtual-devices" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#managing-virtual-optical-drives_managing-virtual-devices" id="chapter-landing--configuring_and_managing_virtualization-managing-virtual-optical-drives_managing-virtual-devices" data-v-b883c74f>Managing virtual optical drives</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#attaching-optical-drives-to-virtual-machines_managing-virtual-optical-drives" id="sub-link-to-configuring_and_managing_virtualization-attaching-optical-drives-to-virtual-machines_managing-virtual-optical-drives" data-v-b883c74f>14.6.1. Attaching optical drives to virtual machines</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#adding-a-cd-rom-to-a-virtual-machine_managing-virtual-optical-drives" id="sub-link-to-configuring_and_managing_virtualization-adding-a-cd-rom-to-a-virtual-machine_managing-virtual-optical-drives" data-v-b883c74f>14.6.2. Adding a CD-ROM to a running virtual machine by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#replacing-iso-images-in-virtual-optical-drives_managing-virtual-optical-drives" id="sub-link-to-configuring_and_managing_virtualization-replacing-iso-images-in-virtual-optical-drives_managing-virtual-optical-drives" data-v-b883c74f>14.6.3. Replacing ISO images in virtual optical drives</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#removing-iso-images-from-virtual-optical-drives_managing-virtual-optical-drives" id="sub-link-to-configuring_and_managing_virtualization-removing-iso-images-from-virtual-optical-drives_managing-virtual-optical-drives" data-v-b883c74f>14.6.4. Removing ISO images from virtual optical drives</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#removing-optical-drives-from-virtual-machines_managing-virtual-optical-drives" id="sub-link-to-configuring_and_managing_virtualization-removing-optical-drives-from-virtual-machines_managing-virtual-optical-drives" data-v-b883c74f>14.6.5. Removing optical drives from virtual machines</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#removing-a-cd-rom-from-a-running-virtual-machine_managing-virtual-optical-drives" id="sub-link-to-configuring_and_managing_virtualization-removing-a-cd-rom-from-a-running-virtual-machine_managing-virtual-optical-drives" data-v-b883c74f>14.6.6. Removing a CD-ROM from a running virtual machine by using the web console</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--managing-sr-iov-devices_managing-virtual-devices" data-v-b883c74f><summary class="heading sub-chapter-title" id="managing-sr-iov-devices_managing-virtual-devices--summary" data-v-b883c74f>14.7. Managing SR-IOV devices</summary><ol id="sub-nav--managing-sr-iov-devices_managing-virtual-devices" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#managing-sr-iov-devices_managing-virtual-devices" id="chapter-landing--configuring_and_managing_virtualization-managing-sr-iov-devices_managing-virtual-devices" data-v-b883c74f>Managing SR-IOV devices</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#what-is-sr-iov_managing-sr-iov-devices" id="sub-link-to-configuring_and_managing_virtualization-what-is-sr-iov_managing-sr-iov-devices" data-v-b883c74f>14.7.1. What is SR-IOV?</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#attaching-sr-iov-networking-devices-to-virtual-machines_managing-sr-iov-devices" id="sub-link-to-configuring_and_managing_virtualization-attaching-sr-iov-networking-devices-to-virtual-machines_managing-sr-iov-devices" data-v-b883c74f>14.7.2. Attaching SR-IOV networking devices to virtual machines</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#supported-devices-for-sr-iov-assignment-in-rhel_managing-sr-iov-devices" id="sub-link-to-configuring_and_managing_virtualization-supported-devices-for-sr-iov-assignment-in-rhel_managing-sr-iov-devices" data-v-b883c74f>14.7.3. Supported devices for SR-IOV assignment</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#attaching-dasd-devices-to-virtual-machines-on-ibm-z_managing-virtual-devices" id="sub-link-to-configuring_and_managing_virtualization-attaching-dasd-devices-to-virtual-machines-on-ibm-z_managing-virtual-devices" data-v-b883c74f>14.8. Attaching DASD devices to virtual machines on IBM Z</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#Attaching-a-watchdog-device-to-a-virtual-machine-using-the-web-console_managing-virtual-devices" id="sub-link-to-configuring_and_managing_virtualization-Attaching-a-watchdog-device-to-a-virtual-machine-using-the-web-console_managing-virtual-devices" data-v-b883c74f>14.9. Attaching a watchdog device to a virtual machine by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#attaching-zpci-devices-to-virtual-machines-on-ibm-z_managing-virtual-devices" id="sub-link-to-configuring_and_managing_virtualization-attaching-zpci-devices-to-virtual-machines-on-ibm-z_managing-virtual-devices" data-v-b883c74f>14.10. Attaching PCI devices to virtual machines on IBM Z</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--managing-storage-for-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77><summary class="heading chapter-title" id="managing-storage-for-virtual-machines_configuring-and-managing-virtualization--summary" data-v-fa0dae77>15. Managing storage for virtual machines</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#managing-storage-for-virtual-machines_configuring-and-managing-virtualization" id="chapter-landing--configuring_and_managing_virtualization-managing-storage-for-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77>Managing storage for virtual machines</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--understanding-virtual-machine-storage_managing-storage-for-virtual-machines" data-v-b883c74f><summary class="heading sub-chapter-title" id="understanding-virtual-machine-storage_managing-storage-for-virtual-machines--summary" data-v-b883c74f>15.1. Understanding virtual machine storage</summary><ol id="sub-nav--understanding-virtual-machine-storage_managing-storage-for-virtual-machines" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#understanding-virtual-machine-storage_managing-storage-for-virtual-machines" id="chapter-landing--configuring_and_managing_virtualization-understanding-virtual-machine-storage_managing-storage-for-virtual-machines" data-v-b883c74f>Understanding virtual machine storage</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#understanding-storage-pools_understanding-virtual-machine-storage" id="sub-link-to-configuring_and_managing_virtualization-understanding-storage-pools_understanding-virtual-machine-storage" data-v-b883c74f>15.1.1. Introduction to storage pools</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#storage-volumes_understanding-virtual-machine-storage" id="sub-link-to-configuring_and_managing_virtualization-storage-volumes_understanding-virtual-machine-storage" data-v-b883c74f>15.1.2. Introduction to storage volumes</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_storage-management-using-libvirt_understanding-virtual-machine-storage" id="sub-link-to-configuring_and_managing_virtualization-con_storage-management-using-libvirt_understanding-virtual-machine-storage" data-v-b883c74f>15.1.3. Storage management by using libvirt</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_overview-of-storage-management_understanding-virtual-machine-storage" id="sub-link-to-configuring_and_managing_virtualization-con_overview-of-storage-management_understanding-virtual-machine-storage" data-v-b883c74f>15.1.4. Overview of storage management</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ref_supported-and-unsupported-storage-pool-types_understanding-virtual-machine-storage" id="sub-link-to-configuring_and_managing_virtualization-ref_supported-and-unsupported-storage-pool-types_understanding-virtual-machine-storage" data-v-b883c74f>15.1.5. Supported and unsupported storage pool types</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--assembly_managing-virtual-machine-storage-pools-using-the-cli_managing-storage-for-virtual-machines" data-v-b883c74f><summary class="heading sub-chapter-title" id="assembly_managing-virtual-machine-storage-pools-using-the-cli_managing-storage-for-virtual-machines--summary" data-v-b883c74f>15.2. Managing virtual machine storage pools by using the CLI</summary><ol id="sub-nav--assembly_managing-virtual-machine-storage-pools-using-the-cli_managing-storage-for-virtual-machines" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#assembly_managing-virtual-machine-storage-pools-using-the-cli_managing-storage-for-virtual-machines" id="chapter-landing--configuring_and_managing_virtualization-assembly_managing-virtual-machine-storage-pools-using-the-cli_managing-storage-for-virtual-machines" data-v-b883c74f>Managing virtual machine storage pools by using the CLI</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#viewing-storage-pool-information-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" id="sub-link-to-configuring_and_managing_virtualization-viewing-storage-pool-information-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" data-v-b883c74f>15.2.1. Viewing storage pool information by using the CLI</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-directory-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" id="sub-link-to-configuring_and_managing_virtualization-creating-directory-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" data-v-b883c74f>15.2.2. Creating directory-based storage pools by using the CLI</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-disk-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" id="sub-link-to-configuring_and_managing_virtualization-creating-disk-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" data-v-b883c74f>15.2.3. Creating disk-based storage pools by using the CLI</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-filesystem-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" id="sub-link-to-configuring_and_managing_virtualization-creating-filesystem-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" data-v-b883c74f>15.2.4. Creating filesystem-based storage pools by using the CLI</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-iscsi-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" id="sub-link-to-configuring_and_managing_virtualization-creating-iscsi-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" data-v-b883c74f>15.2.5. Creating iSCSI-based storage pools by using the CLI</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-lvm-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" id="sub-link-to-configuring_and_managing_virtualization-creating-lvm-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" data-v-b883c74f>15.2.6. Creating LVM-based storage pools by using the CLI</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-nfs-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" id="sub-link-to-configuring_and_managing_virtualization-creating-nfs-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" data-v-b883c74f>15.2.7. Creating NFS-based storage pools by using the CLI</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-scsi-based-storage-pools-with-vhba-devices-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" id="sub-link-to-configuring_and_managing_virtualization-creating-scsi-based-storage-pools-with-vhba-devices-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" data-v-b883c74f>15.2.8. Creating SCSI-based storage pools with vHBA devices by using the CLI</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#deleting-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" id="sub-link-to-configuring_and_managing_virtualization-deleting-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" data-v-b883c74f>15.2.9. Deleting storage pools by using the CLI</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--assembly_managing-virtual-machine-storage-pools-using-the-web-console_managing-storage-for-virtual-machines" data-v-b883c74f><summary class="heading sub-chapter-title" id="assembly_managing-virtual-machine-storage-pools-using-the-web-console_managing-storage-for-virtual-machines--summary" data-v-b883c74f>15.3. Managing virtual machine storage pools by using the web console</summary><ol id="sub-nav--assembly_managing-virtual-machine-storage-pools-using-the-web-console_managing-storage-for-virtual-machines" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#assembly_managing-virtual-machine-storage-pools-using-the-web-console_managing-storage-for-virtual-machines" id="chapter-landing--configuring_and_managing_virtualization-assembly_managing-virtual-machine-storage-pools-using-the-web-console_managing-storage-for-virtual-machines" data-v-b883c74f>Managing virtual machine storage pools by using the web console</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#viewing-storage-pool-information-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" id="sub-link-to-configuring_and_managing_virtualization-viewing-storage-pool-information-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" data-v-b883c74f>15.3.1. Viewing storage pool information by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-directory-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" id="sub-link-to-configuring_and_managing_virtualization-creating-directory-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" data-v-b883c74f>15.3.2. Creating directory-based storage pools by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_creating-nfs-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" id="sub-link-to-configuring_and_managing_virtualization-proc_creating-nfs-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" data-v-b883c74f>15.3.3. Creating NFS-based storage pools by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_creating-iscsi-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" id="sub-link-to-configuring_and_managing_virtualization-proc_creating-iscsi-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" data-v-b883c74f>15.3.4. Creating iSCSI-based storage pools by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_creating-disk-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" id="sub-link-to-configuring_and_managing_virtualization-proc_creating-disk-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" data-v-b883c74f>15.3.5. Creating disk-based storage pools by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_creating-lvm-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" id="sub-link-to-configuring_and_managing_virtualization-proc_creating-lvm-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" data-v-b883c74f>15.3.6. Creating LVM-based storage pools by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#removing-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" id="sub-link-to-configuring_and_managing_virtualization-removing-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" data-v-b883c74f>15.3.7. Removing storage pools by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#deactivating-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" id="sub-link-to-configuring_and_managing_virtualization-deactivating-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" data-v-b883c74f>15.3.8. Deactivating storage pools by using the web console</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--assembly_parameters-for-creating-storage-pools_managing-storage-for-virtual-machines" data-v-b883c74f><summary class="heading sub-chapter-title" id="assembly_parameters-for-creating-storage-pools_managing-storage-for-virtual-machines--summary" data-v-b883c74f>15.4. Parameters for creating storage pools</summary><ol id="sub-nav--assembly_parameters-for-creating-storage-pools_managing-storage-for-virtual-machines" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#assembly_parameters-for-creating-storage-pools_managing-storage-for-virtual-machines" id="chapter-landing--configuring_and_managing_virtualization-assembly_parameters-for-creating-storage-pools_managing-storage-for-virtual-machines" data-v-b883c74f>Parameters for creating storage pools</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#directory-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools" id="sub-link-to-configuring_and_managing_virtualization-directory-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools" data-v-b883c74f>15.4.1. Directory-based storage pool parameters</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#disk-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools" id="sub-link-to-configuring_and_managing_virtualization-disk-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools" data-v-b883c74f>15.4.2. Disk-based storage pool parameters</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#filesystem-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools" id="sub-link-to-configuring_and_managing_virtualization-filesystem-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools" data-v-b883c74f>15.4.3. Filesystem-based storage pool parameters</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#iscsi-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools" id="sub-link-to-configuring_and_managing_virtualization-iscsi-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools" data-v-b883c74f>15.4.4. iSCSI-based storage pool parameters</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#lvm-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools" id="sub-link-to-configuring_and_managing_virtualization-lvm-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools" data-v-b883c74f>15.4.5. LVM-based storage pool parameters</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#nfs-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools" id="sub-link-to-configuring_and_managing_virtualization-nfs-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools" data-v-b883c74f>15.4.6. NFS-based storage pool parameters</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#parameters-for-scsi-based-storage-pools-with-vhba-devices_assembly_parameters-for-creating-storage-pools" id="sub-link-to-configuring_and_managing_virtualization-parameters-for-scsi-based-storage-pools-with-vhba-devices_assembly_parameters-for-creating-storage-pools" data-v-b883c74f>15.4.7. Parameters for SCSI-based storage pools with vHBA devices</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--assembly_managing-virtual-machine-storage-volumes-using-the-cli_managing-storage-for-virtual-machines" data-v-b883c74f><summary class="heading sub-chapter-title" id="assembly_managing-virtual-machine-storage-volumes-using-the-cli_managing-storage-for-virtual-machines--summary" data-v-b883c74f>15.5. Managing virtual machine storage volumes by using the CLI</summary><ol id="sub-nav--assembly_managing-virtual-machine-storage-volumes-using-the-cli_managing-storage-for-virtual-machines" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#assembly_managing-virtual-machine-storage-volumes-using-the-cli_managing-storage-for-virtual-machines" id="chapter-landing--configuring_and_managing_virtualization-assembly_managing-virtual-machine-storage-volumes-using-the-cli_managing-storage-for-virtual-machines" data-v-b883c74f>Managing virtual machine storage volumes by using the CLI</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#viewing-storage-volume-information-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli" id="sub-link-to-configuring_and_managing_virtualization-viewing-storage-volume-information-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli" data-v-b883c74f>15.5.1. Viewing storage volume information by using the CLI</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-and-assigning-storage-volumes-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli" id="sub-link-to-configuring_and_managing_virtualization-creating-and-assigning-storage-volumes-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli" data-v-b883c74f>15.5.2. Creating and assigning storage volumes by using the CLI</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#deleting-storage-volumes-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli" id="sub-link-to-configuring_and_managing_virtualization-deleting-storage-volumes-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli" data-v-b883c74f>15.5.3. Deleting storage volumes by using the CLI</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--managing-virtual-disk-images-by-using-the-cli_managing-storage-for-virtual-machines" data-v-b883c74f><summary class="heading sub-chapter-title" id="managing-virtual-disk-images-by-using-the-cli_managing-storage-for-virtual-machines--summary" data-v-b883c74f>15.6. Managing virtual disk images by using the CLI</summary><ol id="sub-nav--managing-virtual-disk-images-by-using-the-cli_managing-storage-for-virtual-machines" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#managing-virtual-disk-images-by-using-the-cli_managing-storage-for-virtual-machines" id="chapter-landing--configuring_and_managing_virtualization-managing-virtual-disk-images-by-using-the-cli_managing-storage-for-virtual-machines" data-v-b883c74f>Managing virtual disk images by using the CLI</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli" id="sub-link-to-configuring_and_managing_virtualization-creating-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli" data-v-b883c74f>15.6.1. Creating a virtual disk image by using qemu-img</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#checking-the-consistency-of-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli" id="sub-link-to-configuring_and_managing_virtualization-checking-the-consistency-of-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli" data-v-b883c74f>15.6.2. Checking the consistency of a virtual disk image</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#resizing-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli" id="sub-link-to-configuring_and_managing_virtualization-resizing-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli" data-v-b883c74f>15.6.3. Resizing a virtual disk image</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#converting-between-virtual-disk-image-formats_managing-virtual-disk-images-by-using-the-cli" id="sub-link-to-configuring_and_managing_virtualization-converting-between-virtual-disk-image-formats_managing-virtual-disk-images-by-using-the-cli" data-v-b883c74f>15.6.4. Converting between virtual disk image formats</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#supported-disk-image-formats_managing-virtual-disk-images-by-using-the-cli" id="sub-link-to-configuring_and_managing_virtualization-supported-disk-image-formats_managing-virtual-disk-images-by-using-the-cli" data-v-b883c74f>15.6.5. Supported disk image formats</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--assembly_managing-virtual-machine-storage-volumes-using-the-web-console_managing-storage-for-virtual-machines" data-v-b883c74f><summary class="heading sub-chapter-title" id="assembly_managing-virtual-machine-storage-volumes-using-the-web-console_managing-storage-for-virtual-machines--summary" data-v-b883c74f>15.7. Managing virtual machine storage volumes by using the web console</summary><ol id="sub-nav--assembly_managing-virtual-machine-storage-volumes-using-the-web-console_managing-storage-for-virtual-machines" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#assembly_managing-virtual-machine-storage-volumes-using-the-web-console_managing-storage-for-virtual-machines" id="chapter-landing--configuring_and_managing_virtualization-assembly_managing-virtual-machine-storage-volumes-using-the-web-console_managing-storage-for-virtual-machines" data-v-b883c74f>Managing virtual machine storage volumes by using the web console</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-storage-volumes-using-the-web-console_assembly_managing-virtual-machine-storage-volumes-using-the-web-console" id="sub-link-to-configuring_and_managing_virtualization-creating-storage-volumes-using-the-web-console_assembly_managing-virtual-machine-storage-volumes-using-the-web-console" data-v-b883c74f>15.7.1. Creating storage volumes by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#removing-storage-volumes-using-the-web-console_assembly_managing-virtual-machine-storage-volumes-using-the-web-console" id="sub-link-to-configuring_and_managing_virtualization-removing-storage-volumes-using-the-web-console_assembly_managing-virtual-machine-storage-volumes-using-the-web-console" data-v-b883c74f>15.7.2. Removing storage volumes by using the web console</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--assembly_managing-virtual-machine-storage-disks-using-the-web-console_managing-storage-for-virtual-machines" data-v-b883c74f><summary class="heading sub-chapter-title" id="assembly_managing-virtual-machine-storage-disks-using-the-web-console_managing-storage-for-virtual-machines--summary" data-v-b883c74f>15.8. Managing virtual machine storage disks by using the web console</summary><ol id="sub-nav--assembly_managing-virtual-machine-storage-disks-using-the-web-console_managing-storage-for-virtual-machines" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#assembly_managing-virtual-machine-storage-disks-using-the-web-console_managing-storage-for-virtual-machines" id="chapter-landing--configuring_and_managing_virtualization-assembly_managing-virtual-machine-storage-disks-using-the-web-console_managing-storage-for-virtual-machines" data-v-b883c74f>Managing virtual machine storage disks by using the web console</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#viewing-vm-disk-information-in-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console" id="sub-link-to-configuring_and_managing_virtualization-viewing-vm-disk-information-in-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console" data-v-b883c74f>15.8.1. Viewing virtual machine disk information in the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-and-attaching-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console" id="sub-link-to-configuring_and_managing_virtualization-creating-and-attaching-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console" data-v-b883c74f>15.8.2. Adding new disks to virtual machines by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#attaching-existing-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console" id="sub-link-to-configuring_and_managing_virtualization-attaching-existing-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console" data-v-b883c74f>15.8.3. Attaching existing disks to virtual machines by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#detaching-disks-from-virtual-machines_assembly_managing-virtual-machine-storage-disks-using-the-web-console" id="sub-link-to-configuring_and_managing_virtualization-detaching-disks-from-virtual-machines_assembly_managing-virtual-machine-storage-disks-using-the-web-console" data-v-b883c74f>15.8.4. Detaching disks from virtual machines by using the web console</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#securing-iscsi-storage-pools-with-libvirt-secrets_managing-storage-for-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-securing-iscsi-storage-pools-with-libvirt-secrets_managing-storage-for-virtual-machines" data-v-b883c74f>15.9. Securing iSCSI storage pools with libvirt secrets</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-vhbas_managing-storage-for-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-creating-vhbas_managing-storage-for-virtual-machines" data-v-b883c74f>15.10. Creating vHBAs</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_managing-gpu-devices-in-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_managing-gpu-devices-in-virtual-machines_configuring-and-managing-virtualization--summary" data-v-fa0dae77>16. Managing GPU devices in virtual machines</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_managing-gpu-devices-in-virtual-machines_configuring-and-managing-virtualization" id="chapter-landing--configuring_and_managing_virtualization-assembly_managing-gpu-devices-in-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77>Managing GPU devices in virtual machines</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_assigning-a-gpu-to-a-virtual-machine_assembly_managing-gpu-devices-in-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-proc_assigning-a-gpu-to-a-virtual-machine_assembly_managing-gpu-devices-in-virtual-machines" data-v-b883c74f>16.1. Assigning a GPU to a virtual machine</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--assembly_managing-nvidia-vgpu-devices_assembly_managing-gpu-devices-in-virtual-machines" data-v-b883c74f><summary class="heading sub-chapter-title" id="assembly_managing-nvidia-vgpu-devices_assembly_managing-gpu-devices-in-virtual-machines--summary" data-v-b883c74f>16.2. Managing NVIDIA vGPU devices</summary><ol id="sub-nav--assembly_managing-nvidia-vgpu-devices_assembly_managing-gpu-devices-in-virtual-machines" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#assembly_managing-nvidia-vgpu-devices_assembly_managing-gpu-devices-in-virtual-machines" id="chapter-landing--configuring_and_managing_virtualization-assembly_managing-nvidia-vgpu-devices_assembly_managing-gpu-devices-in-virtual-machines" data-v-b883c74f>Managing NVIDIA vGPU devices</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_setting-up-nvidia-vgpu-devices_assembly_managing-nvidia-vgpu-devices" id="sub-link-to-configuring_and_managing_virtualization-proc_setting-up-nvidia-vgpu-devices_assembly_managing-nvidia-vgpu-devices" data-v-b883c74f>16.2.1. Setting up NVIDIA vGPU devices</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_removing-nvidia-vgpu-devices_assembly_managing-nvidia-vgpu-devices" id="sub-link-to-configuring_and_managing_virtualization-proc_removing-nvidia-vgpu-devices_assembly_managing-nvidia-vgpu-devices" data-v-b883c74f>16.2.2. Removing NVIDIA vGPU devices</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_obtaining-nvidia-vgpu-information-about-your-system_assembly_managing-nvidia-vgpu-devices" id="sub-link-to-configuring_and_managing_virtualization-proc_obtaining-nvidia-vgpu-information-about-your-system_assembly_managing-nvidia-vgpu-devices" data-v-b883c74f>16.2.3. Obtaining NVIDIA vGPU information about your system</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ref_remote-desktop-streaming-services-for-nvidia-vgpu_assembly_managing-nvidia-vgpu-devices" id="sub-link-to-configuring_and_managing_virtualization-ref_remote-desktop-streaming-services-for-nvidia-vgpu_assembly_managing-nvidia-vgpu-devices" data-v-b883c74f>16.2.4. Remote desktop streaming services for NVIDIA vGPU</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#related-information-assembly_managing-nvidia-vgpu-devices" id="sub-link-to-configuring_and_managing_virtualization-related-information-assembly_managing-nvidia-vgpu-devices" data-v-b883c74f>16.2.5. Additional resources</a></li><!--]--><!--]--></ol></details></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-virtual-machine-network-connections_configuring-and-managing-virtualization" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-virtual-machine-network-connections_configuring-and-managing-virtualization--summary" data-v-fa0dae77>17. Configuring virtual machine network connections</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-virtual-machine-network-connections_configuring-and-managing-virtualization" id="chapter-landing--configuring_and_managing_virtualization-configuring-virtual-machine-network-connections_configuring-and-managing-virtualization" data-v-fa0dae77>Configuring virtual machine network connections</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--understanding-virtual-networking-overview_configuring-virtual-machine-network-connections" data-v-b883c74f><summary class="heading sub-chapter-title" id="understanding-virtual-networking-overview_configuring-virtual-machine-network-connections--summary" data-v-b883c74f>17.1. Understanding virtual networking</summary><ol id="sub-nav--understanding-virtual-networking-overview_configuring-virtual-machine-network-connections" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#understanding-virtual-networking-overview_configuring-virtual-machine-network-connections" id="chapter-landing--configuring_and_managing_virtualization-understanding-virtual-networking-overview_configuring-virtual-machine-network-connections" data-v-b883c74f>Understanding virtual networking</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#how-virtual-networks-work_understanding-virtual-networking-overview" id="sub-link-to-configuring_and_managing_virtualization-how-virtual-networks-work_understanding-virtual-networking-overview" data-v-b883c74f>17.1.1. How virtual networks work</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#virtual-networking-default-configuration_understanding-virtual-networking-overview" id="sub-link-to-configuring_and_managing_virtualization-virtual-networking-default-configuration_understanding-virtual-networking-overview" data-v-b883c74f>17.1.2. Virtual networking default configuration</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--managing-virtual-machine-network-interfaces-using-the-web-console_configuring-virtual-machine-network-connections" data-v-b883c74f><summary class="heading sub-chapter-title" id="managing-virtual-machine-network-interfaces-using-the-web-console_configuring-virtual-machine-network-connections--summary" data-v-b883c74f>17.2. Using the web console for managing virtual machine network interfaces</summary><ol id="sub-nav--managing-virtual-machine-network-interfaces-using-the-web-console_configuring-virtual-machine-network-connections" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#managing-virtual-machine-network-interfaces-using-the-web-console_configuring-virtual-machine-network-connections" id="chapter-landing--configuring_and_managing_virtualization-managing-virtual-machine-network-interfaces-using-the-web-console_configuring-virtual-machine-network-connections" data-v-b883c74f>Using the web console for managing virtual machine network interfaces</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#viewing-and-editing-virtual-network-interface-information-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console" id="sub-link-to-configuring_and_managing_virtualization-viewing-and-editing-virtual-network-interface-information-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console" data-v-b883c74f>17.2.1. Viewing and editing virtual network interface information in the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#adding-and-connecting-virtual-network-interfaces-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console" id="sub-link-to-configuring_and_managing_virtualization-adding-and-connecting-virtual-network-interfaces-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console" data-v-b883c74f>17.2.2. Adding and connecting virtual network interfaces in the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#disconnecting-and-removing-virtual-network-interfaces-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console" id="sub-link-to-configuring_and_managing_virtualization-disconnecting-and-removing-virtual-network-interfaces-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console" data-v-b883c74f>17.2.3. Disconnecting and removing virtual network interfaces in the web console</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--recommended-virtual-machine-networking-configurations-using-the-command-line-interface_configuring-virtual-machine-network-connections" data-v-b883c74f><summary class="heading sub-chapter-title" id="recommended-virtual-machine-networking-configurations-using-the-command-line-interface_configuring-virtual-machine-network-connections--summary" data-v-b883c74f>17.3. Recommended virtual machine networking configurations</summary><ol id="sub-nav--recommended-virtual-machine-networking-configurations-using-the-command-line-interface_configuring-virtual-machine-network-connections" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#recommended-virtual-machine-networking-configurations-using-the-command-line-interface_configuring-virtual-machine-network-connections" id="chapter-landing--configuring_and_managing_virtualization-recommended-virtual-machine-networking-configurations-using-the-command-line-interface_configuring-virtual-machine-network-connections" data-v-b883c74f>Recommended virtual machine networking configurations</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-externally-visible-virtual-machines-using-the-command-line-interface_recommended-virtual-machine-networking-configurations-using-the-command-line-interface" id="sub-link-to-configuring_and_managing_virtualization-configuring-externally-visible-virtual-machines-using-the-command-line-interface_recommended-virtual-machine-networking-configurations-using-the-command-line-interface" data-v-b883c74f>17.3.1. Configuring externally visible virtual machines by using the command-line interface</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-externally-visible-virtual-machines-using-the-web-console_recommended-virtual-machine-networking-configurations-using-the-command-line-interface" id="sub-link-to-configuring_and_managing_virtualization-configuring-externally-visible-virtual-machines-using-the-web-console_recommended-virtual-machine-networking-configurations-using-the-command-line-interface" data-v-b883c74f>17.3.2. Configuring externally visible virtual machines by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#replacing-macvtap-connections_recommended-virtual-machine-networking-configurations-using-the-command-line-interface" id="sub-link-to-configuring_and_managing_virtualization-replacing-macvtap-connections_recommended-virtual-machine-networking-configurations-using-the-command-line-interface" data-v-b883c74f>17.3.3. Replacing macvtap connections</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--types-of-virtual-machine-network-connections_configuring-virtual-machine-network-connections" data-v-b883c74f><summary class="heading sub-chapter-title" id="types-of-virtual-machine-network-connections_configuring-virtual-machine-network-connections--summary" data-v-b883c74f>17.4. Types of virtual machine network connections</summary><ol id="sub-nav--types-of-virtual-machine-network-connections_configuring-virtual-machine-network-connections" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#types-of-virtual-machine-network-connections_configuring-virtual-machine-network-connections" id="chapter-landing--configuring_and_managing_virtualization-types-of-virtual-machine-network-connections_configuring-virtual-machine-network-connections" data-v-b883c74f>Types of virtual machine network connections</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#virtual-networking-network-address-translation_types-of-virtual-machine-network-connections" id="sub-link-to-configuring_and_managing_virtualization-virtual-networking-network-address-translation_types-of-virtual-machine-network-connections" data-v-b883c74f>17.4.1. Virtual networking with network address translation</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#virtual-networking-routed-mode_types-of-virtual-machine-network-connections" id="sub-link-to-configuring_and_managing_virtualization-virtual-networking-routed-mode_types-of-virtual-machine-network-connections" data-v-b883c74f>17.4.2. Virtual networking in routed mode</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#virtual-networking-bridged-mode_types-of-virtual-machine-network-connections" id="sub-link-to-configuring_and_managing_virtualization-virtual-networking-bridged-mode_types-of-virtual-machine-network-connections" data-v-b883c74f>17.4.3. Virtual networking in bridged mode</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#virtual-networking-isolated-mode_types-of-virtual-machine-network-connections" id="sub-link-to-configuring_and_managing_virtualization-virtual-networking-isolated-mode_types-of-virtual-machine-network-connections" data-v-b883c74f>17.4.4. Virtual networking in isolated mode</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#virtual-networking-open-mode_types-of-virtual-machine-network-connections" id="sub-link-to-configuring_and_managing_virtualization-virtual-networking-open-mode_types-of-virtual-machine-network-connections" data-v-b883c74f>17.4.5. Virtual networking in open mode</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#comparison-of-virtual-machine-connection-types_types-of-virtual-machine-network-connections" id="sub-link-to-configuring_and_managing_virtualization-comparison-of-virtual-machine-connection-types_types-of-virtual-machine-network-connections" data-v-b883c74f>17.4.6. Comparison of virtual machine connection types</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--assembly_booting-virtual-machines-from-a-pxe-server_configuring-virtual-machine-network-connections" data-v-b883c74f><summary class="heading sub-chapter-title" id="assembly_booting-virtual-machines-from-a-pxe-server_configuring-virtual-machine-network-connections--summary" data-v-b883c74f>17.5. Booting virtual machines from a PXE server</summary><ol id="sub-nav--assembly_booting-virtual-machines-from-a-pxe-server_configuring-virtual-machine-network-connections" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#assembly_booting-virtual-machines-from-a-pxe-server_configuring-virtual-machine-network-connections" id="chapter-landing--configuring_and_managing_virtualization-assembly_booting-virtual-machines-from-a-pxe-server_configuring-virtual-machine-network-connections" data-v-b883c74f>Booting virtual machines from a PXE server</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_setting-up-a-pxe-boot-server-on-a-virtual-network_assembly_booting-virtual-machines-from-a-pxe-server" id="sub-link-to-configuring_and_managing_virtualization-proc_setting-up-a-pxe-boot-server-on-a-virtual-network_assembly_booting-virtual-machines-from-a-pxe-server" data-v-b883c74f>17.5.1. Setting up a PXE boot server on a virtual network</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_booting-virtual-machines-using-pxe-and-a-virtual-network_assembly_booting-virtual-machines-from-a-pxe-server" id="sub-link-to-configuring_and_managing_virtualization-proc_booting-virtual-machines-using-pxe-and-a-virtual-network_assembly_booting-virtual-machines-from-a-pxe-server" data-v-b883c74f>17.5.2. Booting virtual machines by using PXE and a virtual network</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_booting-virtual-machines-using-pxe-and-a-bridged-network_assembly_booting-virtual-machines-from-a-pxe-server" id="sub-link-to-configuring_and_managing_virtualization-proc_booting-virtual-machines-using-pxe-and-a-bridged-network_assembly_booting-virtual-machines-from-a-pxe-server" data-v-b883c74f>17.5.3. Booting virtual machines by using PXE and a bridged network</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--configuring-bridges-on-a-network-bond-to-connect-virtual-machines-with-the-network_configuring-virtual-machine-network-connections" data-v-b883c74f><summary class="heading sub-chapter-title" id="configuring-bridges-on-a-network-bond-to-connect-virtual-machines-with-the-network_configuring-virtual-machine-network-connections--summary" data-v-b883c74f>17.6. Configuring bridges on a network bond to connect virtual machines with the network</summary><ol id="sub-nav--configuring-bridges-on-a-network-bond-to-connect-virtual-machines-with-the-network_configuring-virtual-machine-network-connections" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#configuring-bridges-on-a-network-bond-to-connect-virtual-machines-with-the-network_configuring-virtual-machine-network-connections" id="chapter-landing--configuring_and_managing_virtualization-configuring-bridges-on-a-network-bond-to-connect-virtual-machines-with-the-network_configuring-virtual-machine-network-connections" data-v-b883c74f>Configuring bridges on a network bond to connect virtual machines with the network</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-network-interfaces-on-a-network-bond-by-using-nmcli_configuring-bridges-on-a-network-bond-to-connect-vms-with-the-network" id="sub-link-to-configuring_and_managing_virtualization-configuring-network-interfaces-on-a-network-bond-by-using-nmcli_configuring-bridges-on-a-network-bond-to-connect-vms-with-the-network" data-v-b883c74f>17.6.1. Configuring network interfaces on a network bond by using nmcli</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-a-network-bridge-for-network-bonds-by-using-nmcli_configuring-bridges-on-a-network-bond-to-connect-vms-with-the-network" id="sub-link-to-configuring_and_managing_virtualization-configuring-a-network-bridge-for-network-bonds-by-using-nmcli_configuring-bridges-on-a-network-bond-to-connect-vms-with-the-network" data-v-b883c74f>17.6.2. Configuring a network bridge for network bonds by using nmcli</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-a-virtual-network-in-libvirt-with-an-existing-bond-interface_configuring-bridges-on-a-network-bond-to-connect-vms-with-the-network" id="sub-link-to-configuring_and_managing_virtualization-creating-a-virtual-network-in-libvirt-with-an-existing-bond-interface_configuring-bridges-on-a-network-bond-to-connect-vms-with-the-network" data-v-b883c74f>17.6.3. Creating a virtual network in libvirt with an existing bond interface</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-virtual-machines-to-use-a-bond-interface_configuring-bridges-on-a-network-bond-to-connect-vms-with-the-network" id="sub-link-to-configuring_and_managing_virtualization-proc_configuring-virtual-machines-to-use-a-bond-interface_configuring-bridges-on-a-network-bond-to-connect-vms-with-the-network" data-v-b883c74f>17.6.4. Configuring virtual machines to use a bond interface</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-the-passt-user-space-connection_configuring-virtual-machine-network-connections" id="sub-link-to-configuring_and_managing_virtualization-configuring-the-passt-user-space-connection_configuring-virtual-machine-network-connections" data-v-b883c74f>17.7. Configuring the passt user-space connection</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#additional_resources" id="sub-link-to-configuring_and_managing_virtualization-additional_resources" data-v-b883c74f>17.8. Additional resources</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--optimizing-virtual-machine-performance-in-rhel_configuring-and-managing-virtualization" data-v-fa0dae77><summary class="heading chapter-title" id="optimizing-virtual-machine-performance-in-rhel_configuring-and-managing-virtualization--summary" data-v-fa0dae77>18. Optimizing virtual machine performance</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#optimizing-virtual-machine-performance-in-rhel_configuring-and-managing-virtualization" id="chapter-landing--configuring_and_managing_virtualization-optimizing-virtual-machine-performance-in-rhel_configuring-and-managing-virtualization" data-v-fa0dae77>Optimizing virtual machine performance</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#what-influences-virtual-machine-performance_optimizing-virtual-machine-performance-in-rhel" id="sub-link-to-configuring_and_managing_virtualization-what-influences-virtual-machine-performance_optimizing-virtual-machine-performance-in-rhel" data-v-b883c74f>18.1. What influences virtual machine performance</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#optimizing-virtual-machine-performance-using-tuned_optimizing-virtual-machine-performance-in-rhel" id="sub-link-to-configuring_and_managing_virtualization-optimizing-virtual-machine-performance-using-tuned_optimizing-virtual-machine-performance-in-rhel" data-v-b883c74f>18.2. Optimizing virtual machine performance by using TuneD</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--assembly_optimizing-libvirt-daemons_optimizing-virtual-machine-performance-in-rhel" data-v-b883c74f><summary class="heading sub-chapter-title" id="assembly_optimizing-libvirt-daemons_optimizing-virtual-machine-performance-in-rhel--summary" data-v-b883c74f>18.3. Optimizing libvirt daemons</summary><ol id="sub-nav--assembly_optimizing-libvirt-daemons_optimizing-virtual-machine-performance-in-rhel" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#assembly_optimizing-libvirt-daemons_optimizing-virtual-machine-performance-in-rhel" id="chapter-landing--configuring_and_managing_virtualization-assembly_optimizing-libvirt-daemons_optimizing-virtual-machine-performance-in-rhel" data-v-b883c74f>Optimizing libvirt daemons</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_types-of-libvirt-daemons_assembly_optimizing-libvirt-daemons" id="sub-link-to-configuring_and_managing_virtualization-con_types-of-libvirt-daemons_assembly_optimizing-libvirt-daemons" data-v-b883c74f>18.3.1. Types of libvirt daemons</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_enabling-modular-libvirt-daemons_assembly_optimizing-libvirt-daemons" id="sub-link-to-configuring_and_managing_virtualization-proc_enabling-modular-libvirt-daemons_assembly_optimizing-libvirt-daemons" data-v-b883c74f>18.3.2. Enabling modular libvirt daemons</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--configuring-virtual-machine-ram_optimizing-virtual-machine-performance-in-rhel" data-v-b883c74f><summary class="heading sub-chapter-title" id="configuring-virtual-machine-ram_optimizing-virtual-machine-performance-in-rhel--summary" data-v-b883c74f>18.4. Configuring virtual machine memory</summary><ol id="sub-nav--configuring-virtual-machine-ram_optimizing-virtual-machine-performance-in-rhel" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#configuring-virtual-machine-ram_optimizing-virtual-machine-performance-in-rhel" id="chapter-landing--configuring_and_managing_virtualization-configuring-virtual-machine-ram_optimizing-virtual-machine-performance-in-rhel" data-v-b883c74f>Configuring virtual machine memory</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#adding-and-removing-virtual-machine-ram-using-the-web-console_configuring-virtual-machine-ram" id="sub-link-to-configuring_and_managing_virtualization-adding-and-removing-virtual-machine-ram-using-the-web-console_configuring-virtual-machine-ram" data-v-b883c74f>18.4.1. Adding and removing virtual machine memory by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#adding-and-removing-virtual-machine-ram-using-the-command-line-interface_configuring-virtual-machine-ram" id="sub-link-to-configuring_and_managing_virtualization-adding-and-removing-virtual-machine-ram-using-the-command-line-interface_configuring-virtual-machine-ram" data-v-b883c74f>18.4.2. Adding and removing virtual machine memory by using the command-line interface</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--adding-and-removing-virtual-machine-memory-by-using-virtio-mem_configuring-virtual-machine-ram" data-v-b883c74f><summary class="heading sub-chapter-title" id="adding-and-removing-virtual-machine-memory-by-using-virtio-mem_configuring-virtual-machine-ram--summary" data-v-b883c74f>18.4.3. Adding and removing virtual machine memory by using virtio-mem</summary><ol id="sub-nav--adding-and-removing-virtual-machine-memory-by-using-virtio-mem_configuring-virtual-machine-ram" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#adding-and-removing-virtual-machine-memory-by-using-virtio-mem_configuring-virtual-machine-ram" id="chapter-landing--configuring_and_managing_virtualization-adding-and-removing-virtual-machine-memory-by-using-virtio-mem_configuring-virtual-machine-ram" data-v-b883c74f>Adding and removing virtual machine memory by using virtio-mem</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#overview-of-virtio-mem_adding-and-removing-virtual-machine-memory-by-using-virtio-mem" id="sub-link-to-configuring_and_managing_virtualization-overview-of-virtio-mem_adding-and-removing-virtual-machine-memory-by-using-virtio-mem" data-v-b883c74f>18.4.3.1. Overview of virtio-mem</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-memory-onlining-in-virtual-machines_adding-and-removing-virtual-machine-memory-by-using-virtio-mem" id="sub-link-to-configuring_and_managing_virtualization-configuring-memory-onlining-in-virtual-machines_adding-and-removing-virtual-machine-memory-by-using-virtio-mem" data-v-b883c74f>18.4.3.2. Configuring memory onlining in virtual machines</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#attaching-a-virtio-mem-device-to-virtual-machines_adding-and-removing-virtual-machine-memory-by-using-virtio-mem" id="sub-link-to-configuring_and_managing_virtualization-attaching-a-virtio-mem-device-to-virtual-machines_adding-and-removing-virtual-machine-memory-by-using-virtio-mem" data-v-b883c74f>18.4.3.3. Attaching a virtio-mem device to virtual machines</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#comparison-of-memory-onlining-configurations_adding-and-removing-virtual-machine-memory-by-using-virtio-mem" id="sub-link-to-configuring_and_managing_virtualization-comparison-of-memory-onlining-configurations_adding-and-removing-virtual-machine-memory-by-using-virtio-mem" data-v-b883c74f>18.4.3.4. Comparison of memory onlining configurations</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#additional_resources_2" id="sub-link-to-configuring_and_managing_virtualization-additional_resources_2" data-v-b883c74f>18.4.4. Additional resources</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--optimizing-virtual-machine-i-o-performance_optimizing-virtual-machine-performance-in-rhel" data-v-b883c74f><summary class="heading sub-chapter-title" id="optimizing-virtual-machine-i-o-performance_optimizing-virtual-machine-performance-in-rhel--summary" data-v-b883c74f>18.5. Optimizing virtual machine I/O performance</summary><ol id="sub-nav--optimizing-virtual-machine-i-o-performance_optimizing-virtual-machine-performance-in-rhel" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#optimizing-virtual-machine-i-o-performance_optimizing-virtual-machine-performance-in-rhel" id="chapter-landing--configuring_and_managing_virtualization-optimizing-virtual-machine-i-o-performance_optimizing-virtual-machine-performance-in-rhel" data-v-b883c74f>Optimizing virtual machine I/O performance</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#tuning-block-i-o-in-virtual-machines_optimizing-virtual-machine-i-o-performance" id="sub-link-to-configuring_and_managing_virtualization-tuning-block-i-o-in-virtual-machines_optimizing-virtual-machine-i-o-performance" data-v-b883c74f>18.5.1. Tuning block I/O in virtual machines</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#disk-i-o-throttling-in-virtual-machines_optimizing-virtual-machine-i-o-performance" id="sub-link-to-configuring_and_managing_virtualization-disk-i-o-throttling-in-virtual-machines_optimizing-virtual-machine-i-o-performance" data-v-b883c74f>18.5.2. Disk I/O throttling in virtual machines</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-multi-queue-virtio-scsi_optimizing-virtual-machine-i-o-performance" id="sub-link-to-configuring_and_managing_virtualization-configuring-multi-queue-virtio-scsi_optimizing-virtual-machine-i-o-performance" data-v-b883c74f>18.5.3. Enabling multi-queue virtio-scsi</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel" data-v-b883c74f><summary class="heading sub-chapter-title" id="optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel--summary" data-v-b883c74f>18.6. Optimizing virtual machine CPU performance</summary><ol id="sub-nav--optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel" id="chapter-landing--configuring_and_managing_virtualization-optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel" data-v-b883c74f>Optimizing virtual machine CPU performance</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#adding-and-removing-virtual-cpus-using-the-command-line-interface_optimizing-virtual-machine-cpu-performance" id="sub-link-to-configuring_and_managing_virtualization-adding-and-removing-virtual-cpus-using-the-command-line-interface_optimizing-virtual-machine-cpu-performance" data-v-b883c74f>18.6.1. Adding and removing virtual CPUs by using the command-line interface</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#managing-virtual-cpus-using-the-web-console_optimizing-virtual-machine-cpu-performance" id="sub-link-to-configuring_and_managing_virtualization-managing-virtual-cpus-using-the-web-console_optimizing-virtual-machine-cpu-performance" data-v-b883c74f>18.6.2. Managing virtual CPUs by using the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-numa-in-a-virtual-machine_optimizing-virtual-machine-cpu-performance" id="sub-link-to-configuring_and_managing_virtualization-configuring-numa-in-a-virtual-machine_optimizing-virtual-machine-cpu-performance" data-v-b883c74f>18.6.3. Configuring NUMA in a virtual machine</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#sample-vcpu-performance-tuning-scenario_optimizing-virtual-machine-cpu-performance" id="sub-link-to-configuring_and_managing_virtualization-sample-vcpu-performance-tuning-scenario_optimizing-virtual-machine-cpu-performance" data-v-b883c74f>18.6.4. Sample vCPU performance tuning scenario</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_managing-ksm_optimizing-virtual-machine-cpu-performance" id="sub-link-to-configuring_and_managing_virtualization-proc_managing-ksm_optimizing-virtual-machine-cpu-performance" data-v-b883c74f>18.6.5. Enabling and disabling kernel same-page merging</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#optimizing-virtual-machine-network-performance_optimizing-virtual-machine-performance-in-rhel" id="sub-link-to-configuring_and_managing_virtualization-optimizing-virtual-machine-network-performance_optimizing-virtual-machine-performance-in-rhel" data-v-b883c74f>18.7. Optimizing virtual machine network performance</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#virtual-machine-performance-monitoring-tools_optimizing-virtual-machine-performance-in-rhel" id="sub-link-to-configuring_and_managing_virtualization-virtual-machine-performance-monitoring-tools_optimizing-virtual-machine-performance-in-rhel" data-v-b883c74f>18.8. Virtual machine performance monitoring tools</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#related-information-optimizing-virtual-machine-performance-in-rhel" id="sub-link-to-configuring_and_managing_virtualization-related-information-optimizing-virtual-machine-performance-in-rhel" data-v-b883c74f>18.9. Additional resources</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--securing-virtual-machines-in-rhel_configuring-and-managing-virtualization" data-v-fa0dae77><summary class="heading chapter-title" id="securing-virtual-machines-in-rhel_configuring-and-managing-virtualization--summary" data-v-fa0dae77>19. Securing virtual machines</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#securing-virtual-machines-in-rhel_configuring-and-managing-virtualization" id="chapter-landing--configuring_and_managing_virtualization-securing-virtual-machines-in-rhel_configuring-and-managing-virtualization" data-v-fa0dae77>Securing virtual machines</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#how-security-works-in-virtual-machines_securing-virtual-machines-in-rhel" id="sub-link-to-configuring_and_managing_virtualization-how-security-works-in-virtual-machines_securing-virtual-machines-in-rhel" data-v-b883c74f>19.1. How security works in virtual machines</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#best-practices-for-securing-virtual-machines_securing-virtual-machines-in-rhel" id="sub-link-to-configuring_and_managing_virtualization-best-practices-for-securing-virtual-machines_securing-virtual-machines-in-rhel" data-v-b883c74f>19.2. Best practices for securing virtual machines</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#automatic-features-for-virtual-machine-security_securing-virtual-machines-in-rhel" id="sub-link-to-configuring_and_managing_virtualization-automatic-features-for-virtual-machine-security_securing-virtual-machines-in-rhel" data-v-b883c74f>19.3. Automatic features for virtual machine security</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-a-secureboot-virtual-machine_securing-virtual-machines-in-rhel" id="sub-link-to-configuring_and_managing_virtualization-creating-a-secureboot-virtual-machine_securing-virtual-machines-in-rhel" data-v-b883c74f>19.4. Creating a SecureBoot virtual machine</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_limiting-what-actions-are-available-to-virtual-machine-users_securing-virtual-machines-in-rhel" id="sub-link-to-configuring_and_managing_virtualization-proc_limiting-what-actions-are-available-to-virtual-machine-users_securing-virtual-machines-in-rhel" data-v-b883c74f>19.5. Limiting what actions are available to virtual machine users</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#virtualization-booleans-in-rhel_securing-virtual-machines-in-rhel" id="sub-link-to-configuring_and_managing_virtualization-virtualization-booleans-in-rhel_securing-virtual-machines-in-rhel" data-v-b883c74f>19.6. SELinux booleans for virtualization</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#setting-up-secure-execution-on-ibm-z_securing-virtual-machines-in-rhel" id="sub-link-to-configuring_and_managing_virtualization-setting-up-secure-execution-on-ibm-z_securing-virtual-machines-in-rhel" data-v-b883c74f>19.7. Setting up IBM Secure Execution on IBM Z</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#attaching-cryptographic-coprocessors-to-virtual-machines-on-ibm-z_securing-virtual-machines-in-rhel" id="sub-link-to-configuring_and_managing_virtualization-attaching-cryptographic-coprocessors-to-virtual-machines-on-ibm-z_securing-virtual-machines-in-rhel" data-v-b883c74f>19.8. Attaching cryptographic coprocessors to virtual machines on IBM Z</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#enabling-standard-harware-security-on-windows-virtual-machines_securing-virtual-machines-in-rhel" id="sub-link-to-configuring_and_managing_virtualization-enabling-standard-harware-security-on-windows-virtual-machines_securing-virtual-machines-in-rhel" data-v-b883c74f>19.9. Enabling standard hardware security on Windows virtual machines</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_enabling-enhanced-hardware-security-on-windows-virtual-machines_securing-virtual-machines-in-rhel" id="sub-link-to-configuring_and_managing_virtualization-proc_enabling-enhanced-hardware-security-on-windows-virtual-machines_securing-virtual-machines-in-rhel" data-v-b883c74f>19.10. Enabling enhanced hardware security on Windows virtual machines</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--sharing-files-between-the-host-and-its-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77><summary class="heading chapter-title" id="sharing-files-between-the-host-and-its-virtual-machines_configuring-and-managing-virtualization--summary" data-v-fa0dae77>20. Sharing files between the host and its virtual machines</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#sharing-files-between-the-host-and-its-virtual-machines_configuring-and-managing-virtualization" id="chapter-landing--configuring_and_managing_virtualization-sharing-files-between-the-host-and-its-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77>Sharing files between the host and its virtual machines</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#sharing-files-between-the-host-and-its-virtual-machines-using-NFS_sharing-files-between-the-host-and-its-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-sharing-files-between-the-host-and-its-virtual-machines-using-NFS_sharing-files-between-the-host-and-its-virtual-machines" data-v-b883c74f>20.1. Sharing files between the host and its virtual machines by using NFS</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs_sharing-files-between-the-host-and-its-virtual-machines" data-v-b883c74f><summary class="heading sub-chapter-title" id="sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs_sharing-files-between-the-host-and-its-virtual-machines--summary" data-v-b883c74f>20.2. Sharing files between the host and its virtual machines by using virtiofs</summary><ol id="sub-nav--sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs_sharing-files-between-the-host-and-its-virtual-machines" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs_sharing-files-between-the-host-and-its-virtual-machines" id="chapter-landing--configuring_and_managing_virtualization-sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs_sharing-files-between-the-host-and-its-virtual-machines" data-v-b883c74f>Sharing files between the host and its virtual machines by using virtiofs</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#sharing-files-between-the-host-and-its-virtual-machines-using-virtiofs_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs" id="sub-link-to-configuring_and_managing_virtualization-sharing-files-between-the-host-and-its-virtual-machines-using-virtiofs_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs" data-v-b883c74f>20.2.1. Sharing files between the host and its virtual machines by using virtiofs</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#sharing-files-between-the-host-and-windows-virtual-machines_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs" id="sub-link-to-configuring_and_managing_virtualization-sharing-files-between-the-host-and-windows-virtual-machines_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs" data-v-b883c74f>20.2.2. Sharing files between the host and Windows virtual machines by using virtiofs</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_using-the-web-console-to-share-files-between-the-host-and-its-virtual-machines-using-virtiofs_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs" id="sub-link-to-configuring_and_managing_virtualization-proc_using-the-web-console-to-share-files-between-the-host-and-its-virtual-machines-using-virtiofs_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs" data-v-b883c74f>20.2.3. Sharing files between the host and its virtual machines by using virtiofs in the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_using-the-web-console-to-unshare-files-between-the-host-and-its-virtual-machines-using-virtiofs_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs" id="sub-link-to-configuring_and_managing_virtualization-proc_using-the-web-console-to-unshare-files-between-the-host-and-its-virtual-machines-using-virtiofs_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs" data-v-b883c74f>20.2.4. Using the web console to remove shared files between the host and its virtual machines by using virtiofs</a></li><!--]--><!--]--></ol></details></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--installing-and-managing-windows-virtual-machines-on-rhel_configuring-and-managing-virtualization" data-v-fa0dae77><summary class="heading chapter-title" id="installing-and-managing-windows-virtual-machines-on-rhel_configuring-and-managing-virtualization--summary" data-v-fa0dae77>21. Installing and managing Windows virtual machines</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#installing-and-managing-windows-virtual-machines-on-rhel_configuring-and-managing-virtualization" id="chapter-landing--configuring_and_managing_virtualization-installing-and-managing-windows-virtual-machines-on-rhel_configuring-and-managing-virtualization" data-v-fa0dae77>Installing and managing Windows virtual machines</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-windows-virtual-machines-on-rhel_installing-and-managing-windows-virtual-machines-on-rhel" id="sub-link-to-configuring_and_managing_virtualization-installing-windows-virtual-machines-on-rhel_installing-and-managing-windows-virtual-machines-on-rhel" data-v-b883c74f>21.1. Installing Windows virtual machines</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--optimizing-windows-virtual-machines-on-rhel_installing-and-managing-windows-virtual-machines-on-rhel" data-v-b883c74f><summary class="heading sub-chapter-title" id="optimizing-windows-virtual-machines-on-rhel_installing-and-managing-windows-virtual-machines-on-rhel--summary" data-v-b883c74f>21.2. Optimizing Windows virtual machines</summary><ol id="sub-nav--optimizing-windows-virtual-machines-on-rhel_installing-and-managing-windows-virtual-machines-on-rhel" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#optimizing-windows-virtual-machines-on-rhel_installing-and-managing-windows-virtual-machines-on-rhel" id="chapter-landing--configuring_and_managing_virtualization-optimizing-windows-virtual-machines-on-rhel_installing-and-managing-windows-virtual-machines-on-rhel" data-v-b883c74f>Optimizing Windows virtual machines</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines_optimizing-windows-virtual-machines-on-rhel" data-v-b883c74f><summary class="heading sub-chapter-title" id="installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines_optimizing-windows-virtual-machines-on-rhel--summary" data-v-b883c74f>21.2.1. Installing KVM paravirtualized drivers for Windows virtual machines</summary><ol id="sub-nav--installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines_optimizing-windows-virtual-machines-on-rhel" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines_optimizing-windows-virtual-machines-on-rhel" id="chapter-landing--configuring_and_managing_virtualization-installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines_optimizing-windows-virtual-machines-on-rhel" data-v-b883c74f>Installing KVM paravirtualized drivers for Windows virtual machines</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#how-windows-virtio-drivers-work_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-how-windows-virtio-drivers-work_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" data-v-b883c74f>21.2.1.1. How Windows virtio drivers work</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-kvm-drivers-on-a-host-machine_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-installing-kvm-drivers-on-a-host-machine_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" data-v-b883c74f>21.2.1.2. Preparing virtio driver installation media on a host machine</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" data-v-b883c74f>21.2.1.3. Installing virtio drivers on a Windows guest</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_updating-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-proc_updating-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" data-v-b883c74f>21.2.1.4. Updating virtio drivers on a Windows guest</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_installing-qemu-guest-agent-on-windows-guests_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-proc_installing-qemu-guest-agent-on-windows-guests_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" data-v-b883c74f>21.2.1.5. Enabling QEMU Guest Agent on Windows guests</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--enabling-hyper-v-enlightenments_optimizing-windows-virtual-machines-on-rhel" data-v-b883c74f><summary class="heading sub-chapter-title" id="enabling-hyper-v-enlightenments_optimizing-windows-virtual-machines-on-rhel--summary" data-v-b883c74f>21.2.2. Enabling Hyper-V enlightenments</summary><ol id="sub-nav--enabling-hyper-v-enlightenments_optimizing-windows-virtual-machines-on-rhel" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#enabling-hyper-v-enlightenments_optimizing-windows-virtual-machines-on-rhel" id="chapter-landing--configuring_and_managing_virtualization-enabling-hyper-v-enlightenments_optimizing-windows-virtual-machines-on-rhel" data-v-b883c74f>Enabling Hyper-V enlightenments</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#enabling-hyper-v-enlightenments-on-a-windows-virtual-machine-in-rhel-8_enabling-hyper-v-enlightenments" id="sub-link-to-configuring_and_managing_virtualization-enabling-hyper-v-enlightenments-on-a-windows-virtual-machine-in-rhel-8_enabling-hyper-v-enlightenments" data-v-b883c74f>21.2.2.1. Enabling Hyper-V enlightenments on a Windows virtual machine</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configurable-hyper-v-enlightenments_enabling-hyper-v-enlightenments" id="sub-link-to-configuring_and_managing_virtualization-configurable-hyper-v-enlightenments_enabling-hyper-v-enlightenments" data-v-b883c74f>21.2.2.2. Configurable Hyper-V enlightenments</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-netkvm-driver-parameters_optimizing-windows-virtual-machines-on-rhel" id="sub-link-to-configuring_and_managing_virtualization-configuring-netkvm-driver-parameters_optimizing-windows-virtual-machines-on-rhel" data-v-b883c74f>21.2.3. Configuring NetKVM driver parameters</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#netkvm-driver-parameters_optimizing-windows-virtual-machines-on-rhel" id="sub-link-to-configuring_and_managing_virtualization-netkvm-driver-parameters_optimizing-windows-virtual-machines-on-rhel" data-v-b883c74f>21.2.4. NetKVM driver parameters</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#optimizing-background-processes-on-windows-virtual-machines_optimizing-windows-virtual-machines-on-rhel" id="sub-link-to-configuring_and_managing_virtualization-optimizing-background-processes-on-windows-virtual-machines_optimizing-windows-virtual-machines-on-rhel" data-v-b883c74f>21.2.5. Optimizing background processes on Windows virtual machines</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#enabling-standard-harware-security-on-windows-virtual-machines_installing-and-managing-windows-virtual-machines-on-rhel" id="sub-link-to-configuring_and_managing_virtualization-enabling-standard-harware-security-on-windows-virtual-machines_installing-and-managing-windows-virtual-machines-on-rhel" data-v-b883c74f>21.3. Enabling standard hardware security on Windows virtual machines</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_enabling-enhanced-hardware-security-on-windows-virtual-machines_installing-and-managing-windows-virtual-machines-on-rhel" id="sub-link-to-configuring_and_managing_virtualization-proc_enabling-enhanced-hardware-security-on-windows-virtual-machines_installing-and-managing-windows-virtual-machines-on-rhel" data-v-b883c74f>21.4. Enabling enhanced hardware security on Windows virtual machines</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#next-steps-installing-and-managing-windows-virtual-machines-on-rhel" id="sub-link-to-configuring_and_managing_virtualization-next-steps-installing-and-managing-windows-virtual-machines-on-rhel" data-v-b883c74f>21.5. Next steps</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--creating-nested-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77><summary class="heading chapter-title" id="creating-nested-virtual-machines_configuring-and-managing-virtualization--summary" data-v-fa0dae77>22. Creating nested virtual machines</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#creating-nested-virtual-machines_configuring-and-managing-virtualization" id="chapter-landing--configuring_and_managing_virtualization-creating-nested-virtual-machines_configuring-and-managing-virtualization" data-v-fa0dae77>Creating nested virtual machines</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#what-is-nested-virtualization_creating-nested-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-what-is-nested-virtualization_creating-nested-virtual-machines" data-v-b883c74f>22.1. What is nested virtualization?</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#support-limitations-for-nested-virtualization_creating-nested-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-support-limitations-for-nested-virtualization_creating-nested-virtual-machines" data-v-b883c74f>22.2. Support limitations for nested virtualization</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-a-nested-virtual-machine-on-intel_creating-nested-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-creating-a-nested-virtual-machine-on-intel_creating-nested-virtual-machines" data-v-b883c74f>22.3. Creating a nested virtual machine on Intel</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-a-nested-virtual-machine-on-amd_creating-nested-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-creating-a-nested-virtual-machine-on-amd_creating-nested-virtual-machines" data-v-b883c74f>22.4. Creating a nested virtual machine on AMD</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-a-nested-virtual-machine-on-ibm-z_creating-nested-virtual-machines" id="sub-link-to-configuring_and_managing_virtualization-creating-a-nested-virtual-machine-on-ibm-z_creating-nested-virtual-machines" data-v-b883c74f>22.5. Creating a nested virtual machine on IBM Z</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--diagnosing-virtual-machine-problems_configuring-and-managing-virtualization" data-v-fa0dae77><summary class="heading chapter-title" id="diagnosing-virtual-machine-problems_configuring-and-managing-virtualization--summary" data-v-fa0dae77>23. Diagnosing virtual machine problems</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#diagnosing-virtual-machine-problems_configuring-and-managing-virtualization" id="chapter-landing--configuring_and_managing_virtualization-diagnosing-virtual-machine-problems_configuring-and-managing-virtualization" data-v-fa0dae77>Diagnosing virtual machine problems</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--generating-virtual-machine-debug-logs_diagnosing-virtual-machine-problems" data-v-b883c74f><summary class="heading sub-chapter-title" id="generating-virtual-machine-debug-logs_diagnosing-virtual-machine-problems--summary" data-v-b883c74f>23.1. Generating libvirt debug logs</summary><ol id="sub-nav--generating-virtual-machine-debug-logs_diagnosing-virtual-machine-problems" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#generating-virtual-machine-debug-logs_diagnosing-virtual-machine-problems" id="chapter-landing--configuring_and_managing_virtualization-generating-virtual-machine-debug-logs_diagnosing-virtual-machine-problems" data-v-b883c74f>Generating libvirt debug logs</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#understanding-virtual-machine-debug-logs_generating-virtual-machine-debug-logs" id="sub-link-to-configuring_and_managing_virtualization-understanding-virtual-machine-debug-logs_generating-virtual-machine-debug-logs" data-v-b883c74f>23.1.1. Understanding libvirt debug logs</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#enabling-persistent-settings-for-virtual-machine-debug-logs_generating-virtual-machine-debug-logs" id="sub-link-to-configuring_and_managing_virtualization-enabling-persistent-settings-for-virtual-machine-debug-logs_generating-virtual-machine-debug-logs" data-v-b883c74f>23.1.2. Enabling persistent settings for libvirt debug logs</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#enabling-virtual-machine-debug-logs-during-runtime_generating-virtual-machine-debug-logs" id="sub-link-to-configuring_and_managing_virtualization-enabling-virtual-machine-debug-logs-during-runtime_generating-virtual-machine-debug-logs" data-v-b883c74f>23.1.3. Enabling libvirt debug logs during runtime</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#attaching-virtual-machine-debug-logs_generating-virtual-machine-debug-logs" id="sub-link-to-configuring_and_managing_virtualization-attaching-virtual-machine-debug-logs_generating-virtual-machine-debug-logs" data-v-b883c74f>23.1.4. Attaching libvirt debug logs to support requests</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--dumping-a-virtual-machine-core_diagnosing-virtual-machine-problems" data-v-b883c74f><summary class="heading sub-chapter-title" id="dumping-a-virtual-machine-core_diagnosing-virtual-machine-problems--summary" data-v-b883c74f>23.2. Dumping a virtual machine core</summary><ol id="sub-nav--dumping-a-virtual-machine-core_diagnosing-virtual-machine-problems" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#dumping-a-virtual-machine-core_diagnosing-virtual-machine-problems" id="chapter-landing--configuring_and_managing_virtualization-dumping-a-virtual-machine-core_diagnosing-virtual-machine-problems" data-v-b883c74f>Dumping a virtual machine core</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#how-virtual-machine-core-dumping-works_dumping-a-virtual-machine-core" id="sub-link-to-configuring_and_managing_virtualization-how-virtual-machine-core-dumping-works_dumping-a-virtual-machine-core" data-v-b883c74f>23.2.1. How virtual machine core dumping works</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-a-virtual-machine-core-dump-file_dumping-a-virtual-machine-core" id="sub-link-to-configuring_and_managing_virtualization-creating-a-virtual-machine-core-dump-file_dumping-a-virtual-machine-core" data-v-b883c74f>23.2.2. Creating a virtual machine core dump file</a></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#backtracing-virtual-machine-processes_diagnosing-virtual-machine-problems" id="sub-link-to-configuring_and_managing_virtualization-backtracing-virtual-machine-processes_diagnosing-virtual-machine-problems" data-v-b883c74f>23.3. Backtracing virtual machine processes</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_feature-support-and-limitations-in-rhel-9-virtualization_configuring-and-managing-virtualization" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_feature-support-and-limitations-in-rhel-9-virtualization_configuring-and-managing-virtualization--summary" data-v-fa0dae77>24. Feature support and limitations in RHEL 9 virtualization</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_feature-support-and-limitations-in-rhel-9-virtualization_configuring-and-managing-virtualization" id="chapter-landing--configuring_and_managing_virtualization-assembly_feature-support-and-limitations-in-rhel-9-virtualization_configuring-and-managing-virtualization" data-v-fa0dae77>Feature support and limitations in RHEL 9 virtualization</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#how-rhel-virtualization-support-works_feature-support-and-limitations-in-rhel-9-virtualization" id="sub-link-to-configuring_and_managing_virtualization-how-rhel-virtualization-support-works_feature-support-and-limitations-in-rhel-9-virtualization" data-v-b883c74f>24.1. How RHEL virtualization support works</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization" id="sub-link-to-configuring_and_managing_virtualization-recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization" data-v-b883c74f>24.2. Recommended features in RHEL 9 virtualization</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#unsupported-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization" id="sub-link-to-configuring_and_managing_virtualization-unsupported-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization" data-v-b883c74f>24.3. Unsupported features in RHEL 9 virtualization</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#resource-allocation-limits-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization" id="sub-link-to-configuring_and_managing_virtualization-resource-allocation-limits-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization" data-v-b883c74f>24.4. Resource allocation limits in RHEL 9 virtualization</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#supported-disk-image-formats_feature-support-and-limitations-in-rhel-9-virtualization" id="sub-link-to-configuring_and_managing_virtualization-supported-disk-image-formats_feature-support-and-limitations-in-rhel-9-virtualization" data-v-b883c74f>24.5. Supported disk image formats</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#how-virtualization-on-ibm-z-differs-from-amd64-and-intel64_feature-support-and-limitations-in-rhel-9-virtualization" id="sub-link-to-configuring_and_managing_virtualization-how-virtualization-on-ibm-z-differs-from-amd64-and-intel64_feature-support-and-limitations-in-rhel-9-virtualization" data-v-b883c74f>24.6. How virtualization on IBM Z differs from AMD64 and Intel 64</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#how-virtualization-on-arm-64-differs-from-amd64-and-intel64_feature-support-and-limitations-in-rhel-9-virtualization" id="sub-link-to-configuring_and_managing_virtualization-how-virtualization-on-arm-64-differs-from-amd64-and-intel64_feature-support-and-limitations-in-rhel-9-virtualization" data-v-b883c74f>24.7. How virtualization on ARM 64 differs from AMD64 and Intel 64</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#an-overview-of-virtualization-features-support-in-rhel-9_feature-support-and-limitations-in-rhel-9-virtualization" id="sub-link-to-configuring_and_managing_virtualization-an-overview-of-virtualization-features-support-in-rhel-9_feature-support-and-limitations-in-rhel-9-virtualization" data-v-b883c74f>24.8. An overview of virtualization features support in RHEL 9</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><a class="link" href="#idm140237782377296" id="chapter-landing--configuring_and_managing_virtualization-idm140237782377296" data-v-fa0dae77>Legal Notice</a></li><!--]--></ol></nav><!----></div></div></aside><article class="content span-xs-12 span-sm-6 span-md-12 span-lg-7" aria-live="polite" data-v-8589d091><!----><div lang="en-us" xml:lang="en-us" class="docs-content-container" data-v-8589d091><!----><!----><h1 data-id="content_chapter" class="chapter-title" data-v-8589d091>Configuring and managing virtualization</h1><hr class="line-below-chp" data-v-8589d091><section class="rhdocs" data-v-8589d091><body><div xml:lang="en-US" class="book" id="idm140237788836528"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Enterprise Linux</span> <span class="productnumber">9</span></div><div><h3 class="subtitle">Setting up your host, creating and administering virtual machines, and understanding virtualization features</h3></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat</span> <span class="orgdiv">Customer Content Services</span></div></div><div><a href="#idm140237782377296">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				To use a Red Hat Enterprise Linux (RHEL) system as a virtualization host, follow the instructions in this document.
			</div><div class="para">
				The information provided includes:
			</div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><div class="para">
						What the capabilities and use cases of virtualization are
					</div></li><li class="listitem"><div class="para">
						How to manage your host and your virtual machines by using command-line utilities, as well as by using the web console
					</div></li><li class="listitem"><div class="para">
						What the support limitations of virtualization are on various system architectures, such as Intel 64, AMD64, and IBM Z
					</div></li></ul></div></div></div></div><hr></div><section class="preface" id="proc_providing-feedback-on-red-hat-documentation_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h2 class="title">Providing feedback on Red Hat documentation</h2></div></div></div><p class="_abstract _abstract">
			We appreciate your feedback on our documentation. Let us know how we can improve it.
		</p><div class="orderedlist"><p class="title"><strong>Submitting feedback through Jira (account required)</strong></p><ol class="orderedlist" type="1"><li class="listitem">
					Log in to the <a class="link" href="https://issues.redhat.com/projects/RHELDOCS/issues">Jira</a> website.
				</li><li class="listitem">
					Click <span class="strong strong"><strong>Create</strong></span> in the top navigation bar
				</li><li class="listitem">
					Enter a descriptive title in the <span class="strong strong"><strong>Summary</strong></span> field.
				</li><li class="listitem">
					Enter your suggestion for improvement in the <span class="strong strong"><strong>Description</strong></span> field. Include links to the relevant parts of the documentation.
				</li><li class="listitem">
					Click <span class="strong strong"><strong>Create</strong></span> at the bottom of the dialogue.
				</li></ol></div></section><section class="chapter" id="introducing-virtualization-in-rhel_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h2 class="title">Chapter 1. Introducing virtualization in RHEL</h2></div></div></div><p>
			If you are unfamiliar with the concept of virtualization or its implementation in Linux, the following sections provide a general overview of virtualization in RHEL 9: its basics, advantages, components, and other possible virtualization solutions provided by Red Hat.
		</p><section class="section" id="what-is-virtualization_introducing-virtualization-in-rhel"><div class="titlepage"><div><div><h3 class="title">1.1. What is virtualization?</h3></div></div></div><p>
				RHEL 9 provides the <span class="emphasis"><em>virtualization</em></span> functionality, which enables a machine running RHEL 9 to <span class="emphasis"><em>host</em></span> multiple virtual machines (VMs), also referred to as <span class="emphasis"><em>guests</em></span>. VMs use the host’s physical hardware and computing resources to run a separate, virtualized operating system (<span class="emphasis"><em>guest OS</em></span>) as a user-space process on the host’s operating system.
			</p><p>
				In other words, virtualization makes it possible to have operating systems within operating systems.
			</p><p>
				VMs enable you to safely test software configurations and features, run legacy software, or optimize the workload efficiency of your hardware. For more information about the benefits, see <a class="link" href="#advantages-of-virtualization_introducing-virtualization-in-rhel" title="1.2. Advantages of virtualization">Advantages of virtualization</a>.
			</p><p>
				For more information about what virtualization is, see <a class="link" href="https://www.redhat.com/en/topics/virtualization/what-is-virtualization">the Virtualization topic page</a>.
			</p><div class="itemizedlist"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						To start using virtualization in Red Hat Enterprise Linux 9, see <a class="link" href="#assembly_enabling-virtualization-in-rhel-9_configuring-and-managing-virtualization" title="Chapter 2. Enabling virtualization">Enabling virtualization in Red Hat Enterprise Linux 9</a>.
					</li><li class="listitem">
						In addition to Red Hat Enterprise Linux 9 virtualization, Red Hat offers a number of specialized virtualization solutions, each with a different user focus and features. For more information, see <a class="link" href="#red-hat-virtualization-solutions_introducing-virtualization-in-rhel" title="1.5. Red Hat virtualization solutions">Red Hat virtualization solutions</a>.
					</li></ul></div></section><section class="section" id="advantages-of-virtualization_introducing-virtualization-in-rhel"><div class="titlepage"><div><div><h3 class="title">1.2. Advantages of virtualization</h3></div></div></div><p>
				Using virtual machines (VMs) has the following benefits in comparison to using physical machines:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Flexible and fine-grained allocation of resources</strong></span>
					</p><p class="simpara">
						A VM runs on a host machine, which is usually physical, and physical hardware can also be assigned for the guest OS to use. However, the allocation of physical resources to the VM is done on the software level, and is therefore very flexible. A VM uses a configurable fraction of the host memory, CPUs, or storage space, and that configuration can specify very fine-grained resource requests.
					</p><p class="simpara">
						For example, what the guest OS sees as its disk can be represented as a file on the host file system, and the size of that disk is less constrained than the available sizes for physical disks.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Software-controlled configurations</strong></span>
					</p><p class="simpara">
						The entire configuration of a VM is saved as data on the host, and is under software control. Therefore, a VM can easily be created, removed, cloned, migrated, operated remotely, or connected to remote storage.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Separation from the host</strong></span>
					</p><p class="simpara">
						A guest OS runs on a virtualized kernel, separate from the host OS. This means that any OS can be installed on a VM, and even if the guest OS becomes unstable or is compromised, the host is not affected in any way.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Space and cost efficiency</strong></span>
					</p><p class="simpara">
						A single physical machine can host a large number of VMs. Therefore, it avoids the need for multiple physical machines to do the same tasks, and thus lowers the space, power, and maintenance requirements associated with physical hardware.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Software compatibility</strong></span>
					</p><p class="simpara">
						Because a VM can use a different OS than its host, virtualization makes it possible to run applications that were not originally released for your host OS. For example, using a RHEL 7 guest OS, you can run applications released for RHEL 7 on a RHEL 9 host system.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							Not all operating systems are supported as a guest OS in a RHEL 9 host. For details, see <a class="link" href="#recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization" title="24.2. Recommended features in RHEL 9 virtualization">Recommended features in RHEL 9 virtualization</a>.
						</p></div></rh-alert></li></ul></div></section><section class="section" id="rhel-virtual-machine-components-and-their-interaction_introducing-virtualization-in-rhel"><div class="titlepage"><div><div><h3 class="title">1.3. Virtual machine components and their interaction</h3></div></div></div><p>
				Virtualization in RHEL 9 consists of the following principal software components:
			</p><div class="formalpara"><p class="title"><strong>Hypervisor</strong></p><p>
					The basis of creating virtual machines (VMs) in RHEL 9 is the <span class="emphasis"><em>hypervisor</em></span>, a software layer that controls hardware and enables running multiple operating systems on a host machine.
				</p></div><p>
				The hypervisor includes the <span class="strong strong"><strong>Kernel-based Virtual Machine (KVM)</strong></span> module and virtualization kernel drivers. These components ensure that the Linux kernel on the host machine provides resources for virtualization to user-space software.
			</p><p>
				At the user-space level, the <span class="strong strong"><strong>QEMU</strong></span> emulator simulates a complete virtualized hardware platform that the guest operating system can run in, and manages how resources are allocated on the host and presented to the guest.
			</p><p>
				In addition, the <code class="literal package">libvirt</code> software suite serves as a management and communication layer, making QEMU easier to interact with, enforcing security rules, and providing a number of additional tools for configuring and running VMs.
			</p><div class="formalpara"><p class="title"><strong>XML configuration</strong></p><p>
					A host-based XML configuration file (also known as a <span class="emphasis"><em>domain XML</em></span> file) determines all settings and devices in a specific VM. The configuration includes:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Metadata such as the name of the VM, time zone, and other information about the VM.
					</li><li class="listitem">
						A description of the devices in the VM, including virtual CPUs (vCPUS), storage devices, input/output devices, network interface cards, and other hardware, real and virtual.
					</li><li class="listitem">
						VM settings such as the maximum amount of memory it can use, restart settings, and other settings about the behavior of the VM.
					</li></ul></div><p>
				For more information about the contents of an XML configuration, see <a class="link" href="#sample-virtual-machine-xml-configuration_viewing-information-about-virtual-machines" title="9.3. Sample virtual machine XML configuration">Sample virtual machine XML configuration</a>.
			</p><div class="formalpara"><p class="title"><strong>Component interaction</strong></p><p>
					When a VM is started, the hypervisor uses the XML configuration to create an instance of the VM as a user-space process on the host. The hypervisor also makes the VM process accessible to the host-based interfaces, such as the <code class="literal command">virsh</code>, <code class="literal command">virt-install</code>, and <code class="literal command">guestfish</code> utilities, or the web console GUI.
				</p></div><p>
				When these virtualization tools are used, libvirt translates their input into instructions for QEMU. QEMU communicates the instructions to KVM, which ensures that the kernel appropriately assigns the resources necessary to carry out the instructions. As a result, QEMU can execute the corresponding user-space changes, such as creating or modifying a VM, or performing an action in the VM’s guest operating system.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					While QEMU is an essential component of the architecture, it is not intended to be used directly on RHEL 9 systems, due to security concerns. Therefore, <code class="literal">qemu-*</code> commands are not supported by Red Hat, and it is highly recommended to interact with QEMU by using libvirt.
				</p></div></rh-alert><p>
				For more information about the host-based interfaces, see <a class="link" href="#con_tools-and-interfaces-for-virtualization-management_introducing-virtualization-in-rhel" title="1.4. Tools and interfaces for virtualization management">Tools and interfaces for virtualization management</a>.
			</p><div class="figure" id="idm140237796909392"><p class="title"><strong>Figure 1.1. RHEL 9 virtualization architecture</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/7372587533ceed7db8956de504f54d85/virt-architecture.png" alt="virt architecture"></div></div></div></section><section class="section" id="con_tools-and-interfaces-for-virtualization-management_introducing-virtualization-in-rhel"><div class="titlepage"><div><div><h3 class="title">1.4. Tools and interfaces for virtualization management</h3></div></div></div><p>
				You can manage virtualization in RHEL 9 by using the command-line interface (CLI) or several graphical user interfaces (GUIs).
			</p><div class="formalpara"><p class="title"><strong>Command-line interface</strong></p><p>
					The CLI is the most powerful method of managing virtualization in RHEL 9. Prominent CLI commands for virtual machine (VM) management include:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>virsh</strong></span> - A versatile virtualization command-line utility and shell with a great variety of purposes, depending on the provided arguments. For example:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Starting and shutting down a VM - <code class="literal">virsh start</code> and <code class="literal">virsh shutdown</code>
							</li><li class="listitem">
								Listing available VMs - <code class="literal">virsh list</code>
							</li><li class="listitem">
								Creating a VM from a configuration file - <code class="literal">virsh create</code>
							</li><li class="listitem">
								Entering a virtualization shell - <code class="literal">virsh</code>
							</li></ul></div><p class="simpara">
						For more information, see the <code class="literal">virsh(1)</code> man page on your system.
					</p></li><li class="listitem">
						<code class="literal">virt-install</code> - A CLI utility for creating new VMs. For more information, see the <code class="literal">virt-install(1)</code> man page on your system.
					</li><li class="listitem">
						<code class="literal">virt-xml</code> - A utility for editing the configuration of a VM.
					</li><li class="listitem">
						<code class="literal">guestfish</code> - A utility for examining and modifying VM disk images. For more information, see the <code class="literal">guestfish(1)</code> man page on your system.
					</li></ul></div><div class="formalpara"><p class="title"><strong>Graphical interfaces</strong></p><p>
					You can use the following GUIs to manage virtualization in RHEL 9:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The <span class="strong strong"><strong>RHEL 9 web console</strong></span>, also known as <span class="emphasis"><em>Cockpit</em></span>, provides a remotely accessible and easy to use graphical user interface for managing VMs and virtualization hosts.
					</p><p class="simpara">
						For instructions on basic virtualization management with the web console, see <a class="link" href="#managing-virtual-machines-in-the-web-console_configuring-and-managing-virtualization" title="Chapter 8. Managing virtual machines in the web console">Managing virtual machines in the web console</a>.
					</p></li></ul></div></section><section class="section" id="red-hat-virtualization-solutions_introducing-virtualization-in-rhel"><div class="titlepage"><div><div><h3 class="title">1.5. Red Hat virtualization solutions</h3></div></div></div><p>
				The following Red Hat products are built on top of RHEL 9 virtualization features and expand the KVM virtualization capabilities available in RHEL 9. In addition, many <a class="link" href="#assembly_feature-support-and-limitations-in-rhel-9-virtualization_configuring-and-managing-virtualization" title="Chapter 24. Feature support and limitations in RHEL 9 virtualization">limitations of RHEL 9 virtualization</a> do not apply to these products:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">OpenShift Virtualization</span></dt><dd><p class="simpara">
							Based on the KubeVirt technology, OpenShift Virtualization is a part of the Red Hat OpenShift Container Platform, and makes it possible to run virtual machines in containers.
						</p><p class="simpara">
							For more information about OpenShift Virtualization see the <a class="link" href="https://cloud.redhat.com/learn/topics/virtualization/">Red Hat Hybrid Cloud</a> pages.
						</p></dd><dt><span class="term">Red Hat OpenStack Platform (RHOSP)</span></dt><dd><p class="simpara">
							Red Hat OpenStack Platform offers an integrated foundation to create, deploy, and scale a secure and reliable public or private <a class="link" href="https://www.redhat.com/en/topics/openstack">OpenStack</a> cloud.
						</p><p class="simpara">
							For more information about Red Hat OpenStack Platform, see <a class="link" href="https://www.redhat.com/en/technologies/linux-platforms/openstack-platform">the Red Hat Customer Portal</a> or the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/">Red Hat OpenStack Platform documentation suite</a>.
						</p></dd></dl></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					For details on virtualization features not supported in RHEL but supported in other Red Hat virtualization solutions, see: <a class="link" href="#unsupported-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization" title="24.3. Unsupported features in RHEL 9 virtualization">Unsupported features in RHEL 9 virtualization</a>
				</p></div></rh-alert></section></section><section class="chapter" id="assembly_enabling-virtualization-in-rhel-9_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h2 class="title">Chapter 2. Enabling virtualization</h2></div></div></div><p class="_abstract _abstract">
			To use virtualization in RHEL 9, you must install virtualization packages and ensure your system is configured to host virtual machines (VMs). The specific steps to do this vary based on your CPU architecture.
		</p><section class="section" id="proc_enabling-virtualization-in-rhel-9_assembly_enabling-virtualization-in-rhel-9"><div class="titlepage"><div><div><h3 class="title">2.1. Enabling virtualization on AMD64 and Intel 64</h3></div></div></div><p class="_abstract _abstract">
				To set up a KVM hypervisor and create virtual machines (VMs) on an AMD64 or Intel 64 system running RHEL 9, follow the instructions below.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Red Hat Enterprise Linux 9 is <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/interactively_installing_rhel_from_installation_media/index">installed and registered</a> on your host machine.
					</li><li class="listitem"><p class="simpara">
						Your system meets the following hardware requirements to work as a virtualization host:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The architecture of your host machine <a class="link" href="#recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization" title="24.2. Recommended features in RHEL 9 virtualization">supports KVM virtualization</a>.
							</li><li class="listitem"><p class="simpara">
								The following minimum system resources are available:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
										6 GB free disk space for the host, plus another 6 GB for each intended VM.
									</li><li class="listitem">
										2 GB of RAM for the host, plus another 2 GB for each intended VM.
									</li></ul></div></li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the virtualization hypervisor packages.
					</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install qemu-kvm libvirt virt-install virt-viewer</strong></span></pre></li><li class="listitem"><p class="simpara">
						Start the virtualization services:
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>for drv in qemu network nodedev nwfilter secret storage interface; do systemctl start virt${drv}d{,-ro,-admin}.socket; done</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify that your system is prepared to be a virtualization host:
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>virt-host-validate</strong></span>
[...]
QEMU: Checking for device assignment IOMMU support         : PASS
QEMU: Checking if IOMMU is enabled by kernel               : WARN (IOMMU appears to be disabled in kernel. Add intel_iommu=on to kernel cmdline arguments)
LXC: Checking for Linux &gt;= 2.6.26                          : PASS
[...]
LXC: Checking for cgroup 'blkio' controller mount-point    : PASS
LXC: Checking if device /sys/fs/fuse/connections exists    : FAIL (Load the 'fuse' module to enable /proc/ overrides)</pre></li><li class="listitem"><p class="simpara">
						If all <span class="strong strong"><strong>virt-host-validate</strong></span> checks return a <code class="literal">PASS</code> value, your system is prepared for <a class="link" href="#assembly_creating-virtual-machines_configuring-and-managing-virtualization" title="Chapter 3. Creating virtual machines">creating VMs</a>.
					</p><p class="simpara">
						If any of the checks return a <code class="literal">FAIL</code> value, follow the displayed instructions to fix the problem.
					</p><p class="simpara">
						If any of the checks return a <code class="literal">WARN</code> value, consider following the displayed instructions to improve virtualization capabilities.
					</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						If KVM virtualization is not supported by your host CPU, <span class="strong strong"><strong>virt-host-validate</strong></span> generates the following output:
					</p><pre class="literallayout white-space-pre">QEMU: Checking for hardware virtualization: FAIL (Only emulated CPUs are available, performance will be significantly limited)</pre><p class="simpara">
						However, VMs on such a host system will fail to boot, rather than have performance problems.
					</p><p class="simpara">
						To work around this, you can change the <code class="literal">&lt;domain type&gt;</code> value in the XML configuration of the VM to <code class="literal">qemu</code>. Note, however, that Red Hat does not support VMs that use the <code class="literal">qemu</code> domain type, and setting this is highly discouraged in production environments.
					</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#assembly_creating-virtual-machines_configuring-and-managing-virtualization" title="Chapter 3. Creating virtual machines">Create a virtual machine on your RHEL 9 host</a>
					</li></ul></div></section><section class="section" id="enabling-virtualization-on-ibm-z_assembly_enabling-virtualization-in-rhel-9"><div class="titlepage"><div><div><h3 class="title">2.2. Enabling virtualization on IBM Z</h3></div></div></div><p>
				To set up a KVM hypervisor and create virtual machines (VMs) on an IBM Z system running RHEL 9, follow the instructions below.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The following minimum system resources are available:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								6 GB free disk space for the host, plus another 6 GB for each intended VM.
							</li><li class="listitem">
								2 GB of RAM for the host, plus another 2 GB for each intended VM.
							</li><li class="listitem">
								4 CPUs on the host. VMs can generally run with a single assigned vCPU, but Red Hat recommends assigning 2 or more vCPUs per VM to avoid VMs becoming unresponsive during high load.
							</li></ul></div></li><li class="listitem">
						Your IBM Z host system is using a z13 CPU or later.
					</li><li class="listitem"><p class="simpara">
						RHEL 9 is installed on a logical partition (LPAR). In addition, the LPAR supports the <span class="emphasis"><em>start-interpretive execution</em></span> (SIE) virtualization functions.
					</p><p class="simpara">
						To verify this, search for <code class="literal">sie</code> in your <code class="literal">/proc/cpuinfo</code> file.
					</p><pre class="screen"># <span class="strong strong"><strong>grep sie /proc/cpuinfo</strong></span>
features        : esan3 zarch stfle msa ldisp eimm dfp edat etf3eh highgprs te sie</pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the virtualization packages:
					</p><pre class="screen"># <span class="strong strong"><strong>dnf install qemu-kvm libvirt virt-install</strong></span></pre></li><li class="listitem"><p class="simpara">
						Start the virtualization services:
					</p><pre class="screen"># <span class="strong strong"><strong>for drv in qemu network nodedev nwfilter secret storage interface; do systemctl start virt${drv}d{,-ro,-admin}.socket; done</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify that your system is prepared to be a virtualization host.
					</p><pre class="screen"># <span class="strong strong"><strong>virt-host-validate</strong></span>
[...]
QEMU: Checking if device /dev/kvm is accessible             : PASS
QEMU: Checking if device /dev/vhost-net exists              : PASS
QEMU: Checking if device /dev/net/tun exists                : PASS
QEMU: Checking for cgroup 'memory' controller support       : PASS
QEMU: Checking for cgroup 'memory' controller mount-point   : PASS
[...]</pre></li><li class="listitem"><p class="simpara">
						If all <span class="strong strong"><strong>virt-host-validate</strong></span> checks return a <code class="literal">PASS</code> value, your system is prepared for <a class="link" href="#assembly_creating-virtual-machines_configuring-and-managing-virtualization" title="Chapter 3. Creating virtual machines">creating VMs</a>.
					</p><p class="simpara">
						If any of the checks return a <code class="literal">FAIL</code> value, follow the displayed instructions to fix the problem.
					</p><p class="simpara">
						If any of the checks return a <code class="literal">WARN</code> value, consider following the displayed instructions to improve virtualization capabilities.
					</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						If KVM virtualization is not supported by your host CPU, <span class="strong strong"><strong>virt-host-validate</strong></span> generates the following output:
					</p><pre class="screen">QEMU: Checking for hardware virtualization: FAIL (Only emulated CPUs are available, performance will be significantly limited)</pre><p class="simpara">
						However, VMs on such a host system will fail to boot, rather than have performance problems.
					</p><p class="simpara">
						To work around this, you can change the <code class="literal">&lt;domain type&gt;</code> value in the XML configuration of the VM to <code class="literal">qemu</code>. Note, however, that Red Hat does not support VMs that use the <code class="literal">qemu</code> domain type, and setting this is highly discouraged in production environments.
					</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#how-virtualization-on-ibm-z-differs-from-amd64-and-intel64_feature-support-and-limitations-in-rhel-9-virtualization" title="24.6. How virtualization on IBM Z differs from AMD64 and Intel 64">How virtualization on IBM Z differs from AMD64 and Intel 64</a>
					</li></ul></div></section><section class="section" id="enabling-virtualization-on-arm-64_assembly_enabling-virtualization-in-rhel-9"><div class="titlepage"><div><div><h3 class="title">2.3. Enabling virtualization on ARM 64</h3></div></div></div><p>
				To set up a KVM hypervisor for creating virtual machines (VMs) on an ARM 64 system (also known as <code class="literal">AArch64</code>) that runs RHEL 9, follow the instructions below.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The following minimum system resources are available:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								6 GB free disk space for the host, plus another 6 GB for each intended guest.
							</li><li class="listitem">
								4 GB of RAM for the host, plus another 4 GB for each intended guest.
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the virtualization packages:
					</p><pre class="screen"># <span class="strong strong"><strong>dnf install qemu-kvm libvirt virt-install</strong></span></pre></li><li class="listitem"><p class="simpara">
						Start the virtualization services:
					</p><pre class="screen"># <span class="strong strong"><strong>for drv in qemu network nodedev nwfilter secret storage interface; do systemctl start virt${drv}d{,-ro,-admin}.socket; done</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify that your system is prepared to be a virtualization host:
					</p><pre class="screen"># <span class="strong strong"><strong>virt-host-validate</strong></span>
[...]
QEMU: Checking if device /dev/vhost-net exists              : PASS
QEMU: Checking if device /dev/net/tun exists                : PASS
QEMU: Checking for cgroup 'memory' controller support       : PASS
QEMU: Checking for cgroup 'memory' controller mount-point   : PASS
[...]
QEMU: Checking for cgroup 'blkio' controller support        : PASS
QEMU: Checking for cgroup 'blkio' controller mount-point    : PASS
QEMU: Checking if IOMMU is enabled by kernel                : WARN (Unknown if this platform has IOMMU support)</pre></li><li class="listitem"><p class="simpara">
						If all <span class="strong strong"><strong>virt-host-validate</strong></span> checks return a <code class="literal">PASS</code> value, your system is prepared for <a class="link" href="#assembly_creating-virtual-machines_configuring-and-managing-virtualization" title="Chapter 3. Creating virtual machines">creating virtual machines</a>.
					</p><p class="simpara">
						If any of the checks return a <code class="literal">FAIL</code> value, follow the displayed instructions to fix the problem.
					</p><p class="simpara">
						If any of the checks return a <code class="literal">WARN</code> value, consider following the displayed instructions to improve virtualization capabilities.
					</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#assembly_creating-virtual-machines_configuring-and-managing-virtualization" title="Chapter 3. Creating virtual machines">Creating virtual machines</a>
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#how-virtualization-on-arm-64-differs-from-amd64-and-intel64_feature-support-and-limitations-in-rhel-9-virtualization" title="24.7. How virtualization on ARM 64 differs from AMD64 and Intel 64">How virtualization on ARM 64 differs from AMD64 and Intel 64</a>
					</li></ul></div></section><section class="section" id="enabling-qemu-guest-agent-features-on-your-virtual-machines_assembly_enabling-virtualization-in-rhel-9"><div class="titlepage"><div><div><h3 class="title">2.4. Enabling QEMU Guest Agent features on your virtual machines</h3></div></div></div><p class="_abstract _abstract">
				To use certain features on a virtual machine (VM) hosted on your RHEL 9 system, you must first configure the VM to use the QEMU Guest Agent (GA).
			</p><p>
				For a complete list of these features, see <a class="link" href="#virtualization-features-that-require-qemu-guest-agent_enabling-qemu-guest-agent-features-on-your-virtual-machines" title="2.4.3. Virtualization features that require QEMU Guest Agent">Virtualization features that require QEMU Guest Agent</a>.
			</p><p>
				The specific steps required to configure QEMU GA on a VM differ based on the guest operating system used by the VM:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						For Linux VMs, see <a class="link" href="#installing-qemu-guest-agent-on-linux-guests_enabling-qemu-guest-agent-features-on-your-virtual-machines" title="2.4.1. Enabling QEMU Guest Agent on Linux guests">Enabling QEMU Guest Agent on Linux guests</a>.
					</li><li class="listitem">
						For Windows VMs, see <a class="link" href="#proc_installing-qemu-guest-agent-on-windows-guests_enabling-qemu-guest-agent-features-on-your-virtual-machines" title="2.4.2. Enabling QEMU Guest Agent on Windows guests">Enabling QEMU Guest Agent on Windows guests</a>.
					</li></ul></div><section class="section" id="installing-qemu-guest-agent-on-linux-guests_enabling-qemu-guest-agent-features-on-your-virtual-machines"><div class="titlepage"><div><div><h4 class="title">2.4.1. Enabling QEMU Guest Agent on Linux guests</h4></div></div></div><p class="_abstract _abstract">
					To allow a RHEL host to perform <a class="link" href="#virtualization-features-that-require-qemu-guest-agent_enabling-qemu-guest-agent-features-on-your-virtual-machines" title="2.4.3. Virtualization features that require QEMU Guest Agent">a certain subset of operations</a> on a Linux virtual machine (VM), you must enable the QEMU Guest Agent (GA).
				</p><p>
					You can enable QEMU GA both on running and shut-down VMs.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create an XML configuration file for the QEMU GA, for example named <code class="literal">qemuga.xml</code>:
						</p><pre class="screen"># <span class="strong strong"><strong>touch <span class="emphasis"><em>qemuga.xml</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
							Add the following lines to the file:
						</p><pre class="programlisting language-xml">&lt;channel type='unix'&gt;
   &lt;source mode='bind' path='/var/lib/libvirt/qemu/f16x86_64.agent'/&gt;
   &lt;target type='virtio' name='org.qemu.guest_agent.0'/&gt;
&lt;/channel&gt;</pre></li><li class="listitem"><p class="simpara">
							Use the XML file to add QEMU GA to the configuration of the VM.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									If the VM is running, use the following command:
								</p><pre class="screen"># <span class="strong strong"><strong>virsh attach-device <span class="emphasis"><em>&lt;vm-name&gt;</em></span> <span class="emphasis"><em>qemuga.xml</em></span> --live --config</strong></span></pre></li><li class="listitem"><p class="simpara">
									If the VM is shut-down, use the following command:
								</p><pre class="screen"># <span class="strong strong"><strong>virsh attach-device <span class="emphasis"><em>&lt;vm-name&gt;</em></span> <span class="emphasis"><em>qemuga.xml</em></span> --config</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
							In the Linux guest operating system, install the QEMU GA:
						</p><pre class="screen"># <span class="strong strong"><strong>dnf install qemu-guest-agent</strong></span></pre></li><li class="listitem"><p class="simpara">
							Start the QEMU GA service on the guest:
						</p><pre class="screen"># <span class="strong strong"><strong>systemctl start qemu-guest-agent</strong></span></pre></li></ol></div><div class="formalpara"><p class="title"><strong>Verification</strong></p><p>
						To ensure that QEMU GA is enabled and running on the Linux VM, do any of the following:
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							In the guest operating system, use the <code class="literal">systemctl status qemu-guest-agent | grep Loaded</code> command. If the output includes <code class="literal">enabled</code>, QEMU GA is active on the VM.
						</li><li class="listitem">
							Use the <code class="literal">virsh domfsinfo <span class="emphasis"><em>&lt;vm-name&gt;</em></span></code> command on the host. If it displays any output, QEMU GA is active on the specified VM.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#virtualization-features-that-require-qemu-guest-agent_enabling-qemu-guest-agent-features-on-your-virtual-machines" title="2.4.3. Virtualization features that require QEMU Guest Agent">Virtualization features that require QEMU Guest Agent</a>
						</li></ul></div></section><section class="section" id="proc_installing-qemu-guest-agent-on-windows-guests_enabling-qemu-guest-agent-features-on-your-virtual-machines"><div class="titlepage"><div><div><h4 class="title">2.4.2. Enabling QEMU Guest Agent on Windows guests</h4></div></div></div><p>
					To allow a RHEL host to perform <a class="link" href="#virtualization-features-that-require-qemu-guest-agent_enabling-qemu-guest-agent-features-on-your-virtual-machines" title="2.4.3. Virtualization features that require QEMU Guest Agent">a certain subset of operations</a> on a Windows virtual machine (VM), you must enable the QEMU Guest Agent (GA). To do so, add a storage device that contains the QEMU Guest Agent installer to an existing VM or when creating a new VM, and install the drivers on the Windows guest operating system.
				</p><p>
					To install the Guest Agent (GA) by using the graphical interface, see the procedure below. To install the GA in a command-line interface, use the <a class="link" href="https://docs.microsoft.com/en-us/windows/win32/msi/about-windows-installer">Microsoft Windows Installer (MSI)</a>.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							An installation medium with the Guest Agent is attached to the VM. For instructions on preparing the medium, see <a class="link" href="#installing-kvm-drivers-on-a-host-machine_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" title="21.2.1.2. Preparing virtio driver installation media on a host machine">Preparing virtio driver installation media on a host machine</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the Windows guest operating system, open the <code class="literal">File Explorer</code> application.
						</li><li class="listitem">
							Click <code class="literal">This PC</code>.
						</li><li class="listitem">
							In the <code class="literal">Devices and drives</code> pane, open the <code class="literal">virtio-win</code> medium.
						</li><li class="listitem">
							Open the <code class="literal">guest-agent</code> folder.
						</li><li class="listitem"><p class="simpara">
							Based on the operating system installed on the VM, run one of the following installers:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									If using a 32-bit operating system, run the <code class="literal">qemu-ga-i386.msi</code> installer.
								</li><li class="listitem">
									If using a 64-bit operating system, run the <code class="literal">qemu-ga-x86_64.msi</code> installer.
								</li></ul></div></li><li class="listitem">
							Optional: If you want to use the para-virtualized serial driver (<code class="literal">virtio-serial</code>) as the communication interface between the host and the Windows guest, verify that the <code class="literal">virtio-serial</code> driver is installed on the Windows guest. For more information about installing <code class="literal">virtio</code> drivers, see: <a class="link" href="#installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" title="21.2.1.3. Installing virtio drivers on a Windows guest">Installing virtio drivers on a Windows guest</a>.
						</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							On your Windows VM, navigate to the <span class="strong strong"><strong>Services</strong></span> window.
						</p><p class="simpara">
							<span class="strong strong"><strong>Computer Management &gt; Services</strong></span>
						</p></li><li class="listitem">
							Ensure that the status of the <code class="literal">QEMU Guest Agent</code> service is <code class="literal">Running</code>.
						</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#virtualization-features-that-require-qemu-guest-agent_enabling-qemu-guest-agent-features-on-your-virtual-machines" title="2.4.3. Virtualization features that require QEMU Guest Agent">Virtualization features that require QEMU Guest Agent</a>
						</li></ul></div></section><section class="section" id="virtualization-features-that-require-qemu-guest-agent_enabling-qemu-guest-agent-features-on-your-virtual-machines"><div class="titlepage"><div><div><h4 class="title">2.4.3. Virtualization features that require QEMU Guest Agent</h4></div></div></div><p class="_abstract _abstract">
					If you enable QEMU Guest Agent (GA) on a virtual machine (VM), you can use the following commands on your host to manage the VM:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">virsh shutdown --mode=agent</code></span></dt><dd>
								This shutdown method is more reliable than <code class="literal">virsh shutdown --mode=acpi</code>, because <code class="literal">virsh shutdown</code> used with QEMU GA is guaranteed to shut down a cooperative guest in a clean state.
							</dd></dl></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">virsh domfsfreeze</code> and <code class="literal">virsh domfsthaw</code></span></dt><dd>
								Freezes the guest file system in isolation.
							</dd><dt><span class="term"><code class="literal">virsh domfstrim</code></span></dt><dd><p class="simpara">
								Instructs the guest to trim its file system, which helps to reduce the data that needs to be transferred during migrations.
							</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
									If you want to use this command to manage a Linux VM, you must also set the following SELinux boolean in the guest operating system:
								</p><pre class="screen"># <span class="strong strong"><strong>setsebool virt_qemu_ga_read_nonsecurity_files on</strong></span></pre></div></rh-alert></dd><dt><span class="term"><code class="literal">virsh domtime</code></span></dt><dd>
								Queries or sets the guest’s clock.
							</dd><dt><span class="term"><code class="literal">virsh setvcpus --guest</code></span></dt><dd>
								Instructs the guest to take CPUs offline, which is useful when CPUs cannot be hot-unplugged.
							</dd><dt><span class="term"><code class="literal">virsh domifaddr --source agent</code></span></dt><dd>
								Queries the guest operating system’s IP address by using QEMU GA. For example, this is useful when the guest interface is directly attached to a host interface.
							</dd><dt><span class="term"><code class="literal">virsh domfsinfo</code></span></dt><dd>
								Shows a list of mounted file systems in the running guest.
							</dd><dt><span class="term"><code class="literal">virsh set-user-password</code></span></dt><dd>
								Sets the password for a given user account in the guest.
							</dd><dt><span class="term"><code class="literal">virsh set-user-sshkeys</code></span></dt><dd><p class="simpara">
								Edits the authorized SSH keys file for a given user in the guest.
							</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
									If you want to use this command to manage a Linux VM, you must also set the following SELinux boolean in the guest operating system:
								</p><pre class="screen"># <span class="strong strong"><strong>setsebool virt_qemu_ga_manage_ssh on</strong></span></pre></div></rh-alert></dd></dl></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#installing-qemu-guest-agent-on-linux-guests_enabling-qemu-guest-agent-features-on-your-virtual-machines" title="2.4.1. Enabling QEMU Guest Agent on Linux guests">Enabling QEMU Guest Agent on Linux guests</a>
						</li><li class="listitem">
							<a class="link" href="#proc_installing-qemu-guest-agent-on-windows-guests_enabling-qemu-guest-agent-features-on-your-virtual-machines" title="2.4.2. Enabling QEMU Guest Agent on Windows guests">Enabling QEMU Guest Agent on Windows guests</a>
						</li></ul></div></section></section></section><section class="chapter" id="assembly_creating-virtual-machines_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h2 class="title">Chapter 3. Creating virtual machines</h2></div></div></div><p>
			To create a virtual machine (VM) in RHEL 9, use the <a class="link" href="#creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines" title="3.1. Creating virtual machines by using the command-line interface">command-line interface</a> or the <a class="link" href="#creating-vms-and-installing-an-os-using-the-rhel-web-console_assembly_creating-virtual-machines" title="3.2. Creating virtual machines and installing guest operating systems by using the web console">RHEL 9 web console</a>.
		</p><section class="section" id="creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines"><div class="titlepage"><div><div><h3 class="title">3.1. Creating virtual machines by using the command-line interface</h3></div></div></div><p class="_abstract _abstract">
				To create a virtual machine (VM) on your RHEL 9 host by using the <code class="literal">virt-install</code> utility, follow the instructions below.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Virtualization is <a class="link" href="#assembly_enabling-virtualization-in-rhel-9_configuring-and-managing-virtualization" title="Chapter 2. Enabling virtualization">enabled</a> on your host system.
					</li><li class="listitem">
						You have a sufficient amount of system resources to allocate to your VMs, such as disk space, RAM, or CPUs. The recommended values may vary significantly depending on the intended tasks and workload of the VMs.
					</li><li class="listitem"><p class="simpara">
						An operating system (OS) installation source is available locally or on a network. This can be one of the following:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								An ISO image of an installation medium
							</li><li class="listitem"><p class="simpara">
								A disk image of an existing VM installation
							</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
									Installing from a host CD-ROM or DVD-ROM device is not possible in RHEL 9. If you select a CD-ROM or DVD-ROM as the installation source when using any VM installation method available in RHEL 9, the installation will fail. For more information, see the <a class="link" href="https://access.redhat.com/solutions/1185913">Red Hat Knowledgebase</a>.
								</p></div></rh-alert><p class="simpara">
								Also note that Red Hat provides support only for <a class="link" href="#recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization" title="24.2. Recommended features in RHEL 9 virtualization">a limited set of guest operating systems</a>.
							</p></li></ul></div></li><li class="listitem">
						Optional: A Kickstart file can be provided for faster and easier configuration of the installation.
					</li></ul></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
					To create a VM and start its OS installation, use the <code class="literal">virt-install</code> command, along with the following mandatory arguments:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">--name</code>: the name of the new machine
					</li><li class="listitem">
						<code class="literal">--memory</code>: the amount of allocated memory
					</li><li class="listitem">
						<code class="literal">--vcpus</code>: the number of allocated virtual CPUs
					</li><li class="listitem">
						<code class="literal">--disk</code>: the type and size of the allocated storage
					</li><li class="listitem">
						<code class="literal">--cdrom</code> or <code class="literal">--location</code>: the type and location of the OS installation source
					</li></ul></div><p>
				Based on the chosen installation method, the necessary options and values can vary. See the commands below for examples:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The following command creates a VM named <span class="strong strong"><strong>demo-guest1</strong></span> that installs the Windows 10 OS from an ISO image locally stored in the <span class="strong strong"><strong>/home/username/Downloads/Win10install.iso</strong></span> file. This VM is also allocated with 2048 MiB of RAM and 2 vCPUs, and an 80 GiB qcow2 virtual disk is automatically configured for the VM.
					</p><pre class="screen"># <span class="strong strong"><strong>virt-install \</strong></span>
    <span class="strong strong"><strong>--name demo-guest1 --memory 2048 \</strong></span>
    <span class="strong strong"><strong>--vcpus 2 --disk size=80 --os-variant win10 \</strong></span>
    <span class="strong strong"><strong>--cdrom /home/username/Downloads/Win10install.iso</strong></span></pre></li><li class="listitem"><p class="simpara">
						The following command creates a VM named <span class="strong strong"><strong>demo-guest2</strong></span> that uses the <span class="strong strong"><strong>/home/username/Downloads/rhel9.iso</strong></span> image to run a RHEL 9 OS from a live CD. No disk space is assigned to this VM, so changes made during the session will not be preserved. In addition, the VM is allocated with 4096 MiB of RAM and 4 vCPUs.
					</p><pre class="screen"># <span class="strong strong"><strong>virt-install \</strong></span>
    <span class="strong strong"><strong>--name demo-guest2 --memory 4096 --vcpus 4 \</strong></span>
    <span class="strong strong"><strong>--disk none --livecd --os-variant rhel9.0 \</strong></span>
    <span class="strong strong"><strong>--cdrom /home/username/Downloads/rhel9.iso</strong></span></pre></li><li class="listitem"><p class="simpara">
						The following command creates a RHEL 9 VM named <span class="strong strong"><strong>demo-guest3</strong></span> that connects to an existing disk image, <span class="strong strong"><strong>/home/username/backup/disk.qcow2</strong></span>. This is similar to physically moving a hard drive between machines, so the OS and data available to demo-guest3 are determined by how the image was handled previously. In addition, this VM is allocated with 2048 MiB of RAM and 2 vCPUs.
					</p><pre class="screen"># <span class="strong strong"><strong>virt-install \</strong></span>
    <span class="strong strong"><strong>--name demo-guest3 --memory 2048 --vcpus 2 \</strong></span>
    <span class="strong strong"><strong>--os-variant rhel9.0 --import \</strong></span>
    <span class="strong strong"><strong>--disk /home/username/backup/disk.qcow2</strong></span></pre><p class="simpara">
						Note that the <code class="literal">--os-variant</code> option is highly recommended when importing a disk image. If it is not provided, the performance of the created VM will be negatively affected.
					</p></li><li class="listitem"><p class="simpara">
						The following command creates a VM named <span class="strong strong"><strong>demo-guest4</strong></span> that installs from the <code class="literal">http://example.com/OS-install</code> URL. For the installation to start successfully, the URL must contain a working OS installation tree. In addition, the OS is automatically configured by using the <span class="strong strong"><strong>/home/username/ks.cfg</strong></span> kickstart file. This VM is also allocated with 2048 MiB of RAM, 2 vCPUs, and a 160 GiB qcow2 virtual disk.
					</p><pre class="screen"># <span class="strong strong"><strong>virt-install \</strong></span>
    <span class="strong strong"><strong>--name demo-guest4 --memory 2048 --vcpus 2 --disk size=160 \</strong></span>
    <span class="strong strong"><strong>--os-variant rhel9.0 --location http://example.com/OS-install \</strong></span>
    <span class="strong strong"><strong>--initrd-inject /home/username/ks.cfg --extra-args="inst.ks=file:/ks.cfg console=tty0 console=ttyS0,115200n8"</strong></span></pre><p class="simpara">
						In addition, if you want to host demo-guest4 on an RHEL 9 on an ARM 64 host, include the following lines to ensure that the kickstart file installs the <code class="literal">kernel-64k</code> package:
					</p><pre class="screen">%packages
-kernel
kernel-64k
%end</pre></li><li class="listitem"><p class="simpara">
						The following command creates a VM named <span class="strong strong"><strong>demo-guest5</strong></span> that installs from a <code class="literal">RHEL9.iso</code> image file in text-only mode, without graphics. It connects the guest console to the serial console. The VM has 16384 MiB of memory, 16 vCPUs, and 280 GiB disk. This kind of installation is useful when connecting to a host over a slow network link.
					</p><pre class="screen"># <span class="strong strong"><strong>virt-install \</strong></span>
    <span class="strong strong"><strong>--name demo-guest5 --memory 16384 --vcpus 16 --disk size=280 \</strong></span>
    <span class="strong strong"><strong>--os-variant rhel9.0 --location RHEL9.iso \</strong></span>
    <span class="strong strong"><strong>--graphics none --extra-args='console=ttyS0'</strong></span></pre></li><li class="listitem"><p class="simpara">
						The following command creates a VM named <span class="strong strong"><strong>demo-guest6</strong></span>, which has the same configuration as demo-guest5, but resides on the 192.0.2.1 remote host.
					</p><pre class="screen"># <span class="strong strong"><strong>virt-install \</strong></span>
    <span class="strong strong"><strong>--connect qemu+ssh://root@192.0.2.1/system --name demo-guest6 --memory 16384 \</strong></span>
    <span class="strong strong"><strong>--vcpus 16 --disk size=280 --os-variant rhel9.0 --location RHEL9.iso \</strong></span>
    <span class="strong strong"><strong>--graphics none --extra-args='console=ttyS0'</strong></span></pre></li><li class="listitem"><p class="simpara">
						The following command creates a VM named <span class="strong strong"><strong>demo-guest-7</strong></span>, which has the same configuration as demo-guest5, but for its storage, it uses a DASD mediated device <code class="literal">mdev_30820a6f_b1a5_4503_91ca_0c10ba12345a_0_0_29a8</code>, and assigns it device number <code class="literal">1111</code>.
					</p><pre class="screen"># <span class="strong strong"><strong>virt-install \</strong></span>
    <span class="strong strong"><strong>--name demo-guest7 --memory 16384 --vcpus 16 --disk size=280 \</strong></span>
    <span class="strong strong"><strong>--os-variant rhel9.0 --location RHEL9.iso --graphics none \</strong></span>
    <span class="strong strong"><strong>--disk none --hostdev mdev_30820a6f_b1a5_4503_91ca_0c10ba12345a_0_0_29a8,address.type=ccw,address.cssid=0xfe,address.ssid=0x0,address.devno=0x1111,boot-order=1 \</strong></span>
    <span class="strong strong"><strong>--extra-args 'rd.dasd=0.0.1111'</strong></span></pre><p class="simpara">
						Note that the name of the mediated device available for installation can be retrieved by using the <code class="literal">virsh nodedev-list --cap mdev</code> command.
					</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						If the VM is created successfully, a <a class="link" href="#proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines" title="5.2. Opening a virtual machine graphical console by using Virt Viewer">virt-viewer</a> window opens with a graphical console of the VM and starts the guest OS installation.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						If <code class="literal">virt-install</code> fails with a <code class="literal">cannot find default network</code> error:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								Ensure that the <code class="literal">libvirt-daemon-config-network</code> package is installed:
							</p><pre class="screen"># <span class="strong strong"><strong>{PackageManagerCommand} info libvirt-daemon-config-network</strong></span>
Installed Packages
Name         : libvirt-daemon-config-network
[...]</pre></li><li class="listitem"><p class="simpara">
								Verify that the <code class="literal">libvirt</code> default network is active and configured to start automatically:
							</p><pre class="screen"># <span class="strong strong"><strong>virsh net-list --all</strong></span>
 Name      State    Autostart   Persistent
--------------------------------------------
 default   active   yes         yes</pre></li><li class="listitem"><p class="simpara">
								If it is not, activate the default network and set it to auto-start:
							</p><pre class="screen"># <span class="strong strong"><strong>virsh net-autostart default</strong></span>
Network default marked as autostarted

# <span class="strong strong"><strong>virsh net-start default</strong></span>
Network default started</pre><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p class="simpara">
										If activating the default network fails with the following error, the <code class="literal">libvirt-daemon-config-network</code> package has not been installed correctly.
									</p><pre class="screen">error: failed to get network 'default'
error: Network not found: no network with matching name 'default'</pre><p class="simpara">
										To fix this, re-install <code class="literal">libvirt-daemon-config-network</code>:
									</p><pre class="screen"># <span class="strong strong"><strong>{PackageManagerCommand} reinstall libvirt-daemon-config-network</strong></span></pre></li><li class="listitem"><p class="simpara">
										If activating the default network fails with an error similar to the following, a conflict has occurred between the default network’s subnet and an existing interface on the host.
									</p><pre class="literallayout">error: Failed to start network default
error: internal error: Network is already in use by interface ens2</pre><p class="simpara">
										To fix this, use the <code class="literal">virsh net-edit default</code> command and change the <code class="literal">192.0.2.*</code> values in the configuration to a subnet not already in use on the host.
									</p></li></ul></div></li></ul></div></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">virt-install (1)</code> man page on your system
					</li><li class="listitem">
						<a class="link" href="#creating-vms-and-installing-an-os-using-the-rhel-web-console_assembly_creating-virtual-machines" title="3.2. Creating virtual machines and installing guest operating systems by using the web console">Creating virtual machines and installing guest operating systems by using the web console</a>
					</li><li class="listitem">
						<a class="link" href="#cloning-virtual-machines_configuring-and-managing-virtualization" title="Chapter 11. Cloning virtual machines">Cloning virtual machines</a>
					</li></ul></div></section><section class="section" id="creating-vms-and-installing-an-os-using-the-rhel-web-console_assembly_creating-virtual-machines"><div class="titlepage"><div><div><h3 class="title">3.2. Creating virtual machines and installing guest operating systems by using the web console</h3></div></div></div><p>
				To manage virtual machines (VMs) in a GUI on a RHEL 9 host, use the web console. The following sections provide information about how to use the RHEL 9 web console to create VMs and install guest operating systems on them.
			</p><section class="section" id="creating-vms-using-the-rhel-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console"><div class="titlepage"><div><div><h4 class="title">3.2.1. Creating virtual machines by using the web console</h4></div></div></div><p class="_abstract _abstract">
					To create a virtual machine (VM) on a host machine to which your RHEL 9 web console is connected, use the instructions below.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							<a class="link" href="#assembly_enabling-virtualization-in-rhel-9_configuring-and-managing-virtualization" title="Chapter 2. Enabling virtualization">Virtualization is enabled on your host system</a>.
						</li><li class="listitem">
							<a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">The web console VM plug-in is installed on your host system</a>.
						</li><li class="listitem">
							You have a sufficient amount of system resources to allocate to your VMs, such as disk space, RAM, or CPUs. The recommended values might vary significantly depending on the intended tasks and workload of the VMs.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="strong strong"><strong>Virtual Machines</strong></span> interface of the web console, click <span class="strong strong"><strong><span class="guibutton">Create VM</span></strong></span>.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Create new virtual machine</strong></span> dialog appears.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/0dcb53f27752cddead439a46f7666905/virt-cockpit-create-new.png" width="540" alt="Image displaying the Create new virtual machine dialog box."></div></div></li><li class="listitem"><p class="simpara">
							Enter the basic configuration of the VM you want to create.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Name</strong></span> - The name of the VM.
								</li><li class="listitem">
									<span class="strong strong"><strong>Connection</strong></span> - The level of privileges granted to the session. For more details, expand the associated dialog box in the web console.
								</li><li class="listitem">
									<span class="strong strong"><strong>Installation type</strong></span> - The installation can use a local installation medium, a URL, a PXE network boot, a cloud base image, or download an operating system from a limited set of operating systems.
								</li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Operating system</strong></span> - The guest operating system running on the VM. Note that Red Hat provides support only for <a class="link" href="#recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization" title="24.2. Recommended features in RHEL 9 virtualization">a limited set of guest operating systems</a>.
								</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
										To download and install Red Hat Enterprise Linux directly from web console, you must add an offline token in the <span class="strong strong"><strong>Offline token</strong></span> field.
									</p></div></rh-alert></li><li class="listitem">
									<span class="strong strong"><strong>Storage</strong></span> - The type of storage.
								</li><li class="listitem">
									<span class="strong strong"><strong>Storage Limit</strong></span> - The amount of storage space.
								</li><li class="listitem">
									<span class="strong strong"><strong>Memory</strong></span> - The amount of memory.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Create the VM:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									If you want the VM to automatically install the operating system, click <span class="guibutton">Create and run</span>.
								</li><li class="listitem">
									If you want to edit the VM before the operating system is installed, click <span class="guibutton">Create and edit</span>.
								</li></ul></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#installing-an-os-using-the-rhel-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console" title="3.2.3. Installing guest operating systems by using the web console">Installing guest operating systems by using the web console</a>
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines" title="3.1. Creating virtual machines by using the command-line interface">Creating virtual machines by using the command-line interface</a>
						</li></ul></div></section><section class="section" id="creating-virtual-machines-by-importing-disk-images-using-the-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console"><div class="titlepage"><div><div><h4 class="title">3.2.2. Creating virtual machines by importing disk images by using the web console</h4></div></div></div><p>
					You can create a virtual machine (VM) by importing a disk image of an existing VM installation in the RHEL 9 web console.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							<a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">The web console VM plug-in is installed on your system</a>.
						</li><li class="listitem">
							You have a sufficient amount of system resources to allocate to your VMs, such as disk space, RAM, or CPUs. The recommended values can vary significantly depending on the intended tasks and workload of the VMs.
						</li><li class="listitem">
							You have downloaded a disk image of an existing VM installation.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="strong strong"><strong>Virtual Machines</strong></span> interface of the web console, click <span class="strong strong"><strong><span class="guibutton">Import VM</span></strong></span>.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Import a virtual machine dialog</strong></span> appears.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/c70372b3abff0535c335409fca99dd78/virt-cockpit-import.png" alt="Image displaying the Import a virtual machine dialog box."></div></div></li><li class="listitem"><p class="simpara">
							Enter the basic configuration of the VM you want to create:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Name</strong></span> - The name of the VM.
								</li><li class="listitem">
									<span class="strong strong"><strong>Disk image</strong></span> - The path to the existing disk image of a VM on the host system.
								</li><li class="listitem">
									<span class="strong strong"><strong>Operating system</strong></span> - The operating system running on a VM disk. Note that Red Hat provides support only for <a class="link" href="#recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization" title="24.2. Recommended features in RHEL 9 virtualization">a limited set of guest operating systems</a>.
								</li><li class="listitem">
									<span class="strong strong"><strong>Memory</strong></span> - The amount of memory to allocate for use by the VM.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Import the VM:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									To install the operating system on the VM without additional edits to the VM settings, click <span class="guibutton">Import and run</span>.
								</li><li class="listitem">
									To edit the VM settings before the installation of the operating system, click <span class="guibutton">Import and edit</span>.
								</li></ul></div></li></ol></div></section><section class="section" id="installing-an-os-using-the-rhel-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console"><div class="titlepage"><div><div><h4 class="title">3.2.3. Installing guest operating systems by using the web console</h4></div></div></div><p>
					When a virtual machine (VM) boots for the first time, you must install an operating system on the VM.
				</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
						If you click <span class="guibutton">Create and run</span> or <span class="guibutton">Import and run</span> while creating a new VM, the installation routine for the operating system starts automatically when the VM is created.
					</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							<a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">The web console VM plug-in is installed on your host system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							In the <span class="strong strong"><strong>Virtual Machines</strong></span> interface, click the VM on which you want to install a guest OS.
						</p><p class="simpara">
							A new page opens with basic information about the selected VM and controls for managing various aspects of the VM.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/95ba9d996be75a4497924d6f6c01056a/virt-cockpit-VM-home.png" alt="Page displaying detailed information about the virtual machine."></div></div></li><li class="listitem"><p class="simpara">
							Optional: Change the firmware.
						</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								You can change the firmware only if you selected <span class="guibutton">Create and edit</span> or <span class="guibutton">Import and edit</span> while creating a new VM and if the OS is not already installed on the VM.
							</p></div></rh-alert><p class="simpara">
							+ .. Click the firmware.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									In the <span class="strong strong"><strong>Change Firmware</strong></span> window, select the required firmware.
								</li><li class="listitem">
									Click <span class="guibutton">Save</span>.
								</li></ol></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Install</span>.
						</p><p class="simpara">
							The installation routine of the operating system runs in the VM console.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							If the installation routine fails, delete and recreate the VM before starting the installation again.
						</li></ul></div></section><section class="section" id="proc_creating-virtual-machines-with-cloud-image-authentication-using-the-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console"><div class="titlepage"><div><div><h4 class="title">3.2.4. Creating virtual machines with cloud image authentication by using the web console</h4></div></div></div><p>
					By default, distro cloud images have no login accounts. However, by using the RHEL web console, you can now create a virtual machine (VM) and specify the root and user account login credentials, which are then passed to cloud-init.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li><li class="listitem">
							Virtualization is <a class="link" href="#assembly_enabling-virtualization-in-rhel-9_configuring-and-managing-virtualization" title="Chapter 2. Enabling virtualization">enabled</a> on your host system.
						</li><li class="listitem">
							You have a sufficient amount of system resources to allocate to your VMs, such as disk space, RAM, or CPUs. The recommended values may vary significantly depending on the intended tasks and workload of the VMs.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface of the web console, click <span class="strong strong"><strong><span class="guibutton">Create VM</span></strong></span>.
						</p><p class="simpara">
							The Create new virtual machine dialog appears.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/0dcb53f27752cddead439a46f7666905/virt-cockpit-create-new.png" width="540" alt="Image displaying the Create new virtual machine dialog box."></div></div></li><li class="listitem">
							In the <span class="strong strong"><strong>Name</strong></span> field, enter a name for the VM.
						</li><li class="listitem"><p class="simpara">
							On the <span class="strong strong"><strong>Details</strong></span> tab, in the <span class="strong strong"><strong>Installation type</strong></span> field, select <span class="strong strong"><strong>Cloud base image</strong></span>.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/d716ddf499f94675f93d19eafc8892c0/virt-cockpit-create-cloud-vm.png" width="540" alt="Image displaying the Create new virtual machine by using cloud-init dialog box."></div></div></li><li class="listitem">
							In the <span class="strong strong"><strong>Installation source</strong></span> field, set the path to the image file on your host system.
						</li><li class="listitem"><p class="simpara">
							Enter the configuration for the VM that you want to create.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Operating system</strong></span> - The VM’s operating system. Note that Red Hat provides support only for <a class="link" href="#recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization" title="24.2. Recommended features in RHEL 9 virtualization">a limited set of guest operating systems</a>.
								</li><li class="listitem">
									<span class="strong strong"><strong>Storage</strong></span> - The type of storage with which to configure the VM.
								</li><li class="listitem">
									<span class="strong strong"><strong>Storage Limit</strong></span> - The amount of storage space with which to configure the VM.
								</li><li class="listitem">
									<span class="strong strong"><strong>Memory</strong></span> - The amount of memory with which to configure the VM.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Click on the <span class="strong strong"><strong>Automation</strong></span> tab.
						</p><p class="simpara">
							Set your cloud authentication credentials.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Root password</strong></span> - Enter a root password for your VM. Leave the field blank if you do not wish to set a root password.
								</li><li class="listitem">
									<span class="strong strong"><strong>User login</strong></span> - Enter a cloud-init user login. Leave this field blank if you do not wish to create a user account.
								</li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>User password</strong></span> - Enter a password. Leave this field blank if you do not wish to create a user account.
								</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/4305e012ac634880c58e139b0ef8b546/virt-cockpit-create-vm-automation.png" width="540" alt="Image displaying the Automation tab of the Create new virtual machine dialog box."></div></div></li></ul></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Create and run</span>.
						</p><p class="simpara">
							The VM is created.
						</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#installing-an-os-using-the-rhel-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console" title="3.2.3. Installing guest operating systems by using the web console">Installing an operating system on a VM</a>
						</li></ul></div></section></section></section><section class="chapter" id="assembly_starting-virtual-machines_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h2 class="title">Chapter 4. Starting virtual machines</h2></div></div></div><p>
			To start a virtual machine (VM) in RHEL 9, you can use <a class="link" href="#starting-a-virtual-machine-using-the-command-line-interface_assembly_starting-virtual-machines" title="4.1. Starting a virtual machine by using the command-line interface">the command line interface</a> or <a class="link" href="#powering-up-vms-using-the-rhel-web-console_assembly_starting-virtual-machines" title="4.2. Starting virtual machines by using the web console">the web console GUI</a>.
		</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					Before a VM can be started, it must be created and, ideally, also installed with an OS. For instruction to do so, see <a class="link" href="#assembly_creating-virtual-machines_configuring-and-managing-virtualization" title="Chapter 3. Creating virtual machines">Creating virtual machines</a>.
				</li></ul></div><section class="section" id="starting-a-virtual-machine-using-the-command-line-interface_assembly_starting-virtual-machines"><div class="titlepage"><div><div><h3 class="title">4.1. Starting a virtual machine by using the command-line interface</h3></div></div></div><p>
				You can use the command line interface (CLI) to start a shut-down virtual machine (VM) or restore a saved VM. By using the CLI, you can start both local and remote VMs.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						An inactive VM that is already defined.
					</li><li class="listitem">
						The name of the VM.
					</li><li class="listitem"><p class="simpara">
						For remote VMs:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The IP address of the host where the VM is located.
							</li><li class="listitem">
								Root access privileges to the host.
							</li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						For a local VM, use the <code class="literal">virsh start</code> utility.
					</p><p class="simpara">
						For example, the following command starts the <span class="emphasis"><em>demo-guest1</em></span> VM.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh start demo-guest1</strong></span>
Domain 'demo-guest1' started</pre></li><li class="listitem"><p class="simpara">
						For a VM located on a remote host, use the <code class="literal">virsh start</code> utility along with the QEMU+SSH connection to the host.
					</p><p class="simpara">
						For example, the following command starts the <span class="emphasis"><em>demo-guest1</em></span> VM on the 192.0.2.1 host.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh -c qemu+ssh://root@192.0.2.1/system start demo-guest1</strong></span>

root@192.0.2.1's password:

Domain 'demo-guest1' started</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The <code class="literal">virsh start --help</code> command
					</li><li class="listitem">
						<a class="link" href="#setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines" title="5.5. Setting up easy access to remote virtualization hosts">Setting up easy access to remote virtualization hosts</a>
					</li><li class="listitem">
						<a class="link" href="#starting-virtual-machines-automatically-when-the-host-starts_assembly_starting-virtual-machines" title="4.3. Starting virtual machines automatically when the host starts">Starting virtual machines automatically when the host starts</a>
					</li></ul></div></section><section class="section" id="powering-up-vms-using-the-rhel-web-console_assembly_starting-virtual-machines"><div class="titlepage"><div><div><h3 class="title">4.2. Starting virtual machines by using the web console</h3></div></div></div><p>
				If a virtual machine (VM) is in the <span class="emphasis"><em>shut off</em></span> state, you can start it by using the RHEL 9 web console. You can also configure the VM to be started automatically when the host starts.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You have installed the RHEL 9 web console.
					</p><p class="simpara">
						For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
					</p></li><li class="listitem">
						The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
					</li><li class="listitem">
						An inactive VM that is already defined.
					</li><li class="listitem">
						The name of the VM.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						In the <span class="guimenu">Virtual Machines</span> interface, click the VM you want to start.
					</p><p class="simpara">
						A new page opens with detailed information about the selected VM and controls for shutting down and deleting the VM.
					</p></li><li class="listitem"><p class="simpara">
						Click <span class="guibutton">Run</span>.
					</p><p class="simpara">
						The VM starts, and you can <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/assembly_connecting-to-virtual-machines_configuring-and-managing-virtualization">connect to its console or graphical output</a>.
					</p></li><li class="listitem"><p class="simpara">
						Optional: To configure the VM to start automatically when the host starts, toggle the <code class="literal">Autostart</code> checkbox in the <span class="strong strong"><strong>Overview</strong></span> section.
					</p><p class="simpara">
						If you use network interfaces that are not managed by libvirt, you must also make additional changes to the systemd configuration. Otherwise, the affected VMs might fail to start, see <a class="link" href="#starting-virtual-machines-automatically-when-the-host-starts_assembly_starting-virtual-machines" title="4.3. Starting virtual machines automatically when the host starts">starting virtual machines automatically when the host starts</a>.
					</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#powering-down-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console" title="6.2.1. Shutting down virtual machines in the web console">Shutting down virtual machines in the web console</a>
					</li><li class="listitem">
						<a class="link" href="#restarting-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console" title="6.2.2. Restarting virtual machines by using the web console">Restarting virtual machines by using the web console</a>
					</li></ul></div></section><section class="section" id="starting-virtual-machines-automatically-when-the-host-starts_assembly_starting-virtual-machines"><div class="titlepage"><div><div><h3 class="title">4.3. Starting virtual machines automatically when the host starts</h3></div></div></div><p class="_abstract _abstract">
				When a host with a running virtual machine (VM) restarts, the VM is shut down, and must be started again manually by default. To ensure a VM is active whenever its host is running, you can configure the VM to be started automatically.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#assembly_creating-virtual-machines_configuring-and-managing-virtualization" title="Chapter 3. Creating virtual machines">A created virtual machine</a>
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Use the <code class="literal">virsh autostart</code> utility to configure the VM to start automatically when the host starts.
					</p><p class="simpara">
						For example, the following command configures the <span class="emphasis"><em>demo-guest1</em></span> VM to start automatically.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh autostart demo-guest1</strong></span>
Domain '<span class="emphasis"><em>demo-guest1</em></span>' marked as autostarted</pre></li><li class="listitem"><p class="simpara">
						If you use network interfaces that are not managed by <code class="literal">libvirt</code>, you must also make additional changes to the systemd configuration. Otherwise, the affected VMs might fail to start.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							These interfaces include for example:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Bridge devices created by <code class="literal">NetworkManager</code>
								</li><li class="listitem">
									Networks configured to use <code class="literal">&lt;forward mode='bridge'/&gt;</code>
								</li></ul></div></div></rh-alert><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								In the systemd configuration directory tree, create a <code class="literal">virtqemud.service.d</code> directory if it does not exist yet.
							</p><pre class="screen"># <span class="strong strong"><strong>mkdir -p /etc/systemd/system/virtqemud.service.d/</strong></span></pre></li><li class="listitem"><p class="simpara">
								Create a <code class="literal">10-network-online.conf</code> systemd unit override file in the previously created directory. The content of this file overrides the default systemd configuration for the <code class="literal">virtqemud</code> service.
							</p><pre class="screen"># <span class="strong strong"><strong>touch /etc/systemd/system/virtqemud.service.d/10-network-online.conf</strong></span></pre></li><li class="listitem"><p class="simpara">
								Add the following lines to the <code class="literal">10-network-online.conf</code> file. This configuration change ensures systemd starts the <code class="literal">virtqemud</code> service only after the network on the host is ready.
							</p><pre class="screen">[Unit]
After=network-online.target</pre></li></ol></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						View the VM configuration, and check that the <span class="emphasis"><em>autostart</em></span> option is enabled.
					</p><p class="simpara">
						For example, the following command displays basic information about the <span class="emphasis"><em>demo-guest1</em></span> VM, including the <span class="emphasis"><em>autostart</em></span> option.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh dominfo demo-guest1</strong></span>
Id:             2
Name:           demo-guest1
UUID:           e46bc81c-74e2-406e-bd7a-67042bae80d1
OS Type:        hvm
State:          running
CPU(s):         2
CPU time:       385.9s
Max memory:     4194304 KiB
Used memory:    4194304 KiB
Persistent:     yes
Autostart:      enable
Managed save:   no
Security model: selinux
Security DOI:   0
Security label: system_u:system_r:svirt_t:s0:c873,c919 (enforcing)</pre></li><li class="listitem"><p class="simpara">
						If you use network interfaces that are not managed by libvirt, check if the content of the <code class="literal">10-network-online.conf</code> file matches the following output.
					</p><pre class="screen">$ <span class="strong strong"><strong>cat /etc/systemd/system/virtqemud.service.d/10-network-online.conf</strong></span>
[Unit]
After=network-online.target</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The <code class="literal">virsh autostart --help</code> command
					</li><li class="listitem">
						<a class="link" href="#powering-up-vms-using-the-rhel-web-console_assembly_starting-virtual-machines" title="4.2. Starting virtual machines by using the web console">Starting virtual machines by using the web console</a>.
					</li></ul></div></section></section><section class="chapter" id="assembly_connecting-to-virtual-machines_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h2 class="title">Chapter 5. Connecting to virtual machines</h2></div></div></div><p>
			To interact with a virtual machine (VM) in RHEL 9, you need to connect to it by doing one of the following:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					When using the web console interface, use the Virtual Machines pane in the web console interface. For more information, see <a class="link" href="#viewing-vm-consoles-using-the-rhel-web-console_assembly_connecting-to-virtual-machines" title="5.1. Interacting with virtual machines by using the web console">Interacting with virtual machines by using the web console</a>.
				</li><li class="listitem">
					If you need to interact with a VM graphical display without using the web console, use the Virt Viewer application. For details, see <a class="link" href="#proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines" title="5.2. Opening a virtual machine graphical console by using Virt Viewer">Opening a virtual machine graphical console by using Virt Viewer</a>.
				</li><li class="listitem">
					When a graphical display is not possible or not necessary, use <a class="link" href="#proc_connecting-to-a-virtual-machine-using-ssh_assembly_connecting-to-virtual-machines" title="5.3. Connecting to a virtual machine by using SSH">an SSH terminal connection</a>.
				</li><li class="listitem">
					When the virtual machine is not reachable from your system by using a network, use <a class="link" href="#proc_opening-a-virtual-machine-serial-console_assembly_connecting-to-virtual-machines" title="5.4. Opening a virtual machine serial console">the virsh console</a>.
				</li></ul></div><p>
			If the VMs to which you are connecting are on a remote host rather than a local one, you can optionally configure your system for <a class="link" href="#setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines" title="5.5. Setting up easy access to remote virtualization hosts">more convenient access to remote hosts</a>.
		</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					The VMs you want to interact with are <a class="link" href="#assembly_creating-virtual-machines_configuring-and-managing-virtualization" title="Chapter 3. Creating virtual machines">installed</a> and <a class="link" href="#assembly_starting-virtual-machines_configuring-and-managing-virtualization" title="Chapter 4. Starting virtual machines">started</a>.
				</li></ul></div><section class="section" id="viewing-vm-consoles-using-the-rhel-web-console_assembly_connecting-to-virtual-machines"><div class="titlepage"><div><div><h3 class="title">5.1. Interacting with virtual machines by using the web console</h3></div></div></div><p>
				To interact with a virtual machine (VM) in the RHEL 9 web console, you need to connect to the VM’s console. These include both graphical and serial consoles.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						To interact with the VM’s graphical interface in the web console, use <a class="link" href="#viewing-guest-graphical-console-in-the-rhel-web-console_viewing-vm-consoles-using-the-rhel-web-console" title="5.1.1. Viewing the virtual machine graphical console in the web console">the graphical console</a>.
					</li><li class="listitem">
						To interact with the VM’s graphical interface in a remote viewer, use <a class="link" href="#viewing-graphical-console-in-remote-viewer_viewing-vm-consoles-using-the-rhel-web-console" title="5.1.2. Viewing the graphical console in a remote viewer by using the web console">the graphical console in remote viewers</a>.
					</li><li class="listitem">
						To interact with the VM’s CLI in the web console, use <a class="link" href="#viewing-vm-serial-console-in-the-rhel-web-console_viewing-vm-consoles-using-the-rhel-web-console" title="5.1.3. Viewing the virtual machine serial console in the web console">the serial console</a>.
					</li></ul></div><section class="section" id="viewing-guest-graphical-console-in-the-rhel-web-console_viewing-vm-consoles-using-the-rhel-web-console"><div class="titlepage"><div><div><h4 class="title">5.1.1. Viewing the virtual machine graphical console in the web console</h4></div></div></div><p>
					By using the virtual machine (VM) console interface, you can view the graphical output of a selected VM in the RHEL 9 web console.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li><li class="listitem">
							Ensure that both the host and the VM support a graphical interface.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click the VM whose graphical console you want to view.
						</p><p class="simpara">
							A new page opens with an <span class="strong strong"><strong>Overview</strong></span> and a <span class="strong strong"><strong>Console</strong></span> section for the VM.
						</p></li><li class="listitem"><p class="simpara">
							Select <span class="guibutton">VNC console</span> in the console drop down menu.
						</p><p class="simpara">
							The VNC console appears below the menu in the web interface.
						</p><p class="simpara">
							The graphical console appears in the web interface.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Expand</span>
						</p><p class="simpara">
							You can now interact with the VM console by using the mouse and keyboard in the same manner you interact with a real machine. The display in the VM console reflects the activities being performed on the VM.
						</p></li></ol></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
						The host on which the web console is running may intercept specific key combinations, such as <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">Alt</kbd>+<kbd class="keycap">Del</kbd>, preventing them from being sent to the VM.
					</p><p>
						To send such key combinations, click the <span class="guimenu">Send key</span> menu and select the key sequence to send.
					</p><p>
						For example, to send the <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">Alt</kbd>+<kbd class="keycap">Del</kbd> combination to the VM, click the <span class="guimenu">Send key</span> and select the <span class="guibutton">Ctrl+Alt+Del</span> menu entry.
					</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							If clicking in the graphical console does not have any effect, expand the console to full screen. This is a known issue with the mouse cursor offset.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#viewing-graphical-console-in-remote-viewer_viewing-vm-consoles-using-the-rhel-web-console" title="5.1.2. Viewing the graphical console in a remote viewer by using the web console">Viewing the graphical console in a remote viewer by using the web console</a>
						</li><li class="listitem">
							<a class="link" href="#viewing-vm-serial-console-in-the-rhel-web-console_viewing-vm-consoles-using-the-rhel-web-console" title="5.1.3. Viewing the virtual machine serial console in the web console">Viewing the virtual machine serial console in the web console</a>
						</li></ul></div></section><section class="section" id="viewing-graphical-console-in-remote-viewer_viewing-vm-consoles-using-the-rhel-web-console"><div class="titlepage"><div><div><h4 class="title">5.1.2. Viewing the graphical console in a remote viewer by using the web console</h4></div></div></div><p>
					By using the web console interface, you can display the graphical console of a selected virtual machine (VM) in a remote viewer, such as Virt Viewer.
				</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
						You can launch Virt Viewer from within the web console. Other VNC remote viewers can be launched manually.
					</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li><li class="listitem">
							Ensure that both the host and the VM support a graphical interface.
						</li><li class="listitem"><p class="simpara">
							Before you can view the graphical console in Virt Viewer, you must install Virt Viewer on the machine to which the web console is connected.
						</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Click <span class="guibutton">Launch remote viewer</span>.
								</p><p class="simpara">
									The virt viewer, <code class="literal">.vv</code>, file downloads.
								</p></li><li class="listitem">
									Open the file to launch Virt Viewer.
								</li></ol></div></li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
						Remote Viewer is available on most operating systems. However, some browser extensions and plug-ins do not allow the web console to open Virt Viewer.
					</p></div></rh-alert><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click the VM whose graphical console you want to view.
						</p><p class="simpara">
							A new page opens with an <span class="strong strong"><strong>Overview</strong></span> and a <span class="strong strong"><strong>Console</strong></span> section for the VM.
						</p></li><li class="listitem"><p class="simpara">
							Select <span class="guibutton">Desktop Viewer</span> in the console drop down menu.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/b9a4e891fa710095fa5d70c36f010728/virt-cockpit-graphical-console.png" alt="Page displaying the Console section of the virtual machine interface along with other VM details."></div></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Launch Remote Viewer</span>.
						</p><p class="simpara">
							The graphical console opens in Virt Viewer.
						</p><p class="simpara">
							You can interact with the VM console by using the mouse and keyboard in the same manner in which you interact with a real machine. The display in the VM console reflects the activities being performed on the VM.
						</p></li></ol></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
						The server on which the web console is running can intercept specific key combinations, such as <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">Alt</kbd>+<kbd class="keycap">Del</kbd>, preventing them from being sent to the VM.
					</p><p>
						To send such key combinations, click the <span class="guibutton">Send key</span> menu and select the key sequence to send.
					</p><p>
						For example, to send the <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">Alt</kbd>+<kbd class="keycap">Del</kbd> combination to the VM, click the <span class="guibutton">Send key</span> menu and select the <span class="guibutton">Ctrl+Alt+Del</span> menu entry.
					</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							If clicking in the graphical console does not have any effect, expand the console to full screen. This is a known issue with the mouse cursor offset.
						</li><li class="listitem"><p class="simpara">
							If launching the Remote Viewer in the web console does not work or is not optimal, you can manually connect with any viewer application by using the following protocols:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<span class="strong strong"><strong>Address</strong></span> - The default address is <code class="literal">127.0.0.1</code>. You can modify the <code class="literal">vnc_listen</code> parameter in <code class="literal filename">/etc/libvirt/qemu.conf</code> to change it to the host’s IP address.
								</li><li class="listitem">
									<span class="strong strong"><strong>VNC port</strong></span> - 5901
								</li></ul></div></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#viewing-guest-graphical-console-in-the-rhel-web-console_viewing-vm-consoles-using-the-rhel-web-console" title="5.1.1. Viewing the virtual machine graphical console in the web console">Viewing the virtual machine graphical console in the web console</a>
						</li><li class="listitem">
							<a class="link" href="#viewing-vm-serial-console-in-the-rhel-web-console_viewing-vm-consoles-using-the-rhel-web-console" title="5.1.3. Viewing the virtual machine serial console in the web console">Viewing the virtual machine serial console in the web console</a>
						</li></ul></div></section><section class="section" id="viewing-vm-serial-console-in-the-rhel-web-console_viewing-vm-consoles-using-the-rhel-web-console"><div class="titlepage"><div><div><h4 class="title">5.1.3. Viewing the virtual machine serial console in the web console</h4></div></div></div><p>
					You can view the serial console of a selected virtual machine (VM) in the RHEL 9 web console. This is useful when the host machine or the VM is not configured with a graphical interface.
				</p><p>
					For more information about the serial console, see <a class="link" href="#proc_opening-a-virtual-machine-serial-console_assembly_connecting-to-virtual-machines" title="5.4. Opening a virtual machine serial console">Opening a virtual machine serial console</a>.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> pane, click the VM whose serial console you want to view.
						</p><p class="simpara">
							A new page opens with an <span class="strong strong"><strong>Overview</strong></span> and a <span class="strong strong"><strong>Console</strong></span> section for the VM.
						</p></li><li class="listitem"><p class="simpara">
							Select <span class="guibutton">Serial console</span> in the console drop down menu.
						</p><p class="simpara">
							The graphical console appears in the web interface.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/7f90b98fd581d94f18a134d0fc2f03fa/virt-cockpit-serial-console.png" alt="Page displaying the virtual machine serial console along with other VM details."></div></div></li></ol></div><p>
					You can disconnect and reconnect the serial console from the VM.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							To disconnect the serial console from the VM, click <span class="guibutton">Disconnect</span>.
						</li><li class="listitem">
							To reconnect the serial console to the VM, click <span class="guibutton">Reconnect</span>.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#viewing-guest-graphical-console-in-the-rhel-web-console_viewing-vm-consoles-using-the-rhel-web-console" title="5.1.1. Viewing the virtual machine graphical console in the web console">Viewing the virtual machine graphical console in the web console</a>
						</li><li class="listitem">
							<a class="link" href="#viewing-graphical-console-in-remote-viewer_viewing-vm-consoles-using-the-rhel-web-console" title="5.1.2. Viewing the graphical console in a remote viewer by using the web console">Viewing the graphical console in a remote viewer by using the web console</a>
						</li></ul></div></section><section class="section" id="replacing-spice-virtual-device-with-vnc_viewing-vm-consoles-using-the-rhel-web-console"><div class="titlepage"><div><div><h4 class="title">5.1.4. Replacing the SPICE remote display protocol with VNC in the web console</h4></div></div></div><p>
					The support for the SPICE remote display protocol has been removed on RHEL 9 hosts. If you have a virtual machine (VM) that is configured to use the SPICE protocol, you can replace the SPICE protocol with the VNC protocol by using the web console. Otherwise, the VM fails to start.
				</p><p>
					However, certain SPICE devices, such as audio and USB passthrough, will be removed from the VM because they do not have a suitable replacement in the VNC protocol. For more information, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/considerations_in_adopting_rhel_9/assembly_virtualization_considerations-in-adopting-rhel-9#ref_changes-to-spice_assembly_virtualization">Considerations in adopting RHEL 9</a>.
				</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
						By default, RHEL 8 VMs are configured to use the SPICE protocol. On a RHEL 9 host, these VMs fail to start, unless you switch from SPICE to VNC.
					</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li><li class="listitem">
							You have an existing VM that is configured to use the SPICE remote display protocol and is already shut-down.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the Virtual Machines interface of the web console, click the Menu button <span class="guibutton">⋮</span> of the VM that is configured to use the SPICE protocol.
						</p><p class="simpara">
							A drop down menu opens with controls for various VM operations.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Replace SPICE devices</span>.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Replace SPICE devices</strong></span> dialog opens.
						</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								If you have multiple existing VMs that use the SPICE protocol, they are listed in this dialog. Here, you can select multiple VMs to convert from using SPICE to VNC in a single step.
							</p></div></rh-alert></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Replace</span>.
						</p><p class="simpara">
							A confirmation of the successful operation appears.
						</p></li></ol></div></section></section><section class="section" id="proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines"><div class="titlepage"><div><div><h3 class="title">5.2. Opening a virtual machine graphical console by using Virt Viewer</h3></div></div></div><p>
				To connect to a graphical console of a KVM virtual machine (VM) and open it in the <code class="literal">Virt Viewer</code> desktop application, follow the procedure below.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Your system, as well as the VM you are connecting to, must support graphical displays.
					</li><li class="listitem">
						If the target VM is located on a remote host, connection and root access privileges to the host are needed.
					</li><li class="listitem">
						Optional: If the target VM is located on a remote host, set up your libvirt and SSH for <a class="link" href="#setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines" title="5.5. Setting up easy access to remote virtualization hosts">more convenient access to remote hosts</a>.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To connect to a local VM, use the following command and replace <span class="emphasis"><em>guest-name</em></span> with the name of the VM you want to connect to:
					</p><pre class="screen"># <span class="strong strong"><strong>virt-viewer guest-name</strong></span></pre></li><li class="listitem"><p class="simpara">
						To connect to a remote VM, use the <code class="literal">virt-viewer</code> command with the SSH protocol. For example, the following command connects as root to a VM called <span class="emphasis"><em>guest-name</em></span>, located on remote system 192.0.2.1. The connection also requires root authentication for 192.0.2.1.
					</p><pre class="screen"># <span class="strong strong"><strong>virt-viewer --direct --connect <span class="emphasis"><em>qemu+ssh://root@192.0.2.1/system guest-name</em></span></strong></span>
root@192.0.2.1's password:</pre></li></ul></div><div class="formalpara"><p class="title"><strong>Verification</strong></p><p>
					If the connection works correctly, the VM display is shown in the <code class="literal">Virt Viewer</code> window.
				</p></div><p>
				You can interact with the VM console by using the mouse and keyboard in the same manner you interact with a real machine. The display in the VM console reflects the activities being performed on the VM.
			</p><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						If clicking in the graphical console does not have any effect, expand the console to full screen. This is a known issue with the mouse cursor offset.
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">virt-viewer</code> man page on your system
					</li><li class="listitem">
						<a class="link" href="#setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines" title="5.5. Setting up easy access to remote virtualization hosts">Setting up easy access to remote virtualization hosts</a>
					</li><li class="listitem">
						<a class="link" href="#viewing-vm-consoles-using-the-rhel-web-console_assembly_connecting-to-virtual-machines" title="5.1. Interacting with virtual machines by using the web console">Interacting with virtual machines by using the web console</a>
					</li></ul></div></section><section class="section" id="proc_connecting-to-a-virtual-machine-using-ssh_assembly_connecting-to-virtual-machines"><div class="titlepage"><div><div><h3 class="title">5.3. Connecting to a virtual machine by using SSH</h3></div></div></div><p>
				To interact with the terminal of a virtual machine (VM) by using the SSH connection protocol, follow the procedure below.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have network connection and root access privileges to the target VM.
					</li><li class="listitem">
						If the target VM is located on a remote host, you also have connection and root access privileges to that host.
					</li><li class="listitem"><p class="simpara">
						Your VM network assigns IP addresses by <code class="literal">dnsmasq</code> generated by <code class="literal">libvirt</code>. This is the case for example in <code class="literal">libvirt</code> <a class="link" href="#virtual-networking-default-configuration_understanding-virtual-networking-overview" title="17.1.2. Virtual networking default configuration">NAT networks</a>.
					</p><p class="simpara">
						Notably, if your VM is using one of the following network configurations, you cannot connect to the VM by using SSH:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<code class="literal">hostdev</code> interfaces
							</li><li class="listitem">
								Direct interfaces
							</li><li class="listitem">
								Bridge interaces
							</li></ul></div></li><li class="listitem"><p class="simpara">
						The <code class="literal">libvirt-nss</code> component is installed and enabled on the VM’s host. If it is not, do the following:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Install the <code class="literal">libvirt-nss</code> package:
							</p><pre class="screen"># <span class="strong strong"><strong>dnf install libvirt-nss</strong></span></pre></li><li class="listitem"><p class="simpara">
								Edit the <code class="literal">/etc/nsswitch.conf</code> file and add <code class="literal">libvirt_guest</code> to the <code class="literal">hosts</code> line:
							</p><pre class="screen">...
passwd:      compat
shadow:      compat
group:       compat
hosts:       files libvirt_guest dns
...</pre></li></ol></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						When connecting to a remote VM, SSH into its physical host first. The following example demonstrates connecting to a host machine <code class="literal">192.0.2.1</code> by using its root credentials:
					</p><pre class="screen"># <span class="strong strong"><strong>ssh root@192.0.2.1</strong></span>
root@192.0.2.1's password:
Last login: Mon Sep 24 12:05:36 2021
root~#</pre></li><li class="listitem"><p class="simpara">
						Use the VM’s name and user access credentials to connect to it. For example, the following connects to to the <code class="literal">testguest1</code> VM by using its root credentials:
					</p><pre class="screen"># <span class="strong strong"><strong>ssh root@testguest1</strong></span>
root@testguest1's password:
Last login: Wed Sep 12 12:05:36 2018
root~]#</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						If you do not know the VM’s name, you can list all VMs available on the host by using the <code class="literal">virsh list --all</code> command:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh list --all</strong></span>
Id    Name                           State
----------------------------------------------------
2     testguest1                    running
-     testguest2                    shut off</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://libvirt.org/nss.html">Upstream libvirt documentation</a>
					</li></ul></div></section><section class="section" id="proc_opening-a-virtual-machine-serial-console_assembly_connecting-to-virtual-machines"><div class="titlepage"><div><div><h3 class="title">5.4. Opening a virtual machine serial console</h3></div></div></div><p>
				By using the <code class="literal">virsh console</code> command, it is possible to connect to the serial console of a virtual machine (VM).
			</p><p>
				This is useful when the VM:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Does not provide VNC protocols, and thus does not offer video display for GUI tools.
					</li><li class="listitem">
						Does not have a network connection, and thus cannot be interacted with <a class="link" href="#proc_connecting-to-a-virtual-machine-using-ssh_assembly_connecting-to-virtual-machines" title="5.3. Connecting to a virtual machine by using SSH">using SSH</a>.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The GRUB boot loader on your host must be configured to use serial console. To verify, check that the <code class="literal">/etc/default/grub</code> file on your host contains the <code class="literal">GRUB_TERMINAL=serial</code> parameter.
					</p><pre class="screen">$ <span class="strong strong"><strong>sudo grep GRUB_TERMINAL /etc/default/grub</strong></span>
GRUB_TERMINAL=serial</pre></li><li class="listitem"><p class="simpara">
						The VM must have a serial console device configured, such as <code class="literal">console type='pty'</code>. To verify, do the following:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh dumpxml <span class="emphasis"><em>vm-name</em></span> | grep console</strong></span>

&lt;console type='pty' tty='/dev/pts/2'&gt;
&lt;/console&gt;</pre></li><li class="listitem"><p class="simpara">
						The VM must have the serial console configured in its kernel command line. To verify this, the <code class="literal">cat /proc/cmdline</code> command output on the VM should include <span class="emphasis"><em>console=&lt;console-name&gt;</em></span>, where <span class="emphasis"><em>&lt;console-name&gt;</em></span> is architecture-specific:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								For AMD64 and Intel 64: <code class="literal">ttyS0</code>
							</li><li class="listitem"><p class="simpara">
								For ARM 64: <code class="literal">ttyAMA0</code>
							</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
									The following commands in this procedure use <code class="literal">ttyS0</code>.
								</p></div></rh-alert><pre class="screen"># <span class="strong strong"><strong>cat /proc/cmdline</strong></span>
BOOT_IMAGE=/vmlinuz-3.10.0-948.el7.x86_64 root=/dev/mapper/rhel-root ro console=tty0 <span class="strong strong"><strong>console=ttyS0</strong></span>,9600n8 rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap rhgb</pre><p class="simpara">
								If the serial console is not set up properly on a VM, using <span class="strong strong"><strong>virsh console</strong></span> to connect to the VM connects you to an unresponsive guest console. However, you can still exit the unresponsive console by using the <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">]</kbd> shortcut.
							</p></li><li class="listitem"><p class="simpara">
								To set up serial console on the VM, do the following:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
										On the VM, enable the <code class="literal">console=ttyS0</code> kernel option:
									</p><pre class="screen"># <span class="strong strong"><strong>grubby --update-kernel=ALL --args="console=ttyS0"</strong></span></pre></li><li class="listitem"><p class="simpara">
										Clear the kernel options that might prevent your changes from taking effect.
									</p><pre class="screen"># <span class="strong strong"><strong>grub2-editenv - unset kernelopts</strong></span></pre></li><li class="listitem">
										Reboot the VM.
									</li></ol></div></li></ul></div></li><li class="listitem"><p class="simpara">
						The <code class="literal">serial-getty@<span class="emphasis"><em>&lt;console-name&gt;</em></span></code> service must be enabled. For example, on AMD64 and Intel 64:
					</p><pre class="screen"># <span class="strong strong"><strong>systemctl status serial-getty@ttyS0.service</strong></span>

○ serial-getty@ttyS0.service - Serial Getty on ttyS0
     Loaded: loaded (/usr/lib/systemd/system/serial-getty@.service; enabled; preset: enabled)</pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On your host system, use the <code class="literal">virsh console</code> command. The following example connects to the <span class="emphasis"><em>guest1</em></span> VM, if the libvirt driver supports safe console handling:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh console guest1 --safe</strong></span>
Connected to domain 'guest1'
Escape character is ^]

<span class="emphasis"><em>Subscription-name</em></span>
Kernel 3.10.0-948.el7.x86_64 on an x86_64

localhost login:</pre></li><li class="listitem">
						You can interact with the virsh console in the same way as with a standard command-line interface.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">virsh</code> man page on your system
					</li><li class="listitem">
						<a class="link" href="https://youtu.be/sjyw-3oVrkQ">Configuring Serial Console Logs on a VM (video)</a>
					</li></ul></div></section><section class="section" id="setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines"><div class="titlepage"><div><div><h3 class="title">5.5. Setting up easy access to remote virtualization hosts</h3></div></div></div><p>
				When managing VMs on a remote host system by using libvirt utilities, it is recommended to use the <code class="literal">-c qemu+ssh://root@hostname/system</code> syntax. For example, to use the <code class="literal">virsh list</code> command as root on the <code class="literal">192.0.2.1</code> host:
			</p><pre class="screen"># <span class="strong strong"><strong>virsh -c qemu+ssh://root@<span class="emphasis"><em>192.0.2.1/system</em></span> list</strong></span>
root@192.0.2.1's password:

Id   Name              State
---------------------------------
1    remote-guest      running</pre><p>
				However, you can remove the need to specify the connection details in full by modifying your SSH and libvirt configuration. For example:
			</p><pre class="screen"># <span class="strong strong"><strong>virsh -c <span class="emphasis"><em>remote-host</em></span> list</strong></span>
root@192.0.2.1's password:

Id   Name              State
---------------------------------
1    remote-guest      running</pre><p>
				To enable this improvement, follow the instructions below.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Edit the <code class="literal">~/.ssh/config</code> file with the following details, where <span class="emphasis"><em>host-alias</em></span> is a shortened name associated with a specific remote host and an alias for root@192.0.2.1, and <span class="emphasis"><em>hosturl</em></span> is the URL address of the host :
					</p><pre class="screen"># <span class="strong strong"><strong>vi ~/.ssh/config</strong></span>
Host <span class="emphasis"><em>example-host-alias</em></span>
  User                    root
  Hostname                192.0.2.1</pre></li><li class="listitem"><p class="simpara">
						Edit the <code class="literal">/etc/libvirt/libvirt.conf</code> file with the following details, the <span class="emphasis"><em>example-qemu-host-alias</em></span> is a host alias that QEMU and libvirt utilities will associate for <code class="literal">qemu+ssh://192.0.2.1/system</code> with the intended host <span class="emphasis"><em>example-host-alias</em></span> :
					</p><pre class="screen"># <span class="strong strong"><strong>vi /etc/libvirt/libvirt.conf</strong></span>
uri_aliases = [
  "<span class="emphasis"><em>example-qemu-host-alias</em></span>=qemu+ssh://<span class="emphasis"><em>example-host-alias</em></span>/system",
]</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Confirm that you can manage remote VMs by using libvirt-based utilities on the local system with an added <code class="literal">-c <span class="emphasis"><em>qemu-host-alias</em></span></code> parameter. This automatically performs the commands over SSH on the remote host.
					</p><p class="simpara">
						For example, verify that the following lists VMs on the 192.0.2.1 remote host, the connection to which was set up as <span class="emphasis"><em>example-qemu-host-alias</em></span> in the previous steps:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh -c <span class="emphasis"><em>example-qemu-host-alias</em></span> list</strong></span>

root@192.0.2.1's password:

Id   Name                       State
----------------------------------------
1    example-remote-guest      running</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							In addition to <code class="literal">virsh</code>, the <code class="literal">-c</code> (or <code class="literal">--connect</code>) option and the remote host access configuration described above can be used by the following utilities:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<a class="link" href="#creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines" title="3.1. Creating virtual machines by using the command-line interface">virt-install</a>
								</li><li class="listitem">
									<a class="link" href="#proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines" title="5.2. Opening a virtual machine graphical console by using Virt Viewer">virt-viewer</a>
								</li></ul></div></div></rh-alert></li></ol></div><div class="formalpara"><p class="title"><strong>Next steps</strong></p><p>
					If you want to use libvirt utilities exclusively on a single remote host, you can also set a specific connection as the default target for libvirt-based utilities. However, this is not recommended if you also want to manage VMs on your local host or on different remote hosts.
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You can edit the <code class="literal">/etc/libvirt/libvirt.conf</code> file and set the value of the <code class="literal">uri_default</code> parameter to <span class="emphasis"><em>example-qemu-host-alias</em></span> as a default libvirt target.
					</p><pre class="screen"># These can be used in cases when no URI is supplied by the application
# (@uri_default also prevents probing of the hypervisor driver).
#
uri_default = "example-qemu-host-alias"</pre><p class="simpara">
						As a result, all libvirt-based commands will automatically be performed on the specified remote host.
					</p><pre class="screen">$ <span class="strong strong"><strong>virsh list</strong></span>
root@192.0.2.1's password:

Id   Name              State
---------------------------------
1   example-remote-guest      running</pre></li><li class="listitem"><p class="simpara">
						When connecting to a remote host, you can avoid providing the root password to the remote system. To do so, use one or more of the following methods:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/assembly_using-secure-communications-between-two-systems-with-openssh_configuring-basic-system-settings">Set up key-based SSH access to the remote host</a>
							</li><li class="listitem">
								Use SSH connection multiplexing to connect to the remote system
							</li><li class="listitem">
								<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_identity_management/logging-in-to-ipa-in-the-web-ui-using-a-kerberos-ticket_configuring-and-managing-idm#kerberos-authentication-in-identity-management_login-web-ui-krb">Kerberos authentication in Identity Management</a>
							</li></ul></div></li><li class="listitem">
						The <code class="literal">-c</code> (or <code class="literal">--connect</code>) option can be used to run the <a class="link" href="#creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines" title="3.1. Creating virtual machines by using the command-line interface"><code class="literal">virt-install</code></a>, <a class="link" href="#proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines" title="5.2. Opening a virtual machine graphical console by using Virt Viewer"><code class="literal">virt-viewer</code></a>, and <code class="literal">virsh</code> commands on a remote host.
					</li></ul></div></section><section class="section" id="configuring-vnc-passwords_assembly_connecting-to-virtual-machines"><div class="titlepage"><div><div><h3 class="title">5.6. Configuring VNC passwords</h3></div></div></div><p>
				To manage access to the graphical output of a virtual machine (VM), you can configure a password for the VNC console of the VM.
			</p><p>
				With a VNC password configured on a VM, users of the VMs must enter the password when attempting to view or interact with the VNC graphical console of the VMs, for example by using the <code class="literal">virt-viewer</code> utility.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					VNC passwords are not a sufficient measure for ensuring the security of a VM environment. For details, see <a class="link" href="https://qemu-project.gitlab.io/qemu/system/vnc-security.html#with-passwords">QEMU documentation on VNC security</a>.
				</p><p>
					In addition, the VNC password is saved in plain text in the configuration of the VM, so for the password to be effective, the user must not be able to display the VM configuration.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The VM that you want to protect with a VNC password has VNC graphics configured.
					</p><p class="simpara">
						To ensure that this is the case, use the <code class="literal">virsh dumpxml</code> command as follows:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh dumpxml <span class="emphasis"><em>&lt;vm-name&gt;</em></span> | grep graphics</strong></span>

 &lt;graphics type='vnc' ports='-1' autoport=<code class="literal">yes</code> listen=<code class="literal">127.0.0.1</code>&gt;
 &lt;/graphics&gt;</pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open the configuration of the VM that you want to assign a VNC password to.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh edit <span class="emphasis"><em>&lt;vm-name&gt;</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						On the <code class="literal">&lt;graphics&gt;</code> line of the configuration, add the <code class="literal">passwd</code> attribute and the password string. The password must be 8 characters or fewer.
					</p><pre class="screen"> &lt;graphics type='vnc' ports='-1' autoport=<code class="literal">yes</code> listen=<code class="literal">127.0.0.1</code> <span class="strong strong"><strong>passwd='<span class="emphasis"><em>&lt;password&gt;</em></span></strong></span>'&gt;</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Optional: In addition, define a date and time when the password will expire.
							</p><pre class="screen"> &lt;graphics type='vnc' ports='-1' autoport=<code class="literal">yes</code> listen=<code class="literal">127.0.0.1</code> passwd='<span class="emphasis"><em>&lt;password&gt;</em></span>' <span class="strong strong"><strong>passwdValidTo='2025-02-01T15:30:00'</strong></span>&gt;</pre><p class="simpara">
								In this example, the password will expire on February 1st 2025, at 15:30 UTC.
							</p></li></ul></div></li><li class="listitem">
						Save the configuration.
					</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Start the modified VM.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh start <span class="emphasis"><em>&lt;vm-name&gt;</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Open a graphical console of the VM, for example by using the <code class="literal">virt-viewer</code> utility:
					</p><pre class="screen"># <span class="strong strong"><strong>virt-viewer <span class="emphasis"><em>&lt;vm-name&gt;</em></span></strong></span></pre><p class="simpara">
						If the VNC password has been configured properly, a dialogue window appears that requests you to enter the password.
					</p></li></ol></div></section></section><section class="chapter" id="assembly_shutting-down-virtual-machines_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h2 class="title">Chapter 6. Shutting down virtual machines</h2></div></div></div><p>
			To shut down a running virtual machine hosted on RHEL 9, use <a class="link" href="#shutting-down-a-virtual-machine-using-the-command-line-interface_assembly_shutting-down-virtual-machines" title="6.1. Shutting down a virtual machine by using the command-line interface">the command line interface</a> or <a class="link" href="#powering-down-and-restarting-vms-using-the-rhel-web-console_assembly_shutting-down-virtual-machines" title="6.2. Shutting down and restarting virtual machines by using the web console">the web console GUI</a>.
		</p><section class="section" id="shutting-down-a-virtual-machine-using-the-command-line-interface_assembly_shutting-down-virtual-machines"><div class="titlepage"><div><div><h3 class="title">6.1. Shutting down a virtual machine by using the command-line interface</h3></div></div></div><p>
				Shutting down a virtual machine (VM) requires different steps based on whether the VM is reponsive.
			</p><div class="itemizedlist"><p class="title"><strong>Shutting down a responsive VM</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						If you are <a class="link" href="#assembly_connecting-to-virtual-machines_configuring-and-managing-virtualization" title="Chapter 5. Connecting to virtual machines">connected to the guest</a>, use a shutdown command or a GUI element appropriate to the guest operating system.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							In some environments, such as in Linux guests that use the GNOME Desktop, using the GUI power button for suspending or hibernating the guest might instead shut down the VM.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Alternatively, use the <code class="literal">virsh shutdown</code> command on the host:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								If the VM is on a local host:
							</p><pre class="screen"># <span class="strong strong"><strong>virsh shutdown <span class="emphasis"><em>demo-guest1</em></span></strong></span>
Domain 'demo-guest1' is being shutdown</pre></li><li class="listitem"><p class="simpara">
								If the VM is on a remote host, in this example <span class="emphasis"><em>192.0.2.1</em></span>:
							</p><pre class="screen"># <span class="strong strong"><strong>virsh -c qemu+ssh://root@192.0.2.1/system shutdown <span class="emphasis"><em>demo-guest1</em></span></strong></span>

root@192.0.2.1's password:
Domain 'demo-guest1' is being shutdown</pre></li></ul></div></li></ul></div><div class="formalpara"><p class="title"><strong>Shutting down an unresponsive VM</strong></p><p>
					To force a VM to shut down, for example if it has become unresponsive, use the <code class="literal">virsh destroy</code> command on the host:
				</p></div><pre class="screen"># <span class="strong strong"><strong>virsh destroy <span class="emphasis"><em>demo-guest1</em></span></strong></span>
Domain 'demo-guest1' destroyed</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The <code class="literal">virsh destroy</code> command does not actually delete or remove the VM configuration or disk images. It only terminates the running instance of the VM, similarly to pulling the power cord from a physical machine.
				</p><p>
					In rare cases, <code class="literal">virsh destroy</code> may cause corruption of the VM’s file system, so using this command is only recommended if all other shutdown methods have failed.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						On the host, display the list of your VMs to see their status.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh list --all</strong></span>

 Id    Name                 State
------------------------------------------
 1     demo-guest1          <span class="strong strong"><strong>shut off</strong></span></pre></li></ul></div></section><section class="section" id="powering-down-and-restarting-vms-using-the-rhel-web-console_assembly_shutting-down-virtual-machines"><div class="titlepage"><div><div><h3 class="title">6.2. Shutting down and restarting virtual machines by using the web console</h3></div></div></div><p>
				Using the RHEL 9 web console, you can <a class="link" href="#powering-down-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console" title="6.2.1. Shutting down virtual machines in the web console">shut down</a> or <a class="link" href="#restarting-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console" title="6.2.2. Restarting virtual machines by using the web console">restart</a> running virtual machines. You can also send a non-maskable interrupt to an unresponsive virtual machine.
			</p><section class="section" id="powering-down-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console"><div class="titlepage"><div><div><h4 class="title">6.2.1. Shutting down virtual machines in the web console</h4></div></div></div><p>
					If a virtual machine (VM) is in the <span class="strong strong"><strong>running</strong></span> state, you can shut it down by using the RHEL 9 web console.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the <span class="guimenu">Virtual Machines</span> interface, find the row of the VM you want to shut down.
						</li><li class="listitem"><p class="simpara">
							On the right side of the row, click <span class="guibutton">Shut Down</span>.
						</p><p class="simpara">
							The VM shuts down.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							If the VM does not shut down, click the Menu button <span class="guibutton">⋮</span> next to the <span class="guibutton">Shut Down</span> button and select <span class="guimenu">Force Shut Down</span>.
						</li><li class="listitem">
							To shut down an unresponsive VM, you can also <a class="link" href="#sending-NMIs-to-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console" title="6.2.3. Sending non-maskable interrupts to VMs by using the web console">send a non-maskable interrupt</a>.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#powering-up-vms-using-the-rhel-web-console_assembly_starting-virtual-machines" title="4.2. Starting virtual machines by using the web console">Starting virtual machines by using the web console</a>
						</li><li class="listitem">
							<a class="link" href="#restarting-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console" title="6.2.2. Restarting virtual machines by using the web console">Restarting virtual machines by using the web console</a>
						</li></ul></div></section><section class="section" id="restarting-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console"><div class="titlepage"><div><div><h4 class="title">6.2.2. Restarting virtual machines by using the web console</h4></div></div></div><p>
					If a virtual machine (VM) is in the <span class="strong strong"><strong>running</strong></span> state, you can restart it by using the RHEL 9 web console.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the <span class="guimenu">Virtual Machines</span> interface, find the row of the VM you want to restart.
						</li><li class="listitem"><p class="simpara">
							On the right side of the row, click the Menu button <span class="guibutton">⋮</span>.
						</p><p class="simpara">
							A drop-down menu of actions appears.
						</p></li><li class="listitem"><p class="simpara">
							In the drop-down menu, click <span class="guibutton">Reboot</span>.
						</p><p class="simpara">
							The VM shuts down and restarts.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							If the VM does not restart, click the Menu button <span class="guibutton">⋮</span> next to the <span class="guibutton">Reboot</span> button and select <span class="guibutton">Force Reboot</span>.
						</li><li class="listitem">
							To shut down an unresponsive VM, you can also <a class="link" href="#sending-NMIs-to-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console" title="6.2.3. Sending non-maskable interrupts to VMs by using the web console">send a non-maskable interrupt</a>.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#powering-up-vms-using-the-rhel-web-console_assembly_starting-virtual-machines" title="4.2. Starting virtual machines by using the web console">Starting virtual machines by using the web console</a>
						</li><li class="listitem">
							<a class="link" href="#powering-down-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console" title="6.2.1. Shutting down virtual machines in the web console">Shutting down virtual machines in the web console</a>
						</li></ul></div></section><section class="section" id="sending-NMIs-to-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console"><div class="titlepage"><div><div><h4 class="title">6.2.3. Sending non-maskable interrupts to VMs by using the web console</h4></div></div></div><p>
					Sending a non-maskable interrupt (NMI) may cause an unresponsive running virtual machine (VM) to respond or shut down. For example, you can send the <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">Alt</kbd>+<kbd class="keycap">Del</kbd> NMI to a VM that is not responding to standard input.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem">
							In the <span class="guimenu">Virtual Machines</span> interface, find the row of the VM to which you want to send an NMI.
						</li><li class="listitem"><p class="simpara">
							On the right side of the row, click the Menu button <span class="guibutton">⋮</span>.
						</p><p class="simpara">
							A drop-down menu of actions appears.
						</p></li><li class="listitem"><p class="simpara">
							In the drop-down menu, click <span class="guimenu">Send non-maskable interrupt</span>.
						</p><p class="simpara">
							An NMI is sent to the VM.
						</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#powering-up-vms-using-the-rhel-web-console_assembly_starting-virtual-machines" title="4.2. Starting virtual machines by using the web console">Starting virtual machines by using the web console</a>
						</li><li class="listitem">
							<a class="link" href="#restarting-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console" title="6.2.2. Restarting virtual machines by using the web console">Restarting virtual machines by using the web console</a>
						</li><li class="listitem">
							<a class="link" href="#powering-down-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console" title="6.2.1. Shutting down virtual machines in the web console">Shutting down virtual machines in the web console</a>
						</li></ul></div></section></section></section><section class="chapter" id="assembly_deleting-virtual-machines_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h2 class="title">Chapter 7. Deleting virtual machines</h2></div></div></div><p>
			To delete virtual machines in RHEL 9, use the <a class="link" href="#deleting-virtual-machines-using-cli_assembly_deleting-virtual-machines" title="7.1. Deleting virtual machines by using the command-line interface">command line interface</a> or the <a class="link" href="#deleting-vms-using-the-rhel-web-console_assembly_deleting-virtual-machines" title="7.2. Deleting virtual machines by using the web console">web console GUI</a>.
		</p><section class="section" id="deleting-virtual-machines-using-cli_assembly_deleting-virtual-machines"><div class="titlepage"><div><div><h3 class="title">7.1. Deleting virtual machines by using the command-line interface</h3></div></div></div><p>
				To delete a virtual machine (VM), you can remove its XML configuration and associated storage files from the host by using the command line. Follow the procedure below:
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Back up important data from the VM.
					</li><li class="listitem">
						Shut down the VM.
					</li><li class="listitem">
						Make sure no other VMs use the same associated storage.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Use the <code class="literal">virsh undefine</code> utility.
					</p><p class="simpara">
						For example, the following command removes the <span class="emphasis"><em>guest1</em></span> VM, its associated storage volumes, and non-volatile RAM, if any.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh undefine guest1 --remove-all-storage --nvram</strong></span>
Domain 'guest1' has been undefined
Volume 'vda'(/home/images/guest1.qcow2) removed.</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">virsh undefine --help</code> command
					</li><li class="listitem">
						<code class="literal">virsh</code> man page on your system
					</li></ul></div></section><section class="section" id="deleting-vms-using-the-rhel-web-console_assembly_deleting-virtual-machines"><div class="titlepage"><div><div><h3 class="title">7.2. Deleting virtual machines by using the web console</h3></div></div></div><p>
				To delete a virtual machine (VM) and its associated storage files from the host to which the RHEL 9 web console is connected with, follow the procedure below:
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You have installed the RHEL 9 web console.
					</p><p class="simpara">
						For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
					</p></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You have installed the RHEL 9 web console.
					</p><p class="simpara">
						For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
					</p></li><li class="listitem">
						The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
					</li><li class="listitem">
						Back up important data from the VM.
					</li><li class="listitem">
						Make sure no other VM uses the same associated storage.
					</li><li class="listitem">
						Optional: Shut down the VM.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Log in to the RHEL 9 web console.
					</p><p class="simpara">
						For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
					</p></li><li class="listitem"><p class="simpara">
						In the <span class="guimenu">Virtual Machines</span> interface, click the Menu button <span class="guibutton">⋮</span> of the VM that you want to delete.
					</p><p class="simpara">
						A drop down menu appears with controls for various VM operations.
					</p></li><li class="listitem"><p class="simpara">
						Click <span class="guibutton">Delete</span>.
					</p><p class="simpara">
						A confirmation dialog appears.
					</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/52661fcf01fca509d9a65e1236362d8d/virt-cockpit-vm-delete-confirm.png" width="540" alt="Image displaying the Confirm deletion of VM dialog box."></div></div></li><li class="listitem">
						Optional: To delete all or some of the storage files associated with the VM, select the checkboxes next to the storage files you want to delete.
					</li><li class="listitem"><p class="simpara">
						Click <span class="guibutton">Delete</span>.
					</p><p class="simpara">
						The VM and any selected storage files are deleted.
					</p></li></ol></div></section></section><section class="chapter" id="managing-virtual-machines-in-the-web-console_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h2 class="title">Chapter 8. Managing virtual machines in the web console</h2></div></div></div><p class="_abstract _abstract">
			To manage virtual machines in a graphical interface on a RHEL 9 host, you can use the <code class="literal">Virtual Machines</code> pane in the RHEL 9 web console.
		</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/fddcbcaeac28425e7ec429fb5ed91787/virt-cockpit-main-page.png" alt="Image displaying the virtual machine tab of the web console."></div></div><section class="section" id="overview-of-virtual-machine-management-using-the-web-console_managing-virtual-machines-in-the-web-console"><div class="titlepage"><div><div><h3 class="title">8.1. Overview of virtual machine management by using the web console</h3></div></div></div><p class="_abstract _abstract">
				The RHEL 9 web console is a web-based interface for system administration. As one of its features, the web console provides a graphical view of virtual machines (VMs) on the host system, and makes it possible to create, access, and configure these VMs.
			</p><p>
				Note that to use the web console to manage your VMs on RHEL 9, you must first install <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">a web console plug-in</a> for virtualization.
			</p><div class="itemizedlist"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						For instructions on enabling VMs management in your web console, see <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">Setting up the web console to manage virtual machines</a>.
					</li><li class="listitem">
						For a comprehensive list of VM management actions that the web console provides, see <a class="link" href="#virtual-machine-management-features-available-in-the-web-console_managing-virtual-machines-in-the-web-console" title="8.4. Virtual machine management features available in the web console">Virtual machine management features available in the web console</a>.
					</li></ul></div></section><section class="section" id="setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console"><div class="titlepage"><div><div><h3 class="title">8.2. Setting up the web console to manage virtual machines</h3></div></div></div><p class="_abstract _abstract">
				Before using the RHEL 9 web console to manage virtual machines (VMs), you must install the web console virtual machine plug-in on the host.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You have installed the RHEL 9 web console.
					</p><p class="simpara">
						For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
					</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Install the <code class="literal package">cockpit-machines</code> plug-in.
					</p><pre class="screen"># <span class="strong strong"><strong>dnf install cockpit-machines</strong></span></pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Log in to the RHEL 9 web console.
					</p><p class="simpara">
						For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
					</p></li><li class="listitem"><p class="simpara">
						If the installation was successful, <span class="guimenu">Virtual Machines</span> appears in the web console side menu.
					</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/fddcbcaeac28425e7ec429fb5ed91787/virt-cockpit-main-page.png" alt="Image displaying the virtual machine tab of the web console."></div></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/index">Managing systems by using the RHEL 9 web console</a>
					</li></ul></div></section><section class="section" id="proc_renaming-virtual-machines-using-the-web-console_managing-virtual-machines-in-the-web-console"><div class="titlepage"><div><div><h3 class="title">8.3. Renaming virtual machines by using the web console</h3></div></div></div><p>
				You might require renaming an existing virtual machine (VM) to avoid naming conflicts or assign a new unique name based on your use case. To rename the VM, you can use the RHEL web console.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You have installed the RHEL 9 web console.
					</p><p class="simpara">
						For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
					</p></li><li class="listitem">
						The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
					</li><li class="listitem">
						The VM is shut down.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						In the <span class="guimenu">Virtual Machines</span> interface, click the Menu button <span class="guibutton">⋮</span> of the VM that you want to rename.
					</p><p class="simpara">
						A drop-down menu appears with controls for various VM operations.
					</p></li><li class="listitem"><p class="simpara">
						Click <span class="guibutton">Rename</span>.
					</p><p class="simpara">
						The <span class="strong strong"><strong>Rename a VM</strong></span> dialog appears.
					</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/771f1470b3a2af2374ec2d96ccbed15a/virt-cockpit-vm-rename-confirm.png" width="540" alt="Image displaying the rename a VM dialog box."></div></div></li><li class="listitem">
						In the <span class="strong strong"><strong>New name</strong></span> field, enter a name for the VM.
					</li><li class="listitem">
						Click <span class="guibutton">Rename</span>.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Check that the new VM name has appeared in the <span class="guimenu">Virtual Machines</span> interface.
					</li></ul></div></section><section class="section" id="virtual-machine-management-features-available-in-the-web-console_managing-virtual-machines-in-the-web-console"><div class="titlepage"><div><div><h3 class="title">8.4. Virtual machine management features available in the web console</h3></div></div></div><p class="_abstract _abstract">
				By using the RHEL 9 web console, you can perform the following actions to manage the virtual machines (VMs) on your system.
			</p><rh-table id="idm140237796408064"><table class="lt-4-cols lt-7-rows"><caption>Table 8.1. VM management tasks that you can perform in the RHEL 9 web console</caption><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140237791126352" scope="col">Task</th><th align="left" valign="top" id="idm140237791125264" scope="col">For details, see</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140237791126352"> <p>
								Create a VM and install it with a guest operating system
							</p>
							 </td><td align="left" valign="top" headers="idm140237791125264"> <p>
								<a class="link" href="#creating-vms-and-installing-an-os-using-the-rhel-web-console_assembly_creating-virtual-machines" title="3.2. Creating virtual machines and installing guest operating systems by using the web console">Creating virtual machines and installing guest operating systems by using the web console</a>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237791126352"> <p>
								Delete a VM
							</p>
							 </td><td align="left" valign="top" headers="idm140237791125264"> <p>
								<a class="link" href="#deleting-vms-using-the-rhel-web-console_assembly_deleting-virtual-machines" title="7.2. Deleting virtual machines by using the web console">Deleting virtual machines by using the web console</a>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237791126352"> <p>
								Start, shut down, and restart the VM
							</p>
							 </td><td align="left" valign="top" headers="idm140237791125264"> <p>
								<a class="link" href="#powering-up-vms-using-the-rhel-web-console_assembly_starting-virtual-machines" title="4.2. Starting virtual machines by using the web console">Starting virtual machines by using the web console</a> and <a class="link" href="#powering-down-and-restarting-vms-using-the-rhel-web-console_assembly_shutting-down-virtual-machines" title="6.2. Shutting down and restarting virtual machines by using the web console">Shutting down and restarting virtual machines by using the web console</a>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237791126352"> <p>
								Connect to and interact with a VM using a variety of consoles
							</p>
							 </td><td align="left" valign="top" headers="idm140237791125264"> <p>
								<a class="link" href="#viewing-vm-consoles-using-the-rhel-web-console_assembly_connecting-to-virtual-machines" title="5.1. Interacting with virtual machines by using the web console">Interacting with virtual machines by using the web console</a>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237791126352"> <p>
								View a variety of information about the VM
							</p>
							 </td><td align="left" valign="top" headers="idm140237791125264"> <p>
								<a class="link" href="#viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines" title="9.2. Viewing virtual machine information by using the web console">Viewing virtual machine information by using the web console</a>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237791126352"> <p>
								Adjust the host memory allocated to a VM
							</p>
							 </td><td align="left" valign="top" headers="idm140237791125264"> <p>
								<a class="link" href="#adding-and-removing-virtual-machine-ram-using-the-web-console_configuring-virtual-machine-ram" title="18.4.1. Adding and removing virtual machine memory by using the web console">Adding and removing virtual machine memory by using the web console</a>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237791126352"> <p>
								Manage network connections for the VM
							</p>
							 </td><td align="left" valign="top" headers="idm140237791125264"> <p>
								<a class="link" href="#managing-virtual-machine-network-interfaces-using-the-web-console_configuring-virtual-machine-network-connections" title="17.2. Using the web console for managing virtual machine network interfaces">Using the web console for managing virtual machine network interfaces</a>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237791126352"> <p>
								Manage the VM storage available on the host and attach virtual disks to the VM
							</p>
							 </td><td align="left" valign="top" headers="idm140237791125264"> <p>
								<a class="link" href="#managing-storage-for-virtual-machines_configuring-and-managing-virtualization" title="Chapter 15. Managing storage for virtual machines">Managing storage for virtual machines by using the web console</a>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237791126352"> <p>
								Configure the virtual CPU settings of the VM
							</p>
							 </td><td align="left" valign="top" headers="idm140237791125264"> <p>
								<a class="link" href="#managing-virtual-cpus-using-the-web-console_optimizing-virtual-machine-cpu-performance" title="18.6.2. Managing virtual CPUs by using the web console">Managing virtal CPUs by using the web console</a>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237791126352"> <p>
								Live migrate a VM
							</p>
							 </td><td align="left" valign="top" headers="idm140237791125264"> <p>
								<a class="link" href="#proc_live-migrating-a-virtual-machine-using-the-web-console_migrating-virtual-machines" title="12.7. Live migrating a virtual machine by using the web console">Live migrating a virtual machine by using the web console</a>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237791126352"> <p>
								Manage host devices
							</p>
							 </td><td align="left" valign="top" headers="idm140237791125264"> <p>
								<a class="link" href="#assembly_managing-virtual-devices-using-the-web-console_managing-virtual-devices" title="14.4. Managing host devices by using the web console">Managing host devices by using the web console</a>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237791126352"> <p>
								Manage virtual optical drives
							</p>
							 </td><td align="left" valign="top" headers="idm140237791125264"> <p>
								<a class="link" href="#managing-virtual-optical-drives_managing-virtual-devices" title="14.6. Managing virtual optical drives">Managing virtual optical drives</a>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237791126352"> <p>
								Attach watchdog device
							</p>
							 </td><td align="left" valign="top" headers="idm140237791125264"> <p>
								<a class="link" href="#Attaching-a-watchdog-device-to-a-virtual-machine-using-the-web-console_managing-virtual-devices" title="14.9. Attaching a watchdog device to a virtual machine by using the web console">Attaching a watchdog device to a virtual machine by using the web console</a>
							</p>
							 </td></tr></tbody></table></rh-table></section></section><section class="chapter" id="viewing-information-about-virtual-machines_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h2 class="title">Chapter 9. Viewing information about virtual machines</h2></div></div></div><p>
			When you need to adjust or troubleshoot any aspect of your virtualization deployment on RHEL 9, the first step you need to perform usually is to view information about the current state and configuration of your virtual machines (VMs). To do so, you can use <a class="link" href="#viewing-virtual-machine-information-using-the-command-line-interface_viewing-information-about-virtual-machines" title="9.1. Viewing virtual machine information by using the command-line interface">the command-line interface</a> or <a class="link" href="#viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines" title="9.2. Viewing virtual machine information by using the web console">the web console</a>. You can also view the information in the VM’s <a class="link" href="#sample-virtual-machine-xml-configuration_viewing-information-about-virtual-machines" title="9.3. Sample virtual machine XML configuration">XML configuration</a>.
		</p><section class="section" id="viewing-virtual-machine-information-using-the-command-line-interface_viewing-information-about-virtual-machines"><div class="titlepage"><div><div><h3 class="title">9.1. Viewing virtual machine information by using the command-line interface</h3></div></div></div><p>
				To retrieve information about virtual machines (VMs) on your host and their configurations, use one or more of the following commands.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To obtain a list of VMs on your host:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh list --all</strong></span>
Id   Name              State
----------------------------------
1    testguest1             running
-    testguest2             shut off
-    testguest3             shut off
-    testguest4             shut off</pre></li><li class="listitem"><p class="simpara">
						To obtain basic information about a specific VM:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh dominfo <span class="emphasis"><em>testguest1</em></span></strong></span>
Id:             1
Name:           testguest1
UUID:           a973666f-2f6e-415a-8949-75a7a98569e1
OS Type:        hvm
State:          running
CPU(s):         2
CPU time:       188.3s
Max memory:     4194304 KiB
Used memory:    4194304 KiB
Persistent:     yes
Autostart:      disable
Managed save:   no
Security model: selinux
Security DOI:   0
Security label: system_u:system_r:svirt_t:s0:c486,c538 (enforcing)</pre></li><li class="listitem"><p class="simpara">
						To obtain the complete XML configuration of a specific VM:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh dumpxml <span class="emphasis"><em>testguest2</em></span></strong></span>

&lt;domain type='kvm' id='1'&gt;
  &lt;name&gt;testguest2&lt;/name&gt;
  &lt;uuid&gt;a973434f-2f6e-4ěša-8949-76a7a98569e1&lt;/uuid&gt;
  &lt;metadata&gt;
[...]</pre><p class="simpara">
						For an annotated example of a VM’s XML configuration, see <a class="link" href="#sample-virtual-machine-xml-configuration_viewing-information-about-virtual-machines" title="9.3. Sample virtual machine XML configuration">Sample virtual machine XML configuration</a>
					</p></li><li class="listitem"><p class="simpara">
						For information about a VM’s disks and other block devices:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh domblklist <span class="emphasis"><em>testguest3</em></span></strong></span>
 Target   Source
---------------------------------------------------------------
 vda      /var/lib/libvirt/images/testguest3.qcow2
 sda      -
 sdb      /home/username/Downloads/virt-p2v-1.36.10-1.el7.iso</pre><p class="simpara">
						For instructions on managing a VM’s storage, see <a class="link" href="#managing-storage-for-virtual-machines_configuring-and-managing-virtualization" title="Chapter 15. Managing storage for virtual machines">Managing storage for virtual machines</a>.
					</p></li><li class="listitem"><p class="simpara">
						To obtain information about a VM’s file systems and their mountpoints:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh domfsinfo testguest3</strong></span>
Mountpoint   Name   Type   Target
------------------------------------
 /            dm-0   xfs
 /boot        vda1   xfs</pre></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To obtain more details about the vCPUs of a specific VM:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh vcpuinfo <span class="emphasis"><em>testguest4</em></span></strong></span>
VCPU:           0
CPU:            3
State:          running
CPU time:       103.1s
CPU Affinity:   yyyy

VCPU:           1
CPU:            0
State:          running
CPU time:       88.6s
CPU Affinity:   yyyy</pre><p class="simpara">
						To configure and optimize the vCPUs in your VM, see <a class="link" href="#optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel" title="18.6. Optimizing virtual machine CPU performance">Optimizing virtual machine CPU performance</a>.
					</p></li><li class="listitem"><p class="simpara">
						To list all virtual network interfaces on your host:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh net-list --all</strong></span>
 Name       State    Autostart   Persistent
---------------------------------------------
 default    active   yes         yes
 labnet     active   yes         yes</pre><p class="simpara">
						For information about a specific interface:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh net-info default</strong></span>
Name:           default
UUID:           c699f9f6-9202-4ca8-91d0-6b8cb9024116
Active:         yes
Persistent:     yes
Autostart:      yes
Bridge:         virbr0</pre><p class="simpara">
						For details about network interfaces, VM networks, and instructions for configuring them, see <a class="link" href="#configuring-virtual-machine-network-connections_configuring-and-managing-virtualization" title="Chapter 17. Configuring virtual machine network connections">Configuring virtual machine network connections</a>.
					</p></li><li class="listitem">
						For instructions on viewing information about storage pools and storage volumes on your host, see <a class="link" href="#viewing-storage-pool-information-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" title="15.2.1. Viewing storage pool information by using the CLI">Viewing virtual machine storage information by using the CLI</a>.
					</li></ul></div></section><section class="section" id="viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines"><div class="titlepage"><div><div><h3 class="title">9.2. Viewing virtual machine information by using the web console</h3></div></div></div><p>
				By using the RHEL 9 web console, you can view information about all <a class="link" href="#viewing-vm-state-and-connection-information-in-the-rhel-web-console_viewing-vm-information-using-the-rhel-web-console" title="9.2.1. Viewing a virtualization overview in the web console">VMs</a> and <a class="link" href="#viewing-storage-pool-information-using-the-web-console_viewing-vm-information-using-the-rhel-web-console" title="9.2.2. Viewing storage pool information by using the web console">storage pools</a> the web console session can access.
			</p><p>
				You can view <a class="link" href="#viewing-basic-vm-information-in-the-rhel-web-console_viewing-vm-information-using-the-rhel-web-console" title="9.2.3. Viewing basic virtual machine information in the web console">information about a selected VM</a> to which the web console session is connected. This includes information about its <a class="link" href="#viewing-vm-disk-information-in-the-web-console_viewing-vm-information-using-the-rhel-web-console" title="9.2.5. Viewing virtual machine disk information in the web console">disks</a>, <a class="link" href="#viewing-and-editing-virtual-network-interface-information-in-the-web-console_viewing-vm-information-using-the-rhel-web-console" title="9.2.6. Viewing and editing virtual network interface information in the web console">virtual network interface</a> and <a class="link" href="#viewing-vm-resource-usage-in-the-rhel-web-console_viewing-vm-information-using-the-rhel-web-console" title="9.2.4. Viewing virtual machine resource usage in the web console">resource usage</a>.
			</p><section class="section" id="viewing-vm-state-and-connection-information-in-the-rhel-web-console_viewing-vm-information-using-the-rhel-web-console"><div class="titlepage"><div><div><h4 class="title">9.2.1. Viewing a virtualization overview in the web console</h4></div></div></div><p class="_abstract _abstract">
					By using the web console, you can access a virtualization overview that contains summarized information about available virtual machines (VMs), storage pools, and networks.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Click <span class="guimenu">Virtual Machines</span> in the web console’s side menu.
						</p><p class="simpara">
							A dialog box appears with information about the available storage pools, available networks, and the VMs to which the web console is connected.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/fddcbcaeac28425e7ec429fb5ed91787/virt-cockpit-main-page.png" alt="Image displaying the virtual machine tab of the web console."></div></div></li></ul></div><p>
					The information includes the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Storage Pools</strong></span> - The number of storage pools, active or inactive, that can be accessed by the web console and their state.
						</li><li class="listitem">
							<span class="strong strong"><strong>Networks</strong></span> - The number of networks, active or inactive, that can be accessed by the web console and their state.
						</li><li class="listitem">
							<span class="strong strong"><strong>Name</strong></span> - The name of the VM.
						</li><li class="listitem">
							<span class="strong strong"><strong>Connection</strong></span> - The type of libvirt connection, system or session.
						</li><li class="listitem">
							<span class="strong strong"><strong>State</strong></span> - The state of the VM.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines" title="9.2. Viewing virtual machine information by using the web console">Viewing virtual machine information by using the web console</a>
						</li></ul></div></section><section class="section" id="viewing-storage-pool-information-using-the-web-console_viewing-vm-information-using-the-rhel-web-console"><div class="titlepage"><div><div><h4 class="title">9.2.2. Viewing storage pool information by using the web console</h4></div></div></div><p class="_abstract _abstract">
					By using the web console, you can view detailed information about storage pools available on your system. Storage pools can be used to create disk images for your virtual machines.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Storage Pools</span> at the top of the <span class="guimenu">Virtual Machines</span> interface.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Storage pools</strong></span> window appears, showing a list of configured storage pools.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/81a16ce22f8b1319335bf47350b7fb5b/web-console-storage-pools-window.png" alt="Image displaying the storage pool tab of the web console with information about existing storage pools."></div></div><p class="simpara">
							The information includes the following:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Name</strong></span> - The name of the storage pool.
								</li><li class="listitem">
									<span class="strong strong"><strong>Size</strong></span> - The current allocation and the total capacity of the storage pool.
								</li><li class="listitem">
									<span class="strong strong"><strong>Connection</strong></span> - The connection used to access the storage pool.
								</li><li class="listitem">
									<span class="strong strong"><strong>State</strong></span> - The state of the storage pool.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Click the arrow next to the storage pool whose information you want to see.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with detailed information about the selected storage pool.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/fd11c96612cbc09c36ff7715bb87bfa5/virt-cockpit-storage-pool-overview.png" alt="Image displaying the detailed information about the selected storage pool."></div></div><p class="simpara">
							The information includes:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Target path</strong></span> - The location of the storage pool.
								</li><li class="listitem">
									<span class="strong strong"><strong>Persistent</strong></span> - Indicates whether or not the storage pool has a persistent configuration.
								</li><li class="listitem">
									<span class="strong strong"><strong>Autostart</strong></span> - Indicates whether or not the storage pool starts automatically when the system boots up.
								</li><li class="listitem">
									<span class="strong strong"><strong>Type</strong></span> - The type of the storage pool.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							To view a list of storage volumes associated with the storage pool, click <span class="guibutton">Storage Volumes</span>.
						</p><p class="simpara">
							The Storage Volumes pane appears, showing a list of configured storage volumes.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/9a9f9fd71a75aa9359b57a30c1b78444/web-console-storage-pool-storage-volumes.png" alt="Image displaying the list of storage volumes associated with the selected storage pool."></div></div><p class="simpara">
							The information includes:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Name</strong></span> - The name of the storage volume.
								</li><li class="listitem">
									<span class="strong strong"><strong>Used by</strong></span> - The VM that is currently using the storage volume.
								</li><li class="listitem">
									<span class="strong strong"><strong>Size</strong></span> - The size of the volume.
								</li></ul></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines" title="9.2. Viewing virtual machine information by using the web console">Viewing virtual machine information by using the web console</a>
						</li></ul></div></section><section class="section" id="viewing-basic-vm-information-in-the-rhel-web-console_viewing-vm-information-using-the-rhel-web-console"><div class="titlepage"><div><div><h4 class="title">9.2.3. Viewing basic virtual machine information in the web console</h4></div></div></div><p class="_abstract _abstract">
					By using the web console, you can view basic information, such as assigned resources or hypervisor details, about a selected virtual machine (VM).
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem">
							Click <span class="guimenu">Virtual Machines</span> in the web console side menu.
						</li><li class="listitem"><p class="simpara">
							Click the VM whose information you want to see.
						</p><p class="simpara">
							A new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.
						</p><p class="simpara">
							The Overview section includes the following general VM details:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>State</strong></span> - The VM state, Running or Shut off.
								</li><li class="listitem">
									<span class="strong strong"><strong>Memory</strong></span> - The amount of memory assigned to the VM.
								</li><li class="listitem">
									<span class="strong strong"><strong>CPU</strong></span> - The number and type of virtual CPUs configured for the VM.
								</li><li class="listitem">
									<span class="strong strong"><strong>Boot Order</strong></span> - The boot order configured for the VM.
								</li><li class="listitem">
									<span class="strong strong"><strong>Autostart</strong></span> - Whether or not autostart is enabled for the VM.
								</li></ul></div><p class="simpara">
							The information also includes the following hypervisor details:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Emulated Machine</strong></span> - The machine type emulated by the VM.
								</li><li class="listitem">
									<span class="strong strong"><strong>Firmware</strong></span> - The firmware of the VM.
								</li></ul></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines" title="9.2. Viewing virtual machine information by using the web console">Viewing virtual machine information by using the web console</a>
						</li><li class="listitem">
							<a class="link" href="#managing-virtual-cpus-using-the-web-console_optimizing-virtual-machine-cpu-performance" title="18.6.2. Managing virtual CPUs by using the web console">Managing virtual CPUs by using the web console</a>
						</li></ul></div></section><section class="section" id="viewing-vm-resource-usage-in-the-rhel-web-console_viewing-vm-information-using-the-rhel-web-console"><div class="titlepage"><div><div><h4 class="title">9.2.4. Viewing virtual machine resource usage in the web console</h4></div></div></div><p class="_abstract _abstract">
					By using the web console, you can view memory and virtual CPU usage of a selected virtual machine (VM).
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click the VM whose information you want to see.
						</p><p class="simpara">
							A new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.
						</p></li><li class="listitem"><p class="simpara">
							Scroll to <span class="guimenu">Usage</span>.
						</p><p class="simpara">
							The Usage section displays information about the memory and virtual CPU usage of the VM.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/3e6ab23d521fdc4887d2aeb5da789efc/virt-cockpit-resource-usage.png" width="540" alt="Image displaying the memory and CPU usage of the selected VM."></div></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines" title="9.2. Viewing virtual machine information by using the web console">Viewing virtual machine information by using the web console</a>
						</li></ul></div></section><section class="section" id="viewing-vm-disk-information-in-the-web-console_viewing-vm-information-using-the-rhel-web-console"><div class="titlepage"><div><div><h4 class="title">9.2.5. Viewing virtual machine disk information in the web console</h4></div></div></div><p>
					<span id="viewing-vm-disk-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-web-console"><!--Empty--></span>
				</p><p class="_abstract _abstract">
					By using the web console, you can view detailed information about disks assigned to a selected virtual machine (VM).
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							Click the VM whose information you want to see.
						</p><p class="simpara">
							A new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.
						</p></li><li class="listitem"><p class="simpara">
							Scroll to <span class="guimenu">Disks</span>.
						</p><p class="simpara">
							The Disks section displays information about the disks assigned to the VM, as well as options to <span class="strong strong"><strong>Add</strong></span> or <span class="strong strong"><strong>Edit</strong></span> disks.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/8e50855fbd710e15578ed4f41f814c8b/virt-cockpit-disk-info.png" alt="Image displaying the disk usage of the selected VM."></div></div></li></ol></div><p>
					The information includes the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Device</strong></span> - The device type of the disk.
						</li><li class="listitem">
							<span class="strong strong"><strong>Used</strong></span> - The amount of disk currently allocated.
						</li><li class="listitem">
							<span class="strong strong"><strong>Capacity</strong></span> - The maximum size of the storage volume.
						</li><li class="listitem">
							<span class="strong strong"><strong>Bus</strong></span> - The type of disk device that is emulated.
						</li><li class="listitem">
							<span class="strong strong"><strong>Access</strong></span> - Whether the disk is <span class="strong strong"><strong>Writeable</strong></span> or <span class="strong strong"><strong>Read-only</strong></span>. For <code class="literal">raw</code> disks, you can also set the access to <span class="strong strong"><strong>Writeable and shared</strong></span>.
						</li><li class="listitem">
							<span class="strong strong"><strong>Source</strong></span> - The disk device or file.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines" title="9.2. Viewing virtual machine information by using the web console">Viewing virtual machine information by using the web console</a>
						</li></ul></div></section><section class="section" id="viewing-and-editing-virtual-network-interface-information-in-the-web-console_viewing-vm-information-using-the-rhel-web-console"><div class="titlepage"><div><div><h4 class="title">9.2.6. Viewing and editing virtual network interface information in the web console</h4></div></div></div><p>
					By using the RHEL 9 web console, you can view and modify the virtual network interfaces on a selected virtual machine (VM):
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click the VM whose information you want to see.
						</p><p class="simpara">
							A new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.
						</p></li><li class="listitem"><p class="simpara">
							Scroll to <span class="guimenu">Network Interfaces</span>.
						</p><p class="simpara">
							The Networks Interfaces section displays information about the virtual network interface configured for the VM as well as options to <span class="strong strong"><strong>Add</strong></span>, <span class="strong strong"><strong>Delete</strong></span>, <span class="strong strong"><strong>Edit</strong></span>, or <span class="strong strong"><strong>Unplug</strong></span> network interfaces.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/5eb5352076ad0f52c6ae9d11e6af3844/virt-cockpit-vNIC-info.png" alt="Image displaying the network interface details of the selected virtual machine."></div></div><p class="simpara">
							The information includes the following:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Type</strong></span> - The type of network interface for the VM. The types include virtual network, bridge to LAN, and direct attachment.
								</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
										Generic Ethernet connection is not supported in RHEL 9 and later.
									</p></div></rh-alert></li><li class="listitem">
									<span class="strong strong"><strong>Model type</strong></span> - The model of the virtual network interface.
								</li><li class="listitem">
									<span class="strong strong"><strong>MAC Address</strong></span> - The MAC address of the virtual network interface.
								</li><li class="listitem">
									<span class="strong strong"><strong>IP Address</strong></span> - The IP address of the virtual network interface.
								</li><li class="listitem">
									<span class="strong strong"><strong>Source</strong></span> - The source of the network interface. This is dependent on the network type.
								</li><li class="listitem">
									<span class="strong strong"><strong>State</strong></span> - The state of the virtual network interface.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							To edit the virtual network interface settings, Click <span class="guibutton">Edit</span>. The Virtual Network Interface Settings dialog opens.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/9783ff22db053b2d7939f2dd555695f1/virt-cockpit-edit-network-if.png" width="540" alt="Image displaying the various options that can be edited for the selected network interface."></div></div></li><li class="listitem">
							Change the interface type, source, model, or MAC address.
						</li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Save</span>. The network interface is modified.
						</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								Changes to the virtual network interface settings take effect only after restarting the VM.
							</p><p>
								Additionally, MAC address can only be modified when the VM is shut off.
							</p></div></rh-alert></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines" title="9.2. Viewing virtual machine information by using the web console">Viewing virtual machine information by using the web console</a>
						</li></ul></div></section></section><section class="section" id="sample-virtual-machine-xml-configuration_viewing-information-about-virtual-machines"><div class="titlepage"><div><div><h3 class="title">9.3. Sample virtual machine XML configuration</h3></div></div></div><p>
				The XML configuration of a VM, also referred to as a <span class="emphasis"><em>domain XML</em></span>, determines the VM’s settings and components. The following table shows sections of a sample XML configuration of a virtual machine (VM) and explains the contents.
			</p><p>
				To obtain the XML configuration of a VM, you can use the <code class="literal">virsh dumpxml</code> command followed by the VM’s name.
			</p><pre class="screen"># <span class="strong strong"><strong>virsh dumpxml <span class="emphasis"><em>testguest1</em></span></strong></span></pre><rh-table id="idm140237797158400"><table class="lt-4-cols lt-7-rows"><caption>Table 9.1. Sample XML configuration</caption><colgroup><col style="width: 65%; " class="col_1"><!--Empty--><col style="width: 35%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140237802418624" scope="col">Domain XML Section</th><th align="left" valign="top" id="idm140237802417536" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140237802418624">
<pre class="screen">&lt;domain type='kvm'&gt;
 &lt;name&gt;Testguest1&lt;/name&gt;
 &lt;uuid&gt;ec6fbaa1-3eb4-49da-bf61-bb02fbec4967&lt;/uuid&gt;
 &lt;memory unit='KiB'&gt;1048576&lt;/memory&gt;
 &lt;currentMemory unit='KiB'&gt;1048576&lt;/currentMemory&gt;</pre>
							 </td><td align="left" valign="top" headers="idm140237802417536"> <p>
								This is a KVM virtual machine called <span class="emphasis"><em>Testguest1</em></span>, with 1024 MiB allocated RAM.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237802418624">
<pre class="screen"> &lt;vcpu placement='static'&gt;1&lt;/vcpu&gt;</pre>
							 </td><td align="left" valign="top" headers="idm140237802417536"> <p>
								The VM is allocated with a single virtual CPU (vCPU).
							</p>
							 <p>
								For information about configuring vCPUs, see <a class="link" href="#optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel" title="18.6. Optimizing virtual machine CPU performance">Optimizing virtual machine CPU performance</a>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237802418624">
<pre class="screen"> &lt;os&gt;
  &lt;type arch='x86_64' machine='pc-q35-rhel9.0.0'&gt;hvm&lt;/type&gt;
  &lt;boot dev='hd'/&gt;
 &lt;/os&gt;</pre>
							 </td><td align="left" valign="top" headers="idm140237802417536"> <p>
								The machine architecture is set to the AMD64 and Intel 64 architecture, and uses the Intel Q35 machine type to determine feature compatibility. The OS is set to be booted from the hard disk drive.
							</p>
							 <p>
								For information about creating a VM with an installed OS, see <a class="link" href="#creating-vms-and-installing-an-os-using-the-rhel-web-console_assembly_creating-virtual-machines" title="3.2. Creating virtual machines and installing guest operating systems by using the web console">Creating virtual machines and installing guest operating systems by using the web console</a>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237802418624">
<pre class="screen"> &lt;features&gt;
  &lt;acpi/&gt;
  &lt;apic/&gt;
 &lt;/features&gt;</pre>
							 </td><td align="left" valign="top" headers="idm140237802417536"> <p>
								The <span class="strong strong"><strong>acpi</strong></span> and <span class="strong strong"><strong>apic</strong></span> hypervisor features are disabled.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237802418624">
<pre class="screen"> &lt;cpu mode='host-model' check='partial'/&gt;</pre>
							 </td><td align="left" valign="top" headers="idm140237802417536"> <p>
								The host CPU definitions from capabilities XML (obtainable with <code class="literal">virsh domcapabilities</code>) are automatically copied into the VM’s XML configuration. Therefore, when the VM is booted, <code class="literal">libvirt</code> picks a CPU model that is similar to the host CPU, and then adds extra features to approximate the host model as closely as possible.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237802418624">
<pre class="screen"> &lt;clock offset='utc'&gt;
  &lt;timer name='rtc' tickpolicy='catchup'/&gt;
  &lt;timer name='pit' tickpolicy='delay'/&gt;
  &lt;timer name='hpet' present='no'/&gt;
 &lt;/clock&gt;</pre>
							 </td><td align="left" valign="top" headers="idm140237802417536"> <p>
								The VM’s virtual hardware clock uses the UTC time zone. In addition, three different timers are set up for synchronization with the QEMU hypervisor.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237802418624">
<pre class="screen"> &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;
 &lt;on_reboot&gt;restart&lt;/on_reboot&gt;
 &lt;on_crash&gt;destroy&lt;/on_crash&gt;</pre>
							 </td><td align="left" valign="top" headers="idm140237802417536"> <p>
								When the VM powers off, or its OS terminates unexpectedly, <code class="literal">libvirt</code> terminates the VM and releases all its allocated resources. When the VM is rebooted, <code class="literal">libvirt</code> restarts it with the same configuration.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237802418624">
<pre class="screen"> &lt;pm&gt;
  &lt;suspend-to-mem enabled='no'/&gt;
  &lt;suspend-to-disk enabled='no'/&gt;
 &lt;/pm&gt;</pre>
							 </td><td align="left" valign="top" headers="idm140237802417536"> <p>
								The S3 and S4 ACPI sleep states are disabled for this VM.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237802418624">
<pre class="literallayout">&lt;devices&gt;
 &lt;emulator&gt;/usr/libexec/qemu-kvm&lt;/emulator&gt;
 &lt;disk type='file' device='disk'&gt;
  &lt;driver name='qemu' type='qcow2'/&gt;
  &lt;source file='/var/lib/libvirt/images/Testguest.qcow2'/&gt;
  &lt;target dev='vda' bus='virtio'/&gt;
 &lt;/disk&gt;
 &lt;disk type='file' device='cdrom'&gt;
  &lt;driver name='qemu' type='raw'/&gt;
  &lt;target dev='sdb' bus='sata'/&gt;
  &lt;readonly/&gt;
 &lt;/disk&gt;</pre>
							 </td><td align="left" valign="top" headers="idm140237802417536"> <p>
								The VM uses the <code class="literal">/usr/libexec/qemu-kvm</code> binary file for emulation and it has two disk devices attached.
							</p>
							 <p>
								The first disk is a virtualized hard-drive based on the <code class="literal">/var/lib/libvirt/images/Testguest.qcow2</code> stored on the host, and its logical device name is set to <code class="literal">vda</code>.
							</p>
							 <p>
								The second disk is a virtualized CD-ROM and its logical device name is set to <code class="literal">sdb</code>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237802418624">
<pre class="screen">  &lt;controller type='usb' index='0' model='qemu-xhci' ports='15'/&gt;
  &lt;controller type='sata' index='0'/&gt;
  &lt;controller type='pci' index='0' model='pcie-root'/&gt;
  &lt;controller type='pci' index='1' model='pcie-root-port'&gt;
   &lt;model name='pcie-root-port'/&gt;
   &lt;target chassis='1' port='0x10'/&gt;
  &lt;/controller&gt;
  &lt;controller type='pci' index='2' model='pcie-root-port'&gt;
   &lt;model name='pcie-root-port'/&gt;
   &lt;target chassis='2' port='0x11'/&gt;
  &lt;/controller&gt;
  &lt;controller type='pci' index='3' model='pcie-root-port'&gt;
   &lt;model name='pcie-root-port'/&gt;
   &lt;target chassis='3' port='0x12'/&gt;
  &lt;/controller&gt;
  &lt;controller type='pci' index='4' model='pcie-root-port'&gt;
   &lt;model name='pcie-root-port'/&gt;
   &lt;target chassis='4' port='0x13'/&gt;
  &lt;/controller&gt;
  &lt;controller type='pci' index='5' model='pcie-root-port'&gt;
   &lt;model name='pcie-root-port'/&gt;
   &lt;target chassis='5' port='0x14'/&gt;
  &lt;/controller&gt;
  &lt;controller type='pci' index='6' model='pcie-root-port'&gt;
   &lt;model name='pcie-root-port'/&gt;
   &lt;target chassis='6' port='0x15'/&gt;
  &lt;/controller&gt;
  &lt;controller type='pci' index='7' model='pcie-root-port'&gt;
   &lt;model name='pcie-root-port'/&gt;
   &lt;target chassis='7' port='0x16'/&gt;
  &lt;/controller&gt;
  &lt;controller type='virtio-serial' index='0'/&gt;</pre>
							 </td><td align="left" valign="top" headers="idm140237802417536"> <p>
								The VM uses a single controller for attaching USB devices, and a root controller for PCI-Express (PCIe) devices. In addition, a <code class="literal">virtio-serial</code> controller is available, which enables the VM to interact with the host in a variety of ways, such as the serial console.
							</p>
							 <p>
								For more information about virtual devices, see <a class="link" href="#types-of-virtual-devices_managing-virtual-devices" title="14.2. Types of virtual devices">Types of virtual devices</a>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237802418624">
<pre class="screen"> &lt;interface type='network'&gt;
  &lt;mac address='52:54:00:65:29:21'/&gt;
  &lt;source network='default'/&gt;
  &lt;model type='virtio'/&gt;
 &lt;/interface&gt;</pre>
							 </td><td align="left" valign="top" headers="idm140237802417536"> <p>
								A network interface is set up in the VM that uses the <code class="literal">default</code> virtual network and the <code class="literal">virtio</code> network device model.
							</p>
							 <p>
								For information about configuring the network interface, see <a class="link" href="#optimizing-virtual-machine-network-performance_optimizing-virtual-machine-performance-in-rhel" title="18.7. Optimizing virtual machine network performance">Optimizing virtual machine network performance</a>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237802418624">
<pre class="screen">  &lt;serial type='pty'&gt;
   &lt;target type='isa-serial' port='0'&gt;
    &lt;model name='isa-serial'/&gt;
   &lt;/target&gt;
  &lt;/serial&gt;
  &lt;console type='pty'&gt;
   &lt;target type='serial' port='0'/&gt;
  &lt;/console&gt;
  &lt;channel type='unix'&gt;
   &lt;target type='virtio' name='org.qemu.guest_agent.0'/&gt;
   &lt;address type='virtio-serial' controller='0' bus='0' port='1'/&gt;
  &lt;/channel&gt;</pre>
							 </td><td align="left" valign="top" headers="idm140237802417536"> <p>
								A <code class="literal">pty</code> serial console is set up on the VM, which enables rudimentary VM communication with the host. The console uses the <code class="literal">UNIX</code> channel on port 1. This is set up automatically and changing these settings is not recommended.
							</p>
							 <p>
								For more information about interacting with VMs, see <a class="link" href="#viewing-vm-consoles-using-the-rhel-web-console_assembly_connecting-to-virtual-machines" title="5.1. Interacting with virtual machines by using the web console">Interacting with virtual machines by using the web console</a>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237802418624">
<pre class="screen">  &lt;input type='tablet' bus='usb'&gt;
   &lt;address type='usb' bus='0' port='1'/&gt;
  &lt;/input&gt;
  &lt;input type='mouse' bus='ps2'/&gt;
  &lt;input type='keyboard' bus='ps2'/&gt;</pre>
							 </td><td align="left" valign="top" headers="idm140237802417536"> <p>
								The VM uses a virtual <span class="strong strong"><strong>usb</strong></span> port, which is set up to receive tablet input, and a virtual <span class="strong strong"><strong>ps2</strong></span> port set up to receive mouse and keyboard input. This is set up automatically and changing these settings is not recommended.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237802418624">
<pre class="screen">  &lt;graphics type='vnc' port='-1' autoport='yes' listen='127.0.0.1'&gt;
   &lt;listen type='address' address='127.0.0.1'/&gt;
  &lt;/graphics&gt;</pre>
							 </td><td align="left" valign="top" headers="idm140237802417536"> <p>
								The VM uses the <code class="literal">vnc</code> protocol for rendering its graphical output.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237802418624">
<pre class="screen">  &lt;redirdev bus='usb' type='tcp'&gt;
   &lt;source mode='connect' host='localhost' service='4000'/&gt;
   &lt;protocol type='raw'/&gt;
  &lt;/redirdev&gt;
  &lt;memballoon model='virtio'&gt;
   &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/&gt;
  &lt;/memballoon&gt;
 &lt;/devices&gt;
&lt;/domain&gt;</pre>
							 </td><td align="left" valign="top" headers="idm140237802417536"> <p>
								The VM uses <code class="literal">tcp</code> re-director for attaching USB devices remotely, and memory ballooning is turned on. This is set up automatically and changing these settings is not recommended.
							</p>
							 </td></tr></tbody></table></rh-table></section></section><section class="chapter" id="saving-and-restoring-virtual-machines_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h2 class="title">Chapter 10. Saving and restoring virtual machines</h2></div></div></div><p>
			To free up system resources, you can shut down a virtual machine (VM) running on that system. However, when you require the VM again, you must boot up the guest operating system (OS) and restart the applications, which may take a considerable amount of time. To reduce this downtime and enable the VM workload to start running sooner, you can use the save and restore feature to avoid the OS shutdown and boot sequence entirely.
		</p><p>
			This section provides information about saving VMs, as well as about restoring them to the same state without a full VM boot-up.
		</p><section class="section" id="how-saving-and-restoring-vms-works_saving-and-restoring-virtual-machines"><div class="titlepage"><div><div><h3 class="title">10.1. How saving and restoring virtual machines works</h3></div></div></div><p>
				Saving a virtual machine (VM) saves its memory and device state to the host’s disk, and immediately stops the VM process. You can save a VM that is either in a running or paused state, and upon restoring, the VM will return to that state.
			</p><p>
				This process frees up RAM and CPU resources on the host system in exchange for disk space, which may improve the host system performance. When the VM is restored, because the guest OS does not need to be booted, the long boot-up period is avoided as well.
			</p><p>
				To save a VM, you can use the command-line interface (CLI). For instructions, see <a class="link" href="#saving-a-virtual-machines-using-cli_saving-and-restoring-virtual-machines" title="10.2. Saving a virtual machine by using the command-line interface">Saving virtual machines by using the command-line interface</a>.
			</p><p>
				To restore a VM you can use the <a class="link" href="#starting-a-virtual-machine-using-the-command-line-interface_saving-and-restoring-virtual-machines" title="10.3. Starting a virtual machine by using the command-line interface">CLI</a> or the <a class="link" href="#powering-up-vms-using-the-rhel-web-console_saving-and-restoring-virtual-machines" title="10.4. Starting virtual machines by using the web console">web console GUI</a>.
			</p><p>
				You can also save and restore the state of a VM by using snapshots. For more information, see <a class="link" href="#creating-virtual-machine-snapshots_configuring-and-managing-virtualization" title="Chapter 13. Saving and restoring virtual machine state by using snapshots">Saving and restoring virtual machine state by using snapshots</a>.
			</p></section><section class="section" id="saving-a-virtual-machines-using-cli_saving-and-restoring-virtual-machines"><div class="titlepage"><div><div><h3 class="title">10.2. Saving a virtual machine by using the command-line interface</h3></div></div></div><p>
				You can save a virtual machine (VM) and its current state to the host’s disk. This is useful, for example, when you need to use the host’s resources for some other purpose. The saved VM can then be quickly restored to its previous running state.
			</p><p>
				To save a VM by using the command line, follow the procedure below.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Ensure you have sufficient disk space to save the VM and its configuration. Note that the space occupied by the VM depends on the amount of RAM allocated to that VM.
					</li><li class="listitem">
						Ensure the VM is persistent.
					</li><li class="listitem">
						Optional: Back up important data from the VM if required.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Use the <code class="literal">virsh managedsave</code> utility.
					</p><p class="simpara">
						For example, the following command stops the <span class="emphasis"><em>demo-guest1</em></span> VM and saves its configuration.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh managedsave demo-guest1</strong></span>
Domain 'demo-guest1' saved by libvirt</pre><p class="simpara">
						The saved VM file is located by default in the <span class="strong strong"><strong>/var/lib/libvirt/qemu/save</strong></span> directory as <span class="strong strong"><strong>demo-guest1.save</strong></span>.
					</p><p class="simpara">
						The next time the VM is <a class="link" href="#starting-a-virtual-machine-using-the-command-line-interface_saving-and-restoring-virtual-machines" title="10.3. Starting a virtual machine by using the command-line interface">started</a>, it will automatically restore the saved state from the above file.
					</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						List the VMs that have managed save enabled. In the following example, the VMs listed as <span class="emphasis"><em>saved</em></span> have their managed save enabled.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh list --managed-save --all</strong></span>
Id    Name                           State
----------------------------------------------------
-     demo-guest1                    saved
-     demo-guest2                    shut off</pre><p class="simpara">
						To list the VMs that have a managed save image:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh list --with-managed-save --all</strong></span>
Id    Name                           State
----------------------------------------------------
-     demo-guest1                    shut off</pre><p class="simpara">
						Note that to list the saved VMs that are in a shut off state, you must use the <code class="literal">--all</code> or <code class="literal">--inactive</code> options with the command.
					</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						If the saved VM file becomes corrupted or unreadable, restoring the VM will initiate a standard VM boot instead.
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The <code class="literal">virsh managedsave --help</code> command
					</li><li class="listitem">
						<a class="link" href="#starting-a-virtual-machine-using-the-command-line-interface_saving-and-restoring-virtual-machines" title="10.3. Starting a virtual machine by using the command-line interface">Restoring a saved VM by using the command-line interface</a>
					</li><li class="listitem">
						<a class="link" href="#powering-up-vms-using-the-rhel-web-console_saving-and-restoring-virtual-machines" title="10.4. Starting virtual machines by using the web console">Restoring a saved VM by using the web console</a>
					</li></ul></div></section><section class="section" id="starting-a-virtual-machine-using-the-command-line-interface_saving-and-restoring-virtual-machines"><div class="titlepage"><div><div><h3 class="title">10.3. Starting a virtual machine by using the command-line interface</h3></div></div></div><p>
				You can use the command line interface (CLI) to start a shut-down virtual machine (VM) or restore a saved VM. By using the CLI, you can start both local and remote VMs.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						An inactive VM that is already defined.
					</li><li class="listitem">
						The name of the VM.
					</li><li class="listitem"><p class="simpara">
						For remote VMs:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The IP address of the host where the VM is located.
							</li><li class="listitem">
								Root access privileges to the host.
							</li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						For a local VM, use the <code class="literal">virsh start</code> utility.
					</p><p class="simpara">
						For example, the following command starts the <span class="emphasis"><em>demo-guest1</em></span> VM.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh start demo-guest1</strong></span>
Domain 'demo-guest1' started</pre></li><li class="listitem"><p class="simpara">
						For a VM located on a remote host, use the <code class="literal">virsh start</code> utility along with the QEMU+SSH connection to the host.
					</p><p class="simpara">
						For example, the following command starts the <span class="emphasis"><em>demo-guest1</em></span> VM on the 192.0.2.1 host.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh -c qemu+ssh://root@192.0.2.1/system start demo-guest1</strong></span>

root@192.0.2.1's password:

Domain 'demo-guest1' started</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The <code class="literal">virsh start --help</code> command
					</li><li class="listitem">
						<a class="link" href="#setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines" title="5.5. Setting up easy access to remote virtualization hosts">Setting up easy access to remote virtualization hosts</a>
					</li><li class="listitem">
						<a class="link" href="#starting-virtual-machines-automatically-when-the-host-starts_assembly_starting-virtual-machines" title="4.3. Starting virtual machines automatically when the host starts">Starting virtual machines automatically when the host starts</a>
					</li></ul></div></section><section class="section" id="powering-up-vms-using-the-rhel-web-console_saving-and-restoring-virtual-machines"><div class="titlepage"><div><div><h3 class="title">10.4. Starting virtual machines by using the web console</h3></div></div></div><p>
				If a virtual machine (VM) is in the <span class="emphasis"><em>shut off</em></span> state, you can start it by using the RHEL 9 web console. You can also configure the VM to be started automatically when the host starts.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You have installed the RHEL 9 web console.
					</p><p class="simpara">
						For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
					</p></li><li class="listitem">
						The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
					</li><li class="listitem">
						An inactive VM that is already defined.
					</li><li class="listitem">
						The name of the VM.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						In the <span class="guimenu">Virtual Machines</span> interface, click the VM you want to start.
					</p><p class="simpara">
						A new page opens with detailed information about the selected VM and controls for shutting down and deleting the VM.
					</p></li><li class="listitem"><p class="simpara">
						Click <span class="guibutton">Run</span>.
					</p><p class="simpara">
						The VM starts, and you can <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/assembly_connecting-to-virtual-machines_configuring-and-managing-virtualization">connect to its console or graphical output</a>.
					</p></li><li class="listitem"><p class="simpara">
						Optional: To configure the VM to start automatically when the host starts, toggle the <code class="literal">Autostart</code> checkbox in the <span class="strong strong"><strong>Overview</strong></span> section.
					</p><p class="simpara">
						If you use network interfaces that are not managed by libvirt, you must also make additional changes to the systemd configuration. Otherwise, the affected VMs might fail to start, see <a class="link" href="#starting-virtual-machines-automatically-when-the-host-starts_assembly_starting-virtual-machines" title="4.3. Starting virtual machines automatically when the host starts">starting virtual machines automatically when the host starts</a>.
					</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#powering-down-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console" title="6.2.1. Shutting down virtual machines in the web console">Shutting down virtual machines in the web console</a>
					</li><li class="listitem">
						<a class="link" href="#restarting-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console" title="6.2.2. Restarting virtual machines by using the web console">Restarting virtual machines by using the web console</a>
					</li></ul></div></section></section><section class="chapter" id="cloning-virtual-machines_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h2 class="title">Chapter 11. Cloning virtual machines</h2></div></div></div><p>
			To quickly create a new virtual machine (VM) with a specific set of properties, you can <span class="emphasis"><em>clone</em></span> an existing VM.
		</p><p>
			Cloning creates a new VM that uses its own disk image for storage, but most of the clone’s configuration and stored data is identical to the source VM. This makes it possible to prepare multiple VMs optimized for a certain task without the need to optimize each VM individually.
		</p><section class="section" id="how-cloning-virtual-machines-works_cloning-virtual-machines"><div class="titlepage"><div><div><h3 class="title">11.1. How cloning virtual machines works</h3></div></div></div><p>
				Cloning a virtual machine (VM) copies the XML configuration of the source VM and its disk images, and makes adjustments to the configurations to ensure the uniqueness of the new VM. This includes changing the name of the VM and ensuring it uses the disk image clones. Nevertheless, the data stored on the clone’s virtual disks is identical to the source VM.
			</p><p>
				This process is faster than creating a new VM and installing it with a guest operating system, and can be used to rapidly generate VMs with a specific configuration and content.
			</p><p>
				If you are planning to create multiple clones of a VM, first create a VM <span class="emphasis"><em>template</em></span> that does not contain:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Unique settings, such as persistent network MAC configuration, which can prevent the clones from working correctly.
					</li><li class="listitem">
						Sensitive data, such as SSH keys and password files.
					</li></ul></div><p>
				For instructions, see <a class="link" href="#assembly_creating-virtual-machine-templates_cloning-virtual-machines" title="11.2. Creating virtual machine templates">Creating virtual machines templates</a>.
			</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#cloning-a-virtual-machine-using-the-command-line-interface_cloning-virtual-machines" title="11.3. Cloning a virtual machine by using the command-line interface">Cloning a virtual machine by using the command-line interface</a>
					</li><li class="listitem">
						<a class="link" href="#cloning-a-virtual-machine-using-the-web-console_cloning-virtual-machines" title="11.4. Cloning a virtual machine by using the web console">Cloning a virtual machine by using the web console</a>
					</li></ul></div></section><section class="section" id="assembly_creating-virtual-machine-templates_cloning-virtual-machines"><div class="titlepage"><div><div><h3 class="title">11.2. Creating virtual machine templates</h3></div></div></div><p>
				To create multiple virtual machine (VM) clones that work correctly, you can remove information and configurations that are unique to a source VM, such as SSH keys or persistent network MAC configuration. This creates a VM <span class="emphasis"><em>template</em></span>, which you can use to easily and safely create VM clones.
			</p><p>
				You can create VM templates <a class="link" href="#preparing-a-virtual-machine-template_assembly_creating-virtual-machine-templates" title="11.2.1. Creating a virtual machine template by using virt-sysprep">by using the <code class="literal">virt-sysprep</code> utility</a> or you can <a class="link" href="#proc_creating-a-virtual-machine-template-manually_assembly_creating-virtual-machine-templates" title="11.2.2. Creating a virtual machine template manually">create them manually</a> based on your requirements.
			</p><section class="section" id="preparing-a-virtual-machine-template_assembly_creating-virtual-machine-templates"><div class="titlepage"><div><div><h4 class="title">11.2.1. Creating a virtual machine template by using virt-sysprep</h4></div></div></div><p>
					To create a cloning template from an existing virtual machine (VM), you can use the <code class="literal">virt-sysprep</code> utility. This removes certain configurations that might cause the clone to work incorrectly, such as specific network settings or system registration metadata. As a result, <code class="literal">virt-sysprep</code> makes creating clones of the VM more efficient, and ensures that the clones work more reliably.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The <code class="literal">guestfs-tools</code> package, which contains the <code class="literal">virt-sysprep</code> utility, is installed on your host:
						</p><pre class="screen"># <span class="strong strong"><strong>dnf install guestfs-tools</strong></span></pre></li><li class="listitem">
							The source VM intended as a template is shut down.
						</li><li class="listitem"><p class="simpara">
							You know where the disk image for the source VM is located, and you are the owner of the VM’s disk image file.
						</p><p class="simpara">
							Note that disk images for VMs created in the <a class="link" href="#automatic-features-for-virtual-machine-security_securing-virtual-machines-in-rhel" title="19.3. Automatic features for virtual machine security">system connection</a> of libvirt are located in the <code class="literal">/var/lib/libvirt/images</code> directory and owned by the root user by default:
						</p><pre class="screen"># <span class="strong strong"><strong>ls -la /var/lib/libvirt/images</strong></span>
-rw-------.  1 root root  9665380352 Jul 23 14:50 a-really-important-vm.qcow2
-rw-------.  1 root root  8591507456 Jul 26  2017 an-actual-vm-that-i-use.qcow2
-rw-------.  1 root root  8591507456 Jul 26  2017 totally-not-a-fake-vm.qcow2
-rw-------.  1 root root 10739318784 Sep 20 17:57 another-vm-example.qcow2</pre></li><li class="listitem">
							Optional: Any important data on the source VM’s disk has been backed up. If you want to preserve the source VM intact, <a class="link" href="#cloning-a-virtual-machine-using-the-command-line-interface_cloning-virtual-machines" title="11.3. Cloning a virtual machine by using the command-line interface">clone</a> it first and turn the clone into a template.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Ensure you are logged in as the owner of the VM’s disk image:
						</p><pre class="screen"># <span class="strong strong"><strong>whoami</strong></span>
root</pre></li><li class="listitem"><p class="simpara">
							Optional: Copy the disk image of the VM.
						</p><pre class="screen"># <span class="strong strong"><strong>cp /var/lib/libvirt/images/a-really-important-vm.qcow2 /var/lib/libvirt/images/a-really-important-vm-original.qcow2</strong></span></pre><p class="simpara">
							This is used later to verify that the VM was successfully turned into a template.
						</p></li><li class="listitem"><p class="simpara">
							Use the following command, and replace <span class="emphasis"><em>/var/lib/libvirt/images/a-really-important-vm.qcow2</em></span> with the path to the disk image of the source VM.
						</p><pre class="screen"># <span class="strong strong"><strong>virt-sysprep -a <span class="emphasis"><em>/var/lib/libvirt/images/a-really-important-vm.qcow2</em></span></strong></span>
[   0.0] Examining the guest ...
[   7.3] Performing "abrt-data" ...
[   7.3] Performing "backup-files" ...
[   9.6] Performing "bash-history" ...
[   9.6] Performing "blkid-tab" ...
[...]</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To confirm that the process was successful, compare the modified disk image to the original one. The following example shows a successful creation of a template:
						</p><pre class="screen"># <span class="strong strong"><strong>virt-diff -a <span class="emphasis"><em>/var/lib/libvirt/images/a-really-important-vm-orig.qcow2</em></span> -A <span class="emphasis"><em>/var/lib/libvirt/images/a-really-important-vm.qcow2</em></span></strong></span>
- - 0644       1001 /etc/group-
- - 0000        797 /etc/gshadow-
= - 0444         33 /etc/machine-id
[...]
- - 0600        409 /home/username/.bash_history
- d 0700          6 /home/username/.ssh
- - 0600        868 /root/.bash_history
[...]</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							The <span class="strong strong"><strong>OPERATIONS</strong></span> section in the <code class="literal">virt-sysprep</code> man page on your system
						</li><li class="listitem">
							<a class="link" href="#cloning-a-virtual-machine-using-the-command-line-interface_cloning-virtual-machines" title="11.3. Cloning a virtual machine by using the command-line interface">Cloning a virtual machine by using the command-line interface</a>
						</li></ul></div></section><section class="section" id="proc_creating-a-virtual-machine-template-manually_assembly_creating-virtual-machine-templates"><div class="titlepage"><div><div><h4 class="title">11.2.2. Creating a virtual machine template manually</h4></div></div></div><p>
					To create a template from an existing virtual machine (VM), you can manually reset or unconfigure a guest VM to prepare it for cloning.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Ensure that you know the location of the disk image for the source VM and are the owner of the VM’s disk image file.
						</p><p class="simpara">
							Note that disk images for VMs created in the <a class="link" href="#automatic-features-for-virtual-machine-security_securing-virtual-machines-in-rhel" title="19.3. Automatic features for virtual machine security">system connection</a> of libvirt are by default located in the <code class="literal directory">/var/lib/libvirt/images</code> directory and owned by the root user:
						</p><pre class="screen"># <span class="strong strong"><strong>ls -la /var/lib/libvirt/images</strong></span>
-rw-------.  1 root root  9665380352 Jul 23 14:50 a-really-important-vm.qcow2
-rw-------.  1 root root  8591507456 Jul 26  2017 an-actual-vm-that-i-use.qcow2
-rw-------.  1 root root  8591507456 Jul 26  2017 totally-not-a-fake-vm.qcow2
-rw-------.  1 root root 10739318784 Sep 20 17:57 another-vm-example.qcow2</pre></li><li class="listitem">
							Ensure that the VM is shut down.
						</li><li class="listitem">
							Optional: Any important data on the VM’s disk has been backed up. If you want to preserve the source VM intact, <a class="link" href="#cloning-a-virtual-machine-using-the-command-line-interface_cloning-virtual-machines" title="11.3. Cloning a virtual machine by using the command-line interface">clone</a> it first and edit the clone to create a template.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Configure the VM for cloning:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Install any software needed on the clone.
								</li><li class="listitem">
									Configure any non-unique settings for the operating system.
								</li><li class="listitem">
									Configure any non-unique application settings.
								</li></ol></div></li><li class="listitem"><p class="simpara">
							Remove the network configuration:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Remove any persistent udev rules by using the following command:
								</p><pre class="screen"># <span class="strong strong"><strong>rm -f /etc/udev/rules.d/70-persistent-net.rules</strong></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
										If udev rules are not removed, the name of the first NIC might be <code class="literal">eth1</code> instead of <code class="literal">eth0</code>.
									</p></div></rh-alert></li><li class="listitem"><p class="simpara">
									Remove unique information from the <code class="literal">NMConnection</code> files in the <code class="literal">/etc/NetworkManager/system-connections/</code> directory.
								</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
											Remove MAC address, IP address, DNS, gateway, and any other <span class="strong strong"><strong>unique</strong></span> information or non-desired settings.
										</p><pre class="screen">*ID=ExampleNetwork
BOOTPROTO="dhcp"
HWADDR="AA:BB:CC:DD:EE:FF"                  &lt;- REMOVE
NM_CONTROLLED="yes"
ONBOOT="yes"
TYPE="Ethernet"
UUID="954bd22c-f96c-4b59-9445-b39dd86ac8ab" &lt;- REMOVE</pre></li><li class="listitem">
											Remove similar <span class="strong strong"><strong>unique</strong></span> information and non-desired settings from the <code class="literal">/etc/hosts</code> and <code class="literal">/etc/resolv.conf</code> files.
										</li></ol></div></li></ol></div></li><li class="listitem"><p class="simpara">
							Remove registration details:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									For VMs registered on the Red Hat Network (RHN):
								</p><pre class="screen"># <span class="strong strong"><strong>rm /etc/sysconfig/rhn/systemid</strong></span></pre></li><li class="listitem"><p class="simpara">
									For VMs registered with Red Hat Subscription Manager (RHSM):
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
											If you do not plan to use the original VM:
										</p><pre class="screen"># <span class="strong strong"><strong>subscription-manager unsubscribe --all # subscription-manager unregister # subscription-manager clean</strong></span></pre></li><li class="listitem"><p class="simpara">
											If you plan to use the original VM:
										</p><pre class="screen"># <span class="strong strong"><strong>subscription-manager clean</strong></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
												The original RHSM profile remains in the Portal along with your ID code. Use the following command to reactivate your RHSM registration on the VM after it is cloned:
											</p><pre class="screen"># <span class="strong strong"><strong>subscription-manager register --consumerid=71rd64fx-6216-4409-bf3a-e4b7c7bd8ac9</strong></span></pre></div></rh-alert></li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
							Remove other unique details:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Remove SSH public and private key pairs:
								</p><pre class="screen"># <span class="strong strong"><strong>rm -rf /etc/ssh/ssh_host_example</strong></span></pre></li><li class="listitem"><p class="simpara">
									Remove the configuration of LVM devices:
								</p><pre class="screen"># <span class="strong strong"><strong>rm /etc/lvm/devices/system.devices</strong></span></pre></li><li class="listitem">
									Remove any other application-specific identifiers or configurations that might cause conflicts if running on multiple machines.
								</li></ol></div></li><li class="listitem"><p class="simpara">
							Remove the <code class="literal">gnome-initial-setup-done</code> file to configure the VM to run the configuration wizard on the next boot:
						</p><pre class="screen"># <span class="strong strong"><strong>rm ~/.config/gnome-initial-setup-done</strong></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								The wizard that runs on the next boot depends on the configurations that have been removed from the VM. In addition, on the first boot of the clone, it is recommended that you change the hostname.
							</p></div></rh-alert></li></ol></div></section></section><section class="section" id="cloning-a-virtual-machine-using-the-command-line-interface_cloning-virtual-machines"><div class="titlepage"><div><div><h3 class="title">11.3. Cloning a virtual machine by using the command-line interface</h3></div></div></div><p>
				For testing, to create a new virtual machine (VM) with a specific set of properties, you can clone an existing VM by using CLI.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The source VM is shut down.
					</li><li class="listitem">
						Ensure that there is sufficient disk space to store the cloned disk images.
					</li><li class="listitem">
						Optional: When creating multiple VM clones, remove unique data and settings from the source VM to ensure the cloned VMs work properly. For instructions, see <a class="link" href="#assembly_creating-virtual-machine-templates_cloning-virtual-machines" title="11.2. Creating virtual machine templates">Creating virtual machine templates</a>.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Use the <code class="literal">virt-clone</code> utility with options that are appropriate for your environment and use case.
					</p><p class="simpara">
						<span class="strong strong"><strong>Sample use cases</strong></span>
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								The following command clones a local VM named <code class="literal">example-VM-1</code> and creates the <code class="literal">example-VM-1-clone</code> VM. It also creates and allocates the <code class="literal">example-VM-1-clone.qcow2</code> disk image in the same location as the disk image of the original VM, and with the same data:
							</p><pre class="screen"># <span class="strong strong"><strong>virt-clone --original <span class="emphasis"><em>example-VM-1</em></span> --auto-clone</strong></span>
Allocating 'example-VM-1-clone.qcow2'                            | 50.0 GB  00:05:37

Clone 'example-VM-1-clone' created successfully.</pre></li><li class="listitem"><p class="simpara">
								The following command clones a VM named <code class="literal">example-VM-2</code>, and creates a local VM named <code class="literal">example-VM-3</code>, which uses only two out of multiple disks of <code class="literal">example-VM-2</code>:
							</p><pre class="screen"># <span class="strong strong"><strong>virt-clone --original <span class="emphasis"><em>example-VM-2</em></span> --name <span class="emphasis"><em>example-VM-3</em></span> --file /var/lib/libvirt/images/<span class="emphasis"><em>disk-1-example-VM-2</em></span>.qcow2 --file /var/lib/libvirt/images/<span class="emphasis"><em>disk-2-example-VM-2</em></span>.qcow2</strong></span>
Allocating 'disk-1-example-VM-2-clone.qcow2'                                      | 78.0 GB  00:05:37
Allocating 'disk-2-example-VM-2-clone.qcow2'                                      | 80.0 GB  00:05:37

Clone 'example-VM-3' created successfully.</pre></li><li class="listitem"><p class="simpara">
								To clone your VM to a different host, migrate the VM without undefining it on the local host. For example, the following commands clone the previously created <code class="literal">example-VM-3</code> VM to the <code class="literal">192.0.2.1</code> remote system, including its local disks. Note that you require root privileges to run these commands for <code class="literal">192.0.2.1</code>:
							</p><pre class="screen"># <span class="strong strong"><strong>virsh migrate --offline --persistent <span class="emphasis"><em>example-VM-3</em></span> qemu+ssh://root@192.0.2.1/system</strong></span>
root@192.0.2.1's password:

# <span class="strong strong"><strong>scp /var/lib/libvirt/images/<span class="emphasis"><em>&lt;disk-1-example-VM-2-clone&gt;</em></span>.qcow2 root@192.0.2.1/<span class="emphasis"><em>&lt;user@remote_host.com&gt;</em></span>://var/lib/libvirt/images/</strong></span>

# <span class="strong strong"><strong>scp /var/lib/libvirt/images/<span class="emphasis"><em>&lt;disk-2-example-VM-2-clone&gt;</em></span>.qcow2 root@192.0.2.1/<span class="emphasis"><em>&lt;user@remote_host.com&gt;</em></span>://var/lib/libvirt/images/</strong></span></pre></li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To verify the VM has been successfully cloned and is working correctly:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Confirm the clone has been added to the list of VMs on your host:
							</p><pre class="screen"># <span class="strong strong"><strong>virsh list --all</strong></span>
Id   Name                  State
---------------------------------------
-    example-VM-1          shut off
-    example-VM-1-clone    shut off</pre></li><li class="listitem"><p class="simpara">
								Start the clone and observe if it boots up:
							</p><pre class="screen"># <span class="strong strong"><strong>virsh start <span class="emphasis"><em>example-VM-1-clone</em></span></strong></span>
Domain 'example-VM-1-clone' started</pre></li></ol></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">virt-clone (1)</code> man page on your system
					</li><li class="listitem">
						<a class="link" href="#migrating-virtual-machines_configuring-and-managing-virtualization" title="Chapter 12. Migrating virtual machines">Migrating virtual machines</a>
					</li></ul></div></section><section class="section" id="cloning-a-virtual-machine-using-the-web-console_cloning-virtual-machines"><div class="titlepage"><div><div><h3 class="title">11.4. Cloning a virtual machine by using the web console</h3></div></div></div><p id="proc_cloning-a-virtual-machine-using-the-web-console_cloning-virtual-machines">
				To create new virtual machines (VMs) with a specific set of properties, you can clone a VM that you had previously configured by using the web console.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					Cloning a VM also clones the disks associated with that VM.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You have installed the RHEL 9 web console.
					</p><p class="simpara">
						For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
					</p></li><li class="listitem">
						The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
					</li><li class="listitem">
						Ensure that the VM you want to clone is shut down.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Log in to the RHEL 9 web console.
					</p><p class="simpara">
						For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
					</p></li><li class="listitem"><p class="simpara">
						In the Virtual Machines interface of the web console, click the Menu button <span class="guibutton">⋮</span> of the VM that you want to clone.
					</p><p class="simpara">
						A drop down menu appears with controls for various VM operations.
					</p></li><li class="listitem"><p class="simpara">
						Click <span class="guibutton">Clone</span>.
					</p><p class="simpara">
						The Create a clone VM dialog appears.
					</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/b23ad9e8040882ea2ac2b14463dd5d13/virt-cockpit-vm-clone.png" width="540" alt="Create a clone VM dialog box with an option to enter a new name for the VM."></div></div></li><li class="listitem">
						Optional: Enter a new name for the VM clone.
					</li><li class="listitem"><p class="simpara">
						Click <span class="guibutton">Clone</span>.
					</p><p class="simpara">
						A new VM is created based on the source VM.
					</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Confirm whether the cloned VM appears in the list of VMs available on your host.
					</li></ul></div></section></section><section class="chapter" id="migrating-virtual-machines_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h2 class="title">Chapter 12. Migrating virtual machines</h2></div></div></div><p>
			If the current host of a virtual machine (VM) becomes unsuitable or cannot be used anymore, or if you want to redistribute the hosting workload, you can migrate the VM to another KVM host.
		</p><section class="section" id="how-migrating-virtual-machines-works_migrating-virtual-machines"><div class="titlepage"><div><div><h3 class="title">12.1. How migrating virtual machines works</h3></div></div></div><p>
				The essential part of virtual machine (VM) migration is copying the XML configuration of a VM to a different host machine. If the migrated VM is not shut down, the migration also transfers the state of the VM’s memory and any virtualized devices to a destination host machine. For the VM to remain functional on the destination host, the VM’s disk images must remain available to it.
			</p><p>
				By default, the migrated VM is transient on the destination host, and remains defined also on the source host.
			</p><p>
				You can migrate a running VM by using <span class="emphasis"><em>live</em></span> or <span class="emphasis"><em>non-live</em></span> migrations. To migrate a shut-off VM, you must use an <span class="emphasis"><em>offline</em></span> migration. For details, see the following table.
			</p><rh-table id="idm140237800378304"><table class="gt-4-cols lt-7-rows"><caption>Table 12.1. VM migration types</caption><colgroup><col style="width: 25%; " class="col_1"><!--Empty--><col style="width: 25%; " class="col_2"><!--Empty--><col style="width: 25%; " class="col_3"><!--Empty--><col style="width: 25%; " class="col_4"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140237780264416" scope="col">Migration type</th><th align="left" valign="top" id="idm140237795105680" scope="col">Description</th><th align="left" valign="top" id="idm140237795104592" scope="col">Use case</th><th align="left" valign="top" id="idm140237795103504" scope="col">Storage requirements</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140237780264416"> <p>
								<span class="strong strong"><strong>Live migration</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140237795105680"> <p>
								The VM continues to run on the source host machine while KVM is transferring the VM’s memory pages to the destination host. When the migration is nearly complete, KVM very briefly suspends the VM, and resumes it on the destination host.
							</p>
							 </td><td align="left" valign="top" headers="idm140237795104592"> <p>
								Useful for VMs that require constant uptime. However, VMs that modify memory pages faster than KVM can transfer them, such as VMs under heavy I/O load, cannot be live-migrated, and <span class="emphasis"><em>non-live migration</em></span> must be used instead.
							</p>
							 </td><td align="left" valign="top" headers="idm140237795103504"> <p>
								The VM’s disk images must be accessible both to the source host and the destination host during the migration. (1)
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237780264416"> <p>
								<span class="strong strong"><strong>Non-live migration</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140237795105680"> <p>
								Suspends the VM, copies its configuration and its memory to the destination host, and resumes the VM.
							</p>
							 </td><td align="left" valign="top" headers="idm140237795104592"> <p>
								Creates downtime for the VM, but is generally more reliable than live migration. Recommended for VMs under heavy memory load.
							</p>
							 </td><td align="left" valign="top" headers="idm140237795103504"> <p>
								The VM’s disk images must be accessible both to the source host and the destination host during the migration. (1)
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237780264416"> <p>
								<span class="strong strong"><strong>Hybrid migration</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140237795105680"> <p>
								Combines <span class="emphasis"><em>live migration</em></span> and <span class="emphasis"><em>non-live migration</em></span>. You suspend the source VM during live migration, which prevents additional dirty memory pages from being generated. As a result, the migration is significantly more likely to complete.
							</p>
							 </td><td align="left" valign="top" headers="idm140237795104592"> <p>
								Recommended for example when live-migrating a VM that uses very many vCPUs or a large amount of memory, which prevents the migration from completing.
							</p>
							 <p>
								Based on guest workload and the number of static pages during migration, a hybrid migration might also cause significantly less downtime than a non-live migration.
							</p>
							 </td><td align="left" valign="top" headers="idm140237795103504"> <p>
								The VM’s disk images must be accessible both to the source host and the destination host during the migration. (1)
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237780264416"> <p>
								<span class="strong strong"><strong>Offline migration</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140237795105680"> <p>
								Moves the VM’s configuration to the destination host
							</p>
							 </td><td align="left" valign="top" headers="idm140237795104592"> <p>
								Recommended for shut-off VMs and in situations when shutting down the VM does not disrupt your workloads.
							</p>
							 </td><td align="left" valign="top" headers="idm140237795103504"> <p>
								The VM’s disk images do not have to be available on a shared network, and can be copied or moved manually to the destination host instead.
							</p>
							 </td></tr></tbody></table></rh-table><p>
				(1) To achieve this, use one of the following:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Storage located <a class="link" href="#sharing-virtual-machine-disk-images-with-other-hosts_migrating-virtual-machines" title="12.5. Sharing virtual machine disk images with other hosts">on a shared network</a>
					</li><li class="listitem">
						The <code class="literal">--copy-storage-all</code> parameter for the <code class="literal">virsh migrate</code> command, which copies disk image contents from the source to the destination over the network.
					</li><li class="listitem">
						Storage area network (SAN) logical units (LUNs).
					</li><li class="listitem">
						<a class="link" href="https://docs.ceph.com/en/latest/rados/">Ceph storage clusters</a>
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#benefits-of-migrating-virtual-machines_migrating-virtual-machines" title="12.2. Benefits of migrating virtual machines">Benefits of migrating virtual machines</a>
					</li><li class="listitem">
						<a class="link" href="#sharing-virtual-machine-disk-images-with-other-hosts_migrating-virtual-machines" title="12.5. Sharing virtual machine disk images with other hosts">Sharing virtual machine disk images with other hosts</a>
					</li></ul></div></section><section class="section" id="benefits-of-migrating-virtual-machines_migrating-virtual-machines"><div class="titlepage"><div><div><h3 class="title">12.2. Benefits of migrating virtual machines</h3></div></div></div><p>
				Migrating virtual machines (VMs) can be useful for:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Load balancing</span></dt><dd>
							VMs can be moved to host machines with lower usage if their host becomes overloaded, or if another host is under-utilized.
						</dd><dt><span class="term">Hardware independence</span></dt><dd>
							When you need to upgrade, add, or remove hardware devices on the host machine, you can safely relocate VMs to other hosts. This means that VMs do not experience any downtime for hardware improvements.
						</dd><dt><span class="term">Energy saving</span></dt><dd>
							VMs can be redistributed to other hosts, and the unloaded host systems can thus be powered off to save energy and cut costs during low usage periods.
						</dd><dt><span class="term">Geographic migration</span></dt><dd>
							VMs can be moved to another physical location for lower latency or when required for other reasons.
						</dd></dl></div></section><section class="section" id="limitations-for-migrating-virtual-machines_migrating-virtual-machines"><div class="titlepage"><div><div><h3 class="title">12.3. Limitations for migrating virtual machines</h3></div></div></div><p>
				Before migrating virtual machines (VMs) in RHEL 9, ensure you are aware of the migration’s limitations.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Migrating VMs from or to a <a class="link" href="#system-and-session-connections_securing-virtual-machines-in-rhel">session connection of <code class="literal">libvirt</code></a> is unreliable and therefore not recommended.
					</li><li class="listitem"><p class="simpara">
						VMs that use certain features and configurations will not work correctly if migrated, or the migration will fail. Such features include:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Device passthrough
							</li><li class="listitem">
								SR-IOV device assignment
							</li><li class="listitem">
								Mediated devices, such as vGPUs
							</li></ul></div></li><li class="listitem">
						A migration between hosts that use Non-Uniform Memory Access (NUMA) pinning works only if the hosts have similar topology. However, the performance on running workloads might be negatively affected by the migration.
					</li><li class="listitem"><p class="simpara">
						The emulated CPUs, both on the source VM and the destination VM, must be identical, otherwise the migration might fail. Any differences between the VMs in the following CPU related areas can cause problems with the migration:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								CPU model
							</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
										Migrating between an Intel 64 host and an AMD64 host is unsupported, even though they share the x86-64 instruction set.
									</li><li class="listitem">
										For steps to ensure that a VM will work correctly after migrating to a host with a different CPU model, see <a class="link" href="#verifying-host-cpu-compatibility-for-virtual-machine-migration_migrating-virtual-machines" title="12.4. Verifying host CPU compatibility for virtual machine migration">Verifying host CPU compatibility for virtual machine migration</a>.
									</li></ul></div></li><li class="listitem">
								Firmware settings
							</li><li class="listitem">
								Microcode version
							</li><li class="listitem">
								BIOS version
							</li><li class="listitem">
								BIOS settings
							</li><li class="listitem">
								QEMU version
							</li><li class="listitem">
								Kernel version
							</li></ul></div></li><li class="listitem">
						Live migrating a VM that uses more than 1 TB of memory might in some cases be unreliable. For instructions on how to prevent or fix this problem, see <a class="link" href="#live_migration_of_a_vm_takes_a_long_time_without_completing" title="12.9.1. Live migration of a VM takes a long time without completing">Live migration of a VM takes a long time without completing</a>.
					</li></ul></div></section><section class="section" id="verifying-host-cpu-compatibility-for-virtual-machine-migration_migrating-virtual-machines"><div class="titlepage"><div><div><h3 class="title">12.4. Verifying host CPU compatibility for virtual machine migration</h3></div></div></div><p>
				For migrated virtual machines (VMs) to work correctly on the destination host, the CPUs on the source and the destination hosts must be compatible. To ensure that this is the case, calculate a common CPU baseline before you begin the migration.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The instructions in this section use an example migration scenario with the following host CPUs:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Source host: Intel Core i7-8650U
						</li><li class="listitem">
							Destination hosts: Intel Xeon CPU E5-2620 v2
						</li></ul></div></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Virtualization is <a class="link" href="#assembly_enabling-virtualization-in-rhel-9_configuring-and-managing-virtualization" title="Chapter 2. Enabling virtualization">installed and enabled</a> on your system.
					</li><li class="listitem">
						You have administrator access to the source host and the destination host for the migration.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On the source host, obtain its CPU features and paste them into a new XML file, such as <code class="literal">domCaps-CPUs.xml</code>.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh domcapabilities | xmllint --xpath "//cpu/mode[@name='host-model']" - &gt; <span class="emphasis"><em>domCaps-CPUs.xml</em></span></strong></span></pre></li><li class="listitem">
						In the XML file, replace the <code class="literal">&lt;mode&gt; &lt;/mode&gt;</code> tags with <code class="literal">&lt;cpu&gt; &lt;/cpu&gt;</code>.
					</li><li class="listitem"><p class="simpara">
						Optional: Verify that the content of the <code class="literal">domCaps-CPUs.xml</code> file looks similar to the following:
					</p><pre class="screen"># <span class="strong strong"><strong>cat <span class="emphasis"><em>domCaps-CPUs.xml</em></span></strong></span>

    &lt;cpu&gt;
          &lt;model fallback="forbid"&gt;Skylake-Client-IBRS&lt;/model&gt;
          &lt;vendor&gt;Intel&lt;/vendor&gt;
          &lt;feature policy="require" name="ss"/&gt;
          &lt;feature policy="require" name="vmx"/&gt;
          &lt;feature policy="require" name="pdcm"/&gt;
          &lt;feature policy="require" name="hypervisor"/&gt;
          &lt;feature policy="require" name="tsc_adjust"/&gt;
          &lt;feature policy="require" name="clflushopt"/&gt;
          &lt;feature policy="require" name="umip"/&gt;
          &lt;feature policy="require" name="md-clear"/&gt;
          &lt;feature policy="require" name="stibp"/&gt;
          &lt;feature policy="require" name="arch-capabilities"/&gt;
          &lt;feature policy="require" name="ssbd"/&gt;
          &lt;feature policy="require" name="xsaves"/&gt;
          &lt;feature policy="require" name="pdpe1gb"/&gt;
          &lt;feature policy="require" name="invtsc"/&gt;
          &lt;feature policy="require" name="ibpb"/&gt;
          &lt;feature policy="require" name="ibrs"/&gt;
          &lt;feature policy="require" name="amd-stibp"/&gt;
          &lt;feature policy="require" name="amd-ssbd"/&gt;
          &lt;feature policy="require" name="rsba"/&gt;
          &lt;feature policy="require" name="skip-l1dfl-vmentry"/&gt;
          &lt;feature policy="require" name="pschange-mc-no"/&gt;
          &lt;feature policy="disable" name="hle"/&gt;
          &lt;feature policy="disable" name="rtm"/&gt;
    &lt;/cpu&gt;</pre></li><li class="listitem"><p class="simpara">
						On the destination host, use the following command to obtain its CPU features:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh domcapabilities | xmllint --xpath "//cpu/mode[@name='host-model']" -</strong></span>

    &lt;mode name="host-model" supported="yes"&gt;
            &lt;model fallback="forbid"&gt;IvyBridge-IBRS&lt;/model&gt;
            &lt;vendor&gt;Intel&lt;/vendor&gt;
            &lt;feature policy="require" name="ss"/&gt;
            &lt;feature policy="require" name="vmx"/&gt;
            &lt;feature policy="require" name="pdcm"/&gt;
            &lt;feature policy="require" name="pcid"/&gt;
            &lt;feature policy="require" name="hypervisor"/&gt;
            &lt;feature policy="require" name="arat"/&gt;
            &lt;feature policy="require" name="tsc_adjust"/&gt;
            &lt;feature policy="require" name="umip"/&gt;
            &lt;feature policy="require" name="md-clear"/&gt;
            &lt;feature policy="require" name="stibp"/&gt;
            &lt;feature policy="require" name="arch-capabilities"/&gt;
            &lt;feature policy="require" name="ssbd"/&gt;
            &lt;feature policy="require" name="xsaveopt"/&gt;
            &lt;feature policy="require" name="pdpe1gb"/&gt;
            &lt;feature policy="require" name="invtsc"/&gt;
            &lt;feature policy="require" name="ibpb"/&gt;
            &lt;feature policy="require" name="amd-ssbd"/&gt;
            &lt;feature policy="require" name="skip-l1dfl-vmentry"/&gt;
            &lt;feature policy="require" name="pschange-mc-no"/&gt;
    &lt;/mode&gt;</pre></li><li class="listitem">
						Add the obtained CPU features from the destination host to the <code class="literal">domCaps-CPUs.xml</code> file on the source host. Again, replace the <code class="literal">&lt;mode&gt; &lt;/mode&gt;</code> tags with <code class="literal">&lt;cpu&gt; &lt;/cpu&gt;</code> and save the file.
					</li><li class="listitem"><p class="simpara">
						Optional: Verify that the XML file now contains the CPU features from both hosts.
					</p><pre class="screen"># <span class="strong strong"><strong>cat <span class="emphasis"><em>domCaps-CPUs.xml</em></span></strong></span>

    &lt;cpu&gt;
          &lt;model fallback="forbid"&gt;Skylake-Client-IBRS&lt;/model&gt;
          &lt;vendor&gt;Intel&lt;/vendor&gt;
          &lt;feature policy="require" name="ss"/&gt;
          &lt;feature policy="require" name="vmx"/&gt;
          &lt;feature policy="require" name="pdcm"/&gt;
          &lt;feature policy="require" name="hypervisor"/&gt;
          &lt;feature policy="require" name="tsc_adjust"/&gt;
          &lt;feature policy="require" name="clflushopt"/&gt;
          &lt;feature policy="require" name="umip"/&gt;
          &lt;feature policy="require" name="md-clear"/&gt;
          &lt;feature policy="require" name="stibp"/&gt;
          &lt;feature policy="require" name="arch-capabilities"/&gt;
          &lt;feature policy="require" name="ssbd"/&gt;
          &lt;feature policy="require" name="xsaves"/&gt;
          &lt;feature policy="require" name="pdpe1gb"/&gt;
          &lt;feature policy="require" name="invtsc"/&gt;
          &lt;feature policy="require" name="ibpb"/&gt;
          &lt;feature policy="require" name="ibrs"/&gt;
          &lt;feature policy="require" name="amd-stibp"/&gt;
          &lt;feature policy="require" name="amd-ssbd"/&gt;
          &lt;feature policy="require" name="rsba"/&gt;
          &lt;feature policy="require" name="skip-l1dfl-vmentry"/&gt;
          &lt;feature policy="require" name="pschange-mc-no"/&gt;
          &lt;feature policy="disable" name="hle"/&gt;
          &lt;feature policy="disable" name="rtm"/&gt;
    &lt;/cpu&gt;
    &lt;cpu&gt;
          &lt;model fallback="forbid"&gt;IvyBridge-IBRS&lt;/model&gt;
          &lt;vendor&gt;Intel&lt;/vendor&gt;
          &lt;feature policy="require" name="ss"/&gt;
          &lt;feature policy="require" name="vmx"/&gt;
          &lt;feature policy="require" name="pdcm"/&gt;
          &lt;feature policy="require" name="pcid"/&gt;
          &lt;feature policy="require" name="hypervisor"/&gt;
          &lt;feature policy="require" name="arat"/&gt;
          &lt;feature policy="require" name="tsc_adjust"/&gt;
          &lt;feature policy="require" name="umip"/&gt;
          &lt;feature policy="require" name="md-clear"/&gt;
          &lt;feature policy="require" name="stibp"/&gt;
          &lt;feature policy="require" name="arch-capabilities"/&gt;
          &lt;feature policy="require" name="ssbd"/&gt;
          &lt;feature policy="require" name="xsaveopt"/&gt;
          &lt;feature policy="require" name="pdpe1gb"/&gt;
          &lt;feature policy="require" name="invtsc"/&gt;
          &lt;feature policy="require" name="ibpb"/&gt;
          &lt;feature policy="require" name="amd-ssbd"/&gt;
          &lt;feature policy="require" name="skip-l1dfl-vmentry"/&gt;
          &lt;feature policy="require" name="pschange-mc-no"/&gt;
    &lt;/cpu&gt;</pre></li><li class="listitem"><p class="simpara">
						Use the XML file to calculate the CPU feature baseline for the VM you intend to migrate.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh hypervisor-cpu-baseline <span class="emphasis"><em>domCaps-CPUs.xml</em></span></strong></span>

    &lt;cpu mode='custom' match='exact'&gt;
      &lt;model fallback='forbid'&gt;IvyBridge-IBRS&lt;/model&gt;
      &lt;vendor&gt;Intel&lt;/vendor&gt;
      &lt;feature policy='require' name='ss'/&gt;
      &lt;feature policy='require' name='vmx'/&gt;
      &lt;feature policy='require' name='pdcm'/&gt;
      &lt;feature policy='require' name='pcid'/&gt;
      &lt;feature policy='require' name='hypervisor'/&gt;
      &lt;feature policy='require' name='arat'/&gt;
      &lt;feature policy='require' name='tsc_adjust'/&gt;
      &lt;feature policy='require' name='umip'/&gt;
      &lt;feature policy='require' name='md-clear'/&gt;
      &lt;feature policy='require' name='stibp'/&gt;
      &lt;feature policy='require' name='arch-capabilities'/&gt;
      &lt;feature policy='require' name='ssbd'/&gt;
      &lt;feature policy='require' name='xsaveopt'/&gt;
      &lt;feature policy='require' name='pdpe1gb'/&gt;
      &lt;feature policy='require' name='invtsc'/&gt;
      &lt;feature policy='require' name='ibpb'/&gt;
      &lt;feature policy='require' name='amd-ssbd'/&gt;
      &lt;feature policy='require' name='skip-l1dfl-vmentry'/&gt;
      &lt;feature policy='require' name='pschange-mc-no'/&gt;
    &lt;/cpu&gt;</pre></li><li class="listitem"><p class="simpara">
						Open the XML configuration of the VM you intend to migrate, and replace the contents of the <code class="literal">&lt;cpu&gt;</code> section with the settings obtained in the previous step.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh edit <span class="emphasis"><em>VM-name</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						If the VM is running, restart it.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh reboot <span class="emphasis"><em>VM-name</em></span></strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#sharing-virtual-machine-disk-images-with-other-hosts_migrating-virtual-machines" title="12.5. Sharing virtual machine disk images with other hosts">Sharing virtual machine disk images with other hosts</a>
					</li><li class="listitem">
						<a class="link" href="#migrating-a-virtual-machine-using-the-cli_migrating-virtual-machines" title="12.6. Migrating a virtual machine by using the command-line interface">Migrating a virtual machine by using the command-line interface</a>
					</li><li class="listitem">
						<a class="link" href="#proc_live-migrating-a-virtual-machine-using-the-web-console_migrating-virtual-machines" title="12.7. Live migrating a virtual machine by using the web console">Live-migrating a virtual machine by using the web console</a>
					</li></ul></div></section><section class="section" id="sharing-virtual-machine-disk-images-with-other-hosts_migrating-virtual-machines"><div class="titlepage"><div><div><h3 class="title">12.5. Sharing virtual machine disk images with other hosts</h3></div></div></div><p class="_abstract _abstract">
				To perform a live migration of a virtual machine (VM) between <a class="link" href="#supported-hosts-for-virtual-machine-migration_migrating-virtual-machines" title="12.10. Supported hosts for virtual machine migration">supported KVM hosts</a>, you must also migrate the storage of the running VM in a way that makes it possible for the VM to read from and write to the storage during the migration process.
			</p><p>
				One of the methods to do this is using shared VM storage. The following procedure provides instructions for sharing a locally stored VM image with the source host and the destination host by using the NFS protocol.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The VM intended for migration is shut down.
					</li><li class="listitem">
						Optional: A host system is available for hosting the storage that is not the source or destination host, but both the source and the destination host can reach it through the network. This is the optimal solution for shared storage and is recommended by Red Hat.
					</li><li class="listitem">
						Make sure that NFS file locking is not used as it is not supported in KVM.
					</li><li class="listitem">
						The NFS protocol is installed and enabled on the source and destination hosts. See
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_using_network_file_services/deploying-an-nfs-server_configuring-and-using-network-file-services">Deploying an NFS server</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Connect to the host that will provide shared storage. In this example, it is the <code class="literal">example-shared-storage</code> host:
					</p><pre class="screen"># <span class="strong strong"><strong>ssh root@<span class="emphasis"><em>example-shared-storage</em></span></strong></span>
root@example-shared-storage's password:
Last login: Mon Sep 24 12:05:36 2019
root~#</pre></li><li class="listitem"><p class="simpara">
						Create a directory on the source host that will hold the disk image and will be shared with the migration hosts:
					</p><pre class="screen"># <span class="strong strong"><strong>mkdir <span class="emphasis"><em>/var/lib/libvirt/shared-images</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Copy the disk image of the VM from the source host to the newly created directory. The following example copies the disk image <code class="literal">example-disk-1</code> of the VM to the <code class="literal">/var/lib/libvirt/shared-images/</code> directory of the <code class="literal">example-shared-storage</code> host:
					</p><pre class="screen"># <span class="strong strong"><strong>scp /var/lib/libvirt/images/<span class="emphasis"><em>example-disk-1</em></span>.qcow2 root@<span class="emphasis"><em>example-shared-storage</em></span>:/var/lib/libvirt/shared-images/<span class="emphasis"><em>example-disk-1</em></span>.qcow2</strong></span></pre></li><li class="listitem"><p class="simpara">
						On the host that you want to use for sharing the storage, add the sharing directory to the <code class="literal">/etc/exports</code> file. The following example shares the <code class="literal">/var/lib/libvirt/shared-images</code> directory with the <code class="literal">example-source-machine</code> and <code class="literal">example-destination-machine</code> hosts:
					</p><pre class="screen"># <span class="strong strong"><strong>/var/lib/libvirt/shared-images <span class="emphasis"><em>example-source-machine</em></span>(rw,no_root_squash) <span class="emphasis"><em>example-destination-machine</em></span>(rw,no\_root_squash)</strong></span></pre></li><li class="listitem"><p class="simpara">
						On both the source and destination host, mount the shared directory in the <code class="literal">/var/lib/libvirt/images</code> directory:
					</p><pre class="screen"># <span class="strong strong"><strong>mount <span class="emphasis"><em>example-shared-storage</em></span>:/var/lib/libvirt/shared-images /var/lib/libvirt/images</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Start the VM on the source host and observe if it boots successfully.
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_using_network_file_services/deploying-an-nfs-server_configuring-and-using-network-file-services">Deploying an NFS server</a>
					</li></ul></div></section><section class="section" id="migrating-a-virtual-machine-using-the-cli_migrating-virtual-machines"><div class="titlepage"><div><div><h3 class="title">12.6. Migrating a virtual machine by using the command-line interface</h3></div></div></div><p>
				If the current host of a virtual machine (VM) becomes unsuitable or cannot be used anymore, or if you want to redistribute the hosting workload, you can migrate the VM to another KVM host. The following procedure provides instructions and examples for various scenarios of such migrations.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The source host and the destination host both use the KVM hypervisor.
					</li><li class="listitem">
						The source host and the destination host are able to reach each other over the network. Use the <code class="literal">ping</code> utility to verify this.
					</li><li class="listitem"><p class="simpara">
						Ensure the following ports are open on the destination host.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Port 22 is needed for connecting to the destination host by using SSH.
							</li><li class="listitem">
								Port 16509 is needed for connecting to the destination host by using TLS.
							</li><li class="listitem">
								Port 16514 is needed for connecting to the destination host by using TCP.
							</li><li class="listitem">
								Ports 49152-49215 are needed by QEMU for transfering the memory and disk migration data.
							</li></ul></div></li><li class="listitem">
						For the migration to be supportable by Red Hat, the source host and destination host must be using specific operating systems and machine types. To ensure this is the case, see <a class="link" href="#supported-hosts-for-virtual-machine-migration_migrating-virtual-machines" title="12.10. Supported hosts for virtual machine migration">Supported hosts for virtual machine migration</a>.
					</li><li class="listitem">
						The VM must be compatible with the CPU features of the destination host. To ensure this is the case, see <a class="link" href="#verifying-host-cpu-compatibility-for-virtual-machine-migration_migrating-virtual-machines" title="12.4. Verifying host CPU compatibility for virtual machine migration">Verifying host CPU compatibility for virtual machine migration</a>.
					</li><li class="listitem"><p class="simpara">
						The disk images of VMs that will be migrated are accessible to both the source host and the destination host. This is optional for offline migration, but required for migrating a running VM. To ensure storage accessibility for both hosts, one of the following must apply:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								You are using storage area network (SAN) logical units (LUNs).
							</li><li class="listitem">
								You are using a <a class="link" href="https://docs.ceph.com/en/latest/rados/">Ceph storage clusters</a>.
							</li><li class="listitem">
								You have copied the disk image of the VM to the destination host, and you will use <code class="literal">--copy-storage-all</code> parameter when migrating the VM. Alternatively, you have <a class="link" href="#creating-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli" title="15.6.1. Creating a virtual disk image by using qemu-img">created a disk image</a> with the same format and size as the source VM disk.
							</li><li class="listitem">
								The disk image is located on a separate networked location. For instructions to set up such shared VM storage, see <a class="link" href="#sharing-virtual-machine-disk-images-with-other-hosts_migrating-virtual-machines" title="12.5. Sharing virtual machine disk images with other hosts">Sharing virtual machine disk images with other hosts</a>.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						When migrating a running VM, your network bandwidth must be higher than the rate in which the VM generates dirty memory pages.
					</p><p class="simpara">
						To obtain the dirty page rate of your VM before you start the live migration, do the following:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								Monitor the rate of dirty page generation of the VM for a short period of time.
							</p><pre class="screen"># <span class="strong strong"><strong>virsh domdirtyrate-calc <span class="emphasis"><em>example-VM</em></span> 30</strong></span></pre></li><li class="listitem"><p class="simpara">
								After the monitoring finishes, obtain its results:
							</p><pre class="screen"># <span class="strong strong"><strong>virsh domstats <span class="emphasis"><em>example-VM</em></span> --dirtyrate</strong></span>
Domain: 'example-VM'
  dirtyrate.calc_status=2
  dirtyrate.calc_start_time=200942
  dirtyrate.calc_period=30
  dirtyrate.megabytes_per_second=2</pre><p class="simpara">
								In this example, the VM is generating 2 MB of dirty memory pages per second. Attempting to live-migrate such a VM on a network with a bandwidth of 2 MB/s or less will cause the live migration not to progress if you do not pause the VM or lower its workload.
							</p><p class="simpara">
								To ensure that the live migration finishes successfully, Red Hat recommends that your network bandwidth is significantly greater than the VM’s dirty page generation rate.
							</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
									The value of the <code class="literal">calc_period</code> option might differ based on the workload and dirty page rate. You can experiment with several <code class="literal">calc_period</code> values to determine the most suitable period that aligns with the dirty page rate in your environment.
								</p></div></rh-alert></li></ul></div></li><li class="listitem">
						When migrating an existing VM in a public bridge tap network, the source and destination hosts must be located on the same network. Otherwise, the VM network will not work after migration.
					</li><li class="listitem"><p class="simpara">
						When performing a VM migration, the <code class="literal">virsh</code> client on the source host can use one of several protocols to connect to the libvirt daemon on the destination host. Examples in the following procedure use an SSH connection, but you can choose a different one.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								If you want libvirt to use an SSH connection, ensure that the <code class="literal">virtqemud</code> socket is enabled and running on the destination host.
							</p><pre class="screen"># <span class="strong strong"><strong>systemctl enable --now virtqemud.socket</strong></span></pre></li><li class="listitem"><p class="simpara">
								If you want libvirt to use a TLS connection, ensure that the <code class="literal">virtproxyd-tls</code> socket is enabled and running on the destination host.
							</p><pre class="screen"># <span class="strong strong"><strong>systemctl enable --now virtproxyd-tls.socket</strong></span></pre></li><li class="listitem"><p class="simpara">
								If you want libvirt to use a TCP connection, ensure that the <code class="literal">virtproxyd-tcp</code> socket is enabled and running on the destination host.
							</p><pre class="screen"># <span class="strong strong"><strong>systemctl enable --now virtproxyd-tcp.socket</strong></span></pre></li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Use the <code class="literal">virsh migrate</code> command with options appropriate for your migration requirements.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								The following command migrates the <code class="literal">example-VM-1</code> VM from your local host to the system connection of the <code class="literal">example-destination</code> host by using an SSH tunnel. The VM keeps running during the migration.
							</p><pre class="screen"># <span class="strong strong"><strong>virsh migrate --persistent --live <span class="emphasis"><em>example-VM-1</em></span> qemu+ssh://<span class="emphasis"><em>example-destination</em></span>/system</strong></span></pre></li><li class="listitem"><p class="simpara">
								The following commands enable you to make manual adjustments to the configuration of the <code class="literal">example-VM-2</code> VM running on your local host, and then migrate the VM to the <code class="literal">example-destination</code> host. The migrated VM will automatically use the updated configuration.
							</p><pre class="screen"># <span class="strong strong"><strong>virsh dumpxml --migratable <span class="emphasis"><em>example-VM-2</em></span> &gt; <span class="emphasis"><em>example-VM-2</em></span>.xml</strong></span>
# <span class="strong strong"><strong>vi <span class="emphasis"><em>example-VM-2</em></span>.xml</strong></span>
# <span class="strong strong"><strong>virsh migrate --live --persistent --xml <span class="emphasis"><em>example-VM-2</em></span>.xml <span class="emphasis"><em>example-VM-2</em></span> qemu+ssh://<span class="emphasis"><em>example-destination</em></span>/system</strong></span></pre><p class="simpara">
								This procedure can be useful for example when the destination host needs to use a different path to access the shared VM storage or when configuring a feature specific to the destination host.
							</p></li><li class="listitem"><p class="simpara">
								The following command suspends the <code class="literal">example-VM-3</code> VM from the <code class="literal">example-source</code> host, migrates it to the <code class="literal">example-destination</code> host, and instructs it to use the adjusted XML configuration, provided by the <code class="literal">example-VM-3-alt.xml</code> file. When the migration is completed, <code class="literal">libvirt</code> resumes the VM on the destination host.
							</p><pre class="screen"># <span class="strong strong"><strong>virsh migrate <span class="emphasis"><em>example-VM-3</em></span> qemu+ssh://<span class="emphasis"><em>example-source</em></span>/system qemu+ssh://<span class="emphasis"><em>example-destination</em></span>/system --xml <span class="emphasis"><em>example-VM-3-alt</em></span>.xml</strong></span></pre><p class="simpara">
								After the migration, the VM is in the shut off state on the source host, and the migrated copy is deleted after it is shut down.
							</p></li></ol></div></li></ol></div><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
						The following deletes the shut-down <code class="literal">example-VM-4</code> VM from the <code class="literal">example-source</code> host, and moves its configuration to the <code class="literal">example-destination</code> host.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh migrate --offline --persistent --undefinesource <span class="emphasis"><em>example-VM-4</em></span> qemu+ssh://<span class="emphasis"><em>example-source</em></span>/system qemu+ssh://<span class="emphasis"><em>example-destination</em></span>/system</strong></span></pre><p class="simpara">
						Note that this type of migration does not require moving the VM’s disk image to shared storage. However, for the VM to be usable on the destination host, you also need to migrate the VM’s disk image. For example:
					</p><pre class="screen"># <span class="strong strong"><strong>scp root@<span class="emphasis"><em>example-source</em></span>:/var/lib/libvirt/images/<span class="emphasis"><em>example-VM-4</em></span>.qcow2 root@<span class="emphasis"><em>example-destination</em></span>:/var/lib/libvirt/images/<span class="emphasis"><em>example-VM-4</em></span>.qcow2</strong></span></pre></li><li class="listitem"><p class="simpara">
						The following command migrates the <span class="emphasis"><em>example-VM-5</em></span> VM to the <span class="emphasis"><em>example-destination</em></span> host and uses multiple parallel connections, also known as multiple file descriptors (multi-FD) migration. With multi-FD migration, you can speed up the migration by utilizing all of the available network bandwidth for the migration process.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh migrate --parallel --parallel-connections 4 <span class="emphasis"><em>&lt;example-VM-5&gt;</em></span> qemu+ssh://<span class="emphasis"><em>&lt;example-destination&gt;</em></span>/system</strong></span></pre><p class="simpara">
						This example uses 4 multi-FD channels to migrate the <span class="emphasis"><em>example-VM-5</em></span> VM. It is recommended to use one channel for each 10 Gbps of available network bandwidth. The default value is 2 channels.
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Wait for the migration to complete. The process may take some time depending on network bandwidth, system load, and the size of the VM. If the <code class="literal">--verbose</code> option is not used for <code class="literal">virsh migrate</code>, the CLI does not display any progress indicators except errors.
							</p><p class="simpara">
								When the migration is in progress, you can use the <code class="literal">virsh domjobinfo</code> utility to display the migration statistics.
							</p></li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						On the destination host, list the available VMs to verify if the VM has been migrated:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh list</strong></span>
Id      Name             State
----------------------------------
10    example-VM-1      running</pre><p class="simpara">
						If the migration is still running, this command will list the VM state as <code class="literal">paused</code>.
					</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						In some cases, the target host will not be compatible with certain values of the migrated VM’s XML configuration, such as the network name or CPU type. As a result, the VM will fail to boot on the target host. To fix these problems, you can update the problematic values by using the <code class="literal">virsh edit</code> command. After updating the values, you must restart the VM for the changes to be applied.
					</li><li class="listitem"><p class="simpara">
						If a live migration is taking a long time to complete, this may be because the VM is under heavy load and too many memory pages are changing for live migration to be possible. To fix this problem, change the migration to a non-live one by suspending the VM.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh suspend <span class="emphasis"><em>example-VM-1</em></span></strong></span></pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">virsh migrate --help</code> command
					</li><li class="listitem">
						<code class="literal">virsh (1)</code> man page on your system
					</li></ul></div></section><section class="section" id="proc_live-migrating-a-virtual-machine-using-the-web-console_migrating-virtual-machines"><div class="titlepage"><div><div><h3 class="title">12.7. Live migrating a virtual machine by using the web console</h3></div></div></div><p class="_abstract _abstract">
				If you wish to migrate a virtual machine (VM) that is performing tasks which require it to be constantly running, you can migrate that VM to another KVM host without shutting it down. This is also known as live migration. The following instructions explain how to do so by using the web console.
			</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					For tasks that modify memory pages faster than KVM can transfer them, such as heavy I/O load tasks, it is recommended that you do not live migrate the VM.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You have installed the RHEL 9 web console.
					</p><p class="simpara">
						For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
					</p></li><li class="listitem">
						The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
					</li><li class="listitem">
						The source and destination hosts are running.
					</li><li class="listitem"><p class="simpara">
						Ensure the following ports are open on the destination host.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Port 22 is needed for connecting to the destination host by using SSH.
							</li><li class="listitem">
								Port 16509 is needed for connecting to the destination host by using TLS.
							</li><li class="listitem">
								Port 16514 is needed for connecting to the destination host by using TCP.
							</li><li class="listitem">
								Ports 49152-49215 are needed by QEMU for transfering the memory and disk migration data.
							</li></ul></div></li><li class="listitem">
						The VM must be compatible with the CPU features of the destination host. To ensure this is the case, see <a class="link" href="#verifying-host-cpu-compatibility-for-virtual-machine-migration_migrating-virtual-machines" title="12.4. Verifying host CPU compatibility for virtual machine migration">Verifying host CPU compatibility for virtual machine migration</a>.
					</li><li class="listitem">
						The VM’s disk images are located on a <a class="link" href="#sharing-virtual-machine-disk-images-with-other-hosts_migrating-virtual-machines" title="12.5. Sharing virtual machine disk images with other hosts">shared storage</a> that is accessible to the source host as well as the destination host.
					</li><li class="listitem"><p class="simpara">
						When migrating a running VM, your network bandwidth must be higher than the rate in which the VM generates dirty memory pages.
					</p><p class="simpara">
						To obtain the dirty page rate of your VM before you start the live migration, do the following in your command-line interface:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Monitor the rate of dirty page generation of the VM for a short period of time.
							</p><pre class="screen"># <span class="strong strong"><strong>virsh domdirtyrate-calc <span class="emphasis"><em>vm-name</em></span> 30</strong></span></pre></li><li class="listitem"><p class="simpara">
								After the monitoring finishes, obtain its results:
							</p><pre class="screen"># <span class="strong strong"><strong>virsh domstats <span class="emphasis"><em>vm-name</em></span> --dirtyrate</strong></span>
Domain: '<span class="emphasis"><em>vm-name</em></span>'
  dirtyrate.calc_status=2
  dirtyrate.calc_start_time=200942
  dirtyrate.calc_period=30
  dirtyrate.megabytes_per_second=2</pre><p class="simpara">
								In this example, the VM is generating 2 MB of dirty memory pages per second. Attempting to live-migrate such a VM on a network with a bandwidth of 2 MB/s or less will cause the live migration not to progress if you do not pause the VM or lower its workload.
							</p><p class="simpara">
								To ensure that the live migration finishes successfully, Red Hat recommends that your network bandwidth is significantly greater than the VM’s dirty page generation rate.
							</p></li></ol></div></li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The value of the <code class="literal">calc_period</code> option might differ based on the workload and dirty page rate. You can experiment with several <code class="literal">calc_period</code> values to determine the most suitable period that aligns with the dirty page rate in your environment.
				</p></div></rh-alert><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						In the Virtual Machines interface of the web console, click the Menu button <span class="guibutton">⋮</span> of the VM that you want to migrate.
					</p><p class="simpara">
						A drop down menu appears with controls for various VM operations.
					</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/91e478e619e8da31d1c80511fb976426/virt-cockpit-VM-running-menu.png" alt="The virtual machines main page displaying the available options when the VM is running."></div></div></li><li class="listitem"><p class="simpara">
						Click <span class="guibutton">Migrate</span>
					</p><p class="simpara">
						The Migrate VM to another host dialog appears.
					</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/759224676d9d914a9cbd76ee8bfd7e78/virt-cockpit-VM-migrate.png" width="540" alt="The Migrate VM to another host dialog box with fields to enter the URI of the destination host and set the migration duration."></div></div></li><li class="listitem">
						Enter the URI of the destination host.
					</li><li class="listitem"><p class="simpara">
						Configure the duration of the migration:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Permanent</strong></span> - Do not check the box if you wish to migrate the VM permanently. Permanent migration completely removes the VM configuration from the source host.
							</li><li class="listitem">
								<span class="strong strong"><strong>Temporary</strong></span> - Temporary migration migrates a copy of the VM to the destination host. This copy is deleted from the destination host when the VM is shut down. The original VM remains on the source host.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Click <span class="guibutton">Migrate</span>
					</p><p class="simpara">
						Your VM is migrated to the destination host.
					</p></li></ol></div><div class="formalpara"><p class="title"><strong>Verification</strong></p><p>
					To verify whether the VM has been successfully migrated and is working correctly:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Confirm whether the VM appears in the list of VMs available on the destination host.
					</li><li class="listitem">
						Start the migrated VM and observe if it boots up.
					</li></ul></div></section><section class="section" id="live-migrating-a-virtual-machine-with-an-attached-mellanox-virtual-function_migrating-virtual-machines"><div class="titlepage"><div><div><h3 class="title">12.8. Live migrating a virtual machine with an attached Mellanox virtual function</h3></div></div></div><p>
				As a Technology Preview, you can live migrate a virtual machine (VM) with an attached virtual function (VF) of a Mellanox networking device. Currently, this is only possible when using a Mellanox CX-7 networking device. The VF on the Mellanox CX-7 networking device uses a new <code class="literal">mlx5_vfio_pci</code> driver, which adds functionality that is necessary for the live migration, and <code class="literal">libvirt</code> binds the new driver to the VF automatically.
			</p><div class="formalpara"><p class="title"><strong>Limitations</strong></p><p>
					Currently, some virtualization features cannot be used when live migrating a VM with an attached Mellanox virtual function:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Calculating dirty memory page rate generation of the VM.
					</li><li class="listitem">
						Using a post-copy live migration.
					</li><li class="listitem">
						Using a virtual I/O Memory Management Unit (vIOMMU) device in the VM.
					</li></ul></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					This feature is included in RHEL 9 only as a <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview</a>, which means it is not supported.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You have a Mellanox CX-7 networking device with a firmware version that is equal to or greater than <span class="emphasis"><em>28.36.1010</em></span>.
					</p><p class="simpara">
						Refer to <a class="link" href="https://docs.nvidia.com/networking/adapters/index.html">Mellanox documentation</a> for details about firmware versions.
					</p></li><li class="listitem"><p class="simpara">
						The <code class="literal">mstflint</code> package is installed on both the source and destination host:
					</p><pre class="screen"># <span class="strong strong"><strong>dnf install mstflint</strong></span></pre></li><li class="listitem"><p class="simpara">
						The Mellanox CX-7 networking device has <code class="literal">VF_MIGRATION_MODE</code> set to <code class="literal">MIGRATION_ENABLED</code>:
					</p><pre class="screen"># <span class="strong strong"><strong>mstconfig -d <span class="emphasis"><em>&lt;device_pci_address&gt;</em></span> query | grep -i VF_migration</strong></span>

VF_MIGRATION_MODE                           MIGRATION_ENABLED(2)</pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								You can set <code class="literal">VF_MIGRATION_MODE</code> to <code class="literal">MIGRATION_ENABLED</code> by using the following command:
							</p><pre class="screen"># <span class="strong strong"><strong>mstconfig -d <span class="emphasis"><em>&lt;device_pci_address&gt;</em></span> set VF_MIGRATION_MODE=2</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						The <code class="literal">openvswitch</code> package is installed on both the source and destination host:
					</p><pre class="screen"># <span class="strong strong"><strong>dnf install openvswitch</strong></span></pre></li><li class="listitem"><p class="simpara">
						The CPU and the firmware of your host support the I/O Memory Management Unit (IOMMU).
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								If using an Intel CPU, it must support the Intel Virtualization Technology for Directed I/O (VT-d).
							</li><li class="listitem">
								If using an AMD CPU, it must support the AMD-Vi feature.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						The host system uses Access Control Service (ACS) to provide direct memory access (DMA) isolation for PCIe topology. Verify this with the system vendor.
					</p><p class="simpara">
						For additional information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_virtualization/4.0/html/hardware_considerations_for_implementing_sr-iov/index">Hardware Considerations for Implementing SR-IOV</a>.
					</p></li><li class="listitem"><p class="simpara">
						The host network interface you want to use for creating VFs is running. For example, to activate the <span class="emphasis"><em>eth1</em></span> interface and verify it is running, use the following commands:
					</p><pre class="screen"># <span class="strong strong"><strong>ip link set eth1 up</strong></span>
# <span class="strong strong"><strong>ip link show eth1</strong></span>
8: eth1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP mode DEFAULT qlen 1000
   link/ether a0:36:9f:8f:3f:b8 brd ff:ff:ff:ff:ff:ff
   vf 0 MAC 00:00:00:00:00:00, spoof checking on, link-state auto
   vf 1 MAC 00:00:00:00:00:00, spoof checking on, link-state auto
   vf 2 MAC 00:00:00:00:00:00, spoof checking on, link-state auto
   vf 3 MAC 00:00:00:00:00:00, spoof checking on, link-state auto</pre></li><li class="listitem"><p class="simpara">
						For SR-IOV device assignment to work, the IOMMU feature must be enabled in the host BIOS and kernel. To do so:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								On an Intel host, enable Intel Virtualization Technology for Directed I/O (VT-d):
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
										Regenerate the GRUB configuration with the <code class="literal">intel_iommu=on</code> and <code class="literal">iommu=pt</code> parameters:
									</p><pre class="screen"># <span class="strong strong"><strong>grubby --args="intel_iommu=on iommu=pt" --update-kernel=ALL</strong></span></pre></li><li class="listitem">
										Reboot the host.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								On an AMD host, enable AMD-Vi:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
										Regenerate the GRUB configuration with the <code class="literal">iommu=pt</code> parameter:
									</p><pre class="screen"># <span class="strong strong"><strong>grubby --args="iommu=pt" --update-kernel=ALL</strong></span></pre></li><li class="listitem">
										Reboot the host.
									</li></ol></div></li></ul></div></li><li class="listitem">
						The source host and the destination host both use the KVM hypervisor.
					</li><li class="listitem">
						The source host and the destination host are able to reach each other over the network. Use the <code class="literal">ping</code> utility to verify this.
					</li><li class="listitem"><p class="simpara">
						The following ports are open on the destination host.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Port 22 is needed for connecting to the destination host by using SSH.
							</li><li class="listitem">
								Port 16509 is needed for connecting to the destination host by using TLS.
							</li><li class="listitem">
								Port 16514 is needed for connecting to the destination host by using TCP.
							</li><li class="listitem">
								Ports 49152-49215 are needed by QEMU for transferring the memory and disk migration data.
							</li></ul></div></li><li class="listitem">
						The source host and destination host are using operating systems and machine types that allow migration. To ensure this is the case, see <a class="link" href="#supported-hosts-for-virtual-machine-migration_migrating-virtual-machines" title="12.10. Supported hosts for virtual machine migration">Supported hosts for virtual machine migration</a>.
					</li><li class="listitem">
						The VM must be compatible with the CPU features of the destination host. To ensure this is the case, see <a class="link" href="#verifying-host-cpu-compatibility-for-virtual-machine-migration_migrating-virtual-machines" title="12.4. Verifying host CPU compatibility for virtual machine migration">Verifying host CPU compatibility for virtual machine migration</a>.
					</li><li class="listitem"><p class="simpara">
						The disk images of VMs that will be migrated are located on a separate networked location accessible to both the source host and the destination host. This is optional for offline migration, but required for migrating a running VM.
					</p><p class="simpara">
						For instructions to set up such shared VM storage, see <a class="link" href="#sharing-virtual-machine-disk-images-with-other-hosts_migrating-virtual-machines" title="12.5. Sharing virtual machine disk images with other hosts">Sharing virtual machine disk images with other hosts</a>.
					</p></li><li class="listitem">
						When migrating a running VM, your network bandwidth must be higher than the rate in which the VM generates dirty memory pages.
					</li><li class="listitem"><p class="simpara">
						A virtual network socket is enabled that corresponds to the connection protocol.
					</p><p class="simpara">
						When performing a VM migration, the <code class="literal">virsh</code> client on the source host can use one of several protocols to connect to the libvirt daemon on the destination host. Examples in the following procedure use an SSH connection, but you can choose a different one.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								If you want libvirt to use an SSH connection, ensure that the <code class="literal">virtqemud</code> socket is enabled and running on the destination host.
							</p><pre class="screen"># <span class="strong strong"><strong>systemctl enable --now virtqemud.socket</strong></span></pre></li><li class="listitem"><p class="simpara">
								If you want libvirt to use a TLS connection, ensure that the <code class="literal">virtproxyd-tls</code> socket is enabled and running on the destination host.
							</p><pre class="screen"># <span class="strong strong"><strong>systemctl enable --now virtproxyd-tls.socket</strong></span></pre></li><li class="listitem"><p class="simpara">
								If you want libvirt to use a TCP connection, ensure that the <code class="literal">virtproxyd-tcp</code> socket is enabled and running on the destination host.
							</p><pre class="screen"># <span class="strong strong"><strong>systemctl enable --now virtproxyd-tcp.socket</strong></span></pre></li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On the source host, set the Mellanox networking device to the <code class="literal">switchdev</code> mode.
					</p><pre class="screen"># <span class="strong strong"><strong>devlink dev eswitch set pci/<span class="emphasis"><em>&lt;device_pci_address&gt;</em></span> mode switchdev</strong></span></pre></li><li class="listitem"><p class="simpara">
						On the source host, create a virtual function on the Mellanox device.
					</p><pre class="screen"># <span class="strong strong"><strong>echo 1 &gt; /sys/bus/pci/devices/0000\:e1\:00.0/sriov_numvfs</strong></span></pre><p class="simpara">
						The <code class="literal">/0000\:e1\:00.0/</code> part of the file path is based on the PCI address of the device. In the example it is: <code class="literal">0000:e1:00.0</code>
					</p></li><li class="listitem"><p class="simpara">
						On the source host, unbind the VF from its driver.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-detach <span class="emphasis"><em>&lt;vf_pci_address&gt;</em></span> --driver pci-stub</strong></span></pre><p class="simpara">
						You can view the PCI address of the VF by using the following command:
					</p><pre class="screen"># <span class="strong strong"><strong>lshw -c network -businfo</strong></span>

Bus info                     Device             Class           Description
===========================================================================
pci@0000:e1:00.0  enp225s0np0    network        MT2910 Family [ConnectX-7]
pci@0000:e1:00.1  enp225s0v0     network        ConnectX Family mlx5Gen Virtual Function</pre></li><li class="listitem"><p class="simpara">
						On the source host, enable the migration function of the VF.
					</p><pre class="screen"># <span class="strong strong"><strong>devlink port function set pci/0000:e1:00.0/1 migratable enable</strong></span></pre><p class="simpara">
						In this example, <code class="literal">pci/0000:e1:00.0/1</code> refers to the first VF on the Mellanox device with the given PCI address.
					</p></li><li class="listitem"><p class="simpara">
						On the source host, configure Open vSwitch (OVS) for the migration of the VF. If the Mellanox device is in <code class="literal">switchdev</code> mode, it cannot transfer data over the network.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Ensure the <code class="literal">openvswitch</code> service is running.
							</p><pre class="screen"># <span class="strong strong"><strong>systemctl start openvswitch</strong></span></pre></li><li class="listitem"><p class="simpara">
								Enable hardware offloading to improve networking performance.
							</p><pre class="screen"># <span class="strong strong"><strong>ovs-vsctl set Open_vSwitch . other_config:hw-offload=true</strong></span></pre></li><li class="listitem"><p class="simpara">
								Increase the maximum idle time to ensure network connections remain open during the migration.
							</p><pre class="screen"># <span class="strong strong"><strong>ovs-vsctl set Open_vSwitch . other_config:max-idle=300000</strong></span></pre></li><li class="listitem"><p class="simpara">
								Create a new bridge in the OVS instance.
							</p><pre class="screen"># <span class="strong strong"><strong>ovs-vsctl add-br <span class="emphasis"><em>&lt;bridge_name&gt;</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
								Restart the <code class="literal">openvswitch</code> service.
							</p><pre class="screen"># <span class="strong strong"><strong>systemctl restart openvswitch</strong></span></pre></li><li class="listitem"><p class="simpara">
								Add the physical Mellanox device to the OVS bridge.
							</p><pre class="screen"># <span class="strong strong"><strong>ovs-vsctl add-port <span class="emphasis"><em>&lt;bridge_name&gt;</em></span> enp225s0np0</strong></span></pre><p class="simpara">
								In this example, <code class="literal"><span class="emphasis"><em>&lt;bridge_name&gt;</em></span></code> is the name of the bridge you created in step <span class="emphasis"><em>d</em></span> and <code class="literal">enp225s0np0</code> is the network interface name of the Mellanox device.
							</p></li><li class="listitem"><p class="simpara">
								Add the VF of the Mellanox device to the OVS bridge.
							</p><pre class="screen"># <span class="strong strong"><strong>ovs-vsctl add-port <span class="emphasis"><em>&lt;bridge_name&gt;</em></span> enp225s0npf0vf0</strong></span></pre><p class="simpara">
								In this example, <code class="literal"><span class="emphasis"><em>&lt;bridge_name&gt;</em></span></code> is the name of the bridge you created in step <span class="emphasis"><em>d</em></span> and <code class="literal">enp225s0npf0vf0</code> is the network interface name of the VF.
							</p></li></ol></div></li><li class="listitem">
						Repeat steps 1-5 on the <span class="strong strong"><strong>destination host</strong></span>.
					</li><li class="listitem"><p class="simpara">
						On the source host, open a new file, such as <code class="literal">mlx_vf.xml</code>, and add the following XML configuration of the VF:
					</p><pre class="programlisting language-xml"> &lt;interface type='hostdev' managed='yes'&gt;
      &lt;mac address='52:54:00:56:8c:f7'/&gt;
      &lt;source&gt;
        &lt;address type='pci' domain='0x0000' bus='0xe1' slot='0x00' function='0x1'/&gt;
      &lt;/source&gt;
 &lt;/interface&gt;</pre><p class="simpara">
						This example configures a pass-through of the VF as a network interface for the VM. Ensure the MAC address is unique, and use the PCI address of the VF on the source host.
					</p></li><li class="listitem"><p class="simpara">
						On the source host, attach the VF XML file to the VM.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh attach-device <span class="emphasis"><em>&lt;vm_name&gt;</em></span> mlx_vf.xml --live --config</strong></span></pre><p class="simpara">
						In this example, <code class="literal">mlx_vf.xml</code> is the name of the XML file with the VF configuration. Use the <code class="literal">--live</code> option to attach the device to a running VM.
					</p></li><li class="listitem"><p class="simpara">
						On the source host, start the live migration of the running VM with the attached VF.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh migrate --live --domain <span class="emphasis"><em>&lt;vm_name&gt;</em></span> --desturi qemu+ssh://<span class="emphasis"><em>&lt;destination_host_ip_address&gt;</em></span>/system</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						In the migrated VM, view the network interface name of the Mellanox VF.
					</p><pre class="screen"># <span class="strong strong"><strong>ifconfig</strong></span>

eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
        inet 192.168.1.10  netmask 255.255.255.0  broadcast 192.168.1.255
        inet6 fe80::a00:27ff:fe4e:66a1  prefixlen 64  scopeid 0x20&lt;link&gt;
        ether 08:00:27:4e:66:a1  txqueuelen 1000  (Ethernet)
        RX packets 100000  bytes 6543210 (6.5 MB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 100000  bytes 6543210 (6.5 MB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

<span class="strong strong"><strong>enp4s0f0v0</strong></span>: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500
        inet 192.168.3.10  netmask 255.255.255.0  broadcast 192.168.3.255
        inet6 fe80::a00:27ff:fe4e:66c3  prefixlen 64  scopeid 0x20&lt;link&gt;
        ether 08:00:27:4e:66:c3  txqueuelen 1000  (Ethernet)
        RX packets 200000  bytes 12345678 (12.3 MB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 200000  bytes 12345678 (12.3 MB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</pre></li><li class="listitem"><p class="simpara">
						In the migrated VM, check that the Mellanox VF works, for example:
					</p><pre class="screen"># <span class="strong strong"><strong>ping -I <span class="emphasis"><em>&lt;VF_interface_name&gt;</em></span> 8.8.8.8</strong></span>

PING 8.8.8.8 (8.8.8.8) from 192.168.3.10 <span class="emphasis"><em>&lt;VF_interface_name&gt;</em></span>: 56(84) bytes of data.
64 bytes from 8.8.8.8: icmp_seq=1 ttl=57 time=27.4 ms
64 bytes from 8.8.8.8: icmp_seq=2 ttl=57 time=26.9 ms

--- 8.8.8.8 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 1002ms
rtt min/avg/max/mdev = 26.944/27.046/27.148/0.102 ms</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#migrating-a-virtual-machine-using-the-cli_migrating-virtual-machines" title="12.6. Migrating a virtual machine by using the command-line interface">Migrating a virtual machine by using the command-line interface</a>
					</li><li class="listitem">
						<a class="link" href="#troubleshooting-virtual-machine-migrations_migrating-virtual-machines" title="12.9. Troubleshooting virtual machine migrations">Troubleshooting virtual machine migrations</a>
					</li></ul></div></section><section class="section" id="troubleshooting-virtual-machine-migrations_migrating-virtual-machines"><div class="titlepage"><div><div><h3 class="title">12.9. Troubleshooting virtual machine migrations</h3></div></div></div><p>
				If you are facing one of the following problems when migrating virtual machines (VMs), see the provided instructions to fix or avoid the issue.
			</p><section class="section" id="live_migration_of_a_vm_takes_a_long_time_without_completing"><div class="titlepage"><div><div><h4 class="title">12.9.1. Live migration of a VM takes a long time without completing</h4></div></div></div><p>
					<span class="strong strong"><strong>Cause</strong></span>
				</p><p>
					In some cases, migrating a running VM might cause the the VM to generate <span class="emphasis"><em>dirty memory pages</em></span> faster than they can be migrated. When this occurs, the migration cannot complete successfully.
				</p><p>
					The following scenarios frequently cause this problem:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Live migrating a VM under a heavy load
						</li><li class="listitem"><p class="simpara">
							Live migrating a VM that uses a large amount of memory, such as 1 TB or more
						</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
								Red Hat has successfully tested live migration of VMs with up to 6 TB of memory. However, for live migration scenarios that involve VMs with more than 1 TB of memory, customers should reach out to <a class="link" href="https://access.redhat.com/support/contact/technicalSupport">Red Hat technical support</a>.
							</p></div></rh-alert></li></ul></div><p>
					<span class="strong strong"><strong>Diagnosis</strong></span>
				</p><p>
					If your VM live migration is taking longer than expected, use the <code class="literal">virsh domjobinfo</code> command to obtain the memory page data for the VM:
				</p><pre class="screen"># <span class="strong strong"><strong>virsh domjobinfo <span class="emphasis"><em>vm-name</em></span></strong></span>

Job type:         Unbounded
Operation:        Outgoing migration
Time elapsed:     168286974    ms
Data processed:   26.106 TiB
Data remaining:   34.383 MiB
Data total:       10.586 TiB
Memory processed: 26.106 TiB
Memory remaining: 34.383 MiB
Memory total:     10.586 TiB
<span class="strong strong"><strong>Memory bandwidth: 29.056 MiB/s</strong></span>
<span class="strong strong"><strong>Dirty rate: 17225 pages/s</strong></span>
<span class="strong strong"><strong>Page size: 4096 bytes</strong></span></pre><p>
					In this output, the multiplication of <code class="literal">Dirty rate</code> and <code class="literal">Page size</code> is greater than <code class="literal">Memory bandwidth</code>. This means that the VM is generating dirty memory pages faster than the network can migrate them. As a consequence, the state of the VM on the destination host cannot converge with the state of the VM on the source host, which prevents the migration from completing.
				</p><p>
					<span class="strong strong"><strong>Fix</strong></span>
				</p><p>
					To improve the chances that a stalled live migration finishes successfully, you can do any of the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Reduce the workload of the VM, especially memory updates.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									To do this, stop or cancel non-essential processes in the guest operating system of the source VM.
								</li></ul></div></li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Increase the downtime allowed for the live migration:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Display the current maximum downtime at the end of a live migration for the VM that is being migrated:
								</p><pre class="screen"># <span class="strong strong"><strong>virsh migrate-getmaxdowntime <span class="emphasis"><em>vm-name</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
									Set a higher maximum downtime:
								</p><pre class="screen"># <span class="strong strong"><strong>virsh migrate-setmaxdowntime <span class="emphasis"><em>vm-name</em></span> <span class="emphasis"><em>downtime-in-miliseconds</em></span></strong></span></pre><p class="simpara">
									The higher you set the maximum downtime, the more likely it will be for the migration to complete.
								</p></li></ol></div></li><li class="listitem"><p class="simpara">
							Switch the live migration to <span class="emphasis"><em>post-copy</em></span> mode.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh migrate-start-postcopy <span class="emphasis"><em>vm-name</em></span></strong></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									This ensures that the memory pages of the VM can converge on the destination host, and that the migration can complete.
								</p><p class="simpara">
									However, when post-copy mode is active, the VM might slow down significantly, due to remote page requests from the destination host to the source host. In addition, if the network connection between the source host and the destination host stops working during post-copy migration, some of the VM processes may halt due to missing memory pages.
								</p><p class="simpara">
									Therefore, do not use post-copy migration if the VM availability is critical or if the migration network is unstable.
								</p></li></ul></div></li><li class="listitem">
							If your workload allows it, suspend the VM and let the migration finish as a <span class="emphasis"><em>non-live</em></span> migration. This increases the downtime of the VM, but in most cases ensures that the migration completes successfully.
						</li></ul></div><p>
					<span class="strong strong"><strong>Prevention</strong></span>
				</p><p>
					The probability of successfully completing a live migration of a VM depends on the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The workload of the VM during the migration
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									Before starting the migration, stop or cancel non-essential processes in the guest operating system of the VM.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							The network bandwidth that the host can use for migration
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									For optimal results of a live migration, the bandwidth of the network used for the migration must be significantly higher than the dirty page generation of the VM. For instructions on obtaining the VM dirty page generation rate, see the Prerequisites in <a class="link" href="#migrating-a-virtual-machine-using-the-cli_migrating-virtual-machines" title="12.6. Migrating a virtual machine by using the command-line interface">Migrating a virtual machine by using the command-line interface</a>.
								</li><li class="listitem">
									Both the source host and the destination host must have a dedicated network interface controller (NIC) for the migration. For live migrating a VM with more than 1 TB of memory, Red Hat recommends a NIC with the speed of 25 Gb/s or more.
								</li><li class="listitem">
									You can also specify the network bandwidth assigned to the live migration by using the <code class="literal">--bandwidth</code> option when initiating the migration. For migrating very large VMs, assign as much bandwidth as viable for your deployment.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							The mode of live migration
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									The default <span class="emphasis"><em>pre-copy</em></span> migration mode copies memory pages repeatedly if they become dirty.
								</li><li class="listitem"><p class="simpara">
									<span class="emphasis"><em>Post-copy</em></span> migration copies memory pages only once.
								</p><p class="simpara">
									To enable your live migration to switch to post-copy mode if the migration stalls, use the <code class="literal">--postcopy</code> option with <code class="literal">virsh migrate</code> when starting the migration.
								</p></li></ul></div></li><li class="listitem"><p class="simpara">
							The downtime specified for the deployment
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									You can adjust this during the migration by using <code class="literal">virsh migrate-setmaxdowntime</code> as described previously.
								</li></ul></div></li></ul></div></section></section><section class="section" id="supported-hosts-for-virtual-machine-migration_migrating-virtual-machines"><div class="titlepage"><div><div><h3 class="title">12.10. Supported hosts for virtual machine migration</h3></div></div></div><p>
				For the virtual machine (VM) migration to work properly and be supported by Red Hat, the source and destination hosts must be specific RHEL versions and machine types. The following table shows supported VM migration paths.
			</p><rh-table id="idm140237789923904"><table class="gt-4-cols lt-7-rows"><caption>Table 12.2. Live migration compatibility</caption><colgroup><col style="width: 25%; " class="col_1"><!--Empty--><col style="width: 25%; " class="col_2"><!--Empty--><col style="width: 25%; " class="col_3"><!--Empty--><col style="width: 25%; " class="col_4"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140237786649728" scope="col">Migration method</th><th align="left" valign="top" id="idm140237786648640" scope="col">Release type</th><th align="left" valign="top" id="idm140237786647552" scope="col">Future version example</th><th align="left" valign="top" id="idm140237786646464" scope="col">Support status</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140237786649728"> <p>
								Forward
							</p>
							 </td><td align="left" valign="top" headers="idm140237786648640"> <p>
								Minor release
							</p>
							 </td><td align="left" valign="top" headers="idm140237786647552"> <p>
								9.0.1 → 9.1
							</p>
							 </td><td align="left" valign="top" headers="idm140237786646464"> <p>
								On supported RHEL 9 systems: machine type <span class="strong strong"><strong>q35</strong></span>.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237786649728"> <p>
								Backward
							</p>
							 </td><td align="left" valign="top" headers="idm140237786648640"> <p>
								Minor release
							</p>
							 </td><td align="left" valign="top" headers="idm140237786647552"> <p>
								9.1 → 9.0.1
							</p>
							 </td><td align="left" valign="top" headers="idm140237786646464"> <p>
								On supported RHEL 9 systems: machine type <span class="strong strong"><strong>q35</strong></span>.
							</p>
							 </td></tr></tbody></table></rh-table><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					Support level is different for other virtualization solutions provided by Red Hat, including RHOSP and OpenShift Virtualization.
				</p></div></rh-alert></section></section><section class="chapter" id="creating-virtual-machine-snapshots_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h2 class="title">Chapter 13. Saving and restoring virtual machine state by using snapshots</h2></div></div></div><p>
			To save the current state of a virtual machine (VM), you can create a <span class="emphasis"><em>snapshot</em></span> of the VM. Afterwards, you can revert to the snapshot to return the VM to the saved state.
		</p><p>
			A VM snapshot contains the disk image of the VM. If you create a snapshot from a running VM (also known as a <span class="emphasis"><em>live snapshot</em></span>), the snapshot also contains the memory state of the VM, which includes running processes and applications.
		</p><p>
			Creating snapshots can be useful, for example, for the following tasks:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Saving a clean state of the guest operating system
				</li><li class="listitem">
					Ensuring that you have a restore point before performing a potentially destructive operation on the VM
				</li></ul></div><section class="section" id="support-limitations-for-virtual-machine-snapshots_creating-virtual-machine-snapshots"><div class="titlepage"><div><div><h3 class="title">13.1. Support limitations for virtual machine snapshots</h3></div></div></div><p class="_abstract _abstract">
				Red Hat supports the snapshot functionality for virtual machines (VMs) on RHEL only when you use <span class="strong strong"><strong>external</strong></span> snapshots. Currently, external snapshots are created on RHEL only when all of the following requirements are met:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Your host is using RHEL 9.4 or later.
					</li><li class="listitem">
						The VM is using file-based storage.
					</li><li class="listitem"><p class="simpara">
						You create the VM snapshot only in one of the following scenarios:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The VM is shut-down.
							</li><li class="listitem">
								If the VM is running, you use the <code class="literal">--disk-only --quiesce</code> options or the <code class="literal">--live --memspec</code> options.
							</li></ul></div></li></ul></div><p>
				Most other configurations create <span class="strong strong"><strong>internal</strong></span> snapshots, which are deprecated in RHEL 9. Internal snapshots might work for your use case, but Red Hat does not provide full testing and support for them.
			</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					Do not use internal snapshots in production environments.
				</p></div></rh-alert><p>
				To ensure that a snapshot is supported, display the XML configuration of the snapshot and check the snapshot type and storage:
			</p><pre class="screen"># <span class="strong strong"><strong>virsh snapshot-dumpxml <span class="emphasis"><em>&lt;vm-name&gt;</em></span> <span class="emphasis"><em>&lt;snapshot-name&gt;</em></span></strong></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Example output of a supported snapshot:
					</p><pre class="programlisting language-xml">&lt;domainsnapshot&gt;
  &lt;name&gt;sample-snapshot-name-1&lt;name&gt;
  &lt;state&gt;shutoff&lt;/state&gt;
  &lt;creationTime&gt;1706658764&lt;/creationTime&gt;
  &lt;memory snapshot='<span class="strong strong"><strong>no</strong></span>'/&gt;
  &lt;disks&gt;
    &lt;disk name='vda' snapshot='<span class="strong strong"><strong>external</strong></span>' type='<span class="strong strong"><strong>file</strong></span>'&gt;
      &lt;driver type='qcow2'/&gt;
      &lt;source file='/var/lib/libvirt/images/vm-name.sample-snapshot-name-1'/&gt;
    &lt;/disk&gt;
  &lt;/disks&gt;
  &lt;domain type='kvm'&gt;
  [...]</pre></li><li class="listitem"><p class="simpara">
						Example output of an unsupported snapshot:
					</p><pre class="programlisting language-xml">&lt;domainsnapshot&gt;
  &lt;name&gt;sample-snapshot-name-2&lt;/name&gt;
  &lt;state&gt;running&lt;/state&gt;
  &lt;creationTime&gt;1653396424&lt;/creationTime&gt;
  &lt;memory snapshot=<span class="strong strong"><strong>'internal'</strong></span>/&gt;
  &lt;disks&gt;
    &lt;disk name='vda' snapshot='<span class="strong strong"><strong>internal</strong></span>'/&gt;
    &lt;disk name='sda' snapshot='no'/&gt;
  &lt;/disks&gt;
  &lt;domain type='kvm'&gt;
  [...]</pre></li></ul></div></section><section class="section" id="creating-virtual-machine-snapshots-entering-metadata-on-the-command-line_creating-virtual-machine-snapshots"><div class="titlepage"><div><div><h3 class="title">13.2. Creating virtual machine snapshots by using the command-line interface</h3></div></div></div><p>
				To save the state of a virtual machine (VM) in a snapshot, you can use the <code class="literal command">virsh snapshot-create-as</code> command.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Your host is using RHEL 9.4 or later.
					</li><li class="listitem"><p class="simpara">
						The VM uses file-based storage. To check whether this is the case, use the following command and ensure that for the <code class="literal">disk</code> device, it displays <code class="literal">disk type</code> as <code class="literal">file</code>:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh dumpxml <span class="emphasis"><em>&lt;vm-name&gt;</em></span> | grep "disk type"</strong></span>
    &lt;disk type='<span class="strong strong"><strong>file</strong></span>' device='disk'&gt;
    &lt;disk type='file' device='cdrom'&gt;</pre></li><li class="listitem"><p class="simpara">
						If you want to create a VM snapshot that includes the memory of a running VM, you must have sufficient disk space to store the memory of the VM.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The minimum recommended space for saving the memory of a VM is equal to the VM’s assigned RAM. For example, saving the memory of a VM with 32 GB RAM requires up to 32 GB of disk space.
							</li><li class="listitem">
								If the VM is under heavy I/O load, significant additional disk space might be required.
							</li><li class="listitem">
								If the VM has assigned VFIO passthrough devices, additional disk space might be required.
							</li><li class="listitem"><p class="simpara">
								If a snapshot is created without pausing the VM, additional disk space might be required.
							</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
									Red Hat recommends not saving the memory of a running VMs that is under very high workload or that uses VFIO passthrough devices. Saving the memory of such VMs might fill up the host disk and degrade the system. Instead, consider creating snapshots without memory for such VMs.
								</p><p>
									In addition, note that not all VFIO devices are capable of creating snapshot with memory. Currently, creating a snapshot with memory works correctly only if the attached VFIO device is a Mellanox VF with the migration capability enabled.
								</p></div></rh-alert></li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To create a VM snapshot with the required parameters, use the <code class="literal">virsh snapshot-create-as</code> command.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh snapshot-create-as <span class="emphasis"><em>&lt;vm-name&gt;</em></span> <span class="emphasis"><em>&lt;snapshot-name&gt;</em></span> <span class="emphasis"><em>&lt;optional-description&gt;</em></span> <span class="emphasis"><em>&lt;additional-parameters&gt;</em></span></strong></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								To create a snapshot of a shut-down VM, use the <code class="literal">--disk-only</code> parameter. For example, the following command creates <code class="literal">Snapshot1</code> from the current disk-state of the shut-down <code class="literal">Testguest1</code> VM:
							</p><pre class="screen"># <span class="strong strong"><strong>virsh snapshot-create-as Testguest1 Snapshot1 --disk-only</strong></span>
Domain snapshot Snapshot1 created.</pre></li><li class="listitem"><p class="simpara">
								To create a snapshot that saves the disk-state of a running VM but not its memory, use the <code class="literal">--disk-only --quiesce</code> parameters. For example, the following command creates <code class="literal">Snapshot2</code> from the current disk state of the running <code class="literal">Testguest2</code> VM, with the description <code class="literal">clean system install</code>:
							</p><pre class="screen"># <span class="strong strong"><strong>virsh snapshot-create-as Testguest2 Snapshot2 "clean system install" --disk-only --quiesce</strong></span>
Domain snapshot Snapshot2 created.</pre></li><li class="listitem"><p class="simpara">
								To create a snapshot that pauses a running VM and saves its disk-state and memory, use the <code class="literal">--memspec</code> parameter. For example, the following command pauses the <code class="literal">Testguest3</code> VM and creates <code class="literal">Snapshot3</code> from the current disk and memory state of the VM. The VM memory is saved in the <code class="literal">/var/lib/libvirt/images/saved_memory.img</code> file. When the snapshot is complete, the VM automatically resumes operation.
							</p><pre class="screen"># <span class="strong strong"><strong>virsh snapshot-create-as Testguest3 Snapshot3 --memspec /var/lib/libvirt/images/saved_memory.img</strong></span>
Domain snapshot Snapshot3 created.</pre><p class="simpara">
								Pausing the VM during the snapshot process creates downtime, but might work more reliably than creating a live snapshot of a running VM (by using the <code class="literal">--live</code> option), especially for VMs under a heavy load.
							</p></li><li class="listitem"><p class="simpara">
								To create a snapshot that saves the disk-state of a running VM as well as its live memory, use the <code class="literal">--live --memspec</code> parameters. For example, the following command creates <code class="literal">Snapshot4</code> from the current disk and memory state of the running <code class="literal">Testguest4</code> VM, and saves the memory state in the <code class="literal">/var/lib/libvirt/images/saved_memory2.img</code> file.
							</p><pre class="screen"># <span class="strong strong"><strong>virsh snapshot-create-as Testguest4 Snapshot4 --live --memspec /var/lib/libvirt/images/saved_memory2.img</strong></span>
Domain snapshot Snapshot4 created.</pre></li></ul></div></li></ul></div><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					Saving the memory of a VM in a snapshot saves the state of the running processes in the guest operating system of the VM. However, when you revert to such a snapshot, the processes might fail due to a variety of factors, such as loss of network connectivity or unsynchronized system time.
				</p></div></rh-alert><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						List the snapshots associated with the specified VM:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh snapshot-list <span class="emphasis"><em>&lt;Testguest1&gt;</em></span></strong></span>

 Name                    Creation Time               State
--------------------------------------------------------------
Snapshot1               2024-01-30 18:34:58 +0100   shutoff</pre></li><li class="listitem"><p class="simpara">
						Verify that the snapshot has been created as <span class="emphasis"><em>external</em></span>:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh snapshot-dumpxml <span class="emphasis"><em>&lt;Testguest1&gt;</em></span> <span class="emphasis"><em>&lt;Snapshot1&gt;</em></span> | grep external</strong></span>

  &lt;disk name='vda' snapshot='<span class="strong strong"><strong>external</strong></span>' type='<span class="strong strong"><strong>file</strong></span>'&gt;</pre><p class="simpara">
						If the output of this command includes <code class="literal">snapshot='external'</code>, the snapshot is external and therefore fully supported by Red Hat.
					</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#reverting-to-a-virtual-machine-snapshot-by-using-the-command-line-interface_creating-virtual-machine-snapshots" title="13.4. Reverting to a virtual machine snapshot by using the command-line interface">Reverting to a VM snapshot by using the CLI</a>
					</li><li class="listitem">
						<a class="link" href="#reverting-to-a-virtual-machine-snapshot-by-using-the-web-console_creating-virtual-machine-snapshots" title="13.5. Reverting to a virtual machine snapshot by using the web console">Reverting to a VM snapshot by using the web console</a>
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://libvirt.org/formatsnapshot.html">Upstream libvirt information on snapshot metadata</a>
					</li><li class="listitem">
						<code class="literal">virsh</code> man page on your system
					</li></ul></div></section><section class="section" id="creating-virtual-machine-snapshots-by-using-the-web-console_creating-virtual-machine-snapshots"><div class="titlepage"><div><div><h3 class="title">13.3. Creating virtual machine snapshots by using the web console</h3></div></div></div><p class="_abstract _abstract">
				To save the state of a virtual machine (VM) in a snapshot, you can use the RHEL web console.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You have installed the RHEL 9 web console.
					</p><p class="simpara">
						For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
					</p></li><li class="listitem">
						Your host is using RHEL 9.4 or later.
					</li><li class="listitem">
						The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
					</li><li class="listitem"><p class="simpara">
						The VM uses file-based storage. To ensure that this is the case, perform the following steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								In the <span class="strong strong"><strong>Virtual machines</strong></span> interface of the web console, click the VM of which you want to create a snapshot.
							</li><li class="listitem">
								In the <span class="strong strong"><strong>Disks</strong></span> pane of the management overview, check the <span class="strong strong"><strong>Source</strong></span> column of the listed devices. In all devices that list a source, this source must be <span class="strong strong"><strong>File</strong></span>.
							</li></ol></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Log in to the RHEL 9 web console.
					</p><p class="simpara">
						For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
					</p></li><li class="listitem"><p class="simpara">
						In the <span class="strong strong"><strong>Virtual machines</strong></span> interface of the web console, click the VM of which you want to create a snapshot.
					</p><p class="simpara">
						A management overview of the VM opens.
					</p></li><li class="listitem">
						In the <span class="strong strong"><strong>Snapshots</strong></span> pane of the management overview, click the <code class="literal">Create snapshot</code> button.
					</li><li class="listitem">
						Enter a name for the snapshot, and optionally a description.
					</li><li class="listitem">
						Click <code class="literal">Create</code>.
					</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						To ensure that creating the snapshot has succeeded, check that the snapshot is now listed in the <span class="strong strong"><strong>Snapshots</strong></span> pane of the VM.
					</li><li class="listitem"><p class="simpara">
						Verify that the snapshot has been created as <span class="emphasis"><em>external</em></span>. To do so, use the following command in the command-line interface of the host:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh snapshot-dumpxml <span class="emphasis"><em>&lt;Testguest1&gt;</em></span> <span class="emphasis"><em>&lt;Snapshot1&gt;</em></span> | grep external</strong></span>

  &lt;disk name='vda' snapshot='<span class="strong strong"><strong>external</strong></span>' type='<span class="strong strong"><strong>file</strong></span>'&gt;</pre><p class="simpara">
						If the output of this command includes <code class="literal">snapshot='external'</code>, the snapshot is external and therefore supported by Red Hat.
					</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#reverting-to-a-virtual-machine-snapshot-by-using-the-web-console_creating-virtual-machine-snapshots" title="13.5. Reverting to a virtual machine snapshot by using the web console">Reverting to a VM snapshot by using the web console</a>
					</li><li class="listitem">
						<a class="link" href="#reverting-to-a-virtual-machine-snapshot-by-using-the-command-line-interface_creating-virtual-machine-snapshots" title="13.4. Reverting to a virtual machine snapshot by using the command-line interface">Reverting to a VM snapshot by using the command-line interface</a>
					</li></ul></div></section><section class="section" id="reverting-to-a-virtual-machine-snapshot-by-using-the-command-line-interface_creating-virtual-machine-snapshots"><div class="titlepage"><div><div><h3 class="title">13.4. Reverting to a virtual machine snapshot by using the command-line interface</h3></div></div></div><p class="_abstract _abstract">
				To return a virtual machine (VM) to the state saved in a snapshot, you can use the command-line-interface (CLI).
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A snapshot of the VM is available, which you have previously created <a class="link" href="#creating-virtual-machine-snapshots-by-using-the-web-console_creating-virtual-machine-snapshots" title="13.3. Creating virtual machine snapshots by using the web console">in the web console</a> or by <a class="link" href="#creating-virtual-machine-snapshots-entering-metadata-on-the-command-line_creating-virtual-machine-snapshots" title="13.2. Creating virtual machine snapshots by using the command-line interface">using the command-line interface</a>.
					</li><li class="listitem">
						Optional: You have created a snapshot of the current state of the VM. If you revert to a previous snapshot without saving the current state, changes performed on the VM since the last snapshot will be lost.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Use the <code class="literal">virsh snapshot-revert</code> utility and specify the name of the VM and the name of the snapshot to which you want to revert. For example:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh snapshot-revert Testguest2 clean-install</strong></span>
Domain snapshot clean-install reverted</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Display the currently active snapshot for the reverted VM:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh snapshot-current Testguest2 --name</strong></span>
clean-install</pre></li></ul></div></section><section class="section" id="reverting-to-a-virtual-machine-snapshot-by-using-the-web-console_creating-virtual-machine-snapshots"><div class="titlepage"><div><div><h3 class="title">13.5. Reverting to a virtual machine snapshot by using the web console</h3></div></div></div><p class="_abstract _abstract">
				To return a virtual machine (VM) to the state saved in a snapshot, you can use the RHEL web console.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You have installed the RHEL 9 web console.
					</p><p class="simpara">
						For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
					</p></li><li class="listitem">
						The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
					</li><li class="listitem">
						A snapshot of the VM is available, which you have previously created <a class="link" href="#creating-virtual-machine-snapshots-by-using-the-web-console_creating-virtual-machine-snapshots" title="13.3. Creating virtual machine snapshots by using the web console">in the web console</a> or by <a class="link" href="#creating-virtual-machine-snapshots-entering-metadata-on-the-command-line_creating-virtual-machine-snapshots" title="13.2. Creating virtual machine snapshots by using the command-line interface">using the command-line interface</a>.
					</li><li class="listitem">
						Optional: You have created a snapshot of the current state of the VM. If you revert to a previous snapshot without saving the current state, changes performed on the VM since the last snapshot will be lost.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Log in to the RHEL 9 web console.
					</p><p class="simpara">
						For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
					</p></li><li class="listitem"><p class="simpara">
						In the <span class="strong strong"><strong>Virtual machines</strong></span> interface of the web console, click the VM whose state you want to revert.
					</p><p class="simpara">
						A management overview of the VM opens.
					</p></li><li class="listitem">
						In the <span class="strong strong"><strong>Snapshots</strong></span> pane of the management overview, click the <code class="literal">Revert</code> button next to the snapshot to which you want to revert.
					</li><li class="listitem">
						Wait until the revert operation finishes. Depending on the size of the snapshot and how different it is from the current state, this might take up to several minutes.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						In the <span class="strong strong"><strong>Snapshots</strong></span> pane, if a green check symbol now displays on the left side of the selected snapshot, you have successfully reverted to it.
					</li></ul></div></section><section class="section" id="deleting-virtual-machine-snapshots-by-using-the-command-line-interface_creating-virtual-machine-snapshots"><div class="titlepage"><div><div><h3 class="title">13.6. Deleting virtual machine snapshots by using the command-line interface</h3></div></div></div><p class="_abstract _abstract">
				When a virtual machine (VM) snapshot is no longer useful for you, you can delete it in the command-line interface to free up the disk space that it uses.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Optional: A child snapshot exists for the snapshot you want to delete.
					</p><p class="simpara">
						A child snapshot is created automatically when you have an active snapshot and create a new snapshot. If you delete a snapshot that does not have any children, you will lose any changes saved in the snapshot after it was created from its parent snapshot.
					</p><p class="simpara">
						To view the parent-child structure of snapshots in a VM, use the <code class="literal">virsh snapshot-list --tree</code> command. The following example shows <code class="literal">Latest-snapshot</code> as a child of <code class="literal">Redundant-snapshot</code>.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh snapshot-list --tree <span class="emphasis"><em>&lt;vm-name&gt;</em></span></strong></span>

Clean-install-snapshot
  |
  +- Redundant-snapshot
      |
      +- Latest-snapshot</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Use the <code class="literal">virsh snapshot-delete</code> command to delete the snapshot. For example, the following command deletes <code class="literal">Redundant-snapshot</code> from the <code class="literal">Testguest1</code> VM:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh snapshot-delete Testguest1 Redundant-snapshot</strong></span>
Domain snapshot Redundant-snapshot deleted</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To ensure that the snapshot that you deleted is no longer present, display the existing snapshots of the impacted VM and their parent-child structure:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh snapshot-list --tree <span class="emphasis"><em>&lt;Testguest1&gt;</em></span></strong></span>

Clean-install-snapshot
  |
  +- Latest-snapshot</pre><p class="simpara">
						In this example, <code class="literal">Redundant-snapshot</code> has been deleted and <code class="literal">Latest-snapshot</code> has become the child of <code class="literal">Clean-install-snapshot</code>.
					</p></li></ul></div></section><section class="section" id="deleting-virtual-machine-snapshots-by-using-the-web-console_creating-virtual-machine-snapshots"><div class="titlepage"><div><div><h3 class="title">13.7. Deleting virtual machine snapshots by using the web console</h3></div></div></div><p class="_abstract _abstract">
				When a virtual machine (VM) snapshot is no longer useful for you, you can delete it in the web console to free up the disk space that it uses.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You have installed the RHEL 9 web console.
					</p><p class="simpara">
						For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
					</p></li><li class="listitem">
						The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
					</li><li class="listitem"><p class="simpara">
						Optional: A child snapshot exists for the snapshot you want to delete.
					</p><p class="simpara">
						A child snapshot is created automatically when you have an active snapshot and create a new snapshot. If you delete a snapshot that does not have any children, you will lose any changes saved in the snapshot after it was created from its parent snapshot.
					</p><p class="simpara">
						To check that the snapshot has a child, confirm that the snapshot is listed in the <span class="strong strong"><strong>Parent snapshot</strong></span> column of the <span class="strong strong"><strong>Snapshots</strong></span> in the web console overview of the VM.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						In the <span class="strong strong"><strong>Virtual machines</strong></span> interface of the web console, click the VM whose snapshot you want to delete.
					</p><p class="simpara">
						A management overview of the VM opens.
					</p></li><li class="listitem">
						In the <span class="strong strong"><strong>Snapshots</strong></span> pane of the management overview, click the <code class="literal">Delete</code> button next to the snapshot that you want to delete.
					</li><li class="listitem">
						Wait until the delete operation finishes. Depending on the size of the snapshot, this might take up to several minutes.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						If the snapshot no longer appears in the <span class="strong strong"><strong>Snapshots</strong></span> pane, it has been deleted successfully.
					</li></ul></div></section></section><section class="chapter" id="managing-virtual-devices_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h2 class="title">Chapter 14. Managing virtual devices</h2></div></div></div><p>
			One of the most effective ways to manage the functionality, features, and performance of a virtual machine (VM) is to adjust its <span class="emphasis"><em>virtual devices</em></span>.
		</p><p>
			The following sections provide a <a class="link" href="#how-virtual-devices-work_managing-virtual-devices" title="14.1. How virtual devices work">general overview</a> of what virtual devices are, and instructions on how to manage them using the <a class="link" href="#assembly_managing-virtual-devices-using-the-cli_managing-virtual-devices" title="14.3. Managing devices attached to virtual machines by using the CLI">CLI</a> or the <a class="link" href="#assembly_managing-virtual-devices-using-the-web-console_managing-virtual-devices" title="14.4. Managing host devices by using the web console">web console</a>.
		</p><section class="section" id="how-virtual-devices-work_managing-virtual-devices"><div class="titlepage"><div><div><h3 class="title">14.1. How virtual devices work</h3></div></div></div><p class="_abstract _abstract">
				Just like physical machines, virtual machines (VMs) require specialized devices to provide functions to the system, such as processing power, memory, storage, networking, or graphics. Physical systems usually use hardware devices for these purposes. However, because VMs work as software implements, they need to use software abstractions of such devices instead, referred to as <span class="emphasis"><em>virtual devices</em></span>.
			</p><div class="formalpara"><p class="title"><strong>The basics</strong></p><p>
					Virtual devices attached to a VM can be configured when <a class="link" href="#assembly_creating-virtual-machines_configuring-and-managing-virtualization" title="Chapter 3. Creating virtual machines">creating the VM</a>, and can also be managed on an existing VM. Generally, virtual devices can be attached or detached from a VM only when the VM is shut off, but some can be added or removed when the VM is running. This feature is referred to as device <span class="emphasis"><em>hot plug</em></span> and <span class="emphasis"><em>hot unplug</em></span>.
				</p></div><p>
				When creating a new VM, <code class="literal">libvirt</code> automatically creates and configures a default set of essential virtual devices, unless specified otherwise by the user. These are based on the host system architecture and machine type, and usually include:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						the CPU
					</li><li class="listitem">
						memory
					</li><li class="listitem">
						a keyboard
					</li><li class="listitem">
						a network interface controller (NIC)
					</li><li class="listitem">
						various device controllers
					</li><li class="listitem">
						a video card
					</li><li class="listitem">
						a sound card
					</li></ul></div><p>
				To manage virtual devices after the VM is created, use the command-line interface (CLI). However, to manage virtual storage devices and NICs, you can also use the RHEL 9 web console.
			</p><div class="formalpara"><p class="title"><strong>Performance or flexibility</strong></p><p>
					For some types of devices, RHEL 9 supports multiple implementations, often with a trade-off between performance and flexibility.
				</p></div><p>
				For example, the physical storage used for virtual disks can be represented by files in various formats, such as <code class="literal">qcow2</code> or <code class="literal">raw</code>, and presented to the VM by using a variety of controllers:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						an emulated controller
					</li><li class="listitem">
						<code class="literal">virtio-scsi</code>
					</li><li class="listitem">
						<code class="literal">virtio-blk</code>
					</li></ul></div><p>
				An emulated controller is slower than a <code class="literal">virtio</code> controller, because <code class="literal">virtio</code> devices are designed specifically for virtualization purposes. On the other hand, emulated controllers make it possible to run operating systems that have no drivers for <code class="literal">virtio</code> devices. Similarly, <code class="literal">virtio-scsi</code> offers a more complete support for SCSI commands, and makes it possible to attach a larger number of disks to the VM. Finally, <code class="literal">virtio-blk</code> provides better performance than both <code class="literal">virtio-scsi</code> and emulated controllers, but a more limited range of use-cases. For example, attaching a physical disk as a LUN device to a VM is not possible when using <code class="literal">virtio-blk</code>.
			</p><p>
				For more information about types of virtual devices, see <a class="link" href="#types-of-virtual-devices_managing-virtual-devices" title="14.2. Types of virtual devices">Types of virtual devices</a>.
			</p></section><section class="section" id="types-of-virtual-devices_managing-virtual-devices"><div class="titlepage"><div><div><h3 class="title">14.2. Types of virtual devices</h3></div></div></div><p>
				Virtualization in RHEL 9 can present several distinct types of virtual devices that you can attach to virtual machines (VMs):
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Emulated devices</span></dt><dd><p class="simpara">
							Emulated devices are software implementations of widely used physical devices. Drivers designed for physical devices are also compatible with emulated devices. Therefore, emulated devices can be used very flexibly.
						</p><p class="simpara">
							However, since they need to faithfully emulate a particular type of hardware, emulated devices may suffer a significant performance loss compared with the corresponding physical devices or more optimized virtual devices.
						</p><p class="simpara">
							The following types of emulated devices are supported:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Virtual CPUs (vCPUs), with a large choice of CPU models available. The performance impact of emulation depends significantly on the differences between the host CPU and the emulated vCPU.
								</li><li class="listitem">
									Emulated system components, such as PCI bus controllers.
								</li><li class="listitem">
									Emulated storage controllers, such as SATA, SCSI or even IDE.
								</li><li class="listitem">
									Emulated sound devices, such as ICH9, ICH6 or AC97.
								</li><li class="listitem">
									Emulated graphics cards, such as VGA cards.
								</li><li class="listitem">
									Emulated network devices, such as rtl8139.
								</li></ul></div></dd><dt><span class="term">Paravirtualized devices</span></dt><dd><p class="simpara">
							Paravirtualization provides a fast and efficient method for exposing virtual devices to VMs. Paravirtualized devices expose interfaces that are designed specifically for use in VMs, and thus significantly increase device performance. RHEL 9 provides paravirtualized devices to VMs by using the <span class="emphasis"><em>virtio</em></span> API as a layer between the hypervisor and the VM. The drawback of this approach is that it requires a specific device driver in the guest operating system.
						</p><p class="simpara">
							It is recommended to use paravirtualized devices instead of emulated devices for VM whenever possible, notably if they are running I/O intensive applications. Paravirtualized devices decrease I/O latency and increase I/O throughput, in some cases bringing them very close to bare-metal performance. Other paravirtualized devices also add functionality to VMs that is not otherwise available.
						</p><p class="simpara">
							The following types of paravirtualized devices are supported:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									The paravirtualized network device (<code class="literal">virtio-net</code>).
								</li><li class="listitem"><p class="simpara">
									Paravirtualized storage controllers:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											<code class="literal">virtio-blk</code> - provides block device emulation.
										</li><li class="listitem">
											<code class="literal">virtio-scsi</code> - provides more complete SCSI emulation.
										</li></ul></div></li><li class="listitem">
									The paravirtualized clock.
								</li><li class="listitem">
									The paravirtualized serial device (<code class="literal">virtio-serial</code>).
								</li><li class="listitem">
									The balloon device (<code class="literal">virtio-balloon</code>), used to dynamically distribute memory between a VM and its host.
								</li><li class="listitem">
									The paravirtualized random number generator (<code class="literal">virtio-rng</code>).
								</li></ul></div></dd><dt><span class="term">Physically shared devices</span></dt><dd><p class="simpara">
							Certain hardware platforms enable VMs to directly access various hardware devices and components. This process is known as <span class="emphasis"><em>device assignment</em></span> or <span class="emphasis"><em>passthrough</em></span>.
						</p><p class="simpara">
							When attached in this way, some aspects of the physical device are directly available to the VM as they would be to a physical machine. This provides superior performance for the device when used in the VM. However, devices physically attached to a VM become unavailable to the host, and also cannot be migrated.
						</p><p class="simpara">
							Nevertheless, some devices can be <span class="emphasis"><em>shared</em></span> across multiple VMs. For example, a single physical device can in certain cases provide multiple <span class="emphasis"><em>mediated devices</em></span>, which can then be assigned to distinct VMs.
						</p><p class="simpara">
							The following types of passthrough devices are supported:
						</p></dd></dl></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						USB, PCI, and SCSI passthrough - expose common industry standard buses directly to VMs in order to make their specific features available to guest software.
					</li><li class="listitem">
						Single-root I/O virtualization (SR-IOV) - a specification that enables hardware-enforced isolation of PCI Express resources. This makes it safe and efficient to partition a single physical PCI resource into virtual PCI functions. It is commonly used for network interface cards (NICs).
					</li><li class="listitem">
						N_Port ID virtualization (NPIV) - a Fibre Channel technology to share a single physical host bus adapter (HBA) with multiple virtual ports.
					</li><li class="listitem">
						GPUs and vGPUs - accelerators for specific kinds of graphic or compute workloads. Some GPUs can be attached directly to a VM, while certain types also offer the ability to create virtual GPUs (vGPUs) that share the underlying physical hardware.
					</li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					Some devices of these types might be unsupported or not compatible with RHEL. If you require assistance with setting up virtual devices, consult Red Hat support.
				</p></div></rh-alert></section><section class="section" id="assembly_managing-virtual-devices-using-the-cli_managing-virtual-devices"><div class="titlepage"><div><div><h3 class="title">14.3. Managing devices attached to virtual machines by using the CLI</h3></div></div></div><p class="_abstract _abstract">
				To modify the functionality of your virtual machine (VM), you can manage the devices attached to your VM by using the command-line interface (CLI).
			</p><section class="section" id="attaching-devices-to-virtual-machines_assembly_managing-virtual-devices-using-the-cli"><div class="titlepage"><div><div><h4 class="title">14.3.1. Attaching devices to virtual machines</h4></div></div></div><p class="_abstract _abstract">
					You can add a specific functionality to your virtual machines (VMs) by attaching a new virtual device.
				</p><p>
					The following procedure creates and attaches virtual devices to your virtual machines (VMs) by using the command-line interface (CLI). Some devices can also be attached to VMs <a class="link" href="#managing-virtual-machines-in-the-web-console_configuring-and-managing-virtualization" title="Chapter 8. Managing virtual machines in the web console">using the RHEL web console</a>.
				</p><p>
					For example, you can increase the storage capacity of a VM by attaching a new virtual disk device to it. This is also referred to as <span class="strong strong"><strong>memory hot plug</strong></span>.
				</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
						Removing a memory device from a VM, also known as <span class="strong strong"><strong>memory hot unplug</strong></span>, is not supported in RHEL 9, and Red Hat highly discourages its use.
					</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Obtain the required options for the device you intend to attach to a VM. To see the available options for a specific device, use the <code class="literal">virt-xml --<span class="emphasis"><em>device</em></span>=?</code> command. For example:
						</p><pre class="screen"># <span class="strong strong"><strong>virt-xml --network=?</strong></span>
--network options:
[...]
address.unit
boot_order
clearxml
driver_name
[...]</pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							To attach a device to a VM, use the <code class="literal">virt-xml --add-device</code> command, including the definition of the device and the required options:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									For example, the following command creates a 20GB <span class="emphasis"><em>newdisk</em></span> qcow2 disk image in the <code class="literal">/var/lib/libvirt/images/</code> directory, and attaches it as a virtual disk to the running <span class="emphasis"><em>testguest</em></span> VM on the next start-up of the VM:
								</p><pre class="screen"># <span class="strong strong"><strong>virt-xml testguest --add-device --disk /var/lib/libvirt/images/newdisk.qcow2,format=qcow2,size=20</strong></span>
Domain 'testguest' defined successfully.
Changes will take effect after the domain is fully powered off.</pre></li><li class="listitem"><p class="simpara">
									The following attaches a USB flash drive, attached as device 004 on bus 002 on the host, to the <span class="emphasis"><em>testguest2</em></span> VM while the VM is running:
								</p><pre class="screen"># <span class="strong strong"><strong>virt-xml testguest2 --add-device --update --hostdev 002.004</strong></span>
Device hotplug successful.
Domain 'testguest2' defined successfully.</pre><p class="simpara">
									The bus-device combination for defining the USB can be obtained by using the <code class="literal">lsusb</code> command.
								</p></li></ul></div></li></ol></div><div class="formalpara"><p class="title"><strong>Verification</strong></p><p>
						To verify the device has been added, do any of the following:
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Use the <code class="literal">virsh dumpxml</code> command and see if the device’s XML definition has been added to the <code class="literal">&lt;devices&gt;</code> section in the VM’s XML configuration.
						</p><p class="simpara">
							For example, the following output shows the configuration of the <span class="emphasis"><em>testguest</em></span> VM and confirms that the 002.004 USB flash disk device has been added.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh dumpxml testguest</strong></span>
[...]
&lt;hostdev mode='subsystem' type='usb' managed='yes'&gt;
  &lt;source&gt;
    &lt;vendor id='0x4146'/&gt;
    &lt;product id='0x902e'/&gt;
    &lt;address bus='2' device='4'/&gt;
  &lt;/source&gt;
  &lt;alias name='hostdev0'/&gt;
  &lt;address type='usb' bus='0' port='3'/&gt;
&lt;/hostdev&gt;
[...]</pre></li><li class="listitem">
							Run the VM and test if the device is present and works properly.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							The <code class="literal">man virt-xml</code> command
						</li></ul></div></section><section class="section" id="modifying-devices-attached-to-virtual-machines_assembly_managing-virtual-devices-using-the-cli"><div class="titlepage"><div><div><h4 class="title">14.3.2. Modifying devices attached to virtual machines</h4></div></div></div><p class="_abstract _abstract">
					You can change the functionality of your virtual machines (VMs) by editing a configuration of the attached virtual devices. For example, if you want to optimize the performance of your VMs, you can change their virtual CPU models to better match the CPUs of the hosts.
				</p><p>
					The following procedure provides general instructions for modifying virtual devices by using the command-line interface (CLI). Some devices attached to your VM, such as disks and NICs, can also be modified <a class="link" href="#managing-virtual-machines-in-the-web-console_configuring-and-managing-virtualization" title="Chapter 8. Managing virtual machines in the web console">using the RHEL 9 web console</a>.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Obtain the required options for the device you intend to attach to a VM. To see the available options for a specific device, use the <code class="literal">virt-xml --<span class="emphasis"><em>device</em></span>=?</code> command. For example:
						</li></ul></div><pre class="screen"># <span class="strong strong"><strong>virt-xml --network=?</strong></span>
--network options:
[...]
address.unit
boot_order
clearxml
driver_name
[...]</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Optional: Back up the XML configuration of your VM by using <code class="literal">virsh dumpxml <span class="emphasis"><em>vm-name</em></span></code> and sending the output to a file. For example, the following backs up the configuration of your <span class="emphasis"><em>testguest1</em></span> VM as the <code class="literal">testguest1.xml</code> file:
						</li></ul></div><pre class="screen"># <span class="strong strong"><strong>virsh dumpxml testguest1 &gt; testguest1.xml</strong></span>
# <span class="strong strong"><strong>cat testguest1.xml</strong></span>
&lt;domain type='kvm' xmlns:qemu='http://libvirt.org/schemas/domain/qemu/1.0'&gt;
  &lt;name&gt;testguest1&lt;/name&gt;
  &lt;uuid&gt;ede29304-fe0c-4ca4-abcd-d246481acd18&lt;/uuid&gt;
  [...]
&lt;/domain&gt;</pre><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Use the <code class="literal">virt-xml --edit</code> command, including the definition of the device and the required options:
						</p><p class="simpara">
							For example, the following clears the <span class="emphasis"><em>&lt;cpu&gt;</em></span> configuration of the shut-off <span class="emphasis"><em>testguest</em></span> VM and sets it to <span class="emphasis"><em>host-model</em></span>:
						</p><pre class="screen"># <span class="strong strong"><strong>virt-xml testguest --edit --cpu host-model,clearxml=yes</strong></span>
Domain 'testguest' defined successfully.</pre></li></ol></div><div class="formalpara"><p class="title"><strong>Verification</strong></p><p>
						To verify the device has been modified, do any of the following:
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Run the VM and test if the device is present and reflects the modifications.
						</li><li class="listitem"><p class="simpara">
							Use the <code class="literal">virsh dumpxml</code> command and see if the device’s XML definition has been modified in the VM’s XML configuration.
						</p><p class="simpara">
							For example, the following output shows the configuration of the <span class="emphasis"><em>testguest</em></span> VM and confirms that the CPU mode has been configured as <span class="emphasis"><em>host-model</em></span>.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh dumpxml testguest</strong></span>
[...]
&lt;cpu mode='host-model' check='partial'&gt;
  &lt;model fallback='allow'/&gt;
&lt;/cpu&gt;
[...]</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							If modifying a device causes your VM to become unbootable, use the <code class="literal">virsh define</code> utility to restore the XML configuration by reloading the XML configuration file you backed up previously.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh define testguest.xml</strong></span></pre></li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
						For small changes to the XML configuration of your VM, you can use the <code class="literal">virsh edit</code> command - for example <code class="literal">virsh edit testguest</code>. However, do not use this method for more extensive changes, as it is more likely to break the configuration in ways that could prevent the VM from booting.
					</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							The <code class="literal">man virt-xml</code> command
						</li></ul></div></section><section class="section" id="removing-devices-from-virtual-machines_assembly_managing-virtual-devices-using-the-cli"><div class="titlepage"><div><div><h4 class="title">14.3.3. Removing devices from virtual machines</h4></div></div></div><p class="_abstract _abstract">
					You can change the functionality of your virtual machines (VMs) by removing a virtual device. For example, you can remove a virtual disk device from one of your VMs if it is no longer needed.
				</p><p>
					The following procedure demonstrates how to remove virtual devices from your virtual machines (VMs) by using the command-line interface (CLI). Some devices, such as disks or NICs, can also be removed from VMs <a class="link" href="#managing-virtual-machines-in-the-web-console_configuring-and-managing-virtualization" title="Chapter 8. Managing virtual machines in the web console">using the RHEL 9 web console</a>.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Optional: Back up the XML configuration of your VM by using <code class="literal">virsh dumpxml <span class="emphasis"><em>vm-name</em></span></code> and sending the output to a file. For example, the following backs up the configuration of your <span class="emphasis"><em>testguest1</em></span> VM as the <code class="literal">testguest1.xml</code> file:
						</li></ul></div><pre class="screen"># <span class="strong strong"><strong>virsh dumpxml testguest1 &gt; testguest1.xml</strong></span>
# <span class="strong strong"><strong>cat testguest1.xml</strong></span>
&lt;domain type='kvm' xmlns:qemu='http://libvirt.org/schemas/domain/qemu/1.0'&gt;
  &lt;name&gt;testguest1&lt;/name&gt;
  &lt;uuid&gt;ede29304-fe0c-4ca4-abcd-d246481acd18&lt;/uuid&gt;
  [...]
&lt;/domain&gt;</pre><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Use the <code class="literal">virt-xml --remove-device</code> command, including a definition of the device. For example:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									The following removes the storage device marked as <span class="emphasis"><em>vdb</em></span> from the running <span class="emphasis"><em>testguest</em></span> VM after it shuts down:
								</p><pre class="screen"># <span class="strong strong"><strong>virt-xml testguest --remove-device --disk target=vdb</strong></span>
Domain 'testguest' defined successfully.
Changes will take effect after the domain is fully powered off.</pre></li><li class="listitem"><p class="simpara">
									The following immediately removes a USB flash drive device from the running <span class="emphasis"><em>testguest2</em></span> VM:
								</p><pre class="screen"># <span class="strong strong"><strong>virt-xml testguest2 --remove-device --update --hostdev type=usb</strong></span>
Device hotunplug successful.
Domain 'testguest2' defined successfully.</pre></li></ul></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							If removing a device causes your VM to become unbootable, use the <code class="literal">virsh define</code> utility to restore the XML configuration by reloading the XML configuration file you backed up previously.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh define testguest.xml</strong></span></pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							The <code class="literal">man virt-xml</code> command
						</li></ul></div></section></section><section class="section" id="assembly_managing-virtual-devices-using-the-web-console_managing-virtual-devices"><div class="titlepage"><div><div><h3 class="title">14.4. Managing host devices by using the web console</h3></div></div></div><p class="_abstract _abstract">
				To modify the functionality of your virtual machine (VM), you can manage the host devices attached to your VM by using the Red Hat Enterprise Linux 9 web console.
			</p><p>
				Host devices are physical devices that are attached to the host system. Based on your requirements, you can enable your VMs to directly access these hardware devices and components.
			</p><p>
				You can use the web console to:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#proc_viewing-devices-attached-to-virtual-machines-using-the-web-console_assembly_managing-virtual-devices-using-the-web-console" title="14.4.1. Viewing devices attached to virtual machines by using the web console">View devices</a>
					</li><li class="listitem">
						<a class="link" href="#proc_attaching-devices-to-virtual-machines-using-the-web-console_assembly_managing-virtual-devices-using-the-web-console" title="14.4.2. Attaching devices to virtual machines by using the web console">Attach devices</a>
					</li><li class="listitem">
						<a class="link" href="#proc_removing-devices-from-virtual-machines-using-the-web-console_assembly_managing-virtual-devices-using-the-web-console" title="14.4.3. Removing devices from virtual machines by using the web console">Remove devices</a>
					</li></ul></div><section class="section" id="proc_viewing-devices-attached-to-virtual-machines-using-the-web-console_assembly_managing-virtual-devices-using-the-web-console"><div class="titlepage"><div><div><h4 class="title">14.4.1. Viewing devices attached to virtual machines by using the web console</h4></div></div></div><p class="_abstract _abstract">
					Before adding or modifying the devices attached to your virtual machine (VM), you may want to view the devices that are already attached to your VM. The following procedure provides instructions for viewing such devices by using the web console.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click the VM whose information you want to see.
						</p><p class="simpara">
							A new page opens with detailed information about the VM.
						</p></li><li class="listitem"><p class="simpara">
							Scroll to the <span class="strong strong"><strong>Host devices</strong></span> section.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/692a30076fe07c36ed009d34876ca3e3/virt-cockpit-host-devices.png" alt="Page displaying the Host devices section of the virtual machine."></div></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#managing-virtual-devices_configuring-and-managing-virtualization" title="Chapter 14. Managing virtual devices">Managing virtual devices</a>
						</li></ul></div></section><section class="section" id="proc_attaching-devices-to-virtual-machines-using-the-web-console_assembly_managing-virtual-devices-using-the-web-console"><div class="titlepage"><div><div><h4 class="title">14.4.2. Attaching devices to virtual machines by using the web console</h4></div></div></div><p class="_abstract _abstract">
					To add specific functionalities to your virtual machine (VM), you can use the web console to attach host devices to the VM.
				</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
						Attaching multiple host devices at the same time does not work. You can attach only one device at a time.
					</p><p>
						For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/9.0_release_notes/known-issues#known-issue_virtualization">RHEL 9 Known Issues.</a>
					</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							If you are attaching PCI devices, ensure that the status of the <code class="literal">managed</code> attribute of the <code class="literal">hostdev</code> element is set to <code class="literal">yes</code>.
						</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								When attaching PCI devices to your VM, do not omit the <code class="literal">managed</code> attribute of the <code class="literal">hostdev</code> element, or set it to <code class="literal">no</code>. If you do so, PCI devices cannot automatically detach from the host when you pass them to the VM. They also cannot automatically reattach to the host when you turn off the VM.
							</p><p>
								As a consequence, the host may become unresponsive or shut down unexpectedly.
							</p></div></rh-alert><p class="simpara">
							You can find the status of the <code class="literal">managed</code> attribute in your VM’s XML configuration. The following example opens the XML configuration of the <code class="literal">example-VM-1</code> VM.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh edit <span class="emphasis"><em>example-VM-1</em></span></strong></span></pre></li><li class="listitem">
							Back up important data from the VM.
						</li><li class="listitem"><p class="simpara">
							Optional: Back up the XML configuration of your VM. For example, to back up the <code class="literal">example-VM-1</code> VM:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh dumpxml <span class="emphasis"><em>example-VM-1</em></span> &gt; <span class="emphasis"><em>example-VM-1</em></span>.xml</strong></span></pre></li><li class="listitem">
							<a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">The web console VM plug-in is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click the VM to which you want to attach a host device.
						</p><p class="simpara">
							A new page opens with an <span class="strong strong"><strong>Overview</strong></span> section with basic information about the selected VM and a <span class="strong strong"><strong>Console</strong></span> section to access the VM’s graphical interface.
						</p></li><li class="listitem"><p class="simpara">
							Scroll to <span class="guimenu">Host devices</span>.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Host devices</strong></span> section displays information about the devices attached to the VM as well as options to <span class="strong strong"><strong>Add</strong></span> or <span class="strong strong"><strong>Remove</strong></span> devices.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/692a30076fe07c36ed009d34876ca3e3/virt-cockpit-host-devices.png" alt="Image displaying the host devices section of the selected VM."></div></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Add host device</span>.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Add host device</strong></span> dialog appears.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/c0205789c58fb59910acc03b2a23394f/virt-cockpit-host-add-device.png" width="540" alt="Image displaying the Add host device dialog box."></div></div></li><li class="listitem">
							Select the device you wish to attach to the VM.
						</li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Add</span>
						</p><p class="simpara">
							The selected device is attached to the VM.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Run the VM and check if the device appears in the <span class="strong strong"><strong>Host devices</strong></span> section.
						</li></ul></div></section><section class="section" id="proc_removing-devices-from-virtual-machines-using-the-web-console_assembly_managing-virtual-devices-using-the-web-console"><div class="titlepage"><div><div><h4 class="title">14.4.3. Removing devices from virtual machines by using the web console</h4></div></div></div><p class="_abstract _abstract">
					To free up resources, modify the functionalities of your VM, or both, you can use the web console to modify the VM and remove host devices that are no longer required.
				</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
						Removing attached USB host devices by using the web console may fail because of incorrect correlation between the device and bus numbers of the USB device.
					</p><p>
						For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/9.0_release_notes/known-issues#known-issue_virtualization">RHEL 9 Known Issues.</a>
					</p><p>
						As a workaround, remove the &lt;hostdev&gt; part of the USB device, from the XML configuration of VM by using the <span class="emphasis"><em>virsh</em></span> utility. The following example opens the XML configuration of the <code class="literal">example-VM-1</code> VM:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh edit <span class="emphasis"><em>&lt;example-VM-1&gt;</em></span></strong></span></pre></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							<a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">The web console VM plug-in is installed on your system</a>.
						</li><li class="listitem"><p class="simpara">
							Optional: Back up the XML configuration of your VM by using <code class="literal">virsh dumpxml <span class="emphasis"><em>example-VM-1</em></span></code> and sending the output to a file. For example, the following backs up the configuration of your <span class="emphasis"><em>testguest1</em></span> VM as the <code class="literal">testguest1.xml</code> file:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh dumpxml testguest1 &gt; testguest1.xml</strong></span>
# <span class="strong strong"><strong>cat testguest1.xml</strong></span>
&lt;domain type='kvm' xmlns:qemu='http://libvirt.org/schemas/domain/qemu/1.0'&gt;
  &lt;name&gt;testguest1&lt;/name&gt;
  &lt;uuid&gt;ede29304-fe0c-4ca4-abcd-d246481acd18&lt;/uuid&gt;
  [...]
&lt;/domain&gt;</pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click the VM from which you want to remove a host device.
						</p><p class="simpara">
							A new page opens with an <span class="strong strong"><strong>Overview</strong></span> section with basic information about the selected VM and a <span class="strong strong"><strong>Console</strong></span> section to access the VM’s graphical interface.
						</p></li><li class="listitem"><p class="simpara">
							Scroll to <span class="guimenu">Host devices</span>.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Host devices</strong></span> section displays information about the devices attached to the VM as well as options to <span class="strong strong"><strong>Add</strong></span> or <span class="strong strong"><strong>Remove</strong></span> devices.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/692a30076fe07c36ed009d34876ca3e3/virt-cockpit-host-devices.png" alt="Image displaying the host dvices section of the selected VM."></div></div></li><li class="listitem"><p class="simpara">
							Click the <span class="guibutton">Remove</span> button next to the device you want to remove from the VM.
						</p><p class="simpara">
							A remove device confirmation dialog appears.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/e489d026956bfd9f51f5a0c3816ea78f/virt-cockpit-host-remove-device.png" alt="Image displaying the option to remove an attached virtual device."></div></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Remove</span>.
						</p><p class="simpara">
							The device is removed from the VM.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							If removing a host device causes your VM to become unbootable, use the <code class="literal">virsh define</code> utility to restore the XML configuration by reloading the XML configuration file you backed up previously.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh define testguest1.xml</strong></span></pre></li></ul></div></section></section><section class="section" id="managing-virtual-usb-devices_managing-virtual-devices"><div class="titlepage"><div><div><h3 class="title">14.5. Managing virtual USB devices</h3></div></div></div><p>
				When using a virtual machine (VM), you can access and control a USB device, such as a flash drive or a web camera, that is attached to the host system. In this scenario, the host system passes control of the device to the VM. This is also known as a USB-passthrough.
			</p><section class="section" id="attaching-usb-devices-to-virtual-machines_managing-virtual-usb-devices"><div class="titlepage"><div><div><h4 class="title">14.5.1. Attaching USB devices to virtual machines</h4></div></div></div><p class="_abstract _abstract">
					To attach a USB device to a virtual machine (VM), you can include the USB device information in the XML configuration file of the VM.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Ensure the device you want to pass through to the VM is attached to the host.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Locate the bus and device values of the USB that you want to attach to the VM.
						</p><p class="simpara">
							For example, the following command displays a list of USB devices attached to the host. The device we will use in this example is attached on bus 001 as device 005.
						</p><pre class="screen"># <span class="strong strong"><strong>lsusb</strong></span>
[...]
Bus 001 Device 003: ID 2567:0a2b Intel Corp.
Bus 001 Device 005: ID 0407:6252 Kingston River 2.0
[...]</pre></li><li class="listitem"><p class="simpara">
							Use the <code class="literal">virt-xml</code> utility along with the <code class="literal">--add-device</code> argument.
						</p><p class="simpara">
							For example, the following command attaches a USB flash drive to the <code class="literal">example-VM-1</code> VM.
						</p><pre class="screen"># <span class="strong strong"><strong>virt-xml <span class="emphasis"><em>example-VM-1</em></span> --add-device --hostdev 001.005</strong></span>
Domain 'example-VM-1' defined successfully.</pre></li></ol></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
						To attach a USB device to a running VM, add the <code class="literal">--update</code> argument to the previous command.
					</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Run the VM and test if the device is present and works as expected.
						</li><li class="listitem"><p class="simpara">
							Use the <code class="literal">virsh dumpxml</code> command to see if the device’s XML definition has been added to the &lt;devices&gt; section in the VM’s XML configuration file.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh dumpxml <span class="emphasis"><em>example-VM-1</em></span></strong></span>
[...]
&lt;hostdev mode='subsystem' type='usb' managed='yes'&gt;
  &lt;source&gt;
    &lt;vendor id='0x0407'/&gt;
    &lt;product id='0x6252'/&gt;
    &lt;address bus='1' device='5'/&gt;
  &lt;/source&gt;
  &lt;alias name='hostdev0'/&gt;
  &lt;address type='usb' bus='0' port='3'/&gt;
&lt;/hostdev&gt;
[...]</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">virt-xml (1)</code> man page on your system
						</li><li class="listitem">
							<a class="link" href="#attaching-devices-to-virtual-machines_assembly_managing-virtual-devices-using-the-cli" title="14.3.1. Attaching devices to virtual machines">Attaching devices to virtual machines</a>
						</li></ul></div></section><section class="section" id="removing-usb-devices-from-virtual-machines_managing-virtual-usb-devices"><div class="titlepage"><div><div><h4 class="title">14.5.2. Removing USB devices from virtual machines</h4></div></div></div><p class="_abstract _abstract">
					To remove a USB device from a virtual machine (VM), you can remove the USB device information from the XML configuration of the VM.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Locate the bus and device values of the USB that you want to remove from the VM.
						</p><p class="simpara">
							For example, the following command displays a list of USB devices attached to the host. The device we will use in this example is attached on bus 001 as device 005.
						</p><pre class="screen"># <span class="strong strong"><strong>lsusb</strong></span>
[...]
Bus 001 Device 003: ID 2567:0a2b Intel Corp.
Bus 001 Device 005: ID 0407:6252 Kingston River 2.0
[...]</pre></li><li class="listitem"><p class="simpara">
							Use the <code class="literal">virt-xml</code> utility along with the <code class="literal">--remove-device</code> argument.
						</p><p class="simpara">
							For example, the following command removes a USB flash drive, attached to the host as device 005 on bus 001, from the <code class="literal">example-VM-1</code> VM.
						</p><pre class="screen"># <span class="strong strong"><strong>virt-xml <span class="emphasis"><em>example-VM-1</em></span> --remove-device --hostdev 001.005</strong></span>
Domain 'example-VM-1' defined successfully.</pre></li></ol></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
						To remove a USB device from a running VM, add the <code class="literal">--update</code> argument to the previous command.
					</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Run the VM and check if the device has been removed from the list of devices.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">virt-xml (1)</code> man page on your system
						</li><li class="listitem">
							<a class="link" href="#attaching-devices-to-virtual-machines_assembly_managing-virtual-devices-using-the-cli" title="14.3.1. Attaching devices to virtual machines">Attaching devices to virtual machines</a>
						</li></ul></div></section></section><section class="section" id="managing-virtual-optical-drives_managing-virtual-devices"><div class="titlepage"><div><div><h3 class="title">14.6. Managing virtual optical drives</h3></div></div></div><p>
				When using a virtual machine (VM), you can access information stored in an ISO image on the host. To do so, attach the ISO image to the VM as a virtual optical drive, such as a CD drive or a DVD drive.
			</p><section class="section" id="attaching-optical-drives-to-virtual-machines_managing-virtual-optical-drives"><div class="titlepage"><div><div><h4 class="title">14.6.1. Attaching optical drives to virtual machines</h4></div></div></div><p class="_abstract _abstract">
					To attach an ISO image as a virtual optical drive, edit the XML configuration file of the virtual machine (VM) and add the new drive.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You must store and copy path of the ISO image on the host machine.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Use the <code class="literal">virt-xml</code> utility with the <code class="literal">--add-device</code> argument:
						</p><p class="simpara">
							For example, the following command attaches the <code class="literal">example-ISO-name</code> ISO image, stored in the <code class="literal">/home/username/Downloads</code> directory, to the <code class="literal">example-VM-name</code> VM.
						</p><pre class="screen"># <span class="strong strong"><strong>virt-xml <span class="emphasis"><em>example-VM-name</em></span> --add-device --disk <span class="emphasis"><em>/home/username/Downloads/example-ISO-name.iso</em></span>,device=cdrom</strong></span>
Domain 'example-VM-name' defined successfully.</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Run the VM and test if the device is present and works as expected.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							The <code class="literal">man virt-xml</code> command
						</li><li class="listitem">
							<a class="link" href="#attaching-devices-to-virtual-machines_assembly_managing-virtual-devices-using-the-cli" title="14.3.1. Attaching devices to virtual machines">Attaching devices to virtual machines</a>
						</li></ul></div></section><section class="section" id="adding-a-cd-rom-to-a-virtual-machine_managing-virtual-optical-drives"><div class="titlepage"><div><div><h4 class="title">14.6.2. Adding a CD-ROM to a running virtual machine by using the web console</h4></div></div></div><p>
					You can use the web console to insert a CD-ROM to a running virtual machine (VM) without specifying the media.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">You have installed the web console VM plug-in on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Shut down the VM.
						</li><li class="listitem"><p class="simpara">
							Attach a virtual CD-ROM device without specifying a source image.
						</p><pre class="screen"># <span class="strong strong"><strong>virt-xml <span class="emphasis"><em>vmname</em></span> --add-device --disk target.dev=sda,device=cdrom</strong></span></pre></li><li class="listitem">
							Run the VM.
						</li><li class="listitem">
							Open the web console and in the <span class="guimenu">Virtual Machines</span> interface, click the VM to which you want to attach a CD-ROM.
						</li><li class="listitem"><p class="simpara">
							Scroll to <span class="guimenu">Disks</span>.
						</p><p class="simpara">
							The Disks section displays information about the disks assigned to the VM, as well as options to <span class="strong strong"><strong>Add</strong></span> or <span class="strong strong"><strong>Edit</strong></span> disks.
						</p></li><li class="listitem"><p class="simpara">
							Click the <span class="guibutton">Insert</span> option for the <span class="strong strong"><strong>cdrom</strong></span> device.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/5baf9535082862941a763570c5e6b782/virt-cockpit-insert-cdrom.png" alt="Image displaying the disk row of the cdrom device."></div></div></li><li class="listitem"><p class="simpara">
							Choose a <span class="strong strong"><strong>Source</strong></span> for the file you want to attach:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Custom Path</strong></span>: The file is located in a custom directory on the host machine.
								</li><li class="listitem">
									<span class="strong strong"><strong>Use existing</strong></span>: The file is located in the storage pools that you have created.
								</li></ul></div></li><li class="listitem">
							Click <span class="guibutton">Insert</span>.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							In the <span class="guimenu">Virtual Machines</span> interface, the file will appear under the <span class="strong strong"><strong>Disks</strong></span> section.
						</li></ul></div></section><section class="section" id="replacing-iso-images-in-virtual-optical-drives_managing-virtual-optical-drives"><div class="titlepage"><div><div><h4 class="title">14.6.3. Replacing ISO images in virtual optical drives</h4></div></div></div><p class="_abstract _abstract">
					To replace an ISO image attached as a virtual optical drive to a virtual machine (VM), edit the XML configuration file of the VM and specify the replacement.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You must store the ISO image on the host machine.
						</li><li class="listitem">
							You must know the path to the ISO image.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Locate the target device where the CD-ROM is attached to the VM. You can find this information in the VM’s XML configuration file.
						</p><p class="simpara">
							For example, the following command displays the <code class="literal"><span class="emphasis"><em>example-VM-name</em></span></code> VM’s XML configuration file, where the target device for CD-ROM is <code class="literal">sda</code>.
						</p><pre class="programlisting language-xml"># <span class="strong strong"><strong>virsh dumpxml <span class="emphasis"><em>example-VM-name</em></span></strong></span>
...
&lt;disk&gt;
  ...
  &lt;source file='<span class="emphasis"><em>$(/home/username/Downloads/example-ISO-name.iso)</em></span>'/&gt;
  &lt;target dev='sda' bus='sata'/&gt;
  ...
&lt;/disk&gt;
...</pre></li><li class="listitem"><p class="simpara">
							Use the <code class="literal">virt-xml</code> utility with the <code class="literal">--edit</code> argument.
						</p><p class="simpara">
							For example, the following command replaces the <code class="literal">example-ISO-name</code> ISO image, attached to the <code class="literal">example-VM-name</code> VM at target <code class="literal">sda</code>, with the <code class="literal">example-ISO-name-2</code> ISO image stored in the <code class="literal">/dev/cdrom</code> directory.
						</p><pre class="screen"># <span class="strong strong"><strong>virt-xml <span class="emphasis"><em>example-VM-name</em></span> --edit target=sda --disk <span class="emphasis"><em>/dev/cdrom/example-ISO-name-2.iso</em></span></strong></span>
Domain 'example-VM-name' defined successfully.</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Run the VM and test if the device is replaced and works as expected.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							The <code class="literal">man virt-xml</code> command
						</li></ul></div></section><section class="section" id="removing-iso-images-from-virtual-optical-drives_managing-virtual-optical-drives"><div class="titlepage"><div><div><h4 class="title">14.6.4. Removing ISO images from virtual optical drives</h4></div></div></div><p class="_abstract _abstract">
					To remove an ISO image from a virtual optical drive attached to a virtual machine (VM), edit the XML configuration file of the VM.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Locate the target device where the CD-ROM is attached to the VM. You can find this information in the VM’s XML configuration file.
						</p><p class="simpara">
							For example, the following command displays the <code class="literal">example-VM-name</code> VM’s XML configuration file, where the target device for CD-ROM is <code class="literal">sda</code>.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh dumpxml <span class="emphasis"><em>example-VM-name</em></span></strong></span>
...
&lt;disk&gt;
  ...
  &lt;source file='<span class="emphasis"><em>$(/home/username/Downloads/example-ISO-name.iso)</em></span>'/&gt;
  &lt;target dev='sda' bus='sata'/&gt;
  ...
&lt;/disk&gt;
...</pre></li><li class="listitem"><p class="simpara">
							Use the <code class="literal">virt-xml</code> utility with the <code class="literal">--edit</code> argument.
						</p><p class="simpara">
							For example, the following command removes the <code class="literal">example-ISO-name</code> ISO image from the CD drive attached to the <code class="literal">example-VM-name</code> VM.
						</p><pre class="screen"># <span class="strong strong"><strong>virt-xml <span class="emphasis"><em>example-VM-name</em></span> --edit target=sda --disk path=</strong></span>
Domain 'example-VM-name' defined successfully.</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Run the VM and check that image is no longer available.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							The <code class="literal">man virt-xml</code> command
						</li></ul></div></section><section class="section" id="removing-optical-drives-from-virtual-machines_managing-virtual-optical-drives"><div class="titlepage"><div><div><h4 class="title">14.6.5. Removing optical drives from virtual machines</h4></div></div></div><p class="_abstract _abstract">
					To remove an optical drive attached to a virtual machine (VM), edit the XML configuration file of the VM.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Locate the target device where the CD-ROM is attached to the VM. You can find this information in the VM’s XML configuration file.
						</p><p class="simpara">
							For example, the following command displays the <code class="literal">example-VM-name</code> VM’s XML configuration file, where the target device for CD-ROM is <code class="literal">sda</code>.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh dumpxml <span class="emphasis"><em>example-VM-name</em></span></strong></span>
...
&lt;disk type='file' device='cdrom'&gt;
  &lt;driver name='qemu' type='raw'/&gt;
  &lt;target dev='sda' bus='sata'/&gt;
  ...
&lt;/disk&gt;
...</pre></li><li class="listitem"><p class="simpara">
							Use the <code class="literal">virt-xml</code> utility with the <code class="literal">--remove-device</code> argument.
						</p><p class="simpara">
							For example, the following command removes the optical drive attached as target <code class="literal">sda</code> from the <code class="literal">example-VM-name</code> VM.
						</p><pre class="screen"># <span class="strong strong"><strong>virt-xml <span class="emphasis"><em>example-VM-name</em></span> --remove-device --disk target=sda</strong></span>
Domain 'example-VM-name' defined successfully.</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Confirm that the device is no longer listed in the XML configuration file of the VM.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							The <code class="literal">man virt-xml</code> command
						</li></ul></div></section><section class="section" id="removing-a-cd-rom-from-a-running-virtual-machine_managing-virtual-optical-drives"><div class="titlepage"><div><div><h4 class="title">14.6.6. Removing a CD-ROM from a running virtual machine by using the web console</h4></div></div></div><p>
					You can use the web console to eject a CD-ROM device from a running virtual machine (VM).
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">You have installed the web console VM plug-in on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the <span class="guimenu">Virtual Machines</span> interface, click the VM from which you want to remove the CD-ROM.
						</li><li class="listitem"><p class="simpara">
							Scroll to <span class="guimenu">Disks</span>.
						</p><p class="simpara">
							The Disks section displays information about the disks assigned to the VM, as well as options to <span class="strong strong"><strong>Add</strong></span> or <span class="strong strong"><strong>Edit</strong></span> disks.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/2bae76a8e9d0965fea1764a8370a00f1/virt-cockpit-eject-cdrom.png" alt="Image displaying the disks section of the VM."></div></div></li><li class="listitem"><p class="simpara">
							Click the <span class="guibutton">Eject</span> option for the <span class="strong strong"><strong>cdrom</strong></span> device.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Eject media from VM?</strong></span> dialog box opens.
						</p></li><li class="listitem">
							Click <span class="guibutton">Eject</span>.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							In the <span class="guimenu">Virtual Machines</span> interface, the attached file is no longer displayed under the <span class="strong strong"><strong>Disks</strong></span> section.
						</li></ul></div></section></section><section class="section" id="managing-sr-iov-devices_managing-virtual-devices"><div class="titlepage"><div><div><h3 class="title">14.7. Managing SR-IOV devices</h3></div></div></div><p>
				An emulated virtual device often uses more CPU and memory than a hardware network device. This can limit the performance of a virtual machine (VM). However, if any devices on your virtualization host support Single Root I/O Virtualization (SR-IOV), you can use this feature to improve the device performance, and possibly also the overall performance of your VMs.
			</p><section class="section" id="what-is-sr-iov_managing-sr-iov-devices"><div class="titlepage"><div><div><h4 class="title">14.7.1. What is SR-IOV?</h4></div></div></div><p class="_abstract _abstract">
					Single-root I/O virtualization (SR-IOV) is a specification that enables a single PCI Express (PCIe) device to present multiple separate PCI devices, called <span class="emphasis"><em>virtual functions</em></span> (VFs), to the host system. Each of these devices:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Is able to provide the same or similar service as the original PCIe device.
						</li><li class="listitem">
							Appears at a different address on the host PCI bus.
						</li><li class="listitem">
							Can be assigned to a different VM by using VFIO assignment.
						</li></ul></div><p>
					For example, a single SR-IOV capable network device can present VFs to multiple VMs. While all of the VFs use the same physical card, the same network connection, and the same network cable, each of the VMs directly controls its own hardware network device, and uses no extra resources from the host.
				</p><div class="formalpara"><p class="title"><strong>How SR-IOV works</strong></p><p>
						The SR-IOV functionality is possible thanks to the introduction of the following PCIe functions:
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Physical functions (PFs)</strong></span> - A PCIe function that provides the functionality of its device (for example networking) to the host, but can also create and manage a set of VFs. Each SR-IOV capable device has one or more PFs.
						</li><li class="listitem">
							<span class="strong strong"><strong>Virtual functions (VFs)</strong></span> - Lightweight PCIe functions that behave as independent devices. Each VF is derived from a PF. The maximum number of VFs a device can have depends on the device hardware. Each VF can be assigned only to a single VM at a time, but a VM can have multiple VFs assigned to it.
						</li></ul></div><p>
					VMs recognize VFs as virtual devices. For example, a VF created by an SR-IOV network device appears as a network card to a VM to which it is assigned, in the same way as a physical network card appears to the host system.
				</p><div class="figure" id="idm140237784368640"><p class="title"><strong>Figure 14.1. SR-IOV architecture</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/2ca7c118cafe8e2cd184b16620b18393/virt_SR-IOV.png" alt="virt SR IOV"></div></div></div><div class="formalpara"><p class="title"><strong>Advantages</strong></p><p>
						The primary advantages of using SR-IOV VFs rather than emulated devices are:
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Improved performance
						</li><li class="listitem">
							Reduced use of host CPU and memory resources
						</li></ul></div><p>
					For example, a VF attached to a VM as a vNIC performs at almost the same level as a physical NIC, and much better than paravirtualized or emulated NICs. In particular, when multiple VFs are used simultaneously on a single host, the performance benefits can be significant.
				</p><div class="itemizedlist"><p class="title"><strong>Disadvantages</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To modify the configuration of a PF, you must first change the number of VFs exposed by the PF to zero. Therefore, you also need to remove the devices provided by these VFs from the VM to which they are assigned.
						</li><li class="listitem">
							A VM with an VFIO-assigned devices attached, including SR-IOV VFs, cannot be migrated to another host. In some cases, you can work around this limitation by pairing the assigned device with an emulated device. For example, you can <a class="link" href="https://access.redhat.com/solutions/67546">bond</a> an assigned networking VF to an emulated vNIC, and remove the VF before the migration.
						</li><li class="listitem">
							In addition, VFIO-assigned devices require pinning of VM memory, which increases the memory consumption of the VM and prevents the use of memory ballooning on the VM.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#supported-devices-for-sr-iov-assignment-in-rhel_managing-sr-iov-devices" title="14.7.3. Supported devices for SR-IOV assignment">Supported devices for SR-IOV assignment</a>
						</li><li class="listitem">
							<a class="link" href="https://www.ibm.com/docs/en/linux-on-systems?topic=vfio-pass-through-pci">Configuring passthrough PCI devices on IBM Z</a>
						</li></ul></div></section><section class="section" id="attaching-sr-iov-networking-devices-to-virtual-machines_managing-sr-iov-devices"><div class="titlepage"><div><div><h4 class="title">14.7.2. Attaching SR-IOV networking devices to virtual machines</h4></div></div></div><p class="_abstract _abstract">
					To attach an SR-IOV networking device to a virtual machine (VM) on an Intel or AMD host, you must create a virtual function (VF) from an SR-IOV capable network interface on the host and assign the VF as a device to a specified VM. For details, see the following instructions.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The CPU and the firmware of your host support the I/O Memory Management Unit (IOMMU).
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									If using an Intel CPU, it must support the Intel Virtualization Technology for Directed I/O (VT-d).
								</li><li class="listitem">
									If using an AMD CPU, it must support the AMD-Vi feature.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							The host system uses Access Control Service (ACS) to provide direct memory access (DMA) isolation for PCIe topology. Verify this with the system vendor.
						</p><p class="simpara">
							For additional information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_virtualization/4.0/html/hardware_considerations_for_implementing_sr-iov/index">Hardware Considerations for Implementing SR-IOV</a>.
						</p></li><li class="listitem"><p class="simpara">
							The physical network device supports SR-IOV. To verify if any network devices on your system support SR-IOV, use the <code class="literal">lspci -v</code> command and look for <code class="literal">Single Root I/O Virtualization (SR-IOV)</code> in the output.
						</p><pre class="screen"># <span class="strong strong"><strong>lspci -v</strong></span>
[...]
02:00.0 Ethernet controller: Intel Corporation 82576 Gigabit Network Connection (rev 01)
	Subsystem: Intel Corporation Gigabit ET Dual Port Server Adapter
	Flags: bus master, fast devsel, latency 0, IRQ 16, NUMA node 0
	Memory at fcba0000 (32-bit, non-prefetchable) [size=128K]
[...]
	Capabilities: [150] Alternative Routing-ID Interpretation (ARI)
	Capabilities: <span class="strong strong"><strong>[160] Single Root I/O Virtualization (SR-IOV)</strong></span>
	Kernel driver in use: igb
	Kernel modules: igb
[...]</pre></li><li class="listitem"><p class="simpara">
							The host network interface you want to use for creating VFs is running. For example, to activate the <span class="emphasis"><em>eth1</em></span> interface and verify it is running:
						</p><pre class="screen"># <span class="strong strong"><strong>ip link set eth1 up</strong></span>
# <span class="strong strong"><strong>ip link show eth1</strong></span>
8: eth1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP mode DEFAULT qlen 1000
   link/ether a0:36:9f:8f:3f:b8 brd ff:ff:ff:ff:ff:ff
   vf 0 MAC 00:00:00:00:00:00, spoof checking on, link-state auto
   vf 1 MAC 00:00:00:00:00:00, spoof checking on, link-state auto
   vf 2 MAC 00:00:00:00:00:00, spoof checking on, link-state auto
   vf 3 MAC 00:00:00:00:00:00, spoof checking on, link-state auto</pre></li><li class="listitem"><p class="simpara">
							For SR-IOV device assignment to work, the IOMMU feature must be enabled in the host BIOS and kernel. To do so:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									On an Intel host, enable VT-d:
								</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
											Regenerate the GRUB configuration with the <code class="literal">intel_iommu=on</code> and <code class="literal">iommu=pt</code> parameters:
										</p><pre class="screen"># <span class="strong strong"><strong>grubby --args="intel_iommu=on iommu=pt" --update-kernel=ALL</strong></span></pre></li><li class="listitem">
											Reboot the host.
										</li></ol></div></li><li class="listitem"><p class="simpara">
									On an AMD host, enable AMD-Vi:
								</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
											Regenerate the GRUB configuration with the <code class="literal">iommu=pt</code> parameter:
										</p><pre class="screen"># <span class="strong strong"><strong>grubby --args="iommu=pt" --update-kernel=ALL</strong></span></pre></li><li class="listitem">
											Reboot the host.
										</li></ol></div></li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Optional: Confirm the maximum number of VFs your network device can use. To do so, use the following command and replace <span class="emphasis"><em>eth1</em></span> with your SR-IOV compatible network device.
						</p><pre class="screen"># <span class="strong strong"><strong>cat /sys/class/net/eth1/device/sriov_totalvfs</strong></span>
7</pre></li><li class="listitem"><p class="simpara">
							Use the following command to create a virtual function (VF):
						</p><pre class="screen"># <span class="strong strong"><strong>echo <span class="emphasis"><em>VF-number</em></span> &gt; /sys/class/net/<span class="emphasis"><em>network-interface</em></span>/device/sriov_numvfs</strong></span></pre><p class="simpara">
							In the command, replace:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="emphasis"><em>VF-number</em></span> with the number of VFs you want to create on the PF.
								</li><li class="listitem">
									<span class="emphasis"><em>network-interface</em></span> with the name of the network interface for which the VFs will be created.
								</li></ul></div><p class="simpara">
							The following example creates 2 VFs from the eth1 network interface:
						</p><pre class="screen"># <span class="strong strong"><strong>echo 2 &gt; /sys/class/net/eth1/device/sriov_numvfs</strong></span></pre></li><li class="listitem"><p class="simpara">
							Verify the VFs have been added:
						</p><pre class="screen"># <span class="strong strong"><strong>lspci | grep Ethernet</strong></span>
82:00.0 Ethernet controller: Intel Corporation 82599ES 10-Gigabit SFI/SFP+ Network Connection (rev 01)
82:00.1 Ethernet controller: Intel Corporation 82599ES 10-Gigabit SFI/SFP+ Network Connection (rev 01)
82:10.0 Ethernet controller: Intel Corporation 82599 Ethernet Controller Virtual Function (rev 01)
82:10.2 Ethernet controller: Intel Corporation 82599 Ethernet Controller Virtual Function (rev 01)</pre></li><li class="listitem"><p class="simpara">
							Make the created VFs persistent by creating a udev rule for the network interface you used to create the VFs. For example, for the <span class="emphasis"><em>eth1</em></span> interface, create the <code class="literal">/etc/udev/rules.d/eth1.rules</code> file, and add the following line:
						</p><pre class="programlisting language-bash">ACTION=="add", SUBSYSTEM=="net", ENV{ID_NET_DRIVER}=="ixgbe", ATTR{device/sriov_numvfs}="2"</pre><p class="simpara">
							This ensures that the two VFs that use the <code class="literal">ixgbe</code> driver will automatically be available for the <code class="literal">eth1</code> interface when the host starts. If you do not require persistent SR-IOV devices, skip this step.
						</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
								Currently, the setting described above does not work correctly when attempting to make VFs persistent on Broadcom NetXtreme II BCM57810 adapters. In addition, attaching VFs based on these adapters to Windows VMs is currently not reliable.
							</p></div></rh-alert></li><li class="listitem"><p class="simpara">
							Hot-plug one of the newly added VF interface devices to a running VM.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh attach-interface testguest1 hostdev 0000:82:10.0 --managed --live --config</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							If the procedure is successful, the guest operating system detects a new network interface card.
						</li></ul></div></section><section class="section" id="supported-devices-for-sr-iov-assignment-in-rhel_managing-sr-iov-devices"><div class="titlepage"><div><div><h4 class="title">14.7.3. Supported devices for SR-IOV assignment</h4></div></div></div><p>
					Not all devices can be used for SR-IOV. The following devices have been tested and verified as compatible with SR-IOV in RHEL 9.
				</p><div class="itemizedlist"><p class="title"><strong>Networking devices</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Intel 82599ES 10 Gigabit Ethernet Controller - uses the <code class="literal">ixgbe</code> driver
						</li><li class="listitem">
							Intel Ethernet Controller XL710 Series - uses the <code class="literal">i40e</code> driver
						</li><li class="listitem">
							Intel Ethernet Network Adapter XXV710 - uses the <code class="literal">i40e</code> driver
						</li><li class="listitem">
							Intel 82576 Gigabit Ethernet Controller - uses the <code class="literal">igb</code> driver
						</li><li class="listitem">
							Broadcom NetXtreme II BCM57810 - uses the <code class="literal">bnx2x</code> driver
						</li><li class="listitem">
							Ethernet Controller E810-C for QSFP - uses the <code class="literal">ice</code> driver
						</li><li class="listitem">
							SFC9220 10/40G Ethernet Controller - uses the <code class="literal">sfc</code> driver
						</li><li class="listitem">
							FastLinQ QL41000 Series 10/25/40/50GbE Controller - uses the <code class="literal">qede</code> driver
						</li><li class="listitem">
							Mellanox ConnectX-5 Ethernet Adapter Cards
						</li><li class="listitem">
							Mellanox MT2892 Family [ConnectX-6 Dx]
						</li></ul></div></section></section><section class="section" id="attaching-dasd-devices-to-virtual-machines-on-ibm-z_managing-virtual-devices"><div class="titlepage"><div><div><h3 class="title">14.8. Attaching DASD devices to virtual machines on IBM Z</h3></div></div></div><p class="_abstract _abstract">
				By using the <code class="literal">vfio-ccw</code> feature, you can assign direct-access storage devices (DASDs) as mediated devices to your virtual machines (VMs) on IBM Z hosts. This for example makes it possible for the VM to access a z/OS dataset, or to provide the assigned DASDs to a z/OS machine.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have a system with IBM Z hardware architecture supported with the FICON protocol.
					</li><li class="listitem">
						You have a target VM of a Linux operating system.
					</li><li class="listitem"><p class="simpara">
						The <span class="emphasis"><em>driverctl</em></span> package is installed.
					</p><pre class="screen"># <span class="strong strong"><strong>dnf install driverctl</strong></span></pre></li><li class="listitem"><p class="simpara">
						The necessary <code class="literal">vfio</code> kernel modules have been loaded on the host.
					</p><pre class="screen"># <span class="strong strong"><strong>lsmod | grep vfio</strong></span></pre><p class="simpara">
						The output of this command must contain the following modules:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<code class="literal">vfio_ccw</code>
							</li><li class="listitem">
								<code class="literal">vfio_mdev</code>
							</li><li class="listitem">
								<code class="literal">vfio_iommu_type1</code>
							</li></ul></div></li><li class="listitem"><p class="simpara">
						You have a spare DASD device for exclusive use by the VM, and you know the identifier of the device.
					</p><p class="simpara">
						The following procedure uses <code class="literal">0.0.002c</code> as an example. When performing the commands, replace <code class="literal">0.0.002c</code> with the identifier of your DASD device.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Obtain the subchannel identifier of the DASD device.
					</p><pre class="screen"># <span class="strong strong"><strong>lscss -d <span class="emphasis"><em>0.0.002c</em></span></strong></span>
Device   Subchan.  DevType CU Type Use  PIM PAM POM  CHPIDs
----------------------------------------------------------------------
0.0.002c <span class="strong strong"><strong>0.0.29a8</strong></span>  3390/0c 3990/e9 yes  f0  f0  ff   02111221 00000000</pre><p class="simpara">
						In this example, the subchannel identifier is detected as <code class="literal">0.0.29a8</code>. In the following commands of this procedure, replace <code class="literal">0.0.29a8</code> with the detected subchannel identifier of your device.
					</p></li><li class="listitem"><p class="simpara">
						If the <code class="literal">lscss</code> command in the previous step only displayed the header output and no device information, perform the following steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Remove the device from the <code class="literal">cio_ignore</code> list.
							</p><pre class="screen"># <span class="strong strong"><strong>cio_ignore -r <span class="emphasis"><em>0.0.002c</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
								In the guest OS, <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_monitoring_and_updating_the_kernel/configuring-kernel-parameters-at-runtime_managing-monitoring-and-updating-the-kernel">edit the kernel command line</a> of the VM and add the device identifier with a <code class="literal">!</code> mark to the line that starts with <code class="literal">cio_ignore=</code>, if it is not present already.
							</p><pre class="screen">cio_ignore=all,!condev,<span class="strong strong"><strong>!<span class="emphasis"><em>0.0.002c</em></span></strong></span></pre></li><li class="listitem">
								Repeat step 1 on the host to obtain the subchannel identifier.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Bind the subchannel to the <code class="literal">vfio_ccw</code> passthrough driver.
					</p><pre class="screen"># <span class="strong strong"><strong>driverctl -b css set-override <span class="emphasis"><em>0.0.29a8</em></span> vfio_ccw</strong></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							This binds the <span class="emphasis"><em>0.0.29a8</em></span> subchannel to <code class="literal">vfio_ccw</code> persistently, which means the DASD will not be usable on the host. If you need to use the device on the host, you must first remove the automatic binding to 'vfio_ccw' and rebind the subchannel to the default driver:
						</p><p>
							# <span class="strong strong"><strong>driverctl -b css unset-override <span class="emphasis"><em>0.0.29a8</em></span></strong></span>
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Define and start the DASD mediated device.
					</p><pre class="screen"># cat nodedev.xml
&lt;device&gt;
    &lt;parent&gt;css_0_0_29a8&lt;/parent&gt;
    &lt;capability type="mdev"&gt;
        &lt;type id="vfio_ccw-io"/&gt;
    &lt;/capability&gt;
&lt;/device&gt;

# <span class="strong strong"><strong>virsh nodedev-define nodedev.xml</strong></span>
Node device 'mdev_30820a6f_b1a5_4503_91ca_0c10ba12345a_0_0_29a8' defined from 'nodedev.xml'

# <span class="strong strong"><strong>virsh nodedev-start mdev_30820a6f_b1a5_4503_91ca_0c10ba12345a_0_0_29a8</strong></span>
Device mdev_30820a6f_b1a5_4503_91ca_0c10ba12345a_0_0_29a8 started</pre></li><li class="listitem">
						Shut down the VM, if it is running.
					</li><li class="listitem"><p class="simpara">
						Display the UUID of the previously defined device and save it for the next step.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-dumpxml mdev_30820a6f_b1a5_4503_91ca_0c10ba12345a_0_0_29a8</strong></span>

&lt;device&gt;
  &lt;name&gt;mdev_30820a6f_b1a5_4503_91ca_0c10ba12345a_0_0_29a8&lt;/name&gt;
  &lt;parent&gt;css_0_0_29a8&lt;/parent&gt;
  &lt;capability type='mdev'&gt;
    &lt;type id='vfio_ccw-io'/&gt;
    <span class="strong strong"><strong>&lt;uuid&gt;30820a6f-b1a5-4503-91ca-0c10ba12345a&lt;/uuid&gt;</strong></span>
    &lt;iommuGroup number='0'/&gt;
    &lt;attr name='assign_adapter' value='0x02'/&gt;
    &lt;attr name='assign_domain' value='0x002b'/&gt;
  &lt;/capability&gt;
&lt;/device&gt;</pre></li><li class="listitem"><p class="simpara">
						Attach the mediated device to the VM. To do so, use the <code class="literal">virsh edit</code> utility to edit the XML configuration of the VM, add the following section to the XML, and replace the <code class="literal">uuid</code> value with the UUID you obtained in the previous step.
					</p><pre class="programlisting language-xml">&lt;hostdev mode='subsystem' type='mdev' model='vfio-ccw'&gt;
  &lt;source&gt;
    &lt;address uuid="30820a6f-b1a5-4503-91ca-0c10ba12345a"/&gt;
  &lt;/source&gt;
&lt;/hostdev&gt;</pre></li><li class="listitem"><p class="simpara">
						Optional: Configure the mediated device to start automatically on host boot.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-autostart <span class="emphasis"><em>mdev_30820a6f_b1a5_4503_91ca_0c10ba12345a_0_0_29a8</em></span></strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Ensure that the mediated device is configured correctly.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-info <span class="emphasis"><em>mdev_30820a6f_b1a5_4503_91ca_0c10ba12345a_0_0_29a8</em></span></strong></span>
Name:           <span class="emphasis"><em>mdev_30820a6f_b1a5_4503_91ca_0c10ba12345a_0_0_29a8</em></span>
Parent:         css_0_0_0121
Active:         <span class="strong strong"><strong>yes</strong></span>
Persistent:     <span class="strong strong"><strong>yes</strong></span>
Autostart:      <span class="strong strong"><strong>yes</strong></span></pre></li><li class="listitem"><p class="simpara">
						Obtain the identifier that <code class="literal">libvirt</code> assigned to the mediated DASD device. To do so, display the XML configuration of the VM and look for a <code class="literal">vfio-ccw</code> device.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh dumpxml <span class="emphasis"><em>vm-name</em></span></strong></span>

&lt;domain&gt;
[...]
    &lt;hostdev mode='subsystem' type='mdev' managed='no' model='vfio-ccw'&gt;
      &lt;source&gt;
        &lt;address uuid='10620d2f-ed4d-437b-8aff-beda461541f9'/&gt;
      &lt;/source&gt;
      &lt;alias name='hostdev0'/&gt;
      &lt;address type='ccw' cssid='0xfe' ssid='0x0' <span class="strong strong"><strong>devno='0x0009</strong></span>'/&gt;
    &lt;/hostdev&gt;
[...]
&lt;/domain&gt;</pre><p class="simpara">
						In this example, the assigned identifier of the device is <code class="literal">0.0.0009</code>.
					</p></li><li class="listitem">
						Start the VM and log in to its guest OS.
					</li><li class="listitem"><p class="simpara">
						In the guest OS, confirm that the DASD device is listed. For example:
					</p><pre class="screen"># <span class="strong strong"><strong>lscss | grep <span class="emphasis"><em>0.0.0009</em></span></strong></span>
<span class="strong strong"><strong>0.0.0009</strong></span> 0.0.0007  3390/0c 3990/e9      f0  f0  ff   12212231 00000000</pre></li><li class="listitem"><p class="simpara">
						In the guest OS, set the device online. For example:
					</p><pre class="screen"># <span class="strong strong"><strong>chccwdev -e <span class="emphasis"><em>0.0009</em></span></strong></span>
Setting device 0.0.0009 online
Done</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://www.ibm.com/docs/en/linux-on-systems?topic=parameters-cio-ignore">IBM documentation on <code class="literal">cio_ignore</code></a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_monitoring_and_updating_the_kernel/configuring-kernel-parameters-at-runtime_managing-monitoring-and-updating-the-kernel">Configuring kernel parameters at runtime</a>
					</li></ul></div></section><section class="section" id="Attaching-a-watchdog-device-to-a-virtual-machine-using-the-web-console_managing-virtual-devices"><div class="titlepage"><div><div><h3 class="title">14.9. Attaching a watchdog device to a virtual machine by using the web console</h3></div></div></div><p>
				To force the virtual machine (VM) to perform a specified action when it stops responding, you can attach virtual watchdog devices to a VM.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You have installed the RHEL 9 web console.
					</p><p class="simpara">
						For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
					</p></li><li class="listitem">
						You have installed the web console VM plug-in on your system. For more information, see <a class="xref" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">Section 8.2, “Setting up the web console to manage virtual machines”</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						In the command-line interface, install the watchdog service.
					</p><p class="simpara">
						# <span class="strong strong"><strong>dnf install watchdog</strong></span>
					</p></li><li class="listitem">
						Shut down the VM.
					</li><li class="listitem"><p class="simpara">
						Add the watchdog service to the VM.
					</p><p class="simpara">
						# <span class="strong strong"><strong>virt-xml <span class="emphasis"><em>vmname</em></span>  --add-device --watchdog action=reset --update</strong></span>
					</p></li><li class="listitem">
						Run the VM.
					</li></ol></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Log in to the RHEL 9 web console.
					</p><p class="simpara">
						For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
					</p></li><li class="listitem">
						In the <span class="guimenu">Virtual Machines</span> interface of the web console, click on the VM to which you want to add the watchdog device.
					</li><li class="listitem"><p class="simpara">
						Click <span class="guibutton">add</span> next to the <span class="strong strong"><strong>Watchdog</strong></span> field in the Overview pane.
					</p><p class="simpara">
						The <span class="strong strong"><strong>Add watchdog device type</strong></span> dialog appears.
					</p></li><li class="listitem"><p class="simpara">
						Select the action that you want the watchdog device to perform if the VM stops responding.
					</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/88c483bb79581ca6b3c173ae03803a09/virt-cockpit-add-watchdog.png" width="540" alt="Image displaying the add watchdog device type dialog box."></div></div></li><li class="listitem">
						Click <span class="guibutton">Add</span>.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The action you selected is visible next to the <span class="strong strong"><strong>Watchdog</strong></span> field in the Overview pane.
					</li></ul></div></section><section class="section" id="attaching-zpci-devices-to-virtual-machines-on-ibm-z_managing-virtual-devices"><div class="titlepage"><div><div><h3 class="title">14.10. Attaching PCI devices to virtual machines on IBM Z</h3></div></div></div><p class="_abstract _abstract">
				By using the <code class="literal">vfio-pci</code> device driver, you can assign PCI devices in pass-through mode to your virtual machines (VMs) on IBM Z hosts. This for example makes it possible for the VM to use NVMe flash disks for handling databases.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have a host system with the IBM Z hardware architecture.
					</li><li class="listitem">
						You have a target VM of Linux operating system.
					</li><li class="listitem"><p class="simpara">
						The necessary <code class="literal">vfio</code> kernel modules have been loaded on the host.
					</p><pre class="screen"># <span class="strong strong"><strong>lsmod | grep vfio</strong></span></pre><p class="simpara">
						The output of this command must contain the following modules:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<code class="literal">vfio_pci</code>
							</li><li class="listitem">
								<code class="literal">vfio_pci_core</code>
							</li><li class="listitem">
								<code class="literal">vfio_iommu_type1</code>
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Obtain the PCI address identifier of the device that you want to use.
					</p><pre class="screen"># <span class="strong strong"><strong>lspci -nkD</strong></span>

0000:00:00.0 0000: 1014:04ed
	Kernel driver in use: ism
	Kernel modules: ism
0001:00:00.0 0000: 1014:04ed
	Kernel driver in use: ism
	Kernel modules: ism
0002:00:00.0 0200: 15b3:1016
	Subsystem: 15b3:0062
	Kernel driver in use: mlx5_core
	Kernel modules: mlx5_core
0003:00:00.0 0200: 15b3:1016
	Subsystem: 15b3:0062
	Kernel driver in use: mlx5_core
	Kernel modules: mlx5_core</pre></li><li class="listitem"><p class="simpara">
						Open the XML configuration of the VM to which you want to attach the PCI device.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh edit <span class="emphasis"><em>vm-name</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Add the following <code class="literal">&lt;hostdev&gt;</code> configuration to the <code class="literal">&lt;devices&gt;</code> section of the XML file.
					</p><p class="simpara">
						Replace the values on the <code class="literal">address</code> line with the PCI address of your device. For example, if the device address is <code class="literal">0003:00:00.0</code>, use the following configuration:
					</p><pre class="screen">&lt;hostdev mode="subsystem" type="pci" managed="yes"&gt;
  &lt;driver name="vfio"/&gt;
   &lt;source&gt;
    &lt;address domain="<span class="emphasis"><em>0x0003</em></span>" bus="<span class="emphasis"><em>0x00</em></span>" slot="<span class="emphasis"><em>0x00</em></span>" function="<span class="emphasis"><em>0x0</em></span>"/&gt;
   &lt;/source&gt;
   &lt;address type="pci"/&gt;
&lt;/hostdev&gt;</pre></li><li class="listitem"><p class="simpara">
						Optional: To modify how the guest operating system will detect the PCI device, you can also add a <code class="literal">&lt;zpci&gt;</code> sub-element to the <code class="literal">&lt;address&gt;</code> element. In the <code class="literal">&lt;zpci&gt;</code> line, you can adjust the <code class="literal">uid</code> and <code class="literal">fid</code> values, which modifies the PCI address and function ID of the device in the guest operating system.
					</p><pre class="screen">&lt;hostdev mode="subsystem" type="pci" managed="yes"&gt;
  &lt;driver name="vfio"/&gt;
   &lt;source&gt;
    &lt;address domain="<span class="emphasis"><em>0x0003</em></span>" bus="<span class="emphasis"><em>0x00</em></span>" slot="<span class="emphasis"><em>0x00</em></span>" function="<span class="emphasis"><em>0x0</em></span>"/&gt;
   &lt;/source&gt;
   &lt;address type="pci"&gt;
     &lt;zpci uid="0x0008" fid="0x001807"/&gt;
   &lt;/address&gt;
&lt;/hostdev&gt;</pre><p class="simpara">
						In this example:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">uid="0x0008"</code> sets the domain PCI address of the device in the VM to <code class="literal">0008:00:00.0</code>.
							</li><li class="listitem"><p class="simpara">
								<code class="literal">fid="0x001807"</code> sets the slot value of the device to <code class="literal">0x001807</code>. As a result, the device configuration in the file system of the VM is saved to <code class="literal">/sys/bus/pci/slots/00001087/address</code>.
							</p><p class="simpara">
								If these values are not specified, <code class="literal">libvirt</code> configures them automatically.
							</p></li></ul></div></li><li class="listitem">
						Save the XML configuration.
					</li><li class="listitem"><p class="simpara">
						If the VM is running, shut it down.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh shutdown <span class="emphasis"><em>vm-name</em></span></strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Start the VM and log in to its guest operating system.
					</li><li class="listitem"><p class="simpara">
						In the guest operating system, confirm that the PCI device is listed.
					</p><p class="simpara">
						For example, if the device address is <code class="literal">0003:00:00.0</code>, use the following command:
					</p><pre class="screen"># <span class="strong strong"><strong>lspci -nkD | grep <span class="emphasis"><em>0003:00:00.0</em></span></strong></span>

0003:00:00.0 8086:9a09 (rev 01)</pre></li></ol></div></section></section><section class="chapter" id="managing-storage-for-virtual-machines_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h2 class="title">Chapter 15. Managing storage for virtual machines</h2></div></div></div><p>
			A virtual machine (VM), just like a physical machine, requires storage for data, program, and system files. As a VM administrator, you can assign physical or network-based storage to your VMs as virtual storage. You can also modify how the storage is presented to a VM regardless of the underlying hardware.
		</p><p>
			The following sections provide information about the different types of VM storage, how they work, and how you can manage them by using the CLI or the web console.
		</p><section class="section" id="understanding-virtual-machine-storage_managing-storage-for-virtual-machines"><div class="titlepage"><div><div><h3 class="title">15.1. Understanding virtual machine storage</h3></div></div></div><p>
				If you are new to virtual machine (VM) storage, or are unsure about how it works, the following sections provide a general overview about the various components of VM storage, how it works, management basics, and the supported solutions provided by Red Hat.
			</p><p>
				You can find information about:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#understanding-storage-pools_understanding-virtual-machine-storage" title="15.1.1. Introduction to storage pools">Storage pools</a>
					</li><li class="listitem">
						<a class="link" href="#storage-volumes_understanding-virtual-machine-storage" title="15.1.2. Introduction to storage volumes">Storage volumes</a>
					</li><li class="listitem">
						<a class="link" href="#con_storage-management-using-libvirt_understanding-virtual-machine-storage" title="15.1.3. Storage management by using libvirt">Managing storage using libvirt</a>
					</li><li class="listitem">
						<a class="link" href="#con_overview-of-storage-management_understanding-virtual-machine-storage" title="15.1.4. Overview of storage management">Overview of VM storage</a>
					</li><li class="listitem">
						<a class="link" href="#ref_supported-and-unsupported-storage-pool-types_understanding-virtual-machine-storage" title="15.1.5. Supported and unsupported storage pool types">Supported and unsupported storage pool types</a>
					</li></ul></div><section class="section" id="understanding-storage-pools_understanding-virtual-machine-storage"><div class="titlepage"><div><div><h4 class="title">15.1.1. Introduction to storage pools</h4></div></div></div><p>
					A storage pool is a file, directory, or storage device, managed by <code class="literal">libvirt</code> to provide storage for virtual machines (VMs). You can divide storage pools into storage volumes, which store VM images or are attached to VMs as additional storage.
				</p><p>
					Furthermore, multiple VMs can share the same storage pool, allowing for better allocation of storage resources.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Storage pools can be persistent or transient:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									A persistent storage pool survives a system restart of the host machine. You can use the <code class="literal command">virsh pool-define</code> to create a persistent storage pool.
								</li><li class="listitem">
									A transient storage pool only exists until the host reboots. You can use the <code class="literal command">virsh pool-create</code> command to create a transient storage pool.
								</li></ul></div></li></ul></div><div class="formalpara"><p class="title"><strong>Storage pool storage types</strong></p><p>
						Storage pools can be either local or network-based (shared):
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Local storage pools</strong></span>
						</p><p class="simpara">
							Local storage pools are attached directly to the host server. They include local directories, directly attached disks, physical partitions, and Logical Volume Manager (LVM) volume groups on local devices.
						</p><p class="simpara">
							Local storage pools are useful for development, testing, and small deployments that do not require migration or have a large number of VMs.
						</p></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Networked (shared) storage pools</strong></span>
						</p><p class="simpara">
							Networked storage pools include storage devices shared over a network by using standard protocols.
						</p></li></ul></div></section><section class="section" id="storage-volumes_understanding-virtual-machine-storage"><div class="titlepage"><div><div><h4 class="title">15.1.2. Introduction to storage volumes</h4></div></div></div><p>
					Storage pools are divided into <code class="literal">storage volumes</code>. Storage volumes are abstractions of physical partitions, LVM logical volumes, file-based disk images, and other storage types handled by <code class="literal">libvirt</code>. Storage volumes are presented to VMs as local storage devices, such as disks, regardless of the underlying hardware.
				</p><p>
					On the host machine, a storage volume is referred to by its name and an identifier for the storage pool from which it derives. On the <code class="literal">virsh</code> command line, this takes the form <code class="literal">--pool <span class="emphasis"><em>storage_pool</em></span> <span class="emphasis"><em>volume_name</em></span></code>.
				</p><p>
					For example, to display information about a volume named <span class="emphasis"><em>firstimage</em></span> in the <span class="emphasis"><em>guest_images</em></span> pool.
				</p><pre class="screen"># <span class="strong strong"><strong>virsh vol-info --pool guest_images firstimage</strong></span>
  Name:             firstimage
  Type:             block
  Capacity:         20.00 GB
  Allocation:       20.00 GB</pre></section><section class="section" id="con_storage-management-using-libvirt_understanding-virtual-machine-storage"><div class="titlepage"><div><div><h4 class="title">15.1.3. Storage management by using libvirt</h4></div></div></div><p class="_abstract _abstract">
					By using the <code class="literal">libvirt</code> remote protocol, you can manage all aspects of VM storage. These operations can also be performed on a remote host. Consequently, a management application that uses <code class="literal">libvirt</code>, such as the RHEL web console, can be used to perform all the required tasks of configuring the storage of a VM.
				</p><p>
					You can use the <code class="literal">libvirt</code> API to query the list of volumes in a storage pool or to get information regarding the capacity, allocation, and available storage in that storage pool. For storage pools that support it, you can also use the <code class="literal">libvirt</code> API to create, clone, resize, and delete storage volumes. Furthermore, you can use the <code class="literal">libvirt</code> API to upload data to storage volumes, download data from storage volumes, or wipe data from storage volumes.
				</p></section><section class="section" id="con_overview-of-storage-management_understanding-virtual-machine-storage"><div class="titlepage"><div><div><h4 class="title">15.1.4. Overview of storage management</h4></div></div></div><p class="_abstract _abstract">
					To illustrate the available options for managing storage, the following example talks about a sample NFS server that uses <code class="literal command">mount -t nfs nfs.example.com:/path/to/share /path/to/data</code>.
				</p><p>
					As a storage administrator:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							You can define an NFS storage pool on the virtualization host to describe the exported server path and the client target path. Consequently, <code class="literal">libvirt</code> can mount the storage either automatically when <code class="literal">libvirt</code> is started or as needed while <code class="literal">libvirt</code> is running.
						</li><li class="listitem">
							You can simply add the storage pool and storage volume to a VM by name. You do not need to add the target path to the volume. Therefore, even if the target client path changes, it does not affect the VM.
						</li><li class="listitem">
							You can configure storage pools to autostart. When you do so, <code class="literal">libvirt</code> automatically mounts the NFS shared disk on the directory which is specified when <code class="literal">libvirt</code> is started. <code class="literal">libvirt</code> mounts the share on the specified directory, similar to the command <code class="literal command">mount nfs.example.com:/path/to/share /vmdata</code>.
						</li><li class="listitem">
							You can query the storage volume paths by using the <code class="literal">libvirt</code> API. These storage volumes are basically the files present in the NFS shared disk. You can then copy these paths into the section of a VM’s XML definition that describes the source storage for the VM’s block devices.
						</li><li class="listitem"><p class="simpara">
							In the case of NFS, you can use an application that uses the <code class="literal">libvirt</code> API to create and delete storage volumes in the storage pool (files in the NFS share) up to the limit of the size of the pool (the storage capacity of the share).
						</p><p class="simpara">
							Note that, not all storage pool types support creating and deleting volumes.
						</p></li><li class="listitem">
							You can stop a storage pool when no longer required. Stopping a storage pool (<code class="literal command">pool-destroy</code>) undoes the start operation, in this case, unmounting the NFS share. The data on the share is not modified by the destroy operation, despite what the name of the command suggests. For more information, see <code class="literal command">man virsh</code>.
						</li></ul></div></section><section class="section" id="ref_supported-and-unsupported-storage-pool-types_understanding-virtual-machine-storage"><div class="titlepage"><div><div><h4 class="title">15.1.5. Supported and unsupported storage pool types</h4></div></div></div><p class="_abstract _abstract">
					<span class="strong strong"><strong>Supported storage pool types</strong></span>
				</p><p>
					The following is a list of storage pool types supported by RHEL:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Directory-based storage pools
						</li><li class="listitem">
							Disk-based storage pools
						</li><li class="listitem">
							Partition-based storage pools
						</li><li class="listitem">
							iSCSI-based storage pools
						</li><li class="listitem">
							LVM-based storage pools
						</li><li class="listitem">
							NFS-based storage pools
						</li><li class="listitem">
							SCSI-based storage pools with vHBA devices
						</li><li class="listitem">
							Multipath-based storage pools
						</li><li class="listitem">
							RBD-based storage pools
						</li></ul></div><p>
					<span class="strong strong"><strong>Unsupported storage pool types</strong></span>
				</p><p>
					The following is a list of <code class="literal">libvirt</code> storage pool types not supported by RHEL:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Sheepdog-based storage pools
						</li><li class="listitem">
							Vstorage-based storage pools
						</li><li class="listitem">
							ZFS-based storage pools
						</li><li class="listitem">
							iSCSI-direct storage pools
						</li><li class="listitem">
							GlusterFS storage pools
						</li></ul></div></section></section><section class="section" id="assembly_managing-virtual-machine-storage-pools-using-the-cli_managing-storage-for-virtual-machines"><div class="titlepage"><div><div><h3 class="title">15.2. Managing virtual machine storage pools by using the CLI</h3></div></div></div><p>
				You can use the CLI to manage the following aspects of your storage pools to assign storage to your virtual machines (VMs):
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#viewing-storage-pool-information-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" title="15.2.1. Viewing storage pool information by using the CLI">View storage pool information</a>
					</li><li class="listitem"><p class="simpara">
						Create storage pools
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<a class="link" href="#creating-directory-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" title="15.2.2. Creating directory-based storage pools by using the CLI">Create directory-based storage pools by using the CLI</a>
							</li><li class="listitem">
								<a class="link" href="#creating-disk-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" title="15.2.3. Creating disk-based storage pools by using the CLI">Create disk-based storage pools by using the CLI</a>
							</li><li class="listitem">
								<a class="link" href="#creating-filesystem-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" title="15.2.4. Creating filesystem-based storage pools by using the CLI">Create filesystem-based storage pools by using the CLI</a>
							</li><li class="listitem">
								<a class="link" href="#creating-iscsi-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" title="15.2.5. Creating iSCSI-based storage pools by using the CLI">Create iSCSI-based storage pools by using the CLI</a>
							</li><li class="listitem">
								<a class="link" href="#creating-lvm-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" title="15.2.6. Creating LVM-based storage pools by using the CLI">Create LVM-based storage pools by using the CLI</a>
							</li><li class="listitem">
								<a class="link" href="#creating-nfs-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" title="15.2.7. Creating NFS-based storage pools by using the CLI">Create NFS-based storage pools by using the CLI</a>
							</li><li class="listitem">
								<a class="link" href="#creating-scsi-based-storage-pools-with-vhba-devices-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" title="15.2.8. Creating SCSI-based storage pools with vHBA devices by using the CLI">Create SCSI-based storage pools with vHBA devices by using the CLI</a>
							</li></ul></div></li><li class="listitem">
						<a class="link" href="#deleting-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" title="15.2.9. Deleting storage pools by using the CLI">Remove storage pools</a>
					</li></ul></div><section class="section" id="viewing-storage-pool-information-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli"><div class="titlepage"><div><div><h4 class="title">15.2.1. Viewing storage pool information by using the CLI</h4></div></div></div><p>
					By using the CLI, you can view a list of all storage pools with limited or full details about the storage pools. You can also filter the storage pools listed.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Use the <code class="literal command">virsh pool-list</code> command to view storage pool information.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-list --all --details</strong></span>
 Name                State    Autostart  Persistent    Capacity  Allocation   Available
 default             running  yes        yes          48.97 GiB   23.93 GiB   25.03 GiB
 Downloads           running  yes        yes         175.62 GiB   62.02 GiB  113.60 GiB
 RHEL-Storage-Pool   running  yes        yes         214.62 GiB   93.02 GiB  168.60 GiB</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							The <code class="literal">virsh pool-list --help</code> command
						</li></ul></div></section><section class="section" id="creating-directory-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli"><div class="titlepage"><div><div><h4 class="title">15.2.2. Creating directory-based storage pools by using the CLI</h4></div></div></div><p class="_abstract _abstract">
					A directory-based storage pool is based on a directory in an existing mounted file system. This is useful, for example, when you want to use the remaining space on the file system for other purposes. You can use the <code class="literal">virsh</code> utility to create directory-based storage pools.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Ensure your hypervisor supports directory storage pools:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-capabilities | grep "'dir' supported='yes'"</strong></span></pre><p class="simpara">
							If the command displays any output, directory pools are supported.
						</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Create a storage pool</strong></span>
						</p><p class="simpara">
							Use the <code class="literal command">virsh pool-define-as</code> command to define and create a directory-type storage pool. For example, to create a storage pool named <code class="literal">guest_images_dir</code> that uses the <span class="strong strong"><strong>/guest_images</strong></span> directory:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-define-as guest_images_dir dir --target "/guest_images"</strong></span>
Pool guest_images_dir defined</pre><p class="simpara">
							If you already have an XML configuration of the storage pool you want to create, you can also define the pool based on the XML. For details, see <a class="link" href="#directory-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools" title="15.4.1. Directory-based storage pool parameters">Directory-based storage pool parameters</a>.
						</p></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Create the storage pool target path</strong></span>
						</p><p class="simpara">
							Use the <code class="literal command">virsh pool-build</code> command to create a storage pool target path for a pre-formatted file system storage pool, initialize the storage source device, and define the format of the data.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-build guest_images_dir</strong></span>
  Pool guest_images_dir built

# <span class="strong strong"><strong>ls -la /guest_images</strong></span>
  total 8
  drwx------.  2 root root 4096 May 31 19:38 .
  dr-xr-xr-x. 25 root root 4096 May 31 19:38 ..</pre></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Verify that the pool was created</strong></span>
						</p><p class="simpara">
							Use the <code class="literal command">virsh pool-list</code> command to verify that the pool was created.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>

  Name                 State      Autostart
  -----------------------------------------
  default              active     yes
  guest_images_dir     inactive   no</pre></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Start the storage pool</strong></span>
						</p><p class="simpara">
							Use the <code class="literal command">virsh pool-start</code> command to mount the storage pool.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-start guest_images_dir</strong></span>
  Pool guest_images_dir started</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								The <code class="literal command">virsh pool-start</code> command is only necessary for persistent storage pools. Transient storage pools are automatically started when they are created.
							</p></div></rh-alert></li><li class="listitem"><p class="simpara">
							Optional: Turn on autostart.
						</p><p class="simpara">
							By default, a storage pool defined with the <code class="literal command">virsh</code> command is not set to automatically start each time virtualization services start. Use the <code class="literal command">virsh pool-autostart</code> command to configure the storage pool to autostart.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-autostart guest_images_dir</strong></span>
  Pool guest_images_dir marked as autostarted</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Use the <code class="literal command">virsh pool-info</code> command to verify that the storage pool is in the <code class="literal"><span class="emphasis"><em>running</em></span></code> state. Check if the sizes reported are as expected and if autostart is configured correctly.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-info guest_images_dir</strong></span>
  Name:           guest_images_dir
  UUID:           c7466869-e82a-a66c-2187-dc9d6f0877d0
  State:          running
  Persistent:     yes
  Autostart:      yes
  Capacity:       458.39 GB
  Allocation:     197.91 MB
  Available:      458.20 GB</pre></li></ul></div></section><section class="section" id="creating-disk-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli"><div class="titlepage"><div><div><h4 class="title">15.2.3. Creating disk-based storage pools by using the CLI</h4></div></div></div><p class="_abstract _abstract">
					In a disk-based storage pool, the pool is based on a disk partition. This is useful, for example, when you want to have an entire disk partition dedicated as virtual machine (VM) storage. You can use the <code class="literal">virsh</code> utility to create disk-based storage pools.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Ensure your hypervisor supports disk-based storage pools:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-capabilities | grep "'disk' supported='yes'"</strong></span></pre><p class="simpara">
							If the command displays any output, disk-based pools are supported.
						</p></li><li class="listitem"><p class="simpara">
							Prepare a device on which you will base the storage pool. For this purpose, prefer partitions (for example, <code class="literal filename">/dev/sdb1</code>) or LVM volumes. If you provide a VM with write access to an entire disk or block device (for example, <code class="literal filename">/dev/sdb</code>), the VM will likely partition it or create its own LVM groups on it. This can result in system errors on the host.
						</p><p class="simpara">
							However, if you require using an entire block device for the storage pool, Red Hat recommends protecting any important partitions on the device from GRUB’s <code class="literal">os-prober</code> function. To do so, edit the <code class="literal">/etc/default/grub</code> file and apply one of the following configurations:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									Disable <code class="literal">os-prober</code>.
								</p><pre class="screen">GRUB_DISABLE_OS_PROBER=true</pre></li><li class="listitem"><p class="simpara">
									Prevent <code class="literal">os-prober</code> from discovering a specific partition. For example:
								</p><pre class="screen">GRUB_OS_PROBER_SKIP_LIST="5ef6313a-257c-4d43@/dev/sdb1"</pre></li></ul></div></li><li class="listitem">
							Back up any data on the selected storage device before creating a storage pool. Depending on the version of <code class="literal package">libvirt</code> being used, dedicating a disk to a storage pool may reformat and erase all data currently stored on the disk device.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Create a storage pool</strong></span>
						</p><p class="simpara">
							Use the <code class="literal command">virsh pool-define-as</code> command to define and create a disk-type storage pool. The following example creates a storage pool named <code class="literal">guest_images_disk</code> that uses the <span class="strong strong"><strong>/dev/sdb</strong></span> device and is mounted on the /dev directory.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-define-as guest_images_disk disk --source-format=gpt --source-dev=/dev/sdb --target /dev</strong></span>
Pool guest_images_disk defined</pre><p class="simpara">
							If you already have an XML configuration of the storage pool you want to create, you can also define the pool based on the XML. For details, see <a class="link" href="#disk-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools" title="15.4.2. Disk-based storage pool parameters">Disk-based storage pool parameters</a>.
						</p></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Create the storage pool target path</strong></span>
						</p><p class="simpara">
							Use the <code class="literal command">virsh pool-build</code> command to create a storage pool target path for a pre-formatted file-system storage pool, initialize the storage source device, and define the format of the data.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-build guest_images_disk</strong></span>
  Pool guest_images_disk built</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								Building the target path is only necessary for disk-based, file system-based, and logical storage pools. If <code class="literal">libvirt</code> detects that the source storage device’s data format differs from the selected storage pool type, the build fails, unless the <code class="literal"><span class="emphasis"><em>overwrite</em></span></code> option is specified.
							</p></div></rh-alert></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Verify that the pool was created</strong></span>
						</p><p class="simpara">
							Use the <code class="literal command">virsh pool-list</code> command to verify that the pool was created.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>

  Name                 State      Autostart
  -----------------------------------------
  default              active     yes
  guest_images_disk    inactive   no</pre></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Start the storage pool</strong></span>
						</p><p class="simpara">
							Use the <code class="literal command">virsh pool-start</code> command to mount the storage pool.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-start guest_images_disk</strong></span>
  Pool guest_images_disk started</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								The <code class="literal command">virsh pool-start</code> command is only necessary for persistent storage pools. Transient storage pools are automatically started when they are created.
							</p></div></rh-alert></li><li class="listitem"><p class="simpara">
							Optional: Turn on autostart.
						</p><p class="simpara">
							By default, a storage pool defined with the <code class="literal command">virsh</code> command is not set to automatically start each time virtualization services start. Use the <code class="literal command">virsh pool-autostart</code> command to configure the storage pool to autostart.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-autostart guest_images_disk</strong></span>
  Pool guest_images_disk marked as autostarted</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Use the <code class="literal command">virsh pool-info</code> command to verify that the storage pool is in the <code class="literal"><span class="emphasis"><em>running</em></span></code> state. Check if the sizes reported are as expected and if autostart is configured correctly.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-info guest_images_disk</strong></span>
  Name:           guest_images_disk
  UUID:           c7466869-e82a-a66c-2187-dc9d6f0877d0
  State:          running
  Persistent:     yes
  Autostart:      yes
  Capacity:       458.39 GB
  Allocation:     197.91 MB
  Available:      458.20 GB</pre></li></ul></div></section><section class="section" id="creating-filesystem-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli"><div class="titlepage"><div><div><h4 class="title">15.2.4. Creating filesystem-based storage pools by using the CLI</h4></div></div></div><p class="_abstract _abstract">
					When you want to create a storage pool on a file system that is not mounted, use the filesystem-based storage pool. This storage pool is based on a given file-system mountpoint. You can use the <code class="literal">virsh</code> utility to create filesystem-based storage pools.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Ensure your hypervisor supports filesystem-based storage pools:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-capabilities | grep "'fs' supported='yes'"</strong></span></pre><p class="simpara">
							If the command displays any output, file-based pools are supported.
						</p></li><li class="listitem"><p class="simpara">
							Prepare a device on which you will base the storage pool. For this purpose, prefer partitions (for example, <code class="literal filename">/dev/sdb1</code>) or LVM volumes. If you provide a VM with write access to an entire disk or block device (for example, <code class="literal filename">/dev/sdb</code>), the VM will likely partition it or create its own LVM groups on it. This can result in system errors on the host.
						</p><p class="simpara">
							However, if you require using an entire block device for the storage pool, Red Hat recommends protecting any important partitions on the device from GRUB’s <code class="literal">os-prober</code> function. To do so, edit the <code class="literal">/etc/default/grub</code> file and apply one of the following configurations:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									Disable <code class="literal">os-prober</code>.
								</p><pre class="screen">GRUB_DISABLE_OS_PROBER=true</pre></li><li class="listitem"><p class="simpara">
									Prevent <code class="literal">os-prober</code> from discovering a specific partition. For example:
								</p><pre class="screen">GRUB_OS_PROBER_SKIP_LIST="5ef6313a-257c-4d43@/dev/sdb1"</pre></li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Create a storage pool</strong></span>
						</p><p class="simpara">
							Use the <code class="literal command">virsh pool-define-as</code> command to define and create a filesystem-type storage pool. For example, to create a storage pool named <code class="literal">guest_images_fs</code> that uses the <span class="strong strong"><strong>/dev/sdc1</strong></span> partition, and is mounted on the /guest_images directory:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-define-as guest_images_fs fs --source-dev /dev/sdc1 --target /guest_images</strong></span>
Pool guest_images_fs defined</pre><p class="simpara">
							If you already have an XML configuration of the storage pool you want to create, you can also define the pool based on the XML. For details, see <a class="link" href="#filesystem-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools" title="15.4.3. Filesystem-based storage pool parameters">Filesystem-based storage pool parameters</a>.
						</p></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Define the storage pool target path</strong></span>
						</p><p class="simpara">
							Use the <code class="literal command">virsh pool-build</code> command to create a storage pool target path for a pre-formatted file-system storage pool, initialize the storage source device, and define the format of the data.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-build guest_images_fs</strong></span>
  Pool guest_images_fs built

# <span class="strong strong"><strong>ls -la /guest_images</strong></span>
  total 8
  drwx------.  2 root root 4096 May 31 19:38 .
  dr-xr-xr-x. 25 root root 4096 May 31 19:38 ..</pre></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Verify that the pool was created</strong></span>
						</p><p class="simpara">
							Use the <code class="literal command">virsh pool-list</code> command to verify that the pool was created.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>

  Name                 State      Autostart
  -----------------------------------------
  default              active     yes
  guest_images_fs      inactive   no</pre></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Start the storage pool</strong></span>
						</p><p class="simpara">
							Use the <code class="literal command">virsh pool-start</code> command to mount the storage pool.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-start guest_images_fs</strong></span>
  Pool guest_images_fs started</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								The <code class="literal command">virsh pool-start</code> command is only necessary for persistent storage pools. Transient storage pools are automatically started when they are created.
							</p></div></rh-alert></li><li class="listitem"><p class="simpara">
							Optional: Turn on autostart
						</p><p class="simpara">
							By default, a storage pool defined with the <code class="literal command">virsh</code> command is not set to automatically start each time virtualization services start. Use the <code class="literal command">virsh pool-autostart</code> command to configure the storage pool to autostart.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-autostart guest_images_fs</strong></span>
  Pool guest_images_fs marked as autostarted</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Use the <code class="literal command">virsh pool-info</code> command to verify that the storage pool is in the <code class="literal"><span class="emphasis"><em>running</em></span></code> state. Check if the sizes reported are as expected and if autostart is configured correctly.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-info guest_images_fs</strong></span>
  Name:           guest_images_fs
  UUID:           c7466869-e82a-a66c-2187-dc9d6f0877d0
  State:          running
  Persistent:     yes
  Autostart:      yes
  Capacity:       458.39 GB
  Allocation:     197.91 MB
  Available:      458.20 GB</pre></li><li class="listitem"><p class="simpara">
							Verify there is a <code class="literal filename">lost+found</code> directory in the target path on the file system, indicating that the device is mounted.
						</p><pre class="screen"># <span class="strong strong"><strong>mount | grep /guest_images</strong></span>
  /dev/sdc1 on /guest_images type ext4 (rw)

# <span class="strong strong"><strong>ls -la /guest_images</strong></span>
  total 24
  drwxr-xr-x.  3 root root  4096 May 31 19:47 .
  dr-xr-xr-x. 25 root root  4096 May 31 19:38 ..
  drwx------.  2 root root 16384 May 31 14:18 lost+found</pre></li></ol></div></section><section class="section" id="creating-iscsi-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli"><div class="titlepage"><div><div><h4 class="title">15.2.5. Creating iSCSI-based storage pools by using the CLI</h4></div></div></div><p class="_abstract _abstract">
					Internet Small Computer Systems Interface (iSCSI) is an IP-based storage networking standard for linking data storage facilities. If you want to have a storage pool on an iSCSI server, you can use the <code class="literal">virsh</code> utility to create iSCSI-based storage pools.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Ensure your hypervisor supports iSCSI-based storage pools:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-capabilities | grep "'iscsi' supported='yes'"</strong></span></pre><p class="simpara">
							If the command displays any output, iSCSI-based pools are supported.
						</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Create a storage pool</strong></span>
						</p><p class="simpara">
							Use the <code class="literal command">virsh pool-define-as</code> command to define and create an iSCSI-type storage pool. For example, to create a storage pool named <code class="literal">guest_images_iscsi</code> that uses the <code class="literal">iqn.2010-05.com.example.server1:iscsirhel7guest</code> IQN on the <code class="literal">server1.example.com</code>, and is mounted on the <code class="literal">/dev/disk/by-path</code> path:
						</p><pre class="screen"># virsh pool-define-as --name guest_images_iscsi --type iscsi --source-host server1.example.com --source-dev iqn.2010-05.com.example.server1:iscsirhel7guest --target /dev/disk/by-path
Pool guest_images_iscsi defined</pre><p class="simpara">
							If you already have an XML configuration of the storage pool you want to create, you can also define the pool based on the XML. For details, see <a class="link" href="#iscsi-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools" title="15.4.4. iSCSI-based storage pool parameters">iSCSI-based storage pool parameters</a>.
						</p></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Verify that the pool was created</strong></span>
						</p><p class="simpara">
							Use the <code class="literal command">virsh pool-list</code> command to verify that the pool was created.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>

  Name                 State      Autostart
  -----------------------------------------
  default              active     yes
  guest_images_iscsi   inactive   no</pre></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Start the storage pool</strong></span>
						</p><p class="simpara">
							Use the <code class="literal command">virsh pool-start</code> command to mount the storage pool.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-start guest_images_iscsi</strong></span>
  Pool guest_images_iscsi started</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								The <code class="literal command">virsh pool-start</code> command is only necessary for persistent storage pools. Transient storage pools are automatically started when they are created.
							</p></div></rh-alert></li><li class="listitem"><p class="simpara">
							Optional: Turn on autostart.
						</p><p class="simpara">
							By default, a storage pool defined with the <code class="literal command">virsh</code> command is not set to automatically start each time virtualization services start. Use the <code class="literal command">virsh pool-autostart</code> command to configure the storage pool to autostart.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-autostart guest_images_iscsi</strong></span>
  Pool guest_images_iscsi marked as autostarted</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Use the <code class="literal command">virsh pool-info</code> command to verify that the storage pool is in the <code class="literal"><span class="emphasis"><em>running</em></span></code> state. Check if the sizes reported are as expected and if autostart is configured correctly.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-info guest_images_iscsi</strong></span>
  Name:           guest_images_iscsi
  UUID:           c7466869-e82a-a66c-2187-dc9d6f0877d0
  State:          running
  Persistent:     yes
  Autostart:      yes
  Capacity:       458.39 GB
  Allocation:     197.91 MB
  Available:      458.20 GB</pre></li></ul></div></section><section class="section" id="creating-lvm-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli"><div class="titlepage"><div><div><h4 class="title">15.2.6. Creating LVM-based storage pools by using the CLI</h4></div></div></div><p class="_abstract _abstract">
					If you want to have a storage pool that is part of an LVM volume group, you can use the <code class="literal">virsh</code> utility to create LVM-based storage pools.
				</p><div class="formalpara"><p class="title"><strong>Recommendations</strong></p><p>
						Be aware of the following before creating an LVM-based storage pool:
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							LVM-based storage pools do not provide the full flexibility of LVM.
						</li><li class="listitem">
							<code class="literal">libvirt</code> supports thin logical volumes, but does not provide the features of thin storage pools.
						</li><li class="listitem"><p class="simpara">
							LVM-based storage pools are volume groups. You can create volume groups by using the <code class="literal">virsh</code> utility, but this way you can only have one device in the created volume group. To create a volume group with multiple devices, use the LVM utility instead, see <a class="link" href="https://www.redhat.com/sysadmin/create-volume-group">How to create a volume group in Linux with LVM</a>.
						</p><p class="simpara">
							For more detailed information about volume groups, refer to the <span class="emphasis"><em>Red Hat Enterprise Linux Logical Volume Manager Administration Guide</em></span>.
						</p></li><li class="listitem">
							LVM-based storage pools require a full disk partition. If you activate a new partition or device by using <code class="literal">virsh</code> commands, the partition will be formatted and all data will be erased. If you are using a host’s existing volume group, as in these procedures, nothing will be erased.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Ensure your hypervisor supports LVM-based storage pools:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-capabilities | grep "'logical' supported='yes'"</strong></span></pre><p class="simpara">
							If the command displays any output, LVM-based pools are supported.
						</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Create a storage pool</strong></span>
						</p><p class="simpara">
							Use the <code class="literal command">virsh pool-define-as</code> command to define and create an LVM-type storage pool. For example, the following command creates a storage pool named <code class="literal">guest_images_lvm</code> that uses the <code class="literal">lvm_vg</code> volume group and is mounted on the <code class="literal">/dev/lvm_vg</code> directory:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-define-as guest_images_lvm logical --source-name lvm_vg --target /dev/lvm_vg</strong></span>
Pool guest_images_lvm defined</pre><p class="simpara">
							If you already have an XML configuration of the storage pool you want to create, you can also define the pool based on the XML. For details, see <a class="link" href="#lvm-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools" title="15.4.5. LVM-based storage pool parameters">LVM-based storage pool parameters</a>.
						</p></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Verify that the pool was created</strong></span>
						</p><p class="simpara">
							Use the <code class="literal command">virsh pool-list</code> command to verify that the pool was created.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>

  Name                   State      Autostart
  -------------------------------------------
  default                active     yes
  guest_images_lvm       inactive   no</pre></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Start the storage pool</strong></span>
						</p><p class="simpara">
							Use the <code class="literal command">virsh pool-start</code> command to mount the storage pool.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-start guest_images_lvm</strong></span>
  Pool guest_images_lvm started</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								The <code class="literal command">virsh pool-start</code> command is only necessary for persistent storage pools. Transient storage pools are automatically started when they are created.
							</p></div></rh-alert></li><li class="listitem"><p class="simpara">
							Optional: Turn on autostart.
						</p><p class="simpara">
							By default, a storage pool defined with the <code class="literal command">virsh</code> command is not set to automatically start each time virtualization services start. Use the <code class="literal command">virsh pool-autostart</code> command to configure the storage pool to autostart.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-autostart guest_images_lvm</strong></span>
  Pool guest_images_lvm marked as autostarted</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Use the <code class="literal command">virsh pool-info</code> command to verify that the storage pool is in the <code class="literal"><span class="emphasis"><em>running</em></span></code> state. Check if the sizes reported are as expected and if autostart is configured correctly.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-info guest_images_lvm</strong></span>
  Name:           guest_images_lvm
  UUID:           c7466869-e82a-a66c-2187-dc9d6f0877d0
  State:          running
  Persistent:     yes
  Autostart:      yes
  Capacity:       458.39 GB
  Allocation:     197.91 MB
  Available:      458.20 GB</pre></li></ul></div></section><section class="section" id="creating-nfs-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli"><div class="titlepage"><div><div><h4 class="title">15.2.7. Creating NFS-based storage pools by using the CLI</h4></div></div></div><p class="_abstract _abstract">
					If you want to have a storage pool on a Network File System (NFS) server, you can use the <code class="literal">virsh</code> utility to create NFS-based storage pools.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Ensure your hypervisor supports NFS-based storage pools:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-capabilities | grep "&lt;value&gt;nfs&lt;/value&gt;"</strong></span></pre><p class="simpara">
							If the command displays any output, NFS-based pools are supported.
						</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Create a storage pool</strong></span>
						</p><p class="simpara">
							Use the virsh <code class="literal command">pool-define-as</code> command to define and create an NFS-type storage pool. For example, to create a storage pool named <code class="literal">guest_images_netfs</code> that uses a NFS server with IP <code class="literal">111.222.111.222</code> mounted on the server directory <code class="literal">/home/net_mount</code> by using the target directory <code class="literal">/var/lib/libvirt/images/nfspool</code>:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-define-as --name guest_images_netfs --type netfs --source-host='111.222.111.222' --source-path='/home/net_mount' --source-format='nfs' --target='/var/lib/libvirt/images/nfspool'</strong></span></pre><p class="simpara">
							If you already have an XML configuration of the storage pool you want to create, you can also define the pool based on the XML. For details, see <a class="link" href="#nfs-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools" title="15.4.6. NFS-based storage pool parameters">NFS-based storage pool parameters</a>.
						</p></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Verify that the pool was created</strong></span>
						</p><p class="simpara">
							Use the <code class="literal command">virsh pool-list</code> command to verify that the pool was created.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>

  Name                 State      Autostart
  -----------------------------------------
  default              active     yes
  guest_images_netfs   inactive   no</pre></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Start the storage pool</strong></span>
						</p><p class="simpara">
							Use the <code class="literal command">virsh pool-start</code> command to mount the storage pool.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-start guest_images_netfs</strong></span>
  Pool guest_images_netfs started</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								The <code class="literal command">virsh pool-start</code> command is only necessary for persistent storage pools. Transient storage pools are automatically started when they are created.
							</p></div></rh-alert></li><li class="listitem"><p class="simpara">
							Optional: Turn on autostart.
						</p><p class="simpara">
							By default, a storage pool defined with the <code class="literal command">virsh</code> command is not set to automatically start each time virtualization services start. Use the <code class="literal command">virsh pool-autostart</code> command to configure the storage pool to autostart.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-autostart guest_images_netfs</strong></span>
  Pool guest_images_netfs marked as autostarted</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Use the <code class="literal command">virsh pool-info</code> command to verify that the storage pool is in the <code class="literal"><span class="emphasis"><em>running</em></span></code> state. Check if the sizes reported are as expected and if autostart is configured correctly.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-info guest_images_netfs</strong></span>
  Name:           guest_images_netfs
  UUID:           c7466869-e82a-a66c-2187-dc9d6f0877d0
  State:          running
  Persistent:     yes
  Autostart:      yes
  Capacity:       458.39 GB
  Allocation:     197.91 MB
  Available:      458.20 GB</pre></li></ul></div></section><section class="section" id="creating-scsi-based-storage-pools-with-vhba-devices-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli"><div class="titlepage"><div><div><h4 class="title">15.2.8. Creating SCSI-based storage pools with vHBA devices by using the CLI</h4></div></div></div><p class="_abstract _abstract">
					If you want to have a storage pool on a Small Computer System Interface (SCSI) device, your host must be able to connect to the SCSI device by using a virtual host bus adapter (vHBA). You can then use the <code class="literal">virsh</code> utility to create SCSI-based storage pools.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Ensure your hypervisor supports SCSI-based storage pools:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-capabilities | grep "'scsi' supported='yes'"</strong></span></pre><p class="simpara">
							If the command displays any output, SCSI-based pools are supported.
						</p></li><li class="listitem">
							Before creating a SCSI-based storage pools with vHBA devices, create a vHBA. For more information, see <a class="link" href="#creating-vhbas_managing-storage-for-virtual-machines" title="15.10. Creating vHBAs">Creating vHBAs</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Create a storage pool</strong></span>
						</p><p class="simpara">
							Use the <code class="literal command">virsh pool-define-as</code> command to define and create SCSI storage pool by using a vHBA. For example, the following creates a storage pool named <code class="literal">guest_images_vhba</code> that uses a vHBA identified by the <code class="literal">scsi_host3</code> parent adapter, world-wide port number <code class="literal">5001a4ace3ee047d</code>, and world-wide node number <code class="literal">5001a4a93526d0a1</code>. The storage pool is mounted on the <code class="literal">/dev/disk/</code> directory:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-define-as guest_images_vhba scsi --adapter-parent scsi_host3 --adapter-wwnn 5001a4a93526d0a1 --adapter-wwpn 5001a4ace3ee047d --target /dev/disk/</strong></span>
Pool guest_images_vhba defined</pre><p class="simpara">
							If you already have an XML configuration of the storage pool you want to create, you can also define the pool based on the XML. For details, see <a class="link" href="#parameters-for-scsi-based-storage-pools-with-vhba-devices_assembly_parameters-for-creating-storage-pools" title="15.4.7. Parameters for SCSI-based storage pools with vHBA devices">Parameters for SCSI-based storage pools with vHBA devices</a>.
						</p></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Verify that the pool was created</strong></span>
						</p><p class="simpara">
							Use the <code class="literal command">virsh pool-list</code> command to verify that the pool was created.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>

  Name                 State      Autostart
  -----------------------------------------
  default              active     yes
  guest_images_vhba    inactive   no</pre></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Start the storage pool</strong></span>
						</p><p class="simpara">
							Use the <code class="literal command">virsh pool-start</code> command to mount the storage pool.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-start guest_images_vhba</strong></span>
  Pool guest_images_vhba started</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								The <code class="literal command">virsh pool-start</code> command is only necessary for persistent storage pools. Transient storage pools are automatically started when they are created.
							</p></div></rh-alert></li><li class="listitem"><p class="simpara">
							Optional: Turn on autostart.
						</p><p class="simpara">
							By default, a storage pool defined with the <code class="literal command">virsh</code> command is not set to automatically start each time virtualization services start. Use the <code class="literal command">virsh pool-autostart</code> command to configure the storage pool to autostart.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-autostart guest_images_vhba</strong></span>
  Pool guest_images_vhba marked as autostarted</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Use the <code class="literal command">virsh pool-info</code> command to verify that the storage pool is in the <code class="literal"><span class="emphasis"><em>running</em></span></code> state. Check if the sizes reported are as expected and if autostart is configured correctly.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-info guest_images_vhba</strong></span>
  Name:           guest_images_vhba
  UUID:           c7466869-e82a-a66c-2187-dc9d6f0877d0
  State:          running
  Persistent:     yes
  Autostart:      yes
  Capacity:       458.39 GB
  Allocation:     197.91 MB
  Available:      458.20 GB</pre></li></ul></div></section><section class="section" id="deleting-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli"><div class="titlepage"><div><div><h4 class="title">15.2.9. Deleting storage pools by using the CLI</h4></div></div></div><p>
					To remove a storage pool from your host system, you must stop the pool and remove its XML definition.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							List the defined storage pools by using the <code class="literal">virsh pool-list</code> command.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>
Name                 State      Autostart
-------------------------------------------
default              active     yes
Downloads            active     yes
RHEL-Storage-Pool   active     yes</pre></li><li class="listitem"><p class="simpara">
							Stop the storage pool you want to delete by using the <code class="literal">virsh pool-destroy</code> command.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-destroy Downloads</strong></span>
Pool Downloads destroyed</pre></li><li class="listitem"><p class="simpara">
							Optional: For some types of storage pools, you can remove the directory where the storage pool resides by using the <code class="literal">virsh pool-delete</code> command. Note that to do so, the directory must be empty.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-delete Downloads</strong></span>
Pool Downloads deleted</pre></li><li class="listitem"><p class="simpara">
							Delete the definition of the storage pool by using the <code class="literal">virsh pool-undefine</code> command.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-undefine Downloads</strong></span>
Pool Downloads has been undefined</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Confirm that the storage pool was deleted.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-list --all</strong></span>
Name                 State      Autostart
-------------------------------------------
default              active     yes
rhel-Storage-Pool   active     yes</pre></li></ul></div></section></section><section class="section" id="assembly_managing-virtual-machine-storage-pools-using-the-web-console_managing-storage-for-virtual-machines"><div class="titlepage"><div><div><h3 class="title">15.3. Managing virtual machine storage pools by using the web console</h3></div></div></div><p>
				By using the RHEL web console, you can manage the storage pools to assign storage to your virtual machines (VMs).
			</p><p>
				You can use the web console to:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#viewing-storage-pool-information-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" title="15.3.1. Viewing storage pool information by using the web console">View storage pool information</a>.
					</li><li class="listitem"><p class="simpara">
						Create storage pools:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<a class="link" href="#creating-directory-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" title="15.3.2. Creating directory-based storage pools by using the web console">Create directory-based storage pools</a>.
							</li><li class="listitem">
								<a class="link" href="#proc_creating-nfs-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" title="15.3.3. Creating NFS-based storage pools by using the web console">Create NFS-based storage pools</a>.
							</li><li class="listitem">
								<a class="link" href="#proc_creating-iscsi-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" title="15.3.4. Creating iSCSI-based storage pools by using the web console">Create iSCSI-based storage pools</a>.
							</li><li class="listitem">
								<a class="link" href="#proc_creating-lvm-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" title="15.3.6. Creating LVM-based storage pools by using the web console">Create LVM-based storage pools</a>.
							</li></ul></div></li><li class="listitem">
						<a class="link" href="#removing-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" title="15.3.7. Removing storage pools by using the web console">Remove storage pools</a>.
					</li><li class="listitem">
						<a class="link" href="#deactivating-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" title="15.3.8. Deactivating storage pools by using the web console">Deactivate storage pools</a>.
					</li></ul></div><section class="section" id="viewing-storage-pool-information-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console"><div class="titlepage"><div><div><h4 class="title">15.3.1. Viewing storage pool information by using the web console</h4></div></div></div><p class="_abstract _abstract">
					By using the web console, you can view detailed information about storage pools available on your system. Storage pools can be used to create disk images for your virtual machines.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Storage Pools</span> at the top of the <span class="guimenu">Virtual Machines</span> interface.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Storage pools</strong></span> window appears, showing a list of configured storage pools.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/81a16ce22f8b1319335bf47350b7fb5b/web-console-storage-pools-window.png" alt="Image displaying the storage pool tab of the web console with information about existing storage pools."></div></div><p class="simpara">
							The information includes the following:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Name</strong></span> - The name of the storage pool.
								</li><li class="listitem">
									<span class="strong strong"><strong>Size</strong></span> - The current allocation and the total capacity of the storage pool.
								</li><li class="listitem">
									<span class="strong strong"><strong>Connection</strong></span> - The connection used to access the storage pool.
								</li><li class="listitem">
									<span class="strong strong"><strong>State</strong></span> - The state of the storage pool.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Click the arrow next to the storage pool whose information you want to see.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with detailed information about the selected storage pool.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/fd11c96612cbc09c36ff7715bb87bfa5/virt-cockpit-storage-pool-overview.png" alt="Image displaying the detailed information about the selected storage pool."></div></div><p class="simpara">
							The information includes:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Target path</strong></span> - The location of the storage pool.
								</li><li class="listitem">
									<span class="strong strong"><strong>Persistent</strong></span> - Indicates whether or not the storage pool has a persistent configuration.
								</li><li class="listitem">
									<span class="strong strong"><strong>Autostart</strong></span> - Indicates whether or not the storage pool starts automatically when the system boots up.
								</li><li class="listitem">
									<span class="strong strong"><strong>Type</strong></span> - The type of the storage pool.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							To view a list of storage volumes associated with the storage pool, click <span class="guibutton">Storage Volumes</span>.
						</p><p class="simpara">
							The Storage Volumes pane appears, showing a list of configured storage volumes.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/9a9f9fd71a75aa9359b57a30c1b78444/web-console-storage-pool-storage-volumes.png" alt="Image displaying the list of storage volumes associated with the selected storage pool."></div></div><p class="simpara">
							The information includes:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Name</strong></span> - The name of the storage volume.
								</li><li class="listitem">
									<span class="strong strong"><strong>Used by</strong></span> - The VM that is currently using the storage volume.
								</li><li class="listitem">
									<span class="strong strong"><strong>Size</strong></span> - The size of the volume.
								</li></ul></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines" title="9.2. Viewing virtual machine information by using the web console">Viewing virtual machine information by using the web console</a>
						</li></ul></div></section><section class="section" id="creating-directory-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console"><div class="titlepage"><div><div><h4 class="title">15.3.2. Creating directory-based storage pools by using the web console</h4></div></div></div><p>
					A directory-based storage pool is based on a directory in an existing mounted file system. This is useful, for example, when you want to use the remaining space on the file system for other purposes.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							In the RHEL web console, click <span class="guibutton">Storage pools</span> in the <span class="strong strong"><strong>Virtual Machines</strong></span> tab.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Storage pools</strong></span> window appears, showing a list of configured storage pools, if any.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/81a16ce22f8b1319335bf47350b7fb5b/web-console-storage-pools-window.png" alt="Image displaying all the storage pools currently configured on the host"></div></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Create storage pool</span>.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Create storage pool</strong></span> dialog appears.
						</p></li><li class="listitem">
							Enter a name for the storage pool.
						</li><li class="listitem"><p class="simpara">
							In the <span class="strong strong"><strong>Type</strong></span> drop down menu, select <span class="strong strong"><strong>Filesystem directory</strong></span>.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/44b6aa955f1810a3a325a6d7a3a5361d/virt-cockpit-create-dir-storage-pool.png" width="540" alt="Image displaying the Create storage pool dialog box."></div></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								If you do not see the <span class="strong strong"><strong>Filesystem directory</strong></span> option in the drop down menu, then your hypervisor does not support directory-based storage pools.
							</p></div></rh-alert></li><li class="listitem"><p class="simpara">
							Enter the following information:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Target path</strong></span> - The location of the storage pool.
								</li><li class="listitem">
									<span class="strong strong"><strong>Startup</strong></span> - Whether or not the storage pool starts when the host boots.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Create</span>.
						</p><p class="simpara">
							The storage pool is created, the <span class="strong strong"><strong>Create Storage Pool</strong></span> dialog closes, and the new storage pool appears in the list of storage pools.
						</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/managing-storage-for-virtual-machines_configuring-and-managing-virtualization#understanding-storage-pools_understanding-virtual-machine-storage">Understanding storage pools</a>
						</li><li class="listitem">
							<a class="link" href="#viewing-storage-pool-information-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" title="15.3.1. Viewing storage pool information by using the web console">Viewing storage pool information by using the web console</a>
						</li></ul></div></section><section class="section" id="proc_creating-nfs-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console"><div class="titlepage"><div><div><h4 class="title">15.3.3. Creating NFS-based storage pools by using the web console</h4></div></div></div><p>
					An NFS-based storage pool is based on a file system that is hosted on a server.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							In the RHEL web console, click <span class="guibutton">Storage pools</span> in the <span class="strong strong"><strong>Virtual Machines</strong></span> tab.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Storage pools</strong></span> window appears, showing a list of configured storage pools, if any.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/81a16ce22f8b1319335bf47350b7fb5b/web-console-storage-pools-window.png" alt="Image displaying all the storage pools currently configured on the host"></div></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Create storage pool</span>.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Create storage pool</strong></span> dialog appears.
						</p></li><li class="listitem">
							Enter a name for the storage pool.
						</li><li class="listitem"><p class="simpara">
							In the <span class="strong strong"><strong>Type</strong></span> drop down menu, select <span class="strong strong"><strong>Network file system</strong></span>.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/d857cf84ec3d53e05114a693ad59ad12/virt-cockpit-create-nfs-storage-pool.png" width="540" alt="Image displaying the Create storage pool dialog box."></div></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								If you do not see the <span class="strong strong"><strong>Network file system</strong></span> option in the drop down menu, then your hypervisor does not support nfs-based storage pools.
							</p></div></rh-alert></li><li class="listitem"><p class="simpara">
							Enter the rest of the information:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Target path</strong></span> - The path specifying the target. This will be the path used for the storage pool.
								</li><li class="listitem">
									<span class="strong strong"><strong>Host</strong></span> - The hostname of the network server where the mount point is located. This can be a hostname or an IP address.
								</li><li class="listitem">
									<span class="strong strong"><strong>Source path</strong></span> - The directory used on the network server.
								</li><li class="listitem">
									<span class="strong strong"><strong>Startup</strong></span> - Whether or not the storage pool starts when the host boots.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Create</span>.
						</p><p class="simpara">
							The storage pool is created. The <span class="strong strong"><strong>Create storage pool</strong></span> dialog closes, and the new storage pool appears in the list of storage pools.
						</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/managing-storage-for-virtual-machines_configuring-and-managing-virtualization#understanding-storage-pools_understanding-virtual-machine-storage">Understanding storage pools</a>
						</li><li class="listitem">
							<a class="link" href="#viewing-storage-pool-information-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" title="15.3.1. Viewing storage pool information by using the web console">Viewing storage pool information by using the web console</a>
						</li></ul></div></section><section class="section" id="proc_creating-iscsi-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console"><div class="titlepage"><div><div><h4 class="title">15.3.4. Creating iSCSI-based storage pools by using the web console</h4></div></div></div><p>
					An iSCSI-based storage pool is based on the Internet Small Computer Systems Interface (iSCSI), an IP-based storage networking standard for linking data storage facilities.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							In the RHEL web console, click <span class="guibutton">Storage pools</span> in the <span class="strong strong"><strong>Virtual Machines</strong></span> tab.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Storage pools</strong></span> window appears, showing a list of configured storage pools, if any.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/81a16ce22f8b1319335bf47350b7fb5b/web-console-storage-pools-window.png" alt="Image displaying all the storage pools currently configured on the host"></div></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Create storage pool</span>.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Create storage pool</strong></span> dialog appears.
						</p></li><li class="listitem">
							Enter a name for the storage pool.
						</li><li class="listitem"><p class="simpara">
							In the <span class="strong strong"><strong>Type</strong></span> drop down menu, select <span class="strong strong"><strong>iSCSI target</strong></span>.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/44a9e3c77933238985c631021973ee53/virt-cockpit-create-iscsi-storage-pool.png" width="540" alt="Image displaying the Create storage pool dialog box."></div></div></li><li class="listitem"><p class="simpara">
							Enter the rest of the information:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Target Path</strong></span> - The path specifying the target. This will be the path used for the storage pool.
								</li><li class="listitem">
									<span class="strong strong"><strong>Host</strong></span> - The hostname or IP address of the ISCSI server.
								</li><li class="listitem">
									<span class="strong strong"><strong>Source path</strong></span> - The unique iSCSI Qualified Name (IQN) of the iSCSI target.
								</li><li class="listitem">
									<span class="strong strong"><strong>Startup</strong></span> - Whether or not the storage pool starts when the host boots.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Create</span>.
						</p><p class="simpara">
							The storage pool is created. The <span class="strong strong"><strong>Create storage pool</strong></span> dialog closes, and the new storage pool appears in the list of storage pools.
						</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/managing-storage-for-virtual-machines_configuring-and-managing-virtualization#understanding-storage-pools_understanding-virtual-machine-storage">Understanding storage pools</a>
						</li><li class="listitem">
							<a class="link" href="#viewing-storage-pool-information-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" title="15.3.1. Viewing storage pool information by using the web console">Viewing storage pool information by using the web console</a>
						</li></ul></div></section><section class="section" id="proc_creating-disk-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console"><div class="titlepage"><div><div><h4 class="title">15.3.5. Creating disk-based storage pools by using the web console</h4></div></div></div><p>
					A disk-based storage pool uses entire disk partitions.
				</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Depending on the version of libvirt being used, dedicating a disk to a storage pool may reformat and erase all data currently stored on the disk device. It is strongly recommended that you back up the data on the storage device before creating a storage pool.
							</li><li class="listitem"><p class="simpara">
								When whole disks or block devices are passed to the VM, the VM will likely partition it or create its own LVM groups on it. This can cause the host machine to detect these partitions or LVM groups and cause errors.
							</p><p class="simpara">
								These errors can also occur when you manually create partitions or LVM groups and pass them to the VM.
							</p><p class="simpara">
								To avoid theses errors, use file-based storage pools instead.
							</p></li></ul></div></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							In the RHEL web console, click <span class="guibutton">Storage pools</span> in the <span class="strong strong"><strong>Virtual Machines</strong></span> tab.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Storage pools</strong></span> window appears, showing a list of configured storage pools, if any.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/81a16ce22f8b1319335bf47350b7fb5b/web-console-storage-pools-window.png" alt="Image displaying all the storage pools currently configured on the host"></div></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Create storage pool</span>.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Create storage pool</strong></span> dialog appears.
						</p></li><li class="listitem">
							Enter a name for the storage pool.
						</li><li class="listitem"><p class="simpara">
							In the <span class="strong strong"><strong>Type</strong></span> drop down menu, select <span class="strong strong"><strong>Physical disk device</strong></span>.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/6027f8d3fa0d1e746ecdee8b7ef30c41/virt-cockpit-create-disk-storage-pool.png" width="540" alt="Image displaying the Create storage pool dialog box."></div></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								If you do not see the <span class="strong strong"><strong>Physical disk device</strong></span> option in the drop down menu, then your hypervisor does not support disk-based storage pools.
							</p></div></rh-alert></li><li class="listitem"><p class="simpara">
							Enter the rest of the information:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Target Path</strong></span> - The path specifying the target device. This will be the path used for the storage pool.
								</li><li class="listitem">
									<span class="strong strong"><strong>Source path</strong></span> - The path specifying the storage device. For example, <code class="literal">/dev/sdb</code>.
								</li><li class="listitem">
									<span class="strong strong"><strong>Format</strong></span> - The type of the partition table.
								</li><li class="listitem">
									<span class="strong strong"><strong>Startup</strong></span> - Whether or not the storage pool starts when the host boots.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Create</span>.
						</p><p class="simpara">
							The storage pool is created. The <span class="strong strong"><strong>Create storage pool</strong></span> dialog closes, and the new storage pool appears in the list of storage pools.
						</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/managing-storage-for-virtual-machines_configuring-and-managing-virtualization#understanding-storage-pools_understanding-virtual-machine-storage">Understanding storage pools</a>
						</li><li class="listitem">
							<a class="link" href="#viewing-storage-pool-information-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" title="15.3.1. Viewing storage pool information by using the web console">Viewing storage pool information by using the web console</a>
						</li></ul></div></section><section class="section" id="proc_creating-lvm-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console"><div class="titlepage"><div><div><h4 class="title">15.3.6. Creating LVM-based storage pools by using the web console</h4></div></div></div><p>
					An LVM-based storage pool is based on volume groups, which you can manage by using the Logical Volume Manager (LVM). A volume group is a combination of multiple physical volumes that creates a single storage structure.
				</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								LVM-based storage pools do not provide the full flexibility of LVM.
							</li><li class="listitem">
								<code class="literal">libvirt</code> supports thin logical volumes, but does not provide the features of thin storage pools.
							</li><li class="listitem">
								LVM-based storage pools require a full disk partition. If you activate a new partition or device by using <code class="literal">virsh</code> commands, the partition will be formatted and all data will be erased. If you are using a host’s existing volume group, as in these procedures, nothing will be erased.
							</li><li class="listitem"><p class="simpara">
								To create a volume group with multiple devices, use the LVM utility instead, see <a class="link" href="https://www.redhat.com/sysadmin/create-volume-group">How to create a volume group in Linux with LVM</a>.
							</p><p class="simpara">
								For more detailed information about volume groups, refer to the <span class="emphasis"><em>Red Hat Enterprise Linux Logical Volume Manager Administration Guide</em></span>.
							</p></li></ul></div></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							In the RHEL web console, click <span class="guibutton">Storage pools</span> in the <span class="strong strong"><strong>Virtual Machines</strong></span> tab.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Storage pools</strong></span> window appears, showing a list of configured storage pools, if any.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/81a16ce22f8b1319335bf47350b7fb5b/web-console-storage-pools-window.png" alt="Image displaying all the storage pools currently configured on the host"></div></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Create storage pool</span>.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Create storage pool</strong></span> dialog appears.
						</p></li><li class="listitem">
							Enter a name for the storage pool.
						</li><li class="listitem"><p class="simpara">
							In the <span class="strong strong"><strong>Type</strong></span> drop down menu, select <span class="strong strong"><strong>LVM volume group</strong></span>.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/ebc6eacf244bbe6f26cf069bb9b13d44/virt-cockpit-create-lvm-storage-pool.png" width="540" alt="Image displaying the Create storage pool dialog box."></div></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								If you do not see the <span class="strong strong"><strong>LVM volume group</strong></span> option in the drop down menu, then your hypervisor does not support LVM-based storage pools.
							</p></div></rh-alert></li><li class="listitem"><p class="simpara">
							Enter the rest of the information:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Source volume group</strong></span> - The name of the LVM volume group that you wish to use.
								</li><li class="listitem">
									<span class="strong strong"><strong>Startup</strong></span> - Whether or not the storage pool starts when the host boots.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Create</span>.
						</p><p class="simpara">
							The storage pool is created. The <span class="strong strong"><strong>Create storage pool</strong></span> dialog closes, and the new storage pool appears in the list of storage pools.
						</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/managing-storage-for-virtual-machines_configuring-and-managing-virtualization#understanding-storage-pools_understanding-virtual-machine-storage">Understanding storage pools</a>
						</li><li class="listitem">
							<a class="link" href="#viewing-storage-pool-information-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" title="15.3.1. Viewing storage pool information by using the web console">Viewing storage pool information by using the web console</a>
						</li></ul></div></section><section class="section" id="removing-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console"><div class="titlepage"><div><div><h4 class="title">15.3.7. Removing storage pools by using the web console</h4></div></div></div><p>
					You can remove storage pools to free up resources on the host or on the network to improve system performance. Deleting storage pools also frees up resources that can then be used by other virtual machines (VMs).
				</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
						Unless explicitly specified, deleting a storage pool does not simultaneously delete the storage volumes inside that pool.
					</p></div></rh-alert><p>
					To temporarily deactivate a storage pool instead of deleting it, see <a class="link" href="#deactivating-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" title="15.3.8. Deactivating storage pools by using the web console">Deactivating storage pools by using the web console</a>
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li><li class="listitem">
							<a class="link" href="#detaching-disks-from-virtual-machines_assembly_managing-virtual-machine-storage-disks-using-the-web-console" title="15.8.4. Detaching disks from virtual machines by using the web console">Detach the disk</a> from the VM.
						</li><li class="listitem">
							If you want to delete the associated storage volumes along with the pool, activate the pool.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Storage Pools</span> on the <span class="strong strong"><strong>Virtual Machines</strong></span> tab.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Storage Pools</strong></span> window appears, showing a list of configured storage pools.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/81a16ce22f8b1319335bf47350b7fb5b/web-console-storage-pools-window.png" alt="Image displaying all the storage pools currently configured on the host."></div></div></li><li class="listitem"><p class="simpara">
							Click the Menu button <span class="guibutton">⋮</span> of the storage pool you want to delete and click <span class="guibutton">Delete</span>.
						</p><p class="simpara">
							A confirmation dialog appears.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/f4441a15c813582815e407fd20a81a79/virt-cockpit-storage-pool-delete-confirm.png" width="540" alt="Image displaying the Delete Storage Pool default dialog box."></div></div></li><li class="listitem">
							Optional: To delete the storage volumes inside the pool, select the corresponding check boxes in the dialog.
						</li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Delete</span>.
						</p><p class="simpara">
							The storage pool is deleted. If you had selected the checkbox in the previous step, the associated storage volumes are deleted as well.
						</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/managing-storage-for-virtual-machines_configuring-and-managing-virtualization#understanding-storage-pools_understanding-virtual-machine-storage">Understanding storage pools</a>
						</li><li class="listitem">
							<a class="link" href="#viewing-storage-pool-information-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" title="15.3.1. Viewing storage pool information by using the web console">Viewing storage pool information by using the web console</a>
						</li></ul></div></section><section class="section" id="deactivating-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console"><div class="titlepage"><div><div><h4 class="title">15.3.8. Deactivating storage pools by using the web console</h4></div></div></div><p>
					If you do not want to permanently delete a storage pool, you can temporarily deactivate it instead.
				</p><p>
					When you deactivate a storage pool, no new volumes can be created in that pool. However, any virtual machines (VMs) that have volumes in that pool will continue to run. This is useful for a number of reasons, for example, you can limit the number of volumes that can be created in a pool to increase system performance.
				</p><p>
					To deactivate a storage pool by using the RHEL web console, see the following procedure.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Storage Pools</span> at the top of the Virtual Machines tab. The Storage Pools window appears, showing a list of configured storage pools.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/81a16ce22f8b1319335bf47350b7fb5b/web-console-storage-pools-window.png" alt="Image displaying all the storage pools currently configured on the host."></div></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Deactivate</span> on the storage pool row.
						</p><p class="simpara">
							The storage pool is deactivated.
						</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/managing-storage-for-virtual-machines_configuring-and-managing-virtualization#understanding-storage-pools_understanding-virtual-machine-storage">Understanding storage pools</a>
						</li><li class="listitem">
							<a class="link" href="#viewing-storage-pool-information-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console" title="15.3.1. Viewing storage pool information by using the web console">Viewing storage pool information by using the web console</a>
						</li></ul></div></section></section><section class="section" id="assembly_parameters-for-creating-storage-pools_managing-storage-for-virtual-machines"><div class="titlepage"><div><div><h3 class="title">15.4. Parameters for creating storage pools</h3></div></div></div><p class="_abstract _abstract">
				Based on the type of storage pool you require, you can modify its XML configuration file and define a specific type of storage pool. This section provides information about the XML parameters required for creating various types of storage pools along with examples.
			</p><section class="section" id="directory-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools"><div class="titlepage"><div><div><h4 class="title">15.4.1. Directory-based storage pool parameters</h4></div></div></div><p class="_abstract _abstract">
					When you want to create or modify a directory-based storage pool by using an XML configuration file, you must include certain required parameters. See the following table for more information about these parameters.
				</p><p>
					You can use the <code class="literal command">virsh pool-define</code> command to create a storage pool based on the XML configuration in a specified file. For example:
				</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-define ~/guest_images.xml</strong></span>
  Pool defined from guest_images_dir</pre><div class="formalpara"><p class="title"><strong>Parameters</strong></p><p>
						The following table provides a list of required parameters for the XML file for a directory-based storage pool.
					</p></div><rh-table id="idm140237774690032"><table class="lt-4-cols lt-7-rows"><caption>Table 15.1. Directory-based storage pool parameters</caption><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140237774685184" scope="col">Description</th><th align="left" valign="top" id="idm140237774684096" scope="col">XML</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140237774685184"> <p>
									The type of storage pool
								</p>
								 </td><td align="left" valign="top" headers="idm140237774684096"> <p>
									<code class="literal">&lt;pool type='dir'&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237774685184"> <p>
									The name of the storage pool
								</p>
								 </td><td align="left" valign="top" headers="idm140237774684096"> <p>
									<code class="literal">&lt;name&gt;<code class="literal"><span class="emphasis"><em>name</em></span></code>&lt;/name&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237774685184"> <p>
									The path specifying the target. This will be the path used for the storage pool.
								</p>
								 </td><td align="left" valign="top" headers="idm140237774684096"> <p>
									<code class="literal">&lt;target&gt;<br>    &lt;path&gt;<code class="literal"><span class="emphasis"><em>target_path</em></span></code>&lt;/path&gt;<br> &lt;/target&gt;</code>
								</p>
								 </td></tr></tbody></table></rh-table><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
						The following is an example of an XML file for a storage pool based on the <code class="literal filename">/guest_images</code> directory:
					</p></div><pre class="programlisting language-xml">&lt;pool type='dir'&gt;
  &lt;name&gt;dirpool&lt;/name&gt;
  &lt;target&gt;
    &lt;path&gt;/guest_images&lt;/path&gt;
  &lt;/target&gt;
&lt;/pool&gt;</pre><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#creating-directory-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" title="15.2.2. Creating directory-based storage pools by using the CLI">Creating directory-based storage pools by using the CLI</a>
						</li></ul></div></section><section class="section" id="disk-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools"><div class="titlepage"><div><div><h4 class="title">15.4.2. Disk-based storage pool parameters</h4></div></div></div><p class="_abstract _abstract">
					When you want to create or modify a disk-based storage pool by using an XML configuration file, you must include certain required parameters. See the following table for more information about these parameters.
				</p><p>
					You can use the <code class="literal command">virsh pool-define</code> command to create a storage pool based on the XML configuration in a specified file. For example:
				</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-define ~/guest_images.xml</strong></span>
  Pool defined from guest_images_disk</pre><div class="formalpara"><p class="title"><strong>Parameters</strong></p><p>
						The following table provides a list of required parameters for the XML file for a disk-based storage pool.
					</p></div><rh-table id="idm140237772507664"><table class="lt-4-cols lt-7-rows"><caption>Table 15.2. Disk-based storage pool parameters</caption><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140237772502928" scope="col">Description</th><th align="left" valign="top" id="idm140237772501840" scope="col">XML</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140237772502928"> <p>
									The type of storage pool
								</p>
								 </td><td align="left" valign="top" headers="idm140237772501840"> <p>
									<code class="literal">&lt;pool type='disk'&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237772502928"> <p>
									The name of the storage pool
								</p>
								 </td><td align="left" valign="top" headers="idm140237772501840"> <p>
									<code class="literal">&lt;name&gt;<code class="literal"><span class="emphasis"><em>name</em></span></code>&lt;/name&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237772502928"> <p>
									The path specifying the storage device. For example, <code class="literal">/dev/sdb</code>.
								</p>
								 </td><td align="left" valign="top" headers="idm140237772501840"> <p>
									<code class="literal">&lt;source&gt;<br>    &lt;path&gt;<code class="literal"><span class="emphasis"><em>source_path</em></span></code>&lt;/path&gt;<br> &lt;/source&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237772502928"> <p>
									The path specifying the target device. This will be the path used for the storage pool.
								</p>
								 </td><td align="left" valign="top" headers="idm140237772501840"> <p>
									<code class="literal">&lt;target&gt;<br>    &lt;path&gt;<code class="literal"><span class="emphasis"><em>target_path</em></span></code>&lt;/path&gt;<br> &lt;/target&gt;</code>
								</p>
								 </td></tr></tbody></table></rh-table><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
						The following is an example of an XML file for a disk-based storage pool:
					</p></div><pre class="programlisting language-xml">&lt;pool type='disk'&gt;
  &lt;name&gt;phy_disk&lt;/name&gt;
  &lt;source&gt;
    &lt;device path='/dev/sdb'/&gt;
    &lt;format type='gpt'/&gt;
  &lt;/source&gt;
  &lt;target&gt;
    &lt;path&gt;/dev&lt;/path&gt;
  &lt;/target&gt;
&lt;/pool&gt;</pre><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#creating-disk-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" title="15.2.3. Creating disk-based storage pools by using the CLI">Creating disk-based storage pools by using the CLI</a>
						</li></ul></div></section><section class="section" id="filesystem-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools"><div class="titlepage"><div><div><h4 class="title">15.4.3. Filesystem-based storage pool parameters</h4></div></div></div><p class="_abstract _abstract">
					When you want to create or modify a filesystem-based storage pool by using an XML configuration file, you must include certain required parameters. See the following table for more information about these parameters.
				</p><p>
					You can use the <code class="literal command">virsh pool-define</code> command to create a storage pool based on the XML configuration in a specified file. For example:
				</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-define ~/guest_images.xml</strong></span>
  Pool defined from guest_images_fs</pre><div class="formalpara"><p class="title"><strong>Parameters</strong></p><p>
						The following table provides a list of required parameters for the XML file for a filesystem-based storage pool.
					</p></div><rh-table id="idm140237781174592"><table class="lt-4-cols lt-7-rows"><caption>Table 15.3. Filesystem-based storage pool parameters</caption><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140237771220144" scope="col">Description</th><th align="left" valign="top" id="idm140237771219056" scope="col">XML</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140237771220144"> <p>
									The type of storage pool
								</p>
								 </td><td align="left" valign="top" headers="idm140237771219056"> <p>
									<code class="literal">&lt;pool type='fs'&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237771220144"> <p>
									The name of the storage pool
								</p>
								 </td><td align="left" valign="top" headers="idm140237771219056"> <p>
									<code class="literal">&lt;name&gt;<code class="literal"><span class="emphasis"><em>name</em></span></code>&lt;/name&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237771220144"> <p>
									The path specifying the partition. For example, <code class="literal filename">/dev/sdc1</code>
								</p>
								 </td><td align="left" valign="top" headers="idm140237771219056"> <p>
									<code class="literal">&lt;source&gt;<br>    &lt;device path=<span class="emphasis"><em>device_path</em></span> /&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237771220144"> <p>
									The file system type, for example <span class="strong strong"><strong>ext4</strong></span>.
								</p>
								 </td><td align="left" valign="top" headers="idm140237771219056"> <p>
									    <code class="literal">&lt;format type=<span class="emphasis"><em>fs_type</em></span> /&gt;<br> &lt;/source&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237771220144"> <p>
									The path specifying the target. This will be the path used for the storage pool.
								</p>
								 </td><td align="left" valign="top" headers="idm140237771219056"> <p>
									<code class="literal">&lt;target&gt;<br>     &lt;path&gt;<code class="literal"><span class="emphasis"><em>path-to-pool</em></span></code>&lt;/path&gt; <br> &lt;/target&gt;</code>
								</p>
								 </td></tr></tbody></table></rh-table><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
						The following is an example of an XML file for a storage pool based on the <code class="literal filename">/dev/sdc1</code> partition:
					</p></div><pre class="programlisting language-xml">&lt;pool type='fs'&gt;
  &lt;name&gt;guest_images_fs&lt;/name&gt;
  &lt;source&gt;
    &lt;device path='/dev/sdc1'/&gt;
    &lt;format type='auto'/&gt;
  &lt;/source&gt;
  &lt;target&gt;
    &lt;path&gt;/guest_images&lt;/path&gt;
  &lt;/target&gt;
&lt;/pool&gt;</pre><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#creating-filesystem-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" title="15.2.4. Creating filesystem-based storage pools by using the CLI">Creating filesystem-based storage pools by using the CLI</a>
						</li></ul></div></section><section class="section" id="iscsi-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools"><div class="titlepage"><div><div><h4 class="title">15.4.4. iSCSI-based storage pool parameters</h4></div></div></div><p class="_abstract _abstract">
					When you want to create or modify an iSCSI-based storage pool by using an XML configuration file, you must include certain required parameters. See the following table for more information about these parameters.
				</p><p>
					You can use the <code class="literal command">virsh pool-define</code> command to create a storage pool based on the XML configuration in a specified file. For example:
				</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-define ~/guest_images.xml</strong></span>
  Pool defined from guest_images_iscsi</pre><div class="formalpara"><p class="title"><strong>Parameters</strong></p><p>
						The following table provides a list of required parameters for the XML file for an iSCSI-based storage pool.
					</p></div><rh-table id="idm140237781147072"><table class="lt-4-cols lt-7-rows"><caption>Table 15.4. iSCSI-based storage pool parameters</caption><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140237804008720" scope="col">Description</th><th align="left" valign="top" id="idm140237804007632" scope="col">XML</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140237804008720"> <p>
									The type of storage pool
								</p>
								 </td><td align="left" valign="top" headers="idm140237804007632"> <p>
									<code class="literal">&lt;pool type='iscsi'&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237804008720"> <p>
									The name of the storage pool
								</p>
								 </td><td align="left" valign="top" headers="idm140237804007632"> <p>
									<code class="literal">&lt;name&gt;<code class="literal"><span class="emphasis"><em>name</em></span></code>&lt;/name&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237804008720"> <p>
									The name of the host
								</p>
								 </td><td align="left" valign="top" headers="idm140237804007632"> <p>
									<code class="literal">&lt;source&gt;<br>   &lt;host name=<span class="emphasis"><em>hostname</em></span> /&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237804008720"> <p>
									The iSCSI IQN
								</p>
								 </td><td align="left" valign="top" headers="idm140237804007632"> <p>
									    <code class="literal">&lt;device path= <span class="emphasis"><em>iSCSI_IQN</em></span> /&gt; <br> &lt;/source&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237804008720"> <p>
									The path specifying the target. This will be the path used for the storage pool.
								</p>
								 </td><td align="left" valign="top" headers="idm140237804007632"> <p>
									<code class="literal">&lt;target&gt; <br>    &lt;path&gt;<code class="literal"><span class="emphasis"><em>/dev/disk/by-path</em></span></code>&lt;/path&gt; <br> &lt;/target&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237804008720"> <p>
									[Optional] The IQN of the iSCSI initiator. This is only needed when the ACL restricts the LUN to a particular initiator.
								</p>
								 </td><td align="left" valign="top" headers="idm140237804007632"> <p>
									<code class="literal">&lt;initiator&gt; <br>    &lt;iqn name='<span class="emphasis"><em>initiator0</em></span>' /&gt; <br> &lt;/initiator&gt;</code>
								</p>
								 </td></tr></tbody></table></rh-table><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
						The IQN of the iSCSI initiator can be determined by using the <code class="literal command">virsh find-storage-pool-sources-as</code> iscsi command.
					</p></div></rh-alert><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
						The following is an example of an XML file for a storage pool based on the specified iSCSI device:
					</p></div><pre class="programlisting language-xml">&lt;pool type='iscsi'&gt;
  &lt;name&gt;iSCSI_pool&lt;/name&gt;
  &lt;source&gt;
    &lt;host name='server1.example.com'/&gt;
    &lt;device path='iqn.2010-05.com.example.server1:iscsirhel7guest'/&gt;
  &lt;/source&gt;
  &lt;target&gt;
    &lt;path&gt;/dev/disk/by-path&lt;/path&gt;
  &lt;/target&gt;
&lt;/pool&gt;</pre><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#creating-iscsi-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" title="15.2.5. Creating iSCSI-based storage pools by using the CLI">Creating iSCSI-based storage pools by using the CLI</a>
						</li></ul></div></section><section class="section" id="lvm-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools"><div class="titlepage"><div><div><h4 class="title">15.4.5. LVM-based storage pool parameters</h4></div></div></div><p class="_abstract _abstract">
					When you want to create or modify an LVM-based storage pool by using an XML configuration file, you must include certain required parameters. See the following table for more information about these parameters.
				</p><p>
					You can use the <code class="literal command">virsh pool-define</code> command to create a storage pool based on the XML configuration in a specified file. For example:
				</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-define ~/guest_images.xml</strong></span>
  Pool defined from guest_images_logical</pre><div class="formalpara"><p class="title"><strong>Parameters</strong></p><p>
						The following table provides a list of required parameters for the XML file for a LVM-based storage pool.
					</p></div><rh-table id="idm140237771252768"><table class="lt-4-cols lt-7-rows"><caption>Table 15.5. LVM-based storage pool parameters</caption><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140237771247920" scope="col">Description</th><th align="left" valign="top" id="idm140237771246832" scope="col">XML</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140237771247920"> <p>
									The type of storage pool
								</p>
								 </td><td align="left" valign="top" headers="idm140237771246832"> <p>
									<code class="literal">&lt;pool type='logical'&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237771247920"> <p>
									The name of the storage pool
								</p>
								 </td><td align="left" valign="top" headers="idm140237771246832"> <p>
									<code class="literal">&lt;name&gt;<code class="literal"><span class="emphasis"><em>name</em></span></code>&lt;/name&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237771247920"> <p>
									The path to the device for the storage pool
								</p>
								 </td><td align="left" valign="top" headers="idm140237771246832"> <p>
									<code class="literal">&lt;source&gt; <br>    &lt;device path='<span class="emphasis"><em>device_path</em></span>' /&gt;`</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237771247920"> <p>
									The name of the volume group
								</p>
								 </td><td align="left" valign="top" headers="idm140237771246832"> <p>
									    <code class="literal">&lt;name&gt;<code class="literal"><span class="emphasis"><em>VG-name</em></span></code>&lt;/name&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237771247920"> <p>
									The virtual group format
								</p>
								 </td><td align="left" valign="top" headers="idm140237771246832"> <p>
									    <code class="literal">&lt;format type='lvm2' /&gt; <br> &lt;/source&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237771247920"> <p>
									The target path
								</p>
								 </td><td align="left" valign="top" headers="idm140237771246832"> <p>
									<code class="literal">&lt;target&gt; <br>    &lt;path=<span class="emphasis"><em>target_path</em></span> /&gt;<br> &lt;/target&gt;</code>
								</p>
								 </td></tr></tbody></table></rh-table><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
						If the logical volume group is made of multiple disk partitions, there may be multiple source devices listed. For example:
					</p><pre class="screen">&lt;source&gt;
  &lt;device path='/dev/sda1'/&gt;
  &lt;device path='/dev/sdb3'/&gt;
  &lt;device path='/dev/sdc2'/&gt;
  ...
&lt;/source&gt;</pre></div></rh-alert><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
						The following is an example of an XML file for a storage pool based on the specified LVM:
					</p></div><pre class="programlisting language-xml">&lt;pool type='logical'&gt;
  &lt;name&gt;guest_images_lvm&lt;/name&gt;
  &lt;source&gt;
    &lt;device path='/dev/sdc'/&gt;
    &lt;name&gt;libvirt_lvm&lt;/name&gt;
    &lt;format type='lvm2'/&gt;
  &lt;/source&gt;
  &lt;target&gt;
    &lt;path&gt;/dev/libvirt_lvm&lt;/path&gt;
  &lt;/target&gt;
&lt;/pool&gt;</pre><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#creating-lvm-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" title="15.2.6. Creating LVM-based storage pools by using the CLI">Creating LVM-based storage pools by using the CLI</a>
						</li></ul></div></section><section class="section" id="nfs-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools"><div class="titlepage"><div><div><h4 class="title">15.4.6. NFS-based storage pool parameters</h4></div></div></div><p class="_abstract _abstract">
					When you want to create or modify an NFS-based storage pool by using an XML configuration file, you must include certain required parameters. See the following table for more information about these parameters.
				</p><p>
					You can use the <code class="literal command">virsh pool-define</code> command to create a storage pool based on the XML configuration in a specified file. For example:
				</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-define ~/guest_images.xml</strong></span>
  Pool defined from guest_images_netfs</pre><div class="formalpara"><p class="title"><strong>Parameters</strong></p><p>
						The following table provides a list of required parameters for the XML file for an NFS-based storage pool.
					</p></div><rh-table id="idm140237773124112"><table class="lt-4-cols lt-7-rows"><caption>Table 15.6. NFS-based storage pool parameters</caption><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140237773119264" scope="col">Description</th><th align="left" valign="top" id="idm140237773118176" scope="col">XML</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140237773119264"> <p>
									The type of storage pool
								</p>
								 </td><td align="left" valign="top" headers="idm140237773118176"> <p>
									<code class="literal">&lt;pool type='netfs'&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237773119264"> <p>
									The name of the storage pool
								</p>
								 </td><td align="left" valign="top" headers="idm140237773118176"> <p>
									<code class="literal">&lt;name&gt;<code class="literal"><span class="emphasis"><em>name</em></span></code>&lt;/name&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237773119264"> <p>
									The hostname of the network server where the mount point is located. This can be a hostname or an IP address.
								</p>
								 </td><td align="left" valign="top" headers="idm140237773118176"> <p>
									<code class="literal">&lt;source&gt; <br>    &lt;host name=<span class="emphasis"><em>hostname</em></span></code> <code class="literal">/&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237773119264"> <p>
									The format of the storage pool
								</p>
								 </td><td align="left" valign="top" headers="idm140237773118176"> <p>
									One of the following:
								</p>
								 <p>
									    <code class="literal">&lt;format type='nfs' /&gt;</code>
								</p>
								 <p>
									    <code class="literal">&lt;format type='cifs' /&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237773119264"> <p>
									The directory used on the network server
								</p>
								 </td><td align="left" valign="top" headers="idm140237773118176"> <p>
									    <code class="literal">&lt;dir path=<span class="emphasis"><em>source_path</em></span></code> <code class="literal">/&gt; <br> &lt;/source&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237773119264"> <p>
									The path specifying the target. This will be the path used for the storage pool.
								</p>
								 </td><td align="left" valign="top" headers="idm140237773118176"> <p>
									<code class="literal">&lt;target&gt; <br>    &lt;path&gt;<code class="literal"><span class="emphasis"><em>target_path</em></span></code>&lt;/path&gt; <br> &lt;/target&gt;</code>
								</p>
								 </td></tr></tbody></table></rh-table><div class="formalpara"><p class="title"><strong>Example</strong></p><p>
						The following is an example of an XML file for a storage pool based on the <code class="literal filename">/home/net_mount</code> directory of the <code class="literal">file_server</code> NFS server:
					</p></div><pre class="programlisting language-xml">&lt;pool type='netfs'&gt;
  &lt;name&gt;nfspool&lt;/name&gt;
  &lt;source&gt;
    &lt;host name='file_server'/&gt;
    &lt;format type='nfs'/&gt;
    &lt;dir path='/home/net_mount'/&gt;
  &lt;/source&gt;
  &lt;target&gt;
    &lt;path&gt;/var/lib/libvirt/images/nfspool&lt;/path&gt;
  &lt;/target&gt;
&lt;/pool&gt;</pre><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#creating-nfs-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" title="15.2.7. Creating NFS-based storage pools by using the CLI">Creating NFS-based storage pools by using the CLI</a>
						</li></ul></div></section><section class="section" id="parameters-for-scsi-based-storage-pools-with-vhba-devices_assembly_parameters-for-creating-storage-pools"><div class="titlepage"><div><div><h4 class="title">15.4.7. Parameters for SCSI-based storage pools with vHBA devices</h4></div></div></div><p class="_abstract _abstract">
					To create or modify an XML configuration file for a SCSi-based storage pool that uses a virtual host adapter bus (vHBA) device, you must include certain required parameters in the XML configuration file. See the following table for more information about the required parameters.
				</p><p>
					You can use the <code class="literal command">virsh pool-define</code> command to create a storage pool based on the XML configuration in a specified file. For example:
				</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-define ~/guest_images.xml</strong></span>
  Pool defined from guest_images_vhba</pre><div class="formalpara"><p class="title"><strong>Parameters</strong></p><p>
						The following table provides a list of required parameters for the XML file for a SCSI-based storage pool with vHBA.
					</p></div><rh-table id="idm140237771891648"><table class="lt-4-cols lt-7-rows"><caption>Table 15.7. Parameters for SCSI-based storage pools with vHBA devices</caption><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140237771886768" scope="col">Description</th><th align="left" valign="top" id="idm140237771885680" scope="col">XML</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140237771886768"> <p>
									The type of storage pool
								</p>
								 </td><td align="left" valign="top" headers="idm140237771885680"> <p>
									<code class="literal">&lt;pool type='scsi'&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237771886768"> <p>
									The name of the storage pool
								</p>
								 </td><td align="left" valign="top" headers="idm140237771885680"> <p>
									<code class="literal">&lt;name&gt;<code class="literal"><span class="emphasis"><em>name</em></span></code>&lt;/name&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237771886768"> <p>
									The identifier of the vHBA. The <code class="literal">parent</code> attribute is optional.
								</p>
								 </td><td align="left" valign="top" headers="idm140237771885680"> <p>
									<code class="literal">&lt;source&gt; <br>    &lt;adapter type='fc_host'<br>    [parent=<span class="emphasis"><em>parent_scsi_device</em></span>]<br>    wwnn='<span class="emphasis"><em>WWNN</em></span>'<br>    wwpn='<span class="emphasis"><em>WWPN</em></span>' /&gt;<br> &lt;/source&gt;</code>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237771886768"> <p>
									The target path. This will be the path used for the storage pool.
								</p>
								 </td><td align="left" valign="top" headers="idm140237771885680"> <p>
									<code class="literal">&lt;target&gt; <br>    &lt;path=<span class="emphasis"><em>target_path</em></span> /&gt;<br> &lt;/target&gt;</code>
								</p>
								 </td></tr></tbody></table></rh-table><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
						When the <code class="literal">&lt;path&gt;</code> field is <code class="literal filename"><span class="strong strong"><strong>/dev/</strong></span></code>, <code class="literal package">libvirt</code> generates a unique short device path for the volume device path. For example, <code class="literal filename"><span class="strong strong"><strong>/dev/sdc</strong></span></code>. Otherwise, the physical host path is used. For example, <code class="literal filename"><span class="strong strong"><strong>/dev/disk/by-path/pci-0000:10:00.0-fc-0x5006016044602198-lun-0</strong></span></code>. The unique short device path allows the same volume to be listed in multiple virtual machines (VMs) by multiple storage pools. If the physical host path is used by multiple VMs, duplicate device type warnings may occur.
					</p></div></rh-alert><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
						The <code class="literal">parent</code> attribute can be used in the <code class="literal">&lt;adapter&gt;</code> field to identify the physical HBA parent from which the NPIV LUNs by varying paths can be used. This field, <code class="literal">scsi_hostN</code>, is combined with the <code class="literal">vports</code> and <code class="literal">max_vports</code> attributes to complete the parent identification. The <code class="literal">parent</code>, <code class="literal">parent_wwnn</code>, <code class="literal">parent_wwpn</code>, or <code class="literal">parent_fabric_wwn</code> attributes provide varying degrees of assurance that after the host reboots the same HBA is used.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								If no <code class="literal">parent</code> is specified, <code class="literal package">libvirt</code> uses the first <code class="literal">scsi_hostN</code> adapter that supports NPIV.
							</li><li class="listitem">
								If only the <code class="literal">parent</code> is specified, problems can arise if additional SCSI host adapters are added to the configuration.
							</li><li class="listitem">
								If <code class="literal">parent_wwnn</code> or <code class="literal">parent_wwpn</code> is specified, after the host reboots the same HBA is used.
							</li><li class="listitem">
								If <code class="literal">parent_fabric_wwn</code> is used, after the host reboots an HBA on the same fabric is selected, regardless of the <code class="literal">scsi_hostN</code> used.
							</li></ul></div></div></rh-alert><div class="formalpara"><p class="title"><strong>Examples</strong></p><p>
						The following are examples of XML files for SCSI-based storage pools with vHBA.
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							A storage pool that is the only storage pool on the HBA:
						</p><pre class="programlisting language-xml">&lt;pool type='scsi'&gt;
  &lt;name&gt;vhbapool_host3&lt;/name&gt;
  &lt;source&gt;
    &lt;adapter type='fc_host' wwnn='5001a4a93526d0a1' wwpn='5001a4ace3ee047d'/&gt;
  &lt;/source&gt;
  &lt;target&gt;
    &lt;path&gt;/dev/disk/by-path&lt;/path&gt;
  &lt;/target&gt;
&lt;/pool&gt;</pre></li><li class="listitem"><p class="simpara">
							A storage pool that is one of several storage pools that use a single vHBA and uses the <code class="literal">parent</code> attribute to identify the SCSI host device:
						</p><pre class="programlisting language-xml">&lt;pool type='scsi'&gt;
  &lt;name&gt;vhbapool_host3&lt;/name&gt;
  &lt;source&gt;
    &lt;adapter type='fc_host' parent='scsi_host3' wwnn='5001a4a93526d0a1' wwpn='5001a4ace3ee047d'/&gt;
  &lt;/source&gt;
  &lt;target&gt;
    &lt;path&gt;/dev/disk/by-path&lt;/path&gt;
  &lt;/target&gt;
&lt;/pool&gt;</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#creating-scsi-based-storage-pools-with-vhba-devices-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" title="15.2.8. Creating SCSI-based storage pools with vHBA devices by using the CLI">Creating SCSI-based storage pools with vHBA devices by using the CLI</a>
						</li></ul></div></section></section><section class="section" id="assembly_managing-virtual-machine-storage-volumes-using-the-cli_managing-storage-for-virtual-machines"><div class="titlepage"><div><div><h3 class="title">15.5. Managing virtual machine storage volumes by using the CLI</h3></div></div></div><p>
				You can use the CLI to manage the following aspects of your storage volumes to assign storage to your virtual machines (VMs):
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#viewing-storage-volume-information-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli" title="15.5.1. Viewing storage volume information by using the CLI">View storage volume information</a>
					</li><li class="listitem">
						<a class="link" href="#creating-and-assigning-storage-volumes-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli" title="15.5.2. Creating and assigning storage volumes by using the CLI">Create storage volumes</a>
					</li><li class="listitem">
						<a class="link" href="#deleting-storage-volumes-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli" title="15.5.3. Deleting storage volumes by using the CLI">Delete storage volumes</a>
					</li></ul></div><section class="section" id="viewing-storage-volume-information-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli"><div class="titlepage"><div><div><h4 class="title">15.5.1. Viewing storage volume information by using the CLI</h4></div></div></div><p class="_abstract _abstract">
					By using the command line, you can view a list of all storage pools available on your host, as well as details about a specified storage pool
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Use the <code class="literal command">virsh vol-list</code> command to list the storage volumes in a specified storage pool.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh vol-list --pool RHEL-Storage-Pool --details</strong></span>
 Name                Path                                               Type   Capacity  Allocation
---------------------------------------------------------------------------------------------
 .bash_history       /home/VirtualMachines/.bash_history       file  18.70 KiB   20.00 KiB
 .bash_logout        /home/VirtualMachines/.bash_logout        file    18.00 B    4.00 KiB
 .bash_profile       /home/VirtualMachines/.bash_profile       file   193.00 B    4.00 KiB
 .bashrc             /home/VirtualMachines/.bashrc             file   1.29 KiB    4.00 KiB
 .git-prompt.sh      /home/VirtualMachines/.git-prompt.sh      file  15.84 KiB   16.00 KiB
 .gitconfig          /home/VirtualMachines/.gitconfig          file   167.00 B    4.00 KiB
 RHEL_Volume.qcow2   /home/VirtualMachines/RHEL8_Volume.qcow2  file  60.00 GiB   13.93 GiB</pre></li><li class="listitem"><p class="simpara">
							Use the <code class="literal command">virsh vol-info</code> command to list the storage volumes in a specified storage pool.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh vol-info --pool RHEL-Storage-Pool --vol RHEL_Volume.qcow2</strong></span>
Name:           RHEL_Volume.qcow2
Type:           file
Capacity:       60.00 GiB
Allocation:     13.93 GiB</pre></li></ol></div></section><section class="section" id="creating-and-assigning-storage-volumes-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli"><div class="titlepage"><div><div><h4 class="title">15.5.2. Creating and assigning storage volumes by using the CLI</h4></div></div></div><p>
					To obtain a disk image and attach it to a virtual machine (VM) as a virtual disk, create a storage volume and assign its XML configuration to a the VM.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							A storage pool with unallocated space is present on the host.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									To verify, list the storage pools on the host:
								</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-list --details</strong></span>

Name               State     Autostart   Persistent   Capacity     Allocation   Available
--------------------------------------------------------------------------------------------
default            running   yes         yes          48.97 GiB    36.34 GiB    12.63 GiB
Downloads          running   yes         yes          175.92 GiB   121.20 GiB   54.72 GiB
VM-disks           running   yes         yes          175.92 GiB   121.20 GiB   54.72 GiB</pre></li><li class="listitem">
									If you do not have an existing storage pool, create one. For more information, see <a class="link" href="#managing-storage-for-virtual-machines_configuring-and-managing-virtualization" title="Chapter 15. Managing storage for virtual machines">Managing storage for virtual machines</a>.
								</li></ul></div></li></ul></div><div class="orderedlist" id="procedure-creating-and-assigning-storage-volumes-using-the-cli"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a storage volume by using the <code class="literal">virsh vol-create-as</code> command. For example, to create a 20 GB qcow2 volume based on the <code class="literal">guest-images-fs</code> storage pool:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh vol-create-as --pool guest-images-fs --name vm-disk1 --capacity 20 --format qcow2</strong></span></pre><p class="simpara">
							<span class="strong strong"><strong>Important</strong></span>: Specific storage pool types do not support the <code class="literal command">virsh vol-create-as</code> command and instead require specific processes to create storage volumes:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>iSCSI-based</strong></span> - Prepare the iSCSI LUNs in advance on the iSCSI server.
								</li><li class="listitem">
									<span class="strong strong"><strong>Multipath-based</strong></span> - Use the <code class="literal command">multipathd</code> command to prepare or manage the multipath.
								</li><li class="listitem">
									<span class="strong strong"><strong>vHBA-based</strong></span> - Prepare the fibre channel card in advance.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Create an XML file, and add the following lines in it. This file will be used to add the storage volume as a disk to a VM.
						</p><pre class="programlisting language-xml">&lt;disk type='volume' device='disk'&gt;
    &lt;driver name='qemu' type='qcow2'/&gt;
    &lt;source pool='guest-images-fs' volume='vm-disk1'/&gt;
    &lt;target dev='hdk' bus='ide'/&gt;
&lt;/disk&gt;</pre><p class="simpara">
							This example specifies a virtual disk that uses the <code class="literal">vm-disk1</code> volume, created in the previous step, and sets the volume to be set up as disk <code class="literal">hdk</code> on an <code class="literal">ide</code> bus. Modify the respective parameters as appropriate for your environment.
						</p><p class="simpara">
							<span class="strong strong"><strong>Important</strong></span>: With specific storage pool types, you must use different XML formats to describe a storage volume disk.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									For <span class="emphasis"><em>multipath-based</em></span> pools:
								</p><pre class="programlisting language-xml">&lt;disk type='block' device='disk'&gt;
&lt;driver name='qemu' type='raw'/&gt;
&lt;source dev='/dev/mapper/mpatha' /&gt;
&lt;target dev='sda' bus='scsi'/&gt;
&lt;/disk&gt;</pre></li><li class="listitem"><p class="simpara">
									For <span class="emphasis"><em>RBD-based storage</em></span> pools:
								</p><pre class="programlisting language-xml">  &lt;disk type='network' device='disk'&gt;
    &lt;driver name='qemu' type='raw'/&gt;
    &lt;source protocol='rbd' name='pool/image'&gt;
      &lt;host name='mon1.example.org' port='6321'/&gt;
    &lt;/source&gt;
    &lt;target dev='vdc' bus='virtio'/&gt;
  &lt;/disk&gt;</pre></li></ul></div></li><li class="listitem"><p class="simpara">
							Use the XML file to assign the storage volume as a disk to a VM. For example, to assign a disk defined in <code class="literal">~/vm-disk1.xml</code> to the <code class="literal">testguest1</code> VM, use the following command:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh attach-device --config <span class="emphasis"><em>testguest1</em></span> <span class="emphasis"><em>~/vm-disk1.xml</em></span></strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							In the guest operating system of the VM, confirm that the disk image has become available as an un-formatted and un-allocated disk.
						</li></ul></div></section><section class="section" id="deleting-storage-volumes-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli"><div class="titlepage"><div><div><h4 class="title">15.5.3. Deleting storage volumes by using the CLI</h4></div></div></div><p>
					To remove a storage volume from your host system, you must stop the pool and remove its XML definition.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Any virtual machine that uses the storage volume you want to delete is shut down.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Use the <code class="literal command">virsh vol-list</code> command to list the storage volumes in a specified storage pool.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh vol-list --pool RHEL-SP</strong></span>
 Name                 Path
---------------------------------------------------------------
 .bash_history        /home/VirtualMachines/.bash_history
 .bash_logout         /home/VirtualMachines/.bash_logout
 .bash_profile        /home/VirtualMachines/.bash_profile
 .bashrc              /home/VirtualMachines/.bashrc
 .git-prompt.sh       /home/VirtualMachines/.git-prompt.sh
 .gitconfig           /home/VirtualMachines/.gitconfig
 vm-disk1             /home/VirtualMachines/vm-disk1</pre></li><li class="listitem"><p class="simpara">
							Optional: Use the <code class="literal command">virsh vol-wipe</code> command to wipe a storage volume. For example, to wipe a storage volume named <code class="literal">vm-disk1</code> associated with the storage pool <code class="literal">RHEL-SP</code>:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh vol-wipe --pool RHEL-SP vm-disk1</strong></span>
Vol vm-disk1 wiped</pre></li><li class="listitem"><p class="simpara">
							Use the <code class="literal command">virsh vol-delete</code> command to delete a storage volume. For example, to delete a storage volume named <code class="literal">vm-disk1</code> associated with the storage pool <code class="literal">RHEL-SP</code>:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh vol-delete --pool RHEL-SP vm-disk1</strong></span>
Vol vm-disk1 deleted</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Use the <code class="literal command">virsh vol-list</code> command again to verify that the storage volume was deleted.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh vol-list --pool RHEL-SP</strong></span>
 Name                 Path
---------------------------------------------------------------
 .bash_history        /home/VirtualMachines/.bash_history
 .bash_logout         /home/VirtualMachines/.bash_logout
 .bash_profile        /home/VirtualMachines/.bash_profile
 .bashrc              /home/VirtualMachines/.bashrc
 .git-prompt.sh       /home/VirtualMachines/.git-prompt.sh
 .gitconfig           /home/VirtualMachines/.gitconfig</pre></li></ul></div></section></section><section class="section" id="managing-virtual-disk-images-by-using-the-cli_managing-storage-for-virtual-machines"><div class="titlepage"><div><div><h3 class="title">15.6. Managing virtual disk images by using the CLI</h3></div></div></div><p class="_abstract _abstract">
				Virtual disk images are a type of <a class="link" href="#storage-volumes_understanding-virtual-machine-storage" title="15.1.2. Introduction to storage volumes">virtual storage volumes</a> and provide storage to virtual machines (VMs) in a similar way as hard drives provide storage for physical machines.
			</p><p>
				When <a class="link" href="#assembly_creating-virtual-machines_configuring-and-managing-virtualization" title="Chapter 3. Creating virtual machines">creating a new VM</a> , <code class="literal">libvirt</code> creates a new disk image automatically, unless you specify otherwise. However, depending on your use case, you might want to create and manage a disk image separately from the VM.
			</p><section class="section" id="creating-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli"><div class="titlepage"><div><div><h4 class="title">15.6.1. Creating a virtual disk image by using qemu-img</h4></div></div></div><p class="_abstract _abstract">
					If you require creating a new virtual disk image separately from a new virtual machine (VM) and <a class="link" href="#creating-and-assigning-storage-volumes-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli" title="15.5.2. Creating and assigning storage volumes by using the CLI">creating a storage volume</a> is not viable for you, you can use the <code class="literal">qemu-img</code> command-line utility.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Create a virtual disk image by using the <code class="literal">qemu-img</code> utility:
						</p><pre class="screen"># <span class="strong strong"><strong>qemu-img create -f <span class="emphasis"><em>&lt;format&gt;</em></span> <span class="emphasis"><em>&lt;image-name&gt;</em></span> <span class="emphasis"><em>&lt;size&gt;</em></span></strong></span></pre><p class="simpara">
							For example, the following command creates a qcow2 disk image named <span class="emphasis"><em>test-image</em></span> with the size of 30 gigabytes:
						</p><pre class="screen"># <span class="strong strong"><strong>qemu-img create -f qcow2 test-image 30G</strong></span>

Formatting 'test-img', fmt=qcow2 cluster_size=65536 extended_l2=off compression_type=zlib size=32212254720 lazy_refcounts=off refcount_bits=16</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Display the information about the image you created and check that it has the required size and does not report any corruption:
						</p><pre class="screen"># <span class="strong strong"><strong>qemu-img info <span class="emphasis"><em>&lt;test-img&gt;</em></span></strong></span>
image: test-img
file format: qcow2
virtual size: 30 GiB (32212254720 bytes)
disk size: 196 KiB
cluster_size: 65536
Format specific information:
    compat: 1.1
    compression type: zlib
    lazy refcounts: false
    refcount bits: 16
    corrupt: false
    extended l2: false</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#creating-and-assigning-storage-volumes-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli" title="15.5.2. Creating and assigning storage volumes by using the CLI">Creating and assigning storage volumes by using the CLI</a>
						</li><li class="listitem">
							<a class="link" href="#creating-and-attaching-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console" title="15.8.2. Adding new disks to virtual machines by using the web console">Adding new disks to virtual machines by using the web console</a>
						</li><li class="listitem">
							<code class="literal">qemu-img</code> man page on your system
						</li></ul></div></section><section class="section" id="checking-the-consistency-of-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli"><div class="titlepage"><div><div><h4 class="title">15.6.2. Checking the consistency of a virtual disk image</h4></div></div></div><p class="_abstract _abstract">
					Before attaching a disk image to a virtual machine (VM), ensure that the disk image does not have problems, such as corruption or high fragmentation. To do so, you can use the <code class="literal">qemu-img check</code> command.
				</p><p>
					If needed, you can also use this command to attempt repairing the disk image.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Any virtual machines (VMs) that use the disk image must be shut down.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Use the <code class="literal">qemu-img check</code> command on the image you want to test. For example:
						</p><pre class="screen"># <span class="strong strong"><strong>qemu-img check <span class="emphasis"><em>&lt;test-name.qcow2&gt;</em></span></strong></span>

No errors were found on the image.
327434/327680 = 99.92% allocated, 0.00% fragmented, 0.00% compressed clusters
Image end offset: 21478375424</pre><p class="simpara">
							If the check finds problems on the disk image, the output of the command looks similar to the following:
						</p><pre class="screen">167 errors were found on the image.
Data may be corrupted, or further writes to the image may corrupt it.

453368 leaked clusters were found on the image.
This means waste of disk space, but no harm to data.

259 internal errors have occurred during the check.
Image end offset: 21478375424</pre></li><li class="listitem"><p class="simpara">
							To attempt repairing the detected issues, use the <code class="literal">qemu-img check</code> command with the <code class="literal">-r all</code> option. Note, however, that this might fix only some of the problems.
						</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
								Repairing the disk image can cause data corruption or other issues. Back up the disk image before attempting the repair.
							</p></div></rh-alert><pre class="screen"># <span class="strong strong"><strong>qemu-img check -r all <span class="emphasis"><em>&lt;test-name.qcow2&gt;</em></span></strong></span>

[...]
122 errors were found on the image.
Data may be corrupted, or further writes to the image may corrupt it.

250 internal errors have occurred during the check.
Image end offset: 27071414272</pre><p class="simpara">
							This output indicates the number of problems found on the disk image after the repair.
						</p></li><li class="listitem">
							If further disk image repairs are required, you can use various <code class="literal">libguestfs</code> tools in the <a class="link" href="https://www.libguestfs.org/guestfish.1.html"><code class="literal">guestfish</code> shell</a>.
						</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">qemu-img</code> and <code class="literal">guestfish</code> man pages on your system
						</li></ul></div></section><section class="section" id="resizing-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli"><div class="titlepage"><div><div><h4 class="title">15.6.3. Resizing a virtual disk image</h4></div></div></div><p class="_abstract _abstract">
					If an existing disk image requires additional space, you can use the <code class="literal">qemu-img resize</code> utility to change the size of the image to fit your use case.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have created a backup of the disk image.
						</li><li class="listitem"><p class="simpara">
							Any virtual machines (VMs) that use the disk image must be shutdown.
						</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
								Resizing the disk image of a running VM can cause data corruption or other issues.
							</p></div></rh-alert></li><li class="listitem">
							The hard disk of the host has sufficient free space for the intended disk image size.
						</li><li class="listitem">
							<span class="strong strong"><strong>Optional:</strong></span> You have ensured that the disk image does not have data corruption or similar problems. For instructions, see <a class="link" href="#checking-the-consistency-of-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli" title="15.6.2. Checking the consistency of a virtual disk image">Checking the consistency of a virtual disk image</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Determine the location of the disk image file for the VM you want to resize. For example:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh domblklist <span class="emphasis"><em>&lt;vm-name&gt;</em></span></strong></span>

 Target   Source
----------------------------------------------------------
 vda      /home/username/disk-images/<span class="emphasis"><em>example-image.qcow2</em></span></pre></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Optional:</strong></span> Back up the current disk image.
						</p><pre class="screen"># <span class="strong strong"><strong>cp <span class="emphasis"><em>&lt;example-image.qcow2&gt;</em></span> <span class="emphasis"><em>&lt;example-image-backup.qcow2&gt;</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
							Use the <code class="literal">qemu-img resize</code> utility to resize the image.
						</p><p class="simpara">
							For example, to increase the <span class="emphasis"><em>&lt;example-image.qcow2&gt;</em></span> size by 10 gigabytes:
						</p><pre class="screen"># <span class="strong strong"><strong>qemu-img resize <span class="emphasis"><em>&lt;example-image.qcow2&gt;</em></span> +10G</strong></span></pre></li><li class="listitem">
							Resize the file system, partitions, or physical volumes inside the disk image to use the additional space. To do so in a RHEL guest operating system, use the instructions in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_storage_devices/getting-started-with-partitions_managing-storage-devices#proc_resizing-a-partition-with-parted_getting-started-with-partitions">Managing storage devices</a> and <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_file_systems/index">Managing file systems</a>.
						</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Display information about the resized image and see if it has the intended size:
						</p><pre class="screen"># <span class="strong strong"><strong>qemu-img info <span class="emphasis"><em>&lt;converted-image.qcow2&gt;</em></span></strong></span>

image: converted-image.qcow2
file format: qcow2
<span class="strong strong"><strong>virtual size: 30 GiB (32212254720 bytes)</strong></span>
disk size: 196 KiB
cluster_size: 65536
Format specific information:
    compat: 1.1
    compression type: zlib
    lazy refcounts: false
    refcount bits: 16
    corrupt: false
    extended l2: false</pre></li><li class="listitem">
							Check the resized disk image for potential errors. For instructions, see <a class="link" href="#checking-the-consistency-of-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli" title="15.6.2. Checking the consistency of a virtual disk image">Checking the consistency of a virtual disk image</a>.
						</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">qemu-img</code> man page on your system
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_storage_devices/getting-started-with-partitions_managing-storage-devices#proc_resizing-a-partition-with-parted_getting-started-with-partitions">Managing storage devices</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_file_systems/index">Managing file systems</a>
						</li></ul></div></section><section class="section" id="converting-between-virtual-disk-image-formats_managing-virtual-disk-images-by-using-the-cli"><div class="titlepage"><div><div><h4 class="title">15.6.4. Converting between virtual disk image formats</h4></div></div></div><p class="_abstract _abstract">
					You can convert the virtual disk image to a different format by using the <code class="literal">qemu-img convert</code> command. For example, converting between virtual disk image formats might be necessary if you want to attach the disk image to a virtual machine (VM) running on a different hypervisor.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Any virtual machines (VMs) that use the disk image must be shut down.
						</li><li class="listitem">
							The source disk image format must be supported for conversion by QEMU. For a detailed list, see <a class="link" href="#supported-disk-image-formats_managing-virtual-disk-images-by-using-the-cli" title="15.6.5. Supported disk image formats">Supported disk image formats</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Use the <code class="literal">qemu-img convert</code> command to convert an existing virtual disk image to a different format. For example, to convert a <span class="emphasis"><em>raw</em></span> disk image to a <span class="emphasis"><em>QCOW2</em></span> disk image:
						</p><pre class="screen"># <span class="strong strong"><strong>qemu-img convert -f raw <span class="emphasis"><em>&lt;original-image.img&gt;</em></span> -O qcow2 <span class="emphasis"><em>&lt;converted-image.qcow2&gt;</em></span></strong></span></pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Display information about the converted image and see if it has the intended format and size.
						</p><pre class="screen"># <span class="strong strong"><strong>qemu-img info <span class="emphasis"><em>&lt;converted-image.qcow2&gt;</em></span></strong></span>

image: converted-image.qcow2
file format: qcow2
virtual size: 30 GiB (32212254720 bytes)
disk size: 196 KiB
cluster_size: 65536
Format specific information:
    compat: 1.1
    compression type: zlib
    lazy refcounts: false
    refcount bits: 16
    corrupt: false
    extended l2: false</pre></li><li class="listitem">
							Check the disk image for potential errors. for instructions, see <a class="link" href="#checking-the-consistency-of-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli" title="15.6.2. Checking the consistency of a virtual disk image">Checking the consistency of a virtual disk image</a>.
						</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#checking-the-consistency-of-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli" title="15.6.2. Checking the consistency of a virtual disk image">Checking the consistency of a virtual disk image</a>
						</li><li class="listitem">
							<a class="link" href="#supported-disk-image-formats_managing-virtual-disk-images-by-using-the-cli" title="15.6.5. Supported disk image formats">Supported disk image formats</a>
						</li><li class="listitem">
							<code class="literal">qemu-img</code> man page on your system
						</li></ul></div></section><section class="section" id="supported-disk-image-formats_managing-virtual-disk-images-by-using-the-cli"><div class="titlepage"><div><div><h4 class="title">15.6.5. Supported disk image formats</h4></div></div></div><p>
					To run a virtual machine (VM) on RHEL, you must use a disk image with a supported format. You can also convert certain unsupported disk images to a supported format.
				</p><div class="formalpara"><p class="title"><strong>Supported disk image formats for VMs</strong></p><p>
						You can use disk images that use the following formats to run VMs in RHEL:
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>qcow2</strong></span> - Provides certain additional features, such as compression.
						</li><li class="listitem">
							<span class="strong strong"><strong>raw</strong></span> - Might provide better performance.
						</li><li class="listitem">
							<span class="strong strong"><strong>luks</strong></span> - Disk images encrypted by using the Linux Unified Key Setup (LUKS) specification.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Supported disk image formats for conversion</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							If required, you can convert your disk images between the <code class="literal">raw</code> and <code class="literal">qcow2</code> formats <a class="link" href="#converting-between-virtual-disk-image-formats_managing-virtual-disk-images-by-using-the-cli" title="15.6.4. Converting between virtual disk image formats">by using the <code class="literal">qemu-img convert</code> command</a>.
						</li><li class="listitem">
							If you require converting a <span class="strong strong"><strong>vmdk</strong></span> disk image to a <code class="literal">raw</code> or <code class="literal">qcow2</code> format, convert the VM that uses the disk to KVM <a class="link" href="https://access.redhat.com/articles/1351473">by using the <code class="literal">virt-v2v</code> utility</a>.
						</li><li class="listitem"><p class="simpara">
							To convert other disk image formats to <code class="literal">raw</code> or <code class="literal">qcow2</code>, you can use <a class="link" href="#converting-between-virtual-disk-image-formats_managing-virtual-disk-images-by-using-the-cli" title="15.6.4. Converting between virtual disk image formats">the <code class="literal">qemu-img convert</code> command</a>. For a list of formats that work with this command, see <a class="link" href="https://qemu.weilnetz.de/doc/9.1/system/images.html#disk-image-file-formats">the QEMU documentation</a>.
						</p><p class="simpara">
							Note that in most cases, converting the disk image format of a non-KVM virtual machine to <code class="literal">qcow2</code> or <code class="literal">raw</code> is not sufficient for the VM to correctly run on RHEL KVM. In addition to converting the disk image, corresponding drivers must be installed and configured in the guest operating system of the VM. For supported hypervisor conversion, use the <code class="literal">virt-v2v</code> utility.
						</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/articles/1351473">Converting virtual machines from other hypervisors to KVM with virt-v2v in RHEL 7, RHEL 8, and RHEL 9</a>
						</li><li class="listitem">
							<a class="link" href="#converting-between-virtual-disk-image-formats_managing-virtual-disk-images-by-using-the-cli" title="15.6.4. Converting between virtual disk image formats">Converting between virtual disk image formats</a>
						</li></ul></div></section></section><section class="section" id="assembly_managing-virtual-machine-storage-volumes-using-the-web-console_managing-storage-for-virtual-machines"><div class="titlepage"><div><div><h3 class="title">15.7. Managing virtual machine storage volumes by using the web console</h3></div></div></div><p>
				By using the RHEL, you can manage the storage volumes used to allocate storage to your virtual machines (VMs).
			</p><p>
				You can use the RHEL web console to:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#creating-storage-volumes-using-the-web-console_assembly_managing-virtual-machine-storage-volumes-using-the-web-console" title="15.7.1. Creating storage volumes by using the web console">Create storage volumes</a>.
					</li><li class="listitem">
						<a class="link" href="#removing-storage-volumes-using-the-web-console_assembly_managing-virtual-machine-storage-volumes-using-the-web-console" title="15.7.2. Removing storage volumes by using the web console">Remove storage volumes</a>.
					</li></ul></div><section class="section" id="creating-storage-volumes-using-the-web-console_assembly_managing-virtual-machine-storage-volumes-using-the-web-console"><div class="titlepage"><div><div><h4 class="title">15.7.1. Creating storage volumes by using the web console</h4></div></div></div><p>
					To create a functioning virtual machine (VM) you require a local storage device assigned to the VM that can store the VM image and VM-related data. You can create a storage volume in a storage pool and assign it to a VM as a storage disk.
				</p><p>
					To create storage volumes by using the web console, see the following procedure.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Storage Pools</span> at the top of the Virtual Machines tab. The Storage Pools window appears, showing a list of configured storage pools.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/81a16ce22f8b1319335bf47350b7fb5b/web-console-storage-pools-window.png" alt="Image displaying all the storage pools currently configured on the host."></div></div></li><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Storage Pools</span> window, click the storage pool from which you want to create a storage volume.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected storage pool.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/fd11c96612cbc09c36ff7715bb87bfa5/virt-cockpit-storage-pool-overview.png" alt="Image displaying the detailed information about the selected storage pool."></div></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Storage Volumes</span> next to the Overview tab in the expanded row.
						</p><p class="simpara">
							The Storage Volume tab appears with basic information about existing storage volumes, if any.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/bc247223cd36c27e01b9382bba2b240a/cockpit_storage_volume_overview.png" alt="Image displaying the list of storage volumes associated with the selected storage pool."></div></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Create Volume</span>.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Create storage volume</strong></span> dialog appears.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/a21bb2cbb89ba46b41b31fab29b11a91/virt-cockpit-create-storage-volume.png" width="540" alt="Image displaying the Create Storage Volume dialog box."></div></div></li><li class="listitem"><p class="simpara">
							Enter the following information in the Create Storage Volume dialog:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Name</strong></span> - The name of the storage volume.
								</li><li class="listitem">
									<span class="strong strong"><strong>Size</strong></span> - The size of the storage volume in MiB or GiB.
								</li><li class="listitem">
									<span class="strong strong"><strong>Format</strong></span> - The format of the storage volume. The supported types are <code class="literal">qcow2</code> and <code class="literal">raw</code>.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Create</span>.
						</p><p class="simpara">
							The storage volume is created, the Create Storage Volume dialog closes, and the new storage volume appears in the list of storage volumes.
						</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/managing-storage-for-virtual-machines_configuring-and-managing-virtualization#storage-volumes_understanding-virtual-machine-storage">Understanding storage volumes</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/managing-storage-for-virtual-machines_configuring-and-managing-virtualization#creating-and-attaching-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console">Adding new disks to virtual machines by using the web console</a>
						</li></ul></div></section><section class="section" id="removing-storage-volumes-using-the-web-console_assembly_managing-virtual-machine-storage-volumes-using-the-web-console"><div class="titlepage"><div><div><h4 class="title">15.7.2. Removing storage volumes by using the web console</h4></div></div></div><p>
					You can remove storage volumes to free up space in the storage pool, or to remove storage items associated with defunct virtual machines (VMs).
				</p><p>
					To remove storage volumes by using the RHEL web console, see the following procedure.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li><li class="listitem">
							Any virtual machine that uses the storage volume you want to delete is shut down.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Storage Pools</span> at the top of the Virtual Machines tab. The Storage Pools window appears, showing a list of configured storage pools.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/81a16ce22f8b1319335bf47350b7fb5b/web-console-storage-pools-window.png" alt="Image displaying all the storage pools currently configured on the host."></div></div></li><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Storage Pools</span> window, click the storage pool from which you want to remove a storage volume.
						</p><p class="simpara">
							The row expands to reveal the Overview pane with basic information about the selected storage pool.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/fd11c96612cbc09c36ff7715bb87bfa5/virt-cockpit-storage-pool-overview.png" alt="Image displaying the detailed information about the selected storage pool."></div></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Storage Volumes</span> next to the Overview tab in the expanded row.
						</p><p class="simpara">
							The Storage Volume tab appears with basic information about existing storage volumes, if any.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/bc247223cd36c27e01b9382bba2b240a/cockpit_storage_volume_overview.png" alt="Image displaying the list of storage volumes associated with the selected storage pool."></div></div></li><li class="listitem"><p class="simpara">
							Select the storage volume you want to remove.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/879f6bfe1aab23b034439a2e8a7e3a08/cockpit_delete_storage_volume.png" alt="Image displaying the option to delete the selected storage volume."></div></div></li><li class="listitem">
							Click <span class="guibutton">Delete 1 Volume</span>
						</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/managing-storage-for-virtual-machines_configuring-and-managing-virtualization#storage-volumes_understanding-virtual-machine-storage">Understanding storage volumes</a>
						</li></ul></div></section></section><section class="section" id="assembly_managing-virtual-machine-storage-disks-using-the-web-console_managing-storage-for-virtual-machines"><div class="titlepage"><div><div><h3 class="title">15.8. Managing virtual machine storage disks by using the web console</h3></div></div></div><p>
				By using RHEL, you can manage the storage disks that are attached to your virtual machines (VMs).
			</p><p>
				You can use the RHEL web console to:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#viewing-vm-disk-information-in-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console" title="15.8.1. Viewing virtual machine disk information in the web console">View VM disk information</a>.
					</li><li class="listitem">
						<a class="link" href="#creating-and-attaching-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console" title="15.8.2. Adding new disks to virtual machines by using the web console">Add new disks to a VM</a>.
					</li><li class="listitem">
						<a class="link" href="#attaching-existing-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console" title="15.8.3. Attaching existing disks to virtual machines by using the web console">Attach disks to a VM</a>.
					</li><li class="listitem">
						<a class="link" href="#detaching-disks-from-virtual-machines_assembly_managing-virtual-machine-storage-disks-using-the-web-console" title="15.8.4. Detaching disks from virtual machines by using the web console">Detach disks from a VM</a>.
					</li></ul></div><section class="section" id="viewing-vm-disk-information-in-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console"><div class="titlepage"><div><div><h4 class="title">15.8.1. Viewing virtual machine disk information in the web console</h4></div></div></div><p>
					<span id="viewing-vm-disk-information-in-the-rhel-8-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console"><!--Empty--></span>
				</p><p class="_abstract _abstract">
					By using the web console, you can view detailed information about disks assigned to a selected virtual machine (VM).
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							Click the VM whose information you want to see.
						</p><p class="simpara">
							A new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.
						</p></li><li class="listitem"><p class="simpara">
							Scroll to <span class="guimenu">Disks</span>.
						</p><p class="simpara">
							The Disks section displays information about the disks assigned to the VM, as well as options to <span class="strong strong"><strong>Add</strong></span> or <span class="strong strong"><strong>Edit</strong></span> disks.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/8e50855fbd710e15578ed4f41f814c8b/virt-cockpit-disk-info.png" alt="Image displaying the disk usage of the selected VM."></div></div></li></ol></div><p>
					The information includes the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Device</strong></span> - The device type of the disk.
						</li><li class="listitem">
							<span class="strong strong"><strong>Used</strong></span> - The amount of disk currently allocated.
						</li><li class="listitem">
							<span class="strong strong"><strong>Capacity</strong></span> - The maximum size of the storage volume.
						</li><li class="listitem">
							<span class="strong strong"><strong>Bus</strong></span> - The type of disk device that is emulated.
						</li><li class="listitem">
							<span class="strong strong"><strong>Access</strong></span> - Whether the disk is <span class="strong strong"><strong>Writeable</strong></span> or <span class="strong strong"><strong>Read-only</strong></span>. For <code class="literal">raw</code> disks, you can also set the access to <span class="strong strong"><strong>Writeable and shared</strong></span>.
						</li><li class="listitem">
							<span class="strong strong"><strong>Source</strong></span> - The disk device or file.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines" title="9.2. Viewing virtual machine information by using the web console">Viewing virtual machine information by using the web console</a>
						</li></ul></div></section><section class="section" id="creating-and-attaching-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console"><div class="titlepage"><div><div><h4 class="title">15.8.2. Adding new disks to virtual machines by using the web console</h4></div></div></div><p>
					<span id="creating-and-attaching-disks-to-virtual-machines-using-the-rhel-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console"><!--Empty--></span>
				</p><p>
					You can add new disks to virtual machines (VMs) by creating a new storage volume and attaching it to a VM by using the RHEL 9 web console.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click the VM for which you want to create and attach a new disk.
						</p><p class="simpara">
							A new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.
						</p></li><li class="listitem"><p class="simpara">
							Scroll to <span class="guimenu">Disks</span>.
						</p><p class="simpara">
							The Disks section displays information about the disks assigned to the VM, as well as options to <span class="strong strong"><strong>Add</strong></span> or <span class="strong strong"><strong>Edit</strong></span> disks.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/8e50855fbd710e15578ed4f41f814c8b/virt-cockpit-disk-info.png" alt="Image displaying the disk usage of the selected VM."></div></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Add Disk</span>.
						</p><p class="simpara">
							The Add Disk dialog appears.
						</p><p class="simpara">
							<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/ae4927e577648165eb71d741cde570c9/virt-cockpit-add-disk.png" width="540" alt="Image displaying the Add Disk dialog box."></span>

						</p></li><li class="listitem">
							Select the <span class="emphasis"><em>Create New</em></span> option.
						</li><li class="listitem"><p class="simpara">
							Configure the new disk.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Pool</strong></span> - Select the storage pool from which the virtual disk will be created.
								</li><li class="listitem">
									<span class="strong strong"><strong>Name</strong></span> - Enter a name for the virtual disk that will be created.
								</li><li class="listitem">
									<span class="strong strong"><strong>Size</strong></span> - Enter the size and select the unit (MiB or GiB) of the virtual disk that will be created.
								</li><li class="listitem">
									<span class="strong strong"><strong>Format</strong></span> - Select the format for the virtual disk that will be created. The supported types are <code class="literal">qcow2</code> and <code class="literal">raw</code>.
								</li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Persistence</strong></span> - If checked, the virtual disk is persistent. If not checked, the virtual disk is transient.
								</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
										Transient disks can only be added to VMs that are running.
									</p></div></rh-alert></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Additional Options</strong></span> - Set additional configurations for the virtual disk.
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											<span class="strong strong"><strong>Cache</strong></span> - Select the cache mechanism.
										</li><li class="listitem">
											<span class="strong strong"><strong>Bus</strong></span> - Select the type of disk device to emulate.
										</li><li class="listitem">
											<span class="strong strong"><strong>Disk Identifier</strong></span> - Set an identifier for the attached disk that you can use for multipath storage setups. The identifier is also useful when using proprietary software licensed to specific disk serial numbers.
										</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Add</span>.
						</p><p class="simpara">
							The virtual disk is created and connected to the VM.
						</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#viewing-vm-disk-information-in-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console" title="15.8.1. Viewing virtual machine disk information in the web console">Viewing virtual machine disk information in the web console</a>
						</li><li class="listitem">
							<a class="link" href="#attaching-existing-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console" title="15.8.3. Attaching existing disks to virtual machines by using the web console">Attaching existing disks to virtual machines by using the web console</a>
						</li><li class="listitem">
							<a class="link" href="#detaching-disks-from-virtual-machines_assembly_managing-virtual-machine-storage-disks-using-the-web-console" title="15.8.4. Detaching disks from virtual machines by using the web console">Detaching disks from virtual machines by using the web console</a>
						</li></ul></div></section><section class="section" id="attaching-existing-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console"><div class="titlepage"><div><div><h4 class="title">15.8.3. Attaching existing disks to virtual machines by using the web console</h4></div></div></div><p>
					<span id="attaching-existing-disks-to-virtual-machines-using-the-rhel-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console"><!--Empty--></span>
				</p><p class="_abstract _abstract">
					By using the web console, you can attach existing storage volumes as disks to a virtual machine (VM).
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click the VM for which you want to create and attach a new disk.
						</p><p class="simpara">
							A new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.
						</p></li><li class="listitem"><p class="simpara">
							Scroll to <span class="guimenu">Disks</span>.
						</p><p class="simpara">
							The Disks section displays information about the disks assigned to the VM, as well as options to <span class="strong strong"><strong>Add</strong></span> or <span class="strong strong"><strong>Edit</strong></span> disks.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/8e50855fbd710e15578ed4f41f814c8b/virt-cockpit-disk-info.png" alt="Image displaying the disk usage of the selected VM."></div></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Add Disk</span>.
						</p><p class="simpara">
							The Add Disk dialog appears.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/ae4927e577648165eb71d741cde570c9/virt-cockpit-add-disk.png" width="540" alt="Image displaying the Add Disk dialog box."></div></div></li><li class="listitem"><p class="simpara">
							Click the <span class="strong strong"><strong>Use Existing</strong></span> radio button.
						</p><p class="simpara">
							The appropriate configuration fields appear in the Add Disk dialog.
						</p></li><li class="listitem"><p class="simpara">
							Configure the disk for the VM.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Pool</strong></span> - Select the storage pool from which the virtual disk will be attached.
								</li><li class="listitem">
									<span class="strong strong"><strong>Volume</strong></span> - Select the storage volume that will be attached.
								</li><li class="listitem">
									<span class="strong strong"><strong>Persistence</strong></span> - Available when the VM is running. Select the <span class="strong strong"><strong>Always attach</strong></span> checkbox to make the virtual disk persistent. Clear the checkbox to make the virtual disk transient.
								</li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Additional Options</strong></span> - Set additional configurations for the virtual disk.
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											<span class="strong strong"><strong>Cache</strong></span> - Select the cache mechanism.
										</li><li class="listitem">
											<span class="strong strong"><strong>Bus</strong></span> - Select the type of disk device to emulate.
										</li><li class="listitem">
											<span class="strong strong"><strong>Disk Identifier</strong></span> - Set an identifier for the attached disk that you can use for multipath storage setups. The identifier is also useful when using proprietary software licensed to specific disk serial numbers.
										</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Add</span>
						</p><p class="simpara">
							The selected virtual disk is attached to the VM.
						</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#viewing-vm-disk-information-in-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console" title="15.8.1. Viewing virtual machine disk information in the web console">Viewing virtual machine disk information in the web console</a>
						</li><li class="listitem">
							<a class="link" href="#creating-and-attaching-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console" title="15.8.2. Adding new disks to virtual machines by using the web console">Adding new disks to virtual machines by using the web console</a>
						</li><li class="listitem">
							<a class="link" href="#detaching-disks-from-virtual-machines_assembly_managing-virtual-machine-storage-disks-using-the-web-console" title="15.8.4. Detaching disks from virtual machines by using the web console">Detaching disks from virtual machines by using the web console</a>
						</li></ul></div></section><section class="section" id="detaching-disks-from-virtual-machines_assembly_managing-virtual-machine-storage-disks-using-the-web-console"><div class="titlepage"><div><div><h4 class="title">15.8.4. Detaching disks from virtual machines by using the web console</h4></div></div></div><p class="_abstract _abstract">
					By using the web console, you can detach disks from virtual machines (VMs).
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click the VM from which you want to detach a disk.
						</p><p class="simpara">
							A new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.
						</p></li><li class="listitem"><p class="simpara">
							Scroll to <span class="guimenu">Disks</span>.
						</p><p class="simpara">
							The Disks section displays information about the disks assigned to the VM, as well as options to <span class="strong strong"><strong>Add</strong></span> or <span class="strong strong"><strong>Edit</strong></span> disks.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/8e50855fbd710e15578ed4f41f814c8b/virt-cockpit-disk-info.png" alt="Image displaying the disk usage of the selected VM."></div></div></li><li class="listitem">
							On the right side of the row for the disk that you want to detach, click the Menu button <span class="guibutton">⋮</span>.
						</li><li class="listitem"><p class="simpara">
							In the drop-down menu that appears, click the <span class="guibutton">Remove</span> button.
						</p><p class="simpara">
							A <code class="literal">Remove disk from VM?</code> confirmation dialog box appears.
						</p></li><li class="listitem"><p class="simpara">
							In the confirmation dialog box, click <span class="guibutton">Remove</span>. Optionally, if you also want to remove the disk image, click <span class="guibutton">Remove and delete file</span>.
						</p><p class="simpara">
							The virtual disk is detached from the VM.
						</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#viewing-vm-disk-information-in-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console" title="15.8.1. Viewing virtual machine disk information in the web console">Viewing virtual machine disk information in the web console</a>
						</li><li class="listitem">
							<a class="link" href="#creating-and-attaching-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console" title="15.8.2. Adding new disks to virtual machines by using the web console">Adding new disks to virtual machines by using the web console</a>
						</li><li class="listitem">
							<a class="link" href="#attaching-existing-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console" title="15.8.3. Attaching existing disks to virtual machines by using the web console">Attaching existing disks to virtual machines by using the web console</a>
						</li></ul></div></section></section><section class="section" id="securing-iscsi-storage-pools-with-libvirt-secrets_managing-storage-for-virtual-machines"><div class="titlepage"><div><div><h3 class="title">15.9. Securing iSCSI storage pools with libvirt secrets</h3></div></div></div><p>
				Username and password parameters can be configured with <code class="literal">virsh</code> to secure an iSCSI storage pool. You can configure this before or after you define the pool, but the pool must be started for the authentication settings to take effect.
			</p><p>
				The following provides instructions for securing iSCSI-based storage pools with <code class="literal command">libvirt</code> secrets.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					This procedure is required if a <code class="literal"><span class="emphasis"><em>user_ID</em></span></code> and <code class="literal"><span class="emphasis"><em>password</em></span></code> were defined when creating the iSCSI target.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Ensure that you have created an iSCSI-based storage pool. For more information, see <a class="link" href="#creating-iscsi-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" title="15.2.5. Creating iSCSI-based storage pools by using the CLI">Creating iSCSI-based storage pools by using the CLI</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a libvirt secret file with a challenge-handshake authentication protocol (CHAP) user name. For example:
					</p><pre class="programlisting language-xml">&lt;secret ephemeral='no' private='yes'&gt;
    &lt;description&gt;Passphrase for the iSCSI example.com server&lt;/description&gt;
    &lt;usage type='iscsi'&gt;
        &lt;target&gt;iscsirhel7secret&lt;/target&gt;
    &lt;/usage&gt;
&lt;/secret&gt;</pre></li><li class="listitem"><p class="simpara">
						Define the libvirt secret with the <code class="literal">virsh secret-define</code> command:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh secret-define <span class="emphasis"><em>secret.xml</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Verify the UUID with the <code class="literal">virsh secret-list</code> command:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh secret-list</strong></span>
UUID                                       Usage
--------------------------------------------------------------
2d7891af-20be-4e5e-af83-190e8a922360      iscsi iscsirhel7secret</pre></li><li class="listitem"><p class="simpara">
						Assign a secret to the UUID in the output of the previous step using the <code class="literal">virsh secret-set-value</code> command. This ensures that the CHAP username and password are in a libvirt-controlled secret list. For example:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh secret-set-value --interactive <span class="emphasis"><em>2d7891af-20be-4e5e-af83-190e8a922360</em></span></strong></span>
Enter new value for secret:
Secret value set</pre></li><li class="listitem"><p class="simpara">
						Add an authentication entry in the storage pool’s XML file using the <code class="literal">virsh edit</code> command, and add an <code class="literal">&lt;auth&gt;</code> element, specifying <code class="literal">authentication type</code>, <code class="literal">username</code>, and <code class="literal">secret usage</code>. For example:
					</p><pre class="programlisting language-xml">&lt;pool type='iscsi'&gt;
  &lt;name&gt;iscsirhel7pool&lt;/name&gt;
    &lt;source&gt;
       &lt;host name='192.0.2.1'/&gt;
       &lt;device path='iqn.2010-05.com.example.server1:iscsirhel7guest'/&gt;
       &lt;auth type='chap' username='_example-user_'&gt;
          &lt;secret usage='iscsirhel7secret'/&gt;
       &lt;/auth&gt;
    &lt;/source&gt;
  &lt;target&gt;
    &lt;path&gt;/dev/disk/by-path&lt;/path&gt;
  &lt;/target&gt;
&lt;/pool&gt;</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							The <code class="literal"><span class="strong strong"><strong>&lt;auth&gt;</strong></span></code> sub-element exists in different locations within the virtual machine’s <code class="literal"><span class="strong strong"><strong>&lt;pool&gt;</strong></span></code> and <code class="literal"><span class="strong strong"><strong>&lt;disk&gt;</strong></span></code> XML elements. For a <code class="literal"><span class="strong strong"><strong>&lt;pool&gt;</strong></span></code>, <code class="literal"><span class="strong strong"><strong>&lt;auth&gt;</strong></span></code> is specified within the <code class="literal"><span class="strong strong"><strong>&lt;source&gt;</strong></span></code> element, as this describes where to find the pool sources, since authentication is a property of some pool sources (iSCSI and RBD). For a <code class="literal"><span class="strong strong"><strong>&lt;disk&gt;</strong></span></code>, which is a sub-element of a domain, the authentication to the iSCSI or RBD disk is a property of the disk. In addition, the <code class="literal"><span class="strong strong"><strong>&lt;auth&gt;</strong></span></code> sub-element for a disk differs from that of a storage pool.
						</p><pre class="programlisting language-xml">&lt;auth username='redhat'&gt;
  &lt;secret type='iscsi' usage='iscsirhel7secret'/&gt;
&lt;/auth&gt;</pre></div></rh-alert></li><li class="listitem"><p class="simpara">
						To activate the changes, activate the storage pool. If the pool has already been started, stop and restart the storage pool:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh pool-destroy <span class="emphasis"><em>iscsirhel7pool</em></span></strong></span>
# <span class="strong strong"><strong>virsh pool-start <span class="emphasis"><em>iscsirhel7pool</em></span></strong></span></pre></li></ol></div></section><section class="section" id="creating-vhbas_managing-storage-for-virtual-machines"><div class="titlepage"><div><div><h3 class="title">15.10. Creating vHBAs</h3></div></div></div><p>
				A virtual host bus adapter (vHBA) device connects the host system to an SCSI device and is required for creating an SCSI-based storage pool.
			</p><p>
				You can create a vHBA device by defining it in an XML configuration file.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Locate the HBAs on your host system, by using the <code class="literal">virsh nodedev-list --cap vports</code> command.
					</p><p class="simpara">
						The following example shows a host that has two HBAs that support vHBA:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-list --cap vports</strong></span>
scsi_host3
scsi_host4</pre></li><li class="listitem"><p class="simpara">
						View the HBA’s details, by using the <code class="literal command">virsh nodedev-dumpxml <span class="emphasis"><em>HBA_device</em></span></code> command.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-dumpxml scsi_host3</strong></span></pre><p class="simpara">
						The output from the command lists the <code class="literal">&lt;name&gt;</code>, <code class="literal">&lt;wwnn&gt;</code>, and <code class="literal">&lt;wwpn&gt;</code> fields, which are used to create a vHBA. <code class="literal">&lt;max_vports&gt;</code> shows the maximum number of supported vHBAs. For example:
					</p><pre class="programlisting language-xml">&lt;device&gt;
  &lt;name&gt;scsi_host3&lt;/name&gt;
  &lt;path&gt;/sys/devices/pci0000:00/0000:00:04.0/0000:10:00.0/host3&lt;/path&gt;
  &lt;parent&gt;pci_0000_10_00_0&lt;/parent&gt;
  &lt;capability type='scsi_host'&gt;
    &lt;host&gt;3&lt;/host&gt;
    &lt;unique_id&gt;0&lt;/unique_id&gt;
    &lt;capability type='fc_host'&gt;
      &lt;wwnn&gt;20000000c9848140&lt;/wwnn&gt;
      &lt;wwpn&gt;10000000c9848140&lt;/wwpn&gt;
      &lt;fabric_wwn&gt;2002000573de9a81&lt;/fabric_wwn&gt;
    &lt;/capability&gt;
    &lt;capability type='vport_ops'&gt;
      &lt;max_vports&gt;127&lt;/max_vports&gt;
      &lt;vports&gt;0&lt;/vports&gt;
    &lt;/capability&gt;
  &lt;/capability&gt;
&lt;/device&gt;</pre><p class="simpara">
						In this example, the <code class="literal">&lt;max_vports&gt;</code> value shows there are a total 127 virtual ports available for use in the HBA configuration. The <code class="literal">&lt;vports&gt;</code> value shows the number of virtual ports currently being used. These values update after creating a vHBA.
					</p></li><li class="listitem"><p class="simpara">
						Create an XML file similar to one of the following for the vHBA host. In these examples, the file is named <code class="literal filename">vhba_host3.xml</code>.
					</p><p class="simpara">
						This example uses <code class="literal"><span class="strong strong"><strong>scsi_host3</strong></span></code> to describe the parent vHBA.
					</p><pre class="programlisting language-xml">&lt;device&gt;
  &lt;parent&gt;scsi_host3&lt;/parent&gt;
  &lt;capability type='scsi_host'&gt;
    &lt;capability type='fc_host'&gt;
    &lt;/capability&gt;
  &lt;/capability&gt;
&lt;/device&gt;</pre><p class="simpara">
						This example uses a WWNN/WWPN pair to describe the parent vHBA.
					</p><pre class="programlisting language-xml">&lt;device&gt;
  &lt;name&gt;vhba&lt;/name&gt;
  &lt;parent wwnn='20000000c9848140' wwpn='10000000c9848140'/&gt;
  &lt;capability type='scsi_host'&gt;
    &lt;capability type='fc_host'&gt;
    &lt;/capability&gt;
  &lt;/capability&gt;
&lt;/device&gt;</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							The WWNN and WWPN values must match those in the HBA details seen in the previous step.
						</p></div></rh-alert><p class="simpara">
						The <code class="literal">&lt;parent&gt;</code> field specifies the HBA device to associate with this vHBA device. The details in the <code class="literal">&lt;device&gt;</code> tag are used in the next step to create a new vHBA device for the host. For more information about the <code class="literal">nodedev</code> XML format, see <a class="link" href="https://libvirt.org/formatnode.html">the libvirt upstream pages</a>.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							The <code class="literal command">virsh</code> command does not provide a way to define the <code class="literal">parent_wwnn</code>, <code class="literal">parent_wwpn</code>, or <code class="literal">parent_fabric_wwn</code> attributes.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Create a VHBA based on the XML file created in the previous step by using the <code class="literal command">virsh nodev-create</code> command.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-create vhba_host3</strong></span>
Node device scsi_host5 created from vhba_host3.xml</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify the new vHBA’s details (scsi_host5) by using the <code class="literal command">virsh nodedev-dumpxml</code> command:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-dumpxml scsi_host5</strong></span>
&lt;device&gt;
  &lt;name&gt;scsi_host5&lt;/name&gt;
  &lt;path&gt;/sys/devices/pci0000:00/0000:00:04.0/0000:10:00.0/host3/vport-3:0-0/host5&lt;/path&gt;
  &lt;parent&gt;scsi_host3&lt;/parent&gt;
  &lt;capability type='scsi_host'&gt;
    &lt;host&gt;5&lt;/host&gt;
    &lt;unique_id&gt;2&lt;/unique_id&gt;
    &lt;capability type='fc_host'&gt;
      &lt;wwnn&gt;5001a4a93526d0a1&lt;/wwnn&gt;
      &lt;wwpn&gt;5001a4ace3ee047d&lt;/wwpn&gt;
      &lt;fabric_wwn&gt;2002000573de9a81&lt;/fabric_wwn&gt;
    &lt;/capability&gt;
  &lt;/capability&gt;
&lt;/device&gt;</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#creating-scsi-based-storage-pools-with-vhba-devices-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli" title="15.2.8. Creating SCSI-based storage pools with vHBA devices by using the CLI">Creating SCSI-based storage pools with vHBA devices by using the CLI</a>
					</li></ul></div></section></section><section class="chapter" id="assembly_managing-gpu-devices-in-virtual-machines_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h2 class="title">Chapter 16. Managing GPU devices in virtual machines</h2></div></div></div><p class="_abstract _abstract">
			To enhance the graphical performance of your virtual machine (VMs) on a RHEL 9 host, you can assign a host GPU to a VM.
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					You can detach the GPU from the host and pass full control of the GPU directly to the VM.
				</li><li class="listitem">
					You can create multiple mediated devices from a physical GPU, and assign these devices as virtual GPUs (vGPUs) to multiple guests. This is currently only supported on selected NVIDIA GPUs, and only one mediated device can be assigned to a single guest.
				</li></ul></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
				GPU assignment is currently only supported on Intel 64 and AMD64 systems.
			</p></div></rh-alert><section class="section" id="proc_assigning-a-gpu-to-a-virtual-machine_assembly_managing-gpu-devices-in-virtual-machines"><div class="titlepage"><div><div><h3 class="title">16.1. Assigning a GPU to a virtual machine</h3></div></div></div><p class="_abstract _abstract">
				To access and control GPUs that are attached to the host system, you must configure the host system to pass direct control of the GPU to the virtual machine (VM).
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					If you are looking for information about assigning a virtual GPU, see <a class="link" href="#assembly_managing-nvidia-vgpu-devices_assembly_managing-gpu-devices-in-virtual-machines" title="16.2. Managing NVIDIA vGPU devices">Managing NVIDIA vGPU devices</a>.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You must enable IOMMU support on the host machine kernel.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								On an Intel host, you must enable VT-d:
							</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
										Regenerate the GRUB configuration with the <code class="literal">intel_iommu=on</code> and <code class="literal">iommu=pt</code> parameters:
									</p><pre class="screen"># <span class="strong strong"><strong>grubby --args="intel_iommu=on iommu_pt" --update-kernel DEFAULT</strong></span></pre></li><li class="listitem">
										Reboot the host.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								On an AMD host, you must enable AMD-Vi.
							</p><p class="simpara">
								Note that on AMD hosts, IOMMU is enabled by default, you can add <code class="literal">iommu=pt</code> to switch it to pass-through mode:
							</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
										Regenerate the GRUB configuration with the <code class="literal">iommu=pt</code> parameter:
									</p><pre class="screen"># <span class="strong strong"><strong>grubby --args="iommu=pt" --update-kernel DEFAULT</strong></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
											The <code class="literal">pt</code> option only enables IOMMU for devices used in pass-through mode and provides better host performance. However, not all hardware supports the option. You can still assign devices even when this option is not enabled.
										</p></div></rh-alert></li><li class="listitem">
										Reboot the host.
									</li></ol></div></li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Prevent the driver from binding to the GPU.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Identify the PCI bus address to which the GPU is attached.
							</p><pre class="screen"># <span class="strong strong"><strong>lspci -Dnn | grep VGA</strong></span>
0000:02:00.0 VGA compatible controller [0300]: NVIDIA Corporation GK106GL [Quadro K4000] [<span class="strong strong"><strong>10de:11fa</strong></span>] (rev a1)</pre></li><li class="listitem"><p class="simpara">
								Prevent the host’s graphics driver from using the GPU. To do so, use the GPU PCI ID with the pci-stub driver.
							</p><p class="simpara">
								For example, the following command prevents the driver from binding to the GPU attached at the <span class="strong strong"><strong>10de:11fa</strong></span> bus:
							</p><pre class="screen"># <span class="strong strong"><strong>grubby --args="pci-stub.ids=10de:11fa" --update-kernel DEFAULT</strong></span></pre></li><li class="listitem">
								Reboot the host.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Optional: If certain GPU functions, such as audio, cannot be passed through to the VM due to support limitations, you can modify the driver bindings of the endpoints within an IOMMU group to pass through only the necessary GPU functions.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Convert the GPU settings to XML and note the PCI address of the endpoints that you want to prevent from attaching to the host drivers.
							</p><p class="simpara">
								To do so, convert the GPU’s PCI bus address to a libvirt-compatible format by adding the <code class="literal">pci_</code> prefix to the address, and converting the delimiters to underscores.
							</p><p class="simpara">
								For example, the following command displays the XML configuration of the GPU attached at the <code class="literal">0000:02:00.0</code> bus address.
							</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-dumpxml pci_0000_02_00_0</strong></span></pre><pre class="programlisting language-xml">&lt;device&gt;
 &lt;name&gt;pci_0000_02_00_0&lt;/name&gt;
 &lt;path&gt;/sys/devices/pci0000:00/0000:00:03.0/0000:02:00.0&lt;/path&gt;
 &lt;parent&gt;pci_0000_00_03_0&lt;/parent&gt;
 &lt;driver&gt;
  &lt;name&gt;pci-stub&lt;/name&gt;
 &lt;/driver&gt;
 &lt;capability type='pci'&gt;
  &lt;domain&gt;0&lt;/domain&gt;
  &lt;bus&gt;2&lt;/bus&gt;
  &lt;slot&gt;0&lt;/slot&gt;
  &lt;function&gt;0&lt;/function&gt;
  &lt;product id='0x11fa'&gt;GK106GL [Quadro K4000]&lt;/product&gt;
  &lt;vendor id='0x10de'&gt;NVIDIA Corporation&lt;/vendor&gt;
  &lt;iommuGroup number='13'&gt;
   &lt;address domain='0x0000' bus='0x02' slot='0x00' function='0x0'/&gt;
   &lt;address domain='0x0000' bus='0x02' slot='0x00' function='0x1'/&gt;
  &lt;/iommuGroup&gt;
  &lt;pci-express&gt;
   &lt;link validity='cap' port='0' speed='8' width='16'/&gt;
   &lt;link validity='sta' speed='2.5' width='16'/&gt;
  &lt;/pci-express&gt;
 &lt;/capability&gt;
&lt;/device&gt;</pre></li><li class="listitem"><p class="simpara">
								Prevent the endpoints from attaching to the host driver.
							</p><p class="simpara">
								In this example, to assign the GPU to a VM, prevent the endpoints that correspond to the audio function, <code class="literal">&lt;address domain='0x0000' bus='0x02' slot='0x00' function='0x1'/&gt;</code>, from attaching to the host audio driver, and instead attach the endpoints to VFIO-PCI.
							</p><pre class="screen"># <span class="strong strong"><strong>driverctl set-override 0000:02:00.1 vfio-pci</strong></span></pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Attach the GPU to the VM
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create an XML configuration file for the GPU by using the PCI bus address.
							</p><p class="simpara">
								For example, you can create the following XML file, GPU-Assign.xml, by using parameters from the GPU’s bus address.
							</p><pre class="programlisting language-xml">&lt;hostdev mode='subsystem' type='pci' managed='yes'&gt;
 &lt;driver name='vfio'/&gt;
 &lt;source&gt;
  &lt;address domain='0x0000' bus='0x02' slot='0x00' function='0x0'/&gt;
 &lt;/source&gt;
&lt;/hostdev&gt;</pre></li><li class="listitem">
								Save the file on the host system.
							</li><li class="listitem"><p class="simpara">
								Merge the file with the VM’s XML configuration.
							</p><p class="simpara">
								For example, the following command merges the GPU XML file, GPU-Assign.xml, with the XML configuration file of the <code class="literal">System1</code> VM.
							</p><pre class="screen"># <span class="strong strong"><strong>virsh attach-device System1 --file /home/GPU-Assign.xml --persistent</strong></span>
Device attached successfully.</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
									The GPU is attached as a secondary graphics device to the VM. Assigning a GPU as the primary graphics device is not supported, and Red Hat does not recommend removing the primary emulated graphics device in the VM’s XML configuration.
								</p></div></rh-alert></li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The device appears under the <code class="literal">&lt;devices&gt;</code> section in VM’s XML configuration. For more information, see <a class="link" href="#sample-virtual-machine-xml-configuration_viewing-information-about-virtual-machines" title="9.3. Sample virtual machine XML configuration">Sample virtual machine XML configuration</a>.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Known Issues</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The number of GPUs that can be attached to a VM is limited by the maximum number of assigned PCI devices, which in RHEL 9 is currently 64. However, attaching multiple GPUs to a VM is likely to cause problems with memory-mapped I/O (MMIO) on the guest, which may result in the GPUs not being available to the VM.
					</p><p class="simpara">
						To work around these problems, set a larger 64-bit MMIO space and configure the vCPU physical address bits to make the extended 64-bit MMIO space addressable.
					</p></li><li class="listitem">
						Attaching an NVIDIA GPU device to a VM that uses a RHEL 9 guest operating system currently disables the Wayland session on that VM, and loads an Xorg session instead. This is because of incompatibilities between NVIDIA drivers and Wayland.
					</li></ul></div></section><section class="section" id="assembly_managing-nvidia-vgpu-devices_assembly_managing-gpu-devices-in-virtual-machines"><div class="titlepage"><div><div><h3 class="title">16.2. Managing NVIDIA vGPU devices</h3></div></div></div><p>
				The vGPU feature makes it possible to divide a physical NVIDIA GPU device into multiple virtual devices, referred to as <code class="literal">mediated devices</code>. These mediated devices can then be assigned to multiple virtual machines (VMs) as virtual GPUs. As a result, these VMs can share the performance of a single physical GPU.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					Assigning a physical GPU to VMs, with or without using mediated devices, makes it impossible for the host to use the GPU.
				</p></div></rh-alert><section class="section" id="proc_setting-up-nvidia-vgpu-devices_assembly_managing-nvidia-vgpu-devices"><div class="titlepage"><div><div><h4 class="title">16.2.1. Setting up NVIDIA vGPU devices</h4></div></div></div><p class="_abstract _abstract">
					To set up the NVIDIA vGPU feature, you need to download NVIDIA vGPU drivers for your GPU device, create mediated devices, and assign them to the intended virtual machines. For detailed instructions, see below.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Your GPU supports vGPU mediated devices. For an up-to-date list of NVIDIA GPUs that support creating vGPUs, see the <a class="link" href="https://docs.nvidia.com/grid/latest/grid-vgpu-release-notes-red-hat-el-kvm/index.html#validated-platforms">NVIDIA vGPU software documentation</a>.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									If you do not know which GPU your host is using, install the <span class="emphasis"><em>lshw</em></span> package and use the <code class="literal">lshw -C display</code> command. The following example shows the system is using an NVIDIA Tesla P4 GPU, compatible with vGPU.
								</p><pre class="screen"># <span class="strong strong"><strong>lshw -C display</strong></span>

*-display
       description: 3D controller
       product: GP104GL [Tesla P4]
       vendor: NVIDIA Corporation
       physical id: 0
       bus info: pci@0000:01:00.0
       version: a1
       width: 64 bits
       clock: 33MHz
       capabilities: pm msi pciexpress cap_list
       configuration: driver=vfio-pci latency=0
       resources: irq:16 memory:f6000000-f6ffffff memory:e0000000-efffffff memory:f0000000-f1ffffff</pre></li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Download the NVIDIA vGPU drivers and install them on your system. For instructions, see <a class="link" href="https://docs.nvidia.com/grid/latest/grid-software-quick-start-guide/index.html#getting-your-nvidia-grid-software">the NVIDIA documentation</a>.
						</li><li class="listitem"><p class="simpara">
							If the NVIDIA software installer did not create the <span class="strong strong"><strong>/etc/modprobe.d/nvidia-installer-disable-nouveau.conf</strong></span> file, create a <code class="literal">conf</code> file of any name in <span class="strong strong"><strong>/etc/modprobe.d/</strong></span>, and add the following lines in the file:
						</p><pre class="screen">blacklist nouveau
options nouveau modeset=0</pre></li><li class="listitem"><p class="simpara">
							Regenerate the initial ramdisk for the current kernel, then reboot.
						</p><pre class="screen"># <span class="strong strong"><strong>dracut --force</strong></span>
# <span class="strong strong"><strong>reboot</strong></span></pre></li><li class="listitem"><p class="simpara">
							Check that the kernel has loaded the <code class="literal">nvidia_vgpu_vfio</code> module and that the <code class="literal">nvidia-vgpu-mgr.service</code> service is running.
						</p><pre class="screen"># <span class="strong strong"><strong>lsmod | grep nvidia_vgpu_vfio</strong></span>
nvidia_vgpu_vfio 45011 0
nvidia 14333621 10 nvidia_vgpu_vfio
mdev 20414 2 vfio_mdev,nvidia_vgpu_vfio
vfio 32695 3 vfio_mdev,nvidia_vgpu_vfio,vfio_iommu_type1

# <span class="strong strong"><strong>systemctl status nvidia-vgpu-mgr.service</strong></span>
nvidia-vgpu-mgr.service - NVIDIA vGPU Manager Daemon
   Loaded: loaded (/usr/lib/systemd/system/nvidia-vgpu-mgr.service; enabled; vendor preset: disabled)
   Active: active (running) since Fri 2018-03-16 10:17:36 CET; 5h 8min ago
 Main PID: 1553 (nvidia-vgpu-mgr)
 [...]</pre><p class="simpara">
							In addition, if creating vGPU based on an NVIDIA Ampere GPU device, ensure that virtual functions are enable for the physical GPU. For instructions, see the <a class="link" href="https://docs.nvidia.com/grid/latest/grid-vgpu-user-guide/index.html#creating-sriov-vgpu-device-red-hat-el-kvm">NVIDIA documentation</a>.
						</p></li><li class="listitem"><p class="simpara">
							Generate a device UUID.
						</p><pre class="screen"># <span class="strong strong"><strong>uuidgen</strong></span>
30820a6f-b1a5-4503-91ca-0c10ba58692a</pre></li><li class="listitem"><p class="simpara">
							Prepare an XML file with a configuration of the mediated device, based on the detected GPU hardware. For example, the following configures a mediated device of the <code class="literal">nvidia-63</code> vGPU type on an NVIDIA Tesla P4 card that runs on the 0000:01:00.0 PCI bus and uses the UUID generated in the previous step.
						</p><pre class="programlisting language-xml">&lt;device&gt;
    &lt;parent&gt;pci_0000_01_00_0&lt;/parent&gt;
    &lt;capability type="mdev"&gt;
        &lt;type id="nvidia-63"/&gt;
        &lt;uuid&gt;30820a6f-b1a5-4503-91ca-0c10ba58692a&lt;/uuid&gt;
    &lt;/capability&gt;
&lt;/device&gt;</pre></li><li class="listitem"><p class="simpara">
							Define a vGPU mediated device based on the XML file you prepared. For example:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-define <span class="emphasis"><em>vgpu-test.xml</em></span></strong></span>
Node device mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0 created from vgpu-test.xml</pre></li><li class="listitem"><p class="simpara">
							Optional: Verify that the mediated device is listed as inactive.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-list --cap mdev --inactive</strong></span>
mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0</pre></li><li class="listitem"><p class="simpara">
							Start the vGPU mediated device you created.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-start mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0</strong></span>
Device mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0 started</pre></li><li class="listitem"><p class="simpara">
							Optional: Ensure that the mediated device is listed as active.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-list --cap mdev</strong></span>
mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0</pre></li><li class="listitem"><p class="simpara">
							Set the vGPU device to start automatically after the host reboots
						</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-autostart mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0</strong></span>
Device mdev_d196754e_d8ed_4f43_bf22_684ed698b08b_0000_9b_00_0 marked as autostarted</pre></li><li class="listitem"><p class="simpara">
							Attach the mediated device to a VM that you want to share the vGPU resources. To do so, add the following lines, along with the previously genereated UUID, to the <span class="strong strong"><strong>&lt;devices/&gt;</strong></span> sections in the XML configuration of the VM.
						</p><pre class="programlisting language-xml" id="attaching-nvidia-vgpu-devices_assembly_managing-nvidia-vgpu-devices">&lt;hostdev mode='subsystem' type='mdev' managed='no' model='vfio-pci' display='on'&gt;
  &lt;source&gt;
    &lt;address uuid='30820a6f-b1a5-4503-91ca-0c10ba58692a'/&gt;
  &lt;/source&gt;
&lt;/hostdev&gt;</pre><p class="simpara">
							Note that each UUID can only be assigned to one VM at a time. In addition, if the VM does not have QEMU video devices, such as <code class="literal">virtio-vga</code>, add also the <code class="literal">ramfb='on'</code> parameter on the <code class="literal">&lt;hostdev&gt;</code> line.
						</p></li><li class="listitem">
							For full functionality of the vGPU mediated devices to be available on the assigned VMs, set up NVIDIA vGPU guest software licensing on the VMs. For further information and instructions, see the <a class="link" href="https://docs.nvidia.com/grid/ls/latest/grid-license-server-user-guide/index.html#installing-nvidia-grid-license-server">NVIDIA Virtual GPU Software License Server User Guide</a>.
						</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Query the capabilities of the vGPU you created, and ensure it is listed as active and persistent.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-info mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0</strong></span>
Name:           virsh nodedev-autostart mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0
Parent:         pci_0000_01_00_0
Active:         yes
Persistent:     yes
Autostart:      yes</pre></li><li class="listitem"><p class="simpara">
							Start the VM and verify that the guest operating system detects the mediated device as an NVIDIA GPU. For example, if the VM uses Linux:
						</p><pre class="screen"># <span class="strong strong"><strong>lspci -d 10de: -k</strong></span>
07:00.0 VGA compatible controller: NVIDIA Corporation GV100GL [Tesla V100 SXM2 32GB] (rev a1)
        Subsystem: NVIDIA Corporation Device 12ce
        Kernel driver in use: nvidia
        Kernel modules: nouveau, nvidia_drm, nvidia</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Known Issues</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Assigning an NVIDIA vGPU mediated device to a VM that uses a RHEL 9 guest operating system currently disables the Wayland session on that VM, and loads an Xorg session instead. This is because of incompatibilities between NVIDIA drivers and Wayland.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://docs.nvidia.com/grid/latest/grid-vgpu-release-notes-red-hat-el-kvm/index.html#validated-platforms">NVIDIA vGPU software documentation</a>
						</li><li class="listitem">
							The <code class="literal">man virsh</code> command
						</li></ul></div></section><section class="section" id="proc_removing-nvidia-vgpu-devices_assembly_managing-nvidia-vgpu-devices"><div class="titlepage"><div><div><h4 class="title">16.2.2. Removing NVIDIA vGPU devices</h4></div></div></div><p class="_abstract _abstract">
					To change the configuration of <a class="link" href="#proc_setting-up-nvidia-vgpu-devices_assembly_managing-nvidia-vgpu-devices" title="16.2.1. Setting up NVIDIA vGPU devices">assigned vGPU mediated devices</a>, you need to remove the existing devices from the assigned VMs. For instructions, see below:
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The VM from which you want to remove the device is shut down.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Obtain the ID of the mediated device that you want to remove.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-list --cap mdev</strong></span>
mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0</pre></li><li class="listitem"><p class="simpara">
							Stop the running instance of the vGPU mediated device.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-destroy mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0</strong></span>
Destroyed node device 'mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0'</pre></li><li class="listitem"><p class="simpara">
							Optional: Ensure the mediated device has been deactivated.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-info mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0</strong></span>
Name:           virsh nodedev-autostart mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0
Parent:         pci_0000_01_00_0
Active:         no
Persistent:     yes
Autostart:      yes</pre></li><li class="listitem"><p class="simpara">
							Remove the device from the XML configuration of the VM. To do so, use the <code class="literal">virsh edit</code> utility to edit the XML configuration of the VM, and remove the mdev’s configuration segment. The segment will look similar to the following:
						</p><pre class="programlisting language-xml">&lt;hostdev mode='subsystem' type='mdev' managed='no' model='vfio-pci'&gt;
  &lt;source&gt;
    &lt;address uuid='30820a6f-b1a5-4503-91ca-0c10ba58692a'/&gt;
  &lt;/source&gt;
&lt;/hostdev&gt;</pre><p class="simpara">
							Note that stopping and detaching the mediated device does not delete it, but rather keeps it as <span class="strong strong"><strong>defined</strong></span>. As such, you can <a class="link" href="#proc_setting-up-nvidia-vgpu-devices_assembly_managing-nvidia-vgpu-devices" title="16.2.1. Setting up NVIDIA vGPU devices">restart</a> and <a class="link" href="#attaching-nvidia-vgpu-devices_assembly_managing-nvidia-vgpu-devices">attach</a> the device to a different VM.
						</p></li><li class="listitem"><p class="simpara">
							Optional: To delete the stopped mediated device, remove its definition.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-undefine mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0</strong></span>
Undefined node device 'mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0'</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							If you only stopped and detached the device, ensure the mediated device is listed as inactive.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-list --cap mdev --inactive</strong></span>
mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0</pre></li><li class="listitem"><p class="simpara">
							If you also deleted the device, ensure the following command does not display it.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-list --cap mdev</strong></span></pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							The <code class="literal">man virsh</code> command
						</li></ul></div></section><section class="section" id="proc_obtaining-nvidia-vgpu-information-about-your-system_assembly_managing-nvidia-vgpu-devices"><div class="titlepage"><div><div><h4 class="title">16.2.3. Obtaining NVIDIA vGPU information about your system</h4></div></div></div><p class="_abstract _abstract">
					To evaluate the capabilities of the vGPU features available to you, you can obtain additional information about the mediated devices on your system, such as:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							How many mediated devices of a given type can be created
						</li><li class="listitem">
							What mediated devices are already configured on your system.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To see the available GPUs devices on your host that can support vGPU mediated devices, use the <code class="literal">virsh nodedev-list --cap mdev_types</code> command. For example, the following shows a system with two NVIDIA Quadro RTX6000 devices.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-list --cap mdev_types</strong></span>
pci_0000_5b_00_0
pci_0000_9b_00_0</pre></li><li class="listitem"><p class="simpara">
							To display vGPU types supported by a specific GPU device, as well as additional metadata, use the <code class="literal">virsh nodedev-dumpxml</code> command.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-dumpxml pci_0000_9b_00_0</strong></span>
&lt;device&gt;
  &lt;name&gt;pci_0000_9b_00_0&lt;/name&gt;
  &lt;path&gt;/sys/devices/pci0000:9a/0000:9a:00.0/0000:9b:00.0&lt;/path&gt;
  &lt;parent&gt;pci_0000_9a_00_0&lt;/parent&gt;
  &lt;driver&gt;
    &lt;name&gt;nvidia&lt;/name&gt;
  &lt;/driver&gt;
  &lt;capability type='pci'&gt;
    &lt;class&gt;0x030000&lt;/class&gt;
    &lt;domain&gt;0&lt;/domain&gt;
    &lt;bus&gt;155&lt;/bus&gt;
    &lt;slot&gt;0&lt;/slot&gt;
    &lt;function&gt;0&lt;/function&gt;
    &lt;product id='0x1e30'&gt;TU102GL [Quadro RTX 6000/8000]&lt;/product&gt;
    &lt;vendor id='0x10de'&gt;NVIDIA Corporation&lt;/vendor&gt;
    &lt;capability type='mdev_types'&gt;
      &lt;type id='nvidia-346'&gt;
        &lt;name&gt;GRID RTX6000-12C&lt;/name&gt;
        &lt;deviceAPI&gt;vfio-pci&lt;/deviceAPI&gt;
        &lt;availableInstances&gt;2&lt;/availableInstances&gt;
      &lt;/type&gt;
      &lt;type id='nvidia-439'&gt;
        &lt;name&gt;GRID RTX6000-3A&lt;/name&gt;
        &lt;deviceAPI&gt;vfio-pci&lt;/deviceAPI&gt;
        &lt;availableInstances&gt;8&lt;/availableInstances&gt;
      &lt;/type&gt;
      [...]
      &lt;type id='nvidia-440'&gt;
        &lt;name&gt;GRID RTX6000-4A&lt;/name&gt;
        &lt;deviceAPI&gt;vfio-pci&lt;/deviceAPI&gt;
        &lt;availableInstances&gt;6&lt;/availableInstances&gt;
      &lt;/type&gt;
      &lt;type id='nvidia-261'&gt;
        &lt;name&gt;GRID RTX6000-8Q&lt;/name&gt;
        &lt;deviceAPI&gt;vfio-pci&lt;/deviceAPI&gt;
        &lt;availableInstances&gt;3&lt;/availableInstances&gt;
      &lt;/type&gt;
    &lt;/capability&gt;
    &lt;iommuGroup number='216'&gt;
      &lt;address domain='0x0000' bus='0x9b' slot='0x00' function='0x3'/&gt;
      &lt;address domain='0x0000' bus='0x9b' slot='0x00' function='0x1'/&gt;
      &lt;address domain='0x0000' bus='0x9b' slot='0x00' function='0x2'/&gt;
      &lt;address domain='0x0000' bus='0x9b' slot='0x00' function='0x0'/&gt;
    &lt;/iommuGroup&gt;
    &lt;numa node='2'/&gt;
    &lt;pci-express&gt;
      &lt;link validity='cap' port='0' speed='8' width='16'/&gt;
      &lt;link validity='sta' speed='2.5' width='8'/&gt;
    &lt;/pci-express&gt;
  &lt;/capability&gt;
&lt;/device&gt;</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							The <code class="literal">man virsh</code> command
						</li></ul></div></section><section class="section" id="ref_remote-desktop-streaming-services-for-nvidia-vgpu_assembly_managing-nvidia-vgpu-devices"><div class="titlepage"><div><div><h4 class="title">16.2.4. Remote desktop streaming services for NVIDIA vGPU</h4></div></div></div><p class="_abstract _abstract">
					The following remote desktop streaming services are supported on the RHEL 9 hypervisor with NVIDIA vGPU or NVIDIA GPU passthrough enabled:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>HP ZCentral Remote Boost/Teradici</strong></span>
						</li><li class="listitem">
							<span class="strong strong"><strong>NICE DCV</strong></span>
						</li><li class="listitem">
							<span class="strong strong"><strong>Mechdyne TGX</strong></span>
						</li></ul></div><p>
					For support details, see the appropriate vendor support matrix.
				</p></section><section class="section _additional-resources" id="related-information-assembly_managing-nvidia-vgpu-devices"><div class="titlepage"><div><div><h4 class="title">16.2.5. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://docs.nvidia.com/grid/latest/grid-vgpu-release-notes-red-hat-el-kvm/index.html#validated-platforms">NVIDIA vGPU software documentation</a>
						</li></ul></div></section></section></section><section class="chapter" id="configuring-virtual-machine-network-connections_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h2 class="title">Chapter 17. Configuring virtual machine network connections</h2></div></div></div><p>
			For your virtual machines (VMs) to connect over a network to your host, to other VMs on your host, and to locations on an external network, the VM networking must be configured accordingly. To provide VM networking, the RHEL 9 hypervisor and newly created VMs have a default network configuration, which can also be modified further. For example:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					You can enable the VMs on your host to be discovered and connected to by locations outside the host, as if the VMs were on the same network as the host.
				</li><li class="listitem">
					You can partially or completely isolate a VM from inbound network traffic to increase its security and minimize the risk of any problems with the VM impacting the host.
				</li></ul></div><p>
			The following sections explain the various types of VM network configuration and provide instructions for setting up selected VM network configurations.
		</p><section class="section" id="understanding-virtual-networking-overview_configuring-virtual-machine-network-connections"><div class="titlepage"><div><div><h3 class="title">17.1. Understanding virtual networking</h3></div></div></div><p>
				The connection of virtual machines (VMs) to other devices and locations on a network has to be facilitated by the host hardware. The following sections explain the mechanisms of VM network connections and describe the default VM network setting.
			</p><section class="section" id="how-virtual-networks-work_understanding-virtual-networking-overview"><div class="titlepage"><div><div><h4 class="title">17.1.1. How virtual networks work</h4></div></div></div><p>
					Virtual networking uses the concept of a virtual network switch. A virtual network switch is a software construct that operates on a host machine. VMs connect to the network through the virtual network switch. Based on the configuration of the virtual switch, a VM can use an existing virtual network managed by the hypervisor, or a different network connection method.
				</p><p>
					The following figure shows a virtual network switch connecting two VMs to the network:
				</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/fc76a191270bd678fb6272a73e7a1014/vn-02-switchandtwoguests.png" alt="vn 02 switchandtwoguests"></div></div><p>
					From the perspective of a guest operating system, a virtual network connection is the same as a physical network connection. Host machines view virtual network switches as network interfaces. When the <code class="literal">virtnetworkd</code> service is first installed and started, it creates <span class="strong strong"><strong>virbr0</strong></span>, the default network interface for VMs.
				</p><p>
					To view information about this interface, use the <code class="literal">ip</code> utility on the host.
				</p><pre class="screen">$ <span class="strong strong"><strong>ip addr show <span class="emphasis"><em>virbr0</em></span></strong></span>
3: virbr0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state
UNKNOWN link/ether 1b:c4:94:cf:fd:17 brd ff:ff:ff:ff:ff:ff
inet 192.0.2.1/24 brd 192.0.2.255 scope global virbr0</pre><p>
					By default, all VMs on a single host are connected to the same <a class="link" href="#virtual-networking-network-address-translation_types-of-virtual-machine-network-connections" title="17.4.1. Virtual networking with network address translation">NAT-type</a> virtual network, named <span class="strong strong"><strong>default</strong></span>, which uses the <span class="strong strong"><strong>virbr0</strong></span> interface. For details, see <a class="link" href="#virtual-networking-default-configuration_understanding-virtual-networking-overview" title="17.1.2. Virtual networking default configuration">Virtual networking default configuration</a>.
				</p><p>
					For basic outbound-only network access from VMs, no additional network setup is usually needed, because the default network is installed along with the <code class="literal package">libvirt-daemon-config-network</code> package, and is automatically started when the <code class="literal">virtnetworkd</code> service is started.
				</p><p>
					If a different VM network functionality is needed, you can create additional virtual networks and network interfaces and configure your VMs to use them. In addition to the default NAT, these networks and interfaces can be configured to use one of the following modes:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#virtual-networking-routed-mode_types-of-virtual-machine-network-connections" title="17.4.2. Virtual networking in routed mode">Routed mode</a>
						</li><li class="listitem">
							<a class="link" href="#virtual-networking-bridged-mode_types-of-virtual-machine-network-connections" title="17.4.3. Virtual networking in bridged mode">Bridged mode</a>
						</li><li class="listitem">
							<a class="link" href="#virtual-networking-isolated-mode_types-of-virtual-machine-network-connections" title="17.4.4. Virtual networking in isolated mode">Isolated mode</a>
						</li><li class="listitem">
							<a class="link" href="#virtual-networking-open-mode_types-of-virtual-machine-network-connections" title="17.4.5. Virtual networking in open mode">Open mode</a>
						</li></ul></div></section><section class="section" id="virtual-networking-default-configuration_understanding-virtual-networking-overview"><div class="titlepage"><div><div><h4 class="title">17.1.2. Virtual networking default configuration</h4></div></div></div><p>
					When the <code class="literal">virtnetworkd</code> service is first installed on a virtualization host, it contains an initial virtual network configuration in network address translation (NAT) mode. By default, all VMs on the host are connected to the same <code class="literal">libvirt</code> virtual network, named <span class="strong strong"><strong>default</strong></span>. VMs on this network can connect to locations both on the host and on the network beyond the host, but with the following limitations:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							VMs on the network are visible to the host and other VMs on the host, but the network traffic is affected by the firewalls in the guest operating system’s network stack and by the <code class="literal">libvirt</code> network filtering rules attached to the guest interface.
						</li><li class="listitem">
							VMs on the network can connect to locations outside the host but are not visible to them. Outbound traffic is affected by the NAT rules, as well as the host system’s firewall.
						</li></ul></div><p>
					The following diagram illustrates the default VM network configuration:
				</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/107d0a45e24f098d2ea64be62898e9dc/vn-08-network-overview.png" alt="vn 08 network overview"></div></div></section></section><section class="section" id="managing-virtual-machine-network-interfaces-using-the-web-console_configuring-virtual-machine-network-connections"><div class="titlepage"><div><div><h3 class="title">17.2. Using the web console for managing virtual machine network interfaces</h3></div></div></div><p>
				Using the RHEL 9 web console, you can manage the virtual network interfaces for the virtual machines to which the web console is connected. You can:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#viewing-and-editing-virtual-network-interface-information-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console" title="17.2.1. Viewing and editing virtual network interface information in the web console">View information about network interfaces and edit them</a>.
					</li><li class="listitem">
						<a class="link" href="#adding-and-connecting-virtual-network-interfaces-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console" title="17.2.2. Adding and connecting virtual network interfaces in the web console">Add network interfaces to virtual machines</a>, and <a class="link" href="#disconnecting-and-removing-virtual-network-interfaces-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console" title="17.2.3. Disconnecting and removing virtual network interfaces in the web console">disconnect or delete the interfaces</a>.
					</li></ul></div><section class="section" id="viewing-and-editing-virtual-network-interface-information-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console"><div class="titlepage"><div><div><h4 class="title">17.2.1. Viewing and editing virtual network interface information in the web console</h4></div></div></div><p>
					By using the RHEL 9 web console, you can view and modify the virtual network interfaces on a selected virtual machine (VM):
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click the VM whose information you want to see.
						</p><p class="simpara">
							A new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.
						</p></li><li class="listitem"><p class="simpara">
							Scroll to <span class="guimenu">Network Interfaces</span>.
						</p><p class="simpara">
							The Networks Interfaces section displays information about the virtual network interface configured for the VM as well as options to <span class="strong strong"><strong>Add</strong></span>, <span class="strong strong"><strong>Delete</strong></span>, <span class="strong strong"><strong>Edit</strong></span>, or <span class="strong strong"><strong>Unplug</strong></span> network interfaces.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/5eb5352076ad0f52c6ae9d11e6af3844/virt-cockpit-vNIC-info.png" alt="Image displaying the network interface details of the selected virtual machine."></div></div><p class="simpara">
							The information includes the following:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Type</strong></span> - The type of network interface for the VM. The types include virtual network, bridge to LAN, and direct attachment.
								</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
										Generic Ethernet connection is not supported in RHEL 9 and later.
									</p></div></rh-alert></li><li class="listitem">
									<span class="strong strong"><strong>Model type</strong></span> - The model of the virtual network interface.
								</li><li class="listitem">
									<span class="strong strong"><strong>MAC Address</strong></span> - The MAC address of the virtual network interface.
								</li><li class="listitem">
									<span class="strong strong"><strong>IP Address</strong></span> - The IP address of the virtual network interface.
								</li><li class="listitem">
									<span class="strong strong"><strong>Source</strong></span> - The source of the network interface. This is dependent on the network type.
								</li><li class="listitem">
									<span class="strong strong"><strong>State</strong></span> - The state of the virtual network interface.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							To edit the virtual network interface settings, Click <span class="guibutton">Edit</span>. The Virtual Network Interface Settings dialog opens.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/9783ff22db053b2d7939f2dd555695f1/virt-cockpit-edit-network-if.png" width="540" alt="Image displaying the various options that can be edited for the selected network interface."></div></div></li><li class="listitem">
							Change the interface type, source, model, or MAC address.
						</li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Save</span>. The network interface is modified.
						</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								Changes to the virtual network interface settings take effect only after restarting the VM.
							</p><p>
								Additionally, MAC address can only be modified when the VM is shut off.
							</p></div></rh-alert></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines" title="9.2. Viewing virtual machine information by using the web console">Viewing virtual machine information by using the web console</a>
						</li></ul></div></section><section class="section" id="adding-and-connecting-virtual-network-interfaces-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console"><div class="titlepage"><div><div><h4 class="title">17.2.2. Adding and connecting virtual network interfaces in the web console</h4></div></div></div><p>
					By using the RHEL 9 web console, you can create a virtual network interface and connect a virtual machine (VM) to it.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click the VM whose information you want to see.
						</p><p class="simpara">
							A new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.
						</p></li><li class="listitem"><p class="simpara">
							Scroll to <span class="guimenu">Network Interfaces</span>.
						</p><p class="simpara">
							The Networks Interfaces section displays information about the virtual network interface configured for the VM as well as options to <span class="strong strong"><strong>Add</strong></span>, <span class="strong strong"><strong>Edit</strong></span>, or <span class="strong strong"><strong>Plug</strong></span> network interfaces.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Plug</span> in the row of the virtual network interface you want to connect.
						</p><p class="simpara">
							The selected virtual network interface connects to the VM.
						</p></li></ol></div></section><section class="section" id="disconnecting-and-removing-virtual-network-interfaces-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console"><div class="titlepage"><div><div><h4 class="title">17.2.3. Disconnecting and removing virtual network interfaces in the web console</h4></div></div></div><p>
					By using the RHEL 9 web console, you can disconnect the virtual network interfaces connected to a selected virtual machine (VM).
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click the VM whose information you want to see.
						</p><p class="simpara">
							A new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.
						</p></li><li class="listitem"><p class="simpara">
							Scroll to <span class="guimenu">Network Interfaces</span>.
						</p><p class="simpara">
							The Networks Interfaces section displays information about the virtual network interface configured for the VM as well as options to <span class="strong strong"><strong>Add</strong></span>, <span class="strong strong"><strong>Delete</strong></span>, <span class="strong strong"><strong>Edit</strong></span>, or <span class="strong strong"><strong>Unplug</strong></span> network interfaces.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/5eb5352076ad0f52c6ae9d11e6af3844/virt-cockpit-vNIC-info.png" alt="Image displaying the network interface details of the selected virtual machine."></div></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Unplug</span> in the row of the virtual network interface you want to disconnect.
						</p><p class="simpara">
							The selected virtual network interface disconnects from the VM.
						</p></li></ol></div></section></section><section class="section" id="recommended-virtual-machine-networking-configurations-using-the-command-line-interface_configuring-virtual-machine-network-connections"><div class="titlepage"><div><div><h3 class="title">17.3. Recommended virtual machine networking configurations</h3></div></div></div><p>
				In many scenarios, the default VM networking configuration is sufficient. However, if adjusting the configuration is required, you can use the command-line interface (CLI) or the RHEL 9 web console to do so. The following sections describe selected VM network setups for such situations.
			</p><section class="section" id="configuring-externally-visible-virtual-machines-using-the-command-line-interface_recommended-virtual-machine-networking-configurations-using-the-command-line-interface"><div class="titlepage"><div><div><h4 class="title">17.3.1. Configuring externally visible virtual machines by using the command-line interface</h4></div></div></div><p>
					By default, a newly created VM connects to a NAT-type network that uses <code class="literal">virbr0</code>, the default virtual bridge on the host. This ensures that the VM can use the host’s network interface controller (NIC) for connecting to outside networks, but the VM is not reachable from external systems.
				</p><p>
					If you require a VM to appear on the same external network as the hypervisor, you must use <a class="link" href="#virtual-networking-bridged-mode_types-of-virtual-machine-network-connections" title="17.4.3. Virtual networking in bridged mode">bridged mode</a> instead. To do so, attach the VM to a bridge device connected to the hypervisor’s physical network device. To use the command-line interface for this, follow the instructions below.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							A shut-down <a class="link" href="#assembly_creating-virtual-machines_configuring-and-managing-virtualization" title="Chapter 3. Creating virtual machines">existing VM</a> with the default NAT setup.
						</li><li class="listitem"><p class="simpara">
							The IP configuration of the hypervisor. This varies depending on the network connection of the host. As an example, this procedure uses a scenario where the host is connected to the network by using an ethernet cable, and the hosts' physical NIC MAC address is assigned to a static IP on a DHCP server. Therefore, the ethernet interface is treated as the hypervisor IP.
						</p><p class="simpara">
							To obtain the IP configuration of the ethernet interface, use the <code class="literal">ip addr</code> utility:
						</p><pre class="screen"># <span class="strong strong"><strong>ip addr</strong></span>
[...]
enp0s25: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 54:ee:75:49:dc:46 brd ff:ff:ff:ff:ff:ff
    inet 192.0.2.1/24 brd 192.0.2.255 scope global dynamic noprefixroute enp0s25</pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create and set up a bridge connection for the physical interface on the host. For instructions, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_networking/configuring-a-network-bridge_configuring-and-managing-networking">Configuring a network bridge</a>.
						</p><p class="simpara">
							Note that in a scenario where static IP assignment is used, you must move the IPv4 setting of the physical ethernet interface to the bridge interface.
						</p></li><li class="listitem"><p class="simpara">
							Modify the VM’s network to use the created bridged interface. For example, the following sets <span class="emphasis"><em>testguest</em></span> to use <span class="emphasis"><em>bridge0</em></span>.
						</p><pre class="screen"># <span class="strong strong"><strong>virt-xml testguest --edit --network bridge=bridge0</strong></span>
Domain 'testguest' defined successfully.</pre></li><li class="listitem"><p class="simpara">
							Start the VM.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh start <span class="emphasis"><em>testguest</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
							In the guest operating system, adjust the IP and DHCP settings of the system’s network interface as if the VM was another physical system in the same network as the hypervisor.
						</p><p class="simpara">
							The specific steps for this will differ depending on the guest OS used by the VM. For example, if the guest OS is RHEL 9, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_networking/configuring-an-ethernet-connection_configuring-and-managing-networking">Configuring an Ethernet connection</a>.
						</p></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Ensure the newly created bridge is running and contains both the host’s physical interface and the interface of the VM.
						</p><pre class="screen"># <span class="strong strong"><strong>ip link show master bridge0</strong></span>
2: enp0s25: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel master bridge0 state UP mode DEFAULT group default qlen 1000
    link/ether 54:ee:75:49:dc:46 brd ff:ff:ff:ff:ff:ff
10: vnet0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel master bridge0 state UNKNOWN mode DEFAULT group default qlen 1000
    link/ether fe:54:00:89:15:40 brd ff:ff:ff:ff:ff:ff</pre></li><li class="listitem"><p class="simpara">
							Ensure the VM appears on the same external network as the hypervisor:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									In the guest operating system, obtain the network ID of the system. For example, if it is a Linux guest:
								</p><pre class="screen"># <span class="strong strong"><strong>ip addr</strong></span>
[...]
enp0s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 52:54:00:09:15:46 brd ff:ff:ff:ff:ff:ff
    inet 192.0.2.1/24 brd 192.0.2.255 scope global dynamic noprefixroute enp0s0</pre></li><li class="listitem"><p class="simpara">
									From an external system connected to the local network, connect to the VM by using the obtained ID.
								</p><pre class="screen"># <span class="strong strong"><strong>ssh root@192.0.2.1</strong></span>
root@192.0.2.1's password:
Last login: Mon Sep 24 12:05:36 2019
root~#*</pre><p class="simpara">
									If the connection works, the network has been configured successfully.
								</p></li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							In certain situations, such as when using a client-to-site VPN while the VM is hosted on the client, using bridged mode for making your VMs available to external locations is not possible.
						</p><p class="simpara">
							To work around this problem, you can <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_firewalls_and_packet_filters/getting-started-with-nftables_firewall-packet-filters">set destination NAT by using <code class="literal">nftables</code></a> for the VM.
						</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#configuring-externally-visible-virtual-machines-using-the-web-console_recommended-virtual-machine-networking-configurations-using-the-command-line-interface" title="17.3.2. Configuring externally visible virtual machines by using the web console">Configuring externally visible virtual machines by using the web console</a>
						</li><li class="listitem">
							<a class="link" href="#virtual-networking-bridged-mode_types-of-virtual-machine-network-connections" title="17.4.3. Virtual networking in bridged mode">Virtual networking in bridged mode</a>
						</li></ul></div></section><section class="section" id="configuring-externally-visible-virtual-machines-using-the-web-console_recommended-virtual-machine-networking-configurations-using-the-command-line-interface"><div class="titlepage"><div><div><h4 class="title">17.3.2. Configuring externally visible virtual machines by using the web console</h4></div></div></div><p>
					By default, a newly created VM connects to a NAT-type network that uses <code class="literal">virbr0</code>, the default virtual bridge on the host. This ensures that the VM can use the host’s network interface controller (NIC) for connecting to outside networks, but the VM is not reachable from external systems.
				</p><p>
					If you require a VM to appear on the same external network as the hypervisor, you must use <a class="link" href="#virtual-networking-bridged-mode_types-of-virtual-machine-network-connections" title="17.4.3. Virtual networking in bridged mode">bridged mode</a> instead. To do so, attach the VM to a bridge device connected to the hypervisor’s physical network device. To use the RHEL 9 web console for this, follow the instructions below.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li><li class="listitem">
							A shut-down <a class="link" href="#assembly_creating-virtual-machines_configuring-and-managing-virtualization" title="Chapter 3. Creating virtual machines">existing VM</a> with the default NAT setup.
						</li><li class="listitem"><p class="simpara">
							The IP configuration of the hypervisor. This varies depending on the network connection of the host. As an example, this procedure uses a scenario where the host is connected to the network by using an ethernet cable, and the hosts' physical NIC MAC address is assigned to a static IP on a DHCP server. Therefore, the ethernet interface is treated as the hypervisor IP.
						</p><p class="simpara">
							To obtain the IP configuration of the ethernet interface, go to the <code class="literal">Networking</code> tab in the web console, and see the <code class="literal">Interfaces</code> section.
						</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Create and set up a bridge connection for the physical interface on the host. For instructions, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/configuring-network-bridges-in-the-web-console_system-management-using-the-rhel-9-web-console">Configuring network bridges in the web console</a>.
								</p><p class="simpara">
									Note that in a scenario where static IP assignment is used, you must move the IPv4 setting of the physical ethernet interface to the bridge interface.
								</p></li><li class="listitem"><p class="simpara">
									Modify the VM’s network to use the bridged interface. In the <a class="link" href="#viewing-and-editing-virtual-network-interface-information-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console" title="17.2.1. Viewing and editing virtual network interface information in the web console">Network Interfaces</a> tab of the VM:
								</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
											Click <span class="guibutton">Add Network Interface</span>
										</li><li class="listitem"><p class="simpara">
											In the <code class="literal">Add Virtual Network Interface</code> dialog, set:
										</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
													<span class="strong strong"><strong>Interface Type</strong></span> to <code class="literal">Bridge to LAN</code>
												</li><li class="listitem">
													Source to the newly created bridge, for example <code class="literal">bridge0</code>
												</li></ul></div></li><li class="listitem">
											Click <span class="guibutton">Add</span>
										</li><li class="listitem">
											Optional: Click <span class="guibutton">Unplug</span> for all the other interfaces connected to the VM.
										</li></ol></div></li><li class="listitem">
									Click <span class="guibutton">Run</span> to start the VM.
								</li><li class="listitem"><p class="simpara">
									In the guest operating system, adjust the IP and DHCP settings of the system’s network interface as if the VM was another physical system in the same network as the hypervisor.
								</p><p class="simpara">
									The specific steps for this will differ depending on the guest OS used by the VM. For example, if the guest OS is RHEL 9, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_networking/configuring-an-ethernet-connection_configuring-and-managing-networking">Configuring an Ethernet connection</a>.
								</p></li></ol></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In the <span class="strong strong"><strong>Networking</strong></span> tab of the host’s web console, click the row with the newly created bridge to ensure it is running and contains both the host’s physical interface and the interface of the VM.
						</li><li class="listitem"><p class="simpara">
							Ensure the VM appears on the same external network as the hypervisor.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									In the guest operating system, obtain the network ID of the system. For example, if it is a Linux guest:
								</p><pre class="screen"># <span class="strong strong"><strong>ip addr</strong></span>
[...]
enp0s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
    link/ether 52:54:00:09:15:46 brd ff:ff:ff:ff:ff:ff
    inet 192.0.2.1/24 brd 192.0.2.255 scope global dynamic noprefixroute enp0s0</pre></li><li class="listitem"><p class="simpara">
									From an external system connected to the local network, connect to the VM by using the obtained ID.
								</p><pre class="screen"># <span class="strong strong"><strong>ssh root@192.0.2.1</strong></span>
root@192.0.2.1's password:
Last login: Mon Sep 24 12:05:36 2019
root~#*</pre><p class="simpara">
									If the connection works, the network has been configured successfully.
								</p></li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							In certain situations, such as when using a client-to-site VPN while the VM is hosted on the client, using bridged mode for making your VMs available to external locations is not possible.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#configuring-externally-visible-virtual-machines-using-the-command-line-interface_recommended-virtual-machine-networking-configurations-using-the-command-line-interface" title="17.3.1. Configuring externally visible virtual machines by using the command-line interface">Configuring externally visible virtual machines by using the command-line interface</a>
						</li><li class="listitem">
							<a class="link" href="#virtual-networking-bridged-mode_types-of-virtual-machine-network-connections" title="17.4.3. Virtual networking in bridged mode">Virtual networking in bridged mode</a>
						</li></ul></div></section><section class="section" id="replacing-macvtap-connections_recommended-virtual-machine-networking-configurations-using-the-command-line-interface"><div class="titlepage"><div><div><h4 class="title">17.3.3. Replacing macvtap connections</h4></div></div></div><p>
					<code class="literal">macvtap</code> is a Linux networking device driver that creates a virtual network interface, through which virtual machines have direct access to the physical network interface on the host machine. Using <code class="literal">macvtap</code> connections is supported in RHEL 9.
				</p><p>
					However, in comparison to other available virtual machine (VM) networking configurations, macvtap has suboptimal performance and is more difficult to set up correctly. Therefore, if your use case does not explicitly require macvtap, use a different supported networking configuration.
				</p><p>
					If you are using a macvtap mode in your VM, consider instead using the following network configurations:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Instead of macvtap bridge mode, use the <a class="link" href="#virtual-networking-bridged-mode_types-of-virtual-machine-network-connections" title="17.4.3. Virtual networking in bridged mode">Linux bridge</a> configuration.
						</li><li class="listitem">
							Instead of macvtap passthrough mode, use <a class="link" href="https://libvirt.org/formatdomain.html#pci-passthrough">PCI Passthrough</a>.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://libvirt.org/formatdomain.html#direct-attachment-to-physical-interface">Upstream documentation for macvtap</a>
						</li></ul></div></section></section><section class="section" id="types-of-virtual-machine-network-connections_configuring-virtual-machine-network-connections"><div class="titlepage"><div><div><h3 class="title">17.4. Types of virtual machine network connections</h3></div></div></div><p>
				To modify the networking properties and behavior of your VMs, change the type of virtual network or interface the VMs use. The following sections describe the connection types available to VMs in RHEL 9.
			</p><section class="section" id="virtual-networking-network-address-translation_types-of-virtual-machine-network-connections"><div class="titlepage"><div><div><h4 class="title">17.4.1. Virtual networking with network address translation</h4></div></div></div><p>
					By default, virtual network switches operate in network address translation (NAT) mode. They use IP masquerading rather than Source-NAT (SNAT) or Destination-NAT (DNAT). IP masquerading enables connected VMs to use the host machine’s IP address for communication with any external network. When the virtual network switch is operating in NAT mode, computers external to the host cannot communicate with the VMs inside the host.
				</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/1319bd0237b46101e4af18dcff3447d3/vn-04-hostwithnatswitch.png" alt="vn 04 hostwithnatswitch"></div></div><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
						Virtual network switches use NAT configured by firewall rules. Editing these rules while the switch is running is not recommended, because incorrect rules may result in the switch being unable to communicate.
					</p></div></rh-alert></section><section class="section" id="virtual-networking-routed-mode_types-of-virtual-machine-network-connections"><div class="titlepage"><div><div><h4 class="title">17.4.2. Virtual networking in routed mode</h4></div></div></div><p>
					When using <span class="emphasis"><em>Routed</em></span> mode, the virtual switch connects to the physical LAN connected to the host machine, passing traffic back and forth without the use of NAT. The virtual switch can examine all traffic and use the information contained within the network packets to make routing decisions. When using this mode, the virtual machines (VMs) are all in a single subnet, separate from the host machine. The VM subnet is routed through a virtual switch, which exists on the host machine. This enables incoming connections, but requires extra routing-table entries for systems on the external network.
				</p><p>
					Routed mode uses routing based on the IP address:
				</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/89e500f462be47a38d07f228a3911688/vn-06-routed-switch.png" alt="vn 06 routed switch"></div></div><p>
					A common topology that uses routed mode is virtual server hosting (VSH). A VSH provider may have several host machines, each with two physical network connections. One interface is used for management and accounting, the other for the VMs to connect through. Each VM has its own public IP address, but the host machines use private IP addresses so that only internal administrators can manage the VMs.
				</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/22da7ff1d584efda76a94e916ca0a839/vn-10-routed-mode-datacenter.png" alt="vn 10 routed mode datacenter"></div></div></section><section class="section" id="virtual-networking-bridged-mode_types-of-virtual-machine-network-connections"><div class="titlepage"><div><div><h4 class="title">17.4.3. Virtual networking in bridged mode</h4></div></div></div><p>
					In most VM networking modes, VMs automatically create and connect to the <code class="literal">virbr0</code> virtual bridge. In contrast, in <span class="emphasis"><em>bridged</em></span> mode, the VM connects to an existing Linux bridge on the host. As a result, the VM is directly visible on the physical network. This enables incoming connections, but does not require any extra routing-table entries.
				</p><p>
					Bridged mode uses connection switching based on the MAC address:
				</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/f6693f99168773256a540c6efe33fda5/vn-Bridged-Mode-Diagram.png" alt="vn Bridged Mode Diagram"></div></div><p>
					In bridged mode, the VM appear within the same subnet as the host machine. All other physical machines on the same physical network can detect the VM and access it.
				</p><div class="formalpara"><p class="title"><strong>Bridged network bonding</strong></p><p>
						It is possible to use multiple physical bridge interfaces on the hypervisor by joining them together with a bond. The bond can then be added to a bridge, after which the VMs can be added to the bridge as well. However, the bonding driver has several modes of operation, and not all of these modes work with a bridge where VMs are in use.
					</p></div><p>
					The following <a class="link" href="https://access.redhat.com/solutions/67546">bonding modes</a> are usable:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							mode 1
						</li><li class="listitem">
							mode 2
						</li><li class="listitem">
							mode 4
						</li></ul></div><p>
					In contrast, modes 0, 3, 5, or 6 is likely to cause the connection to fail. Also note that media-independent interface (MII) monitoring should be used to monitor bonding modes, as Address Resolution Protocol (ARP) monitoring does not work correctly.
				</p><p>
					For more information about bonding modes, refer to the <a class="link" href="https://access.redhat.com/solutions/67546">Red Hat Knowledgebase</a>.
				</p><div class="formalpara"><p class="title"><strong>Common scenarios</strong></p><p>
						The most common use cases for bridged mode include:
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Deploying VMs in an existing network alongside host machines, making the difference between virtual and physical machines invisible to the end user.
						</li><li class="listitem">
							Deploying VMs without making any changes to existing physical network configuration settings.
						</li><li class="listitem">
							Deploying VMs that must be easily accessible to an existing physical network. Placing VMs on a physical network where they must access DHCP services.
						</li><li class="listitem">
							Connecting VMs to an existing network where virtual LANs (VLANs) are used.
						</li><li class="listitem">
							A demilitarized zone (DMZ) network. For a DMZ deployment with VMs, Red Hat recommends setting up the DMZ at the physical network router and switches, and connecting the VMs to the physical network by using bridged mode.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#configuring-externally-visible-virtual-machines-using-the-command-line-interface_recommended-virtual-machine-networking-configurations-using-the-command-line-interface" title="17.3.1. Configuring externally visible virtual machines by using the command-line interface">Configuring externally visible virtual machines by using the command-line interface</a>
						</li><li class="listitem">
							<a class="link" href="#configuring-externally-visible-virtual-machines-using-the-web-console_recommended-virtual-machine-networking-configurations-using-the-command-line-interface" title="17.3.2. Configuring externally visible virtual machines by using the web console">Configuring externally visible virtual machines by using the web console</a>
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_virtualization/4.1/html/administration_guide/appe-custom_network_properties#Explanation_of_bridge_opts_Parameters">Explanation of <code class="literal">bridge_opts</code> parameters</a>
						</li></ul></div></section><section class="section" id="virtual-networking-isolated-mode_types-of-virtual-machine-network-connections"><div class="titlepage"><div><div><h4 class="title">17.4.4. Virtual networking in isolated mode</h4></div></div></div><p>
					By using <span class="emphasis"><em>isolated</em></span> mode, virtual machines connected to the virtual switch can communicate with each other and with the host machine, but their traffic will not pass outside of the host machine, and they cannot receive traffic from outside the host machine. Using <code class="literal">dnsmasq</code> in this mode is required for basic functionality such as DHCP.
				</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/ad58f56e3f39b5ffa9271100b3ccfe7d/vn-07-isolated-switch.png" alt="vn 07 isolated switch"></div></div></section><section class="section" id="virtual-networking-open-mode_types-of-virtual-machine-network-connections"><div class="titlepage"><div><div><h4 class="title">17.4.5. Virtual networking in open mode</h4></div></div></div><p>
					When using <span class="emphasis"><em>open</em></span> mode for networking, <code class="literal">libvirt</code> does not generate any firewall rules for the network. As a result, <code class="literal">libvirt</code> does not overwrite firewall rules provided by the host, and the user can therefore manually manage the VM’s firewall rules.
				</p></section><section class="section" id="comparison-of-virtual-machine-connection-types_types-of-virtual-machine-network-connections"><div class="titlepage"><div><div><h4 class="title">17.4.6. Comparison of virtual machine connection types</h4></div></div></div><p>
					The following table provides information about the locations to which selected types of virtual machine (VM) network configurations can connect, and to which they are visible.
				</p><rh-table id="idm140237771024272"><table class="gt-4-cols lt-7-rows"><caption>Table 17.1. Virtual machine connection types</caption><colgroup><col style="width: 20%; " class="col_1"><!--Empty--><col style="width: 20%; " class="col_2"><!--Empty--><col style="width: 20%; " class="col_3"><!--Empty--><col style="width: 20%; " class="col_4"><!--Empty--><col style="width: 20%; " class="col_5"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140237773079392" scope="col"> </th><th align="left" valign="top" id="idm140237773078464" scope="col">Connection to the host</th><th align="left" valign="top" id="idm140237773077376" scope="col">Connection to other VMs on the host</th><th align="left" valign="top" id="idm140237773076272" scope="col">Connection to outside locations</th><th align="left" valign="top" id="idm140237773075168" scope="col">Visible to outside locations</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140237773079392"> <p>
									<span class="strong strong"><strong>Bridged mode</strong></span>
								</p>
								 </td><td align="left" valign="top" headers="idm140237773078464"> <p>
									YES
								</p>
								 </td><td align="left" valign="top" headers="idm140237773077376"> <p>
									YES
								</p>
								 </td><td align="left" valign="top" headers="idm140237773076272"> <p>
									YES
								</p>
								 </td><td align="left" valign="top" headers="idm140237773075168"> <p>
									YES
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237773079392"> <p>
									<span class="strong strong"><strong>NAT</strong></span>
								</p>
								 </td><td align="left" valign="top" headers="idm140237773078464"> <p>
									YES
								</p>
								 </td><td align="left" valign="top" headers="idm140237773077376"> <p>
									YES
								</p>
								 </td><td align="left" valign="top" headers="idm140237773076272"> <p>
									YES
								</p>
								 </td><td align="left" valign="top" headers="idm140237773075168"> <p>
									<span class="emphasis"><em>no</em></span>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237773079392"> <p>
									<span class="strong strong"><strong>Routed mode</strong></span>
								</p>
								 </td><td align="left" valign="top" headers="idm140237773078464"> <p>
									YES
								</p>
								 </td><td align="left" valign="top" headers="idm140237773077376"> <p>
									YES
								</p>
								 </td><td align="left" valign="top" headers="idm140237773076272"> <p>
									YES
								</p>
								 </td><td align="left" valign="top" headers="idm140237773075168"> <p>
									YES
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237773079392"> <p>
									<span class="strong strong"><strong>Isolated mode</strong></span>
								</p>
								 </td><td align="left" valign="top" headers="idm140237773078464"> <p>
									YES
								</p>
								 </td><td align="left" valign="top" headers="idm140237773077376"> <p>
									YES
								</p>
								 </td><td align="left" valign="top" headers="idm140237773076272"> <p>
									<span class="emphasis"><em>no</em></span>
								</p>
								 </td><td align="left" valign="top" headers="idm140237773075168"> <p>
									<span class="emphasis"><em>no</em></span>
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237773079392"> <p>
									<span class="strong strong"><strong>Open mode</strong></span>
								</p>
								 </td><td colspan="4" align="center" valign="top" headers="idm140237773078464 idm140237773079392 idm140237773075168"> <p>
									<span class="emphasis"><em>Depends on the host’s firewall rules</em></span>
								</p>
								 </td></tr></tbody></table></rh-table></section></section><section class="section" id="assembly_booting-virtual-machines-from-a-pxe-server_configuring-virtual-machine-network-connections"><div class="titlepage"><div><div><h3 class="title">17.5. Booting virtual machines from a PXE server</h3></div></div></div><p class="_abstract _abstract">
				Virtual machines (VMs) that use Preboot Execution Environment (PXE) can boot and load their configuration from a network. This chapter describes how to use <code class="literal">libvirt</code> to boot VMs from a PXE server on a virtual or bridged network.
			</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					These procedures are provided only as an example. Ensure that you have sufficient backups before proceeding.
				</p></div></rh-alert><section class="section" id="proc_setting-up-a-pxe-boot-server-on-a-virtual-network_assembly_booting-virtual-machines-from-a-pxe-server"><div class="titlepage"><div><div><h4 class="title">17.5.1. Setting up a PXE boot server on a virtual network</h4></div></div></div><p class="_abstract _abstract">
					This procedure describes how to configure a <code class="literal">libvirt</code> virtual network to provide Preboot Execution Environment (PXE). This enables virtual machines on your host to be configured to boot from a boot image available on the virtual network.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							A local PXE server (DHCP and TFTP), such as:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									libvirt internal server
								</li><li class="listitem">
									manually configured dhcpd and tftpd
								</li><li class="listitem">
									dnsmasq
								</li><li class="listitem">
									Cobbler server
								</li></ul></div></li><li class="listitem">
							PXE boot images, such as <code class="literal">PXELINUX</code> configured by Cobbler or manually.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Place the PXE boot images and configuration in <code class="literal">/var/lib/tftpboot</code> folder.
						</li><li class="listitem"><p class="simpara">
							Set folder permissions:
						</p><pre class="screen"># <span class="strong strong"><strong>chmod -R a+r /var/lib/tftpboot</strong></span></pre></li><li class="listitem"><p class="simpara">
							Set folder ownership:
						</p><pre class="screen"># <span class="strong strong"><strong>chown -R nobody: /var/lib/tftpboot</strong></span></pre></li><li class="listitem"><p class="simpara">
							Update SELinux context:
						</p><pre class="screen"># <span class="strong strong"><strong>chcon -R --reference /usr/sbin/dnsmasq /var/lib/tftpboot</strong></span>
# <span class="strong strong"><strong>chcon -R --reference /usr/libexec/libvirt_leaseshelper /var/lib/tftpboot</strong></span></pre></li><li class="listitem"><p class="simpara">
							Shut down the virtual network:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh net-destroy default</strong></span></pre></li><li class="listitem"><p class="simpara">
							Open the virtual network configuration file in your default editor:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh net-edit default</strong></span></pre></li><li class="listitem"><p class="simpara">
							Edit the <code class="literal">&lt;ip&gt;</code> element to include the appropriate address, network mask, DHCP address range, and boot file, where <span class="emphasis"><em>example-pxelinux</em></span> is the name of the boot image file.
						</p><pre class="programlisting language-xml">&lt;ip address='192.0.2.1' netmask='255.255.255.0'&gt;
   &lt;tftp root='/var/lib/tftpboot'/&gt;
   &lt;dhcp&gt;
      &lt;range start='192.0.2.2' end='192.0.2.254' /&gt;
      &lt;bootp file='<span class="strong strong"><strong><span class="emphasis"><em>example-pxelinux</em></span></strong></span>'/&gt;
   &lt;/dhcp&gt;
&lt;/ip&gt;</pre></li><li class="listitem"><p class="simpara">
							Start the virtual network:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh net-start default</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Verify that the <code class="literal">default</code> virtual network is active:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh net-list</strong></span>
Name             State    Autostart   Persistent
---------------------------------------------------
default          active   no          no</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/interactively_installing_rhel_over_the_network/preparing-for-a-network-install_rhel-installer">Preparing a PXE installation source</a>
						</li></ul></div></section><section class="section" id="proc_booting-virtual-machines-using-pxe-and-a-virtual-network_assembly_booting-virtual-machines-from-a-pxe-server"><div class="titlepage"><div><div><h4 class="title">17.5.2. Booting virtual machines by using PXE and a virtual network</h4></div></div></div><p class="_abstract _abstract">
					To boot virtual machines (VMs) from a Preboot Execution Environment (PXE) server available on a virtual network, you must enable PXE booting.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							A PXE boot server is set up on the virtual network as described in <a class="link" href="#proc_setting-up-a-pxe-boot-server-on-a-virtual-network_assembly_booting-virtual-machines-from-a-pxe-server" title="17.5.1. Setting up a PXE boot server on a virtual network">Setting up a PXE boot server on a virtual network</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Create a new VM with PXE booting enabled. For example, to install from a PXE, available on the <code class="literal">default</code> virtual network, into a new 10 GB qcow2 image file:
						</p><pre class="screen"># <span class="strong strong"><strong>virt-install --pxe --network network=default --memory 2048 --vcpus 2 --disk size=10</strong></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									Alternatively, you can manually edit the XML configuration file of an existing VM:
								</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
											Ensure the <code class="literal">&lt;os&gt;</code> element has a <code class="literal">&lt;boot dev='network'/&gt;</code> element inside:
										</p><pre class="screen">&lt;os&gt;
   &lt;type arch='x86_64' machine='pc-i440fx-rhel7.0.0'&gt;hvm&lt;/type&gt;
   &lt;boot dev='network'/&gt;
   &lt;boot dev='hd'/&gt;
&lt;/os&gt;</pre></li><li class="listitem"><p class="simpara">
											Ensure the guest network is configured to use your virtual network:
										</p><pre class="screen">&lt;interface type='network'&gt;
   &lt;mac address='52:54:00:66:79:14'/&gt;
   &lt;source network='default'/&gt;
   &lt;target dev='vnet0'/&gt;
   &lt;alias name='net0'/&gt;
   &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/&gt;
&lt;/interface&gt;</pre></li></ol></div></li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Start the VM by using the <code class="literal">virsh start</code> command. If PXE is configured correctly, the VM boots from a boot image available on the PXE server.
						</li></ul></div></section><section class="section" id="proc_booting-virtual-machines-using-pxe-and-a-bridged-network_assembly_booting-virtual-machines-from-a-pxe-server"><div class="titlepage"><div><div><h4 class="title">17.5.3. Booting virtual machines by using PXE and a bridged network</h4></div></div></div><p class="_abstract _abstract">
					To boot virtual machines (VMs) from a Preboot Execution Environment (PXE) server available on a bridged network, you must enable PXE booting.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Network bridging is enabled.
						</li><li class="listitem">
							A PXE boot server is available on the bridged network.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Create a new VM with PXE booting enabled. For example, to install from a PXE, available on the <code class="literal">breth0</code> bridged network, into a new 10 GB qcow2 image file:
						</p><pre class="screen"># <span class="strong strong"><strong>virt-install --pxe --network bridge=breth0 --memory 2048 --vcpus 2 --disk size=10</strong></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									Alternatively, you can manually edit the XML configuration file of an existing VM:
								</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
											Ensure the <code class="literal">&lt;os&gt;</code> element has a <code class="literal">&lt;boot dev='network'/&gt;</code> element inside:
										</p><pre class="screen">&lt;os&gt;
   &lt;type arch='x86_64' machine='pc-i440fx-rhel7.0.0'&gt;hvm&lt;/type&gt;
   &lt;boot dev='network'/&gt;
   &lt;boot dev='hd'/&gt;
&lt;/os&gt;</pre></li><li class="listitem"><p class="simpara">
											Ensure the VM is configured to use your bridged network:
										</p><pre class="screen">&lt;interface type='bridge'&gt;
   &lt;mac address='52:54:00:5a:ad:cb'/&gt;
   &lt;source bridge='breth0'/&gt;
   &lt;target dev='vnet0'/&gt;
   &lt;alias name='net0'/&gt;
   &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/&gt;
&lt;/interface&gt;</pre></li></ol></div></li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Start the VM by using the <code class="literal command">virsh start</code> command. If PXE is configured correctly, the VM boots from a boot image available on the PXE server.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_networking/configuring-a-network-bridge_configuring-and-managing-networking">Configuring a network bridge</a>
						</li></ul></div></section></section><section class="section" id="configuring-bridges-on-a-network-bond-to-connect-virtual-machines-with-the-network_configuring-virtual-machine-network-connections"><div class="titlepage"><div><div><h3 class="title">17.6. Configuring bridges on a network bond to connect virtual machines with the network</h3></div></div></div><p class="_abstract _abstract">
				The network bridge connects VMs with the same network as the host. If you want to connect VMs on one host to another host or VMs on another host, a bridge establishes communication between them. However, the bridge does not provide a fail-over mechanism. To handle failures in communication, a network bond handles communication in the event of failure of a network interface. To maintain fault tolerance and redundancy, the <code class="literal">active-backup</code> bonding mechanism determines that only one port is active in the bond and does not require any switch configuration. If an active port fails, an alternate port becomes active to retain communication between configured VMs in the network.
			</p><section class="section" id="configuring-network-interfaces-on-a-network-bond-by-using-nmcli_configuring-bridges-on-a-network-bond-to-connect-vms-with-the-network"><div class="titlepage"><div><div><h4 class="title">17.6.1. Configuring network interfaces on a network bond by using nmcli</h4></div></div></div><p>
					To configure a network bond on the command line, use the <code class="literal">nmcli</code> utility.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Two or more physical devices are installed on the server, and they are not configured in any <code class="literal">NetworkManager</code> connection profile.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a bond interface:
						</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type bond con-name bond0 ifname bond0 bond.options "mode=active-backup"</strong></span></pre><p class="simpara">
							This command creates a bond named <code class="literal">bond0</code> that uses the <code class="literal">active-backup</code> mode.
						</p></li><li class="listitem"><p class="simpara">
							Assign the Ethernet interfaces to the bond:
						</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type ethernet slave-type bond con-name bond0-port1 ifname enp7s0 master bond0</strong></span>
# <span class="strong strong"><strong>nmcli connection add type ethernet slave-type bond con-name bond0-port2 ifname enp8s0 master bond0</strong></span></pre><p class="simpara">
							These commands create profiles for <code class="literal">enp7s0</code> and <code class="literal">enp8s0</code>, and add them to the <code class="literal">bond0</code> connection.
						</p></li><li class="listitem"><p class="simpara">
							Configure the IPv4 settings:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									To use DHCP, no action is required.
								</li><li class="listitem"><p class="simpara">
									To set a static IPv4 address, network mask, default gateway, and DNS server to the <code class="literal">bond0</code> connection, enter:
								</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bond0 ipv4.addresses <code class="literal">192.0.2.1/24</code> ipv4.gateway <code class="literal">192.0.2.254</code> ipv4.dns <code class="literal">192.0.2.253</code> ipv4.dns-search <code class="literal">example.com</code> ipv4.method <code class="literal">manual</code></strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
							Configure the IPv6 settings:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									To use stateless address autoconfiguration (SLAAC), no action is required.
								</li><li class="listitem"><p class="simpara">
									To set a static IPv6 address, network mask, default gateway, and DNS server to the <code class="literal">bond0</code> connection, enter:
								</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bond0 ipv6.addresses <code class="literal">2001:db8:1::1/64</code> ipv6.gateway <code class="literal">2001:db8:1::fffe</code> ipv6.dns <code class="literal">2001:db8:1::fffd</code> ipv6.dns-search <code class="literal">example.com</code> ipv6.method <code class="literal">manual</code></strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
							Optional: If you want to set any parameters on the bond ports, use the following command:
						</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bond0-port1 bond-port.&lt;parameter&gt; &lt;value&gt;</strong></span></pre></li><li class="listitem"><p class="simpara">
							Configure that Red Hat Enterprise Linux enables all ports automatically when the bond is enabled:
						</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bond0 connection.autoconnect-ports 1</strong></span></pre></li><li class="listitem"><p class="simpara">
							Activate the bridge:
						</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up bond0</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Temporarily remove the network cable from the host.
						</p><p class="simpara">
							Note that there is no method to properly test link failure events using software utilities. Tools that deactivate connections, such as nmcli, show only the bonding driver’s ability to handle port configuration changes and not actual link failure events.
						</p></li><li class="listitem"><p class="simpara">
							Display the status of the bond:
						</p><pre class="literallayout"># <span class="strong strong"><strong>cat /proc/net/bonding/bond0</strong></span></pre></li></ol></div></section><section class="section" id="configuring-a-network-bridge-for-network-bonds-by-using-nmcli_configuring-bridges-on-a-network-bond-to-connect-vms-with-the-network"><div class="titlepage"><div><div><h4 class="title">17.6.2. Configuring a network bridge for network bonds by using nmcli</h4></div></div></div><p class="_abstract _abstract">
					A network bridge for network bonds involves configuring a bond interface that combines multiple network interfaces for improved traffic handling. Therefore, VMs can access the network through the bonded network interfaces by using the network bridge. The <code class="literal">nmcli</code> utility creates and edits connection files from the command line required for the configuration.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a bridge interface:
						</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection add type bridge con-name <code class="literal">br0</code> ifname <code class="literal">br0</code> ipv4.method <code class="literal">disabled</code> ipv6.method <code class="literal">disabled</code></strong></span></pre></li><li class="listitem"><p class="simpara">
							Add the <code class="literal">bond0</code> bond to the <code class="literal">br0</code> bridge:
						</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify bond0 master br0</strong></span></pre></li><li class="listitem"><p class="simpara">
							Configure that Red Hat Enterprise Linux enables all ports automatically when the bridge is enabled:
						</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection modify br0 connection.autoconnect-ports 1</strong></span></pre></li><li class="listitem"><p class="simpara">
							Reactivate the bridge:
						</p><pre class="literallayout"># <span class="strong strong"><strong>nmcli connection up br0</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Use the <code class="literal">ip</code> utility to display the link status of Ethernet devices that are ports of a specific bridge:
						</p><pre class="literallayout"># <span class="strong strong"><strong>ip link show master br0</strong></span>
6: bond0: &lt;BROADCAST,MULTICAST,MASTER,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br0 state UP mode DEFAULT group default qlen 1000
    link/ether 52:54:00:38:a9:4d brd ff:ff:ff:ff:ff:ff
...</pre></li><li class="listitem"><p class="simpara">
							Use the <code class="literal">bridge</code> utility to display the status of Ethernet devices that are ports of any bridge device:
						</p><pre class="literallayout"># <span class="strong strong"><strong>bridge link show</strong></span>
6: bond0: &lt;BROADCAST,MULTICAST,MASTER,UP,LOWER_UP&gt; mtu 1500 master br0 state forwarding priority 32 cost 100
...</pre><p class="simpara">
							To display the status for a specific Ethernet device, use the <code class="literal">bridge link show dev &lt;ethernet_device_name&gt;</code> command.
						</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">nm-settings(5)</code> man page
						</li><li class="listitem">
							<code class="literal">bridge(8)</code> man page
						</li></ul></div></section><section class="section" id="creating-a-virtual-network-in-libvirt-with-an-existing-bond-interface_configuring-bridges-on-a-network-bond-to-connect-vms-with-the-network"><div class="titlepage"><div><div><h4 class="title">17.6.3. Creating a virtual network in libvirt with an existing bond interface</h4></div></div></div><p>
					To enable virtual machines (VM) to use the <code class="literal">br0</code> bridge with the bond, first add a virtual network to the <code class="literal">libvirtd</code> service that uses this bridge.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You installed the <code class="literal">libvirt</code> package.
						</li><li class="listitem">
							You started and enabled the <code class="literal">libvirtd</code> service.
						</li><li class="listitem">
							You configured the <code class="literal">br0</code> device with the bond on Red Hat Enterprise Linux.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create the <code class="literal">~/bond0-bridge.xml</code> file with the following content:
						</p><pre class="programlisting language-xml numbered">&lt;network&gt;
	&lt;name&gt;bond0-bridge&lt;/name&gt;
	&lt;forward mode="bridge" /&gt;
	&lt;bridge name="br0" /&gt;
&lt;/network&gt;</pre></li><li class="listitem"><p class="simpara">
							Use the <code class="literal">~/bond0-bridge.xml</code> file to create a new virtual network in <code class="literal">libvirt</code>:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh net-define ~/bond0-bridge.xml</strong></span></pre></li><li class="listitem"><p class="simpara">
							Remove the <code class="literal">~/bond0-bridge.xml</code> file:
						</p><pre class="literallayout"># <span class="strong strong"><strong>rm ~/bond0-bridge.xml</strong></span></pre></li><li class="listitem"><p class="simpara">
							Start the <code class="literal">bond0-bridge</code> virtual network:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh net-start bond0-bridge</strong></span></pre></li><li class="listitem"><p class="simpara">
							Configure the <code class="literal">bond0-bridge</code> virtual network to start automatically when the <code class="literal">libvirtd</code> service starts:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh net-autostart bond0-bridge</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Display the list of virtual networks:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh net-list</strong></span>
Name              State    Autostart   Persistent
----------------------------------------------------
bond0-bridge      active      yes         yes
...</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">virsh(1)</code> man page
						</li></ul></div></section><section class="section" id="proc_configuring-virtual-machines-to-use-a-bond-interface_configuring-bridges-on-a-network-bond-to-connect-vms-with-the-network"><div class="titlepage"><div><div><h4 class="title">17.6.4. Configuring virtual machines to use a bond interface</h4></div></div></div><p>
					To configure a VM to use a bridge device with a bond interface on the host, create a new VM that uses the <code class="literal">bond0-bridge</code> virtual network or update the settings of existing VMs to use this network.
				</p><p>
					Perform this procedure on the RHEL hosts.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You configured the <code class="literal">bond0-bridge</code> virtual network in <code class="literal">libvirtd</code>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							To create a new VM and configure it to use the <code class="literal">bond0-bridge</code> network, pass the <code class="literal">--network network:bond0-bridge</code> option to the <code class="literal">virt-install</code> utility when you create the VM:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virt-install ... --network network:bond0-bridge</strong></span></pre></li><li class="listitem"><p class="simpara">
							To change the network settings of an existing VM:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Connect the VM’s network interface to the <code class="literal">bond0-bridge</code> virtual network:
								</p><pre class="literallayout"># <span class="strong strong"><strong>virt-xml &lt;<span class="emphasis"><em>example_vm</em></span>&gt; --edit --network network=bond0-bridge</strong></span></pre></li></ol></div></li><li class="listitem"><p class="simpara">
							Shut down the VM, and start it again:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh shutdown &lt;<span class="emphasis"><em>example_vm</em></span>&gt;</strong></span>
# <span class="strong strong"><strong>virsh start &lt;<span class="emphasis"><em>example_vm</em></span>&gt;</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Display the virtual network interfaces of the VM on the host:
						</p><pre class="literallayout"># <span class="strong strong"><strong>virsh domiflist &lt;<span class="emphasis"><em>example_vm</em></span>&gt;</strong></span>
Interface   Type     Source           Model    MAC
-------------------------------------------------------------------
vnet1       bridge   bond0-bridge   virtio   52:54:00:c5:98:1c</pre></li><li class="listitem"><p class="simpara">
							Display the interfaces attached to the <code class="literal">br0</code> bridge:
						</p><pre class="literallayout"># <span class="strong strong"><strong>ip link show master br0</strong></span>
18: bond0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br0 state UNKNOWN mode DEFAULT group default qlen 1000
link/ether 2a:53:bd:d5:b3:0a brd ff:ff:ff:ff:ff:ff

19: vnet1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br0 state UNKNOWN mode DEFAULT group default qlen 1000
link/ether 52:54:00:c5:98:1c brd ff:ff:ff:ff:ff:ff
...</pre><p class="simpara">
							Note that the <code class="literal">libvirtd</code> service dynamically updates the bridge’s configuration. When you start a VM which uses the <code class="literal">bond0-bridge</code> network, the corresponding <code class="literal">vnet*</code> device on the host appears as a port of the bridge.
						</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">virt-install(1)</code> man page
						</li><li class="listitem">
							<code class="literal">virt-xml(1)</code> man page
						</li><li class="listitem">
							<code class="literal">virsh(1)</code> man page
						</li><li class="listitem">
							<code class="literal">arping(8)</code> man page
						</li></ul></div></section></section><section class="section" id="configuring-the-passt-user-space-connection_configuring-virtual-machine-network-connections"><div class="titlepage"><div><div><h3 class="title">17.7. Configuring the passt user-space connection</h3></div></div></div><p>
				If you require non-privileged access to a virtual network, for example when using a <code class="literal">session</code> connection of <code class="literal">libvirt</code>, you can configure your virtual machine (VM) to use the <code class="literal">passt</code> networking back end.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The <code class="literal">passt</code> package has been installed on your system.
					</p><pre class="screen"># <span class="strong strong"><strong>dnf install passt</strong></span></pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open the XML configuration of the VM on which you want to use a <code class="literal">passt</code> connection. For example:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh edit <span class="emphasis"><em>&lt;testguest1&gt;</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						In the <code class="literal">&lt;devices&gt;</code> section, add an <code class="literal">&lt;interface type='user'&gt;</code> element that uses <code class="literal">passt</code> as its backend type.
					</p><p class="simpara">
						For example, the following configuration sets up a <code class="literal">passt</code> connection that uses addresses and routes copied from the host interface associated with the first default route:
					</p><pre class="screen">&lt;devices&gt;
  [...]
  &lt;interface type='user'&gt;
    &lt;backend type='passt'/&gt;
  &lt;/interface&gt;
&lt;/devices&gt;</pre><p class="simpara">
						Optionally, when using <code class="literal">passt</code>, you can specify multiple <code class="literal">&lt;portForward&gt;</code> elements to forward incoming network traffic for the host to this VM interface. You can also customize interface IP addresses. For example:
					</p><pre class="screen">&lt;devices&gt;
  [...]
  &lt;interface type='user'&gt;
    &lt;backend type='passt'/&gt;
    &lt;mac address="52:54:00:98:d8:b7"/&gt;
    &lt;source dev='eth0'/&gt;
    &lt;ip family='ipv4' address='192.0.2.1' prefix='24'/&gt;
    &lt;ip family='ipv6' address='::ffff:c000:201'/&gt;
    &lt;portForward proto='tcp'&gt;
      &lt;range start='2022' to='22'/&gt;
    &lt;/portForward&gt;
    &lt;portForward proto='udp' address='1.2.3.4'&gt;
       &lt;range start='5000' end='5020' to='6000'/&gt;
       &lt;range start='5010' end='5015' exclude='yes'/&gt;
    &lt;/portForward&gt;
    &lt;portForward proto='tcp' address='2001:db8:ac10:fd01::1:10' dev='eth0'&gt;
      &lt;range start='8080'/&gt;
      &lt;range start='4433' to='3444'/&gt;
    &lt;/portForward&gt;
  &lt;/interface&gt;
&lt;/devices&gt;</pre><p class="simpara">
						This example configuration sets up a <code class="literal">passt</code> connection with the following parameters:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The VM copies the network routes for forwarding traffic from the <code class="literal">eth0</code> host interface.
							</li><li class="listitem">
								The interface MAC is set to <code class="literal">52:54:00:98:d8:b7</code>. If unset, a random one will be generated.
							</li><li class="listitem">
								The IPv4 address is set to <code class="literal">192.0.2.1/24</code>, and the IPv6 address is set to <code class="literal">::ffff:c000:201</code>.
							</li><li class="listitem">
								The TCP port <code class="literal">2022</code> on the host forwards its network traffic to port <code class="literal">22</code> on the VM.
							</li><li class="listitem">
								The TCP address <code class="literal">2001:db8:ac10:fd01::1:10</code> on host interface <code class="literal">eth0</code> and port <code class="literal">8080</code> forwards its network traffic to port <code class="literal">8080</code> on the VM. Port <code class="literal">4433</code> forwards to port <code class="literal">3444</code> on the VM.
							</li><li class="listitem">
								The UDP address <code class="literal">1.2.3.4</code> and ports <code class="literal">5000 - 5009</code> and <code class="literal">5016 - 5020</code> on the host forward their network traffic to ports <code class="literal">6000 - 6009</code> and <code class="literal">6016 - 6020</code> on the VM.
							</li></ul></div></li><li class="listitem">
						Save the XML configuration.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Start or restart the VM you configured with <code class="literal">passt</code>:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh reboot <span class="emphasis"><em>&lt;vm-name&gt;</em></span></strong></span>
# <span class="strong strong"><strong>virsh start <span class="emphasis"><em>&lt;vm-name&gt;</em></span></strong></span></pre><p class="simpara">
						If the VM boots successfully, it is now using the <code class="literal">passt</code> networking backend.
					</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#system-and-session-connections_securing-virtual-machines-in-rhel">System and session connections in <code class="literal">libvirt</code></a>
					</li></ul></div></section><section class="section _additional-resources" id="additional_resources"><div class="titlepage"><div><div><h3 class="title">17.8. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_networking/index">Configuring and managing networking</a>
					</li><li class="listitem">
						<a class="link" href="#managing-sr-iov-devices_managing-virtual-devices" title="14.7. Managing SR-IOV devices">Attach specific network interface cards as SR-IOV devices</a> to increase VM performance.
					</li></ul></div></section></section><section class="chapter" id="optimizing-virtual-machine-performance-in-rhel_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h2 class="title">Chapter 18. Optimizing virtual machine performance</h2></div></div></div><p>
			Virtual machines (VMs) always experience some degree of performance deterioration in comparison to the host. The following sections explain the reasons for this deterioration and provide instructions on how to minimize the performance impact of virtualization in RHEL 9, so that your hardware infrastructure resources can be used as efficiently as possible.
		</p><section class="section" id="what-influences-virtual-machine-performance_optimizing-virtual-machine-performance-in-rhel"><div class="titlepage"><div><div><h3 class="title">18.1. What influences virtual machine performance</h3></div></div></div><p>
				VMs are run as user-space processes on the host. The hypervisor therefore needs to convert the host’s system resources so that the VMs can use them. As a consequence, a portion of the resources is consumed by the conversion, and the VM therefore cannot achieve the same performance efficiency as the host.
			</p><h5 id="the_impact_of_virtualization_on_system_performance">The impact of virtualization on system performance</h5><p>
				More specific reasons for VM performance loss include:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Virtual CPUs (vCPUs) are implemented as threads on the host, handled by the Linux scheduler.
					</li><li class="listitem">
						VMs do not automatically inherit optimization features, such as NUMA or huge pages, from the host kernel.
					</li><li class="listitem">
						Disk and network I/O settings of the host might have a significant performance impact on the VM.
					</li><li class="listitem">
						Network traffic typically travels to a VM through a software-based bridge.
					</li><li class="listitem">
						Depending on the host devices and their models, there might be significant overhead due to emulation of particular hardware.
					</li></ul></div><p>
				The severity of the virtualization impact on the VM performance is influenced by a variety factors, which include:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The number of concurrently running VMs.
					</li><li class="listitem">
						The amount of virtual devices used by each VM.
					</li><li class="listitem">
						The device types used by the VMs.
					</li></ul></div><h5 id="reducing_vm_performance_loss">Reducing VM performance loss</h5><p>
				RHEL 9 provides a number of features you can use to reduce the negative performance effects of virtualization. Notably:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#optimizing-virtual-machine-performance-using-tuned_optimizing-virtual-machine-performance-in-rhel" title="18.2. Optimizing virtual machine performance by using TuneD">The <code class="literal">TuneD</code> service</a> can automatically optimize the resource distribution and performance of your VMs.
					</li><li class="listitem">
						<a class="link" href="#optimizing-virtual-machine-i-o-performance_optimizing-virtual-machine-performance-in-rhel" title="18.5. Optimizing virtual machine I/O performance">Block I/O tuning</a> can improve the performances of the VM’s block devices, such as disks.
					</li><li class="listitem">
						<a class="link" href="#optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel" title="18.6. Optimizing virtual machine CPU performance">NUMA tuning</a> can increase vCPU performance.
					</li><li class="listitem">
						<a class="link" href="#optimizing-virtual-machine-network-performance_optimizing-virtual-machine-performance-in-rhel" title="18.7. Optimizing virtual machine network performance">Virtual networking</a> can be optimized in various ways.
					</li></ul></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					Tuning VM performance can have negative effects on other virtualization functions. For example, it can make migrating the modified VM more difficult.
				</p></div></rh-alert></section><section class="section" id="optimizing-virtual-machine-performance-using-tuned_optimizing-virtual-machine-performance-in-rhel"><div class="titlepage"><div><div><h3 class="title">18.2. Optimizing virtual machine performance by using TuneD</h3></div></div></div><p>
				The <code class="literal">TuneD</code> utility is a tuning profile delivery mechanism that adapts RHEL for certain workload characteristics, such as requirements for CPU-intensive tasks or storage-network throughput responsiveness. It provides a number of tuning profiles that are pre-configured to enhance performance and reduce power consumption in a number of specific use cases. You can edit these profiles or create new profiles to create performance solutions tailored to your environment, including virtualized environments.
			</p><p>
				To optimize RHEL 9 for virtualization, use the following profiles:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						For RHEL 9 virtual machines, use the <span class="strong strong"><strong>virtual-guest</strong></span> profile. It is based on the generally applicable <code class="literal"><span class="emphasis"><em>throughput-performance</em></span></code> profile, but also decreases the swappiness of virtual memory.
					</li><li class="listitem">
						For RHEL 9 virtualization hosts, use the <span class="strong strong"><strong>virtual-host</strong></span> profile. This enables more aggressive writeback of dirty memory pages, which benefits the host performance.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">TuneD</code> service is <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/monitoring_and_managing_system_status_and_performance/getting-started-with-tuned_monitoring-and-managing-system-status-and-performance#installing-and-enabling-tuned_getting-started-with-tuned">installed and enabled</a>.
					</li></ul></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
					To enable a specific <code class="literal">TuneD</code> profile:
				</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						List the available <code class="literal">TuneD</code> profiles.
					</p><pre class="screen"># <span class="strong strong"><strong>tuned-adm list</strong></span>

Available profiles:
- balanced             - General non-specialized TuneD profile
- desktop              - Optimize for the desktop use-case
[...]
- virtual-guest        - Optimize for running inside a virtual guest
- virtual-host         - Optimize for running KVM guests
Current active profile: <span class="emphasis"><em>balanced</em></span></pre></li><li class="listitem"><p class="simpara">
						Optional: Create a new <code class="literal">TuneD</code> profile or edit an existing <code class="literal">TuneD</code> profile.
					</p><p class="simpara">
						For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/monitoring_and_managing_system_status_and_performance/customizing-tuned-profiles_monitoring-and-managing-system-status-and-performance">Customizing TuneD profiles</a>.
					</p></li><li class="listitem"><p class="simpara">
						Activate a <code class="literal">TuneD</code> profile.
					</p><pre class="screen"># <span class="strong strong"><strong>tuned-adm profile <span class="emphasis"><em>selected-profile</em></span></strong></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To optimize a virtualization host, use the <span class="emphasis"><em>virtual-host</em></span> profile.
							</p><pre class="screen"># <span class="strong strong"><strong>tuned-adm profile virtual-host</strong></span></pre></li><li class="listitem"><p class="simpara">
								On a RHEL guest operating system, use the <span class="emphasis"><em>virtual-guest</em></span> profile.
							</p><pre class="screen"># <span class="strong strong"><strong>tuned-adm profile virtual-guest</strong></span></pre></li></ul></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the active profile for <code class="literal">TuneD</code>.
					</p><pre class="screen"># <span class="strong strong"><strong>tuned-adm active</strong></span>
Current active profile: virtual-host</pre></li><li class="listitem"><p class="simpara">
						Ensure that the <code class="literal">TuneD</code> profile settings have been applied on your system.
					</p><pre class="screen"># <span class="strong strong"><strong>tuned-adm verify</strong></span>
Verification succeeded, current system settings match the preset profile. See tuned log file ('/var/log/tuned/tuned.log') for details.</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/monitoring_and_managing_system_status_and_performance/">Monitoring and managing system status and performance</a>
					</li></ul></div></section><section class="section" id="assembly_optimizing-libvirt-daemons_optimizing-virtual-machine-performance-in-rhel"><div class="titlepage"><div><div><h3 class="title">18.3. Optimizing libvirt daemons</h3></div></div></div><p>
				The <code class="literal">libvirt</code> virtualization suite works as a management layer for the RHEL hypervisor, and your <code class="literal">libvirt</code> configuration significantly impacts your virtualization host. Notably, RHEL 9 contains two different types of <code class="literal">libvirt</code> daemons, monolithic or modular, and which type of daemons you use affects how granularly you can configure individual virtualization drivers.
			</p><section class="section" id="con_types-of-libvirt-daemons_assembly_optimizing-libvirt-daemons"><div class="titlepage"><div><div><h4 class="title">18.3.1. Types of libvirt daemons</h4></div></div></div><p>
					RHEL 9 supports the following <code class="literal">libvirt</code> daemon types:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Monolithic libvirt</span></dt><dd><p class="simpara">
								The traditional <code class="literal">libvirt</code> daemon, <code class="literal">libvirtd</code>, controls a wide variety of virtualization drivers, by using a single configuration file - <code class="literal">/etc/libvirt/libvirtd.conf</code>.
							</p><p class="simpara">
								As such, <code class="literal">libvirtd</code> allows for centralized hypervisor configuration, but may use system resources inefficiently. Therefore, <code class="literal">libvirtd</code> will become unsupported in a future major release of RHEL.
							</p><p class="simpara">
								However, if you updated to RHEL 9 from RHEL 8, your host still uses <code class="literal">libvirtd</code> by default.
							</p></dd><dt><span class="term">Modular libvirt</span></dt><dd><p class="simpara">
								Newly introduced in RHEL 9, modular <code class="literal">libvirt</code> provides a specific daemon for each virtualization driver. These include the following:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<span class="strong strong"><strong>virtqemud</strong></span> - A primary daemon for hypervisor management
									</li><li class="listitem">
										<span class="strong strong"><strong>virtinterfaced</strong></span> - A secondary daemon for host NIC management
									</li><li class="listitem">
										<span class="strong strong"><strong>virtnetworkd</strong></span> - A secondary daemon for virtual network management
									</li><li class="listitem">
										<span class="strong strong"><strong>virtnodedevd</strong></span> - A secondary daemon for host physical device management
									</li><li class="listitem">
										<span class="strong strong"><strong>virtnwfilterd</strong></span> - A secondary daemon for host firewall management
									</li><li class="listitem">
										<span class="strong strong"><strong>virtsecretd</strong></span> - A secondary daemon for host secret management
									</li><li class="listitem">
										<span class="strong strong"><strong>virtstoraged</strong></span> - A secondary daemon for storage management
									</li></ul></div><p class="simpara">
								Each of the daemons has a separate configuration file - for example <code class="literal">/etc/libvirt/virtqemud.conf</code>. As such, modular <code class="literal">libvirt</code> daemons provide better options for fine-tuning <code class="literal">libvirt</code> resource management.
							</p><p class="simpara">
								If you performed a fresh install of RHEL 9, modular <code class="literal">libvirt</code> is configured by default.
							</p></dd></dl></div><div class="itemizedlist"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							If your RHEL 9 uses <code class="literal">libvirtd</code>, Red Hat recommends switching to modular daemons. For instructions, see <a class="link" href="#proc_enabling-modular-libvirt-daemons_assembly_optimizing-libvirt-daemons" title="18.3.2. Enabling modular libvirt daemons">Enabling modular libvirt daemons</a>.
						</li></ul></div></section><section class="section" id="proc_enabling-modular-libvirt-daemons_assembly_optimizing-libvirt-daemons"><div class="titlepage"><div><div><h4 class="title">18.3.2. Enabling modular libvirt daemons</h4></div></div></div><p>
					In RHEL 9, the <code class="literal">libvirt</code> library uses modular daemons that handle individual virtualization driver sets on your host. For example, the <code class="literal">virtqemud</code> daemon handles QEMU drivers.
				</p><p>
					If you performed a fresh install of a RHEL 9 host, your hypervisor uses modular <code class="literal">libvirt</code> daemons by default. However, if you upgraded your host from RHEL 8 to RHEL 9, your hypervisor uses the monolithic <code class="literal">libvirtd</code> daemon, which is the default in RHEL 8.
				</p><p>
					If that is the case, Red Hat recommends enabling the modular <code class="literal">libvirt</code> daemons instead, because they provide better options for fine-tuning <code class="literal">libvirt</code> resource management. In addition, <code class="literal">libvirtd</code> will become unsupported in a future major release of RHEL.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Your hypervisor is using the monolithic <code class="literal">libvirtd</code> service.
						</p><pre class="screen"># <span class="strong strong"><strong>systemctl is-active libvirtd.service</strong></span>
active</pre><p class="simpara">
							If this command displays <code class="literal">active</code>, you are using <code class="literal">libvirtd</code>.
						</p></li><li class="listitem">
							Your virtual machines are shut down.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Stop <code class="literal">libvirtd</code> and its sockets.
						</p><pre class="screen">$ <span class="strong strong"><strong>systemctl stop libvirtd.service</strong></span>
$ <span class="strong strong"><strong>systemctl stop libvirtd{,-ro,-admin,-tcp,-tls}.socket</strong></span></pre></li><li class="listitem"><p class="simpara">
							Disable <code class="literal">libvirtd</code> to prevent it from starting on boot.
						</p><pre class="screen">$ <span class="strong strong"><strong>systemctl disable libvirtd.service</strong></span>
$ <span class="strong strong"><strong>systemctl disable libvirtd{,-ro,-admin,-tcp,-tls}.socket</strong></span></pre></li><li class="listitem"><p class="simpara">
							Enable the modular <code class="literal">libvirt</code> daemons.
						</p><pre class="screen"># <span class="strong strong"><strong>for drv in qemu interface network nodedev nwfilter secret storage; do systemctl unmask virt${drv}d.service; systemctl unmask virt${drv}d{,-ro,-admin}.socket; systemctl enable virt${drv}d.service; systemctl enable virt${drv}d{,-ro,-admin}.socket; done</strong></span></pre></li><li class="listitem"><p class="simpara">
							Start the sockets for the modular daemons.
						</p><pre class="screen"># <span class="strong strong"><strong>for drv in qemu network nodedev nwfilter secret storage; do systemctl start virt${drv}d{,-ro,-admin}.socket; done</strong></span></pre></li><li class="listitem"><p class="simpara">
							Optional: If you require connecting to your host from remote hosts, enable and start the virtualization proxy daemon.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Check whether the <code class="literal">libvirtd-tls.socket</code> service is enabled on your system.
								</p><pre class="screen"># <span class="strong strong"><strong>grep listen_tls /etc/libvirt/libvirtd.conf</strong></span>

listen_tls = 0</pre></li><li class="listitem"><p class="simpara">
									If <code class="literal">libvirtd-tls.socket</code> is not enabled (<code class="literal">listen_tls = 0</code>), activate <code class="literal">virtproxyd</code> as follows:
								</p><pre class="screen"># <span class="strong strong"><strong>systemctl unmask virtproxyd.service</strong></span>
# <span class="strong strong"><strong>systemctl unmask virtproxyd{,-ro,-admin}.socket</strong></span>
# <span class="strong strong"><strong>systemctl enable virtproxyd.service</strong></span>
# <span class="strong strong"><strong>systemctl enable virtproxyd{,-ro,-admin}.socket</strong></span>
# <span class="strong strong"><strong>systemctl start virtproxyd{,-ro,-admin}.socket</strong></span></pre></li><li class="listitem"><p class="simpara">
									If <code class="literal">libvirtd-tls.socket</code> is enabled (<code class="literal">listen_tls = 1</code>), activate <code class="literal">virtproxyd</code> as follows:
								</p><pre class="screen"># <span class="strong strong"><strong>systemctl unmask virtproxyd.service</strong></span>
# <span class="strong strong"><strong>systemctl unmask virtproxyd{,-ro,-admin,-tls}.socket</strong></span>
# <span class="strong strong"><strong>systemctl enable virtproxyd.service</strong></span>
# <span class="strong strong"><strong>systemctl enable virtproxyd{,-ro,-admin,-tls}.socket</strong></span>
# <span class="strong strong"><strong>systemctl start virtproxyd{,-ro,-admin,-tls}.socket</strong></span></pre><p class="simpara">
									To enable the TLS socket of <code class="literal">virtproxyd</code>, your host must have TLS certificates configured to work with <code class="literal">libvirt</code>. For more information, see the <a class="link" href="https://libvirt.org/kbase/tlscerts.html">Upstream libvirt documentation</a>.
								</p></li></ol></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Activate the enabled virtualization daemons.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh uri</strong></span>
qemu:///system</pre></li><li class="listitem"><p class="simpara">
							Verify that your host is using the <code class="literal">virtqemud</code> modular daemon.
						</p><pre class="screen"># <span class="strong strong"><strong>systemctl is-active virtqemud.service</strong></span>
active</pre><p class="simpara">
							If the status is <code class="literal">active</code>, you have successfully enabled modular <code class="literal">libvirt</code> daemons.
						</p></li></ol></div></section></section><section class="section" id="configuring-virtual-machine-ram_optimizing-virtual-machine-performance-in-rhel"><div class="titlepage"><div><div><h3 class="title">18.4. Configuring virtual machine memory</h3></div></div></div><p>
				To improve the performance of a virtual machine (VM), you can assign additional host RAM to the VM. Similarly, you can decrease the amount of memory allocated to a VM so the host memory can be allocated to other VMs or tasks.
			</p><p>
				To perform these actions, you can use <a class="link" href="#adding-and-removing-virtual-machine-ram-using-the-web-console_configuring-virtual-machine-ram" title="18.4.1. Adding and removing virtual machine memory by using the web console">the web console</a> or <a class="link" href="#adding-and-removing-virtual-machine-ram-using-the-command-line-interface_configuring-virtual-machine-ram" title="18.4.2. Adding and removing virtual machine memory by using the command-line interface">the command-line interface</a>.
			</p><section class="section" id="adding-and-removing-virtual-machine-ram-using-the-web-console_configuring-virtual-machine-ram"><div class="titlepage"><div><div><h4 class="title">18.4.1. Adding and removing virtual machine memory by using the web console</h4></div></div></div><p>
					To improve the performance of a virtual machine (VM) or to free up the host resources it is using, you can use the web console to adjust amount of memory allocated to the VM.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							The guest OS is running the memory balloon drivers. To verify this is the case:
						</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Ensure the VM’s configuration includes the <code class="literal">memballoon</code> device:
								</p><pre class="screen"># <span class="strong strong"><strong>virsh dumpxml <span class="emphasis"><em>testguest</em></span> | grep memballoon</strong></span>
&lt;memballoon model='virtio'&gt;
    &lt;/memballoon&gt;</pre><p class="simpara">
									If this commands displays any output and the model is not set to <code class="literal">none</code>, the <code class="literal">memballoon</code> device is present.
								</p></li><li class="listitem"><p class="simpara">
									Ensure the balloon drivers are running in the guest OS.
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											In Windows guests, the drivers are installed as a part of the <code class="literal">virtio-win</code> driver package. For instructions, see <a class="link" href="#installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines_optimizing-windows-virtual-machines-on-rhel" title="21.2.1. Installing KVM paravirtualized drivers for Windows virtual machines">Installing KVM paravirtualized drivers for Windows virtual machines</a>.
										</li><li class="listitem">
											In Linux guests, the drivers are generally included by default and activate when the <code class="literal">memballoon</code> device is present.
										</li></ul></div></li></ol></div></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Optional: Obtain the information about the maximum memory and currently used memory for a VM. This will serve as a baseline for your changes, and also for verification.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh dominfo <span class="emphasis"><em>testguest</em></span></strong></span>
Max memory:     2097152 KiB
Used memory:    2097152 KiB</pre></li></ol></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click the VM whose information you want to see.
						</p><p class="simpara">
							A new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">edit</span> next to the <code class="literal">Memory</code> line in the Overview pane.
						</p><p class="simpara">
							The <code class="literal">Memory Adjustment</code> dialog appears.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/839e2ecc24d24759503df5eeb06e6888/virt-cockpit-memory.png" width="540" alt="Image displaying the VM memory adjustment dialog box."></div></div></li><li class="listitem"><p class="simpara">
							Configure the virtual memory for the selected VM.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Maximum allocation</strong></span> - Sets the maximum amount of host memory that the VM can use for its processes. You can specify the maximum memory when creating the VM or increase it later. You can specify memory as multiples of MiB or GiB.
								</p><p class="simpara">
									Adjusting maximum memory allocation is only possible on a shut-off VM.
								</p></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Current allocation</strong></span> - Sets the actual amount of memory allocated to the VM. This value can be less than the Maximum allocation but cannot exceed it. You can adjust the value to regulate the memory available to the VM for its processes. You can specify memory as multiples of MiB or GiB.
								</p><p class="simpara">
									If you do not specify this value, the default allocation is the <span class="strong strong"><strong>Maximum allocation</strong></span> value.
								</p></li></ul></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Save</span>.
						</p><p class="simpara">
							The memory allocation of the VM is adjusted.
						</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#adding-and-removing-virtual-machine-ram-using-the-command-line-interface_configuring-virtual-machine-ram" title="18.4.2. Adding and removing virtual machine memory by using the command-line interface">Adding and removing virtual machine memory by using the command-line interface</a>
						</li><li class="listitem">
							<a class="link" href="#optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel" title="18.6. Optimizing virtual machine CPU performance">Optimizing virtual machine CPU performance</a>
						</li></ul></div></section><section class="section" id="adding-and-removing-virtual-machine-ram-using-the-command-line-interface_configuring-virtual-machine-ram"><div class="titlepage"><div><div><h4 class="title">18.4.2. Adding and removing virtual machine memory by using the command-line interface</h4></div></div></div><p>
					To improve the performance of a virtual machine (VM) or to free up the host resources it is using, you can use the CLI to adjust amount of memory allocated to the VM.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The guest OS is running the memory balloon drivers. To verify this is the case:
						</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Ensure the VM’s configuration includes the <code class="literal">memballoon</code> device:
								</p><pre class="screen"># <span class="strong strong"><strong>virsh dumpxml <span class="emphasis"><em>testguest</em></span> | grep memballoon</strong></span>
&lt;memballoon model='virtio'&gt;
    &lt;/memballoon&gt;</pre><p class="simpara">
									If this commands displays any output and the model is not set to <code class="literal">none</code>, the <code class="literal">memballoon</code> device is present.
								</p></li><li class="listitem"><p class="simpara">
									Ensure the ballon drivers are running in the guest OS.
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											In Windows guests, the drivers are installed as a part of the <code class="literal">virtio-win</code> driver package. For instructions, see <a class="link" href="#installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines_optimizing-windows-virtual-machines-on-rhel" title="21.2.1. Installing KVM paravirtualized drivers for Windows virtual machines">Installing KVM paravirtualized drivers for Windows virtual machines</a>.
										</li><li class="listitem">
											In Linux guests, the drivers are generally included by default and activate when the <code class="literal">memballoon</code> device is present.
										</li></ul></div></li></ol></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Optional: Obtain the information about the maximum memory and currently used memory for a VM. This will serve as a baseline for your changes, and also for verification.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh dominfo <span class="emphasis"><em>testguest</em></span></strong></span>
Max memory:     2097152 KiB
Used memory:    2097152 KiB</pre></li><li class="listitem"><p class="simpara">
							Adjust the maximum memory allocated to a VM. Increasing this value improves the performance potential of the VM, and reducing the value lowers the performance footprint the VM has on your host. Note that this change can only be performed on a shut-off VM, so adjusting a running VM requires a reboot to take effect.
						</p><p class="simpara">
							For example, to change the maximum memory that the <span class="emphasis"><em>testguest</em></span> VM can use to 4096 MiB:
						</p><pre class="screen"># <span class="strong strong"><strong>virt-xml <span class="emphasis"><em>testguest</em></span> --edit --memory memory=4096,currentMemory=4096</strong></span>
Domain 'testguest' defined successfully.
Changes will take effect after the domain is fully powered off.</pre><p class="simpara">
							To increase the maximum memory of a running VM, you can attach a memory device to the VM. This is also referred to as <span class="strong strong"><strong>memory hot plug</strong></span>. For details, see Attaching memory devices to virtual machines.
						</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
								Removing memory devices from a running VM (also referred as a memory hot unplug) is not supported, and highly discouraged by Red Hat.
							</p></div></rh-alert></li><li class="listitem"><p class="simpara">
							Optional: You can also adjust the memory currently used by the VM, up to the maximum allocation. This regulates the memory load that the VM has on the host until the next reboot, without changing the maximum VM allocation.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh setmem <span class="emphasis"><em>testguest</em></span> --current 2048</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Confirm that the memory used by the VM has been updated:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh dominfo <span class="emphasis"><em>testguest</em></span></strong></span>
Max memory:     4194304 KiB
Used memory:    2097152 KiB</pre></li><li class="listitem"><p class="simpara">
							Optional: If you adjusted the current VM memory, you can obtain the memory balloon statistics of the VM to evaluate how effectively it regulates its memory use.
						</p><pre class="screen"> # <span class="strong strong"><strong>virsh domstats --balloon <span class="emphasis"><em>testguest</em></span></strong></span>
Domain: 'testguest'
  balloon.current=365624
  balloon.maximum=4194304
  balloon.swap_in=0
  balloon.swap_out=0
  balloon.major_fault=306
  balloon.minor_fault=156117
  balloon.unused=3834448
  balloon.available=4035008
  balloon.usable=3746340
  balloon.last-update=1587971682
  balloon.disk_caches=75444
  balloon.hugetlb_pgalloc=0
  balloon.hugetlb_pgfail=0
  balloon.rss=1005456</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#adding-and-removing-virtual-machine-ram-using-the-web-console_configuring-virtual-machine-ram" title="18.4.1. Adding and removing virtual machine memory by using the web console">Adding and removing virtual machine memory by using the web console</a>
						</li><li class="listitem">
							<a class="link" href="#optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel" title="18.6. Optimizing virtual machine CPU performance">Optimizing virtual machine CPU performance</a>
						</li></ul></div></section><section class="section" id="adding-and-removing-virtual-machine-memory-by-using-virtio-mem_configuring-virtual-machine-ram"><div class="titlepage"><div><div><h4 class="title">18.4.3. Adding and removing virtual machine memory by using virtio-mem</h4></div></div></div><p>
					RHEL 9 provides the <code class="literal">virtio-mem</code> paravirtualized memory device. This device makes it possible to dynamically add or remove host memory in virtual machines (VMs). For example, you can use <code class="literal">virtio-mem</code> to move memory resources between running VMs or to resize VM memory in cloud setups based on your current requirements.
				</p><section class="section" id="overview-of-virtio-mem_adding-and-removing-virtual-machine-memory-by-using-virtio-mem"><div class="titlepage"><div><div><h5 class="title">18.4.3.1. Overview of virtio-mem</h5></div></div></div><p>
						<code class="literal">virtio-mem</code> is a paravirtualized memory device that can be used to dynamically add or remove host memory in virtual machines (VMs). For example, you can use this device to move memory resources between running VMs or to resize VM memory in cloud setups based on your current requirements.
					</p><p>
						By using <code class="literal">virtio-mem</code>, you can increase the memory of a VM beyond its initial size, and shrink it back to its original size, in units that can have the size of 4 to several hundred mebibytes (MiBs). Note, however, that <code class="literal">virtio-mem</code> also relies on a specific guest operating system configuration, especially to reliably unplug memory.
					</p><div class="formalpara"><p class="title"><strong>virtio-mem feature limitations</strong></p><p>
							<code class="literal">virtio-mem</code> is currently not compatible with the following features:
						</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Using memory locking for real-time applications on the host
							</li><li class="listitem">
								Using encrypted virtualization on the host
							</li><li class="listitem">
								Combining <code class="literal">virtio-mem</code> with <code class="literal">memballoon</code> inflation and deflation on the host
							</li><li class="listitem">
								Unloading or reloading the <code class="literal">virtio_mem</code> driver in a VM
							</li><li class="listitem">
								Using vhost-user devices, with the exception of <code class="literal">virtiofs</code>
							</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
								<a class="link" href="#configuring-memory-onlining-in-virtual-machines_adding-and-removing-virtual-machine-memory-by-using-virtio-mem" title="18.4.3.2. Configuring memory onlining in virtual machines">Configuring memory onlining in virtual machines</a>
							</li><li class="listitem">
								<a class="link" href="#attaching-a-virtio-mem-device-to-virtual-machines_adding-and-removing-virtual-machine-memory-by-using-virtio-mem" title="18.4.3.3. Attaching a virtio-mem device to virtual machines">Attaching a virtio-mem device to virtual machines</a>
							</li></ul></div></section><section class="section" id="configuring-memory-onlining-in-virtual-machines_adding-and-removing-virtual-machine-memory-by-using-virtio-mem"><div class="titlepage"><div><div><h5 class="title">18.4.3.2. Configuring memory onlining in virtual machines</h5></div></div></div><p>
						Before using <code class="literal">virtio-mem</code> to attach memory to a running virtual machine (also known as memory hot-plugging), you must configure the virtual machine (VM) operating system to automatically set the hot-plugged memory to an online state. Otherwise, the guest operating system is not able to use the additional memory. You can choose from one of the following configurations for memory onlining:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">online_movable</code>
							</li><li class="listitem">
								<code class="literal">online_kernel</code>
							</li><li class="listitem">
								<code class="literal">auto-movable</code>
							</li></ul></div><p>
						To learn about differences between these configurations, see: <a class="link" href="#comparison-of-memory-onlining-configurations_adding-and-removing-virtual-machine-memory-by-using-virtio-mem" title="18.4.3.4. Comparison of memory onlining configurations">Comparison of memory onlining configurations</a>
					</p><p>
						Memory onlining is configured with udev rules by default in RHEL. However, when using <code class="literal">virtio-mem</code>, it is recommended to configure memory onlining directly in the kernel.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								The host uses the Intel 64, AMD64, or ARM 64 CPU architecture.
							</li><li class="listitem">
								The host uses RHEL 9.4 or later as the operating system.
							</li><li class="listitem"><p class="simpara">
								VMs running on the host use one of the following operating system versions:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
										RHEL 8.10
									</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
											Unplugging memory from a running VM is disabled by default in RHEL 8.10 VMs.
										</p></div></rh-alert></li><li class="listitem">
										RHEL 9
									</li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To set memory onlining to use the <code class="literal">online_movable</code> configuration in the VM:
							</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
										Set the <code class="literal">memhp_default_state</code> kernel command line parameter to <code class="literal">online_movable</code>:
									</p><pre class="screen"># <span class="strong strong"><strong>grubby --update-kernel=ALL --remove-args=memhp_default_state --args=memhp_default_state=online_movable</strong></span></pre></li><li class="listitem">
										Reboot the VM.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								To set memory onlining to use the <code class="literal">online_kernel</code> configuration in the VM:
							</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
										Set the <code class="literal">memhp_default_state</code> kernel command line parameter to <code class="literal">online_kernel</code>:
									</p><pre class="screen"># <span class="strong strong"><strong>grubby --update-kernel=ALL --remove-args=memhp_default_state --args=memhp_default_state=online_kernel</strong></span></pre></li><li class="listitem">
										Reboot the VM.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								To use the <code class="literal">auto-movable</code> memory onlining policy in the VM:
							</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
										Set the <code class="literal">memhp_default_state</code> kernel command line parameter to <code class="literal">online</code>:
									</p><pre class="screen"># <span class="strong strong"><strong>grubby --update-kernel=ALL --remove-args=memhp_default_state --args=memhp_default_state=online</strong></span></pre></li><li class="listitem"><p class="simpara">
										Set the <code class="literal">memory_hotplug.online_policy</code> kernel command line parameter to <code class="literal">auto-movable</code>:
									</p><pre class="screen"># <span class="strong strong"><strong>grubby --update-kernel=ALL --remove-args="memory_hotplug.online_policy" --args=memory_hotplug.online_policy=auto-movable</strong></span></pre></li><li class="listitem"><p class="simpara">
										Optional: To further tune the <code class="literal">auto-movable</code> onlining policy, change the <code class="literal">memory_hotplug.auto_movable_ratio</code> and <code class="literal">memory_hotplug.auto_movable_numa_aware</code> parameters:
									</p><pre class="screen"># <span class="strong strong"><strong>grubby --update-kernel=ALL --remove-args="memory_hotplug.auto_movable_ratio" --args=memory_hotplug.auto_movable_ratio=<span class="emphasis"><em>&lt;percentage&gt;</em></span></strong></span>

# <span class="strong strong"><strong>grubby --update-kernel=ALL --remove-args="memory_hotplug.memory_auto_movable_numa_aware" --args=memory_hotplug.auto_movable_numa_aware=<span class="emphasis"><em>&lt;y/n&gt;</em></span></strong></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
												The <code class="literal">memory_hotplug.auto_movable_ratio parameter</code> sets the maximum ratio of memory only available for movable allocations compared to memory available for any allocations. The ratio is expressed in percents and the default value is: <span class="emphasis"><em>301</em></span> (%), which is a 3:1 ratio.
											</li><li class="listitem"><p class="simpara">
												The <code class="literal">memory_hotplug.auto_movable_numa_aware</code> parameter controls whether the <code class="literal">memory_hotplug.auto_movable_ratio</code> parameter applies to memory across all available NUMA nodes or only for memory within a single NUMA node. The default value is: <span class="emphasis"><em>y</em></span> (yes)
											</p><p class="simpara">
												For example, if the maximum ratio is set to 301% and the <code class="literal">memory_hotplug.auto_movable_numa_aware</code> is set to <span class="emphasis"><em>y</em></span> (yes), than the 3:1 ratio is applied even within the NUMA node with the attached <code class="literal">virtio-mem</code> device. If the parameter is set to <span class="emphasis"><em>n</em></span> (no), the maximum 3:1 ratio is applied only for all the NUMA nodes as a whole.
											</p><p class="simpara">
												Additionally, if the ratio is not exceeded, the newly hot-plugged memory will be available only for movable allocations. Otherwise, the newly hot-plugged memory will be available for both movable and unmovable allocations.
											</p></li></ul></div></li><li class="listitem">
										Reboot the VM.
									</li></ol></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To see if the <code class="literal">online_movable</code> configuration has been set correctly, check the current value of the <code class="literal">memhp_default_state</code> kernel parameter:
							</p><pre class="screen"># <span class="strong strong"><strong>cat /sys/devices/system/memory/auto_online_blocks</strong></span>

online_movable</pre></li><li class="listitem"><p class="simpara">
								To see if the <code class="literal">online_kernel</code> configuration has been set correctly, check the current value of the <code class="literal">memhp_default_state</code> kernel parameter:
							</p><pre class="screen"># <span class="strong strong"><strong>cat /sys/devices/system/memory/auto_online_blocks</strong></span>

online_kernel</pre></li><li class="listitem"><p class="simpara">
								To see if the <code class="literal">auto-movable</code> configuration has been set correctly, check the following kernel parameters:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
										<code class="literal">memhp_default_state</code>:
									</p><pre class="screen"># <span class="strong strong"><strong>cat /sys/devices/system/memory/auto_online_blocks</strong></span>

online</pre></li><li class="listitem"><p class="simpara">
										<code class="literal">memory_hotplug.online_policy</code>:
									</p><pre class="screen"># <span class="strong strong"><strong>cat /sys/module/memory_hotplug/parameters/online_policy</strong></span>

auto-movable</pre></li><li class="listitem"><p class="simpara">
										<code class="literal">memory_hotplug.auto_movable_ratio</code>:
									</p><pre class="screen"># <span class="strong strong"><strong>cat /sys/module/memory_hotplug/parameters/auto_movable_ratio</strong></span>

301</pre></li><li class="listitem"><p class="simpara">
										<code class="literal">memory_hotplug.auto_movable_numa_aware</code>:
									</p><pre class="screen"># <span class="strong strong"><strong>cat /sys/module/memory_hotplug/parameters/auto_movable_numa_aware</strong></span>

y</pre></li></ul></div></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
								<a class="link" href="#overview-of-virtio-mem_adding-and-removing-virtual-machine-memory-by-using-virtio-mem" title="18.4.3.1. Overview of virtio-mem">Overview of virtio-mem</a>
							</li><li class="listitem">
								<a class="link" href="#attaching-a-virtio-mem-device-to-virtual-machines_adding-and-removing-virtual-machine-memory-by-using-virtio-mem" title="18.4.3.3. Attaching a virtio-mem device to virtual machines">Attaching a virtio-mem device to virtual machines</a>
							</li><li class="listitem">
								<a class="link" href="https://www.kernel.org/doc/html/latest/admin-guide/mm/memory-hotplug.html#configuring-memory-hot-un-plug">Configuring Memory Hot(Un)Plug</a>
							</li></ul></div></section><section class="section" id="attaching-a-virtio-mem-device-to-virtual-machines_adding-and-removing-virtual-machine-memory-by-using-virtio-mem"><div class="titlepage"><div><div><h5 class="title">18.4.3.3. Attaching a virtio-mem device to virtual machines</h5></div></div></div><p>
						To attach additional memory to a running virtual machine (also known as memory hot-plugging) and afterwards be able to resize the hot-plugged memory, you can use a <code class="literal">virtio-mem</code> device. Specifically, you can use libvirt XML configuration files and <code class="literal">virsh</code> commands to define and attach <code class="literal">virtio-mem</code> devices to virtual machines (VMs).
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								The host uses the Intel 64, AMD64, or ARM 64 CPU architecture.
							</li><li class="listitem">
								The host uses RHEL 9.4 or later as the operating system.
							</li><li class="listitem"><p class="simpara">
								VMs running on the host use one of the following operating system versions:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
										RHEL 8.10
									</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
											Unplugging memory from a running VM is disabled by default in RHEL 8.10 VMs.
										</p></div></rh-alert></li><li class="listitem">
										RHEL 9
									</li></ul></div></li><li class="listitem">
								The VM has memory onlining configured. For instructions, see: <a class="link" href="#configuring-memory-onlining-in-virtual-machines_adding-and-removing-virtual-machine-memory-by-using-virtio-mem" title="18.4.3.2. Configuring memory onlining in virtual machines">Configuring memory onlining in virtual machines</a>
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Ensure the XML configuration of the target VM includes the <code class="literal">maxMemory</code> parameter:
							</p><pre class="screen"># <span class="strong strong"><strong>virsh edit testguest1</strong></span>

&lt;domain type='kvm'&gt;
  &lt;name&gt;testguest1&lt;/name&gt;
  ...
  <span class="strong strong"><strong>&lt;maxMemory unit='GiB'&gt;128&lt;/maxMemory&gt;</strong></span>
  ...
&lt;/domain&gt;</pre><p class="simpara">
								In this example, the XML configuration of the <code class="literal">testguest1</code> VM defines a <code class="literal">maxMemory</code> parameter with a 128 gibibyte (GiB) size. The <code class="literal">maxMemory</code> size specifies the maximum memory the VM can use, which includes both initial and hot-plugged memory.
							</p></li><li class="listitem"><p class="simpara">
								Create and open an XML file to define <code class="literal">virtio-mem</code> devices on the host, for example:
							</p><pre class="screen"># <span class="strong strong"><strong>vim virtio-mem-device.xml</strong></span></pre></li><li class="listitem"><p class="simpara">
								Add XML definitions of <code class="literal">virtio-mem</code> devices to the file and save it:
							</p><pre class="programlisting language-xml">&lt;memory model='virtio-mem'&gt;
        &lt;target&gt;
                &lt;size unit='GiB'&gt;48&lt;/size&gt;
                &lt;node&gt;0&lt;/node&gt;
                &lt;block unit='MiB'&gt;2&lt;/block&gt;
                &lt;requested unit='GiB'&gt;16&lt;/requested&gt;
                &lt;current unit='GiB'&gt;16&lt;/current&gt;
        &lt;/target&gt;
        &lt;alias name='ua-virtiomem0'/&gt;
        &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/&gt;
&lt;/memory&gt;
&lt;memory model='virtio-mem'&gt;
        &lt;target&gt;
                &lt;size unit='GiB'&gt;48&lt;/size&gt;
                &lt;node&gt;1&lt;/node&gt;
                &lt;block unit='MiB'&gt;2&lt;/block&gt;
                &lt;requested unit='GiB'&gt;0&lt;/requested&gt;
                &lt;current unit='GiB'&gt;0&lt;/current&gt;
        &lt;/target&gt;
        &lt;alias name='ua-virtiomem1'/&gt;
        &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x0'/&gt;
&lt;/memory&gt;</pre><p class="simpara">
								In this example, two <code class="literal">virtio-mem</code> devices are defined with the following parameters:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">size</code>: This is the maximum size of the device. In the example, it is 48 GiB. The <code class="literal">size</code> must be a multiple of the <code class="literal">block</code> size.
									</li><li class="listitem">
										<code class="literal">node</code>: This is the assigned vNUMA node for the <code class="literal">virtio-mem</code> device.
									</li><li class="listitem">
										<code class="literal">block</code>: This is the block size of the device. It must be at least the size of the Transparent Huge Page (THP), which is 2 MiB on Intel 64 and AMD64 CPU architecture. On ARM64 architecture, the size of THP can be 2 MiB or 512 MiB depending on the base page size. The 2 MiB block size on Intel 64 or AMD64 architecture is usually a good default choice. When using <code class="literal">virtio-mem</code> with <span class="emphasis"><em>Virtual Function I/O (VFIO)</em></span> or <span class="emphasis"><em>mediated devices (mdev)</em></span>, the total number of blocks across all <code class="literal">virtio-mem</code> devices must not be larger than 32768, otherwise the plugging of RAM might fail.
									</li><li class="listitem">
										<code class="literal">requested</code>: This is the amount of memory you attach to the VM with the <code class="literal">virtio-mem</code> device. However, it is just a request towards the VM and it might not be resolved successfully, for example if the VM is not properly configured. The <code class="literal">requested</code> size must be a multiple of the <code class="literal">block</code> size and cannot exceed the maximum defined <code class="literal">size</code>.
									</li><li class="listitem">
										<code class="literal">current</code>: This represents the current size the <code class="literal">virtio-mem</code> device provides to the VM. The <code class="literal">current</code> size can differ from the <code class="literal">requested</code> size, for example when requests cannot be completed or when rebooting the VM.
									</li><li class="listitem"><p class="simpara">
										<code class="literal">alias</code>: This is an optional user-defined alias that you can use to specify the intended <code class="literal">virtio-mem</code> device, for example when editing the device with libvirt commands. All user-defined aliases in libvirt must start with the <span class="emphasis"><em>"ua-"</em></span> prefix.
									</p><p class="simpara">
										Apart from these specific parameters, <code class="literal">libvirt</code> handles the <code class="literal">virtio-mem</code> device like any other PCI device. For more information on managing PCI devices attached to VMs, see: <a class="link" href="#managing-virtual-devices_configuring-and-managing-virtualization" title="Chapter 14. Managing virtual devices">Managing virtual devices</a>
									</p></li></ul></div></li><li class="listitem"><p class="simpara">
								Use the XML file to attach the defined <code class="literal">virtio-mem</code> devices to a VM. For example, to permanently attach the two devices defined in the <code class="literal">virtio-mem-device.xml</code> to the running <code class="literal">testguest1</code> VM:
							</p><pre class="screen"># <span class="strong strong"><strong>virsh attach-device testguest1 virtio-mem-device.xml --live --config</strong></span></pre><p class="simpara">
								The <code class="literal">--live</code> option attaches the device to a running VM only, without persistence between boots. The <code class="literal">--config</code> option makes the configuration changes persistent. You can also attach the device to a shutdown VM without the <code class="literal">--live</code> option.
							</p></li><li class="listitem"><p class="simpara">
								Optional: To dynamically change the <code class="literal">requested</code> size of a <code class="literal">virtio-mem</code> device attached to a running VM, use the <code class="literal">virsh update-memory-device</code> command:
							</p><pre class="screen"># <span class="strong strong"><strong>virsh update-memory-device testguest1 --alias ua-virtiomem0 --requested-size 4GiB</strong></span></pre><p class="simpara">
								In this example:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">testguest1</code> is the VM you want to update.
									</li><li class="listitem">
										<code class="literal">--alias ua-virtiomem0</code> is the <code class="literal">virtio-mem</code> device specified by a previously defined alias.
									</li><li class="listitem"><p class="simpara">
										<code class="literal">--requested-size 4GiB</code> changes the <code class="literal">requested</code> size of the <code class="literal">virtio-mem</code> device to 4 GiB.
									</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
											Unplugging memory from a running VM by reducing the <code class="literal">requested</code> size might be unreliable. Whether this process succeeds depends on various factors, such as the memory onlining policy that is used.
										</p><p>
											In some cases, the guest operating system cannot complete the request successfully, because changing the amount of hot-plugged memory is not possible at that time.
										</p><p>
											Additionally, unplugging memory from a running VM is disabled by default in RHEL 8.10 VMs.
										</p></div></rh-alert></li></ul></div></li><li class="listitem"><p class="simpara">
								Optional: To unplug a <code class="literal">virtio-mem</code> device from a shut-down VM, use the <code class="literal">virsh detach-device</code> command:
							</p><pre class="screen"># <span class="strong strong"><strong>virsh detach-device testguest1 virtio-mem-device.xml</strong></span></pre></li><li class="listitem"><p class="simpara">
								Optional: To unplug a <code class="literal">virtio-mem</code> device from a running VM:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
										Change the <code class="literal">requested</code> size of the <code class="literal">virtio-mem</code> device to 0, otherwise the attempt to unplug a <code class="literal">virtio-mem</code> device from a running VM will fail.
									</p><pre class="screen"># <span class="strong strong"><strong>virsh update-memory-device testguest1 --alias ua-virtiomem0 --requested-size 0</strong></span></pre></li><li class="listitem"><p class="simpara">
										Unplug a <code class="literal">virtio-mem</code> device from the running VM:
									</p><pre class="screen"># <span class="strong strong"><strong>virsh detach-device testguest1 virtio-mem-device.xml --config</strong></span></pre></li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								In the VM, check the available RAM and see if the total amount now includes the hot-plugged memory:
							</p><pre class="screen"># <span class="strong strong"><strong>free -h</strong></span>

        total    used    free   shared  buff/cache   available
Mem:    31Gi     5.5Gi   14Gi   1.3Gi   11Gi         23Gi
Swap:   8.0Gi    0B      8.0Gi</pre><pre class="screen"># <span class="strong strong"><strong>numactl -H</strong></span>

available: 1 nodes (0)
node 0 cpus: 0 1 2 3 4 5 6 7
node 0 size: 29564 MB
node 0 free: 13351 MB
node distances:
node   0
  0:  10</pre></li><li class="listitem"><p class="simpara">
								The current amount of plugged-in RAM can be also viewed on the host by displaying the XML configuration of the running VM:
							</p><pre class="screen"># <span class="strong strong"><strong>virsh dumpxml testguest1</strong></span>

&lt;domain type='kvm'&gt;
  &lt;name&gt;testguest1&lt;/name&gt;
  ...
  <span class="strong strong"><strong>&lt;currentMemory unit='GiB'&gt;31&lt;/currentMemory&gt;</strong></span>
  ...
  &lt;memory model='virtio-mem'&gt;
      &lt;target&gt;
        &lt;size unit='GiB'&gt;48&lt;/size&gt;
        &lt;node&gt;0&lt;/node&gt;
        &lt;block unit='MiB'&gt;2&lt;/block&gt;
        &lt;requested unit='GiB'&gt;16&lt;/requested&gt;
        <span class="strong strong"><strong>&lt;current unit='GiB'&gt;16&lt;/current&gt;</strong></span>
      &lt;/target&gt;
      &lt;alias name='ua-virtiomem0'/&gt;
      &lt;address type='pci' domain='0x0000' bus='0x08' slot='0x00' function='0x0'/&gt;
  ...
&lt;/domain&gt;</pre><p class="simpara">
								In this example:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<code class="literal">&lt;currentMemory unit='GiB'&gt;31&lt;/currentMemory&gt;</code> represents the total RAM available in the VM from all sources.
									</li><li class="listitem">
										<code class="literal">&lt;current unit='GiB'&gt;16&lt;/current&gt;</code> represents the current size of the plugged-in RAM provided by the <code class="literal">virtio-mem</code> device.
									</li></ul></div></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
								<a class="link" href="#overview-of-virtio-mem_adding-and-removing-virtual-machine-memory-by-using-virtio-mem" title="18.4.3.1. Overview of virtio-mem">Overview of virtio-mem</a>
							</li><li class="listitem">
								<a class="link" href="#configuring-memory-onlining-in-virtual-machines_adding-and-removing-virtual-machine-memory-by-using-virtio-mem" title="18.4.3.2. Configuring memory onlining in virtual machines">Configuring memory onlining in virtual machines</a>
							</li></ul></div></section><section class="section" id="comparison-of-memory-onlining-configurations_adding-and-removing-virtual-machine-memory-by-using-virtio-mem"><div class="titlepage"><div><div><h5 class="title">18.4.3.4. Comparison of memory onlining configurations</h5></div></div></div><p>
						When attaching memory to a running RHEL virtual machine (also known as memory hot-plugging), you must set the hot-plugged memory to an online state in the virtual machine (VM) operating system. Otherwise, the system will not be able to use the memory.
					</p><p>
						The following table summarizes the main considerations when choosing between the available memory onlining configurations.
					</p><rh-table id="idm140237775195904"><table class="gt-4-cols lt-7-rows"><caption>Table 18.1. Comparison of memory onlining configurations</caption><colgroup><col style="width: 20%; " class="col_1"><!--Empty--><col style="width: 20%; " class="col_2"><!--Empty--><col style="width: 20%; " class="col_3"><!--Empty--><col style="width: 20%; " class="col_4"><!--Empty--><col style="width: 20%; " class="col_5"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140237775675952" scope="col">Configuration name</th><th align="left" valign="top" id="idm140237775674864" scope="col">Unplugging memory from a VM</th><th align="left" valign="top" id="idm140237775673760" scope="col">A risk of creating a memory zone imbalance</th><th align="left" valign="top" id="idm140237775672640" scope="col">A potential use case</th><th align="left" valign="top" id="idm140237775671552" scope="col">Memory requirements of the intended workload</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140237775675952"> <p>
										<code class="literal">online_movable</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140237775674864"> <p>
										Hot-plugged memory can be reliably unplugged.
									</p>
									 </td><td align="left" valign="top" headers="idm140237775673760"> <p>
										Yes
									</p>
									 </td><td align="left" valign="top" headers="idm140237775672640"> <p>
										Hot-plugging a comparatively small amount of memory
									</p>
									 </td><td align="left" valign="top" headers="idm140237775671552"> <p>
										Mostly user-space memory
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140237775675952"> <p>
										<code class="literal">auto-movable</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140237775674864"> <p>
										Movable portions of hot-plugged memory can be reliably unplugged.
									</p>
									 </td><td align="left" valign="top" headers="idm140237775673760"> <p>
										Minimal
									</p>
									 </td><td align="left" valign="top" headers="idm140237775672640"> <p>
										Hot-plugging a large amount of memory
									</p>
									 </td><td align="left" valign="top" headers="idm140237775671552"> <p>
										Mostly user-space memory
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140237775675952"> <p>
										<code class="literal">online_kernel</code>
									</p>
									 </td><td align="left" valign="top" headers="idm140237775674864"> <p>
										Hot-plugged memory cannot be reliably unplugged.
									</p>
									 </td><td align="left" valign="top" headers="idm140237775673760"> <p>
										No
									</p>
									 </td><td align="left" valign="top" headers="idm140237775672640"> <p>
										Unreliable memory unplugging is acceptable.
									</p>
									 </td><td align="left" valign="top" headers="idm140237775671552"> <p>
										User-space or kernel-space memory
									</p>
									 </td></tr></tbody></table></rh-table><p>
						A <span class="emphasis"><em>zone imbalance</em></span> is a lack of available memory pages in one of the Linux memory zones. A <span class="emphasis"><em>zone imbalance</em></span> can negatively impact the system performance. For example, the kernel might crash if it runs out of free memory for unmovable allocations. Usually, movable allocations contain mostly user-space memory pages and unmovable allocations contain mostly kernel-space memory pages.
					</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
								<a class="link" href="https://www.kernel.org/doc/html/latest/admin-guide/mm/memory-hotplug.html#onlining-and-offlining-memory-blocks">Onlining and Offlining Memory Blocks</a>
							</li><li class="listitem">
								<a class="link" href="https://www.kernel.org/doc/html/latest/admin-guide/mm/memory-hotplug.html#zone-movable">Zone Imbalances</a>
							</li><li class="listitem">
								<a class="link" href="#configuring-memory-onlining-in-virtual-machines_adding-and-removing-virtual-machine-memory-by-using-virtio-mem" title="18.4.3.2. Configuring memory onlining in virtual machines">Configuring memory onlining in virtual machines</a>
							</li></ul></div></section></section><section class="section _additional-resources" id="additional_resources_2"><div class="titlepage"><div><div><h4 class="title">18.4.4. Additional resources</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#attaching-devices-to-virtual-machines_assembly_managing-virtual-devices-using-the-cli" title="14.3.1. Attaching devices to virtual machines">Attaching devices to virtual machines</a>.
						</li></ul></div></section></section><section class="section" id="optimizing-virtual-machine-i-o-performance_optimizing-virtual-machine-performance-in-rhel"><div class="titlepage"><div><div><h3 class="title">18.5. Optimizing virtual machine I/O performance</h3></div></div></div><p>
				The input and output (I/O) capabilities of a virtual machine (VM) can significantly limit the VM’s overall efficiency. To address this, you can optimize a VM’s I/O by configuring block I/O parameters.
			</p><section class="section" id="tuning-block-i-o-in-virtual-machines_optimizing-virtual-machine-i-o-performance"><div class="titlepage"><div><div><h4 class="title">18.5.1. Tuning block I/O in virtual machines</h4></div></div></div><p>
					When multiple block devices are being used by one or more VMs, it might be important to adjust the I/O priority of specific virtual devices by modifying their <span class="emphasis"><em>I/O weights</em></span>.
				</p><p>
					Increasing the I/O weight of a device increases its priority for I/O bandwidth, and therefore provides it with more host resources. Similarly, reducing a device’s weight makes it consume less host resources.
				</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
						Each device’s <code class="literal">weight</code> value must be within the <code class="literal">100</code> to <code class="literal">1000</code> range. Alternatively, the value can be <code class="literal">0</code>, which removes that device from per-device listings.
					</p></div></rh-alert><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
						To display and set a VM’s block I/O parameters:
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Display the current <code class="literal">&lt;blkio&gt;</code> parameters for a VM:
						</p><p class="simpara">
							<code class="literal"># <span class="strong strong"><strong>virsh dumpxml <span class="emphasis"><em>VM-name</em></span></strong></span></code>
						</p><pre class="programlisting language-xml">&lt;domain&gt;
  [...]
  &lt;blkiotune&gt;
    &lt;weight&gt;800&lt;/weight&gt;
    &lt;device&gt;
      &lt;path&gt;/dev/sda&lt;/path&gt;
      &lt;weight&gt;1000&lt;/weight&gt;
    &lt;/device&gt;
    &lt;device&gt;
      &lt;path&gt;/dev/sdb&lt;/path&gt;
      &lt;weight&gt;500&lt;/weight&gt;
    &lt;/device&gt;
  &lt;/blkiotune&gt;
  [...]
&lt;/domain&gt;</pre></li><li class="listitem"><p class="simpara">
							Edit the I/O weight of a specified device:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh blkiotune <span class="emphasis"><em>VM-name</em></span> --device-weights <span class="emphasis"><em>device</em></span>, <span class="emphasis"><em>I/O-weight</em></span></strong></span></pre><p class="simpara">
							For example, the following changes the weight of the <span class="emphasis"><em>/dev/sda</em></span> device in the <span class="emphasis"><em>testguest1</em></span> VM to 500.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh blkiotune testguest1 --device-weights /dev/sda, 500</strong></span></pre></li></ol></div></section><section class="section" id="disk-i-o-throttling-in-virtual-machines_optimizing-virtual-machine-i-o-performance"><div class="titlepage"><div><div><h4 class="title">18.5.2. Disk I/O throttling in virtual machines</h4></div></div></div><p>
					When several VMs are running simultaneously, they can interfere with system performance by using excessive disk I/O. Disk I/O throttling in KVM virtualization provides the ability to set a limit on disk I/O requests sent from the VMs to the host machine. This can prevent a VM from over-utilizing shared resources and impacting the performance of other VMs.
				</p><p>
					To enable disk I/O throttling, set a limit on disk I/O requests sent from each block device attached to VMs to the host machine.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Use the <code class="literal">virsh domblklist</code> command to list the names of all the disk devices on a specified VM.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh domblklist rollin-coal</strong></span>
Target     Source
------------------------------------------------
vda        /var/lib/libvirt/images/rollin-coal.qcow2
sda        -
sdb        /home/horridly-demanding-processes.iso</pre></li><li class="listitem"><p class="simpara">
							Find the host block device where the virtual disk that you want to throttle is mounted.
						</p><p class="simpara">
							For example, if you want to throttle the <code class="literal">sdb</code> virtual disk from the previous step, the following output shows that the disk is mounted on the <code class="literal">/dev/nvme0n1p3</code> partition.
						</p><pre class="screen">$ <span class="strong strong"><strong>lsblk</strong></span>
NAME                                          MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINT
zram0                                         252:0    0     4G  0 disk  [SWAP]
nvme0n1                                       259:0    0 238.5G  0 disk
├─nvme0n1p1                                   259:1    0   600M  0 part  /boot/efi
├─nvme0n1p2                                   259:2    0     1G  0 part  /boot
└─nvme0n1p3                                   259:3    0 236.9G  0 part
  └─luks-a1123911-6f37-463c-b4eb-fxzy1ac12fea 253:0    0 236.9G  0 crypt /home</pre></li><li class="listitem"><p class="simpara">
							Set I/O limits for the block device by using the <code class="literal">virsh blkiotune</code> command.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh blkiotune <span class="emphasis"><em>VM-name</em></span> --parameter <span class="emphasis"><em>device</em></span>,<span class="emphasis"><em>limit</em></span></strong></span></pre><p class="simpara">
							The following example throttles the <code class="literal">sdb</code> disk on the <code class="literal">rollin-coal</code> VM to 1000 read and write I/O operations per second and to 50 MB per second read and write throughput.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh blkiotune rollin-coal --device-read-iops-sec /dev/nvme0n1p3,1000 --device-write-iops-sec /dev/nvme0n1p3,1000 --device-write-bytes-sec /dev/nvme0n1p3,52428800 --device-read-bytes-sec /dev/nvme0n1p3,52428800</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional information</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Disk I/O throttling can be useful in various situations, for example when VMs belonging to different customers are running on the same host, or when quality of service guarantees are given for different VMs. Disk I/O throttling can also be used to simulate slower disks.
						</li><li class="listitem">
							I/O throttling can be applied independently to each block device attached to a VM and supports limits on throughput and I/O operations.
						</li><li class="listitem">
							Red Hat does not support using the <code class="literal">virsh blkdeviotune</code> command to configure I/O throttling in VMs. For more information about unsupported features when using RHEL 9 as a VM host, see <a class="link" href="#unsupported-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization" title="24.3. Unsupported features in RHEL 9 virtualization">Unsupported features in RHEL 9 virtualization</a>.
						</li></ul></div></section><section class="section" id="configuring-multi-queue-virtio-scsi_optimizing-virtual-machine-i-o-performance"><div class="titlepage"><div><div><h4 class="title">18.5.3. Enabling multi-queue virtio-scsi</h4></div></div></div><p>
					When using <code class="literal">virtio-scsi</code> storage devices in your virtual machines (VMs), the <span class="emphasis"><em>multi-queue virtio-scsi</em></span> feature provides improved storage performance and scalability. It enables each virtual CPU (vCPU) to have a separate queue and interrupt to use without affecting other vCPUs.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To enable multi-queue virtio-scsi support for a specific VM, add the following to the VM’s XML configuration, where <span class="emphasis"><em>N</em></span> is the total number of vCPU queues:
						</p><pre class="programlisting language-xml">&lt;controller type='scsi' index='0' model='virtio-scsi'&gt;
   &lt;driver queues='N' /&gt;
&lt;/controller&gt;</pre></li></ul></div></section></section><section class="section" id="optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel"><div class="titlepage"><div><div><h3 class="title">18.6. Optimizing virtual machine CPU performance</h3></div></div></div><p>
				Much like physical CPUs in host machines, vCPUs are critical to virtual machine (VM) performance. As a result, optimizing vCPUs can have a significant impact on the resource efficiency of your VMs. To optimize your vCPU:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Adjust how many host CPUs are assigned to the VM. You can do this using <a class="link" href="#adding-and-removing-virtual-cpus-using-the-command-line-interface_optimizing-virtual-machine-cpu-performance" title="18.6.1. Adding and removing virtual CPUs by using the command-line interface">the CLI</a> or <a class="link" href="#managing-virtual-cpus-using-the-web-console_optimizing-virtual-machine-cpu-performance" title="18.6.2. Managing virtual CPUs by using the web console">the web console</a>.
					</li><li class="listitem"><p class="simpara">
						Ensure that the vCPU model is aligned with the CPU model of the host. For example, to set the <span class="emphasis"><em>testguest1</em></span> VM to use the CPU model of the host:
					</p><pre class="screen"># <span class="strong strong"><strong>virt-xml testguest1 --edit --cpu host-model</strong></span></pre><p class="simpara">
						On an ARM 64 system, use <code class="literal">--cpu host-passthrough</code>.
					</p></li><li class="listitem">
						<a class="link" href="#proc_managing-ksm_optimizing-virtual-machine-cpu-performance" title="18.6.5. Enabling and disabling kernel same-page merging">Manage kernel same-page merging (KSM)</a>.
					</li><li class="listitem"><p class="simpara">
						If your host machine uses Non-Uniform Memory Access (NUMA), you can also <span class="strong strong"><strong>configure NUMA</strong></span> for its VMs. This maps the host’s CPU and memory processes onto the CPU and memory processes of the VM as closely as possible. In effect, NUMA tuning provides the vCPU with a more streamlined access to the system memory allocated to the VM, which can improve the vCPU processing effectiveness.
					</p><p class="simpara">
						For details, see <a class="link" href="#configuring-numa-in-a-virtual-machine_optimizing-virtual-machine-cpu-performance" title="18.6.3. Configuring NUMA in a virtual machine">Configuring NUMA in a virtual machine</a> and <a class="link" href="#sample-vcpu-performance-tuning-scenario_optimizing-virtual-machine-cpu-performance" title="18.6.4. Sample vCPU performance tuning scenario">Sample vCPU performance tuning scenario</a>.
					</p></li></ol></div><section class="section" id="adding-and-removing-virtual-cpus-using-the-command-line-interface_optimizing-virtual-machine-cpu-performance"><div class="titlepage"><div><div><h4 class="title">18.6.1. Adding and removing virtual CPUs by using the command-line interface</h4></div></div></div><p>
					To increase or optimize the CPU performance of a virtual machine (VM), you can add or remove virtual CPUs (vCPUs) assigned to the VM.
				</p><p>
					When performed on a running VM, this is also referred to as vCPU hot plugging and hot unplugging. However, note that vCPU hot unplug is not supported in RHEL 9, and Red Hat highly discourages its use.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Optional: View the current state of the vCPUs in the targeted VM. For example, to display the number of vCPUs on the <span class="emphasis"><em>testguest</em></span> VM:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh vcpucount <span class="emphasis"><em>testguest</em></span></strong></span>
maximum      config         4
maximum      live           2
current      config         2
current      live           1</pre><p class="simpara">
							This output indicates that <span class="emphasis"><em>testguest</em></span> is currently using 1 vCPU, and 1 more vCPu can be hot plugged to it to increase the VM’s performance. However, after reboot, the number of vCPUs <span class="emphasis"><em>testguest</em></span> uses will change to 2, and it will be possible to hot plug 2 more vCPUs.
						</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Adjust the maximum number of vCPUs that can be attached to a VM, which takes effect on the VM’s next boot.
						</p><p class="simpara">
							For example, to increase the maximum vCPU count for the <span class="emphasis"><em>testguest</em></span> VM to 8:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh setvcpus testguest 8 --maximum --config</strong></span></pre><p class="simpara">
							Note that the maximum may be limited by the CPU topology, host hardware, the hypervisor, and other factors.
						</p></li><li class="listitem"><p class="simpara">
							Adjust the current number of vCPUs attached to a VM, up to the maximum configured in the previous step. For example:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									To increase the number of vCPUs attached to the running <span class="emphasis"><em>testguest</em></span> VM to 4:
								</p><pre class="screen"># <span class="strong strong"><strong>virsh setvcpus testguest 4 --live</strong></span></pre><p class="simpara">
									This increases the VM’s performance and host load footprint of <span class="emphasis"><em>testguest</em></span> until the VM’s next boot.
								</p></li><li class="listitem"><p class="simpara">
									To permanently decrease the number of vCPUs attached to the <span class="emphasis"><em>testguest</em></span> VM to 1:
								</p><pre class="screen"># <span class="strong strong"><strong>virsh setvcpus testguest 1 --config</strong></span></pre><p class="simpara">
									This decreases the VM’s performance and host load footprint of <span class="emphasis"><em>testguest</em></span> after the VM’s next boot. However, if needed, additional vCPUs can be hot plugged to the VM to temporarily increase its performance.
								</p></li></ul></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Confirm that the current state of vCPU for the VM reflects your changes.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh vcpucount <span class="emphasis"><em>testguest</em></span></strong></span>
maximum      config         8
maximum      live           4
current      config         1
current      live           4</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#managing-virtual-cpus-using-the-web-console_optimizing-virtual-machine-cpu-performance" title="18.6.2. Managing virtual CPUs by using the web console">Managing virtual CPUs by using the web console</a>
						</li></ul></div></section><section class="section" id="managing-virtual-cpus-using-the-web-console_optimizing-virtual-machine-cpu-performance"><div class="titlepage"><div><div><h4 class="title">18.6.2. Managing virtual CPUs by using the web console</h4></div></div></div><p>
					By using the RHEL 9 web console, you can review and configure virtual CPUs used by virtual machines (VMs) to which the web console is connected.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You have installed the RHEL 9 web console.
						</p><p class="simpara">
							For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
						</p></li><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Log in to the RHEL 9 web console.
						</p><p class="simpara">
							For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click the VM whose information you want to see.
						</p><p class="simpara">
							A new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.
						</p></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">edit</span> next to the number of vCPUs in the Overview pane.
						</p><p class="simpara">
							The vCPU details dialog appears.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/822593b143a5fe3f23f61dc63a892afb/virt-cockpit-configure-vCPUs.png" width="540" alt="Image displaying the VM CPU details dialog box."></div></div></li></ol></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Configure the virtual CPUs for the selected VM.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>vCPU Count</strong></span> - The number of vCPUs currently in use.
								</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
										The vCPU count cannot be greater than the vCPU Maximum.
									</p></div></rh-alert></li><li class="listitem">
									<span class="strong strong"><strong>vCPU Maximum</strong></span> - The maximum number of virtual CPUs that can be configured for the VM. If this value is higher than the <span class="strong strong"><strong>vCPU Count</strong></span>, additional vCPUs can be attached to the VM.
								</li><li class="listitem">
									<span class="strong strong"><strong>Sockets</strong></span> - The number of sockets to expose to the VM.
								</li><li class="listitem">
									<span class="strong strong"><strong>Cores per socket</strong></span> - The number of cores for each socket to expose to the VM.
								</li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Threads per core</strong></span> - The number of threads for each core to expose to the VM.
								</p><p class="simpara">
									Note that the <span class="strong strong"><strong>Sockets</strong></span>, <span class="strong strong"><strong>Cores per socket</strong></span>, and <span class="strong strong"><strong>Threads per core</strong></span> options adjust the CPU topology of the VM. This may be beneficial for vCPU performance and may impact the functionality of certain software in the guest OS. If a different setting is not required by your deployment, keep the default values.
								</p></li></ul></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Apply</span>.
						</p><p class="simpara">
							The virtual CPUs for the VM are configured.
						</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								Changes to virtual CPU settings only take effect after the VM is restarted.
							</p></div></rh-alert></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#adding-and-removing-virtual-cpus-using-the-command-line-interface_optimizing-virtual-machine-cpu-performance" title="18.6.1. Adding and removing virtual CPUs by using the command-line interface">Adding and removing virtual CPUs by using the command-line interface</a>
						</li></ul></div></section><section class="section" id="configuring-numa-in-a-virtual-machine_optimizing-virtual-machine-cpu-performance"><div class="titlepage"><div><div><h4 class="title">18.6.3. Configuring NUMA in a virtual machine</h4></div></div></div><p>
					The following methods can be used to configure Non-Uniform Memory Access (NUMA) settings of a virtual machine (VM) on a RHEL 9 host.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The host is a NUMA-compatible machine. To detect whether this is the case, use the <code class="literal">virsh nodeinfo</code> command and see the <code class="literal">NUMA cell(s)</code> line:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh nodeinfo</strong></span>
CPU model:           x86_64
CPU(s):              48
CPU frequency:       1200 MHz
CPU socket(s):       1
Core(s) per socket:  12
Thread(s) per core:  2
NUMA cell(s):        <span class="strong strong"><strong>2</strong></span>
Memory size:         67012964 KiB</pre><p class="simpara">
							If the value of the line is 2 or greater, the host is NUMA-compatible.
						</p></li></ul></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
						For ease of use, you can set up a VM’s NUMA configuration by using automated utilities and services. However, manual NUMA setup is more likely to yield a significant performance improvement.
					</p></div><p>
					<span class="strong strong"><strong>Automatic methods</strong></span>
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Set the VM’s NUMA policy to <code class="literal">Preferred</code>. For example, to do so for the <span class="emphasis"><em>testguest5</em></span> VM:
						</p><pre class="screen"># <span class="strong strong"><strong>virt-xml testguest5 --edit --vcpus placement=auto</strong></span>
# <span class="strong strong"><strong>virt-xml testguest5 --edit --numatune mode=preferred</strong></span></pre></li><li class="listitem"><p class="simpara">
							Enable automatic NUMA balancing on the host:
						</p><pre class="screen"># <span class="strong strong"><strong>echo 1 &gt; /proc/sys/kernel/numa_balancing</strong></span></pre></li><li class="listitem"><p class="simpara">
							Start the <code class="literal">numad</code> service to automatically align the VM CPU with memory resources.
						</p><pre class="screen"># <span class="strong strong"><strong>systemctl start numad</strong></span></pre></li></ul></div><p>
					<span class="strong strong"><strong>Manual methods</strong></span>
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Pin specific vCPU threads to a specific host CPU or range of CPUs. This is also possible on non-NUMA hosts and VMs, and is recommended as a safe method of vCPU performance improvement.
						</p><p class="simpara">
							For example, the following commands pin vCPU threads 0 to 5 of the <span class="emphasis"><em>testguest6</em></span> VM to host CPUs 1, 3, 5, 7, 9, and 11, respectively:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh vcpupin testguest6 0 1</strong></span>
# <span class="strong strong"><strong>virsh vcpupin testguest6 1 3</strong></span>
# <span class="strong strong"><strong>virsh vcpupin testguest6 2 5</strong></span>
# <span class="strong strong"><strong>virsh vcpupin testguest6 3 7</strong></span>
# <span class="strong strong"><strong>virsh vcpupin testguest6 4 9</strong></span>
# <span class="strong strong"><strong>virsh vcpupin testguest6 5 11</strong></span></pre><p class="simpara">
							Afterwards, you can verify whether this was successful:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh vcpupin testguest6</strong></span>
VCPU   CPU Affinity
----------------------
0      1
1      3
2      5
3      7
4      9
5      11</pre></li><li class="listitem"><p class="simpara">
							After pinning vCPU threads, you can also pin QEMU process threads associated with a specified VM to a specific host CPU or range of CPUs. For example, the following commands pin the QEMU process thread of <span class="emphasis"><em>testguest6</em></span> to CPUs 13 and 15, and verify this was successful:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh emulatorpin testguest6 13,15</strong></span>
# <span class="strong strong"><strong>virsh emulatorpin testguest6</strong></span>
emulator: CPU Affinity
----------------------------------
       *: 13,15</pre></li><li class="listitem"><p class="simpara">
							Finally, you can also specify which host NUMA nodes will be assigned specifically to a certain VM. This can improve the host memory usage by the VM’s vCPU. For example, the following commands set <span class="emphasis"><em>testguest6</em></span> to use host NUMA nodes 3 to 5, and verify this was successful:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh numatune testguest6 --nodeset 3-5</strong></span>
# <span class="strong strong"><strong>virsh numatune testguest6</strong></span></pre></li></ol></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
						For best performance results, it is recommended to use all of the manual tuning methods listed above
					</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Known issues</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="#how-virtualization-on-ibm-z-differs-from-amd64-and-intel64_feature-support-and-limitations-in-rhel-9-virtualization" title="24.6. How virtualization on IBM Z differs from AMD64 and Intel 64">NUMA tuning currently cannot be performed on IBM Z hosts</a>.
						</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="#sample-vcpu-performance-tuning-scenario_optimizing-virtual-machine-cpu-performance" title="18.6.4. Sample vCPU performance tuning scenario">Sample vCPU performance tuning scenario</a>
						</li><li class="listitem">
							<a class="link" href="#virtual-machine-performance-monitoring-tools_optimizing-virtual-machine-performance-in-rhel" title="18.8. Virtual machine performance monitoring tools">View the current NUMA configuration of your system</a> using the <code class="literal">numastat</code> utility
						</li></ul></div></section><section class="section" id="sample-vcpu-performance-tuning-scenario_optimizing-virtual-machine-cpu-performance"><div class="titlepage"><div><div><h4 class="title">18.6.4. Sample vCPU performance tuning scenario</h4></div></div></div><p>
					To obtain the best vCPU performance possible, Red Hat recommends by using manual <code class="literal">vcpupin</code>, <code class="literal">emulatorpin</code>, and <code class="literal">numatune</code> settings together, for example like in the following scenario.
				</p><div class="itemizedlist"><p class="title"><strong>Starting scenario</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Your host has the following hardware specifics:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									2 NUMA nodes
								</li><li class="listitem">
									3 CPU cores on each node
								</li><li class="listitem">
									2 threads on each core
								</li></ul></div><p class="simpara">
							The output of <code class="literal">virsh nodeinfo</code> of such a machine would look similar to:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh nodeinfo</strong></span>
CPU model:           x86_64
CPU(s):              12
CPU frequency:       3661 MHz
CPU socket(s):       2
Core(s) per socket:  3
Thread(s) per core:  2
NUMA cell(s):        2
Memory size:         31248692 KiB</pre></li><li class="listitem"><p class="simpara">
							You intend to modify an existing VM to have 8 vCPUs, which means that it will not fit in a single NUMA node.
						</p><p class="simpara">
							Therefore, you should distribute 4 vCPUs on each NUMA node and make the vCPU topology resemble the host topology as closely as possible. This means that vCPUs that run as sibling threads of a given physical CPU should be pinned to host threads on the same core. For details, see the <span class="emphasis"><em>Solution</em></span> below:
						</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Solution</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Obtain the information about the host topology:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh capabilities</strong></span></pre><p class="simpara">
							The output should include a section that looks similar to the following:
						</p><pre class="programlisting language-xml">&lt;topology&gt;
  &lt;cells num="2"&gt;
    &lt;cell id="0"&gt;
      &lt;memory unit="KiB"&gt;15624346&lt;/memory&gt;
      &lt;pages unit="KiB" size="4"&gt;3906086&lt;/pages&gt;
      &lt;pages unit="KiB" size="2048"&gt;0&lt;/pages&gt;
      &lt;pages unit="KiB" size="1048576"&gt;0&lt;/pages&gt;
      &lt;distances&gt;
        &lt;sibling id="0" value="10" /&gt;
        &lt;sibling id="1" value="21" /&gt;
      &lt;/distances&gt;
      &lt;cpus num="6"&gt;
        &lt;cpu id="0" socket_id="0" core_id="0" siblings="0,3" /&gt;
        &lt;cpu id="1" socket_id="0" core_id="1" siblings="1,4" /&gt;
        &lt;cpu id="2" socket_id="0" core_id="2" siblings="2,5" /&gt;
        &lt;cpu id="3" socket_id="0" core_id="0" siblings="0,3" /&gt;
        &lt;cpu id="4" socket_id="0" core_id="1" siblings="1,4" /&gt;
        &lt;cpu id="5" socket_id="0" core_id="2" siblings="2,5" /&gt;
      &lt;/cpus&gt;
    &lt;/cell&gt;
    &lt;cell id="1"&gt;
      &lt;memory unit="KiB"&gt;15624346&lt;/memory&gt;
      &lt;pages unit="KiB" size="4"&gt;3906086&lt;/pages&gt;
      &lt;pages unit="KiB" size="2048"&gt;0&lt;/pages&gt;
      &lt;pages unit="KiB" size="1048576"&gt;0&lt;/pages&gt;
      &lt;distances&gt;
        &lt;sibling id="0" value="21" /&gt;
        &lt;sibling id="1" value="10" /&gt;
      &lt;/distances&gt;
      &lt;cpus num="6"&gt;
        &lt;cpu id="6" socket_id="1" core_id="3" siblings="6,9" /&gt;
        &lt;cpu id="7" socket_id="1" core_id="4" siblings="7,10" /&gt;
        &lt;cpu id="8" socket_id="1" core_id="5" siblings="8,11" /&gt;
        &lt;cpu id="9" socket_id="1" core_id="3" siblings="6,9" /&gt;
        &lt;cpu id="10" socket_id="1" core_id="4" siblings="7,10" /&gt;
        &lt;cpu id="11" socket_id="1" core_id="5" siblings="8,11" /&gt;
      &lt;/cpus&gt;
    &lt;/cell&gt;
  &lt;/cells&gt;
&lt;/topology&gt;</pre></li><li class="listitem">
							Optional: Test the performance of the VM by using <a class="link" href="#virtual-machine-performance-monitoring-tools_optimizing-virtual-machine-performance-in-rhel" title="18.8. Virtual machine performance monitoring tools">the applicable tools and utilities</a>.
						</li><li class="listitem"><p class="simpara">
							Set up and mount 1 GiB huge pages on the host:
						</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								1 GiB huge pages might not be available on some architectures and configurations, such as ARM 64 hosts.
							</p></div></rh-alert><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Add the following line to the host’s kernel command line:
								</p><pre class="screen">default_hugepagesz=1G hugepagesz=1G</pre></li><li class="listitem"><p class="simpara">
									Create the <code class="literal">/etc/systemd/system/hugetlb-gigantic-pages.service</code> file with the following content:
								</p><pre class="screen">[Unit]
Description=HugeTLB Gigantic Pages Reservation
DefaultDependencies=no
Before=dev-hugepages.mount
ConditionPathExists=/sys/devices/system/node
ConditionKernelCommandLine=hugepagesz=1G

[Service]
Type=oneshot
RemainAfterExit=yes
ExecStart=/etc/systemd/hugetlb-reserve-pages.sh

[Install]
WantedBy=sysinit.target</pre></li><li class="listitem"><p class="simpara">
									Create the <code class="literal">/etc/systemd/hugetlb-reserve-pages.sh</code> file with the following content:
								</p><pre class="screen">#!/bin/sh

nodes_path=/sys/devices/system/node/
if [ ! -d $nodes_path ]; then
	echo "ERROR: $nodes_path does not exist"
	exit 1
fi

reserve_pages()
{
	echo $1 &gt; $nodes_path/$2/hugepages/hugepages-1048576kB/nr_hugepages
}

reserve_pages 4 node1
reserve_pages 4 node2</pre><p class="simpara">
									This reserves four 1GiB huge pages from <span class="emphasis"><em>node1</em></span> and four 1GiB huge pages from <span class="emphasis"><em>node2</em></span>.
								</p></li><li class="listitem"><p class="simpara">
									Make the script created in the previous step executable:
								</p><pre class="screen"># <span class="strong strong"><strong>chmod +x /etc/systemd/hugetlb-reserve-pages.sh</strong></span></pre></li><li class="listitem"><p class="simpara">
									Enable huge page reservation on boot:
								</p><pre class="screen"># <span class="strong strong"><strong>systemctl enable hugetlb-gigantic-pages</strong></span></pre></li></ol></div></li><li class="listitem"><p class="simpara">
							Use the <code class="literal">virsh edit</code> command to edit the XML configuration of the VM you wish to optimize, in this example <span class="emphasis"><em>super-VM</em></span>:
						</p><pre class="screen"># <span class="strong strong"><strong>virsh edit super-vm</strong></span></pre></li><li class="listitem"><p class="simpara">
							Adjust the XML configuration of the VM in the following way:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									Set the VM to use 8 static vCPUs. Use the <code class="literal">&lt;vcpu/&gt;</code> element to do this.
								</li><li class="listitem"><p class="simpara">
									Pin each of the vCPU threads to the corresponding host CPU threads that it mirrors in the topology. To do so, use the <code class="literal">&lt;vcpupin/&gt;</code> elements in the <code class="literal">&lt;cputune&gt;</code> section.
								</p><p class="simpara">
									Note that, as shown by the <code class="literal">virsh capabilities</code> utility above, host CPU threads are not ordered sequentially in their respective cores. In addition, the vCPU threads should be pinned to the highest available set of host cores on the same NUMA node. For a table illustration, see the <span class="strong strong"><strong>Sample topology</strong></span> section below.
								</p><p class="simpara">
									The XML configuration for steps a. and b. can look similar to:
								</p><pre class="programlisting language-xml">&lt;cputune&gt;
  &lt;vcpupin vcpu='0' cpuset='1'/&gt;
  &lt;vcpupin vcpu='1' cpuset='4'/&gt;
  &lt;vcpupin vcpu='2' cpuset='2'/&gt;
  &lt;vcpupin vcpu='3' cpuset='5'/&gt;
  &lt;vcpupin vcpu='4' cpuset='7'/&gt;
  &lt;vcpupin vcpu='5' cpuset='10'/&gt;
  &lt;vcpupin vcpu='6' cpuset='8'/&gt;
  &lt;vcpupin vcpu='7' cpuset='11'/&gt;
  &lt;emulatorpin cpuset='6,9'/&gt;
&lt;/cputune&gt;</pre></li><li class="listitem"><p class="simpara">
									Set the VM to use 1 GiB huge pages:
								</p><pre class="programlisting language-xml">&lt;memoryBacking&gt;
  &lt;hugepages&gt;
    &lt;page size='1' unit='GiB'/&gt;
  &lt;/hugepages&gt;
&lt;/memoryBacking&gt;</pre></li><li class="listitem"><p class="simpara">
									Configure the VM’s NUMA nodes to use memory from the corresponding NUMA nodes on the host. To do so, use the <code class="literal">&lt;memnode/&gt;</code> elements in the <code class="literal">&lt;numatune/&gt;</code> section:
								</p><pre class="programlisting language-xml">&lt;numatune&gt;
  &lt;memory mode="preferred" nodeset="1"/&gt;
  &lt;memnode cellid="0" mode="strict" nodeset="0"/&gt;
  &lt;memnode cellid="1" mode="strict" nodeset="1"/&gt;
&lt;/numatune&gt;</pre></li><li class="listitem"><p class="simpara">
									Ensure the CPU mode is set to <code class="literal">host-passthrough</code>, and that the CPU uses cache in <code class="literal">passthrough</code> mode:
								</p><pre class="programlisting language-xml">&lt;cpu mode="host-passthrough"&gt;
  &lt;topology sockets="2" cores="2" threads="2"/&gt;
  &lt;cache mode="passthrough"/&gt;</pre><p class="simpara">
									On an ARM 64 system, omit the <code class="literal">&lt;cache mode="passthrough"/&gt;</code> line.
								</p></li></ol></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Confirm that the resulting XML configuration of the VM includes a section similar to the following:
						</p><pre class="programlisting language-xml">[...]
  &lt;memoryBacking&gt;
    &lt;hugepages&gt;
      &lt;page size='1' unit='GiB'/&gt;
    &lt;/hugepages&gt;
  &lt;/memoryBacking&gt;
  &lt;vcpu placement='static'&gt;8&lt;/vcpu&gt;
  &lt;cputune&gt;
    &lt;vcpupin vcpu='0' cpuset='1'/&gt;
    &lt;vcpupin vcpu='1' cpuset='4'/&gt;
    &lt;vcpupin vcpu='2' cpuset='2'/&gt;
    &lt;vcpupin vcpu='3' cpuset='5'/&gt;
    &lt;vcpupin vcpu='4' cpuset='7'/&gt;
    &lt;vcpupin vcpu='5' cpuset='10'/&gt;
    &lt;vcpupin vcpu='6' cpuset='8'/&gt;
    &lt;vcpupin vcpu='7' cpuset='11'/&gt;
    &lt;emulatorpin cpuset='6,9'/&gt;
  &lt;/cputune&gt;
  &lt;numatune&gt;
    &lt;memory mode="preferred" nodeset="1"/&gt;
    &lt;memnode cellid="0" mode="strict" nodeset="0"/&gt;
    &lt;memnode cellid="1" mode="strict" nodeset="1"/&gt;
  &lt;/numatune&gt;
  &lt;cpu mode="host-passthrough"&gt;
    &lt;topology sockets="2" cores="2" threads="2"/&gt;
    &lt;cache mode="passthrough"/&gt;
    &lt;numa&gt;
      &lt;cell id="0" cpus="0-3" memory="2" unit="GiB"&gt;
        &lt;distances&gt;
          &lt;sibling id="0" value="10"/&gt;
          &lt;sibling id="1" value="21"/&gt;
        &lt;/distances&gt;
      &lt;/cell&gt;
      &lt;cell id="1" cpus="4-7" memory="2" unit="GiB"&gt;
        &lt;distances&gt;
          &lt;sibling id="0" value="21"/&gt;
          &lt;sibling id="1" value="10"/&gt;
        &lt;/distances&gt;
      &lt;/cell&gt;
    &lt;/numa&gt;
  &lt;/cpu&gt;
&lt;/domain&gt;</pre></li><li class="listitem">
							Optional: Test the performance of the VM by using <a class="link" href="#virtual-machine-performance-monitoring-tools_optimizing-virtual-machine-performance-in-rhel" title="18.8. Virtual machine performance monitoring tools">the applicable tools and utilities</a> to evaluate the impact of the VM’s optimization.
						</li></ol></div><div class="itemizedlist"><p class="title"><strong>Sample topology</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The following tables illustrate the connections between the vCPUs and the host CPUs they should be pinned to:
						</p><rh-table id="idm140237774253056"><table class="gt-8-cols lt-7-rows"><caption>Table 18.2. Host topology</caption><colgroup><col style="width: 7%; " class="col_1"><!--Empty--><col style="width: 7%; " class="col_2"><!--Empty--><col style="width: 7%; " class="col_3"><!--Empty--><col style="width: 7%; " class="col_4"><!--Empty--><col style="width: 7%; " class="col_5"><!--Empty--><col style="width: 7%; " class="col_6"><!--Empty--><col style="width: 7%; " class="col_7"><!--Empty--><col style="width: 7%; " class="col_8"><!--Empty--><col style="width: 7%; " class="col_9"><!--Empty--><col style="width: 7%; " class="col_10"><!--Empty--><col style="width: 7%; " class="col_11"><!--Empty--><col style="width: 7%; " class="col_12"><!--Empty--><col style="width: 7%; " class="col_13"><!--Empty--><col style="width: 7%; " class="col_14"><!--Empty--><col style="width: 7%; " class="col_15"><!--Empty--></colgroup><tbody><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>CPU threads</strong></span>
										</p>
										 </td><td align="left" valign="top"> <p>
											0
										</p>
										 </td><td align="left" valign="top"> <p>
											3
										</p>
										 </td><td align="left" valign="top"> <p>
											1
										</p>
										 </td><td align="left" valign="top"> <p>
											4
										</p>
										 </td><td align="left" valign="top"> <p>
											2
										</p>
										 </td><td align="left" valign="top"> <p>
											5
										</p>
										 </td><td align="left" valign="top"> <p>
											6
										</p>
										 </td><td align="left" valign="top"> <p>
											9
										</p>
										 </td><td align="left" valign="top"> <p>
											7
										</p>
										 </td><td align="left" valign="top"> <p>
											10
										</p>
										 </td><td align="left" valign="top"> <p>
											8
										</p>
										 </td><td align="left" valign="top"> <p>
											11
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>Cores</strong></span>
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											1
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											2
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											3
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											4
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											5
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>Sockets</strong></span>
										</p>
										 </td><td colspan="6" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="6" align="center" valign="top"> <p>
											1
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>NUMA nodes</strong></span>
										</p>
										 </td><td colspan="6" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="6" align="center" valign="top"> <p>
											1
										</p>
										 </td></tr></tbody></table></rh-table><rh-table id="idm140237774625344"><table class="gt-8-cols lt-7-rows"><caption>Table 18.3. VM topology</caption><colgroup><col style="width: 9%; " class="col_1"><!--Empty--><col style="width: 9%; " class="col_2"><!--Empty--><col style="width: 9%; " class="col_3"><!--Empty--><col style="width: 9%; " class="col_4"><!--Empty--><col style="width: 9%; " class="col_5"><!--Empty--><col style="width: 9%; " class="col_6"><!--Empty--><col style="width: 9%; " class="col_7"><!--Empty--><col style="width: 9%; " class="col_8"><!--Empty--><col style="width: 9%; " class="col_9"><!--Empty--><col style="width: 9%; " class="col_10"><!--Empty--><col style="width: 9%; " class="col_11"><!--Empty--></colgroup><tbody><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>vCPU threads</strong></span>
										</p>
										 </td><td align="left" valign="top"> <p>
											0
										</p>
										 </td><td align="left" valign="top"> <p>
											1
										</p>
										 </td><td align="left" valign="top"> <p>
											2
										</p>
										 </td><td align="left" valign="top"> <p>
											3
										</p>
										 </td><td align="left" valign="top"> <p>
											4
										</p>
										 </td><td align="left" valign="top"> <p>
											5
										</p>
										 </td><td align="left" valign="top"> <p>
											6
										</p>
										 </td><td align="left" valign="top"> <p>
											7
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>Cores</strong></span>
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											1
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											2
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											3
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>Sockets</strong></span>
										</p>
										 </td><td colspan="4" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="4" align="center" valign="top"> <p>
											1
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>NUMA nodes</strong></span>
										</p>
										 </td><td colspan="4" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="4" align="center" valign="top"> <p>
											1
										</p>
										 </td></tr></tbody></table></rh-table><rh-table id="idm140237770990640"><table class="gt-8-cols lt-7-rows"><caption>Table 18.4. Combined host and VM topology</caption><colgroup><col style="width: 7%; " class="col_1"><!--Empty--><col style="width: 7%; " class="col_2"><!--Empty--><col style="width: 7%; " class="col_3"><!--Empty--><col style="width: 7%; " class="col_4"><!--Empty--><col style="width: 7%; " class="col_5"><!--Empty--><col style="width: 7%; " class="col_6"><!--Empty--><col style="width: 7%; " class="col_7"><!--Empty--><col style="width: 7%; " class="col_8"><!--Empty--><col style="width: 7%; " class="col_9"><!--Empty--><col style="width: 7%; " class="col_10"><!--Empty--><col style="width: 7%; " class="col_11"><!--Empty--><col style="width: 7%; " class="col_12"><!--Empty--><col style="width: 7%; " class="col_13"><!--Empty--><col style="width: 7%; " class="col_14"><!--Empty--><col style="width: 7%; " class="col_15"><!--Empty--></colgroup><tbody><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>vCPU threads</strong></span>
										</p>
										 </td><td colspan="2" align="center" valign="top"> </td><td align="left" valign="top"> <p>
											0
										</p>
										 </td><td align="left" valign="top"> <p>
											1
										</p>
										 </td><td align="left" valign="top"> <p>
											2
										</p>
										 </td><td align="left" valign="top"> <p>
											3
										</p>
										 </td><td colspan="2" align="center" valign="top"> </td><td align="left" valign="top"> <p>
											4
										</p>
										 </td><td align="left" valign="top"> <p>
											5
										</p>
										 </td><td align="left" valign="top"> <p>
											6
										</p>
										 </td><td align="left" valign="top"> <p>
											7
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>Host CPU threads</strong></span>
										</p>
										 </td><td align="left" valign="top"> <p>
											0
										</p>
										 </td><td align="left" valign="top"> <p>
											3
										</p>
										 </td><td align="left" valign="top"> <p>
											1
										</p>
										 </td><td align="left" valign="top"> <p>
											4
										</p>
										 </td><td align="left" valign="top"> <p>
											2
										</p>
										 </td><td align="left" valign="top"> <p>
											5
										</p>
										 </td><td align="left" valign="top"> <p>
											6
										</p>
										 </td><td align="left" valign="top"> <p>
											9
										</p>
										 </td><td align="left" valign="top"> <p>
											7
										</p>
										 </td><td align="left" valign="top"> <p>
											10
										</p>
										 </td><td align="left" valign="top"> <p>
											8
										</p>
										 </td><td align="left" valign="top"> <p>
											11
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>Cores</strong></span>
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											1
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											2
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											3
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											4
										</p>
										 </td><td colspan="2" align="center" valign="top"> <p>
											5
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>Sockets</strong></span>
										</p>
										 </td><td colspan="6" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="6" align="center" valign="top"> <p>
											1
										</p>
										 </td></tr><tr><td colspan="3" align="center" valign="top"> <p>
											<span class="strong strong"><strong>NUMA nodes</strong></span>
										</p>
										 </td><td colspan="6" align="center" valign="top"> <p>
											0
										</p>
										 </td><td colspan="6" align="center" valign="top"> <p>
											1
										</p>
										 </td></tr></tbody></table></rh-table><p class="simpara">
							In this scenario, there are 2 NUMA nodes and 8 vCPUs. Therefore, 4 vCPU threads should be pinned to each node.
						</p><p class="simpara">
							In addition, Red Hat recommends leaving at least a single CPU thread available on each node for host system operations.
						</p><p class="simpara">
							Because in this example, each NUMA node houses 3 cores, each with 2 host CPU threads, the set for node 0 translates as follows:
						</p><pre class="programlisting language-xml">&lt;vcpupin vcpu='0' cpuset='1'/&gt;
&lt;vcpupin vcpu='1' cpuset='4'/&gt;
&lt;vcpupin vcpu='2' cpuset='2'/&gt;
&lt;vcpupin vcpu='3' cpuset='5'/&gt;</pre></li></ul></div></section><section class="section" id="proc_managing-ksm_optimizing-virtual-machine-cpu-performance"><div class="titlepage"><div><div><h4 class="title">18.6.5. Enabling and disabling kernel same-page merging</h4></div></div></div><p>
					Kernel Same-Page Merging (KSM) improves memory density by sharing identical memory pages between virtual machines (VMs). Therefore, enabling KSM might improve memory efficiency of your VM deployment.
				</p><p>
					However, enabling KSM also increases CPU utilization, and might negatively affect overall performance depending on the workload.
				</p><p>
					In RHEL 9 and later, KSM is disabled by default. To enable KSM and test its impact on your VM performance, see the following instructions.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Root access to your host system.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Enable KSM:
						</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
								Enabling KSM increases CPU utilization and affects overall CPU performance.
							</p></div></rh-alert><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Install the <code class="literal">ksmtuned</code> service:
								</p><pre class="screen"># <span class="strong strong"><strong>{PackageManagerCommand} install ksmtuned</strong></span></pre></li><li class="listitem"><p class="simpara">
									Start the service:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
											To enable KSM for a single session, use the <code class="literal">systemctl</code> utility to start the <code class="literal">ksm</code> and <code class="literal">ksmtuned</code> services.
										</p><pre class="screen"># <span class="strong strong"><strong>systemctl start ksm</strong></span>
# <span class="strong strong"><strong>systemctl start ksmtuned</strong></span></pre></li><li class="listitem"><p class="simpara">
											To enable KSM persistently, use the <code class="literal">systemctl</code> utility to enable the <code class="literal">ksm</code> and <code class="literal">ksmtuned</code> services.
										</p><pre class="screen"># <span class="strong strong"><strong>systemctl enable ksm</strong></span>
Created symlink /etc/systemd/system/multi-user.target.wants/ksm.service → /usr/lib/systemd/system/ksm.service

# <span class="strong strong"><strong>systemctl enable ksmtuned</strong></span>
Created symlink /etc/systemd/system/multi-user.target.wants/ksmtuned.service → /usr/lib/systemd/system/ksmtuned.service</pre></li></ul></div></li></ol></div></li><li class="listitem">
							Monitor the performance and resource consumption of VMs on your host to evaluate the benefits of activating KSM. Specifically, ensure that the additional CPU usage by KSM does not offset the memory improvements and does not cause additional performance issues. In latency-sensitive workloads, also pay attention to cross-NUMA page merges.
						</li><li class="listitem"><p class="simpara">
							Optional: If KSM has not improved your VM performance, disable it:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									To disable KSM for a single session, use the <code class="literal">systemctl</code> utility to stop <code class="literal">ksm</code> and <code class="literal">ksmtuned</code> services.
								</p><pre class="screen"># <span class="strong strong"><strong>systemctl stop ksm</strong></span>
# <span class="strong strong"><strong>systemctl stop ksmtuned</strong></span></pre></li><li class="listitem"><p class="simpara">
									To disable KSM persistently, use the <code class="literal">systemctl</code> utility to disable <code class="literal">ksm</code> and <code class="literal">ksmtuned</code> services.
								</p><pre class="screen"># <span class="strong strong"><strong>systemctl disable ksm</strong></span>
Removed /etc/systemd/system/multi-user.target.wants/ksm.service.
# <span class="strong strong"><strong>systemctl disable ksmtuned</strong></span>
Removed /etc/systemd/system/multi-user.target.wants/ksmtuned.service.</pre></li></ul></div></li></ol></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
						Memory pages shared between VMs before deactivating KSM will remain shared. To stop sharing, delete all the <code class="literal">PageKSM</code> pages in the system by using the following command:
					</p><pre class="screen"># <span class="strong strong"><strong>echo 2 &gt; /sys/kernel/mm/ksm/run</strong></span></pre><p>
						However, this command increases memory usage, and might cause performance problems on your host or your VMs.
					</p></div></rh-alert></section></section><section class="section" id="optimizing-virtual-machine-network-performance_optimizing-virtual-machine-performance-in-rhel"><div class="titlepage"><div><div><h3 class="title">18.7. Optimizing virtual machine network performance</h3></div></div></div><p>
				Due to the virtual nature of a VM’s network interface card (NIC), the VM loses a portion of its allocated host network bandwidth, which can reduce the overall workload efficiency of the VM. The following tips can minimize the negative impact of virtualization on the virtual NIC (vNIC) throughput.
			</p><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
					Use any of the following methods and observe if it has a beneficial effect on your VM network performance:
				</p></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">Enable the vhost_net module</span></dt><dd><p class="simpara">
							On the host, ensure the <code class="literal">vhost_net</code> kernel feature is enabled:
						</p><pre class="screen"># <span class="strong strong"><strong>lsmod | grep vhost</strong></span>
vhost_net              32768  1
vhost                  53248  1 vhost_net
tap                    24576  1 vhost_net
tun                    57344  6 vhost_net</pre><p class="simpara">
							If the output of this command is blank, enable the <code class="literal">vhost_net</code> kernel module:
						</p><pre class="screen"># <span class="strong strong"><strong>modprobe vhost_net</strong></span></pre></dd><dt><span class="term">Set up multi-queue virtio-net</span></dt><dd><p class="simpara">
							To set up the <span class="emphasis"><em>multi-queue virtio-net</em></span> feature for a VM, use the <code class="literal">virsh edit</code> command to edit to the XML configuration of the VM. In the XML, add the following to the <code class="literal">&lt;devices&gt;</code> section, and replace <code class="literal">N</code> with the number of vCPUs in the VM, up to 16:
						</p><pre class="screen">&lt;interface type='network'&gt;
      &lt;source network='default'/&gt;
      &lt;model type='virtio'/&gt;
      &lt;driver name='vhost' queues='N'/&gt;
&lt;/interface&gt;</pre><p class="simpara">
							If the VM is running, restart it for the changes to take effect.
						</p></dd><dt><span class="term">Batching network packets</span></dt><dd><p class="simpara">
							In Linux VM configurations with a long transmission path, batching packets before submitting them to the kernel may improve cache utilization. To set up packet batching, use the following command on the host, and replace <span class="emphasis"><em>tap0</em></span> with the name of the network interface that the VMs use:
						</p><pre class="screen"># <span class="strong strong"><strong>ethtool -C <span class="emphasis"><em>tap0</em></span> rx-frames 64</strong></span></pre></dd><dt><span class="term">SR-IOV</span></dt><dd>
							If your host NIC supports SR-IOV, use SR-IOV device assignment for your vNICs. For more information, see <a class="link" href="#managing-sr-iov-devices_managing-virtual-devices" title="14.7. Managing SR-IOV devices">Managing SR-IOV devices</a>.
						</dd></dl></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#understanding-virtual-networking-overview_configuring-virtual-machine-network-connections" title="17.1. Understanding virtual networking">Understanding virtual networking</a>
					</li></ul></div></section><section class="section" id="virtual-machine-performance-monitoring-tools_optimizing-virtual-machine-performance-in-rhel"><div class="titlepage"><div><div><h3 class="title">18.8. Virtual machine performance monitoring tools</h3></div></div></div><p>
				To identify what consumes the most VM resources and which aspect of VM performance needs optimization, performance diagnostic tools, both general and VM-specific, can be used.
			</p><div class="formalpara"><p class="title"><strong>Default OS performance monitoring tools</strong></p><p>
					For standard performance evaluation, you can use the utilities provided by default by your host and guest operating systems:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						On your RHEL 9 host, as root, use the <code class="literal">top</code> utility or the <span class="strong strong"><strong>system monitor</strong></span> application, and look for <code class="literal">qemu</code> and <code class="literal">virt</code> in the output. This shows how much host system resources your VMs are consuming.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								If the monitoring tool displays that any of the <code class="literal">qemu</code> or <code class="literal">virt</code> processes consume a large portion of the host CPU or memory capacity, use the <code class="literal">perf</code> utility to investigate. For details, see below.
							</li><li class="listitem">
								In addition, if a <code class="literal">vhost_net</code> thread process, named for example <span class="emphasis"><em>vhost_net-1234</em></span>, is displayed as consuming an excessive amount of host CPU capacity, consider using <a class="link" href="#optimizing-virtual-machine-network-performance_optimizing-virtual-machine-performance-in-rhel" title="18.7. Optimizing virtual machine network performance">virtual network optimization features</a>, such as <code class="literal">multi-queue virtio-net</code>.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						On the guest operating system, use performance utilities and applications available on the system to evaluate which processes consume the most system resources.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								On Linux systems, you can use the <code class="literal">top</code> utility.
							</li><li class="listitem">
								On Windows systems, you can use the <span class="strong strong"><strong>Task Manager</strong></span> application.
							</li></ul></div></li></ul></div><div class="formalpara"><p class="title"><strong>perf kvm</strong></p><p>
					You can use the <code class="literal">perf</code> utility to collect and analyze virtualization-specific statistics about the performance of your RHEL 9 host. To do so:
				</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On the host, install the <span class="emphasis"><em>perf</em></span> package:
					</p><pre class="screen"># <span class="strong strong"><strong>dnf install perf</strong></span></pre></li><li class="listitem"><p class="simpara">
						Use one of the <code class="literal">perf kvm stat</code> commands to display perf statistics for your virtualization host:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								For real-time monitoring of your hypervisor, use the <code class="literal">perf kvm stat live</code> command.
							</li><li class="listitem">
								To log the perf data of your hypervisor over a period of time, activate the logging by using the <code class="literal">perf kvm stat record</code> command. After the command is canceled or interrupted, the data is saved in the <code class="literal">perf.data.guest</code> file, which can be analyzed by using the <code class="literal">perf kvm stat report</code> command.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Analyze the <code class="literal">perf</code> output for types of <code class="literal">VM-EXIT</code> events and their distribution. For example, the <code class="literal">PAUSE_INSTRUCTION</code> events should be infrequent, but in the following output, the high occurrence of this event suggests that the host CPUs are not handling the running vCPUs well. In such a scenario, consider shutting down some of your active VMs, removing vCPUs from these VMs, or <a class="link" href="#optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel" title="18.6. Optimizing virtual machine CPU performance">tuning the performance of the vCPUs</a>.
					</p><pre class="screen"># <span class="strong strong"><strong>perf kvm stat report</strong></span>

Analyze events for all VMs, all VCPUs:


             VM-EXIT    Samples  Samples%     Time%    Min Time    Max Time         Avg time

  EXTERNAL_INTERRUPT     365634    31.59%    18.04%      0.42us  58780.59us    204.08us ( +-   0.99% )
           MSR_WRITE     293428    25.35%     0.13%      0.59us  17873.02us      1.80us ( +-   4.63% )
    PREEMPTION_TIMER     276162    23.86%     0.23%      0.51us  21396.03us      3.38us ( +-   5.19% )
   PAUSE_INSTRUCTION     189375    16.36%    11.75%      0.72us  29655.25us    256.77us ( +-   0.70% )
                 HLT      20440     1.77%    69.83%      0.62us  79319.41us  14134.56us ( +-   0.79% )
              VMCALL      12426     1.07%     0.03%      1.02us   5416.25us      8.77us ( +-   7.36% )
       EXCEPTION_NMI         27     0.00%     0.00%      0.69us      1.34us      0.98us ( +-   3.50% )
       EPT_MISCONFIG          5     0.00%     0.00%      5.15us     10.85us      7.88us ( +-  11.67% )

Total Samples:1157497, Total events handled time:413728274.66us.</pre><p class="simpara">
						Other event types that can signal problems in the output of <code class="literal">perf kvm stat</code> include:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">INSN_EMULATION</code> - suggests suboptimal <a class="link" href="#optimizing-virtual-machine-i-o-performance_optimizing-virtual-machine-performance-in-rhel" title="18.5. Optimizing virtual machine I/O performance">VM I/O configuration</a>.
							</li></ul></div></li></ol></div><p>
				For more information about using <code class="literal">perf</code> to monitor virtualization performance, see the <code class="literal">perf-kvm</code> man page on your system.
			</p><div class="formalpara"><p class="title"><strong>numastat</strong></p><p>
					To see the current NUMA configuration of your system, you can use the <code class="literal">numastat</code> utility, which is provided by installing the <span class="strong strong"><strong>numactl</strong></span> package.
				</p></div><p>
				The following shows a host with 4 running VMs, each obtaining memory from multiple NUMA nodes. This is not optimal for vCPU performance, and <a class="link" href="#configuring-numa-in-a-virtual-machine_optimizing-virtual-machine-cpu-performance" title="18.6.3. Configuring NUMA in a virtual machine">warrants adjusting</a>:
			</p><pre class="screen"># <span class="strong strong"><strong>numastat -c qemu-kvm</strong></span>

Per-node process memory usage (in MBs)
PID              Node 0 Node 1 Node 2 Node 3 Node 4 Node 5 Node 6 Node 7 Total
---------------  ------ ------ ------ ------ ------ ------ ------ ------ -----
51722 (qemu-kvm)     68     16    357   6936      2      3    147    598  8128
51747 (qemu-kvm)    245     11      5     18   5172   2532      1     92  8076
53736 (qemu-kvm)     62    432   1661    506   4851    136     22    445  8116
53773 (qemu-kvm)   1393      3      1      2     12      0      0   6702  8114
---------------  ------ ------ ------ ------ ------ ------ ------ ------ -----
Total              1769    463   2024   7462  10037   2672    169   7837 32434</pre><p>
				In contrast, the following shows memory being provided to each VM by a single node, which is significantly more efficient.
			</p><pre class="screen"># <span class="strong strong"><strong>numastat -c qemu-kvm</strong></span>

Per-node process memory usage (in MBs)
PID              Node 0 Node 1 Node 2 Node 3 Node 4 Node 5 Node 6 Node 7 Total
---------------  ------ ------ ------ ------ ------ ------ ------ ------ -----
51747 (qemu-kvm)      0      0      7      0   8072      0      1      0  8080
53736 (qemu-kvm)      0      0      7      0      0      0   8113      0  8120
53773 (qemu-kvm)      0      0      7      0      0      0      1   8110  8118
59065 (qemu-kvm)      0      0   8050      0      0      0      0      0  8051
---------------  ------ ------ ------ ------ ------ ------ ------ ------ -----
Total                 0      0   8072      0   8072      0   8114   8110 32368</pre></section><section class="section _additional-resources" id="related-information-optimizing-virtual-machine-performance-in-rhel"><div class="titlepage"><div><div><h3 class="title">18.9. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#optimizing-windows-virtual-machines-on-rhel_installing-and-managing-windows-virtual-machines-on-rhel" title="21.2. Optimizing Windows virtual machines">Optimizing Windows virtual machines</a>
					</li></ul></div></section></section><section class="chapter" id="securing-virtual-machines-in-rhel_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h2 class="title">Chapter 19. Securing virtual machines</h2></div></div></div><p class="_abstract _abstract">
			As an administrator of a RHEL 9 system with virtual machines (VMs), ensuring that your VMs are as secure as possible significantly lowers the risk of your guest and host OSs being infected by malicious software.
		</p><p>
			The following sections outline the <a class="link" href="#how-security-works-in-virtual-machines_securing-virtual-machines-in-rhel" title="19.1. How security works in virtual machines">mechanics of securing VMs</a> on a RHEL 9 host and provides <a class="link" href="#best-practices-for-securing-virtual-machines_securing-virtual-machines-in-rhel" title="19.2. Best practices for securing virtual machines">a list of methods</a> to increase the security of your VMs.
		</p><section class="section" id="how-security-works-in-virtual-machines_securing-virtual-machines-in-rhel"><div class="titlepage"><div><div><h3 class="title">19.1. How security works in virtual machines</h3></div></div></div><p class="_abstract _abstract">
				When using virtual machines (VMs), multiple operating systems can be housed within a single host machine. These systems are connected with the host through the hypervisor, and usually also through a virtual network. As a consequence, each VM can be used as a vector for attacking the host with malicious software, and the host can be used as a vector for attacking any of the VMs.
			</p><div class="figure" id="idm140237774190768"><p class="title"><strong>Figure 19.1. A potential malware attack vector on a virtualization host</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/b3cca47c27c373413843c7b5cca0f90c/virt-sec_successful-attack.png" alt="virt sec successful attack"></div></div></div><p>
				Because the hypervisor uses the host kernel to manage VMs, services running on the VM’s operating system are frequently used for injecting malicious code into the host system. However, you can protect your system against such security threats by using <a class="link" href="#best-practices-for-securing-virtual-machines_securing-virtual-machines-in-rhel" title="19.2. Best practices for securing virtual machines">a number of security features</a> on your host and your guest systems.
			</p><p>
				These features, such as SELinux or QEMU sandboxing, provide various measures that make it more difficult for malicious code to attack the hypervisor and transfer between your host and your VMs.
			</p><div class="figure" id="idm140237774184512"><p class="title"><strong>Figure 19.2. Prevented malware attacks on a virtualization host</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/a638209744e4c2c5c7ae8fe82818c6a5/virt-sec_prevented-attack.png" alt="virt sec prevented attack"></div></div></div><p>
				Many of the features that RHEL 9 provides for VM security are always active and do not have to be enabled or configured. For details, see <a class="link" href="#automatic-features-for-virtual-machine-security_securing-virtual-machines-in-rhel" title="19.3. Automatic features for virtual machine security">Automatic features for virtual machine security</a>.
			</p><p>
				In addition, you can adhere to a variety of best practices to minimize the vulnerability of your VMs and your hypervisor. For more information, see <a class="link" href="#best-practices-for-securing-virtual-machines_securing-virtual-machines-in-rhel" title="19.2. Best practices for securing virtual machines">Best practices for securing virtual machines</a>.
			</p></section><section class="section" id="best-practices-for-securing-virtual-machines_securing-virtual-machines-in-rhel"><div class="titlepage"><div><div><h3 class="title">19.2. Best practices for securing virtual machines</h3></div></div></div><p class="_abstract _abstract">
				Following the instructions below significantly decreases the risk of your virtual machines being infected with malicious code and used as attack vectors to infect your host system.
			</p><p>
				<span class="strong strong"><strong>On the guest side:</strong></span>
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Secure the virtual machine as if it was a physical machine. The specific methods available to enhance security depend on the guest OS.
					</p><p class="simpara">
						If your VM is running RHEL 9, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/security_hardening/">Securing Red Hat Enterprise Linux 9</a> for detailed instructions on improving the security of your guest system.
					</p></li></ul></div><p>
				<span class="strong strong"><strong>On the host side:</strong></span>
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						When managing VMs remotely, use cryptographic utilities such as <span class="strong strong"><strong>SSH</strong></span> and network protocols such as <span class="strong strong"><strong>SSL</strong></span> for connecting to the VMs.
					</li><li class="listitem"><p class="simpara">
						Ensure SELinux is in Enforcing mode:
					</p><pre class="screen"># <span class="strong strong"><strong>getenforce</strong></span>
Enforcing</pre><p class="simpara">
						If SELinux is disabled or in <span class="emphasis"><em>Permissive</em></span> mode, see the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_selinux/changing-selinux-states-and-modes_using-selinux#changing-to-enforcing-mode_changing-selinux-states-and-modes">Using SELinux</a> document for instructions on activating Enforcing mode.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							SELinux Enforcing mode also enables the sVirt RHEL 9 feature. This is a set of specialized SELinux booleans for virtualization, which can be <a class="link" href="#virtualization-booleans-in-rhel_securing-virtual-machines-in-rhel" title="19.6. SELinux booleans for virtualization">manually adjusted</a> for fine-grained VM security management.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Use VMs with <span class="emphasis"><em>SecureBoot</em></span>:
					</p><p class="simpara">
						SecureBoot is a feature that ensures that your VM is running a cryptographically signed OS. This prevents VMs whose OS has been altered by a malware attack from booting.
					</p><p class="simpara">
						SecureBoot can only be applied when installing a Linux VM that uses OVMF firmware on an AMD64 or Intel 64 host. For instructions, see <a class="link" href="#creating-a-secureboot-virtual-machine_securing-virtual-machines-in-rhel" title="19.4. Creating a SecureBoot virtual machine">Creating a SecureBoot virtual machine</a>.
					</p></li><li class="listitem"><p class="simpara">
						Do not use <code class="literal">qemu-*</code> commands, such as <code class="literal">qemu-kvm</code>.
					</p><p class="simpara">
						QEMU is an essential component of the virtualization architecture in RHEL 9, but it is difficult to manage manually, and improper QEMU configurations may cause security vulnerabilities. Therefore, using most <code class="literal">qemu-*</code> commands is not supported by Red Hat. Instead, use <span class="emphasis"><em>libvirt</em></span> utilities, such as <code class="literal">virsh</code>, <code class="literal">virt-install</code>, and <code class="literal">virt-xml</code>, as these orchestrate QEMU according to the best practices.
					</p><p class="simpara">
						Note, however, that the <code class="literal">qemu-img</code> utility is supported for <a class="link" href="#managing-virtual-disk-images-by-using-the-cli_managing-storage-for-virtual-machines" title="15.6. Managing virtual disk images by using the CLI">management of virtual disk images</a>.
					</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#virtualization-booleans-in-rhel_securing-virtual-machines-in-rhel" title="19.6. SELinux booleans for virtualization">SELinux booleans for virtualization in RHEL</a>
					</li></ul></div></section><section class="section" id="automatic-features-for-virtual-machine-security_securing-virtual-machines-in-rhel"><div class="titlepage"><div><div><h3 class="title">19.3. Automatic features for virtual machine security</h3></div></div></div><p class="_abstract _abstract">
				In addition to manual means of improving the security of your virtual machines listed in <a class="link" href="#best-practices-for-securing-virtual-machines_securing-virtual-machines-in-rhel" title="19.2. Best practices for securing virtual machines">Best practices for securing virtual machines</a>, a number of security features are provided by the <span class="strong strong"><strong>libvirt</strong></span> software suite and are automatically enabled when using virtualization in RHEL 9. These include:
			</p><div class="variablelist" id="system-and-session-connections_securing-virtual-machines-in-rhel"><dl class="variablelist"><dt><span class="term">System and session connections</span></dt><dd><p class="simpara">
							To access all the available utilities for virtual machine management in RHEL 9, you need to use the <span class="emphasis"><em>system connection</em></span> of libvirt (<code class="literal">qemu:///system</code>). To do so, you must have root privileges on the system or be a part of the <span class="emphasis"><em>libvirt</em></span> user group.
						</p><p class="simpara">
							Non-root users that are not in the <span class="emphasis"><em>libvirt</em></span> group can only access a <span class="emphasis"><em>session connection</em></span> of libvirt (<code class="literal">qemu:///session</code>), which has to respect the access rights of the local user when accessing resources. For example, using the session connection, you cannot detect or access VMs created in the system connection or by other users. Also, available VM networking configuration options are significantly limited.
						</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								The RHEL 9 documentation assumes you have system connection privileges.
							</p></div></rh-alert></dd><dt><span class="term">Virtual machine separation</span></dt><dd>
							Individual VMs run as isolated processes on the host, and rely on security enforced by the host kernel. Therefore, a VM cannot read or access the memory or storage of other VMs on the same host.
						</dd><dt><span class="term">QEMU sandboxing</span></dt><dd>
							A feature that prevents QEMU code from executing system calls that can compromise the security of the host.
						</dd><dt><span class="term">Kernel Address Space Randomization (KASLR)</span></dt><dd>
							Enables randomizing the physical and virtual addresses at which the kernel image is decompressed. Thus, KASLR prevents guest security exploits based on the location of kernel objects.
						</dd></dl></div></section><section class="section" id="creating-a-secureboot-virtual-machine_securing-virtual-machines-in-rhel"><div class="titlepage"><div><div><h3 class="title">19.4. Creating a SecureBoot virtual machine</h3></div></div></div><p class="_abstract _abstract">
				You can create a Linux virtual machine (VM) that uses the <span class="emphasis"><em>SecureBoot</em></span> feature, which ensures that your VM is running a cryptographically signed OS. This can be useful if the guest OS of a VM has been altered by malware. In such a scenario, SecureBoot prevents the VM from booting, which stops the potential spread of the malware to your host machine.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The VM is the Q35 machine type.
					</li><li class="listitem">
						Your host system uses the AMD64 or Intel 64 architecture.
					</li><li class="listitem"><p class="simpara">
						The <code class="literal">edk2-OVMF</code> packages is installed:
					</p><pre class="screen"># <span class="strong strong"><strong>dnf install edk2-ovmf</strong></span></pre></li><li class="listitem"><p class="simpara">
						An operating system (OS) installation source is available locally or on a network. This can be one of the following formats:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								An ISO image of an installation medium
							</li><li class="listitem"><p class="simpara">
								A disk image of an existing VM installation
							</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
									Installing from a host CD-ROM or DVD-ROM device is not possible in RHEL 9. If you select a CD-ROM or DVD-ROM as the installation source when using any VM installation method available in RHEL 9, the installation will fail. For more information, see the <a class="link" href="https://access.redhat.com/solutions/1185913">Red Hat Knowledgebase</a>.
								</p></div></rh-alert></li></ul></div></li><li class="listitem">
						Optional: A Kickstart file can be provided for faster and easier configuration of the installation.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Use the <code class="literal">virt-install</code> command to create a VM as detailed in <a class="link" href="#creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines" title="3.1. Creating virtual machines by using the command-line interface">Creating virtual machines by using the command-line interface</a>. For the <code class="literal">--boot</code> option, use the <code class="literal">uefi,nvram_template=/usr/share/OVMF/OVMF_VARS.secboot.fd</code> value. This uses the <code class="literal">OVMF_VARS.secboot.fd</code> and <code class="literal">OVMF_CODE.secboot.fd</code> files as templates for the VM’s non-volatile RAM (NVRAM) settings, which enables the SecureBoot feature.
					</p><p class="simpara">
						For example:
					</p><pre class="screen"># <span class="strong strong"><strong>virt-install --name rhel8sb --memory 4096 --vcpus 4 --os-variant rhel9.0 --boot uefi,nvram_template=/usr/share/OVMF/OVMF_VARS.secboot.fd --disk boot_order=2,size=10 --disk boot_order=1,device=cdrom,bus=scsi,path=/images/RHEL-9.0-installation.iso</strong></span></pre></li><li class="listitem">
						Follow the OS installation procedure according to the instructions on the screen.
					</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						After the guest OS is installed, access the VM’s command line by opening the terminal in <a class="link" href="#proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines" title="5.2. Opening a virtual machine graphical console by using Virt Viewer">the graphical guest console</a> or connecting to the guest OS <a class="link" href="#proc_connecting-to-a-virtual-machine-using-ssh_assembly_connecting-to-virtual-machines" title="5.3. Connecting to a virtual machine by using SSH">using SSH</a>.
					</li><li class="listitem"><p class="simpara">
						To confirm that SecureBoot has been enabled on the VM, use the <code class="literal">mokutil --sb-state</code> command:
					</p><pre class="screen"># <span class="strong strong"><strong>mokutil --sb-state</strong></span>
SecureBoot enabled</pre></li></ol></div><div class="_additional-resources _additional-resources"><p class="title"><strong>Additional resources</strong></p><p>
					<a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/interactively_installing_rhel_from_installation_media/index#manually-installing-red-hat-enterprise-linux">Manually installing Red Hat Enterprise Linux</a>
				</p></div></section><section class="section" id="proc_limiting-what-actions-are-available-to-virtual-machine-users_securing-virtual-machines-in-rhel"><div class="titlepage"><div><div><h3 class="title">19.5. Limiting what actions are available to virtual machine users</h3></div></div></div><p class="_abstract _abstract">
				In some cases, actions that users of virtual machines (VMs) hosted on RHEL 9 can perform by default may pose a security risk. If that is the case, you can limit the actions available to VM users by configuring the <code class="literal">libvirt</code> daemons to use the <code class="literal">polkit</code> policy toolkit on the host machine.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: Ensure your system’s <code class="literal">polkit</code> control policies related to <code class="literal">libvirt</code> are set up according to your preferences.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Find all libvirt-related files in the <code class="literal">/usr/share/polkit-1/actions/</code> and <code class="literal">/usr/share/polkit-1/rules.d/</code> directories.
							</p><pre class="screen"># <span class="strong strong"><strong>ls /usr/share/polkit-1/actions | grep libvirt</strong></span>
# <span class="strong strong"><strong>ls /usr/share/polkit-1/rules.d | grep libvirt</strong></span></pre></li><li class="listitem"><p class="simpara">
								Open the files and review the rule settings.
							</p><p class="simpara">
								For information about reading the syntax of <code class="literal">polkit</code> control policies, use <code class="literal">man polkit</code>.
							</p></li><li class="listitem"><p class="simpara">
								Modify the <code class="literal">libvirt</code> control policies. To do so:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Create a new <code class="literal">.rules</code> file in the <code class="literal">/etc/polkit-1/rules.d/</code> directory.
									</li><li class="listitem"><p class="simpara">
										Add your custom policies to this file, and save it.
									</p><p class="simpara">
										For further information and examples of <code class="literal">libvirt</code> control policies, see <a class="link" href="https://libvirt.org/aclpolkit.html#writing-access-control-policies">the <code class="literal">libvirt</code> upstream documentation</a>.
									</p></li></ol></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Configure your VMs to use access policies determined by <code class="literal">polkit</code>.
					</p><p class="simpara">
						To do so, find all configuration files for virtualization drivers in the <code class="literal">/etc/libvirt/</code> directory, and uncomment the <code class="literal">access_drivers = [ "polkit" ]</code> line in them.
					</p><pre class="screen"># <span class="strong strong"><strong>find /etc/libvirt/ -name virt*d.conf -exec sed -i 's/#access_drivers = \[ "polkit" \]/access_drivers = \[ "polkit" \]/g' {} +</strong></span></pre></li><li class="listitem"><p class="simpara">
						For each file that you modified in the previous step, restart the corresponding service.
					</p><p class="simpara">
						For example, if you have modified <code class="literal">/etc/libvirt/virtqemud.conf</code>, restart the <code class="literal">virtqemud</code> service.
					</p><pre class="screen"># <span class="strong strong"><strong>systemctl try-restart virtqemud</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						As a user whose VM actions you intended to limit, perform one of the restricted actions.
					</p><p class="simpara">
						For example, if unprivileged users are restricted from viewing VMs created in the system session:
					</p><pre class="screen">$ <span class="strong strong"><strong>virsh -c qemu:///system list --all</strong></span>
Id   Name           State
-------------------------------</pre><p class="simpara">
						If this command does not list any VMs even though one or more VMs exist on your system, <code class="literal">polkit</code> successfully restricts the action for unprivileged users.
					</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Currently, configuring <code class="literal">libvirt</code> to use <code class="literal">polkit</code> makes it impossible to connect to VMs <a class="link" href="#managing-virtual-machines-in-the-web-console_configuring-and-managing-virtualization" title="Chapter 8. Managing virtual machines in the web console">using the RHEL 9 web console</a>, due to an incompatibility with the <code class="literal">libvirt-dbus</code> service.
					</p><p class="simpara">
						If you require fine-grained access control of VMs in the web console, create a custom D-Bus policy. For instructions, see <a class="link" href="https://access.redhat.com/solutions/6106401">How to configure fine-grained control of Virtual Machines in Cockpit</a> in the Red Hat Knowledgebase.
					</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The <code class="literal">man polkit</code> command
					</li><li class="listitem">
						The <code class="literal">libvirt</code> upstream information about <a class="link" href="https://libvirt.org/aclpolkit.html#writing-access-control-policies">polkit access control policies</a>
					</li></ul></div><p>
				include::module/virtualization/proc_
			</p></section><section class="section" id="virtualization-booleans-in-rhel_securing-virtual-machines-in-rhel"><div class="titlepage"><div><div><h3 class="title">19.6. SELinux booleans for virtualization</h3></div></div></div><p>
				RHEL 9 provides the <code class="literal">sVirt</code> feature, which is a set of specialized SELinux booleans that are automatically enabled on a host with SELinux in Enforcing mode.
			</p><p>
				For fine-grained configuration of virtual machines security on a RHEL 9 system, you can configure SELinux booleans on the host to ensure the hypervisor acts in a specific way.
			</p><p>
				To list all virtualization-related booleans and their statuses, use the <code class="literal">getsebool -a | grep virt</code> command:
			</p><pre class="screen">$ <span class="strong strong"><strong>getsebool -a | grep virt</strong></span>
[...]
virt_sandbox_use_netlink --&gt; off
virt_sandbox_use_sys_admin --&gt; off
virt_transition_userdomain --&gt; off
virt_use_comm --&gt; off
virt_use_execmem --&gt; off
virt_use_fusefs --&gt; off
[...]</pre><p>
				To enable a specific boolean, use the <code class="literal">setsebool -P <span class="emphasis"><em>boolean_name</em></span> on</code> command as root. To disable a boolean, use <code class="literal">setsebool -P <span class="emphasis"><em>boolean_name</em></span> off</code>.
			</p><p>
				The following table lists virtualization-related booleans available in RHEL 9 and what they do when enabled:
			</p><rh-table id="idm140237773480224"><table class="lt-4-cols lt-7-rows"><caption>Table 19.1. SELinux virtualization booleans</caption><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140237773475376" scope="col">SELinux Boolean</th><th align="left" valign="top" id="idm140237773474288" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140237773475376"> <p>
								staff_use_svirt
							</p>
							 </td><td align="left" valign="top" headers="idm140237773474288"> <p>
								Enables non-root users to create and transition VMs to sVirt.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237773475376"> <p>
								unprivuser_use_svirt
							</p>
							 </td><td align="left" valign="top" headers="idm140237773474288"> <p>
								Enables unprivileged users to create and transition VMs to sVirt.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237773475376"> <p>
								virt_sandbox_use_audit
							</p>
							 </td><td align="left" valign="top" headers="idm140237773474288"> <p>
								Enables sandbox containers to send audit messages.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237773475376"> <p>
								virt_sandbox_use_netlink
							</p>
							 </td><td align="left" valign="top" headers="idm140237773474288"> <p>
								Enables sandbox containers to use netlink system calls.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237773475376"> <p>
								virt_sandbox_use_sys_admin
							</p>
							 </td><td align="left" valign="top" headers="idm140237773474288"> <p>
								Enables sandbox containers to use sys_admin system calls, such as mount.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237773475376"> <p>
								virt_transition_userdomain
							</p>
							 </td><td align="left" valign="top" headers="idm140237773474288"> <p>
								Enables virtual processes to run as user domains.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237773475376"> <p>
								virt_use_comm
							</p>
							 </td><td align="left" valign="top" headers="idm140237773474288"> <p>
								Enables virt to use serial/parallel communication ports.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237773475376"> <p>
								virt_use_execmem
							</p>
							 </td><td align="left" valign="top" headers="idm140237773474288"> <p>
								Enables confined virtual guests to use executable memory and executable stack.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237773475376"> <p>
								virt_use_fusefs
							</p>
							 </td><td align="left" valign="top" headers="idm140237773474288"> <p>
								Enables virt to read FUSE mounted files.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237773475376"> <p>
								virt_use_nfs
							</p>
							 </td><td align="left" valign="top" headers="idm140237773474288"> <p>
								Enables virt to manage NFS mounted files.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237773475376"> <p>
								virt_use_rawip
							</p>
							 </td><td align="left" valign="top" headers="idm140237773474288"> <p>
								Enables virt to interact with rawip sockets.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237773475376"> <p>
								virt_use_samba
							</p>
							 </td><td align="left" valign="top" headers="idm140237773474288"> <p>
								Enables virt to manage CIFS mounted files.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237773475376"> <p>
								virt_use_sanlock
							</p>
							 </td><td align="left" valign="top" headers="idm140237773474288"> <p>
								Enables confined virtual guests to interact with the sanlock.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237773475376"> <p>
								virt_use_usb
							</p>
							 </td><td align="left" valign="top" headers="idm140237773474288"> <p>
								Enables virt to use USB devices.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237773475376"> <p>
								virt_use_xserver
							</p>
							 </td><td align="left" valign="top" headers="idm140237773474288"> <p>
								Enables virtual machine to interact with the X Window System.
							</p>
							 </td></tr></tbody></table></rh-table></section><section class="section" id="setting-up-secure-execution-on-ibm-z_securing-virtual-machines-in-rhel"><div class="titlepage"><div><div><h3 class="title">19.7. Setting up IBM Secure Execution on IBM Z</h3></div></div></div><p class="_abstract _abstract">
				When using IBM Z hardware to run a RHEL 9 host, you can improve the security of your virtual machines (VMs) by configuring IBM Secure Execution for the VMs.
			</p><p>
				IBM Secure Execution, also known as Protected Virtualization, prevents the host system from accessing a VM’s state and memory contents. As a result, even if the host is compromised, it cannot be used as a vector for attacking the guest operating system. In addition, Secure Execution can be used to prevent untrusted hosts from obtaining sensitive information from the VM.
			</p><p>
				The following procedure describes how to convert an existing VM on an IBM Z host into a secured VM.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The system hardware is one of the following:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								IBM z15 or later
							</li><li class="listitem">
								IBM LinuxONE III or later
							</li></ul></div></li><li class="listitem"><p class="simpara">
						The Secure Execution feature is enabled for your system. To verify, use:
					</p><pre class="screen"># <span class="strong strong"><strong>grep facilities /proc/cpuinfo | grep 158</strong></span></pre><p class="simpara">
						If this command displays any output, your CPU is compatible with Secure Execution.
					</p></li><li class="listitem"><p class="simpara">
						The kernel includes support for Secure Execution. To confirm, use:
					</p><pre class="screen"># <span class="strong strong"><strong>ls /sys/firmware | grep uv</strong></span></pre><p class="simpara">
						If the command generates any output, your kernel supports Secure Execution.
					</p></li><li class="listitem"><p class="simpara">
						The host CPU model contains the <code class="literal">unpack</code> facility. To confirm, use:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh domcapabilities | grep unpack</strong></span>
&lt;feature policy='require' name='unpack'/&gt;</pre><p class="simpara">
						If the command generates the above output, your CPU host model is compatible with Secure Execution.
					</p></li><li class="listitem"><p class="simpara">
						The CPU mode of the VM is set to <code class="literal">host-model</code>. To confirm this, use the following and replace <code class="literal">vm-name</code> with the name of your VM.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh dumpxml <span class="emphasis"><em>vm-name</em></span> | grep "&lt;cpu mode='host-model'/&gt;"</strong></span></pre><p class="simpara">
						If the command generates any output, the VM’s CPU mode is set correctly.
					</p></li><li class="listitem"><p class="simpara">
						The <span class="emphasis"><em>genprotimg</em></span> package must be installed on the host.
					</p><pre class="screen"># <span class="strong strong"><strong>dnf install genprotimg</strong></span></pre></li><li class="listitem">
						You have obtained and verified the IBM Z host key document. For instructions to do so, see <a class="link" href="https://www.ibm.com/support/knowledgecenter/linuxonibm/com.ibm.linux.z.lxse/lxse_t_verify.html#lxse_verify">Verifying the host key document</a> in IBM documentation.
					</li></ul></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
					Do the following steps <span class="strong strong"><strong>on your host</strong></span>:
				</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Add the <code class="literal">prot_virt=1</code> kernel parameter to the boot configuration of the host.
					</p><pre class="screen"># <span class="strong strong"><strong>grubby --update-kernel=ALL --args="prot_virt=1"</strong></span></pre></li><li class="listitem"><p class="simpara">
						Update the boot menu:
					</p><p class="simpara">
						# <span class="strong strong"><strong>zipl</strong></span>
					</p></li><li class="listitem">
						Use <code class="literal">virsh edit</code> to modify the XML configuration of the VM you want to secure.
					</li><li class="listitem"><p class="simpara">
						Add <code class="literal">&lt;launchSecurity type="s390-pv"/&gt;</code> to the under the <code class="literal">&lt;/devices&gt;</code> line. For example:
					</p><pre class="programlisting language-xml">[...]
    &lt;/memballoon&gt;
  &lt;/devices&gt;
  &lt;launchSecurity type="s390-pv"/&gt;
&lt;/domain&gt;</pre></li><li class="listitem">
						If the <code class="literal">&lt;devices&gt;</code> section of the configuration includes a <code class="literal">virtio-rng</code> device (<code class="literal">&lt;rng model="virtio"&gt;</code>), remove all lines of the <code class="literal">&lt;rng&gt; &lt;/rng&gt;</code> block.
					</li><li class="listitem"><p class="simpara">
						Optional: If the VM that you want to secure is using 32 GiB of RAM or more, add the <code class="literal">&lt;async-teardown enabled='yes'/&gt;</code> line to the <code class="literal">&lt;features&gt;&lt;/features&gt;</code> section in its XML configuration.
					</p><p class="simpara">
						This improves the performance of rebooting or stopping such Secure Execution guests.
					</p></li></ol></div><p>
				Do the following steps <span class="strong strong"><strong>in the guest operating system</strong></span> of the VM you want to secure.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a parameter file. For example:
					</p><pre class="screen"># <span class="strong strong"><strong>touch ~/secure-parameters</strong></span></pre></li><li class="listitem"><p class="simpara">
						In the <code class="literal">/boot/loader/entries</code> directory, identify the boot loader entry with the latest version:
					</p><pre class="screen"># <span class="strong strong"><strong>ls /boot/loader/entries -l</strong></span>
[...]
-rw-r--r--. 1 root root  281 Oct  9 15:51 3ab27a195c2849429927b00679db15c1-4.18.0-240.el8.s390x.conf</pre></li><li class="listitem"><p class="simpara">
						Retrieve the kernel options line of the boot loader entry:
					</p><pre class="screen"># <span class="strong strong"><strong>cat /boot/loader/entries/3ab27a195c2849429927b00679db15c1-4.18.0-240.el8.s390x.conf | grep options</strong></span>
options root=/dev/mapper/rhel-root
rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap</pre></li><li class="listitem"><p class="simpara">
						Add the content of the options line and <code class="literal">swiotlb=262144</code> to the created parameters file.
					</p><pre class="screen"># <span class="strong strong"><strong>echo "root=/dev/mapper/rhel-root rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap swiotlb=262144" &gt; ~/secure-parameters</strong></span></pre></li><li class="listitem"><p class="simpara">
						Generate an IBM Secure Execution image.
					</p><p class="simpara">
						For example, the following creates a <code class="literal">/boot/secure-image</code> secured image based on the <code class="literal">/boot/vmlinuz-4.18.0-240.el8.s390x</code> image, using the <code class="literal">secure-parameters</code> file, the <code class="literal">/boot/initramfs-4.18.0-240.el8.s390x.img</code> initial RAM disk file, and the <code class="literal">HKD-8651-000201C048.crt</code> host key document.
					</p><pre class="screen"># <span class="strong strong"><strong>genprotimg -i /boot/vmlinuz-4.18.0-240.el8.s390x -r /boot/initramfs-4.18.0-240.el8.s390x.img -p ~/secure-parameters -k HKD-8651-00020089A8.crt -o /boot/secure-image</strong></span></pre><p class="simpara">
						By using the <code class="literal">genprotimg</code> utility creates the secure image, which contains the kernel parameters, initial RAM disk, and boot image.
					</p></li><li class="listitem"><p class="simpara">
						Update the VM’s boot menu to boot from the secure image. In addition, remove the lines starting with <code class="literal">initrd</code> and <code class="literal">options</code>, as they are not needed.
					</p><p class="simpara">
						For example, in a RHEL 8.3 VM, the boot menu can be edited in the <code class="literal">/boot/loader/entries/</code> directory:
					</p><pre class="screen"># <span class="strong strong"><strong>cat /boot/loader/entries/3ab27a195c2849429927b00679db15c1-4.18.0-240.el8.s390x.conf</strong></span>
title Red Hat Enterprise Linux 8.3
version 4.18.0-240.el8.s390x
linux /boot/secure-image
[...]</pre></li><li class="listitem"><p class="simpara">
						Create the bootable disk image:
					</p><pre class="screen"># <span class="strong strong"><strong>zipl -V</strong></span></pre></li><li class="listitem"><p class="simpara">
						Securely remove the original unprotected files. For example:
					</p><pre class="screen"># <span class="strong strong"><strong>shred /boot/vmlinuz-4.18.0-240.el8.s390x</strong></span>
# <span class="strong strong"><strong>shred /boot/initramfs-4.18.0-240.el8.s390x.img</strong></span>
# <span class="strong strong"><strong>shred secure-parameters</strong></span></pre><p class="simpara">
						The original boot image, the initial RAM image, and the kernel parameter file are unprotected, and if they are not removed, VMs with Secure Execution enabled can still be vulnerable to hacking attempts or sensitive data mining.
					</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						On the host, use the <code class="literal">virsh dumpxml</code> utility to confirm the XML configuration of the secured VM. The configuration must include the <code class="literal">&lt;launchSecurity type="s390-pv"/&gt;</code> element, and no &lt;rng model="virtio"&gt; lines.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh dumpxml <span class="emphasis"><em>vm-name</em></span></strong></span>
[...]
  &lt;cpu mode='host-model'/&gt;
  &lt;devices&gt;
    &lt;disk type='file' device='disk'&gt;
      &lt;driver name='qemu' type='qcow2' cache='none' io='native'&gt;
      &lt;source file='/var/lib/libvirt/images/secure-guest.qcow2'/&gt;
      &lt;target dev='vda' bus='virtio'/&gt;
    &lt;/disk&gt;
    &lt;interface type='network'&gt;
      &lt;source network='default'/&gt;
      &lt;model type='virtio'/&gt;
    &lt;/interface&gt;
    &lt;console type='pty'/&gt;
    &lt;memballoon model='none'/&gt;
  &lt;/devices&gt;
  <span class="strong strong"><strong>&lt;launchSecurity type="s390-pv"/&gt;</strong></span>
&lt;/domain&gt;</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://www.ibm.com/docs/en/linux-on-systems?topic=tasks-start-virtual-server">IBM documentation on starting a secure virtual server</a>
					</li><li class="listitem">
						<a class="link" href="https://www.ibm.com/support/knowledgecenter/linuxonibm/com.ibm.linux.z.lxse/lxse_r_cmd.html#cmd_genprotimg">IBM documentation on <code class="literal">genprotimg</code></a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_monitoring_and_updating_the_kernel/configuring-kernel-command-line-parameters_managing-monitoring-and-updating-the-kernel">Configuring kernel command-line parameters</a>
					</li></ul></div></section><section class="section" id="attaching-cryptographic-coprocessors-to-virtual-machines-on-ibm-z_securing-virtual-machines-in-rhel"><div class="titlepage"><div><div><h3 class="title">19.8. Attaching cryptographic coprocessors to virtual machines on IBM Z</h3></div></div></div><p class="_abstract _abstract">
				To use hardware encryption in your virtual machine (VM) on an IBM Z host, create mediated devices from a cryptographic coprocessor device and assign them to the intended VMs. For detailed instructions, see below.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Your host is running on IBM Z hardware.
					</li><li class="listitem"><p class="simpara">
						The cryptographic coprocessor is compatible with device assignment. To confirm this, ensure that the <code class="literal">type</code> of your coprocessor is listed as <code class="literal">CEX4</code> or later.
					</p><pre class="screen"># <span class="strong strong"><strong>lszcrypt -V</strong></span>

CARD.DOMAIN TYPE  MODE        STATUS  REQUESTS  PENDING HWTYPE QDEPTH FUNCTIONS  DRIVER
--------------------------------------------------------------------------------------------
05         <span class="strong strong"><strong>CEX5C</strong></span> CCA-Coproc  online         1        0     11     08 S--D--N--  cex4card
05.0004    <span class="strong strong"><strong>CEX5C</strong></span> CCA-Coproc  online         1        0     11     08 S--D--N--  cex4queue
05.00ab    <span class="strong strong"><strong>CEX5C</strong></span> CCA-Coproc  online         1        0     11     08 S--D--N--  cex4queue</pre></li><li class="listitem"><p class="simpara">
						The <code class="literal">vfio_ap</code> kernel module is loaded. To verify, use:
					</p><pre class="screen"># <span class="strong strong"><strong>lsmod | grep vfio_ap</strong></span>
vfio_ap         24576  0
[...]</pre><p class="simpara">
						To load the module, use:
					</p><pre class="screen"># <span class="strong strong"><strong>modprobe vfio_ap</strong></span></pre></li><li class="listitem"><p class="simpara">
						The <code class="literal">s390utils</code> version supports <code class="literal">ap</code> handling:
					</p><pre class="screen"># <span class="strong strong"><strong>lszdev --list-types</strong></span>
...
ap           Cryptographic Adjunct Processor (AP) device
...</pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Obtain the decimal values for the devices that you want to assign to the VM. For example, for the devices <code class="literal">05.0004</code> and <code class="literal">05.00ab</code>:
					</p><pre class="screen"># <span class="strong strong"><strong>echo "obase=10; ibase=16; 04" | bc</strong></span>
4
# <span class="strong strong"><strong>echo "obase=10; ibase=16; AB" | bc</strong></span>
171</pre></li><li class="listitem"><p class="simpara">
						On the host, reassign the devices to the <code class="literal">vfio-ap</code> drivers:
					</p><pre class="screen"># <span class="strong strong"><strong>chzdev -t ap apmask=-5 aqmask=-4,-171</strong></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							To assign the devices persistently, use the <code class="literal">-p</code> flag.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Verify that the cryptographic devices have been reassigned correctly.
					</p><pre class="screen"># <span class="strong strong"><strong>lszcrypt -V</strong></span>

CARD.DOMAIN TYPE  MODE        STATUS  REQUESTS  PENDING HWTYPE QDEPTH FUNCTIONS  DRIVER
--------------------------------------------------------------------------------------------
05          CEX5C CCA-Coproc  -              1        0     11     08 S--D--N--  cex4card
05.0004     CEX5C CCA-Coproc  -              1        0     11     08 S--D--N--  <span class="strong strong"><strong>vfio_ap</strong></span>
05.00ab     CEX5C CCA-Coproc  -              1        0     11     08 S--D--N--  <span class="strong strong"><strong>vfio_ap</strong></span></pre><p class="simpara">
						If the DRIVER values of the domain queues changed to <code class="literal">vfio_ap</code>, the reassignment succeeded.
					</p></li><li class="listitem"><p class="simpara">
						Create an XML snippet that defines a new mediated device.
					</p><p class="simpara">
						The following example shows defining a persistent mediated device and assigning queues to it. Specifically, the <code class="literal">vfio_ap.xml</code> XML snippet in this example assigns a domain adapter <code class="literal">0x05</code>, domain queues <code class="literal">0x0004</code> and <code class="literal">0x00ab</code>, and a control domain <code class="literal">0x00ab</code> to the mediated device.
					</p><pre class="screen"># <span class="strong strong"><strong>vim vfio_ap.xml</strong></span>

&lt;device&gt;
  &lt;parent&gt;ap_matrix&lt;/parent&gt;
  &lt;capability type="mdev"&gt;
    &lt;type id="vfio_ap-passthrough"/&gt;
    &lt;attr name='assign_adapter' value='0x05'/&gt;
    &lt;attr name='assign_domain' value='0x0004'/&gt;
    &lt;attr name='assign_domain' value='0x00ab'/&gt;
    &lt;attr name='assign_control_domain' value='0x00ab'/&gt;
  &lt;/capability&gt;
&lt;/device&gt;</pre></li><li class="listitem"><p class="simpara">
						Create a new mediated device from the <code class="literal">vfio_ap.xml</code> XML snippet.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-define vfio_ap.xml</strong></span>
Node device 'mdev_8f9c4a73_1411_48d2_895d_34db9ac18f85_matrix' defined from 'vfio_ap.xml'</pre></li><li class="listitem"><p class="simpara">
						Start the mediated device that you created in the previous step, in this case <code class="literal">mdev_8f9c4a73_1411_48d2_895d_34db9ac18f85_matrix</code>.
					</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-start mdev_8f9c4a73_1411_48d2_895d_34db9ac18f85_matrix</strong></span>
Device mdev_8f9c4a73_1411_48d2_895d_34db9ac18f85_matrix started</pre></li><li class="listitem"><p class="simpara">
						Check that the configuration has been applied correctly
					</p><pre class="screen"># <span class="strong strong"><strong>cat /sys/devices/vfio_ap/matrix/mdev_supported_types/vfio_ap-passthrough/devices/<span class="emphasis"><em>669d9b23-fe1b-4ecb-be08-a2fabca99b71</em></span>/matrix</strong></span>
05.0004
05.00ab</pre><p class="simpara">
						If the output contains the numerical values of queues that you have previously assigned to <code class="literal">vfio-ap</code>, the process was successful.
					</p></li><li class="listitem"><p class="simpara">
						Attach the mediated device to the VM.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Display the UUID of the mediated device that you created and save it for the next step.
							</p><pre class="screen"># <span class="strong strong"><strong>virsh nodedev-dumpxml mdev_8f9c4a73_1411_48d2_895d_34db9ac18f85_matrix</strong></span>

&lt;device&gt;
  &lt;name&gt;mdev_8f9c4a73_1411_48d2_895d_34db9ac18f85_matrix&lt;/name&gt;
  &lt;parent&gt;ap_matrix&lt;/parent&gt;
  &lt;capability type='mdev'&gt;
    &lt;type id='vfio_ap-passthrough'/&gt;
    <span class="strong strong"><strong>&lt;uuid&gt;8f9c4a73-1411-48d2-895d-34db9ac18f85&lt;/uuid&gt;</strong></span>
    &lt;iommuGroup number='0'/&gt;
    &lt;attr name='assign_adapter' value='0x05'/&gt;
    &lt;attr name='assign_domain' value='0x0004'/&gt;
    &lt;attr name='assign_domain' value='0x00ab'/&gt;
    &lt;attr name='assign_control_domain' value='0x00ab'/&gt;
  &lt;/capability&gt;
&lt;/device&gt;</pre></li><li class="listitem"><p class="simpara">
								Create and open an XML file for the cryptographic card mediated device. For example:
							</p><pre class="screen"># <span class="strong strong"><strong>vim crypto-dev.xml</strong></span></pre></li><li class="listitem"><p class="simpara">
								Add the following lines to the file and save it. Replace the <code class="literal">uuid</code> value with the UUID you obtained in step <span class="emphasis"><em>a</em></span>.
							</p><pre class="programlisting language-xml">&lt;hostdev mode='subsystem' type='mdev' managed='no' model='vfio-ap'&gt;
  &lt;source&gt;
    &lt;address uuid='8f9c4a73-1411-48d2-895d-34db9ac18f85'/&gt;
  &lt;/source&gt;
&lt;/hostdev&gt;</pre></li><li class="listitem"><p class="simpara">
								Use the XML file to attach the mediated device to the VM. For example, to permanently attach a device defined in the <code class="literal">crypto-dev.xml</code> file to the running <code class="literal">testguest1</code> VM:
							</p><pre class="screen"># <span class="strong strong"><strong>virsh attach-device testguest1 crypto-dev.xml --live --config</strong></span></pre><p class="simpara">
								The <code class="literal">--live</code> option attaches the device to a running VM only, without persistence between boots. The <code class="literal">--config</code> option makes the configuration changes persistent. You can use the <code class="literal">--config</code> option alone to attach the device to a shut-down VM.
							</p><p class="simpara">
								Note that each UUID can only be assigned to one VM at a time.
							</p></li></ol></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Ensure that the guest operating system detects the assigned cryptographic devices.
					</p><pre class="screen"># <span class="strong strong"><strong>lszcrypt -V</strong></span>

CARD.DOMAIN TYPE  MODE        STATUS  REQUESTS  PENDING HWTYPE QDEPTH FUNCTIONS  DRIVER
--------------------------------------------------------------------------------------------
05          CEX5C CCA-Coproc  online         1        0     11     08 S--D--N--  cex4card
05.0004     CEX5C CCA-Coproc  online         1        0     11     08 S--D--N--  cex4queue
05.00ab     CEX5C CCA-Coproc  online         1        0     11     08 S--D--N--  cex4queue</pre><p class="simpara">
						The output of this command in the guest operating system will be identical to that on a host logical partition with the same cryptographic coprocessor devices available.
					</p></li><li class="listitem"><p class="simpara">
						In the guest operating system, confirm that a control domain has been successfully assigned to the cryptographic devices.
					</p><pre class="screen"># <span class="strong strong"><strong>lszcrypt -d C</strong></span>

DOMAIN 00 01 02 03 04 05 06 07 08 09 0a 0b 0c 0d 0e 0f
------------------------------------------------------
    00  .  .  .  .  U  .  .  .  .  .  .  .  .  .  .  .
    10  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .
    20  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .
    30  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .
    40  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .
    50  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .
    60  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .
    70  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .
    80  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .
    90  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .
    a0  .  .  .  .  .  .  .  .  .  .  .  B  .  .  .  .
    b0  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .
    c0  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .
    d0  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .
    e0  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .
    f0  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .
------------------------------------------------------
C: Control domain
U: Usage domain
B: Both (Control + Usage domain)</pre><p class="simpara">
						If <code class="literal">lszcrypt -d C</code> displays <code class="literal">U</code> and <code class="literal">B</code> intersections in the cryptographic device matrix, the control domain assignment was successful.
					</p></li></ol></div></section><section class="section" id="enabling-standard-harware-security-on-windows-virtual-machines_securing-virtual-machines-in-rhel"><div class="titlepage"><div><div><h3 class="title">19.9. Enabling standard hardware security on Windows virtual machines</h3></div></div></div><p class="_abstract _abstract">
				To secure Windows virtual machines (VMs), you can enable basic level security by using the standard hardware capabilities of the Windows device.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Make sure you have installed the latest WHQL certified VirtIO drivers.
					</li><li class="listitem">
						Make sure the VM’s firmware supports UEFI boot.
					</li><li class="listitem"><p class="simpara">
						Install the <code class="literal">edk2-OVMF</code> package on your host machine.
					</p><pre class="screen"># <span class="strong strong"><strong>{PackageManagerCommand} install edk2-ovmf</strong></span></pre></li><li class="listitem"><p class="simpara">
						Install the <code class="literal">vTPM</code> packages on your host machine.
					</p><pre class="screen"># <span class="strong strong"><strong>{PackageManagerCommand} install swtpm libtpms</strong></span></pre></li><li class="listitem">
						Make sure the VM is using the Q35 machine architecture.
					</li><li class="listitem">
						Make sure you have the Windows installation media.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enable TPM 2.0 by adding the following parameters to the <code class="literal">&lt;devices&gt;</code> section in the VM’s XML configuration.
					</p><pre class="programlisting language-xml">&lt;devices&gt;
[...]
  &lt;tpm model='tpm-crb'&gt;
    &lt;backend type='emulator' version='2.0'/&gt;
  &lt;/tpm&gt;
[...]
&lt;/devices&gt;</pre></li><li class="listitem">
						Install Windows in UEFI mode. For more information about how to do so, see <a class="link" href="#creating-a-secureboot-virtual-machine_securing-virtual-machines-in-rhel" title="19.4. Creating a SecureBoot virtual machine">Creating a SecureBoot virtual machine</a>.
					</li><li class="listitem">
						Install the VirtIO drivers on the Windows VM. For more information about how to do so, see <a class="link" href="#installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" title="21.2.1.3. Installing virtio drivers on a Windows guest">Installing virtio drivers on a Windows guest</a>.
					</li><li class="listitem">
						In UEFI, enable Secure Boot. For more information about how to do so, see <a class="link" href="https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/secure-boot-landing">Secure Boot</a>.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Ensure that the <span class="strong strong"><strong>Device Security</strong></span> page on your Windows machine displays the following message:
					</p><p class="simpara">
						<span class="strong strong"><strong>Settings &gt; Update &amp; Security &gt; Windows Security &gt; Device Security</strong></span>
					</p><pre class="screen"><span class="strong strong"><strong>Your device meets the requirements for standard hardware security.</strong></span></pre></li></ul></div></section><section class="section" id="proc_enabling-enhanced-hardware-security-on-windows-virtual-machines_securing-virtual-machines-in-rhel"><div class="titlepage"><div><div><h3 class="title">19.10. Enabling enhanced hardware security on Windows virtual machines</h3></div></div></div><p class="_abstract _abstract">
				To further secure Windows virtual machines (VMs), you can enable virtualization-based protection of code integrity, also known as Hypervisor-Protected Code Integrity (HVCI).
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Ensure that standard hardware security is enabled. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/securing-virtual-machines-in-rhel_configuring-and-managing-virtualization#enabling-standard-harware-security-on-windows-virtual-machines_securing-virtual-machines-in-rhel">Enabling standard hardware security on Windows virtual machines</a>.
					</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Ensure you have enabled Hyper-V enlightenments. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/installing-and-managing-windows-virtual-machines-on-rhel_configuring-and-managing-virtualization#enabling-hyper-v-enlightenments_optimizing-windows-virtual-machines-on-rhel">Enabling Hyper-V enlightenments</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open the XML configuration of the Windows VM. The following example opens the configuration of the <span class="emphasis"><em>Example-L1</em></span> VM:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh edit <span class="emphasis"><em>Example-L1</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Under the <code class="literal">&lt;cpu&gt;</code> section, specify the CPU mode and add the policy flag.
					</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									For Intel CPUs, enable the <code class="literal">vmx</code> policy flag.
								</li><li class="listitem">
									For AMD CPUs, enable the <code class="literal">svm</code> policy flag.
								</li><li class="listitem">
									If you do not wish to specify a custom CPU, you can set the <code class="literal">&lt;cpu mode&gt;</code> as <code class="literal">host-passthrough</code>.
								</li></ul></div></div></rh-alert><pre class="programlisting language-xml">&lt;cpu mode='custom' match='exact' check='partial'&gt;
    &lt;model fallback='allow'&gt;Skylake-Client-IBRS&lt;/model&gt;
    &lt;topology sockets='1' dies='1' cores='4' threads='1'/&gt;
    &lt;feature policy='require' name='vmx'/&gt;
&lt;/cpu&gt;</pre></li><li class="listitem">
						Save the XML configuration and reboot the VM.
					</li><li class="listitem"><p class="simpara">
						On the VMs operating system, navigate to the <span class="strong strong"><strong>Core isolation details</strong></span> page:
					</p><p class="simpara">
						<span class="strong strong"><strong>Settings &gt; Update &amp; Security &gt; Windows Security &gt; Device Security &gt; Core isolation details</strong></span>
					</p></li><li class="listitem">
						Toggle the switch to enable <span class="strong strong"><strong>Memory Integrity</strong></span>.
					</li><li class="listitem">
						Reboot the VM.
					</li></ol></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					For other methods of enabling HVCI, see the relevant Microsoft documentation.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Ensure that the <span class="strong strong"><strong>Device Security</strong></span> page on your Windows VM displays the following message:
					</p><p class="simpara">
						<span class="strong strong"><strong>Settings &gt; Update &amp; Security &gt; Windows Security &gt; Device Security</strong></span>
					</p><pre class="screen"><span class="strong strong"><strong>Your device meets the requirements for enhanced hardware security.</strong></span></pre></li><li class="listitem"><p class="simpara">
						Alternatively, check System Information about the Windows VM:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Run <code class="literal">msinfo32.exe</code> in a command prompt.
							</li><li class="listitem">
								Check if <span class="strong strong"><strong>Credential Guard, Hypervisor enforced Code Integrity</strong></span> is listed under <span class="strong strong"><strong>Virtualization-based security Services Running</strong></span>.
							</li></ol></div></li></ul></div></section></section><section class="chapter" id="sharing-files-between-the-host-and-its-virtual-machines_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h2 class="title">Chapter 20. Sharing files between the host and its virtual machines</h2></div></div></div><p class="_abstract _abstract">
			You may frequently require to share data between your host system and the virtual machines (VMs) it runs. To do so quickly and efficiently, you can set up NFS file shares on your system. Alternatively, you can also use the <code class="literal">virtiofs</code> to share data with your Linux and Windows VMs.
		</p><section class="section" id="sharing-files-between-the-host-and-its-virtual-machines-using-NFS_sharing-files-between-the-host-and-its-virtual-machines"><div class="titlepage"><div><div><h3 class="title">20.1. Sharing files between the host and its virtual machines by using NFS</h3></div></div></div><p>
				For efficient file sharing between the RHEL 9 host system and the virtual machines (VMs), you can export an NFS share that VMs can mount and access.
			</p><p>
				However with Linux VMs, it is usually more convenient to use the <a class="link" href="#sharing-files-between-the-host-and-its-virtual-machines-using-virtiofs_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs" title="20.2.1. Sharing files between the host and its virtual machines by using virtiofs"><code class="literal">virtiofs</code></a> feature.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The <code class="literal">nfs-utils</code> package is installed on the host.
					</p><pre class="screen"># <span class="strong strong"><strong>dnf install nfs-utils -y</strong></span></pre></li><li class="listitem">
						Virtual network of <code class="literal">NAT</code> or <code class="literal">bridge</code> type is configured to connect a host to VMs.
					</li><li class="listitem">
						Optional: For improved security, ensure your VMs are compatible with NFS version 4 or later.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On the host, export a directory with the files you want to share as a network file system (NFS):
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Share an existing directory with VMs. If you do not want to share any of the existing directories, create a new one:
							</p><pre class="screen"># <span class="strong strong"><strong>mkdir shared-files</strong></span></pre></li><li class="listitem"><p class="simpara">
								Obtain the IP address of each VM to share files from the host, for example, <span class="emphasis"><em>testguest1</em></span> and <span class="emphasis"><em>testguest2</em></span> :
							</p><pre class="screen"># <span class="strong strong"><strong>virsh domifaddr <span class="emphasis"><em>testguest1</em></span></strong></span>
Name       MAC address          Protocol     Address
----------------------------------------------------------------
vnet0      52:53:00:84:57:90    ipv4         192.0.2.2/24

# <span class="strong strong"><strong>virsh domifaddr <span class="emphasis"><em>testguest2</em></span></strong></span>
Name       MAC address          Protocol     Address
----------------------------------------------------------------
vnet1      52:53:00:65:29:21    ipv4         192.0.2.3/24</pre></li><li class="listitem"><p class="simpara">
								Edit the <code class="literal">/etc/exports</code> file on the host and add a line that includes the directory you want to share, IPs of VMs to share, and additional options:
							</p><pre class="screen"><span class="emphasis"><em>/home/&lt;username&gt;/Downloads/&lt;shared_directory&gt;/ &lt;VM1-IP(options)&gt; &lt;VM2-IP(options)&gt;</em></span>
...</pre><p class="simpara">
								The following example shares the <code class="literal">/usr/local/shared-files</code> directory on the host with <span class="emphasis"><em>testguest1</em></span> and <span class="emphasis"><em>testguest2</em></span>, and enables the VMs to edit the content of the directory:
							</p><pre class="screen"><code class="literal"><span class="emphasis"><em>/usr/local/shared-files/ 192.0.2.2(rw,sync) 192.0.2.3(rw,sync)</em></span></code></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
									To share a directory with a Windows VM, you need to ensure the Windows NFS client has write permissions in the shared directory. You can use the <code class="literal">all_squash</code>, <code class="literal">anonuid</code>, and <code class="literal">anongid</code> options in the <code class="literal">/etc/exports</code> file.
								</p><p>
									<code class="literal">/usr/local/shared-files/ 192.0.2.2(rw,sync,all_squash,anonuid=<span class="emphasis"><em>&lt;directory-owner-UID&gt;</em></span>,anongid=<span class="emphasis"><em>&lt;directory-owner-GID&gt;</em></span>)</code>
								</p><p>
									The <span class="emphasis"><em>&lt;directory-owner-UID&gt;</em></span> and <span class="emphasis"><em>&lt;directory-owner-GID&gt;</em></span> are the UID and GID of the local user that owns the shared directory on the host.
								</p><p>
									For other options to manage NFS client permissions, follow the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/securing_networks/securing-network-services_securing-networks#securing-the-nfs-service_securing-network-services">Securing the NFS service</a> guide.
								</p></div></rh-alert></li><li class="listitem"><p class="simpara">
								Export the updated file system:
							</p><pre class="screen"># <span class="strong strong"><strong>exportfs -a</strong></span></pre></li><li class="listitem"><p class="simpara">
								Start the <code class="literal">nfs-server</code> service:
							</p><pre class="screen"># <span class="strong strong"><strong>systemctl start nfs-server</strong></span></pre></li><li class="listitem"><p class="simpara">
								Obtain the IP address of the host system to mount the shared directory on the VMs:
							</p><pre class="screen"># <span class="strong strong"><strong>ip addr</strong></span>
...
5: virbr0: [BROADCAST,MULTICAST,UP,LOWER_UP] mtu 1500 qdisc noqueue state UP group default qlen 1000
link/ether 52:54:00:32:ff:a5 brd ff:ff:ff:ff:ff:ff
inet 192.0.2.1/24 brd 192.0.2.255 scope global virbr0
valid_lft forever preferred_lft forever
...</pre><p class="simpara">
								Note that the relevant network connects the host with VMs to share files. Usually, this is <code class="literal">virbr0</code>.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						Mount the shared directory on a Linux VM that is specified in the <code class="literal">/etc/exports</code> file:
					</p><pre class="screen"># <span class="strong strong"><strong>mount 192.0.2.1:/usr/local/shared-files /mnt/host-share</strong></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">192.0.2.1</code>: The IP address of the host.
							</li><li class="listitem">
								<code class="literal">/usr/local/shared-files</code>: A file-system path to the exported directory on the host.
							</li><li class="listitem"><p class="simpara">
								<code class="literal">/mnt/host-share</code>: A mount point on the VM
							</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
									The mount point must be an empty directory.
								</p></div></rh-alert></li></ul></div></li><li class="listitem"><p class="simpara">
						To mount the shared directory on a Windows VM as mentioned in the <code class="literal">/etc/exports</code> file:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Open a PowerShell shell prompt as an Administrator.
							</li><li class="listitem"><p class="simpara">
								Install the <code class="literal">NFS-Client</code> package on the Windows.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
										To install on a server version, enter:
									</p><pre class="screen"># <span class="strong strong"><strong>Install-WindowsFeature NFS-Client</strong></span></pre></li><li class="listitem"><p class="simpara">
										To install on a desktop version, enter:
									</p><pre class="screen"># <span class="strong strong"><strong>Enable-WindowsOptionalFeature -FeatureName ServicesForNFS-ClientOnly, ClientForNFS-Infrastructure -Online -NoRestart</strong></span></pre></li></ol></div></li><li class="listitem"><p class="simpara">
								Mount the directory exported by the host on a Windows VM:
							</p><pre class="screen"># <span class="strong strong"><strong>C:\Windows\system32\mount.exe -o anon \\192.0.2.1\usr\local\shared-files Z:</strong></span></pre><p class="simpara">
								In this example:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">192.0.2.1</code>: The IP address of the host.
									</li><li class="listitem">
										<code class="literal">/usr/local/shared-files</code>: A file system path to the exported directory on the host.
									</li><li class="listitem"><p class="simpara">
										<code class="literal">Z:</code>: The drive letter for a mount point.
									</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
											You must choose a drive letter that is not in use on the system.
										</p></div></rh-alert></li></ul></div></li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						List the contents of the shared directory on the VM so that you can share files between the host and the VM:
					</p><pre class="screen">$ <span class="strong strong"><strong>ls <span class="emphasis"><em>&lt;mount_point&gt;</em></span></strong></span>
shared-file1  shared-file2  shared-file3</pre><p class="simpara">
						In this example, replace <span class="emphasis"><em>&lt;mount_point&gt;</em></span> with a file system path to the mounted shared directory.
					</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_using_network_file_services/deploying-an-nfs-server_configuring-and-using-network-file-services">Deploying an NFS server</a>
					</li></ul></div></section><section class="section" id="sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs_sharing-files-between-the-host-and-its-virtual-machines"><div class="titlepage"><div><div><h3 class="title">20.2. Sharing files between the host and its virtual machines by using virtiofs</h3></div></div></div><p>
				Using virtiofs, you can share files between your host and your virtual machines (VM) as a directory tree that works the same as the local file system structure.
			</p><section class="section" id="sharing-files-between-the-host-and-its-virtual-machines-using-virtiofs_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs"><div class="titlepage"><div><div><h4 class="title">20.2.1. Sharing files between the host and its virtual machines by using virtiofs</h4></div></div></div><p>
					When using RHEL 9 as your hypervisor, you can efficiently share files between your host system and its virtual machines (VM) using the <code class="literal">virtiofs</code> feature.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Virtualization is <a class="link" href="#assembly_enabling-virtualization-in-rhel-9_configuring-and-managing-virtualization" title="Chapter 2. Enabling virtualization">installed and enabled</a> on your RHEL 9 host.
						</li><li class="listitem"><p class="simpara">
							A directory that you want to share with your VMs. If you do not want to share any of your existing directories, create a new one, for example named <span class="emphasis"><em>shared-files</em></span>.
						</p><pre class="screen"># <span class="strong strong"><strong>mkdir /root/shared-files</strong></span></pre></li><li class="listitem">
							The VM you want to share data with is using a Linux distribution as its guest operating system.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							For each directory on the host that you want to share with your VM, set it as a virtiofs file system in the VM’s XML configuration.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Open the XML configuration of the intended VM.
								</p><pre class="screen"># <span class="strong strong"><strong>virsh edit <span class="emphasis"><em>vm-name</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
									Add an entry similar to the following to the <code class="literal">&lt;devices&gt;</code> section of the VM’s XML configuration.
								</p><pre class="programlisting language-xml">&lt;filesystem type='mount' accessmode='passthrough'&gt;
  &lt;driver type='virtiofs'/&gt;
  &lt;binary path='/usr/libexec/virtiofsd' xattr='on'/&gt;
  &lt;source dir='/root/shared-files'/&gt;
  &lt;target dir='host-file-share'/&gt;
&lt;/filesystem&gt;</pre><p class="simpara">
									This example sets the <code class="literal">/root/shared-files</code> directory on the host to be visible as <code class="literal">host-file-share</code> to the VM.
								</p></li></ol></div></li><li class="listitem"><p class="simpara">
							Set up shared memory for the VM. To do so, add shared memory backing to the <code class="literal">&lt;domain&gt;</code> section of the XML configuration:
						</p><pre class="programlisting language-xml">&lt;domain&gt;
 [...]
 &lt;memoryBacking&gt;
   &lt;access mode='shared'/&gt;
 &lt;/memoryBacking&gt;
 [...]
&lt;/domain&gt;</pre></li><li class="listitem"><p class="simpara">
							Boot up the VM.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh start <span class="emphasis"><em>vm-name</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
							Mount the file system in the guest operating system. The following example mounts the previously configured <code class="literal">host-file-share</code> directory with a Linux guest operating system.
						</p><pre class="screen"># <span class="strong strong"><strong>mount -t virtiofs host-file-share /mnt</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Ensure that the shared directory became accessible on the VM and that you can now open files stored in the directory.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Known issues and limitations</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							File-system mount options related to access time, such as <code class="literal">noatime</code> and <code class="literal">strictatime</code>, are not likely to work with virtiofs, and Red Hat discourages their use.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Troubleshooting</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							If <code class="literal">virtiofs</code> is not optimal for your usecase or supported for your system, you can use <a class="link" href="#sharing-files-between-the-host-and-its-virtual-machines-using-NFS_sharing-files-between-the-host-and-its-virtual-machines" title="20.1. Sharing files between the host and its virtual machines by using NFS">NFS</a> instead.
						</li></ul></div></section><section class="section" id="sharing-files-between-the-host-and-windows-virtual-machines_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs"><div class="titlepage"><div><div><h4 class="title">20.2.2. Sharing files between the host and Windows virtual machines by using virtiofs</h4></div></div></div><p>
					When using RHEL 9 as your hypervisor, you can efficiently share files between your host system and Windows virtual machines (VM) using the <code class="literal">virtiofs</code> feature along with the <code class="literal">virtio-win</code> package.
				</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
						You can run the <code class="literal">virtiofs</code> service in case insensitive mode on a Windows VM using the <code class="literal">virtiofs.exe</code> command and the <code class="literal">-i</code> parameter.
					</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have configured your VM’s XML configuration file to use virtiofs. For detailed information, see <a class="xref" href="#sharing-files-between-the-host-and-its-virtual-machines-using-virtiofs_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs" title="20.2.1. Sharing files between the host and its virtual machines by using virtiofs">Section 20.2.1, “Sharing files between the host and its virtual machines by using virtiofs”</a>.
						</li><li class="listitem">
							You have <a class="link" href="#installing-kvm-drivers-on-a-host-machine_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" title="21.2.1.2. Preparing virtio driver installation media on a host machine">attached the <code class="literal">virtio</code> driver installation media to the VM</a>.
						</li><li class="listitem">
							You have installed the <code class="literal">virtio-win</code> package on your Windows VM. For more information, see <a class="link" href="#installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" title="21.2.1.3. Installing virtio drivers on a Windows guest">Installing virtio drivers on a Windows guest</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							On your Windows VM, install WinFsp. To do so, mount the <code class="literal">virtio-win</code> ISO image, start the <code class="literal">winfsp</code> MSI installer, and follow the prompts.
						</p><p class="simpara">
							In the <span class="strong strong"><strong>Custom Setup</strong></span> window of the installation wizard, select the features you want to install on the VM.
						</p></li><li class="listitem"><p class="simpara">
							Start the virtiofs service:
						</p><pre class="screen"># <span class="strong strong"><strong>sc start VirtioFsSvc</strong></span></pre></li><li class="listitem"><p class="simpara">
							Navigate to <span class="strong strong"><strong>This PC</strong></span>:
						</p><p class="simpara">
							<span class="strong strong"><strong>File Explorer → This PC</strong></span>
						</p><p class="simpara">
							Virtiofs should be available on the Windows VM as the first available drive letter starting with <code class="literal">z:</code> and going backwards. For example, <code class="literal">my_viofs (Z:)</code>.
						</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
								You must restart the virtiofs service after each VM reboot to access the shared directory.
							</p></div></rh-alert></li><li class="listitem"><p class="simpara">
							Optional: To set up additional virtiofs instances:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Stop the virtiofs service:
								</p><pre class="screen"># <span class="strong strong"><strong>sc stop VirtioFsSvc</strong></span>
# <span class="strong strong"><strong>sc config VirtioFsSvc start=demand</strong></span></pre></li><li class="listitem"><p class="simpara">
									Configure the WinFSP.Launcher service to set up multiple virtiofs instances:
								</p><pre class="screen"># <span class="strong strong"><strong>"C:\Program Files (x86)\WinFsp\bin\fsreg.bat" virtiofs "<span class="emphasis"><em>&lt;path to the binary&gt;</em></span>\virtiofs.exe" "-t %1 -m %2"</strong></span></pre></li><li class="listitem"><p class="simpara">
									Mount virtiofs instances to drives.
								</p><p class="simpara">
									For example, to mount virtiofs with the tag <code class="literal">mount_tag0</code> to the <code class="literal">Y:</code> drive:
								</p><pre class="screen"><span class="strong strong"><strong>"C:\Program Files (x86)\WinFsp\bin\launchctl-x64.exe" start virtiofs viofsY mount_tag0 Y:</strong></span></pre></li><li class="listitem">
									Repeat the previous step to mount all of your virtiofs instances.
								</li><li class="listitem"><p class="simpara">
									To unmount the virtiofs instance:
								</p><pre class="screen"><span class="strong strong"><strong>"C:\Program Files (x86)\WinFsp\bin\launchctl-x64.exe" stop virtiofs viofsY</strong></span></pre></li></ol></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							On your Windows VM, navigate to <span class="strong strong"><strong>This PC</strong></span>:
						</p><p class="simpara">
							<span class="strong strong"><strong>File Explorer → This PC</strong></span>
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									If you did not specify a mount point when setting up the virtiofs service, it will use the first available drive letter starting with <code class="literal">z:</code> and going backwards.
								</li><li class="listitem">
									If you have multiple virtiofs instances set up, they will appear as drives with the letters you had assigned to the instances.
								</li></ul></div></li></ol></div></section><section class="section" id="proc_using-the-web-console-to-share-files-between-the-host-and-its-virtual-machines-using-virtiofs_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs"><div class="titlepage"><div><div><h4 class="title">20.2.3. Sharing files between the host and its virtual machines by using virtiofs in the web console</h4></div></div></div><p>
					You can use the RHEL web console to efficiently share files between your host system and its virtual machines (VM) using the <code class="literal">virtiofs</code> feature.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li><li class="listitem"><p class="simpara">
							A directory that you want to share with your VMs. If you do not want to share any of your existing directories, create a new one, for example named <span class="emphasis"><em>centurion</em></span>.
						</p><pre class="literallayout"># <span class="strong strong"><strong>mkdir /home/centurion</strong></span></pre></li><li class="listitem">
							The VM you want to share data with is using a Linux distribution as its guest operating system.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click the VM with which you want to share files.
						</p><p class="simpara">
							A new page opens with an <span class="strong strong"><strong>Overview</strong></span> section with basic information about the selected VM and a <span class="strong strong"><strong>Console</strong></span> section.
						</p></li><li class="listitem"><p class="simpara">
							Scroll to <span class="guimenu">Shared directories</span>.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Shared directories</strong></span> section displays information about the host files and directories shared with that VM and options to <span class="strong strong"><strong>Add</strong></span> or <span class="strong strong"><strong>Remove</strong></span> a shared directory.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/ad19f004c4560f7e5f32a114629e7b3e/virt-cockpit-shared-directory-info.png" alt="Image displaying the directories shared with the selected VM."></div></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Add shared directory</span>.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Share a host directory with the guest</strong></span> dialog appears.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/170264f3a13e4c99f71f9ea8a8ca5b31/virt-cockpit-shared-directory-add.png" width="540" alt="Image displaying the Share a host directory with the guest dialog box."></div></div></li><li class="listitem"><p class="simpara">
							Enter the following information:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Source path</strong></span> - The path to the host directory that you want to share.
								</li><li class="listitem">
									<span class="strong strong"><strong>Mount tag</strong></span> - The tag that the VM uses to mount the directory.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Set additional options:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>Extended attributes</strong></span> - Set whether to enable extended attributes, <code class="literal">xattr</code>, on the shared files and directories.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Share</span>.
						</p><p class="simpara">
							The selected directory is shared with the VM.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Ensure that the shared directory is accessible on the VM and you can now open files stored in that directory.
						</li></ul></div></section><section class="section" id="proc_using-the-web-console-to-unshare-files-between-the-host-and-its-virtual-machines-using-virtiofs_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs"><div class="titlepage"><div><div><h4 class="title">20.2.4. Using the web console to remove shared files between the host and its virtual machines by using virtiofs</h4></div></div></div><p>
					You can use the RHEL web console to remove files shared between your host system and its virtual machines (VM) using the <code class="literal">virtiofs</code> feature.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The web console VM plug-in <a class="link" href="#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console" title="8.2. Setting up the web console to manage virtual machines">is installed on your system</a>.
						</li><li class="listitem">
							The directory is no longer being used by the VM.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <span class="guimenu">Virtual Machines</span> interface, click on the VM from which you want to remove the shared files.
						</p><p class="simpara">
							A new page opens with an <span class="strong strong"><strong>Overview</strong></span> section with basic information about the selected VM and a <span class="strong strong"><strong>Console</strong></span> section.
						</p></li><li class="listitem"><p class="simpara">
							Scroll to <span class="guimenu">Shared directories</span>.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Shared directories</strong></span> section displays information about the host files and directories shared with that VM and options to <span class="strong strong"><strong>Add</strong></span> or <span class="strong strong"><strong>Remove</strong></span> a shared directory.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/ad19f004c4560f7e5f32a114629e7b3e/virt-cockpit-shared-directory-info.png" alt="Image displaying the directories shared with the selected VM."></div></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Remove</span> next to the directory that you want to unshare with the VM.
						</p><p class="simpara">
							The <span class="strong strong"><strong>Remove filesystem</strong></span> dialog appears.
						</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/5537cefae2f080b36efe4fc7b9c09f02/virt-cockpit-shared-directory-remove.png" width="540" alt="Image displaying the remove a filesystem dialog box."></div></div></li><li class="listitem"><p class="simpara">
							Click <span class="guibutton">Remove</span>.
						</p><p class="simpara">
							The selected directory is unshared with the VM.
						</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The shared directory is no longer available and accessible on the VM.
						</li></ul></div></section></section></section><section class="chapter" id="installing-and-managing-windows-virtual-machines-on-rhel_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h2 class="title">Chapter 21. Installing and managing Windows virtual machines</h2></div></div></div><p>
			To use Microsoft Windows as the guest operating system in your virtual machines (VMs) on a RHEL 9 host, Red Hat recommends taking extra steps to ensure these VMs run correctly.
		</p><p>
			For this purpose, the following sections provide information about installing and optimizing Windows VMs on the host, as well as installing and configuring drivers in these VMs.
		</p><section class="section" id="installing-windows-virtual-machines-on-rhel_installing-and-managing-windows-virtual-machines-on-rhel"><div class="titlepage"><div><div><h3 class="title">21.1. Installing Windows virtual machines</h3></div></div></div><p class="_abstract _abstract">
				You can create a fully-virtualized Windows machine on a RHEL 9 host, launch the graphical Windows installer inside the virtual machine (VM), and optimize the installed Windows guest operating system (OS).
			</p><p>
				To create the VM and to install the Windows guest OS, use the <code class="literal command">virt-install</code> command or the RHEL 9 web console.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						A Windows OS installation source, which can be one of the following, and be available locally or on a network:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								An ISO image of an installation medium
							</li><li class="listitem">
								A disk image of an existing VM installation
							</li></ul></div></li><li class="listitem"><p class="simpara">
						A storage medium with the KVM <code class="literal">virtio</code> drivers.
					</p><p class="simpara">
						To create this medium, see <a class="link" href="#installing-kvm-drivers-on-a-host-machine_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" title="21.2.1.2. Preparing virtio driver installation media on a host machine">Preparing virtio driver installation media on a host machine</a>.
					</p></li><li class="listitem">
						If you are installing Windows 11, the <code class="literal package">edk2-ovmf</code>, <code class="literal package">swtpm</code> and <code class="literal package">libtpms</code> packages must be installed on the host.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create the VM. For instructions, see <a class="link" href="#assembly_creating-virtual-machines_configuring-and-managing-virtualization" title="Chapter 3. Creating virtual machines">Creating virtual machines</a>, but keep in mind the following specifics.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								If using the <code class="literal">virt-install</code> utility to create the VM, add the following options to the command:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
										The storage medium with the KVM <code class="literal">virtio</code> drivers. For example:
									</p><pre class="screen">--disk path=<span class="emphasis"><em>/usr/share/virtio-win/virtio-win.iso</em></span>,device=cdrom</pre></li><li class="listitem"><p class="simpara">
										The Windows version you will install. For example, for Windows 10 and 11:
									</p><pre class="screen">--os-variant <span class="emphasis"><em>win10</em></span></pre><p class="simpara">
										For a list of available Windows versions and the appropriate option, use the following command:
									</p><pre class="screen"># <span class="strong strong"><strong>osinfo-query os</strong></span></pre></li><li class="listitem"><p class="simpara">
										If you are installing Windows 11, enable <span class="emphasis"><em>Unified Extensible Firmware Interface</em></span> (UEFI) and <span class="emphasis"><em>virtual Trusted Platform Module</em></span> (vTPM):
									</p><pre class="literallayout">--boot uefi</pre></li></ul></div></li><li class="listitem"><p class="simpara">
								If using the web console to create the VM, specify your version of Windows in the <span class="strong strong"><strong>Operating system</strong></span> field of the <span class="strong strong"><strong>Create new virtual machine</strong></span> window.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										If you are installing Windows versions prior to Windows 11 and Windows Server 2022, start the installation by clicking <span class="guibutton">Create and run</span>.
									</li><li class="listitem"><p class="simpara">
										If you are installing Windows 11, or you want to use additional Windows Server 2022 features, confirm by clicking <span class="guibutton">Create and edit</span> and enable UEFI and vTPM using the CLI:
									</p><div class="orderedlist"><ol class="orderedlist" type="A"><li class="listitem"><p class="simpara">
												Open the VM’s XML configuration:
											</p><pre class="screen"># <span class="strong strong"><strong>virsh edit <span class="emphasis"><em>windows-vm</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
												Add the <code class="literal">firmware='efi'</code> option to the <code class="literal">os</code> element:
											</p><pre class="screen">&lt;os <span class="strong strong"><strong>firmware='efi'</strong></span>&gt;
  &lt;type arch='x86_64' machine='pc-q35-6.2'&gt;hvm&lt;/type&gt;
  &lt;boot dev='hd'/&gt;
&lt;/os&gt;</pre></li><li class="listitem"><p class="simpara">
												Add the <code class="literal">tpm</code> device inside the <code class="literal">devices</code> element:
											</p><pre class="screen">&lt;devices&gt;
  <span class="strong strong"><strong>&lt;tpm model='tpm-crb'&gt;</strong></span>
    <span class="strong strong"><strong>&lt;backend type='emulator' version='2.0'/&gt;</strong></span>
  <span class="strong strong"><strong>&lt;/tpm&gt;</strong></span>
&lt;/devices&gt;</pre></li><li class="listitem">
												Start the Windows installation by clicking <span class="guibutton">Install</span> in the <span class="strong strong"><strong>Virtual machines</strong></span> table.
											</li></ol></div></li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Install the Windows OS in the VM.
					</p><p class="simpara">
						For information about how to install a Windows operating system, refer to the relevant Microsoft installation documentation.
					</p></li><li class="listitem">
						If using the web console to create the VM, attach the storage medium with virtio drivers to the VM by using the <span class="strong strong"><strong>Disks</strong></span> interface. For instructions, see <a class="link" href="#attaching-existing-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console" title="15.8.3. Attaching existing disks to virtual machines by using the web console">Attaching existing disks to virtual machines by using the web console</a>.
					</li><li class="listitem">
						Configure KVM <code class="literal">virtio</code> drivers in the Windows guest OS. For details, see <a class="link" href="#installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines_optimizing-windows-virtual-machines-on-rhel" title="21.2.1. Installing KVM paravirtualized drivers for Windows virtual machines">Installing KVM paravirtualized drivers for Windows virtual machines</a>.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#optimizing-windows-virtual-machines-on-rhel_installing-and-managing-windows-virtual-machines-on-rhel" title="21.2. Optimizing Windows virtual machines">Optimizing Windows virtual machines</a>
					</li><li class="listitem">
						<a class="link" href="#enabling-standard-harware-security-on-windows-virtual-machines_installing-and-managing-windows-virtual-machines-on-rhel" title="21.3. Enabling standard hardware security on Windows virtual machines">Enabling standard hardware security on Windows virtual machines</a>
					</li><li class="listitem">
						<a class="link" href="#proc_enabling-enhanced-hardware-security-on-windows-virtual-machines_installing-and-managing-windows-virtual-machines-on-rhel" title="21.4. Enabling enhanced hardware security on Windows virtual machines">Enabling enhanced hardware security on Windows virtual machines</a>
					</li><li class="listitem">
						<a class="link" href="#sample-virtual-machine-xml-configuration_viewing-information-about-virtual-machines" title="9.3. Sample virtual machine XML configuration">Sample virtual machine XML configuration</a>
					</li></ul></div></section><section class="section" id="optimizing-windows-virtual-machines-on-rhel_installing-and-managing-windows-virtual-machines-on-rhel"><div class="titlepage"><div><div><h3 class="title">21.2. Optimizing Windows virtual machines</h3></div></div></div><p>
				When using Microsoft Windows as a guest operating system in a virtual machine (VM) hosted in RHEL 9, the performance of the guest may be negatively impacted.
			</p><p>
				Therefore, Red Hat recommends optimizing your Windows VMs by doing any combination of the following:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Using paravirtualized drivers. For more information, see <a class="link" href="#installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines_optimizing-windows-virtual-machines-on-rhel" title="21.2.1. Installing KVM paravirtualized drivers for Windows virtual machines">Installing KVM paravirtualized drivers for Windows virtual machines</a>.
					</li><li class="listitem">
						Enabling Hyper-V enlightenments. For more information, see <a class="link" href="#enabling-hyper-v-enlightenments_optimizing-windows-virtual-machines-on-rhel" title="21.2.2. Enabling Hyper-V enlightenments">Enabling Hyper-V enlightenments</a>.
					</li><li class="listitem">
						Configuring NetKVM driver parameters. For more information, see <a class="link" href="#configuring-netkvm-driver-parameters_optimizing-windows-virtual-machines-on-rhel" title="21.2.3. Configuring NetKVM driver parameters">Configuring NetKVM driver parameters</a>.
					</li><li class="listitem">
						Optimizing or disabling Windows background processes. For more information, see <a class="link" href="#optimizing-background-processes-on-windows-virtual-machines_optimizing-windows-virtual-machines-on-rhel" title="21.2.5. Optimizing background processes on Windows virtual machines">Optimizing background processes on Windows virtual machines</a>.
					</li></ul></div><section class="section" id="installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines_optimizing-windows-virtual-machines-on-rhel"><div class="titlepage"><div><div><h4 class="title">21.2.1. Installing KVM paravirtualized drivers for Windows virtual machines</h4></div></div></div><p>
					The primary method of improving the performance of your Windows virtual machines (VMs) is to install KVM paravirtualized (<code class="literal">virtio</code>) drivers for Windows on the guest operating system.
				</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
						The <code class="literal">virtio-win</code> drivers are certified (WHQL) against the latest releases of Windows 10 and 11, available at the time of the respective <code class="literal">virtio-win</code> release. However, <code class="literal">virtio-win</code> drivers are generally tested and expected to function correctly on previous builds of Windows 10 and 11 as well.
					</p></div></rh-alert><p>
					To install the drivers on a Windows VM, perform the following actions:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Prepare the install media on the host machine. For more information, see <a class="link" href="#installing-kvm-drivers-on-a-host-machine_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" title="21.2.1.2. Preparing virtio driver installation media on a host machine">Preparing virtio driver installation media on a host machine</a>.
						</li><li class="listitem">
							Attach the install media to an existing Windows VM, or attach it when creating a new Windows VM. For more information, see <a class="link" href="#installing-windows-virtual-machines-on-rhel_installing-and-managing-windows-virtual-machines-on-rhel" title="21.1. Installing Windows virtual machines">Installing Windows virtual machines on RHEL</a>.
						</li><li class="listitem">
							Install the <code class="literal">virtio</code> drivers on the Windows guest operating system. For more information, see <a class="link" href="#installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" title="21.2.1.3. Installing virtio drivers on a Windows guest">Installing virtio drivers on a Windows guest</a>.
						</li><li class="listitem">
							Install the <code class="literal">QEMU Guest Agent</code> on the Windows guest operating system. For more information, see <a class="link" href="#proc_installing-qemu-guest-agent-on-windows-guests_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" title="21.2.1.5. Enabling QEMU Guest Agent on Windows guests">Installing QEMU Guest Agent on a Windows guest</a>.
						</li></ol></div><section class="section" id="how-windows-virtio-drivers-work_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines"><div class="titlepage"><div><div><h5 class="title">21.2.1.1. How Windows virtio drivers work</h5></div></div></div><p>
						Paravirtualized drivers enhance the performance of virtual machines (VMs) by decreasing I/O latency and increasing throughput to almost bare-metal levels. Red Hat recommends that you use paravirtualized drivers for VMs that run I/O-heavy tasks and applications.
					</p><p>
						<code class="literal package">virtio</code> drivers are KVM’s paravirtualized device drivers, available for Windows VMs running on KVM hosts. These drivers are provided by the <code class="literal package">virtio-win</code> package, which includes drivers for:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Block (storage) devices
							</li><li class="listitem">
								Network interface controllers
							</li><li class="listitem">
								Video controllers
							</li><li class="listitem">
								Memory ballooning device
							</li><li class="listitem">
								Paravirtual serial port device
							</li><li class="listitem">
								Entropy source device
							</li><li class="listitem">
								Paravirtual panic device
							</li><li class="listitem">
								Input devices, such as mice, keyboards, or tablets
							</li><li class="listitem">
								A small set of emulated devices
							</li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							For additional information about emulated, <code class="literal">virtio</code>, and assigned devices, refer to <a class="link" href="#managing-virtual-devices_configuring-and-managing-virtualization" title="Chapter 14. Managing virtual devices">Managing virtual devices</a>.
						</p></div></rh-alert><p>
						By using KVM virtio drivers, the following Microsoft Windows versions are expected to run similarly to physical systems:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Windows Server versions: See <a class="link" href="https://access.redhat.com/articles/973163#rhelkvm">Certified guest operating systems for Red Hat Enterprise Linux with KVM</a> in the Red Hat Knowledgebase.
							</li><li class="listitem"><p class="simpara">
								Windows Desktop (non-server) versions:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										Windows 10 (32-bit and 64-bit versions)
									</li><li class="listitem">
										Windows 11 (64-bit)
									</li></ul></div></li></ul></div></section><section class="section" id="installing-kvm-drivers-on-a-host-machine_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines"><div class="titlepage"><div><div><h5 class="title">21.2.1.2. Preparing virtio driver installation media on a host machine</h5></div></div></div><p>
						To install or update KVM <code class="literal">virtio</code> drivers on a Windows virtual machine (VM), you must first prepare the <code class="literal">virtio</code> driver installation media on the host machine. To do so, attach the <code class="literal">.iso</code> file, provided by the <code class="literal package">virtio-win</code> package, as a storage device to the Windows VM.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								Ensure that virtualization is enabled in your RHEL 9 host system. For more information, see <a class="link" href="#assembly_enabling-virtualization-in-rhel-9_configuring-and-managing-virtualization" title="Chapter 2. Enabling virtualization">Enabling virtualization</a>.
							</li><li class="listitem">
								Ensure that you have root access privileges to the VM.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Refresh your subscription data:
							</p><pre class="screen"># <span class="strong strong"><strong>subscription-manager refresh</strong></span>
All local data refreshed</pre></li><li class="listitem"><p class="simpara">
								Get the latest version of the <code class="literal package">virtio-win</code> package.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
										If <code class="literal">virtio-win</code> is not installed:
									</p><pre class="screen"># <span class="strong strong"><strong>dnf install -y virtio-win</strong></span></pre></li><li class="listitem"><p class="simpara">
										If <code class="literal">virtio-win</code> is installed:
									</p><pre class="screen"># <span class="strong strong"><strong>dnf upgrade -y virtio-win</strong></span></pre><p class="simpara">
										If the installation succeeds, the <code class="literal">virtio-win</code> driver files are available in the <code class="literal">/usr/share/virtio-win/</code> directory. These include <code class="literal">ISO</code> files and a <code class="literal filename">drivers</code> directory with the driver files in directories, one for each architecture and supported Windows version.
									</p><pre class="screen"># <span class="strong strong"><strong>ls /usr/share/virtio-win/</strong></span>
drivers/  guest-agent/  virtio-win-1.9.9.iso  virtio-win.iso</pre></li></ul></div></li><li class="listitem"><p class="simpara">
								Attach the <code class="literal">virtio-win.iso</code> file as a storage device to the Windows VM.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										When <a class="link" href="#installing-windows-virtual-machines-on-rhel_installing-and-managing-windows-virtual-machines-on-rhel" title="21.1. Installing Windows virtual machines">creating a new Windows VM</a>, attach the file by using the <code class="literal">virt-install</code> command options.
									</li><li class="listitem"><p class="simpara">
										When installing the drivers on an existing Windows VM, attach the file as a CD-ROM by using the <code class="literal">virt-xml</code> utility:
									</p><pre class="screen"># <span class="strong strong"><strong>virt-xml WindowsVM --add-device --disk virtio-win.iso,device=cdrom</strong></span>
Domain 'WindowsVM' defined successfully.</pre></li></ul></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
								<a class="link" href="#installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" title="21.2.1.3. Installing virtio drivers on a Windows guest">Installing the virtio driver on the Windows guest operating system</a>.
							</li></ul></div></section><section class="section" id="installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines"><div class="titlepage"><div><div><h5 class="title">21.2.1.3. Installing virtio drivers on a Windows guest</h5></div></div></div><p>
						To install KVM <code class="literal">virtio</code> drivers on a Windows guest operating system, you must add a storage device that contains the drivers (either when creating the virtual machine (VM) or afterwards) and install the drivers in the Windows guest operating system.
					</p><p>
						This procedure provides instructions to install the drivers by using the graphical interface. You can also use the <a class="link" href="https://docs.microsoft.com/en-us/windows/win32/msi/about-windows-installer">Microsoft Windows Installer (MSI)</a> command line interface.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								An installation medium with the KVM <code class="literal">virtio</code> drivers must be attached to the VM. For instructions on preparing the medium, see <a class="link" href="#installing-kvm-drivers-on-a-host-machine_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" title="21.2.1.2. Preparing virtio driver installation media on a host machine">Preparing virtio driver installation media on a host machine</a>.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								In the Windows guest operating system, open the <code class="literal">File Explorer</code> application.
							</li><li class="listitem">
								Click <code class="literal">This PC</code>.
							</li><li class="listitem">
								In the <code class="literal">Devices and drives</code> pane, open the <code class="literal">virtio-win</code> medium.
							</li><li class="listitem"><p class="simpara">
								Based on the operating system installed on the VM, run one of the installers:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										If using a 32-bit operating system, run the <code class="literal">virtio-win-gt-x86.msi</code> installer.
									</li><li class="listitem">
										If using a 64-bit operating system, run the <code class="literal">virtio-win-gt-x64.msi</code> installer.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								In the <code class="literal">Virtio-win-driver-installer</code> setup wizard that opens, follow the displayed instructions until you reach the <code class="literal">Custom Setup</code> step.
							</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/20c90fc5f9acc1afeeed84bcb820ce2a/virtio-win-installer-2.png" alt="Image displaying the Virtio-win-guest-tools setup wizard."></div></div></li><li class="listitem">
								In the Custom Setup window, select the device drivers you want to install. The recommended driver set is selected automatically, and the descriptions of the drivers are displayed on the right of the list.
							</li><li class="listitem">
								Click <span class="guibutton">next</span>, then click <span class="guibutton">Install</span>.
							</li><li class="listitem">
								After the installation completes, click <span class="guibutton">Finish</span>.
							</li><li class="listitem">
								Reboot the VM to complete the driver installation.
							</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								On your Windows VM, navigate to the <span class="strong strong"><strong>Device Manager</strong></span>:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										Click Start
									</li><li class="listitem">
										Search for <span class="strong strong"><strong>Device Manager</strong></span>
									</li></ol></div></li><li class="listitem"><p class="simpara">
								Ensure that the devices are using the correct drivers:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										Click a device to open the <span class="strong strong"><strong>Driver Properties</strong></span> window.
									</li><li class="listitem">
										Navigate to the <span class="strong strong"><strong>Driver</strong></span> tab.
									</li><li class="listitem">
										Click <span class="strong strong"><strong>Driver Details</strong></span>.
									</li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								If you installed the NetKVM driver, you might also need to configure the Windows guest’s networking parameters. For more information, see <a class="link" href="#configuring-netkvm-driver-parameters_optimizing-windows-virtual-machines-on-rhel" title="21.2.3. Configuring NetKVM driver parameters">Configuring NetKVM driver parameters</a>.
							</li></ul></div></section><section class="section" id="proc_updating-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines"><div class="titlepage"><div><div><h5 class="title">21.2.1.4. Updating virtio drivers on a Windows guest</h5></div></div></div><p>
						To update KVM <code class="literal">virtio</code> drivers on a Windows guest operating system (OS), you can use the <code class="literal">Windows Update</code> service, if the Windows OS version supports it. If it does not, reinstall the drivers from <code class="literal">virtio</code> driver installation media attached to the Windows virtual machine (VM).
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								A Windows guest OS with <a class="link" href="#installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" title="21.2.1.3. Installing virtio drivers on a Windows guest">virtio drivers installed</a>.
							</li><li class="listitem">
								If not using <code class="literal">Windows Update</code>, an installation medium with up-to-date KVM <code class="literal">virtio</code> drivers must be attached to the Windows VM. For instructions on preparing the medium, see <a class="link" href="#installing-kvm-drivers-on-a-host-machine_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" title="21.2.1.2. Preparing virtio driver installation media on a host machine">Preparing virtio driver installation media on a host machine</a>.
							</li></ul></div><div class="formalpara"><p class="title"><strong>Procedure 1: Updating the drivers by using Windows Update</strong></p><p>
							On Windows 10, Windows Server 2016 and later operating systems, check if the driver updates are available by using the <code class="literal">Windows Update</code> graphical interface:
						</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Start the Windows VM and log in to its guest OS.
							</li><li class="listitem"><p class="simpara">
								Navigate to the <span class="strong strong"><strong>Optional updates</strong></span> page:
							</p><p class="simpara">
								<span class="strong strong"><strong>Settings → Windows Update → Advanced options → Optional updates</strong></span>
							</p></li><li class="listitem">
								Install all updates from <span class="strong strong"><strong>Red Hat, Inc.</strong></span>
							</li></ol></div><div class="formalpara"><p class="title"><strong>Procedure 2: Updating the drivers by reinstalling them</strong></p><p>
							On operating systems prior to Windows 10 and Windows Server 2016, or if the OS does not have access to <code class="literal">Windows Update</code>, reinstall the drivers. This restores the Windows guest OS network configuration to default (DHCP). If you want to preserve a customized network configuration, you also need to create a backup and restore it by using the <code class="literal">netsh</code> utility:
						</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Start the Windows VM and log in to its guest OS.
							</li><li class="listitem"><p class="simpara">
								Open the Windows Command Prompt:
							</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
										Use the <kbd class="keycap">Super</kbd>+<kbd class="keycap">R</kbd> keyboard shortcut.
									</li><li class="listitem">
										In the window that appears, type <code class="literal">cmd</code> and press <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">Shift</kbd>+<kbd class="keycap">Enter</kbd> to run as administrator.
									</li></ol></div></li><li class="listitem"><p class="simpara">
								Back up the OS network configuration by using the Windows Command Prompt:
							</p><pre class="screen"><span class="strong strong"><strong>C:\WINDOWS\system32\netsh dump &gt; backup.txt</strong></span></pre></li><li class="listitem"><p class="simpara">
								Reinstall KVM <code class="literal">virtio</code> drivers from the attached installation media. Do one of the following:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
										Reinstall the drivers by using the Windows Command Prompt, where <span class="emphasis"><em>X</em></span> is the installation media drive letter. The following commands install all <code class="literal">virtio</code> drivers.
									</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
												If using a 64-bit vCPU:
											</p><p class="simpara">
												<span class="strong strong"><strong>C:\WINDOWS\system32\msiexec.exe /i <span class="emphasis"><em>X</em></span>:\virtio-win-gt-x64.msi /passive /norestart</strong></span>
											</p></li><li class="listitem"><p class="simpara">
												If using a 32-bit vCPU:
											</p><pre class="screen"><span class="strong strong"><strong>C:\WINDOWS\system32\msiexec.exe /i <span class="emphasis"><em>X</em></span>:\virtio-win-gt-x86.msi /passive /norestart</strong></span></pre></li></ul></div></li><li class="listitem">
										Reinstall the drivers <a class="link" href="#installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" title="21.2.1.3. Installing virtio drivers on a Windows guest">using the graphical interface</a> without rebooting the VM.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								Restore the OS network configuration using the Windows Command Prompt:
							</p><pre class="screen"><span class="strong strong"><strong>C:\WINDOWS\system32\netsh -f backup.txt</strong></span></pre></li><li class="listitem">
								Reboot the VM to complete the driver installation.
							</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
								<a class="link" href="https://docs.microsoft.com/en-us/windows/deployment/update/windows-update-overview">Microsoft documentation on Windows Update</a>
							</li></ul></div></section><section class="section" id="proc_installing-qemu-guest-agent-on-windows-guests_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines"><div class="titlepage"><div><div><h5 class="title">21.2.1.5. Enabling QEMU Guest Agent on Windows guests</h5></div></div></div><p>
						To allow a RHEL host to perform <a class="link" href="#virtualization-features-that-require-qemu-guest-agent_enabling-qemu-guest-agent-features-on-your-virtual-machines" title="2.4.3. Virtualization features that require QEMU Guest Agent">a certain subset of operations</a> on a Windows virtual machine (VM), you must enable the QEMU Guest Agent (GA). To do so, add a storage device that contains the QEMU Guest Agent installer to an existing VM or when creating a new VM, and install the drivers on the Windows guest operating system.
					</p><p>
						To install the Guest Agent (GA) by using the graphical interface, see the procedure below. To install the GA in a command-line interface, use the <a class="link" href="https://docs.microsoft.com/en-us/windows/win32/msi/about-windows-installer">Microsoft Windows Installer (MSI)</a>.
					</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
								An installation medium with the Guest Agent is attached to the VM. For instructions on preparing the medium, see <a class="link" href="#installing-kvm-drivers-on-a-host-machine_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" title="21.2.1.2. Preparing virtio driver installation media on a host machine">Preparing virtio driver installation media on a host machine</a>.
							</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
								In the Windows guest operating system, open the <code class="literal">File Explorer</code> application.
							</li><li class="listitem">
								Click <code class="literal">This PC</code>.
							</li><li class="listitem">
								In the <code class="literal">Devices and drives</code> pane, open the <code class="literal">virtio-win</code> medium.
							</li><li class="listitem">
								Open the <code class="literal">guest-agent</code> folder.
							</li><li class="listitem"><p class="simpara">
								Based on the operating system installed on the VM, run one of the following installers:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										If using a 32-bit operating system, run the <code class="literal">qemu-ga-i386.msi</code> installer.
									</li><li class="listitem">
										If using a 64-bit operating system, run the <code class="literal">qemu-ga-x86_64.msi</code> installer.
									</li></ul></div></li><li class="listitem">
								Optional: If you want to use the para-virtualized serial driver (<code class="literal">virtio-serial</code>) as the communication interface between the host and the Windows guest, verify that the <code class="literal">virtio-serial</code> driver is installed on the Windows guest. For more information about installing <code class="literal">virtio</code> drivers, see: <a class="link" href="#installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" title="21.2.1.3. Installing virtio drivers on a Windows guest">Installing virtio drivers on a Windows guest</a>.
							</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								On your Windows VM, navigate to the <span class="strong strong"><strong>Services</strong></span> window.
							</p><p class="simpara">
								<span class="strong strong"><strong>Computer Management &gt; Services</strong></span>
							</p></li><li class="listitem">
								Ensure that the status of the <code class="literal">QEMU Guest Agent</code> service is <code class="literal">Running</code>.
							</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
								<a class="link" href="#virtualization-features-that-require-qemu-guest-agent_enabling-qemu-guest-agent-features-on-your-virtual-machines" title="2.4.3. Virtualization features that require QEMU Guest Agent">Virtualization features that require QEMU Guest Agent</a>
							</li></ul></div></section></section><section class="section" id="enabling-hyper-v-enlightenments_optimizing-windows-virtual-machines-on-rhel"><div class="titlepage"><div><div><h4 class="title">21.2.2. Enabling Hyper-V enlightenments</h4></div></div></div><p>
					Hyper-V enlightenments provide a method for KVM to emulate the Microsoft Hyper-V hypervisor. This improves the performance of Windows virtual machines.
				</p><p>
					The following sections provide information about the supported Hyper-V enlightenments and how to enable them.
				</p><section class="section" id="enabling-hyper-v-enlightenments-on-a-windows-virtual-machine-in-rhel-8_enabling-hyper-v-enlightenments"><div class="titlepage"><div><div><h5 class="title">21.2.2.1. Enabling Hyper-V enlightenments on a Windows virtual machine</h5></div></div></div><p>
						Hyper-V enlightenments provide better performance in a Windows virtual machine (VM) running in a RHEL 9 host. For instructions on how to enable them, see the following.
					</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
								Use the <code class="literal command">virsh edit</code> command to open the XML configuration of the VM. For example:
							</p><pre class="screen"># <span class="strong strong"><strong>virsh edit <span class="emphasis"><em>windows-vm</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
								Add the following <code class="literal">&lt;hyperv&gt;</code> sub-section to the <code class="literal">&lt;features&gt;</code> section of the XML:
							</p><pre class="programlisting language-xml">&lt;features&gt;
  [...]
  &lt;hyperv&gt;
    &lt;relaxed state='on'/&gt;
    &lt;vapic state='on'/&gt;
    &lt;spinlocks state='on' retries='8191'/&gt;
    &lt;vendor_id state='on' value='KVM Hv'/&gt;
    &lt;vpindex state='on'/&gt;
    &lt;runtime state='on' /&gt;
    &lt;synic state='on'/&gt;
    &lt;stimer state='on'&gt;
      &lt;direct state='on'/&gt;
    &lt;/stimer&gt;
    &lt;frequencies state='on'/&gt;
    &lt;reset state='on'/&gt;
    &lt;tlbflush state='on'/&gt;
    &lt;reenlightenment state='on'/&gt;
    &lt;ipi state='on'/&gt;
    &lt;evmcs state='on'/&gt;
  &lt;/hyperv&gt;
  [...]
&lt;/features&gt;</pre><p class="simpara">
								If the XML already contains a <code class="literal">&lt;hyperv&gt;</code> sub-section, modify it as shown above.
							</p></li><li class="listitem"><p class="simpara">
								Change the <code class="literal">clock</code> section of the configuration as follows:
							</p><pre class="programlisting language-xml">&lt;clock offset='localtime'&gt;
  ...
  &lt;timer name='hypervclock' present='yes'/&gt;
&lt;/clock&gt;</pre></li><li class="listitem">
								Save and exit the XML configuration.
							</li><li class="listitem">
								If the VM is running, restart it.
							</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Use the <code class="literal">virsh dumpxml</code> command to display the XML configuration of the running VM. If it includes the following segments, the Hyper-V enlightenments are enabled on the VM.
							</p><pre class="programlisting language-xml">&lt;hyperv&gt;
  &lt;relaxed state='on'/&gt;
  &lt;vapic state='on'/&gt;
  &lt;spinlocks state='on' retries='8191'/&gt;
  &lt;vendor_id state='on' value='KVM Hv'/&gt;
  &lt;vpindex state='on'/&gt;
  &lt;runtime state='on' /&gt;
  &lt;synic state='on'/&gt;
  &lt;frequencies state='on'/&gt;
  &lt;reset state='on'/&gt;
  &lt;tlbflush state='on'/&gt;
  &lt;reenlightenment state='on'/&gt;
  &lt;stimer state='on'&gt;
    &lt;direct state='on'/&gt;
  &lt;/stimer&gt;
  &lt;ipi state='on'/&gt;
  &lt;evmcs state='on'/&gt;
&lt;/hyperv&gt;

&lt;clock offset='localtime'&gt;
  ...
  &lt;timer name='hypervclock' present='yes'/&gt;
&lt;/clock&gt;</pre></li></ul></div></section><section class="section" id="configurable-hyper-v-enlightenments_enabling-hyper-v-enlightenments"><div class="titlepage"><div><div><h5 class="title">21.2.2.2. Configurable Hyper-V enlightenments</h5></div></div></div><p>
						You can configure certain Hyper-V features to optimize Windows VMs. The following table provides information about these configurable Hyper-V features and their values.
					</p><rh-table id="idm140237773312272"><table class="lt-4-cols lt-7-rows"><caption>Table 21.1. Configurable Hyper-V features</caption><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 33%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140237773306496" scope="col">Enlightenment</th><th align="left" valign="top" id="idm140237773305408" scope="col">Description</th><th align="left" valign="top" id="idm140237773304320" scope="col">Values</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140237773306496"> <p>
										evmcs
									</p>
									 </td><td align="left" valign="top" headers="idm140237773305408"> <p>
										Implements paravirtualized protocol between L0 (KVM) and L1 (Hyper-V) hypervisors, which enables faster L2 exits to the hypervisor.
									</p>
									 <rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
											This feature is exclusive to Intel processors.
										</p></div></rh-alert>
									 </td><td align="left" valign="top" headers="idm140237773304320"> <p>
										on, off
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140237773306496"> <p>
										frequencies
									</p>
									 </td><td align="left" valign="top" headers="idm140237773305408"> <p>
										Enables Hyper-V frequency Machine Specific Registers (MSRs).
									</p>
									 </td><td align="left" valign="top" headers="idm140237773304320"> <p>
										on, off
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140237773306496"> <p>
										ipi
									</p>
									 </td><td align="left" valign="top" headers="idm140237773305408"> <p>
										Enables paravirtualized inter processor interrupts (IPI) support.
									</p>
									 </td><td align="left" valign="top" headers="idm140237773304320"> <p>
										on, off
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140237773306496"> <p>
										reenlightenment
									</p>
									 </td><td align="left" valign="top" headers="idm140237773305408"> <p>
										Notifies when there is a time stamp counter (TSC) frequency change which only occurs during migration. It also allows the guest to keep using the old frequency until it is ready to switch to the new one.
									</p>
									 </td><td align="left" valign="top" headers="idm140237773304320"> <p>
										on, off
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140237773306496"> <p>
										relaxed
									</p>
									 </td><td align="left" valign="top" headers="idm140237773305408"> <p>
										Disables a Windows sanity check that commonly results in a BSOD when the VM is running on a heavily loaded host. This is similar to the Linux kernel option no_timer_check, which is automatically enabled when Linux is running on KVM.
									</p>
									 </td><td align="left" valign="top" headers="idm140237773304320"> <p>
										on, off
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140237773306496"> <p>
										runtime
									</p>
									 </td><td align="left" valign="top" headers="idm140237773305408"> <p>
										Sets processor time spent on running the guest code, and on behalf of the guest code.
									</p>
									 </td><td align="left" valign="top" headers="idm140237773304320"> <p>
										on, off
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140237773306496"> <p>
										spinlocks
									</p>
									 </td><td align="left" valign="top" headers="idm140237773305408"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
												Used by a VM’s operating system to notify Hyper-V that the calling virtual processor is attempting to acquire a resource that is potentially held by another virtual processor within the same partition.
											</li><li class="listitem">
												Used by Hyper-V to indicate to the virtual machine’s operating system the number of times a spinlock acquisition should be attempted before indicating an excessive spin situation to Hyper-V.
											</li></ul></div>
									 </td><td align="left" valign="top" headers="idm140237773304320"> <p>
										on, off
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140237773306496"> <p>
										stimer
									</p>
									 </td><td align="left" valign="top" headers="idm140237773305408"> <p>
										Enables synthetic timers for virtual processors. Note that certain Windows versions revert to using HPET (or even RTC when HPET is unavailable) when this enlightenment is not provided, which can lead to significant CPU consumption, even when the virtual CPU is idle.
									</p>
									 </td><td align="left" valign="top" headers="idm140237773304320"> <p>
										on, off
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140237773306496"> <p>
										stimer-direct
									</p>
									 </td><td align="left" valign="top" headers="idm140237773305408"> <p>
										Enables synthetic timers when an expiration event is delivered via a normal interrupt.
									</p>
									 </td><td align="left" valign="top" headers="idm140237773304320"> <p>
										on, off.
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140237773306496"> <p>
										synic
									</p>
									 </td><td align="left" valign="top" headers="idm140237773305408"> <p>
										Together with stimer, activates the synthetic timer. Windows 8 uses this feature in periodic mode.
									</p>
									 </td><td align="left" valign="top" headers="idm140237773304320"> <p>
										on, off
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140237773306496"> <p>
										time
									</p>
									 </td><td align="left" valign="top" headers="idm140237773305408"> <p>
										Enables the following Hyper-V-specific clock sources available to the VM,
									</p>
									 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
												MSR-based 82 Hyper-V clock source (HV_X64_MSR_TIME_REF_COUNT, 0x40000020)
											</li><li class="listitem">
												Reference TSC 83 page which is enabled via MSR (HV_X64_MSR_REFERENCE_TSC, 0x40000021)
											</li></ul></div>
									 </td><td align="left" valign="top" headers="idm140237773304320"> <p>
										on, off
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140237773306496"> <p>
										tlbflush
									</p>
									 </td><td align="left" valign="top" headers="idm140237773305408"> <p>
										Flushes the TLB of the virtual processors.
									</p>
									 </td><td align="left" valign="top" headers="idm140237773304320"> <p>
										on, off
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140237773306496"> <p>
										vapic
									</p>
									 </td><td align="left" valign="top" headers="idm140237773305408"> <p>
										Enables virtual APIC, which provides accelerated MSR access to the high-usage, memory-mapped Advanced Programmable Interrupt Controller (APIC) registers.
									</p>
									 </td><td align="left" valign="top" headers="idm140237773304320"> <p>
										on, off
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm140237773306496"> <p>
										vendor_id
									</p>
									 </td><td align="left" valign="top" headers="idm140237773305408"> <p>
										Sets the Hyper-V vendor id.
									</p>
									 </td><td align="left" valign="top" headers="idm140237773304320"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
												on, off
											</li><li class="listitem">
												Id value - string of up to 12 characters
											</li></ul></div>
									 </td></tr><tr><td align="left" valign="top" headers="idm140237773306496"> <p>
										vpindex
									</p>
									 </td><td align="left" valign="top" headers="idm140237773305408"> <p>
										Enables virtual processor index.
									</p>
									 </td><td align="left" valign="top" headers="idm140237773304320"> <p>
										on, off
									</p>
									 </td></tr></tbody></table></rh-table></section></section><section class="section" id="configuring-netkvm-driver-parameters_optimizing-windows-virtual-machines-on-rhel"><div class="titlepage"><div><div><h4 class="title">21.2.3. Configuring NetKVM driver parameters</h4></div></div></div><p>
					After the NetKVM driver is installed, you can configure it to better suit your environment. The parameters listed in the following procedure can be configured by using the Windows Device Manager (<code class="literal">devmgmt.msc</code>).
				</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
						Modifying the driver’s parameters causes Windows to reload that driver. This interrupts existing network activity.
					</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							The NetKVM driver is installed on the virtual machine.
						</p><p class="simpara">
							For more information, see <a class="link" href="#installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines_optimizing-windows-virtual-machines-on-rhel" title="21.2.1. Installing KVM paravirtualized drivers for Windows virtual machines">Installing KVM paravirtualized drivers for Windows virtual machines</a>.
						</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Open Windows Device Manager.
						</p><p class="simpara">
							For information about opening Device Manager, refer to the Windows documentation.
						</p></li><li class="listitem"><p class="simpara">
							Locate the <span class="strong strong"><strong>Red Hat VirtIO Ethernet Adapter</strong></span>.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									In the Device Manager window, click <span class="guibutton">+</span> next to Network adapters.
								</li><li class="listitem"><p class="simpara">
									Under the list of network adapters, double-click <span class="strong strong"><strong>Red Hat VirtIO Ethernet Adapter</strong></span>.
								</p><p class="simpara">
									The <span class="strong strong"><strong>Properties</strong></span> window for the device opens.
								</p></li></ol></div></li><li class="listitem"><p class="simpara">
							View the device parameters.
						</p><p class="simpara">
							In the <span class="strong strong"><strong>Properties</strong></span> window, click the <span class="strong strong"><strong>Advanced</strong></span> tab.
						</p></li><li class="listitem"><p class="simpara">
							Modify the device parameters.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Click the parameter you want to modify.
								</p><p class="simpara">
									Options for that parameter are displayed.
								</p></li><li class="listitem"><p class="simpara">
									Modify the options as needed.
								</p><p class="simpara">
									For information about the NetKVM parameter options, refer to <a class="link" href="#netkvm-driver-parameters_optimizing-windows-virtual-machines-on-rhel" title="21.2.4. NetKVM driver parameters">NetKVM driver parameters</a>.
								</p></li><li class="listitem">
									Click <span class="guibutton">OK</span> to save the changes.
								</li></ol></div></li></ol></div></section><section class="section" id="netkvm-driver-parameters_optimizing-windows-virtual-machines-on-rhel"><div class="titlepage"><div><div><h4 class="title">21.2.4. NetKVM driver parameters</h4></div></div></div><p>
					The following table provides information about the configurable NetKVM driver logging parameters.
				</p><rh-table id="idm140237771820944"><table class="lt-4-cols lt-7-rows"><caption>Table 21.2. Logging parameters</caption><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140237771816112" scope="col">Parameter</th><th align="left" valign="top" id="idm140237771815024" scope="col">Description 2</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140237771816112"> <p>
									Logging.Enable
								</p>
								 </td><td align="left" valign="top" headers="idm140237771815024"> <p>
									A Boolean value that determines whether logging is enabled. The default value is Enabled.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237771816112"> <p>
									Logging.Level
								</p>
								 </td><td align="left" valign="top" headers="idm140237771815024"> <p>
									An integer that defines the logging level. As the integer increases, so does the verbosity of the log.
								</p>
								 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											The default value is 0 (errors only).
										</li><li class="listitem">
											1-2 adds configuration messages.
										</li><li class="listitem">
											3-4 adds packet flow information.
										</li><li class="listitem">
											5-6 adds interrupt and DPC level trace information.
										</li></ul></div>
								 <rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
										High logging levels will slow down your virtual machine.
									</p></div></rh-alert>
								 </td></tr></tbody></table></rh-table><p>
					The following table provides information about the configurable NetKVM driver initial parameters.
				</p><rh-table id="idm140237771799408"><table class="lt-4-cols lt-7-rows"><caption>Table 21.3. Initial parameters</caption><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140237771794576" scope="col">Parameter</th><th align="left" valign="top" id="idm140237771793488" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140237771794576"> <p>
									Assign MAC
								</p>
								 </td><td align="left" valign="top" headers="idm140237771793488"> <p>
									A string that defines the locally-administered MAC address for the paravirtualized NIC. This is not set by default.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237771794576"> <p>
									Init.Do802.1PQ
								</p>
								 </td><td align="left" valign="top" headers="idm140237771793488"> <p>
									A Boolean value that enables Priority/VLAN tag population and removal support. The default value is Enabled.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237771794576"> <p>
									Init.MaxTxBuffers
								</p>
								 </td><td align="left" valign="top" headers="idm140237771793488"> <p>
									An integer that represents the number of TX ring descriptors that will be allocated. The value is limited by the size of Tx queue of QEMU.
								</p>
								 <p>
									The default value is 1024.
								</p>
								 <p>
									Valid values are: 16, 32, 64, 128, 256, 512, and 1024.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237771794576"> <p>
									Init.MaxRxBuffers
								</p>
								 </td><td align="left" valign="top" headers="idm140237771793488"> <p>
									An integer that represents the number of RX ring descriptors that will be allocated. The value is limited by the size of Tx queue of QEMU.
								</p>
								 <p>
									The default value is 1024.
								</p>
								 <p>
									Valid values are: 16, 32, 64, 128, 256, 512, 1024, 2048, and 4096.
								</p>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237771794576"> <p>
									Offload.Tx.Checksum
								</p>
								 </td><td align="left" valign="top" headers="idm140237771793488"> <p>
									Specifies the TX checksum offloading capability.
								</p>
								 <p>
									In Red Hat Enterprise Linux 9, the valid values for this parameter are:
								</p>
								 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											All (the default) which enables IP, TCP, and UDP checksum offloading for both IPv4 and IPv6
										</li><li class="listitem">
											TCP/UDP(v4,v6) which enables TCP and UDP checksum offloading for both IPv4 and IPv6
										</li><li class="listitem">
											TCP/UDP(v4) which enables TCP and UDP checksum offloading for IPv4 only
										</li><li class="listitem">
											TCP(v4) which enables only TCP checksum offloading for IPv4 only
										</li></ul></div>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237771794576"> <p>
									Offload.Rx.Checksum
								</p>
								 </td><td align="left" valign="top" headers="idm140237771793488"> <p>
									Specifies the RX checksum offloading capability.
								</p>
								 <p>
									In Red Hat Enterprise Linux 9, the valid values for this parameter are:
								</p>
								 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											All (the default) which enables IP, TCP, and UDP checksum offloading for both IPv4 and IPv6
										</li><li class="listitem">
											TCP/UDP(v4,v6) which enables TCP and UDP checksum offloading for both IPv4 and IPv6
										</li><li class="listitem">
											TCP/UDP(v4) which enables TCP and UDP checksum offloading for IPv4 only
										</li><li class="listitem">
											TCP(v4) which enables only TCP checksum offloading for IPv4 only
										</li></ul></div>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237771794576"> <p>
									Offload.Tx.LSO
								</p>
								 </td><td align="left" valign="top" headers="idm140237771793488"> <p>
									Specifies the TX large segments offloading (LSO) capability.
								</p>
								 <p>
									In Red Hat Enterprise Linux 9, the valid values for this parameter are:
								</p>
								 <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											Maximal (the default) which enables LSO offloading for both TCPv4 and TCPv6
										</li><li class="listitem">
											IPv4 which enables LSO offloading for TCPv4 only
										</li><li class="listitem">
											Disable which disables LSO offloading
										</li></ul></div>
								 </td></tr><tr><td align="left" valign="top" headers="idm140237771794576"> <p>
									MinRxBufferPercent
								</p>
								 </td><td align="left" valign="top" headers="idm140237771793488"> <p>
									Specifies minimal amount of available buffers in RX queue in percent of total amount of RX buffers. If the actual number of available buffers is lower than that value, the NetKVM driver indicates low resources condition to the operating system (requesting it to return the RX buffers as soon as possible)
								</p>
								 <p>
									Minimum value (default) - <code class="literal">0</code>, meaning the driver never indicates low resources condition.
								</p>
								 <p>
									Maximum value - <code class="literal">100</code>, meaning the driver indicates low resources condition all the time.
								</p>
								 </td></tr></tbody></table></rh-table><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://learn.microsoft.com/en-us/windows-hardware/drivers/network/enumeration-keywords">INF enumeration keywords</a>
						</li><li class="listitem">
							<a class="link" href="https://learn.microsoft.com/en-us/windows-hardware/drivers/network/keywords-that-can-be-edited">INF keywords that can be edited</a>
						</li></ul></div></section><section class="section" id="optimizing-background-processes-on-windows-virtual-machines_optimizing-windows-virtual-machines-on-rhel"><div class="titlepage"><div><div><h4 class="title">21.2.5. Optimizing background processes on Windows virtual machines</h4></div></div></div><p>
					To optimize the performance of a virtual machine (VM) running a Windows OS, you can configure or disable a variety of Windows processes.
				</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
						Certain processes might not work as expected if you change their configuration.
					</p></div></rh-alert><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
						You can optimize your Windows VMs by performing any combination of the following:
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Remove unused devices, such as USBs or CD-ROMs, and disable the ports.
						</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Disable background services, such as SuperFetch and Windows Search. For more information about stopping services, see <a class="link" href="https://docs.microsoft.com/en-us/windows-server/security/windows-services/security-guidelines-for-disabling-system-services-in-windows-server">Disabling system services</a> or <a class="link" href="https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.management/stop-service?view=powershell-7">Stop-Service</a>.
						</li><li class="listitem"><p class="simpara">
							Disable <code class="literal">useplatformclock</code>. To do so, run the following command,
						</p><pre class="screen"># <span class="strong strong"><strong>bcdedit /set useplatformclock No</strong></span></pre></li><li class="listitem">
							Review and disable unnecessary scheduled tasks, such as scheduled disk defragmentation. For more information about how to do so, see <a class="link" href="https://docs.microsoft.com/en-us/powershell/module/scheduledtasks/disable-scheduledtask?view=win10-ps">Disable Scheduled Tasks</a>.
						</li><li class="listitem">
							Make sure the disks are not encrypted.
						</li><li class="listitem">
							Reduce periodic activity of server applications. You can do so by editing the respective timers. For more information, see <a class="link" href="https://docs.microsoft.com/en-us/windows/win32/multimedia/multimedia-timers">Multimedia Timers</a>.
						</li><li class="listitem">
							Close the Server Manager application on the VM.
						</li><li class="listitem">
							Disable the antivirus software. Note that disabling the antivirus might compromise the security of the VM.
						</li><li class="listitem">
							Disable the screen saver.
						</li><li class="listitem">
							Keep the Windows OS on the sign-in screen when not in use.
						</li></ul></div></section></section><section class="section" id="enabling-standard-harware-security-on-windows-virtual-machines_installing-and-managing-windows-virtual-machines-on-rhel"><div class="titlepage"><div><div><h3 class="title">21.3. Enabling standard hardware security on Windows virtual machines</h3></div></div></div><p class="_abstract _abstract">
				To secure Windows virtual machines (VMs), you can enable basic level security by using the standard hardware capabilities of the Windows device.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Make sure you have installed the latest WHQL certified VirtIO drivers.
					</li><li class="listitem">
						Make sure the VM’s firmware supports UEFI boot.
					</li><li class="listitem"><p class="simpara">
						Install the <code class="literal">edk2-OVMF</code> package on your host machine.
					</p><pre class="screen"># <span class="strong strong"><strong>{PackageManagerCommand} install edk2-ovmf</strong></span></pre></li><li class="listitem"><p class="simpara">
						Install the <code class="literal">vTPM</code> packages on your host machine.
					</p><pre class="screen"># <span class="strong strong"><strong>{PackageManagerCommand} install swtpm libtpms</strong></span></pre></li><li class="listitem">
						Make sure the VM is using the Q35 machine architecture.
					</li><li class="listitem">
						Make sure you have the Windows installation media.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enable TPM 2.0 by adding the following parameters to the <code class="literal">&lt;devices&gt;</code> section in the VM’s XML configuration.
					</p><pre class="programlisting language-xml">&lt;devices&gt;
[...]
  &lt;tpm model='tpm-crb'&gt;
    &lt;backend type='emulator' version='2.0'/&gt;
  &lt;/tpm&gt;
[...]
&lt;/devices&gt;</pre></li><li class="listitem">
						Install Windows in UEFI mode. For more information about how to do so, see <a class="link" href="#creating-a-secureboot-virtual-machine_securing-virtual-machines-in-rhel" title="19.4. Creating a SecureBoot virtual machine">Creating a SecureBoot virtual machine</a>.
					</li><li class="listitem">
						Install the VirtIO drivers on the Windows VM. For more information about how to do so, see <a class="link" href="#installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines" title="21.2.1.3. Installing virtio drivers on a Windows guest">Installing virtio drivers on a Windows guest</a>.
					</li><li class="listitem">
						In UEFI, enable Secure Boot. For more information about how to do so, see <a class="link" href="https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/secure-boot-landing">Secure Boot</a>.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Ensure that the <span class="strong strong"><strong>Device Security</strong></span> page on your Windows machine displays the following message:
					</p><p class="simpara">
						<span class="strong strong"><strong>Settings &gt; Update &amp; Security &gt; Windows Security &gt; Device Security</strong></span>
					</p><pre class="screen"><span class="strong strong"><strong>Your device meets the requirements for standard hardware security.</strong></span></pre></li></ul></div></section><section class="section" id="proc_enabling-enhanced-hardware-security-on-windows-virtual-machines_installing-and-managing-windows-virtual-machines-on-rhel"><div class="titlepage"><div><div><h3 class="title">21.4. Enabling enhanced hardware security on Windows virtual machines</h3></div></div></div><p class="_abstract _abstract">
				To further secure Windows virtual machines (VMs), you can enable virtualization-based protection of code integrity, also known as Hypervisor-Protected Code Integrity (HVCI).
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Ensure that standard hardware security is enabled. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/securing-virtual-machines-in-rhel_configuring-and-managing-virtualization#enabling-standard-harware-security-on-windows-virtual-machines_securing-virtual-machines-in-rhel">Enabling standard hardware security on Windows virtual machines</a>.
					</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Ensure you have enabled Hyper-V enlightenments. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/installing-and-managing-windows-virtual-machines-on-rhel_configuring-and-managing-virtualization#enabling-hyper-v-enlightenments_optimizing-windows-virtual-machines-on-rhel">Enabling Hyper-V enlightenments</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open the XML configuration of the Windows VM. The following example opens the configuration of the <span class="emphasis"><em>Example-L1</em></span> VM:
					</p><pre class="screen"># <span class="strong strong"><strong>virsh edit <span class="emphasis"><em>Example-L1</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Under the <code class="literal">&lt;cpu&gt;</code> section, specify the CPU mode and add the policy flag.
					</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									For Intel CPUs, enable the <code class="literal">vmx</code> policy flag.
								</li><li class="listitem">
									For AMD CPUs, enable the <code class="literal">svm</code> policy flag.
								</li><li class="listitem">
									If you do not wish to specify a custom CPU, you can set the <code class="literal">&lt;cpu mode&gt;</code> as <code class="literal">host-passthrough</code>.
								</li></ul></div></div></rh-alert><pre class="programlisting language-xml">&lt;cpu mode='custom' match='exact' check='partial'&gt;
    &lt;model fallback='allow'&gt;Skylake-Client-IBRS&lt;/model&gt;
    &lt;topology sockets='1' dies='1' cores='4' threads='1'/&gt;
    &lt;feature policy='require' name='vmx'/&gt;
&lt;/cpu&gt;</pre></li><li class="listitem">
						Save the XML configuration and reboot the VM.
					</li><li class="listitem"><p class="simpara">
						On the VMs operating system, navigate to the <span class="strong strong"><strong>Core isolation details</strong></span> page:
					</p><p class="simpara">
						<span class="strong strong"><strong>Settings &gt; Update &amp; Security &gt; Windows Security &gt; Device Security &gt; Core isolation details</strong></span>
					</p></li><li class="listitem">
						Toggle the switch to enable <span class="strong strong"><strong>Memory Integrity</strong></span>.
					</li><li class="listitem">
						Reboot the VM.
					</li></ol></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					For other methods of enabling HVCI, see the relevant Microsoft documentation.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Ensure that the <span class="strong strong"><strong>Device Security</strong></span> page on your Windows VM displays the following message:
					</p><p class="simpara">
						<span class="strong strong"><strong>Settings &gt; Update &amp; Security &gt; Windows Security &gt; Device Security</strong></span>
					</p><pre class="screen"><span class="strong strong"><strong>Your device meets the requirements for enhanced hardware security.</strong></span></pre></li><li class="listitem"><p class="simpara">
						Alternatively, check System Information about the Windows VM:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Run <code class="literal">msinfo32.exe</code> in a command prompt.
							</li><li class="listitem">
								Check if <span class="strong strong"><strong>Credential Guard, Hypervisor enforced Code Integrity</strong></span> is listed under <span class="strong strong"><strong>Virtualization-based security Services Running</strong></span>.
							</li></ol></div></li></ul></div></section><section class="section" id="next-steps-installing-and-managing-windows-virtual-machines-on-rhel"><div class="titlepage"><div><div><h3 class="title">21.5. Next steps</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To use utilities for accessing, editing, and creating virtual machine disks or other disk images for a Windows VM, install the <code class="literal package">libguestfs-tools</code> and <code class="literal package">libguestfs-winsupport</code> packages on the host machine:
					</p><pre class="screen">$ <span class="strong strong"><strong>sudo dnf install libguestfs-tools libguestfs-winsupport</strong></span></pre></li><li class="listitem"><p class="simpara">
						To use utilities for accessing, editing, and creating virtual machine disks or other disk images for a Windows VM, install the <code class="literal package">guestfs-tools</code> and <code class="literal package">guestfs-winsupport</code> packages on the host machine:
					</p><pre class="screen">$ <span class="strong strong"><strong>sudo dnf install guestfs-tools guestfs-winsupport</strong></span></pre></li><li class="listitem">
						To share files between your RHEL 9 host and its Windows VMs, you can use <a class="link" href="#sharing-files-between-the-host-and-its-virtual-machines-using-virtiofs_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs" title="20.2.1. Sharing files between the host and its virtual machines by using virtiofs">virtiofs</a> or <a class="link" href="#sharing-files-between-the-host-and-its-virtual-machines-using-NFS_sharing-files-between-the-host-and-its-virtual-machines" title="20.1. Sharing files between the host and its virtual machines by using NFS">NFS</a>.
					</li></ul></div></section></section><section class="chapter" id="creating-nested-virtual-machines_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h2 class="title">Chapter 22. Creating nested virtual machines</h2></div></div></div><p>
			You can use nested virtual machines (VMs) if you require a different host operating system than what your local host is running. This eliminates the need for additional physical hardware.
		</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
				In most environments, nested virtualization is only available as a <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview</a> in RHEL 9.
			</p><p>
				For detailed descriptions of the supported and unsupported environments, see <a class="link" href="#support-limitations-for-nested-virtualization_creating-nested-virtual-machines" title="22.2. Support limitations for nested virtualization">Support limitations for nested virtualization</a>.
			</p></div></rh-alert><section class="section" id="what-is-nested-virtualization_creating-nested-virtual-machines"><div class="titlepage"><div><div><h3 class="title">22.1. What is nested virtualization?</h3></div></div></div><p>
				With nested virtualization, you can run virtual machines (VMs) within other VMs. A standard VM that runs on a physical host can also act as a second hypervisor and create its own VMs.
			</p><div class="variablelist"><p class="title"><strong>Nested virtualization terminology</strong></p><dl class="variablelist"><dt><span class="term">Level 0 (<code class="literal">L0</code>)</span></dt><dd>
							A physical host, a bare-metal machine.
						</dd><dt><span class="term">Level 1 (<code class="literal">L1</code>)</span></dt><dd>
							A standard VM, running on an <code class="literal">L0</code> physical host, that can act as an additional virtual host.
						</dd><dt><span class="term">Level 2 (<code class="literal">L2</code>)</span></dt><dd><p class="simpara">
							A nested VM running on an <code class="literal">L1</code> virtual host.
						</p><p class="simpara">
							<span class="strong strong"><strong>Important:</strong></span> The second level of virtualization severely limits the performance of an <code class="literal">L2</code> VM. For this reason, nested virtualization is primarily intended for development and testing scenarios, such as:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Debugging hypervisors in a constrained environment
								</li><li class="listitem">
									Testing larger virtual deployments on a limited amount of physical resources
								</li></ul></div></dd></dl></div><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					In most environments, nested virtualization is only available as a <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview</a> in RHEL 9.
				</p><p>
					For detailed descriptions of the supported and unsupported environments, see <a class="link" href="#support-limitations-for-nested-virtualization_creating-nested-virtual-machines" title="22.2. Support limitations for nested virtualization">Support limitations for nested virtualization</a>.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#support-limitations-for-nested-virtualization_creating-nested-virtual-machines" title="22.2. Support limitations for nested virtualization">Support limitations for nested virtualization</a>
					</li></ul></div></section><section class="section" id="support-limitations-for-nested-virtualization_creating-nested-virtual-machines"><div class="titlepage"><div><div><h3 class="title">22.2. Support limitations for nested virtualization</h3></div></div></div><p>
				In most environments, nested virtualization is only available as a Technology Preview in RHEL 9.
			</p><p>
				However, you can use a Windows virtual machine (VM) with the Windows Subsystem for Linux (WSL2) to create a virtual Linux environment inside the Windows VM. This use case is fully supported on RHEL 9 under specific conditions.
			</p><p>
				To learn more about the relevant terminology for nested virtualization, see <a class="link" href="#what-is-nested-virtualization_creating-nested-virtual-machines" title="22.1. What is nested virtualization?">What is nested virtualization?</a>
			</p><div class="formalpara"><p class="title"><strong>Supported environments</strong></p><p>
					To create a supported deployment of nested virtualization, create an <code class="literal">L1</code> Windows VM on a RHEL 9 <code class="literal">L0</code> host and use WSL2 to create a virtual Linux environment inside the <code class="literal">L1</code> Windows VM. Currently, this is the only supported nested environment.
				</p></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					The <code class="literal">L0</code> host must be an Intel or AMD system. Other architectures, such as ARM or IBM Z, are currently not supported.
				</p></div></rh-alert><p>
				You must use only the following operating system versions:
			</p><rh-table><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140237772935456" scope="col"><span class="strong strong"><strong>On the <code class="literal">L0</code> host</strong></span>:</th><th align="left" valign="top" id="idm140237772933264" scope="col"><span class="strong strong"><strong>On the <code class="literal">L1</code> VMs</strong></span>:</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140237772935456"> <p>
								RHEL 9.2 and later
							</p>
							 </td><td align="left" valign="top" headers="idm140237772933264"> <p>
								Windows Server 2019 with WSL2
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237772935456"> </td><td align="left" valign="top" headers="idm140237772933264"> <p>
								Windows Server 2022 with WSL2
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237772935456"> </td><td align="left" valign="top" headers="idm140237772933264"> <p>
								Windows 10 with WSL2
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237772935456"> </td><td align="left" valign="top" headers="idm140237772933264"> <p>
								Windows 11 with WSL2
							</p>
							 </td></tr></tbody></table></rh-table><p>
				See <a class="link" href="https://learn.microsoft.com/en-us/windows/wsl/install">Microsoft documentation</a> for instructions on installing WSL2 and choosing supported Linux distributions.
			</p><p>
				To create a supported nested environment, use one of the following procedures:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#creating-a-nested-virtual-machine-on-intel_creating-nested-virtual-machines" title="22.3. Creating a nested virtual machine on Intel">Creating a nested virtual machine on Intel</a>
					</li><li class="listitem">
						<a class="link" href="#creating-a-nested-virtual-machine-on-amd_creating-nested-virtual-machines" title="22.4. Creating a nested virtual machine on AMD">Creating a nested virtual machine on AMD</a>
					</li></ul></div><div class="formalpara"><p class="title"><strong>Technology Preview environments</strong></p><p>
					These nested environments are available only as a Technology Preview and are not supported.
				</p></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					The <code class="literal">L0</code> host must be an Intel, AMD, or IBM Z system. Nested virtualization currently does not work on other architectures, such as ARM.
				</p></div></rh-alert><p>
				You must use only the following operating system versions:
			</p><rh-table><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 33%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140237772370064" scope="col"><span class="strong strong"><strong>On the <code class="literal">L0</code> host</strong></span>:</th><th align="left" valign="top" id="idm140237772367872" scope="col"><span class="strong strong"><strong>On the <code class="literal">L1</code> VMs</strong></span>:</th><th align="left" valign="top" id="idm140237772365680" scope="col"><span class="strong strong"><strong>On the <code class="literal">L2</code> VMs</strong></span>:</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140237772370064"> <p>
								RHEL 9.2 and later
							</p>
							 </td><td align="left" valign="top" headers="idm140237772367872"> <p>
								RHEL 8.8 and later
							</p>
							 </td><td align="left" valign="top" headers="idm140237772365680"> <p>
								RHEL 8.8 and later
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237772370064"> </td><td align="left" valign="top" headers="idm140237772367872"> <p>
								RHEL 9.2 and later
							</p>
							 </td><td align="left" valign="top" headers="idm140237772365680"> <p>
								RHEL 9.2 and later
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237772370064"> </td><td align="left" valign="top" headers="idm140237772367872"> <p>
								Windows Server 2016 with Hyper-V
							</p>
							 </td><td align="left" valign="top" headers="idm140237772365680"> <p>
								Windows Server 2019
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237772370064"> </td><td align="left" valign="top" headers="idm140237772367872"> <p>
								Windows Server 2019 with Hyper-V
							</p>
							 </td><td align="left" valign="top" headers="idm140237772365680"> <p>
								Windows Server 2022
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237772370064"> </td><td align="left" valign="top" headers="idm140237772367872"> <p>
								Windows Server 2022 with Hyper-V
							</p>
							 </td><td align="left" valign="top" headers="idm140237772365680"> </td></tr><tr><td align="left" valign="top" headers="idm140237772370064"> </td><td align="left" valign="top" headers="idm140237772367872"> <p>
								Windows 10 with Hyper-V
							</p>
							 </td><td align="left" valign="top" headers="idm140237772365680"> </td></tr><tr><td align="left" valign="top" headers="idm140237772370064"> </td><td align="left" valign="top" headers="idm140237772367872"> <p>
								Windows 11 with Hyper-V
							</p>
							 </td><td align="left" valign="top" headers="idm140237772365680"> </td></tr></tbody></table></rh-table><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					Creating RHEL <code class="literal">L1</code> VMs is not tested when used in other Red Hat virtualization offerings. These include:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Red Hat Virtualization
						</li><li class="listitem">
							Red Hat OpenStack Platform
						</li><li class="listitem">
							OpenShift Virtualization
						</li></ul></div></div></rh-alert><p>
				To create a Technology Preview nested environment, use one of the following procedures:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#creating-a-nested-virtual-machine-on-intel_creating-nested-virtual-machines" title="22.3. Creating a nested virtual machine on Intel">Creating a nested virtual machine on Intel</a>
					</li><li class="listitem">
						<a class="link" href="#creating-a-nested-virtual-machine-on-amd_creating-nested-virtual-machines" title="22.4. Creating a nested virtual machine on AMD">Creating a nested virtual machine on AMD</a>
					</li><li class="listitem">
						<a class="link" href="#creating-a-nested-virtual-machine-on-ibm-z_creating-nested-virtual-machines" title="22.5. Creating a nested virtual machine on IBM Z">Creating a nested virtual machine on IBM Z</a>
					</li></ul></div><p>
				<span class="strong strong"><strong>Hypervisor limitations</strong></span>
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Currently, Red Hat tests nesting only on RHEL-KVM. When RHEL is used as the <code class="literal">L0</code> hypervisor, you can use RHEL or Windows as the <code class="literal">L1</code> hypervisor.
					</li><li class="listitem">
						When using an <code class="literal">L1</code> RHEL VM on a non-KVM <code class="literal">L0</code> hypervisor, such as VMware ESXi or Amazon Web Services (AWS), creating <code class="literal">L2</code> VMs in the RHEL guest operating system has not been tested and might not work.
					</li></ul></div><p>
				<span class="strong strong"><strong>Feature limitations</strong></span>
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Use of <code class="literal">L2</code> VMs as hypervisors and creating <code class="literal">L3</code> guests has not been properly tested and is not expected to work.
					</li><li class="listitem">
						Migrating VMs currently does not work on AMD systems if nested virtualization has been enabled on the <code class="literal">L0</code> host.
					</li><li class="listitem"><p class="simpara">
						On an IBM Z system, huge-page backing storage and nested virtualization cannot be used at the same time.
					</p><pre class="literallayout"># <span class="strong strong"><strong>modprobe kvm hpage=1 nested=1</strong></span>
modprobe: ERROR: could not insert 'kvm': Invalid argument
# <span class="strong strong"><strong>dmesg |tail -1</strong></span>
[90226.508366] kvm-s390: A KVM host that supports nesting cannot back its KVM guests with huge pages</pre></li><li class="listitem">
						Some features available on the <code class="literal">L0</code> host might be unavailable for the <code class="literal">L1</code> hypervisor.
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://learn.microsoft.com/en-gb/windows/wsl/about">What is Windows Subsystem for Linux?</a>
					</li><li class="listitem">
						<a class="link" href="#creating-a-nested-virtual-machine-on-intel_creating-nested-virtual-machines" title="22.3. Creating a nested virtual machine on Intel">Creating a nested virtual machine on Intel</a>
					</li><li class="listitem">
						<a class="link" href="#creating-a-nested-virtual-machine-on-amd_creating-nested-virtual-machines" title="22.4. Creating a nested virtual machine on AMD">Creating a nested virtual machine on AMD</a>
					</li><li class="listitem">
						<a class="link" href="#creating-a-nested-virtual-machine-on-ibm-z_creating-nested-virtual-machines" title="22.5. Creating a nested virtual machine on IBM Z">Creating a nested virtual machine on IBM Z</a>
					</li></ul></div></section><section class="section" id="creating-a-nested-virtual-machine-on-intel_creating-nested-virtual-machines"><div class="titlepage"><div><div><h3 class="title">22.3. Creating a nested virtual machine on Intel</h3></div></div></div><p>
				Follow the steps below to enable and configure nested virtualization on an Intel host.
			</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					In most environments, nested virtualization is only available as a <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview</a> in RHEL 9.
				</p><p>
					For detailed descriptions of the supported and unsupported environments, see <a class="link" href="#support-limitations-for-nested-virtualization_creating-nested-virtual-machines" title="22.2. Support limitations for nested virtualization">Support limitations for nested virtualization</a>.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						An L0 RHEL 9 host running an L1 virtual machine (VM).
					</li><li class="listitem">
						The hypervisor CPU must support nested virtualization. To verify, use the <code class="literal">cat /proc/cpuinfo</code> command on the L0 hypervisor. If the output of the command includes the <code class="literal">vmx</code> and <code class="literal">ept</code> flags, creating L2 VMs is possible. This is generally the case on Intel Xeon v3 cores and later.
					</li><li class="listitem"><p class="simpara">
						Ensure that nested virtualization is enabled on the L0 host:
					</p><pre class="screen"># <span class="strong strong"><strong>cat /sys/module/kvm_intel/parameters/nested</strong></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								If the command returns <span class="strong strong"><strong>1</strong></span> or <span class="strong strong"><strong>Y</strong></span>, the feature is enabled. Skip the remaining prerequisite steps, and continue with the Procedure section.
							</li><li class="listitem"><p class="simpara">
								If the command returns <span class="strong strong"><strong>0</strong></span> or <span class="strong strong"><strong>N</strong></span> but your system supports nested virtualization, use the following steps to enable the feature.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
										Unload the <code class="literal">kvm_intel</code> module:
									</p><pre class="screen"># <span class="strong strong"><strong>modprobe -r kvm_intel</strong></span></pre></li><li class="listitem"><p class="simpara">
										Activate the nesting feature:
									</p><pre class="screen"># <span class="strong strong"><strong>modprobe kvm_intel nested=1</strong></span></pre></li><li class="listitem"><p class="simpara">
										The nesting feature is now enabled, but only until the next reboot of the L0 host. To enable it permanently, add the following line to the <code class="literal">/etc/modprobe.d/kvm.conf</code> file:
									</p><pre class="screen">options kvm_intel nested=1</pre></li></ol></div></li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Configure your L1 VM for nested virtualization.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Open the XML configuration of the VM. The following example opens the configuration of the <span class="emphasis"><em>Intel-L1</em></span> VM:
							</p><pre class="screen"># <span class="strong strong"><strong>virsh edit <span class="emphasis"><em>Intel-L1</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
								Configure the VM to use <code class="literal">host-passthrough</code> CPU mode by editing the <code class="literal">&lt;cpu&gt;</code> element:
							</p><pre class="screen">&lt;cpu <span class="strong strong"><strong>mode='host-passthrough'</strong></span>/&gt;</pre><p class="simpara">
								If you require the VM to use a specific CPU model, configure the VM to use <code class="literal">custom</code> CPU mode. Inside the <code class="literal">&lt;cpu&gt;</code> element, add a <code class="literal">&lt;feature policy='require' name='vmx'/&gt;</code> element and a <code class="literal">&lt;model&gt;</code> element with the CPU model specified inside. For example:
							</p><pre class="screen">&lt;cpu <span class="strong strong"><strong>mode ='custom'</strong></span> match ='exact' check='partial'&gt;
  &lt;model fallback='allow'&gt;<span class="strong strong"><strong>Haswell-noTSX</strong></span>&lt;/model&gt;
  <span class="strong strong"><strong>&lt;feature policy='require' name='vmx'/&gt;</strong></span>
  ...
&lt;/cpu&gt;</pre></li></ol></div></li><li class="listitem">
						Create an L2 VM within the L1 VM. To do this, follow the same procedure as when <a class="link" href="#assembly_creating-virtual-machines_configuring-and-managing-virtualization" title="Chapter 3. Creating virtual machines">creating the L1 VM</a>.
					</li></ol></div></section><section class="section" id="creating-a-nested-virtual-machine-on-amd_creating-nested-virtual-machines"><div class="titlepage"><div><div><h3 class="title">22.4. Creating a nested virtual machine on AMD</h3></div></div></div><p>
				Follow the steps below to enable and configure nested virtualization on an AMD host.
			</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					In most environments, nested virtualization is only available as a <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview</a> in RHEL 9.
				</p><p>
					For detailed descriptions of the supported and unsupported environments, see <a class="link" href="#support-limitations-for-nested-virtualization_creating-nested-virtual-machines" title="22.2. Support limitations for nested virtualization">Support limitations for nested virtualization</a>.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						An L0 RHEL 9 host running an L1 virtual machine (VM).
					</li><li class="listitem">
						The hypervisor CPU must support nested virtualization. To verify, use the <code class="literal">cat /proc/cpuinfo</code> command on the L0 hypervisor. If the output of the command includes the <code class="literal">svm</code> and <code class="literal">npt</code> flags, creating L2 VMs is possible. This is generally the case on AMD EPYC cores and later.
					</li><li class="listitem"><p class="simpara">
						Ensure that nested virtualization is enabled on the L0 host:
					</p><pre class="screen"># <span class="strong strong"><strong>cat /sys/module/kvm_amd/parameters/nested</strong></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								If the command returns <span class="strong strong"><strong>1</strong></span> or <span class="strong strong"><strong>Y</strong></span>, the feature is enabled. Skip the remaining prerequisite steps, and continue with the Procedure section.
							</li><li class="listitem"><p class="simpara">
								If the command returns <span class="strong strong"><strong>0</strong></span> or <span class="strong strong"><strong>N</strong></span>, use the following steps to enable the feature.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Stop all running VMs on the L0 host.
									</li><li class="listitem"><p class="simpara">
										Unload the <code class="literal">kvm_amd</code> module:
									</p><pre class="screen"># <span class="strong strong"><strong>modprobe -r kvm_amd</strong></span></pre></li><li class="listitem"><p class="simpara">
										Activate the nesting feature:
									</p><pre class="screen"># <span class="strong strong"><strong>modprobe kvm_amd nested=1</strong></span></pre></li><li class="listitem"><p class="simpara">
										The nesting feature is now enabled, but only until the next reboot of the L0 host. To enable it permanently, add the following to the <code class="literal">/etc/modprobe.d/kvm.conf</code> file:
									</p><pre class="screen">options kvm_amd nested=1</pre></li></ol></div></li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Configure your L1 VM for nested virtualization.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Open the XML configuration of the VM. The following example opens the configuration of the <span class="emphasis"><em>AMD-L1</em></span> VM:
							</p><pre class="screen"># <span class="strong strong"><strong>virsh edit <span class="emphasis"><em>AMD-L1</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
								Configure the VM to use <code class="literal">host-passthrough</code> CPU mode by editing the <code class="literal">&lt;cpu&gt;</code> element:
							</p><pre class="screen">&lt;cpu <span class="strong strong"><strong>mode='host-passthrough'</strong></span>/&gt;</pre><p class="simpara">
								If you require the VM to use a specific CPU model, configure the VM to use <code class="literal">custom</code> CPU mode. Inside the <code class="literal">&lt;cpu&gt;</code> element, add a <code class="literal">&lt;feature policy='require' name='svm'/&gt;</code> element and a <code class="literal">&lt;model&gt;</code> element with the CPU model specified inside. For example:
							</p><pre class="screen">&lt;cpu <span class="strong strong"><strong>mode="custom"</strong></span> match="exact" check="none"&gt;
  &lt;model fallback="allow"&gt;<span class="strong strong"><strong>EPYC-IBPB</strong></span>&lt;/model&gt;
  <span class="strong strong"><strong>&lt;feature policy="require" name="svm"/&gt;</strong></span>
  ...
&lt;/cpu&gt;</pre></li></ol></div></li><li class="listitem">
						Create an L2 VM within the L1 VM. To do this, follow the same procedure as when <a class="link" href="#assembly_creating-virtual-machines_configuring-and-managing-virtualization" title="Chapter 3. Creating virtual machines">creating the L1 VM</a>.
					</li></ol></div></section><section class="section" id="creating-a-nested-virtual-machine-on-ibm-z_creating-nested-virtual-machines"><div class="titlepage"><div><div><h3 class="title">22.5. Creating a nested virtual machine on IBM Z</h3></div></div></div><p>
				Follow the steps below to enable and configure nested virtualization on an IBM Z host.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					IBM Z does not really provide a bare-metal <code class="literal">L0</code> host. Instead, user systems are set up on a logical partition (LPAR), which is already a virtualized system, so it is often referred to as <code class="literal">L1</code>. However, for better alignment with other architectures in this guide, the following steps refer to IBM Z as if it provides an <code class="literal">L0</code> host.
				</p><p>
					To learn more about nested virtualization, see: <a class="link" href="#what-is-nested-virtualization_creating-nested-virtual-machines" title="22.1. What is nested virtualization?">What is nested virtualization?</a>
				</p></div></rh-alert><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					In most environments, nested virtualization is only available as a <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview</a> in RHEL 9.
				</p><p>
					For detailed descriptions of the supported and unsupported environments, see <a class="link" href="#support-limitations-for-nested-virtualization_creating-nested-virtual-machines" title="22.2. Support limitations for nested virtualization">Support limitations for nested virtualization</a>.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						An L0 RHEL 9 host running an L1 virtual machine (VM).
					</li><li class="listitem">
						The hypervisor CPU must support nested virtualization. To verify this is the case, use the <code class="literal">cat /proc/cpuinfo</code> command on the L0 hypervisor. If the output of the command includes the <code class="literal">sie</code> flag, creating L2 VMs is possible.
					</li><li class="listitem"><p class="simpara">
						Ensure that nested virtualization is enabled on the L0 host:
					</p><pre class="screen"># <span class="strong strong"><strong>cat /sys/module/kvm/parameters/nested</strong></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								If the command returns <span class="strong strong"><strong>1</strong></span> or <span class="strong strong"><strong>Y</strong></span>, the feature is enabled. Skip the remaining prerequisite steps, and continue with the Procedure section.
							</li><li class="listitem"><p class="simpara">
								If the command returns <span class="strong strong"><strong>0</strong></span> or <span class="strong strong"><strong>N</strong></span>, use the following steps to enable the feature.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Stop all running VMs on the L0 host.
									</li><li class="listitem"><p class="simpara">
										Unload the <code class="literal">kvm</code> module:
									</p><pre class="screen"># <span class="strong strong"><strong>modprobe -r kvm</strong></span></pre></li><li class="listitem"><p class="simpara">
										Activate the nesting feature:
									</p><pre class="screen"># <span class="strong strong"><strong>modprobe kvm nested=1</strong></span></pre></li><li class="listitem"><p class="simpara">
										The nesting feature is now enabled, but only until the next reboot of the L0 host. To enable it permanently, add the following line to the <code class="literal">/etc/modprobe.d/kvm.conf</code> file:
									</p><pre class="screen">options kvm nested=1</pre></li></ol></div></li></ul></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Create an L2 VM within the L1 VM. To do this, follow the same procedure as when <a class="link" href="#assembly_creating-virtual-machines_configuring-and-managing-virtualization" title="Chapter 3. Creating virtual machines">creating the L1 VM</a>.
					</li></ul></div></section></section><section class="chapter" id="diagnosing-virtual-machine-problems_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h2 class="title">Chapter 23. Diagnosing virtual machine problems</h2></div></div></div><p>
			When working with virtual machines (VMs), you may encounter problems with varying levels of severity. Some problems may have a quick and easy fix, while for others, you may have to capture VM-related data and logs to report or diagnose the problems.
		</p><p>
			The following sections provide detailed information about generating logs and diagnosing some common VM problems, as well as about reporting these problems.
		</p><section class="section" id="generating-virtual-machine-debug-logs_diagnosing-virtual-machine-problems"><div class="titlepage"><div><div><h3 class="title">23.1. Generating libvirt debug logs</h3></div></div></div><p>
				To diagnose virtual machine (VM) problems, it is helpful to generate and review libvirt debug logs. Attaching debug logs is also useful when asking for support to resolve VM-related problems.
			</p><p>
				The following sections explain <a class="link" href="#understanding-virtual-machine-debug-logs_generating-virtual-machine-debug-logs" title="23.1.1. Understanding libvirt debug logs">what debug logs are</a>, how you can <a class="link" href="#enabling-persistent-settings-for-virtual-machine-debug-logs_generating-virtual-machine-debug-logs" title="23.1.2. Enabling persistent settings for libvirt debug logs">set them to be persistent</a>, <a class="link" href="#enabling-virtual-machine-debug-logs-during-runtime_generating-virtual-machine-debug-logs" title="23.1.3. Enabling libvirt debug logs during runtime">enable them during runtime</a>, and <a class="link" href="#attaching-virtual-machine-debug-logs_generating-virtual-machine-debug-logs" title="23.1.4. Attaching libvirt debug logs to support requests">attach them</a> when reporting problems.
			</p><section class="section" id="understanding-virtual-machine-debug-logs_generating-virtual-machine-debug-logs"><div class="titlepage"><div><div><h4 class="title">23.1.1. Understanding libvirt debug logs</h4></div></div></div><p>
					Debug logs are text files that contain data about events that occur during virtual machine (VM) runtime. The logs provide information about fundamental server-side functionalities, such as host libraries and the libvirt daemon. The log files also contain the standard error output (<code class="literal">stderr</code>) of all running VMs.
				</p><p>
					Debug logging is not enabled by default and has to be enabled when libvirt starts. You can enable logging for a single session or <a class="link" href="#enabling-persistent-settings-for-virtual-machine-debug-logs_generating-virtual-machine-debug-logs" title="23.1.2. Enabling persistent settings for libvirt debug logs">persistently</a>. You can also enable logging when a libvirt daemon session is already running by <a class="link" href="#enabling-virtual-machine-debug-logs-during-runtime_generating-virtual-machine-debug-logs" title="23.1.3. Enabling libvirt debug logs during runtime">modifying the daemon run-time settings</a>.
				</p><p>
					<a class="link" href="#attaching-virtual-machine-debug-logs_generating-virtual-machine-debug-logs" title="23.1.4. Attaching libvirt debug logs to support requests">Attaching the libvirt debug logs</a> is also useful when requesting support with a VM problem.
				</p></section><section class="section" id="enabling-persistent-settings-for-virtual-machine-debug-logs_generating-virtual-machine-debug-logs"><div class="titlepage"><div><div><h4 class="title">23.1.2. Enabling persistent settings for libvirt debug logs</h4></div></div></div><p>
					You can configure libvirt debug logging to be automatically enabled whenever libvirt starts. By default, <code class="literal">virtqemud</code> is the main libvirt daemon in RHEL 9. To make persistent changes in the libvirt configuration, you must edit the <code class="literal">virtqemud.conf</code> file, located in the <code class="literal">/etc/libvirt</code> directory.
				</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
						In some cases, for example when you upgrade from RHEL 8, <code class="literal">libvirtd</code> might still be the enabled libvirt daemon. In that case, you must edit the <code class="literal">libvirtd.conf</code> file instead.
					</p></div></rh-alert><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Open the <code class="literal">virtqemud.conf</code> file in an editor.
						</li><li class="listitem"><p class="simpara">
							Replace or set the filters according to your requirements.
						</p><rh-table id="idm140237781428976"><table class="lt-4-cols lt-7-rows"><caption>Table 23.1. Debugging filter values</caption><colgroup><col style="width: 10%; " class="col_1"><!--Empty--><col style="width: 90%; " class="col_2"><!--Empty--></colgroup><tbody><tr><td align="left" valign="top"> <p>
											<span class="strong strong"><strong>1</strong></span>
										</p>
										 </td><td align="left" valign="top"> <p>
											logs all messages generated by libvirt.
										</p>
										 </td></tr><tr><td align="left" valign="top"> <p>
											<span class="strong strong"><strong>2</strong></span>
										</p>
										 </td><td align="left" valign="top"> <p>
											logs all non-debugging information.
										</p>
										 </td></tr><tr><td align="left" valign="top"> <p>
											<span class="strong strong"><strong>3</strong></span>
										</p>
										 </td><td align="left" valign="top"> <p>
											logs all warning and error messages. This is the default value.
										</p>
										 </td></tr><tr><td align="left" valign="top"> <p>
											<span class="strong strong"><strong>4</strong></span>
										</p>
										 </td><td align="left" valign="top"> <p>
											logs only error messages.
										</p>
										 </td></tr></tbody></table></rh-table><div class="example" id="idm140237781406192"><p class="title"><strong>Example 23.1. Sample daemon settings for logging filters</strong></p><div class="example-contents"><p>
								The following settings:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Log all error and warning messages from the <code class="literal">remote</code>, <code class="literal">util.json</code>, and <code class="literal">rpc</code> layers
									</li><li class="listitem">
										Log only error messages from the <code class="literal">event</code> layer.
									</li><li class="listitem">
										Save the filtered logs to <code class="literal">/var/log/libvirt/libvirt.log</code>
									</li></ul></div><pre class="screen"><span class="strong strong"><strong>log_filters="3:remote 4:event 3:util.json 3:rpc"</strong></span>
<span class="strong strong"><strong>log_outputs="1:file:/var/log/libvirt/libvirt.log"</strong></span></pre></div></div></li><li class="listitem">
							Save and exit.
						</li><li class="listitem"><p class="simpara">
							Restart the libvirt daemon.
						</p><pre class="screen">$ <span class="strong strong"><strong>systemctl restart virtqemud.service</strong></span></pre></li></ol></div></section><section class="section" id="enabling-virtual-machine-debug-logs-during-runtime_generating-virtual-machine-debug-logs"><div class="titlepage"><div><div><h4 class="title">23.1.3. Enabling libvirt debug logs during runtime</h4></div></div></div><p>
					You can modify the libvirt daemon’s runtime settings to enable debug logs and save them to an output file.
				</p><p>
					This is useful when restarting the libvirt daemon is not possible because restarting fixes the problem, or because there is another process, such as migration or backup, running at the same time. Modifying runtime settings is also useful if you want to try a command without editing the configuration files or restarting the daemon.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Make sure the <code class="literal">libvirt-admin</code> package is installed.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Optional: Back up the active set of log filters.
						</p><pre class="screen"># <span class="strong strong"><strong>virt-admin -c virtqemud:///system daemon-log-filters &gt;&gt; virt-filters-backup</strong></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								It is recommended that you back up the active set of filters so that you can restore them after generating the logs. If you do not restore the filters, the messages will continue to be logged which may affect system performance.
							</p></div></rh-alert></li><li class="listitem"><p class="simpara">
							Use the <code class="literal">virt-admin</code> utility to enable debugging and set the filters according to your requirements.
						</p><rh-table id="idm140237781382208"><table class="lt-4-cols lt-7-rows"><caption>Table 23.2. Debugging filter values</caption><colgroup><col style="width: 10%; " class="col_1"><!--Empty--><col style="width: 90%; " class="col_2"><!--Empty--></colgroup><tbody><tr><td align="left" valign="top"> <p>
											<span class="strong strong"><strong>1</strong></span>
										</p>
										 </td><td align="left" valign="top"> <p>
											logs all messages generated by libvirt.
										</p>
										 </td></tr><tr><td align="left" valign="top"> <p>
											<span class="strong strong"><strong>2</strong></span>
										</p>
										 </td><td align="left" valign="top"> <p>
											logs all non-debugging information.
										</p>
										 </td></tr><tr><td align="left" valign="top"> <p>
											<span class="strong strong"><strong>3</strong></span>
										</p>
										 </td><td align="left" valign="top"> <p>
											logs all warning and error messages. This is the default value.
										</p>
										 </td></tr><tr><td align="left" valign="top"> <p>
											<span class="strong strong"><strong>4</strong></span>
										</p>
										 </td><td align="left" valign="top"> <p>
											logs only error messages.
										</p>
										 </td></tr></tbody></table></rh-table><div class="example" id="idm140237781359424"><p class="title"><strong>Example 23.2. Sample virt-admin setting for logging filters</strong></p><div class="example-contents"><p>
								The following command:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Logs all error and warning messages from the <code class="literal">remote</code>, <code class="literal">util.json</code>, and <code class="literal">rpc</code> layers
									</li><li class="listitem">
										Logs only error messages from the <code class="literal">event</code> layer.
									</li></ul></div><pre class="screen"># <span class="strong strong"><strong>virt-admin -c virtqemud:///system daemon-log-filters "3:remote 4:event 3:util.json 3:rpc"</strong></span></pre></div></div></li><li class="listitem"><p class="simpara">
							Use the <code class="literal">virt-admin</code> utility to save the logs to a specific file or directory.
						</p><p class="simpara">
							For example, the following command saves the log output to the <code class="literal">libvirt.log</code> file in the <code class="literal">/var/log/libvirt/</code> directory.
						</p><pre class="screen"># <span class="strong strong"><strong>virt-admin -c virtqemud:///system daemon-log-outputs "1:file:/var/log/libvirt/libvirt.log"</strong></span></pre></li><li class="listitem"><p class="simpara">
							Optional: You can also remove the filters to generate a log file that contains all VM-related information. However, it is not recommended since this file may contain a large amount of redundant information produced by libvirt’s modules.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Use the <code class="literal">virt-admin</code> utility to specify an empty set of filters.
								</p><pre class="screen"># <span class="strong strong"><strong>virt-admin -c virtqemud:///system daemon-log-filters</strong></span>
  Logging filters:</pre></li></ul></div></li><li class="listitem">
							Optional: Restore the filters to their original state using the backup file.<br> Perform the second step with the saved values to restore the filters.
						</li></ol></div></section><section class="section" id="attaching-virtual-machine-debug-logs_generating-virtual-machine-debug-logs"><div class="titlepage"><div><div><h4 class="title">23.1.4. Attaching libvirt debug logs to support requests</h4></div></div></div><p>
					You may have to request additional support to diagnose and resolve virtual machine (VM) problems. Attaching the debug logs to the support request is highly recommended to ensure that the support team has access to all the information they need to provide a quick resolution of the VM-related problem.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							To report a problem and request support, <a class="link" href="https://access.redhat.com/support/cases/#/case/new?intcmp=hp|a|a3|case&amp;">open a support case</a>.
						</li><li class="listitem"><p class="simpara">
							Based on the encountered problems, attach the following logs along with your report:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									For problems with the libvirt service, attach the <code class="literal">/var/log/libvirt/libvirt.log</code> file from the host.
								</li><li class="listitem"><p class="simpara">
									For problems with a specific VM, attach its respective log file.
								</p><p class="simpara">
									For example, for the <span class="emphasis"><em>testguest1</em></span> VM, attach the <code class="literal">testguest1.log</code> file, which can be found at <code class="literal">/var/log/libvirt/qemu/testguest1.log</code>.
								</p></li></ul></div></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://access.redhat.com/solutions/2112">How to provide log files to Red Hat Support?</a> (Red Hat Knowledgebase)
						</li></ul></div></section></section><section class="section" id="dumping-a-virtual-machine-core_diagnosing-virtual-machine-problems"><div class="titlepage"><div><div><h3 class="title">23.2. Dumping a virtual machine core</h3></div></div></div><p>
				To analyze why a virtual machine (VM) crashed or malfunctioned, you can dump the VM core to a file on disk for later analysis and diagnostics.
			</p><p>
				This section provides a brief <a class="link" href="#how-virtual-machine-core-dumping-works_dumping-a-virtual-machine-core" title="23.2.1. How virtual machine core dumping works">introduction to core dumping</a> and explains how you can <a class="link" href="#creating-a-virtual-machine-core-dump-file_dumping-a-virtual-machine-core" title="23.2.2. Creating a virtual machine core dump file">dump a VM core</a> to a specific file.
			</p><section class="section" id="how-virtual-machine-core-dumping-works_dumping-a-virtual-machine-core"><div class="titlepage"><div><div><h4 class="title">23.2.1. How virtual machine core dumping works</h4></div></div></div><p>
					A virtual machine (VM) requires numerous running processes to work accurately and efficiently. In some cases, a running VM may terminate unexpectedly or malfunction while you are using it. Restarting the VM may cause the data to be reset or lost, which makes it difficult to diagnose the exact problem that caused the VM to crash.
				</p><p>
					In such cases, you can use the <code class="literal">virsh dump</code> utility to save (or <span class="emphasis"><em>dump</em></span>) the core of a VM to a file before you reboot the VM. The core dump file contains a raw physical memory image of the VM which contains detailed information about the VM. This information can be used to diagnose VM problems, either manually, or by using a tool such as the <code class="literal">crash</code> utility.
				</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">crash</code> man page on your system
						</li><li class="listitem">
							The <a class="link" href="https://github.com/crash-utility/crash"><code class="literal">crash</code> Github repository</a>
						</li></ul></div></section><section class="section" id="creating-a-virtual-machine-core-dump-file_dumping-a-virtual-machine-core"><div class="titlepage"><div><div><h4 class="title">23.2.2. Creating a virtual machine core dump file</h4></div></div></div><p>
					A virtual machine (VM) core dump contains detailed information about the state of a VM at any given time. This information, which is similar to a snapshot of the VM, can help you detect problems if a VM malfunctions or shuts down suddenly.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							Make sure you have sufficient disk space to save the file. Note that the space occupied by the VM depends on the amount of RAM allocated to the VM.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Use the <code class="literal">virsh dump</code> utility.
						</p><p class="simpara">
							For example, the following command dumps the <code class="literal">lander1</code> VM’s cores, its memory and the CPU common register file to <code class="literal">gargantua.file</code> in the <code class="literal">/core/file</code> directory.
						</p><pre class="screen"># <span class="strong strong"><strong>virsh dump lander1 /core/file/gargantua.file --memory-only</strong></span>
Domain 'lander1' dumped to /core/file/gargantua.file</pre></li></ul></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
						The <code class="literal">crash</code> utility no longer supports the default file format of the virsh dump command. To analyze a core dump file by using <code class="literal">crash</code>, you must create the file with the <code class="literal">--memory-only</code> option.
					</p><p>
						Additionally, you must use the <code class="literal">--memory-only</code> option when creating a core dump file to attach to a Red Hat Support Case.
					</p></div></rh-alert><div class="formalpara"><p class="title"><strong>Troubleshooting</strong></p><p>
						If the <code class="literal">virsh dump</code> command fails with a <code class="literal">System is deadlocked on memory</code> error, ensure you are assigning sufficient memory for the core dump file. To do so, use the following <code class="literal">crashkernel</code> option value. Alternatively, do not use <code class="literal">crashkernel</code> at all, which assigns core dump memory automatically.
					</p></div><pre class="screen">crashkernel=1G-4G:192M,4G-64G:256M,64G-:512M</pre><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<code class="literal">virsh dump --help</code> command
						</li><li class="listitem">
							<code class="literal">virsh</code> man page on your system
						</li><li class="listitem">
							<a class="link" href="https://access.redhat.com/support/cases/#/case/new?intcmp=hp|a|a3|case&amp;">Opening a Support Case</a>
						</li></ul></div></section></section><section class="section" id="backtracing-virtual-machine-processes_diagnosing-virtual-machine-problems"><div class="titlepage"><div><div><h3 class="title">23.3. Backtracing virtual machine processes</h3></div></div></div><p>
				When a process related to a virtual machine (VM) malfunctions, you can use the <code class="literal">gstack</code> command along with the process identifier (PID) to generate an execution stack trace of the malfunctioning process. If the process is a part of a thread group then all the threads are traced as well.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Ensure that the <code class="literal">GDB</code> package is installed.
					</p><p class="simpara">
						For details about installing <code class="literal">GDB</code> and the available components, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_developer_toolset/10/html/user_guide/chap-gdb#sect-GDB-Install">Installing the GNU Debugger</a>.
					</p></li><li class="listitem"><p class="simpara">
						Make sure you know the PID of the processes that you want to backtrace.
					</p><p class="simpara">
						You can find the PID by using the <code class="literal">pgrep</code> command followed by the name of the process. For example:
					</p><pre class="screen"># <span class="strong strong"><strong>pgrep libvirt</strong></span>
22014
22025</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Use the <code class="literal">gstack</code> utility followed by the PID of the process you wish to backtrace.
					</p><p class="simpara">
						For example, the following command backtraces the libvirt process with the PID 22014.
					</p><pre class="screen"># <span class="strong strong"><strong>gstack 22014</strong></span>
Thread 3 (Thread 0x7f33edaf7700 (LWP 22017)):
#0  0x00007f33f81aef21 in poll () from /lib64/libc.so.6
#1  0x00007f33f89059b6 in g_main_context_iterate.isra () from /lib64/libglib-2.0.so.0
#2  0x00007f33f8905d72 in g_main_loop_run () from /lib64/libglib-2.0.so.0
...</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">gstack</code> man page on your system
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_developer_toolset/10/html/user_guide/chap-gdb">GNU Debugger (GDB)</a>
					</li></ul></div><div id="additional-resources-for-reporting-virtual-machine-problems-and-providing-logs_diagnosing-virtual-machine-problems" class="formalpara"><p class="title"><strong>Additional resources for reporting virtual machine problems and providing logs</strong></p><p>
					To request additional help and support, you can:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Raise a service request by using the <span class="strong strong"><strong>redhat-support-tool</strong></span> command line option, the Red Hat Portal UI, or several methods of FTP.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								To report problems and request support, see <a class="link" href="https://access.redhat.com/support/cases/#/case/new?intcmp=hp|a|a3|case&amp;">Open a Support Case</a>.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Upload the SOS Report and the log files when you submit a service request.
					</p><p class="simpara">
						This ensures that the Red Hat support engineer has all the necessary diagnostic information for reference.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								For more information about SOS reports, see <a class="link" href="https://access.redhat.com/solutions/3592#command">What is an SOS Report and how to create one in Red Hat Enterprise Linux?</a>
							</li><li class="listitem">
								For information about attaching log files, see <a class="link" href="https://access.redhat.com/solutions/2112">How to provide files to Red Hat Support?</a>
							</li></ul></div></li></ul></div></section></section><section class="chapter" id="assembly_feature-support-and-limitations-in-rhel-9-virtualization_configuring-and-managing-virtualization"><div class="titlepage"><div><div><h2 class="title">Chapter 24. Feature support and limitations in RHEL 9 virtualization</h2></div></div></div><p class="_abstract _abstract">
			This document provides information about feature support and restrictions in Red Hat Enterprise Linux 9 (RHEL 9) virtualization.
		</p><section class="section" id="how-rhel-virtualization-support-works_feature-support-and-limitations-in-rhel-9-virtualization"><div class="titlepage"><div><div><h3 class="title">24.1. How RHEL virtualization support works</h3></div></div></div><p>
				A set of support limitations applies to virtualization in Red Hat Enterprise Linux 9 (RHEL 9). This means that when you use certain features or exceed a certain amount of allocated resources when using virtual machines in RHEL 9, Red Hat will not support these guests unless you have a specific subscription plan.
			</p><p>
				Features listed in <a class="link" href="#recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization" title="24.2. Recommended features in RHEL 9 virtualization">Recommended features in RHEL 9 virtualization</a> have been tested and certified by Red Hat to work with the KVM hypervisor on a RHEL 9 system. Therefore, they are fully supported and recommended for use in virtualization in RHEL 9.
			</p><p>
				Features listed in <a class="link" href="#unsupported-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization" title="24.3. Unsupported features in RHEL 9 virtualization">Unsupported features in RHEL 9 virtualization</a> may work, but are not supported and not intended for use in RHEL 9. Therefore, Red Hat strongly recommends not using these features in RHEL 9 with KVM.
			</p><p>
				<a class="link" href="#resource-allocation-limits-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization" title="24.4. Resource allocation limits in RHEL 9 virtualization">Resource allocation limits in RHEL 9 virtualization</a> lists the maximum amount of specific resources supported on a KVM guest in RHEL 9. Guests that exceed these limits are not supported by Red Hat.
			</p><p>
				In addition, unless stated otherwise, all features and solutions used by the documentation for RHEL 9 virtualization are supported. However, some of these have not been completely tested and therefore may not be fully optimized.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					Many of these limitations do not apply to other virtualization solutions provided by Red Hat, such as OpenShift Virtualization or Red Hat OpenStack Platform (RHOSP).
				</p></div></rh-alert></section><section class="section" id="recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization"><div class="titlepage"><div><div><h3 class="title">24.2. Recommended features in RHEL 9 virtualization</h3></div></div></div><p class="_abstract _abstract">
				The following features are recommended for use with the KVM hypervisor included with Red Hat Enterprise Linux 9 (RHEL 9):
			</p><div class="formalpara"><p class="title"><strong>Host system architectures</strong></p><p>
					RHEL 9 with KVM is only supported on the following host architectures:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						AMD64 and Intel 64
					</li><li class="listitem">
						IBM Z - IBM z13 systems and later
					</li><li class="listitem">
						ARM 64
					</li></ul></div><p>
				Any other hardware architectures are not supported for using RHEL 9 as a KVM virtualization host, and Red Hat highly discourages doing so.
			</p><div class="formalpara"><p class="title"><strong>Guest operating systems</strong></p><p>
					Red Hat provides support with KVM virtual machines that use specific guest operating systems (OSs). For a detailed list of supported guest OSs, see the Certified Guest Operating Systems in <a class="link" href="https://access.redhat.com/articles/973163#rhelkvm">the Red Hat KnowledgeBase</a>.
				</p></div><p>
				Note, however, that by default, your guest OS does not use the same subscription as your host. Therefore, you must activate a separate licence or subscription for the guest OS to work properly.
			</p><p>
				In addition, the pass-through devices that you attach to the VM must be supported by both the host OS and the guest OS.
			</p><p>
				Similarly, for optimal function of your deployment, Red Hat recommends that the CPU model and features that you define in the XML configuration of a VM are supported by both the host OS and the guest OS.
			</p><p>
				To view the certified CPUs and other hardware for various versions of RHEL, see the <a class="link" href="https://catalog.redhat.com/hardware/search?type=Component|CPU%20Collection&amp;p=1">Red Hat Ecosystem Catalog</a>.
			</p><div class="formalpara"><p class="title"><strong>Machine types</strong></p><p>
					To ensure that your VM is compatible with your host architecture and that the guest OS runs optimally, the VM must use an appropriate machine type.
				</p></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					In RHEL 9, <code class="literal">pc-i440fx-rhel7.5.0</code> and earlier machine types, which were default in earlier major versions of RHEL, are no longer supported. As a consequence, attempting to start a VM with such machine types on a RHEL 9 host fails with an <code class="literal">unsupported configuration</code> error. If you encounter this problem after upgrading your host to RHEL 9, see the <a class="link" href="https://access.redhat.com/solutions/6999469">Red Hat KnowledgeBase</a>.
				</p></div></rh-alert><p>
				When <a class="link" href="#creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines" title="3.1. Creating virtual machines by using the command-line interface">creating a VM by using the command line</a>, the <code class="literal">virt-install</code> utility provides multiple methods of setting the machine type.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						When you use the <code class="literal">--os-variant</code> option, <code class="literal">virt-install</code> automatically selects the machine type recommended for your host CPU and supported by the guest OS.
					</li><li class="listitem">
						If you do not use <code class="literal">--os-variant</code> or require a different machine type, use the <code class="literal">--machine</code> option to specify the machine type explicitly.
					</li><li class="listitem">
						If you specify a <code class="literal">--machine</code> value that is unsupported or not compatible with your host, <code class="literal">virt-install</code> fails and displays an error message.
					</li></ul></div><p>
				The recommended machine types for KVM virtual machines on supported architectures, and the corresponding values for the <code class="literal">--machine</code> option, are as follows. <span class="emphasis"><em>Y</em></span> stands for the latest minor version of RHEL 9.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						On <span class="strong strong"><strong>Intel 64 and AMD64</strong></span> (x86_64): <code class="literal">pc-q35-rhel9.<span class="emphasis"><em>Y</em></span>.0</code> → <code class="literal">--machine=q35</code>
					</li><li class="listitem">
						On <span class="strong strong"><strong>IBM Z</strong></span> (s390x): <code class="literal">s390-ccw-virtio-rhel9.<span class="emphasis"><em>Y</em></span>.0</code> → <code class="literal">--machine=s390-ccw-virtio</code>
					</li><li class="listitem">
						On <span class="strong strong"><strong>ARM 64</strong></span>: <code class="literal">virt-rhel9.<span class="emphasis"><em>Y</em></span>.0</code> → <code class="literal">--machine=virt</code>
					</li></ul></div><p>
				To obtain the machine type of an existing VM:
			</p><pre class="screen white-space-pre white-space-pre"># <span class="strong strong"><strong>virsh dumpxml <span class="emphasis"><em>VM-name</em></span> | grep machine=</strong></span></pre><p>
				To view the full list of machine types supported on your host:
			</p><pre class="screen white-space-pre white-space-pre"># <span class="strong strong"><strong>/usr/libexec/qemu-kvm -M help</strong></span></pre><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#unsupported-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization" title="24.3. Unsupported features in RHEL 9 virtualization">Unsupported features in RHEL 9 virtualization</a>
					</li><li class="listitem">
						<a class="link" href="#resource-allocation-limits-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization" title="24.4. Resource allocation limits in RHEL 9 virtualization">Resource allocation limits in RHEL 9 virtualization</a>
					</li></ul></div></section><section class="section" id="unsupported-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization"><div class="titlepage"><div><div><h3 class="title">24.3. Unsupported features in RHEL 9 virtualization</h3></div></div></div><p class="_abstract _abstract">
				The following features are not supported by the KVM hypervisor included with Red Hat Enterprise Linux 9 (RHEL 9):
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					Many of these limitations may not apply to other virtualization solutions provided by Red Hat, such as OpenShift Virtualization or Red Hat OpenStack Platform (RHOSP).
				</p><p>
					Features supported by other virtualization solutions are described as such in the following paragraphs.
				</p></div></rh-alert><div class="formalpara"><p class="title"><strong>Host system architectures</strong></p><p>
					RHEL 9 with KVM is not supported on any host architectures that are not listed in <a class="link" href="#recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization" title="24.2. Recommended features in RHEL 9 virtualization">Recommended features in RHEL 9 virtualization</a>.
				</p></div><div class="formalpara"><p class="title"><strong>Guest operating systems</strong></p><p>
					KVM virtual machines (VMs) that use the following guest operating systems (OSs) are not supported on a RHEL 9 host:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Windows 8.1 and earlier
					</li><li class="listitem">
						Windows Server 2012 R2 and earlier
					</li><li class="listitem">
						macOS
					</li><li class="listitem">
						Solaris for x86 systems
					</li><li class="listitem">
						Any operating system released before 2009
					</li></ul></div><p>
				For a list of guest OSs supported on RHEL hosts and other virtualization solutions, see <a class="link" href="https://access.redhat.com/articles/973163">Certified Guest Operating Systems in Red Hat OpenStack Platform, Red Hat Virtualization, OpenShift Virtualization and Red Hat Enterprise Linux with KVM</a>.
			</p><div class="formalpara"><p class="title"><strong>Creating VMs in containers</strong></p><p>
					Red Hat does not support creating KVM virtual machines in any type of container that includes the elements of the RHEL 9 hypervisor (such as the <code class="literal">QEMU</code> emulator or the <code class="literal">libvirt</code> package).
				</p></div><p>
				To create VMs in containers, Red Hat recommends using the <a class="link" href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.14/html/virtualization/about#about-virt">OpenShift Virtualization</a> offering.
			</p><div class="formalpara"><p class="title"><strong>Specific virsh commands and options</strong></p><p>
					Not every parameter that you can use with the <code class="literal">virsh</code> utility has been tested and certified as production-ready by Red Hat. Therefore, any <code class="literal">virsh</code> commands and options that are not explicitly recommended by Red Hat documentation may not work correctly, and Red Hat recommends not using them in your production environment.
				</p></div><p>
				Notably, unsupported <code class="literal">virsh</code> commands include the following:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">virsh iface-*</code> commands, such as <code class="literal">virsh iface-start</code> and <code class="literal">virsh iface-destroy</code>
					</li><li class="listitem">
						<code class="literal">virsh blkdeviotune</code>
					</li><li class="listitem">
						<code class="literal">virsh snapshot-*</code> commands, such as <code class="literal">virsh snapshot-create</code> and <code class="literal">virsh snapshot-revert</code>
					</li></ul></div><div class="formalpara"><p class="title"><strong>The QEMU command line</strong></p><p>
					QEMU is an essential component of the virtualization architecture in RHEL 9, but it is difficult to manage manually, and improper QEMU configurations might cause security vulnerabilities. Therefore, using <code class="literal">qemu-*</code> command-line utilities, such as, <code class="literal">qemu-kvm</code> is not supported by Red Hat. Instead, use <span class="emphasis"><em>libvirt</em></span> utilities, such as <code class="literal">virt-install</code>, <code class="literal">virt-xml</code>, and supported <code class="literal">virsh</code> commands, as these orchestrate QEMU according to the best practices. However, the <code class="literal">qemu-img</code> utility is supported for <a class="link" href="#managing-virtual-disk-images-by-using-the-cli_managing-storage-for-virtual-machines" title="15.6. Managing virtual disk images by using the CLI">management of virtual disk images</a>.
				</p></div><div class="formalpara"><p class="title"><strong>vCPU hot unplug</strong></p><p>
					Removing a virtual CPU (vCPU) from a running VM, also referred to as a vCPU hot unplug, is not supported in RHEL 9.
				</p></div><div class="formalpara"><p class="title"><strong>Memory hot unplug</strong></p><p>
					Removing a memory device attached to a running VM, also referred to as a memory hot unplug, is unsupported in RHEL 9.
				</p></div><div class="formalpara"><p class="title"><strong>QEMU-side I/O throttling</strong></p><p>
					Using the <code class="literal">virsh blkdeviotune</code> utility to configure maximum input and output levels for operations on virtual disk, also known as QEMU-side I/O throttling, is not supported in RHEL 9.
				</p></div><p>
				To set up I/O throttling in RHEL 9, use <code class="literal">virsh blkiotune</code>. This is also known as libvirt-side I/O throttling. For instructions, see <a class="link" href="#disk-i-o-throttling-in-virtual-machines_optimizing-virtual-machine-i-o-performance" title="18.5.2. Disk I/O throttling in virtual machines">Disk I/O throttling in virtual machines</a>.
			</p><p>
				Other solutions:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						QEMU-side I/O throttling is also supported in RHOSP. For details, see <a class="link" href="https://access.redhat.com/solutions/875363">Setting Resource Limitation on Disk</a> and the <span class="strong strong"><strong>Use Quality-of-Service Specifications</strong></span> section in the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.0/html/storage_guide/index">RHOSP Storage Guide</a>.
					</li><li class="listitem">
						In addition, OpenShift Virtualizaton supports QEMU-side I/O throttling as well.
					</li></ul></div><div class="formalpara"><p class="title"><strong>Storage live migration</strong></p><p>
					Migrating a disk image of a running VM between hosts is not supported in RHEL 9.
				</p></div><p>
				Other solutions:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Storage live migration is supported in RHOSP, but with some limitations. For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.0/html/storage_guide/ch-cinder#section-volumes-advanced-migrate">Migrate a Volume</a>.
					</li></ul></div><div class="formalpara"><p class="title"><strong>Internal snapshots</strong></p><p>
					Creating and using internal snapshots for VMs is deprecated in RHEL 9, and highly discouraged for use in production environment. Instead, use external snapshots. For details, see <a class="link" href="#support-limitations-for-virtual-machine-snapshots_creating-virtual-machine-snapshots" title="13.1. Support limitations for virtual machine snapshots">support-limitations-for-virtual-machine-snapshots_creating-virtual-machine-snapshots</a>.
				</p></div><p>
				Other solutions:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						RHOSP supports live snapshots. For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.0/html/director_installation_and_usage/performing-basic-overcloud-administration-tasks#importing-virtual-machines-into-the-overcloud">Importing virtual machines into the overcloud</a>.
					</li><li class="listitem">
						Live snapshots are also supported on OpenShift Virtualization.
					</li></ul></div><div class="formalpara"><p class="title"><strong>vHost Data Path Acceleration</strong></p><p>
					On RHEL 9 hosts, it is possible to configure vHost Data Path Acceleration (vDPA) for virtio devices, but Red Hat currently does not support this feature, and strongly discourages its use in production environments.
				</p></div><div class="formalpara"><p class="title"><strong>vhost-user</strong></p><p>
					RHEL 9 does not support the implementation of a user-space vHost interface.
				</p></div><p>
				Other solutions:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">vhost-user</code> is supported in RHOSP, but only for <code class="literal">virtio-net</code> interfaces. For details, see <a class="link" href="https://access.redhat.com/solutions/3394851">virtio-net implementation</a> and <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/10/html/network_functions_virtualization_planning_guide/ch-vhost-user-ports">vhost user ports</a>.
					</li><li class="listitem">
						OpenShift Virtualization supports <code class="literal">vhost-user</code> as well.
					</li></ul></div><div class="formalpara"><p class="title"><strong>S3 and S4 system power states</strong></p><p>
					Suspending a VM to the <span class="strong strong"><strong>Suspend to RAM</strong></span> (S3) or <span class="strong strong"><strong>Suspend to disk</strong></span> (S4) system power states is not supported. Note that these features are disabled by default, and enabling them will make your VM not supportable by Red Hat.
				</p></div><p>
				Note that the S3 and S4 states are also currently not supported in any other virtualization solution provided by Red Hat.
			</p><div class="formalpara"><p class="title"><strong>S3-PR on a multipathed vDisk</strong></p><p>
					SCSI3 persistent reservation (S3-PR) on a multipathed vDisk is not supported in RHEL 9. As a consequence, Windows Cluster is not supported in RHEL 9.
				</p></div><div class="formalpara"><p class="title"><strong>virtio-crypto</strong></p><p>
					Using the <span class="emphasis"><em>virtio-crypto</em></span> device in RHEL 9 is not supported and RHEL strongly discourages its use.
				</p></div><p>
				Note that <span class="emphasis"><em>virtio-crypto</em></span> devices are also not supported in any other virtualization solution provided by Red Hat.
			</p><div class="formalpara"><p class="title"><strong>virtio-multitouch-device, virtio-multitouch-pci</strong></p><p>
					Using the <span class="emphasis"><em>virtio-multitouch-device</em></span> and <span class="emphasis"><em>virtio-multitouch-pci</em></span> devices in RHEL 9 is not supported and RHEL strongly discourages their use.
				</p></div><div class="formalpara"><p class="title"><strong>Incremental live backup</strong></p><p>
					Configuring a VM backup that only saves VM changes since the last backup, also known as incremental live backup, is not supported in RHEL 9, and Red Hat highly discourages its use.
				</p></div><div class="formalpara"><p class="title"><strong>net_failover</strong></p><p>
					Using the <code class="literal">net_failover</code> driver to set up an automated network device failover mechanism is not supported in RHEL 9.
				</p></div><p>
				Note that <code class="literal">net_failover</code> is also currently not supported in any other virtualization solution provided by Red Hat.
			</p><div class="formalpara"><p class="title"><strong>TCG</strong></p><p>
					QEMU and libvirt include a dynamic translation mode using the QEMU Tiny Code Generator (TCG). This mode does not require hardware virtualization support. However, TCG is not supported by Red Hat.
				</p></div><p>
				TCG-based guests can be recognized by examining its XML configuration, for example using the <code class="literal">virsh dumpxml</code> command.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The configuration file of a TCG guest contains the following line:
					</p><pre class="programlisting language-xml">&lt;domain type='qemu'&gt;</pre></li><li class="listitem"><p class="simpara">
						The configuration file of a KVM guest contains the following line:
					</p><pre class="programlisting language-xml">&lt;domain type='kvm'&gt;</pre></li></ul></div><div class="formalpara"><p class="title"><strong>SR-IOV InfiniBand networking devices</strong></p><p>
					Attaching InfiniBand networking devices to VMs using Single-root I/O virtualization (SR-IOV) is not supported.
				</p></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization" title="24.2. Recommended features in RHEL 9 virtualization">Recommended features in RHEL 9 virtualization</a>
					</li><li class="listitem">
						<a class="link" href="#resource-allocation-limits-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization" title="24.4. Resource allocation limits in RHEL 9 virtualization">Resource allocation limits in RHEL 9 virtualization</a>
					</li></ul></div></section><section class="section" id="resource-allocation-limits-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization"><div class="titlepage"><div><div><h3 class="title">24.4. Resource allocation limits in RHEL 9 virtualization</h3></div></div></div><p class="_abstract _abstract">
				The following limits apply to virtualized resources that can be allocated to a single KVM virtual machine (VM) on a Red Hat Enterprise Linux 9 (RHEL 9) host.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					Many of these limitations do not apply to other virtualization solutions provided by Red Hat, such as OpenShift Virtualization or Red Hat OpenStack Platform (RHOSP).
				</p></div></rh-alert><div class="formalpara"><p class="title"><strong>Maximum vCPUs per VM</strong></p><p>
					For the maximum amount of vCPUs and memory that is supported on a single VM running on a RHEL 9 host, see: <a class="link" href="https://access.redhat.com/articles/rhel-kvm-limits">Virtualization limits for Red Hat Enterprise Linux with KVM</a>
				</p></div><div class="formalpara"><p class="title"><strong>PCI devices per VM</strong></p><p>
					RHEL 9 supports <span class="strong strong"><strong>32</strong></span> PCI device slots per VM bus, and <span class="strong strong"><strong>8</strong></span> PCI functions per device slot. This gives a theoretical maximum of 256 PCI functions per bus when multi-function capabilities are enabled in the VM, and no PCI bridges are used.
				</p></div><p>
				Each PCI bridge adds a new bus, potentially enabling another 256 device addresses. However, some buses do not make all 256 device addresses available for the user; for example, the root bus has several built-in devices occupying slots.
			</p><div class="formalpara"><p class="title"><strong>Virtualized IDE devices</strong></p><p>
					KVM is limited to a maximum of <span class="strong strong"><strong>4</strong></span> virtualized IDE devices per VM.
				</p></div></section><section class="section" id="supported-disk-image-formats_feature-support-and-limitations-in-rhel-9-virtualization"><div class="titlepage"><div><div><h3 class="title">24.5. Supported disk image formats</h3></div></div></div><p>
				To run a virtual machine (VM) on RHEL, you must use a disk image with a supported format. You can also convert certain unsupported disk images to a supported format.
			</p><div class="formalpara"><p class="title"><strong>Supported disk image formats for VMs</strong></p><p>
					You can use disk images that use the following formats to run VMs in RHEL:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="strong strong"><strong>qcow2</strong></span> - Provides certain additional features, such as compression.
					</li><li class="listitem">
						<span class="strong strong"><strong>raw</strong></span> - Might provide better performance.
					</li><li class="listitem">
						<span class="strong strong"><strong>luks</strong></span> - Disk images encrypted by using the Linux Unified Key Setup (LUKS) specification.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Supported disk image formats for conversion</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						If required, you can convert your disk images between the <code class="literal">raw</code> and <code class="literal">qcow2</code> formats <a class="link" href="#converting-between-virtual-disk-image-formats_managing-virtual-disk-images-by-using-the-cli" title="15.6.4. Converting between virtual disk image formats">by using the <code class="literal">qemu-img convert</code> command</a>.
					</li><li class="listitem">
						If you require converting a <span class="strong strong"><strong>vmdk</strong></span> disk image to a <code class="literal">raw</code> or <code class="literal">qcow2</code> format, convert the VM that uses the disk to KVM <a class="link" href="https://access.redhat.com/articles/1351473">by using the <code class="literal">virt-v2v</code> utility</a>.
					</li><li class="listitem"><p class="simpara">
						To convert other disk image formats to <code class="literal">raw</code> or <code class="literal">qcow2</code>, you can use <a class="link" href="#converting-between-virtual-disk-image-formats_managing-virtual-disk-images-by-using-the-cli" title="15.6.4. Converting between virtual disk image formats">the <code class="literal">qemu-img convert</code> command</a>. For a list of formats that work with this command, see <a class="link" href="https://qemu.weilnetz.de/doc/9.1/system/images.html#disk-image-file-formats">the QEMU documentation</a>.
					</p><p class="simpara">
						Note that in most cases, converting the disk image format of a non-KVM virtual machine to <code class="literal">qcow2</code> or <code class="literal">raw</code> is not sufficient for the VM to correctly run on RHEL KVM. In addition to converting the disk image, corresponding drivers must be installed and configured in the guest operating system of the VM. For supported hypervisor conversion, use the <code class="literal">virt-v2v</code> utility.
					</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/articles/1351473">Converting virtual machines from other hypervisors to KVM with virt-v2v in RHEL 7, RHEL 8, and RHEL 9</a>
					</li><li class="listitem">
						<a class="link" href="#converting-between-virtual-disk-image-formats_managing-virtual-disk-images-by-using-the-cli" title="15.6.4. Converting between virtual disk image formats">Converting between virtual disk image formats</a>
					</li></ul></div></section><section class="section" id="how-virtualization-on-ibm-z-differs-from-amd64-and-intel64_feature-support-and-limitations-in-rhel-9-virtualization"><div class="titlepage"><div><div><h3 class="title">24.6. How virtualization on IBM Z differs from AMD64 and Intel 64</h3></div></div></div><p>
				KVM virtualization in RHEL 9 on IBM Z systems differs from KVM on AMD64 and Intel 64 systems in the following:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">PCI and USB devices</span></dt><dd><p class="simpara">
							Virtual PCI and USB devices are not supported on IBM Z. This also means that <code class="literal">virtio-<span class="emphasis"><em>*</em></span>-pci</code> devices are unsupported, and <code class="literal">virtio-<span class="emphasis"><em>*</em></span>-ccw</code> devices should be used instead. For example, use <code class="literal">virtio-net-ccw</code> instead of <code class="literal">virtio-net-pci</code>.
						</p><p class="simpara">
							Note that direct attachment of PCI devices, also known as PCI passthrough, is supported.
						</p></dd><dt><span class="term">Supported guest operating system</span></dt><dd>
							Red Hat only supports VMs hosted on IBM Z if they use RHEL 7, 8, or 9 as their guest operating system.
						</dd><dt><span class="term">Device boot order</span></dt><dd><p class="simpara">
							IBM Z does not support the <code class="literal">&lt;boot dev='<span class="emphasis"><em>device</em></span>'&gt;</code> XML configuration element. To define device boot order, use the <code class="literal">&lt;boot order='<span class="emphasis"><em>number</em></span>'&gt;</code> element in the <code class="literal">&lt;devices&gt;</code> section of the XML.
						</p><p class="simpara">
							In addition, you can select the required boot entry by using the architecture-specific <code class="literal">loadparm</code> attribute in the <code class="literal">&lt;boot&gt;</code> element. For example, the following determines that the disk should be used first in the boot sequence and if a Linux distribution is available on that disk, it will select the second boot entry:
						</p><pre class="programlisting language-xml">&lt;disk type='file' device='disk'&gt;
  &lt;driver name='qemu' type='qcow2'/&gt;
  &lt;source file='/path/to/qcow2'/&gt;
  &lt;target dev='vda' bus='virtio'/&gt;
  &lt;address type='ccw' cssid='0xfe' ssid='0x0' devno='0x0000'/&gt;
  &lt;boot order='1' loadparm='2'/&gt;
&lt;/disk&gt;</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								By using <code class="literal">&lt;boot order='<span class="emphasis"><em>number</em></span>'&gt;</code> for boot order management is also preferred on AMD64 and Intel 64 hosts.
							</p></div></rh-alert></dd><dt><span class="term">Memory hot plug</span></dt><dd>
							Adding memory to a running VM is not possible on IBM Z. Note that removing memory from a running VM (<span class="emphasis"><em>memory hot unplug</em></span>) is also not possible on IBM Z, as well as on AMD64 and Intel 64.
						</dd><dt><span class="term">NUMA topology</span></dt><dd>
							Non-Uniform Memory Access (NUMA) topology for CPUs is not supported by <code class="literal">libvirt</code> on IBM Z. Therefore, tuning vCPU performance by using NUMA is not possible on these systems.
						</dd><dt><span class="term">GPU devices</span></dt><dd>
							<a class="link" href="#assembly_managing-gpu-devices-in-virtual-machines_configuring-and-managing-virtualization" title="Chapter 16. Managing GPU devices in virtual machines">Assigning GPU devices</a> is not supported on IBM Z systems.
						</dd><dt><span class="term">vfio-ap</span></dt><dd>
							VMs on an IBM Z host can use the <span class="emphasis"><em>vfio-ap</em></span> cryptographic device passthrough, which is not supported on any other architecture.
						</dd><dt><span class="term">vfio-ccw</span></dt><dd>
							VMs on an IBM Z host can use the <span class="emphasis"><em>vfio-ccw</em></span> disk device passthrough, which is not supported on any other architecture.
						</dd><dt><span class="term">SMBIOS</span></dt><dd>
							SMBIOS configuration is not available on IBM Z.
						</dd><dt><span class="term">Watchdog devices</span></dt><dd><p class="simpara">
							If using watchdog devices in your VM on an IBM Z host, use the <code class="literal">diag288</code> model. For example:
						</p><pre class="programlisting language-xml">&lt;devices&gt;
  &lt;watchdog model='diag288' action='poweroff'/&gt;
&lt;/devices&gt;</pre></dd><dt><span class="term">kvm-clock</span></dt><dd>
							The <code class="literal">kvm-clock</code> service is specific to AMD64 and Intel 64 systems, and does not have to be configured for VM time management on IBM Z.
						</dd><dt><span class="term">v2v and p2v</span></dt><dd>
							The <code class="literal">virt-v2v</code> and <code class="literal">virt-p2v</code> utilities are supported only on the AMD64 and Intel 64 architecture, and are not provided on IBM Z.
						</dd><dt><span class="term">Migrations</span></dt><dd><p class="simpara">
							To successfully migrate to a later host model (for example from IBM z14 to z15), or to update the hypervisor, use the <code class="literal">host-model</code> CPU mode. The <code class="literal">host-passthrough</code> and <code class="literal">maximum</code> CPU modes are not recommended, as they are generally not migration-safe.
						</p><p class="simpara">
							If you want to specify an explicit CPU model in the <code class="literal">custom</code> CPU mode, follow these guidelines:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Do not use CPU models that end with <code class="literal">-base</code>.
								</li><li class="listitem">
									Do not use the <code class="literal">qemu</code>, <code class="literal">max</code> or <code class="literal">host</code> CPU model.
								</li></ul></div><p class="simpara">
							To successfully migrate to an older host model (such as from z15 to z14), or to an earlier version of QEMU, KVM, or the RHEL kernel, use the CPU type of the oldest available host model without <code class="literal">-base</code> at the end.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									If you have both the source host and the destination host running, you can instead use the <code class="literal command">virsh hypervisor-cpu-baseline</code> command on the destination host to obtain a suitable CPU model. For details, see <a class="link" href="#verifying-host-cpu-compatibility-for-virtual-machine-migration_migrating-virtual-machines" title="12.4. Verifying host CPU compatibility for virtual machine migration">Verifying host CPU compatibility for virtual machine migration</a>.
								</li><li class="listitem">
									For more information about supported machine types in RHEL 9, see <a class="link" href="#recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization" title="24.2. Recommended features in RHEL 9 virtualization">Recommended features in RHEL 9 virtualization</a>.
								</li></ul></div></dd></dl></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">PXE installation and booting</span></dt><dd><p class="simpara">
							When <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/interactively_installing_rhel_over_the_network/index#preparing-for-a-network-install_rhel-installer">using PXE</a> to run a VM on IBM Z, a specific configuration is required for the <code class="literal">pxelinux.cfg/default</code> file. For example:
						</p><pre class="literallayout"># pxelinux
default linux
label linux
kernel kernel.img
initrd initrd.img
append ip=dhcp inst.repo=example.com/redhat/BaseOS/s390x/os/</pre></dd><dt><span class="term">Secure Execution</span></dt><dd>
							You can boot a VM with a prepared secure guest image by defining <code class="literal">&lt;launchSecurity type="s390-pv"/&gt;</code> in the XML configuration of the VM. This encrypts the VM’s memory to protect it from unwanted access by the hypervisor.
						</dd></dl></div><p>
				Note that the following features are not supported when running a VM in secure execution mode:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Device passthrough by using <code class="literal">vfio</code>
					</li><li class="listitem">
						Obtaining memory information by using <code class="literal">virsh domstats</code> and <code class="literal">virsh memstat</code>
					</li><li class="listitem">
						The <code class="literal">memballoon</code> and <code class="literal">virtio-rng</code> virtual devices
					</li><li class="listitem">
						Memory backing by using huge pages
					</li><li class="listitem">
						Live and non-live VM migrations
					</li><li class="listitem">
						Saving and restoring VMs
					</li><li class="listitem">
						VM snapshots, including memory snapshots (using the <code class="literal">--memspec</code> option)
					</li><li class="listitem">
						Full memory dumps. Instead, specify the <code class="literal">--memory-only</code> option for the <code class="literal">virsh dump</code> command.
					</li><li class="listitem">
						248 or more vCPUs. The vCPU limit for secure guests is 247.
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#an-overview-of-virtualization-features-support-in-rhel-9_feature-support-and-limitations-in-rhel-9-virtualization" title="24.8. An overview of virtualization features support in RHEL 9">An overview of virtualization features support across architectures</a>
					</li></ul></div></section><section class="section" id="how-virtualization-on-arm-64-differs-from-amd64-and-intel64_feature-support-and-limitations-in-rhel-9-virtualization"><div class="titlepage"><div><div><h3 class="title">24.7. How virtualization on ARM 64 differs from AMD64 and Intel 64</h3></div></div></div><p>
				KVM virtualization in RHEL 9 on ARM 64 systems (also known as AArch64) is different from KVM on AMD64 and Intel 64 systems in several aspects. These include, but are not limited to, the following:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Guest operating systems</span></dt><dd>
							The only guest operating system currently supported on ARM 64 virtual machines (VMs) is RHEL 9.
						</dd></dl></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">vCPU hot plug and hot unplug</span></dt><dd>
							Attaching a virtual CPU (vCPU) to a running VM, also referred to as a vCPU hot plug, is currently not supported on ARM 64 hosts. In addition, like on AMD64 and Intel 64 hosts, removing a vCPU from a running VM (vCPU hot unplug), is not supported on ARM 64.
						</dd><dt><span class="term">SecureBoot</span></dt><dd>
							The SecureBoot feature is not available on ARM 64 systems.
						</dd><dt><span class="term">Migration</span></dt><dd>
							Migrating VMs between ARM 64 hosts is currently not supported.
						</dd><dt><span class="term">Saving and restoring VMs</span></dt><dd>
							<a class="link" href="#saving-and-restoring-virtual-machines_configuring-and-managing-virtualization" title="Chapter 10. Saving and restoring virtual machines">Saving and restoring</a> a VM is currently unsupported on an ARM 64 host.
						</dd><dt><span class="term">Memory page sizes</span></dt><dd><p class="simpara">
							ARM 64 currently supports running VMs with 64 KB or 4 KB memory page sizes, however both the host and the guest must use the same memory page size. Configurations where host and guest have different memory page sizes are not supported.
						</p><p class="simpara">
							By default, RHEL 9 uses a 4 KB memory page size. If you want to run a VM with a 64 KB memory page size, your host must be <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/automatically_installing_rhel/installing-kernel-64k-on-arm-using-the-command-line_rhel-installer">using a kernel with 64 KB memory page size</a>. When creating the VM, you must install it with the <code class="literal">kernel-64k package</code>, for example by including the following parameter in the kickstart file:
						</p><pre class="programlisting language-bash">%packages
-kernel
kernel-64k
%end</pre></dd><dt><span class="term">Huge pages</span></dt><dd><p class="simpara">
							ARM 64 hosts with 64 KB memory page size support huge memory pages with the following sizes:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									2 MB
								</li><li class="listitem">
									512 MB
								</li><li class="listitem"><p class="simpara">
									16 GB
								</p><p class="simpara">
									When you use transparent huge pages (THP) on an ARM 64 host with 64 KB memory page size, it supports only 512 MB huge pages.
								</p><p class="simpara">
									ARM 64 hosts with 4 KB memory page size support huge memory pages with the following sizes:
								</p></li><li class="listitem">
									64 KB
								</li><li class="listitem">
									2 MB
								</li><li class="listitem">
									32 MB
								</li><li class="listitem"><p class="simpara">
									1024 MB
								</p><p class="simpara">
									When you use transparent huge pages (THP) on an ARM 64 host with 4 KB memory page size, it supports only 2 MB huge pages.
								</p></li></ul></div></dd><dt><span class="term">SVE</span></dt><dd><p class="simpara">
							The ARM 64 architecture provides the Scalable Vector Expansion (SVE) feature. If the host supports the feature, using SVE in your VMs improves the speed of vector mathematics computation and string operations in these VMs.
						</p><p class="simpara">
							The base-line level of SVE is enabled by default on host CPUs that support it. However, Red Hat recommends configuring each vector length explicitly. This ensures that the VM can only be launched on compatible hosts. To do so:
						</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Verify that your CPU has the SVE feature:
								</p><pre class="screen"># <span class="strong strong"><strong>grep -m 1 Features /proc/cpuinfo | grep -w sve</strong></span>

Features: fp asimd evtstrm aes pmull sha1 sha2 crc32 atomics fphp asimdhp cpuid asimdrdm fcma dcpop <span class="strong strong"><strong>sve</strong></span></pre><p class="simpara">
									If the output of this command includes <code class="literal">sve</code> or if its exit code is 0, your CPU supports SVE.
								</p></li><li class="listitem"><p class="simpara">
									Open the XML configuration of the VM you want to modify:
								</p><pre class="screen"># <span class="strong strong"><strong>virsh edit vm-name</strong></span></pre></li><li class="listitem"><p class="simpara">
									Edit the <code class="literal">&lt;cpu&gt;</code> element similarly to the following:
								</p><pre class="screen">&lt;cpu mode='host-passthrough' check='none'&gt;
&lt;feature policy='require' name='sve'/&gt;
&lt;feature policy='require' name='sve128'/&gt;
&lt;feature policy='require' name='sve256'/&gt;
&lt;feature policy='disable' name='sve384'/&gt;
&lt;feature policy='require' name='sve512'/&gt;
&lt;/cpu&gt;</pre><p class="simpara">
									This example explicitly enables SVE vector lengths 128, 256, and 512, and explicitly disables vector length 384.
								</p></li></ol></div></dd><dt><span class="term">CPU models</span></dt><dd>
							VMs on ARM 64 currently only support the <code class="literal">host-passthrough</code> CPU model.
						</dd><dt><span class="term">PXE</span></dt><dd><p class="simpara">
							Booting in the Preboot Execution Environment (PXE) is functional but not supported, Red Hat strongly discourages using it in production environments.
						</p><p class="simpara">
							If you require PXE booting, it is only possible with the <code class="literal">virtio-net-pci</code> network interface controller (NIC).
						</p></dd></dl></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">EDK2</span></dt><dd><p class="simpara">
							ARM 64 guests use UEFI firmware included in the <code class="literal">edk2-aarch64</code> package, which provides a similar interface as OVMF UEFI on AMD64 and Intel 64, and implements a similar set of features.
						</p><p class="simpara">
							Specifically, <code class="literal">edk2-aarch64</code> provides a built-in UEFI shell, but does not support the following functionality:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									SecureBoot
								</li><li class="listitem">
									Management Mode
								</li></ul></div></dd></dl></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">kvm-clock</span></dt><dd>
							The <code class="literal">kvm-clock</code> service does not have to be configured for time management in VMs on ARM 64.
						</dd><dt><span class="term">Peripheral devices</span></dt><dd><p class="simpara">
							ARM 64 systems support a partly different set of peripheral devices than AMD64 and Intel 64 devices.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Only PCIe topologies are supported.
								</li><li class="listitem">
									ARM 64 systems support <code class="literal">virtio</code> devices by using the <code class="literal">virtio-*-pci</code> drivers. In addition, the <code class="literal">virtio-iommu</code> and <code class="literal">virtio-input</code> devices are unsupported.
								</li><li class="listitem">
									The <code class="literal">virtio-gpu</code> driver is only supported for graphical installs.
								</li><li class="listitem">
									ARM 64 systems support <code class="literal">usb-mouse</code> and <code class="literal">usb-tablet</code> devices for graphical installs only. Other USB devices, USB passthrough, or USB redirect are not supported.
								</li><li class="listitem">
									Device assignment that uses Virtual Function I/O (VFIO) is supported only for NICs (physical and virtual functions).
								</li></ul></div></dd><dt><span class="term">Emulated devices</span></dt><dd><p class="simpara">
							The following devices are not supported on ARM 64:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Emulated sound devices, such as ICH9, ICH6 or AC97.
								</li><li class="listitem">
									Emulated graphics cards, such as VGA cards.
								</li><li class="listitem">
									Emulated network devices, such as <code class="literal">rtl8139</code>.
								</li></ul></div></dd><dt><span class="term">GPU devices</span></dt><dd>
							<a class="link" href="#assembly_managing-gpu-devices-in-virtual-machines_configuring-and-managing-virtualization" title="Chapter 16. Managing GPU devices in virtual machines">Assigning GPU devices</a> is currently not supported on ARM 64 systems.
						</dd><dt><span class="term">Nested virtualization</span></dt><dd>
							Creating nested VMs is currently not possible on ARM 64 hosts.
						</dd><dt><span class="term">v2v and p2v</span></dt><dd>
							The <code class="literal">virt-v2v</code> and <code class="literal">virt-p2v</code> utilities are only supported on the AMD64 and Intel 64 architecture and are, therefore, not provided on ARM 64.
						</dd></dl></div></section><section class="section" id="an-overview-of-virtualization-features-support-in-rhel-9_feature-support-and-limitations-in-rhel-9-virtualization"><div class="titlepage"><div><div><h3 class="title">24.8. An overview of virtualization features support in RHEL 9</h3></div></div></div><p class="_abstract _abstract">
				The following tables provide comparative information about the support state of selected virtualization features in RHEL 9 across the available system architectures.
			</p><rh-table id="idm140237770578656"><table class="lt-4-cols lt-7-rows"><caption>Table 24.1. General support</caption><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 33%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140237770572896" scope="col">Intel 64 and AMD64</th><th align="left" valign="top" id="idm140237770571808" scope="col">IBM Z</th><th align="left" valign="top" id="idm140237770570720" scope="col">ARM 64</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140237770572896"> <p>
								Supported
							</p>
							 </td><td align="left" valign="top" headers="idm140237770571808"> <p>
								Supported
							</p>
							 </td><td align="left" valign="top" headers="idm140237770570720"> <p>
								Supported
							</p>
							 </td></tr></tbody></table></rh-table><rh-table id="idm140237770563280"><table class="gt-4-cols lt-7-rows"><caption>Table 24.2. Device hot plug and hot unplug</caption><colgroup><col style="width: 25%; " class="col_1"><!--Empty--><col style="width: 25%; " class="col_2"><!--Empty--><col style="width: 25%; " class="col_3"><!--Empty--><col style="width: 25%; " class="col_4"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140237770556576" scope="col"> </th><th align="left" valign="top" id="idm140237770555648" scope="col">Intel 64 and AMD64</th><th align="left" valign="top" id="idm140237770554560" scope="col">IBM Z</th><th align="left" valign="top" id="idm140237770553472" scope="col">ARM 64</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140237770556576"> <p>
								<span class="strong strong"><strong>CPU hot plug</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140237770555648"> <p>
								Supported
							</p>
							 </td><td align="left" valign="top" headers="idm140237770554560"> <p>
								Supported
							</p>
							 </td><td align="left" valign="top" headers="idm140237770553472"> <p>
								<span class="emphasis"><em>UNSUPPORTED</em></span>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237770556576"> <p>
								<span class="strong strong"><strong>CPU hot unplug</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140237770555648"> <p>
								<span class="emphasis"><em>UNSUPPORTED</em></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140237770554560"> <p>
								<span class="emphasis"><em>UNSUPPORTED</em></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140237770553472"> <p>
								<span class="emphasis"><em>UNSUPPORTED</em></span>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237770556576"> <p>
								<span class="strong strong"><strong>Memory hot plug</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140237770555648"> <p>
								Supported
							</p>
							 </td><td align="left" valign="top" headers="idm140237770554560"> <p>
								<span class="emphasis"><em>UNSUPPORTED</em></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140237770553472"> <p>
								Supported
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237770556576"> <p>
								<span class="strong strong"><strong>Memory hot unplug</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140237770555648"> <p>
								<span class="emphasis"><em>UNSUPPORTED</em></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140237770554560"> <p>
								<span class="emphasis"><em>UNSUPPORTED</em></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140237770553472"> <p>
								<span class="emphasis"><em>UNSUPPORTED</em></span>
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237770556576"> <p>
								<span class="strong strong"><strong>Peripheral device hot plug</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140237770555648"> <p>
								Supported
							</p>
							 </td><td align="left" valign="top" headers="idm140237770554560"> <p>
								Supported <a href="#ftn.idm140237770512128" class="footnote"><sup class="footnote" id="idm140237770512128">[a]</sup></a>
							</p>
							 </td><td align="left" valign="top" headers="idm140237770553472"> <p>
								Supported
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237770556576"> <p>
								<span class="strong strong"><strong>Peripheral device hot unplug</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140237770555648"> <p>
								Supported
							</p>
							 </td><td align="left" valign="top" headers="idm140237770554560"> <p>
								Supported <a href="#ftn.idm140237770501648" class="footnote"><sup class="footnote" id="idm140237770501648">[b]</sup></a>
							</p>
							 </td><td align="left" valign="top" headers="idm140237770553472"> <p>
								Supported
							</p>
							 </td></tr></tbody><tbody class="footnotes"><tr><td colspan="4"><div id="ftn.idm140237770512128" class="footnote"><div class="para"><a href="#idm140237770512128" class="simpara"><sup class="simpara">[a] </sup></a>
									Requires using <code class="literal">virtio-<span class="emphasis"><em>*</em></span>-ccw</code> devices instead of <code class="literal">virtio-<span class="emphasis"><em>*</em></span>-pci</code>
								</div></div><div id="ftn.idm140237770501648" class="footnote"><div class="para"><a href="#idm140237770501648" class="simpara"><sup class="simpara">[b] </sup></a>
									Requires using <code class="literal">virtio-<span class="emphasis"><em>*</em></span>-ccw</code> devices instead of <code class="literal">virtio-<span class="emphasis"><em>*</em></span>-pci</code>
								</div></div></td></tr></tbody></table></rh-table><rh-table id="idm140237770496208"><table class="gt-4-cols lt-7-rows"><caption>Table 24.3. Other selected features</caption><colgroup><col style="width: 25%; " class="col_1"><!--Empty--><col style="width: 25%; " class="col_2"><!--Empty--><col style="width: 25%; " class="col_3"><!--Empty--><col style="width: 25%; " class="col_4"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm140237770489520" scope="col"> </th><th align="left" valign="top" id="idm140237770488592" scope="col">Intel 64 and AMD64</th><th align="left" valign="top" id="idm140237770487504" scope="col">IBM Z</th><th align="left" valign="top" id="idm140237770486416" scope="col">ARM 64</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm140237770489520"> <p>
								<span class="strong strong"><strong>NUMA tuning</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140237770488592"> <p>
								Supported
							</p>
							 </td><td align="left" valign="top" headers="idm140237770487504"> <p>
								<span class="emphasis"><em>UNSUPPORTED</em></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140237770486416"> <p>
								Supported
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237770489520"> <p>
								<span class="strong strong"><strong>SR-IOV devices</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140237770488592"> <p>
								Supported
							</p>
							 </td><td align="left" valign="top" headers="idm140237770487504"> <p>
								<span class="emphasis"><em>UNSUPPORTED</em></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140237770486416"> <p>
								Supported
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm140237770489520"> <p>
								<span class="strong strong"><strong>virt-v2v and p2v</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140237770488592"> <p>
								Supported
							</p>
							 </td><td align="left" valign="top" headers="idm140237770487504"> <p>
								<span class="emphasis"><em>UNSUPPORTED</em></span>
							</p>
							 </td><td align="left" valign="top" headers="idm140237770486416"> <p>
								<span class="emphasis"><em>UNAVAILABLE</em></span>
							</p>
							 </td></tr></tbody></table></rh-table><p>
				Note that some of the unsupported features are supported on other Red Hat products, such as Red Hat Virtualization and Red Hat OpenStack platform. For more information, see <a class="link" href="#unsupported-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization" title="24.3. Unsupported features in RHEL 9 virtualization">Unsupported features in RHEL 9 virtualization</a>.
			</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional sources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#unsupported-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization" title="24.3. Unsupported features in RHEL 9 virtualization">Unsupported features in RHEL 9 virtualization</a>
					</li></ul></div></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm140237782377296"><h2 class="legalnotice">Legal Notice</h2><div class="para">
		Copyright <span class="trademark"><!--Empty--></span>© 2024 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div></body></section><!----></div></article><aside id="layout" class="span-xs-12 span-sm-2 span-md-2 content-format-selectors" aria-label="Select page format" data-v-8589d091><div class="sticky-top page-layout-options" data-v-8589d091><label for="page-format" data-v-8589d091>Format</label><select id="page-format" class="page-format-dropdown" data-v-8589d091><option class="page-type" value="html" data-v-8589d091>Multi-page</option><option selected class="page-type" value="html-single" data-v-8589d091>Single-page</option><option class="page-type" value="pdf" data-v-8589d091>View full doc as PDF</option></select></div><!----></aside></div><div class="btn-container hidden" data-v-8589d091><pf-button class="top-scroll-btn" icon="angle-up" icon-set="fas" icon-position="right" data-v-8589d091>Back to top</pf-button></div><!--]--><!--]--></main><rh-footer data-analytics-region="page-footer" data-v-97dd2752><a slot="logo" href="/en" data-analytics-category="Footer" data-analytics-text="Logo" data-v-97dd2752><img alt="Red Hat logo" src="/Logo-Red_Hat-Documentation-A-Reverse-RGB.svg" loading="lazy" width="222" height="40" data-v-97dd2752></a><rh-footer-social-link slot="social-links" icon="github" data-v-97dd2752><a href="https://github.com/redhat-documentation" data-analytics-region="social-links-exit" data-analytics-category="Footer|social-links" data-analytics-text="LinkedIn" data-v-97dd2752>Github</a></rh-footer-social-link><rh-footer-social-link slot="social-links" icon="reddit" data-v-97dd2752><a href="https://www.reddit.com/r/redhat/" data-analytics-region="social-links-exit" data-analytics-category="Footer|social-links" data-analytics-text="YouTube" data-v-97dd2752>Reddit</a></rh-footer-social-link><rh-footer-social-link slot="social-links" icon="youtube" data-v-97dd2752><a href="https://www.youtube.com/@redhat" data-analytics-region="social-links-exit" data-analytics-category="Footer|social-links" data-analytics-text="Facebook" data-v-97dd2752>Youtube</a></rh-footer-social-link><rh-footer-social-link slot="social-links" icon="twitter" data-v-97dd2752><a href="https://twitter.com/RedHat" data-analytics-region="social-links-exit" data-analytics-category="Footer|social-links" data-analytics-text="Twitter" data-v-97dd2752>Twitter</a></rh-footer-social-link><h3 slot="links" data-analytics-text="Learn" data-v-97dd2752>Learn</h3><ul slot="links" data-v-97dd2752><li data-v-97dd2752><a href="https://developers.redhat.com/learn" data-analytics-category="Footer|Learn" data-analytics-text="Developer resources" data-v-97dd2752>Developer resources</a></li><li data-v-97dd2752><a href="https://cloud.redhat.com/learn" data-analytics-category="Footer|Learn" data-analytics-text="Cloud learning hub" data-v-97dd2752>Cloud learning hub</a></li><li data-v-97dd2752><a href="https://www.redhat.com/en/interactive-labs" data-analytics-category="Footer|Learn" data-analytics-text="Interactive labs" data-v-97dd2752>Interactive labs</a></li><li data-v-97dd2752><a href="https://www.redhat.com/services/training-and-certification" data-analytics-category="Footer|Learn" data-analytics-text="Training and certification" data-v-97dd2752>Training and certification</a></li><li data-v-97dd2752><a href="https://access.redhat.com/support" data-analytics-category="Footer|Learn" data-analytics-text="Customer support" data-v-97dd2752>Customer support</a></li><li data-v-97dd2752><a href="/products" data-analytics-category="Footer|Learn" data-analytics-text="See all documentation" data-v-97dd2752>See all documentation</a></li></ul><h3 slot="links" data-analytics-text="Try buy sell" data-v-97dd2752>Try, buy, &amp; sell</h3><ul slot="links" data-v-97dd2752><li data-v-97dd2752><a href="https://redhat.com/en/products/trials" data-analytics-category="Footer|Try buy sell" data-analytics-text="Product trial center" data-v-97dd2752>Product trial center</a></li><li data-v-97dd2752><a href="https://marketplace.redhat.com" data-analytics-category="Footer|Try buy sell" data-analytics-text="Red Hat Marketplace" data-v-97dd2752>Red Hat Marketplace</a></li><li data-v-97dd2752><a href="https://catalog.redhat.com/" data-analytics-category="Footer|Try buy sell" data-analytics-text="Red Hat Ecosystem Catalog" data-v-97dd2752>Red Hat Ecosystem Catalog</a></li><li data-v-97dd2752><a href="https://www.redhat.com/en/store" data-analytics-category="Footer|Try buy sell" data-analytics-text="Red Hat Store" data-v-97dd2752>Red Hat Store</a></li><li data-v-97dd2752><a href="https://www.redhat.com/about/japan-buy" data-analytics-category="Footer|Try buy sell" data-analytics-text="Buy online (Japan)" data-v-97dd2752>Buy online (Japan)</a></li></ul><h3 slot="links" data-analytics-text="Communities" data-v-97dd2752>Communities</h3><ul slot="links" data-v-97dd2752><li data-v-97dd2752><a href="https://access.redhat.com/community" data-analytics-category="Footer|Communities" data-analytics-text="Customer Portal Community" data-v-97dd2752>Customer Portal Community</a></li><li data-v-97dd2752><a href="https://www.redhat.com/events" data-analytics-category="Footer|Communities" data-analytics-text="Events" data-v-97dd2752>Events</a></li><li data-v-97dd2752><a href="https://www.redhat.com/about/our-community-contributions" data-analytics-category="Footer|Communities" data-analytics-text="How we contribute" data-v-97dd2752>How we contribute</a></li></ul><rh-footer-block slot="main-secondary" data-v-97dd2752><h3 slot="header" data-analytics-text="About Red Hat Documentation" data-v-97dd2752>About Red Hat Documentation</h3><p data-v-97dd2752>We help Red Hat users innovate and achieve their goals with our products and services with content they can trust.</p></rh-footer-block><rh-footer-block slot="main-secondary" data-v-97dd2752><h3 slot="header" data-analytics-text="Making open source more inclusive" data-v-97dd2752>Making open source more inclusive</h3><p data-v-97dd2752>Red Hat is committed to replacing problematic language in our code, documentation, and web properties. For more details, see the <a href=" https://www.redhat.com/en/blog/making-open-source-more-inclusive-eradicating-problematic-language" data-analytics-category="Footer|Making open source more inclusive" data-analytics-text="Red Hat Blog" data-v-97dd2752>Red Hat Blog</a>.</p></rh-footer-block><rh-footer-block slot="main-secondary" data-v-97dd2752><h3 slot="header" data-analytics-text="About Red Hat" data-v-97dd2752>About Red Hat</h3><p data-v-97dd2752>We deliver hardened solutions that make it easier for enterprises to work across platforms and environments, from the core datacenter to the network edge.</p></rh-footer-block><rh-footer-universal slot="universal" data-v-97dd2752><h3 slot="links-primary" data-analytics-text="Red Hat legal and privacy links" hidden data-v-97dd2752>Red Hat legal and privacy links</h3><ul slot="links-primary" data-analytics-region="page-footer-bottom-primary" data-v-97dd2752><li data-v-97dd2752><a href="https://redhat.com/en/about/company" data-analytics-category="Footer|Corporate" data-analytics-text="About Red Hat" data-v-97dd2752>About Red Hat</a></li><li data-v-97dd2752><a href="https://redhat.com/en/jobs" data-analytics-category="Footer|Corporate" data-analytics-text="Jobs" data-v-97dd2752>Jobs</a></li><li data-v-97dd2752><a href="https://redhat.com/en/events" data-analytics-category="Footer|Corporate" data-analytics-text="Events" data-v-97dd2752>Events</a></li><li data-v-97dd2752><a href="https://redhat.com/en/about/office-locations" data-analytics-category="Footer|Corporate" data-analytics-text="Locations" data-v-97dd2752>Locations</a></li><li data-v-97dd2752><a href="https://redhat.com/en/contact" data-analytics-category="Footer|Corporate" data-analytics-text="Contact Red Hat" data-v-97dd2752>Contact Red Hat</a></li><li data-v-97dd2752><a href="https://redhat.com/en/blog" data-analytics-category="Footer|Corporate" data-analytics-text="Red Hat Blog" data-v-97dd2752>Red Hat Blog</a></li><li data-v-97dd2752><a href="https://redhat.com/en/about/our-culture/diversity-equity-inclusion" data-analytics-category="Footer|Corporate" data-analytics-text="Diversity equity and inclusion" data-v-97dd2752>Diversity, equity, and inclusion</a></li><li data-v-97dd2752><a href="https://coolstuff.redhat.com/" data-analytics-category="Footer|Corporate" data-analytics-text="Cool Stuff Store" data-v-97dd2752>Cool Stuff Store</a></li><li data-v-97dd2752><a href="https://www.redhat.com/en/summit" data-analytics-category="Footer|Corporate" data-analytics-text="Red Hat Summit" data-v-97dd2752>Red Hat Summit</a></li></ul><span data-v-97dd2752 data-v-5f538988></span><rh-footer-copyright slot="links-secondary" data-v-97dd2752>© 2024 Red Hat, Inc.</rh-footer-copyright><h3 slot="links-secondary" data-analytics-text="Red Hat legal and privacy links" hidden data-v-97dd2752>Red Hat legal and privacy links</h3><ul slot="links-secondary" data-analytics-region="page-footer-bottom-secondary" data-v-97dd2752><li data-v-97dd2752><a href="https://redhat.com/en/about/privacy-policy" data-analytics-category="Footer|Red Hat legal and privacy links" data-analytics-text="Privacy statement" data-v-97dd2752>Privacy statement</a></li><li data-v-97dd2752><a href="https://redhat.com/en/about/terms-use" data-analytics-category="Footer|Red Hat legal and privacy links" data-analytics-text="Terms of use" data-v-97dd2752>Terms of use</a></li><li data-v-97dd2752><a href="https://redhat.com/en/about/all-policies-guidelines" data-analytics-category="Footer|Red Hat legal and privacy links" data-analytics-text="All policies and guidelines" data-v-97dd2752>All policies and guidelines</a></li><li data-v-97dd2752><a href="https://redhat.com/en/about/digital-accessibility" data-analytics-category="Footer|Red Hat legal and privacy links" data-analytics-text="Digital accessibility" class="active" data-v-97dd2752>Digital accessibility</a></li><li data-v-97dd2752><span id="teconsent" data-v-97dd2752></span></li></ul></rh-footer-universal></rh-footer><div id="consent_blackbar" style="position:fixed;bottom:0;width:100%;z-index:5;padding:10px;"></div><!--]--><!--]--></div><div id="teleports"></div><script type="application/json" id="__NUXT_DATA__" data-ssr="true">[["ShallowReactive",1],{"data":2,"state":1488,"once":1491,"_errors":1492,"serverRendered":15,"path":1494},["ShallowReactive",3],{"s8LoCEfG4A":4,"uUstF4AIyn":10,"Pn02PlJOas":1416,"rFVLKcOK8e":1487},[5,6,7,8,9],"fr-fr","ko-kr","en-us","zh-cn","ja-jp",{"name":11,"html":12,"type":-1,"toc":13,"breadcrumbs":1323,"error":18,"title":1331,"productName":1325,"productVersions":1340,"pagination":1369,"redirect":1397,"canonicalLinks":1398,"openShiftProducts":1400,"tocFromVolume":-1,"jumpLinks":1415},"Configuring and managing virtualization","\u003Cbody>\u003Cdiv xml:lang=\"en-US\" class=\"book\" id=\"idm140237788836528\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv class=\"producttitle\">\u003Cspan class=\"productname\">Red Hat Enterprise Linux\u003C/span> \u003Cspan class=\"productnumber\">9\u003C/span>\u003C/div>\u003Cdiv>\u003Ch3 class=\"subtitle\">Setting up your host, creating and administering virtual machines, and understanding virtualization features\u003C/h3>\u003C/div>\u003Cdiv>\u003Cdiv xml:lang=\"en-US\" class=\"authorgroup\">\u003Cspan class=\"orgname\">Red Hat\u003C/span> \u003Cspan class=\"orgdiv\">Customer Content Services\u003C/span>\u003C/div>\u003C/div>\u003Cdiv>\u003Ca href=\"#idm140237782377296\">Legal Notice\u003C/a>\u003C/div>\u003Cdiv>\u003Cdiv class=\"abstract\">\u003Cp class=\"title\">\u003Cstrong>Abstract\u003C/strong>\u003C/p>\u003Cdiv class=\"para\">\n\t\t\t\tTo use a Red Hat Enterprise Linux (RHEL) system as a virtualization host, follow the instructions in this document.\n\t\t\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\t\tThe information provided includes:\n\t\t\t\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cdiv class=\"para\">\n\t\t\t\t\t\tWhat the capabilities and use cases of virtualization are\n\t\t\t\t\t\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cdiv class=\"para\">\n\t\t\t\t\t\tHow to manage your host and your virtual machines by using command-line utilities, as well as by using the web console\n\t\t\t\t\t\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cdiv class=\"para\">\n\t\t\t\t\t\tWhat the support limitations of virtualization are on various system architectures, such as Intel 64, AMD64, and IBM Z\n\t\t\t\t\t\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/div>\u003C/div>\u003Chr/>\u003C/div>\u003Csection class=\"preface\" id=\"proc_providing-feedback-on-red-hat-documentation_configuring-and-managing-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Providing feedback on Red Hat documentation\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tWe appreciate your feedback on our documentation. Let us know how we can improve it.\n\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Submitting feedback through Jira (account required)\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\tLog in to the \u003Ca class=\"link\" href=\"https://issues.redhat.com/projects/RHELDOCS/issues\">Jira\u003C/a> website.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Create\u003C/strong>\u003C/span> in the top navigation bar\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tEnter a descriptive title in the \u003Cspan class=\"strong strong\">\u003Cstrong>Summary\u003C/strong>\u003C/span> field.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tEnter your suggestion for improvement in the \u003Cspan class=\"strong strong\">\u003Cstrong>Description\u003C/strong>\u003C/span> field. Include links to the relevant parts of the documentation.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Create\u003C/strong>\u003C/span> at the bottom of the dialogue.\n\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"chapter\" id=\"introducing-virtualization-in-rhel_configuring-and-managing-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 1. Introducing virtualization in RHEL\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tIf you are unfamiliar with the concept of virtualization or its implementation in Linux, the following sections provide a general overview of virtualization in RHEL 9: its basics, advantages, components, and other possible virtualization solutions provided by Red Hat.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"what-is-virtualization_introducing-virtualization-in-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.1. What is virtualization?\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tRHEL 9 provides the \u003Cspan class=\"emphasis\">\u003Cem>virtualization\u003C/em>\u003C/span> functionality, which enables a machine running RHEL 9 to \u003Cspan class=\"emphasis\">\u003Cem>host\u003C/em>\u003C/span> multiple virtual machines (VMs), also referred to as \u003Cspan class=\"emphasis\">\u003Cem>guests\u003C/em>\u003C/span>. VMs use the host’s physical hardware and computing resources to run a separate, virtualized operating system (\u003Cspan class=\"emphasis\">\u003Cem>guest OS\u003C/em>\u003C/span>) as a user-space process on the host’s operating system.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIn other words, virtualization makes it possible to have operating systems within operating systems.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tVMs enable you to safely test software configurations and features, run legacy software, or optimize the workload efficiency of your hardware. For more information about the benefits, see \u003Ca class=\"link\" href=\"#advantages-of-virtualization_introducing-virtualization-in-rhel\" title=\"1.2. Advantages of virtualization\">Advantages of virtualization\u003C/a>.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor more information about what virtualization is, see \u003Ca class=\"link\" href=\"https://www.redhat.com/en/topics/virtualization/what-is-virtualization\">the Virtualization topic page\u003C/a>.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Next steps\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo start using virtualization in Red Hat Enterprise Linux 9, see \u003Ca class=\"link\" href=\"#assembly_enabling-virtualization-in-rhel-9_configuring-and-managing-virtualization\" title=\"Chapter 2. Enabling virtualization\">Enabling virtualization in Red Hat Enterprise Linux 9\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIn addition to Red Hat Enterprise Linux 9 virtualization, Red Hat offers a number of specialized virtualization solutions, each with a different user focus and features. For more information, see \u003Ca class=\"link\" href=\"#red-hat-virtualization-solutions_introducing-virtualization-in-rhel\" title=\"1.5. Red Hat virtualization solutions\">Red Hat virtualization solutions\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"advantages-of-virtualization_introducing-virtualization-in-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.2. Advantages of virtualization\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tUsing virtual machines (VMs) has the following benefits in comparison to using physical machines:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Flexible and fine-grained allocation of resources\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA VM runs on a host machine, which is usually physical, and physical hardware can also be assigned for the guest OS to use. However, the allocation of physical resources to the VM is done on the software level, and is therefore very flexible. A VM uses a configurable fraction of the host memory, CPUs, or storage space, and that configuration can specify very fine-grained resource requests.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, what the guest OS sees as its disk can be represented as a file on the host file system, and the size of that disk is less constrained than the available sizes for physical disks.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Software-controlled configurations\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe entire configuration of a VM is saved as data on the host, and is under software control. Therefore, a VM can easily be created, removed, cloned, migrated, operated remotely, or connected to remote storage.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Separation from the host\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA guest OS runs on a virtualized kernel, separate from the host OS. This means that any OS can be installed on a VM, and even if the guest OS becomes unstable or is compromised, the host is not affected in any way.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Space and cost efficiency\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA single physical machine can host a large number of VMs. Therefore, it avoids the need for multiple physical machines to do the same tasks, and thus lowers the space, power, and maintenance requirements associated with physical hardware.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Software compatibility\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tBecause a VM can use a different OS than its host, virtualization makes it possible to run applications that were not originally released for your host OS. For example, using a RHEL 7 guest OS, you can run applications released for RHEL 7 on a RHEL 9 host system.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tNot all operating systems are supported as a guest OS in a RHEL 9 host. For details, see \u003Ca class=\"link\" href=\"#recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization\" title=\"24.2. Recommended features in RHEL 9 virtualization\">Recommended features in RHEL 9 virtualization\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"rhel-virtual-machine-components-and-their-interaction_introducing-virtualization-in-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.3. Virtual machine components and their interaction\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tVirtualization in RHEL 9 consists of the following principal software components:\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Hypervisor\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tThe basis of creating virtual machines (VMs) in RHEL 9 is the \u003Cspan class=\"emphasis\">\u003Cem>hypervisor\u003C/em>\u003C/span>, a software layer that controls hardware and enables running multiple operating systems on a host machine.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tThe hypervisor includes the \u003Cspan class=\"strong strong\">\u003Cstrong>Kernel-based Virtual Machine (KVM)\u003C/strong>\u003C/span> module and virtualization kernel drivers. These components ensure that the Linux kernel on the host machine provides resources for virtualization to user-space software.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tAt the user-space level, the \u003Cspan class=\"strong strong\">\u003Cstrong>QEMU\u003C/strong>\u003C/span> emulator simulates a complete virtualized hardware platform that the guest operating system can run in, and manages how resources are allocated on the host and presented to the guest.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIn addition, the \u003Ccode class=\"literal package\">libvirt\u003C/code> software suite serves as a management and communication layer, making QEMU easier to interact with, enforcing security rules, and providing a number of additional tools for configuring and running VMs.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>XML configuration\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tA host-based XML configuration file (also known as a \u003Cspan class=\"emphasis\">\u003Cem>domain XML\u003C/em>\u003C/span> file) determines all settings and devices in a specific VM. The configuration includes:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tMetadata such as the name of the VM, time zone, and other information about the VM.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA description of the devices in the VM, including virtual CPUs (vCPUS), storage devices, input/output devices, network interface cards, and other hardware, real and virtual.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tVM settings such as the maximum amount of memory it can use, restart settings, and other settings about the behavior of the VM.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tFor more information about the contents of an XML configuration, see \u003Ca class=\"link\" href=\"#sample-virtual-machine-xml-configuration_viewing-information-about-virtual-machines\" title=\"9.3. Sample virtual machine XML configuration\">Sample virtual machine XML configuration\u003C/a>.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Component interaction\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tWhen a VM is started, the hypervisor uses the XML configuration to create an instance of the VM as a user-space process on the host. The hypervisor also makes the VM process accessible to the host-based interfaces, such as the \u003Ccode class=\"literal command\">virsh\u003C/code>, \u003Ccode class=\"literal command\">virt-install\u003C/code>, and \u003Ccode class=\"literal command\">guestfish\u003C/code> utilities, or the web console GUI.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tWhen these virtualization tools are used, libvirt translates their input into instructions for QEMU. QEMU communicates the instructions to KVM, which ensures that the kernel appropriately assigns the resources necessary to carry out the instructions. As a result, QEMU can execute the corresponding user-space changes, such as creating or modifying a VM, or performing an action in the VM’s guest operating system.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tWhile QEMU is an essential component of the architecture, it is not intended to be used directly on RHEL 9 systems, due to security concerns. Therefore, \u003Ccode class=\"literal\">qemu-*\u003C/code> commands are not supported by Red Hat, and it is highly recommended to interact with QEMU by using libvirt.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tFor more information about the host-based interfaces, see \u003Ca class=\"link\" href=\"#con_tools-and-interfaces-for-virtualization-management_introducing-virtualization-in-rhel\" title=\"1.4. Tools and interfaces for virtualization management\">Tools and interfaces for virtualization management\u003C/a>.\n\t\t\t\u003C/p>\u003Cdiv class=\"figure\" id=\"idm140237796909392\">\u003Cp class=\"title\">\u003Cstrong>Figure 1.1. RHEL 9 virtualization architecture\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/7372587533ceed7db8956de504f54d85/virt-architecture.png\" alt=\"virt architecture\"/>\u003C/div>\u003C/div>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"con_tools-and-interfaces-for-virtualization-management_introducing-virtualization-in-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.4. Tools and interfaces for virtualization management\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can manage virtualization in RHEL 9 by using the command-line interface (CLI) or several graphical user interfaces (GUIs).\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Command-line interface\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tThe CLI is the most powerful method of managing virtualization in RHEL 9. Prominent CLI commands for virtual machine (VM) management include:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>virsh\u003C/strong>\u003C/span> - A versatile virtualization command-line utility and shell with a great variety of purposes, depending on the provided arguments. For example:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tStarting and shutting down a VM - \u003Ccode class=\"literal\">virsh start\u003C/code> and \u003Ccode class=\"literal\">virsh shutdown\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tListing available VMs - \u003Ccode class=\"literal\">virsh list\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tCreating a VM from a configuration file - \u003Ccode class=\"literal\">virsh create\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tEntering a virtualization shell - \u003Ccode class=\"literal\">virsh\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor more information, see the \u003Ccode class=\"literal\">virsh(1)\u003C/code> man page on your system.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">virt-install\u003C/code> - A CLI utility for creating new VMs. For more information, see the \u003Ccode class=\"literal\">virt-install(1)\u003C/code> man page on your system.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">virt-xml\u003C/code> - A utility for editing the configuration of a VM.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">guestfish\u003C/code> - A utility for examining and modifying VM disk images. For more information, see the \u003Ccode class=\"literal\">guestfish(1)\u003C/code> man page on your system.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Graphical interfaces\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tYou can use the following GUIs to manage virtualization in RHEL 9:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>RHEL 9 web console\u003C/strong>\u003C/span>, also known as \u003Cspan class=\"emphasis\">\u003Cem>Cockpit\u003C/em>\u003C/span>, provides a remotely accessible and easy to use graphical user interface for managing VMs and virtualization hosts.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor instructions on basic virtualization management with the web console, see \u003Ca class=\"link\" href=\"#managing-virtual-machines-in-the-web-console_configuring-and-managing-virtualization\" title=\"Chapter 8. Managing virtual machines in the web console\">Managing virtual machines in the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"red-hat-virtualization-solutions_introducing-virtualization-in-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.5. Red Hat virtualization solutions\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe following Red Hat products are built on top of RHEL 9 virtualization features and expand the KVM virtualization capabilities available in RHEL 9. In addition, many \u003Ca class=\"link\" href=\"#assembly_feature-support-and-limitations-in-rhel-9-virtualization_configuring-and-managing-virtualization\" title=\"Chapter 24. Feature support and limitations in RHEL 9 virtualization\">limitations of RHEL 9 virtualization\u003C/a> do not apply to these products:\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">OpenShift Virtualization\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tBased on the KubeVirt technology, OpenShift Virtualization is a part of the Red Hat OpenShift Container Platform, and makes it possible to run virtual machines in containers.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor more information about OpenShift Virtualization see the \u003Ca class=\"link\" href=\"https://cloud.redhat.com/learn/topics/virtualization/\">Red Hat Hybrid Cloud\u003C/a> pages.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Red Hat OpenStack Platform (RHOSP)\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tRed Hat OpenStack Platform offers an integrated foundation to create, deploy, and scale a secure and reliable public or private \u003Ca class=\"link\" href=\"https://www.redhat.com/en/topics/openstack\">OpenStack\u003C/a> cloud.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor more information about Red Hat OpenStack Platform, see \u003Ca class=\"link\" href=\"https://www.redhat.com/en/technologies/linux-platforms/openstack-platform\">the Red Hat Customer Portal\u003C/a> or the \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/\">Red Hat OpenStack Platform documentation suite\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003C/dl>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tFor details on virtualization features not supported in RHEL but supported in other Red Hat virtualization solutions, see: \u003Ca class=\"link\" href=\"#unsupported-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization\" title=\"24.3. Unsupported features in RHEL 9 virtualization\">Unsupported features in RHEL 9 virtualization\u003C/a>\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_enabling-virtualization-in-rhel-9_configuring-and-managing-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 2. Enabling virtualization\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tTo use virtualization in RHEL 9, you must install virtualization packages and ensure your system is configured to host virtual machines (VMs). The specific steps to do this vary based on your CPU architecture.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"proc_enabling-virtualization-in-rhel-9_assembly_enabling-virtualization-in-rhel-9\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.1. Enabling virtualization on AMD64 and Intel 64\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo set up a KVM hypervisor and create virtual machines (VMs) on an AMD64 or Intel 64 system running RHEL 9, follow the instructions below.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRed Hat Enterprise Linux 9 is \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/interactively_installing_rhel_from_installation_media/index\">installed and registered\u003C/a> on your host machine.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYour system meets the following hardware requirements to work as a virtualization host:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe architecture of your host machine \u003Ca class=\"link\" href=\"#recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization\" title=\"24.2. Recommended features in RHEL 9 virtualization\">supports KVM virtualization\u003C/a>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe following minimum system resources are available:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"square\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t6 GB free disk space for the host, plus another 6 GB for each intended VM.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t2 GB of RAM for the host, plus another 2 GB for each intended VM.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the virtualization hypervisor packages.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install qemu-kvm libvirt virt-install virt-viewer\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart the virtualization services:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout white-space-pre\"># \u003Cspan class=\"strong strong\">\u003Cstrong>for drv in qemu network nodedev nwfilter secret storage interface; do systemctl start virt${drv}d{,-ro,-admin}.socket; done\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that your system is prepared to be a virtualization host:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout white-space-pre\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-host-validate\u003C/strong>\u003C/span>\n[...]\nQEMU: Checking for device assignment IOMMU support         : PASS\nQEMU: Checking if IOMMU is enabled by kernel               : WARN (IOMMU appears to be disabled in kernel. Add intel_iommu=on to kernel cmdline arguments)\nLXC: Checking for Linux &gt;= 2.6.26                          : PASS\n[...]\nLXC: Checking for cgroup 'blkio' controller mount-point    : PASS\nLXC: Checking if device /sys/fs/fuse/connections exists    : FAIL (Load the 'fuse' module to enable /proc/ overrides)\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf all \u003Cspan class=\"strong strong\">\u003Cstrong>virt-host-validate\u003C/strong>\u003C/span> checks return a \u003Ccode class=\"literal\">PASS\u003C/code> value, your system is prepared for \u003Ca class=\"link\" href=\"#assembly_creating-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 3. Creating virtual machines\">creating VMs\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf any of the checks return a \u003Ccode class=\"literal\">FAIL\u003C/code> value, follow the displayed instructions to fix the problem.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf any of the checks return a \u003Ccode class=\"literal\">WARN\u003C/code> value, consider following the displayed instructions to improve virtualization capabilities.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf KVM virtualization is not supported by your host CPU, \u003Cspan class=\"strong strong\">\u003Cstrong>virt-host-validate\u003C/strong>\u003C/span> generates the following output:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout white-space-pre\">QEMU: Checking for hardware virtualization: FAIL (Only emulated CPUs are available, performance will be significantly limited)\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tHowever, VMs on such a host system will fail to boot, rather than have performance problems.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo work around this, you can change the \u003Ccode class=\"literal\">&lt;domain type&gt;\u003C/code> value in the XML configuration of the VM to \u003Ccode class=\"literal\">qemu\u003C/code>. Note, however, that Red Hat does not support VMs that use the \u003Ccode class=\"literal\">qemu\u003C/code> domain type, and setting this is highly discouraged in production environments.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Next steps\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#assembly_creating-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 3. Creating virtual machines\">Create a virtual machine on your RHEL 9 host\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"enabling-virtualization-on-ibm-z_assembly_enabling-virtualization-in-rhel-9\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.2. Enabling virtualization on IBM Z\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tTo set up a KVM hypervisor and create virtual machines (VMs) on an IBM Z system running RHEL 9, follow the instructions below.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe following minimum system resources are available:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t6 GB free disk space for the host, plus another 6 GB for each intended VM.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t2 GB of RAM for the host, plus another 2 GB for each intended VM.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t4 CPUs on the host. VMs can generally run with a single assigned vCPU, but Red Hat recommends assigning 2 or more vCPUs per VM to avoid VMs becoming unresponsive during high load.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYour IBM Z host system is using a z13 CPU or later.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRHEL 9 is installed on a logical partition (LPAR). In addition, the LPAR supports the \u003Cspan class=\"emphasis\">\u003Cem>start-interpretive execution\u003C/em>\u003C/span> (SIE) virtualization functions.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo verify this, search for \u003Ccode class=\"literal\">sie\u003C/code> in your \u003Ccode class=\"literal\">/proc/cpuinfo\u003C/code> file.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grep sie /proc/cpuinfo\u003C/strong>\u003C/span>\nfeatures        : esan3 zarch stfle msa ldisp eimm dfp edat etf3eh highgprs te sie\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the virtualization packages:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install qemu-kvm libvirt virt-install\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart the virtualization services:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>for drv in qemu network nodedev nwfilter secret storage interface; do systemctl start virt${drv}d{,-ro,-admin}.socket; done\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that your system is prepared to be a virtualization host.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-host-validate\u003C/strong>\u003C/span>\n[...]\nQEMU: Checking if device /dev/kvm is accessible             : PASS\nQEMU: Checking if device /dev/vhost-net exists              : PASS\nQEMU: Checking if device /dev/net/tun exists                : PASS\nQEMU: Checking for cgroup 'memory' controller support       : PASS\nQEMU: Checking for cgroup 'memory' controller mount-point   : PASS\n[...]\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf all \u003Cspan class=\"strong strong\">\u003Cstrong>virt-host-validate\u003C/strong>\u003C/span> checks return a \u003Ccode class=\"literal\">PASS\u003C/code> value, your system is prepared for \u003Ca class=\"link\" href=\"#assembly_creating-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 3. Creating virtual machines\">creating VMs\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf any of the checks return a \u003Ccode class=\"literal\">FAIL\u003C/code> value, follow the displayed instructions to fix the problem.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf any of the checks return a \u003Ccode class=\"literal\">WARN\u003C/code> value, consider following the displayed instructions to improve virtualization capabilities.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf KVM virtualization is not supported by your host CPU, \u003Cspan class=\"strong strong\">\u003Cstrong>virt-host-validate\u003C/strong>\u003C/span> generates the following output:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">QEMU: Checking for hardware virtualization: FAIL (Only emulated CPUs are available, performance will be significantly limited)\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tHowever, VMs on such a host system will fail to boot, rather than have performance problems.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo work around this, you can change the \u003Ccode class=\"literal\">&lt;domain type&gt;\u003C/code> value in the XML configuration of the VM to \u003Ccode class=\"literal\">qemu\u003C/code>. Note, however, that Red Hat does not support VMs that use the \u003Ccode class=\"literal\">qemu\u003C/code> domain type, and setting this is highly discouraged in production environments.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#how-virtualization-on-ibm-z-differs-from-amd64-and-intel64_feature-support-and-limitations-in-rhel-9-virtualization\" title=\"24.6. How virtualization on IBM Z differs from AMD64 and Intel 64\">How virtualization on IBM Z differs from AMD64 and Intel 64\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"enabling-virtualization-on-arm-64_assembly_enabling-virtualization-in-rhel-9\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.3. Enabling virtualization on ARM 64\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tTo set up a KVM hypervisor for creating virtual machines (VMs) on an ARM 64 system (also known as \u003Ccode class=\"literal\">AArch64\u003C/code>) that runs RHEL 9, follow the instructions below.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe following minimum system resources are available:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t6 GB free disk space for the host, plus another 6 GB for each intended guest.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t4 GB of RAM for the host, plus another 4 GB for each intended guest.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the virtualization packages:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install qemu-kvm libvirt virt-install\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart the virtualization services:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>for drv in qemu network nodedev nwfilter secret storage interface; do systemctl start virt${drv}d{,-ro,-admin}.socket; done\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that your system is prepared to be a virtualization host:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-host-validate\u003C/strong>\u003C/span>\n[...]\nQEMU: Checking if device /dev/vhost-net exists              : PASS\nQEMU: Checking if device /dev/net/tun exists                : PASS\nQEMU: Checking for cgroup 'memory' controller support       : PASS\nQEMU: Checking for cgroup 'memory' controller mount-point   : PASS\n[...]\nQEMU: Checking for cgroup 'blkio' controller support        : PASS\nQEMU: Checking for cgroup 'blkio' controller mount-point    : PASS\nQEMU: Checking if IOMMU is enabled by kernel                : WARN (Unknown if this platform has IOMMU support)\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf all \u003Cspan class=\"strong strong\">\u003Cstrong>virt-host-validate\u003C/strong>\u003C/span> checks return a \u003Ccode class=\"literal\">PASS\u003C/code> value, your system is prepared for \u003Ca class=\"link\" href=\"#assembly_creating-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 3. Creating virtual machines\">creating virtual machines\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf any of the checks return a \u003Ccode class=\"literal\">FAIL\u003C/code> value, follow the displayed instructions to fix the problem.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf any of the checks return a \u003Ccode class=\"literal\">WARN\u003C/code> value, consider following the displayed instructions to improve virtualization capabilities.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Next steps\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#assembly_creating-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 3. Creating virtual machines\">Creating virtual machines\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#how-virtualization-on-arm-64-differs-from-amd64-and-intel64_feature-support-and-limitations-in-rhel-9-virtualization\" title=\"24.7. How virtualization on ARM 64 differs from AMD64 and Intel 64\">How virtualization on ARM 64 differs from AMD64 and Intel 64\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"enabling-qemu-guest-agent-features-on-your-virtual-machines_assembly_enabling-virtualization-in-rhel-9\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.4. Enabling QEMU Guest Agent features on your virtual machines\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo use certain features on a virtual machine (VM) hosted on your RHEL 9 system, you must first configure the VM to use the QEMU Guest Agent (GA).\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor a complete list of these features, see \u003Ca class=\"link\" href=\"#virtualization-features-that-require-qemu-guest-agent_enabling-qemu-guest-agent-features-on-your-virtual-machines\" title=\"2.4.3. Virtualization features that require QEMU Guest Agent\">Virtualization features that require QEMU Guest Agent\u003C/a>.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe specific steps required to configure QEMU GA on a VM differ based on the guest operating system used by the VM:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor Linux VMs, see \u003Ca class=\"link\" href=\"#installing-qemu-guest-agent-on-linux-guests_enabling-qemu-guest-agent-features-on-your-virtual-machines\" title=\"2.4.1. Enabling QEMU Guest Agent on Linux guests\">Enabling QEMU Guest Agent on Linux guests\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor Windows VMs, see \u003Ca class=\"link\" href=\"#proc_installing-qemu-guest-agent-on-windows-guests_enabling-qemu-guest-agent-features-on-your-virtual-machines\" title=\"2.4.2. Enabling QEMU Guest Agent on Windows guests\">Enabling QEMU Guest Agent on Windows guests\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"installing-qemu-guest-agent-on-linux-guests_enabling-qemu-guest-agent-features-on-your-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">2.4.1. Enabling QEMU Guest Agent on Linux guests\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tTo allow a RHEL host to perform \u003Ca class=\"link\" href=\"#virtualization-features-that-require-qemu-guest-agent_enabling-qemu-guest-agent-features-on-your-virtual-machines\" title=\"2.4.3. Virtualization features that require QEMU Guest Agent\">a certain subset of operations\u003C/a> on a Linux virtual machine (VM), you must enable the QEMU Guest Agent (GA).\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tYou can enable QEMU GA both on running and shut-down VMs.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tCreate an XML configuration file for the QEMU GA, for example named \u003Ccode class=\"literal\">qemuga.xml\u003C/code>:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>touch \u003Cspan class=\"emphasis\">\u003Cem>qemuga.xml\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tAdd the following lines to the file:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;channel type='unix'&gt;\n   &lt;source mode='bind' path='/var/lib/libvirt/qemu/f16x86_64.agent'/&gt;\n   &lt;target type='virtio' name='org.qemu.guest_agent.0'/&gt;\n&lt;/channel&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the XML file to add QEMU GA to the configuration of the VM.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIf the VM is running, use the following command:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh attach-device \u003Cspan class=\"emphasis\">\u003Cem>&lt;vm-name&gt;\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>qemuga.xml\u003C/em>\u003C/span> --live --config\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIf the VM is shut-down, use the following command:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh attach-device \u003Cspan class=\"emphasis\">\u003Cem>&lt;vm-name&gt;\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>qemuga.xml\u003C/em>\u003C/span> --config\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the Linux guest operating system, install the QEMU GA:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install qemu-guest-agent\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tStart the QEMU GA service on the guest:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl start qemu-guest-agent\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tTo ensure that QEMU GA is enabled and running on the Linux VM, do any of the following:\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIn the guest operating system, use the \u003Ccode class=\"literal\">systemctl status qemu-guest-agent | grep Loaded\u003C/code> command. If the output includes \u003Ccode class=\"literal\">enabled\u003C/code>, QEMU GA is active on the VM.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virsh domfsinfo \u003Cspan class=\"emphasis\">\u003Cem>&lt;vm-name&gt;\u003C/em>\u003C/span>\u003C/code> command on the host. If it displays any output, QEMU GA is active on the specified VM.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#virtualization-features-that-require-qemu-guest-agent_enabling-qemu-guest-agent-features-on-your-virtual-machines\" title=\"2.4.3. Virtualization features that require QEMU Guest Agent\">Virtualization features that require QEMU Guest Agent\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_installing-qemu-guest-agent-on-windows-guests_enabling-qemu-guest-agent-features-on-your-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">2.4.2. Enabling QEMU Guest Agent on Windows guests\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tTo allow a RHEL host to perform \u003Ca class=\"link\" href=\"#virtualization-features-that-require-qemu-guest-agent_enabling-qemu-guest-agent-features-on-your-virtual-machines\" title=\"2.4.3. Virtualization features that require QEMU Guest Agent\">a certain subset of operations\u003C/a> on a Windows virtual machine (VM), you must enable the QEMU Guest Agent (GA). To do so, add a storage device that contains the QEMU Guest Agent installer to an existing VM or when creating a new VM, and install the drivers on the Windows guest operating system.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tTo install the Guest Agent (GA) by using the graphical interface, see the procedure below. To install the GA in a command-line interface, use the \u003Ca class=\"link\" href=\"https://docs.microsoft.com/en-us/windows/win32/msi/about-windows-installer\">Microsoft Windows Installer (MSI)\u003C/a>.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tAn installation medium with the Guest Agent is attached to the VM. For instructions on preparing the medium, see \u003Ca class=\"link\" href=\"#installing-kvm-drivers-on-a-host-machine_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines\" title=\"21.2.1.2. Preparing virtio driver installation media on a host machine\">Preparing virtio driver installation media on a host machine\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIn the Windows guest operating system, open the \u003Ccode class=\"literal\">File Explorer\u003C/code> application.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tClick \u003Ccode class=\"literal\">This PC\u003C/code>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIn the \u003Ccode class=\"literal\">Devices and drives\u003C/code> pane, open the \u003Ccode class=\"literal\">virtio-win\u003C/code> medium.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tOpen the \u003Ccode class=\"literal\">guest-agent\u003C/code> folder.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tBased on the operating system installed on the VM, run one of the following installers:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tIf using a 32-bit operating system, run the \u003Ccode class=\"literal\">qemu-ga-i386.msi\u003C/code> installer.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tIf using a 64-bit operating system, run the \u003Ccode class=\"literal\">qemu-ga-x86_64.msi\u003C/code> installer.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tOptional: If you want to use the para-virtualized serial driver (\u003Ccode class=\"literal\">virtio-serial\u003C/code>) as the communication interface between the host and the Windows guest, verify that the \u003Ccode class=\"literal\">virtio-serial\u003C/code> driver is installed on the Windows guest. For more information about installing \u003Ccode class=\"literal\">virtio\u003C/code> drivers, see: \u003Ca class=\"link\" href=\"#installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines\" title=\"21.2.1.3. Installing virtio drivers on a Windows guest\">Installing virtio drivers on a Windows guest\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOn your Windows VM, navigate to the \u003Cspan class=\"strong strong\">\u003Cstrong>Services\u003C/strong>\u003C/span> window.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Computer Management &gt; Services\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tEnsure that the status of the \u003Ccode class=\"literal\">QEMU Guest Agent\u003C/code> service is \u003Ccode class=\"literal\">Running\u003C/code>.\n\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#virtualization-features-that-require-qemu-guest-agent_enabling-qemu-guest-agent-features-on-your-virtual-machines\" title=\"2.4.3. Virtualization features that require QEMU Guest Agent\">Virtualization features that require QEMU Guest Agent\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"virtualization-features-that-require-qemu-guest-agent_enabling-qemu-guest-agent-features-on-your-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">2.4.3. Virtualization features that require QEMU Guest Agent\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tIf you enable QEMU Guest Agent (GA) on a virtual machine (VM), you can use the following commands on your host to manage the VM:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">virsh shutdown --mode=agent\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\tThis shutdown method is more reliable than \u003Ccode class=\"literal\">virsh shutdown --mode=acpi\u003C/code>, because \u003Ccode class=\"literal\">virsh shutdown\u003C/code> used with QEMU GA is guaranteed to shut down a cooperative guest in a clean state.\n\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">virsh domfsfreeze\u003C/code> and \u003Ccode class=\"literal\">virsh domfsthaw\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\tFreezes the guest file system in isolation.\n\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">virsh domfstrim\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tInstructs the guest to trim its file system, which helps to reduce the data that needs to be transferred during migrations.\n\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tIf you want to use this command to manage a Linux VM, you must also set the following SELinux boolean in the guest operating system:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>setsebool virt_qemu_ga_read_nonsecurity_files on\u003C/strong>\u003C/span>\u003C/pre>\u003C/div>\u003C/rh-alert>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">virsh domtime\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\tQueries or sets the guest’s clock.\n\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">virsh setvcpus --guest\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\tInstructs the guest to take CPUs offline, which is useful when CPUs cannot be hot-unplugged.\n\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">virsh domifaddr --source agent\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\tQueries the guest operating system’s IP address by using QEMU GA. For example, this is useful when the guest interface is directly attached to a host interface.\n\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">virsh domfsinfo\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\tShows a list of mounted file systems in the running guest.\n\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">virsh set-user-password\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\tSets the password for a given user account in the guest.\n\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">virsh set-user-sshkeys\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEdits the authorized SSH keys file for a given user in the guest.\n\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tIf you want to use this command to manage a Linux VM, you must also set the following SELinux boolean in the guest operating system:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>setsebool virt_qemu_ga_manage_ssh on\u003C/strong>\u003C/span>\u003C/pre>\u003C/div>\u003C/rh-alert>\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#installing-qemu-guest-agent-on-linux-guests_enabling-qemu-guest-agent-features-on-your-virtual-machines\" title=\"2.4.1. Enabling QEMU Guest Agent on Linux guests\">Enabling QEMU Guest Agent on Linux guests\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_installing-qemu-guest-agent-on-windows-guests_enabling-qemu-guest-agent-features-on-your-virtual-machines\" title=\"2.4.2. Enabling QEMU Guest Agent on Windows guests\">Enabling QEMU Guest Agent on Windows guests\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_creating-virtual-machines_configuring-and-managing-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 3. Creating virtual machines\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tTo create a virtual machine (VM) in RHEL 9, use the \u003Ca class=\"link\" href=\"#creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines\" title=\"3.1. Creating virtual machines by using the command-line interface\">command-line interface\u003C/a> or the \u003Ca class=\"link\" href=\"#creating-vms-and-installing-an-os-using-the-rhel-web-console_assembly_creating-virtual-machines\" title=\"3.2. Creating virtual machines and installing guest operating systems by using the web console\">RHEL 9 web console\u003C/a>.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.1. Creating virtual machines by using the command-line interface\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo create a virtual machine (VM) on your RHEL 9 host by using the \u003Ccode class=\"literal\">virt-install\u003C/code> utility, follow the instructions below.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tVirtualization is \u003Ca class=\"link\" href=\"#assembly_enabling-virtualization-in-rhel-9_configuring-and-managing-virtualization\" title=\"Chapter 2. Enabling virtualization\">enabled\u003C/a> on your host system.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have a sufficient amount of system resources to allocate to your VMs, such as disk space, RAM, or CPUs. The recommended values may vary significantly depending on the intended tasks and workload of the VMs.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAn operating system (OS) installation source is available locally or on a network. This can be one of the following:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAn ISO image of an installation medium\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tA disk image of an existing VM installation\n\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tInstalling from a host CD-ROM or DVD-ROM device is not possible in RHEL 9. If you select a CD-ROM or DVD-ROM as the installation source when using any VM installation method available in RHEL 9, the installation will fail. For more information, see the \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/1185913\">Red Hat Knowledgebase\u003C/a>.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAlso note that Red Hat provides support only for \u003Ca class=\"link\" href=\"#recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization\" title=\"24.2. Recommended features in RHEL 9 virtualization\">a limited set of guest operating systems\u003C/a>.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOptional: A Kickstart file can be provided for faster and easier configuration of the installation.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tTo create a VM and start its OS installation, use the \u003Ccode class=\"literal\">virt-install\u003C/code> command, along with the following mandatory arguments:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">--name\u003C/code>: the name of the new machine\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">--memory\u003C/code>: the amount of allocated memory\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">--vcpus\u003C/code>: the number of allocated virtual CPUs\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">--disk\u003C/code>: the type and size of the allocated storage\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">--cdrom\u003C/code> or \u003Ccode class=\"literal\">--location\u003C/code>: the type and location of the OS installation source\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tBased on the chosen installation method, the necessary options and values can vary. See the commands below for examples:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe following command creates a VM named \u003Cspan class=\"strong strong\">\u003Cstrong>demo-guest1\u003C/strong>\u003C/span> that installs the Windows 10 OS from an ISO image locally stored in the \u003Cspan class=\"strong strong\">\u003Cstrong>/home/username/Downloads/Win10install.iso\u003C/strong>\u003C/span> file. This VM is also allocated with 2048 MiB of RAM and 2 vCPUs, and an 80 GiB qcow2 virtual disk is automatically configured for the VM.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-install \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--name demo-guest1 --memory 2048 \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--vcpus 2 --disk size=80 --os-variant win10 \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--cdrom /home/username/Downloads/Win10install.iso\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe following command creates a VM named \u003Cspan class=\"strong strong\">\u003Cstrong>demo-guest2\u003C/strong>\u003C/span> that uses the \u003Cspan class=\"strong strong\">\u003Cstrong>/home/username/Downloads/rhel9.iso\u003C/strong>\u003C/span> image to run a RHEL 9 OS from a live CD. No disk space is assigned to this VM, so changes made during the session will not be preserved. In addition, the VM is allocated with 4096 MiB of RAM and 4 vCPUs.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-install \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--name demo-guest2 --memory 4096 --vcpus 4 \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--disk none --livecd --os-variant rhel9.0 \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--cdrom /home/username/Downloads/rhel9.iso\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe following command creates a RHEL 9 VM named \u003Cspan class=\"strong strong\">\u003Cstrong>demo-guest3\u003C/strong>\u003C/span> that connects to an existing disk image, \u003Cspan class=\"strong strong\">\u003Cstrong>/home/username/backup/disk.qcow2\u003C/strong>\u003C/span>. This is similar to physically moving a hard drive between machines, so the OS and data available to demo-guest3 are determined by how the image was handled previously. In addition, this VM is allocated with 2048 MiB of RAM and 2 vCPUs.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-install \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--name demo-guest3 --memory 2048 --vcpus 2 \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--os-variant rhel9.0 --import \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--disk /home/username/backup/disk.qcow2\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that the \u003Ccode class=\"literal\">--os-variant\u003C/code> option is highly recommended when importing a disk image. If it is not provided, the performance of the created VM will be negatively affected.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe following command creates a VM named \u003Cspan class=\"strong strong\">\u003Cstrong>demo-guest4\u003C/strong>\u003C/span> that installs from the \u003Ccode class=\"literal\">http://example.com/OS-install\u003C/code> URL. For the installation to start successfully, the URL must contain a working OS installation tree. In addition, the OS is automatically configured by using the \u003Cspan class=\"strong strong\">\u003Cstrong>/home/username/ks.cfg\u003C/strong>\u003C/span> kickstart file. This VM is also allocated with 2048 MiB of RAM, 2 vCPUs, and a 160 GiB qcow2 virtual disk.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-install \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--name demo-guest4 --memory 2048 --vcpus 2 --disk size=160 \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--os-variant rhel9.0 --location http://example.com/OS-install \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--initrd-inject /home/username/ks.cfg --extra-args=\"inst.ks=file:/ks.cfg console=tty0 console=ttyS0,115200n8\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn addition, if you want to host demo-guest4 on an RHEL 9 on an ARM 64 host, include the following lines to ensure that the kickstart file installs the \u003Ccode class=\"literal\">kernel-64k\u003C/code> package:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">%packages\n-kernel\nkernel-64k\n%end\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe following command creates a VM named \u003Cspan class=\"strong strong\">\u003Cstrong>demo-guest5\u003C/strong>\u003C/span> that installs from a \u003Ccode class=\"literal\">RHEL9.iso\u003C/code> image file in text-only mode, without graphics. It connects the guest console to the serial console. The VM has 16384 MiB of memory, 16 vCPUs, and 280 GiB disk. This kind of installation is useful when connecting to a host over a slow network link.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-install \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--name demo-guest5 --memory 16384 --vcpus 16 --disk size=280 \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--os-variant rhel9.0 --location RHEL9.iso \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--graphics none --extra-args='console=ttyS0'\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe following command creates a VM named \u003Cspan class=\"strong strong\">\u003Cstrong>demo-guest6\u003C/strong>\u003C/span>, which has the same configuration as demo-guest5, but resides on the 192.0.2.1 remote host.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-install \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--connect qemu+ssh://root@192.0.2.1/system --name demo-guest6 --memory 16384 \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--vcpus 16 --disk size=280 --os-variant rhel9.0 --location RHEL9.iso \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--graphics none --extra-args='console=ttyS0'\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe following command creates a VM named \u003Cspan class=\"strong strong\">\u003Cstrong>demo-guest-7\u003C/strong>\u003C/span>, which has the same configuration as demo-guest5, but for its storage, it uses a DASD mediated device \u003Ccode class=\"literal\">mdev_30820a6f_b1a5_4503_91ca_0c10ba12345a_0_0_29a8\u003C/code>, and assigns it device number \u003Ccode class=\"literal\">1111\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-install \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--name demo-guest7 --memory 16384 --vcpus 16 --disk size=280 \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--os-variant rhel9.0 --location RHEL9.iso --graphics none \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--disk none --hostdev mdev_30820a6f_b1a5_4503_91ca_0c10ba12345a_0_0_29a8,address.type=ccw,address.cssid=0xfe,address.ssid=0x0,address.devno=0x1111,boot-order=1 \\\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>--extra-args 'rd.dasd=0.0.1111'\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that the name of the mediated device available for installation can be retrieved by using the \u003Ccode class=\"literal\">virsh nodedev-list --cap mdev\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf the VM is created successfully, a \u003Ca class=\"link\" href=\"#proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines\" title=\"5.2. Opening a virtual machine graphical console by using Virt Viewer\">virt-viewer\u003C/a> window opens with a graphical console of the VM and starts the guest OS installation.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf \u003Ccode class=\"literal\">virt-install\u003C/code> fails with a \u003Ccode class=\"literal\">cannot find default network\u003C/code> error:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnsure that the \u003Ccode class=\"literal\">libvirt-daemon-config-network\u003C/code> package is installed:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>{PackageManagerCommand} info libvirt-daemon-config-network\u003C/strong>\u003C/span>\nInstalled Packages\nName         : libvirt-daemon-config-network\n[...]\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tVerify that the \u003Ccode class=\"literal\">libvirt\u003C/code> default network is active and configured to start automatically:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh net-list --all\u003C/strong>\u003C/span>\n Name      State    Autostart   Persistent\n--------------------------------------------\n default   active   yes         yes\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf it is not, activate the default network and set it to auto-start:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh net-autostart default\u003C/strong>\u003C/span>\nNetwork default marked as autostarted\n\n# \u003Cspan class=\"strong strong\">\u003Cstrong>virsh net-start default\u003C/strong>\u003C/span>\nNetwork default started\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"square\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tIf activating the default network fails with the following error, the \u003Ccode class=\"literal\">libvirt-daemon-config-network\u003C/code> package has not been installed correctly.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">error: failed to get network 'default'\nerror: Network not found: no network with matching name 'default'\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tTo fix this, re-install \u003Ccode class=\"literal\">libvirt-daemon-config-network\u003C/code>:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>{PackageManagerCommand} reinstall libvirt-daemon-config-network\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tIf activating the default network fails with an error similar to the following, a conflict has occurred between the default network’s subnet and an existing interface on the host.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">error: Failed to start network default\nerror: internal error: Network is already in use by interface ens2\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tTo fix this, use the \u003Ccode class=\"literal\">virsh net-edit default\u003C/code> command and change the \u003Ccode class=\"literal\">192.0.2.*\u003C/code> values in the configuration to a subnet not already in use on the host.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">virt-install (1)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-vms-and-installing-an-os-using-the-rhel-web-console_assembly_creating-virtual-machines\" title=\"3.2. Creating virtual machines and installing guest operating systems by using the web console\">Creating virtual machines and installing guest operating systems by using the web console\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#cloning-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 11. Cloning virtual machines\">Cloning virtual machines\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-vms-and-installing-an-os-using-the-rhel-web-console_assembly_creating-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.2. Creating virtual machines and installing guest operating systems by using the web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tTo manage virtual machines (VMs) in a GUI on a RHEL 9 host, use the web console. The following sections provide information about how to use the RHEL 9 web console to create VMs and install guest operating systems on them.\n\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"creating-vms-using-the-rhel-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">3.2.1. Creating virtual machines by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tTo create a virtual machine (VM) on a host machine to which your RHEL 9 web console is connected, use the instructions below.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#assembly_enabling-virtualization-in-rhel-9_configuring-and-managing-virtualization\" title=\"Chapter 2. Enabling virtualization\">Virtualization is enabled on your host system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">The web console VM plug-in is installed on your host system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou have a sufficient amount of system resources to allocate to your VMs, such as disk space, RAM, or CPUs. The recommended values might vary significantly depending on the intended tasks and workload of the VMs.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Virtual Machines\u003C/strong>\u003C/span> interface of the web console, click \u003Cspan class=\"strong strong\">\u003Cstrong>\u003Cspan class=\"guibutton\">Create VM\u003C/span>\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Create new virtual machine\u003C/strong>\u003C/span> dialog appears.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/0dcb53f27752cddead439a46f7666905/virt-cockpit-create-new.png\" width=\"540\" alt=\"Image displaying the Create new virtual machine dialog box.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnter the basic configuration of the VM you want to create.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Name\u003C/strong>\u003C/span> - The name of the VM.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Connection\u003C/strong>\u003C/span> - The level of privileges granted to the session. For more details, expand the associated dialog box in the web console.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Installation type\u003C/strong>\u003C/span> - The installation can use a local installation medium, a URL, a PXE network boot, a cloud base image, or download an operating system from a limited set of operating systems.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Operating system\u003C/strong>\u003C/span> - The guest operating system running on the VM. Note that Red Hat provides support only for \u003Ca class=\"link\" href=\"#recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization\" title=\"24.2. Recommended features in RHEL 9 virtualization\">a limited set of guest operating systems\u003C/a>.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\t\tTo download and install Red Hat Enterprise Linux directly from web console, you must add an offline token in the \u003Cspan class=\"strong strong\">\u003Cstrong>Offline token\u003C/strong>\u003C/span> field.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Storage\u003C/strong>\u003C/span> - The type of storage.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Storage Limit\u003C/strong>\u003C/span> - The amount of storage space.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Memory\u003C/strong>\u003C/span> - The amount of memory.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tCreate the VM:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tIf you want the VM to automatically install the operating system, click \u003Cspan class=\"guibutton\">Create and run\u003C/span>.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tIf you want to edit the VM before the operating system is installed, click \u003Cspan class=\"guibutton\">Create and edit\u003C/span>.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Next steps\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#installing-an-os-using-the-rhel-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console\" title=\"3.2.3. Installing guest operating systems by using the web console\">Installing guest operating systems by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines\" title=\"3.1. Creating virtual machines by using the command-line interface\">Creating virtual machines by using the command-line interface\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-virtual-machines-by-importing-disk-images-using-the-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">3.2.2. Creating virtual machines by importing disk images by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tYou can create a virtual machine (VM) by importing a disk image of an existing VM installation in the RHEL 9 web console.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">The web console VM plug-in is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou have a sufficient amount of system resources to allocate to your VMs, such as disk space, RAM, or CPUs. The recommended values can vary significantly depending on the intended tasks and workload of the VMs.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou have downloaded a disk image of an existing VM installation.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Virtual Machines\u003C/strong>\u003C/span> interface of the web console, click \u003Cspan class=\"strong strong\">\u003Cstrong>\u003Cspan class=\"guibutton\">Import VM\u003C/span>\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Import a virtual machine dialog\u003C/strong>\u003C/span> appears.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/c70372b3abff0535c335409fca99dd78/virt-cockpit-import.png\" alt=\"Image displaying the Import a virtual machine dialog box.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnter the basic configuration of the VM you want to create:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Name\u003C/strong>\u003C/span> - The name of the VM.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Disk image\u003C/strong>\u003C/span> - The path to the existing disk image of a VM on the host system.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Operating system\u003C/strong>\u003C/span> - The operating system running on a VM disk. Note that Red Hat provides support only for \u003Ca class=\"link\" href=\"#recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization\" title=\"24.2. Recommended features in RHEL 9 virtualization\">a limited set of guest operating systems\u003C/a>.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Memory\u003C/strong>\u003C/span> - The amount of memory to allocate for use by the VM.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tImport the VM:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tTo install the operating system on the VM without additional edits to the VM settings, click \u003Cspan class=\"guibutton\">Import and run\u003C/span>.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tTo edit the VM settings before the installation of the operating system, click \u003Cspan class=\"guibutton\">Import and edit\u003C/span>.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"installing-an-os-using-the-rhel-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">3.2.3. Installing guest operating systems by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tWhen a virtual machine (VM) boots for the first time, you must install an operating system on the VM.\n\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tIf you click \u003Cspan class=\"guibutton\">Create and run\u003C/span> or \u003Cspan class=\"guibutton\">Import and run\u003C/span> while creating a new VM, the installation routine for the operating system starts automatically when the VM is created.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">The web console VM plug-in is installed on your host system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Virtual Machines\u003C/strong>\u003C/span> interface, click the VM on which you want to install a guest OS.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA new page opens with basic information about the selected VM and controls for managing various aspects of the VM.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/95ba9d996be75a4497924d6f6c01056a/virt-cockpit-VM-home.png\" alt=\"Page displaying detailed information about the virtual machine.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: Change the firmware.\n\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tYou can change the firmware only if you selected \u003Cspan class=\"guibutton\">Create and edit\u003C/span> or \u003Cspan class=\"guibutton\">Import and edit\u003C/span> while creating a new VM and if the OS is not already installed on the VM.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t+ .. Click the firmware.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Change Firmware\u003C/strong>\u003C/span> window, select the required firmware.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Save\u003C/span>.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Install\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe installation routine of the operating system runs in the VM console.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIf the installation routine fails, delete and recreate the VM before starting the installation again.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_creating-virtual-machines-with-cloud-image-authentication-using-the-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">3.2.4. Creating virtual machines with cloud image authentication by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tBy default, distro cloud images have no login accounts. However, by using the RHEL web console, you can now create a virtual machine (VM) and specify the root and user account login credentials, which are then passed to cloud-init.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tVirtualization is \u003Ca class=\"link\" href=\"#assembly_enabling-virtualization-in-rhel-9_configuring-and-managing-virtualization\" title=\"Chapter 2. Enabling virtualization\">enabled\u003C/a> on your host system.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou have a sufficient amount of system resources to allocate to your VMs, such as disk space, RAM, or CPUs. The recommended values may vary significantly depending on the intended tasks and workload of the VMs.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface of the web console, click \u003Cspan class=\"strong strong\">\u003Cstrong>\u003Cspan class=\"guibutton\">Create VM\u003C/span>\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe Create new virtual machine dialog appears.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/0dcb53f27752cddead439a46f7666905/virt-cockpit-create-new.png\" width=\"540\" alt=\"Image displaying the Create new virtual machine dialog box.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Name\u003C/strong>\u003C/span> field, enter a name for the VM.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOn the \u003Cspan class=\"strong strong\">\u003Cstrong>Details\u003C/strong>\u003C/span> tab, in the \u003Cspan class=\"strong strong\">\u003Cstrong>Installation type\u003C/strong>\u003C/span> field, select \u003Cspan class=\"strong strong\">\u003Cstrong>Cloud base image\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/d716ddf499f94675f93d19eafc8892c0/virt-cockpit-create-cloud-vm.png\" width=\"540\" alt=\"Image displaying the Create new virtual machine by using cloud-init dialog box.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Installation source\u003C/strong>\u003C/span> field, set the path to the image file on your host system.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnter the configuration for the VM that you want to create.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Operating system\u003C/strong>\u003C/span> - The VM’s operating system. Note that Red Hat provides support only for \u003Ca class=\"link\" href=\"#recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization\" title=\"24.2. Recommended features in RHEL 9 virtualization\">a limited set of guest operating systems\u003C/a>.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Storage\u003C/strong>\u003C/span> - The type of storage with which to configure the VM.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Storage Limit\u003C/strong>\u003C/span> - The amount of storage space with which to configure the VM.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Memory\u003C/strong>\u003C/span> - The amount of memory with which to configure the VM.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick on the \u003Cspan class=\"strong strong\">\u003Cstrong>Automation\u003C/strong>\u003C/span> tab.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tSet your cloud authentication credentials.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Root password\u003C/strong>\u003C/span> - Enter a root password for your VM. Leave the field blank if you do not wish to set a root password.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>User login\u003C/strong>\u003C/span> - Enter a cloud-init user login. Leave this field blank if you do not wish to create a user account.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>User password\u003C/strong>\u003C/span> - Enter a password. Leave this field blank if you do not wish to create a user account.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/4305e012ac634880c58e139b0ef8b546/virt-cockpit-create-vm-automation.png\" width=\"540\" alt=\"Image displaying the Automation tab of the Create new virtual machine dialog box.\"/>\u003C/div>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Create and run\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe VM is created.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#installing-an-os-using-the-rhel-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console\" title=\"3.2.3. Installing guest operating systems by using the web console\">Installing an operating system on a VM\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_starting-virtual-machines_configuring-and-managing-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 4. Starting virtual machines\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tTo start a virtual machine (VM) in RHEL 9, you can use \u003Ca class=\"link\" href=\"#starting-a-virtual-machine-using-the-command-line-interface_assembly_starting-virtual-machines\" title=\"4.1. Starting a virtual machine by using the command-line interface\">the command line interface\u003C/a> or \u003Ca class=\"link\" href=\"#powering-up-vms-using-the-rhel-web-console_assembly_starting-virtual-machines\" title=\"4.2. Starting virtual machines by using the web console\">the web console GUI\u003C/a>.\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tBefore a VM can be started, it must be created and, ideally, also installed with an OS. For instruction to do so, see \u003Ca class=\"link\" href=\"#assembly_creating-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 3. Creating virtual machines\">Creating virtual machines\u003C/a>.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"starting-a-virtual-machine-using-the-command-line-interface_assembly_starting-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">4.1. Starting a virtual machine by using the command-line interface\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can use the command line interface (CLI) to start a shut-down virtual machine (VM) or restore a saved VM. By using the CLI, you can start both local and remote VMs.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAn inactive VM that is already defined.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe name of the VM.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor remote VMs:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe IP address of the host where the VM is located.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tRoot access privileges to the host.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor a local VM, use the \u003Ccode class=\"literal\">virsh start\u003C/code> utility.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, the following command starts the \u003Cspan class=\"emphasis\">\u003Cem>demo-guest1\u003C/em>\u003C/span> VM.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh start demo-guest1\u003C/strong>\u003C/span>\nDomain 'demo-guest1' started\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor a VM located on a remote host, use the \u003Ccode class=\"literal\">virsh start\u003C/code> utility along with the QEMU+SSH connection to the host.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, the following command starts the \u003Cspan class=\"emphasis\">\u003Cem>demo-guest1\u003C/em>\u003C/span> VM on the 192.0.2.1 host.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh -c qemu+ssh://root@192.0.2.1/system start demo-guest1\u003C/strong>\u003C/span>\n\nroot@192.0.2.1's password:\n\nDomain 'demo-guest1' started\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">virsh start --help\u003C/code> command\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines\" title=\"5.5. Setting up easy access to remote virtualization hosts\">Setting up easy access to remote virtualization hosts\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#starting-virtual-machines-automatically-when-the-host-starts_assembly_starting-virtual-machines\" title=\"4.3. Starting virtual machines automatically when the host starts\">Starting virtual machines automatically when the host starts\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"powering-up-vms-using-the-rhel-web-console_assembly_starting-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">4.2. Starting virtual machines by using the web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tIf a virtual machine (VM) is in the \u003Cspan class=\"emphasis\">\u003Cem>shut off\u003C/em>\u003C/span> state, you can start it by using the RHEL 9 web console. You can also configure the VM to be started automatically when the host starts.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAn inactive VM that is already defined.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe name of the VM.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, click the VM you want to start.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA new page opens with detailed information about the selected VM and controls for shutting down and deleting the VM.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Run\u003C/span>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe VM starts, and you can \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/assembly_connecting-to-virtual-machines_configuring-and-managing-virtualization\">connect to its console or graphical output\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: To configure the VM to start automatically when the host starts, toggle the \u003Ccode class=\"literal\">Autostart\u003C/code> checkbox in the \u003Cspan class=\"strong strong\">\u003Cstrong>Overview\u003C/strong>\u003C/span> section.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you use network interfaces that are not managed by libvirt, you must also make additional changes to the systemd configuration. Otherwise, the affected VMs might fail to start, see \u003Ca class=\"link\" href=\"#starting-virtual-machines-automatically-when-the-host-starts_assembly_starting-virtual-machines\" title=\"4.3. Starting virtual machines automatically when the host starts\">starting virtual machines automatically when the host starts\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#powering-down-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console\" title=\"6.2.1. Shutting down virtual machines in the web console\">Shutting down virtual machines in the web console\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#restarting-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console\" title=\"6.2.2. Restarting virtual machines by using the web console\">Restarting virtual machines by using the web console\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"starting-virtual-machines-automatically-when-the-host-starts_assembly_starting-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">4.3. Starting virtual machines automatically when the host starts\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tWhen a host with a running virtual machine (VM) restarts, the VM is shut down, and must be started again manually by default. To ensure a VM is active whenever its host is running, you can configure the VM to be started automatically.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#assembly_creating-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 3. Creating virtual machines\">A created virtual machine\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virsh autostart\u003C/code> utility to configure the VM to start automatically when the host starts.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, the following command configures the \u003Cspan class=\"emphasis\">\u003Cem>demo-guest1\u003C/em>\u003C/span> VM to start automatically.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh autostart demo-guest1\u003C/strong>\u003C/span>\nDomain '\u003Cspan class=\"emphasis\">\u003Cem>demo-guest1\u003C/em>\u003C/span>' marked as autostarted\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you use network interfaces that are not managed by \u003Ccode class=\"literal\">libvirt\u003C/code>, you must also make additional changes to the systemd configuration. Otherwise, the affected VMs might fail to start.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThese interfaces include for example:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tBridge devices created by \u003Ccode class=\"literal\">NetworkManager\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tNetworks configured to use \u003Ccode class=\"literal\">&lt;forward mode='bridge'/&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIn the systemd configuration directory tree, create a \u003Ccode class=\"literal\">virtqemud.service.d\u003C/code> directory if it does not exist yet.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mkdir -p /etc/systemd/system/virtqemud.service.d/\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate a \u003Ccode class=\"literal\">10-network-online.conf\u003C/code> systemd unit override file in the previously created directory. The content of this file overrides the default systemd configuration for the \u003Ccode class=\"literal\">virtqemud\u003C/code> service.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>touch /etc/systemd/system/virtqemud.service.d/10-network-online.conf\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd the following lines to the \u003Ccode class=\"literal\">10-network-online.conf\u003C/code> file. This configuration change ensures systemd starts the \u003Ccode class=\"literal\">virtqemud\u003C/code> service only after the network on the host is ready.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">[Unit]\nAfter=network-online.target\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tView the VM configuration, and check that the \u003Cspan class=\"emphasis\">\u003Cem>autostart\u003C/em>\u003C/span> option is enabled.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, the following command displays basic information about the \u003Cspan class=\"emphasis\">\u003Cem>demo-guest1\u003C/em>\u003C/span> VM, including the \u003Cspan class=\"emphasis\">\u003Cem>autostart\u003C/em>\u003C/span> option.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dominfo demo-guest1\u003C/strong>\u003C/span>\nId:             2\nName:           demo-guest1\nUUID:           e46bc81c-74e2-406e-bd7a-67042bae80d1\nOS Type:        hvm\nState:          running\nCPU(s):         2\nCPU time:       385.9s\nMax memory:     4194304 KiB\nUsed memory:    4194304 KiB\nPersistent:     yes\nAutostart:      enable\nManaged save:   no\nSecurity model: selinux\nSecurity DOI:   0\nSecurity label: system_u:system_r:svirt_t:s0:c873,c919 (enforcing)\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you use network interfaces that are not managed by libvirt, check if the content of the \u003Ccode class=\"literal\">10-network-online.conf\u003C/code> file matches the following output.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>cat /etc/systemd/system/virtqemud.service.d/10-network-online.conf\u003C/strong>\u003C/span>\n[Unit]\nAfter=network-online.target\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">virsh autostart --help\u003C/code> command\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#powering-up-vms-using-the-rhel-web-console_assembly_starting-virtual-machines\" title=\"4.2. Starting virtual machines by using the web console\">Starting virtual machines by using the web console\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_connecting-to-virtual-machines_configuring-and-managing-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 5. Connecting to virtual machines\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tTo interact with a virtual machine (VM) in RHEL 9, you need to connect to it by doing one of the following:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tWhen using the web console interface, use the Virtual Machines pane in the web console interface. For more information, see \u003Ca class=\"link\" href=\"#viewing-vm-consoles-using-the-rhel-web-console_assembly_connecting-to-virtual-machines\" title=\"5.1. Interacting with virtual machines by using the web console\">Interacting with virtual machines by using the web console\u003C/a>.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tIf you need to interact with a VM graphical display without using the web console, use the Virt Viewer application. For details, see \u003Ca class=\"link\" href=\"#proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines\" title=\"5.2. Opening a virtual machine graphical console by using Virt Viewer\">Opening a virtual machine graphical console by using Virt Viewer\u003C/a>.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tWhen a graphical display is not possible or not necessary, use \u003Ca class=\"link\" href=\"#proc_connecting-to-a-virtual-machine-using-ssh_assembly_connecting-to-virtual-machines\" title=\"5.3. Connecting to a virtual machine by using SSH\">an SSH terminal connection\u003C/a>.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tWhen the virtual machine is not reachable from your system by using a network, use \u003Ca class=\"link\" href=\"#proc_opening-a-virtual-machine-serial-console_assembly_connecting-to-virtual-machines\" title=\"5.4. Opening a virtual machine serial console\">the virsh console\u003C/a>.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tIf the VMs to which you are connecting are on a remote host rather than a local one, you can optionally configure your system for \u003Ca class=\"link\" href=\"#setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines\" title=\"5.5. Setting up easy access to remote virtualization hosts\">more convenient access to remote hosts\u003C/a>.\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tThe VMs you want to interact with are \u003Ca class=\"link\" href=\"#assembly_creating-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 3. Creating virtual machines\">installed\u003C/a> and \u003Ca class=\"link\" href=\"#assembly_starting-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 4. Starting virtual machines\">started\u003C/a>.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"viewing-vm-consoles-using-the-rhel-web-console_assembly_connecting-to-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.1. Interacting with virtual machines by using the web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tTo interact with a virtual machine (VM) in the RHEL 9 web console, you need to connect to the VM’s console. These include both graphical and serial consoles.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo interact with the VM’s graphical interface in the web console, use \u003Ca class=\"link\" href=\"#viewing-guest-graphical-console-in-the-rhel-web-console_viewing-vm-consoles-using-the-rhel-web-console\" title=\"5.1.1. Viewing the virtual machine graphical console in the web console\">the graphical console\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo interact with the VM’s graphical interface in a remote viewer, use \u003Ca class=\"link\" href=\"#viewing-graphical-console-in-remote-viewer_viewing-vm-consoles-using-the-rhel-web-console\" title=\"5.1.2. Viewing the graphical console in a remote viewer by using the web console\">the graphical console in remote viewers\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo interact with the VM’s CLI in the web console, use \u003Ca class=\"link\" href=\"#viewing-vm-serial-console-in-the-rhel-web-console_viewing-vm-consoles-using-the-rhel-web-console\" title=\"5.1.3. Viewing the virtual machine serial console in the web console\">the serial console\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"viewing-guest-graphical-console-in-the-rhel-web-console_viewing-vm-consoles-using-the-rhel-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">5.1.1. Viewing the virtual machine graphical console in the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tBy using the virtual machine (VM) console interface, you can view the graphical output of a selected VM in the RHEL 9 web console.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tEnsure that both the host and the VM support a graphical interface.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, click the VM whose graphical console you want to view.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA new page opens with an \u003Cspan class=\"strong strong\">\u003Cstrong>Overview\u003C/strong>\u003C/span> and a \u003Cspan class=\"strong strong\">\u003Cstrong>Console\u003C/strong>\u003C/span> section for the VM.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tSelect \u003Cspan class=\"guibutton\">VNC console\u003C/span> in the console drop down menu.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe VNC console appears below the menu in the web interface.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe graphical console appears in the web interface.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Expand\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou can now interact with the VM console by using the mouse and keyboard in the same manner you interact with a real machine. The display in the VM console reflects the activities being performed on the VM.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tThe host on which the web console is running may intercept specific key combinations, such as \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">Alt\u003C/kbd>+\u003Ckbd class=\"keycap\">Del\u003C/kbd>, preventing them from being sent to the VM.\n\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\tTo send such key combinations, click the \u003Cspan class=\"guimenu\">Send key\u003C/span> menu and select the key sequence to send.\n\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\tFor example, to send the \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">Alt\u003C/kbd>+\u003Ckbd class=\"keycap\">Del\u003C/kbd> combination to the VM, click the \u003Cspan class=\"guimenu\">Send key\u003C/span> and select the \u003Cspan class=\"guibutton\">Ctrl+Alt+Del\u003C/span> menu entry.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIf clicking in the graphical console does not have any effect, expand the console to full screen. This is a known issue with the mouse cursor offset.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-graphical-console-in-remote-viewer_viewing-vm-consoles-using-the-rhel-web-console\" title=\"5.1.2. Viewing the graphical console in a remote viewer by using the web console\">Viewing the graphical console in a remote viewer by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-vm-serial-console-in-the-rhel-web-console_viewing-vm-consoles-using-the-rhel-web-console\" title=\"5.1.3. Viewing the virtual machine serial console in the web console\">Viewing the virtual machine serial console in the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"viewing-graphical-console-in-remote-viewer_viewing-vm-consoles-using-the-rhel-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">5.1.2. Viewing the graphical console in a remote viewer by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tBy using the web console interface, you can display the graphical console of a selected virtual machine (VM) in a remote viewer, such as Virt Viewer.\n\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tYou can launch Virt Viewer from within the web console. Other VNC remote viewers can be launched manually.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tEnsure that both the host and the VM support a graphical interface.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tBefore you can view the graphical console in Virt Viewer, you must install Virt Viewer on the machine to which the web console is connected.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Launch remote viewer\u003C/span>.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThe virt viewer, \u003Ccode class=\"literal\">.vv\u003C/code>, file downloads.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tOpen the file to launch Virt Viewer.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tRemote Viewer is available on most operating systems. However, some browser extensions and plug-ins do not allow the web console to open Virt Viewer.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, click the VM whose graphical console you want to view.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA new page opens with an \u003Cspan class=\"strong strong\">\u003Cstrong>Overview\u003C/strong>\u003C/span> and a \u003Cspan class=\"strong strong\">\u003Cstrong>Console\u003C/strong>\u003C/span> section for the VM.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tSelect \u003Cspan class=\"guibutton\">Desktop Viewer\u003C/span> in the console drop down menu.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/b9a4e891fa710095fa5d70c36f010728/virt-cockpit-graphical-console.png\" alt=\"Page displaying the Console section of the virtual machine interface along with other VM details.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Launch Remote Viewer\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe graphical console opens in Virt Viewer.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou can interact with the VM console by using the mouse and keyboard in the same manner in which you interact with a real machine. The display in the VM console reflects the activities being performed on the VM.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tThe server on which the web console is running can intercept specific key combinations, such as \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">Alt\u003C/kbd>+\u003Ckbd class=\"keycap\">Del\u003C/kbd>, preventing them from being sent to the VM.\n\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\tTo send such key combinations, click the \u003Cspan class=\"guibutton\">Send key\u003C/span> menu and select the key sequence to send.\n\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\tFor example, to send the \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">Alt\u003C/kbd>+\u003Ckbd class=\"keycap\">Del\u003C/kbd> combination to the VM, click the \u003Cspan class=\"guibutton\">Send key\u003C/span> menu and select the \u003Cspan class=\"guibutton\">Ctrl+Alt+Del\u003C/span> menu entry.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIf clicking in the graphical console does not have any effect, expand the console to full screen. This is a known issue with the mouse cursor offset.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf launching the Remote Viewer in the web console does not work or is not optimal, you can manually connect with any viewer application by using the following protocols:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Address\u003C/strong>\u003C/span> - The default address is \u003Ccode class=\"literal\">127.0.0.1\u003C/code>. You can modify the \u003Ccode class=\"literal\">vnc_listen\u003C/code> parameter in \u003Ccode class=\"literal filename\">/etc/libvirt/qemu.conf\u003C/code> to change it to the host’s IP address.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>VNC port\u003C/strong>\u003C/span> - 5901\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-guest-graphical-console-in-the-rhel-web-console_viewing-vm-consoles-using-the-rhel-web-console\" title=\"5.1.1. Viewing the virtual machine graphical console in the web console\">Viewing the virtual machine graphical console in the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-vm-serial-console-in-the-rhel-web-console_viewing-vm-consoles-using-the-rhel-web-console\" title=\"5.1.3. Viewing the virtual machine serial console in the web console\">Viewing the virtual machine serial console in the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"viewing-vm-serial-console-in-the-rhel-web-console_viewing-vm-consoles-using-the-rhel-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">5.1.3. Viewing the virtual machine serial console in the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tYou can view the serial console of a selected virtual machine (VM) in the RHEL 9 web console. This is useful when the host machine or the VM is not configured with a graphical interface.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tFor more information about the serial console, see \u003Ca class=\"link\" href=\"#proc_opening-a-virtual-machine-serial-console_assembly_connecting-to-virtual-machines\" title=\"5.4. Opening a virtual machine serial console\">Opening a virtual machine serial console\u003C/a>.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> pane, click the VM whose serial console you want to view.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA new page opens with an \u003Cspan class=\"strong strong\">\u003Cstrong>Overview\u003C/strong>\u003C/span> and a \u003Cspan class=\"strong strong\">\u003Cstrong>Console\u003C/strong>\u003C/span> section for the VM.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tSelect \u003Cspan class=\"guibutton\">Serial console\u003C/span> in the console drop down menu.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe graphical console appears in the web interface.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/7f90b98fd581d94f18a134d0fc2f03fa/virt-cockpit-serial-console.png\" alt=\"Page displaying the virtual machine serial console along with other VM details.\"/>\u003C/div>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\t\tYou can disconnect and reconnect the serial console from the VM.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tTo disconnect the serial console from the VM, click \u003Cspan class=\"guibutton\">Disconnect\u003C/span>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tTo reconnect the serial console to the VM, click \u003Cspan class=\"guibutton\">Reconnect\u003C/span>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-guest-graphical-console-in-the-rhel-web-console_viewing-vm-consoles-using-the-rhel-web-console\" title=\"5.1.1. Viewing the virtual machine graphical console in the web console\">Viewing the virtual machine graphical console in the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-graphical-console-in-remote-viewer_viewing-vm-consoles-using-the-rhel-web-console\" title=\"5.1.2. Viewing the graphical console in a remote viewer by using the web console\">Viewing the graphical console in a remote viewer by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"replacing-spice-virtual-device-with-vnc_viewing-vm-consoles-using-the-rhel-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">5.1.4. Replacing the SPICE remote display protocol with VNC in the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tThe support for the SPICE remote display protocol has been removed on RHEL 9 hosts. If you have a virtual machine (VM) that is configured to use the SPICE protocol, you can replace the SPICE protocol with the VNC protocol by using the web console. Otherwise, the VM fails to start.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tHowever, certain SPICE devices, such as audio and USB passthrough, will be removed from the VM because they do not have a suitable replacement in the VNC protocol. For more information, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/considerations_in_adopting_rhel_9/assembly_virtualization_considerations-in-adopting-rhel-9#ref_changes-to-spice_assembly_virtualization\">Considerations in adopting RHEL 9\u003C/a>.\n\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tBy default, RHEL 8 VMs are configured to use the SPICE protocol. On a RHEL 9 host, these VMs fail to start, unless you switch from SPICE to VNC.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou have an existing VM that is configured to use the SPICE remote display protocol and is already shut-down.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the Virtual Machines interface of the web console, click the Menu button \u003Cspan class=\"guibutton\">⋮\u003C/span> of the VM that is configured to use the SPICE protocol.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA drop down menu opens with controls for various VM operations.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Replace SPICE devices\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Replace SPICE devices\u003C/strong>\u003C/span> dialog opens.\n\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tIf you have multiple existing VMs that use the SPICE protocol, they are listed in this dialog. Here, you can select multiple VMs to convert from using SPICE to VNC in a single step.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Replace\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA confirmation of the successful operation appears.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.2. Opening a virtual machine graphical console by using Virt Viewer\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tTo connect to a graphical console of a KVM virtual machine (VM) and open it in the \u003Ccode class=\"literal\">Virt Viewer\u003C/code> desktop application, follow the procedure below.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYour system, as well as the VM you are connecting to, must support graphical displays.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf the target VM is located on a remote host, connection and root access privileges to the host are needed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOptional: If the target VM is located on a remote host, set up your libvirt and SSH for \u003Ca class=\"link\" href=\"#setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines\" title=\"5.5. Setting up easy access to remote virtualization hosts\">more convenient access to remote hosts\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo connect to a local VM, use the following command and replace \u003Cspan class=\"emphasis\">\u003Cem>guest-name\u003C/em>\u003C/span> with the name of the VM you want to connect to:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-viewer guest-name\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo connect to a remote VM, use the \u003Ccode class=\"literal\">virt-viewer\u003C/code> command with the SSH protocol. For example, the following command connects as root to a VM called \u003Cspan class=\"emphasis\">\u003Cem>guest-name\u003C/em>\u003C/span>, located on remote system 192.0.2.1. The connection also requires root authentication for 192.0.2.1.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-viewer --direct --connect \u003Cspan class=\"emphasis\">\u003Cem>qemu+ssh://root@192.0.2.1/system guest-name\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nroot@192.0.2.1's password:\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tIf the connection works correctly, the VM display is shown in the \u003Ccode class=\"literal\">Virt Viewer\u003C/code> window.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tYou can interact with the VM console by using the mouse and keyboard in the same manner you interact with a real machine. The display in the VM console reflects the activities being performed on the VM.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf clicking in the graphical console does not have any effect, expand the console to full screen. This is a known issue with the mouse cursor offset.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">virt-viewer\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines\" title=\"5.5. Setting up easy access to remote virtualization hosts\">Setting up easy access to remote virtualization hosts\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-vm-consoles-using-the-rhel-web-console_assembly_connecting-to-virtual-machines\" title=\"5.1. Interacting with virtual machines by using the web console\">Interacting with virtual machines by using the web console\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_connecting-to-a-virtual-machine-using-ssh_assembly_connecting-to-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.3. Connecting to a virtual machine by using SSH\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tTo interact with the terminal of a virtual machine (VM) by using the SSH connection protocol, follow the procedure below.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have network connection and root access privileges to the target VM.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf the target VM is located on a remote host, you also have connection and root access privileges to that host.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYour VM network assigns IP addresses by \u003Ccode class=\"literal\">dnsmasq\u003C/code> generated by \u003Ccode class=\"literal\">libvirt\u003C/code>. This is the case for example in \u003Ccode class=\"literal\">libvirt\u003C/code> \u003Ca class=\"link\" href=\"#virtual-networking-default-configuration_understanding-virtual-networking-overview\" title=\"17.1.2. Virtual networking default configuration\">NAT networks\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNotably, if your VM is using one of the following network configurations, you cannot connect to the VM by using SSH:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">hostdev\u003C/code> interfaces\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tDirect interfaces\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tBridge interaces\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">libvirt-nss\u003C/code> component is installed and enabled on the VM’s host. If it is not, do the following:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">libvirt-nss\u003C/code> package:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install libvirt-nss\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEdit the \u003Ccode class=\"literal\">/etc/nsswitch.conf\u003C/code> file and add \u003Ccode class=\"literal\">libvirt_guest\u003C/code> to the \u003Ccode class=\"literal\">hosts\u003C/code> line:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">...\npasswd:      compat\nshadow:      compat\ngroup:       compat\nhosts:       files libvirt_guest dns\n...\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tWhen connecting to a remote VM, SSH into its physical host first. The following example demonstrates connecting to a host machine \u003Ccode class=\"literal\">192.0.2.1\u003C/code> by using its root credentials:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ssh root@192.0.2.1\u003C/strong>\u003C/span>\nroot@192.0.2.1's password:\nLast login: Mon Sep 24 12:05:36 2021\nroot~#\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the VM’s name and user access credentials to connect to it. For example, the following connects to to the \u003Ccode class=\"literal\">testguest1\u003C/code> VM by using its root credentials:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ssh root@testguest1\u003C/strong>\u003C/span>\nroot@testguest1's password:\nLast login: Wed Sep 12 12:05:36 2018\nroot~]#\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you do not know the VM’s name, you can list all VMs available on the host by using the \u003Ccode class=\"literal\">virsh list --all\u003C/code> command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh list --all\u003C/strong>\u003C/span>\nId    Name                           State\n----------------------------------------------------\n2     testguest1                    running\n-     testguest2                    shut off\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://libvirt.org/nss.html\">Upstream libvirt documentation\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_opening-a-virtual-machine-serial-console_assembly_connecting-to-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.4. Opening a virtual machine serial console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tBy using the \u003Ccode class=\"literal\">virsh console\u003C/code> command, it is possible to connect to the serial console of a virtual machine (VM).\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThis is useful when the VM:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tDoes not provide VNC protocols, and thus does not offer video display for GUI tools.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tDoes not have a network connection, and thus cannot be interacted with \u003Ca class=\"link\" href=\"#proc_connecting-to-a-virtual-machine-using-ssh_assembly_connecting-to-virtual-machines\" title=\"5.3. Connecting to a virtual machine by using SSH\">using SSH\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe GRUB boot loader on your host must be configured to use serial console. To verify, check that the \u003Ccode class=\"literal\">/etc/default/grub\u003C/code> file on your host contains the \u003Ccode class=\"literal\">GRUB_TERMINAL=serial\u003C/code> parameter.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo grep GRUB_TERMINAL /etc/default/grub\u003C/strong>\u003C/span>\nGRUB_TERMINAL=serial\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe VM must have a serial console device configured, such as \u003Ccode class=\"literal\">console type='pty'\u003C/code>. To verify, do the following:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dumpxml \u003Cspan class=\"emphasis\">\u003Cem>vm-name\u003C/em>\u003C/span> | grep console\u003C/strong>\u003C/span>\n\n&lt;console type='pty' tty='/dev/pts/2'&gt;\n&lt;/console&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe VM must have the serial console configured in its kernel command line. To verify this, the \u003Ccode class=\"literal\">cat /proc/cmdline\u003C/code> command output on the VM should include \u003Cspan class=\"emphasis\">\u003Cem>console=&lt;console-name&gt;\u003C/em>\u003C/span>, where \u003Cspan class=\"emphasis\">\u003Cem>&lt;console-name&gt;\u003C/em>\u003C/span> is architecture-specific:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tFor AMD64 and Intel 64: \u003Ccode class=\"literal\">ttyS0\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tFor ARM 64: \u003Ccode class=\"literal\">ttyAMA0\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tThe following commands in this procedure use \u003Ccode class=\"literal\">ttyS0\u003C/code>.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /proc/cmdline\u003C/strong>\u003C/span>\nBOOT_IMAGE=/vmlinuz-3.10.0-948.el7.x86_64 root=/dev/mapper/rhel-root ro console=tty0 \u003Cspan class=\"strong strong\">\u003Cstrong>console=ttyS0\u003C/strong>\u003C/span>,9600n8 rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap rhgb\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf the serial console is not set up properly on a VM, using \u003Cspan class=\"strong strong\">\u003Cstrong>virsh console\u003C/strong>\u003C/span> to connect to the VM connects you to an unresponsive guest console. However, you can still exit the unresponsive console by using the \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">]\u003C/kbd> shortcut.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo set up serial console on the VM, do the following:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tOn the VM, enable the \u003Ccode class=\"literal\">console=ttyS0\u003C/code> kernel option:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --update-kernel=ALL --args=\"console=ttyS0\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tClear the kernel options that might prevent your changes from taking effect.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grub2-editenv - unset kernelopts\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tReboot the VM.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">serial-getty@\u003Cspan class=\"emphasis\">\u003Cem>&lt;console-name&gt;\u003C/em>\u003C/span>\u003C/code> service must be enabled. For example, on AMD64 and Intel 64:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl status serial-getty@ttyS0.service\u003C/strong>\u003C/span>\n\n○ serial-getty@ttyS0.service - Serial Getty on ttyS0\n     Loaded: loaded (/usr/lib/systemd/system/serial-getty@.service; enabled; preset: enabled)\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn your host system, use the \u003Ccode class=\"literal\">virsh console\u003C/code> command. The following example connects to the \u003Cspan class=\"emphasis\">\u003Cem>guest1\u003C/em>\u003C/span> VM, if the libvirt driver supports safe console handling:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh console guest1 --safe\u003C/strong>\u003C/span>\nConnected to domain 'guest1'\nEscape character is ^]\n\n\u003Cspan class=\"emphasis\">\u003Cem>Subscription-name\u003C/em>\u003C/span>\nKernel 3.10.0-948.el7.x86_64 on an x86_64\n\nlocalhost login:\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou can interact with the virsh console in the same way as with a standard command-line interface.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">virsh\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://youtu.be/sjyw-3oVrkQ\">Configuring Serial Console Logs on a VM (video)\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.5. Setting up easy access to remote virtualization hosts\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tWhen managing VMs on a remote host system by using libvirt utilities, it is recommended to use the \u003Ccode class=\"literal\">-c qemu+ssh://root@hostname/system\u003C/code> syntax. For example, to use the \u003Ccode class=\"literal\">virsh list\u003C/code> command as root on the \u003Ccode class=\"literal\">192.0.2.1\u003C/code> host:\n\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh -c qemu+ssh://root@\u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1/system\u003C/em>\u003C/span> list\u003C/strong>\u003C/span>\nroot@192.0.2.1's password:\n\nId   Name              State\n---------------------------------\n1    remote-guest      running\u003C/pre>\u003Cp>\n\t\t\t\tHowever, you can remove the need to specify the connection details in full by modifying your SSH and libvirt configuration. For example:\n\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh -c \u003Cspan class=\"emphasis\">\u003Cem>remote-host\u003C/em>\u003C/span> list\u003C/strong>\u003C/span>\nroot@192.0.2.1's password:\n\nId   Name              State\n---------------------------------\n1    remote-guest      running\u003C/pre>\u003Cp>\n\t\t\t\tTo enable this improvement, follow the instructions below.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEdit the \u003Ccode class=\"literal\">~/.ssh/config\u003C/code> file with the following details, where \u003Cspan class=\"emphasis\">\u003Cem>host-alias\u003C/em>\u003C/span> is a shortened name associated with a specific remote host and an alias for root@192.0.2.1, and \u003Cspan class=\"emphasis\">\u003Cem>hosturl\u003C/em>\u003C/span> is the URL address of the host :\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>vi ~/.ssh/config\u003C/strong>\u003C/span>\nHost \u003Cspan class=\"emphasis\">\u003Cem>example-host-alias\u003C/em>\u003C/span>\n  User                    root\n  Hostname                192.0.2.1\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEdit the \u003Ccode class=\"literal\">/etc/libvirt/libvirt.conf\u003C/code> file with the following details, the \u003Cspan class=\"emphasis\">\u003Cem>example-qemu-host-alias\u003C/em>\u003C/span> is a host alias that QEMU and libvirt utilities will associate for \u003Ccode class=\"literal\">qemu+ssh://192.0.2.1/system\u003C/code> with the intended host \u003Cspan class=\"emphasis\">\u003Cem>example-host-alias\u003C/em>\u003C/span> :\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>vi /etc/libvirt/libvirt.conf\u003C/strong>\u003C/span>\nuri_aliases = [\n  \"\u003Cspan class=\"emphasis\">\u003Cem>example-qemu-host-alias\u003C/em>\u003C/span>=qemu+ssh://\u003Cspan class=\"emphasis\">\u003Cem>example-host-alias\u003C/em>\u003C/span>/system\",\n]\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfirm that you can manage remote VMs by using libvirt-based utilities on the local system with an added \u003Ccode class=\"literal\">-c \u003Cspan class=\"emphasis\">\u003Cem>qemu-host-alias\u003C/em>\u003C/span>\u003C/code> parameter. This automatically performs the commands over SSH on the remote host.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, verify that the following lists VMs on the 192.0.2.1 remote host, the connection to which was set up as \u003Cspan class=\"emphasis\">\u003Cem>example-qemu-host-alias\u003C/em>\u003C/span> in the previous steps:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh -c \u003Cspan class=\"emphasis\">\u003Cem>example-qemu-host-alias\u003C/em>\u003C/span> list\u003C/strong>\u003C/span>\n\nroot@192.0.2.1's password:\n\nId   Name                       State\n----------------------------------------\n1    example-remote-guest      running\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tIn addition to \u003Ccode class=\"literal\">virsh\u003C/code>, the \u003Ccode class=\"literal\">-c\u003C/code> (or \u003Ccode class=\"literal\">--connect\u003C/code>) option and the remote host access configuration described above can be used by the following utilities:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines\" title=\"3.1. Creating virtual machines by using the command-line interface\">virt-install\u003C/a>\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines\" title=\"5.2. Opening a virtual machine graphical console by using Virt Viewer\">virt-viewer\u003C/a>\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Next steps\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tIf you want to use libvirt utilities exclusively on a single remote host, you can also set a specific connection as the default target for libvirt-based utilities. However, this is not recommended if you also want to manage VMs on your local host or on different remote hosts.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou can edit the \u003Ccode class=\"literal\">/etc/libvirt/libvirt.conf\u003C/code> file and set the value of the \u003Ccode class=\"literal\">uri_default\u003C/code> parameter to \u003Cspan class=\"emphasis\">\u003Cem>example-qemu-host-alias\u003C/em>\u003C/span> as a default libvirt target.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># These can be used in cases when no URI is supplied by the application\n# (@uri_default also prevents probing of the hypervisor driver).\n#\nuri_default = \"example-qemu-host-alias\"\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAs a result, all libvirt-based commands will automatically be performed on the specified remote host.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>virsh list\u003C/strong>\u003C/span>\nroot@192.0.2.1's password:\n\nId   Name              State\n---------------------------------\n1   example-remote-guest      running\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tWhen connecting to a remote host, you can avoid providing the root password to the remote system. To do so, use one or more of the following methods:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/assembly_using-secure-communications-between-two-systems-with-openssh_configuring-basic-system-settings\">Set up key-based SSH access to the remote host\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tUse SSH connection multiplexing to connect to the remote system\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_and_managing_identity_management/logging-in-to-ipa-in-the-web-ui-using-a-kerberos-ticket_configuring-and-managing-idm#kerberos-authentication-in-identity-management_login-web-ui-krb\">Kerberos authentication in Identity Management\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">-c\u003C/code> (or \u003Ccode class=\"literal\">--connect\u003C/code>) option can be used to run the \u003Ca class=\"link\" href=\"#creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines\" title=\"3.1. Creating virtual machines by using the command-line interface\">\u003Ccode class=\"literal\">virt-install\u003C/code>\u003C/a>, \u003Ca class=\"link\" href=\"#proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines\" title=\"5.2. Opening a virtual machine graphical console by using Virt Viewer\">\u003Ccode class=\"literal\">virt-viewer\u003C/code>\u003C/a>, and \u003Ccode class=\"literal\">virsh\u003C/code> commands on a remote host.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-vnc-passwords_assembly_connecting-to-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.6. Configuring VNC passwords\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tTo manage access to the graphical output of a virtual machine (VM), you can configure a password for the VNC console of the VM.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tWith a VNC password configured on a VM, users of the VMs must enter the password when attempting to view or interact with the VNC graphical console of the VMs, for example by using the \u003Ccode class=\"literal\">virt-viewer\u003C/code> utility.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tVNC passwords are not a sufficient measure for ensuring the security of a VM environment. For details, see \u003Ca class=\"link\" href=\"https://qemu-project.gitlab.io/qemu/system/vnc-security.html#with-passwords\">QEMU documentation on VNC security\u003C/a>.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIn addition, the VNC password is saved in plain text in the configuration of the VM, so for the password to be effective, the user must not be able to display the VM configuration.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe VM that you want to protect with a VNC password has VNC graphics configured.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo ensure that this is the case, use the \u003Ccode class=\"literal\">virsh dumpxml\u003C/code> command as follows:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dumpxml \u003Cspan class=\"emphasis\">\u003Cem>&lt;vm-name&gt;\u003C/em>\u003C/span> | grep graphics\u003C/strong>\u003C/span>\n\n &lt;graphics type='vnc' ports='-1' autoport=\u003Ccode class=\"literal\">yes\u003C/code> listen=\u003Ccode class=\"literal\">127.0.0.1\u003C/code>&gt;\n &lt;/graphics&gt;\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen the configuration of the VM that you want to assign a VNC password to.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh edit \u003Cspan class=\"emphasis\">\u003Cem>&lt;vm-name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the \u003Ccode class=\"literal\">&lt;graphics&gt;\u003C/code> line of the configuration, add the \u003Ccode class=\"literal\">passwd\u003C/code> attribute and the password string. The password must be 8 characters or fewer.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"> &lt;graphics type='vnc' ports='-1' autoport=\u003Ccode class=\"literal\">yes\u003C/code> listen=\u003Ccode class=\"literal\">127.0.0.1\u003C/code> \u003Cspan class=\"strong strong\">\u003Cstrong>passwd='\u003Cspan class=\"emphasis\">\u003Cem>&lt;password&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>'&gt;\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOptional: In addition, define a date and time when the password will expire.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"> &lt;graphics type='vnc' ports='-1' autoport=\u003Ccode class=\"literal\">yes\u003C/code> listen=\u003Ccode class=\"literal\">127.0.0.1\u003C/code> passwd='\u003Cspan class=\"emphasis\">\u003Cem>&lt;password&gt;\u003C/em>\u003C/span>' \u003Cspan class=\"strong strong\">\u003Cstrong>passwdValidTo='2025-02-01T15:30:00'\u003C/strong>\u003C/span>&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIn this example, the password will expire on February 1st 2025, at 15:30 UTC.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSave the configuration.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart the modified VM.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh start \u003Cspan class=\"emphasis\">\u003Cem>&lt;vm-name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen a graphical console of the VM, for example by using the \u003Ccode class=\"literal\">virt-viewer\u003C/code> utility:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-viewer \u003Cspan class=\"emphasis\">\u003Cem>&lt;vm-name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the VNC password has been configured properly, a dialogue window appears that requests you to enter the password.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_shutting-down-virtual-machines_configuring-and-managing-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 6. Shutting down virtual machines\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tTo shut down a running virtual machine hosted on RHEL 9, use \u003Ca class=\"link\" href=\"#shutting-down-a-virtual-machine-using-the-command-line-interface_assembly_shutting-down-virtual-machines\" title=\"6.1. Shutting down a virtual machine by using the command-line interface\">the command line interface\u003C/a> or \u003Ca class=\"link\" href=\"#powering-down-and-restarting-vms-using-the-rhel-web-console_assembly_shutting-down-virtual-machines\" title=\"6.2. Shutting down and restarting virtual machines by using the web console\">the web console GUI\u003C/a>.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"shutting-down-a-virtual-machine-using-the-command-line-interface_assembly_shutting-down-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">6.1. Shutting down a virtual machine by using the command-line interface\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tShutting down a virtual machine (VM) requires different steps based on whether the VM is reponsive.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Shutting down a responsive VM\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you are \u003Ca class=\"link\" href=\"#assembly_connecting-to-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 5. Connecting to virtual machines\">connected to the guest\u003C/a>, use a shutdown command or a GUI element appropriate to the guest operating system.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tIn some environments, such as in Linux guests that use the GNOME Desktop, using the GUI power button for suspending or hibernating the guest might instead shut down the VM.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAlternatively, use the \u003Ccode class=\"literal\">virsh shutdown\u003C/code> command on the host:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf the VM is on a local host:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh shutdown \u003Cspan class=\"emphasis\">\u003Cem>demo-guest1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nDomain 'demo-guest1' is being shutdown\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf the VM is on a remote host, in this example \u003Cspan class=\"emphasis\">\u003Cem>192.0.2.1\u003C/em>\u003C/span>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh -c qemu+ssh://root@192.0.2.1/system shutdown \u003Cspan class=\"emphasis\">\u003Cem>demo-guest1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n\nroot@192.0.2.1's password:\nDomain 'demo-guest1' is being shutdown\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Shutting down an unresponsive VM\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tTo force a VM to shut down, for example if it has become unresponsive, use the \u003Ccode class=\"literal\">virsh destroy\u003C/code> command on the host:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh destroy \u003Cspan class=\"emphasis\">\u003Cem>demo-guest1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nDomain 'demo-guest1' destroyed\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe \u003Ccode class=\"literal\">virsh destroy\u003C/code> command does not actually delete or remove the VM configuration or disk images. It only terminates the running instance of the VM, similarly to pulling the power cord from a physical machine.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIn rare cases, \u003Ccode class=\"literal\">virsh destroy\u003C/code> may cause corruption of the VM’s file system, so using this command is only recommended if all other shutdown methods have failed.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the host, display the list of your VMs to see their status.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh list --all\u003C/strong>\u003C/span>\n\n Id    Name                 State\n------------------------------------------\n 1     demo-guest1          \u003Cspan class=\"strong strong\">\u003Cstrong>shut off\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"powering-down-and-restarting-vms-using-the-rhel-web-console_assembly_shutting-down-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">6.2. Shutting down and restarting virtual machines by using the web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tUsing the RHEL 9 web console, you can \u003Ca class=\"link\" href=\"#powering-down-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console\" title=\"6.2.1. Shutting down virtual machines in the web console\">shut down\u003C/a> or \u003Ca class=\"link\" href=\"#restarting-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console\" title=\"6.2.2. Restarting virtual machines by using the web console\">restart\u003C/a> running virtual machines. You can also send a non-maskable interrupt to an unresponsive virtual machine.\n\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"powering-down-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">6.2.1. Shutting down virtual machines in the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tIf a virtual machine (VM) is in the \u003Cspan class=\"strong strong\">\u003Cstrong>running\u003C/strong>\u003C/span> state, you can shut it down by using the RHEL 9 web console.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, find the row of the VM you want to shut down.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOn the right side of the row, click \u003Cspan class=\"guibutton\">Shut Down\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe VM shuts down.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIf the VM does not shut down, click the Menu button \u003Cspan class=\"guibutton\">⋮\u003C/span> next to the \u003Cspan class=\"guibutton\">Shut Down\u003C/span> button and select \u003Cspan class=\"guimenu\">Force Shut Down\u003C/span>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tTo shut down an unresponsive VM, you can also \u003Ca class=\"link\" href=\"#sending-NMIs-to-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console\" title=\"6.2.3. Sending non-maskable interrupts to VMs by using the web console\">send a non-maskable interrupt\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#powering-up-vms-using-the-rhel-web-console_assembly_starting-virtual-machines\" title=\"4.2. Starting virtual machines by using the web console\">Starting virtual machines by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#restarting-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console\" title=\"6.2.2. Restarting virtual machines by using the web console\">Restarting virtual machines by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"restarting-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">6.2.2. Restarting virtual machines by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tIf a virtual machine (VM) is in the \u003Cspan class=\"strong strong\">\u003Cstrong>running\u003C/strong>\u003C/span> state, you can restart it by using the RHEL 9 web console.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, find the row of the VM you want to restart.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOn the right side of the row, click the Menu button \u003Cspan class=\"guibutton\">⋮\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA drop-down menu of actions appears.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the drop-down menu, click \u003Cspan class=\"guibutton\">Reboot\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe VM shuts down and restarts.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIf the VM does not restart, click the Menu button \u003Cspan class=\"guibutton\">⋮\u003C/span> next to the \u003Cspan class=\"guibutton\">Reboot\u003C/span> button and select \u003Cspan class=\"guibutton\">Force Reboot\u003C/span>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tTo shut down an unresponsive VM, you can also \u003Ca class=\"link\" href=\"#sending-NMIs-to-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console\" title=\"6.2.3. Sending non-maskable interrupts to VMs by using the web console\">send a non-maskable interrupt\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#powering-up-vms-using-the-rhel-web-console_assembly_starting-virtual-machines\" title=\"4.2. Starting virtual machines by using the web console\">Starting virtual machines by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#powering-down-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console\" title=\"6.2.1. Shutting down virtual machines in the web console\">Shutting down virtual machines in the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"sending-NMIs-to-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">6.2.3. Sending non-maskable interrupts to VMs by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tSending a non-maskable interrupt (NMI) may cause an unresponsive running virtual machine (VM) to respond or shut down. For example, you can send the \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">Alt\u003C/kbd>+\u003Ckbd class=\"keycap\">Del\u003C/kbd> NMI to a VM that is not responding to standard input.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, find the row of the VM to which you want to send an NMI.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOn the right side of the row, click the Menu button \u003Cspan class=\"guibutton\">⋮\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA drop-down menu of actions appears.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the drop-down menu, click \u003Cspan class=\"guimenu\">Send non-maskable interrupt\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tAn NMI is sent to the VM.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#powering-up-vms-using-the-rhel-web-console_assembly_starting-virtual-machines\" title=\"4.2. Starting virtual machines by using the web console\">Starting virtual machines by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#restarting-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console\" title=\"6.2.2. Restarting virtual machines by using the web console\">Restarting virtual machines by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#powering-down-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console\" title=\"6.2.1. Shutting down virtual machines in the web console\">Shutting down virtual machines in the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_deleting-virtual-machines_configuring-and-managing-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 7. Deleting virtual machines\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tTo delete virtual machines in RHEL 9, use the \u003Ca class=\"link\" href=\"#deleting-virtual-machines-using-cli_assembly_deleting-virtual-machines\" title=\"7.1. Deleting virtual machines by using the command-line interface\">command line interface\u003C/a> or the \u003Ca class=\"link\" href=\"#deleting-vms-using-the-rhel-web-console_assembly_deleting-virtual-machines\" title=\"7.2. Deleting virtual machines by using the web console\">web console GUI\u003C/a>.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"deleting-virtual-machines-using-cli_assembly_deleting-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.1. Deleting virtual machines by using the command-line interface\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tTo delete a virtual machine (VM), you can remove its XML configuration and associated storage files from the host by using the command line. Follow the procedure below:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tBack up important data from the VM.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tShut down the VM.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tMake sure no other VMs use the same associated storage.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virsh undefine\u003C/code> utility.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, the following command removes the \u003Cspan class=\"emphasis\">\u003Cem>guest1\u003C/em>\u003C/span> VM, its associated storage volumes, and non-volatile RAM, if any.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh undefine guest1 --remove-all-storage --nvram\u003C/strong>\u003C/span>\nDomain 'guest1' has been undefined\nVolume 'vda'(/home/images/guest1.qcow2) removed.\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">virsh undefine --help\u003C/code> command\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">virsh\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"deleting-vms-using-the-rhel-web-console_assembly_deleting-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.2. Deleting virtual machines by using the web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tTo delete a virtual machine (VM) and its associated storage files from the host to which the RHEL 9 web console is connected with, follow the procedure below:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tBack up important data from the VM.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tMake sure no other VM uses the same associated storage.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOptional: Shut down the VM.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, click the Menu button \u003Cspan class=\"guibutton\">⋮\u003C/span> of the VM that you want to delete.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA drop down menu appears with controls for various VM operations.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Delete\u003C/span>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA confirmation dialog appears.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/52661fcf01fca509d9a65e1236362d8d/virt-cockpit-vm-delete-confirm.png\" width=\"540\" alt=\"Image displaying the Confirm deletion of VM dialog box.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOptional: To delete all or some of the storage files associated with the VM, select the checkboxes next to the storage files you want to delete.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Delete\u003C/span>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe VM and any selected storage files are deleted.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"managing-virtual-machines-in-the-web-console_configuring-and-managing-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 8. Managing virtual machines in the web console\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tTo manage virtual machines in a graphical interface on a RHEL 9 host, you can use the \u003Ccode class=\"literal\">Virtual Machines\u003C/code> pane in the RHEL 9 web console.\n\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/fddcbcaeac28425e7ec429fb5ed91787/virt-cockpit-main-page.png\" alt=\"Image displaying the virtual machine tab of the web console.\"/>\u003C/div>\u003C/div>\u003Csection class=\"section\" id=\"overview-of-virtual-machine-management-using-the-web-console_managing-virtual-machines-in-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.1. Overview of virtual machine management by using the web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe RHEL 9 web console is a web-based interface for system administration. As one of its features, the web console provides a graphical view of virtual machines (VMs) on the host system, and makes it possible to create, access, and configure these VMs.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tNote that to use the web console to manage your VMs on RHEL 9, you must first install \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">a web console plug-in\u003C/a> for virtualization.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Next steps\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor instructions on enabling VMs management in your web console, see \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">Setting up the web console to manage virtual machines\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor a comprehensive list of VM management actions that the web console provides, see \u003Ca class=\"link\" href=\"#virtual-machine-management-features-available-in-the-web-console_managing-virtual-machines-in-the-web-console\" title=\"8.4. Virtual machine management features available in the web console\">Virtual machine management features available in the web console\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.2. Setting up the web console to manage virtual machines\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBefore using the RHEL 9 web console to manage virtual machines (VMs), you must install the web console virtual machine plug-in on the host.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the \u003Ccode class=\"literal package\">cockpit-machines\u003C/code> plug-in.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install cockpit-machines\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the installation was successful, \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> appears in the web console side menu.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/fddcbcaeac28425e7ec429fb5ed91787/virt-cockpit-main-page.png\" alt=\"Image displaying the virtual machine tab of the web console.\"/>\u003C/div>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/index\">Managing systems by using the RHEL 9 web console\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_renaming-virtual-machines-using-the-web-console_managing-virtual-machines-in-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.3. Renaming virtual machines by using the web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou might require renaming an existing virtual machine (VM) to avoid naming conflicts or assign a new unique name based on your use case. To rename the VM, you can use the RHEL web console.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe VM is shut down.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, click the Menu button \u003Cspan class=\"guibutton\">⋮\u003C/span> of the VM that you want to rename.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA drop-down menu appears with controls for various VM operations.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Rename\u003C/span>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Rename a VM\u003C/strong>\u003C/span> dialog appears.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/771f1470b3a2af2374ec2d96ccbed15a/virt-cockpit-vm-rename-confirm.png\" width=\"540\" alt=\"Image displaying the rename a VM dialog box.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>New name\u003C/strong>\u003C/span> field, enter a name for the VM.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Rename\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCheck that the new VM name has appeared in the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"virtual-machine-management-features-available-in-the-web-console_managing-virtual-machines-in-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.4. Virtual machine management features available in the web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBy using the RHEL 9 web console, you can perform the following actions to manage the virtual machines (VMs) on your system.\n\t\t\t\u003C/p>\u003Crh-table id=\"idm140237796408064\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 8.1. VM management tasks that you can perform in the RHEL 9 web console\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 50%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 50%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237791126352\" scope=\"col\">Task\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237791125264\" scope=\"col\">For details, see\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791126352\"> \u003Cp>\n\t\t\t\t\t\t\t\tCreate a VM and install it with a guest operating system\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791125264\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-vms-and-installing-an-os-using-the-rhel-web-console_assembly_creating-virtual-machines\" title=\"3.2. Creating virtual machines and installing guest operating systems by using the web console\">Creating virtual machines and installing guest operating systems by using the web console\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791126352\"> \u003Cp>\n\t\t\t\t\t\t\t\tDelete a VM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791125264\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#deleting-vms-using-the-rhel-web-console_assembly_deleting-virtual-machines\" title=\"7.2. Deleting virtual machines by using the web console\">Deleting virtual machines by using the web console\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791126352\"> \u003Cp>\n\t\t\t\t\t\t\t\tStart, shut down, and restart the VM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791125264\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#powering-up-vms-using-the-rhel-web-console_assembly_starting-virtual-machines\" title=\"4.2. Starting virtual machines by using the web console\">Starting virtual machines by using the web console\u003C/a> and \u003Ca class=\"link\" href=\"#powering-down-and-restarting-vms-using-the-rhel-web-console_assembly_shutting-down-virtual-machines\" title=\"6.2. Shutting down and restarting virtual machines by using the web console\">Shutting down and restarting virtual machines by using the web console\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791126352\"> \u003Cp>\n\t\t\t\t\t\t\t\tConnect to and interact with a VM using a variety of consoles\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791125264\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-vm-consoles-using-the-rhel-web-console_assembly_connecting-to-virtual-machines\" title=\"5.1. Interacting with virtual machines by using the web console\">Interacting with virtual machines by using the web console\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791126352\"> \u003Cp>\n\t\t\t\t\t\t\t\tView a variety of information about the VM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791125264\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines\" title=\"9.2. Viewing virtual machine information by using the web console\">Viewing virtual machine information by using the web console\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791126352\"> \u003Cp>\n\t\t\t\t\t\t\t\tAdjust the host memory allocated to a VM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791125264\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#adding-and-removing-virtual-machine-ram-using-the-web-console_configuring-virtual-machine-ram\" title=\"18.4.1. Adding and removing virtual machine memory by using the web console\">Adding and removing virtual machine memory by using the web console\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791126352\"> \u003Cp>\n\t\t\t\t\t\t\t\tManage network connections for the VM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791125264\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#managing-virtual-machine-network-interfaces-using-the-web-console_configuring-virtual-machine-network-connections\" title=\"17.2. Using the web console for managing virtual machine network interfaces\">Using the web console for managing virtual machine network interfaces\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791126352\"> \u003Cp>\n\t\t\t\t\t\t\t\tManage the VM storage available on the host and attach virtual disks to the VM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791125264\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#managing-storage-for-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 15. Managing storage for virtual machines\">Managing storage for virtual machines by using the web console\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791126352\"> \u003Cp>\n\t\t\t\t\t\t\t\tConfigure the virtual CPU settings of the VM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791125264\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#managing-virtual-cpus-using-the-web-console_optimizing-virtual-machine-cpu-performance\" title=\"18.6.2. Managing virtual CPUs by using the web console\">Managing virtal CPUs by using the web console\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791126352\"> \u003Cp>\n\t\t\t\t\t\t\t\tLive migrate a VM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791125264\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_live-migrating-a-virtual-machine-using-the-web-console_migrating-virtual-machines\" title=\"12.7. Live migrating a virtual machine by using the web console\">Live migrating a virtual machine by using the web console\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791126352\"> \u003Cp>\n\t\t\t\t\t\t\t\tManage host devices\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791125264\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#assembly_managing-virtual-devices-using-the-web-console_managing-virtual-devices\" title=\"14.4. Managing host devices by using the web console\">Managing host devices by using the web console\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791126352\"> \u003Cp>\n\t\t\t\t\t\t\t\tManage virtual optical drives\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791125264\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#managing-virtual-optical-drives_managing-virtual-devices\" title=\"14.6. Managing virtual optical drives\">Managing virtual optical drives\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791126352\"> \u003Cp>\n\t\t\t\t\t\t\t\tAttach watchdog device\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237791125264\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#Attaching-a-watchdog-device-to-a-virtual-machine-using-the-web-console_managing-virtual-devices\" title=\"14.9. Attaching a watchdog device to a virtual machine by using the web console\">Attaching a watchdog device to a virtual machine by using the web console\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"viewing-information-about-virtual-machines_configuring-and-managing-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 9. Viewing information about virtual machines\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tWhen you need to adjust or troubleshoot any aspect of your virtualization deployment on RHEL 9, the first step you need to perform usually is to view information about the current state and configuration of your virtual machines (VMs). To do so, you can use \u003Ca class=\"link\" href=\"#viewing-virtual-machine-information-using-the-command-line-interface_viewing-information-about-virtual-machines\" title=\"9.1. Viewing virtual machine information by using the command-line interface\">the command-line interface\u003C/a> or \u003Ca class=\"link\" href=\"#viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines\" title=\"9.2. Viewing virtual machine information by using the web console\">the web console\u003C/a>. You can also view the information in the VM’s \u003Ca class=\"link\" href=\"#sample-virtual-machine-xml-configuration_viewing-information-about-virtual-machines\" title=\"9.3. Sample virtual machine XML configuration\">XML configuration\u003C/a>.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"viewing-virtual-machine-information-using-the-command-line-interface_viewing-information-about-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">9.1. Viewing virtual machine information by using the command-line interface\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tTo retrieve information about virtual machines (VMs) on your host and their configurations, use one or more of the following commands.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo obtain a list of VMs on your host:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh list --all\u003C/strong>\u003C/span>\nId   Name              State\n----------------------------------\n1    testguest1             running\n-    testguest2             shut off\n-    testguest3             shut off\n-    testguest4             shut off\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo obtain basic information about a specific VM:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dominfo \u003Cspan class=\"emphasis\">\u003Cem>testguest1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nId:             1\nName:           testguest1\nUUID:           a973666f-2f6e-415a-8949-75a7a98569e1\nOS Type:        hvm\nState:          running\nCPU(s):         2\nCPU time:       188.3s\nMax memory:     4194304 KiB\nUsed memory:    4194304 KiB\nPersistent:     yes\nAutostart:      disable\nManaged save:   no\nSecurity model: selinux\nSecurity DOI:   0\nSecurity label: system_u:system_r:svirt_t:s0:c486,c538 (enforcing)\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo obtain the complete XML configuration of a specific VM:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dumpxml \u003Cspan class=\"emphasis\">\u003Cem>testguest2\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n\n&lt;domain type='kvm' id='1'&gt;\n  &lt;name&gt;testguest2&lt;/name&gt;\n  &lt;uuid&gt;a973434f-2f6e-4ěša-8949-76a7a98569e1&lt;/uuid&gt;\n  &lt;metadata&gt;\n[...]\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor an annotated example of a VM’s XML configuration, see \u003Ca class=\"link\" href=\"#sample-virtual-machine-xml-configuration_viewing-information-about-virtual-machines\" title=\"9.3. Sample virtual machine XML configuration\">Sample virtual machine XML configuration\u003C/a>\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor information about a VM’s disks and other block devices:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh domblklist \u003Cspan class=\"emphasis\">\u003Cem>testguest3\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n Target   Source\n---------------------------------------------------------------\n vda      /var/lib/libvirt/images/testguest3.qcow2\n sda      -\n sdb      /home/username/Downloads/virt-p2v-1.36.10-1.el7.iso\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor instructions on managing a VM’s storage, see \u003Ca class=\"link\" href=\"#managing-storage-for-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 15. Managing storage for virtual machines\">Managing storage for virtual machines\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo obtain information about a VM’s file systems and their mountpoints:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh domfsinfo testguest3\u003C/strong>\u003C/span>\nMountpoint   Name   Type   Target\n------------------------------------\n /            dm-0   xfs\n /boot        vda1   xfs\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo obtain more details about the vCPUs of a specific VM:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh vcpuinfo \u003Cspan class=\"emphasis\">\u003Cem>testguest4\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nVCPU:           0\nCPU:            3\nState:          running\nCPU time:       103.1s\nCPU Affinity:   yyyy\n\nVCPU:           1\nCPU:            0\nState:          running\nCPU time:       88.6s\nCPU Affinity:   yyyy\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo configure and optimize the vCPUs in your VM, see \u003Ca class=\"link\" href=\"#optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel\" title=\"18.6. Optimizing virtual machine CPU performance\">Optimizing virtual machine CPU performance\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo list all virtual network interfaces on your host:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh net-list --all\u003C/strong>\u003C/span>\n Name       State    Autostart   Persistent\n---------------------------------------------\n default    active   yes         yes\n labnet     active   yes         yes\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor information about a specific interface:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh net-info default\u003C/strong>\u003C/span>\nName:           default\nUUID:           c699f9f6-9202-4ca8-91d0-6b8cb9024116\nActive:         yes\nPersistent:     yes\nAutostart:      yes\nBridge:         virbr0\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details about network interfaces, VM networks, and instructions for configuring them, see \u003Ca class=\"link\" href=\"#configuring-virtual-machine-network-connections_configuring-and-managing-virtualization\" title=\"Chapter 17. Configuring virtual machine network connections\">Configuring virtual machine network connections\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor instructions on viewing information about storage pools and storage volumes on your host, see \u003Ca class=\"link\" href=\"#viewing-storage-pool-information-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\" title=\"15.2.1. Viewing storage pool information by using the CLI\">Viewing virtual machine storage information by using the CLI\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">9.2. Viewing virtual machine information by using the web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tBy using the RHEL 9 web console, you can view information about all \u003Ca class=\"link\" href=\"#viewing-vm-state-and-connection-information-in-the-rhel-web-console_viewing-vm-information-using-the-rhel-web-console\" title=\"9.2.1. Viewing a virtualization overview in the web console\">VMs\u003C/a> and \u003Ca class=\"link\" href=\"#viewing-storage-pool-information-using-the-web-console_viewing-vm-information-using-the-rhel-web-console\" title=\"9.2.2. Viewing storage pool information by using the web console\">storage pools\u003C/a> the web console session can access.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can view \u003Ca class=\"link\" href=\"#viewing-basic-vm-information-in-the-rhel-web-console_viewing-vm-information-using-the-rhel-web-console\" title=\"9.2.3. Viewing basic virtual machine information in the web console\">information about a selected VM\u003C/a> to which the web console session is connected. This includes information about its \u003Ca class=\"link\" href=\"#viewing-vm-disk-information-in-the-web-console_viewing-vm-information-using-the-rhel-web-console\" title=\"9.2.5. Viewing virtual machine disk information in the web console\">disks\u003C/a>, \u003Ca class=\"link\" href=\"#viewing-and-editing-virtual-network-interface-information-in-the-web-console_viewing-vm-information-using-the-rhel-web-console\" title=\"9.2.6. Viewing and editing virtual network interface information in the web console\">virtual network interface\u003C/a> and \u003Ca class=\"link\" href=\"#viewing-vm-resource-usage-in-the-rhel-web-console_viewing-vm-information-using-the-rhel-web-console\" title=\"9.2.4. Viewing virtual machine resource usage in the web console\">resource usage\u003C/a>.\n\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"viewing-vm-state-and-connection-information-in-the-rhel-web-console_viewing-vm-information-using-the-rhel-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">9.2.1. Viewing a virtualization overview in the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tBy using the web console, you can access a virtualization overview that contains summarized information about available virtual machines (VMs), storage pools, and networks.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> in the web console’s side menu.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA dialog box appears with information about the available storage pools, available networks, and the VMs to which the web console is connected.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/fddcbcaeac28425e7ec429fb5ed91787/virt-cockpit-main-page.png\" alt=\"Image displaying the virtual machine tab of the web console.\"/>\u003C/div>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\t\tThe information includes the following:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Storage Pools\u003C/strong>\u003C/span> - The number of storage pools, active or inactive, that can be accessed by the web console and their state.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Networks\u003C/strong>\u003C/span> - The number of networks, active or inactive, that can be accessed by the web console and their state.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Name\u003C/strong>\u003C/span> - The name of the VM.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Connection\u003C/strong>\u003C/span> - The type of libvirt connection, system or session.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>State\u003C/strong>\u003C/span> - The state of the VM.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines\" title=\"9.2. Viewing virtual machine information by using the web console\">Viewing virtual machine information by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"viewing-storage-pool-information-using-the-web-console_viewing-vm-information-using-the-rhel-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">9.2.2. Viewing storage pool information by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tBy using the web console, you can view detailed information about storage pools available on your system. Storage pools can be used to create disk images for your virtual machines.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Storage Pools\u003C/span> at the top of the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Storage pools\u003C/strong>\u003C/span> window appears, showing a list of configured storage pools.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/81a16ce22f8b1319335bf47350b7fb5b/web-console-storage-pools-window.png\" alt=\"Image displaying the storage pool tab of the web console with information about existing storage pools.\"/>\u003C/div>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe information includes the following:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Name\u003C/strong>\u003C/span> - The name of the storage pool.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Size\u003C/strong>\u003C/span> - The current allocation and the total capacity of the storage pool.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Connection\u003C/strong>\u003C/span> - The connection used to access the storage pool.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>State\u003C/strong>\u003C/span> - The state of the storage pool.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick the arrow next to the storage pool whose information you want to see.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe row expands to reveal the Overview pane with detailed information about the selected storage pool.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/fd11c96612cbc09c36ff7715bb87bfa5/virt-cockpit-storage-pool-overview.png\" alt=\"Image displaying the detailed information about the selected storage pool.\"/>\u003C/div>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe information includes:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Target path\u003C/strong>\u003C/span> - The location of the storage pool.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Persistent\u003C/strong>\u003C/span> - Indicates whether or not the storage pool has a persistent configuration.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Autostart\u003C/strong>\u003C/span> - Indicates whether or not the storage pool starts automatically when the system boots up.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Type\u003C/strong>\u003C/span> - The type of the storage pool.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo view a list of storage volumes associated with the storage pool, click \u003Cspan class=\"guibutton\">Storage Volumes\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe Storage Volumes pane appears, showing a list of configured storage volumes.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/9a9f9fd71a75aa9359b57a30c1b78444/web-console-storage-pool-storage-volumes.png\" alt=\"Image displaying the list of storage volumes associated with the selected storage pool.\"/>\u003C/div>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe information includes:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Name\u003C/strong>\u003C/span> - The name of the storage volume.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Used by\u003C/strong>\u003C/span> - The VM that is currently using the storage volume.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Size\u003C/strong>\u003C/span> - The size of the volume.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines\" title=\"9.2. Viewing virtual machine information by using the web console\">Viewing virtual machine information by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"viewing-basic-vm-information-in-the-rhel-web-console_viewing-vm-information-using-the-rhel-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">9.2.3. Viewing basic virtual machine information in the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tBy using the web console, you can view basic information, such as assigned resources or hypervisor details, about a selected virtual machine (VM).\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> in the web console side menu.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick the VM whose information you want to see.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe Overview section includes the following general VM details:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>State\u003C/strong>\u003C/span> - The VM state, Running or Shut off.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Memory\u003C/strong>\u003C/span> - The amount of memory assigned to the VM.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>CPU\u003C/strong>\u003C/span> - The number and type of virtual CPUs configured for the VM.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Boot Order\u003C/strong>\u003C/span> - The boot order configured for the VM.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Autostart\u003C/strong>\u003C/span> - Whether or not autostart is enabled for the VM.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe information also includes the following hypervisor details:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Emulated Machine\u003C/strong>\u003C/span> - The machine type emulated by the VM.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Firmware\u003C/strong>\u003C/span> - The firmware of the VM.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines\" title=\"9.2. Viewing virtual machine information by using the web console\">Viewing virtual machine information by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#managing-virtual-cpus-using-the-web-console_optimizing-virtual-machine-cpu-performance\" title=\"18.6.2. Managing virtual CPUs by using the web console\">Managing virtual CPUs by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"viewing-vm-resource-usage-in-the-rhel-web-console_viewing-vm-information-using-the-rhel-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">9.2.4. Viewing virtual machine resource usage in the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tBy using the web console, you can view memory and virtual CPU usage of a selected virtual machine (VM).\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, click the VM whose information you want to see.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tScroll to \u003Cspan class=\"guimenu\">Usage\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe Usage section displays information about the memory and virtual CPU usage of the VM.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/3e6ab23d521fdc4887d2aeb5da789efc/virt-cockpit-resource-usage.png\" width=\"540\" alt=\"Image displaying the memory and CPU usage of the selected VM.\"/>\u003C/div>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines\" title=\"9.2. Viewing virtual machine information by using the web console\">Viewing virtual machine information by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"viewing-vm-disk-information-in-the-web-console_viewing-vm-information-using-the-rhel-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">9.2.5. Viewing virtual machine disk information in the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\t\u003Cspan id=\"viewing-vm-disk-information-in-the-rhel-8-web-console_viewing-vm-information-using-the-rhel-web-console\">\u003C!--Empty-->\u003C/span>\n\t\t\t\t\u003C/p>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tBy using the web console, you can view detailed information about disks assigned to a selected virtual machine (VM).\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick the VM whose information you want to see.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tScroll to \u003Cspan class=\"guimenu\">Disks\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe Disks section displays information about the disks assigned to the VM, as well as options to \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span> or \u003Cspan class=\"strong strong\">\u003Cstrong>Edit\u003C/strong>\u003C/span> disks.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/8e50855fbd710e15578ed4f41f814c8b/virt-cockpit-disk-info.png\" alt=\"Image displaying the disk usage of the selected VM.\"/>\u003C/div>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\t\tThe information includes the following:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Device\u003C/strong>\u003C/span> - The device type of the disk.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Used\u003C/strong>\u003C/span> - The amount of disk currently allocated.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Capacity\u003C/strong>\u003C/span> - The maximum size of the storage volume.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Bus\u003C/strong>\u003C/span> - The type of disk device that is emulated.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Access\u003C/strong>\u003C/span> - Whether the disk is \u003Cspan class=\"strong strong\">\u003Cstrong>Writeable\u003C/strong>\u003C/span> or \u003Cspan class=\"strong strong\">\u003Cstrong>Read-only\u003C/strong>\u003C/span>. For \u003Ccode class=\"literal\">raw\u003C/code> disks, you can also set the access to \u003Cspan class=\"strong strong\">\u003Cstrong>Writeable and shared\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Source\u003C/strong>\u003C/span> - The disk device or file.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines\" title=\"9.2. Viewing virtual machine information by using the web console\">Viewing virtual machine information by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"viewing-and-editing-virtual-network-interface-information-in-the-web-console_viewing-vm-information-using-the-rhel-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">9.2.6. Viewing and editing virtual network interface information in the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tBy using the RHEL 9 web console, you can view and modify the virtual network interfaces on a selected virtual machine (VM):\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, click the VM whose information you want to see.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tScroll to \u003Cspan class=\"guimenu\">Network Interfaces\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe Networks Interfaces section displays information about the virtual network interface configured for the VM as well as options to \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span>, \u003Cspan class=\"strong strong\">\u003Cstrong>Delete\u003C/strong>\u003C/span>, \u003Cspan class=\"strong strong\">\u003Cstrong>Edit\u003C/strong>\u003C/span>, or \u003Cspan class=\"strong strong\">\u003Cstrong>Unplug\u003C/strong>\u003C/span> network interfaces.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/5eb5352076ad0f52c6ae9d11e6af3844/virt-cockpit-vNIC-info.png\" alt=\"Image displaying the network interface details of the selected virtual machine.\"/>\u003C/div>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe information includes the following:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Type\u003C/strong>\u003C/span> - The type of network interface for the VM. The types include virtual network, bridge to LAN, and direct attachment.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\t\tGeneric Ethernet connection is not supported in RHEL 9 and later.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Model type\u003C/strong>\u003C/span> - The model of the virtual network interface.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>MAC Address\u003C/strong>\u003C/span> - The MAC address of the virtual network interface.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>IP Address\u003C/strong>\u003C/span> - The IP address of the virtual network interface.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Source\u003C/strong>\u003C/span> - The source of the network interface. This is dependent on the network type.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>State\u003C/strong>\u003C/span> - The state of the virtual network interface.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo edit the virtual network interface settings, Click \u003Cspan class=\"guibutton\">Edit\u003C/span>. The Virtual Network Interface Settings dialog opens.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/9783ff22db053b2d7939f2dd555695f1/virt-cockpit-edit-network-if.png\" width=\"540\" alt=\"Image displaying the various options that can be edited for the selected network interface.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tChange the interface type, source, model, or MAC address.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Save\u003C/span>. The network interface is modified.\n\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tChanges to the virtual network interface settings take effect only after restarting the VM.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\tAdditionally, MAC address can only be modified when the VM is shut off.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines\" title=\"9.2. Viewing virtual machine information by using the web console\">Viewing virtual machine information by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"sample-virtual-machine-xml-configuration_viewing-information-about-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">9.3. Sample virtual machine XML configuration\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe XML configuration of a VM, also referred to as a \u003Cspan class=\"emphasis\">\u003Cem>domain XML\u003C/em>\u003C/span>, determines the VM’s settings and components. The following table shows sections of a sample XML configuration of a virtual machine (VM) and explains the contents.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo obtain the XML configuration of a VM, you can use the \u003Ccode class=\"literal\">virsh dumpxml\u003C/code> command followed by the VM’s name.\n\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dumpxml \u003Cspan class=\"emphasis\">\u003Cem>testguest1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-table id=\"idm140237797158400\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 9.1. Sample XML configuration\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 65%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 35%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237802418624\" scope=\"col\">Domain XML Section\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237802417536\" scope=\"col\">Description\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802418624\">\n\u003Cpre class=\"screen\">&lt;domain type='kvm'&gt;\n &lt;name&gt;Testguest1&lt;/name&gt;\n &lt;uuid&gt;ec6fbaa1-3eb4-49da-bf61-bb02fbec4967&lt;/uuid&gt;\n &lt;memory unit='KiB'&gt;1048576&lt;/memory&gt;\n &lt;currentMemory unit='KiB'&gt;1048576&lt;/currentMemory&gt;\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802417536\"> \u003Cp>\n\t\t\t\t\t\t\t\tThis is a KVM virtual machine called \u003Cspan class=\"emphasis\">\u003Cem>Testguest1\u003C/em>\u003C/span>, with 1024 MiB allocated RAM.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802418624\">\n\u003Cpre class=\"screen\"> &lt;vcpu placement='static'&gt;1&lt;/vcpu&gt;\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802417536\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe VM is allocated with a single virtual CPU (vCPU).\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003Cp>\n\t\t\t\t\t\t\t\tFor information about configuring vCPUs, see \u003Ca class=\"link\" href=\"#optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel\" title=\"18.6. Optimizing virtual machine CPU performance\">Optimizing virtual machine CPU performance\u003C/a>.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802418624\">\n\u003Cpre class=\"screen\"> &lt;os&gt;\n  &lt;type arch='x86_64' machine='pc-q35-rhel9.0.0'&gt;hvm&lt;/type&gt;\n  &lt;boot dev='hd'/&gt;\n &lt;/os&gt;\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802417536\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe machine architecture is set to the AMD64 and Intel 64 architecture, and uses the Intel Q35 machine type to determine feature compatibility. The OS is set to be booted from the hard disk drive.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003Cp>\n\t\t\t\t\t\t\t\tFor information about creating a VM with an installed OS, see \u003Ca class=\"link\" href=\"#creating-vms-and-installing-an-os-using-the-rhel-web-console_assembly_creating-virtual-machines\" title=\"3.2. Creating virtual machines and installing guest operating systems by using the web console\">Creating virtual machines and installing guest operating systems by using the web console\u003C/a>.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802418624\">\n\u003Cpre class=\"screen\"> &lt;features&gt;\n  &lt;acpi/&gt;\n  &lt;apic/&gt;\n &lt;/features&gt;\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802417536\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>acpi\u003C/strong>\u003C/span> and \u003Cspan class=\"strong strong\">\u003Cstrong>apic\u003C/strong>\u003C/span> hypervisor features are disabled.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802418624\">\n\u003Cpre class=\"screen\"> &lt;cpu mode='host-model' check='partial'/&gt;\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802417536\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe host CPU definitions from capabilities XML (obtainable with \u003Ccode class=\"literal\">virsh domcapabilities\u003C/code>) are automatically copied into the VM’s XML configuration. Therefore, when the VM is booted, \u003Ccode class=\"literal\">libvirt\u003C/code> picks a CPU model that is similar to the host CPU, and then adds extra features to approximate the host model as closely as possible.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802418624\">\n\u003Cpre class=\"screen\"> &lt;clock offset='utc'&gt;\n  &lt;timer name='rtc' tickpolicy='catchup'/&gt;\n  &lt;timer name='pit' tickpolicy='delay'/&gt;\n  &lt;timer name='hpet' present='no'/&gt;\n &lt;/clock&gt;\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802417536\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe VM’s virtual hardware clock uses the UTC time zone. In addition, three different timers are set up for synchronization with the QEMU hypervisor.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802418624\">\n\u003Cpre class=\"screen\"> &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;\n &lt;on_reboot&gt;restart&lt;/on_reboot&gt;\n &lt;on_crash&gt;destroy&lt;/on_crash&gt;\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802417536\"> \u003Cp>\n\t\t\t\t\t\t\t\tWhen the VM powers off, or its OS terminates unexpectedly, \u003Ccode class=\"literal\">libvirt\u003C/code> terminates the VM and releases all its allocated resources. When the VM is rebooted, \u003Ccode class=\"literal\">libvirt\u003C/code> restarts it with the same configuration.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802418624\">\n\u003Cpre class=\"screen\"> &lt;pm&gt;\n  &lt;suspend-to-mem enabled='no'/&gt;\n  &lt;suspend-to-disk enabled='no'/&gt;\n &lt;/pm&gt;\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802417536\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe S3 and S4 ACPI sleep states are disabled for this VM.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802418624\">\n\u003Cpre class=\"literallayout\">&lt;devices&gt;\n &lt;emulator&gt;/usr/libexec/qemu-kvm&lt;/emulator&gt;\n &lt;disk type='file' device='disk'&gt;\n  &lt;driver name='qemu' type='qcow2'/&gt;\n  &lt;source file='/var/lib/libvirt/images/Testguest.qcow2'/&gt;\n  &lt;target dev='vda' bus='virtio'/&gt;\n &lt;/disk&gt;\n &lt;disk type='file' device='cdrom'&gt;\n  &lt;driver name='qemu' type='raw'/&gt;\n  &lt;target dev='sdb' bus='sata'/&gt;\n  &lt;readonly/&gt;\n &lt;/disk&gt;\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802417536\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe VM uses the \u003Ccode class=\"literal\">/usr/libexec/qemu-kvm\u003C/code> binary file for emulation and it has two disk devices attached.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003Cp>\n\t\t\t\t\t\t\t\tThe first disk is a virtualized hard-drive based on the \u003Ccode class=\"literal\">/var/lib/libvirt/images/Testguest.qcow2\u003C/code> stored on the host, and its logical device name is set to \u003Ccode class=\"literal\">vda\u003C/code>.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003Cp>\n\t\t\t\t\t\t\t\tThe second disk is a virtualized CD-ROM and its logical device name is set to \u003Ccode class=\"literal\">sdb\u003C/code>.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802418624\">\n\u003Cpre class=\"screen\">  &lt;controller type='usb' index='0' model='qemu-xhci' ports='15'/&gt;\n  &lt;controller type='sata' index='0'/&gt;\n  &lt;controller type='pci' index='0' model='pcie-root'/&gt;\n  &lt;controller type='pci' index='1' model='pcie-root-port'&gt;\n   &lt;model name='pcie-root-port'/&gt;\n   &lt;target chassis='1' port='0x10'/&gt;\n  &lt;/controller&gt;\n  &lt;controller type='pci' index='2' model='pcie-root-port'&gt;\n   &lt;model name='pcie-root-port'/&gt;\n   &lt;target chassis='2' port='0x11'/&gt;\n  &lt;/controller&gt;\n  &lt;controller type='pci' index='3' model='pcie-root-port'&gt;\n   &lt;model name='pcie-root-port'/&gt;\n   &lt;target chassis='3' port='0x12'/&gt;\n  &lt;/controller&gt;\n  &lt;controller type='pci' index='4' model='pcie-root-port'&gt;\n   &lt;model name='pcie-root-port'/&gt;\n   &lt;target chassis='4' port='0x13'/&gt;\n  &lt;/controller&gt;\n  &lt;controller type='pci' index='5' model='pcie-root-port'&gt;\n   &lt;model name='pcie-root-port'/&gt;\n   &lt;target chassis='5' port='0x14'/&gt;\n  &lt;/controller&gt;\n  &lt;controller type='pci' index='6' model='pcie-root-port'&gt;\n   &lt;model name='pcie-root-port'/&gt;\n   &lt;target chassis='6' port='0x15'/&gt;\n  &lt;/controller&gt;\n  &lt;controller type='pci' index='7' model='pcie-root-port'&gt;\n   &lt;model name='pcie-root-port'/&gt;\n   &lt;target chassis='7' port='0x16'/&gt;\n  &lt;/controller&gt;\n  &lt;controller type='virtio-serial' index='0'/&gt;\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802417536\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe VM uses a single controller for attaching USB devices, and a root controller for PCI-Express (PCIe) devices. In addition, a \u003Ccode class=\"literal\">virtio-serial\u003C/code> controller is available, which enables the VM to interact with the host in a variety of ways, such as the serial console.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003Cp>\n\t\t\t\t\t\t\t\tFor more information about virtual devices, see \u003Ca class=\"link\" href=\"#types-of-virtual-devices_managing-virtual-devices\" title=\"14.2. Types of virtual devices\">Types of virtual devices\u003C/a>.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802418624\">\n\u003Cpre class=\"screen\"> &lt;interface type='network'&gt;\n  &lt;mac address='52:54:00:65:29:21'/&gt;\n  &lt;source network='default'/&gt;\n  &lt;model type='virtio'/&gt;\n &lt;/interface&gt;\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802417536\"> \u003Cp>\n\t\t\t\t\t\t\t\tA network interface is set up in the VM that uses the \u003Ccode class=\"literal\">default\u003C/code> virtual network and the \u003Ccode class=\"literal\">virtio\u003C/code> network device model.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003Cp>\n\t\t\t\t\t\t\t\tFor information about configuring the network interface, see \u003Ca class=\"link\" href=\"#optimizing-virtual-machine-network-performance_optimizing-virtual-machine-performance-in-rhel\" title=\"18.7. Optimizing virtual machine network performance\">Optimizing virtual machine network performance\u003C/a>.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802418624\">\n\u003Cpre class=\"screen\">  &lt;serial type='pty'&gt;\n   &lt;target type='isa-serial' port='0'&gt;\n    &lt;model name='isa-serial'/&gt;\n   &lt;/target&gt;\n  &lt;/serial&gt;\n  &lt;console type='pty'&gt;\n   &lt;target type='serial' port='0'/&gt;\n  &lt;/console&gt;\n  &lt;channel type='unix'&gt;\n   &lt;target type='virtio' name='org.qemu.guest_agent.0'/&gt;\n   &lt;address type='virtio-serial' controller='0' bus='0' port='1'/&gt;\n  &lt;/channel&gt;\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802417536\"> \u003Cp>\n\t\t\t\t\t\t\t\tA \u003Ccode class=\"literal\">pty\u003C/code> serial console is set up on the VM, which enables rudimentary VM communication with the host. The console uses the \u003Ccode class=\"literal\">UNIX\u003C/code> channel on port 1. This is set up automatically and changing these settings is not recommended.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003Cp>\n\t\t\t\t\t\t\t\tFor more information about interacting with VMs, see \u003Ca class=\"link\" href=\"#viewing-vm-consoles-using-the-rhel-web-console_assembly_connecting-to-virtual-machines\" title=\"5.1. Interacting with virtual machines by using the web console\">Interacting with virtual machines by using the web console\u003C/a>.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802418624\">\n\u003Cpre class=\"screen\">  &lt;input type='tablet' bus='usb'&gt;\n   &lt;address type='usb' bus='0' port='1'/&gt;\n  &lt;/input&gt;\n  &lt;input type='mouse' bus='ps2'/&gt;\n  &lt;input type='keyboard' bus='ps2'/&gt;\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802417536\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe VM uses a virtual \u003Cspan class=\"strong strong\">\u003Cstrong>usb\u003C/strong>\u003C/span> port, which is set up to receive tablet input, and a virtual \u003Cspan class=\"strong strong\">\u003Cstrong>ps2\u003C/strong>\u003C/span> port set up to receive mouse and keyboard input. This is set up automatically and changing these settings is not recommended.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802418624\">\n\u003Cpre class=\"screen\">  &lt;graphics type='vnc' port='-1' autoport='yes' listen='127.0.0.1'&gt;\n   &lt;listen type='address' address='127.0.0.1'/&gt;\n  &lt;/graphics&gt;\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802417536\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe VM uses the \u003Ccode class=\"literal\">vnc\u003C/code> protocol for rendering its graphical output.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802418624\">\n\u003Cpre class=\"screen\">  &lt;redirdev bus='usb' type='tcp'&gt;\n   &lt;source mode='connect' host='localhost' service='4000'/&gt;\n   &lt;protocol type='raw'/&gt;\n  &lt;/redirdev&gt;\n  &lt;memballoon model='virtio'&gt;\n   &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x07' function='0x0'/&gt;\n  &lt;/memballoon&gt;\n &lt;/devices&gt;\n&lt;/domain&gt;\u003C/pre>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237802417536\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe VM uses \u003Ccode class=\"literal\">tcp\u003C/code> re-director for attaching USB devices remotely, and memory ballooning is turned on. This is set up automatically and changing these settings is not recommended.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"saving-and-restoring-virtual-machines_configuring-and-managing-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 10. Saving and restoring virtual machines\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tTo free up system resources, you can shut down a virtual machine (VM) running on that system. However, when you require the VM again, you must boot up the guest operating system (OS) and restart the applications, which may take a considerable amount of time. To reduce this downtime and enable the VM workload to start running sooner, you can use the save and restore feature to avoid the OS shutdown and boot sequence entirely.\n\t\t\u003C/p>\u003Cp>\n\t\t\tThis section provides information about saving VMs, as well as about restoring them to the same state without a full VM boot-up.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"how-saving-and-restoring-vms-works_saving-and-restoring-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">10.1. How saving and restoring virtual machines works\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tSaving a virtual machine (VM) saves its memory and device state to the host’s disk, and immediately stops the VM process. You can save a VM that is either in a running or paused state, and upon restoring, the VM will return to that state.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThis process frees up RAM and CPU resources on the host system in exchange for disk space, which may improve the host system performance. When the VM is restored, because the guest OS does not need to be booted, the long boot-up period is avoided as well.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo save a VM, you can use the command-line interface (CLI). For instructions, see \u003Ca class=\"link\" href=\"#saving-a-virtual-machines-using-cli_saving-and-restoring-virtual-machines\" title=\"10.2. Saving a virtual machine by using the command-line interface\">Saving virtual machines by using the command-line interface\u003C/a>.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo restore a VM you can use the \u003Ca class=\"link\" href=\"#starting-a-virtual-machine-using-the-command-line-interface_saving-and-restoring-virtual-machines\" title=\"10.3. Starting a virtual machine by using the command-line interface\">CLI\u003C/a> or the \u003Ca class=\"link\" href=\"#powering-up-vms-using-the-rhel-web-console_saving-and-restoring-virtual-machines\" title=\"10.4. Starting virtual machines by using the web console\">web console GUI\u003C/a>.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can also save and restore the state of a VM by using snapshots. For more information, see \u003Ca class=\"link\" href=\"#creating-virtual-machine-snapshots_configuring-and-managing-virtualization\" title=\"Chapter 13. Saving and restoring virtual machine state by using snapshots\">Saving and restoring virtual machine state by using snapshots\u003C/a>.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"saving-a-virtual-machines-using-cli_saving-and-restoring-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">10.2. Saving a virtual machine by using the command-line interface\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can save a virtual machine (VM) and its current state to the host’s disk. This is useful, for example, when you need to use the host’s resources for some other purpose. The saved VM can then be quickly restored to its previous running state.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo save a VM by using the command line, follow the procedure below.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnsure you have sufficient disk space to save the VM and its configuration. Note that the space occupied by the VM depends on the amount of RAM allocated to that VM.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnsure the VM is persistent.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOptional: Back up important data from the VM if required.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virsh managedsave\u003C/code> utility.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, the following command stops the \u003Cspan class=\"emphasis\">\u003Cem>demo-guest1\u003C/em>\u003C/span> VM and saves its configuration.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh managedsave demo-guest1\u003C/strong>\u003C/span>\nDomain 'demo-guest1' saved by libvirt\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe saved VM file is located by default in the \u003Cspan class=\"strong strong\">\u003Cstrong>/var/lib/libvirt/qemu/save\u003C/strong>\u003C/span> directory as \u003Cspan class=\"strong strong\">\u003Cstrong>demo-guest1.save\u003C/strong>\u003C/span>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe next time the VM is \u003Ca class=\"link\" href=\"#starting-a-virtual-machine-using-the-command-line-interface_saving-and-restoring-virtual-machines\" title=\"10.3. Starting a virtual machine by using the command-line interface\">started\u003C/a>, it will automatically restore the saved state from the above file.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tList the VMs that have managed save enabled. In the following example, the VMs listed as \u003Cspan class=\"emphasis\">\u003Cem>saved\u003C/em>\u003C/span> have their managed save enabled.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh list --managed-save --all\u003C/strong>\u003C/span>\nId    Name                           State\n----------------------------------------------------\n-     demo-guest1                    saved\n-     demo-guest2                    shut off\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo list the VMs that have a managed save image:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh list --with-managed-save --all\u003C/strong>\u003C/span>\nId    Name                           State\n----------------------------------------------------\n-     demo-guest1                    shut off\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that to list the saved VMs that are in a shut off state, you must use the \u003Ccode class=\"literal\">--all\u003C/code> or \u003Ccode class=\"literal\">--inactive\u003C/code> options with the command.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf the saved VM file becomes corrupted or unreadable, restoring the VM will initiate a standard VM boot instead.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">virsh managedsave --help\u003C/code> command\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#starting-a-virtual-machine-using-the-command-line-interface_saving-and-restoring-virtual-machines\" title=\"10.3. Starting a virtual machine by using the command-line interface\">Restoring a saved VM by using the command-line interface\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#powering-up-vms-using-the-rhel-web-console_saving-and-restoring-virtual-machines\" title=\"10.4. Starting virtual machines by using the web console\">Restoring a saved VM by using the web console\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"starting-a-virtual-machine-using-the-command-line-interface_saving-and-restoring-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">10.3. Starting a virtual machine by using the command-line interface\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can use the command line interface (CLI) to start a shut-down virtual machine (VM) or restore a saved VM. By using the CLI, you can start both local and remote VMs.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAn inactive VM that is already defined.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe name of the VM.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor remote VMs:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe IP address of the host where the VM is located.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tRoot access privileges to the host.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor a local VM, use the \u003Ccode class=\"literal\">virsh start\u003C/code> utility.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, the following command starts the \u003Cspan class=\"emphasis\">\u003Cem>demo-guest1\u003C/em>\u003C/span> VM.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh start demo-guest1\u003C/strong>\u003C/span>\nDomain 'demo-guest1' started\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor a VM located on a remote host, use the \u003Ccode class=\"literal\">virsh start\u003C/code> utility along with the QEMU+SSH connection to the host.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, the following command starts the \u003Cspan class=\"emphasis\">\u003Cem>demo-guest1\u003C/em>\u003C/span> VM on the 192.0.2.1 host.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh -c qemu+ssh://root@192.0.2.1/system start demo-guest1\u003C/strong>\u003C/span>\n\nroot@192.0.2.1's password:\n\nDomain 'demo-guest1' started\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">virsh start --help\u003C/code> command\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines\" title=\"5.5. Setting up easy access to remote virtualization hosts\">Setting up easy access to remote virtualization hosts\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#starting-virtual-machines-automatically-when-the-host-starts_assembly_starting-virtual-machines\" title=\"4.3. Starting virtual machines automatically when the host starts\">Starting virtual machines automatically when the host starts\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"powering-up-vms-using-the-rhel-web-console_saving-and-restoring-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">10.4. Starting virtual machines by using the web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tIf a virtual machine (VM) is in the \u003Cspan class=\"emphasis\">\u003Cem>shut off\u003C/em>\u003C/span> state, you can start it by using the RHEL 9 web console. You can also configure the VM to be started automatically when the host starts.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAn inactive VM that is already defined.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe name of the VM.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, click the VM you want to start.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA new page opens with detailed information about the selected VM and controls for shutting down and deleting the VM.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Run\u003C/span>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe VM starts, and you can \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/assembly_connecting-to-virtual-machines_configuring-and-managing-virtualization\">connect to its console or graphical output\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: To configure the VM to start automatically when the host starts, toggle the \u003Ccode class=\"literal\">Autostart\u003C/code> checkbox in the \u003Cspan class=\"strong strong\">\u003Cstrong>Overview\u003C/strong>\u003C/span> section.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you use network interfaces that are not managed by libvirt, you must also make additional changes to the systemd configuration. Otherwise, the affected VMs might fail to start, see \u003Ca class=\"link\" href=\"#starting-virtual-machines-automatically-when-the-host-starts_assembly_starting-virtual-machines\" title=\"4.3. Starting virtual machines automatically when the host starts\">starting virtual machines automatically when the host starts\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#powering-down-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console\" title=\"6.2.1. Shutting down virtual machines in the web console\">Shutting down virtual machines in the web console\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#restarting-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console\" title=\"6.2.2. Restarting virtual machines by using the web console\">Restarting virtual machines by using the web console\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"cloning-virtual-machines_configuring-and-managing-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 11. Cloning virtual machines\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tTo quickly create a new virtual machine (VM) with a specific set of properties, you can \u003Cspan class=\"emphasis\">\u003Cem>clone\u003C/em>\u003C/span> an existing VM.\n\t\t\u003C/p>\u003Cp>\n\t\t\tCloning creates a new VM that uses its own disk image for storage, but most of the clone’s configuration and stored data is identical to the source VM. This makes it possible to prepare multiple VMs optimized for a certain task without the need to optimize each VM individually.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"how-cloning-virtual-machines-works_cloning-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">11.1. How cloning virtual machines works\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tCloning a virtual machine (VM) copies the XML configuration of the source VM and its disk images, and makes adjustments to the configurations to ensure the uniqueness of the new VM. This includes changing the name of the VM and ensuring it uses the disk image clones. Nevertheless, the data stored on the clone’s virtual disks is identical to the source VM.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThis process is faster than creating a new VM and installing it with a guest operating system, and can be used to rapidly generate VMs with a specific configuration and content.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIf you are planning to create multiple clones of a VM, first create a VM \u003Cspan class=\"emphasis\">\u003Cem>template\u003C/em>\u003C/span> that does not contain:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tUnique settings, such as persistent network MAC configuration, which can prevent the clones from working correctly.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSensitive data, such as SSH keys and password files.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"#assembly_creating-virtual-machine-templates_cloning-virtual-machines\" title=\"11.2. Creating virtual machine templates\">Creating virtual machines templates\u003C/a>.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#cloning-a-virtual-machine-using-the-command-line-interface_cloning-virtual-machines\" title=\"11.3. Cloning a virtual machine by using the command-line interface\">Cloning a virtual machine by using the command-line interface\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#cloning-a-virtual-machine-using-the-web-console_cloning-virtual-machines\" title=\"11.4. Cloning a virtual machine by using the web console\">Cloning a virtual machine by using the web console\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"assembly_creating-virtual-machine-templates_cloning-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">11.2. Creating virtual machine templates\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tTo create multiple virtual machine (VM) clones that work correctly, you can remove information and configurations that are unique to a source VM, such as SSH keys or persistent network MAC configuration. This creates a VM \u003Cspan class=\"emphasis\">\u003Cem>template\u003C/em>\u003C/span>, which you can use to easily and safely create VM clones.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can create VM templates \u003Ca class=\"link\" href=\"#preparing-a-virtual-machine-template_assembly_creating-virtual-machine-templates\" title=\"11.2.1. Creating a virtual machine template by using virt-sysprep\">by using the \u003Ccode class=\"literal\">virt-sysprep\u003C/code> utility\u003C/a> or you can \u003Ca class=\"link\" href=\"#proc_creating-a-virtual-machine-template-manually_assembly_creating-virtual-machine-templates\" title=\"11.2.2. Creating a virtual machine template manually\">create them manually\u003C/a> based on your requirements.\n\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"preparing-a-virtual-machine-template_assembly_creating-virtual-machine-templates\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">11.2.1. Creating a virtual machine template by using virt-sysprep\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tTo create a cloning template from an existing virtual machine (VM), you can use the \u003Ccode class=\"literal\">virt-sysprep\u003C/code> utility. This removes certain configurations that might cause the clone to work incorrectly, such as specific network settings or system registration metadata. As a result, \u003Ccode class=\"literal\">virt-sysprep\u003C/code> makes creating clones of the VM more efficient, and ensures that the clones work more reliably.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">guestfs-tools\u003C/code> package, which contains the \u003Ccode class=\"literal\">virt-sysprep\u003C/code> utility, is installed on your host:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install guestfs-tools\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe source VM intended as a template is shut down.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou know where the disk image for the source VM is located, and you are the owner of the VM’s disk image file.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tNote that disk images for VMs created in the \u003Ca class=\"link\" href=\"#automatic-features-for-virtual-machine-security_securing-virtual-machines-in-rhel\" title=\"19.3. Automatic features for virtual machine security\">system connection\u003C/a> of libvirt are located in the \u003Ccode class=\"literal\">/var/lib/libvirt/images\u003C/code> directory and owned by the root user by default:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ls -la /var/lib/libvirt/images\u003C/strong>\u003C/span>\n-rw-------.  1 root root  9665380352 Jul 23 14:50 a-really-important-vm.qcow2\n-rw-------.  1 root root  8591507456 Jul 26  2017 an-actual-vm-that-i-use.qcow2\n-rw-------.  1 root root  8591507456 Jul 26  2017 totally-not-a-fake-vm.qcow2\n-rw-------.  1 root root 10739318784 Sep 20 17:57 another-vm-example.qcow2\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tOptional: Any important data on the source VM’s disk has been backed up. If you want to preserve the source VM intact, \u003Ca class=\"link\" href=\"#cloning-a-virtual-machine-using-the-command-line-interface_cloning-virtual-machines\" title=\"11.3. Cloning a virtual machine by using the command-line interface\">clone\u003C/a> it first and turn the clone into a template.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnsure you are logged in as the owner of the VM’s disk image:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>whoami\u003C/strong>\u003C/span>\nroot\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: Copy the disk image of the VM.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cp /var/lib/libvirt/images/a-really-important-vm.qcow2 /var/lib/libvirt/images/a-really-important-vm-original.qcow2\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThis is used later to verify that the VM was successfully turned into a template.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the following command, and replace \u003Cspan class=\"emphasis\">\u003Cem>/var/lib/libvirt/images/a-really-important-vm.qcow2\u003C/em>\u003C/span> with the path to the disk image of the source VM.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-sysprep -a \u003Cspan class=\"emphasis\">\u003Cem>/var/lib/libvirt/images/a-really-important-vm.qcow2\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n[   0.0] Examining the guest ...\n[   7.3] Performing \"abrt-data\" ...\n[   7.3] Performing \"backup-files\" ...\n[   9.6] Performing \"bash-history\" ...\n[   9.6] Performing \"blkid-tab\" ...\n[...]\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo confirm that the process was successful, compare the modified disk image to the original one. The following example shows a successful creation of a template:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-diff -a \u003Cspan class=\"emphasis\">\u003Cem>/var/lib/libvirt/images/a-really-important-vm-orig.qcow2\u003C/em>\u003C/span> -A \u003Cspan class=\"emphasis\">\u003Cem>/var/lib/libvirt/images/a-really-important-vm.qcow2\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n- - 0644       1001 /etc/group-\n- - 0000        797 /etc/gshadow-\n= - 0444         33 /etc/machine-id\n[...]\n- - 0600        409 /home/username/.bash_history\n- d 0700          6 /home/username/.ssh\n- - 0600        868 /root/.bash_history\n[...]\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>OPERATIONS\u003C/strong>\u003C/span> section in the \u003Ccode class=\"literal\">virt-sysprep\u003C/code> man page on your system\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#cloning-a-virtual-machine-using-the-command-line-interface_cloning-virtual-machines\" title=\"11.3. Cloning a virtual machine by using the command-line interface\">Cloning a virtual machine by using the command-line interface\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_creating-a-virtual-machine-template-manually_assembly_creating-virtual-machine-templates\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">11.2.2. Creating a virtual machine template manually\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tTo create a template from an existing virtual machine (VM), you can manually reset or unconfigure a guest VM to prepare it for cloning.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnsure that you know the location of the disk image for the source VM and are the owner of the VM’s disk image file.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tNote that disk images for VMs created in the \u003Ca class=\"link\" href=\"#automatic-features-for-virtual-machine-security_securing-virtual-machines-in-rhel\" title=\"19.3. Automatic features for virtual machine security\">system connection\u003C/a> of libvirt are by default located in the \u003Ccode class=\"literal directory\">/var/lib/libvirt/images\u003C/code> directory and owned by the root user:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ls -la /var/lib/libvirt/images\u003C/strong>\u003C/span>\n-rw-------.  1 root root  9665380352 Jul 23 14:50 a-really-important-vm.qcow2\n-rw-------.  1 root root  8591507456 Jul 26  2017 an-actual-vm-that-i-use.qcow2\n-rw-------.  1 root root  8591507456 Jul 26  2017 totally-not-a-fake-vm.qcow2\n-rw-------.  1 root root 10739318784 Sep 20 17:57 another-vm-example.qcow2\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tEnsure that the VM is shut down.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tOptional: Any important data on the VM’s disk has been backed up. If you want to preserve the source VM intact, \u003Ca class=\"link\" href=\"#cloning-a-virtual-machine-using-the-command-line-interface_cloning-virtual-machines\" title=\"11.3. Cloning a virtual machine by using the command-line interface\">clone\u003C/a> it first and edit the clone to create a template.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tConfigure the VM for cloning:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tInstall any software needed on the clone.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tConfigure any non-unique settings for the operating system.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tConfigure any non-unique application settings.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tRemove the network configuration:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tRemove any persistent udev rules by using the following command:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>rm -f /etc/udev/rules.d/70-persistent-net.rules\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\t\tIf udev rules are not removed, the name of the first NIC might be \u003Ccode class=\"literal\">eth1\u003C/code> instead of \u003Ccode class=\"literal\">eth0\u003C/code>.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tRemove unique information from the \u003Ccode class=\"literal\">NMConnection\u003C/code> files in the \u003Ccode class=\"literal\">/etc/NetworkManager/system-connections/\u003C/code> directory.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\tRemove MAC address, IP address, DNS, gateway, and any other \u003Cspan class=\"strong strong\">\u003Cstrong>unique\u003C/strong>\u003C/span> information or non-desired settings.\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">*ID=ExampleNetwork\nBOOTPROTO=\"dhcp\"\nHWADDR=\"AA:BB:CC:DD:EE:FF\"                  &lt;- REMOVE\nNM_CONTROLLED=\"yes\"\nONBOOT=\"yes\"\nTYPE=\"Ethernet\"\nUUID=\"954bd22c-f96c-4b59-9445-b39dd86ac8ab\" &lt;- REMOVE\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tRemove similar \u003Cspan class=\"strong strong\">\u003Cstrong>unique\u003C/strong>\u003C/span> information and non-desired settings from the \u003Ccode class=\"literal\">/etc/hosts\u003C/code> and \u003Ccode class=\"literal\">/etc/resolv.conf\u003C/code> files.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tRemove registration details:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tFor VMs registered on the Red Hat Network (RHN):\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>rm /etc/sysconfig/rhn/systemid\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tFor VMs registered with Red Hat Subscription Manager (RHSM):\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\tIf you do not plan to use the original VM:\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>subscription-manager unsubscribe --all # subscription-manager unregister # subscription-manager clean\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\tIf you plan to use the original VM:\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>subscription-manager clean\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\tThe original RHSM profile remains in the Portal along with your ID code. Use the following command to reactivate your RHSM registration on the VM after it is cloned:\n\t\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>subscription-manager register --consumerid=71rd64fx-6216-4409-bf3a-e4b7c7bd8ac9\u003C/strong>\u003C/span>\u003C/pre>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tRemove other unique details:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tRemove SSH public and private key pairs:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>rm -rf /etc/ssh/ssh_host_example\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tRemove the configuration of LVM devices:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>rm /etc/lvm/devices/system.devices\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tRemove any other application-specific identifiers or configurations that might cause conflicts if running on multiple machines.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tRemove the \u003Ccode class=\"literal\">gnome-initial-setup-done\u003C/code> file to configure the VM to run the configuration wizard on the next boot:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>rm ~/.config/gnome-initial-setup-done\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tThe wizard that runs on the next boot depends on the configurations that have been removed from the VM. In addition, on the first boot of the clone, it is recommended that you change the hostname.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"cloning-a-virtual-machine-using-the-command-line-interface_cloning-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">11.3. Cloning a virtual machine by using the command-line interface\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tFor testing, to create a new virtual machine (VM) with a specific set of properties, you can clone an existing VM by using CLI.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe source VM is shut down.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnsure that there is sufficient disk space to store the cloned disk images.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOptional: When creating multiple VM clones, remove unique data and settings from the source VM to ensure the cloned VMs work properly. For instructions, see \u003Ca class=\"link\" href=\"#assembly_creating-virtual-machine-templates_cloning-virtual-machines\" title=\"11.2. Creating virtual machine templates\">Creating virtual machine templates\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virt-clone\u003C/code> utility with options that are appropriate for your environment and use case.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Sample use cases\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe following command clones a local VM named \u003Ccode class=\"literal\">example-VM-1\u003C/code> and creates the \u003Ccode class=\"literal\">example-VM-1-clone\u003C/code> VM. It also creates and allocates the \u003Ccode class=\"literal\">example-VM-1-clone.qcow2\u003C/code> disk image in the same location as the disk image of the original VM, and with the same data:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-clone --original \u003Cspan class=\"emphasis\">\u003Cem>example-VM-1\u003C/em>\u003C/span> --auto-clone\u003C/strong>\u003C/span>\nAllocating 'example-VM-1-clone.qcow2'                            | 50.0 GB  00:05:37\n\nClone 'example-VM-1-clone' created successfully.\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe following command clones a VM named \u003Ccode class=\"literal\">example-VM-2\u003C/code>, and creates a local VM named \u003Ccode class=\"literal\">example-VM-3\u003C/code>, which uses only two out of multiple disks of \u003Ccode class=\"literal\">example-VM-2\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-clone --original \u003Cspan class=\"emphasis\">\u003Cem>example-VM-2\u003C/em>\u003C/span> --name \u003Cspan class=\"emphasis\">\u003Cem>example-VM-3\u003C/em>\u003C/span> --file /var/lib/libvirt/images/\u003Cspan class=\"emphasis\">\u003Cem>disk-1-example-VM-2\u003C/em>\u003C/span>.qcow2 --file /var/lib/libvirt/images/\u003Cspan class=\"emphasis\">\u003Cem>disk-2-example-VM-2\u003C/em>\u003C/span>.qcow2\u003C/strong>\u003C/span>\nAllocating 'disk-1-example-VM-2-clone.qcow2'                                      | 78.0 GB  00:05:37\nAllocating 'disk-2-example-VM-2-clone.qcow2'                                      | 80.0 GB  00:05:37\n\nClone 'example-VM-3' created successfully.\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo clone your VM to a different host, migrate the VM without undefining it on the local host. For example, the following commands clone the previously created \u003Ccode class=\"literal\">example-VM-3\u003C/code> VM to the \u003Ccode class=\"literal\">192.0.2.1\u003C/code> remote system, including its local disks. Note that you require root privileges to run these commands for \u003Ccode class=\"literal\">192.0.2.1\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh migrate --offline --persistent \u003Cspan class=\"emphasis\">\u003Cem>example-VM-3\u003C/em>\u003C/span> qemu+ssh://root@192.0.2.1/system\u003C/strong>\u003C/span>\nroot@192.0.2.1's password:\n\n# \u003Cspan class=\"strong strong\">\u003Cstrong>scp /var/lib/libvirt/images/\u003Cspan class=\"emphasis\">\u003Cem>&lt;disk-1-example-VM-2-clone&gt;\u003C/em>\u003C/span>.qcow2 root@192.0.2.1/\u003Cspan class=\"emphasis\">\u003Cem>&lt;user@remote_host.com&gt;\u003C/em>\u003C/span>://var/lib/libvirt/images/\u003C/strong>\u003C/span>\n\n# \u003Cspan class=\"strong strong\">\u003Cstrong>scp /var/lib/libvirt/images/\u003Cspan class=\"emphasis\">\u003Cem>&lt;disk-2-example-VM-2-clone&gt;\u003C/em>\u003C/span>.qcow2 root@192.0.2.1/\u003Cspan class=\"emphasis\">\u003Cem>&lt;user@remote_host.com&gt;\u003C/em>\u003C/span>://var/lib/libvirt/images/\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo verify the VM has been successfully cloned and is working correctly:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tConfirm the clone has been added to the list of VMs on your host:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh list --all\u003C/strong>\u003C/span>\nId   Name                  State\n---------------------------------------\n-    example-VM-1          shut off\n-    example-VM-1-clone    shut off\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tStart the clone and observe if it boots up:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh start \u003Cspan class=\"emphasis\">\u003Cem>example-VM-1-clone\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nDomain 'example-VM-1-clone' started\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">virt-clone (1)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#migrating-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 12. Migrating virtual machines\">Migrating virtual machines\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"cloning-a-virtual-machine-using-the-web-console_cloning-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">11.4. Cloning a virtual machine by using the web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp id=\"proc_cloning-a-virtual-machine-using-the-web-console_cloning-virtual-machines\">\n\t\t\t\tTo create new virtual machines (VMs) with a specific set of properties, you can clone a VM that you had previously configured by using the web console.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tCloning a VM also clones the disks associated with that VM.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnsure that the VM you want to clone is shut down.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the Virtual Machines interface of the web console, click the Menu button \u003Cspan class=\"guibutton\">⋮\u003C/span> of the VM that you want to clone.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA drop down menu appears with controls for various VM operations.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Clone\u003C/span>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe Create a clone VM dialog appears.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/b23ad9e8040882ea2ac2b14463dd5d13/virt-cockpit-vm-clone.png\" width=\"540\" alt=\"Create a clone VM dialog box with an option to enter a new name for the VM.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOptional: Enter a new name for the VM clone.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Clone\u003C/span>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA new VM is created based on the source VM.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tConfirm whether the cloned VM appears in the list of VMs available on your host.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"migrating-virtual-machines_configuring-and-managing-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 12. Migrating virtual machines\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tIf the current host of a virtual machine (VM) becomes unsuitable or cannot be used anymore, or if you want to redistribute the hosting workload, you can migrate the VM to another KVM host.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"how-migrating-virtual-machines-works_migrating-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">12.1. How migrating virtual machines works\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe essential part of virtual machine (VM) migration is copying the XML configuration of a VM to a different host machine. If the migrated VM is not shut down, the migration also transfers the state of the VM’s memory and any virtualized devices to a destination host machine. For the VM to remain functional on the destination host, the VM’s disk images must remain available to it.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tBy default, the migrated VM is transient on the destination host, and remains defined also on the source host.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can migrate a running VM by using \u003Cspan class=\"emphasis\">\u003Cem>live\u003C/em>\u003C/span> or \u003Cspan class=\"emphasis\">\u003Cem>non-live\u003C/em>\u003C/span> migrations. To migrate a shut-off VM, you must use an \u003Cspan class=\"emphasis\">\u003Cem>offline\u003C/em>\u003C/span> migration. For details, see the following table.\n\t\t\t\u003C/p>\u003Crh-table id=\"idm140237800378304\">\u003Ctable class=\"gt-4-cols lt-7-rows\">\u003Ccaption>Table 12.1. VM migration types\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 25%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 25%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 25%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 25%; \" class=\"col_4\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237780264416\" scope=\"col\">Migration type\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237795105680\" scope=\"col\">Description\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237795104592\" scope=\"col\">Use case\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237795103504\" scope=\"col\">Storage requirements\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237780264416\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Live migration\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237795105680\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe VM continues to run on the source host machine while KVM is transferring the VM’s memory pages to the destination host. When the migration is nearly complete, KVM very briefly suspends the VM, and resumes it on the destination host.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237795104592\"> \u003Cp>\n\t\t\t\t\t\t\t\tUseful for VMs that require constant uptime. However, VMs that modify memory pages faster than KVM can transfer them, such as VMs under heavy I/O load, cannot be live-migrated, and \u003Cspan class=\"emphasis\">\u003Cem>non-live migration\u003C/em>\u003C/span> must be used instead.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237795103504\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe VM’s disk images must be accessible both to the source host and the destination host during the migration. (1)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237780264416\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Non-live migration\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237795105680\"> \u003Cp>\n\t\t\t\t\t\t\t\tSuspends the VM, copies its configuration and its memory to the destination host, and resumes the VM.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237795104592\"> \u003Cp>\n\t\t\t\t\t\t\t\tCreates downtime for the VM, but is generally more reliable than live migration. Recommended for VMs under heavy memory load.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237795103504\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe VM’s disk images must be accessible both to the source host and the destination host during the migration. (1)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237780264416\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Hybrid migration\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237795105680\"> \u003Cp>\n\t\t\t\t\t\t\t\tCombines \u003Cspan class=\"emphasis\">\u003Cem>live migration\u003C/em>\u003C/span> and \u003Cspan class=\"emphasis\">\u003Cem>non-live migration\u003C/em>\u003C/span>. You suspend the source VM during live migration, which prevents additional dirty memory pages from being generated. As a result, the migration is significantly more likely to complete.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237795104592\"> \u003Cp>\n\t\t\t\t\t\t\t\tRecommended for example when live-migrating a VM that uses very many vCPUs or a large amount of memory, which prevents the migration from completing.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003Cp>\n\t\t\t\t\t\t\t\tBased on guest workload and the number of static pages during migration, a hybrid migration might also cause significantly less downtime than a non-live migration.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237795103504\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe VM’s disk images must be accessible both to the source host and the destination host during the migration. (1)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237780264416\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Offline migration\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237795105680\"> \u003Cp>\n\t\t\t\t\t\t\t\tMoves the VM’s configuration to the destination host\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237795104592\"> \u003Cp>\n\t\t\t\t\t\t\t\tRecommended for shut-off VMs and in situations when shutting down the VM does not disrupt your workloads.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237795103504\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe VM’s disk images do not have to be available on a shared network, and can be copied or moved manually to the destination host instead.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cp>\n\t\t\t\t(1) To achieve this, use one of the following:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStorage located \u003Ca class=\"link\" href=\"#sharing-virtual-machine-disk-images-with-other-hosts_migrating-virtual-machines\" title=\"12.5. Sharing virtual machine disk images with other hosts\">on a shared network\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">--copy-storage-all\u003C/code> parameter for the \u003Ccode class=\"literal\">virsh migrate\u003C/code> command, which copies disk image contents from the source to the destination over the network.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStorage area network (SAN) logical units (LUNs).\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://docs.ceph.com/en/latest/rados/\">Ceph storage clusters\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#benefits-of-migrating-virtual-machines_migrating-virtual-machines\" title=\"12.2. Benefits of migrating virtual machines\">Benefits of migrating virtual machines\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#sharing-virtual-machine-disk-images-with-other-hosts_migrating-virtual-machines\" title=\"12.5. Sharing virtual machine disk images with other hosts\">Sharing virtual machine disk images with other hosts\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"benefits-of-migrating-virtual-machines_migrating-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">12.2. Benefits of migrating virtual machines\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tMigrating virtual machines (VMs) can be useful for:\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Load balancing\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tVMs can be moved to host machines with lower usage if their host becomes overloaded, or if another host is under-utilized.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Hardware independence\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tWhen you need to upgrade, add, or remove hardware devices on the host machine, you can safely relocate VMs to other hosts. This means that VMs do not experience any downtime for hardware improvements.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Energy saving\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tVMs can be redistributed to other hosts, and the unloaded host systems can thus be powered off to save energy and cut costs during low usage periods.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Geographic migration\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tVMs can be moved to another physical location for lower latency or when required for other reasons.\n\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"limitations-for-migrating-virtual-machines_migrating-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">12.3. Limitations for migrating virtual machines\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tBefore migrating virtual machines (VMs) in RHEL 9, ensure you are aware of the migration’s limitations.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tMigrating VMs from or to a \u003Ca class=\"link\" href=\"#system-and-session-connections_securing-virtual-machines-in-rhel\">session connection of \u003Ccode class=\"literal\">libvirt\u003C/code>\u003C/a> is unreliable and therefore not recommended.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVMs that use certain features and configurations will not work correctly if migrated, or the migration will fail. Such features include:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tDevice passthrough\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSR-IOV device assignment\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tMediated devices, such as vGPUs\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA migration between hosts that use Non-Uniform Memory Access (NUMA) pinning works only if the hosts have similar topology. However, the performance on running workloads might be negatively affected by the migration.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe emulated CPUs, both on the source VM and the destination VM, must be identical, otherwise the migration might fail. Any differences between the VMs in the following CPU related areas can cause problems with the migration:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCPU model\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"square\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tMigrating between an Intel 64 host and an AMD64 host is unsupported, even though they share the x86-64 instruction set.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tFor steps to ensure that a VM will work correctly after migrating to a host with a different CPU model, see \u003Ca class=\"link\" href=\"#verifying-host-cpu-compatibility-for-virtual-machine-migration_migrating-virtual-machines\" title=\"12.4. Verifying host CPU compatibility for virtual machine migration\">Verifying host CPU compatibility for virtual machine migration\u003C/a>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tFirmware settings\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tMicrocode version\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tBIOS version\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tBIOS settings\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tQEMU version\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tKernel version\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tLive migrating a VM that uses more than 1 TB of memory might in some cases be unreliable. For instructions on how to prevent or fix this problem, see \u003Ca class=\"link\" href=\"#live_migration_of_a_vm_takes_a_long_time_without_completing\" title=\"12.9.1. Live migration of a VM takes a long time without completing\">Live migration of a VM takes a long time without completing\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"verifying-host-cpu-compatibility-for-virtual-machine-migration_migrating-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">12.4. Verifying host CPU compatibility for virtual machine migration\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tFor migrated virtual machines (VMs) to work correctly on the destination host, the CPUs on the source and the destination hosts must be compatible. To ensure that this is the case, calculate a common CPU baseline before you begin the migration.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe instructions in this section use an example migration scenario with the following host CPUs:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tSource host: Intel Core i7-8650U\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tDestination hosts: Intel Xeon CPU E5-2620 v2\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tVirtualization is \u003Ca class=\"link\" href=\"#assembly_enabling-virtualization-in-rhel-9_configuring-and-managing-virtualization\" title=\"Chapter 2. Enabling virtualization\">installed and enabled\u003C/a> on your system.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have administrator access to the source host and the destination host for the migration.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the source host, obtain its CPU features and paste them into a new XML file, such as \u003Ccode class=\"literal\">domCaps-CPUs.xml\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh domcapabilities | xmllint --xpath \"//cpu/mode[@name='host-model']\" - &gt; \u003Cspan class=\"emphasis\">\u003Cem>domCaps-CPUs.xml\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIn the XML file, replace the \u003Ccode class=\"literal\">&lt;mode&gt; &lt;/mode&gt;\u003C/code> tags with \u003Ccode class=\"literal\">&lt;cpu&gt; &lt;/cpu&gt;\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Verify that the content of the \u003Ccode class=\"literal\">domCaps-CPUs.xml\u003C/code> file looks similar to the following:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat \u003Cspan class=\"emphasis\">\u003Cem>domCaps-CPUs.xml\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n\n    &lt;cpu&gt;\n          &lt;model fallback=\"forbid\"&gt;Skylake-Client-IBRS&lt;/model&gt;\n          &lt;vendor&gt;Intel&lt;/vendor&gt;\n          &lt;feature policy=\"require\" name=\"ss\"/&gt;\n          &lt;feature policy=\"require\" name=\"vmx\"/&gt;\n          &lt;feature policy=\"require\" name=\"pdcm\"/&gt;\n          &lt;feature policy=\"require\" name=\"hypervisor\"/&gt;\n          &lt;feature policy=\"require\" name=\"tsc_adjust\"/&gt;\n          &lt;feature policy=\"require\" name=\"clflushopt\"/&gt;\n          &lt;feature policy=\"require\" name=\"umip\"/&gt;\n          &lt;feature policy=\"require\" name=\"md-clear\"/&gt;\n          &lt;feature policy=\"require\" name=\"stibp\"/&gt;\n          &lt;feature policy=\"require\" name=\"arch-capabilities\"/&gt;\n          &lt;feature policy=\"require\" name=\"ssbd\"/&gt;\n          &lt;feature policy=\"require\" name=\"xsaves\"/&gt;\n          &lt;feature policy=\"require\" name=\"pdpe1gb\"/&gt;\n          &lt;feature policy=\"require\" name=\"invtsc\"/&gt;\n          &lt;feature policy=\"require\" name=\"ibpb\"/&gt;\n          &lt;feature policy=\"require\" name=\"ibrs\"/&gt;\n          &lt;feature policy=\"require\" name=\"amd-stibp\"/&gt;\n          &lt;feature policy=\"require\" name=\"amd-ssbd\"/&gt;\n          &lt;feature policy=\"require\" name=\"rsba\"/&gt;\n          &lt;feature policy=\"require\" name=\"skip-l1dfl-vmentry\"/&gt;\n          &lt;feature policy=\"require\" name=\"pschange-mc-no\"/&gt;\n          &lt;feature policy=\"disable\" name=\"hle\"/&gt;\n          &lt;feature policy=\"disable\" name=\"rtm\"/&gt;\n    &lt;/cpu&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the destination host, use the following command to obtain its CPU features:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh domcapabilities | xmllint --xpath \"//cpu/mode[@name='host-model']\" -\u003C/strong>\u003C/span>\n\n    &lt;mode name=\"host-model\" supported=\"yes\"&gt;\n            &lt;model fallback=\"forbid\"&gt;IvyBridge-IBRS&lt;/model&gt;\n            &lt;vendor&gt;Intel&lt;/vendor&gt;\n            &lt;feature policy=\"require\" name=\"ss\"/&gt;\n            &lt;feature policy=\"require\" name=\"vmx\"/&gt;\n            &lt;feature policy=\"require\" name=\"pdcm\"/&gt;\n            &lt;feature policy=\"require\" name=\"pcid\"/&gt;\n            &lt;feature policy=\"require\" name=\"hypervisor\"/&gt;\n            &lt;feature policy=\"require\" name=\"arat\"/&gt;\n            &lt;feature policy=\"require\" name=\"tsc_adjust\"/&gt;\n            &lt;feature policy=\"require\" name=\"umip\"/&gt;\n            &lt;feature policy=\"require\" name=\"md-clear\"/&gt;\n            &lt;feature policy=\"require\" name=\"stibp\"/&gt;\n            &lt;feature policy=\"require\" name=\"arch-capabilities\"/&gt;\n            &lt;feature policy=\"require\" name=\"ssbd\"/&gt;\n            &lt;feature policy=\"require\" name=\"xsaveopt\"/&gt;\n            &lt;feature policy=\"require\" name=\"pdpe1gb\"/&gt;\n            &lt;feature policy=\"require\" name=\"invtsc\"/&gt;\n            &lt;feature policy=\"require\" name=\"ibpb\"/&gt;\n            &lt;feature policy=\"require\" name=\"amd-ssbd\"/&gt;\n            &lt;feature policy=\"require\" name=\"skip-l1dfl-vmentry\"/&gt;\n            &lt;feature policy=\"require\" name=\"pschange-mc-no\"/&gt;\n    &lt;/mode&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAdd the obtained CPU features from the destination host to the \u003Ccode class=\"literal\">domCaps-CPUs.xml\u003C/code> file on the source host. Again, replace the \u003Ccode class=\"literal\">&lt;mode&gt; &lt;/mode&gt;\u003C/code> tags with \u003Ccode class=\"literal\">&lt;cpu&gt; &lt;/cpu&gt;\u003C/code> and save the file.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Verify that the XML file now contains the CPU features from both hosts.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat \u003Cspan class=\"emphasis\">\u003Cem>domCaps-CPUs.xml\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n\n    &lt;cpu&gt;\n          &lt;model fallback=\"forbid\"&gt;Skylake-Client-IBRS&lt;/model&gt;\n          &lt;vendor&gt;Intel&lt;/vendor&gt;\n          &lt;feature policy=\"require\" name=\"ss\"/&gt;\n          &lt;feature policy=\"require\" name=\"vmx\"/&gt;\n          &lt;feature policy=\"require\" name=\"pdcm\"/&gt;\n          &lt;feature policy=\"require\" name=\"hypervisor\"/&gt;\n          &lt;feature policy=\"require\" name=\"tsc_adjust\"/&gt;\n          &lt;feature policy=\"require\" name=\"clflushopt\"/&gt;\n          &lt;feature policy=\"require\" name=\"umip\"/&gt;\n          &lt;feature policy=\"require\" name=\"md-clear\"/&gt;\n          &lt;feature policy=\"require\" name=\"stibp\"/&gt;\n          &lt;feature policy=\"require\" name=\"arch-capabilities\"/&gt;\n          &lt;feature policy=\"require\" name=\"ssbd\"/&gt;\n          &lt;feature policy=\"require\" name=\"xsaves\"/&gt;\n          &lt;feature policy=\"require\" name=\"pdpe1gb\"/&gt;\n          &lt;feature policy=\"require\" name=\"invtsc\"/&gt;\n          &lt;feature policy=\"require\" name=\"ibpb\"/&gt;\n          &lt;feature policy=\"require\" name=\"ibrs\"/&gt;\n          &lt;feature policy=\"require\" name=\"amd-stibp\"/&gt;\n          &lt;feature policy=\"require\" name=\"amd-ssbd\"/&gt;\n          &lt;feature policy=\"require\" name=\"rsba\"/&gt;\n          &lt;feature policy=\"require\" name=\"skip-l1dfl-vmentry\"/&gt;\n          &lt;feature policy=\"require\" name=\"pschange-mc-no\"/&gt;\n          &lt;feature policy=\"disable\" name=\"hle\"/&gt;\n          &lt;feature policy=\"disable\" name=\"rtm\"/&gt;\n    &lt;/cpu&gt;\n    &lt;cpu&gt;\n          &lt;model fallback=\"forbid\"&gt;IvyBridge-IBRS&lt;/model&gt;\n          &lt;vendor&gt;Intel&lt;/vendor&gt;\n          &lt;feature policy=\"require\" name=\"ss\"/&gt;\n          &lt;feature policy=\"require\" name=\"vmx\"/&gt;\n          &lt;feature policy=\"require\" name=\"pdcm\"/&gt;\n          &lt;feature policy=\"require\" name=\"pcid\"/&gt;\n          &lt;feature policy=\"require\" name=\"hypervisor\"/&gt;\n          &lt;feature policy=\"require\" name=\"arat\"/&gt;\n          &lt;feature policy=\"require\" name=\"tsc_adjust\"/&gt;\n          &lt;feature policy=\"require\" name=\"umip\"/&gt;\n          &lt;feature policy=\"require\" name=\"md-clear\"/&gt;\n          &lt;feature policy=\"require\" name=\"stibp\"/&gt;\n          &lt;feature policy=\"require\" name=\"arch-capabilities\"/&gt;\n          &lt;feature policy=\"require\" name=\"ssbd\"/&gt;\n          &lt;feature policy=\"require\" name=\"xsaveopt\"/&gt;\n          &lt;feature policy=\"require\" name=\"pdpe1gb\"/&gt;\n          &lt;feature policy=\"require\" name=\"invtsc\"/&gt;\n          &lt;feature policy=\"require\" name=\"ibpb\"/&gt;\n          &lt;feature policy=\"require\" name=\"amd-ssbd\"/&gt;\n          &lt;feature policy=\"require\" name=\"skip-l1dfl-vmentry\"/&gt;\n          &lt;feature policy=\"require\" name=\"pschange-mc-no\"/&gt;\n    &lt;/cpu&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the XML file to calculate the CPU feature baseline for the VM you intend to migrate.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh hypervisor-cpu-baseline \u003Cspan class=\"emphasis\">\u003Cem>domCaps-CPUs.xml\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n\n    &lt;cpu mode='custom' match='exact'&gt;\n      &lt;model fallback='forbid'&gt;IvyBridge-IBRS&lt;/model&gt;\n      &lt;vendor&gt;Intel&lt;/vendor&gt;\n      &lt;feature policy='require' name='ss'/&gt;\n      &lt;feature policy='require' name='vmx'/&gt;\n      &lt;feature policy='require' name='pdcm'/&gt;\n      &lt;feature policy='require' name='pcid'/&gt;\n      &lt;feature policy='require' name='hypervisor'/&gt;\n      &lt;feature policy='require' name='arat'/&gt;\n      &lt;feature policy='require' name='tsc_adjust'/&gt;\n      &lt;feature policy='require' name='umip'/&gt;\n      &lt;feature policy='require' name='md-clear'/&gt;\n      &lt;feature policy='require' name='stibp'/&gt;\n      &lt;feature policy='require' name='arch-capabilities'/&gt;\n      &lt;feature policy='require' name='ssbd'/&gt;\n      &lt;feature policy='require' name='xsaveopt'/&gt;\n      &lt;feature policy='require' name='pdpe1gb'/&gt;\n      &lt;feature policy='require' name='invtsc'/&gt;\n      &lt;feature policy='require' name='ibpb'/&gt;\n      &lt;feature policy='require' name='amd-ssbd'/&gt;\n      &lt;feature policy='require' name='skip-l1dfl-vmentry'/&gt;\n      &lt;feature policy='require' name='pschange-mc-no'/&gt;\n    &lt;/cpu&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen the XML configuration of the VM you intend to migrate, and replace the contents of the \u003Ccode class=\"literal\">&lt;cpu&gt;\u003C/code> section with the settings obtained in the previous step.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh edit \u003Cspan class=\"emphasis\">\u003Cem>VM-name\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the VM is running, restart it.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh reboot \u003Cspan class=\"emphasis\">\u003Cem>VM-name\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Next steps\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#sharing-virtual-machine-disk-images-with-other-hosts_migrating-virtual-machines\" title=\"12.5. Sharing virtual machine disk images with other hosts\">Sharing virtual machine disk images with other hosts\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#migrating-a-virtual-machine-using-the-cli_migrating-virtual-machines\" title=\"12.6. Migrating a virtual machine by using the command-line interface\">Migrating a virtual machine by using the command-line interface\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_live-migrating-a-virtual-machine-using-the-web-console_migrating-virtual-machines\" title=\"12.7. Live migrating a virtual machine by using the web console\">Live-migrating a virtual machine by using the web console\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"sharing-virtual-machine-disk-images-with-other-hosts_migrating-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">12.5. Sharing virtual machine disk images with other hosts\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo perform a live migration of a virtual machine (VM) between \u003Ca class=\"link\" href=\"#supported-hosts-for-virtual-machine-migration_migrating-virtual-machines\" title=\"12.10. Supported hosts for virtual machine migration\">supported KVM hosts\u003C/a>, you must also migrate the storage of the running VM in a way that makes it possible for the VM to read from and write to the storage during the migration process.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tOne of the methods to do this is using shared VM storage. The following procedure provides instructions for sharing a locally stored VM image with the source host and the destination host by using the NFS protocol.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe VM intended for migration is shut down.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOptional: A host system is available for hosting the storage that is not the source or destination host, but both the source and the destination host can reach it through the network. This is the optimal solution for shared storage and is recommended by Red Hat.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tMake sure that NFS file locking is not used as it is not supported in KVM.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe NFS protocol is installed and enabled on the source and destination hosts. See\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_using_network_file_services/deploying-an-nfs-server_configuring-and-using-network-file-services\">Deploying an NFS server\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConnect to the host that will provide shared storage. In this example, it is the \u003Ccode class=\"literal\">example-shared-storage\u003C/code> host:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ssh root@\u003Cspan class=\"emphasis\">\u003Cem>example-shared-storage\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nroot@example-shared-storage's password:\nLast login: Mon Sep 24 12:05:36 2019\nroot~#\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a directory on the source host that will hold the disk image and will be shared with the migration hosts:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mkdir \u003Cspan class=\"emphasis\">\u003Cem>/var/lib/libvirt/shared-images\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCopy the disk image of the VM from the source host to the newly created directory. The following example copies the disk image \u003Ccode class=\"literal\">example-disk-1\u003C/code> of the VM to the \u003Ccode class=\"literal\">/var/lib/libvirt/shared-images/\u003C/code> directory of the \u003Ccode class=\"literal\">example-shared-storage\u003C/code> host:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>scp /var/lib/libvirt/images/\u003Cspan class=\"emphasis\">\u003Cem>example-disk-1\u003C/em>\u003C/span>.qcow2 root@\u003Cspan class=\"emphasis\">\u003Cem>example-shared-storage\u003C/em>\u003C/span>:/var/lib/libvirt/shared-images/\u003Cspan class=\"emphasis\">\u003Cem>example-disk-1\u003C/em>\u003C/span>.qcow2\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the host that you want to use for sharing the storage, add the sharing directory to the \u003Ccode class=\"literal\">/etc/exports\u003C/code> file. The following example shares the \u003Ccode class=\"literal\">/var/lib/libvirt/shared-images\u003C/code> directory with the \u003Ccode class=\"literal\">example-source-machine\u003C/code> and \u003Ccode class=\"literal\">example-destination-machine\u003C/code> hosts:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>/var/lib/libvirt/shared-images \u003Cspan class=\"emphasis\">\u003Cem>example-source-machine\u003C/em>\u003C/span>(rw,no_root_squash) \u003Cspan class=\"emphasis\">\u003Cem>example-destination-machine\u003C/em>\u003C/span>(rw,no\\_root_squash)\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn both the source and destination host, mount the shared directory in the \u003Ccode class=\"literal\">/var/lib/libvirt/images\u003C/code> directory:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mount \u003Cspan class=\"emphasis\">\u003Cem>example-shared-storage\u003C/em>\u003C/span>:/var/lib/libvirt/shared-images /var/lib/libvirt/images\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStart the VM on the source host and observe if it boots successfully.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_using_network_file_services/deploying-an-nfs-server_configuring-and-using-network-file-services\">Deploying an NFS server\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"migrating-a-virtual-machine-using-the-cli_migrating-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">12.6. Migrating a virtual machine by using the command-line interface\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tIf the current host of a virtual machine (VM) becomes unsuitable or cannot be used anymore, or if you want to redistribute the hosting workload, you can migrate the VM to another KVM host. The following procedure provides instructions and examples for various scenarios of such migrations.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe source host and the destination host both use the KVM hypervisor.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe source host and the destination host are able to reach each other over the network. Use the \u003Ccode class=\"literal\">ping\u003C/code> utility to verify this.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnsure the following ports are open on the destination host.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPort 22 is needed for connecting to the destination host by using SSH.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPort 16509 is needed for connecting to the destination host by using TLS.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPort 16514 is needed for connecting to the destination host by using TCP.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPorts 49152-49215 are needed by QEMU for transfering the memory and disk migration data.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor the migration to be supportable by Red Hat, the source host and destination host must be using specific operating systems and machine types. To ensure this is the case, see \u003Ca class=\"link\" href=\"#supported-hosts-for-virtual-machine-migration_migrating-virtual-machines\" title=\"12.10. Supported hosts for virtual machine migration\">Supported hosts for virtual machine migration\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe VM must be compatible with the CPU features of the destination host. To ensure this is the case, see \u003Ca class=\"link\" href=\"#verifying-host-cpu-compatibility-for-virtual-machine-migration_migrating-virtual-machines\" title=\"12.4. Verifying host CPU compatibility for virtual machine migration\">Verifying host CPU compatibility for virtual machine migration\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe disk images of VMs that will be migrated are accessible to both the source host and the destination host. This is optional for offline migration, but required for migrating a running VM. To ensure storage accessibility for both hosts, one of the following must apply:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tYou are using storage area network (SAN) logical units (LUNs).\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tYou are using a \u003Ca class=\"link\" href=\"https://docs.ceph.com/en/latest/rados/\">Ceph storage clusters\u003C/a>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tYou have copied the disk image of the VM to the destination host, and you will use \u003Ccode class=\"literal\">--copy-storage-all\u003C/code> parameter when migrating the VM. Alternatively, you have \u003Ca class=\"link\" href=\"#creating-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli\" title=\"15.6.1. Creating a virtual disk image by using qemu-img\">created a disk image\u003C/a> with the same format and size as the source VM disk.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe disk image is located on a separate networked location. For instructions to set up such shared VM storage, see \u003Ca class=\"link\" href=\"#sharing-virtual-machine-disk-images-with-other-hosts_migrating-virtual-machines\" title=\"12.5. Sharing virtual machine disk images with other hosts\">Sharing virtual machine disk images with other hosts\u003C/a>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tWhen migrating a running VM, your network bandwidth must be higher than the rate in which the VM generates dirty memory pages.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo obtain the dirty page rate of your VM before you start the live migration, do the following:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tMonitor the rate of dirty page generation of the VM for a short period of time.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh domdirtyrate-calc \u003Cspan class=\"emphasis\">\u003Cem>example-VM\u003C/em>\u003C/span> 30\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAfter the monitoring finishes, obtain its results:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh domstats \u003Cspan class=\"emphasis\">\u003Cem>example-VM\u003C/em>\u003C/span> --dirtyrate\u003C/strong>\u003C/span>\nDomain: 'example-VM'\n  dirtyrate.calc_status=2\n  dirtyrate.calc_start_time=200942\n  dirtyrate.calc_period=30\n  dirtyrate.megabytes_per_second=2\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIn this example, the VM is generating 2 MB of dirty memory pages per second. Attempting to live-migrate such a VM on a network with a bandwidth of 2 MB/s or less will cause the live migration not to progress if you do not pause the VM or lower its workload.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo ensure that the live migration finishes successfully, Red Hat recommends that your network bandwidth is significantly greater than the VM’s dirty page generation rate.\n\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tThe value of the \u003Ccode class=\"literal\">calc_period\u003C/code> option might differ based on the workload and dirty page rate. You can experiment with several \u003Ccode class=\"literal\">calc_period\u003C/code> values to determine the most suitable period that aligns with the dirty page rate in your environment.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWhen migrating an existing VM in a public bridge tap network, the source and destination hosts must be located on the same network. Otherwise, the VM network will not work after migration.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tWhen performing a VM migration, the \u003Ccode class=\"literal\">virsh\u003C/code> client on the source host can use one of several protocols to connect to the libvirt daemon on the destination host. Examples in the following procedure use an SSH connection, but you can choose a different one.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you want libvirt to use an SSH connection, ensure that the \u003Ccode class=\"literal\">virtqemud\u003C/code> socket is enabled and running on the destination host.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable --now virtqemud.socket\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you want libvirt to use a TLS connection, ensure that the \u003Ccode class=\"literal\">virtproxyd-tls\u003C/code> socket is enabled and running on the destination host.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable --now virtproxyd-tls.socket\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you want libvirt to use a TCP connection, ensure that the \u003Ccode class=\"literal\">virtproxyd-tcp\u003C/code> socket is enabled and running on the destination host.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable --now virtproxyd-tcp.socket\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virsh migrate\u003C/code> command with options appropriate for your migration requirements.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe following command migrates the \u003Ccode class=\"literal\">example-VM-1\u003C/code> VM from your local host to the system connection of the \u003Ccode class=\"literal\">example-destination\u003C/code> host by using an SSH tunnel. The VM keeps running during the migration.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh migrate --persistent --live \u003Cspan class=\"emphasis\">\u003Cem>example-VM-1\u003C/em>\u003C/span> qemu+ssh://\u003Cspan class=\"emphasis\">\u003Cem>example-destination\u003C/em>\u003C/span>/system\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe following commands enable you to make manual adjustments to the configuration of the \u003Ccode class=\"literal\">example-VM-2\u003C/code> VM running on your local host, and then migrate the VM to the \u003Ccode class=\"literal\">example-destination\u003C/code> host. The migrated VM will automatically use the updated configuration.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dumpxml --migratable \u003Cspan class=\"emphasis\">\u003Cem>example-VM-2\u003C/em>\u003C/span> &gt; \u003Cspan class=\"emphasis\">\u003Cem>example-VM-2\u003C/em>\u003C/span>.xml\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>vi \u003Cspan class=\"emphasis\">\u003Cem>example-VM-2\u003C/em>\u003C/span>.xml\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>virsh migrate --live --persistent --xml \u003Cspan class=\"emphasis\">\u003Cem>example-VM-2\u003C/em>\u003C/span>.xml \u003Cspan class=\"emphasis\">\u003Cem>example-VM-2\u003C/em>\u003C/span> qemu+ssh://\u003Cspan class=\"emphasis\">\u003Cem>example-destination\u003C/em>\u003C/span>/system\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThis procedure can be useful for example when the destination host needs to use a different path to access the shared VM storage or when configuring a feature specific to the destination host.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe following command suspends the \u003Ccode class=\"literal\">example-VM-3\u003C/code> VM from the \u003Ccode class=\"literal\">example-source\u003C/code> host, migrates it to the \u003Ccode class=\"literal\">example-destination\u003C/code> host, and instructs it to use the adjusted XML configuration, provided by the \u003Ccode class=\"literal\">example-VM-3-alt.xml\u003C/code> file. When the migration is completed, \u003Ccode class=\"literal\">libvirt\u003C/code> resumes the VM on the destination host.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh migrate \u003Cspan class=\"emphasis\">\u003Cem>example-VM-3\u003C/em>\u003C/span> qemu+ssh://\u003Cspan class=\"emphasis\">\u003Cem>example-source\u003C/em>\u003C/span>/system qemu+ssh://\u003Cspan class=\"emphasis\">\u003Cem>example-destination\u003C/em>\u003C/span>/system --xml \u003Cspan class=\"emphasis\">\u003Cem>example-VM-3-alt\u003C/em>\u003C/span>.xml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAfter the migration, the VM is in the shut off state on the source host, and the migrated copy is deleted after it is shut down.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe following deletes the shut-down \u003Ccode class=\"literal\">example-VM-4\u003C/code> VM from the \u003Ccode class=\"literal\">example-source\u003C/code> host, and moves its configuration to the \u003Ccode class=\"literal\">example-destination\u003C/code> host.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh migrate --offline --persistent --undefinesource \u003Cspan class=\"emphasis\">\u003Cem>example-VM-4\u003C/em>\u003C/span> qemu+ssh://\u003Cspan class=\"emphasis\">\u003Cem>example-source\u003C/em>\u003C/span>/system qemu+ssh://\u003Cspan class=\"emphasis\">\u003Cem>example-destination\u003C/em>\u003C/span>/system\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that this type of migration does not require moving the VM’s disk image to shared storage. However, for the VM to be usable on the destination host, you also need to migrate the VM’s disk image. For example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>scp root@\u003Cspan class=\"emphasis\">\u003Cem>example-source\u003C/em>\u003C/span>:/var/lib/libvirt/images/\u003Cspan class=\"emphasis\">\u003Cem>example-VM-4\u003C/em>\u003C/span>.qcow2 root@\u003Cspan class=\"emphasis\">\u003Cem>example-destination\u003C/em>\u003C/span>:/var/lib/libvirt/images/\u003Cspan class=\"emphasis\">\u003Cem>example-VM-4\u003C/em>\u003C/span>.qcow2\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe following command migrates the \u003Cspan class=\"emphasis\">\u003Cem>example-VM-5\u003C/em>\u003C/span> VM to the \u003Cspan class=\"emphasis\">\u003Cem>example-destination\u003C/em>\u003C/span> host and uses multiple parallel connections, also known as multiple file descriptors (multi-FD) migration. With multi-FD migration, you can speed up the migration by utilizing all of the available network bandwidth for the migration process.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh migrate --parallel --parallel-connections 4 \u003Cspan class=\"emphasis\">\u003Cem>&lt;example-VM-5&gt;\u003C/em>\u003C/span> qemu+ssh://\u003Cspan class=\"emphasis\">\u003Cem>&lt;example-destination&gt;\u003C/em>\u003C/span>/system\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis example uses 4 multi-FD channels to migrate the \u003Cspan class=\"emphasis\">\u003Cem>example-VM-5\u003C/em>\u003C/span> VM. It is recommended to use one channel for each 10 Gbps of available network bandwidth. The default value is 2 channels.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tWait for the migration to complete. The process may take some time depending on network bandwidth, system load, and the size of the VM. If the \u003Ccode class=\"literal\">--verbose\u003C/code> option is not used for \u003Ccode class=\"literal\">virsh migrate\u003C/code>, the CLI does not display any progress indicators except errors.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tWhen the migration is in progress, you can use the \u003Ccode class=\"literal\">virsh domjobinfo\u003C/code> utility to display the migration statistics.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the destination host, list the available VMs to verify if the VM has been migrated:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh list\u003C/strong>\u003C/span>\nId      Name             State\n----------------------------------\n10    example-VM-1      running\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the migration is still running, this command will list the VM state as \u003Ccode class=\"literal\">paused\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIn some cases, the target host will not be compatible with certain values of the migrated VM’s XML configuration, such as the network name or CPU type. As a result, the VM will fail to boot on the target host. To fix these problems, you can update the problematic values by using the \u003Ccode class=\"literal\">virsh edit\u003C/code> command. After updating the values, you must restart the VM for the changes to be applied.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf a live migration is taking a long time to complete, this may be because the VM is under heavy load and too many memory pages are changing for live migration to be possible. To fix this problem, change the migration to a non-live one by suspending the VM.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh suspend \u003Cspan class=\"emphasis\">\u003Cem>example-VM-1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">virsh migrate --help\u003C/code> command\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">virsh (1)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_live-migrating-a-virtual-machine-using-the-web-console_migrating-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">12.7. Live migrating a virtual machine by using the web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIf you wish to migrate a virtual machine (VM) that is performing tasks which require it to be constantly running, you can migrate that VM to another KVM host without shutting it down. This is also known as live migration. The following instructions explain how to do so by using the web console.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tFor tasks that modify memory pages faster than KVM can transfer them, such as heavy I/O load tasks, it is recommended that you do not live migrate the VM.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe source and destination hosts are running.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnsure the following ports are open on the destination host.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPort 22 is needed for connecting to the destination host by using SSH.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPort 16509 is needed for connecting to the destination host by using TLS.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPort 16514 is needed for connecting to the destination host by using TCP.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPorts 49152-49215 are needed by QEMU for transfering the memory and disk migration data.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe VM must be compatible with the CPU features of the destination host. To ensure this is the case, see \u003Ca class=\"link\" href=\"#verifying-host-cpu-compatibility-for-virtual-machine-migration_migrating-virtual-machines\" title=\"12.4. Verifying host CPU compatibility for virtual machine migration\">Verifying host CPU compatibility for virtual machine migration\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe VM’s disk images are located on a \u003Ca class=\"link\" href=\"#sharing-virtual-machine-disk-images-with-other-hosts_migrating-virtual-machines\" title=\"12.5. Sharing virtual machine disk images with other hosts\">shared storage\u003C/a> that is accessible to the source host as well as the destination host.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tWhen migrating a running VM, your network bandwidth must be higher than the rate in which the VM generates dirty memory pages.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo obtain the dirty page rate of your VM before you start the live migration, do the following in your command-line interface:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tMonitor the rate of dirty page generation of the VM for a short period of time.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh domdirtyrate-calc \u003Cspan class=\"emphasis\">\u003Cem>vm-name\u003C/em>\u003C/span> 30\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAfter the monitoring finishes, obtain its results:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh domstats \u003Cspan class=\"emphasis\">\u003Cem>vm-name\u003C/em>\u003C/span> --dirtyrate\u003C/strong>\u003C/span>\nDomain: '\u003Cspan class=\"emphasis\">\u003Cem>vm-name\u003C/em>\u003C/span>'\n  dirtyrate.calc_status=2\n  dirtyrate.calc_start_time=200942\n  dirtyrate.calc_period=30\n  dirtyrate.megabytes_per_second=2\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIn this example, the VM is generating 2 MB of dirty memory pages per second. Attempting to live-migrate such a VM on a network with a bandwidth of 2 MB/s or less will cause the live migration not to progress if you do not pause the VM or lower its workload.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo ensure that the live migration finishes successfully, Red Hat recommends that your network bandwidth is significantly greater than the VM’s dirty page generation rate.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe value of the \u003Ccode class=\"literal\">calc_period\u003C/code> option might differ based on the workload and dirty page rate. You can experiment with several \u003Ccode class=\"literal\">calc_period\u003C/code> values to determine the most suitable period that aligns with the dirty page rate in your environment.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the Virtual Machines interface of the web console, click the Menu button \u003Cspan class=\"guibutton\">⋮\u003C/span> of the VM that you want to migrate.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA drop down menu appears with controls for various VM operations.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/91e478e619e8da31d1c80511fb976426/virt-cockpit-VM-running-menu.png\" alt=\"The virtual machines main page displaying the available options when the VM is running.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Migrate\u003C/span>\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe Migrate VM to another host dialog appears.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/759224676d9d914a9cbd76ee8bfd7e78/virt-cockpit-VM-migrate.png\" width=\"540\" alt=\"The Migrate VM to another host dialog box with fields to enter the URI of the destination host and set the migration duration.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnter the URI of the destination host.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the duration of the migration:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Permanent\u003C/strong>\u003C/span> - Do not check the box if you wish to migrate the VM permanently. Permanent migration completely removes the VM configuration from the source host.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Temporary\u003C/strong>\u003C/span> - Temporary migration migrates a copy of the VM to the destination host. This copy is deleted from the destination host when the VM is shut down. The original VM remains on the source host.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Migrate\u003C/span>\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYour VM is migrated to the destination host.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tTo verify whether the VM has been successfully migrated and is working correctly:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tConfirm whether the VM appears in the list of VMs available on the destination host.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStart the migrated VM and observe if it boots up.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"live-migrating-a-virtual-machine-with-an-attached-mellanox-virtual-function_migrating-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">12.8. Live migrating a virtual machine with an attached Mellanox virtual function\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tAs a Technology Preview, you can live migrate a virtual machine (VM) with an attached virtual function (VF) of a Mellanox networking device. Currently, this is only possible when using a Mellanox CX-7 networking device. The VF on the Mellanox CX-7 networking device uses a new \u003Ccode class=\"literal\">mlx5_vfio_pci\u003C/code> driver, which adds functionality that is necessary for the live migration, and \u003Ccode class=\"literal\">libvirt\u003C/code> binds the new driver to the VF automatically.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Limitations\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tCurrently, some virtualization features cannot be used when live migrating a VM with an attached Mellanox virtual function:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCalculating dirty memory page rate generation of the VM.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tUsing a post-copy live migration.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tUsing a virtual I/O Memory Management Unit (vIOMMU) device in the VM.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThis feature is included in RHEL 9 only as a \u003Ca class=\"link\" href=\"https://access.redhat.com/support/offerings/techpreview/\">Technology Preview\u003C/a>, which means it is not supported.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have a Mellanox CX-7 networking device with a firmware version that is equal to or greater than \u003Cspan class=\"emphasis\">\u003Cem>28.36.1010\u003C/em>\u003C/span>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRefer to \u003Ca class=\"link\" href=\"https://docs.nvidia.com/networking/adapters/index.html\">Mellanox documentation\u003C/a> for details about firmware versions.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">mstflint\u003C/code> package is installed on both the source and destination host:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install mstflint\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe Mellanox CX-7 networking device has \u003Ccode class=\"literal\">VF_MIGRATION_MODE\u003C/code> set to \u003Ccode class=\"literal\">MIGRATION_ENABLED\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mstconfig -d \u003Cspan class=\"emphasis\">\u003Cem>&lt;device_pci_address&gt;\u003C/em>\u003C/span> query | grep -i VF_migration\u003C/strong>\u003C/span>\n\nVF_MIGRATION_MODE                           MIGRATION_ENABLED(2)\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tYou can set \u003Ccode class=\"literal\">VF_MIGRATION_MODE\u003C/code> to \u003Ccode class=\"literal\">MIGRATION_ENABLED\u003C/code> by using the following command:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mstconfig -d \u003Cspan class=\"emphasis\">\u003Cem>&lt;device_pci_address&gt;\u003C/em>\u003C/span> set VF_MIGRATION_MODE=2\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">openvswitch\u003C/code> package is installed on both the source and destination host:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install openvswitch\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe CPU and the firmware of your host support the I/O Memory Management Unit (IOMMU).\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIf using an Intel CPU, it must support the Intel Virtualization Technology for Directed I/O (VT-d).\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIf using an AMD CPU, it must support the AMD-Vi feature.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe host system uses Access Control Service (ACS) to provide direct memory access (DMA) isolation for PCIe topology. Verify this with the system vendor.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor additional information, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_virtualization/4.0/html/hardware_considerations_for_implementing_sr-iov/index\">Hardware Considerations for Implementing SR-IOV\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe host network interface you want to use for creating VFs is running. For example, to activate the \u003Cspan class=\"emphasis\">\u003Cem>eth1\u003C/em>\u003C/span> interface and verify it is running, use the following commands:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link set eth1 up\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>ip link show eth1\u003C/strong>\u003C/span>\n8: eth1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP mode DEFAULT qlen 1000\n   link/ether a0:36:9f:8f:3f:b8 brd ff:ff:ff:ff:ff:ff\n   vf 0 MAC 00:00:00:00:00:00, spoof checking on, link-state auto\n   vf 1 MAC 00:00:00:00:00:00, spoof checking on, link-state auto\n   vf 2 MAC 00:00:00:00:00:00, spoof checking on, link-state auto\n   vf 3 MAC 00:00:00:00:00:00, spoof checking on, link-state auto\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor SR-IOV device assignment to work, the IOMMU feature must be enabled in the host BIOS and kernel. To do so:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn an Intel host, enable Intel Virtualization Technology for Directed I/O (VT-d):\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tRegenerate the GRUB configuration with the \u003Ccode class=\"literal\">intel_iommu=on\u003C/code> and \u003Ccode class=\"literal\">iommu=pt\u003C/code> parameters:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --args=\"intel_iommu=on iommu=pt\" --update-kernel=ALL\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tReboot the host.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn an AMD host, enable AMD-Vi:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tRegenerate the GRUB configuration with the \u003Ccode class=\"literal\">iommu=pt\u003C/code> parameter:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --args=\"iommu=pt\" --update-kernel=ALL\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tReboot the host.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe source host and the destination host both use the KVM hypervisor.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe source host and the destination host are able to reach each other over the network. Use the \u003Ccode class=\"literal\">ping\u003C/code> utility to verify this.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe following ports are open on the destination host.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPort 22 is needed for connecting to the destination host by using SSH.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPort 16509 is needed for connecting to the destination host by using TLS.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPort 16514 is needed for connecting to the destination host by using TCP.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tPorts 49152-49215 are needed by QEMU for transferring the memory and disk migration data.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe source host and destination host are using operating systems and machine types that allow migration. To ensure this is the case, see \u003Ca class=\"link\" href=\"#supported-hosts-for-virtual-machine-migration_migrating-virtual-machines\" title=\"12.10. Supported hosts for virtual machine migration\">Supported hosts for virtual machine migration\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe VM must be compatible with the CPU features of the destination host. To ensure this is the case, see \u003Ca class=\"link\" href=\"#verifying-host-cpu-compatibility-for-virtual-machine-migration_migrating-virtual-machines\" title=\"12.4. Verifying host CPU compatibility for virtual machine migration\">Verifying host CPU compatibility for virtual machine migration\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe disk images of VMs that will be migrated are located on a separate networked location accessible to both the source host and the destination host. This is optional for offline migration, but required for migrating a running VM.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor instructions to set up such shared VM storage, see \u003Ca class=\"link\" href=\"#sharing-virtual-machine-disk-images-with-other-hosts_migrating-virtual-machines\" title=\"12.5. Sharing virtual machine disk images with other hosts\">Sharing virtual machine disk images with other hosts\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWhen migrating a running VM, your network bandwidth must be higher than the rate in which the VM generates dirty memory pages.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA virtual network socket is enabled that corresponds to the connection protocol.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tWhen performing a VM migration, the \u003Ccode class=\"literal\">virsh\u003C/code> client on the source host can use one of several protocols to connect to the libvirt daemon on the destination host. Examples in the following procedure use an SSH connection, but you can choose a different one.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you want libvirt to use an SSH connection, ensure that the \u003Ccode class=\"literal\">virtqemud\u003C/code> socket is enabled and running on the destination host.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable --now virtqemud.socket\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you want libvirt to use a TLS connection, ensure that the \u003Ccode class=\"literal\">virtproxyd-tls\u003C/code> socket is enabled and running on the destination host.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable --now virtproxyd-tls.socket\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you want libvirt to use a TCP connection, ensure that the \u003Ccode class=\"literal\">virtproxyd-tcp\u003C/code> socket is enabled and running on the destination host.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable --now virtproxyd-tcp.socket\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the source host, set the Mellanox networking device to the \u003Ccode class=\"literal\">switchdev\u003C/code> mode.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>devlink dev eswitch set pci/\u003Cspan class=\"emphasis\">\u003Cem>&lt;device_pci_address&gt;\u003C/em>\u003C/span> mode switchdev\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the source host, create a virtual function on the Mellanox device.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo 1 &gt; /sys/bus/pci/devices/0000\\:e1\\:00.0/sriov_numvfs\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">/0000\\:e1\\:00.0/\u003C/code> part of the file path is based on the PCI address of the device. In the example it is: \u003Ccode class=\"literal\">0000:e1:00.0\u003C/code>\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the source host, unbind the VF from its driver.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-detach \u003Cspan class=\"emphasis\">\u003Cem>&lt;vf_pci_address&gt;\u003C/em>\u003C/span> --driver pci-stub\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou can view the PCI address of the VF by using the following command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lshw -c network -businfo\u003C/strong>\u003C/span>\n\nBus info                     Device             Class           Description\n===========================================================================\npci@0000:e1:00.0  enp225s0np0    network        MT2910 Family [ConnectX-7]\npci@0000:e1:00.1  enp225s0v0     network        ConnectX Family mlx5Gen Virtual Function\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the source host, enable the migration function of the VF.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>devlink port function set pci/0000:e1:00.0/1 migratable enable\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn this example, \u003Ccode class=\"literal\">pci/0000:e1:00.0/1\u003C/code> refers to the first VF on the Mellanox device with the given PCI address.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the source host, configure Open vSwitch (OVS) for the migration of the VF. If the Mellanox device is in \u003Ccode class=\"literal\">switchdev\u003C/code> mode, it cannot transfer data over the network.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnsure the \u003Ccode class=\"literal\">openvswitch\u003C/code> service is running.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl start openvswitch\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnable hardware offloading to improve networking performance.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ovs-vsctl set Open_vSwitch . other_config:hw-offload=true\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIncrease the maximum idle time to ensure network connections remain open during the migration.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ovs-vsctl set Open_vSwitch . other_config:max-idle=300000\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate a new bridge in the OVS instance.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ovs-vsctl add-br \u003Cspan class=\"emphasis\">\u003Cem>&lt;bridge_name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRestart the \u003Ccode class=\"literal\">openvswitch\u003C/code> service.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl restart openvswitch\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd the physical Mellanox device to the OVS bridge.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ovs-vsctl add-port \u003Cspan class=\"emphasis\">\u003Cem>&lt;bridge_name&gt;\u003C/em>\u003C/span> enp225s0np0\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIn this example, \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>&lt;bridge_name&gt;\u003C/em>\u003C/span>\u003C/code> is the name of the bridge you created in step \u003Cspan class=\"emphasis\">\u003Cem>d\u003C/em>\u003C/span> and \u003Ccode class=\"literal\">enp225s0np0\u003C/code> is the network interface name of the Mellanox device.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd the VF of the Mellanox device to the OVS bridge.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ovs-vsctl add-port \u003Cspan class=\"emphasis\">\u003Cem>&lt;bridge_name&gt;\u003C/em>\u003C/span> enp225s0npf0vf0\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIn this example, \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>&lt;bridge_name&gt;\u003C/em>\u003C/span>\u003C/code> is the name of the bridge you created in step \u003Cspan class=\"emphasis\">\u003Cem>d\u003C/em>\u003C/span> and \u003Ccode class=\"literal\">enp225s0npf0vf0\u003C/code> is the network interface name of the VF.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRepeat steps 1-5 on the \u003Cspan class=\"strong strong\">\u003Cstrong>destination host\u003C/strong>\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the source host, open a new file, such as \u003Ccode class=\"literal\">mlx_vf.xml\u003C/code>, and add the following XML configuration of the VF:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\"> &lt;interface type='hostdev' managed='yes'&gt;\n      &lt;mac address='52:54:00:56:8c:f7'/&gt;\n      &lt;source&gt;\n        &lt;address type='pci' domain='0x0000' bus='0xe1' slot='0x00' function='0x1'/&gt;\n      &lt;/source&gt;\n &lt;/interface&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis example configures a pass-through of the VF as a network interface for the VM. Ensure the MAC address is unique, and use the PCI address of the VF on the source host.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the source host, attach the VF XML file to the VM.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh attach-device \u003Cspan class=\"emphasis\">\u003Cem>&lt;vm_name&gt;\u003C/em>\u003C/span> mlx_vf.xml --live --config\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn this example, \u003Ccode class=\"literal\">mlx_vf.xml\u003C/code> is the name of the XML file with the VF configuration. Use the \u003Ccode class=\"literal\">--live\u003C/code> option to attach the device to a running VM.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the source host, start the live migration of the running VM with the attached VF.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh migrate --live --domain \u003Cspan class=\"emphasis\">\u003Cem>&lt;vm_name&gt;\u003C/em>\u003C/span> --desturi qemu+ssh://\u003Cspan class=\"emphasis\">\u003Cem>&lt;destination_host_ip_address&gt;\u003C/em>\u003C/span>/system\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the migrated VM, view the network interface name of the Mellanox VF.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ifconfig\u003C/strong>\u003C/span>\n\neth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 192.168.1.10  netmask 255.255.255.0  broadcast 192.168.1.255\n        inet6 fe80::a00:27ff:fe4e:66a1  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether 08:00:27:4e:66:a1  txqueuelen 1000  (Ethernet)\n        RX packets 100000  bytes 6543210 (6.5 MB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 100000  bytes 6543210 (6.5 MB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\n\u003Cspan class=\"strong strong\">\u003Cstrong>enp4s0f0v0\u003C/strong>\u003C/span>: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 192.168.3.10  netmask 255.255.255.0  broadcast 192.168.3.255\n        inet6 fe80::a00:27ff:fe4e:66c3  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether 08:00:27:4e:66:c3  txqueuelen 1000  (Ethernet)\n        RX packets 200000  bytes 12345678 (12.3 MB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 200000  bytes 12345678 (12.3 MB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the migrated VM, check that the Mellanox VF works, for example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ping -I \u003Cspan class=\"emphasis\">\u003Cem>&lt;VF_interface_name&gt;\u003C/em>\u003C/span> 8.8.8.8\u003C/strong>\u003C/span>\n\nPING 8.8.8.8 (8.8.8.8) from 192.168.3.10 \u003Cspan class=\"emphasis\">\u003Cem>&lt;VF_interface_name&gt;\u003C/em>\u003C/span>: 56(84) bytes of data.\n64 bytes from 8.8.8.8: icmp_seq=1 ttl=57 time=27.4 ms\n64 bytes from 8.8.8.8: icmp_seq=2 ttl=57 time=26.9 ms\n\n--- 8.8.8.8 ping statistics ---\n2 packets transmitted, 2 received, 0% packet loss, time 1002ms\nrtt min/avg/max/mdev = 26.944/27.046/27.148/0.102 ms\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#migrating-a-virtual-machine-using-the-cli_migrating-virtual-machines\" title=\"12.6. Migrating a virtual machine by using the command-line interface\">Migrating a virtual machine by using the command-line interface\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#troubleshooting-virtual-machine-migrations_migrating-virtual-machines\" title=\"12.9. Troubleshooting virtual machine migrations\">Troubleshooting virtual machine migrations\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"troubleshooting-virtual-machine-migrations_migrating-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">12.9. Troubleshooting virtual machine migrations\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tIf you are facing one of the following problems when migrating virtual machines (VMs), see the provided instructions to fix or avoid the issue.\n\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"live_migration_of_a_vm_takes_a_long_time_without_completing\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">12.9.1. Live migration of a VM takes a long time without completing\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Cause\u003C/strong>\u003C/span>\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIn some cases, migrating a running VM might cause the the VM to generate \u003Cspan class=\"emphasis\">\u003Cem>dirty memory pages\u003C/em>\u003C/span> faster than they can be migrated. When this occurs, the migration cannot complete successfully.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tThe following scenarios frequently cause this problem:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tLive migrating a VM under a heavy load\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLive migrating a VM that uses a large amount of memory, such as 1 TB or more\n\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tRed Hat has successfully tested live migration of VMs with up to 6 TB of memory. However, for live migration scenarios that involve VMs with more than 1 TB of memory, customers should reach out to \u003Ca class=\"link\" href=\"https://access.redhat.com/support/contact/technicalSupport\">Red Hat technical support\u003C/a>.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Diagnosis\u003C/strong>\u003C/span>\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIf your VM live migration is taking longer than expected, use the \u003Ccode class=\"literal\">virsh domjobinfo\u003C/code> command to obtain the memory page data for the VM:\n\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh domjobinfo \u003Cspan class=\"emphasis\">\u003Cem>vm-name\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n\nJob type:         Unbounded\nOperation:        Outgoing migration\nTime elapsed:     168286974    ms\nData processed:   26.106 TiB\nData remaining:   34.383 MiB\nData total:       10.586 TiB\nMemory processed: 26.106 TiB\nMemory remaining: 34.383 MiB\nMemory total:     10.586 TiB\n\u003Cspan class=\"strong strong\">\u003Cstrong>Memory bandwidth: 29.056 MiB/s\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>Dirty rate: 17225 pages/s\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>Page size: 4096 bytes\u003C/strong>\u003C/span>\u003C/pre>\u003Cp>\n\t\t\t\t\tIn this output, the multiplication of \u003Ccode class=\"literal\">Dirty rate\u003C/code> and \u003Ccode class=\"literal\">Page size\u003C/code> is greater than \u003Ccode class=\"literal\">Memory bandwidth\u003C/code>. This means that the VM is generating dirty memory pages faster than the network can migrate them. As a consequence, the state of the VM on the destination host cannot converge with the state of the VM on the source host, which prevents the migration from completing.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Fix\u003C/strong>\u003C/span>\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tTo improve the chances that a stalled live migration finishes successfully, you can do any of the following:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tReduce the workload of the VM, especially memory updates.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tTo do this, stop or cancel non-essential processes in the guest operating system of the source VM.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIncrease the downtime allowed for the live migration:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tDisplay the current maximum downtime at the end of a live migration for the VM that is being migrated:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh migrate-getmaxdowntime \u003Cspan class=\"emphasis\">\u003Cem>vm-name\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tSet a higher maximum downtime:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh migrate-setmaxdowntime \u003Cspan class=\"emphasis\">\u003Cem>vm-name\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>downtime-in-miliseconds\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThe higher you set the maximum downtime, the more likely it will be for the migration to complete.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tSwitch the live migration to \u003Cspan class=\"emphasis\">\u003Cem>post-copy\u003C/em>\u003C/span> mode.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh migrate-start-postcopy \u003Cspan class=\"emphasis\">\u003Cem>vm-name\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThis ensures that the memory pages of the VM can converge on the destination host, and that the migration can complete.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tHowever, when post-copy mode is active, the VM might slow down significantly, due to remote page requests from the destination host to the source host. In addition, if the network connection between the source host and the destination host stops working during post-copy migration, some of the VM processes may halt due to missing memory pages.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tTherefore, do not use post-copy migration if the VM availability is critical or if the migration network is unstable.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIf your workload allows it, suspend the VM and let the migration finish as a \u003Cspan class=\"emphasis\">\u003Cem>non-live\u003C/em>\u003C/span> migration. This increases the downtime of the VM, but in most cases ensures that the migration completes successfully.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Prevention\u003C/strong>\u003C/span>\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tThe probability of successfully completing a live migration of a VM depends on the following:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe workload of the VM during the migration\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tBefore starting the migration, stop or cancel non-essential processes in the guest operating system of the VM.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe network bandwidth that the host can use for migration\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tFor optimal results of a live migration, the bandwidth of the network used for the migration must be significantly higher than the dirty page generation of the VM. For instructions on obtaining the VM dirty page generation rate, see the Prerequisites in \u003Ca class=\"link\" href=\"#migrating-a-virtual-machine-using-the-cli_migrating-virtual-machines\" title=\"12.6. Migrating a virtual machine by using the command-line interface\">Migrating a virtual machine by using the command-line interface\u003C/a>.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tBoth the source host and the destination host must have a dedicated network interface controller (NIC) for the migration. For live migrating a VM with more than 1 TB of memory, Red Hat recommends a NIC with the speed of 25 Gb/s or more.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tYou can also specify the network bandwidth assigned to the live migration by using the \u003Ccode class=\"literal\">--bandwidth\u003C/code> option when initiating the migration. For migrating very large VMs, assign as much bandwidth as viable for your deployment.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe mode of live migration\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tThe default \u003Cspan class=\"emphasis\">\u003Cem>pre-copy\u003C/em>\u003C/span> migration mode copies memory pages repeatedly if they become dirty.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>Post-copy\u003C/em>\u003C/span> migration copies memory pages only once.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tTo enable your live migration to switch to post-copy mode if the migration stalls, use the \u003Ccode class=\"literal\">--postcopy\u003C/code> option with \u003Ccode class=\"literal\">virsh migrate\u003C/code> when starting the migration.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe downtime specified for the deployment\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tYou can adjust this during the migration by using \u003Ccode class=\"literal\">virsh migrate-setmaxdowntime\u003C/code> as described previously.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"supported-hosts-for-virtual-machine-migration_migrating-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">12.10. Supported hosts for virtual machine migration\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tFor the virtual machine (VM) migration to work properly and be supported by Red Hat, the source and destination hosts must be specific RHEL versions and machine types. The following table shows supported VM migration paths.\n\t\t\t\u003C/p>\u003Crh-table id=\"idm140237789923904\">\u003Ctable class=\"gt-4-cols lt-7-rows\">\u003Ccaption>Table 12.2. Live migration compatibility\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 25%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 25%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 25%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 25%; \" class=\"col_4\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237786649728\" scope=\"col\">Migration method\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237786648640\" scope=\"col\">Release type\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237786647552\" scope=\"col\">Future version example\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237786646464\" scope=\"col\">Support status\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237786649728\"> \u003Cp>\n\t\t\t\t\t\t\t\tForward\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237786648640\"> \u003Cp>\n\t\t\t\t\t\t\t\tMinor release\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237786647552\"> \u003Cp>\n\t\t\t\t\t\t\t\t9.0.1 → 9.1\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237786646464\"> \u003Cp>\n\t\t\t\t\t\t\t\tOn supported RHEL 9 systems: machine type \u003Cspan class=\"strong strong\">\u003Cstrong>q35\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237786649728\"> \u003Cp>\n\t\t\t\t\t\t\t\tBackward\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237786648640\"> \u003Cp>\n\t\t\t\t\t\t\t\tMinor release\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237786647552\"> \u003Cp>\n\t\t\t\t\t\t\t\t9.1 → 9.0.1\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237786646464\"> \u003Cp>\n\t\t\t\t\t\t\t\tOn supported RHEL 9 systems: machine type \u003Cspan class=\"strong strong\">\u003Cstrong>q35\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tSupport level is different for other virtualization solutions provided by Red Hat, including RHOSP and OpenShift Virtualization.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"creating-virtual-machine-snapshots_configuring-and-managing-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 13. Saving and restoring virtual machine state by using snapshots\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tTo save the current state of a virtual machine (VM), you can create a \u003Cspan class=\"emphasis\">\u003Cem>snapshot\u003C/em>\u003C/span> of the VM. Afterwards, you can revert to the snapshot to return the VM to the saved state.\n\t\t\u003C/p>\u003Cp>\n\t\t\tA VM snapshot contains the disk image of the VM. If you create a snapshot from a running VM (also known as a \u003Cspan class=\"emphasis\">\u003Cem>live snapshot\u003C/em>\u003C/span>), the snapshot also contains the memory state of the VM, which includes running processes and applications.\n\t\t\u003C/p>\u003Cp>\n\t\t\tCreating snapshots can be useful, for example, for the following tasks:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tSaving a clean state of the guest operating system\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tEnsuring that you have a restore point before performing a potentially destructive operation on the VM\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"support-limitations-for-virtual-machine-snapshots_creating-virtual-machine-snapshots\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">13.1. Support limitations for virtual machine snapshots\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tRed Hat supports the snapshot functionality for virtual machines (VMs) on RHEL only when you use \u003Cspan class=\"strong strong\">\u003Cstrong>external\u003C/strong>\u003C/span> snapshots. Currently, external snapshots are created on RHEL only when all of the following requirements are met:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYour host is using RHEL 9.4 or later.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe VM is using file-based storage.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou create the VM snapshot only in one of the following scenarios:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe VM is shut-down.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIf the VM is running, you use the \u003Ccode class=\"literal\">--disk-only --quiesce\u003C/code> options or the \u003Ccode class=\"literal\">--live --memspec\u003C/code> options.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tMost other configurations create \u003Cspan class=\"strong strong\">\u003Cstrong>internal\u003C/strong>\u003C/span> snapshots, which are deprecated in RHEL 9. Internal snapshots might work for your use case, but Red Hat does not provide full testing and support for them.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tDo not use internal snapshots in production environments.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tTo ensure that a snapshot is supported, display the XML configuration of the snapshot and check the snapshot type and storage:\n\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh snapshot-dumpxml \u003Cspan class=\"emphasis\">\u003Cem>&lt;vm-name&gt;\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>&lt;snapshot-name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tExample output of a supported snapshot:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;domainsnapshot&gt;\n  &lt;name&gt;sample-snapshot-name-1&lt;name&gt;\n  &lt;state&gt;shutoff&lt;/state&gt;\n  &lt;creationTime&gt;1706658764&lt;/creationTime&gt;\n  &lt;memory snapshot='\u003Cspan class=\"strong strong\">\u003Cstrong>no\u003C/strong>\u003C/span>'/&gt;\n  &lt;disks&gt;\n    &lt;disk name='vda' snapshot='\u003Cspan class=\"strong strong\">\u003Cstrong>external\u003C/strong>\u003C/span>' type='\u003Cspan class=\"strong strong\">\u003Cstrong>file\u003C/strong>\u003C/span>'&gt;\n      &lt;driver type='qcow2'/&gt;\n      &lt;source file='/var/lib/libvirt/images/vm-name.sample-snapshot-name-1'/&gt;\n    &lt;/disk&gt;\n  &lt;/disks&gt;\n  &lt;domain type='kvm'&gt;\n  [...]\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tExample output of an unsupported snapshot:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;domainsnapshot&gt;\n  &lt;name&gt;sample-snapshot-name-2&lt;/name&gt;\n  &lt;state&gt;running&lt;/state&gt;\n  &lt;creationTime&gt;1653396424&lt;/creationTime&gt;\n  &lt;memory snapshot=\u003Cspan class=\"strong strong\">\u003Cstrong>'internal'\u003C/strong>\u003C/span>/&gt;\n  &lt;disks&gt;\n    &lt;disk name='vda' snapshot='\u003Cspan class=\"strong strong\">\u003Cstrong>internal\u003C/strong>\u003C/span>'/&gt;\n    &lt;disk name='sda' snapshot='no'/&gt;\n  &lt;/disks&gt;\n  &lt;domain type='kvm'&gt;\n  [...]\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-virtual-machine-snapshots-entering-metadata-on-the-command-line_creating-virtual-machine-snapshots\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">13.2. Creating virtual machine snapshots by using the command-line interface\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tTo save the state of a virtual machine (VM) in a snapshot, you can use the \u003Ccode class=\"literal command\">virsh snapshot-create-as\u003C/code> command.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYour host is using RHEL 9.4 or later.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe VM uses file-based storage. To check whether this is the case, use the following command and ensure that for the \u003Ccode class=\"literal\">disk\u003C/code> device, it displays \u003Ccode class=\"literal\">disk type\u003C/code> as \u003Ccode class=\"literal\">file\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dumpxml \u003Cspan class=\"emphasis\">\u003Cem>&lt;vm-name&gt;\u003C/em>\u003C/span> | grep \"disk type\"\u003C/strong>\u003C/span>\n    &lt;disk type='\u003Cspan class=\"strong strong\">\u003Cstrong>file\u003C/strong>\u003C/span>' device='disk'&gt;\n    &lt;disk type='file' device='cdrom'&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you want to create a VM snapshot that includes the memory of a running VM, you must have sufficient disk space to store the memory of the VM.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe minimum recommended space for saving the memory of a VM is equal to the VM’s assigned RAM. For example, saving the memory of a VM with 32 GB RAM requires up to 32 GB of disk space.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIf the VM is under heavy I/O load, significant additional disk space might be required.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIf the VM has assigned VFIO passthrough devices, additional disk space might be required.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf a snapshot is created without pausing the VM, additional disk space might be required.\n\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tRed Hat recommends not saving the memory of a running VMs that is under very high workload or that uses VFIO passthrough devices. Saving the memory of such VMs might fill up the host disk and degrade the system. Instead, consider creating snapshots without memory for such VMs.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\tIn addition, note that not all VFIO devices are capable of creating snapshot with memory. Currently, creating a snapshot with memory works correctly only if the attached VFIO device is a Mellanox VF with the migration capability enabled.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo create a VM snapshot with the required parameters, use the \u003Ccode class=\"literal\">virsh snapshot-create-as\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh snapshot-create-as \u003Cspan class=\"emphasis\">\u003Cem>&lt;vm-name&gt;\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>&lt;snapshot-name&gt;\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>&lt;optional-description&gt;\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>&lt;additional-parameters&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo create a snapshot of a shut-down VM, use the \u003Ccode class=\"literal\">--disk-only\u003C/code> parameter. For example, the following command creates \u003Ccode class=\"literal\">Snapshot1\u003C/code> from the current disk-state of the shut-down \u003Ccode class=\"literal\">Testguest1\u003C/code> VM:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh snapshot-create-as Testguest1 Snapshot1 --disk-only\u003C/strong>\u003C/span>\nDomain snapshot Snapshot1 created.\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo create a snapshot that saves the disk-state of a running VM but not its memory, use the \u003Ccode class=\"literal\">--disk-only --quiesce\u003C/code> parameters. For example, the following command creates \u003Ccode class=\"literal\">Snapshot2\u003C/code> from the current disk state of the running \u003Ccode class=\"literal\">Testguest2\u003C/code> VM, with the description \u003Ccode class=\"literal\">clean system install\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh snapshot-create-as Testguest2 Snapshot2 \"clean system install\" --disk-only --quiesce\u003C/strong>\u003C/span>\nDomain snapshot Snapshot2 created.\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo create a snapshot that pauses a running VM and saves its disk-state and memory, use the \u003Ccode class=\"literal\">--memspec\u003C/code> parameter. For example, the following command pauses the \u003Ccode class=\"literal\">Testguest3\u003C/code> VM and creates \u003Ccode class=\"literal\">Snapshot3\u003C/code> from the current disk and memory state of the VM. The VM memory is saved in the \u003Ccode class=\"literal\">/var/lib/libvirt/images/saved_memory.img\u003C/code> file. When the snapshot is complete, the VM automatically resumes operation.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh snapshot-create-as Testguest3 Snapshot3 --memspec /var/lib/libvirt/images/saved_memory.img\u003C/strong>\u003C/span>\nDomain snapshot Snapshot3 created.\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tPausing the VM during the snapshot process creates downtime, but might work more reliably than creating a live snapshot of a running VM (by using the \u003Ccode class=\"literal\">--live\u003C/code> option), especially for VMs under a heavy load.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo create a snapshot that saves the disk-state of a running VM as well as its live memory, use the \u003Ccode class=\"literal\">--live --memspec\u003C/code> parameters. For example, the following command creates \u003Ccode class=\"literal\">Snapshot4\u003C/code> from the current disk and memory state of the running \u003Ccode class=\"literal\">Testguest4\u003C/code> VM, and saves the memory state in the \u003Ccode class=\"literal\">/var/lib/libvirt/images/saved_memory2.img\u003C/code> file.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh snapshot-create-as Testguest4 Snapshot4 --live --memspec /var/lib/libvirt/images/saved_memory2.img\u003C/strong>\u003C/span>\nDomain snapshot Snapshot4 created.\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tSaving the memory of a VM in a snapshot saves the state of the running processes in the guest operating system of the VM. However, when you revert to such a snapshot, the processes might fail due to a variety of factors, such as loss of network connectivity or unsynchronized system time.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tList the snapshots associated with the specified VM:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh snapshot-list \u003Cspan class=\"emphasis\">\u003Cem>&lt;Testguest1&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n\n Name                    Creation Time               State\n--------------------------------------------------------------\nSnapshot1               2024-01-30 18:34:58 +0100   shutoff\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the snapshot has been created as \u003Cspan class=\"emphasis\">\u003Cem>external\u003C/em>\u003C/span>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh snapshot-dumpxml \u003Cspan class=\"emphasis\">\u003Cem>&lt;Testguest1&gt;\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>&lt;Snapshot1&gt;\u003C/em>\u003C/span> | grep external\u003C/strong>\u003C/span>\n\n  &lt;disk name='vda' snapshot='\u003Cspan class=\"strong strong\">\u003Cstrong>external\u003C/strong>\u003C/span>' type='\u003Cspan class=\"strong strong\">\u003Cstrong>file\u003C/strong>\u003C/span>'&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the output of this command includes \u003Ccode class=\"literal\">snapshot='external'\u003C/code>, the snapshot is external and therefore fully supported by Red Hat.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Next steps\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#reverting-to-a-virtual-machine-snapshot-by-using-the-command-line-interface_creating-virtual-machine-snapshots\" title=\"13.4. Reverting to a virtual machine snapshot by using the command-line interface\">Reverting to a VM snapshot by using the CLI\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#reverting-to-a-virtual-machine-snapshot-by-using-the-web-console_creating-virtual-machine-snapshots\" title=\"13.5. Reverting to a virtual machine snapshot by using the web console\">Reverting to a VM snapshot by using the web console\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://libvirt.org/formatsnapshot.html\">Upstream libvirt information on snapshot metadata\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">virsh\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-virtual-machine-snapshots-by-using-the-web-console_creating-virtual-machine-snapshots\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">13.3. Creating virtual machine snapshots by using the web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo save the state of a virtual machine (VM) in a snapshot, you can use the RHEL web console.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYour host is using RHEL 9.4 or later.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe VM uses file-based storage. To ensure that this is the case, perform the following steps:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Virtual machines\u003C/strong>\u003C/span> interface of the web console, click the VM of which you want to create a snapshot.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Disks\u003C/strong>\u003C/span> pane of the management overview, check the \u003Cspan class=\"strong strong\">\u003Cstrong>Source\u003C/strong>\u003C/span> column of the listed devices. In all devices that list a source, this source must be \u003Cspan class=\"strong strong\">\u003Cstrong>File\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Virtual machines\u003C/strong>\u003C/span> interface of the web console, click the VM of which you want to create a snapshot.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA management overview of the VM opens.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Snapshots\u003C/strong>\u003C/span> pane of the management overview, click the \u003Ccode class=\"literal\">Create snapshot\u003C/code> button.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnter a name for the snapshot, and optionally a description.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Ccode class=\"literal\">Create\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo ensure that creating the snapshot has succeeded, check that the snapshot is now listed in the \u003Cspan class=\"strong strong\">\u003Cstrong>Snapshots\u003C/strong>\u003C/span> pane of the VM.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the snapshot has been created as \u003Cspan class=\"emphasis\">\u003Cem>external\u003C/em>\u003C/span>. To do so, use the following command in the command-line interface of the host:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh snapshot-dumpxml \u003Cspan class=\"emphasis\">\u003Cem>&lt;Testguest1&gt;\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>&lt;Snapshot1&gt;\u003C/em>\u003C/span> | grep external\u003C/strong>\u003C/span>\n\n  &lt;disk name='vda' snapshot='\u003Cspan class=\"strong strong\">\u003Cstrong>external\u003C/strong>\u003C/span>' type='\u003Cspan class=\"strong strong\">\u003Cstrong>file\u003C/strong>\u003C/span>'&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the output of this command includes \u003Ccode class=\"literal\">snapshot='external'\u003C/code>, the snapshot is external and therefore supported by Red Hat.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Next steps\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#reverting-to-a-virtual-machine-snapshot-by-using-the-web-console_creating-virtual-machine-snapshots\" title=\"13.5. Reverting to a virtual machine snapshot by using the web console\">Reverting to a VM snapshot by using the web console\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#reverting-to-a-virtual-machine-snapshot-by-using-the-command-line-interface_creating-virtual-machine-snapshots\" title=\"13.4. Reverting to a virtual machine snapshot by using the command-line interface\">Reverting to a VM snapshot by using the command-line interface\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"reverting-to-a-virtual-machine-snapshot-by-using-the-command-line-interface_creating-virtual-machine-snapshots\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">13.4. Reverting to a virtual machine snapshot by using the command-line interface\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo return a virtual machine (VM) to the state saved in a snapshot, you can use the command-line-interface (CLI).\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA snapshot of the VM is available, which you have previously created \u003Ca class=\"link\" href=\"#creating-virtual-machine-snapshots-by-using-the-web-console_creating-virtual-machine-snapshots\" title=\"13.3. Creating virtual machine snapshots by using the web console\">in the web console\u003C/a> or by \u003Ca class=\"link\" href=\"#creating-virtual-machine-snapshots-entering-metadata-on-the-command-line_creating-virtual-machine-snapshots\" title=\"13.2. Creating virtual machine snapshots by using the command-line interface\">using the command-line interface\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOptional: You have created a snapshot of the current state of the VM. If you revert to a previous snapshot without saving the current state, changes performed on the VM since the last snapshot will be lost.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virsh snapshot-revert\u003C/code> utility and specify the name of the VM and the name of the snapshot to which you want to revert. For example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh snapshot-revert Testguest2 clean-install\u003C/strong>\u003C/span>\nDomain snapshot clean-install reverted\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the currently active snapshot for the reverted VM:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh snapshot-current Testguest2 --name\u003C/strong>\u003C/span>\nclean-install\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"reverting-to-a-virtual-machine-snapshot-by-using-the-web-console_creating-virtual-machine-snapshots\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">13.5. Reverting to a virtual machine snapshot by using the web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo return a virtual machine (VM) to the state saved in a snapshot, you can use the RHEL web console.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA snapshot of the VM is available, which you have previously created \u003Ca class=\"link\" href=\"#creating-virtual-machine-snapshots-by-using-the-web-console_creating-virtual-machine-snapshots\" title=\"13.3. Creating virtual machine snapshots by using the web console\">in the web console\u003C/a> or by \u003Ca class=\"link\" href=\"#creating-virtual-machine-snapshots-entering-metadata-on-the-command-line_creating-virtual-machine-snapshots\" title=\"13.2. Creating virtual machine snapshots by using the command-line interface\">using the command-line interface\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOptional: You have created a snapshot of the current state of the VM. If you revert to a previous snapshot without saving the current state, changes performed on the VM since the last snapshot will be lost.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Virtual machines\u003C/strong>\u003C/span> interface of the web console, click the VM whose state you want to revert.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA management overview of the VM opens.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Snapshots\u003C/strong>\u003C/span> pane of the management overview, click the \u003Ccode class=\"literal\">Revert\u003C/code> button next to the snapshot to which you want to revert.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWait until the revert operation finishes. Depending on the size of the snapshot and how different it is from the current state, this might take up to several minutes.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Snapshots\u003C/strong>\u003C/span> pane, if a green check symbol now displays on the left side of the selected snapshot, you have successfully reverted to it.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"deleting-virtual-machine-snapshots-by-using-the-command-line-interface_creating-virtual-machine-snapshots\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">13.6. Deleting virtual machine snapshots by using the command-line interface\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tWhen a virtual machine (VM) snapshot is no longer useful for you, you can delete it in the command-line interface to free up the disk space that it uses.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: A child snapshot exists for the snapshot you want to delete.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA child snapshot is created automatically when you have an active snapshot and create a new snapshot. If you delete a snapshot that does not have any children, you will lose any changes saved in the snapshot after it was created from its parent snapshot.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo view the parent-child structure of snapshots in a VM, use the \u003Ccode class=\"literal\">virsh snapshot-list --tree\u003C/code> command. The following example shows \u003Ccode class=\"literal\">Latest-snapshot\u003C/code> as a child of \u003Ccode class=\"literal\">Redundant-snapshot\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh snapshot-list --tree \u003Cspan class=\"emphasis\">\u003Cem>&lt;vm-name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n\nClean-install-snapshot\n  |\n  +- Redundant-snapshot\n      |\n      +- Latest-snapshot\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virsh snapshot-delete\u003C/code> command to delete the snapshot. For example, the following command deletes \u003Ccode class=\"literal\">Redundant-snapshot\u003C/code> from the \u003Ccode class=\"literal\">Testguest1\u003C/code> VM:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh snapshot-delete Testguest1 Redundant-snapshot\u003C/strong>\u003C/span>\nDomain snapshot Redundant-snapshot deleted\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo ensure that the snapshot that you deleted is no longer present, display the existing snapshots of the impacted VM and their parent-child structure:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh snapshot-list --tree \u003Cspan class=\"emphasis\">\u003Cem>&lt;Testguest1&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n\nClean-install-snapshot\n  |\n  +- Latest-snapshot\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn this example, \u003Ccode class=\"literal\">Redundant-snapshot\u003C/code> has been deleted and \u003Ccode class=\"literal\">Latest-snapshot\u003C/code> has become the child of \u003Ccode class=\"literal\">Clean-install-snapshot\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"deleting-virtual-machine-snapshots-by-using-the-web-console_creating-virtual-machine-snapshots\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">13.7. Deleting virtual machine snapshots by using the web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tWhen a virtual machine (VM) snapshot is no longer useful for you, you can delete it in the web console to free up the disk space that it uses.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: A child snapshot exists for the snapshot you want to delete.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA child snapshot is created automatically when you have an active snapshot and create a new snapshot. If you delete a snapshot that does not have any children, you will lose any changes saved in the snapshot after it was created from its parent snapshot.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo check that the snapshot has a child, confirm that the snapshot is listed in the \u003Cspan class=\"strong strong\">\u003Cstrong>Parent snapshot\u003C/strong>\u003C/span> column of the \u003Cspan class=\"strong strong\">\u003Cstrong>Snapshots\u003C/strong>\u003C/span> in the web console overview of the VM.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Virtual machines\u003C/strong>\u003C/span> interface of the web console, click the VM whose snapshot you want to delete.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA management overview of the VM opens.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Snapshots\u003C/strong>\u003C/span> pane of the management overview, click the \u003Ccode class=\"literal\">Delete\u003C/code> button next to the snapshot that you want to delete.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWait until the delete operation finishes. Depending on the size of the snapshot, this might take up to several minutes.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf the snapshot no longer appears in the \u003Cspan class=\"strong strong\">\u003Cstrong>Snapshots\u003C/strong>\u003C/span> pane, it has been deleted successfully.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"managing-virtual-devices_configuring-and-managing-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 14. Managing virtual devices\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tOne of the most effective ways to manage the functionality, features, and performance of a virtual machine (VM) is to adjust its \u003Cspan class=\"emphasis\">\u003Cem>virtual devices\u003C/em>\u003C/span>.\n\t\t\u003C/p>\u003Cp>\n\t\t\tThe following sections provide a \u003Ca class=\"link\" href=\"#how-virtual-devices-work_managing-virtual-devices\" title=\"14.1. How virtual devices work\">general overview\u003C/a> of what virtual devices are, and instructions on how to manage them using the \u003Ca class=\"link\" href=\"#assembly_managing-virtual-devices-using-the-cli_managing-virtual-devices\" title=\"14.3. Managing devices attached to virtual machines by using the CLI\">CLI\u003C/a> or the \u003Ca class=\"link\" href=\"#assembly_managing-virtual-devices-using-the-web-console_managing-virtual-devices\" title=\"14.4. Managing host devices by using the web console\">web console\u003C/a>.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"how-virtual-devices-work_managing-virtual-devices\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.1. How virtual devices work\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tJust like physical machines, virtual machines (VMs) require specialized devices to provide functions to the system, such as processing power, memory, storage, networking, or graphics. Physical systems usually use hardware devices for these purposes. However, because VMs work as software implements, they need to use software abstractions of such devices instead, referred to as \u003Cspan class=\"emphasis\">\u003Cem>virtual devices\u003C/em>\u003C/span>.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>The basics\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tVirtual devices attached to a VM can be configured when \u003Ca class=\"link\" href=\"#assembly_creating-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 3. Creating virtual machines\">creating the VM\u003C/a>, and can also be managed on an existing VM. Generally, virtual devices can be attached or detached from a VM only when the VM is shut off, but some can be added or removed when the VM is running. This feature is referred to as device \u003Cspan class=\"emphasis\">\u003Cem>hot plug\u003C/em>\u003C/span> and \u003Cspan class=\"emphasis\">\u003Cem>hot unplug\u003C/em>\u003C/span>.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tWhen creating a new VM, \u003Ccode class=\"literal\">libvirt\u003C/code> automatically creates and configures a default set of essential virtual devices, unless specified otherwise by the user. These are based on the host system architecture and machine type, and usually include:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tthe CPU\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tmemory\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\ta keyboard\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\ta network interface controller (NIC)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tvarious device controllers\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\ta video card\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\ta sound card\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tTo manage virtual devices after the VM is created, use the command-line interface (CLI). However, to manage virtual storage devices and NICs, you can also use the RHEL 9 web console.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Performance or flexibility\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tFor some types of devices, RHEL 9 supports multiple implementations, often with a trade-off between performance and flexibility.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tFor example, the physical storage used for virtual disks can be represented by files in various formats, such as \u003Ccode class=\"literal\">qcow2\u003C/code> or \u003Ccode class=\"literal\">raw\u003C/code>, and presented to the VM by using a variety of controllers:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tan emulated controller\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">virtio-scsi\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">virtio-blk\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tAn emulated controller is slower than a \u003Ccode class=\"literal\">virtio\u003C/code> controller, because \u003Ccode class=\"literal\">virtio\u003C/code> devices are designed specifically for virtualization purposes. On the other hand, emulated controllers make it possible to run operating systems that have no drivers for \u003Ccode class=\"literal\">virtio\u003C/code> devices. Similarly, \u003Ccode class=\"literal\">virtio-scsi\u003C/code> offers a more complete support for SCSI commands, and makes it possible to attach a larger number of disks to the VM. Finally, \u003Ccode class=\"literal\">virtio-blk\u003C/code> provides better performance than both \u003Ccode class=\"literal\">virtio-scsi\u003C/code> and emulated controllers, but a more limited range of use-cases. For example, attaching a physical disk as a LUN device to a VM is not possible when using \u003Ccode class=\"literal\">virtio-blk\u003C/code>.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor more information about types of virtual devices, see \u003Ca class=\"link\" href=\"#types-of-virtual-devices_managing-virtual-devices\" title=\"14.2. Types of virtual devices\">Types of virtual devices\u003C/a>.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"types-of-virtual-devices_managing-virtual-devices\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.2. Types of virtual devices\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tVirtualization in RHEL 9 can present several distinct types of virtual devices that you can attach to virtual machines (VMs):\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Emulated devices\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEmulated devices are software implementations of widely used physical devices. Drivers designed for physical devices are also compatible with emulated devices. Therefore, emulated devices can be used very flexibly.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tHowever, since they need to faithfully emulate a particular type of hardware, emulated devices may suffer a significant performance loss compared with the corresponding physical devices or more optimized virtual devices.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe following types of emulated devices are supported:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tVirtual CPUs (vCPUs), with a large choice of CPU models available. The performance impact of emulation depends significantly on the differences between the host CPU and the emulated vCPU.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tEmulated system components, such as PCI bus controllers.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tEmulated storage controllers, such as SATA, SCSI or even IDE.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tEmulated sound devices, such as ICH9, ICH6 or AC97.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tEmulated graphics cards, such as VGA cards.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tEmulated network devices, such as rtl8139.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Paravirtualized devices\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tParavirtualization provides a fast and efficient method for exposing virtual devices to VMs. Paravirtualized devices expose interfaces that are designed specifically for use in VMs, and thus significantly increase device performance. RHEL 9 provides paravirtualized devices to VMs by using the \u003Cspan class=\"emphasis\">\u003Cem>virtio\u003C/em>\u003C/span> API as a layer between the hypervisor and the VM. The drawback of this approach is that it requires a specific device driver in the guest operating system.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIt is recommended to use paravirtualized devices instead of emulated devices for VM whenever possible, notably if they are running I/O intensive applications. Paravirtualized devices decrease I/O latency and increase I/O throughput, in some cases bringing them very close to bare-metal performance. Other paravirtualized devices also add functionality to VMs that is not otherwise available.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe following types of paravirtualized devices are supported:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tThe paravirtualized network device (\u003Ccode class=\"literal\">virtio-net\u003C/code>).\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tParavirtualized storage controllers:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">virtio-blk\u003C/code> - provides block device emulation.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">virtio-scsi\u003C/code> - provides more complete SCSI emulation.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tThe paravirtualized clock.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tThe paravirtualized serial device (\u003Ccode class=\"literal\">virtio-serial\u003C/code>).\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tThe balloon device (\u003Ccode class=\"literal\">virtio-balloon\u003C/code>), used to dynamically distribute memory between a VM and its host.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tThe paravirtualized random number generator (\u003Ccode class=\"literal\">virtio-rng\u003C/code>).\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Physically shared devices\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tCertain hardware platforms enable VMs to directly access various hardware devices and components. This process is known as \u003Cspan class=\"emphasis\">\u003Cem>device assignment\u003C/em>\u003C/span> or \u003Cspan class=\"emphasis\">\u003Cem>passthrough\u003C/em>\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tWhen attached in this way, some aspects of the physical device are directly available to the VM as they would be to a physical machine. This provides superior performance for the device when used in the VM. However, devices physically attached to a VM become unavailable to the host, and also cannot be migrated.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tNevertheless, some devices can be \u003Cspan class=\"emphasis\">\u003Cem>shared\u003C/em>\u003C/span> across multiple VMs. For example, a single physical device can in certain cases provide multiple \u003Cspan class=\"emphasis\">\u003Cem>mediated devices\u003C/em>\u003C/span>, which can then be assigned to distinct VMs.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe following types of passthrough devices are supported:\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tUSB, PCI, and SCSI passthrough - expose common industry standard buses directly to VMs in order to make their specific features available to guest software.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSingle-root I/O virtualization (SR-IOV) - a specification that enables hardware-enforced isolation of PCI Express resources. This makes it safe and efficient to partition a single physical PCI resource into virtual PCI functions. It is commonly used for network interface cards (NICs).\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tN_Port ID virtualization (NPIV) - a Fibre Channel technology to share a single physical host bus adapter (HBA) with multiple virtual ports.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tGPUs and vGPUs - accelerators for specific kinds of graphic or compute workloads. Some GPUs can be attached directly to a VM, while certain types also offer the ability to create virtual GPUs (vGPUs) that share the underlying physical hardware.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tSome devices of these types might be unsupported or not compatible with RHEL. If you require assistance with setting up virtual devices, consult Red Hat support.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"assembly_managing-virtual-devices-using-the-cli_managing-virtual-devices\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.3. Managing devices attached to virtual machines by using the CLI\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo modify the functionality of your virtual machine (VM), you can manage the devices attached to your VM by using the command-line interface (CLI).\n\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"attaching-devices-to-virtual-machines_assembly_managing-virtual-devices-using-the-cli\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">14.3.1. Attaching devices to virtual machines\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tYou can add a specific functionality to your virtual machines (VMs) by attaching a new virtual device.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tThe following procedure creates and attaches virtual devices to your virtual machines (VMs) by using the command-line interface (CLI). Some devices can also be attached to VMs \u003Ca class=\"link\" href=\"#managing-virtual-machines-in-the-web-console_configuring-and-managing-virtualization\" title=\"Chapter 8. Managing virtual machines in the web console\">using the RHEL web console\u003C/a>.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tFor example, you can increase the storage capacity of a VM by attaching a new virtual disk device to it. This is also referred to as \u003Cspan class=\"strong strong\">\u003Cstrong>memory hot plug\u003C/strong>\u003C/span>.\n\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tRemoving a memory device from a VM, also known as \u003Cspan class=\"strong strong\">\u003Cstrong>memory hot unplug\u003C/strong>\u003C/span>, is not supported in RHEL 9, and Red Hat highly discourages its use.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tObtain the required options for the device you intend to attach to a VM. To see the available options for a specific device, use the \u003Ccode class=\"literal\">virt-xml --\u003Cspan class=\"emphasis\">\u003Cem>device\u003C/em>\u003C/span>=?\u003C/code> command. For example:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-xml --network=?\u003C/strong>\u003C/span>\n--network options:\n[...]\naddress.unit\nboot_order\nclearxml\ndriver_name\n[...]\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo attach a device to a VM, use the \u003Ccode class=\"literal\">virt-xml --add-device\u003C/code> command, including the definition of the device and the required options:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tFor example, the following command creates a 20GB \u003Cspan class=\"emphasis\">\u003Cem>newdisk\u003C/em>\u003C/span> qcow2 disk image in the \u003Ccode class=\"literal\">/var/lib/libvirt/images/\u003C/code> directory, and attaches it as a virtual disk to the running \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span> VM on the next start-up of the VM:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-xml testguest --add-device --disk /var/lib/libvirt/images/newdisk.qcow2,format=qcow2,size=20\u003C/strong>\u003C/span>\nDomain 'testguest' defined successfully.\nChanges will take effect after the domain is fully powered off.\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThe following attaches a USB flash drive, attached as device 004 on bus 002 on the host, to the \u003Cspan class=\"emphasis\">\u003Cem>testguest2\u003C/em>\u003C/span> VM while the VM is running:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-xml testguest2 --add-device --update --hostdev 002.004\u003C/strong>\u003C/span>\nDevice hotplug successful.\nDomain 'testguest2' defined successfully.\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThe bus-device combination for defining the USB can be obtained by using the \u003Ccode class=\"literal\">lsusb\u003C/code> command.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tTo verify the device has been added, do any of the following:\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virsh dumpxml\u003C/code> command and see if the device’s XML definition has been added to the \u003Ccode class=\"literal\">&lt;devices&gt;\u003C/code> section in the VM’s XML configuration.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, the following output shows the configuration of the \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span> VM and confirms that the 002.004 USB flash disk device has been added.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dumpxml testguest\u003C/strong>\u003C/span>\n[...]\n&lt;hostdev mode='subsystem' type='usb' managed='yes'&gt;\n  &lt;source&gt;\n    &lt;vendor id='0x4146'/&gt;\n    &lt;product id='0x902e'/&gt;\n    &lt;address bus='2' device='4'/&gt;\n  &lt;/source&gt;\n  &lt;alias name='hostdev0'/&gt;\n  &lt;address type='usb' bus='0' port='3'/&gt;\n&lt;/hostdev&gt;\n[...]\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tRun the VM and test if the device is present and works properly.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">man virt-xml\u003C/code> command\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"modifying-devices-attached-to-virtual-machines_assembly_managing-virtual-devices-using-the-cli\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">14.3.2. Modifying devices attached to virtual machines\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tYou can change the functionality of your virtual machines (VMs) by editing a configuration of the attached virtual devices. For example, if you want to optimize the performance of your VMs, you can change their virtual CPU models to better match the CPUs of the hosts.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tThe following procedure provides general instructions for modifying virtual devices by using the command-line interface (CLI). Some devices attached to your VM, such as disks and NICs, can also be modified \u003Ca class=\"link\" href=\"#managing-virtual-machines-in-the-web-console_configuring-and-managing-virtualization\" title=\"Chapter 8. Managing virtual machines in the web console\">using the RHEL 9 web console\u003C/a>.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tObtain the required options for the device you intend to attach to a VM. To see the available options for a specific device, use the \u003Ccode class=\"literal\">virt-xml --\u003Cspan class=\"emphasis\">\u003Cem>device\u003C/em>\u003C/span>=?\u003C/code> command. For example:\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-xml --network=?\u003C/strong>\u003C/span>\n--network options:\n[...]\naddress.unit\nboot_order\nclearxml\ndriver_name\n[...]\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tOptional: Back up the XML configuration of your VM by using \u003Ccode class=\"literal\">virsh dumpxml \u003Cspan class=\"emphasis\">\u003Cem>vm-name\u003C/em>\u003C/span>\u003C/code> and sending the output to a file. For example, the following backs up the configuration of your \u003Cspan class=\"emphasis\">\u003Cem>testguest1\u003C/em>\u003C/span> VM as the \u003Ccode class=\"literal\">testguest1.xml\u003C/code> file:\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dumpxml testguest1 &gt; testguest1.xml\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>cat testguest1.xml\u003C/strong>\u003C/span>\n&lt;domain type='kvm' xmlns:qemu='http://libvirt.org/schemas/domain/qemu/1.0'&gt;\n  &lt;name&gt;testguest1&lt;/name&gt;\n  &lt;uuid&gt;ede29304-fe0c-4ca4-abcd-d246481acd18&lt;/uuid&gt;\n  [...]\n&lt;/domain&gt;\u003C/pre>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virt-xml --edit\u003C/code> command, including the definition of the device and the required options:\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, the following clears the \u003Cspan class=\"emphasis\">\u003Cem>&lt;cpu&gt;\u003C/em>\u003C/span> configuration of the shut-off \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span> VM and sets it to \u003Cspan class=\"emphasis\">\u003Cem>host-model\u003C/em>\u003C/span>:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-xml testguest --edit --cpu host-model,clearxml=yes\u003C/strong>\u003C/span>\nDomain 'testguest' defined successfully.\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tTo verify the device has been modified, do any of the following:\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tRun the VM and test if the device is present and reflects the modifications.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virsh dumpxml\u003C/code> command and see if the device’s XML definition has been modified in the VM’s XML configuration.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, the following output shows the configuration of the \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span> VM and confirms that the CPU mode has been configured as \u003Cspan class=\"emphasis\">\u003Cem>host-model\u003C/em>\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dumpxml testguest\u003C/strong>\u003C/span>\n[...]\n&lt;cpu mode='host-model' check='partial'&gt;\n  &lt;model fallback='allow'/&gt;\n&lt;/cpu&gt;\n[...]\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf modifying a device causes your VM to become unbootable, use the \u003Ccode class=\"literal\">virsh define\u003C/code> utility to restore the XML configuration by reloading the XML configuration file you backed up previously.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh define testguest.xml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tFor small changes to the XML configuration of your VM, you can use the \u003Ccode class=\"literal\">virsh edit\u003C/code> command - for example \u003Ccode class=\"literal\">virsh edit testguest\u003C/code>. However, do not use this method for more extensive changes, as it is more likely to break the configuration in ways that could prevent the VM from booting.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">man virt-xml\u003C/code> command\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"removing-devices-from-virtual-machines_assembly_managing-virtual-devices-using-the-cli\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">14.3.3. Removing devices from virtual machines\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tYou can change the functionality of your virtual machines (VMs) by removing a virtual device. For example, you can remove a virtual disk device from one of your VMs if it is no longer needed.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tThe following procedure demonstrates how to remove virtual devices from your virtual machines (VMs) by using the command-line interface (CLI). Some devices, such as disks or NICs, can also be removed from VMs \u003Ca class=\"link\" href=\"#managing-virtual-machines-in-the-web-console_configuring-and-managing-virtualization\" title=\"Chapter 8. Managing virtual machines in the web console\">using the RHEL 9 web console\u003C/a>.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tOptional: Back up the XML configuration of your VM by using \u003Ccode class=\"literal\">virsh dumpxml \u003Cspan class=\"emphasis\">\u003Cem>vm-name\u003C/em>\u003C/span>\u003C/code> and sending the output to a file. For example, the following backs up the configuration of your \u003Cspan class=\"emphasis\">\u003Cem>testguest1\u003C/em>\u003C/span> VM as the \u003Ccode class=\"literal\">testguest1.xml\u003C/code> file:\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dumpxml testguest1 &gt; testguest1.xml\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>cat testguest1.xml\u003C/strong>\u003C/span>\n&lt;domain type='kvm' xmlns:qemu='http://libvirt.org/schemas/domain/qemu/1.0'&gt;\n  &lt;name&gt;testguest1&lt;/name&gt;\n  &lt;uuid&gt;ede29304-fe0c-4ca4-abcd-d246481acd18&lt;/uuid&gt;\n  [...]\n&lt;/domain&gt;\u003C/pre>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virt-xml --remove-device\u003C/code> command, including a definition of the device. For example:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThe following removes the storage device marked as \u003Cspan class=\"emphasis\">\u003Cem>vdb\u003C/em>\u003C/span> from the running \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span> VM after it shuts down:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-xml testguest --remove-device --disk target=vdb\u003C/strong>\u003C/span>\nDomain 'testguest' defined successfully.\nChanges will take effect after the domain is fully powered off.\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThe following immediately removes a USB flash drive device from the running \u003Cspan class=\"emphasis\">\u003Cem>testguest2\u003C/em>\u003C/span> VM:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-xml testguest2 --remove-device --update --hostdev type=usb\u003C/strong>\u003C/span>\nDevice hotunplug successful.\nDomain 'testguest2' defined successfully.\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf removing a device causes your VM to become unbootable, use the \u003Ccode class=\"literal\">virsh define\u003C/code> utility to restore the XML configuration by reloading the XML configuration file you backed up previously.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh define testguest.xml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">man virt-xml\u003C/code> command\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"assembly_managing-virtual-devices-using-the-web-console_managing-virtual-devices\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.4. Managing host devices by using the web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo modify the functionality of your virtual machine (VM), you can manage the host devices attached to your VM by using the Red Hat Enterprise Linux 9 web console.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tHost devices are physical devices that are attached to the host system. Based on your requirements, you can enable your VMs to directly access these hardware devices and components.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can use the web console to:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_viewing-devices-attached-to-virtual-machines-using-the-web-console_assembly_managing-virtual-devices-using-the-web-console\" title=\"14.4.1. Viewing devices attached to virtual machines by using the web console\">View devices\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_attaching-devices-to-virtual-machines-using-the-web-console_assembly_managing-virtual-devices-using-the-web-console\" title=\"14.4.2. Attaching devices to virtual machines by using the web console\">Attach devices\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_removing-devices-from-virtual-machines-using-the-web-console_assembly_managing-virtual-devices-using-the-web-console\" title=\"14.4.3. Removing devices from virtual machines by using the web console\">Remove devices\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"proc_viewing-devices-attached-to-virtual-machines-using-the-web-console_assembly_managing-virtual-devices-using-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">14.4.1. Viewing devices attached to virtual machines by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tBefore adding or modifying the devices attached to your virtual machine (VM), you may want to view the devices that are already attached to your VM. The following procedure provides instructions for viewing such devices by using the web console.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, click the VM whose information you want to see.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA new page opens with detailed information about the VM.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tScroll to the \u003Cspan class=\"strong strong\">\u003Cstrong>Host devices\u003C/strong>\u003C/span> section.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/692a30076fe07c36ed009d34876ca3e3/virt-cockpit-host-devices.png\" alt=\"Page displaying the Host devices section of the virtual machine.\"/>\u003C/div>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#managing-virtual-devices_configuring-and-managing-virtualization\" title=\"Chapter 14. Managing virtual devices\">Managing virtual devices\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_attaching-devices-to-virtual-machines-using-the-web-console_assembly_managing-virtual-devices-using-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">14.4.2. Attaching devices to virtual machines by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tTo add specific functionalities to your virtual machine (VM), you can use the web console to attach host devices to the VM.\n\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tAttaching multiple host devices at the same time does not work. You can attach only one device at a time.\n\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\tFor more information, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/9.0_release_notes/known-issues#known-issue_virtualization\">RHEL 9 Known Issues.\u003C/a>\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf you are attaching PCI devices, ensure that the status of the \u003Ccode class=\"literal\">managed\u003C/code> attribute of the \u003Ccode class=\"literal\">hostdev\u003C/code> element is set to \u003Ccode class=\"literal\">yes\u003C/code>.\n\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tWhen attaching PCI devices to your VM, do not omit the \u003Ccode class=\"literal\">managed\u003C/code> attribute of the \u003Ccode class=\"literal\">hostdev\u003C/code> element, or set it to \u003Ccode class=\"literal\">no\u003C/code>. If you do so, PCI devices cannot automatically detach from the host when you pass them to the VM. They also cannot automatically reattach to the host when you turn off the VM.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\tAs a consequence, the host may become unresponsive or shut down unexpectedly.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou can find the status of the \u003Ccode class=\"literal\">managed\u003C/code> attribute in your VM’s XML configuration. The following example opens the XML configuration of the \u003Ccode class=\"literal\">example-VM-1\u003C/code> VM.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh edit \u003Cspan class=\"emphasis\">\u003Cem>example-VM-1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tBack up important data from the VM.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: Back up the XML configuration of your VM. For example, to back up the \u003Ccode class=\"literal\">example-VM-1\u003C/code> VM:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dumpxml \u003Cspan class=\"emphasis\">\u003Cem>example-VM-1\u003C/em>\u003C/span> &gt; \u003Cspan class=\"emphasis\">\u003Cem>example-VM-1\u003C/em>\u003C/span>.xml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">The web console VM plug-in is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, click the VM to which you want to attach a host device.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA new page opens with an \u003Cspan class=\"strong strong\">\u003Cstrong>Overview\u003C/strong>\u003C/span> section with basic information about the selected VM and a \u003Cspan class=\"strong strong\">\u003Cstrong>Console\u003C/strong>\u003C/span> section to access the VM’s graphical interface.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tScroll to \u003Cspan class=\"guimenu\">Host devices\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Host devices\u003C/strong>\u003C/span> section displays information about the devices attached to the VM as well as options to \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span> or \u003Cspan class=\"strong strong\">\u003Cstrong>Remove\u003C/strong>\u003C/span> devices.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/692a30076fe07c36ed009d34876ca3e3/virt-cockpit-host-devices.png\" alt=\"Image displaying the host devices section of the selected VM.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Add host device\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Add host device\u003C/strong>\u003C/span> dialog appears.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/c0205789c58fb59910acc03b2a23394f/virt-cockpit-host-add-device.png\" width=\"540\" alt=\"Image displaying the Add host device dialog box.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tSelect the device you wish to attach to the VM.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Add\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe selected device is attached to the VM.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tRun the VM and check if the device appears in the \u003Cspan class=\"strong strong\">\u003Cstrong>Host devices\u003C/strong>\u003C/span> section.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_removing-devices-from-virtual-machines-using-the-web-console_assembly_managing-virtual-devices-using-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">14.4.3. Removing devices from virtual machines by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tTo free up resources, modify the functionalities of your VM, or both, you can use the web console to modify the VM and remove host devices that are no longer required.\n\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tRemoving attached USB host devices by using the web console may fail because of incorrect correlation between the device and bus numbers of the USB device.\n\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\tFor more information, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/9.0_release_notes/known-issues#known-issue_virtualization\">RHEL 9 Known Issues.\u003C/a>\n\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\tAs a workaround, remove the &lt;hostdev&gt; part of the USB device, from the XML configuration of VM by using the \u003Cspan class=\"emphasis\">\u003Cem>virsh\u003C/em>\u003C/span> utility. The following example opens the XML configuration of the \u003Ccode class=\"literal\">example-VM-1\u003C/code> VM:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh edit \u003Cspan class=\"emphasis\">\u003Cem>&lt;example-VM-1&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">The web console VM plug-in is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: Back up the XML configuration of your VM by using \u003Ccode class=\"literal\">virsh dumpxml \u003Cspan class=\"emphasis\">\u003Cem>example-VM-1\u003C/em>\u003C/span>\u003C/code> and sending the output to a file. For example, the following backs up the configuration of your \u003Cspan class=\"emphasis\">\u003Cem>testguest1\u003C/em>\u003C/span> VM as the \u003Ccode class=\"literal\">testguest1.xml\u003C/code> file:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dumpxml testguest1 &gt; testguest1.xml\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>cat testguest1.xml\u003C/strong>\u003C/span>\n&lt;domain type='kvm' xmlns:qemu='http://libvirt.org/schemas/domain/qemu/1.0'&gt;\n  &lt;name&gt;testguest1&lt;/name&gt;\n  &lt;uuid&gt;ede29304-fe0c-4ca4-abcd-d246481acd18&lt;/uuid&gt;\n  [...]\n&lt;/domain&gt;\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, click the VM from which you want to remove a host device.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA new page opens with an \u003Cspan class=\"strong strong\">\u003Cstrong>Overview\u003C/strong>\u003C/span> section with basic information about the selected VM and a \u003Cspan class=\"strong strong\">\u003Cstrong>Console\u003C/strong>\u003C/span> section to access the VM’s graphical interface.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tScroll to \u003Cspan class=\"guimenu\">Host devices\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Host devices\u003C/strong>\u003C/span> section displays information about the devices attached to the VM as well as options to \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span> or \u003Cspan class=\"strong strong\">\u003Cstrong>Remove\u003C/strong>\u003C/span> devices.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/692a30076fe07c36ed009d34876ca3e3/virt-cockpit-host-devices.png\" alt=\"Image displaying the host dvices section of the selected VM.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick the \u003Cspan class=\"guibutton\">Remove\u003C/span> button next to the device you want to remove from the VM.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA remove device confirmation dialog appears.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/e489d026956bfd9f51f5a0c3816ea78f/virt-cockpit-host-remove-device.png\" alt=\"Image displaying the option to remove an attached virtual device.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Remove\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe device is removed from the VM.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf removing a host device causes your VM to become unbootable, use the \u003Ccode class=\"literal\">virsh define\u003C/code> utility to restore the XML configuration by reloading the XML configuration file you backed up previously.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh define testguest1.xml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"managing-virtual-usb-devices_managing-virtual-devices\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.5. Managing virtual USB devices\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tWhen using a virtual machine (VM), you can access and control a USB device, such as a flash drive or a web camera, that is attached to the host system. In this scenario, the host system passes control of the device to the VM. This is also known as a USB-passthrough.\n\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"attaching-usb-devices-to-virtual-machines_managing-virtual-usb-devices\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">14.5.1. Attaching USB devices to virtual machines\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tTo attach a USB device to a virtual machine (VM), you can include the USB device information in the XML configuration file of the VM.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tEnsure the device you want to pass through to the VM is attached to the host.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLocate the bus and device values of the USB that you want to attach to the VM.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, the following command displays a list of USB devices attached to the host. The device we will use in this example is attached on bus 001 as device 005.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lsusb\u003C/strong>\u003C/span>\n[...]\nBus 001 Device 003: ID 2567:0a2b Intel Corp.\nBus 001 Device 005: ID 0407:6252 Kingston River 2.0\n[...]\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virt-xml\u003C/code> utility along with the \u003Ccode class=\"literal\">--add-device\u003C/code> argument.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, the following command attaches a USB flash drive to the \u003Ccode class=\"literal\">example-VM-1\u003C/code> VM.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-xml \u003Cspan class=\"emphasis\">\u003Cem>example-VM-1\u003C/em>\u003C/span> --add-device --hostdev 001.005\u003C/strong>\u003C/span>\nDomain 'example-VM-1' defined successfully.\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tTo attach a USB device to a running VM, add the \u003Ccode class=\"literal\">--update\u003C/code> argument to the previous command.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tRun the VM and test if the device is present and works as expected.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virsh dumpxml\u003C/code> command to see if the device’s XML definition has been added to the &lt;devices&gt; section in the VM’s XML configuration file.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dumpxml \u003Cspan class=\"emphasis\">\u003Cem>example-VM-1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n[...]\n&lt;hostdev mode='subsystem' type='usb' managed='yes'&gt;\n  &lt;source&gt;\n    &lt;vendor id='0x0407'/&gt;\n    &lt;product id='0x6252'/&gt;\n    &lt;address bus='1' device='5'/&gt;\n  &lt;/source&gt;\n  &lt;alias name='hostdev0'/&gt;\n  &lt;address type='usb' bus='0' port='3'/&gt;\n&lt;/hostdev&gt;\n[...]\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">virt-xml (1)\u003C/code> man page on your system\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#attaching-devices-to-virtual-machines_assembly_managing-virtual-devices-using-the-cli\" title=\"14.3.1. Attaching devices to virtual machines\">Attaching devices to virtual machines\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"removing-usb-devices-from-virtual-machines_managing-virtual-usb-devices\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">14.5.2. Removing USB devices from virtual machines\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tTo remove a USB device from a virtual machine (VM), you can remove the USB device information from the XML configuration of the VM.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLocate the bus and device values of the USB that you want to remove from the VM.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, the following command displays a list of USB devices attached to the host. The device we will use in this example is attached on bus 001 as device 005.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lsusb\u003C/strong>\u003C/span>\n[...]\nBus 001 Device 003: ID 2567:0a2b Intel Corp.\nBus 001 Device 005: ID 0407:6252 Kingston River 2.0\n[...]\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virt-xml\u003C/code> utility along with the \u003Ccode class=\"literal\">--remove-device\u003C/code> argument.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, the following command removes a USB flash drive, attached to the host as device 005 on bus 001, from the \u003Ccode class=\"literal\">example-VM-1\u003C/code> VM.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-xml \u003Cspan class=\"emphasis\">\u003Cem>example-VM-1\u003C/em>\u003C/span> --remove-device --hostdev 001.005\u003C/strong>\u003C/span>\nDomain 'example-VM-1' defined successfully.\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tTo remove a USB device from a running VM, add the \u003Ccode class=\"literal\">--update\u003C/code> argument to the previous command.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tRun the VM and check if the device has been removed from the list of devices.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">virt-xml (1)\u003C/code> man page on your system\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#attaching-devices-to-virtual-machines_assembly_managing-virtual-devices-using-the-cli\" title=\"14.3.1. Attaching devices to virtual machines\">Attaching devices to virtual machines\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"managing-virtual-optical-drives_managing-virtual-devices\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.6. Managing virtual optical drives\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tWhen using a virtual machine (VM), you can access information stored in an ISO image on the host. To do so, attach the ISO image to the VM as a virtual optical drive, such as a CD drive or a DVD drive.\n\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"attaching-optical-drives-to-virtual-machines_managing-virtual-optical-drives\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">14.6.1. Attaching optical drives to virtual machines\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tTo attach an ISO image as a virtual optical drive, edit the XML configuration file of the virtual machine (VM) and add the new drive.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou must store and copy path of the ISO image on the host machine.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virt-xml\u003C/code> utility with the \u003Ccode class=\"literal\">--add-device\u003C/code> argument:\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, the following command attaches the \u003Ccode class=\"literal\">example-ISO-name\u003C/code> ISO image, stored in the \u003Ccode class=\"literal\">/home/username/Downloads\u003C/code> directory, to the \u003Ccode class=\"literal\">example-VM-name\u003C/code> VM.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-xml \u003Cspan class=\"emphasis\">\u003Cem>example-VM-name\u003C/em>\u003C/span> --add-device --disk \u003Cspan class=\"emphasis\">\u003Cem>/home/username/Downloads/example-ISO-name.iso\u003C/em>\u003C/span>,device=cdrom\u003C/strong>\u003C/span>\nDomain 'example-VM-name' defined successfully.\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tRun the VM and test if the device is present and works as expected.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">man virt-xml\u003C/code> command\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#attaching-devices-to-virtual-machines_assembly_managing-virtual-devices-using-the-cli\" title=\"14.3.1. Attaching devices to virtual machines\">Attaching devices to virtual machines\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"adding-a-cd-rom-to-a-virtual-machine_managing-virtual-optical-drives\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">14.6.2. Adding a CD-ROM to a running virtual machine by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tYou can use the web console to insert a CD-ROM to a running virtual machine (VM) without specifying the media.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">You have installed the web console VM plug-in on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tShut down the VM.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tAttach a virtual CD-ROM device without specifying a source image.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-xml \u003Cspan class=\"emphasis\">\u003Cem>vmname\u003C/em>\u003C/span> --add-device --disk target.dev=sda,device=cdrom\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tRun the VM.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tOpen the web console and in the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, click the VM to which you want to attach a CD-ROM.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tScroll to \u003Cspan class=\"guimenu\">Disks\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe Disks section displays information about the disks assigned to the VM, as well as options to \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span> or \u003Cspan class=\"strong strong\">\u003Cstrong>Edit\u003C/strong>\u003C/span> disks.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick the \u003Cspan class=\"guibutton\">Insert\u003C/span> option for the \u003Cspan class=\"strong strong\">\u003Cstrong>cdrom\u003C/strong>\u003C/span> device.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/5baf9535082862941a763570c5e6b782/virt-cockpit-insert-cdrom.png\" alt=\"Image displaying the disk row of the cdrom device.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tChoose a \u003Cspan class=\"strong strong\">\u003Cstrong>Source\u003C/strong>\u003C/span> for the file you want to attach:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Custom Path\u003C/strong>\u003C/span>: The file is located in a custom directory on the host machine.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Use existing\u003C/strong>\u003C/span>: The file is located in the storage pools that you have created.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Insert\u003C/span>.\n\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, the file will appear under the \u003Cspan class=\"strong strong\">\u003Cstrong>Disks\u003C/strong>\u003C/span> section.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"replacing-iso-images-in-virtual-optical-drives_managing-virtual-optical-drives\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">14.6.3. Replacing ISO images in virtual optical drives\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tTo replace an ISO image attached as a virtual optical drive to a virtual machine (VM), edit the XML configuration file of the VM and specify the replacement.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou must store the ISO image on the host machine.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou must know the path to the ISO image.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLocate the target device where the CD-ROM is attached to the VM. You can find this information in the VM’s XML configuration file.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, the following command displays the \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>example-VM-name\u003C/em>\u003C/span>\u003C/code> VM’s XML configuration file, where the target device for CD-ROM is \u003Ccode class=\"literal\">sda\u003C/code>.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dumpxml \u003Cspan class=\"emphasis\">\u003Cem>example-VM-name\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n...\n&lt;disk&gt;\n  ...\n  &lt;source file='\u003Cspan class=\"emphasis\">\u003Cem>$(/home/username/Downloads/example-ISO-name.iso)\u003C/em>\u003C/span>'/&gt;\n  &lt;target dev='sda' bus='sata'/&gt;\n  ...\n&lt;/disk&gt;\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virt-xml\u003C/code> utility with the \u003Ccode class=\"literal\">--edit\u003C/code> argument.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, the following command replaces the \u003Ccode class=\"literal\">example-ISO-name\u003C/code> ISO image, attached to the \u003Ccode class=\"literal\">example-VM-name\u003C/code> VM at target \u003Ccode class=\"literal\">sda\u003C/code>, with the \u003Ccode class=\"literal\">example-ISO-name-2\u003C/code> ISO image stored in the \u003Ccode class=\"literal\">/dev/cdrom\u003C/code> directory.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-xml \u003Cspan class=\"emphasis\">\u003Cem>example-VM-name\u003C/em>\u003C/span> --edit target=sda --disk \u003Cspan class=\"emphasis\">\u003Cem>/dev/cdrom/example-ISO-name-2.iso\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nDomain 'example-VM-name' defined successfully.\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tRun the VM and test if the device is replaced and works as expected.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">man virt-xml\u003C/code> command\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"removing-iso-images-from-virtual-optical-drives_managing-virtual-optical-drives\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">14.6.4. Removing ISO images from virtual optical drives\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tTo remove an ISO image from a virtual optical drive attached to a virtual machine (VM), edit the XML configuration file of the VM.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLocate the target device where the CD-ROM is attached to the VM. You can find this information in the VM’s XML configuration file.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, the following command displays the \u003Ccode class=\"literal\">example-VM-name\u003C/code> VM’s XML configuration file, where the target device for CD-ROM is \u003Ccode class=\"literal\">sda\u003C/code>.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dumpxml \u003Cspan class=\"emphasis\">\u003Cem>example-VM-name\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n...\n&lt;disk&gt;\n  ...\n  &lt;source file='\u003Cspan class=\"emphasis\">\u003Cem>$(/home/username/Downloads/example-ISO-name.iso)\u003C/em>\u003C/span>'/&gt;\n  &lt;target dev='sda' bus='sata'/&gt;\n  ...\n&lt;/disk&gt;\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virt-xml\u003C/code> utility with the \u003Ccode class=\"literal\">--edit\u003C/code> argument.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, the following command removes the \u003Ccode class=\"literal\">example-ISO-name\u003C/code> ISO image from the CD drive attached to the \u003Ccode class=\"literal\">example-VM-name\u003C/code> VM.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-xml \u003Cspan class=\"emphasis\">\u003Cem>example-VM-name\u003C/em>\u003C/span> --edit target=sda --disk path=\u003C/strong>\u003C/span>\nDomain 'example-VM-name' defined successfully.\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tRun the VM and check that image is no longer available.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">man virt-xml\u003C/code> command\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"removing-optical-drives-from-virtual-machines_managing-virtual-optical-drives\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">14.6.5. Removing optical drives from virtual machines\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tTo remove an optical drive attached to a virtual machine (VM), edit the XML configuration file of the VM.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLocate the target device where the CD-ROM is attached to the VM. You can find this information in the VM’s XML configuration file.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, the following command displays the \u003Ccode class=\"literal\">example-VM-name\u003C/code> VM’s XML configuration file, where the target device for CD-ROM is \u003Ccode class=\"literal\">sda\u003C/code>.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dumpxml \u003Cspan class=\"emphasis\">\u003Cem>example-VM-name\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n...\n&lt;disk type='file' device='cdrom'&gt;\n  &lt;driver name='qemu' type='raw'/&gt;\n  &lt;target dev='sda' bus='sata'/&gt;\n  ...\n&lt;/disk&gt;\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virt-xml\u003C/code> utility with the \u003Ccode class=\"literal\">--remove-device\u003C/code> argument.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, the following command removes the optical drive attached as target \u003Ccode class=\"literal\">sda\u003C/code> from the \u003Ccode class=\"literal\">example-VM-name\u003C/code> VM.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-xml \u003Cspan class=\"emphasis\">\u003Cem>example-VM-name\u003C/em>\u003C/span> --remove-device --disk target=sda\u003C/strong>\u003C/span>\nDomain 'example-VM-name' defined successfully.\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tConfirm that the device is no longer listed in the XML configuration file of the VM.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">man virt-xml\u003C/code> command\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"removing-a-cd-rom-from-a-running-virtual-machine_managing-virtual-optical-drives\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">14.6.6. Removing a CD-ROM from a running virtual machine by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tYou can use the web console to eject a CD-ROM device from a running virtual machine (VM).\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">You have installed the web console VM plug-in on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, click the VM from which you want to remove the CD-ROM.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tScroll to \u003Cspan class=\"guimenu\">Disks\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe Disks section displays information about the disks assigned to the VM, as well as options to \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span> or \u003Cspan class=\"strong strong\">\u003Cstrong>Edit\u003C/strong>\u003C/span> disks.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/2bae76a8e9d0965fea1764a8370a00f1/virt-cockpit-eject-cdrom.png\" alt=\"Image displaying the disks section of the VM.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick the \u003Cspan class=\"guibutton\">Eject\u003C/span> option for the \u003Cspan class=\"strong strong\">\u003Cstrong>cdrom\u003C/strong>\u003C/span> device.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Eject media from VM?\u003C/strong>\u003C/span> dialog box opens.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Eject\u003C/span>.\n\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, the attached file is no longer displayed under the \u003Cspan class=\"strong strong\">\u003Cstrong>Disks\u003C/strong>\u003C/span> section.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"managing-sr-iov-devices_managing-virtual-devices\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.7. Managing SR-IOV devices\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tAn emulated virtual device often uses more CPU and memory than a hardware network device. This can limit the performance of a virtual machine (VM). However, if any devices on your virtualization host support Single Root I/O Virtualization (SR-IOV), you can use this feature to improve the device performance, and possibly also the overall performance of your VMs.\n\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"what-is-sr-iov_managing-sr-iov-devices\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">14.7.1. What is SR-IOV?\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tSingle-root I/O virtualization (SR-IOV) is a specification that enables a single PCI Express (PCIe) device to present multiple separate PCI devices, called \u003Cspan class=\"emphasis\">\u003Cem>virtual functions\u003C/em>\u003C/span> (VFs), to the host system. Each of these devices:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIs able to provide the same or similar service as the original PCIe device.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tAppears at a different address on the host PCI bus.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tCan be assigned to a different VM by using VFIO assignment.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\t\tFor example, a single SR-IOV capable network device can present VFs to multiple VMs. While all of the VFs use the same physical card, the same network connection, and the same network cable, each of the VMs directly controls its own hardware network device, and uses no extra resources from the host.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>How SR-IOV works\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tThe SR-IOV functionality is possible thanks to the introduction of the following PCIe functions:\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Physical functions (PFs)\u003C/strong>\u003C/span> - A PCIe function that provides the functionality of its device (for example networking) to the host, but can also create and manage a set of VFs. Each SR-IOV capable device has one or more PFs.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Virtual functions (VFs)\u003C/strong>\u003C/span> - Lightweight PCIe functions that behave as independent devices. Each VF is derived from a PF. The maximum number of VFs a device can have depends on the device hardware. Each VF can be assigned only to a single VM at a time, but a VM can have multiple VFs assigned to it.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\t\tVMs recognize VFs as virtual devices. For example, a VF created by an SR-IOV network device appears as a network card to a VM to which it is assigned, in the same way as a physical network card appears to the host system.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"figure\" id=\"idm140237784368640\">\u003Cp class=\"title\">\u003Cstrong>Figure 14.1. SR-IOV architecture\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/2ca7c118cafe8e2cd184b16620b18393/virt_SR-IOV.png\" alt=\"virt SR IOV\"/>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Advantages\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tThe primary advantages of using SR-IOV VFs rather than emulated devices are:\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tImproved performance\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tReduced use of host CPU and memory resources\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\t\tFor example, a VF attached to a VM as a vNIC performs at almost the same level as a physical NIC, and much better than paravirtualized or emulated NICs. In particular, when multiple VFs are used simultaneously on a single host, the performance benefits can be significant.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Disadvantages\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tTo modify the configuration of a PF, you must first change the number of VFs exposed by the PF to zero. Therefore, you also need to remove the devices provided by these VFs from the VM to which they are assigned.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tA VM with an VFIO-assigned devices attached, including SR-IOV VFs, cannot be migrated to another host. In some cases, you can work around this limitation by pairing the assigned device with an emulated device. For example, you can \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/67546\">bond\u003C/a> an assigned networking VF to an emulated vNIC, and remove the VF before the migration.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIn addition, VFIO-assigned devices require pinning of VM memory, which increases the memory consumption of the VM and prevents the use of memory ballooning on the VM.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#supported-devices-for-sr-iov-assignment-in-rhel_managing-sr-iov-devices\" title=\"14.7.3. Supported devices for SR-IOV assignment\">Supported devices for SR-IOV assignment\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://www.ibm.com/docs/en/linux-on-systems?topic=vfio-pass-through-pci\">Configuring passthrough PCI devices on IBM Z\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"attaching-sr-iov-networking-devices-to-virtual-machines_managing-sr-iov-devices\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">14.7.2. Attaching SR-IOV networking devices to virtual machines\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tTo attach an SR-IOV networking device to a virtual machine (VM) on an Intel or AMD host, you must create a virtual function (VF) from an SR-IOV capable network interface on the host and assign the VF as a device to a specified VM. For details, see the following instructions.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe CPU and the firmware of your host support the I/O Memory Management Unit (IOMMU).\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tIf using an Intel CPU, it must support the Intel Virtualization Technology for Directed I/O (VT-d).\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tIf using an AMD CPU, it must support the AMD-Vi feature.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe host system uses Access Control Service (ACS) to provide direct memory access (DMA) isolation for PCIe topology. Verify this with the system vendor.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor additional information, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_virtualization/4.0/html/hardware_considerations_for_implementing_sr-iov/index\">Hardware Considerations for Implementing SR-IOV\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe physical network device supports SR-IOV. To verify if any network devices on your system support SR-IOV, use the \u003Ccode class=\"literal\">lspci -v\u003C/code> command and look for \u003Ccode class=\"literal\">Single Root I/O Virtualization (SR-IOV)\u003C/code> in the output.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lspci -v\u003C/strong>\u003C/span>\n[...]\n02:00.0 Ethernet controller: Intel Corporation 82576 Gigabit Network Connection (rev 01)\n\tSubsystem: Intel Corporation Gigabit ET Dual Port Server Adapter\n\tFlags: bus master, fast devsel, latency 0, IRQ 16, NUMA node 0\n\tMemory at fcba0000 (32-bit, non-prefetchable) [size=128K]\n[...]\n\tCapabilities: [150] Alternative Routing-ID Interpretation (ARI)\n\tCapabilities: \u003Cspan class=\"strong strong\">\u003Cstrong>[160] Single Root I/O Virtualization (SR-IOV)\u003C/strong>\u003C/span>\n\tKernel driver in use: igb\n\tKernel modules: igb\n[...]\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe host network interface you want to use for creating VFs is running. For example, to activate the \u003Cspan class=\"emphasis\">\u003Cem>eth1\u003C/em>\u003C/span> interface and verify it is running:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link set eth1 up\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>ip link show eth1\u003C/strong>\u003C/span>\n8: eth1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP mode DEFAULT qlen 1000\n   link/ether a0:36:9f:8f:3f:b8 brd ff:ff:ff:ff:ff:ff\n   vf 0 MAC 00:00:00:00:00:00, spoof checking on, link-state auto\n   vf 1 MAC 00:00:00:00:00:00, spoof checking on, link-state auto\n   vf 2 MAC 00:00:00:00:00:00, spoof checking on, link-state auto\n   vf 3 MAC 00:00:00:00:00:00, spoof checking on, link-state auto\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor SR-IOV device assignment to work, the IOMMU feature must be enabled in the host BIOS and kernel. To do so:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tOn an Intel host, enable VT-d:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\tRegenerate the GRUB configuration with the \u003Ccode class=\"literal\">intel_iommu=on\u003C/code> and \u003Ccode class=\"literal\">iommu=pt\u003C/code> parameters:\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --args=\"intel_iommu=on iommu=pt\" --update-kernel=ALL\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tReboot the host.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tOn an AMD host, enable AMD-Vi:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\tRegenerate the GRUB configuration with the \u003Ccode class=\"literal\">iommu=pt\u003C/code> parameter:\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --args=\"iommu=pt\" --update-kernel=ALL\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tReboot the host.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: Confirm the maximum number of VFs your network device can use. To do so, use the following command and replace \u003Cspan class=\"emphasis\">\u003Cem>eth1\u003C/em>\u003C/span> with your SR-IOV compatible network device.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /sys/class/net/eth1/device/sriov_totalvfs\u003C/strong>\u003C/span>\n7\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the following command to create a virtual function (VF):\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo \u003Cspan class=\"emphasis\">\u003Cem>VF-number\u003C/em>\u003C/span> &gt; /sys/class/net/\u003Cspan class=\"emphasis\">\u003Cem>network-interface\u003C/em>\u003C/span>/device/sriov_numvfs\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the command, replace:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>VF-number\u003C/em>\u003C/span> with the number of VFs you want to create on the PF.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>network-interface\u003C/em>\u003C/span> with the name of the network interface for which the VFs will be created.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe following example creates 2 VFs from the eth1 network interface:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo 2 &gt; /sys/class/net/eth1/device/sriov_numvfs\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tVerify the VFs have been added:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lspci | grep Ethernet\u003C/strong>\u003C/span>\n82:00.0 Ethernet controller: Intel Corporation 82599ES 10-Gigabit SFI/SFP+ Network Connection (rev 01)\n82:00.1 Ethernet controller: Intel Corporation 82599ES 10-Gigabit SFI/SFP+ Network Connection (rev 01)\n82:10.0 Ethernet controller: Intel Corporation 82599 Ethernet Controller Virtual Function (rev 01)\n82:10.2 Ethernet controller: Intel Corporation 82599 Ethernet Controller Virtual Function (rev 01)\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tMake the created VFs persistent by creating a udev rule for the network interface you used to create the VFs. For example, for the \u003Cspan class=\"emphasis\">\u003Cem>eth1\u003C/em>\u003C/span> interface, create the \u003Ccode class=\"literal\">/etc/udev/rules.d/eth1.rules\u003C/code> file, and add the following line:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-bash\">ACTION==\"add\", SUBSYSTEM==\"net\", ENV{ID_NET_DRIVER}==\"ixgbe\", ATTR{device/sriov_numvfs}=\"2\"\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThis ensures that the two VFs that use the \u003Ccode class=\"literal\">ixgbe\u003C/code> driver will automatically be available for the \u003Ccode class=\"literal\">eth1\u003C/code> interface when the host starts. If you do not require persistent SR-IOV devices, skip this step.\n\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tCurrently, the setting described above does not work correctly when attempting to make VFs persistent on Broadcom NetXtreme II BCM57810 adapters. In addition, attaching VFs based on these adapters to Windows VMs is currently not reliable.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tHot-plug one of the newly added VF interface devices to a running VM.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh attach-interface testguest1 hostdev 0000:82:10.0 --managed --live --config\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIf the procedure is successful, the guest operating system detects a new network interface card.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"supported-devices-for-sr-iov-assignment-in-rhel_managing-sr-iov-devices\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">14.7.3. Supported devices for SR-IOV assignment\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tNot all devices can be used for SR-IOV. The following devices have been tested and verified as compatible with SR-IOV in RHEL 9.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Networking devices\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIntel 82599ES 10 Gigabit Ethernet Controller - uses the \u003Ccode class=\"literal\">ixgbe\u003C/code> driver\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIntel Ethernet Controller XL710 Series - uses the \u003Ccode class=\"literal\">i40e\u003C/code> driver\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIntel Ethernet Network Adapter XXV710 - uses the \u003Ccode class=\"literal\">i40e\u003C/code> driver\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIntel 82576 Gigabit Ethernet Controller - uses the \u003Ccode class=\"literal\">igb\u003C/code> driver\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tBroadcom NetXtreme II BCM57810 - uses the \u003Ccode class=\"literal\">bnx2x\u003C/code> driver\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tEthernet Controller E810-C for QSFP - uses the \u003Ccode class=\"literal\">ice\u003C/code> driver\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tSFC9220 10/40G Ethernet Controller - uses the \u003Ccode class=\"literal\">sfc\u003C/code> driver\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tFastLinQ QL41000 Series 10/25/40/50GbE Controller - uses the \u003Ccode class=\"literal\">qede\u003C/code> driver\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tMellanox ConnectX-5 Ethernet Adapter Cards\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tMellanox MT2892 Family [ConnectX-6 Dx]\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"attaching-dasd-devices-to-virtual-machines-on-ibm-z_managing-virtual-devices\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.8. Attaching DASD devices to virtual machines on IBM Z\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBy using the \u003Ccode class=\"literal\">vfio-ccw\u003C/code> feature, you can assign direct-access storage devices (DASDs) as mediated devices to your virtual machines (VMs) on IBM Z hosts. This for example makes it possible for the VM to access a z/OS dataset, or to provide the assigned DASDs to a z/OS machine.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have a system with IBM Z hardware architecture supported with the FICON protocol.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have a target VM of a Linux operating system.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Cspan class=\"emphasis\">\u003Cem>driverctl\u003C/em>\u003C/span> package is installed.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install driverctl\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe necessary \u003Ccode class=\"literal\">vfio\u003C/code> kernel modules have been loaded on the host.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lsmod | grep vfio\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe output of this command must contain the following modules:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">vfio_ccw\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">vfio_mdev\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">vfio_iommu_type1\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have a spare DASD device for exclusive use by the VM, and you know the identifier of the device.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe following procedure uses \u003Ccode class=\"literal\">0.0.002c\u003C/code> as an example. When performing the commands, replace \u003Ccode class=\"literal\">0.0.002c\u003C/code> with the identifier of your DASD device.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tObtain the subchannel identifier of the DASD device.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lscss -d \u003Cspan class=\"emphasis\">\u003Cem>0.0.002c\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nDevice   Subchan.  DevType CU Type Use  PIM PAM POM  CHPIDs\n----------------------------------------------------------------------\n0.0.002c \u003Cspan class=\"strong strong\">\u003Cstrong>0.0.29a8\u003C/strong>\u003C/span>  3390/0c 3990/e9 yes  f0  f0  ff   02111221 00000000\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn this example, the subchannel identifier is detected as \u003Ccode class=\"literal\">0.0.29a8\u003C/code>. In the following commands of this procedure, replace \u003Ccode class=\"literal\">0.0.29a8\u003C/code> with the detected subchannel identifier of your device.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the \u003Ccode class=\"literal\">lscss\u003C/code> command in the previous step only displayed the header output and no device information, perform the following steps:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRemove the device from the \u003Ccode class=\"literal\">cio_ignore\u003C/code> list.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cio_ignore -r \u003Cspan class=\"emphasis\">\u003Cem>0.0.002c\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIn the guest OS, \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_monitoring_and_updating_the_kernel/configuring-kernel-parameters-at-runtime_managing-monitoring-and-updating-the-kernel\">edit the kernel command line\u003C/a> of the VM and add the device identifier with a \u003Ccode class=\"literal\">!\u003C/code> mark to the line that starts with \u003Ccode class=\"literal\">cio_ignore=\u003C/code>, if it is not present already.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">cio_ignore=all,!condev,\u003Cspan class=\"strong strong\">\u003Cstrong>!\u003Cspan class=\"emphasis\">\u003Cem>0.0.002c\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tRepeat step 1 on the host to obtain the subchannel identifier.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tBind the subchannel to the \u003Ccode class=\"literal\">vfio_ccw\u003C/code> passthrough driver.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>driverctl -b css set-override \u003Cspan class=\"emphasis\">\u003Cem>0.0.29a8\u003C/em>\u003C/span> vfio_ccw\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThis binds the \u003Cspan class=\"emphasis\">\u003Cem>0.0.29a8\u003C/em>\u003C/span> subchannel to \u003Ccode class=\"literal\">vfio_ccw\u003C/code> persistently, which means the DASD will not be usable on the host. If you need to use the device on the host, you must first remove the automatic binding to 'vfio_ccw' and rebind the subchannel to the default driver:\n\t\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t# \u003Cspan class=\"strong strong\">\u003Cstrong>driverctl -b css unset-override \u003Cspan class=\"emphasis\">\u003Cem>0.0.29a8\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDefine and start the DASD mediated device.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># cat nodedev.xml\n&lt;device&gt;\n    &lt;parent&gt;css_0_0_29a8&lt;/parent&gt;\n    &lt;capability type=\"mdev\"&gt;\n        &lt;type id=\"vfio_ccw-io\"/&gt;\n    &lt;/capability&gt;\n&lt;/device&gt;\n\n# \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-define nodedev.xml\u003C/strong>\u003C/span>\nNode device 'mdev_30820a6f_b1a5_4503_91ca_0c10ba12345a_0_0_29a8' defined from 'nodedev.xml'\n\n# \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-start mdev_30820a6f_b1a5_4503_91ca_0c10ba12345a_0_0_29a8\u003C/strong>\u003C/span>\nDevice mdev_30820a6f_b1a5_4503_91ca_0c10ba12345a_0_0_29a8 started\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tShut down the VM, if it is running.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the UUID of the previously defined device and save it for the next step.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-dumpxml mdev_30820a6f_b1a5_4503_91ca_0c10ba12345a_0_0_29a8\u003C/strong>\u003C/span>\n\n&lt;device&gt;\n  &lt;name&gt;mdev_30820a6f_b1a5_4503_91ca_0c10ba12345a_0_0_29a8&lt;/name&gt;\n  &lt;parent&gt;css_0_0_29a8&lt;/parent&gt;\n  &lt;capability type='mdev'&gt;\n    &lt;type id='vfio_ccw-io'/&gt;\n    \u003Cspan class=\"strong strong\">\u003Cstrong>&lt;uuid&gt;30820a6f-b1a5-4503-91ca-0c10ba12345a&lt;/uuid&gt;\u003C/strong>\u003C/span>\n    &lt;iommuGroup number='0'/&gt;\n    &lt;attr name='assign_adapter' value='0x02'/&gt;\n    &lt;attr name='assign_domain' value='0x002b'/&gt;\n  &lt;/capability&gt;\n&lt;/device&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAttach the mediated device to the VM. To do so, use the \u003Ccode class=\"literal\">virsh edit\u003C/code> utility to edit the XML configuration of the VM, add the following section to the XML, and replace the \u003Ccode class=\"literal\">uuid\u003C/code> value with the UUID you obtained in the previous step.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;hostdev mode='subsystem' type='mdev' model='vfio-ccw'&gt;\n  &lt;source&gt;\n    &lt;address uuid=\"30820a6f-b1a5-4503-91ca-0c10ba12345a\"/&gt;\n  &lt;/source&gt;\n&lt;/hostdev&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Configure the mediated device to start automatically on host boot.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-autostart \u003Cspan class=\"emphasis\">\u003Cem>mdev_30820a6f_b1a5_4503_91ca_0c10ba12345a_0_0_29a8\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnsure that the mediated device is configured correctly.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-info \u003Cspan class=\"emphasis\">\u003Cem>mdev_30820a6f_b1a5_4503_91ca_0c10ba12345a_0_0_29a8\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nName:           \u003Cspan class=\"emphasis\">\u003Cem>mdev_30820a6f_b1a5_4503_91ca_0c10ba12345a_0_0_29a8\u003C/em>\u003C/span>\nParent:         css_0_0_0121\nActive:         \u003Cspan class=\"strong strong\">\u003Cstrong>yes\u003C/strong>\u003C/span>\nPersistent:     \u003Cspan class=\"strong strong\">\u003Cstrong>yes\u003C/strong>\u003C/span>\nAutostart:      \u003Cspan class=\"strong strong\">\u003Cstrong>yes\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tObtain the identifier that \u003Ccode class=\"literal\">libvirt\u003C/code> assigned to the mediated DASD device. To do so, display the XML configuration of the VM and look for a \u003Ccode class=\"literal\">vfio-ccw\u003C/code> device.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dumpxml \u003Cspan class=\"emphasis\">\u003Cem>vm-name\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n\n&lt;domain&gt;\n[...]\n    &lt;hostdev mode='subsystem' type='mdev' managed='no' model='vfio-ccw'&gt;\n      &lt;source&gt;\n        &lt;address uuid='10620d2f-ed4d-437b-8aff-beda461541f9'/&gt;\n      &lt;/source&gt;\n      &lt;alias name='hostdev0'/&gt;\n      &lt;address type='ccw' cssid='0xfe' ssid='0x0' \u003Cspan class=\"strong strong\">\u003Cstrong>devno='0x0009\u003C/strong>\u003C/span>'/&gt;\n    &lt;/hostdev&gt;\n[...]\n&lt;/domain&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn this example, the assigned identifier of the device is \u003Ccode class=\"literal\">0.0.0009\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStart the VM and log in to its guest OS.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the guest OS, confirm that the DASD device is listed. For example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lscss | grep \u003Cspan class=\"emphasis\">\u003Cem>0.0.0009\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>0.0.0009\u003C/strong>\u003C/span> 0.0.0007  3390/0c 3990/e9      f0  f0  ff   12212231 00000000\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the guest OS, set the device online. For example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>chccwdev -e \u003Cspan class=\"emphasis\">\u003Cem>0.0009\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nSetting device 0.0.0009 online\nDone\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://www.ibm.com/docs/en/linux-on-systems?topic=parameters-cio-ignore\">IBM documentation on \u003Ccode class=\"literal\">cio_ignore\u003C/code>\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_monitoring_and_updating_the_kernel/configuring-kernel-parameters-at-runtime_managing-monitoring-and-updating-the-kernel\">Configuring kernel parameters at runtime\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"Attaching-a-watchdog-device-to-a-virtual-machine-using-the-web-console_managing-virtual-devices\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.9. Attaching a watchdog device to a virtual machine by using the web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tTo force the virtual machine (VM) to perform a specified action when it stops responding, you can attach virtual watchdog devices to a VM.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have installed the web console VM plug-in on your system. For more information, see \u003Ca class=\"xref\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">Section 8.2, “Setting up the web console to manage virtual machines”\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the command-line interface, install the watchdog service.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t# \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install watchdog\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tShut down the VM.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the watchdog service to the VM.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t# \u003Cspan class=\"strong strong\">\u003Cstrong>virt-xml \u003Cspan class=\"emphasis\">\u003Cem>vmname\u003C/em>\u003C/span>  --add-device --watchdog action=reset --update\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRun the VM.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface of the web console, click on the VM to which you want to add the watchdog device.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">add\u003C/span> next to the \u003Cspan class=\"strong strong\">\u003Cstrong>Watchdog\u003C/strong>\u003C/span> field in the Overview pane.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Add watchdog device type\u003C/strong>\u003C/span> dialog appears.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSelect the action that you want the watchdog device to perform if the VM stops responding.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/88c483bb79581ca6b3c173ae03803a09/virt-cockpit-add-watchdog.png\" width=\"540\" alt=\"Image displaying the add watchdog device type dialog box.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Add\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe action you selected is visible next to the \u003Cspan class=\"strong strong\">\u003Cstrong>Watchdog\u003C/strong>\u003C/span> field in the Overview pane.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"attaching-zpci-devices-to-virtual-machines-on-ibm-z_managing-virtual-devices\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.10. Attaching PCI devices to virtual machines on IBM Z\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBy using the \u003Ccode class=\"literal\">vfio-pci\u003C/code> device driver, you can assign PCI devices in pass-through mode to your virtual machines (VMs) on IBM Z hosts. This for example makes it possible for the VM to use NVMe flash disks for handling databases.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have a host system with the IBM Z hardware architecture.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have a target VM of Linux operating system.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe necessary \u003Ccode class=\"literal\">vfio\u003C/code> kernel modules have been loaded on the host.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lsmod | grep vfio\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe output of this command must contain the following modules:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">vfio_pci\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">vfio_pci_core\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">vfio_iommu_type1\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tObtain the PCI address identifier of the device that you want to use.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lspci -nkD\u003C/strong>\u003C/span>\n\n0000:00:00.0 0000: 1014:04ed\n\tKernel driver in use: ism\n\tKernel modules: ism\n0001:00:00.0 0000: 1014:04ed\n\tKernel driver in use: ism\n\tKernel modules: ism\n0002:00:00.0 0200: 15b3:1016\n\tSubsystem: 15b3:0062\n\tKernel driver in use: mlx5_core\n\tKernel modules: mlx5_core\n0003:00:00.0 0200: 15b3:1016\n\tSubsystem: 15b3:0062\n\tKernel driver in use: mlx5_core\n\tKernel modules: mlx5_core\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen the XML configuration of the VM to which you want to attach the PCI device.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh edit \u003Cspan class=\"emphasis\">\u003Cem>vm-name\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the following \u003Ccode class=\"literal\">&lt;hostdev&gt;\u003C/code> configuration to the \u003Ccode class=\"literal\">&lt;devices&gt;\u003C/code> section of the XML file.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReplace the values on the \u003Ccode class=\"literal\">address\u003C/code> line with the PCI address of your device. For example, if the device address is \u003Ccode class=\"literal\">0003:00:00.0\u003C/code>, use the following configuration:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">&lt;hostdev mode=\"subsystem\" type=\"pci\" managed=\"yes\"&gt;\n  &lt;driver name=\"vfio\"/&gt;\n   &lt;source&gt;\n    &lt;address domain=\"\u003Cspan class=\"emphasis\">\u003Cem>0x0003\u003C/em>\u003C/span>\" bus=\"\u003Cspan class=\"emphasis\">\u003Cem>0x00\u003C/em>\u003C/span>\" slot=\"\u003Cspan class=\"emphasis\">\u003Cem>0x00\u003C/em>\u003C/span>\" function=\"\u003Cspan class=\"emphasis\">\u003Cem>0x0\u003C/em>\u003C/span>\"/&gt;\n   &lt;/source&gt;\n   &lt;address type=\"pci\"/&gt;\n&lt;/hostdev&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: To modify how the guest operating system will detect the PCI device, you can also add a \u003Ccode class=\"literal\">&lt;zpci&gt;\u003C/code> sub-element to the \u003Ccode class=\"literal\">&lt;address&gt;\u003C/code> element. In the \u003Ccode class=\"literal\">&lt;zpci&gt;\u003C/code> line, you can adjust the \u003Ccode class=\"literal\">uid\u003C/code> and \u003Ccode class=\"literal\">fid\u003C/code> values, which modifies the PCI address and function ID of the device in the guest operating system.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">&lt;hostdev mode=\"subsystem\" type=\"pci\" managed=\"yes\"&gt;\n  &lt;driver name=\"vfio\"/&gt;\n   &lt;source&gt;\n    &lt;address domain=\"\u003Cspan class=\"emphasis\">\u003Cem>0x0003\u003C/em>\u003C/span>\" bus=\"\u003Cspan class=\"emphasis\">\u003Cem>0x00\u003C/em>\u003C/span>\" slot=\"\u003Cspan class=\"emphasis\">\u003Cem>0x00\u003C/em>\u003C/span>\" function=\"\u003Cspan class=\"emphasis\">\u003Cem>0x0\u003C/em>\u003C/span>\"/&gt;\n   &lt;/source&gt;\n   &lt;address type=\"pci\"&gt;\n     &lt;zpci uid=\"0x0008\" fid=\"0x001807\"/&gt;\n   &lt;/address&gt;\n&lt;/hostdev&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn this example:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">uid=\"0x0008\"\u003C/code> sets the domain PCI address of the device in the VM to \u003Ccode class=\"literal\">0008:00:00.0\u003C/code>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">fid=\"0x001807\"\u003C/code> sets the slot value of the device to \u003Ccode class=\"literal\">0x001807\u003C/code>. As a result, the device configuration in the file system of the VM is saved to \u003Ccode class=\"literal\">/sys/bus/pci/slots/00001087/address\u003C/code>.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf these values are not specified, \u003Ccode class=\"literal\">libvirt\u003C/code> configures them automatically.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSave the XML configuration.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the VM is running, shut it down.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh shutdown \u003Cspan class=\"emphasis\">\u003Cem>vm-name\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStart the VM and log in to its guest operating system.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the guest operating system, confirm that the PCI device is listed.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, if the device address is \u003Ccode class=\"literal\">0003:00:00.0\u003C/code>, use the following command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lspci -nkD | grep \u003Cspan class=\"emphasis\">\u003Cem>0003:00:00.0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n\n0003:00:00.0 8086:9a09 (rev 01)\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"managing-storage-for-virtual-machines_configuring-and-managing-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 15. Managing storage for virtual machines\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tA virtual machine (VM), just like a physical machine, requires storage for data, program, and system files. As a VM administrator, you can assign physical or network-based storage to your VMs as virtual storage. You can also modify how the storage is presented to a VM regardless of the underlying hardware.\n\t\t\u003C/p>\u003Cp>\n\t\t\tThe following sections provide information about the different types of VM storage, how they work, and how you can manage them by using the CLI or the web console.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"understanding-virtual-machine-storage_managing-storage-for-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">15.1. Understanding virtual machine storage\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tIf you are new to virtual machine (VM) storage, or are unsure about how it works, the following sections provide a general overview about the various components of VM storage, how it works, management basics, and the supported solutions provided by Red Hat.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can find information about:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#understanding-storage-pools_understanding-virtual-machine-storage\" title=\"15.1.1. Introduction to storage pools\">Storage pools\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#storage-volumes_understanding-virtual-machine-storage\" title=\"15.1.2. Introduction to storage volumes\">Storage volumes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#con_storage-management-using-libvirt_understanding-virtual-machine-storage\" title=\"15.1.3. Storage management by using libvirt\">Managing storage using libvirt\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#con_overview-of-storage-management_understanding-virtual-machine-storage\" title=\"15.1.4. Overview of storage management\">Overview of VM storage\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#ref_supported-and-unsupported-storage-pool-types_understanding-virtual-machine-storage\" title=\"15.1.5. Supported and unsupported storage pool types\">Supported and unsupported storage pool types\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"understanding-storage-pools_understanding-virtual-machine-storage\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.1.1. Introduction to storage pools\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tA storage pool is a file, directory, or storage device, managed by \u003Ccode class=\"literal\">libvirt\u003C/code> to provide storage for virtual machines (VMs). You can divide storage pools into storage volumes, which store VM images or are attached to VMs as additional storage.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tFurthermore, multiple VMs can share the same storage pool, allowing for better allocation of storage resources.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tStorage pools can be persistent or transient:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tA persistent storage pool survives a system restart of the host machine. You can use the \u003Ccode class=\"literal command\">virsh pool-define\u003C/code> to create a persistent storage pool.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tA transient storage pool only exists until the host reboots. You can use the \u003Ccode class=\"literal command\">virsh pool-create\u003C/code> command to create a transient storage pool.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Storage pool storage types\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tStorage pools can be either local or network-based (shared):\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Local storage pools\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLocal storage pools are attached directly to the host server. They include local directories, directly attached disks, physical partitions, and Logical Volume Manager (LVM) volume groups on local devices.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLocal storage pools are useful for development, testing, and small deployments that do not require migration or have a large number of VMs.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Networked (shared) storage pools\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tNetworked storage pools include storage devices shared over a network by using standard protocols.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"storage-volumes_understanding-virtual-machine-storage\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.1.2. Introduction to storage volumes\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tStorage pools are divided into \u003Ccode class=\"literal\">storage volumes\u003C/code>. Storage volumes are abstractions of physical partitions, LVM logical volumes, file-based disk images, and other storage types handled by \u003Ccode class=\"literal\">libvirt\u003C/code>. Storage volumes are presented to VMs as local storage devices, such as disks, regardless of the underlying hardware.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tOn the host machine, a storage volume is referred to by its name and an identifier for the storage pool from which it derives. On the \u003Ccode class=\"literal\">virsh\u003C/code> command line, this takes the form \u003Ccode class=\"literal\">--pool \u003Cspan class=\"emphasis\">\u003Cem>storage_pool\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>volume_name\u003C/em>\u003C/span>\u003C/code>.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tFor example, to display information about a volume named \u003Cspan class=\"emphasis\">\u003Cem>firstimage\u003C/em>\u003C/span> in the \u003Cspan class=\"emphasis\">\u003Cem>guest_images\u003C/em>\u003C/span> pool.\n\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh vol-info --pool guest_images firstimage\u003C/strong>\u003C/span>\n  Name:             firstimage\n  Type:             block\n  Capacity:         20.00 GB\n  Allocation:       20.00 GB\u003C/pre>\u003C/section>\u003Csection class=\"section\" id=\"con_storage-management-using-libvirt_understanding-virtual-machine-storage\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.1.3. Storage management by using libvirt\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tBy using the \u003Ccode class=\"literal\">libvirt\u003C/code> remote protocol, you can manage all aspects of VM storage. These operations can also be performed on a remote host. Consequently, a management application that uses \u003Ccode class=\"literal\">libvirt\u003C/code>, such as the RHEL web console, can be used to perform all the required tasks of configuring the storage of a VM.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tYou can use the \u003Ccode class=\"literal\">libvirt\u003C/code> API to query the list of volumes in a storage pool or to get information regarding the capacity, allocation, and available storage in that storage pool. For storage pools that support it, you can also use the \u003Ccode class=\"literal\">libvirt\u003C/code> API to create, clone, resize, and delete storage volumes. Furthermore, you can use the \u003Ccode class=\"literal\">libvirt\u003C/code> API to upload data to storage volumes, download data from storage volumes, or wipe data from storage volumes.\n\t\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"con_overview-of-storage-management_understanding-virtual-machine-storage\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.1.4. Overview of storage management\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tTo illustrate the available options for managing storage, the following example talks about a sample NFS server that uses \u003Ccode class=\"literal command\">mount -t nfs nfs.example.com:/path/to/share /path/to/data\u003C/code>.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tAs a storage administrator:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou can define an NFS storage pool on the virtualization host to describe the exported server path and the client target path. Consequently, \u003Ccode class=\"literal\">libvirt\u003C/code> can mount the storage either automatically when \u003Ccode class=\"literal\">libvirt\u003C/code> is started or as needed while \u003Ccode class=\"literal\">libvirt\u003C/code> is running.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou can simply add the storage pool and storage volume to a VM by name. You do not need to add the target path to the volume. Therefore, even if the target client path changes, it does not affect the VM.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou can configure storage pools to autostart. When you do so, \u003Ccode class=\"literal\">libvirt\u003C/code> automatically mounts the NFS shared disk on the directory which is specified when \u003Ccode class=\"literal\">libvirt\u003C/code> is started. \u003Ccode class=\"literal\">libvirt\u003C/code> mounts the share on the specified directory, similar to the command \u003Ccode class=\"literal command\">mount nfs.example.com:/path/to/share /vmdata\u003C/code>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou can query the storage volume paths by using the \u003Ccode class=\"literal\">libvirt\u003C/code> API. These storage volumes are basically the files present in the NFS shared disk. You can then copy these paths into the section of a VM’s XML definition that describes the source storage for the VM’s block devices.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the case of NFS, you can use an application that uses the \u003Ccode class=\"literal\">libvirt\u003C/code> API to create and delete storage volumes in the storage pool (files in the NFS share) up to the limit of the size of the pool (the storage capacity of the share).\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tNote that, not all storage pool types support creating and deleting volumes.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou can stop a storage pool when no longer required. Stopping a storage pool (\u003Ccode class=\"literal command\">pool-destroy\u003C/code>) undoes the start operation, in this case, unmounting the NFS share. The data on the share is not modified by the destroy operation, despite what the name of the command suggests. For more information, see \u003Ccode class=\"literal command\">man virsh\u003C/code>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"ref_supported-and-unsupported-storage-pool-types_understanding-virtual-machine-storage\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.1.5. Supported and unsupported storage pool types\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Supported storage pool types\u003C/strong>\u003C/span>\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tThe following is a list of storage pool types supported by RHEL:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tDirectory-based storage pools\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tDisk-based storage pools\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tPartition-based storage pools\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tiSCSI-based storage pools\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tLVM-based storage pools\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tNFS-based storage pools\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tSCSI-based storage pools with vHBA devices\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tMultipath-based storage pools\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tRBD-based storage pools\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Unsupported storage pool types\u003C/strong>\u003C/span>\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tThe following is a list of \u003Ccode class=\"literal\">libvirt\u003C/code> storage pool types not supported by RHEL:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tSheepdog-based storage pools\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tVstorage-based storage pools\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tZFS-based storage pools\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tiSCSI-direct storage pools\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tGlusterFS storage pools\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"assembly_managing-virtual-machine-storage-pools-using-the-cli_managing-storage-for-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">15.2. Managing virtual machine storage pools by using the CLI\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can use the CLI to manage the following aspects of your storage pools to assign storage to your virtual machines (VMs):\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-storage-pool-information-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\" title=\"15.2.1. Viewing storage pool information by using the CLI\">View storage pool information\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate storage pools\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-directory-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\" title=\"15.2.2. Creating directory-based storage pools by using the CLI\">Create directory-based storage pools by using the CLI\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-disk-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\" title=\"15.2.3. Creating disk-based storage pools by using the CLI\">Create disk-based storage pools by using the CLI\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-filesystem-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\" title=\"15.2.4. Creating filesystem-based storage pools by using the CLI\">Create filesystem-based storage pools by using the CLI\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-iscsi-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\" title=\"15.2.5. Creating iSCSI-based storage pools by using the CLI\">Create iSCSI-based storage pools by using the CLI\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-lvm-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\" title=\"15.2.6. Creating LVM-based storage pools by using the CLI\">Create LVM-based storage pools by using the CLI\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-nfs-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\" title=\"15.2.7. Creating NFS-based storage pools by using the CLI\">Create NFS-based storage pools by using the CLI\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-scsi-based-storage-pools-with-vhba-devices-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\" title=\"15.2.8. Creating SCSI-based storage pools with vHBA devices by using the CLI\">Create SCSI-based storage pools with vHBA devices by using the CLI\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#deleting-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\" title=\"15.2.9. Deleting storage pools by using the CLI\">Remove storage pools\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"viewing-storage-pool-information-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.2.1. Viewing storage pool information by using the CLI\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tBy using the CLI, you can view a list of all storage pools with limited or full details about the storage pools. You can also filter the storage pools listed.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-list\u003C/code> command to view storage pool information.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-list --all --details\u003C/strong>\u003C/span>\n Name                State    Autostart  Persistent    Capacity  Allocation   Available\n default             running  yes        yes          48.97 GiB   23.93 GiB   25.03 GiB\n Downloads           running  yes        yes         175.62 GiB   62.02 GiB  113.60 GiB\n RHEL-Storage-Pool   running  yes        yes         214.62 GiB   93.02 GiB  168.60 GiB\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">virsh pool-list --help\u003C/code> command\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-directory-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.2.2. Creating directory-based storage pools by using the CLI\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tA directory-based storage pool is based on a directory in an existing mounted file system. This is useful, for example, when you want to use the remaining space on the file system for other purposes. You can use the \u003Ccode class=\"literal\">virsh\u003C/code> utility to create directory-based storage pools.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnsure your hypervisor supports directory storage pools:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-capabilities | grep \"'dir' supported='yes'\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf the command displays any output, directory pools are supported.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Create a storage pool\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-define-as\u003C/code> command to define and create a directory-type storage pool. For example, to create a storage pool named \u003Ccode class=\"literal\">guest_images_dir\u003C/code> that uses the \u003Cspan class=\"strong strong\">\u003Cstrong>/guest_images\u003C/strong>\u003C/span> directory:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-define-as guest_images_dir dir --target \"/guest_images\"\u003C/strong>\u003C/span>\nPool guest_images_dir defined\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf you already have an XML configuration of the storage pool you want to create, you can also define the pool based on the XML. For details, see \u003Ca class=\"link\" href=\"#directory-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools\" title=\"15.4.1. Directory-based storage pool parameters\">Directory-based storage pool parameters\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Create the storage pool target path\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-build\u003C/code> command to create a storage pool target path for a pre-formatted file system storage pool, initialize the storage source device, and define the format of the data.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-build guest_images_dir\u003C/strong>\u003C/span>\n  Pool guest_images_dir built\n\n# \u003Cspan class=\"strong strong\">\u003Cstrong>ls -la /guest_images\u003C/strong>\u003C/span>\n  total 8\n  drwx------.  2 root root 4096 May 31 19:38 .\n  dr-xr-xr-x. 25 root root 4096 May 31 19:38 ..\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Verify that the pool was created\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-list\u003C/code> command to verify that the pool was created.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-list --all\u003C/strong>\u003C/span>\n\n  Name                 State      Autostart\n  -----------------------------------------\n  default              active     yes\n  guest_images_dir     inactive   no\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Start the storage pool\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-start\u003C/code> command to mount the storage pool.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-start guest_images_dir\u003C/strong>\u003C/span>\n  Pool guest_images_dir started\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal command\">virsh pool-start\u003C/code> command is only necessary for persistent storage pools. Transient storage pools are automatically started when they are created.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: Turn on autostart.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tBy default, a storage pool defined with the \u003Ccode class=\"literal command\">virsh\u003C/code> command is not set to automatically start each time virtualization services start. Use the \u003Ccode class=\"literal command\">virsh pool-autostart\u003C/code> command to configure the storage pool to autostart.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-autostart guest_images_dir\u003C/strong>\u003C/span>\n  Pool guest_images_dir marked as autostarted\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-info\u003C/code> command to verify that the storage pool is in the \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>running\u003C/em>\u003C/span>\u003C/code> state. Check if the sizes reported are as expected and if autostart is configured correctly.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-info guest_images_dir\u003C/strong>\u003C/span>\n  Name:           guest_images_dir\n  UUID:           c7466869-e82a-a66c-2187-dc9d6f0877d0\n  State:          running\n  Persistent:     yes\n  Autostart:      yes\n  Capacity:       458.39 GB\n  Allocation:     197.91 MB\n  Available:      458.20 GB\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-disk-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.2.3. Creating disk-based storage pools by using the CLI\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tIn a disk-based storage pool, the pool is based on a disk partition. This is useful, for example, when you want to have an entire disk partition dedicated as virtual machine (VM) storage. You can use the \u003Ccode class=\"literal\">virsh\u003C/code> utility to create disk-based storage pools.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnsure your hypervisor supports disk-based storage pools:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-capabilities | grep \"'disk' supported='yes'\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf the command displays any output, disk-based pools are supported.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tPrepare a device on which you will base the storage pool. For this purpose, prefer partitions (for example, \u003Ccode class=\"literal filename\">/dev/sdb1\u003C/code>) or LVM volumes. If you provide a VM with write access to an entire disk or block device (for example, \u003Ccode class=\"literal filename\">/dev/sdb\u003C/code>), the VM will likely partition it or create its own LVM groups on it. This can result in system errors on the host.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tHowever, if you require using an entire block device for the storage pool, Red Hat recommends protecting any important partitions on the device from GRUB’s \u003Ccode class=\"literal\">os-prober\u003C/code> function. To do so, edit the \u003Ccode class=\"literal\">/etc/default/grub\u003C/code> file and apply one of the following configurations:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tDisable \u003Ccode class=\"literal\">os-prober\u003C/code>.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">GRUB_DISABLE_OS_PROBER=true\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tPrevent \u003Ccode class=\"literal\">os-prober\u003C/code> from discovering a specific partition. For example:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">GRUB_OS_PROBER_SKIP_LIST=\"5ef6313a-257c-4d43@/dev/sdb1\"\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tBack up any data on the selected storage device before creating a storage pool. Depending on the version of \u003Ccode class=\"literal package\">libvirt\u003C/code> being used, dedicating a disk to a storage pool may reformat and erase all data currently stored on the disk device.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Create a storage pool\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-define-as\u003C/code> command to define and create a disk-type storage pool. The following example creates a storage pool named \u003Ccode class=\"literal\">guest_images_disk\u003C/code> that uses the \u003Cspan class=\"strong strong\">\u003Cstrong>/dev/sdb\u003C/strong>\u003C/span> device and is mounted on the /dev directory.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-define-as guest_images_disk disk --source-format=gpt --source-dev=/dev/sdb --target /dev\u003C/strong>\u003C/span>\nPool guest_images_disk defined\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf you already have an XML configuration of the storage pool you want to create, you can also define the pool based on the XML. For details, see \u003Ca class=\"link\" href=\"#disk-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools\" title=\"15.4.2. Disk-based storage pool parameters\">Disk-based storage pool parameters\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Create the storage pool target path\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-build\u003C/code> command to create a storage pool target path for a pre-formatted file-system storage pool, initialize the storage source device, and define the format of the data.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-build guest_images_disk\u003C/strong>\u003C/span>\n  Pool guest_images_disk built\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tBuilding the target path is only necessary for disk-based, file system-based, and logical storage pools. If \u003Ccode class=\"literal\">libvirt\u003C/code> detects that the source storage device’s data format differs from the selected storage pool type, the build fails, unless the \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>overwrite\u003C/em>\u003C/span>\u003C/code> option is specified.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Verify that the pool was created\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-list\u003C/code> command to verify that the pool was created.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-list --all\u003C/strong>\u003C/span>\n\n  Name                 State      Autostart\n  -----------------------------------------\n  default              active     yes\n  guest_images_disk    inactive   no\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Start the storage pool\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-start\u003C/code> command to mount the storage pool.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-start guest_images_disk\u003C/strong>\u003C/span>\n  Pool guest_images_disk started\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal command\">virsh pool-start\u003C/code> command is only necessary for persistent storage pools. Transient storage pools are automatically started when they are created.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: Turn on autostart.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tBy default, a storage pool defined with the \u003Ccode class=\"literal command\">virsh\u003C/code> command is not set to automatically start each time virtualization services start. Use the \u003Ccode class=\"literal command\">virsh pool-autostart\u003C/code> command to configure the storage pool to autostart.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-autostart guest_images_disk\u003C/strong>\u003C/span>\n  Pool guest_images_disk marked as autostarted\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-info\u003C/code> command to verify that the storage pool is in the \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>running\u003C/em>\u003C/span>\u003C/code> state. Check if the sizes reported are as expected and if autostart is configured correctly.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-info guest_images_disk\u003C/strong>\u003C/span>\n  Name:           guest_images_disk\n  UUID:           c7466869-e82a-a66c-2187-dc9d6f0877d0\n  State:          running\n  Persistent:     yes\n  Autostart:      yes\n  Capacity:       458.39 GB\n  Allocation:     197.91 MB\n  Available:      458.20 GB\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-filesystem-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.2.4. Creating filesystem-based storage pools by using the CLI\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tWhen you want to create a storage pool on a file system that is not mounted, use the filesystem-based storage pool. This storage pool is based on a given file-system mountpoint. You can use the \u003Ccode class=\"literal\">virsh\u003C/code> utility to create filesystem-based storage pools.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnsure your hypervisor supports filesystem-based storage pools:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-capabilities | grep \"'fs' supported='yes'\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf the command displays any output, file-based pools are supported.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tPrepare a device on which you will base the storage pool. For this purpose, prefer partitions (for example, \u003Ccode class=\"literal filename\">/dev/sdb1\u003C/code>) or LVM volumes. If you provide a VM with write access to an entire disk or block device (for example, \u003Ccode class=\"literal filename\">/dev/sdb\u003C/code>), the VM will likely partition it or create its own LVM groups on it. This can result in system errors on the host.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tHowever, if you require using an entire block device for the storage pool, Red Hat recommends protecting any important partitions on the device from GRUB’s \u003Ccode class=\"literal\">os-prober\u003C/code> function. To do so, edit the \u003Ccode class=\"literal\">/etc/default/grub\u003C/code> file and apply one of the following configurations:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tDisable \u003Ccode class=\"literal\">os-prober\u003C/code>.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">GRUB_DISABLE_OS_PROBER=true\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tPrevent \u003Ccode class=\"literal\">os-prober\u003C/code> from discovering a specific partition. For example:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">GRUB_OS_PROBER_SKIP_LIST=\"5ef6313a-257c-4d43@/dev/sdb1\"\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Create a storage pool\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-define-as\u003C/code> command to define and create a filesystem-type storage pool. For example, to create a storage pool named \u003Ccode class=\"literal\">guest_images_fs\u003C/code> that uses the \u003Cspan class=\"strong strong\">\u003Cstrong>/dev/sdc1\u003C/strong>\u003C/span> partition, and is mounted on the /guest_images directory:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-define-as guest_images_fs fs --source-dev /dev/sdc1 --target /guest_images\u003C/strong>\u003C/span>\nPool guest_images_fs defined\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf you already have an XML configuration of the storage pool you want to create, you can also define the pool based on the XML. For details, see \u003Ca class=\"link\" href=\"#filesystem-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools\" title=\"15.4.3. Filesystem-based storage pool parameters\">Filesystem-based storage pool parameters\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Define the storage pool target path\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-build\u003C/code> command to create a storage pool target path for a pre-formatted file-system storage pool, initialize the storage source device, and define the format of the data.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-build guest_images_fs\u003C/strong>\u003C/span>\n  Pool guest_images_fs built\n\n# \u003Cspan class=\"strong strong\">\u003Cstrong>ls -la /guest_images\u003C/strong>\u003C/span>\n  total 8\n  drwx------.  2 root root 4096 May 31 19:38 .\n  dr-xr-xr-x. 25 root root 4096 May 31 19:38 ..\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Verify that the pool was created\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-list\u003C/code> command to verify that the pool was created.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-list --all\u003C/strong>\u003C/span>\n\n  Name                 State      Autostart\n  -----------------------------------------\n  default              active     yes\n  guest_images_fs      inactive   no\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Start the storage pool\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-start\u003C/code> command to mount the storage pool.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-start guest_images_fs\u003C/strong>\u003C/span>\n  Pool guest_images_fs started\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal command\">virsh pool-start\u003C/code> command is only necessary for persistent storage pools. Transient storage pools are automatically started when they are created.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: Turn on autostart\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tBy default, a storage pool defined with the \u003Ccode class=\"literal command\">virsh\u003C/code> command is not set to automatically start each time virtualization services start. Use the \u003Ccode class=\"literal command\">virsh pool-autostart\u003C/code> command to configure the storage pool to autostart.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-autostart guest_images_fs\u003C/strong>\u003C/span>\n  Pool guest_images_fs marked as autostarted\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-info\u003C/code> command to verify that the storage pool is in the \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>running\u003C/em>\u003C/span>\u003C/code> state. Check if the sizes reported are as expected and if autostart is configured correctly.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-info guest_images_fs\u003C/strong>\u003C/span>\n  Name:           guest_images_fs\n  UUID:           c7466869-e82a-a66c-2187-dc9d6f0877d0\n  State:          running\n  Persistent:     yes\n  Autostart:      yes\n  Capacity:       458.39 GB\n  Allocation:     197.91 MB\n  Available:      458.20 GB\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tVerify there is a \u003Ccode class=\"literal filename\">lost+found\u003C/code> directory in the target path on the file system, indicating that the device is mounted.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mount | grep /guest_images\u003C/strong>\u003C/span>\n  /dev/sdc1 on /guest_images type ext4 (rw)\n\n# \u003Cspan class=\"strong strong\">\u003Cstrong>ls -la /guest_images\u003C/strong>\u003C/span>\n  total 24\n  drwxr-xr-x.  3 root root  4096 May 31 19:47 .\n  dr-xr-xr-x. 25 root root  4096 May 31 19:38 ..\n  drwx------.  2 root root 16384 May 31 14:18 lost+found\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-iscsi-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.2.5. Creating iSCSI-based storage pools by using the CLI\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tInternet Small Computer Systems Interface (iSCSI) is an IP-based storage networking standard for linking data storage facilities. If you want to have a storage pool on an iSCSI server, you can use the \u003Ccode class=\"literal\">virsh\u003C/code> utility to create iSCSI-based storage pools.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnsure your hypervisor supports iSCSI-based storage pools:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-capabilities | grep \"'iscsi' supported='yes'\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf the command displays any output, iSCSI-based pools are supported.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Create a storage pool\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-define-as\u003C/code> command to define and create an iSCSI-type storage pool. For example, to create a storage pool named \u003Ccode class=\"literal\">guest_images_iscsi\u003C/code> that uses the \u003Ccode class=\"literal\">iqn.2010-05.com.example.server1:iscsirhel7guest\u003C/code> IQN on the \u003Ccode class=\"literal\">server1.example.com\u003C/code>, and is mounted on the \u003Ccode class=\"literal\">/dev/disk/by-path\u003C/code> path:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># virsh pool-define-as --name guest_images_iscsi --type iscsi --source-host server1.example.com --source-dev iqn.2010-05.com.example.server1:iscsirhel7guest --target /dev/disk/by-path\nPool guest_images_iscsi defined\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf you already have an XML configuration of the storage pool you want to create, you can also define the pool based on the XML. For details, see \u003Ca class=\"link\" href=\"#iscsi-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools\" title=\"15.4.4. iSCSI-based storage pool parameters\">iSCSI-based storage pool parameters\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Verify that the pool was created\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-list\u003C/code> command to verify that the pool was created.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-list --all\u003C/strong>\u003C/span>\n\n  Name                 State      Autostart\n  -----------------------------------------\n  default              active     yes\n  guest_images_iscsi   inactive   no\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Start the storage pool\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-start\u003C/code> command to mount the storage pool.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-start guest_images_iscsi\u003C/strong>\u003C/span>\n  Pool guest_images_iscsi started\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal command\">virsh pool-start\u003C/code> command is only necessary for persistent storage pools. Transient storage pools are automatically started when they are created.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: Turn on autostart.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tBy default, a storage pool defined with the \u003Ccode class=\"literal command\">virsh\u003C/code> command is not set to automatically start each time virtualization services start. Use the \u003Ccode class=\"literal command\">virsh pool-autostart\u003C/code> command to configure the storage pool to autostart.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-autostart guest_images_iscsi\u003C/strong>\u003C/span>\n  Pool guest_images_iscsi marked as autostarted\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-info\u003C/code> command to verify that the storage pool is in the \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>running\u003C/em>\u003C/span>\u003C/code> state. Check if the sizes reported are as expected and if autostart is configured correctly.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-info guest_images_iscsi\u003C/strong>\u003C/span>\n  Name:           guest_images_iscsi\n  UUID:           c7466869-e82a-a66c-2187-dc9d6f0877d0\n  State:          running\n  Persistent:     yes\n  Autostart:      yes\n  Capacity:       458.39 GB\n  Allocation:     197.91 MB\n  Available:      458.20 GB\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-lvm-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.2.6. Creating LVM-based storage pools by using the CLI\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tIf you want to have a storage pool that is part of an LVM volume group, you can use the \u003Ccode class=\"literal\">virsh\u003C/code> utility to create LVM-based storage pools.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Recommendations\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tBe aware of the following before creating an LVM-based storage pool:\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tLVM-based storage pools do not provide the full flexibility of LVM.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">libvirt\u003C/code> supports thin logical volumes, but does not provide the features of thin storage pools.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLVM-based storage pools are volume groups. You can create volume groups by using the \u003Ccode class=\"literal\">virsh\u003C/code> utility, but this way you can only have one device in the created volume group. To create a volume group with multiple devices, use the LVM utility instead, see \u003Ca class=\"link\" href=\"https://www.redhat.com/sysadmin/create-volume-group\">How to create a volume group in Linux with LVM\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor more detailed information about volume groups, refer to the \u003Cspan class=\"emphasis\">\u003Cem>Red Hat Enterprise Linux Logical Volume Manager Administration Guide\u003C/em>\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tLVM-based storage pools require a full disk partition. If you activate a new partition or device by using \u003Ccode class=\"literal\">virsh\u003C/code> commands, the partition will be formatted and all data will be erased. If you are using a host’s existing volume group, as in these procedures, nothing will be erased.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnsure your hypervisor supports LVM-based storage pools:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-capabilities | grep \"'logical' supported='yes'\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf the command displays any output, LVM-based pools are supported.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Create a storage pool\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-define-as\u003C/code> command to define and create an LVM-type storage pool. For example, the following command creates a storage pool named \u003Ccode class=\"literal\">guest_images_lvm\u003C/code> that uses the \u003Ccode class=\"literal\">lvm_vg\u003C/code> volume group and is mounted on the \u003Ccode class=\"literal\">/dev/lvm_vg\u003C/code> directory:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-define-as guest_images_lvm logical --source-name lvm_vg --target /dev/lvm_vg\u003C/strong>\u003C/span>\nPool guest_images_lvm defined\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf you already have an XML configuration of the storage pool you want to create, you can also define the pool based on the XML. For details, see \u003Ca class=\"link\" href=\"#lvm-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools\" title=\"15.4.5. LVM-based storage pool parameters\">LVM-based storage pool parameters\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Verify that the pool was created\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-list\u003C/code> command to verify that the pool was created.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-list --all\u003C/strong>\u003C/span>\n\n  Name                   State      Autostart\n  -------------------------------------------\n  default                active     yes\n  guest_images_lvm       inactive   no\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Start the storage pool\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-start\u003C/code> command to mount the storage pool.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-start guest_images_lvm\u003C/strong>\u003C/span>\n  Pool guest_images_lvm started\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal command\">virsh pool-start\u003C/code> command is only necessary for persistent storage pools. Transient storage pools are automatically started when they are created.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: Turn on autostart.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tBy default, a storage pool defined with the \u003Ccode class=\"literal command\">virsh\u003C/code> command is not set to automatically start each time virtualization services start. Use the \u003Ccode class=\"literal command\">virsh pool-autostart\u003C/code> command to configure the storage pool to autostart.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-autostart guest_images_lvm\u003C/strong>\u003C/span>\n  Pool guest_images_lvm marked as autostarted\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-info\u003C/code> command to verify that the storage pool is in the \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>running\u003C/em>\u003C/span>\u003C/code> state. Check if the sizes reported are as expected and if autostart is configured correctly.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-info guest_images_lvm\u003C/strong>\u003C/span>\n  Name:           guest_images_lvm\n  UUID:           c7466869-e82a-a66c-2187-dc9d6f0877d0\n  State:          running\n  Persistent:     yes\n  Autostart:      yes\n  Capacity:       458.39 GB\n  Allocation:     197.91 MB\n  Available:      458.20 GB\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-nfs-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.2.7. Creating NFS-based storage pools by using the CLI\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tIf you want to have a storage pool on a Network File System (NFS) server, you can use the \u003Ccode class=\"literal\">virsh\u003C/code> utility to create NFS-based storage pools.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnsure your hypervisor supports NFS-based storage pools:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-capabilities | grep \"&lt;value&gt;nfs&lt;/value&gt;\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf the command displays any output, NFS-based pools are supported.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Create a storage pool\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the virsh \u003Ccode class=\"literal command\">pool-define-as\u003C/code> command to define and create an NFS-type storage pool. For example, to create a storage pool named \u003Ccode class=\"literal\">guest_images_netfs\u003C/code> that uses a NFS server with IP \u003Ccode class=\"literal\">111.222.111.222\u003C/code> mounted on the server directory \u003Ccode class=\"literal\">/home/net_mount\u003C/code> by using the target directory \u003Ccode class=\"literal\">/var/lib/libvirt/images/nfspool\u003C/code>:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-define-as --name guest_images_netfs --type netfs --source-host='111.222.111.222' --source-path='/home/net_mount' --source-format='nfs' --target='/var/lib/libvirt/images/nfspool'\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf you already have an XML configuration of the storage pool you want to create, you can also define the pool based on the XML. For details, see \u003Ca class=\"link\" href=\"#nfs-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools\" title=\"15.4.6. NFS-based storage pool parameters\">NFS-based storage pool parameters\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Verify that the pool was created\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-list\u003C/code> command to verify that the pool was created.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-list --all\u003C/strong>\u003C/span>\n\n  Name                 State      Autostart\n  -----------------------------------------\n  default              active     yes\n  guest_images_netfs   inactive   no\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Start the storage pool\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-start\u003C/code> command to mount the storage pool.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-start guest_images_netfs\u003C/strong>\u003C/span>\n  Pool guest_images_netfs started\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal command\">virsh pool-start\u003C/code> command is only necessary for persistent storage pools. Transient storage pools are automatically started when they are created.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: Turn on autostart.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tBy default, a storage pool defined with the \u003Ccode class=\"literal command\">virsh\u003C/code> command is not set to automatically start each time virtualization services start. Use the \u003Ccode class=\"literal command\">virsh pool-autostart\u003C/code> command to configure the storage pool to autostart.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-autostart guest_images_netfs\u003C/strong>\u003C/span>\n  Pool guest_images_netfs marked as autostarted\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-info\u003C/code> command to verify that the storage pool is in the \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>running\u003C/em>\u003C/span>\u003C/code> state. Check if the sizes reported are as expected and if autostart is configured correctly.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-info guest_images_netfs\u003C/strong>\u003C/span>\n  Name:           guest_images_netfs\n  UUID:           c7466869-e82a-a66c-2187-dc9d6f0877d0\n  State:          running\n  Persistent:     yes\n  Autostart:      yes\n  Capacity:       458.39 GB\n  Allocation:     197.91 MB\n  Available:      458.20 GB\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-scsi-based-storage-pools-with-vhba-devices-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.2.8. Creating SCSI-based storage pools with vHBA devices by using the CLI\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tIf you want to have a storage pool on a Small Computer System Interface (SCSI) device, your host must be able to connect to the SCSI device by using a virtual host bus adapter (vHBA). You can then use the \u003Ccode class=\"literal\">virsh\u003C/code> utility to create SCSI-based storage pools.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnsure your hypervisor supports SCSI-based storage pools:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-capabilities | grep \"'scsi' supported='yes'\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf the command displays any output, SCSI-based pools are supported.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tBefore creating a SCSI-based storage pools with vHBA devices, create a vHBA. For more information, see \u003Ca class=\"link\" href=\"#creating-vhbas_managing-storage-for-virtual-machines\" title=\"15.10. Creating vHBAs\">Creating vHBAs\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Create a storage pool\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-define-as\u003C/code> command to define and create SCSI storage pool by using a vHBA. For example, the following creates a storage pool named \u003Ccode class=\"literal\">guest_images_vhba\u003C/code> that uses a vHBA identified by the \u003Ccode class=\"literal\">scsi_host3\u003C/code> parent adapter, world-wide port number \u003Ccode class=\"literal\">5001a4ace3ee047d\u003C/code>, and world-wide node number \u003Ccode class=\"literal\">5001a4a93526d0a1\u003C/code>. The storage pool is mounted on the \u003Ccode class=\"literal\">/dev/disk/\u003C/code> directory:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-define-as guest_images_vhba scsi --adapter-parent scsi_host3 --adapter-wwnn 5001a4a93526d0a1 --adapter-wwpn 5001a4ace3ee047d --target /dev/disk/\u003C/strong>\u003C/span>\nPool guest_images_vhba defined\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf you already have an XML configuration of the storage pool you want to create, you can also define the pool based on the XML. For details, see \u003Ca class=\"link\" href=\"#parameters-for-scsi-based-storage-pools-with-vhba-devices_assembly_parameters-for-creating-storage-pools\" title=\"15.4.7. Parameters for SCSI-based storage pools with vHBA devices\">Parameters for SCSI-based storage pools with vHBA devices\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Verify that the pool was created\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-list\u003C/code> command to verify that the pool was created.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-list --all\u003C/strong>\u003C/span>\n\n  Name                 State      Autostart\n  -----------------------------------------\n  default              active     yes\n  guest_images_vhba    inactive   no\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Start the storage pool\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-start\u003C/code> command to mount the storage pool.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-start guest_images_vhba\u003C/strong>\u003C/span>\n  Pool guest_images_vhba started\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal command\">virsh pool-start\u003C/code> command is only necessary for persistent storage pools. Transient storage pools are automatically started when they are created.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: Turn on autostart.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tBy default, a storage pool defined with the \u003Ccode class=\"literal command\">virsh\u003C/code> command is not set to automatically start each time virtualization services start. Use the \u003Ccode class=\"literal command\">virsh pool-autostart\u003C/code> command to configure the storage pool to autostart.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-autostart guest_images_vhba\u003C/strong>\u003C/span>\n  Pool guest_images_vhba marked as autostarted\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh pool-info\u003C/code> command to verify that the storage pool is in the \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>running\u003C/em>\u003C/span>\u003C/code> state. Check if the sizes reported are as expected and if autostart is configured correctly.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-info guest_images_vhba\u003C/strong>\u003C/span>\n  Name:           guest_images_vhba\n  UUID:           c7466869-e82a-a66c-2187-dc9d6f0877d0\n  State:          running\n  Persistent:     yes\n  Autostart:      yes\n  Capacity:       458.39 GB\n  Allocation:     197.91 MB\n  Available:      458.20 GB\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"deleting-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.2.9. Deleting storage pools by using the CLI\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tTo remove a storage pool from your host system, you must stop the pool and remove its XML definition.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tList the defined storage pools by using the \u003Ccode class=\"literal\">virsh pool-list\u003C/code> command.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-list --all\u003C/strong>\u003C/span>\nName                 State      Autostart\n-------------------------------------------\ndefault              active     yes\nDownloads            active     yes\nRHEL-Storage-Pool   active     yes\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tStop the storage pool you want to delete by using the \u003Ccode class=\"literal\">virsh pool-destroy\u003C/code> command.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-destroy Downloads\u003C/strong>\u003C/span>\nPool Downloads destroyed\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: For some types of storage pools, you can remove the directory where the storage pool resides by using the \u003Ccode class=\"literal\">virsh pool-delete\u003C/code> command. Note that to do so, the directory must be empty.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-delete Downloads\u003C/strong>\u003C/span>\nPool Downloads deleted\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tDelete the definition of the storage pool by using the \u003Ccode class=\"literal\">virsh pool-undefine\u003C/code> command.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-undefine Downloads\u003C/strong>\u003C/span>\nPool Downloads has been undefined\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tConfirm that the storage pool was deleted.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-list --all\u003C/strong>\u003C/span>\nName                 State      Autostart\n-------------------------------------------\ndefault              active     yes\nrhel-Storage-Pool   active     yes\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"assembly_managing-virtual-machine-storage-pools-using-the-web-console_managing-storage-for-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">15.3. Managing virtual machine storage pools by using the web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tBy using the RHEL web console, you can manage the storage pools to assign storage to your virtual machines (VMs).\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can use the web console to:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-storage-pool-information-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console\" title=\"15.3.1. Viewing storage pool information by using the web console\">View storage pool information\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate storage pools:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-directory-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console\" title=\"15.3.2. Creating directory-based storage pools by using the web console\">Create directory-based storage pools\u003C/a>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_creating-nfs-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console\" title=\"15.3.3. Creating NFS-based storage pools by using the web console\">Create NFS-based storage pools\u003C/a>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_creating-iscsi-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console\" title=\"15.3.4. Creating iSCSI-based storage pools by using the web console\">Create iSCSI-based storage pools\u003C/a>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_creating-lvm-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console\" title=\"15.3.6. Creating LVM-based storage pools by using the web console\">Create LVM-based storage pools\u003C/a>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#removing-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console\" title=\"15.3.7. Removing storage pools by using the web console\">Remove storage pools\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#deactivating-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console\" title=\"15.3.8. Deactivating storage pools by using the web console\">Deactivate storage pools\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"viewing-storage-pool-information-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.3.1. Viewing storage pool information by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tBy using the web console, you can view detailed information about storage pools available on your system. Storage pools can be used to create disk images for your virtual machines.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Storage Pools\u003C/span> at the top of the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Storage pools\u003C/strong>\u003C/span> window appears, showing a list of configured storage pools.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/81a16ce22f8b1319335bf47350b7fb5b/web-console-storage-pools-window.png\" alt=\"Image displaying the storage pool tab of the web console with information about existing storage pools.\"/>\u003C/div>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe information includes the following:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Name\u003C/strong>\u003C/span> - The name of the storage pool.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Size\u003C/strong>\u003C/span> - The current allocation and the total capacity of the storage pool.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Connection\u003C/strong>\u003C/span> - The connection used to access the storage pool.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>State\u003C/strong>\u003C/span> - The state of the storage pool.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick the arrow next to the storage pool whose information you want to see.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe row expands to reveal the Overview pane with detailed information about the selected storage pool.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/fd11c96612cbc09c36ff7715bb87bfa5/virt-cockpit-storage-pool-overview.png\" alt=\"Image displaying the detailed information about the selected storage pool.\"/>\u003C/div>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe information includes:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Target path\u003C/strong>\u003C/span> - The location of the storage pool.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Persistent\u003C/strong>\u003C/span> - Indicates whether or not the storage pool has a persistent configuration.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Autostart\u003C/strong>\u003C/span> - Indicates whether or not the storage pool starts automatically when the system boots up.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Type\u003C/strong>\u003C/span> - The type of the storage pool.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo view a list of storage volumes associated with the storage pool, click \u003Cspan class=\"guibutton\">Storage Volumes\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe Storage Volumes pane appears, showing a list of configured storage volumes.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/9a9f9fd71a75aa9359b57a30c1b78444/web-console-storage-pool-storage-volumes.png\" alt=\"Image displaying the list of storage volumes associated with the selected storage pool.\"/>\u003C/div>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe information includes:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Name\u003C/strong>\u003C/span> - The name of the storage volume.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Used by\u003C/strong>\u003C/span> - The VM that is currently using the storage volume.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Size\u003C/strong>\u003C/span> - The size of the volume.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines\" title=\"9.2. Viewing virtual machine information by using the web console\">Viewing virtual machine information by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-directory-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.3.2. Creating directory-based storage pools by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tA directory-based storage pool is based on a directory in an existing mounted file system. This is useful, for example, when you want to use the remaining space on the file system for other purposes.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the RHEL web console, click \u003Cspan class=\"guibutton\">Storage pools\u003C/span> in the \u003Cspan class=\"strong strong\">\u003Cstrong>Virtual Machines\u003C/strong>\u003C/span> tab.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Storage pools\u003C/strong>\u003C/span> window appears, showing a list of configured storage pools, if any.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/81a16ce22f8b1319335bf47350b7fb5b/web-console-storage-pools-window.png\" alt=\"Image displaying all the storage pools currently configured on the host\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Create storage pool\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Create storage pool\u003C/strong>\u003C/span> dialog appears.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tEnter a name for the storage pool.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Type\u003C/strong>\u003C/span> drop down menu, select \u003Cspan class=\"strong strong\">\u003Cstrong>Filesystem directory\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/44b6aa955f1810a3a325a6d7a3a5361d/virt-cockpit-create-dir-storage-pool.png\" width=\"540\" alt=\"Image displaying the Create storage pool dialog box.\"/>\u003C/div>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tIf you do not see the \u003Cspan class=\"strong strong\">\u003Cstrong>Filesystem directory\u003C/strong>\u003C/span> option in the drop down menu, then your hypervisor does not support directory-based storage pools.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnter the following information:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Target path\u003C/strong>\u003C/span> - The location of the storage pool.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Startup\u003C/strong>\u003C/span> - Whether or not the storage pool starts when the host boots.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Create\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe storage pool is created, the \u003Cspan class=\"strong strong\">\u003Cstrong>Create Storage Pool\u003C/strong>\u003C/span> dialog closes, and the new storage pool appears in the list of storage pools.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/managing-storage-for-virtual-machines_configuring-and-managing-virtualization#understanding-storage-pools_understanding-virtual-machine-storage\">Understanding storage pools\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-storage-pool-information-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console\" title=\"15.3.1. Viewing storage pool information by using the web console\">Viewing storage pool information by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_creating-nfs-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.3.3. Creating NFS-based storage pools by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tAn NFS-based storage pool is based on a file system that is hosted on a server.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the RHEL web console, click \u003Cspan class=\"guibutton\">Storage pools\u003C/span> in the \u003Cspan class=\"strong strong\">\u003Cstrong>Virtual Machines\u003C/strong>\u003C/span> tab.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Storage pools\u003C/strong>\u003C/span> window appears, showing a list of configured storage pools, if any.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/81a16ce22f8b1319335bf47350b7fb5b/web-console-storage-pools-window.png\" alt=\"Image displaying all the storage pools currently configured on the host\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Create storage pool\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Create storage pool\u003C/strong>\u003C/span> dialog appears.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tEnter a name for the storage pool.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Type\u003C/strong>\u003C/span> drop down menu, select \u003Cspan class=\"strong strong\">\u003Cstrong>Network file system\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/d857cf84ec3d53e05114a693ad59ad12/virt-cockpit-create-nfs-storage-pool.png\" width=\"540\" alt=\"Image displaying the Create storage pool dialog box.\"/>\u003C/div>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tIf you do not see the \u003Cspan class=\"strong strong\">\u003Cstrong>Network file system\u003C/strong>\u003C/span> option in the drop down menu, then your hypervisor does not support nfs-based storage pools.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnter the rest of the information:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Target path\u003C/strong>\u003C/span> - The path specifying the target. This will be the path used for the storage pool.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Host\u003C/strong>\u003C/span> - The hostname of the network server where the mount point is located. This can be a hostname or an IP address.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Source path\u003C/strong>\u003C/span> - The directory used on the network server.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Startup\u003C/strong>\u003C/span> - Whether or not the storage pool starts when the host boots.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Create\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe storage pool is created. The \u003Cspan class=\"strong strong\">\u003Cstrong>Create storage pool\u003C/strong>\u003C/span> dialog closes, and the new storage pool appears in the list of storage pools.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/managing-storage-for-virtual-machines_configuring-and-managing-virtualization#understanding-storage-pools_understanding-virtual-machine-storage\">Understanding storage pools\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-storage-pool-information-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console\" title=\"15.3.1. Viewing storage pool information by using the web console\">Viewing storage pool information by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_creating-iscsi-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.3.4. Creating iSCSI-based storage pools by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tAn iSCSI-based storage pool is based on the Internet Small Computer Systems Interface (iSCSI), an IP-based storage networking standard for linking data storage facilities.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the RHEL web console, click \u003Cspan class=\"guibutton\">Storage pools\u003C/span> in the \u003Cspan class=\"strong strong\">\u003Cstrong>Virtual Machines\u003C/strong>\u003C/span> tab.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Storage pools\u003C/strong>\u003C/span> window appears, showing a list of configured storage pools, if any.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/81a16ce22f8b1319335bf47350b7fb5b/web-console-storage-pools-window.png\" alt=\"Image displaying all the storage pools currently configured on the host\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Create storage pool\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Create storage pool\u003C/strong>\u003C/span> dialog appears.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tEnter a name for the storage pool.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Type\u003C/strong>\u003C/span> drop down menu, select \u003Cspan class=\"strong strong\">\u003Cstrong>iSCSI target\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/44a9e3c77933238985c631021973ee53/virt-cockpit-create-iscsi-storage-pool.png\" width=\"540\" alt=\"Image displaying the Create storage pool dialog box.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnter the rest of the information:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Target Path\u003C/strong>\u003C/span> - The path specifying the target. This will be the path used for the storage pool.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Host\u003C/strong>\u003C/span> - The hostname or IP address of the ISCSI server.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Source path\u003C/strong>\u003C/span> - The unique iSCSI Qualified Name (IQN) of the iSCSI target.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Startup\u003C/strong>\u003C/span> - Whether or not the storage pool starts when the host boots.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Create\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe storage pool is created. The \u003Cspan class=\"strong strong\">\u003Cstrong>Create storage pool\u003C/strong>\u003C/span> dialog closes, and the new storage pool appears in the list of storage pools.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/managing-storage-for-virtual-machines_configuring-and-managing-virtualization#understanding-storage-pools_understanding-virtual-machine-storage\">Understanding storage pools\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-storage-pool-information-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console\" title=\"15.3.1. Viewing storage pool information by using the web console\">Viewing storage pool information by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_creating-disk-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.3.5. Creating disk-based storage pools by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tA disk-based storage pool uses entire disk partitions.\n\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tDepending on the version of libvirt being used, dedicating a disk to a storage pool may reformat and erase all data currently stored on the disk device. It is strongly recommended that you back up the data on the storage device before creating a storage pool.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tWhen whole disks or block devices are passed to the VM, the VM will likely partition it or create its own LVM groups on it. This can cause the host machine to detect these partitions or LVM groups and cause errors.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThese errors can also occur when you manually create partitions or LVM groups and pass them to the VM.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo avoid theses errors, use file-based storage pools instead.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the RHEL web console, click \u003Cspan class=\"guibutton\">Storage pools\u003C/span> in the \u003Cspan class=\"strong strong\">\u003Cstrong>Virtual Machines\u003C/strong>\u003C/span> tab.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Storage pools\u003C/strong>\u003C/span> window appears, showing a list of configured storage pools, if any.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/81a16ce22f8b1319335bf47350b7fb5b/web-console-storage-pools-window.png\" alt=\"Image displaying all the storage pools currently configured on the host\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Create storage pool\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Create storage pool\u003C/strong>\u003C/span> dialog appears.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tEnter a name for the storage pool.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Type\u003C/strong>\u003C/span> drop down menu, select \u003Cspan class=\"strong strong\">\u003Cstrong>Physical disk device\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/6027f8d3fa0d1e746ecdee8b7ef30c41/virt-cockpit-create-disk-storage-pool.png\" width=\"540\" alt=\"Image displaying the Create storage pool dialog box.\"/>\u003C/div>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tIf you do not see the \u003Cspan class=\"strong strong\">\u003Cstrong>Physical disk device\u003C/strong>\u003C/span> option in the drop down menu, then your hypervisor does not support disk-based storage pools.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnter the rest of the information:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Target Path\u003C/strong>\u003C/span> - The path specifying the target device. This will be the path used for the storage pool.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Source path\u003C/strong>\u003C/span> - The path specifying the storage device. For example, \u003Ccode class=\"literal\">/dev/sdb\u003C/code>.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Format\u003C/strong>\u003C/span> - The type of the partition table.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Startup\u003C/strong>\u003C/span> - Whether or not the storage pool starts when the host boots.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Create\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe storage pool is created. The \u003Cspan class=\"strong strong\">\u003Cstrong>Create storage pool\u003C/strong>\u003C/span> dialog closes, and the new storage pool appears in the list of storage pools.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/managing-storage-for-virtual-machines_configuring-and-managing-virtualization#understanding-storage-pools_understanding-virtual-machine-storage\">Understanding storage pools\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-storage-pool-information-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console\" title=\"15.3.1. Viewing storage pool information by using the web console\">Viewing storage pool information by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_creating-lvm-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.3.6. Creating LVM-based storage pools by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tAn LVM-based storage pool is based on volume groups, which you can manage by using the Logical Volume Manager (LVM). A volume group is a combination of multiple physical volumes that creates a single storage structure.\n\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tLVM-based storage pools do not provide the full flexibility of LVM.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">libvirt\u003C/code> supports thin logical volumes, but does not provide the features of thin storage pools.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tLVM-based storage pools require a full disk partition. If you activate a new partition or device by using \u003Ccode class=\"literal\">virsh\u003C/code> commands, the partition will be formatted and all data will be erased. If you are using a host’s existing volume group, as in these procedures, nothing will be erased.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo create a volume group with multiple devices, use the LVM utility instead, see \u003Ca class=\"link\" href=\"https://www.redhat.com/sysadmin/create-volume-group\">How to create a volume group in Linux with LVM\u003C/a>.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tFor more detailed information about volume groups, refer to the \u003Cspan class=\"emphasis\">\u003Cem>Red Hat Enterprise Linux Logical Volume Manager Administration Guide\u003C/em>\u003C/span>.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the RHEL web console, click \u003Cspan class=\"guibutton\">Storage pools\u003C/span> in the \u003Cspan class=\"strong strong\">\u003Cstrong>Virtual Machines\u003C/strong>\u003C/span> tab.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Storage pools\u003C/strong>\u003C/span> window appears, showing a list of configured storage pools, if any.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/81a16ce22f8b1319335bf47350b7fb5b/web-console-storage-pools-window.png\" alt=\"Image displaying all the storage pools currently configured on the host\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Create storage pool\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Create storage pool\u003C/strong>\u003C/span> dialog appears.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tEnter a name for the storage pool.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Type\u003C/strong>\u003C/span> drop down menu, select \u003Cspan class=\"strong strong\">\u003Cstrong>LVM volume group\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/ebc6eacf244bbe6f26cf069bb9b13d44/virt-cockpit-create-lvm-storage-pool.png\" width=\"540\" alt=\"Image displaying the Create storage pool dialog box.\"/>\u003C/div>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tIf you do not see the \u003Cspan class=\"strong strong\">\u003Cstrong>LVM volume group\u003C/strong>\u003C/span> option in the drop down menu, then your hypervisor does not support LVM-based storage pools.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnter the rest of the information:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Source volume group\u003C/strong>\u003C/span> - The name of the LVM volume group that you wish to use.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Startup\u003C/strong>\u003C/span> - Whether or not the storage pool starts when the host boots.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Create\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe storage pool is created. The \u003Cspan class=\"strong strong\">\u003Cstrong>Create storage pool\u003C/strong>\u003C/span> dialog closes, and the new storage pool appears in the list of storage pools.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/managing-storage-for-virtual-machines_configuring-and-managing-virtualization#understanding-storage-pools_understanding-virtual-machine-storage\">Understanding storage pools\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-storage-pool-information-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console\" title=\"15.3.1. Viewing storage pool information by using the web console\">Viewing storage pool information by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"removing-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.3.7. Removing storage pools by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tYou can remove storage pools to free up resources on the host or on the network to improve system performance. Deleting storage pools also frees up resources that can then be used by other virtual machines (VMs).\n\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tUnless explicitly specified, deleting a storage pool does not simultaneously delete the storage volumes inside that pool.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\t\tTo temporarily deactivate a storage pool instead of deleting it, see \u003Ca class=\"link\" href=\"#deactivating-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console\" title=\"15.3.8. Deactivating storage pools by using the web console\">Deactivating storage pools by using the web console\u003C/a>\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#detaching-disks-from-virtual-machines_assembly_managing-virtual-machine-storage-disks-using-the-web-console\" title=\"15.8.4. Detaching disks from virtual machines by using the web console\">Detach the disk\u003C/a> from the VM.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIf you want to delete the associated storage volumes along with the pool, activate the pool.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Storage Pools\u003C/span> on the \u003Cspan class=\"strong strong\">\u003Cstrong>Virtual Machines\u003C/strong>\u003C/span> tab.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Storage Pools\u003C/strong>\u003C/span> window appears, showing a list of configured storage pools.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/81a16ce22f8b1319335bf47350b7fb5b/web-console-storage-pools-window.png\" alt=\"Image displaying all the storage pools currently configured on the host.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick the Menu button \u003Cspan class=\"guibutton\">⋮\u003C/span> of the storage pool you want to delete and click \u003Cspan class=\"guibutton\">Delete\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA confirmation dialog appears.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/f4441a15c813582815e407fd20a81a79/virt-cockpit-storage-pool-delete-confirm.png\" width=\"540\" alt=\"Image displaying the Delete Storage Pool default dialog box.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tOptional: To delete the storage volumes inside the pool, select the corresponding check boxes in the dialog.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Delete\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe storage pool is deleted. If you had selected the checkbox in the previous step, the associated storage volumes are deleted as well.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/managing-storage-for-virtual-machines_configuring-and-managing-virtualization#understanding-storage-pools_understanding-virtual-machine-storage\">Understanding storage pools\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-storage-pool-information-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console\" title=\"15.3.1. Viewing storage pool information by using the web console\">Viewing storage pool information by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"deactivating-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.3.8. Deactivating storage pools by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tIf you do not want to permanently delete a storage pool, you can temporarily deactivate it instead.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tWhen you deactivate a storage pool, no new volumes can be created in that pool. However, any virtual machines (VMs) that have volumes in that pool will continue to run. This is useful for a number of reasons, for example, you can limit the number of volumes that can be created in a pool to increase system performance.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tTo deactivate a storage pool by using the RHEL web console, see the following procedure.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Storage Pools\u003C/span> at the top of the Virtual Machines tab. The Storage Pools window appears, showing a list of configured storage pools.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/81a16ce22f8b1319335bf47350b7fb5b/web-console-storage-pools-window.png\" alt=\"Image displaying all the storage pools currently configured on the host.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Deactivate\u003C/span> on the storage pool row.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe storage pool is deactivated.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/managing-storage-for-virtual-machines_configuring-and-managing-virtualization#understanding-storage-pools_understanding-virtual-machine-storage\">Understanding storage pools\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-storage-pool-information-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console\" title=\"15.3.1. Viewing storage pool information by using the web console\">Viewing storage pool information by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"assembly_parameters-for-creating-storage-pools_managing-storage-for-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">15.4. Parameters for creating storage pools\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBased on the type of storage pool you require, you can modify its XML configuration file and define a specific type of storage pool. This section provides information about the XML parameters required for creating various types of storage pools along with examples.\n\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"directory-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.4.1. Directory-based storage pool parameters\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tWhen you want to create or modify a directory-based storage pool by using an XML configuration file, you must include certain required parameters. See the following table for more information about these parameters.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tYou can use the \u003Ccode class=\"literal command\">virsh pool-define\u003C/code> command to create a storage pool based on the XML configuration in a specified file. For example:\n\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-define ~/guest_images.xml\u003C/strong>\u003C/span>\n  Pool defined from guest_images_dir\u003C/pre>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Parameters\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tThe following table provides a list of required parameters for the XML file for a directory-based storage pool.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Crh-table id=\"idm140237774690032\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 15.1. Directory-based storage pool parameters\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 50%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 50%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237774685184\" scope=\"col\">Description\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237774684096\" scope=\"col\">XML\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237774685184\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe type of storage pool\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237774684096\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;pool type='dir'&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237774685184\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe name of the storage pool\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237774684096\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;name&gt;\u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>name\u003C/em>\u003C/span>\u003C/code>&lt;/name&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237774685184\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe path specifying the target. This will be the path used for the storage pool.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237774684096\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;target&gt;\u003Cbr/>    &lt;path&gt;\u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>target_path\u003C/em>\u003C/span>\u003C/code>&lt;/path&gt;\u003Cbr/> &lt;/target&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tThe following is an example of an XML file for a storage pool based on the \u003Ccode class=\"literal filename\">/guest_images\u003C/code> directory:\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Cpre class=\"programlisting language-xml\">&lt;pool type='dir'&gt;\n  &lt;name&gt;dirpool&lt;/name&gt;\n  &lt;target&gt;\n    &lt;path&gt;/guest_images&lt;/path&gt;\n  &lt;/target&gt;\n&lt;/pool&gt;\u003C/pre>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-directory-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\" title=\"15.2.2. Creating directory-based storage pools by using the CLI\">Creating directory-based storage pools by using the CLI\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"disk-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.4.2. Disk-based storage pool parameters\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tWhen you want to create or modify a disk-based storage pool by using an XML configuration file, you must include certain required parameters. See the following table for more information about these parameters.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tYou can use the \u003Ccode class=\"literal command\">virsh pool-define\u003C/code> command to create a storage pool based on the XML configuration in a specified file. For example:\n\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-define ~/guest_images.xml\u003C/strong>\u003C/span>\n  Pool defined from guest_images_disk\u003C/pre>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Parameters\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tThe following table provides a list of required parameters for the XML file for a disk-based storage pool.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Crh-table id=\"idm140237772507664\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 15.2. Disk-based storage pool parameters\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 50%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 50%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237772502928\" scope=\"col\">Description\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237772501840\" scope=\"col\">XML\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772502928\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe type of storage pool\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772501840\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;pool type='disk'&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772502928\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe name of the storage pool\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772501840\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;name&gt;\u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>name\u003C/em>\u003C/span>\u003C/code>&lt;/name&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772502928\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe path specifying the storage device. For example, \u003Ccode class=\"literal\">/dev/sdb\u003C/code>.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772501840\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;source&gt;\u003Cbr/>    &lt;path&gt;\u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>source_path\u003C/em>\u003C/span>\u003C/code>&lt;/path&gt;\u003Cbr/> &lt;/source&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772502928\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe path specifying the target device. This will be the path used for the storage pool.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772501840\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;target&gt;\u003Cbr/>    &lt;path&gt;\u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>target_path\u003C/em>\u003C/span>\u003C/code>&lt;/path&gt;\u003Cbr/> &lt;/target&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tThe following is an example of an XML file for a disk-based storage pool:\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Cpre class=\"programlisting language-xml\">&lt;pool type='disk'&gt;\n  &lt;name&gt;phy_disk&lt;/name&gt;\n  &lt;source&gt;\n    &lt;device path='/dev/sdb'/&gt;\n    &lt;format type='gpt'/&gt;\n  &lt;/source&gt;\n  &lt;target&gt;\n    &lt;path&gt;/dev&lt;/path&gt;\n  &lt;/target&gt;\n&lt;/pool&gt;\u003C/pre>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-disk-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\" title=\"15.2.3. Creating disk-based storage pools by using the CLI\">Creating disk-based storage pools by using the CLI\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"filesystem-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.4.3. Filesystem-based storage pool parameters\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tWhen you want to create or modify a filesystem-based storage pool by using an XML configuration file, you must include certain required parameters. See the following table for more information about these parameters.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tYou can use the \u003Ccode class=\"literal command\">virsh pool-define\u003C/code> command to create a storage pool based on the XML configuration in a specified file. For example:\n\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-define ~/guest_images.xml\u003C/strong>\u003C/span>\n  Pool defined from guest_images_fs\u003C/pre>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Parameters\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tThe following table provides a list of required parameters for the XML file for a filesystem-based storage pool.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Crh-table id=\"idm140237781174592\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 15.3. Filesystem-based storage pool parameters\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 50%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 50%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237771220144\" scope=\"col\">Description\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237771219056\" scope=\"col\">XML\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771220144\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe type of storage pool\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771219056\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;pool type='fs'&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771220144\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe name of the storage pool\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771219056\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;name&gt;\u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>name\u003C/em>\u003C/span>\u003C/code>&lt;/name&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771220144\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe path specifying the partition. For example, \u003Ccode class=\"literal filename\">/dev/sdc1\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771219056\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;source&gt;\u003Cbr/>    &lt;device path=\u003Cspan class=\"emphasis\">\u003Cem>device_path\u003C/em>\u003C/span> /&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771220144\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe file system type, for example \u003Cspan class=\"strong strong\">\u003Cstrong>ext4\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771219056\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t    \u003Ccode class=\"literal\">&lt;format type=\u003Cspan class=\"emphasis\">\u003Cem>fs_type\u003C/em>\u003C/span> /&gt;\u003Cbr/> &lt;/source&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771220144\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe path specifying the target. This will be the path used for the storage pool.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771219056\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;target&gt;\u003Cbr/>     &lt;path&gt;\u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>path-to-pool\u003C/em>\u003C/span>\u003C/code>&lt;/path&gt; \u003Cbr/> &lt;/target&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tThe following is an example of an XML file for a storage pool based on the \u003Ccode class=\"literal filename\">/dev/sdc1\u003C/code> partition:\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Cpre class=\"programlisting language-xml\">&lt;pool type='fs'&gt;\n  &lt;name&gt;guest_images_fs&lt;/name&gt;\n  &lt;source&gt;\n    &lt;device path='/dev/sdc1'/&gt;\n    &lt;format type='auto'/&gt;\n  &lt;/source&gt;\n  &lt;target&gt;\n    &lt;path&gt;/guest_images&lt;/path&gt;\n  &lt;/target&gt;\n&lt;/pool&gt;\u003C/pre>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-filesystem-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\" title=\"15.2.4. Creating filesystem-based storage pools by using the CLI\">Creating filesystem-based storage pools by using the CLI\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"iscsi-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.4.4. iSCSI-based storage pool parameters\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tWhen you want to create or modify an iSCSI-based storage pool by using an XML configuration file, you must include certain required parameters. See the following table for more information about these parameters.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tYou can use the \u003Ccode class=\"literal command\">virsh pool-define\u003C/code> command to create a storage pool based on the XML configuration in a specified file. For example:\n\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-define ~/guest_images.xml\u003C/strong>\u003C/span>\n  Pool defined from guest_images_iscsi\u003C/pre>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Parameters\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tThe following table provides a list of required parameters for the XML file for an iSCSI-based storage pool.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Crh-table id=\"idm140237781147072\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 15.4. iSCSI-based storage pool parameters\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 50%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 50%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237804008720\" scope=\"col\">Description\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237804007632\" scope=\"col\">XML\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237804008720\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe type of storage pool\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237804007632\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;pool type='iscsi'&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237804008720\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe name of the storage pool\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237804007632\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;name&gt;\u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>name\u003C/em>\u003C/span>\u003C/code>&lt;/name&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237804008720\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe name of the host\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237804007632\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;source&gt;\u003Cbr/>   &lt;host name=\u003Cspan class=\"emphasis\">\u003Cem>hostname\u003C/em>\u003C/span> /&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237804008720\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe iSCSI IQN\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237804007632\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t    \u003Ccode class=\"literal\">&lt;device path= \u003Cspan class=\"emphasis\">\u003Cem>iSCSI_IQN\u003C/em>\u003C/span> /&gt; \u003Cbr/> &lt;/source&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237804008720\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe path specifying the target. This will be the path used for the storage pool.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237804007632\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;target&gt; \u003Cbr/>    &lt;path&gt;\u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>/dev/disk/by-path\u003C/em>\u003C/span>\u003C/code>&lt;/path&gt; \u003Cbr/> &lt;/target&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237804008720\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t[Optional] The IQN of the iSCSI initiator. This is only needed when the ACL restricts the LUN to a particular initiator.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237804007632\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;initiator&gt; \u003Cbr/>    &lt;iqn name='\u003Cspan class=\"emphasis\">\u003Cem>initiator0\u003C/em>\u003C/span>' /&gt; \u003Cbr/> &lt;/initiator&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tThe IQN of the iSCSI initiator can be determined by using the \u003Ccode class=\"literal command\">virsh find-storage-pool-sources-as\u003C/code> iscsi command.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tThe following is an example of an XML file for a storage pool based on the specified iSCSI device:\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Cpre class=\"programlisting language-xml\">&lt;pool type='iscsi'&gt;\n  &lt;name&gt;iSCSI_pool&lt;/name&gt;\n  &lt;source&gt;\n    &lt;host name='server1.example.com'/&gt;\n    &lt;device path='iqn.2010-05.com.example.server1:iscsirhel7guest'/&gt;\n  &lt;/source&gt;\n  &lt;target&gt;\n    &lt;path&gt;/dev/disk/by-path&lt;/path&gt;\n  &lt;/target&gt;\n&lt;/pool&gt;\u003C/pre>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-iscsi-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\" title=\"15.2.5. Creating iSCSI-based storage pools by using the CLI\">Creating iSCSI-based storage pools by using the CLI\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"lvm-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.4.5. LVM-based storage pool parameters\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tWhen you want to create or modify an LVM-based storage pool by using an XML configuration file, you must include certain required parameters. See the following table for more information about these parameters.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tYou can use the \u003Ccode class=\"literal command\">virsh pool-define\u003C/code> command to create a storage pool based on the XML configuration in a specified file. For example:\n\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-define ~/guest_images.xml\u003C/strong>\u003C/span>\n  Pool defined from guest_images_logical\u003C/pre>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Parameters\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tThe following table provides a list of required parameters for the XML file for a LVM-based storage pool.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Crh-table id=\"idm140237771252768\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 15.5. LVM-based storage pool parameters\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 50%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 50%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237771247920\" scope=\"col\">Description\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237771246832\" scope=\"col\">XML\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771247920\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe type of storage pool\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771246832\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;pool type='logical'&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771247920\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe name of the storage pool\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771246832\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;name&gt;\u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>name\u003C/em>\u003C/span>\u003C/code>&lt;/name&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771247920\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe path to the device for the storage pool\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771246832\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;source&gt; \u003Cbr/>    &lt;device path='\u003Cspan class=\"emphasis\">\u003Cem>device_path\u003C/em>\u003C/span>' /&gt;`\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771247920\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe name of the volume group\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771246832\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t    \u003Ccode class=\"literal\">&lt;name&gt;\u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>VG-name\u003C/em>\u003C/span>\u003C/code>&lt;/name&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771247920\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe virtual group format\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771246832\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t    \u003Ccode class=\"literal\">&lt;format type='lvm2' /&gt; \u003Cbr/> &lt;/source&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771247920\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe target path\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771246832\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;target&gt; \u003Cbr/>    &lt;path=\u003Cspan class=\"emphasis\">\u003Cem>target_path\u003C/em>\u003C/span> /&gt;\u003Cbr/> &lt;/target&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tIf the logical volume group is made of multiple disk partitions, there may be multiple source devices listed. For example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">&lt;source&gt;\n  &lt;device path='/dev/sda1'/&gt;\n  &lt;device path='/dev/sdb3'/&gt;\n  &lt;device path='/dev/sdc2'/&gt;\n  ...\n&lt;/source&gt;\u003C/pre>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tThe following is an example of an XML file for a storage pool based on the specified LVM:\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Cpre class=\"programlisting language-xml\">&lt;pool type='logical'&gt;\n  &lt;name&gt;guest_images_lvm&lt;/name&gt;\n  &lt;source&gt;\n    &lt;device path='/dev/sdc'/&gt;\n    &lt;name&gt;libvirt_lvm&lt;/name&gt;\n    &lt;format type='lvm2'/&gt;\n  &lt;/source&gt;\n  &lt;target&gt;\n    &lt;path&gt;/dev/libvirt_lvm&lt;/path&gt;\n  &lt;/target&gt;\n&lt;/pool&gt;\u003C/pre>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-lvm-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\" title=\"15.2.6. Creating LVM-based storage pools by using the CLI\">Creating LVM-based storage pools by using the CLI\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"nfs-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.4.6. NFS-based storage pool parameters\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tWhen you want to create or modify an NFS-based storage pool by using an XML configuration file, you must include certain required parameters. See the following table for more information about these parameters.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tYou can use the \u003Ccode class=\"literal command\">virsh pool-define\u003C/code> command to create a storage pool based on the XML configuration in a specified file. For example:\n\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-define ~/guest_images.xml\u003C/strong>\u003C/span>\n  Pool defined from guest_images_netfs\u003C/pre>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Parameters\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tThe following table provides a list of required parameters for the XML file for an NFS-based storage pool.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Crh-table id=\"idm140237773124112\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 15.6. NFS-based storage pool parameters\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 50%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 50%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237773119264\" scope=\"col\">Description\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237773118176\" scope=\"col\">XML\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773119264\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe type of storage pool\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773118176\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;pool type='netfs'&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773119264\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe name of the storage pool\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773118176\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;name&gt;\u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>name\u003C/em>\u003C/span>\u003C/code>&lt;/name&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773119264\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe hostname of the network server where the mount point is located. This can be a hostname or an IP address.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773118176\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;source&gt; \u003Cbr/>    &lt;host name=\u003Cspan class=\"emphasis\">\u003Cem>hostname\u003C/em>\u003C/span>\u003C/code> \u003Ccode class=\"literal\">/&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773119264\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe format of the storage pool\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773118176\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tOne of the following:\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003Cp>\n\t\t\t\t\t\t\t\t\t    \u003Ccode class=\"literal\">&lt;format type='nfs' /&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003Cp>\n\t\t\t\t\t\t\t\t\t    \u003Ccode class=\"literal\">&lt;format type='cifs' /&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773119264\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe directory used on the network server\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773118176\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t    \u003Ccode class=\"literal\">&lt;dir path=\u003Cspan class=\"emphasis\">\u003Cem>source_path\u003C/em>\u003C/span>\u003C/code> \u003Ccode class=\"literal\">/&gt; \u003Cbr/> &lt;/source&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773119264\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe path specifying the target. This will be the path used for the storage pool.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773118176\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;target&gt; \u003Cbr/>    &lt;path&gt;\u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>target_path\u003C/em>\u003C/span>\u003C/code>&lt;/path&gt; \u003Cbr/> &lt;/target&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Example\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tThe following is an example of an XML file for a storage pool based on the \u003Ccode class=\"literal filename\">/home/net_mount\u003C/code> directory of the \u003Ccode class=\"literal\">file_server\u003C/code> NFS server:\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Cpre class=\"programlisting language-xml\">&lt;pool type='netfs'&gt;\n  &lt;name&gt;nfspool&lt;/name&gt;\n  &lt;source&gt;\n    &lt;host name='file_server'/&gt;\n    &lt;format type='nfs'/&gt;\n    &lt;dir path='/home/net_mount'/&gt;\n  &lt;/source&gt;\n  &lt;target&gt;\n    &lt;path&gt;/var/lib/libvirt/images/nfspool&lt;/path&gt;\n  &lt;/target&gt;\n&lt;/pool&gt;\u003C/pre>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-nfs-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\" title=\"15.2.7. Creating NFS-based storage pools by using the CLI\">Creating NFS-based storage pools by using the CLI\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"parameters-for-scsi-based-storage-pools-with-vhba-devices_assembly_parameters-for-creating-storage-pools\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.4.7. Parameters for SCSI-based storage pools with vHBA devices\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tTo create or modify an XML configuration file for a SCSi-based storage pool that uses a virtual host adapter bus (vHBA) device, you must include certain required parameters in the XML configuration file. See the following table for more information about the required parameters.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tYou can use the \u003Ccode class=\"literal command\">virsh pool-define\u003C/code> command to create a storage pool based on the XML configuration in a specified file. For example:\n\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-define ~/guest_images.xml\u003C/strong>\u003C/span>\n  Pool defined from guest_images_vhba\u003C/pre>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Parameters\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tThe following table provides a list of required parameters for the XML file for a SCSI-based storage pool with vHBA.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Crh-table id=\"idm140237771891648\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 15.7. Parameters for SCSI-based storage pools with vHBA devices\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 50%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 50%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237771886768\" scope=\"col\">Description\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237771885680\" scope=\"col\">XML\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771886768\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe type of storage pool\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771885680\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;pool type='scsi'&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771886768\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe name of the storage pool\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771885680\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;name&gt;\u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>name\u003C/em>\u003C/span>\u003C/code>&lt;/name&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771886768\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe identifier of the vHBA. The \u003Ccode class=\"literal\">parent\u003C/code> attribute is optional.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771885680\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;source&gt; \u003Cbr/>    &lt;adapter type='fc_host'\u003Cbr/>    [parent=\u003Cspan class=\"emphasis\">\u003Cem>parent_scsi_device\u003C/em>\u003C/span>]\u003Cbr/>    wwnn='\u003Cspan class=\"emphasis\">\u003Cem>WWNN\u003C/em>\u003C/span>'\u003Cbr/>    wwpn='\u003Cspan class=\"emphasis\">\u003Cem>WWPN\u003C/em>\u003C/span>' /&gt;\u003Cbr/> &lt;/source&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771886768\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tThe target path. This will be the path used for the storage pool.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771885680\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;target&gt; \u003Cbr/>    &lt;path=\u003Cspan class=\"emphasis\">\u003Cem>target_path\u003C/em>\u003C/span> /&gt;\u003Cbr/> &lt;/target&gt;\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tWhen the \u003Ccode class=\"literal\">&lt;path&gt;\u003C/code> field is \u003Ccode class=\"literal filename\">\u003Cspan class=\"strong strong\">\u003Cstrong>/dev/\u003C/strong>\u003C/span>\u003C/code>, \u003Ccode class=\"literal package\">libvirt\u003C/code> generates a unique short device path for the volume device path. For example, \u003Ccode class=\"literal filename\">\u003Cspan class=\"strong strong\">\u003Cstrong>/dev/sdc\u003C/strong>\u003C/span>\u003C/code>. Otherwise, the physical host path is used. For example, \u003Ccode class=\"literal filename\">\u003Cspan class=\"strong strong\">\u003Cstrong>/dev/disk/by-path/pci-0000:10:00.0-fc-0x5006016044602198-lun-0\u003C/strong>\u003C/span>\u003C/code>. The unique short device path allows the same volume to be listed in multiple virtual machines (VMs) by multiple storage pools. If the physical host path is used by multiple VMs, duplicate device type warnings may occur.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">parent\u003C/code> attribute can be used in the \u003Ccode class=\"literal\">&lt;adapter&gt;\u003C/code> field to identify the physical HBA parent from which the NPIV LUNs by varying paths can be used. This field, \u003Ccode class=\"literal\">scsi_hostN\u003C/code>, is combined with the \u003Ccode class=\"literal\">vports\u003C/code> and \u003Ccode class=\"literal\">max_vports\u003C/code> attributes to complete the parent identification. The \u003Ccode class=\"literal\">parent\u003C/code>, \u003Ccode class=\"literal\">parent_wwnn\u003C/code>, \u003Ccode class=\"literal\">parent_wwpn\u003C/code>, or \u003Ccode class=\"literal\">parent_fabric_wwn\u003C/code> attributes provide varying degrees of assurance that after the host reboots the same HBA is used.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIf no \u003Ccode class=\"literal\">parent\u003C/code> is specified, \u003Ccode class=\"literal package\">libvirt\u003C/code> uses the first \u003Ccode class=\"literal\">scsi_hostN\u003C/code> adapter that supports NPIV.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIf only the \u003Ccode class=\"literal\">parent\u003C/code> is specified, problems can arise if additional SCSI host adapters are added to the configuration.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIf \u003Ccode class=\"literal\">parent_wwnn\u003C/code> or \u003Ccode class=\"literal\">parent_wwpn\u003C/code> is specified, after the host reboots the same HBA is used.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIf \u003Ccode class=\"literal\">parent_fabric_wwn\u003C/code> is used, after the host reboots an HBA on the same fabric is selected, regardless of the \u003Ccode class=\"literal\">scsi_hostN\u003C/code> used.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Examples\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tThe following are examples of XML files for SCSI-based storage pools with vHBA.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA storage pool that is the only storage pool on the HBA:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;pool type='scsi'&gt;\n  &lt;name&gt;vhbapool_host3&lt;/name&gt;\n  &lt;source&gt;\n    &lt;adapter type='fc_host' wwnn='5001a4a93526d0a1' wwpn='5001a4ace3ee047d'/&gt;\n  &lt;/source&gt;\n  &lt;target&gt;\n    &lt;path&gt;/dev/disk/by-path&lt;/path&gt;\n  &lt;/target&gt;\n&lt;/pool&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA storage pool that is one of several storage pools that use a single vHBA and uses the \u003Ccode class=\"literal\">parent\u003C/code> attribute to identify the SCSI host device:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;pool type='scsi'&gt;\n  &lt;name&gt;vhbapool_host3&lt;/name&gt;\n  &lt;source&gt;\n    &lt;adapter type='fc_host' parent='scsi_host3' wwnn='5001a4a93526d0a1' wwpn='5001a4ace3ee047d'/&gt;\n  &lt;/source&gt;\n  &lt;target&gt;\n    &lt;path&gt;/dev/disk/by-path&lt;/path&gt;\n  &lt;/target&gt;\n&lt;/pool&gt;\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-scsi-based-storage-pools-with-vhba-devices-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\" title=\"15.2.8. Creating SCSI-based storage pools with vHBA devices by using the CLI\">Creating SCSI-based storage pools with vHBA devices by using the CLI\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"assembly_managing-virtual-machine-storage-volumes-using-the-cli_managing-storage-for-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">15.5. Managing virtual machine storage volumes by using the CLI\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can use the CLI to manage the following aspects of your storage volumes to assign storage to your virtual machines (VMs):\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-storage-volume-information-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli\" title=\"15.5.1. Viewing storage volume information by using the CLI\">View storage volume information\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-and-assigning-storage-volumes-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli\" title=\"15.5.2. Creating and assigning storage volumes by using the CLI\">Create storage volumes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#deleting-storage-volumes-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli\" title=\"15.5.3. Deleting storage volumes by using the CLI\">Delete storage volumes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"viewing-storage-volume-information-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.5.1. Viewing storage volume information by using the CLI\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tBy using the command line, you can view a list of all storage pools available on your host, as well as details about a specified storage pool\n\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh vol-list\u003C/code> command to list the storage volumes in a specified storage pool.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh vol-list --pool RHEL-Storage-Pool --details\u003C/strong>\u003C/span>\n Name                Path                                               Type   Capacity  Allocation\n---------------------------------------------------------------------------------------------\n .bash_history       /home/VirtualMachines/.bash_history       file  18.70 KiB   20.00 KiB\n .bash_logout        /home/VirtualMachines/.bash_logout        file    18.00 B    4.00 KiB\n .bash_profile       /home/VirtualMachines/.bash_profile       file   193.00 B    4.00 KiB\n .bashrc             /home/VirtualMachines/.bashrc             file   1.29 KiB    4.00 KiB\n .git-prompt.sh      /home/VirtualMachines/.git-prompt.sh      file  15.84 KiB   16.00 KiB\n .gitconfig          /home/VirtualMachines/.gitconfig          file   167.00 B    4.00 KiB\n RHEL_Volume.qcow2   /home/VirtualMachines/RHEL8_Volume.qcow2  file  60.00 GiB   13.93 GiB\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh vol-info\u003C/code> command to list the storage volumes in a specified storage pool.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh vol-info --pool RHEL-Storage-Pool --vol RHEL_Volume.qcow2\u003C/strong>\u003C/span>\nName:           RHEL_Volume.qcow2\nType:           file\nCapacity:       60.00 GiB\nAllocation:     13.93 GiB\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-and-assigning-storage-volumes-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.5.2. Creating and assigning storage volumes by using the CLI\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tTo obtain a disk image and attach it to a virtual machine (VM) as a virtual disk, create a storage volume and assign its XML configuration to a the VM.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA storage pool with unallocated space is present on the host.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tTo verify, list the storage pools on the host:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-list --details\u003C/strong>\u003C/span>\n\nName               State     Autostart   Persistent   Capacity     Allocation   Available\n--------------------------------------------------------------------------------------------\ndefault            running   yes         yes          48.97 GiB    36.34 GiB    12.63 GiB\nDownloads          running   yes         yes          175.92 GiB   121.20 GiB   54.72 GiB\nVM-disks           running   yes         yes          175.92 GiB   121.20 GiB   54.72 GiB\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tIf you do not have an existing storage pool, create one. For more information, see \u003Ca class=\"link\" href=\"#managing-storage-for-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 15. Managing storage for virtual machines\">Managing storage for virtual machines\u003C/a>.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\" id=\"procedure-creating-and-assigning-storage-volumes-using-the-cli\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tCreate a storage volume by using the \u003Ccode class=\"literal\">virsh vol-create-as\u003C/code> command. For example, to create a 20 GB qcow2 volume based on the \u003Ccode class=\"literal\">guest-images-fs\u003C/code> storage pool:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh vol-create-as --pool guest-images-fs --name vm-disk1 --capacity 20 --format qcow2\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Important\u003C/strong>\u003C/span>: Specific storage pool types do not support the \u003Ccode class=\"literal command\">virsh vol-create-as\u003C/code> command and instead require specific processes to create storage volumes:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>iSCSI-based\u003C/strong>\u003C/span> - Prepare the iSCSI LUNs in advance on the iSCSI server.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Multipath-based\u003C/strong>\u003C/span> - Use the \u003Ccode class=\"literal command\">multipathd\u003C/code> command to prepare or manage the multipath.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>vHBA-based\u003C/strong>\u003C/span> - Prepare the fibre channel card in advance.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tCreate an XML file, and add the following lines in it. This file will be used to add the storage volume as a disk to a VM.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;disk type='volume' device='disk'&gt;\n    &lt;driver name='qemu' type='qcow2'/&gt;\n    &lt;source pool='guest-images-fs' volume='vm-disk1'/&gt;\n    &lt;target dev='hdk' bus='ide'/&gt;\n&lt;/disk&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThis example specifies a virtual disk that uses the \u003Ccode class=\"literal\">vm-disk1\u003C/code> volume, created in the previous step, and sets the volume to be set up as disk \u003Ccode class=\"literal\">hdk\u003C/code> on an \u003Ccode class=\"literal\">ide\u003C/code> bus. Modify the respective parameters as appropriate for your environment.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Important\u003C/strong>\u003C/span>: With specific storage pool types, you must use different XML formats to describe a storage volume disk.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tFor \u003Cspan class=\"emphasis\">\u003Cem>multipath-based\u003C/em>\u003C/span> pools:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;disk type='block' device='disk'&gt;\n&lt;driver name='qemu' type='raw'/&gt;\n&lt;source dev='/dev/mapper/mpatha' /&gt;\n&lt;target dev='sda' bus='scsi'/&gt;\n&lt;/disk&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tFor \u003Cspan class=\"emphasis\">\u003Cem>RBD-based storage\u003C/em>\u003C/span> pools:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">  &lt;disk type='network' device='disk'&gt;\n    &lt;driver name='qemu' type='raw'/&gt;\n    &lt;source protocol='rbd' name='pool/image'&gt;\n      &lt;host name='mon1.example.org' port='6321'/&gt;\n    &lt;/source&gt;\n    &lt;target dev='vdc' bus='virtio'/&gt;\n  &lt;/disk&gt;\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the XML file to assign the storage volume as a disk to a VM. For example, to assign a disk defined in \u003Ccode class=\"literal\">~/vm-disk1.xml\u003C/code> to the \u003Ccode class=\"literal\">testguest1\u003C/code> VM, use the following command:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh attach-device --config \u003Cspan class=\"emphasis\">\u003Cem>testguest1\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>~/vm-disk1.xml\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIn the guest operating system of the VM, confirm that the disk image has become available as an un-formatted and un-allocated disk.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"deleting-storage-volumes-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.5.3. Deleting storage volumes by using the CLI\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tTo remove a storage volume from your host system, you must stop the pool and remove its XML definition.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tAny virtual machine that uses the storage volume you want to delete is shut down.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh vol-list\u003C/code> command to list the storage volumes in a specified storage pool.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh vol-list --pool RHEL-SP\u003C/strong>\u003C/span>\n Name                 Path\n---------------------------------------------------------------\n .bash_history        /home/VirtualMachines/.bash_history\n .bash_logout         /home/VirtualMachines/.bash_logout\n .bash_profile        /home/VirtualMachines/.bash_profile\n .bashrc              /home/VirtualMachines/.bashrc\n .git-prompt.sh       /home/VirtualMachines/.git-prompt.sh\n .gitconfig           /home/VirtualMachines/.gitconfig\n vm-disk1             /home/VirtualMachines/vm-disk1\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: Use the \u003Ccode class=\"literal command\">virsh vol-wipe\u003C/code> command to wipe a storage volume. For example, to wipe a storage volume named \u003Ccode class=\"literal\">vm-disk1\u003C/code> associated with the storage pool \u003Ccode class=\"literal\">RHEL-SP\u003C/code>:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh vol-wipe --pool RHEL-SP vm-disk1\u003C/strong>\u003C/span>\nVol vm-disk1 wiped\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh vol-delete\u003C/code> command to delete a storage volume. For example, to delete a storage volume named \u003Ccode class=\"literal\">vm-disk1\u003C/code> associated with the storage pool \u003Ccode class=\"literal\">RHEL-SP\u003C/code>:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh vol-delete --pool RHEL-SP vm-disk1\u003C/strong>\u003C/span>\nVol vm-disk1 deleted\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh vol-list\u003C/code> command again to verify that the storage volume was deleted.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh vol-list --pool RHEL-SP\u003C/strong>\u003C/span>\n Name                 Path\n---------------------------------------------------------------\n .bash_history        /home/VirtualMachines/.bash_history\n .bash_logout         /home/VirtualMachines/.bash_logout\n .bash_profile        /home/VirtualMachines/.bash_profile\n .bashrc              /home/VirtualMachines/.bashrc\n .git-prompt.sh       /home/VirtualMachines/.git-prompt.sh\n .gitconfig           /home/VirtualMachines/.gitconfig\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"managing-virtual-disk-images-by-using-the-cli_managing-storage-for-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">15.6. Managing virtual disk images by using the CLI\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tVirtual disk images are a type of \u003Ca class=\"link\" href=\"#storage-volumes_understanding-virtual-machine-storage\" title=\"15.1.2. Introduction to storage volumes\">virtual storage volumes\u003C/a> and provide storage to virtual machines (VMs) in a similar way as hard drives provide storage for physical machines.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tWhen \u003Ca class=\"link\" href=\"#assembly_creating-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 3. Creating virtual machines\">creating a new VM\u003C/a> , \u003Ccode class=\"literal\">libvirt\u003C/code> creates a new disk image automatically, unless you specify otherwise. However, depending on your use case, you might want to create and manage a disk image separately from the VM.\n\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"creating-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.6.1. Creating a virtual disk image by using qemu-img\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tIf you require creating a new virtual disk image separately from a new virtual machine (VM) and \u003Ca class=\"link\" href=\"#creating-and-assigning-storage-volumes-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli\" title=\"15.5.2. Creating and assigning storage volumes by using the CLI\">creating a storage volume\u003C/a> is not viable for you, you can use the \u003Ccode class=\"literal\">qemu-img\u003C/code> command-line utility.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tCreate a virtual disk image by using the \u003Ccode class=\"literal\">qemu-img\u003C/code> utility:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>qemu-img create -f \u003Cspan class=\"emphasis\">\u003Cem>&lt;format&gt;\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>&lt;image-name&gt;\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>&lt;size&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, the following command creates a qcow2 disk image named \u003Cspan class=\"emphasis\">\u003Cem>test-image\u003C/em>\u003C/span> with the size of 30 gigabytes:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>qemu-img create -f qcow2 test-image 30G\u003C/strong>\u003C/span>\n\nFormatting 'test-img', fmt=qcow2 cluster_size=65536 extended_l2=off compression_type=zlib size=32212254720 lazy_refcounts=off refcount_bits=16\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tDisplay the information about the image you created and check that it has the required size and does not report any corruption:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>qemu-img info \u003Cspan class=\"emphasis\">\u003Cem>&lt;test-img&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nimage: test-img\nfile format: qcow2\nvirtual size: 30 GiB (32212254720 bytes)\ndisk size: 196 KiB\ncluster_size: 65536\nFormat specific information:\n    compat: 1.1\n    compression type: zlib\n    lazy refcounts: false\n    refcount bits: 16\n    corrupt: false\n    extended l2: false\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-and-assigning-storage-volumes-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli\" title=\"15.5.2. Creating and assigning storage volumes by using the CLI\">Creating and assigning storage volumes by using the CLI\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-and-attaching-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console\" title=\"15.8.2. Adding new disks to virtual machines by using the web console\">Adding new disks to virtual machines by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">qemu-img\u003C/code> man page on your system\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"checking-the-consistency-of-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.6.2. Checking the consistency of a virtual disk image\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tBefore attaching a disk image to a virtual machine (VM), ensure that the disk image does not have problems, such as corruption or high fragmentation. To do so, you can use the \u003Ccode class=\"literal\">qemu-img check\u003C/code> command.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIf needed, you can also use this command to attempt repairing the disk image.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tAny virtual machines (VMs) that use the disk image must be shut down.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">qemu-img check\u003C/code> command on the image you want to test. For example:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>qemu-img check \u003Cspan class=\"emphasis\">\u003Cem>&lt;test-name.qcow2&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n\nNo errors were found on the image.\n327434/327680 = 99.92% allocated, 0.00% fragmented, 0.00% compressed clusters\nImage end offset: 21478375424\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf the check finds problems on the disk image, the output of the command looks similar to the following:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">167 errors were found on the image.\nData may be corrupted, or further writes to the image may corrupt it.\n\n453368 leaked clusters were found on the image.\nThis means waste of disk space, but no harm to data.\n\n259 internal errors have occurred during the check.\nImage end offset: 21478375424\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo attempt repairing the detected issues, use the \u003Ccode class=\"literal\">qemu-img check\u003C/code> command with the \u003Ccode class=\"literal\">-r all\u003C/code> option. Note, however, that this might fix only some of the problems.\n\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tRepairing the disk image can cause data corruption or other issues. Back up the disk image before attempting the repair.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>qemu-img check -r all \u003Cspan class=\"emphasis\">\u003Cem>&lt;test-name.qcow2&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n\n[...]\n122 errors were found on the image.\nData may be corrupted, or further writes to the image may corrupt it.\n\n250 internal errors have occurred during the check.\nImage end offset: 27071414272\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThis output indicates the number of problems found on the disk image after the repair.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIf further disk image repairs are required, you can use various \u003Ccode class=\"literal\">libguestfs\u003C/code> tools in the \u003Ca class=\"link\" href=\"https://www.libguestfs.org/guestfish.1.html\">\u003Ccode class=\"literal\">guestfish\u003C/code> shell\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">qemu-img\u003C/code> and \u003Ccode class=\"literal\">guestfish\u003C/code> man pages on your system\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"resizing-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.6.3. Resizing a virtual disk image\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tIf an existing disk image requires additional space, you can use the \u003Ccode class=\"literal\">qemu-img resize\u003C/code> utility to change the size of the image to fit your use case.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou have created a backup of the disk image.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tAny virtual machines (VMs) that use the disk image must be shutdown.\n\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tResizing the disk image of a running VM can cause data corruption or other issues.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe hard disk of the host has sufficient free space for the intended disk image size.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Optional:\u003C/strong>\u003C/span> You have ensured that the disk image does not have data corruption or similar problems. For instructions, see \u003Ca class=\"link\" href=\"#checking-the-consistency-of-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli\" title=\"15.6.2. Checking the consistency of a virtual disk image\">Checking the consistency of a virtual disk image\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tDetermine the location of the disk image file for the VM you want to resize. For example:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh domblklist \u003Cspan class=\"emphasis\">\u003Cem>&lt;vm-name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n\n Target   Source\n----------------------------------------------------------\n vda      /home/username/disk-images/\u003Cspan class=\"emphasis\">\u003Cem>example-image.qcow2\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Optional:\u003C/strong>\u003C/span> Back up the current disk image.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cp \u003Cspan class=\"emphasis\">\u003Cem>&lt;example-image.qcow2&gt;\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>&lt;example-image-backup.qcow2&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">qemu-img resize\u003C/code> utility to resize the image.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, to increase the \u003Cspan class=\"emphasis\">\u003Cem>&lt;example-image.qcow2&gt;\u003C/em>\u003C/span> size by 10 gigabytes:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>qemu-img resize \u003Cspan class=\"emphasis\">\u003Cem>&lt;example-image.qcow2&gt;\u003C/em>\u003C/span> +10G\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tResize the file system, partitions, or physical volumes inside the disk image to use the additional space. To do so in a RHEL guest operating system, use the instructions in \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_storage_devices/getting-started-with-partitions_managing-storage-devices#proc_resizing-a-partition-with-parted_getting-started-with-partitions\">Managing storage devices\u003C/a> and \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_file_systems/index\">Managing file systems\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tDisplay information about the resized image and see if it has the intended size:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>qemu-img info \u003Cspan class=\"emphasis\">\u003Cem>&lt;converted-image.qcow2&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n\nimage: converted-image.qcow2\nfile format: qcow2\n\u003Cspan class=\"strong strong\">\u003Cstrong>virtual size: 30 GiB (32212254720 bytes)\u003C/strong>\u003C/span>\ndisk size: 196 KiB\ncluster_size: 65536\nFormat specific information:\n    compat: 1.1\n    compression type: zlib\n    lazy refcounts: false\n    refcount bits: 16\n    corrupt: false\n    extended l2: false\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tCheck the resized disk image for potential errors. For instructions, see \u003Ca class=\"link\" href=\"#checking-the-consistency-of-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli\" title=\"15.6.2. Checking the consistency of a virtual disk image\">Checking the consistency of a virtual disk image\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">qemu-img\u003C/code> man page on your system\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_storage_devices/getting-started-with-partitions_managing-storage-devices#proc_resizing-a-partition-with-parted_getting-started-with-partitions\">Managing storage devices\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_file_systems/index\">Managing file systems\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"converting-between-virtual-disk-image-formats_managing-virtual-disk-images-by-using-the-cli\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.6.4. Converting between virtual disk image formats\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tYou can convert the virtual disk image to a different format by using the \u003Ccode class=\"literal\">qemu-img convert\u003C/code> command. For example, converting between virtual disk image formats might be necessary if you want to attach the disk image to a virtual machine (VM) running on a different hypervisor.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tAny virtual machines (VMs) that use the disk image must be shut down.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe source disk image format must be supported for conversion by QEMU. For a detailed list, see \u003Ca class=\"link\" href=\"#supported-disk-image-formats_managing-virtual-disk-images-by-using-the-cli\" title=\"15.6.5. Supported disk image formats\">Supported disk image formats\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">qemu-img convert\u003C/code> command to convert an existing virtual disk image to a different format. For example, to convert a \u003Cspan class=\"emphasis\">\u003Cem>raw\u003C/em>\u003C/span> disk image to a \u003Cspan class=\"emphasis\">\u003Cem>QCOW2\u003C/em>\u003C/span> disk image:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>qemu-img convert -f raw \u003Cspan class=\"emphasis\">\u003Cem>&lt;original-image.img&gt;\u003C/em>\u003C/span> -O qcow2 \u003Cspan class=\"emphasis\">\u003Cem>&lt;converted-image.qcow2&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tDisplay information about the converted image and see if it has the intended format and size.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>qemu-img info \u003Cspan class=\"emphasis\">\u003Cem>&lt;converted-image.qcow2&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n\nimage: converted-image.qcow2\nfile format: qcow2\nvirtual size: 30 GiB (32212254720 bytes)\ndisk size: 196 KiB\ncluster_size: 65536\nFormat specific information:\n    compat: 1.1\n    compression type: zlib\n    lazy refcounts: false\n    refcount bits: 16\n    corrupt: false\n    extended l2: false\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tCheck the disk image for potential errors. for instructions, see \u003Ca class=\"link\" href=\"#checking-the-consistency-of-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli\" title=\"15.6.2. Checking the consistency of a virtual disk image\">Checking the consistency of a virtual disk image\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#checking-the-consistency-of-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli\" title=\"15.6.2. Checking the consistency of a virtual disk image\">Checking the consistency of a virtual disk image\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#supported-disk-image-formats_managing-virtual-disk-images-by-using-the-cli\" title=\"15.6.5. Supported disk image formats\">Supported disk image formats\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">qemu-img\u003C/code> man page on your system\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"supported-disk-image-formats_managing-virtual-disk-images-by-using-the-cli\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.6.5. Supported disk image formats\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tTo run a virtual machine (VM) on RHEL, you must use a disk image with a supported format. You can also convert certain unsupported disk images to a supported format.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Supported disk image formats for VMs\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tYou can use disk images that use the following formats to run VMs in RHEL:\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>qcow2\u003C/strong>\u003C/span> - Provides certain additional features, such as compression.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>raw\u003C/strong>\u003C/span> - Might provide better performance.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>luks\u003C/strong>\u003C/span> - Disk images encrypted by using the Linux Unified Key Setup (LUKS) specification.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Supported disk image formats for conversion\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIf required, you can convert your disk images between the \u003Ccode class=\"literal\">raw\u003C/code> and \u003Ccode class=\"literal\">qcow2\u003C/code> formats \u003Ca class=\"link\" href=\"#converting-between-virtual-disk-image-formats_managing-virtual-disk-images-by-using-the-cli\" title=\"15.6.4. Converting between virtual disk image formats\">by using the \u003Ccode class=\"literal\">qemu-img convert\u003C/code> command\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIf you require converting a \u003Cspan class=\"strong strong\">\u003Cstrong>vmdk\u003C/strong>\u003C/span> disk image to a \u003Ccode class=\"literal\">raw\u003C/code> or \u003Ccode class=\"literal\">qcow2\u003C/code> format, convert the VM that uses the disk to KVM \u003Ca class=\"link\" href=\"https://access.redhat.com/articles/1351473\">by using the \u003Ccode class=\"literal\">virt-v2v\u003C/code> utility\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo convert other disk image formats to \u003Ccode class=\"literal\">raw\u003C/code> or \u003Ccode class=\"literal\">qcow2\u003C/code>, you can use \u003Ca class=\"link\" href=\"#converting-between-virtual-disk-image-formats_managing-virtual-disk-images-by-using-the-cli\" title=\"15.6.4. Converting between virtual disk image formats\">the \u003Ccode class=\"literal\">qemu-img convert\u003C/code> command\u003C/a>. For a list of formats that work with this command, see \u003Ca class=\"link\" href=\"https://qemu.weilnetz.de/doc/9.1/system/images.html#disk-image-file-formats\">the QEMU documentation\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tNote that in most cases, converting the disk image format of a non-KVM virtual machine to \u003Ccode class=\"literal\">qcow2\u003C/code> or \u003Ccode class=\"literal\">raw\u003C/code> is not sufficient for the VM to correctly run on RHEL KVM. In addition to converting the disk image, corresponding drivers must be installed and configured in the guest operating system of the VM. For supported hypervisor conversion, use the \u003Ccode class=\"literal\">virt-v2v\u003C/code> utility.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/articles/1351473\">Converting virtual machines from other hypervisors to KVM with virt-v2v in RHEL 7, RHEL 8, and RHEL 9\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#converting-between-virtual-disk-image-formats_managing-virtual-disk-images-by-using-the-cli\" title=\"15.6.4. Converting between virtual disk image formats\">Converting between virtual disk image formats\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"assembly_managing-virtual-machine-storage-volumes-using-the-web-console_managing-storage-for-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">15.7. Managing virtual machine storage volumes by using the web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tBy using the RHEL, you can manage the storage volumes used to allocate storage to your virtual machines (VMs).\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can use the RHEL web console to:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-storage-volumes-using-the-web-console_assembly_managing-virtual-machine-storage-volumes-using-the-web-console\" title=\"15.7.1. Creating storage volumes by using the web console\">Create storage volumes\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#removing-storage-volumes-using-the-web-console_assembly_managing-virtual-machine-storage-volumes-using-the-web-console\" title=\"15.7.2. Removing storage volumes by using the web console\">Remove storage volumes\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"creating-storage-volumes-using-the-web-console_assembly_managing-virtual-machine-storage-volumes-using-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.7.1. Creating storage volumes by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tTo create a functioning virtual machine (VM) you require a local storage device assigned to the VM that can store the VM image and VM-related data. You can create a storage volume in a storage pool and assign it to a VM as a storage disk.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tTo create storage volumes by using the web console, see the following procedure.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Storage Pools\u003C/span> at the top of the Virtual Machines tab. The Storage Pools window appears, showing a list of configured storage pools.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/81a16ce22f8b1319335bf47350b7fb5b/web-console-storage-pools-window.png\" alt=\"Image displaying all the storage pools currently configured on the host.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Storage Pools\u003C/span> window, click the storage pool from which you want to create a storage volume.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe row expands to reveal the Overview pane with basic information about the selected storage pool.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/fd11c96612cbc09c36ff7715bb87bfa5/virt-cockpit-storage-pool-overview.png\" alt=\"Image displaying the detailed information about the selected storage pool.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Storage Volumes\u003C/span> next to the Overview tab in the expanded row.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe Storage Volume tab appears with basic information about existing storage volumes, if any.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/bc247223cd36c27e01b9382bba2b240a/cockpit_storage_volume_overview.png\" alt=\"Image displaying the list of storage volumes associated with the selected storage pool.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Create Volume\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Create storage volume\u003C/strong>\u003C/span> dialog appears.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/a21bb2cbb89ba46b41b31fab29b11a91/virt-cockpit-create-storage-volume.png\" width=\"540\" alt=\"Image displaying the Create Storage Volume dialog box.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnter the following information in the Create Storage Volume dialog:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Name\u003C/strong>\u003C/span> - The name of the storage volume.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Size\u003C/strong>\u003C/span> - The size of the storage volume in MiB or GiB.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Format\u003C/strong>\u003C/span> - The format of the storage volume. The supported types are \u003Ccode class=\"literal\">qcow2\u003C/code> and \u003Ccode class=\"literal\">raw\u003C/code>.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Create\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe storage volume is created, the Create Storage Volume dialog closes, and the new storage volume appears in the list of storage volumes.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/managing-storage-for-virtual-machines_configuring-and-managing-virtualization#storage-volumes_understanding-virtual-machine-storage\">Understanding storage volumes\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/managing-storage-for-virtual-machines_configuring-and-managing-virtualization#creating-and-attaching-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console\">Adding new disks to virtual machines by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"removing-storage-volumes-using-the-web-console_assembly_managing-virtual-machine-storage-volumes-using-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.7.2. Removing storage volumes by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tYou can remove storage volumes to free up space in the storage pool, or to remove storage items associated with defunct virtual machines (VMs).\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tTo remove storage volumes by using the RHEL web console, see the following procedure.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tAny virtual machine that uses the storage volume you want to delete is shut down.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Storage Pools\u003C/span> at the top of the Virtual Machines tab. The Storage Pools window appears, showing a list of configured storage pools.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/81a16ce22f8b1319335bf47350b7fb5b/web-console-storage-pools-window.png\" alt=\"Image displaying all the storage pools currently configured on the host.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Storage Pools\u003C/span> window, click the storage pool from which you want to remove a storage volume.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe row expands to reveal the Overview pane with basic information about the selected storage pool.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/fd11c96612cbc09c36ff7715bb87bfa5/virt-cockpit-storage-pool-overview.png\" alt=\"Image displaying the detailed information about the selected storage pool.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Storage Volumes\u003C/span> next to the Overview tab in the expanded row.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe Storage Volume tab appears with basic information about existing storage volumes, if any.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/bc247223cd36c27e01b9382bba2b240a/cockpit_storage_volume_overview.png\" alt=\"Image displaying the list of storage volumes associated with the selected storage pool.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tSelect the storage volume you want to remove.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/879f6bfe1aab23b034439a2e8a7e3a08/cockpit_delete_storage_volume.png\" alt=\"Image displaying the option to delete the selected storage volume.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Delete 1 Volume\u003C/span>\n\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/managing-storage-for-virtual-machines_configuring-and-managing-virtualization#storage-volumes_understanding-virtual-machine-storage\">Understanding storage volumes\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"assembly_managing-virtual-machine-storage-disks-using-the-web-console_managing-storage-for-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">15.8. Managing virtual machine storage disks by using the web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tBy using RHEL, you can manage the storage disks that are attached to your virtual machines (VMs).\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can use the RHEL web console to:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-vm-disk-information-in-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console\" title=\"15.8.1. Viewing virtual machine disk information in the web console\">View VM disk information\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-and-attaching-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console\" title=\"15.8.2. Adding new disks to virtual machines by using the web console\">Add new disks to a VM\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#attaching-existing-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console\" title=\"15.8.3. Attaching existing disks to virtual machines by using the web console\">Attach disks to a VM\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#detaching-disks-from-virtual-machines_assembly_managing-virtual-machine-storage-disks-using-the-web-console\" title=\"15.8.4. Detaching disks from virtual machines by using the web console\">Detach disks from a VM\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"viewing-vm-disk-information-in-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.8.1. Viewing virtual machine disk information in the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\t\u003Cspan id=\"viewing-vm-disk-information-in-the-rhel-8-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console\">\u003C!--Empty-->\u003C/span>\n\t\t\t\t\u003C/p>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tBy using the web console, you can view detailed information about disks assigned to a selected virtual machine (VM).\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick the VM whose information you want to see.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tScroll to \u003Cspan class=\"guimenu\">Disks\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe Disks section displays information about the disks assigned to the VM, as well as options to \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span> or \u003Cspan class=\"strong strong\">\u003Cstrong>Edit\u003C/strong>\u003C/span> disks.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/8e50855fbd710e15578ed4f41f814c8b/virt-cockpit-disk-info.png\" alt=\"Image displaying the disk usage of the selected VM.\"/>\u003C/div>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\t\tThe information includes the following:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Device\u003C/strong>\u003C/span> - The device type of the disk.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Used\u003C/strong>\u003C/span> - The amount of disk currently allocated.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Capacity\u003C/strong>\u003C/span> - The maximum size of the storage volume.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Bus\u003C/strong>\u003C/span> - The type of disk device that is emulated.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Access\u003C/strong>\u003C/span> - Whether the disk is \u003Cspan class=\"strong strong\">\u003Cstrong>Writeable\u003C/strong>\u003C/span> or \u003Cspan class=\"strong strong\">\u003Cstrong>Read-only\u003C/strong>\u003C/span>. For \u003Ccode class=\"literal\">raw\u003C/code> disks, you can also set the access to \u003Cspan class=\"strong strong\">\u003Cstrong>Writeable and shared\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Source\u003C/strong>\u003C/span> - The disk device or file.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines\" title=\"9.2. Viewing virtual machine information by using the web console\">Viewing virtual machine information by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-and-attaching-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.8.2. Adding new disks to virtual machines by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\t\u003Cspan id=\"creating-and-attaching-disks-to-virtual-machines-using-the-rhel-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console\">\u003C!--Empty-->\u003C/span>\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tYou can add new disks to virtual machines (VMs) by creating a new storage volume and attaching it to a VM by using the RHEL 9 web console.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, click the VM for which you want to create and attach a new disk.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tScroll to \u003Cspan class=\"guimenu\">Disks\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe Disks section displays information about the disks assigned to the VM, as well as options to \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span> or \u003Cspan class=\"strong strong\">\u003Cstrong>Edit\u003C/strong>\u003C/span> disks.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/8e50855fbd710e15578ed4f41f814c8b/virt-cockpit-disk-info.png\" alt=\"Image displaying the disk usage of the selected VM.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Add Disk\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe Add Disk dialog appears.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"inlinemediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/ae4927e577648165eb71d741cde570c9/virt-cockpit-add-disk.png\" width=\"540\" alt=\"Image displaying the Add Disk dialog box.\"/>\u003C/span>\n\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tSelect the \u003Cspan class=\"emphasis\">\u003Cem>Create New\u003C/em>\u003C/span> option.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tConfigure the new disk.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Pool\u003C/strong>\u003C/span> - Select the storage pool from which the virtual disk will be created.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Name\u003C/strong>\u003C/span> - Enter a name for the virtual disk that will be created.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Size\u003C/strong>\u003C/span> - Enter the size and select the unit (MiB or GiB) of the virtual disk that will be created.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Format\u003C/strong>\u003C/span> - Select the format for the virtual disk that will be created. The supported types are \u003Ccode class=\"literal\">qcow2\u003C/code> and \u003Ccode class=\"literal\">raw\u003C/code>.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Persistence\u003C/strong>\u003C/span> - If checked, the virtual disk is persistent. If not checked, the virtual disk is transient.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\t\tTransient disks can only be added to VMs that are running.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Additional Options\u003C/strong>\u003C/span> - Set additional configurations for the virtual disk.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Cache\u003C/strong>\u003C/span> - Select the cache mechanism.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Bus\u003C/strong>\u003C/span> - Select the type of disk device to emulate.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Disk Identifier\u003C/strong>\u003C/span> - Set an identifier for the attached disk that you can use for multipath storage setups. The identifier is also useful when using proprietary software licensed to specific disk serial numbers.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Add\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe virtual disk is created and connected to the VM.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-vm-disk-information-in-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console\" title=\"15.8.1. Viewing virtual machine disk information in the web console\">Viewing virtual machine disk information in the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#attaching-existing-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console\" title=\"15.8.3. Attaching existing disks to virtual machines by using the web console\">Attaching existing disks to virtual machines by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#detaching-disks-from-virtual-machines_assembly_managing-virtual-machine-storage-disks-using-the-web-console\" title=\"15.8.4. Detaching disks from virtual machines by using the web console\">Detaching disks from virtual machines by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"attaching-existing-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.8.3. Attaching existing disks to virtual machines by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\t\u003Cspan id=\"attaching-existing-disks-to-virtual-machines-using-the-rhel-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console\">\u003C!--Empty-->\u003C/span>\n\t\t\t\t\u003C/p>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tBy using the web console, you can attach existing storage volumes as disks to a virtual machine (VM).\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, click the VM for which you want to create and attach a new disk.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tScroll to \u003Cspan class=\"guimenu\">Disks\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe Disks section displays information about the disks assigned to the VM, as well as options to \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span> or \u003Cspan class=\"strong strong\">\u003Cstrong>Edit\u003C/strong>\u003C/span> disks.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/8e50855fbd710e15578ed4f41f814c8b/virt-cockpit-disk-info.png\" alt=\"Image displaying the disk usage of the selected VM.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Add Disk\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe Add Disk dialog appears.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/ae4927e577648165eb71d741cde570c9/virt-cockpit-add-disk.png\" width=\"540\" alt=\"Image displaying the Add Disk dialog box.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick the \u003Cspan class=\"strong strong\">\u003Cstrong>Use Existing\u003C/strong>\u003C/span> radio button.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe appropriate configuration fields appear in the Add Disk dialog.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tConfigure the disk for the VM.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Pool\u003C/strong>\u003C/span> - Select the storage pool from which the virtual disk will be attached.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Volume\u003C/strong>\u003C/span> - Select the storage volume that will be attached.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Persistence\u003C/strong>\u003C/span> - Available when the VM is running. Select the \u003Cspan class=\"strong strong\">\u003Cstrong>Always attach\u003C/strong>\u003C/span> checkbox to make the virtual disk persistent. Clear the checkbox to make the virtual disk transient.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Additional Options\u003C/strong>\u003C/span> - Set additional configurations for the virtual disk.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Cache\u003C/strong>\u003C/span> - Select the cache mechanism.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Bus\u003C/strong>\u003C/span> - Select the type of disk device to emulate.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Disk Identifier\u003C/strong>\u003C/span> - Set an identifier for the attached disk that you can use for multipath storage setups. The identifier is also useful when using proprietary software licensed to specific disk serial numbers.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Add\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe selected virtual disk is attached to the VM.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-vm-disk-information-in-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console\" title=\"15.8.1. Viewing virtual machine disk information in the web console\">Viewing virtual machine disk information in the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-and-attaching-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console\" title=\"15.8.2. Adding new disks to virtual machines by using the web console\">Adding new disks to virtual machines by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#detaching-disks-from-virtual-machines_assembly_managing-virtual-machine-storage-disks-using-the-web-console\" title=\"15.8.4. Detaching disks from virtual machines by using the web console\">Detaching disks from virtual machines by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"detaching-disks-from-virtual-machines_assembly_managing-virtual-machine-storage-disks-using-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">15.8.4. Detaching disks from virtual machines by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tBy using the web console, you can detach disks from virtual machines (VMs).\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, click the VM from which you want to detach a disk.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tScroll to \u003Cspan class=\"guimenu\">Disks\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe Disks section displays information about the disks assigned to the VM, as well as options to \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span> or \u003Cspan class=\"strong strong\">\u003Cstrong>Edit\u003C/strong>\u003C/span> disks.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/8e50855fbd710e15578ed4f41f814c8b/virt-cockpit-disk-info.png\" alt=\"Image displaying the disk usage of the selected VM.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tOn the right side of the row for the disk that you want to detach, click the Menu button \u003Cspan class=\"guibutton\">⋮\u003C/span>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the drop-down menu that appears, click the \u003Cspan class=\"guibutton\">Remove\u003C/span> button.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA \u003Ccode class=\"literal\">Remove disk from VM?\u003C/code> confirmation dialog box appears.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the confirmation dialog box, click \u003Cspan class=\"guibutton\">Remove\u003C/span>. Optionally, if you also want to remove the disk image, click \u003Cspan class=\"guibutton\">Remove and delete file\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe virtual disk is detached from the VM.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-vm-disk-information-in-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console\" title=\"15.8.1. Viewing virtual machine disk information in the web console\">Viewing virtual machine disk information in the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-and-attaching-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console\" title=\"15.8.2. Adding new disks to virtual machines by using the web console\">Adding new disks to virtual machines by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#attaching-existing-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console\" title=\"15.8.3. Attaching existing disks to virtual machines by using the web console\">Attaching existing disks to virtual machines by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"securing-iscsi-storage-pools-with-libvirt-secrets_managing-storage-for-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">15.9. Securing iSCSI storage pools with libvirt secrets\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tUsername and password parameters can be configured with \u003Ccode class=\"literal\">virsh\u003C/code> to secure an iSCSI storage pool. You can configure this before or after you define the pool, but the pool must be started for the authentication settings to take effect.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe following provides instructions for securing iSCSI-based storage pools with \u003Ccode class=\"literal command\">libvirt\u003C/code> secrets.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThis procedure is required if a \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>user_ID\u003C/em>\u003C/span>\u003C/code> and \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>password\u003C/em>\u003C/span>\u003C/code> were defined when creating the iSCSI target.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnsure that you have created an iSCSI-based storage pool. For more information, see \u003Ca class=\"link\" href=\"#creating-iscsi-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\" title=\"15.2.5. Creating iSCSI-based storage pools by using the CLI\">Creating iSCSI-based storage pools by using the CLI\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a libvirt secret file with a challenge-handshake authentication protocol (CHAP) user name. For example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;secret ephemeral='no' private='yes'&gt;\n    &lt;description&gt;Passphrase for the iSCSI example.com server&lt;/description&gt;\n    &lt;usage type='iscsi'&gt;\n        &lt;target&gt;iscsirhel7secret&lt;/target&gt;\n    &lt;/usage&gt;\n&lt;/secret&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDefine the libvirt secret with the \u003Ccode class=\"literal\">virsh secret-define\u003C/code> command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh secret-define \u003Cspan class=\"emphasis\">\u003Cem>secret.xml\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify the UUID with the \u003Ccode class=\"literal\">virsh secret-list\u003C/code> command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh secret-list\u003C/strong>\u003C/span>\nUUID                                       Usage\n--------------------------------------------------------------\n2d7891af-20be-4e5e-af83-190e8a922360      iscsi iscsirhel7secret\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAssign a secret to the UUID in the output of the previous step using the \u003Ccode class=\"literal\">virsh secret-set-value\u003C/code> command. This ensures that the CHAP username and password are in a libvirt-controlled secret list. For example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh secret-set-value --interactive \u003Cspan class=\"emphasis\">\u003Cem>2d7891af-20be-4e5e-af83-190e8a922360\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nEnter new value for secret:\nSecret value set\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd an authentication entry in the storage pool’s XML file using the \u003Ccode class=\"literal\">virsh edit\u003C/code> command, and add an \u003Ccode class=\"literal\">&lt;auth&gt;\u003C/code> element, specifying \u003Ccode class=\"literal\">authentication type\u003C/code>, \u003Ccode class=\"literal\">username\u003C/code>, and \u003Ccode class=\"literal\">secret usage\u003C/code>. For example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;pool type='iscsi'&gt;\n  &lt;name&gt;iscsirhel7pool&lt;/name&gt;\n    &lt;source&gt;\n       &lt;host name='192.0.2.1'/&gt;\n       &lt;device path='iqn.2010-05.com.example.server1:iscsirhel7guest'/&gt;\n       &lt;auth type='chap' username='_example-user_'&gt;\n          &lt;secret usage='iscsirhel7secret'/&gt;\n       &lt;/auth&gt;\n    &lt;/source&gt;\n  &lt;target&gt;\n    &lt;path&gt;/dev/disk/by-path&lt;/path&gt;\n  &lt;/target&gt;\n&lt;/pool&gt;\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">\u003Cspan class=\"strong strong\">\u003Cstrong>&lt;auth&gt;\u003C/strong>\u003C/span>\u003C/code> sub-element exists in different locations within the virtual machine’s \u003Ccode class=\"literal\">\u003Cspan class=\"strong strong\">\u003Cstrong>&lt;pool&gt;\u003C/strong>\u003C/span>\u003C/code> and \u003Ccode class=\"literal\">\u003Cspan class=\"strong strong\">\u003Cstrong>&lt;disk&gt;\u003C/strong>\u003C/span>\u003C/code> XML elements. For a \u003Ccode class=\"literal\">\u003Cspan class=\"strong strong\">\u003Cstrong>&lt;pool&gt;\u003C/strong>\u003C/span>\u003C/code>, \u003Ccode class=\"literal\">\u003Cspan class=\"strong strong\">\u003Cstrong>&lt;auth&gt;\u003C/strong>\u003C/span>\u003C/code> is specified within the \u003Ccode class=\"literal\">\u003Cspan class=\"strong strong\">\u003Cstrong>&lt;source&gt;\u003C/strong>\u003C/span>\u003C/code> element, as this describes where to find the pool sources, since authentication is a property of some pool sources (iSCSI and RBD). For a \u003Ccode class=\"literal\">\u003Cspan class=\"strong strong\">\u003Cstrong>&lt;disk&gt;\u003C/strong>\u003C/span>\u003C/code>, which is a sub-element of a domain, the authentication to the iSCSI or RBD disk is a property of the disk. In addition, the \u003Ccode class=\"literal\">\u003Cspan class=\"strong strong\">\u003Cstrong>&lt;auth&gt;\u003C/strong>\u003C/span>\u003C/code> sub-element for a disk differs from that of a storage pool.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;auth username='redhat'&gt;\n  &lt;secret type='iscsi' usage='iscsirhel7secret'/&gt;\n&lt;/auth&gt;\u003C/pre>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo activate the changes, activate the storage pool. If the pool has already been started, stop and restart the storage pool:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-destroy \u003Cspan class=\"emphasis\">\u003Cem>iscsirhel7pool\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>virsh pool-start \u003Cspan class=\"emphasis\">\u003Cem>iscsirhel7pool\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-vhbas_managing-storage-for-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">15.10. Creating vHBAs\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tA virtual host bus adapter (vHBA) device connects the host system to an SCSI device and is required for creating an SCSI-based storage pool.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can create a vHBA device by defining it in an XML configuration file.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLocate the HBAs on your host system, by using the \u003Ccode class=\"literal\">virsh nodedev-list --cap vports\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe following example shows a host that has two HBAs that support vHBA:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-list --cap vports\u003C/strong>\u003C/span>\nscsi_host3\nscsi_host4\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tView the HBA’s details, by using the \u003Ccode class=\"literal command\">virsh nodedev-dumpxml \u003Cspan class=\"emphasis\">\u003Cem>HBA_device\u003C/em>\u003C/span>\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-dumpxml scsi_host3\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe output from the command lists the \u003Ccode class=\"literal\">&lt;name&gt;\u003C/code>, \u003Ccode class=\"literal\">&lt;wwnn&gt;\u003C/code>, and \u003Ccode class=\"literal\">&lt;wwpn&gt;\u003C/code> fields, which are used to create a vHBA. \u003Ccode class=\"literal\">&lt;max_vports&gt;\u003C/code> shows the maximum number of supported vHBAs. For example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;device&gt;\n  &lt;name&gt;scsi_host3&lt;/name&gt;\n  &lt;path&gt;/sys/devices/pci0000:00/0000:00:04.0/0000:10:00.0/host3&lt;/path&gt;\n  &lt;parent&gt;pci_0000_10_00_0&lt;/parent&gt;\n  &lt;capability type='scsi_host'&gt;\n    &lt;host&gt;3&lt;/host&gt;\n    &lt;unique_id&gt;0&lt;/unique_id&gt;\n    &lt;capability type='fc_host'&gt;\n      &lt;wwnn&gt;20000000c9848140&lt;/wwnn&gt;\n      &lt;wwpn&gt;10000000c9848140&lt;/wwpn&gt;\n      &lt;fabric_wwn&gt;2002000573de9a81&lt;/fabric_wwn&gt;\n    &lt;/capability&gt;\n    &lt;capability type='vport_ops'&gt;\n      &lt;max_vports&gt;127&lt;/max_vports&gt;\n      &lt;vports&gt;0&lt;/vports&gt;\n    &lt;/capability&gt;\n  &lt;/capability&gt;\n&lt;/device&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn this example, the \u003Ccode class=\"literal\">&lt;max_vports&gt;\u003C/code> value shows there are a total 127 virtual ports available for use in the HBA configuration. The \u003Ccode class=\"literal\">&lt;vports&gt;\u003C/code> value shows the number of virtual ports currently being used. These values update after creating a vHBA.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate an XML file similar to one of the following for the vHBA host. In these examples, the file is named \u003Ccode class=\"literal filename\">vhba_host3.xml\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis example uses \u003Ccode class=\"literal\">\u003Cspan class=\"strong strong\">\u003Cstrong>scsi_host3\u003C/strong>\u003C/span>\u003C/code> to describe the parent vHBA.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;device&gt;\n  &lt;parent&gt;scsi_host3&lt;/parent&gt;\n  &lt;capability type='scsi_host'&gt;\n    &lt;capability type='fc_host'&gt;\n    &lt;/capability&gt;\n  &lt;/capability&gt;\n&lt;/device&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis example uses a WWNN/WWPN pair to describe the parent vHBA.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;device&gt;\n  &lt;name&gt;vhba&lt;/name&gt;\n  &lt;parent wwnn='20000000c9848140' wwpn='10000000c9848140'/&gt;\n  &lt;capability type='scsi_host'&gt;\n    &lt;capability type='fc_host'&gt;\n    &lt;/capability&gt;\n  &lt;/capability&gt;\n&lt;/device&gt;\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe WWNN and WWPN values must match those in the HBA details seen in the previous step.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">&lt;parent&gt;\u003C/code> field specifies the HBA device to associate with this vHBA device. The details in the \u003Ccode class=\"literal\">&lt;device&gt;\u003C/code> tag are used in the next step to create a new vHBA device for the host. For more information about the \u003Ccode class=\"literal\">nodedev\u003C/code> XML format, see \u003Ca class=\"link\" href=\"https://libvirt.org/formatnode.html\">the libvirt upstream pages\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal command\">virsh\u003C/code> command does not provide a way to define the \u003Ccode class=\"literal\">parent_wwnn\u003C/code>, \u003Ccode class=\"literal\">parent_wwpn\u003C/code>, or \u003Ccode class=\"literal\">parent_fabric_wwn\u003C/code> attributes.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a VHBA based on the XML file created in the previous step by using the \u003Ccode class=\"literal command\">virsh nodev-create\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-create vhba_host3\u003C/strong>\u003C/span>\nNode device scsi_host5 created from vhba_host3.xml\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify the new vHBA’s details (scsi_host5) by using the \u003Ccode class=\"literal command\">virsh nodedev-dumpxml\u003C/code> command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-dumpxml scsi_host5\u003C/strong>\u003C/span>\n&lt;device&gt;\n  &lt;name&gt;scsi_host5&lt;/name&gt;\n  &lt;path&gt;/sys/devices/pci0000:00/0000:00:04.0/0000:10:00.0/host3/vport-3:0-0/host5&lt;/path&gt;\n  &lt;parent&gt;scsi_host3&lt;/parent&gt;\n  &lt;capability type='scsi_host'&gt;\n    &lt;host&gt;5&lt;/host&gt;\n    &lt;unique_id&gt;2&lt;/unique_id&gt;\n    &lt;capability type='fc_host'&gt;\n      &lt;wwnn&gt;5001a4a93526d0a1&lt;/wwnn&gt;\n      &lt;wwpn&gt;5001a4ace3ee047d&lt;/wwpn&gt;\n      &lt;fabric_wwn&gt;2002000573de9a81&lt;/fabric_wwn&gt;\n    &lt;/capability&gt;\n  &lt;/capability&gt;\n&lt;/device&gt;\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-scsi-based-storage-pools-with-vhba-devices-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli\" title=\"15.2.8. Creating SCSI-based storage pools with vHBA devices by using the CLI\">Creating SCSI-based storage pools with vHBA devices by using the CLI\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_managing-gpu-devices-in-virtual-machines_configuring-and-managing-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 16. Managing GPU devices in virtual machines\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tTo enhance the graphical performance of your virtual machine (VMs) on a RHEL 9 host, you can assign a host GPU to a VM.\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tYou can detach the GPU from the host and pass full control of the GPU directly to the VM.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tYou can create multiple mediated devices from a physical GPU, and assign these devices as virtual GPUs (vGPUs) to multiple guests. This is currently only supported on selected NVIDIA GPUs, and only one mediated device can be assigned to a single guest.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tGPU assignment is currently only supported on Intel 64 and AMD64 systems.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"proc_assigning-a-gpu-to-a-virtual-machine_assembly_managing-gpu-devices-in-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">16.1. Assigning a GPU to a virtual machine\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo access and control GPUs that are attached to the host system, you must configure the host system to pass direct control of the GPU to the virtual machine (VM).\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIf you are looking for information about assigning a virtual GPU, see \u003Ca class=\"link\" href=\"#assembly_managing-nvidia-vgpu-devices_assembly_managing-gpu-devices-in-virtual-machines\" title=\"16.2. Managing NVIDIA vGPU devices\">Managing NVIDIA vGPU devices\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou must enable IOMMU support on the host machine kernel.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn an Intel host, you must enable VT-d:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tRegenerate the GRUB configuration with the \u003Ccode class=\"literal\">intel_iommu=on\u003C/code> and \u003Ccode class=\"literal\">iommu=pt\u003C/code> parameters:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --args=\"intel_iommu=on iommu_pt\" --update-kernel DEFAULT\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tReboot the host.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn an AMD host, you must enable AMD-Vi.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tNote that on AMD hosts, IOMMU is enabled by default, you can add \u003Ccode class=\"literal\">iommu=pt\u003C/code> to switch it to pass-through mode:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tRegenerate the GRUB configuration with the \u003Ccode class=\"literal\">iommu=pt\u003C/code> parameter:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --args=\"iommu=pt\" --update-kernel DEFAULT\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">pt\u003C/code> option only enables IOMMU for devices used in pass-through mode and provides better host performance. However, not all hardware supports the option. You can still assign devices even when this option is not enabled.\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tReboot the host.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tPrevent the driver from binding to the GPU.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIdentify the PCI bus address to which the GPU is attached.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lspci -Dnn | grep VGA\u003C/strong>\u003C/span>\n0000:02:00.0 VGA compatible controller [0300]: NVIDIA Corporation GK106GL [Quadro K4000] [\u003Cspan class=\"strong strong\">\u003Cstrong>10de:11fa\u003C/strong>\u003C/span>] (rev a1)\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tPrevent the host’s graphics driver from using the GPU. To do so, use the GPU PCI ID with the pci-stub driver.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tFor example, the following command prevents the driver from binding to the GPU attached at the \u003Cspan class=\"strong strong\">\u003Cstrong>10de:11fa\u003C/strong>\u003C/span> bus:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --args=\"pci-stub.ids=10de:11fa\" --update-kernel DEFAULT\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tReboot the host.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: If certain GPU functions, such as audio, cannot be passed through to the VM due to support limitations, you can modify the driver bindings of the endpoints within an IOMMU group to pass through only the necessary GPU functions.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tConvert the GPU settings to XML and note the PCI address of the endpoints that you want to prevent from attaching to the host drivers.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo do so, convert the GPU’s PCI bus address to a libvirt-compatible format by adding the \u003Ccode class=\"literal\">pci_\u003C/code> prefix to the address, and converting the delimiters to underscores.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tFor example, the following command displays the XML configuration of the GPU attached at the \u003Ccode class=\"literal\">0000:02:00.0\u003C/code> bus address.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-dumpxml pci_0000_02_00_0\u003C/strong>\u003C/span>\u003C/pre>\u003Cpre class=\"programlisting language-xml\">&lt;device&gt;\n &lt;name&gt;pci_0000_02_00_0&lt;/name&gt;\n &lt;path&gt;/sys/devices/pci0000:00/0000:00:03.0/0000:02:00.0&lt;/path&gt;\n &lt;parent&gt;pci_0000_00_03_0&lt;/parent&gt;\n &lt;driver&gt;\n  &lt;name&gt;pci-stub&lt;/name&gt;\n &lt;/driver&gt;\n &lt;capability type='pci'&gt;\n  &lt;domain&gt;0&lt;/domain&gt;\n  &lt;bus&gt;2&lt;/bus&gt;\n  &lt;slot&gt;0&lt;/slot&gt;\n  &lt;function&gt;0&lt;/function&gt;\n  &lt;product id='0x11fa'&gt;GK106GL [Quadro K4000]&lt;/product&gt;\n  &lt;vendor id='0x10de'&gt;NVIDIA Corporation&lt;/vendor&gt;\n  &lt;iommuGroup number='13'&gt;\n   &lt;address domain='0x0000' bus='0x02' slot='0x00' function='0x0'/&gt;\n   &lt;address domain='0x0000' bus='0x02' slot='0x00' function='0x1'/&gt;\n  &lt;/iommuGroup&gt;\n  &lt;pci-express&gt;\n   &lt;link validity='cap' port='0' speed='8' width='16'/&gt;\n   &lt;link validity='sta' speed='2.5' width='16'/&gt;\n  &lt;/pci-express&gt;\n &lt;/capability&gt;\n&lt;/device&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tPrevent the endpoints from attaching to the host driver.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIn this example, to assign the GPU to a VM, prevent the endpoints that correspond to the audio function, \u003Ccode class=\"literal\">&lt;address domain='0x0000' bus='0x02' slot='0x00' function='0x1'/&gt;\u003C/code>, from attaching to the host audio driver, and instead attach the endpoints to VFIO-PCI.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>driverctl set-override 0000:02:00.1 vfio-pci\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAttach the GPU to the VM\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate an XML configuration file for the GPU by using the PCI bus address.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tFor example, you can create the following XML file, GPU-Assign.xml, by using parameters from the GPU’s bus address.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;hostdev mode='subsystem' type='pci' managed='yes'&gt;\n &lt;driver name='vfio'/&gt;\n &lt;source&gt;\n  &lt;address domain='0x0000' bus='0x02' slot='0x00' function='0x0'/&gt;\n &lt;/source&gt;\n&lt;/hostdev&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSave the file on the host system.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tMerge the file with the VM’s XML configuration.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tFor example, the following command merges the GPU XML file, GPU-Assign.xml, with the XML configuration file of the \u003Ccode class=\"literal\">System1\u003C/code> VM.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh attach-device System1 --file /home/GPU-Assign.xml --persistent\u003C/strong>\u003C/span>\nDevice attached successfully.\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tThe GPU is attached as a secondary graphics device to the VM. Assigning a GPU as the primary graphics device is not supported, and Red Hat does not recommend removing the primary emulated graphics device in the VM’s XML configuration.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe device appears under the \u003Ccode class=\"literal\">&lt;devices&gt;\u003C/code> section in VM’s XML configuration. For more information, see \u003Ca class=\"link\" href=\"#sample-virtual-machine-xml-configuration_viewing-information-about-virtual-machines\" title=\"9.3. Sample virtual machine XML configuration\">Sample virtual machine XML configuration\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Known Issues\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe number of GPUs that can be attached to a VM is limited by the maximum number of assigned PCI devices, which in RHEL 9 is currently 64. However, attaching multiple GPUs to a VM is likely to cause problems with memory-mapped I/O (MMIO) on the guest, which may result in the GPUs not being available to the VM.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo work around these problems, set a larger 64-bit MMIO space and configure the vCPU physical address bits to make the extended 64-bit MMIO space addressable.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAttaching an NVIDIA GPU device to a VM that uses a RHEL 9 guest operating system currently disables the Wayland session on that VM, and loads an Xorg session instead. This is because of incompatibilities between NVIDIA drivers and Wayland.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"assembly_managing-nvidia-vgpu-devices_assembly_managing-gpu-devices-in-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">16.2. Managing NVIDIA vGPU devices\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe vGPU feature makes it possible to divide a physical NVIDIA GPU device into multiple virtual devices, referred to as \u003Ccode class=\"literal\">mediated devices\u003C/code>. These mediated devices can then be assigned to multiple virtual machines (VMs) as virtual GPUs. As a result, these VMs can share the performance of a single physical GPU.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tAssigning a physical GPU to VMs, with or without using mediated devices, makes it impossible for the host to use the GPU.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"proc_setting-up-nvidia-vgpu-devices_assembly_managing-nvidia-vgpu-devices\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">16.2.1. Setting up NVIDIA vGPU devices\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tTo set up the NVIDIA vGPU feature, you need to download NVIDIA vGPU drivers for your GPU device, create mediated devices, and assign them to the intended virtual machines. For detailed instructions, see below.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYour GPU supports vGPU mediated devices. For an up-to-date list of NVIDIA GPUs that support creating vGPUs, see the \u003Ca class=\"link\" href=\"https://docs.nvidia.com/grid/latest/grid-vgpu-release-notes-red-hat-el-kvm/index.html#validated-platforms\">NVIDIA vGPU software documentation\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIf you do not know which GPU your host is using, install the \u003Cspan class=\"emphasis\">\u003Cem>lshw\u003C/em>\u003C/span> package and use the \u003Ccode class=\"literal\">lshw -C display\u003C/code> command. The following example shows the system is using an NVIDIA Tesla P4 GPU, compatible with vGPU.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lshw -C display\u003C/strong>\u003C/span>\n\n*-display\n       description: 3D controller\n       product: GP104GL [Tesla P4]\n       vendor: NVIDIA Corporation\n       physical id: 0\n       bus info: pci@0000:01:00.0\n       version: a1\n       width: 64 bits\n       clock: 33MHz\n       capabilities: pm msi pciexpress cap_list\n       configuration: driver=vfio-pci latency=0\n       resources: irq:16 memory:f6000000-f6ffffff memory:e0000000-efffffff memory:f0000000-f1ffffff\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tDownload the NVIDIA vGPU drivers and install them on your system. For instructions, see \u003Ca class=\"link\" href=\"https://docs.nvidia.com/grid/latest/grid-software-quick-start-guide/index.html#getting-your-nvidia-grid-software\">the NVIDIA documentation\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf the NVIDIA software installer did not create the \u003Cspan class=\"strong strong\">\u003Cstrong>/etc/modprobe.d/nvidia-installer-disable-nouveau.conf\u003C/strong>\u003C/span> file, create a \u003Ccode class=\"literal\">conf\u003C/code> file of any name in \u003Cspan class=\"strong strong\">\u003Cstrong>/etc/modprobe.d/\u003C/strong>\u003C/span>, and add the following lines in the file:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">blacklist nouveau\noptions nouveau modeset=0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tRegenerate the initial ramdisk for the current kernel, then reboot.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dracut --force\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>reboot\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tCheck that the kernel has loaded the \u003Ccode class=\"literal\">nvidia_vgpu_vfio\u003C/code> module and that the \u003Ccode class=\"literal\">nvidia-vgpu-mgr.service\u003C/code> service is running.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lsmod | grep nvidia_vgpu_vfio\u003C/strong>\u003C/span>\nnvidia_vgpu_vfio 45011 0\nnvidia 14333621 10 nvidia_vgpu_vfio\nmdev 20414 2 vfio_mdev,nvidia_vgpu_vfio\nvfio 32695 3 vfio_mdev,nvidia_vgpu_vfio,vfio_iommu_type1\n\n# \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl status nvidia-vgpu-mgr.service\u003C/strong>\u003C/span>\nnvidia-vgpu-mgr.service - NVIDIA vGPU Manager Daemon\n   Loaded: loaded (/usr/lib/systemd/system/nvidia-vgpu-mgr.service; enabled; vendor preset: disabled)\n   Active: active (running) since Fri 2018-03-16 10:17:36 CET; 5h 8min ago\n Main PID: 1553 (nvidia-vgpu-mgr)\n [...]\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn addition, if creating vGPU based on an NVIDIA Ampere GPU device, ensure that virtual functions are enable for the physical GPU. For instructions, see the \u003Ca class=\"link\" href=\"https://docs.nvidia.com/grid/latest/grid-vgpu-user-guide/index.html#creating-sriov-vgpu-device-red-hat-el-kvm\">NVIDIA documentation\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tGenerate a device UUID.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>uuidgen\u003C/strong>\u003C/span>\n30820a6f-b1a5-4503-91ca-0c10ba58692a\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tPrepare an XML file with a configuration of the mediated device, based on the detected GPU hardware. For example, the following configures a mediated device of the \u003Ccode class=\"literal\">nvidia-63\u003C/code> vGPU type on an NVIDIA Tesla P4 card that runs on the 0000:01:00.0 PCI bus and uses the UUID generated in the previous step.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;device&gt;\n    &lt;parent&gt;pci_0000_01_00_0&lt;/parent&gt;\n    &lt;capability type=\"mdev\"&gt;\n        &lt;type id=\"nvidia-63\"/&gt;\n        &lt;uuid&gt;30820a6f-b1a5-4503-91ca-0c10ba58692a&lt;/uuid&gt;\n    &lt;/capability&gt;\n&lt;/device&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tDefine a vGPU mediated device based on the XML file you prepared. For example:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-define \u003Cspan class=\"emphasis\">\u003Cem>vgpu-test.xml\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nNode device mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0 created from vgpu-test.xml\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: Verify that the mediated device is listed as inactive.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-list --cap mdev --inactive\u003C/strong>\u003C/span>\nmdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tStart the vGPU mediated device you created.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-start mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0\u003C/strong>\u003C/span>\nDevice mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0 started\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: Ensure that the mediated device is listed as active.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-list --cap mdev\u003C/strong>\u003C/span>\nmdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tSet the vGPU device to start automatically after the host reboots\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-autostart mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0\u003C/strong>\u003C/span>\nDevice mdev_d196754e_d8ed_4f43_bf22_684ed698b08b_0000_9b_00_0 marked as autostarted\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tAttach the mediated device to a VM that you want to share the vGPU resources. To do so, add the following lines, along with the previously genereated UUID, to the \u003Cspan class=\"strong strong\">\u003Cstrong>&lt;devices/&gt;\u003C/strong>\u003C/span> sections in the XML configuration of the VM.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\" id=\"attaching-nvidia-vgpu-devices_assembly_managing-nvidia-vgpu-devices\">&lt;hostdev mode='subsystem' type='mdev' managed='no' model='vfio-pci' display='on'&gt;\n  &lt;source&gt;\n    &lt;address uuid='30820a6f-b1a5-4503-91ca-0c10ba58692a'/&gt;\n  &lt;/source&gt;\n&lt;/hostdev&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tNote that each UUID can only be assigned to one VM at a time. In addition, if the VM does not have QEMU video devices, such as \u003Ccode class=\"literal\">virtio-vga\u003C/code>, add also the \u003Ccode class=\"literal\">ramfb='on'\u003C/code> parameter on the \u003Ccode class=\"literal\">&lt;hostdev&gt;\u003C/code> line.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tFor full functionality of the vGPU mediated devices to be available on the assigned VMs, set up NVIDIA vGPU guest software licensing on the VMs. For further information and instructions, see the \u003Ca class=\"link\" href=\"https://docs.nvidia.com/grid/ls/latest/grid-license-server-user-guide/index.html#installing-nvidia-grid-license-server\">NVIDIA Virtual GPU Software License Server User Guide\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tQuery the capabilities of the vGPU you created, and ensure it is listed as active and persistent.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-info mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0\u003C/strong>\u003C/span>\nName:           virsh nodedev-autostart mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0\nParent:         pci_0000_01_00_0\nActive:         yes\nPersistent:     yes\nAutostart:      yes\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tStart the VM and verify that the guest operating system detects the mediated device as an NVIDIA GPU. For example, if the VM uses Linux:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lspci -d 10de: -k\u003C/strong>\u003C/span>\n07:00.0 VGA compatible controller: NVIDIA Corporation GV100GL [Tesla V100 SXM2 32GB] (rev a1)\n        Subsystem: NVIDIA Corporation Device 12ce\n        Kernel driver in use: nvidia\n        Kernel modules: nouveau, nvidia_drm, nvidia\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Known Issues\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tAssigning an NVIDIA vGPU mediated device to a VM that uses a RHEL 9 guest operating system currently disables the Wayland session on that VM, and loads an Xorg session instead. This is because of incompatibilities between NVIDIA drivers and Wayland.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://docs.nvidia.com/grid/latest/grid-vgpu-release-notes-red-hat-el-kvm/index.html#validated-platforms\">NVIDIA vGPU software documentation\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">man virsh\u003C/code> command\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_removing-nvidia-vgpu-devices_assembly_managing-nvidia-vgpu-devices\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">16.2.2. Removing NVIDIA vGPU devices\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tTo change the configuration of \u003Ca class=\"link\" href=\"#proc_setting-up-nvidia-vgpu-devices_assembly_managing-nvidia-vgpu-devices\" title=\"16.2.1. Setting up NVIDIA vGPU devices\">assigned vGPU mediated devices\u003C/a>, you need to remove the existing devices from the assigned VMs. For instructions, see below:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe VM from which you want to remove the device is shut down.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tObtain the ID of the mediated device that you want to remove.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-list --cap mdev\u003C/strong>\u003C/span>\nmdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tStop the running instance of the vGPU mediated device.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-destroy mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0\u003C/strong>\u003C/span>\nDestroyed node device 'mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0'\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: Ensure the mediated device has been deactivated.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-info mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0\u003C/strong>\u003C/span>\nName:           virsh nodedev-autostart mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0\nParent:         pci_0000_01_00_0\nActive:         no\nPersistent:     yes\nAutostart:      yes\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tRemove the device from the XML configuration of the VM. To do so, use the \u003Ccode class=\"literal\">virsh edit\u003C/code> utility to edit the XML configuration of the VM, and remove the mdev’s configuration segment. The segment will look similar to the following:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;hostdev mode='subsystem' type='mdev' managed='no' model='vfio-pci'&gt;\n  &lt;source&gt;\n    &lt;address uuid='30820a6f-b1a5-4503-91ca-0c10ba58692a'/&gt;\n  &lt;/source&gt;\n&lt;/hostdev&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tNote that stopping and detaching the mediated device does not delete it, but rather keeps it as \u003Cspan class=\"strong strong\">\u003Cstrong>defined\u003C/strong>\u003C/span>. As such, you can \u003Ca class=\"link\" href=\"#proc_setting-up-nvidia-vgpu-devices_assembly_managing-nvidia-vgpu-devices\" title=\"16.2.1. Setting up NVIDIA vGPU devices\">restart\u003C/a> and \u003Ca class=\"link\" href=\"#attaching-nvidia-vgpu-devices_assembly_managing-nvidia-vgpu-devices\">attach\u003C/a> the device to a different VM.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: To delete the stopped mediated device, remove its definition.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-undefine mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0\u003C/strong>\u003C/span>\nUndefined node device 'mdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0'\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf you only stopped and detached the device, ensure the mediated device is listed as inactive.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-list --cap mdev --inactive\u003C/strong>\u003C/span>\nmdev_30820a6f_b1a5_4503_91ca_0c10ba58692a_0000_01_00_0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf you also deleted the device, ensure the following command does not display it.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-list --cap mdev\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">man virsh\u003C/code> command\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_obtaining-nvidia-vgpu-information-about-your-system_assembly_managing-nvidia-vgpu-devices\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">16.2.3. Obtaining NVIDIA vGPU information about your system\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tTo evaluate the capabilities of the vGPU features available to you, you can obtain additional information about the mediated devices on your system, such as:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tHow many mediated devices of a given type can be created\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tWhat mediated devices are already configured on your system.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo see the available GPUs devices on your host that can support vGPU mediated devices, use the \u003Ccode class=\"literal\">virsh nodedev-list --cap mdev_types\u003C/code> command. For example, the following shows a system with two NVIDIA Quadro RTX6000 devices.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-list --cap mdev_types\u003C/strong>\u003C/span>\npci_0000_5b_00_0\npci_0000_9b_00_0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo display vGPU types supported by a specific GPU device, as well as additional metadata, use the \u003Ccode class=\"literal\">virsh nodedev-dumpxml\u003C/code> command.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-dumpxml pci_0000_9b_00_0\u003C/strong>\u003C/span>\n&lt;device&gt;\n  &lt;name&gt;pci_0000_9b_00_0&lt;/name&gt;\n  &lt;path&gt;/sys/devices/pci0000:9a/0000:9a:00.0/0000:9b:00.0&lt;/path&gt;\n  &lt;parent&gt;pci_0000_9a_00_0&lt;/parent&gt;\n  &lt;driver&gt;\n    &lt;name&gt;nvidia&lt;/name&gt;\n  &lt;/driver&gt;\n  &lt;capability type='pci'&gt;\n    &lt;class&gt;0x030000&lt;/class&gt;\n    &lt;domain&gt;0&lt;/domain&gt;\n    &lt;bus&gt;155&lt;/bus&gt;\n    &lt;slot&gt;0&lt;/slot&gt;\n    &lt;function&gt;0&lt;/function&gt;\n    &lt;product id='0x1e30'&gt;TU102GL [Quadro RTX 6000/8000]&lt;/product&gt;\n    &lt;vendor id='0x10de'&gt;NVIDIA Corporation&lt;/vendor&gt;\n    &lt;capability type='mdev_types'&gt;\n      &lt;type id='nvidia-346'&gt;\n        &lt;name&gt;GRID RTX6000-12C&lt;/name&gt;\n        &lt;deviceAPI&gt;vfio-pci&lt;/deviceAPI&gt;\n        &lt;availableInstances&gt;2&lt;/availableInstances&gt;\n      &lt;/type&gt;\n      &lt;type id='nvidia-439'&gt;\n        &lt;name&gt;GRID RTX6000-3A&lt;/name&gt;\n        &lt;deviceAPI&gt;vfio-pci&lt;/deviceAPI&gt;\n        &lt;availableInstances&gt;8&lt;/availableInstances&gt;\n      &lt;/type&gt;\n      [...]\n      &lt;type id='nvidia-440'&gt;\n        &lt;name&gt;GRID RTX6000-4A&lt;/name&gt;\n        &lt;deviceAPI&gt;vfio-pci&lt;/deviceAPI&gt;\n        &lt;availableInstances&gt;6&lt;/availableInstances&gt;\n      &lt;/type&gt;\n      &lt;type id='nvidia-261'&gt;\n        &lt;name&gt;GRID RTX6000-8Q&lt;/name&gt;\n        &lt;deviceAPI&gt;vfio-pci&lt;/deviceAPI&gt;\n        &lt;availableInstances&gt;3&lt;/availableInstances&gt;\n      &lt;/type&gt;\n    &lt;/capability&gt;\n    &lt;iommuGroup number='216'&gt;\n      &lt;address domain='0x0000' bus='0x9b' slot='0x00' function='0x3'/&gt;\n      &lt;address domain='0x0000' bus='0x9b' slot='0x00' function='0x1'/&gt;\n      &lt;address domain='0x0000' bus='0x9b' slot='0x00' function='0x2'/&gt;\n      &lt;address domain='0x0000' bus='0x9b' slot='0x00' function='0x0'/&gt;\n    &lt;/iommuGroup&gt;\n    &lt;numa node='2'/&gt;\n    &lt;pci-express&gt;\n      &lt;link validity='cap' port='0' speed='8' width='16'/&gt;\n      &lt;link validity='sta' speed='2.5' width='8'/&gt;\n    &lt;/pci-express&gt;\n  &lt;/capability&gt;\n&lt;/device&gt;\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">man virsh\u003C/code> command\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"ref_remote-desktop-streaming-services-for-nvidia-vgpu_assembly_managing-nvidia-vgpu-devices\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">16.2.4. Remote desktop streaming services for NVIDIA vGPU\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tThe following remote desktop streaming services are supported on the RHEL 9 hypervisor with NVIDIA vGPU or NVIDIA GPU passthrough enabled:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>HP ZCentral Remote Boost/Teradici\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>NICE DCV\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Mechdyne TGX\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\t\tFor support details, see the appropriate vendor support matrix.\n\t\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section _additional-resources\" id=\"related-information-assembly_managing-nvidia-vgpu-devices\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">16.2.5. Additional resources\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://docs.nvidia.com/grid/latest/grid-vgpu-release-notes-red-hat-el-kvm/index.html#validated-platforms\">NVIDIA vGPU software documentation\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-virtual-machine-network-connections_configuring-and-managing-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 17. Configuring virtual machine network connections\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tFor your virtual machines (VMs) to connect over a network to your host, to other VMs on your host, and to locations on an external network, the VM networking must be configured accordingly. To provide VM networking, the RHEL 9 hypervisor and newly created VMs have a default network configuration, which can also be modified further. For example:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tYou can enable the VMs on your host to be discovered and connected to by locations outside the host, as if the VMs were on the same network as the host.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tYou can partially or completely isolate a VM from inbound network traffic to increase its security and minimize the risk of any problems with the VM impacting the host.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tThe following sections explain the various types of VM network configuration and provide instructions for setting up selected VM network configurations.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"understanding-virtual-networking-overview_configuring-virtual-machine-network-connections\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">17.1. Understanding virtual networking\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe connection of virtual machines (VMs) to other devices and locations on a network has to be facilitated by the host hardware. The following sections explain the mechanisms of VM network connections and describe the default VM network setting.\n\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"how-virtual-networks-work_understanding-virtual-networking-overview\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">17.1.1. How virtual networks work\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tVirtual networking uses the concept of a virtual network switch. A virtual network switch is a software construct that operates on a host machine. VMs connect to the network through the virtual network switch. Based on the configuration of the virtual switch, a VM can use an existing virtual network managed by the hypervisor, or a different network connection method.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tThe following figure shows a virtual network switch connecting two VMs to the network:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/fc76a191270bd678fb6272a73e7a1014/vn-02-switchandtwoguests.png\" alt=\"vn 02 switchandtwoguests\"/>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tFrom the perspective of a guest operating system, a virtual network connection is the same as a physical network connection. Host machines view virtual network switches as network interfaces. When the \u003Ccode class=\"literal\">virtnetworkd\u003C/code> service is first installed and started, it creates \u003Cspan class=\"strong strong\">\u003Cstrong>virbr0\u003C/strong>\u003C/span>, the default network interface for VMs.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tTo view information about this interface, use the \u003Ccode class=\"literal\">ip\u003C/code> utility on the host.\n\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ip addr show \u003Cspan class=\"emphasis\">\u003Cem>virbr0\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n3: virbr0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state\nUNKNOWN link/ether 1b:c4:94:cf:fd:17 brd ff:ff:ff:ff:ff:ff\ninet 192.0.2.1/24 brd 192.0.2.255 scope global virbr0\u003C/pre>\u003Cp>\n\t\t\t\t\tBy default, all VMs on a single host are connected to the same \u003Ca class=\"link\" href=\"#virtual-networking-network-address-translation_types-of-virtual-machine-network-connections\" title=\"17.4.1. Virtual networking with network address translation\">NAT-type\u003C/a> virtual network, named \u003Cspan class=\"strong strong\">\u003Cstrong>default\u003C/strong>\u003C/span>, which uses the \u003Cspan class=\"strong strong\">\u003Cstrong>virbr0\u003C/strong>\u003C/span> interface. For details, see \u003Ca class=\"link\" href=\"#virtual-networking-default-configuration_understanding-virtual-networking-overview\" title=\"17.1.2. Virtual networking default configuration\">Virtual networking default configuration\u003C/a>.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tFor basic outbound-only network access from VMs, no additional network setup is usually needed, because the default network is installed along with the \u003Ccode class=\"literal package\">libvirt-daemon-config-network\u003C/code> package, and is automatically started when the \u003Ccode class=\"literal\">virtnetworkd\u003C/code> service is started.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIf a different VM network functionality is needed, you can create additional virtual networks and network interfaces and configure your VMs to use them. In addition to the default NAT, these networks and interfaces can be configured to use one of the following modes:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#virtual-networking-routed-mode_types-of-virtual-machine-network-connections\" title=\"17.4.2. Virtual networking in routed mode\">Routed mode\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#virtual-networking-bridged-mode_types-of-virtual-machine-network-connections\" title=\"17.4.3. Virtual networking in bridged mode\">Bridged mode\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#virtual-networking-isolated-mode_types-of-virtual-machine-network-connections\" title=\"17.4.4. Virtual networking in isolated mode\">Isolated mode\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#virtual-networking-open-mode_types-of-virtual-machine-network-connections\" title=\"17.4.5. Virtual networking in open mode\">Open mode\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"virtual-networking-default-configuration_understanding-virtual-networking-overview\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">17.1.2. Virtual networking default configuration\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tWhen the \u003Ccode class=\"literal\">virtnetworkd\u003C/code> service is first installed on a virtualization host, it contains an initial virtual network configuration in network address translation (NAT) mode. By default, all VMs on the host are connected to the same \u003Ccode class=\"literal\">libvirt\u003C/code> virtual network, named \u003Cspan class=\"strong strong\">\u003Cstrong>default\u003C/strong>\u003C/span>. VMs on this network can connect to locations both on the host and on the network beyond the host, but with the following limitations:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tVMs on the network are visible to the host and other VMs on the host, but the network traffic is affected by the firewalls in the guest operating system’s network stack and by the \u003Ccode class=\"literal\">libvirt\u003C/code> network filtering rules attached to the guest interface.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tVMs on the network can connect to locations outside the host but are not visible to them. Outbound traffic is affected by the NAT rules, as well as the host system’s firewall.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\t\tThe following diagram illustrates the default VM network configuration:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/107d0a45e24f098d2ea64be62898e9dc/vn-08-network-overview.png\" alt=\"vn 08 network overview\"/>\u003C/div>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"managing-virtual-machine-network-interfaces-using-the-web-console_configuring-virtual-machine-network-connections\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">17.2. Using the web console for managing virtual machine network interfaces\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tUsing the RHEL 9 web console, you can manage the virtual network interfaces for the virtual machines to which the web console is connected. You can:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-and-editing-virtual-network-interface-information-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console\" title=\"17.2.1. Viewing and editing virtual network interface information in the web console\">View information about network interfaces and edit them\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#adding-and-connecting-virtual-network-interfaces-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console\" title=\"17.2.2. Adding and connecting virtual network interfaces in the web console\">Add network interfaces to virtual machines\u003C/a>, and \u003Ca class=\"link\" href=\"#disconnecting-and-removing-virtual-network-interfaces-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console\" title=\"17.2.3. Disconnecting and removing virtual network interfaces in the web console\">disconnect or delete the interfaces\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"viewing-and-editing-virtual-network-interface-information-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">17.2.1. Viewing and editing virtual network interface information in the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tBy using the RHEL 9 web console, you can view and modify the virtual network interfaces on a selected virtual machine (VM):\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, click the VM whose information you want to see.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tScroll to \u003Cspan class=\"guimenu\">Network Interfaces\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe Networks Interfaces section displays information about the virtual network interface configured for the VM as well as options to \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span>, \u003Cspan class=\"strong strong\">\u003Cstrong>Delete\u003C/strong>\u003C/span>, \u003Cspan class=\"strong strong\">\u003Cstrong>Edit\u003C/strong>\u003C/span>, or \u003Cspan class=\"strong strong\">\u003Cstrong>Unplug\u003C/strong>\u003C/span> network interfaces.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/5eb5352076ad0f52c6ae9d11e6af3844/virt-cockpit-vNIC-info.png\" alt=\"Image displaying the network interface details of the selected virtual machine.\"/>\u003C/div>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe information includes the following:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Type\u003C/strong>\u003C/span> - The type of network interface for the VM. The types include virtual network, bridge to LAN, and direct attachment.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\t\tGeneric Ethernet connection is not supported in RHEL 9 and later.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Model type\u003C/strong>\u003C/span> - The model of the virtual network interface.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>MAC Address\u003C/strong>\u003C/span> - The MAC address of the virtual network interface.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>IP Address\u003C/strong>\u003C/span> - The IP address of the virtual network interface.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Source\u003C/strong>\u003C/span> - The source of the network interface. This is dependent on the network type.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>State\u003C/strong>\u003C/span> - The state of the virtual network interface.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo edit the virtual network interface settings, Click \u003Cspan class=\"guibutton\">Edit\u003C/span>. The Virtual Network Interface Settings dialog opens.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/9783ff22db053b2d7939f2dd555695f1/virt-cockpit-edit-network-if.png\" width=\"540\" alt=\"Image displaying the various options that can be edited for the selected network interface.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tChange the interface type, source, model, or MAC address.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Save\u003C/span>. The network interface is modified.\n\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tChanges to the virtual network interface settings take effect only after restarting the VM.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\tAdditionally, MAC address can only be modified when the VM is shut off.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines\" title=\"9.2. Viewing virtual machine information by using the web console\">Viewing virtual machine information by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"adding-and-connecting-virtual-network-interfaces-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">17.2.2. Adding and connecting virtual network interfaces in the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tBy using the RHEL 9 web console, you can create a virtual network interface and connect a virtual machine (VM) to it.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, click the VM whose information you want to see.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tScroll to \u003Cspan class=\"guimenu\">Network Interfaces\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe Networks Interfaces section displays information about the virtual network interface configured for the VM as well as options to \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span>, \u003Cspan class=\"strong strong\">\u003Cstrong>Edit\u003C/strong>\u003C/span>, or \u003Cspan class=\"strong strong\">\u003Cstrong>Plug\u003C/strong>\u003C/span> network interfaces.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Plug\u003C/span> in the row of the virtual network interface you want to connect.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe selected virtual network interface connects to the VM.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"disconnecting-and-removing-virtual-network-interfaces-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">17.2.3. Disconnecting and removing virtual network interfaces in the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tBy using the RHEL 9 web console, you can disconnect the virtual network interfaces connected to a selected virtual machine (VM).\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, click the VM whose information you want to see.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tScroll to \u003Cspan class=\"guimenu\">Network Interfaces\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe Networks Interfaces section displays information about the virtual network interface configured for the VM as well as options to \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span>, \u003Cspan class=\"strong strong\">\u003Cstrong>Delete\u003C/strong>\u003C/span>, \u003Cspan class=\"strong strong\">\u003Cstrong>Edit\u003C/strong>\u003C/span>, or \u003Cspan class=\"strong strong\">\u003Cstrong>Unplug\u003C/strong>\u003C/span> network interfaces.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/5eb5352076ad0f52c6ae9d11e6af3844/virt-cockpit-vNIC-info.png\" alt=\"Image displaying the network interface details of the selected virtual machine.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Unplug\u003C/span> in the row of the virtual network interface you want to disconnect.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe selected virtual network interface disconnects from the VM.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"recommended-virtual-machine-networking-configurations-using-the-command-line-interface_configuring-virtual-machine-network-connections\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">17.3. Recommended virtual machine networking configurations\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tIn many scenarios, the default VM networking configuration is sufficient. However, if adjusting the configuration is required, you can use the command-line interface (CLI) or the RHEL 9 web console to do so. The following sections describe selected VM network setups for such situations.\n\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"configuring-externally-visible-virtual-machines-using-the-command-line-interface_recommended-virtual-machine-networking-configurations-using-the-command-line-interface\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">17.3.1. Configuring externally visible virtual machines by using the command-line interface\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tBy default, a newly created VM connects to a NAT-type network that uses \u003Ccode class=\"literal\">virbr0\u003C/code>, the default virtual bridge on the host. This ensures that the VM can use the host’s network interface controller (NIC) for connecting to outside networks, but the VM is not reachable from external systems.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIf you require a VM to appear on the same external network as the hypervisor, you must use \u003Ca class=\"link\" href=\"#virtual-networking-bridged-mode_types-of-virtual-machine-network-connections\" title=\"17.4.3. Virtual networking in bridged mode\">bridged mode\u003C/a> instead. To do so, attach the VM to a bridge device connected to the hypervisor’s physical network device. To use the command-line interface for this, follow the instructions below.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tA shut-down \u003Ca class=\"link\" href=\"#assembly_creating-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 3. Creating virtual machines\">existing VM\u003C/a> with the default NAT setup.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe IP configuration of the hypervisor. This varies depending on the network connection of the host. As an example, this procedure uses a scenario where the host is connected to the network by using an ethernet cable, and the hosts' physical NIC MAC address is assigned to a static IP on a DHCP server. Therefore, the ethernet interface is treated as the hypervisor IP.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo obtain the IP configuration of the ethernet interface, use the \u003Ccode class=\"literal\">ip addr\u003C/code> utility:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip addr\u003C/strong>\u003C/span>\n[...]\nenp0s25: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000\n    link/ether 54:ee:75:49:dc:46 brd ff:ff:ff:ff:ff:ff\n    inet 192.0.2.1/24 brd 192.0.2.255 scope global dynamic noprefixroute enp0s25\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tCreate and set up a bridge connection for the physical interface on the host. For instructions, see the \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_networking/configuring-a-network-bridge_configuring-and-managing-networking\">Configuring a network bridge\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tNote that in a scenario where static IP assignment is used, you must move the IPv4 setting of the physical ethernet interface to the bridge interface.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tModify the VM’s network to use the created bridged interface. For example, the following sets \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span> to use \u003Cspan class=\"emphasis\">\u003Cem>bridge0\u003C/em>\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-xml testguest --edit --network bridge=bridge0\u003C/strong>\u003C/span>\nDomain 'testguest' defined successfully.\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tStart the VM.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh start \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the guest operating system, adjust the IP and DHCP settings of the system’s network interface as if the VM was another physical system in the same network as the hypervisor.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe specific steps for this will differ depending on the guest OS used by the VM. For example, if the guest OS is RHEL 9, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_networking/configuring-an-ethernet-connection_configuring-and-managing-networking\">Configuring an Ethernet connection\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnsure the newly created bridge is running and contains both the host’s physical interface and the interface of the VM.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link show master bridge0\u003C/strong>\u003C/span>\n2: enp0s25: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel master bridge0 state UP mode DEFAULT group default qlen 1000\n    link/ether 54:ee:75:49:dc:46 brd ff:ff:ff:ff:ff:ff\n10: vnet0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel master bridge0 state UNKNOWN mode DEFAULT group default qlen 1000\n    link/ether fe:54:00:89:15:40 brd ff:ff:ff:ff:ff:ff\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnsure the VM appears on the same external network as the hypervisor:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIn the guest operating system, obtain the network ID of the system. For example, if it is a Linux guest:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip addr\u003C/strong>\u003C/span>\n[...]\nenp0s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000\n    link/ether 52:54:00:09:15:46 brd ff:ff:ff:ff:ff:ff\n    inet 192.0.2.1/24 brd 192.0.2.255 scope global dynamic noprefixroute enp0s0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tFrom an external system connected to the local network, connect to the VM by using the obtained ID.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ssh root@192.0.2.1\u003C/strong>\u003C/span>\nroot@192.0.2.1's password:\nLast login: Mon Sep 24 12:05:36 2019\nroot~#*\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIf the connection works, the network has been configured successfully.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn certain situations, such as when using a client-to-site VPN while the VM is hosted on the client, using bridged mode for making your VMs available to external locations is not possible.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo work around this problem, you can \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_firewalls_and_packet_filters/getting-started-with-nftables_firewall-packet-filters\">set destination NAT by using \u003Ccode class=\"literal\">nftables\u003C/code>\u003C/a> for the VM.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-externally-visible-virtual-machines-using-the-web-console_recommended-virtual-machine-networking-configurations-using-the-command-line-interface\" title=\"17.3.2. Configuring externally visible virtual machines by using the web console\">Configuring externally visible virtual machines by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#virtual-networking-bridged-mode_types-of-virtual-machine-network-connections\" title=\"17.4.3. Virtual networking in bridged mode\">Virtual networking in bridged mode\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-externally-visible-virtual-machines-using-the-web-console_recommended-virtual-machine-networking-configurations-using-the-command-line-interface\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">17.3.2. Configuring externally visible virtual machines by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tBy default, a newly created VM connects to a NAT-type network that uses \u003Ccode class=\"literal\">virbr0\u003C/code>, the default virtual bridge on the host. This ensures that the VM can use the host’s network interface controller (NIC) for connecting to outside networks, but the VM is not reachable from external systems.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIf you require a VM to appear on the same external network as the hypervisor, you must use \u003Ca class=\"link\" href=\"#virtual-networking-bridged-mode_types-of-virtual-machine-network-connections\" title=\"17.4.3. Virtual networking in bridged mode\">bridged mode\u003C/a> instead. To do so, attach the VM to a bridge device connected to the hypervisor’s physical network device. To use the RHEL 9 web console for this, follow the instructions below.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tA shut-down \u003Ca class=\"link\" href=\"#assembly_creating-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 3. Creating virtual machines\">existing VM\u003C/a> with the default NAT setup.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe IP configuration of the hypervisor. This varies depending on the network connection of the host. As an example, this procedure uses a scenario where the host is connected to the network by using an ethernet cable, and the hosts' physical NIC MAC address is assigned to a static IP on a DHCP server. Therefore, the ethernet interface is treated as the hypervisor IP.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo obtain the IP configuration of the ethernet interface, go to the \u003Ccode class=\"literal\">Networking\u003C/code> tab in the web console, and see the \u003Ccode class=\"literal\">Interfaces\u003C/code> section.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tCreate and set up a bridge connection for the physical interface on the host. For instructions, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/configuring-network-bridges-in-the-web-console_system-management-using-the-rhel-9-web-console\">Configuring network bridges in the web console\u003C/a>.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tNote that in a scenario where static IP assignment is used, you must move the IPv4 setting of the physical ethernet interface to the bridge interface.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tModify the VM’s network to use the bridged interface. In the \u003Ca class=\"link\" href=\"#viewing-and-editing-virtual-network-interface-information-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console\" title=\"17.2.1. Viewing and editing virtual network interface information in the web console\">Network Interfaces\u003C/a> tab of the VM:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Add Network Interface\u003C/span>\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\tIn the \u003Ccode class=\"literal\">Add Virtual Network Interface\u003C/code> dialog, set:\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Interface Type\u003C/strong>\u003C/span> to \u003Ccode class=\"literal\">Bridge to LAN\u003C/code>\n\t\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tSource to the newly created bridge, for example \u003Ccode class=\"literal\">bridge0\u003C/code>\n\t\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Add\u003C/span>\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tOptional: Click \u003Cspan class=\"guibutton\">Unplug\u003C/span> for all the other interfaces connected to the VM.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Run\u003C/span> to start the VM.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIn the guest operating system, adjust the IP and DHCP settings of the system’s network interface as if the VM was another physical system in the same network as the hypervisor.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThe specific steps for this will differ depending on the guest OS used by the VM. For example, if the guest OS is RHEL 9, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_networking/configuring-an-ethernet-connection_configuring-and-managing-networking\">Configuring an Ethernet connection\u003C/a>.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Networking\u003C/strong>\u003C/span> tab of the host’s web console, click the row with the newly created bridge to ensure it is running and contains both the host’s physical interface and the interface of the VM.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnsure the VM appears on the same external network as the hypervisor.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIn the guest operating system, obtain the network ID of the system. For example, if it is a Linux guest:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip addr\u003C/strong>\u003C/span>\n[...]\nenp0s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000\n    link/ether 52:54:00:09:15:46 brd ff:ff:ff:ff:ff:ff\n    inet 192.0.2.1/24 brd 192.0.2.255 scope global dynamic noprefixroute enp0s0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tFrom an external system connected to the local network, connect to the VM by using the obtained ID.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ssh root@192.0.2.1\u003C/strong>\u003C/span>\nroot@192.0.2.1's password:\nLast login: Mon Sep 24 12:05:36 2019\nroot~#*\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIf the connection works, the network has been configured successfully.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIn certain situations, such as when using a client-to-site VPN while the VM is hosted on the client, using bridged mode for making your VMs available to external locations is not possible.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-externally-visible-virtual-machines-using-the-command-line-interface_recommended-virtual-machine-networking-configurations-using-the-command-line-interface\" title=\"17.3.1. Configuring externally visible virtual machines by using the command-line interface\">Configuring externally visible virtual machines by using the command-line interface\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#virtual-networking-bridged-mode_types-of-virtual-machine-network-connections\" title=\"17.4.3. Virtual networking in bridged mode\">Virtual networking in bridged mode\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"replacing-macvtap-connections_recommended-virtual-machine-networking-configurations-using-the-command-line-interface\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">17.3.3. Replacing macvtap connections\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\t\u003Ccode class=\"literal\">macvtap\u003C/code> is a Linux networking device driver that creates a virtual network interface, through which virtual machines have direct access to the physical network interface on the host machine. Using \u003Ccode class=\"literal\">macvtap\u003C/code> connections is supported in RHEL 9.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tHowever, in comparison to other available virtual machine (VM) networking configurations, macvtap has suboptimal performance and is more difficult to set up correctly. Therefore, if your use case does not explicitly require macvtap, use a different supported networking configuration.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIf you are using a macvtap mode in your VM, consider instead using the following network configurations:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tInstead of macvtap bridge mode, use the \u003Ca class=\"link\" href=\"#virtual-networking-bridged-mode_types-of-virtual-machine-network-connections\" title=\"17.4.3. Virtual networking in bridged mode\">Linux bridge\u003C/a> configuration.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tInstead of macvtap passthrough mode, use \u003Ca class=\"link\" href=\"https://libvirt.org/formatdomain.html#pci-passthrough\">PCI Passthrough\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://libvirt.org/formatdomain.html#direct-attachment-to-physical-interface\">Upstream documentation for macvtap\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"types-of-virtual-machine-network-connections_configuring-virtual-machine-network-connections\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">17.4. Types of virtual machine network connections\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tTo modify the networking properties and behavior of your VMs, change the type of virtual network or interface the VMs use. The following sections describe the connection types available to VMs in RHEL 9.\n\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"virtual-networking-network-address-translation_types-of-virtual-machine-network-connections\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">17.4.1. Virtual networking with network address translation\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tBy default, virtual network switches operate in network address translation (NAT) mode. They use IP masquerading rather than Source-NAT (SNAT) or Destination-NAT (DNAT). IP masquerading enables connected VMs to use the host machine’s IP address for communication with any external network. When the virtual network switch is operating in NAT mode, computers external to the host cannot communicate with the VMs inside the host.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/1319bd0237b46101e4af18dcff3447d3/vn-04-hostwithnatswitch.png\" alt=\"vn 04 hostwithnatswitch\"/>\u003C/div>\u003C/div>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tVirtual network switches use NAT configured by firewall rules. Editing these rules while the switch is running is not recommended, because incorrect rules may result in the switch being unable to communicate.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"virtual-networking-routed-mode_types-of-virtual-machine-network-connections\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">17.4.2. Virtual networking in routed mode\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tWhen using \u003Cspan class=\"emphasis\">\u003Cem>Routed\u003C/em>\u003C/span> mode, the virtual switch connects to the physical LAN connected to the host machine, passing traffic back and forth without the use of NAT. The virtual switch can examine all traffic and use the information contained within the network packets to make routing decisions. When using this mode, the virtual machines (VMs) are all in a single subnet, separate from the host machine. The VM subnet is routed through a virtual switch, which exists on the host machine. This enables incoming connections, but requires extra routing-table entries for systems on the external network.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tRouted mode uses routing based on the IP address:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/89e500f462be47a38d07f228a3911688/vn-06-routed-switch.png\" alt=\"vn 06 routed switch\"/>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tA common topology that uses routed mode is virtual server hosting (VSH). A VSH provider may have several host machines, each with two physical network connections. One interface is used for management and accounting, the other for the VMs to connect through. Each VM has its own public IP address, but the host machines use private IP addresses so that only internal administrators can manage the VMs.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/22da7ff1d584efda76a94e916ca0a839/vn-10-routed-mode-datacenter.png\" alt=\"vn 10 routed mode datacenter\"/>\u003C/div>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"virtual-networking-bridged-mode_types-of-virtual-machine-network-connections\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">17.4.3. Virtual networking in bridged mode\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tIn most VM networking modes, VMs automatically create and connect to the \u003Ccode class=\"literal\">virbr0\u003C/code> virtual bridge. In contrast, in \u003Cspan class=\"emphasis\">\u003Cem>bridged\u003C/em>\u003C/span> mode, the VM connects to an existing Linux bridge on the host. As a result, the VM is directly visible on the physical network. This enables incoming connections, but does not require any extra routing-table entries.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tBridged mode uses connection switching based on the MAC address:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/f6693f99168773256a540c6efe33fda5/vn-Bridged-Mode-Diagram.png\" alt=\"vn Bridged Mode Diagram\"/>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tIn bridged mode, the VM appear within the same subnet as the host machine. All other physical machines on the same physical network can detect the VM and access it.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Bridged network bonding\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tIt is possible to use multiple physical bridge interfaces on the hypervisor by joining them together with a bond. The bond can then be added to a bridge, after which the VMs can be added to the bridge as well. However, the bonding driver has several modes of operation, and not all of these modes work with a bridge where VMs are in use.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\t\tThe following \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/67546\">bonding modes\u003C/a> are usable:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tmode 1\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tmode 2\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tmode 4\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\t\tIn contrast, modes 0, 3, 5, or 6 is likely to cause the connection to fail. Also note that media-independent interface (MII) monitoring should be used to monitor bonding modes, as Address Resolution Protocol (ARP) monitoring does not work correctly.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tFor more information about bonding modes, refer to the \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/67546\">Red Hat Knowledgebase\u003C/a>.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Common scenarios\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tThe most common use cases for bridged mode include:\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tDeploying VMs in an existing network alongside host machines, making the difference between virtual and physical machines invisible to the end user.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tDeploying VMs without making any changes to existing physical network configuration settings.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tDeploying VMs that must be easily accessible to an existing physical network. Placing VMs on a physical network where they must access DHCP services.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tConnecting VMs to an existing network where virtual LANs (VLANs) are used.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tA demilitarized zone (DMZ) network. For a DMZ deployment with VMs, Red Hat recommends setting up the DMZ at the physical network router and switches, and connecting the VMs to the physical network by using bridged mode.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-externally-visible-virtual-machines-using-the-command-line-interface_recommended-virtual-machine-networking-configurations-using-the-command-line-interface\" title=\"17.3.1. Configuring externally visible virtual machines by using the command-line interface\">Configuring externally visible virtual machines by using the command-line interface\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-externally-visible-virtual-machines-using-the-web-console_recommended-virtual-machine-networking-configurations-using-the-command-line-interface\" title=\"17.3.2. Configuring externally visible virtual machines by using the web console\">Configuring externally visible virtual machines by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_virtualization/4.1/html/administration_guide/appe-custom_network_properties#Explanation_of_bridge_opts_Parameters\">Explanation of \u003Ccode class=\"literal\">bridge_opts\u003C/code> parameters\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"virtual-networking-isolated-mode_types-of-virtual-machine-network-connections\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">17.4.4. Virtual networking in isolated mode\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tBy using \u003Cspan class=\"emphasis\">\u003Cem>isolated\u003C/em>\u003C/span> mode, virtual machines connected to the virtual switch can communicate with each other and with the host machine, but their traffic will not pass outside of the host machine, and they cannot receive traffic from outside the host machine. Using \u003Ccode class=\"literal\">dnsmasq\u003C/code> in this mode is required for basic functionality such as DHCP.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/ad58f56e3f39b5ffa9271100b3ccfe7d/vn-07-isolated-switch.png\" alt=\"vn 07 isolated switch\"/>\u003C/div>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"virtual-networking-open-mode_types-of-virtual-machine-network-connections\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">17.4.5. Virtual networking in open mode\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tWhen using \u003Cspan class=\"emphasis\">\u003Cem>open\u003C/em>\u003C/span> mode for networking, \u003Ccode class=\"literal\">libvirt\u003C/code> does not generate any firewall rules for the network. As a result, \u003Ccode class=\"literal\">libvirt\u003C/code> does not overwrite firewall rules provided by the host, and the user can therefore manually manage the VM’s firewall rules.\n\t\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"comparison-of-virtual-machine-connection-types_types-of-virtual-machine-network-connections\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">17.4.6. Comparison of virtual machine connection types\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tThe following table provides information about the locations to which selected types of virtual machine (VM) network configurations can connect, and to which they are visible.\n\t\t\t\t\u003C/p>\u003Crh-table id=\"idm140237771024272\">\u003Ctable class=\"gt-4-cols lt-7-rows\">\u003Ccaption>Table 17.1. Virtual machine connection types\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 20%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 20%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 20%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 20%; \" class=\"col_4\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 20%; \" class=\"col_5\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237773079392\" scope=\"col\"> \u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237773078464\" scope=\"col\">Connection to the host\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237773077376\" scope=\"col\">Connection to other VMs on the host\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237773076272\" scope=\"col\">Connection to outside locations\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237773075168\" scope=\"col\">Visible to outside locations\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773079392\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Bridged mode\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773078464\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tYES\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773077376\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tYES\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773076272\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tYES\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773075168\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tYES\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773079392\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>NAT\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773078464\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tYES\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773077376\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tYES\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773076272\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tYES\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773075168\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>no\u003C/em>\u003C/span>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773079392\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Routed mode\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773078464\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tYES\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773077376\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tYES\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773076272\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tYES\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773075168\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tYES\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773079392\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Isolated mode\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773078464\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tYES\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773077376\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tYES\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773076272\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>no\u003C/em>\u003C/span>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773075168\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>no\u003C/em>\u003C/span>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773079392\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Open mode\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"4\" align=\"center\" valign=\"top\" headers=\"idm140237773078464 idm140237773079392 idm140237773075168\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>Depends on the host’s firewall rules\u003C/em>\u003C/span>\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"assembly_booting-virtual-machines-from-a-pxe-server_configuring-virtual-machine-network-connections\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">17.5. Booting virtual machines from a PXE server\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tVirtual machines (VMs) that use Preboot Execution Environment (PXE) can boot and load their configuration from a network. This chapter describes how to use \u003Ccode class=\"literal\">libvirt\u003C/code> to boot VMs from a PXE server on a virtual or bridged network.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThese procedures are provided only as an example. Ensure that you have sufficient backups before proceeding.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"proc_setting-up-a-pxe-boot-server-on-a-virtual-network_assembly_booting-virtual-machines-from-a-pxe-server\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">17.5.1. Setting up a PXE boot server on a virtual network\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tThis procedure describes how to configure a \u003Ccode class=\"literal\">libvirt\u003C/code> virtual network to provide Preboot Execution Environment (PXE). This enables virtual machines on your host to be configured to boot from a boot image available on the virtual network.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA local PXE server (DHCP and TFTP), such as:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tlibvirt internal server\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tmanually configured dhcpd and tftpd\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tdnsmasq\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tCobbler server\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tPXE boot images, such as \u003Ccode class=\"literal\">PXELINUX\u003C/code> configured by Cobbler or manually.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tPlace the PXE boot images and configuration in \u003Ccode class=\"literal\">/var/lib/tftpboot\u003C/code> folder.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tSet folder permissions:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>chmod -R a+r /var/lib/tftpboot\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tSet folder ownership:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>chown -R nobody: /var/lib/tftpboot\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUpdate SELinux context:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>chcon -R --reference /usr/sbin/dnsmasq /var/lib/tftpboot\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>chcon -R --reference /usr/libexec/libvirt_leaseshelper /var/lib/tftpboot\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tShut down the virtual network:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh net-destroy default\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOpen the virtual network configuration file in your default editor:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh net-edit default\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEdit the \u003Ccode class=\"literal\">&lt;ip&gt;\u003C/code> element to include the appropriate address, network mask, DHCP address range, and boot file, where \u003Cspan class=\"emphasis\">\u003Cem>example-pxelinux\u003C/em>\u003C/span> is the name of the boot image file.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;ip address='192.0.2.1' netmask='255.255.255.0'&gt;\n   &lt;tftp root='/var/lib/tftpboot'/&gt;\n   &lt;dhcp&gt;\n      &lt;range start='192.0.2.2' end='192.0.2.254' /&gt;\n      &lt;bootp file='\u003Cspan class=\"strong strong\">\u003Cstrong>\u003Cspan class=\"emphasis\">\u003Cem>example-pxelinux\u003C/em>\u003C/span>\u003C/strong>\u003C/span>'/&gt;\n   &lt;/dhcp&gt;\n&lt;/ip&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tStart the virtual network:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh net-start default\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tVerify that the \u003Ccode class=\"literal\">default\u003C/code> virtual network is active:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh net-list\u003C/strong>\u003C/span>\nName             State    Autostart   Persistent\n---------------------------------------------------\ndefault          active   no          no\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/interactively_installing_rhel_over_the_network/preparing-for-a-network-install_rhel-installer\">Preparing a PXE installation source\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_booting-virtual-machines-using-pxe-and-a-virtual-network_assembly_booting-virtual-machines-from-a-pxe-server\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">17.5.2. Booting virtual machines by using PXE and a virtual network\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tTo boot virtual machines (VMs) from a Preboot Execution Environment (PXE) server available on a virtual network, you must enable PXE booting.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tA PXE boot server is set up on the virtual network as described in \u003Ca class=\"link\" href=\"#proc_setting-up-a-pxe-boot-server-on-a-virtual-network_assembly_booting-virtual-machines-from-a-pxe-server\" title=\"17.5.1. Setting up a PXE boot server on a virtual network\">Setting up a PXE boot server on a virtual network\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tCreate a new VM with PXE booting enabled. For example, to install from a PXE, available on the \u003Ccode class=\"literal\">default\u003C/code> virtual network, into a new 10 GB qcow2 image file:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-install --pxe --network network=default --memory 2048 --vcpus 2 --disk size=10\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tAlternatively, you can manually edit the XML configuration file of an existing VM:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\tEnsure the \u003Ccode class=\"literal\">&lt;os&gt;\u003C/code> element has a \u003Ccode class=\"literal\">&lt;boot dev='network'/&gt;\u003C/code> element inside:\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">&lt;os&gt;\n   &lt;type arch='x86_64' machine='pc-i440fx-rhel7.0.0'&gt;hvm&lt;/type&gt;\n   &lt;boot dev='network'/&gt;\n   &lt;boot dev='hd'/&gt;\n&lt;/os&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\tEnsure the guest network is configured to use your virtual network:\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">&lt;interface type='network'&gt;\n   &lt;mac address='52:54:00:66:79:14'/&gt;\n   &lt;source network='default'/&gt;\n   &lt;target dev='vnet0'/&gt;\n   &lt;alias name='net0'/&gt;\n   &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/&gt;\n&lt;/interface&gt;\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tStart the VM by using the \u003Ccode class=\"literal\">virsh start\u003C/code> command. If PXE is configured correctly, the VM boots from a boot image available on the PXE server.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_booting-virtual-machines-using-pxe-and-a-bridged-network_assembly_booting-virtual-machines-from-a-pxe-server\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">17.5.3. Booting virtual machines by using PXE and a bridged network\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tTo boot virtual machines (VMs) from a Preboot Execution Environment (PXE) server available on a bridged network, you must enable PXE booting.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tNetwork bridging is enabled.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tA PXE boot server is available on the bridged network.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tCreate a new VM with PXE booting enabled. For example, to install from a PXE, available on the \u003Ccode class=\"literal\">breth0\u003C/code> bridged network, into a new 10 GB qcow2 image file:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-install --pxe --network bridge=breth0 --memory 2048 --vcpus 2 --disk size=10\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tAlternatively, you can manually edit the XML configuration file of an existing VM:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\tEnsure the \u003Ccode class=\"literal\">&lt;os&gt;\u003C/code> element has a \u003Ccode class=\"literal\">&lt;boot dev='network'/&gt;\u003C/code> element inside:\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">&lt;os&gt;\n   &lt;type arch='x86_64' machine='pc-i440fx-rhel7.0.0'&gt;hvm&lt;/type&gt;\n   &lt;boot dev='network'/&gt;\n   &lt;boot dev='hd'/&gt;\n&lt;/os&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\tEnsure the VM is configured to use your bridged network:\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">&lt;interface type='bridge'&gt;\n   &lt;mac address='52:54:00:5a:ad:cb'/&gt;\n   &lt;source bridge='breth0'/&gt;\n   &lt;target dev='vnet0'/&gt;\n   &lt;alias name='net0'/&gt;\n   &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x03' function='0x0'/&gt;\n&lt;/interface&gt;\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tStart the VM by using the \u003Ccode class=\"literal command\">virsh start\u003C/code> command. If PXE is configured correctly, the VM boots from a boot image available on the PXE server.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_networking/configuring-a-network-bridge_configuring-and-managing-networking\">Configuring a network bridge\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"configuring-bridges-on-a-network-bond-to-connect-virtual-machines-with-the-network_configuring-virtual-machine-network-connections\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">17.6. Configuring bridges on a network bond to connect virtual machines with the network\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe network bridge connects VMs with the same network as the host. If you want to connect VMs on one host to another host or VMs on another host, a bridge establishes communication between them. However, the bridge does not provide a fail-over mechanism. To handle failures in communication, a network bond handles communication in the event of failure of a network interface. To maintain fault tolerance and redundancy, the \u003Ccode class=\"literal\">active-backup\u003C/code> bonding mechanism determines that only one port is active in the bond and does not require any switch configuration. If an active port fails, an alternate port becomes active to retain communication between configured VMs in the network.\n\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"configuring-network-interfaces-on-a-network-bond-by-using-nmcli_configuring-bridges-on-a-network-bond-to-connect-vms-with-the-network\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">17.6.1. Configuring network interfaces on a network bond by using nmcli\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tTo configure a network bond on the command line, use the \u003Ccode class=\"literal\">nmcli\u003C/code> utility.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tTwo or more physical devices are installed on the server, and they are not configured in any \u003Ccode class=\"literal\">NetworkManager\u003C/code> connection profile.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tCreate a bond interface:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type bond con-name bond0 ifname bond0 bond.options \"mode=active-backup\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThis command creates a bond named \u003Ccode class=\"literal\">bond0\u003C/code> that uses the \u003Ccode class=\"literal\">active-backup\u003C/code> mode.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tAssign the Ethernet interfaces to the bond:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ethernet slave-type bond con-name bond0-port1 ifname enp7s0 master bond0\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type ethernet slave-type bond con-name bond0-port2 ifname enp8s0 master bond0\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThese commands create profiles for \u003Ccode class=\"literal\">enp7s0\u003C/code> and \u003Ccode class=\"literal\">enp8s0\u003C/code>, and add them to the \u003Ccode class=\"literal\">bond0\u003C/code> connection.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tConfigure the IPv4 settings:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tTo use DHCP, no action is required.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tTo set a static IPv4 address, network mask, default gateway, and DNS server to the \u003Ccode class=\"literal\">bond0\u003C/code> connection, enter:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond0 ipv4.addresses \u003Ccode class=\"literal\">192.0.2.1/24\u003C/code> ipv4.gateway \u003Ccode class=\"literal\">192.0.2.254\u003C/code> ipv4.dns \u003Ccode class=\"literal\">192.0.2.253\u003C/code> ipv4.dns-search \u003Ccode class=\"literal\">example.com\u003C/code> ipv4.method \u003Ccode class=\"literal\">manual\u003C/code>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tConfigure the IPv6 settings:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tTo use stateless address autoconfiguration (SLAAC), no action is required.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tTo set a static IPv6 address, network mask, default gateway, and DNS server to the \u003Ccode class=\"literal\">bond0\u003C/code> connection, enter:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond0 ipv6.addresses \u003Ccode class=\"literal\">2001:db8:1::1/64\u003C/code> ipv6.gateway \u003Ccode class=\"literal\">2001:db8:1::fffe\u003C/code> ipv6.dns \u003Ccode class=\"literal\">2001:db8:1::fffd\u003C/code> ipv6.dns-search \u003Ccode class=\"literal\">example.com\u003C/code> ipv6.method \u003Ccode class=\"literal\">manual\u003C/code>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: If you want to set any parameters on the bond ports, use the following command:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond0-port1 bond-port.&lt;parameter&gt; &lt;value&gt;\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tConfigure that Red Hat Enterprise Linux enables all ports automatically when the bond is enabled:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond0 connection.autoconnect-ports 1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tActivate the bridge:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up bond0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTemporarily remove the network cable from the host.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tNote that there is no method to properly test link failure events using software utilities. Tools that deactivate connections, such as nmcli, show only the bonding driver’s ability to handle port configuration changes and not actual link failure events.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tDisplay the status of the bond:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /proc/net/bonding/bond0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-a-network-bridge-for-network-bonds-by-using-nmcli_configuring-bridges-on-a-network-bond-to-connect-vms-with-the-network\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">17.6.2. Configuring a network bridge for network bonds by using nmcli\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tA network bridge for network bonds involves configuring a bond interface that combines multiple network interfaces for improved traffic handling. Therefore, VMs can access the network through the bonded network interfaces by using the network bridge. The \u003Ccode class=\"literal\">nmcli\u003C/code> utility creates and edits connection files from the command line required for the configuration.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tCreate a bridge interface:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection add type bridge con-name \u003Ccode class=\"literal\">br0\u003C/code> ifname \u003Ccode class=\"literal\">br0\u003C/code> ipv4.method \u003Ccode class=\"literal\">disabled\u003C/code> ipv6.method \u003Ccode class=\"literal\">disabled\u003C/code>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tAdd the \u003Ccode class=\"literal\">bond0\u003C/code> bond to the \u003Ccode class=\"literal\">br0\u003C/code> bridge:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify bond0 master br0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tConfigure that Red Hat Enterprise Linux enables all ports automatically when the bridge is enabled:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection modify br0 connection.autoconnect-ports 1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tReactivate the bridge:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>nmcli connection up br0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">ip\u003C/code> utility to display the link status of Ethernet devices that are ports of a specific bridge:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link show master br0\u003C/strong>\u003C/span>\n6: bond0: &lt;BROADCAST,MULTICAST,MASTER,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br0 state UP mode DEFAULT group default qlen 1000\n    link/ether 52:54:00:38:a9:4d brd ff:ff:ff:ff:ff:ff\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">bridge\u003C/code> utility to display the status of Ethernet devices that are ports of any bridge device:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>bridge link show\u003C/strong>\u003C/span>\n6: bond0: &lt;BROADCAST,MULTICAST,MASTER,UP,LOWER_UP&gt; mtu 1500 master br0 state forwarding priority 32 cost 100\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo display the status for a specific Ethernet device, use the \u003Ccode class=\"literal\">bridge link show dev &lt;ethernet_device_name&gt;\u003C/code> command.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">nm-settings(5)\u003C/code> man page\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">bridge(8)\u003C/code> man page\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-a-virtual-network-in-libvirt-with-an-existing-bond-interface_configuring-bridges-on-a-network-bond-to-connect-vms-with-the-network\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">17.6.3. Creating a virtual network in libvirt with an existing bond interface\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tTo enable virtual machines (VM) to use the \u003Ccode class=\"literal\">br0\u003C/code> bridge with the bond, first add a virtual network to the \u003Ccode class=\"literal\">libvirtd\u003C/code> service that uses this bridge.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou installed the \u003Ccode class=\"literal\">libvirt\u003C/code> package.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou started and enabled the \u003Ccode class=\"literal\">libvirtd\u003C/code> service.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou configured the \u003Ccode class=\"literal\">br0\u003C/code> device with the bond on Red Hat Enterprise Linux.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">~/bond0-bridge.xml\u003C/code> file with the following content:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml numbered\">&lt;network&gt;\n\t&lt;name&gt;bond0-bridge&lt;/name&gt;\n\t&lt;forward mode=\"bridge\" /&gt;\n\t&lt;bridge name=\"br0\" /&gt;\n&lt;/network&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">~/bond0-bridge.xml\u003C/code> file to create a new virtual network in \u003Ccode class=\"literal\">libvirt\u003C/code>:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh net-define ~/bond0-bridge.xml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tRemove the \u003Ccode class=\"literal\">~/bond0-bridge.xml\u003C/code> file:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>rm ~/bond0-bridge.xml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tStart the \u003Ccode class=\"literal\">bond0-bridge\u003C/code> virtual network:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh net-start bond0-bridge\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tConfigure the \u003Ccode class=\"literal\">bond0-bridge\u003C/code> virtual network to start automatically when the \u003Ccode class=\"literal\">libvirtd\u003C/code> service starts:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh net-autostart bond0-bridge\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tDisplay the list of virtual networks:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh net-list\u003C/strong>\u003C/span>\nName              State    Autostart   Persistent\n----------------------------------------------------\nbond0-bridge      active      yes         yes\n...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">virsh(1)\u003C/code> man page\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-virtual-machines-to-use-a-bond-interface_configuring-bridges-on-a-network-bond-to-connect-vms-with-the-network\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">17.6.4. Configuring virtual machines to use a bond interface\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tTo configure a VM to use a bridge device with a bond interface on the host, create a new VM that uses the \u003Ccode class=\"literal\">bond0-bridge\u003C/code> virtual network or update the settings of existing VMs to use this network.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tPerform this procedure on the RHEL hosts.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou configured the \u003Ccode class=\"literal\">bond0-bridge\u003C/code> virtual network in \u003Ccode class=\"literal\">libvirtd\u003C/code>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo create a new VM and configure it to use the \u003Ccode class=\"literal\">bond0-bridge\u003C/code> network, pass the \u003Ccode class=\"literal\">--network network:bond0-bridge\u003C/code> option to the \u003Ccode class=\"literal\">virt-install\u003C/code> utility when you create the VM:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-install ... --network network:bond0-bridge\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo change the network settings of an existing VM:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tConnect the VM’s network interface to the \u003Ccode class=\"literal\">bond0-bridge\u003C/code> virtual network:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-xml &lt;\u003Cspan class=\"emphasis\">\u003Cem>example_vm\u003C/em>\u003C/span>&gt; --edit --network network=bond0-bridge\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tShut down the VM, and start it again:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh shutdown &lt;\u003Cspan class=\"emphasis\">\u003Cem>example_vm\u003C/em>\u003C/span>&gt;\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>virsh start &lt;\u003Cspan class=\"emphasis\">\u003Cem>example_vm\u003C/em>\u003C/span>&gt;\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tDisplay the virtual network interfaces of the VM on the host:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh domiflist &lt;\u003Cspan class=\"emphasis\">\u003Cem>example_vm\u003C/em>\u003C/span>&gt;\u003C/strong>\u003C/span>\nInterface   Type     Source           Model    MAC\n-------------------------------------------------------------------\nvnet1       bridge   bond0-bridge   virtio   52:54:00:c5:98:1c\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tDisplay the interfaces attached to the \u003Ccode class=\"literal\">br0\u003C/code> bridge:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip link show master br0\u003C/strong>\u003C/span>\n18: bond0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br0 state UNKNOWN mode DEFAULT group default qlen 1000\nlink/ether 2a:53:bd:d5:b3:0a brd ff:ff:ff:ff:ff:ff\n\n19: vnet1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br0 state UNKNOWN mode DEFAULT group default qlen 1000\nlink/ether 52:54:00:c5:98:1c brd ff:ff:ff:ff:ff:ff\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tNote that the \u003Ccode class=\"literal\">libvirtd\u003C/code> service dynamically updates the bridge’s configuration. When you start a VM which uses the \u003Ccode class=\"literal\">bond0-bridge\u003C/code> network, the corresponding \u003Ccode class=\"literal\">vnet*\u003C/code> device on the host appears as a port of the bridge.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">virt-install(1)\u003C/code> man page\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">virt-xml(1)\u003C/code> man page\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">virsh(1)\u003C/code> man page\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">arping(8)\u003C/code> man page\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"configuring-the-passt-user-space-connection_configuring-virtual-machine-network-connections\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">17.7. Configuring the passt user-space connection\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tIf you require non-privileged access to a virtual network, for example when using a \u003Ccode class=\"literal\">session\u003C/code> connection of \u003Ccode class=\"literal\">libvirt\u003C/code>, you can configure your virtual machine (VM) to use the \u003Ccode class=\"literal\">passt\u003C/code> networking back end.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">passt\u003C/code> package has been installed on your system.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install passt\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen the XML configuration of the VM on which you want to use a \u003Ccode class=\"literal\">passt\u003C/code> connection. For example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh edit \u003Cspan class=\"emphasis\">\u003Cem>&lt;testguest1&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the \u003Ccode class=\"literal\">&lt;devices&gt;\u003C/code> section, add an \u003Ccode class=\"literal\">&lt;interface type='user'&gt;\u003C/code> element that uses \u003Ccode class=\"literal\">passt\u003C/code> as its backend type.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, the following configuration sets up a \u003Ccode class=\"literal\">passt\u003C/code> connection that uses addresses and routes copied from the host interface associated with the first default route:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">&lt;devices&gt;\n  [...]\n  &lt;interface type='user'&gt;\n    &lt;backend type='passt'/&gt;\n  &lt;/interface&gt;\n&lt;/devices&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptionally, when using \u003Ccode class=\"literal\">passt\u003C/code>, you can specify multiple \u003Ccode class=\"literal\">&lt;portForward&gt;\u003C/code> elements to forward incoming network traffic for the host to this VM interface. You can also customize interface IP addresses. For example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">&lt;devices&gt;\n  [...]\n  &lt;interface type='user'&gt;\n    &lt;backend type='passt'/&gt;\n    &lt;mac address=\"52:54:00:98:d8:b7\"/&gt;\n    &lt;source dev='eth0'/&gt;\n    &lt;ip family='ipv4' address='192.0.2.1' prefix='24'/&gt;\n    &lt;ip family='ipv6' address='::ffff:c000:201'/&gt;\n    &lt;portForward proto='tcp'&gt;\n      &lt;range start='2022' to='22'/&gt;\n    &lt;/portForward&gt;\n    &lt;portForward proto='udp' address='1.2.3.4'&gt;\n       &lt;range start='5000' end='5020' to='6000'/&gt;\n       &lt;range start='5010' end='5015' exclude='yes'/&gt;\n    &lt;/portForward&gt;\n    &lt;portForward proto='tcp' address='2001:db8:ac10:fd01::1:10' dev='eth0'&gt;\n      &lt;range start='8080'/&gt;\n      &lt;range start='4433' to='3444'/&gt;\n    &lt;/portForward&gt;\n  &lt;/interface&gt;\n&lt;/devices&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis example configuration sets up a \u003Ccode class=\"literal\">passt\u003C/code> connection with the following parameters:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe VM copies the network routes for forwarding traffic from the \u003Ccode class=\"literal\">eth0\u003C/code> host interface.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe interface MAC is set to \u003Ccode class=\"literal\">52:54:00:98:d8:b7\u003C/code>. If unset, a random one will be generated.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe IPv4 address is set to \u003Ccode class=\"literal\">192.0.2.1/24\u003C/code>, and the IPv6 address is set to \u003Ccode class=\"literal\">::ffff:c000:201\u003C/code>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe TCP port \u003Ccode class=\"literal\">2022\u003C/code> on the host forwards its network traffic to port \u003Ccode class=\"literal\">22\u003C/code> on the VM.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe TCP address \u003Ccode class=\"literal\">2001:db8:ac10:fd01::1:10\u003C/code> on host interface \u003Ccode class=\"literal\">eth0\u003C/code> and port \u003Ccode class=\"literal\">8080\u003C/code> forwards its network traffic to port \u003Ccode class=\"literal\">8080\u003C/code> on the VM. Port \u003Ccode class=\"literal\">4433\u003C/code> forwards to port \u003Ccode class=\"literal\">3444\u003C/code> on the VM.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe UDP address \u003Ccode class=\"literal\">1.2.3.4\u003C/code> and ports \u003Ccode class=\"literal\">5000 - 5009\u003C/code> and \u003Ccode class=\"literal\">5016 - 5020\u003C/code> on the host forward their network traffic to ports \u003Ccode class=\"literal\">6000 - 6009\u003C/code> and \u003Ccode class=\"literal\">6016 - 6020\u003C/code> on the VM.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSave the XML configuration.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart or restart the VM you configured with \u003Ccode class=\"literal\">passt\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh reboot \u003Cspan class=\"emphasis\">\u003Cem>&lt;vm-name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>virsh start \u003Cspan class=\"emphasis\">\u003Cem>&lt;vm-name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the VM boots successfully, it is now using the \u003Ccode class=\"literal\">passt\u003C/code> networking backend.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#system-and-session-connections_securing-virtual-machines-in-rhel\">System and session connections in \u003Ccode class=\"literal\">libvirt\u003C/code>\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section _additional-resources\" id=\"additional_resources\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">17.8. Additional resources\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_networking/index\">Configuring and managing networking\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#managing-sr-iov-devices_managing-virtual-devices\" title=\"14.7. Managing SR-IOV devices\">Attach specific network interface cards as SR-IOV devices\u003C/a> to increase VM performance.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"optimizing-virtual-machine-performance-in-rhel_configuring-and-managing-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 18. Optimizing virtual machine performance\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tVirtual machines (VMs) always experience some degree of performance deterioration in comparison to the host. The following sections explain the reasons for this deterioration and provide instructions on how to minimize the performance impact of virtualization in RHEL 9, so that your hardware infrastructure resources can be used as efficiently as possible.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"what-influences-virtual-machine-performance_optimizing-virtual-machine-performance-in-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">18.1. What influences virtual machine performance\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tVMs are run as user-space processes on the host. The hypervisor therefore needs to convert the host’s system resources so that the VMs can use them. As a consequence, a portion of the resources is consumed by the conversion, and the VM therefore cannot achieve the same performance efficiency as the host.\n\t\t\t\u003C/p>\u003Ch5 id=\"the_impact_of_virtualization_on_system_performance\">The impact of virtualization on system performance\u003C/h5>\u003Cp>\n\t\t\t\tMore specific reasons for VM performance loss include:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tVirtual CPUs (vCPUs) are implemented as threads on the host, handled by the Linux scheduler.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tVMs do not automatically inherit optimization features, such as NUMA or huge pages, from the host kernel.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tDisk and network I/O settings of the host might have a significant performance impact on the VM.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tNetwork traffic typically travels to a VM through a software-based bridge.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tDepending on the host devices and their models, there might be significant overhead due to emulation of particular hardware.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThe severity of the virtualization impact on the VM performance is influenced by a variety factors, which include:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe number of concurrently running VMs.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe amount of virtual devices used by each VM.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe device types used by the VMs.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Ch5 id=\"reducing_vm_performance_loss\">Reducing VM performance loss\u003C/h5>\u003Cp>\n\t\t\t\tRHEL 9 provides a number of features you can use to reduce the negative performance effects of virtualization. Notably:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#optimizing-virtual-machine-performance-using-tuned_optimizing-virtual-machine-performance-in-rhel\" title=\"18.2. Optimizing virtual machine performance by using TuneD\">The \u003Ccode class=\"literal\">TuneD\u003C/code> service\u003C/a> can automatically optimize the resource distribution and performance of your VMs.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#optimizing-virtual-machine-i-o-performance_optimizing-virtual-machine-performance-in-rhel\" title=\"18.5. Optimizing virtual machine I/O performance\">Block I/O tuning\u003C/a> can improve the performances of the VM’s block devices, such as disks.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel\" title=\"18.6. Optimizing virtual machine CPU performance\">NUMA tuning\u003C/a> can increase vCPU performance.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#optimizing-virtual-machine-network-performance_optimizing-virtual-machine-performance-in-rhel\" title=\"18.7. Optimizing virtual machine network performance\">Virtual networking\u003C/a> can be optimized in various ways.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tTuning VM performance can have negative effects on other virtualization functions. For example, it can make migrating the modified VM more difficult.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"optimizing-virtual-machine-performance-using-tuned_optimizing-virtual-machine-performance-in-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">18.2. Optimizing virtual machine performance by using TuneD\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">TuneD\u003C/code> utility is a tuning profile delivery mechanism that adapts RHEL for certain workload characteristics, such as requirements for CPU-intensive tasks or storage-network throughput responsiveness. It provides a number of tuning profiles that are pre-configured to enhance performance and reduce power consumption in a number of specific use cases. You can edit these profiles or create new profiles to create performance solutions tailored to your environment, including virtualized environments.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo optimize RHEL 9 for virtualization, use the following profiles:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor RHEL 9 virtual machines, use the \u003Cspan class=\"strong strong\">\u003Cstrong>virtual-guest\u003C/strong>\u003C/span> profile. It is based on the generally applicable \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>throughput-performance\u003C/em>\u003C/span>\u003C/code> profile, but also decreases the swappiness of virtual memory.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFor RHEL 9 virtualization hosts, use the \u003Cspan class=\"strong strong\">\u003Cstrong>virtual-host\u003C/strong>\u003C/span> profile. This enables more aggressive writeback of dirty memory pages, which benefits the host performance.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">TuneD\u003C/code> service is \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/monitoring_and_managing_system_status_and_performance/getting-started-with-tuned_monitoring-and-managing-system-status-and-performance#installing-and-enabling-tuned_getting-started-with-tuned\">installed and enabled\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tTo enable a specific \u003Ccode class=\"literal\">TuneD\u003C/code> profile:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tList the available \u003Ccode class=\"literal\">TuneD\u003C/code> profiles.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tuned-adm list\u003C/strong>\u003C/span>\n\nAvailable profiles:\n- balanced             - General non-specialized TuneD profile\n- desktop              - Optimize for the desktop use-case\n[...]\n- virtual-guest        - Optimize for running inside a virtual guest\n- virtual-host         - Optimize for running KVM guests\nCurrent active profile: \u003Cspan class=\"emphasis\">\u003Cem>balanced\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Create a new \u003Ccode class=\"literal\">TuneD\u003C/code> profile or edit an existing \u003Ccode class=\"literal\">TuneD\u003C/code> profile.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor more information, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/monitoring_and_managing_system_status_and_performance/customizing-tuned-profiles_monitoring-and-managing-system-status-and-performance\">Customizing TuneD profiles\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tActivate a \u003Ccode class=\"literal\">TuneD\u003C/code> profile.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tuned-adm profile \u003Cspan class=\"emphasis\">\u003Cem>selected-profile\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo optimize a virtualization host, use the \u003Cspan class=\"emphasis\">\u003Cem>virtual-host\u003C/em>\u003C/span> profile.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tuned-adm profile virtual-host\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn a RHEL guest operating system, use the \u003Cspan class=\"emphasis\">\u003Cem>virtual-guest\u003C/em>\u003C/span> profile.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tuned-adm profile virtual-guest\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the active profile for \u003Ccode class=\"literal\">TuneD\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tuned-adm active\u003C/strong>\u003C/span>\nCurrent active profile: virtual-host\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnsure that the \u003Ccode class=\"literal\">TuneD\u003C/code> profile settings have been applied on your system.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tuned-adm verify\u003C/strong>\u003C/span>\nVerification succeeded, current system settings match the preset profile. See tuned log file ('/var/log/tuned/tuned.log') for details.\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/monitoring_and_managing_system_status_and_performance/\">Monitoring and managing system status and performance\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"assembly_optimizing-libvirt-daemons_optimizing-virtual-machine-performance-in-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">18.3. Optimizing libvirt daemons\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">libvirt\u003C/code> virtualization suite works as a management layer for the RHEL hypervisor, and your \u003Ccode class=\"literal\">libvirt\u003C/code> configuration significantly impacts your virtualization host. Notably, RHEL 9 contains two different types of \u003Ccode class=\"literal\">libvirt\u003C/code> daemons, monolithic or modular, and which type of daemons you use affects how granularly you can configure individual virtualization drivers.\n\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"con_types-of-libvirt-daemons_assembly_optimizing-libvirt-daemons\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">18.3.1. Types of libvirt daemons\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tRHEL 9 supports the following \u003Ccode class=\"literal\">libvirt\u003C/code> daemon types:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Monolithic libvirt\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe traditional \u003Ccode class=\"literal\">libvirt\u003C/code> daemon, \u003Ccode class=\"literal\">libvirtd\u003C/code>, controls a wide variety of virtualization drivers, by using a single configuration file - \u003Ccode class=\"literal\">/etc/libvirt/libvirtd.conf\u003C/code>.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAs such, \u003Ccode class=\"literal\">libvirtd\u003C/code> allows for centralized hypervisor configuration, but may use system resources inefficiently. Therefore, \u003Ccode class=\"literal\">libvirtd\u003C/code> will become unsupported in a future major release of RHEL.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tHowever, if you updated to RHEL 9 from RHEL 8, your host still uses \u003Ccode class=\"literal\">libvirtd\u003C/code> by default.\n\t\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Modular libvirt\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tNewly introduced in RHEL 9, modular \u003Ccode class=\"literal\">libvirt\u003C/code> provides a specific daemon for each virtualization driver. These include the following:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>virtqemud\u003C/strong>\u003C/span> - A primary daemon for hypervisor management\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>virtinterfaced\u003C/strong>\u003C/span> - A secondary daemon for host NIC management\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>virtnetworkd\u003C/strong>\u003C/span> - A secondary daemon for virtual network management\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>virtnodedevd\u003C/strong>\u003C/span> - A secondary daemon for host physical device management\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>virtnwfilterd\u003C/strong>\u003C/span> - A secondary daemon for host firewall management\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>virtsecretd\u003C/strong>\u003C/span> - A secondary daemon for host secret management\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>virtstoraged\u003C/strong>\u003C/span> - A secondary daemon for storage management\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEach of the daemons has a separate configuration file - for example \u003Ccode class=\"literal\">/etc/libvirt/virtqemud.conf\u003C/code>. As such, modular \u003Ccode class=\"literal\">libvirt\u003C/code> daemons provide better options for fine-tuning \u003Ccode class=\"literal\">libvirt\u003C/code> resource management.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you performed a fresh install of RHEL 9, modular \u003Ccode class=\"literal\">libvirt\u003C/code> is configured by default.\n\t\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Next steps\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIf your RHEL 9 uses \u003Ccode class=\"literal\">libvirtd\u003C/code>, Red Hat recommends switching to modular daemons. For instructions, see \u003Ca class=\"link\" href=\"#proc_enabling-modular-libvirt-daemons_assembly_optimizing-libvirt-daemons\" title=\"18.3.2. Enabling modular libvirt daemons\">Enabling modular libvirt daemons\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_enabling-modular-libvirt-daemons_assembly_optimizing-libvirt-daemons\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">18.3.2. Enabling modular libvirt daemons\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tIn RHEL 9, the \u003Ccode class=\"literal\">libvirt\u003C/code> library uses modular daemons that handle individual virtualization driver sets on your host. For example, the \u003Ccode class=\"literal\">virtqemud\u003C/code> daemon handles QEMU drivers.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIf you performed a fresh install of a RHEL 9 host, your hypervisor uses modular \u003Ccode class=\"literal\">libvirt\u003C/code> daemons by default. However, if you upgraded your host from RHEL 8 to RHEL 9, your hypervisor uses the monolithic \u003Ccode class=\"literal\">libvirtd\u003C/code> daemon, which is the default in RHEL 8.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIf that is the case, Red Hat recommends enabling the modular \u003Ccode class=\"literal\">libvirt\u003C/code> daemons instead, because they provide better options for fine-tuning \u003Ccode class=\"literal\">libvirt\u003C/code> resource management. In addition, \u003Ccode class=\"literal\">libvirtd\u003C/code> will become unsupported in a future major release of RHEL.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYour hypervisor is using the monolithic \u003Ccode class=\"literal\">libvirtd\u003C/code> service.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl is-active libvirtd.service\u003C/strong>\u003C/span>\nactive\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf this command displays \u003Ccode class=\"literal\">active\u003C/code>, you are using \u003Ccode class=\"literal\">libvirtd\u003C/code>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYour virtual machines are shut down.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tStop \u003Ccode class=\"literal\">libvirtd\u003C/code> and its sockets.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl stop libvirtd.service\u003C/strong>\u003C/span>\n$ \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl stop libvirtd{,-ro,-admin,-tcp,-tls}.socket\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tDisable \u003Ccode class=\"literal\">libvirtd\u003C/code> to prevent it from starting on boot.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl disable libvirtd.service\u003C/strong>\u003C/span>\n$ \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl disable libvirtd{,-ro,-admin,-tcp,-tls}.socket\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnable the modular \u003Ccode class=\"literal\">libvirt\u003C/code> daemons.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>for drv in qemu interface network nodedev nwfilter secret storage; do systemctl unmask virt${drv}d.service; systemctl unmask virt${drv}d{,-ro,-admin}.socket; systemctl enable virt${drv}d.service; systemctl enable virt${drv}d{,-ro,-admin}.socket; done\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tStart the sockets for the modular daemons.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>for drv in qemu network nodedev nwfilter secret storage; do systemctl start virt${drv}d{,-ro,-admin}.socket; done\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: If you require connecting to your host from remote hosts, enable and start the virtualization proxy daemon.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tCheck whether the \u003Ccode class=\"literal\">libvirtd-tls.socket\u003C/code> service is enabled on your system.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grep listen_tls /etc/libvirt/libvirtd.conf\u003C/strong>\u003C/span>\n\nlisten_tls = 0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIf \u003Ccode class=\"literal\">libvirtd-tls.socket\u003C/code> is not enabled (\u003Ccode class=\"literal\">listen_tls = 0\u003C/code>), activate \u003Ccode class=\"literal\">virtproxyd\u003C/code> as follows:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl unmask virtproxyd.service\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl unmask virtproxyd{,-ro,-admin}.socket\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable virtproxyd.service\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable virtproxyd{,-ro,-admin}.socket\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl start virtproxyd{,-ro,-admin}.socket\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIf \u003Ccode class=\"literal\">libvirtd-tls.socket\u003C/code> is enabled (\u003Ccode class=\"literal\">listen_tls = 1\u003C/code>), activate \u003Ccode class=\"literal\">virtproxyd\u003C/code> as follows:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl unmask virtproxyd.service\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl unmask virtproxyd{,-ro,-admin,-tls}.socket\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable virtproxyd.service\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable virtproxyd{,-ro,-admin,-tls}.socket\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl start virtproxyd{,-ro,-admin,-tls}.socket\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tTo enable the TLS socket of \u003Ccode class=\"literal\">virtproxyd\u003C/code>, your host must have TLS certificates configured to work with \u003Ccode class=\"literal\">libvirt\u003C/code>. For more information, see the \u003Ca class=\"link\" href=\"https://libvirt.org/kbase/tlscerts.html\">Upstream libvirt documentation\u003C/a>.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tActivate the enabled virtualization daemons.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh uri\u003C/strong>\u003C/span>\nqemu:///system\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tVerify that your host is using the \u003Ccode class=\"literal\">virtqemud\u003C/code> modular daemon.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl is-active virtqemud.service\u003C/strong>\u003C/span>\nactive\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf the status is \u003Ccode class=\"literal\">active\u003C/code>, you have successfully enabled modular \u003Ccode class=\"literal\">libvirt\u003C/code> daemons.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"configuring-virtual-machine-ram_optimizing-virtual-machine-performance-in-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">18.4. Configuring virtual machine memory\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tTo improve the performance of a virtual machine (VM), you can assign additional host RAM to the VM. Similarly, you can decrease the amount of memory allocated to a VM so the host memory can be allocated to other VMs or tasks.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo perform these actions, you can use \u003Ca class=\"link\" href=\"#adding-and-removing-virtual-machine-ram-using-the-web-console_configuring-virtual-machine-ram\" title=\"18.4.1. Adding and removing virtual machine memory by using the web console\">the web console\u003C/a> or \u003Ca class=\"link\" href=\"#adding-and-removing-virtual-machine-ram-using-the-command-line-interface_configuring-virtual-machine-ram\" title=\"18.4.2. Adding and removing virtual machine memory by using the command-line interface\">the command-line interface\u003C/a>.\n\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"adding-and-removing-virtual-machine-ram-using-the-web-console_configuring-virtual-machine-ram\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">18.4.1. Adding and removing virtual machine memory by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tTo improve the performance of a virtual machine (VM) or to free up the host resources it is using, you can use the web console to adjust amount of memory allocated to the VM.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe guest OS is running the memory balloon drivers. To verify this is the case:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tEnsure the VM’s configuration includes the \u003Ccode class=\"literal\">memballoon\u003C/code> device:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dumpxml \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span> | grep memballoon\u003C/strong>\u003C/span>\n&lt;memballoon model='virtio'&gt;\n    &lt;/memballoon&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIf this commands displays any output and the model is not set to \u003Ccode class=\"literal\">none\u003C/code>, the \u003Ccode class=\"literal\">memballoon\u003C/code> device is present.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tEnsure the balloon drivers are running in the guest OS.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tIn Windows guests, the drivers are installed as a part of the \u003Ccode class=\"literal\">virtio-win\u003C/code> driver package. For instructions, see \u003Ca class=\"link\" href=\"#installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines_optimizing-windows-virtual-machines-on-rhel\" title=\"21.2.1. Installing KVM paravirtualized drivers for Windows virtual machines\">Installing KVM paravirtualized drivers for Windows virtual machines\u003C/a>.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tIn Linux guests, the drivers are generally included by default and activate when the \u003Ccode class=\"literal\">memballoon\u003C/code> device is present.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: Obtain the information about the maximum memory and currently used memory for a VM. This will serve as a baseline for your changes, and also for verification.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dominfo \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nMax memory:     2097152 KiB\nUsed memory:    2097152 KiB\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, click the VM whose information you want to see.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">edit\u003C/span> next to the \u003Ccode class=\"literal\">Memory\u003C/code> line in the Overview pane.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">Memory Adjustment\u003C/code> dialog appears.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/839e2ecc24d24759503df5eeb06e6888/virt-cockpit-memory.png\" width=\"540\" alt=\"Image displaying the VM memory adjustment dialog box.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tConfigure the virtual memory for the selected VM.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Maximum allocation\u003C/strong>\u003C/span> - Sets the maximum amount of host memory that the VM can use for its processes. You can specify the maximum memory when creating the VM or increase it later. You can specify memory as multiples of MiB or GiB.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tAdjusting maximum memory allocation is only possible on a shut-off VM.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Current allocation\u003C/strong>\u003C/span> - Sets the actual amount of memory allocated to the VM. This value can be less than the Maximum allocation but cannot exceed it. You can adjust the value to regulate the memory available to the VM for its processes. You can specify memory as multiples of MiB or GiB.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIf you do not specify this value, the default allocation is the \u003Cspan class=\"strong strong\">\u003Cstrong>Maximum allocation\u003C/strong>\u003C/span> value.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Save\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe memory allocation of the VM is adjusted.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#adding-and-removing-virtual-machine-ram-using-the-command-line-interface_configuring-virtual-machine-ram\" title=\"18.4.2. Adding and removing virtual machine memory by using the command-line interface\">Adding and removing virtual machine memory by using the command-line interface\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel\" title=\"18.6. Optimizing virtual machine CPU performance\">Optimizing virtual machine CPU performance\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"adding-and-removing-virtual-machine-ram-using-the-command-line-interface_configuring-virtual-machine-ram\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">18.4.2. Adding and removing virtual machine memory by using the command-line interface\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tTo improve the performance of a virtual machine (VM) or to free up the host resources it is using, you can use the CLI to adjust amount of memory allocated to the VM.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe guest OS is running the memory balloon drivers. To verify this is the case:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tEnsure the VM’s configuration includes the \u003Ccode class=\"literal\">memballoon\u003C/code> device:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dumpxml \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span> | grep memballoon\u003C/strong>\u003C/span>\n&lt;memballoon model='virtio'&gt;\n    &lt;/memballoon&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIf this commands displays any output and the model is not set to \u003Ccode class=\"literal\">none\u003C/code>, the \u003Ccode class=\"literal\">memballoon\u003C/code> device is present.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tEnsure the ballon drivers are running in the guest OS.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tIn Windows guests, the drivers are installed as a part of the \u003Ccode class=\"literal\">virtio-win\u003C/code> driver package. For instructions, see \u003Ca class=\"link\" href=\"#installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines_optimizing-windows-virtual-machines-on-rhel\" title=\"21.2.1. Installing KVM paravirtualized drivers for Windows virtual machines\">Installing KVM paravirtualized drivers for Windows virtual machines\u003C/a>.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tIn Linux guests, the drivers are generally included by default and activate when the \u003Ccode class=\"literal\">memballoon\u003C/code> device is present.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: Obtain the information about the maximum memory and currently used memory for a VM. This will serve as a baseline for your changes, and also for verification.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dominfo \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nMax memory:     2097152 KiB\nUsed memory:    2097152 KiB\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tAdjust the maximum memory allocated to a VM. Increasing this value improves the performance potential of the VM, and reducing the value lowers the performance footprint the VM has on your host. Note that this change can only be performed on a shut-off VM, so adjusting a running VM requires a reboot to take effect.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, to change the maximum memory that the \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span> VM can use to 4096 MiB:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-xml \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span> --edit --memory memory=4096,currentMemory=4096\u003C/strong>\u003C/span>\nDomain 'testguest' defined successfully.\nChanges will take effect after the domain is fully powered off.\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo increase the maximum memory of a running VM, you can attach a memory device to the VM. This is also referred to as \u003Cspan class=\"strong strong\">\u003Cstrong>memory hot plug\u003C/strong>\u003C/span>. For details, see Attaching memory devices to virtual machines.\n\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tRemoving memory devices from a running VM (also referred as a memory hot unplug) is not supported, and highly discouraged by Red Hat.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: You can also adjust the memory currently used by the VM, up to the maximum allocation. This regulates the memory load that the VM has on the host until the next reboot, without changing the maximum VM allocation.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh setmem \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span> --current 2048\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tConfirm that the memory used by the VM has been updated:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dominfo \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nMax memory:     4194304 KiB\nUsed memory:    2097152 KiB\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: If you adjusted the current VM memory, you can obtain the memory balloon statistics of the VM to evaluate how effectively it regulates its memory use.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"> # \u003Cspan class=\"strong strong\">\u003Cstrong>virsh domstats --balloon \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nDomain: 'testguest'\n  balloon.current=365624\n  balloon.maximum=4194304\n  balloon.swap_in=0\n  balloon.swap_out=0\n  balloon.major_fault=306\n  balloon.minor_fault=156117\n  balloon.unused=3834448\n  balloon.available=4035008\n  balloon.usable=3746340\n  balloon.last-update=1587971682\n  balloon.disk_caches=75444\n  balloon.hugetlb_pgalloc=0\n  balloon.hugetlb_pgfail=0\n  balloon.rss=1005456\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#adding-and-removing-virtual-machine-ram-using-the-web-console_configuring-virtual-machine-ram\" title=\"18.4.1. Adding and removing virtual machine memory by using the web console\">Adding and removing virtual machine memory by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel\" title=\"18.6. Optimizing virtual machine CPU performance\">Optimizing virtual machine CPU performance\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"adding-and-removing-virtual-machine-memory-by-using-virtio-mem_configuring-virtual-machine-ram\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">18.4.3. Adding and removing virtual machine memory by using virtio-mem\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tRHEL 9 provides the \u003Ccode class=\"literal\">virtio-mem\u003C/code> paravirtualized memory device. This device makes it possible to dynamically add or remove host memory in virtual machines (VMs). For example, you can use \u003Ccode class=\"literal\">virtio-mem\u003C/code> to move memory resources between running VMs or to resize VM memory in cloud setups based on your current requirements.\n\t\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"overview-of-virtio-mem_adding-and-removing-virtual-machine-memory-by-using-virtio-mem\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch5 class=\"title\">18.4.3.1. Overview of virtio-mem\u003C/h5>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\t\t\u003Ccode class=\"literal\">virtio-mem\u003C/code> is a paravirtualized memory device that can be used to dynamically add or remove host memory in virtual machines (VMs). For example, you can use this device to move memory resources between running VMs or to resize VM memory in cloud setups based on your current requirements.\n\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\tBy using \u003Ccode class=\"literal\">virtio-mem\u003C/code>, you can increase the memory of a VM beyond its initial size, and shrink it back to its original size, in units that can have the size of 4 to several hundred mebibytes (MiBs). Note, however, that \u003Ccode class=\"literal\">virtio-mem\u003C/code> also relies on a specific guest operating system configuration, especially to reliably unplug memory.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>virtio-mem feature limitations\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">virtio-mem\u003C/code> is currently not compatible with the following features:\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tUsing memory locking for real-time applications on the host\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tUsing encrypted virtualization on the host\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tCombining \u003Ccode class=\"literal\">virtio-mem\u003C/code> with \u003Ccode class=\"literal\">memballoon\u003C/code> inflation and deflation on the host\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tUnloading or reloading the \u003Ccode class=\"literal\">virtio_mem\u003C/code> driver in a VM\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tUsing vhost-user devices, with the exception of \u003Ccode class=\"literal\">virtiofs\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-memory-onlining-in-virtual-machines_adding-and-removing-virtual-machine-memory-by-using-virtio-mem\" title=\"18.4.3.2. Configuring memory onlining in virtual machines\">Configuring memory onlining in virtual machines\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#attaching-a-virtio-mem-device-to-virtual-machines_adding-and-removing-virtual-machine-memory-by-using-virtio-mem\" title=\"18.4.3.3. Attaching a virtio-mem device to virtual machines\">Attaching a virtio-mem device to virtual machines\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-memory-onlining-in-virtual-machines_adding-and-removing-virtual-machine-memory-by-using-virtio-mem\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch5 class=\"title\">18.4.3.2. Configuring memory onlining in virtual machines\u003C/h5>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\t\tBefore using \u003Ccode class=\"literal\">virtio-mem\u003C/code> to attach memory to a running virtual machine (also known as memory hot-plugging), you must configure the virtual machine (VM) operating system to automatically set the hot-plugged memory to an online state. Otherwise, the guest operating system is not able to use the additional memory. You can choose from one of the following configurations for memory onlining:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">online_movable\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">online_kernel\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">auto-movable\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\t\t\tTo learn about differences between these configurations, see: \u003Ca class=\"link\" href=\"#comparison-of-memory-onlining-configurations_adding-and-removing-virtual-machine-memory-by-using-virtio-mem\" title=\"18.4.3.4. Comparison of memory onlining configurations\">Comparison of memory onlining configurations\u003C/a>\n\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\tMemory onlining is configured with udev rules by default in RHEL. However, when using \u003Ccode class=\"literal\">virtio-mem\u003C/code>, it is recommended to configure memory onlining directly in the kernel.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe host uses the Intel 64, AMD64, or ARM 64 CPU architecture.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe host uses RHEL 9.4 or later as the operating system.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tVMs running on the host use one of the following operating system versions:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tRHEL 8.10\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\tUnplugging memory from a running VM is disabled by default in RHEL 8.10 VMs.\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tRHEL 9\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo set memory onlining to use the \u003Ccode class=\"literal\">online_movable\u003C/code> configuration in the VM:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tSet the \u003Ccode class=\"literal\">memhp_default_state\u003C/code> kernel command line parameter to \u003Ccode class=\"literal\">online_movable\u003C/code>:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --update-kernel=ALL --remove-args=memhp_default_state --args=memhp_default_state=online_movable\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tReboot the VM.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo set memory onlining to use the \u003Ccode class=\"literal\">online_kernel\u003C/code> configuration in the VM:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tSet the \u003Ccode class=\"literal\">memhp_default_state\u003C/code> kernel command line parameter to \u003Ccode class=\"literal\">online_kernel\u003C/code>:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --update-kernel=ALL --remove-args=memhp_default_state --args=memhp_default_state=online_kernel\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tReboot the VM.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo use the \u003Ccode class=\"literal\">auto-movable\u003C/code> memory onlining policy in the VM:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tSet the \u003Ccode class=\"literal\">memhp_default_state\u003C/code> kernel command line parameter to \u003Ccode class=\"literal\">online\u003C/code>:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --update-kernel=ALL --remove-args=memhp_default_state --args=memhp_default_state=online\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tSet the \u003Ccode class=\"literal\">memory_hotplug.online_policy\u003C/code> kernel command line parameter to \u003Ccode class=\"literal\">auto-movable\u003C/code>:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --update-kernel=ALL --remove-args=\"memory_hotplug.online_policy\" --args=memory_hotplug.online_policy=auto-movable\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tOptional: To further tune the \u003Ccode class=\"literal\">auto-movable\u003C/code> onlining policy, change the \u003Ccode class=\"literal\">memory_hotplug.auto_movable_ratio\u003C/code> and \u003Ccode class=\"literal\">memory_hotplug.auto_movable_numa_aware\u003C/code> parameters:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --update-kernel=ALL --remove-args=\"memory_hotplug.auto_movable_ratio\" --args=memory_hotplug.auto_movable_ratio=\u003Cspan class=\"emphasis\">\u003Cem>&lt;percentage&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n\n# \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --update-kernel=ALL --remove-args=\"memory_hotplug.memory_auto_movable_numa_aware\" --args=memory_hotplug.auto_movable_numa_aware=\u003Cspan class=\"emphasis\">\u003Cem>&lt;y/n&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">memory_hotplug.auto_movable_ratio parameter\u003C/code> sets the maximum ratio of memory only available for movable allocations compared to memory available for any allocations. The ratio is expressed in percents and the default value is: \u003Cspan class=\"emphasis\">\u003Cem>301\u003C/em>\u003C/span> (%), which is a 3:1 ratio.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">memory_hotplug.auto_movable_numa_aware\u003C/code> parameter controls whether the \u003Ccode class=\"literal\">memory_hotplug.auto_movable_ratio\u003C/code> parameter applies to memory across all available NUMA nodes or only for memory within a single NUMA node. The default value is: \u003Cspan class=\"emphasis\">\u003Cem>y\u003C/em>\u003C/span> (yes)\n\t\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\t\tFor example, if the maximum ratio is set to 301% and the \u003Ccode class=\"literal\">memory_hotplug.auto_movable_numa_aware\u003C/code> is set to \u003Cspan class=\"emphasis\">\u003Cem>y\u003C/em>\u003C/span> (yes), than the 3:1 ratio is applied even within the NUMA node with the attached \u003Ccode class=\"literal\">virtio-mem\u003C/code> device. If the parameter is set to \u003Cspan class=\"emphasis\">\u003Cem>n\u003C/em>\u003C/span> (no), the maximum 3:1 ratio is applied only for all the NUMA nodes as a whole.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\t\tAdditionally, if the ratio is not exceeded, the newly hot-plugged memory will be available only for movable allocations. Otherwise, the newly hot-plugged memory will be available for both movable and unmovable allocations.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tReboot the VM.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo see if the \u003Ccode class=\"literal\">online_movable\u003C/code> configuration has been set correctly, check the current value of the \u003Ccode class=\"literal\">memhp_default_state\u003C/code> kernel parameter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /sys/devices/system/memory/auto_online_blocks\u003C/strong>\u003C/span>\n\nonline_movable\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo see if the \u003Ccode class=\"literal\">online_kernel\u003C/code> configuration has been set correctly, check the current value of the \u003Ccode class=\"literal\">memhp_default_state\u003C/code> kernel parameter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /sys/devices/system/memory/auto_online_blocks\u003C/strong>\u003C/span>\n\nonline_kernel\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tTo see if the \u003Ccode class=\"literal\">auto-movable\u003C/code> configuration has been set correctly, check the following kernel parameters:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">memhp_default_state\u003C/code>:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /sys/devices/system/memory/auto_online_blocks\u003C/strong>\u003C/span>\n\nonline\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">memory_hotplug.online_policy\u003C/code>:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /sys/module/memory_hotplug/parameters/online_policy\u003C/strong>\u003C/span>\n\nauto-movable\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">memory_hotplug.auto_movable_ratio\u003C/code>:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /sys/module/memory_hotplug/parameters/auto_movable_ratio\u003C/strong>\u003C/span>\n\n301\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">memory_hotplug.auto_movable_numa_aware\u003C/code>:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /sys/module/memory_hotplug/parameters/auto_movable_numa_aware\u003C/strong>\u003C/span>\n\ny\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#overview-of-virtio-mem_adding-and-removing-virtual-machine-memory-by-using-virtio-mem\" title=\"18.4.3.1. Overview of virtio-mem\">Overview of virtio-mem\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#attaching-a-virtio-mem-device-to-virtual-machines_adding-and-removing-virtual-machine-memory-by-using-virtio-mem\" title=\"18.4.3.3. Attaching a virtio-mem device to virtual machines\">Attaching a virtio-mem device to virtual machines\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://www.kernel.org/doc/html/latest/admin-guide/mm/memory-hotplug.html#configuring-memory-hot-un-plug\">Configuring Memory Hot(Un)Plug\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"attaching-a-virtio-mem-device-to-virtual-machines_adding-and-removing-virtual-machine-memory-by-using-virtio-mem\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch5 class=\"title\">18.4.3.3. Attaching a virtio-mem device to virtual machines\u003C/h5>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\t\tTo attach additional memory to a running virtual machine (also known as memory hot-plugging) and afterwards be able to resize the hot-plugged memory, you can use a \u003Ccode class=\"literal\">virtio-mem\u003C/code> device. Specifically, you can use libvirt XML configuration files and \u003Ccode class=\"literal\">virsh\u003C/code> commands to define and attach \u003Ccode class=\"literal\">virtio-mem\u003C/code> devices to virtual machines (VMs).\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe host uses the Intel 64, AMD64, or ARM 64 CPU architecture.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe host uses RHEL 9.4 or later as the operating system.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tVMs running on the host use one of the following operating system versions:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tRHEL 8.10\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\tUnplugging memory from a running VM is disabled by default in RHEL 8.10 VMs.\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tRHEL 9\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe VM has memory onlining configured. For instructions, see: \u003Ca class=\"link\" href=\"#configuring-memory-onlining-in-virtual-machines_adding-and-removing-virtual-machine-memory-by-using-virtio-mem\" title=\"18.4.3.2. Configuring memory onlining in virtual machines\">Configuring memory onlining in virtual machines\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnsure the XML configuration of the target VM includes the \u003Ccode class=\"literal\">maxMemory\u003C/code> parameter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh edit testguest1\u003C/strong>\u003C/span>\n\n&lt;domain type='kvm'&gt;\n  &lt;name&gt;testguest1&lt;/name&gt;\n  ...\n  \u003Cspan class=\"strong strong\">\u003Cstrong>&lt;maxMemory unit='GiB'&gt;128&lt;/maxMemory&gt;\u003C/strong>\u003C/span>\n  ...\n&lt;/domain&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIn this example, the XML configuration of the \u003Ccode class=\"literal\">testguest1\u003C/code> VM defines a \u003Ccode class=\"literal\">maxMemory\u003C/code> parameter with a 128 gibibyte (GiB) size. The \u003Ccode class=\"literal\">maxMemory\u003C/code> size specifies the maximum memory the VM can use, which includes both initial and hot-plugged memory.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate and open an XML file to define \u003Ccode class=\"literal\">virtio-mem\u003C/code> devices on the host, for example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>vim virtio-mem-device.xml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd XML definitions of \u003Ccode class=\"literal\">virtio-mem\u003C/code> devices to the file and save it:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;memory model='virtio-mem'&gt;\n        &lt;target&gt;\n                &lt;size unit='GiB'&gt;48&lt;/size&gt;\n                &lt;node&gt;0&lt;/node&gt;\n                &lt;block unit='MiB'&gt;2&lt;/block&gt;\n                &lt;requested unit='GiB'&gt;16&lt;/requested&gt;\n                &lt;current unit='GiB'&gt;16&lt;/current&gt;\n        &lt;/target&gt;\n        &lt;alias name='ua-virtiomem0'/&gt;\n        &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x02' function='0x0'/&gt;\n&lt;/memory&gt;\n&lt;memory model='virtio-mem'&gt;\n        &lt;target&gt;\n                &lt;size unit='GiB'&gt;48&lt;/size&gt;\n                &lt;node&gt;1&lt;/node&gt;\n                &lt;block unit='MiB'&gt;2&lt;/block&gt;\n                &lt;requested unit='GiB'&gt;0&lt;/requested&gt;\n                &lt;current unit='GiB'&gt;0&lt;/current&gt;\n        &lt;/target&gt;\n        &lt;alias name='ua-virtiomem1'/&gt;\n        &lt;address type='pci' domain='0x0000' bus='0x00' slot='0x04' function='0x0'/&gt;\n&lt;/memory&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIn this example, two \u003Ccode class=\"literal\">virtio-mem\u003C/code> devices are defined with the following parameters:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">size\u003C/code>: This is the maximum size of the device. In the example, it is 48 GiB. The \u003Ccode class=\"literal\">size\u003C/code> must be a multiple of the \u003Ccode class=\"literal\">block\u003C/code> size.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">node\u003C/code>: This is the assigned vNUMA node for the \u003Ccode class=\"literal\">virtio-mem\u003C/code> device.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">block\u003C/code>: This is the block size of the device. It must be at least the size of the Transparent Huge Page (THP), which is 2 MiB on Intel 64 and AMD64 CPU architecture. On ARM64 architecture, the size of THP can be 2 MiB or 512 MiB depending on the base page size. The 2 MiB block size on Intel 64 or AMD64 architecture is usually a good default choice. When using \u003Ccode class=\"literal\">virtio-mem\u003C/code> with \u003Cspan class=\"emphasis\">\u003Cem>Virtual Function I/O (VFIO)\u003C/em>\u003C/span> or \u003Cspan class=\"emphasis\">\u003Cem>mediated devices (mdev)\u003C/em>\u003C/span>, the total number of blocks across all \u003Ccode class=\"literal\">virtio-mem\u003C/code> devices must not be larger than 32768, otherwise the plugging of RAM might fail.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">requested\u003C/code>: This is the amount of memory you attach to the VM with the \u003Ccode class=\"literal\">virtio-mem\u003C/code> device. However, it is just a request towards the VM and it might not be resolved successfully, for example if the VM is not properly configured. The \u003Ccode class=\"literal\">requested\u003C/code> size must be a multiple of the \u003Ccode class=\"literal\">block\u003C/code> size and cannot exceed the maximum defined \u003Ccode class=\"literal\">size\u003C/code>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">current\u003C/code>: This represents the current size the \u003Ccode class=\"literal\">virtio-mem\u003C/code> device provides to the VM. The \u003Ccode class=\"literal\">current\u003C/code> size can differ from the \u003Ccode class=\"literal\">requested\u003C/code> size, for example when requests cannot be completed or when rebooting the VM.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">alias\u003C/code>: This is an optional user-defined alias that you can use to specify the intended \u003Ccode class=\"literal\">virtio-mem\u003C/code> device, for example when editing the device with libvirt commands. All user-defined aliases in libvirt must start with the \u003Cspan class=\"emphasis\">\u003Cem>\"ua-\"\u003C/em>\u003C/span> prefix.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tApart from these specific parameters, \u003Ccode class=\"literal\">libvirt\u003C/code> handles the \u003Ccode class=\"literal\">virtio-mem\u003C/code> device like any other PCI device. For more information on managing PCI devices attached to VMs, see: \u003Ca class=\"link\" href=\"#managing-virtual-devices_configuring-and-managing-virtualization\" title=\"Chapter 14. Managing virtual devices\">Managing virtual devices\u003C/a>\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tUse the XML file to attach the defined \u003Ccode class=\"literal\">virtio-mem\u003C/code> devices to a VM. For example, to permanently attach the two devices defined in the \u003Ccode class=\"literal\">virtio-mem-device.xml\u003C/code> to the running \u003Ccode class=\"literal\">testguest1\u003C/code> VM:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh attach-device testguest1 virtio-mem-device.xml --live --config\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">--live\u003C/code> option attaches the device to a running VM only, without persistence between boots. The \u003Ccode class=\"literal\">--config\u003C/code> option makes the configuration changes persistent. You can also attach the device to a shutdown VM without the \u003Ccode class=\"literal\">--live\u003C/code> option.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOptional: To dynamically change the \u003Ccode class=\"literal\">requested\u003C/code> size of a \u003Ccode class=\"literal\">virtio-mem\u003C/code> device attached to a running VM, use the \u003Ccode class=\"literal\">virsh update-memory-device\u003C/code> command:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh update-memory-device testguest1 --alias ua-virtiomem0 --requested-size 4GiB\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIn this example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">testguest1\u003C/code> is the VM you want to update.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--alias ua-virtiomem0\u003C/code> is the \u003Ccode class=\"literal\">virtio-mem\u003C/code> device specified by a previously defined alias.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">--requested-size 4GiB\u003C/code> changes the \u003Ccode class=\"literal\">requested\u003C/code> size of the \u003Ccode class=\"literal\">virtio-mem\u003C/code> device to 4 GiB.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\tUnplugging memory from a running VM by reducing the \u003Ccode class=\"literal\">requested\u003C/code> size might be unreliable. Whether this process succeeds depends on various factors, such as the memory onlining policy that is used.\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\tIn some cases, the guest operating system cannot complete the request successfully, because changing the amount of hot-plugged memory is not possible at that time.\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\tAdditionally, unplugging memory from a running VM is disabled by default in RHEL 8.10 VMs.\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOptional: To unplug a \u003Ccode class=\"literal\">virtio-mem\u003C/code> device from a shut-down VM, use the \u003Ccode class=\"literal\">virsh detach-device\u003C/code> command:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh detach-device testguest1 virtio-mem-device.xml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOptional: To unplug a \u003Ccode class=\"literal\">virtio-mem\u003C/code> device from a running VM:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tChange the \u003Ccode class=\"literal\">requested\u003C/code> size of the \u003Ccode class=\"literal\">virtio-mem\u003C/code> device to 0, otherwise the attempt to unplug a \u003Ccode class=\"literal\">virtio-mem\u003C/code> device from a running VM will fail.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh update-memory-device testguest1 --alias ua-virtiomem0 --requested-size 0\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tUnplug a \u003Ccode class=\"literal\">virtio-mem\u003C/code> device from the running VM:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh detach-device testguest1 virtio-mem-device.xml --config\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIn the VM, check the available RAM and see if the total amount now includes the hot-plugged memory:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>free -h\u003C/strong>\u003C/span>\n\n        total    used    free   shared  buff/cache   available\nMem:    31Gi     5.5Gi   14Gi   1.3Gi   11Gi         23Gi\nSwap:   8.0Gi    0B      8.0Gi\u003C/pre>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>numactl -H\u003C/strong>\u003C/span>\n\navailable: 1 nodes (0)\nnode 0 cpus: 0 1 2 3 4 5 6 7\nnode 0 size: 29564 MB\nnode 0 free: 13351 MB\nnode distances:\nnode   0\n  0:  10\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe current amount of plugged-in RAM can be also viewed on the host by displaying the XML configuration of the running VM:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dumpxml testguest1\u003C/strong>\u003C/span>\n\n&lt;domain type='kvm'&gt;\n  &lt;name&gt;testguest1&lt;/name&gt;\n  ...\n  \u003Cspan class=\"strong strong\">\u003Cstrong>&lt;currentMemory unit='GiB'&gt;31&lt;/currentMemory&gt;\u003C/strong>\u003C/span>\n  ...\n  &lt;memory model='virtio-mem'&gt;\n      &lt;target&gt;\n        &lt;size unit='GiB'&gt;48&lt;/size&gt;\n        &lt;node&gt;0&lt;/node&gt;\n        &lt;block unit='MiB'&gt;2&lt;/block&gt;\n        &lt;requested unit='GiB'&gt;16&lt;/requested&gt;\n        \u003Cspan class=\"strong strong\">\u003Cstrong>&lt;current unit='GiB'&gt;16&lt;/current&gt;\u003C/strong>\u003C/span>\n      &lt;/target&gt;\n      &lt;alias name='ua-virtiomem0'/&gt;\n      &lt;address type='pci' domain='0x0000' bus='0x08' slot='0x00' function='0x0'/&gt;\n  ...\n&lt;/domain&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIn this example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;currentMemory unit='GiB'&gt;31&lt;/currentMemory&gt;\u003C/code> represents the total RAM available in the VM from all sources.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;current unit='GiB'&gt;16&lt;/current&gt;\u003C/code> represents the current size of the plugged-in RAM provided by the \u003Ccode class=\"literal\">virtio-mem\u003C/code> device.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#overview-of-virtio-mem_adding-and-removing-virtual-machine-memory-by-using-virtio-mem\" title=\"18.4.3.1. Overview of virtio-mem\">Overview of virtio-mem\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-memory-onlining-in-virtual-machines_adding-and-removing-virtual-machine-memory-by-using-virtio-mem\" title=\"18.4.3.2. Configuring memory onlining in virtual machines\">Configuring memory onlining in virtual machines\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"comparison-of-memory-onlining-configurations_adding-and-removing-virtual-machine-memory-by-using-virtio-mem\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch5 class=\"title\">18.4.3.4. Comparison of memory onlining configurations\u003C/h5>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\t\tWhen attaching memory to a running RHEL virtual machine (also known as memory hot-plugging), you must set the hot-plugged memory to an online state in the virtual machine (VM) operating system. Otherwise, the system will not be able to use the memory.\n\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\tThe following table summarizes the main considerations when choosing between the available memory onlining configurations.\n\t\t\t\t\t\u003C/p>\u003Crh-table id=\"idm140237775195904\">\u003Ctable class=\"gt-4-cols lt-7-rows\">\u003Ccaption>Table 18.1. Comparison of memory onlining configurations\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 20%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 20%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 20%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 20%; \" class=\"col_4\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 20%; \" class=\"col_5\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237775675952\" scope=\"col\">Configuration name\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237775674864\" scope=\"col\">Unplugging memory from a VM\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237775673760\" scope=\"col\">A risk of creating a memory zone imbalance\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237775672640\" scope=\"col\">A potential use case\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237775671552\" scope=\"col\">Memory requirements of the intended workload\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237775675952\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">online_movable\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237775674864\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tHot-plugged memory can be reliably unplugged.\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237775673760\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tYes\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237775672640\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tHot-plugging a comparatively small amount of memory\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237775671552\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tMostly user-space memory\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237775675952\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">auto-movable\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237775674864\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tMovable portions of hot-plugged memory can be reliably unplugged.\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237775673760\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tMinimal\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237775672640\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tHot-plugging a large amount of memory\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237775671552\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tMostly user-space memory\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237775675952\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">online_kernel\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237775674864\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tHot-plugged memory cannot be reliably unplugged.\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237775673760\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tNo\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237775672640\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tUnreliable memory unplugging is acceptable.\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237775671552\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tUser-space or kernel-space memory\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cp>\n\t\t\t\t\t\tA \u003Cspan class=\"emphasis\">\u003Cem>zone imbalance\u003C/em>\u003C/span> is a lack of available memory pages in one of the Linux memory zones. A \u003Cspan class=\"emphasis\">\u003Cem>zone imbalance\u003C/em>\u003C/span> can negatively impact the system performance. For example, the kernel might crash if it runs out of free memory for unmovable allocations. Usually, movable allocations contain mostly user-space memory pages and unmovable allocations contain mostly kernel-space memory pages.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://www.kernel.org/doc/html/latest/admin-guide/mm/memory-hotplug.html#onlining-and-offlining-memory-blocks\">Onlining and Offlining Memory Blocks\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://www.kernel.org/doc/html/latest/admin-guide/mm/memory-hotplug.html#zone-movable\">Zone Imbalances\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#configuring-memory-onlining-in-virtual-machines_adding-and-removing-virtual-machine-memory-by-using-virtio-mem\" title=\"18.4.3.2. Configuring memory onlining in virtual machines\">Configuring memory onlining in virtual machines\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section _additional-resources\" id=\"additional_resources_2\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">18.4.4. Additional resources\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#attaching-devices-to-virtual-machines_assembly_managing-virtual-devices-using-the-cli\" title=\"14.3.1. Attaching devices to virtual machines\">Attaching devices to virtual machines\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"optimizing-virtual-machine-i-o-performance_optimizing-virtual-machine-performance-in-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">18.5. Optimizing virtual machine I/O performance\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe input and output (I/O) capabilities of a virtual machine (VM) can significantly limit the VM’s overall efficiency. To address this, you can optimize a VM’s I/O by configuring block I/O parameters.\n\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"tuning-block-i-o-in-virtual-machines_optimizing-virtual-machine-i-o-performance\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">18.5.1. Tuning block I/O in virtual machines\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tWhen multiple block devices are being used by one or more VMs, it might be important to adjust the I/O priority of specific virtual devices by modifying their \u003Cspan class=\"emphasis\">\u003Cem>I/O weights\u003C/em>\u003C/span>.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIncreasing the I/O weight of a device increases its priority for I/O bandwidth, and therefore provides it with more host resources. Similarly, reducing a device’s weight makes it consume less host resources.\n\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tEach device’s \u003Ccode class=\"literal\">weight\u003C/code> value must be within the \u003Ccode class=\"literal\">100\u003C/code> to \u003Ccode class=\"literal\">1000\u003C/code> range. Alternatively, the value can be \u003Ccode class=\"literal\">0\u003C/code>, which removes that device from per-device listings.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tTo display and set a VM’s block I/O parameters:\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tDisplay the current \u003Ccode class=\"literal\">&lt;blkio&gt;\u003C/code> parameters for a VM:\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dumpxml \u003Cspan class=\"emphasis\">\u003Cem>VM-name\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/code>\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;domain&gt;\n  [...]\n  &lt;blkiotune&gt;\n    &lt;weight&gt;800&lt;/weight&gt;\n    &lt;device&gt;\n      &lt;path&gt;/dev/sda&lt;/path&gt;\n      &lt;weight&gt;1000&lt;/weight&gt;\n    &lt;/device&gt;\n    &lt;device&gt;\n      &lt;path&gt;/dev/sdb&lt;/path&gt;\n      &lt;weight&gt;500&lt;/weight&gt;\n    &lt;/device&gt;\n  &lt;/blkiotune&gt;\n  [...]\n&lt;/domain&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEdit the I/O weight of a specified device:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh blkiotune \u003Cspan class=\"emphasis\">\u003Cem>VM-name\u003C/em>\u003C/span> --device-weights \u003Cspan class=\"emphasis\">\u003Cem>device\u003C/em>\u003C/span>, \u003Cspan class=\"emphasis\">\u003Cem>I/O-weight\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, the following changes the weight of the \u003Cspan class=\"emphasis\">\u003Cem>/dev/sda\u003C/em>\u003C/span> device in the \u003Cspan class=\"emphasis\">\u003Cem>testguest1\u003C/em>\u003C/span> VM to 500.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh blkiotune testguest1 --device-weights /dev/sda, 500\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"disk-i-o-throttling-in-virtual-machines_optimizing-virtual-machine-i-o-performance\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">18.5.2. Disk I/O throttling in virtual machines\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tWhen several VMs are running simultaneously, they can interfere with system performance by using excessive disk I/O. Disk I/O throttling in KVM virtualization provides the ability to set a limit on disk I/O requests sent from the VMs to the host machine. This can prevent a VM from over-utilizing shared resources and impacting the performance of other VMs.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tTo enable disk I/O throttling, set a limit on disk I/O requests sent from each block device attached to VMs to the host machine.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virsh domblklist\u003C/code> command to list the names of all the disk devices on a specified VM.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh domblklist rollin-coal\u003C/strong>\u003C/span>\nTarget     Source\n------------------------------------------------\nvda        /var/lib/libvirt/images/rollin-coal.qcow2\nsda        -\nsdb        /home/horridly-demanding-processes.iso\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFind the host block device where the virtual disk that you want to throttle is mounted.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, if you want to throttle the \u003Ccode class=\"literal\">sdb\u003C/code> virtual disk from the previous step, the following output shows that the disk is mounted on the \u003Ccode class=\"literal\">/dev/nvme0n1p3\u003C/code> partition.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>lsblk\u003C/strong>\u003C/span>\nNAME                                          MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINT\nzram0                                         252:0    0     4G  0 disk  [SWAP]\nnvme0n1                                       259:0    0 238.5G  0 disk\n├─nvme0n1p1                                   259:1    0   600M  0 part  /boot/efi\n├─nvme0n1p2                                   259:2    0     1G  0 part  /boot\n└─nvme0n1p3                                   259:3    0 236.9G  0 part\n  └─luks-a1123911-6f37-463c-b4eb-fxzy1ac12fea 253:0    0 236.9G  0 crypt /home\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tSet I/O limits for the block device by using the \u003Ccode class=\"literal\">virsh blkiotune\u003C/code> command.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh blkiotune \u003Cspan class=\"emphasis\">\u003Cem>VM-name\u003C/em>\u003C/span> --parameter \u003Cspan class=\"emphasis\">\u003Cem>device\u003C/em>\u003C/span>,\u003Cspan class=\"emphasis\">\u003Cem>limit\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe following example throttles the \u003Ccode class=\"literal\">sdb\u003C/code> disk on the \u003Ccode class=\"literal\">rollin-coal\u003C/code> VM to 1000 read and write I/O operations per second and to 50 MB per second read and write throughput.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh blkiotune rollin-coal --device-read-iops-sec /dev/nvme0n1p3,1000 --device-write-iops-sec /dev/nvme0n1p3,1000 --device-write-bytes-sec /dev/nvme0n1p3,52428800 --device-read-bytes-sec /dev/nvme0n1p3,52428800\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Additional information\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tDisk I/O throttling can be useful in various situations, for example when VMs belonging to different customers are running on the same host, or when quality of service guarantees are given for different VMs. Disk I/O throttling can also be used to simulate slower disks.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tI/O throttling can be applied independently to each block device attached to a VM and supports limits on throughput and I/O operations.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tRed Hat does not support using the \u003Ccode class=\"literal\">virsh blkdeviotune\u003C/code> command to configure I/O throttling in VMs. For more information about unsupported features when using RHEL 9 as a VM host, see \u003Ca class=\"link\" href=\"#unsupported-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization\" title=\"24.3. Unsupported features in RHEL 9 virtualization\">Unsupported features in RHEL 9 virtualization\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-multi-queue-virtio-scsi_optimizing-virtual-machine-i-o-performance\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">18.5.3. Enabling multi-queue virtio-scsi\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tWhen using \u003Ccode class=\"literal\">virtio-scsi\u003C/code> storage devices in your virtual machines (VMs), the \u003Cspan class=\"emphasis\">\u003Cem>multi-queue virtio-scsi\u003C/em>\u003C/span> feature provides improved storage performance and scalability. It enables each virtual CPU (vCPU) to have a separate queue and interrupt to use without affecting other vCPUs.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo enable multi-queue virtio-scsi support for a specific VM, add the following to the VM’s XML configuration, where \u003Cspan class=\"emphasis\">\u003Cem>N\u003C/em>\u003C/span> is the total number of vCPU queues:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;controller type='scsi' index='0' model='virtio-scsi'&gt;\n   &lt;driver queues='N' /&gt;\n&lt;/controller&gt;\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">18.6. Optimizing virtual machine CPU performance\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tMuch like physical CPUs in host machines, vCPUs are critical to virtual machine (VM) performance. As a result, optimizing vCPUs can have a significant impact on the resource efficiency of your VMs. To optimize your vCPU:\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAdjust how many host CPUs are assigned to the VM. You can do this using \u003Ca class=\"link\" href=\"#adding-and-removing-virtual-cpus-using-the-command-line-interface_optimizing-virtual-machine-cpu-performance\" title=\"18.6.1. Adding and removing virtual CPUs by using the command-line interface\">the CLI\u003C/a> or \u003Ca class=\"link\" href=\"#managing-virtual-cpus-using-the-web-console_optimizing-virtual-machine-cpu-performance\" title=\"18.6.2. Managing virtual CPUs by using the web console\">the web console\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnsure that the vCPU model is aligned with the CPU model of the host. For example, to set the \u003Cspan class=\"emphasis\">\u003Cem>testguest1\u003C/em>\u003C/span> VM to use the CPU model of the host:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-xml testguest1 --edit --cpu host-model\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn an ARM 64 system, use \u003Ccode class=\"literal\">--cpu host-passthrough\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_managing-ksm_optimizing-virtual-machine-cpu-performance\" title=\"18.6.5. Enabling and disabling kernel same-page merging\">Manage kernel same-page merging (KSM)\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf your host machine uses Non-Uniform Memory Access (NUMA), you can also \u003Cspan class=\"strong strong\">\u003Cstrong>configure NUMA\u003C/strong>\u003C/span> for its VMs. This maps the host’s CPU and memory processes onto the CPU and memory processes of the VM as closely as possible. In effect, NUMA tuning provides the vCPU with a more streamlined access to the system memory allocated to the VM, which can improve the vCPU processing effectiveness.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"#configuring-numa-in-a-virtual-machine_optimizing-virtual-machine-cpu-performance\" title=\"18.6.3. Configuring NUMA in a virtual machine\">Configuring NUMA in a virtual machine\u003C/a> and \u003Ca class=\"link\" href=\"#sample-vcpu-performance-tuning-scenario_optimizing-virtual-machine-cpu-performance\" title=\"18.6.4. Sample vCPU performance tuning scenario\">Sample vCPU performance tuning scenario\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Csection class=\"section\" id=\"adding-and-removing-virtual-cpus-using-the-command-line-interface_optimizing-virtual-machine-cpu-performance\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">18.6.1. Adding and removing virtual CPUs by using the command-line interface\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tTo increase or optimize the CPU performance of a virtual machine (VM), you can add or remove virtual CPUs (vCPUs) assigned to the VM.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tWhen performed on a running VM, this is also referred to as vCPU hot plugging and hot unplugging. However, note that vCPU hot unplug is not supported in RHEL 9, and Red Hat highly discourages its use.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: View the current state of the vCPUs in the targeted VM. For example, to display the number of vCPUs on the \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span> VM:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh vcpucount \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nmaximum      config         4\nmaximum      live           2\ncurrent      config         2\ncurrent      live           1\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThis output indicates that \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span> is currently using 1 vCPU, and 1 more vCPu can be hot plugged to it to increase the VM’s performance. However, after reboot, the number of vCPUs \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span> uses will change to 2, and it will be possible to hot plug 2 more vCPUs.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tAdjust the maximum number of vCPUs that can be attached to a VM, which takes effect on the VM’s next boot.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, to increase the maximum vCPU count for the \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span> VM to 8:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh setvcpus testguest 8 --maximum --config\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tNote that the maximum may be limited by the CPU topology, host hardware, the hypervisor, and other factors.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tAdjust the current number of vCPUs attached to a VM, up to the maximum configured in the previous step. For example:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tTo increase the number of vCPUs attached to the running \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span> VM to 4:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh setvcpus testguest 4 --live\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThis increases the VM’s performance and host load footprint of \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span> until the VM’s next boot.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tTo permanently decrease the number of vCPUs attached to the \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span> VM to 1:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh setvcpus testguest 1 --config\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThis decreases the VM’s performance and host load footprint of \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span> after the VM’s next boot. However, if needed, additional vCPUs can be hot plugged to the VM to temporarily increase its performance.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tConfirm that the current state of vCPU for the VM reflects your changes.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh vcpucount \u003Cspan class=\"emphasis\">\u003Cem>testguest\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nmaximum      config         8\nmaximum      live           4\ncurrent      config         1\ncurrent      live           4\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#managing-virtual-cpus-using-the-web-console_optimizing-virtual-machine-cpu-performance\" title=\"18.6.2. Managing virtual CPUs by using the web console\">Managing virtual CPUs by using the web console\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"managing-virtual-cpus-using-the-web-console_optimizing-virtual-machine-cpu-performance\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">18.6.2. Managing virtual CPUs by using the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tBy using the RHEL 9 web console, you can review and configure virtual CPUs used by virtual machines (VMs) to which the web console is connected.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, click the VM whose information you want to see.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA new page opens with an Overview section with basic information about the selected VM and a Console section to access the VM’s graphical interface.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">edit\u003C/span> next to the number of vCPUs in the Overview pane.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe vCPU details dialog appears.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/822593b143a5fe3f23f61dc63a892afb/virt-cockpit-configure-vCPUs.png\" width=\"540\" alt=\"Image displaying the VM CPU details dialog box.\"/>\u003C/div>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tConfigure the virtual CPUs for the selected VM.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>vCPU Count\u003C/strong>\u003C/span> - The number of vCPUs currently in use.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\t\tThe vCPU count cannot be greater than the vCPU Maximum.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>vCPU Maximum\u003C/strong>\u003C/span> - The maximum number of virtual CPUs that can be configured for the VM. If this value is higher than the \u003Cspan class=\"strong strong\">\u003Cstrong>vCPU Count\u003C/strong>\u003C/span>, additional vCPUs can be attached to the VM.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Sockets\u003C/strong>\u003C/span> - The number of sockets to expose to the VM.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Cores per socket\u003C/strong>\u003C/span> - The number of cores for each socket to expose to the VM.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Threads per core\u003C/strong>\u003C/span> - The number of threads for each core to expose to the VM.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tNote that the \u003Cspan class=\"strong strong\">\u003Cstrong>Sockets\u003C/strong>\u003C/span>, \u003Cspan class=\"strong strong\">\u003Cstrong>Cores per socket\u003C/strong>\u003C/span>, and \u003Cspan class=\"strong strong\">\u003Cstrong>Threads per core\u003C/strong>\u003C/span> options adjust the CPU topology of the VM. This may be beneficial for vCPU performance and may impact the functionality of certain software in the guest OS. If a different setting is not required by your deployment, keep the default values.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Apply\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe virtual CPUs for the VM are configured.\n\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tChanges to virtual CPU settings only take effect after the VM is restarted.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#adding-and-removing-virtual-cpus-using-the-command-line-interface_optimizing-virtual-machine-cpu-performance\" title=\"18.6.1. Adding and removing virtual CPUs by using the command-line interface\">Adding and removing virtual CPUs by using the command-line interface\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-numa-in-a-virtual-machine_optimizing-virtual-machine-cpu-performance\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">18.6.3. Configuring NUMA in a virtual machine\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tThe following methods can be used to configure Non-Uniform Memory Access (NUMA) settings of a virtual machine (VM) on a RHEL 9 host.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe host is a NUMA-compatible machine. To detect whether this is the case, use the \u003Ccode class=\"literal\">virsh nodeinfo\u003C/code> command and see the \u003Ccode class=\"literal\">NUMA cell(s)\u003C/code> line:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodeinfo\u003C/strong>\u003C/span>\nCPU model:           x86_64\nCPU(s):              48\nCPU frequency:       1200 MHz\nCPU socket(s):       1\nCore(s) per socket:  12\nThread(s) per core:  2\nNUMA cell(s):        \u003Cspan class=\"strong strong\">\u003Cstrong>2\u003C/strong>\u003C/span>\nMemory size:         67012964 KiB\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf the value of the line is 2 or greater, the host is NUMA-compatible.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tFor ease of use, you can set up a VM’s NUMA configuration by using automated utilities and services. However, manual NUMA setup is more likely to yield a significant performance improvement.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Automatic methods\u003C/strong>\u003C/span>\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tSet the VM’s NUMA policy to \u003Ccode class=\"literal\">Preferred\u003C/code>. For example, to do so for the \u003Cspan class=\"emphasis\">\u003Cem>testguest5\u003C/em>\u003C/span> VM:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-xml testguest5 --edit --vcpus placement=auto\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>virt-xml testguest5 --edit --numatune mode=preferred\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnable automatic NUMA balancing on the host:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo 1 &gt; /proc/sys/kernel/numa_balancing\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tStart the \u003Ccode class=\"literal\">numad\u003C/code> service to automatically align the VM CPU with memory resources.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl start numad\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Manual methods\u003C/strong>\u003C/span>\n\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tPin specific vCPU threads to a specific host CPU or range of CPUs. This is also possible on non-NUMA hosts and VMs, and is recommended as a safe method of vCPU performance improvement.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, the following commands pin vCPU threads 0 to 5 of the \u003Cspan class=\"emphasis\">\u003Cem>testguest6\u003C/em>\u003C/span> VM to host CPUs 1, 3, 5, 7, 9, and 11, respectively:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh vcpupin testguest6 0 1\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>virsh vcpupin testguest6 1 3\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>virsh vcpupin testguest6 2 5\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>virsh vcpupin testguest6 3 7\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>virsh vcpupin testguest6 4 9\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>virsh vcpupin testguest6 5 11\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tAfterwards, you can verify whether this was successful:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh vcpupin testguest6\u003C/strong>\u003C/span>\nVCPU   CPU Affinity\n----------------------\n0      1\n1      3\n2      5\n3      7\n4      9\n5      11\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tAfter pinning vCPU threads, you can also pin QEMU process threads associated with a specified VM to a specific host CPU or range of CPUs. For example, the following commands pin the QEMU process thread of \u003Cspan class=\"emphasis\">\u003Cem>testguest6\u003C/em>\u003C/span> to CPUs 13 and 15, and verify this was successful:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh emulatorpin testguest6 13,15\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>virsh emulatorpin testguest6\u003C/strong>\u003C/span>\nemulator: CPU Affinity\n----------------------------------\n       *: 13,15\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFinally, you can also specify which host NUMA nodes will be assigned specifically to a certain VM. This can improve the host memory usage by the VM’s vCPU. For example, the following commands set \u003Cspan class=\"emphasis\">\u003Cem>testguest6\u003C/em>\u003C/span> to use host NUMA nodes 3 to 5, and verify this was successful:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh numatune testguest6 --nodeset 3-5\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>virsh numatune testguest6\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tFor best performance results, it is recommended to use all of the manual tuning methods listed above\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Known issues\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#how-virtualization-on-ibm-z-differs-from-amd64-and-intel64_feature-support-and-limitations-in-rhel-9-virtualization\" title=\"24.6. How virtualization on IBM Z differs from AMD64 and Intel 64\">NUMA tuning currently cannot be performed on IBM Z hosts\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#sample-vcpu-performance-tuning-scenario_optimizing-virtual-machine-cpu-performance\" title=\"18.6.4. Sample vCPU performance tuning scenario\">Sample vCPU performance tuning scenario\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#virtual-machine-performance-monitoring-tools_optimizing-virtual-machine-performance-in-rhel\" title=\"18.8. Virtual machine performance monitoring tools\">View the current NUMA configuration of your system\u003C/a> using the \u003Ccode class=\"literal\">numastat\u003C/code> utility\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"sample-vcpu-performance-tuning-scenario_optimizing-virtual-machine-cpu-performance\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">18.6.4. Sample vCPU performance tuning scenario\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tTo obtain the best vCPU performance possible, Red Hat recommends by using manual \u003Ccode class=\"literal\">vcpupin\u003C/code>, \u003Ccode class=\"literal\">emulatorpin\u003C/code>, and \u003Ccode class=\"literal\">numatune\u003C/code> settings together, for example like in the following scenario.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Starting scenario\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYour host has the following hardware specifics:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t2 NUMA nodes\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t3 CPU cores on each node\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t2 threads on each core\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe output of \u003Ccode class=\"literal\">virsh nodeinfo\u003C/code> of such a machine would look similar to:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodeinfo\u003C/strong>\u003C/span>\nCPU model:           x86_64\nCPU(s):              12\nCPU frequency:       3661 MHz\nCPU socket(s):       2\nCore(s) per socket:  3\nThread(s) per core:  2\nNUMA cell(s):        2\nMemory size:         31248692 KiB\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou intend to modify an existing VM to have 8 vCPUs, which means that it will not fit in a single NUMA node.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTherefore, you should distribute 4 vCPUs on each NUMA node and make the vCPU topology resemble the host topology as closely as possible. This means that vCPUs that run as sibling threads of a given physical CPU should be pinned to host threads on the same core. For details, see the \u003Cspan class=\"emphasis\">\u003Cem>Solution\u003C/em>\u003C/span> below:\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Solution\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tObtain the information about the host topology:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh capabilities\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe output should include a section that looks similar to the following:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;topology&gt;\n  &lt;cells num=\"2\"&gt;\n    &lt;cell id=\"0\"&gt;\n      &lt;memory unit=\"KiB\"&gt;15624346&lt;/memory&gt;\n      &lt;pages unit=\"KiB\" size=\"4\"&gt;3906086&lt;/pages&gt;\n      &lt;pages unit=\"KiB\" size=\"2048\"&gt;0&lt;/pages&gt;\n      &lt;pages unit=\"KiB\" size=\"1048576\"&gt;0&lt;/pages&gt;\n      &lt;distances&gt;\n        &lt;sibling id=\"0\" value=\"10\" /&gt;\n        &lt;sibling id=\"1\" value=\"21\" /&gt;\n      &lt;/distances&gt;\n      &lt;cpus num=\"6\"&gt;\n        &lt;cpu id=\"0\" socket_id=\"0\" core_id=\"0\" siblings=\"0,3\" /&gt;\n        &lt;cpu id=\"1\" socket_id=\"0\" core_id=\"1\" siblings=\"1,4\" /&gt;\n        &lt;cpu id=\"2\" socket_id=\"0\" core_id=\"2\" siblings=\"2,5\" /&gt;\n        &lt;cpu id=\"3\" socket_id=\"0\" core_id=\"0\" siblings=\"0,3\" /&gt;\n        &lt;cpu id=\"4\" socket_id=\"0\" core_id=\"1\" siblings=\"1,4\" /&gt;\n        &lt;cpu id=\"5\" socket_id=\"0\" core_id=\"2\" siblings=\"2,5\" /&gt;\n      &lt;/cpus&gt;\n    &lt;/cell&gt;\n    &lt;cell id=\"1\"&gt;\n      &lt;memory unit=\"KiB\"&gt;15624346&lt;/memory&gt;\n      &lt;pages unit=\"KiB\" size=\"4\"&gt;3906086&lt;/pages&gt;\n      &lt;pages unit=\"KiB\" size=\"2048\"&gt;0&lt;/pages&gt;\n      &lt;pages unit=\"KiB\" size=\"1048576\"&gt;0&lt;/pages&gt;\n      &lt;distances&gt;\n        &lt;sibling id=\"0\" value=\"21\" /&gt;\n        &lt;sibling id=\"1\" value=\"10\" /&gt;\n      &lt;/distances&gt;\n      &lt;cpus num=\"6\"&gt;\n        &lt;cpu id=\"6\" socket_id=\"1\" core_id=\"3\" siblings=\"6,9\" /&gt;\n        &lt;cpu id=\"7\" socket_id=\"1\" core_id=\"4\" siblings=\"7,10\" /&gt;\n        &lt;cpu id=\"8\" socket_id=\"1\" core_id=\"5\" siblings=\"8,11\" /&gt;\n        &lt;cpu id=\"9\" socket_id=\"1\" core_id=\"3\" siblings=\"6,9\" /&gt;\n        &lt;cpu id=\"10\" socket_id=\"1\" core_id=\"4\" siblings=\"7,10\" /&gt;\n        &lt;cpu id=\"11\" socket_id=\"1\" core_id=\"5\" siblings=\"8,11\" /&gt;\n      &lt;/cpus&gt;\n    &lt;/cell&gt;\n  &lt;/cells&gt;\n&lt;/topology&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tOptional: Test the performance of the VM by using \u003Ca class=\"link\" href=\"#virtual-machine-performance-monitoring-tools_optimizing-virtual-machine-performance-in-rhel\" title=\"18.8. Virtual machine performance monitoring tools\">the applicable tools and utilities\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tSet up and mount 1 GiB huge pages on the host:\n\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t1 GiB huge pages might not be available on some architectures and configurations, such as ARM 64 hosts.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tAdd the following line to the host’s kernel command line:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">default_hugepagesz=1G hugepagesz=1G\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">/etc/systemd/system/hugetlb-gigantic-pages.service\u003C/code> file with the following content:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">[Unit]\nDescription=HugeTLB Gigantic Pages Reservation\nDefaultDependencies=no\nBefore=dev-hugepages.mount\nConditionPathExists=/sys/devices/system/node\nConditionKernelCommandLine=hugepagesz=1G\n\n[Service]\nType=oneshot\nRemainAfterExit=yes\nExecStart=/etc/systemd/hugetlb-reserve-pages.sh\n\n[Install]\nWantedBy=sysinit.target\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">/etc/systemd/hugetlb-reserve-pages.sh\u003C/code> file with the following content:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">#!/bin/sh\n\nnodes_path=/sys/devices/system/node/\nif [ ! -d $nodes_path ]; then\n\techo \"ERROR: $nodes_path does not exist\"\n\texit 1\nfi\n\nreserve_pages()\n{\n\techo $1 &gt; $nodes_path/$2/hugepages/hugepages-1048576kB/nr_hugepages\n}\n\nreserve_pages 4 node1\nreserve_pages 4 node2\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThis reserves four 1GiB huge pages from \u003Cspan class=\"emphasis\">\u003Cem>node1\u003C/em>\u003C/span> and four 1GiB huge pages from \u003Cspan class=\"emphasis\">\u003Cem>node2\u003C/em>\u003C/span>.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tMake the script created in the previous step executable:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>chmod +x /etc/systemd/hugetlb-reserve-pages.sh\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tEnable huge page reservation on boot:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable hugetlb-gigantic-pages\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virsh edit\u003C/code> command to edit the XML configuration of the VM you wish to optimize, in this example \u003Cspan class=\"emphasis\">\u003Cem>super-VM\u003C/em>\u003C/span>:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh edit super-vm\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tAdjust the XML configuration of the VM in the following way:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tSet the VM to use 8 static vCPUs. Use the \u003Ccode class=\"literal\">&lt;vcpu/&gt;\u003C/code> element to do this.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tPin each of the vCPU threads to the corresponding host CPU threads that it mirrors in the topology. To do so, use the \u003Ccode class=\"literal\">&lt;vcpupin/&gt;\u003C/code> elements in the \u003Ccode class=\"literal\">&lt;cputune&gt;\u003C/code> section.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tNote that, as shown by the \u003Ccode class=\"literal\">virsh capabilities\u003C/code> utility above, host CPU threads are not ordered sequentially in their respective cores. In addition, the vCPU threads should be pinned to the highest available set of host cores on the same NUMA node. For a table illustration, see the \u003Cspan class=\"strong strong\">\u003Cstrong>Sample topology\u003C/strong>\u003C/span> section below.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThe XML configuration for steps a. and b. can look similar to:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;cputune&gt;\n  &lt;vcpupin vcpu='0' cpuset='1'/&gt;\n  &lt;vcpupin vcpu='1' cpuset='4'/&gt;\n  &lt;vcpupin vcpu='2' cpuset='2'/&gt;\n  &lt;vcpupin vcpu='3' cpuset='5'/&gt;\n  &lt;vcpupin vcpu='4' cpuset='7'/&gt;\n  &lt;vcpupin vcpu='5' cpuset='10'/&gt;\n  &lt;vcpupin vcpu='6' cpuset='8'/&gt;\n  &lt;vcpupin vcpu='7' cpuset='11'/&gt;\n  &lt;emulatorpin cpuset='6,9'/&gt;\n&lt;/cputune&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tSet the VM to use 1 GiB huge pages:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;memoryBacking&gt;\n  &lt;hugepages&gt;\n    &lt;page size='1' unit='GiB'/&gt;\n  &lt;/hugepages&gt;\n&lt;/memoryBacking&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tConfigure the VM’s NUMA nodes to use memory from the corresponding NUMA nodes on the host. To do so, use the \u003Ccode class=\"literal\">&lt;memnode/&gt;\u003C/code> elements in the \u003Ccode class=\"literal\">&lt;numatune/&gt;\u003C/code> section:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;numatune&gt;\n  &lt;memory mode=\"preferred\" nodeset=\"1\"/&gt;\n  &lt;memnode cellid=\"0\" mode=\"strict\" nodeset=\"0\"/&gt;\n  &lt;memnode cellid=\"1\" mode=\"strict\" nodeset=\"1\"/&gt;\n&lt;/numatune&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tEnsure the CPU mode is set to \u003Ccode class=\"literal\">host-passthrough\u003C/code>, and that the CPU uses cache in \u003Ccode class=\"literal\">passthrough\u003C/code> mode:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;cpu mode=\"host-passthrough\"&gt;\n  &lt;topology sockets=\"2\" cores=\"2\" threads=\"2\"/&gt;\n  &lt;cache mode=\"passthrough\"/&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tOn an ARM 64 system, omit the \u003Ccode class=\"literal\">&lt;cache mode=\"passthrough\"/&gt;\u003C/code> line.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tConfirm that the resulting XML configuration of the VM includes a section similar to the following:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">[...]\n  &lt;memoryBacking&gt;\n    &lt;hugepages&gt;\n      &lt;page size='1' unit='GiB'/&gt;\n    &lt;/hugepages&gt;\n  &lt;/memoryBacking&gt;\n  &lt;vcpu placement='static'&gt;8&lt;/vcpu&gt;\n  &lt;cputune&gt;\n    &lt;vcpupin vcpu='0' cpuset='1'/&gt;\n    &lt;vcpupin vcpu='1' cpuset='4'/&gt;\n    &lt;vcpupin vcpu='2' cpuset='2'/&gt;\n    &lt;vcpupin vcpu='3' cpuset='5'/&gt;\n    &lt;vcpupin vcpu='4' cpuset='7'/&gt;\n    &lt;vcpupin vcpu='5' cpuset='10'/&gt;\n    &lt;vcpupin vcpu='6' cpuset='8'/&gt;\n    &lt;vcpupin vcpu='7' cpuset='11'/&gt;\n    &lt;emulatorpin cpuset='6,9'/&gt;\n  &lt;/cputune&gt;\n  &lt;numatune&gt;\n    &lt;memory mode=\"preferred\" nodeset=\"1\"/&gt;\n    &lt;memnode cellid=\"0\" mode=\"strict\" nodeset=\"0\"/&gt;\n    &lt;memnode cellid=\"1\" mode=\"strict\" nodeset=\"1\"/&gt;\n  &lt;/numatune&gt;\n  &lt;cpu mode=\"host-passthrough\"&gt;\n    &lt;topology sockets=\"2\" cores=\"2\" threads=\"2\"/&gt;\n    &lt;cache mode=\"passthrough\"/&gt;\n    &lt;numa&gt;\n      &lt;cell id=\"0\" cpus=\"0-3\" memory=\"2\" unit=\"GiB\"&gt;\n        &lt;distances&gt;\n          &lt;sibling id=\"0\" value=\"10\"/&gt;\n          &lt;sibling id=\"1\" value=\"21\"/&gt;\n        &lt;/distances&gt;\n      &lt;/cell&gt;\n      &lt;cell id=\"1\" cpus=\"4-7\" memory=\"2\" unit=\"GiB\"&gt;\n        &lt;distances&gt;\n          &lt;sibling id=\"0\" value=\"21\"/&gt;\n          &lt;sibling id=\"1\" value=\"10\"/&gt;\n        &lt;/distances&gt;\n      &lt;/cell&gt;\n    &lt;/numa&gt;\n  &lt;/cpu&gt;\n&lt;/domain&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tOptional: Test the performance of the VM by using \u003Ca class=\"link\" href=\"#virtual-machine-performance-monitoring-tools_optimizing-virtual-machine-performance-in-rhel\" title=\"18.8. Virtual machine performance monitoring tools\">the applicable tools and utilities\u003C/a> to evaluate the impact of the VM’s optimization.\n\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Sample topology\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe following tables illustrate the connections between the vCPUs and the host CPUs they should be pinned to:\n\t\t\t\t\t\t\u003C/p>\u003Crh-table id=\"idm140237774253056\">\u003Ctable class=\"gt-8-cols lt-7-rows\">\u003Ccaption>Table 18.2. Host topology\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 7%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_4\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_5\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_6\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_7\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_8\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_9\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_10\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_11\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_12\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_13\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_14\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_15\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Ctbody>\u003Ctr>\u003Ctd colspan=\"3\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>CPU threads\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t3\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t4\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t2\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t5\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t6\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t9\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t7\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t10\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t8\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t11\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd colspan=\"3\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Cores\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"2\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"2\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"2\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t2\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"2\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t3\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"2\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t4\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"2\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t5\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd colspan=\"3\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Sockets\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"6\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"6\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd colspan=\"3\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>NUMA nodes\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"6\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"6\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Crh-table id=\"idm140237774625344\">\u003Ctable class=\"gt-8-cols lt-7-rows\">\u003Ccaption>Table 18.3. VM topology\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 9%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 9%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 9%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 9%; \" class=\"col_4\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 9%; \" class=\"col_5\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 9%; \" class=\"col_6\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 9%; \" class=\"col_7\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 9%; \" class=\"col_8\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 9%; \" class=\"col_9\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 9%; \" class=\"col_10\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 9%; \" class=\"col_11\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Ctbody>\u003Ctr>\u003Ctd colspan=\"3\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>vCPU threads\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t2\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t3\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t4\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t5\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t6\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t7\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd colspan=\"3\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Cores\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"2\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"2\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"2\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t2\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"2\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t3\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd colspan=\"3\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Sockets\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"4\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"4\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd colspan=\"3\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>NUMA nodes\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"4\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"4\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Crh-table id=\"idm140237770990640\">\u003Ctable class=\"gt-8-cols lt-7-rows\">\u003Ccaption>Table 18.4. Combined host and VM topology\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 7%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_4\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_5\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_6\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_7\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_8\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_9\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_10\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_11\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_12\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_13\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_14\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 7%; \" class=\"col_15\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Ctbody>\u003Ctr>\u003Ctd colspan=\"3\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>vCPU threads\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"2\" align=\"center\" valign=\"top\"> \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t2\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t3\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"2\" align=\"center\" valign=\"top\"> \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t4\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t5\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t6\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t7\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd colspan=\"3\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Host CPU threads\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t3\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t4\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t2\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t5\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t6\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t9\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t7\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t10\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t8\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t11\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd colspan=\"3\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Cores\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"2\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"2\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"2\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t2\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"2\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t3\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"2\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t4\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"2\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t5\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd colspan=\"3\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Sockets\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"6\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"6\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd colspan=\"3\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>NUMA nodes\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"6\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd colspan=\"6\" align=\"center\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn this scenario, there are 2 NUMA nodes and 8 vCPUs. Therefore, 4 vCPU threads should be pinned to each node.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn addition, Red Hat recommends leaving at least a single CPU thread available on each node for host system operations.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tBecause in this example, each NUMA node houses 3 cores, each with 2 host CPU threads, the set for node 0 translates as follows:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;vcpupin vcpu='0' cpuset='1'/&gt;\n&lt;vcpupin vcpu='1' cpuset='4'/&gt;\n&lt;vcpupin vcpu='2' cpuset='2'/&gt;\n&lt;vcpupin vcpu='3' cpuset='5'/&gt;\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_managing-ksm_optimizing-virtual-machine-cpu-performance\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">18.6.5. Enabling and disabling kernel same-page merging\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tKernel Same-Page Merging (KSM) improves memory density by sharing identical memory pages between virtual machines (VMs). Therefore, enabling KSM might improve memory efficiency of your VM deployment.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tHowever, enabling KSM also increases CPU utilization, and might negatively affect overall performance depending on the workload.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIn RHEL 9 and later, KSM is disabled by default. To enable KSM and test its impact on your VM performance, see the following instructions.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tRoot access to your host system.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnable KSM:\n\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tEnabling KSM increases CPU utilization and affects overall CPU performance.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">ksmtuned\u003C/code> service:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>{PackageManagerCommand} install ksmtuned\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tStart the service:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\tTo enable KSM for a single session, use the \u003Ccode class=\"literal\">systemctl\u003C/code> utility to start the \u003Ccode class=\"literal\">ksm\u003C/code> and \u003Ccode class=\"literal\">ksmtuned\u003C/code> services.\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl start ksm\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl start ksmtuned\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\tTo enable KSM persistently, use the \u003Ccode class=\"literal\">systemctl\u003C/code> utility to enable the \u003Ccode class=\"literal\">ksm\u003C/code> and \u003Ccode class=\"literal\">ksmtuned\u003C/code> services.\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable ksm\u003C/strong>\u003C/span>\nCreated symlink /etc/systemd/system/multi-user.target.wants/ksm.service → /usr/lib/systemd/system/ksm.service\n\n# \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable ksmtuned\u003C/strong>\u003C/span>\nCreated symlink /etc/systemd/system/multi-user.target.wants/ksmtuned.service → /usr/lib/systemd/system/ksmtuned.service\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tMonitor the performance and resource consumption of VMs on your host to evaluate the benefits of activating KSM. Specifically, ensure that the additional CPU usage by KSM does not offset the memory improvements and does not cause additional performance issues. In latency-sensitive workloads, also pay attention to cross-NUMA page merges.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: If KSM has not improved your VM performance, disable it:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tTo disable KSM for a single session, use the \u003Ccode class=\"literal\">systemctl\u003C/code> utility to stop \u003Ccode class=\"literal\">ksm\u003C/code> and \u003Ccode class=\"literal\">ksmtuned\u003C/code> services.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl stop ksm\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl stop ksmtuned\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tTo disable KSM persistently, use the \u003Ccode class=\"literal\">systemctl\u003C/code> utility to disable \u003Ccode class=\"literal\">ksm\u003C/code> and \u003Ccode class=\"literal\">ksmtuned\u003C/code> services.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl disable ksm\u003C/strong>\u003C/span>\nRemoved /etc/systemd/system/multi-user.target.wants/ksm.service.\n# \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl disable ksmtuned\u003C/strong>\u003C/span>\nRemoved /etc/systemd/system/multi-user.target.wants/ksmtuned.service.\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tMemory pages shared between VMs before deactivating KSM will remain shared. To stop sharing, delete all the \u003Ccode class=\"literal\">PageKSM\u003C/code> pages in the system by using the following command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo 2 &gt; /sys/kernel/mm/ksm/run\u003C/strong>\u003C/span>\u003C/pre>\u003Cp>\n\t\t\t\t\t\tHowever, this command increases memory usage, and might cause performance problems on your host or your VMs.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"optimizing-virtual-machine-network-performance_optimizing-virtual-machine-performance-in-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">18.7. Optimizing virtual machine network performance\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tDue to the virtual nature of a VM’s network interface card (NIC), the VM loses a portion of its allocated host network bandwidth, which can reduce the overall workload efficiency of the VM. The following tips can minimize the negative impact of virtualization on the virtual NIC (vNIC) throughput.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tUse any of the following methods and observe if it has a beneficial effect on your VM network performance:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Enable the vhost_net module\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOn the host, ensure the \u003Ccode class=\"literal\">vhost_net\u003C/code> kernel feature is enabled:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lsmod | grep vhost\u003C/strong>\u003C/span>\nvhost_net              32768  1\nvhost                  53248  1 vhost_net\ntap                    24576  1 vhost_net\ntun                    57344  6 vhost_net\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf the output of this command is blank, enable the \u003Ccode class=\"literal\">vhost_net\u003C/code> kernel module:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>modprobe vhost_net\u003C/strong>\u003C/span>\u003C/pre>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Set up multi-queue virtio-net\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo set up the \u003Cspan class=\"emphasis\">\u003Cem>multi-queue virtio-net\u003C/em>\u003C/span> feature for a VM, use the \u003Ccode class=\"literal\">virsh edit\u003C/code> command to edit to the XML configuration of the VM. In the XML, add the following to the \u003Ccode class=\"literal\">&lt;devices&gt;\u003C/code> section, and replace \u003Ccode class=\"literal\">N\u003C/code> with the number of vCPUs in the VM, up to 16:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">&lt;interface type='network'&gt;\n      &lt;source network='default'/&gt;\n      &lt;model type='virtio'/&gt;\n      &lt;driver name='vhost' queues='N'/&gt;\n&lt;/interface&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf the VM is running, restart it for the changes to take effect.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Batching network packets\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn Linux VM configurations with a long transmission path, batching packets before submitting them to the kernel may improve cache utilization. To set up packet batching, use the following command on the host, and replace \u003Cspan class=\"emphasis\">\u003Cem>tap0\u003C/em>\u003C/span> with the name of the network interface that the VMs use:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ethtool -C \u003Cspan class=\"emphasis\">\u003Cem>tap0\u003C/em>\u003C/span> rx-frames 64\u003C/strong>\u003C/span>\u003C/pre>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">SR-IOV\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tIf your host NIC supports SR-IOV, use SR-IOV device assignment for your vNICs. For more information, see \u003Ca class=\"link\" href=\"#managing-sr-iov-devices_managing-virtual-devices\" title=\"14.7. Managing SR-IOV devices\">Managing SR-IOV devices\u003C/a>.\n\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#understanding-virtual-networking-overview_configuring-virtual-machine-network-connections\" title=\"17.1. Understanding virtual networking\">Understanding virtual networking\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"virtual-machine-performance-monitoring-tools_optimizing-virtual-machine-performance-in-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">18.8. Virtual machine performance monitoring tools\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tTo identify what consumes the most VM resources and which aspect of VM performance needs optimization, performance diagnostic tools, both general and VM-specific, can be used.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Default OS performance monitoring tools\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tFor standard performance evaluation, you can use the utilities provided by default by your host and guest operating systems:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn your RHEL 9 host, as root, use the \u003Ccode class=\"literal\">top\u003C/code> utility or the \u003Cspan class=\"strong strong\">\u003Cstrong>system monitor\u003C/strong>\u003C/span> application, and look for \u003Ccode class=\"literal\">qemu\u003C/code> and \u003Ccode class=\"literal\">virt\u003C/code> in the output. This shows how much host system resources your VMs are consuming.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIf the monitoring tool displays that any of the \u003Ccode class=\"literal\">qemu\u003C/code> or \u003Ccode class=\"literal\">virt\u003C/code> processes consume a large portion of the host CPU or memory capacity, use the \u003Ccode class=\"literal\">perf\u003C/code> utility to investigate. For details, see below.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIn addition, if a \u003Ccode class=\"literal\">vhost_net\u003C/code> thread process, named for example \u003Cspan class=\"emphasis\">\u003Cem>vhost_net-1234\u003C/em>\u003C/span>, is displayed as consuming an excessive amount of host CPU capacity, consider using \u003Ca class=\"link\" href=\"#optimizing-virtual-machine-network-performance_optimizing-virtual-machine-performance-in-rhel\" title=\"18.7. Optimizing virtual machine network performance\">virtual network optimization features\u003C/a>, such as \u003Ccode class=\"literal\">multi-queue virtio-net\u003C/code>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the guest operating system, use performance utilities and applications available on the system to evaluate which processes consume the most system resources.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOn Linux systems, you can use the \u003Ccode class=\"literal\">top\u003C/code> utility.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOn Windows systems, you can use the \u003Cspan class=\"strong strong\">\u003Cstrong>Task Manager\u003C/strong>\u003C/span> application.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>perf kvm\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tYou can use the \u003Ccode class=\"literal\">perf\u003C/code> utility to collect and analyze virtualization-specific statistics about the performance of your RHEL 9 host. To do so:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the host, install the \u003Cspan class=\"emphasis\">\u003Cem>perf\u003C/em>\u003C/span> package:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install perf\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse one of the \u003Ccode class=\"literal\">perf kvm stat\u003C/code> commands to display perf statistics for your virtualization host:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tFor real-time monitoring of your hypervisor, use the \u003Ccode class=\"literal\">perf kvm stat live\u003C/code> command.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo log the perf data of your hypervisor over a period of time, activate the logging by using the \u003Ccode class=\"literal\">perf kvm stat record\u003C/code> command. After the command is canceled or interrupted, the data is saved in the \u003Ccode class=\"literal\">perf.data.guest\u003C/code> file, which can be analyzed by using the \u003Ccode class=\"literal\">perf kvm stat report\u003C/code> command.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAnalyze the \u003Ccode class=\"literal\">perf\u003C/code> output for types of \u003Ccode class=\"literal\">VM-EXIT\u003C/code> events and their distribution. For example, the \u003Ccode class=\"literal\">PAUSE_INSTRUCTION\u003C/code> events should be infrequent, but in the following output, the high occurrence of this event suggests that the host CPUs are not handling the running vCPUs well. In such a scenario, consider shutting down some of your active VMs, removing vCPUs from these VMs, or \u003Ca class=\"link\" href=\"#optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel\" title=\"18.6. Optimizing virtual machine CPU performance\">tuning the performance of the vCPUs\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>perf kvm stat report\u003C/strong>\u003C/span>\n\nAnalyze events for all VMs, all VCPUs:\n\n\n             VM-EXIT    Samples  Samples%     Time%    Min Time    Max Time         Avg time\n\n  EXTERNAL_INTERRUPT     365634    31.59%    18.04%      0.42us  58780.59us    204.08us ( +-   0.99% )\n           MSR_WRITE     293428    25.35%     0.13%      0.59us  17873.02us      1.80us ( +-   4.63% )\n    PREEMPTION_TIMER     276162    23.86%     0.23%      0.51us  21396.03us      3.38us ( +-   5.19% )\n   PAUSE_INSTRUCTION     189375    16.36%    11.75%      0.72us  29655.25us    256.77us ( +-   0.70% )\n                 HLT      20440     1.77%    69.83%      0.62us  79319.41us  14134.56us ( +-   0.79% )\n              VMCALL      12426     1.07%     0.03%      1.02us   5416.25us      8.77us ( +-   7.36% )\n       EXCEPTION_NMI         27     0.00%     0.00%      0.69us      1.34us      0.98us ( +-   3.50% )\n       EPT_MISCONFIG          5     0.00%     0.00%      5.15us     10.85us      7.88us ( +-  11.67% )\n\nTotal Samples:1157497, Total events handled time:413728274.66us.\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOther event types that can signal problems in the output of \u003Ccode class=\"literal\">perf kvm stat\u003C/code> include:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">INSN_EMULATION\u003C/code> - suggests suboptimal \u003Ca class=\"link\" href=\"#optimizing-virtual-machine-i-o-performance_optimizing-virtual-machine-performance-in-rhel\" title=\"18.5. Optimizing virtual machine I/O performance\">VM I/O configuration\u003C/a>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tFor more information about using \u003Ccode class=\"literal\">perf\u003C/code> to monitor virtualization performance, see the \u003Ccode class=\"literal\">perf-kvm\u003C/code> man page on your system.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>numastat\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tTo see the current NUMA configuration of your system, you can use the \u003Ccode class=\"literal\">numastat\u003C/code> utility, which is provided by installing the \u003Cspan class=\"strong strong\">\u003Cstrong>numactl\u003C/strong>\u003C/span> package.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tThe following shows a host with 4 running VMs, each obtaining memory from multiple NUMA nodes. This is not optimal for vCPU performance, and \u003Ca class=\"link\" href=\"#configuring-numa-in-a-virtual-machine_optimizing-virtual-machine-cpu-performance\" title=\"18.6.3. Configuring NUMA in a virtual machine\">warrants adjusting\u003C/a>:\n\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>numastat -c qemu-kvm\u003C/strong>\u003C/span>\n\nPer-node process memory usage (in MBs)\nPID              Node 0 Node 1 Node 2 Node 3 Node 4 Node 5 Node 6 Node 7 Total\n---------------  ------ ------ ------ ------ ------ ------ ------ ------ -----\n51722 (qemu-kvm)     68     16    357   6936      2      3    147    598  8128\n51747 (qemu-kvm)    245     11      5     18   5172   2532      1     92  8076\n53736 (qemu-kvm)     62    432   1661    506   4851    136     22    445  8116\n53773 (qemu-kvm)   1393      3      1      2     12      0      0   6702  8114\n---------------  ------ ------ ------ ------ ------ ------ ------ ------ -----\nTotal              1769    463   2024   7462  10037   2672    169   7837 32434\u003C/pre>\u003Cp>\n\t\t\t\tIn contrast, the following shows memory being provided to each VM by a single node, which is significantly more efficient.\n\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>numastat -c qemu-kvm\u003C/strong>\u003C/span>\n\nPer-node process memory usage (in MBs)\nPID              Node 0 Node 1 Node 2 Node 3 Node 4 Node 5 Node 6 Node 7 Total\n---------------  ------ ------ ------ ------ ------ ------ ------ ------ -----\n51747 (qemu-kvm)      0      0      7      0   8072      0      1      0  8080\n53736 (qemu-kvm)      0      0      7      0      0      0   8113      0  8120\n53773 (qemu-kvm)      0      0      7      0      0      0      1   8110  8118\n59065 (qemu-kvm)      0      0   8050      0      0      0      0      0  8051\n---------------  ------ ------ ------ ------ ------ ------ ------ ------ -----\nTotal                 0      0   8072      0   8072      0   8114   8110 32368\u003C/pre>\u003C/section>\u003Csection class=\"section _additional-resources\" id=\"related-information-optimizing-virtual-machine-performance-in-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">18.9. Additional resources\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#optimizing-windows-virtual-machines-on-rhel_installing-and-managing-windows-virtual-machines-on-rhel\" title=\"21.2. Optimizing Windows virtual machines\">Optimizing Windows virtual machines\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"securing-virtual-machines-in-rhel_configuring-and-managing-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 19. Securing virtual machines\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tAs an administrator of a RHEL 9 system with virtual machines (VMs), ensuring that your VMs are as secure as possible significantly lowers the risk of your guest and host OSs being infected by malicious software.\n\t\t\u003C/p>\u003Cp>\n\t\t\tThe following sections outline the \u003Ca class=\"link\" href=\"#how-security-works-in-virtual-machines_securing-virtual-machines-in-rhel\" title=\"19.1. How security works in virtual machines\">mechanics of securing VMs\u003C/a> on a RHEL 9 host and provides \u003Ca class=\"link\" href=\"#best-practices-for-securing-virtual-machines_securing-virtual-machines-in-rhel\" title=\"19.2. Best practices for securing virtual machines\">a list of methods\u003C/a> to increase the security of your VMs.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"how-security-works-in-virtual-machines_securing-virtual-machines-in-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">19.1. How security works in virtual machines\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tWhen using virtual machines (VMs), multiple operating systems can be housed within a single host machine. These systems are connected with the host through the hypervisor, and usually also through a virtual network. As a consequence, each VM can be used as a vector for attacking the host with malicious software, and the host can be used as a vector for attacking any of the VMs.\n\t\t\t\u003C/p>\u003Cdiv class=\"figure\" id=\"idm140237774190768\">\u003Cp class=\"title\">\u003Cstrong>Figure 19.1. A potential malware attack vector on a virtualization host\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/b3cca47c27c373413843c7b5cca0f90c/virt-sec_successful-attack.png\" alt=\"virt sec successful attack\"/>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tBecause the hypervisor uses the host kernel to manage VMs, services running on the VM’s operating system are frequently used for injecting malicious code into the host system. However, you can protect your system against such security threats by using \u003Ca class=\"link\" href=\"#best-practices-for-securing-virtual-machines_securing-virtual-machines-in-rhel\" title=\"19.2. Best practices for securing virtual machines\">a number of security features\u003C/a> on your host and your guest systems.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThese features, such as SELinux or QEMU sandboxing, provide various measures that make it more difficult for malicious code to attack the hypervisor and transfer between your host and your VMs.\n\t\t\t\u003C/p>\u003Cdiv class=\"figure\" id=\"idm140237774184512\">\u003Cp class=\"title\">\u003Cstrong>Figure 19.2. Prevented malware attacks on a virtualization host\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/a638209744e4c2c5c7ae8fe82818c6a5/virt-sec_prevented-attack.png\" alt=\"virt sec prevented attack\"/>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tMany of the features that RHEL 9 provides for VM security are always active and do not have to be enabled or configured. For details, see \u003Ca class=\"link\" href=\"#automatic-features-for-virtual-machine-security_securing-virtual-machines-in-rhel\" title=\"19.3. Automatic features for virtual machine security\">Automatic features for virtual machine security\u003C/a>.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIn addition, you can adhere to a variety of best practices to minimize the vulnerability of your VMs and your hypervisor. For more information, see \u003Ca class=\"link\" href=\"#best-practices-for-securing-virtual-machines_securing-virtual-machines-in-rhel\" title=\"19.2. Best practices for securing virtual machines\">Best practices for securing virtual machines\u003C/a>.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"best-practices-for-securing-virtual-machines_securing-virtual-machines-in-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">19.2. Best practices for securing virtual machines\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFollowing the instructions below significantly decreases the risk of your virtual machines being infected with malicious code and used as attack vectors to infect your host system.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>On the guest side:\u003C/strong>\u003C/span>\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSecure the virtual machine as if it was a physical machine. The specific methods available to enhance security depend on the guest OS.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf your VM is running RHEL 9, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/security_hardening/\">Securing Red Hat Enterprise Linux 9\u003C/a> for detailed instructions on improving the security of your guest system.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>On the host side:\u003C/strong>\u003C/span>\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWhen managing VMs remotely, use cryptographic utilities such as \u003Cspan class=\"strong strong\">\u003Cstrong>SSH\u003C/strong>\u003C/span> and network protocols such as \u003Cspan class=\"strong strong\">\u003Cstrong>SSL\u003C/strong>\u003C/span> for connecting to the VMs.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnsure SELinux is in Enforcing mode:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>getenforce\u003C/strong>\u003C/span>\nEnforcing\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf SELinux is disabled or in \u003Cspan class=\"emphasis\">\u003Cem>Permissive\u003C/em>\u003C/span> mode, see the \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_selinux/changing-selinux-states-and-modes_using-selinux#changing-to-enforcing-mode_changing-selinux-states-and-modes\">Using SELinux\u003C/a> document for instructions on activating Enforcing mode.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tSELinux Enforcing mode also enables the sVirt RHEL 9 feature. This is a set of specialized SELinux booleans for virtualization, which can be \u003Ca class=\"link\" href=\"#virtualization-booleans-in-rhel_securing-virtual-machines-in-rhel\" title=\"19.6. SELinux booleans for virtualization\">manually adjusted\u003C/a> for fine-grained VM security management.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse VMs with \u003Cspan class=\"emphasis\">\u003Cem>SecureBoot\u003C/em>\u003C/span>:\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSecureBoot is a feature that ensures that your VM is running a cryptographically signed OS. This prevents VMs whose OS has been altered by a malware attack from booting.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSecureBoot can only be applied when installing a Linux VM that uses OVMF firmware on an AMD64 or Intel 64 host. For instructions, see \u003Ca class=\"link\" href=\"#creating-a-secureboot-virtual-machine_securing-virtual-machines-in-rhel\" title=\"19.4. Creating a SecureBoot virtual machine\">Creating a SecureBoot virtual machine\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDo not use \u003Ccode class=\"literal\">qemu-*\u003C/code> commands, such as \u003Ccode class=\"literal\">qemu-kvm\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tQEMU is an essential component of the virtualization architecture in RHEL 9, but it is difficult to manage manually, and improper QEMU configurations may cause security vulnerabilities. Therefore, using most \u003Ccode class=\"literal\">qemu-*\u003C/code> commands is not supported by Red Hat. Instead, use \u003Cspan class=\"emphasis\">\u003Cem>libvirt\u003C/em>\u003C/span> utilities, such as \u003Ccode class=\"literal\">virsh\u003C/code>, \u003Ccode class=\"literal\">virt-install\u003C/code>, and \u003Ccode class=\"literal\">virt-xml\u003C/code>, as these orchestrate QEMU according to the best practices.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote, however, that the \u003Ccode class=\"literal\">qemu-img\u003C/code> utility is supported for \u003Ca class=\"link\" href=\"#managing-virtual-disk-images-by-using-the-cli_managing-storage-for-virtual-machines\" title=\"15.6. Managing virtual disk images by using the CLI\">management of virtual disk images\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#virtualization-booleans-in-rhel_securing-virtual-machines-in-rhel\" title=\"19.6. SELinux booleans for virtualization\">SELinux booleans for virtualization in RHEL\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"automatic-features-for-virtual-machine-security_securing-virtual-machines-in-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">19.3. Automatic features for virtual machine security\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIn addition to manual means of improving the security of your virtual machines listed in \u003Ca class=\"link\" href=\"#best-practices-for-securing-virtual-machines_securing-virtual-machines-in-rhel\" title=\"19.2. Best practices for securing virtual machines\">Best practices for securing virtual machines\u003C/a>, a number of security features are provided by the \u003Cspan class=\"strong strong\">\u003Cstrong>libvirt\u003C/strong>\u003C/span> software suite and are automatically enabled when using virtualization in RHEL 9. These include:\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\" id=\"system-and-session-connections_securing-virtual-machines-in-rhel\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">System and session connections\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo access all the available utilities for virtual machine management in RHEL 9, you need to use the \u003Cspan class=\"emphasis\">\u003Cem>system connection\u003C/em>\u003C/span> of libvirt (\u003Ccode class=\"literal\">qemu:///system\u003C/code>). To do so, you must have root privileges on the system or be a part of the \u003Cspan class=\"emphasis\">\u003Cem>libvirt\u003C/em>\u003C/span> user group.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tNon-root users that are not in the \u003Cspan class=\"emphasis\">\u003Cem>libvirt\u003C/em>\u003C/span> group can only access a \u003Cspan class=\"emphasis\">\u003Cem>session connection\u003C/em>\u003C/span> of libvirt (\u003Ccode class=\"literal\">qemu:///session\u003C/code>), which has to respect the access rights of the local user when accessing resources. For example, using the session connection, you cannot detect or access VMs created in the system connection or by other users. Also, available VM networking configuration options are significantly limited.\n\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tThe RHEL 9 documentation assumes you have system connection privileges.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Virtual machine separation\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tIndividual VMs run as isolated processes on the host, and rely on security enforced by the host kernel. Therefore, a VM cannot read or access the memory or storage of other VMs on the same host.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">QEMU sandboxing\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tA feature that prevents QEMU code from executing system calls that can compromise the security of the host.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Kernel Address Space Randomization (KASLR)\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tEnables randomizing the physical and virtual addresses at which the kernel image is decompressed. Thus, KASLR prevents guest security exploits based on the location of kernel objects.\n\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-a-secureboot-virtual-machine_securing-virtual-machines-in-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">19.4. Creating a SecureBoot virtual machine\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can create a Linux virtual machine (VM) that uses the \u003Cspan class=\"emphasis\">\u003Cem>SecureBoot\u003C/em>\u003C/span> feature, which ensures that your VM is running a cryptographically signed OS. This can be useful if the guest OS of a VM has been altered by malware. In such a scenario, SecureBoot prevents the VM from booting, which stops the potential spread of the malware to your host machine.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe VM is the Q35 machine type.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYour host system uses the AMD64 or Intel 64 architecture.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">edk2-OVMF\u003C/code> packages is installed:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install edk2-ovmf\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAn operating system (OS) installation source is available locally or on a network. This can be one of the following formats:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAn ISO image of an installation medium\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tA disk image of an existing VM installation\n\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tInstalling from a host CD-ROM or DVD-ROM device is not possible in RHEL 9. If you select a CD-ROM or DVD-ROM as the installation source when using any VM installation method available in RHEL 9, the installation will fail. For more information, see the \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/1185913\">Red Hat Knowledgebase\u003C/a>.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOptional: A Kickstart file can be provided for faster and easier configuration of the installation.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virt-install\u003C/code> command to create a VM as detailed in \u003Ca class=\"link\" href=\"#creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines\" title=\"3.1. Creating virtual machines by using the command-line interface\">Creating virtual machines by using the command-line interface\u003C/a>. For the \u003Ccode class=\"literal\">--boot\u003C/code> option, use the \u003Ccode class=\"literal\">uefi,nvram_template=/usr/share/OVMF/OVMF_VARS.secboot.fd\u003C/code> value. This uses the \u003Ccode class=\"literal\">OVMF_VARS.secboot.fd\u003C/code> and \u003Ccode class=\"literal\">OVMF_CODE.secboot.fd\u003C/code> files as templates for the VM’s non-volatile RAM (NVRAM) settings, which enables the SecureBoot feature.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-install --name rhel8sb --memory 4096 --vcpus 4 --os-variant rhel9.0 --boot uefi,nvram_template=/usr/share/OVMF/OVMF_VARS.secboot.fd --disk boot_order=2,size=10 --disk boot_order=1,device=cdrom,bus=scsi,path=/images/RHEL-9.0-installation.iso\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFollow the OS installation procedure according to the instructions on the screen.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAfter the guest OS is installed, access the VM’s command line by opening the terminal in \u003Ca class=\"link\" href=\"#proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines\" title=\"5.2. Opening a virtual machine graphical console by using Virt Viewer\">the graphical guest console\u003C/a> or connecting to the guest OS \u003Ca class=\"link\" href=\"#proc_connecting-to-a-virtual-machine-using-ssh_assembly_connecting-to-virtual-machines\" title=\"5.3. Connecting to a virtual machine by using SSH\">using SSH\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo confirm that SecureBoot has been enabled on the VM, use the \u003Ccode class=\"literal\">mokutil --sb-state\u003C/code> command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mokutil --sb-state\u003C/strong>\u003C/span>\nSecureBoot enabled\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"_additional-resources _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/interactively_installing_rhel_from_installation_media/index#manually-installing-red-hat-enterprise-linux\">Manually installing Red Hat Enterprise Linux\u003C/a>\n\t\t\t\t\u003C/p>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_limiting-what-actions-are-available-to-virtual-machine-users_securing-virtual-machines-in-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">19.5. Limiting what actions are available to virtual machine users\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIn some cases, actions that users of virtual machines (VMs) hosted on RHEL 9 can perform by default may pose a security risk. If that is the case, you can limit the actions available to VM users by configuring the \u003Ccode class=\"literal\">libvirt\u003C/code> daemons to use the \u003Ccode class=\"literal\">polkit\u003C/code> policy toolkit on the host machine.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Ensure your system’s \u003Ccode class=\"literal\">polkit\u003C/code> control policies related to \u003Ccode class=\"literal\">libvirt\u003C/code> are set up according to your preferences.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tFind all libvirt-related files in the \u003Ccode class=\"literal\">/usr/share/polkit-1/actions/\u003C/code> and \u003Ccode class=\"literal\">/usr/share/polkit-1/rules.d/\u003C/code> directories.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ls /usr/share/polkit-1/actions | grep libvirt\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>ls /usr/share/polkit-1/rules.d | grep libvirt\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOpen the files and review the rule settings.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tFor information about reading the syntax of \u003Ccode class=\"literal\">polkit\u003C/code> control policies, use \u003Ccode class=\"literal\">man polkit\u003C/code>.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tModify the \u003Ccode class=\"literal\">libvirt\u003C/code> control policies. To do so:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tCreate a new \u003Ccode class=\"literal\">.rules\u003C/code> file in the \u003Ccode class=\"literal\">/etc/polkit-1/rules.d/\u003C/code> directory.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tAdd your custom policies to this file, and save it.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tFor further information and examples of \u003Ccode class=\"literal\">libvirt\u003C/code> control policies, see \u003Ca class=\"link\" href=\"https://libvirt.org/aclpolkit.html#writing-access-control-policies\">the \u003Ccode class=\"literal\">libvirt\u003C/code> upstream documentation\u003C/a>.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure your VMs to use access policies determined by \u003Ccode class=\"literal\">polkit\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo do so, find all configuration files for virtualization drivers in the \u003Ccode class=\"literal\">/etc/libvirt/\u003C/code> directory, and uncomment the \u003Ccode class=\"literal\">access_drivers = [ \"polkit\" ]\u003C/code> line in them.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>find /etc/libvirt/ -name virt*d.conf -exec sed -i 's/#access_drivers = \\[ \"polkit\" \\]/access_drivers = \\[ \"polkit\" \\]/g' {} +\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor each file that you modified in the previous step, restart the corresponding service.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, if you have modified \u003Ccode class=\"literal\">/etc/libvirt/virtqemud.conf\u003C/code>, restart the \u003Ccode class=\"literal\">virtqemud\u003C/code> service.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl try-restart virtqemud\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAs a user whose VM actions you intended to limit, perform one of the restricted actions.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, if unprivileged users are restricted from viewing VMs created in the system session:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>virsh -c qemu:///system list --all\u003C/strong>\u003C/span>\nId   Name           State\n-------------------------------\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf this command does not list any VMs even though one or more VMs exist on your system, \u003Ccode class=\"literal\">polkit\u003C/code> successfully restricts the action for unprivileged users.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCurrently, configuring \u003Ccode class=\"literal\">libvirt\u003C/code> to use \u003Ccode class=\"literal\">polkit\u003C/code> makes it impossible to connect to VMs \u003Ca class=\"link\" href=\"#managing-virtual-machines-in-the-web-console_configuring-and-managing-virtualization\" title=\"Chapter 8. Managing virtual machines in the web console\">using the RHEL 9 web console\u003C/a>, due to an incompatibility with the \u003Ccode class=\"literal\">libvirt-dbus\u003C/code> service.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you require fine-grained access control of VMs in the web console, create a custom D-Bus policy. For instructions, see \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/6106401\">How to configure fine-grained control of Virtual Machines in Cockpit\u003C/a> in the Red Hat Knowledgebase.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">man polkit\u003C/code> command\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">libvirt\u003C/code> upstream information about \u003Ca class=\"link\" href=\"https://libvirt.org/aclpolkit.html#writing-access-control-policies\">polkit access control policies\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tinclude::module/virtualization/proc_\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"virtualization-booleans-in-rhel_securing-virtual-machines-in-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">19.6. SELinux booleans for virtualization\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tRHEL 9 provides the \u003Ccode class=\"literal\">sVirt\u003C/code> feature, which is a set of specialized SELinux booleans that are automatically enabled on a host with SELinux in Enforcing mode.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor fine-grained configuration of virtual machines security on a RHEL 9 system, you can configure SELinux booleans on the host to ensure the hypervisor acts in a specific way.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo list all virtualization-related booleans and their statuses, use the \u003Ccode class=\"literal\">getsebool -a | grep virt\u003C/code> command:\n\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>getsebool -a | grep virt\u003C/strong>\u003C/span>\n[...]\nvirt_sandbox_use_netlink --&gt; off\nvirt_sandbox_use_sys_admin --&gt; off\nvirt_transition_userdomain --&gt; off\nvirt_use_comm --&gt; off\nvirt_use_execmem --&gt; off\nvirt_use_fusefs --&gt; off\n[...]\u003C/pre>\u003Cp>\n\t\t\t\tTo enable a specific boolean, use the \u003Ccode class=\"literal\">setsebool -P \u003Cspan class=\"emphasis\">\u003Cem>boolean_name\u003C/em>\u003C/span> on\u003C/code> command as root. To disable a boolean, use \u003Ccode class=\"literal\">setsebool -P \u003Cspan class=\"emphasis\">\u003Cem>boolean_name\u003C/em>\u003C/span> off\u003C/code>.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe following table lists virtualization-related booleans available in RHEL 9 and what they do when enabled:\n\t\t\t\u003C/p>\u003Crh-table id=\"idm140237773480224\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 19.1. SELinux virtualization booleans\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 50%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 50%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237773475376\" scope=\"col\">SELinux Boolean\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237773474288\" scope=\"col\">Description\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773475376\"> \u003Cp>\n\t\t\t\t\t\t\t\tstaff_use_svirt\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773474288\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnables non-root users to create and transition VMs to sVirt.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773475376\"> \u003Cp>\n\t\t\t\t\t\t\t\tunprivuser_use_svirt\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773474288\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnables unprivileged users to create and transition VMs to sVirt.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773475376\"> \u003Cp>\n\t\t\t\t\t\t\t\tvirt_sandbox_use_audit\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773474288\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnables sandbox containers to send audit messages.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773475376\"> \u003Cp>\n\t\t\t\t\t\t\t\tvirt_sandbox_use_netlink\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773474288\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnables sandbox containers to use netlink system calls.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773475376\"> \u003Cp>\n\t\t\t\t\t\t\t\tvirt_sandbox_use_sys_admin\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773474288\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnables sandbox containers to use sys_admin system calls, such as mount.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773475376\"> \u003Cp>\n\t\t\t\t\t\t\t\tvirt_transition_userdomain\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773474288\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnables virtual processes to run as user domains.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773475376\"> \u003Cp>\n\t\t\t\t\t\t\t\tvirt_use_comm\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773474288\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnables virt to use serial/parallel communication ports.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773475376\"> \u003Cp>\n\t\t\t\t\t\t\t\tvirt_use_execmem\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773474288\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnables confined virtual guests to use executable memory and executable stack.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773475376\"> \u003Cp>\n\t\t\t\t\t\t\t\tvirt_use_fusefs\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773474288\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnables virt to read FUSE mounted files.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773475376\"> \u003Cp>\n\t\t\t\t\t\t\t\tvirt_use_nfs\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773474288\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnables virt to manage NFS mounted files.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773475376\"> \u003Cp>\n\t\t\t\t\t\t\t\tvirt_use_rawip\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773474288\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnables virt to interact with rawip sockets.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773475376\"> \u003Cp>\n\t\t\t\t\t\t\t\tvirt_use_samba\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773474288\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnables virt to manage CIFS mounted files.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773475376\"> \u003Cp>\n\t\t\t\t\t\t\t\tvirt_use_sanlock\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773474288\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnables confined virtual guests to interact with the sanlock.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773475376\"> \u003Cp>\n\t\t\t\t\t\t\t\tvirt_use_usb\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773474288\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnables virt to use USB devices.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773475376\"> \u003Cp>\n\t\t\t\t\t\t\t\tvirt_use_xserver\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773474288\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnables virtual machine to interact with the X Window System.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003C/section>\u003Csection class=\"section\" id=\"setting-up-secure-execution-on-ibm-z_securing-virtual-machines-in-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">19.7. Setting up IBM Secure Execution on IBM Z\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tWhen using IBM Z hardware to run a RHEL 9 host, you can improve the security of your virtual machines (VMs) by configuring IBM Secure Execution for the VMs.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIBM Secure Execution, also known as Protected Virtualization, prevents the host system from accessing a VM’s state and memory contents. As a result, even if the host is compromised, it cannot be used as a vector for attacking the guest operating system. In addition, Secure Execution can be used to prevent untrusted hosts from obtaining sensitive information from the VM.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe following procedure describes how to convert an existing VM on an IBM Z host into a secured VM.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe system hardware is one of the following:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIBM z15 or later\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIBM LinuxONE III or later\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe Secure Execution feature is enabled for your system. To verify, use:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grep facilities /proc/cpuinfo | grep 158\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf this command displays any output, your CPU is compatible with Secure Execution.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe kernel includes support for Secure Execution. To confirm, use:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ls /sys/firmware | grep uv\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the command generates any output, your kernel supports Secure Execution.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe host CPU model contains the \u003Ccode class=\"literal\">unpack\u003C/code> facility. To confirm, use:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh domcapabilities | grep unpack\u003C/strong>\u003C/span>\n&lt;feature policy='require' name='unpack'/&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the command generates the above output, your CPU host model is compatible with Secure Execution.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe CPU mode of the VM is set to \u003Ccode class=\"literal\">host-model\u003C/code>. To confirm this, use the following and replace \u003Ccode class=\"literal\">vm-name\u003C/code> with the name of your VM.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dumpxml \u003Cspan class=\"emphasis\">\u003Cem>vm-name\u003C/em>\u003C/span> | grep \"&lt;cpu mode='host-model'/&gt;\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the command generates any output, the VM’s CPU mode is set correctly.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Cspan class=\"emphasis\">\u003Cem>genprotimg\u003C/em>\u003C/span> package must be installed on the host.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install genprotimg\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have obtained and verified the IBM Z host key document. For instructions to do so, see \u003Ca class=\"link\" href=\"https://www.ibm.com/support/knowledgecenter/linuxonibm/com.ibm.linux.z.lxse/lxse_t_verify.html#lxse_verify\">Verifying the host key document\u003C/a> in IBM documentation.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tDo the following steps \u003Cspan class=\"strong strong\">\u003Cstrong>on your host\u003C/strong>\u003C/span>:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the \u003Ccode class=\"literal\">prot_virt=1\u003C/code> kernel parameter to the boot configuration of the host.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --update-kernel=ALL --args=\"prot_virt=1\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUpdate the boot menu:\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t# \u003Cspan class=\"strong strong\">\u003Cstrong>zipl\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tUse \u003Ccode class=\"literal\">virsh edit\u003C/code> to modify the XML configuration of the VM you want to secure.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd \u003Ccode class=\"literal\">&lt;launchSecurity type=\"s390-pv\"/&gt;\u003C/code> to the under the \u003Ccode class=\"literal\">&lt;/devices&gt;\u003C/code> line. For example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">[...]\n    &lt;/memballoon&gt;\n  &lt;/devices&gt;\n  &lt;launchSecurity type=\"s390-pv\"/&gt;\n&lt;/domain&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf the \u003Ccode class=\"literal\">&lt;devices&gt;\u003C/code> section of the configuration includes a \u003Ccode class=\"literal\">virtio-rng\u003C/code> device (\u003Ccode class=\"literal\">&lt;rng model=\"virtio\"&gt;\u003C/code>), remove all lines of the \u003Ccode class=\"literal\">&lt;rng&gt; &lt;/rng&gt;\u003C/code> block.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: If the VM that you want to secure is using 32 GiB of RAM or more, add the \u003Ccode class=\"literal\">&lt;async-teardown enabled='yes'/&gt;\u003C/code> line to the \u003Ccode class=\"literal\">&lt;features&gt;&lt;/features&gt;\u003C/code> section in its XML configuration.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis improves the performance of rebooting or stopping such Secure Execution guests.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tDo the following steps \u003Cspan class=\"strong strong\">\u003Cstrong>in the guest operating system\u003C/strong>\u003C/span> of the VM you want to secure.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a parameter file. For example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>touch ~/secure-parameters\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the \u003Ccode class=\"literal\">/boot/loader/entries\u003C/code> directory, identify the boot loader entry with the latest version:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ls /boot/loader/entries -l\u003C/strong>\u003C/span>\n[...]\n-rw-r--r--. 1 root root  281 Oct  9 15:51 3ab27a195c2849429927b00679db15c1-4.18.0-240.el8.s390x.conf\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRetrieve the kernel options line of the boot loader entry:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /boot/loader/entries/3ab27a195c2849429927b00679db15c1-4.18.0-240.el8.s390x.conf | grep options\u003C/strong>\u003C/span>\noptions root=/dev/mapper/rhel-root\nrd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the content of the options line and \u003Ccode class=\"literal\">swiotlb=262144\u003C/code> to the created parameters file.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"root=/dev/mapper/rhel-root rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap swiotlb=262144\" &gt; ~/secure-parameters\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tGenerate an IBM Secure Execution image.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, the following creates a \u003Ccode class=\"literal\">/boot/secure-image\u003C/code> secured image based on the \u003Ccode class=\"literal\">/boot/vmlinuz-4.18.0-240.el8.s390x\u003C/code> image, using the \u003Ccode class=\"literal\">secure-parameters\u003C/code> file, the \u003Ccode class=\"literal\">/boot/initramfs-4.18.0-240.el8.s390x.img\u003C/code> initial RAM disk file, and the \u003Ccode class=\"literal\">HKD-8651-000201C048.crt\u003C/code> host key document.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>genprotimg -i /boot/vmlinuz-4.18.0-240.el8.s390x -r /boot/initramfs-4.18.0-240.el8.s390x.img -p ~/secure-parameters -k HKD-8651-00020089A8.crt -o /boot/secure-image\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tBy using the \u003Ccode class=\"literal\">genprotimg\u003C/code> utility creates the secure image, which contains the kernel parameters, initial RAM disk, and boot image.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUpdate the VM’s boot menu to boot from the secure image. In addition, remove the lines starting with \u003Ccode class=\"literal\">initrd\u003C/code> and \u003Ccode class=\"literal\">options\u003C/code>, as they are not needed.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, in a RHEL 8.3 VM, the boot menu can be edited in the \u003Ccode class=\"literal\">/boot/loader/entries/\u003C/code> directory:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /boot/loader/entries/3ab27a195c2849429927b00679db15c1-4.18.0-240.el8.s390x.conf\u003C/strong>\u003C/span>\ntitle Red Hat Enterprise Linux 8.3\nversion 4.18.0-240.el8.s390x\nlinux /boot/secure-image\n[...]\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the bootable disk image:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>zipl -V\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSecurely remove the original unprotected files. For example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>shred /boot/vmlinuz-4.18.0-240.el8.s390x\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>shred /boot/initramfs-4.18.0-240.el8.s390x.img\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>shred secure-parameters\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe original boot image, the initial RAM image, and the kernel parameter file are unprotected, and if they are not removed, VMs with Secure Execution enabled can still be vulnerable to hacking attempts or sensitive data mining.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the host, use the \u003Ccode class=\"literal\">virsh dumpxml\u003C/code> utility to confirm the XML configuration of the secured VM. The configuration must include the \u003Ccode class=\"literal\">&lt;launchSecurity type=\"s390-pv\"/&gt;\u003C/code> element, and no &lt;rng model=\"virtio\"&gt; lines.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dumpxml \u003Cspan class=\"emphasis\">\u003Cem>vm-name\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\n[...]\n  &lt;cpu mode='host-model'/&gt;\n  &lt;devices&gt;\n    &lt;disk type='file' device='disk'&gt;\n      &lt;driver name='qemu' type='qcow2' cache='none' io='native'&gt;\n      &lt;source file='/var/lib/libvirt/images/secure-guest.qcow2'/&gt;\n      &lt;target dev='vda' bus='virtio'/&gt;\n    &lt;/disk&gt;\n    &lt;interface type='network'&gt;\n      &lt;source network='default'/&gt;\n      &lt;model type='virtio'/&gt;\n    &lt;/interface&gt;\n    &lt;console type='pty'/&gt;\n    &lt;memballoon model='none'/&gt;\n  &lt;/devices&gt;\n  \u003Cspan class=\"strong strong\">\u003Cstrong>&lt;launchSecurity type=\"s390-pv\"/&gt;\u003C/strong>\u003C/span>\n&lt;/domain&gt;\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://www.ibm.com/docs/en/linux-on-systems?topic=tasks-start-virtual-server\">IBM documentation on starting a secure virtual server\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://www.ibm.com/support/knowledgecenter/linuxonibm/com.ibm.linux.z.lxse/lxse_r_cmd.html#cmd_genprotimg\">IBM documentation on \u003Ccode class=\"literal\">genprotimg\u003C/code>\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_monitoring_and_updating_the_kernel/configuring-kernel-command-line-parameters_managing-monitoring-and-updating-the-kernel\">Configuring kernel command-line parameters\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"attaching-cryptographic-coprocessors-to-virtual-machines-on-ibm-z_securing-virtual-machines-in-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">19.8. Attaching cryptographic coprocessors to virtual machines on IBM Z\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo use hardware encryption in your virtual machine (VM) on an IBM Z host, create mediated devices from a cryptographic coprocessor device and assign them to the intended VMs. For detailed instructions, see below.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYour host is running on IBM Z hardware.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe cryptographic coprocessor is compatible with device assignment. To confirm this, ensure that the \u003Ccode class=\"literal\">type\u003C/code> of your coprocessor is listed as \u003Ccode class=\"literal\">CEX4\u003C/code> or later.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lszcrypt -V\u003C/strong>\u003C/span>\n\nCARD.DOMAIN TYPE  MODE        STATUS  REQUESTS  PENDING HWTYPE QDEPTH FUNCTIONS  DRIVER\n--------------------------------------------------------------------------------------------\n05         \u003Cspan class=\"strong strong\">\u003Cstrong>CEX5C\u003C/strong>\u003C/span> CCA-Coproc  online         1        0     11     08 S--D--N--  cex4card\n05.0004    \u003Cspan class=\"strong strong\">\u003Cstrong>CEX5C\u003C/strong>\u003C/span> CCA-Coproc  online         1        0     11     08 S--D--N--  cex4queue\n05.00ab    \u003Cspan class=\"strong strong\">\u003Cstrong>CEX5C\u003C/strong>\u003C/span> CCA-Coproc  online         1        0     11     08 S--D--N--  cex4queue\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">vfio_ap\u003C/code> kernel module is loaded. To verify, use:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lsmod | grep vfio_ap\u003C/strong>\u003C/span>\nvfio_ap         24576  0\n[...]\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo load the module, use:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>modprobe vfio_ap\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">s390utils\u003C/code> version supports \u003Ccode class=\"literal\">ap\u003C/code> handling:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lszdev --list-types\u003C/strong>\u003C/span>\n...\nap           Cryptographic Adjunct Processor (AP) device\n...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tObtain the decimal values for the devices that you want to assign to the VM. For example, for the devices \u003Ccode class=\"literal\">05.0004\u003C/code> and \u003Ccode class=\"literal\">05.00ab\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"obase=10; ibase=16; 04\" | bc\u003C/strong>\u003C/span>\n4\n# \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"obase=10; ibase=16; AB\" | bc\u003C/strong>\u003C/span>\n171\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the host, reassign the devices to the \u003Ccode class=\"literal\">vfio-ap\u003C/code> drivers:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>chzdev -t ap apmask=-5 aqmask=-4,-171\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tTo assign the devices persistently, use the \u003Ccode class=\"literal\">-p\u003C/code> flag.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the cryptographic devices have been reassigned correctly.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lszcrypt -V\u003C/strong>\u003C/span>\n\nCARD.DOMAIN TYPE  MODE        STATUS  REQUESTS  PENDING HWTYPE QDEPTH FUNCTIONS  DRIVER\n--------------------------------------------------------------------------------------------\n05          CEX5C CCA-Coproc  -              1        0     11     08 S--D--N--  cex4card\n05.0004     CEX5C CCA-Coproc  -              1        0     11     08 S--D--N--  \u003Cspan class=\"strong strong\">\u003Cstrong>vfio_ap\u003C/strong>\u003C/span>\n05.00ab     CEX5C CCA-Coproc  -              1        0     11     08 S--D--N--  \u003Cspan class=\"strong strong\">\u003Cstrong>vfio_ap\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the DRIVER values of the domain queues changed to \u003Ccode class=\"literal\">vfio_ap\u003C/code>, the reassignment succeeded.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate an XML snippet that defines a new mediated device.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe following example shows defining a persistent mediated device and assigning queues to it. Specifically, the \u003Ccode class=\"literal\">vfio_ap.xml\u003C/code> XML snippet in this example assigns a domain adapter \u003Ccode class=\"literal\">0x05\u003C/code>, domain queues \u003Ccode class=\"literal\">0x0004\u003C/code> and \u003Ccode class=\"literal\">0x00ab\u003C/code>, and a control domain \u003Ccode class=\"literal\">0x00ab\u003C/code> to the mediated device.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>vim vfio_ap.xml\u003C/strong>\u003C/span>\n\n&lt;device&gt;\n  &lt;parent&gt;ap_matrix&lt;/parent&gt;\n  &lt;capability type=\"mdev\"&gt;\n    &lt;type id=\"vfio_ap-passthrough\"/&gt;\n    &lt;attr name='assign_adapter' value='0x05'/&gt;\n    &lt;attr name='assign_domain' value='0x0004'/&gt;\n    &lt;attr name='assign_domain' value='0x00ab'/&gt;\n    &lt;attr name='assign_control_domain' value='0x00ab'/&gt;\n  &lt;/capability&gt;\n&lt;/device&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a new mediated device from the \u003Ccode class=\"literal\">vfio_ap.xml\u003C/code> XML snippet.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-define vfio_ap.xml\u003C/strong>\u003C/span>\nNode device 'mdev_8f9c4a73_1411_48d2_895d_34db9ac18f85_matrix' defined from 'vfio_ap.xml'\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart the mediated device that you created in the previous step, in this case \u003Ccode class=\"literal\">mdev_8f9c4a73_1411_48d2_895d_34db9ac18f85_matrix\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-start mdev_8f9c4a73_1411_48d2_895d_34db9ac18f85_matrix\u003C/strong>\u003C/span>\nDevice mdev_8f9c4a73_1411_48d2_895d_34db9ac18f85_matrix started\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCheck that the configuration has been applied correctly\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /sys/devices/vfio_ap/matrix/mdev_supported_types/vfio_ap-passthrough/devices/\u003Cspan class=\"emphasis\">\u003Cem>669d9b23-fe1b-4ecb-be08-a2fabca99b71\u003C/em>\u003C/span>/matrix\u003C/strong>\u003C/span>\n05.0004\n05.00ab\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the output contains the numerical values of queues that you have previously assigned to \u003Ccode class=\"literal\">vfio-ap\u003C/code>, the process was successful.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAttach the mediated device to the VM.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tDisplay the UUID of the mediated device that you created and save it for the next step.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh nodedev-dumpxml mdev_8f9c4a73_1411_48d2_895d_34db9ac18f85_matrix\u003C/strong>\u003C/span>\n\n&lt;device&gt;\n  &lt;name&gt;mdev_8f9c4a73_1411_48d2_895d_34db9ac18f85_matrix&lt;/name&gt;\n  &lt;parent&gt;ap_matrix&lt;/parent&gt;\n  &lt;capability type='mdev'&gt;\n    &lt;type id='vfio_ap-passthrough'/&gt;\n    \u003Cspan class=\"strong strong\">\u003Cstrong>&lt;uuid&gt;8f9c4a73-1411-48d2-895d-34db9ac18f85&lt;/uuid&gt;\u003C/strong>\u003C/span>\n    &lt;iommuGroup number='0'/&gt;\n    &lt;attr name='assign_adapter' value='0x05'/&gt;\n    &lt;attr name='assign_domain' value='0x0004'/&gt;\n    &lt;attr name='assign_domain' value='0x00ab'/&gt;\n    &lt;attr name='assign_control_domain' value='0x00ab'/&gt;\n  &lt;/capability&gt;\n&lt;/device&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate and open an XML file for the cryptographic card mediated device. For example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>vim crypto-dev.xml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd the following lines to the file and save it. Replace the \u003Ccode class=\"literal\">uuid\u003C/code> value with the UUID you obtained in step \u003Cspan class=\"emphasis\">\u003Cem>a\u003C/em>\u003C/span>.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;hostdev mode='subsystem' type='mdev' managed='no' model='vfio-ap'&gt;\n  &lt;source&gt;\n    &lt;address uuid='8f9c4a73-1411-48d2-895d-34db9ac18f85'/&gt;\n  &lt;/source&gt;\n&lt;/hostdev&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tUse the XML file to attach the mediated device to the VM. For example, to permanently attach a device defined in the \u003Ccode class=\"literal\">crypto-dev.xml\u003C/code> file to the running \u003Ccode class=\"literal\">testguest1\u003C/code> VM:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh attach-device testguest1 crypto-dev.xml --live --config\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">--live\u003C/code> option attaches the device to a running VM only, without persistence between boots. The \u003Ccode class=\"literal\">--config\u003C/code> option makes the configuration changes persistent. You can use the \u003Ccode class=\"literal\">--config\u003C/code> option alone to attach the device to a shut-down VM.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tNote that each UUID can only be assigned to one VM at a time.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnsure that the guest operating system detects the assigned cryptographic devices.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lszcrypt -V\u003C/strong>\u003C/span>\n\nCARD.DOMAIN TYPE  MODE        STATUS  REQUESTS  PENDING HWTYPE QDEPTH FUNCTIONS  DRIVER\n--------------------------------------------------------------------------------------------\n05          CEX5C CCA-Coproc  online         1        0     11     08 S--D--N--  cex4card\n05.0004     CEX5C CCA-Coproc  online         1        0     11     08 S--D--N--  cex4queue\n05.00ab     CEX5C CCA-Coproc  online         1        0     11     08 S--D--N--  cex4queue\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe output of this command in the guest operating system will be identical to that on a host logical partition with the same cryptographic coprocessor devices available.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the guest operating system, confirm that a control domain has been successfully assigned to the cryptographic devices.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lszcrypt -d C\u003C/strong>\u003C/span>\n\nDOMAIN 00 01 02 03 04 05 06 07 08 09 0a 0b 0c 0d 0e 0f\n------------------------------------------------------\n    00  .  .  .  .  U  .  .  .  .  .  .  .  .  .  .  .\n    10  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n    20  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n    30  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n    40  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n    50  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n    60  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n    70  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n    80  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n    90  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n    a0  .  .  .  .  .  .  .  .  .  .  .  B  .  .  .  .\n    b0  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n    c0  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n    d0  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n    e0  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n    f0  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .  .\n------------------------------------------------------\nC: Control domain\nU: Usage domain\nB: Both (Control + Usage domain)\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf \u003Ccode class=\"literal\">lszcrypt -d C\u003C/code> displays \u003Ccode class=\"literal\">U\u003C/code> and \u003Ccode class=\"literal\">B\u003C/code> intersections in the cryptographic device matrix, the control domain assignment was successful.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"enabling-standard-harware-security-on-windows-virtual-machines_securing-virtual-machines-in-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">19.9. Enabling standard hardware security on Windows virtual machines\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo secure Windows virtual machines (VMs), you can enable basic level security by using the standard hardware capabilities of the Windows device.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tMake sure you have installed the latest WHQL certified VirtIO drivers.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tMake sure the VM’s firmware supports UEFI boot.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">edk2-OVMF\u003C/code> package on your host machine.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>{PackageManagerCommand} install edk2-ovmf\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">vTPM\u003C/code> packages on your host machine.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>{PackageManagerCommand} install swtpm libtpms\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tMake sure the VM is using the Q35 machine architecture.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tMake sure you have the Windows installation media.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable TPM 2.0 by adding the following parameters to the \u003Ccode class=\"literal\">&lt;devices&gt;\u003C/code> section in the VM’s XML configuration.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;devices&gt;\n[...]\n  &lt;tpm model='tpm-crb'&gt;\n    &lt;backend type='emulator' version='2.0'/&gt;\n  &lt;/tpm&gt;\n[...]\n&lt;/devices&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tInstall Windows in UEFI mode. For more information about how to do so, see \u003Ca class=\"link\" href=\"#creating-a-secureboot-virtual-machine_securing-virtual-machines-in-rhel\" title=\"19.4. Creating a SecureBoot virtual machine\">Creating a SecureBoot virtual machine\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tInstall the VirtIO drivers on the Windows VM. For more information about how to do so, see \u003Ca class=\"link\" href=\"#installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines\" title=\"21.2.1.3. Installing virtio drivers on a Windows guest\">Installing virtio drivers on a Windows guest\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIn UEFI, enable Secure Boot. For more information about how to do so, see \u003Ca class=\"link\" href=\"https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/secure-boot-landing\">Secure Boot\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnsure that the \u003Cspan class=\"strong strong\">\u003Cstrong>Device Security\u003C/strong>\u003C/span> page on your Windows machine displays the following message:\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Settings &gt; Update &amp; Security &gt; Windows Security &gt; Device Security\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">\u003Cspan class=\"strong strong\">\u003Cstrong>Your device meets the requirements for standard hardware security.\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_enabling-enhanced-hardware-security-on-windows-virtual-machines_securing-virtual-machines-in-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">19.10. Enabling enhanced hardware security on Windows virtual machines\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo further secure Windows virtual machines (VMs), you can enable virtualization-based protection of code integrity, also known as Hypervisor-Protected Code Integrity (HVCI).\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnsure that standard hardware security is enabled. For more information, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/securing-virtual-machines-in-rhel_configuring-and-managing-virtualization#enabling-standard-harware-security-on-windows-virtual-machines_securing-virtual-machines-in-rhel\">Enabling standard hardware security on Windows virtual machines\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnsure you have enabled Hyper-V enlightenments. For more information, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/installing-and-managing-windows-virtual-machines-on-rhel_configuring-and-managing-virtualization#enabling-hyper-v-enlightenments_optimizing-windows-virtual-machines-on-rhel\">Enabling Hyper-V enlightenments\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen the XML configuration of the Windows VM. The following example opens the configuration of the \u003Cspan class=\"emphasis\">\u003Cem>Example-L1\u003C/em>\u003C/span> VM:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh edit \u003Cspan class=\"emphasis\">\u003Cem>Example-L1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUnder the \u003Ccode class=\"literal\">&lt;cpu&gt;\u003C/code> section, specify the CPU mode and add the policy flag.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tFor Intel CPUs, enable the \u003Ccode class=\"literal\">vmx\u003C/code> policy flag.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tFor AMD CPUs, enable the \u003Ccode class=\"literal\">svm\u003C/code> policy flag.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tIf you do not wish to specify a custom CPU, you can set the \u003Ccode class=\"literal\">&lt;cpu mode&gt;\u003C/code> as \u003Ccode class=\"literal\">host-passthrough\u003C/code>.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003Cpre class=\"programlisting language-xml\">&lt;cpu mode='custom' match='exact' check='partial'&gt;\n    &lt;model fallback='allow'&gt;Skylake-Client-IBRS&lt;/model&gt;\n    &lt;topology sockets='1' dies='1' cores='4' threads='1'/&gt;\n    &lt;feature policy='require' name='vmx'/&gt;\n&lt;/cpu&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSave the XML configuration and reboot the VM.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the VMs operating system, navigate to the \u003Cspan class=\"strong strong\">\u003Cstrong>Core isolation details\u003C/strong>\u003C/span> page:\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Settings &gt; Update &amp; Security &gt; Windows Security &gt; Device Security &gt; Core isolation details\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tToggle the switch to enable \u003Cspan class=\"strong strong\">\u003Cstrong>Memory Integrity\u003C/strong>\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tReboot the VM.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tFor other methods of enabling HVCI, see the relevant Microsoft documentation.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnsure that the \u003Cspan class=\"strong strong\">\u003Cstrong>Device Security\u003C/strong>\u003C/span> page on your Windows VM displays the following message:\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Settings &gt; Update &amp; Security &gt; Windows Security &gt; Device Security\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">\u003Cspan class=\"strong strong\">\u003Cstrong>Your device meets the requirements for enhanced hardware security.\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAlternatively, check System Information about the Windows VM:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tRun \u003Ccode class=\"literal\">msinfo32.exe\u003C/code> in a command prompt.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tCheck if \u003Cspan class=\"strong strong\">\u003Cstrong>Credential Guard, Hypervisor enforced Code Integrity\u003C/strong>\u003C/span> is listed under \u003Cspan class=\"strong strong\">\u003Cstrong>Virtualization-based security Services Running\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"sharing-files-between-the-host-and-its-virtual-machines_configuring-and-managing-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 20. Sharing files between the host and its virtual machines\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tYou may frequently require to share data between your host system and the virtual machines (VMs) it runs. To do so quickly and efficiently, you can set up NFS file shares on your system. Alternatively, you can also use the \u003Ccode class=\"literal\">virtiofs\u003C/code> to share data with your Linux and Windows VMs.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"sharing-files-between-the-host-and-its-virtual-machines-using-NFS_sharing-files-between-the-host-and-its-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">20.1. Sharing files between the host and its virtual machines by using NFS\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tFor efficient file sharing between the RHEL 9 host system and the virtual machines (VMs), you can export an NFS share that VMs can mount and access.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tHowever with Linux VMs, it is usually more convenient to use the \u003Ca class=\"link\" href=\"#sharing-files-between-the-host-and-its-virtual-machines-using-virtiofs_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs\" title=\"20.2.1. Sharing files between the host and its virtual machines by using virtiofs\">\u003Ccode class=\"literal\">virtiofs\u003C/code>\u003C/a> feature.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">nfs-utils\u003C/code> package is installed on the host.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install nfs-utils -y\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tVirtual network of \u003Ccode class=\"literal\">NAT\u003C/code> or \u003Ccode class=\"literal\">bridge\u003C/code> type is configured to connect a host to VMs.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOptional: For improved security, ensure your VMs are compatible with NFS version 4 or later.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the host, export a directory with the files you want to share as a network file system (NFS):\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tShare an existing directory with VMs. If you do not want to share any of the existing directories, create a new one:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mkdir shared-files\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tObtain the IP address of each VM to share files from the host, for example, \u003Cspan class=\"emphasis\">\u003Cem>testguest1\u003C/em>\u003C/span> and \u003Cspan class=\"emphasis\">\u003Cem>testguest2\u003C/em>\u003C/span> :\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh domifaddr \u003Cspan class=\"emphasis\">\u003Cem>testguest1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nName       MAC address          Protocol     Address\n----------------------------------------------------------------\nvnet0      52:53:00:84:57:90    ipv4         192.0.2.2/24\n\n# \u003Cspan class=\"strong strong\">\u003Cstrong>virsh domifaddr \u003Cspan class=\"emphasis\">\u003Cem>testguest2\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nName       MAC address          Protocol     Address\n----------------------------------------------------------------\nvnet1      52:53:00:65:29:21    ipv4         192.0.2.3/24\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEdit the \u003Ccode class=\"literal\">/etc/exports\u003C/code> file on the host and add a line that includes the directory you want to share, IPs of VMs to share, and additional options:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">\u003Cspan class=\"emphasis\">\u003Cem>/home/&lt;username&gt;/Downloads/&lt;shared_directory&gt;/ &lt;VM1-IP(options)&gt; &lt;VM2-IP(options)&gt;\u003C/em>\u003C/span>\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe following example shares the \u003Ccode class=\"literal\">/usr/local/shared-files\u003C/code> directory on the host with \u003Cspan class=\"emphasis\">\u003Cem>testguest1\u003C/em>\u003C/span> and \u003Cspan class=\"emphasis\">\u003Cem>testguest2\u003C/em>\u003C/span>, and enables the VMs to edit the content of the directory:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">\u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>/usr/local/shared-files/ 192.0.2.2(rw,sync) 192.0.2.3(rw,sync)\u003C/em>\u003C/span>\u003C/code>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tTo share a directory with a Windows VM, you need to ensure the Windows NFS client has write permissions in the shared directory. You can use the \u003Ccode class=\"literal\">all_squash\u003C/code>, \u003Ccode class=\"literal\">anonuid\u003C/code>, and \u003Ccode class=\"literal\">anongid\u003C/code> options in the \u003Ccode class=\"literal\">/etc/exports\u003C/code> file.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/local/shared-files/ 192.0.2.2(rw,sync,all_squash,anonuid=\u003Cspan class=\"emphasis\">\u003Cem>&lt;directory-owner-UID&gt;\u003C/em>\u003C/span>,anongid=\u003Cspan class=\"emphasis\">\u003Cem>&lt;directory-owner-GID&gt;\u003C/em>\u003C/span>)\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\tThe \u003Cspan class=\"emphasis\">\u003Cem>&lt;directory-owner-UID&gt;\u003C/em>\u003C/span> and \u003Cspan class=\"emphasis\">\u003Cem>&lt;directory-owner-GID&gt;\u003C/em>\u003C/span> are the UID and GID of the local user that owns the shared directory on the host.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\tFor other options to manage NFS client permissions, follow the \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/securing_networks/securing-network-services_securing-networks#securing-the-nfs-service_securing-network-services\">Securing the NFS service\u003C/a> guide.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tExport the updated file system:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>exportfs -a\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tStart the \u003Ccode class=\"literal\">nfs-server\u003C/code> service:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl start nfs-server\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tObtain the IP address of the host system to mount the shared directory on the VMs:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ip addr\u003C/strong>\u003C/span>\n...\n5: virbr0: [BROADCAST,MULTICAST,UP,LOWER_UP] mtu 1500 qdisc noqueue state UP group default qlen 1000\nlink/ether 52:54:00:32:ff:a5 brd ff:ff:ff:ff:ff:ff\ninet 192.0.2.1/24 brd 192.0.2.255 scope global virbr0\nvalid_lft forever preferred_lft forever\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tNote that the relevant network connects the host with VMs to share files. Usually, this is \u003Ccode class=\"literal\">virbr0\u003C/code>.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tMount the shared directory on a Linux VM that is specified in the \u003Ccode class=\"literal\">/etc/exports\u003C/code> file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mount 192.0.2.1:/usr/local/shared-files /mnt/host-share\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">192.0.2.1\u003C/code>: The IP address of the host.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/local/shared-files\u003C/code>: A file-system path to the exported directory on the host.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">/mnt/host-share\u003C/code>: A mount point on the VM\n\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tThe mount point must be an empty directory.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo mount the shared directory on a Windows VM as mentioned in the \u003Ccode class=\"literal\">/etc/exports\u003C/code> file:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOpen a PowerShell shell prompt as an Administrator.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">NFS-Client\u003C/code> package on the Windows.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tTo install on a server version, enter:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>Install-WindowsFeature NFS-Client\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tTo install on a desktop version, enter:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>Enable-WindowsOptionalFeature -FeatureName ServicesForNFS-ClientOnly, ClientForNFS-Infrastructure -Online -NoRestart\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tMount the directory exported by the host on a Windows VM:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>C:\\Windows\\system32\\mount.exe -o anon \\\\192.0.2.1\\usr\\local\\shared-files Z:\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIn this example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">192.0.2.1\u003C/code>: The IP address of the host.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/local/shared-files\u003C/code>: A file system path to the exported directory on the host.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">Z:\u003C/code>: The drive letter for a mount point.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\tYou must choose a drive letter that is not in use on the system.\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tList the contents of the shared directory on the VM so that you can share files between the host and the VM:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ls \u003Cspan class=\"emphasis\">\u003Cem>&lt;mount_point&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nshared-file1  shared-file2  shared-file3\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn this example, replace \u003Cspan class=\"emphasis\">\u003Cem>&lt;mount_point&gt;\u003C/em>\u003C/span> with a file system path to the mounted shared directory.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_using_network_file_services/deploying-an-nfs-server_configuring-and-using-network-file-services\">Deploying an NFS server\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs_sharing-files-between-the-host-and-its-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">20.2. Sharing files between the host and its virtual machines by using virtiofs\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tUsing virtiofs, you can share files between your host and your virtual machines (VM) as a directory tree that works the same as the local file system structure.\n\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"sharing-files-between-the-host-and-its-virtual-machines-using-virtiofs_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">20.2.1. Sharing files between the host and its virtual machines by using virtiofs\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tWhen using RHEL 9 as your hypervisor, you can efficiently share files between your host system and its virtual machines (VM) using the \u003Ccode class=\"literal\">virtiofs\u003C/code> feature.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tVirtualization is \u003Ca class=\"link\" href=\"#assembly_enabling-virtualization-in-rhel-9_configuring-and-managing-virtualization\" title=\"Chapter 2. Enabling virtualization\">installed and enabled\u003C/a> on your RHEL 9 host.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA directory that you want to share with your VMs. If you do not want to share any of your existing directories, create a new one, for example named \u003Cspan class=\"emphasis\">\u003Cem>shared-files\u003C/em>\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mkdir /root/shared-files\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe VM you want to share data with is using a Linux distribution as its guest operating system.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor each directory on the host that you want to share with your VM, set it as a virtiofs file system in the VM’s XML configuration.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tOpen the XML configuration of the intended VM.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh edit \u003Cspan class=\"emphasis\">\u003Cem>vm-name\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tAdd an entry similar to the following to the \u003Ccode class=\"literal\">&lt;devices&gt;\u003C/code> section of the VM’s XML configuration.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;filesystem type='mount' accessmode='passthrough'&gt;\n  &lt;driver type='virtiofs'/&gt;\n  &lt;binary path='/usr/libexec/virtiofsd' xattr='on'/&gt;\n  &lt;source dir='/root/shared-files'/&gt;\n  &lt;target dir='host-file-share'/&gt;\n&lt;/filesystem&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThis example sets the \u003Ccode class=\"literal\">/root/shared-files\u003C/code> directory on the host to be visible as \u003Ccode class=\"literal\">host-file-share\u003C/code> to the VM.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tSet up shared memory for the VM. To do so, add shared memory backing to the \u003Ccode class=\"literal\">&lt;domain&gt;\u003C/code> section of the XML configuration:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;domain&gt;\n [...]\n &lt;memoryBacking&gt;\n   &lt;access mode='shared'/&gt;\n &lt;/memoryBacking&gt;\n [...]\n&lt;/domain&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tBoot up the VM.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh start \u003Cspan class=\"emphasis\">\u003Cem>vm-name\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tMount the file system in the guest operating system. The following example mounts the previously configured \u003Ccode class=\"literal\">host-file-share\u003C/code> directory with a Linux guest operating system.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mount -t virtiofs host-file-share /mnt\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tEnsure that the shared directory became accessible on the VM and that you can now open files stored in the directory.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Known issues and limitations\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tFile-system mount options related to access time, such as \u003Ccode class=\"literal\">noatime\u003C/code> and \u003Ccode class=\"literal\">strictatime\u003C/code>, are not likely to work with virtiofs, and Red Hat discourages their use.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tIf \u003Ccode class=\"literal\">virtiofs\u003C/code> is not optimal for your usecase or supported for your system, you can use \u003Ca class=\"link\" href=\"#sharing-files-between-the-host-and-its-virtual-machines-using-NFS_sharing-files-between-the-host-and-its-virtual-machines\" title=\"20.1. Sharing files between the host and its virtual machines by using NFS\">NFS\u003C/a> instead.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"sharing-files-between-the-host-and-windows-virtual-machines_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">20.2.2. Sharing files between the host and Windows virtual machines by using virtiofs\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tWhen using RHEL 9 as your hypervisor, you can efficiently share files between your host system and Windows virtual machines (VM) using the \u003Ccode class=\"literal\">virtiofs\u003C/code> feature along with the \u003Ccode class=\"literal\">virtio-win\u003C/code> package.\n\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tYou can run the \u003Ccode class=\"literal\">virtiofs\u003C/code> service in case insensitive mode on a Windows VM using the \u003Ccode class=\"literal\">virtiofs.exe\u003C/code> command and the \u003Ccode class=\"literal\">-i\u003C/code> parameter.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou have configured your VM’s XML configuration file to use virtiofs. For detailed information, see \u003Ca class=\"xref\" href=\"#sharing-files-between-the-host-and-its-virtual-machines-using-virtiofs_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs\" title=\"20.2.1. Sharing files between the host and its virtual machines by using virtiofs\">Section 20.2.1, “Sharing files between the host and its virtual machines by using virtiofs”\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou have \u003Ca class=\"link\" href=\"#installing-kvm-drivers-on-a-host-machine_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines\" title=\"21.2.1.2. Preparing virtio driver installation media on a host machine\">attached the \u003Ccode class=\"literal\">virtio\u003C/code> driver installation media to the VM\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou have installed the \u003Ccode class=\"literal\">virtio-win\u003C/code> package on your Windows VM. For more information, see \u003Ca class=\"link\" href=\"#installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines\" title=\"21.2.1.3. Installing virtio drivers on a Windows guest\">Installing virtio drivers on a Windows guest\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOn your Windows VM, install WinFsp. To do so, mount the \u003Ccode class=\"literal\">virtio-win\u003C/code> ISO image, start the \u003Ccode class=\"literal\">winfsp\u003C/code> MSI installer, and follow the prompts.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Custom Setup\u003C/strong>\u003C/span> window of the installation wizard, select the features you want to install on the VM.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tStart the virtiofs service:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>sc start VirtioFsSvc\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tNavigate to \u003Cspan class=\"strong strong\">\u003Cstrong>This PC\u003C/strong>\u003C/span>:\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>File Explorer → This PC\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tVirtiofs should be available on the Windows VM as the first available drive letter starting with \u003Ccode class=\"literal\">z:\u003C/code> and going backwards. For example, \u003Ccode class=\"literal\">my_viofs (Z:)\u003C/code>.\n\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tYou must restart the virtiofs service after each VM reboot to access the shared directory.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: To set up additional virtiofs instances:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tStop the virtiofs service:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>sc stop VirtioFsSvc\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>sc config VirtioFsSvc start=demand\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tConfigure the WinFSP.Launcher service to set up multiple virtiofs instances:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>\"C:\\Program Files (x86)\\WinFsp\\bin\\fsreg.bat\" virtiofs \"\u003Cspan class=\"emphasis\">\u003Cem>&lt;path to the binary&gt;\u003C/em>\u003C/span>\\virtiofs.exe\" \"-t %1 -m %2\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tMount virtiofs instances to drives.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tFor example, to mount virtiofs with the tag \u003Ccode class=\"literal\">mount_tag0\u003C/code> to the \u003Ccode class=\"literal\">Y:\u003C/code> drive:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">\u003Cspan class=\"strong strong\">\u003Cstrong>\"C:\\Program Files (x86)\\WinFsp\\bin\\launchctl-x64.exe\" start virtiofs viofsY mount_tag0 Y:\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tRepeat the previous step to mount all of your virtiofs instances.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tTo unmount the virtiofs instance:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">\u003Cspan class=\"strong strong\">\u003Cstrong>\"C:\\Program Files (x86)\\WinFsp\\bin\\launchctl-x64.exe\" stop virtiofs viofsY\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOn your Windows VM, navigate to \u003Cspan class=\"strong strong\">\u003Cstrong>This PC\u003C/strong>\u003C/span>:\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>File Explorer → This PC\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tIf you did not specify a mount point when setting up the virtiofs service, it will use the first available drive letter starting with \u003Ccode class=\"literal\">z:\u003C/code> and going backwards.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tIf you have multiple virtiofs instances set up, they will appear as drives with the letters you had assigned to the instances.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_using-the-web-console-to-share-files-between-the-host-and-its-virtual-machines-using-virtiofs_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">20.2.3. Sharing files between the host and its virtual machines by using virtiofs in the web console\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tYou can use the RHEL web console to efficiently share files between your host system and its virtual machines (VM) using the \u003Ccode class=\"literal\">virtiofs\u003C/code> feature.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA directory that you want to share with your VMs. If you do not want to share any of your existing directories, create a new one, for example named \u003Cspan class=\"emphasis\">\u003Cem>centurion\u003C/em>\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mkdir /home/centurion\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe VM you want to share data with is using a Linux distribution as its guest operating system.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, click the VM with which you want to share files.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA new page opens with an \u003Cspan class=\"strong strong\">\u003Cstrong>Overview\u003C/strong>\u003C/span> section with basic information about the selected VM and a \u003Cspan class=\"strong strong\">\u003Cstrong>Console\u003C/strong>\u003C/span> section.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tScroll to \u003Cspan class=\"guimenu\">Shared directories\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Shared directories\u003C/strong>\u003C/span> section displays information about the host files and directories shared with that VM and options to \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span> or \u003Cspan class=\"strong strong\">\u003Cstrong>Remove\u003C/strong>\u003C/span> a shared directory.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/ad19f004c4560f7e5f32a114629e7b3e/virt-cockpit-shared-directory-info.png\" alt=\"Image displaying the directories shared with the selected VM.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Add shared directory\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Share a host directory with the guest\u003C/strong>\u003C/span> dialog appears.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/170264f3a13e4c99f71f9ea8a8ca5b31/virt-cockpit-shared-directory-add.png\" width=\"540\" alt=\"Image displaying the Share a host directory with the guest dialog box.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnter the following information:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Source path\u003C/strong>\u003C/span> - The path to the host directory that you want to share.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Mount tag\u003C/strong>\u003C/span> - The tag that the VM uses to mount the directory.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tSet additional options:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Extended attributes\u003C/strong>\u003C/span> - Set whether to enable extended attributes, \u003Ccode class=\"literal\">xattr\u003C/code>, on the shared files and directories.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Share\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe selected directory is shared with the VM.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tEnsure that the shared directory is accessible on the VM and you can now open files stored in that directory.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_using-the-web-console-to-unshare-files-between-the-host-and-its-virtual-machines-using-virtiofs_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">20.2.4. Using the web console to remove shared files between the host and its virtual machines by using virtiofs\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tYou can use the RHEL web console to remove files shared between your host system and its virtual machines (VM) using the \u003Ccode class=\"literal\">virtiofs\u003C/code> feature.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe web console VM plug-in \u003Ca class=\"link\" href=\"#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console\" title=\"8.2. Setting up the web console to manage virtual machines\">is installed on your system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe directory is no longer being used by the VM.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"guimenu\">Virtual Machines\u003C/span> interface, click on the VM from which you want to remove the shared files.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA new page opens with an \u003Cspan class=\"strong strong\">\u003Cstrong>Overview\u003C/strong>\u003C/span> section with basic information about the selected VM and a \u003Cspan class=\"strong strong\">\u003Cstrong>Console\u003C/strong>\u003C/span> section.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tScroll to \u003Cspan class=\"guimenu\">Shared directories\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Shared directories\u003C/strong>\u003C/span> section displays information about the host files and directories shared with that VM and options to \u003Cspan class=\"strong strong\">\u003Cstrong>Add\u003C/strong>\u003C/span> or \u003Cspan class=\"strong strong\">\u003Cstrong>Remove\u003C/strong>\u003C/span> a shared directory.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/ad19f004c4560f7e5f32a114629e7b3e/virt-cockpit-shared-directory-info.png\" alt=\"Image displaying the directories shared with the selected VM.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Remove\u003C/span> next to the directory that you want to unshare with the VM.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Remove filesystem\u003C/strong>\u003C/span> dialog appears.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/5537cefae2f080b36efe4fc7b9c09f02/virt-cockpit-shared-directory-remove.png\" width=\"540\" alt=\"Image displaying the remove a filesystem dialog box.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Remove\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe selected directory is unshared with the VM.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe shared directory is no longer available and accessible on the VM.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"installing-and-managing-windows-virtual-machines-on-rhel_configuring-and-managing-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 21. Installing and managing Windows virtual machines\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tTo use Microsoft Windows as the guest operating system in your virtual machines (VMs) on a RHEL 9 host, Red Hat recommends taking extra steps to ensure these VMs run correctly.\n\t\t\u003C/p>\u003Cp>\n\t\t\tFor this purpose, the following sections provide information about installing and optimizing Windows VMs on the host, as well as installing and configuring drivers in these VMs.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"installing-windows-virtual-machines-on-rhel_installing-and-managing-windows-virtual-machines-on-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.1. Installing Windows virtual machines\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can create a fully-virtualized Windows machine on a RHEL 9 host, launch the graphical Windows installer inside the virtual machine (VM), and optimize the installed Windows guest operating system (OS).\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo create the VM and to install the Windows guest OS, use the \u003Ccode class=\"literal command\">virt-install\u003C/code> command or the RHEL 9 web console.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA Windows OS installation source, which can be one of the following, and be available locally or on a network:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAn ISO image of an installation medium\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tA disk image of an existing VM installation\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA storage medium with the KVM \u003Ccode class=\"literal\">virtio\u003C/code> drivers.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo create this medium, see \u003Ca class=\"link\" href=\"#installing-kvm-drivers-on-a-host-machine_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines\" title=\"21.2.1.2. Preparing virtio driver installation media on a host machine\">Preparing virtio driver installation media on a host machine\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf you are installing Windows 11, the \u003Ccode class=\"literal package\">edk2-ovmf\u003C/code>, \u003Ccode class=\"literal package\">swtpm\u003C/code> and \u003Ccode class=\"literal package\">libtpms\u003C/code> packages must be installed on the host.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the VM. For instructions, see \u003Ca class=\"link\" href=\"#assembly_creating-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 3. Creating virtual machines\">Creating virtual machines\u003C/a>, but keep in mind the following specifics.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf using the \u003Ccode class=\"literal\">virt-install\u003C/code> utility to create the VM, add the following options to the command:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tThe storage medium with the KVM \u003Ccode class=\"literal\">virtio\u003C/code> drivers. For example:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">--disk path=\u003Cspan class=\"emphasis\">\u003Cem>/usr/share/virtio-win/virtio-win.iso\u003C/em>\u003C/span>,device=cdrom\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tThe Windows version you will install. For example, for Windows 10 and 11:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">--os-variant \u003Cspan class=\"emphasis\">\u003Cem>win10\u003C/em>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tFor a list of available Windows versions and the appropriate option, use the following command:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>osinfo-query os\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tIf you are installing Windows 11, enable \u003Cspan class=\"emphasis\">\u003Cem>Unified Extensible Firmware Interface\u003C/em>\u003C/span> (UEFI) and \u003Cspan class=\"emphasis\">\u003Cem>virtual Trusted Platform Module\u003C/em>\u003C/span> (vTPM):\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">--boot uefi\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf using the web console to create the VM, specify your version of Windows in the \u003Cspan class=\"strong strong\">\u003Cstrong>Operating system\u003C/strong>\u003C/span> field of the \u003Cspan class=\"strong strong\">\u003Cstrong>Create new virtual machine\u003C/strong>\u003C/span> window.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tIf you are installing Windows versions prior to Windows 11 and Windows Server 2022, start the installation by clicking \u003Cspan class=\"guibutton\">Create and run\u003C/span>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tIf you are installing Windows 11, or you want to use additional Windows Server 2022 features, confirm by clicking \u003Cspan class=\"guibutton\">Create and edit\u003C/span> and enable UEFI and vTPM using the CLI:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"A\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\t\tOpen the VM’s XML configuration:\n\t\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh edit \u003Cspan class=\"emphasis\">\u003Cem>windows-vm\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\t\tAdd the \u003Ccode class=\"literal\">firmware='efi'\u003C/code> option to the \u003Ccode class=\"literal\">os\u003C/code> element:\n\t\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">&lt;os \u003Cspan class=\"strong strong\">\u003Cstrong>firmware='efi'\u003C/strong>\u003C/span>&gt;\n  &lt;type arch='x86_64' machine='pc-q35-6.2'&gt;hvm&lt;/type&gt;\n  &lt;boot dev='hd'/&gt;\n&lt;/os&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\t\tAdd the \u003Ccode class=\"literal\">tpm\u003C/code> device inside the \u003Ccode class=\"literal\">devices\u003C/code> element:\n\t\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">&lt;devices&gt;\n  \u003Cspan class=\"strong strong\">\u003Cstrong>&lt;tpm model='tpm-crb'&gt;\u003C/strong>\u003C/span>\n    \u003Cspan class=\"strong strong\">\u003Cstrong>&lt;backend type='emulator' version='2.0'/&gt;\u003C/strong>\u003C/span>\n  \u003Cspan class=\"strong strong\">\u003Cstrong>&lt;/tpm&gt;\u003C/strong>\u003C/span>\n&lt;/devices&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\tStart the Windows installation by clicking \u003Cspan class=\"guibutton\">Install\u003C/span> in the \u003Cspan class=\"strong strong\">\u003Cstrong>Virtual machines\u003C/strong>\u003C/span> table.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the Windows OS in the VM.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor information about how to install a Windows operating system, refer to the relevant Microsoft installation documentation.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf using the web console to create the VM, attach the storage medium with virtio drivers to the VM by using the \u003Cspan class=\"strong strong\">\u003Cstrong>Disks\u003C/strong>\u003C/span> interface. For instructions, see \u003Ca class=\"link\" href=\"#attaching-existing-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console\" title=\"15.8.3. Attaching existing disks to virtual machines by using the web console\">Attaching existing disks to virtual machines by using the web console\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tConfigure KVM \u003Ccode class=\"literal\">virtio\u003C/code> drivers in the Windows guest OS. For details, see \u003Ca class=\"link\" href=\"#installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines_optimizing-windows-virtual-machines-on-rhel\" title=\"21.2.1. Installing KVM paravirtualized drivers for Windows virtual machines\">Installing KVM paravirtualized drivers for Windows virtual machines\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#optimizing-windows-virtual-machines-on-rhel_installing-and-managing-windows-virtual-machines-on-rhel\" title=\"21.2. Optimizing Windows virtual machines\">Optimizing Windows virtual machines\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#enabling-standard-harware-security-on-windows-virtual-machines_installing-and-managing-windows-virtual-machines-on-rhel\" title=\"21.3. Enabling standard hardware security on Windows virtual machines\">Enabling standard hardware security on Windows virtual machines\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_enabling-enhanced-hardware-security-on-windows-virtual-machines_installing-and-managing-windows-virtual-machines-on-rhel\" title=\"21.4. Enabling enhanced hardware security on Windows virtual machines\">Enabling enhanced hardware security on Windows virtual machines\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#sample-virtual-machine-xml-configuration_viewing-information-about-virtual-machines\" title=\"9.3. Sample virtual machine XML configuration\">Sample virtual machine XML configuration\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"optimizing-windows-virtual-machines-on-rhel_installing-and-managing-windows-virtual-machines-on-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.2. Optimizing Windows virtual machines\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tWhen using Microsoft Windows as a guest operating system in a virtual machine (VM) hosted in RHEL 9, the performance of the guest may be negatively impacted.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTherefore, Red Hat recommends optimizing your Windows VMs by doing any combination of the following:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tUsing paravirtualized drivers. For more information, see \u003Ca class=\"link\" href=\"#installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines_optimizing-windows-virtual-machines-on-rhel\" title=\"21.2.1. Installing KVM paravirtualized drivers for Windows virtual machines\">Installing KVM paravirtualized drivers for Windows virtual machines\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnabling Hyper-V enlightenments. For more information, see \u003Ca class=\"link\" href=\"#enabling-hyper-v-enlightenments_optimizing-windows-virtual-machines-on-rhel\" title=\"21.2.2. Enabling Hyper-V enlightenments\">Enabling Hyper-V enlightenments\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tConfiguring NetKVM driver parameters. For more information, see \u003Ca class=\"link\" href=\"#configuring-netkvm-driver-parameters_optimizing-windows-virtual-machines-on-rhel\" title=\"21.2.3. Configuring NetKVM driver parameters\">Configuring NetKVM driver parameters\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOptimizing or disabling Windows background processes. For more information, see \u003Ca class=\"link\" href=\"#optimizing-background-processes-on-windows-virtual-machines_optimizing-windows-virtual-machines-on-rhel\" title=\"21.2.5. Optimizing background processes on Windows virtual machines\">Optimizing background processes on Windows virtual machines\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines_optimizing-windows-virtual-machines-on-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">21.2.1. Installing KVM paravirtualized drivers for Windows virtual machines\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tThe primary method of improving the performance of your Windows virtual machines (VMs) is to install KVM paravirtualized (\u003Ccode class=\"literal\">virtio\u003C/code>) drivers for Windows on the guest operating system.\n\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">virtio-win\u003C/code> drivers are certified (WHQL) against the latest releases of Windows 10 and 11, available at the time of the respective \u003Ccode class=\"literal\">virtio-win\u003C/code> release. However, \u003Ccode class=\"literal\">virtio-win\u003C/code> drivers are generally tested and expected to function correctly on previous builds of Windows 10 and 11 as well.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\t\tTo install the drivers on a Windows VM, perform the following actions:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tPrepare the install media on the host machine. For more information, see \u003Ca class=\"link\" href=\"#installing-kvm-drivers-on-a-host-machine_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines\" title=\"21.2.1.2. Preparing virtio driver installation media on a host machine\">Preparing virtio driver installation media on a host machine\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tAttach the install media to an existing Windows VM, or attach it when creating a new Windows VM. For more information, see \u003Ca class=\"link\" href=\"#installing-windows-virtual-machines-on-rhel_installing-and-managing-windows-virtual-machines-on-rhel\" title=\"21.1. Installing Windows virtual machines\">Installing Windows virtual machines on RHEL\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">virtio\u003C/code> drivers on the Windows guest operating system. For more information, see \u003Ca class=\"link\" href=\"#installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines\" title=\"21.2.1.3. Installing virtio drivers on a Windows guest\">Installing virtio drivers on a Windows guest\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">QEMU Guest Agent\u003C/code> on the Windows guest operating system. For more information, see \u003Ca class=\"link\" href=\"#proc_installing-qemu-guest-agent-on-windows-guests_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines\" title=\"21.2.1.5. Enabling QEMU Guest Agent on Windows guests\">Installing QEMU Guest Agent on a Windows guest\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Csection class=\"section\" id=\"how-windows-virtio-drivers-work_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch5 class=\"title\">21.2.1.1. How Windows virtio drivers work\u003C/h5>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\t\tParavirtualized drivers enhance the performance of virtual machines (VMs) by decreasing I/O latency and increasing throughput to almost bare-metal levels. Red Hat recommends that you use paravirtualized drivers for VMs that run I/O-heavy tasks and applications.\n\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\t\u003Ccode class=\"literal package\">virtio\u003C/code> drivers are KVM’s paravirtualized device drivers, available for Windows VMs running on KVM hosts. These drivers are provided by the \u003Ccode class=\"literal package\">virtio-win\u003C/code> package, which includes drivers for:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tBlock (storage) devices\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tNetwork interface controllers\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tVideo controllers\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tMemory ballooning device\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tParavirtual serial port device\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tEntropy source device\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tParavirtual panic device\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tInput devices, such as mice, keyboards, or tablets\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tA small set of emulated devices\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tFor additional information about emulated, \u003Ccode class=\"literal\">virtio\u003C/code>, and assigned devices, refer to \u003Ca class=\"link\" href=\"#managing-virtual-devices_configuring-and-managing-virtualization\" title=\"Chapter 14. Managing virtual devices\">Managing virtual devices\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\t\t\tBy using KVM virtio drivers, the following Microsoft Windows versions are expected to run similarly to physical systems:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tWindows Server versions: See \u003Ca class=\"link\" href=\"https://access.redhat.com/articles/973163#rhelkvm\">Certified guest operating systems for Red Hat Enterprise Linux with KVM\u003C/a> in the Red Hat Knowledgebase.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tWindows Desktop (non-server) versions:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tWindows 10 (32-bit and 64-bit versions)\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tWindows 11 (64-bit)\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"installing-kvm-drivers-on-a-host-machine_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch5 class=\"title\">21.2.1.2. Preparing virtio driver installation media on a host machine\u003C/h5>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\t\tTo install or update KVM \u003Ccode class=\"literal\">virtio\u003C/code> drivers on a Windows virtual machine (VM), you must first prepare the \u003Ccode class=\"literal\">virtio\u003C/code> driver installation media on the host machine. To do so, attach the \u003Ccode class=\"literal\">.iso\u003C/code> file, provided by the \u003Ccode class=\"literal package\">virtio-win\u003C/code> package, as a storage device to the Windows VM.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tEnsure that virtualization is enabled in your RHEL 9 host system. For more information, see \u003Ca class=\"link\" href=\"#assembly_enabling-virtualization-in-rhel-9_configuring-and-managing-virtualization\" title=\"Chapter 2. Enabling virtualization\">Enabling virtualization\u003C/a>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tEnsure that you have root access privileges to the VM.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRefresh your subscription data:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>subscription-manager refresh\u003C/strong>\u003C/span>\nAll local data refreshed\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tGet the latest version of the \u003Ccode class=\"literal package\">virtio-win\u003C/code> package.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tIf \u003Ccode class=\"literal\">virtio-win\u003C/code> is not installed:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install -y virtio-win\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tIf \u003Ccode class=\"literal\">virtio-win\u003C/code> is installed:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf upgrade -y virtio-win\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tIf the installation succeeds, the \u003Ccode class=\"literal\">virtio-win\u003C/code> driver files are available in the \u003Ccode class=\"literal\">/usr/share/virtio-win/\u003C/code> directory. These include \u003Ccode class=\"literal\">ISO\u003C/code> files and a \u003Ccode class=\"literal filename\">drivers\u003C/code> directory with the driver files in directories, one for each architecture and supported Windows version.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ls /usr/share/virtio-win/\u003C/strong>\u003C/span>\ndrivers/  guest-agent/  virtio-win-1.9.9.iso  virtio-win.iso\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAttach the \u003Ccode class=\"literal\">virtio-win.iso\u003C/code> file as a storage device to the Windows VM.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tWhen \u003Ca class=\"link\" href=\"#installing-windows-virtual-machines-on-rhel_installing-and-managing-windows-virtual-machines-on-rhel\" title=\"21.1. Installing Windows virtual machines\">creating a new Windows VM\u003C/a>, attach the file by using the \u003Ccode class=\"literal\">virt-install\u003C/code> command options.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tWhen installing the drivers on an existing Windows VM, attach the file as a CD-ROM by using the \u003Ccode class=\"literal\">virt-xml\u003C/code> utility:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-xml WindowsVM --add-device --disk virtio-win.iso,device=cdrom\u003C/strong>\u003C/span>\nDomain 'WindowsVM' defined successfully.\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines\" title=\"21.2.1.3. Installing virtio drivers on a Windows guest\">Installing the virtio driver on the Windows guest operating system\u003C/a>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch5 class=\"title\">21.2.1.3. Installing virtio drivers on a Windows guest\u003C/h5>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\t\tTo install KVM \u003Ccode class=\"literal\">virtio\u003C/code> drivers on a Windows guest operating system, you must add a storage device that contains the drivers (either when creating the virtual machine (VM) or afterwards) and install the drivers in the Windows guest operating system.\n\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\tThis procedure provides instructions to install the drivers by using the graphical interface. You can also use the \u003Ca class=\"link\" href=\"https://docs.microsoft.com/en-us/windows/win32/msi/about-windows-installer\">Microsoft Windows Installer (MSI)\u003C/a> command line interface.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAn installation medium with the KVM \u003Ccode class=\"literal\">virtio\u003C/code> drivers must be attached to the VM. For instructions on preparing the medium, see \u003Ca class=\"link\" href=\"#installing-kvm-drivers-on-a-host-machine_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines\" title=\"21.2.1.2. Preparing virtio driver installation media on a host machine\">Preparing virtio driver installation media on a host machine\u003C/a>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIn the Windows guest operating system, open the \u003Ccode class=\"literal\">File Explorer\u003C/code> application.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick \u003Ccode class=\"literal\">This PC\u003C/code>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIn the \u003Ccode class=\"literal\">Devices and drives\u003C/code> pane, open the \u003Ccode class=\"literal\">virtio-win\u003C/code> medium.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tBased on the operating system installed on the VM, run one of the installers:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tIf using a 32-bit operating system, run the \u003Ccode class=\"literal\">virtio-win-gt-x86.msi\u003C/code> installer.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tIf using a 64-bit operating system, run the \u003Ccode class=\"literal\">virtio-win-gt-x64.msi\u003C/code> installer.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIn the \u003Ccode class=\"literal\">Virtio-win-driver-installer\u003C/code> setup wizard that opens, follow the displayed instructions until you reach the \u003Ccode class=\"literal\">Custom Setup\u003C/code> step.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US/images/20c90fc5f9acc1afeeed84bcb820ce2a/virtio-win-installer-2.png\" alt=\"Image displaying the Virtio-win-guest-tools setup wizard.\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIn the Custom Setup window, select the device drivers you want to install. The recommended driver set is selected automatically, and the descriptions of the drivers are displayed on the right of the list.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">next\u003C/span>, then click \u003Cspan class=\"guibutton\">Install\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAfter the installation completes, click \u003Cspan class=\"guibutton\">Finish\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tReboot the VM to complete the driver installation.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn your Windows VM, navigate to the \u003Cspan class=\"strong strong\">\u003Cstrong>Device Manager\u003C/strong>\u003C/span>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tClick Start\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tSearch for \u003Cspan class=\"strong strong\">\u003Cstrong>Device Manager\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnsure that the devices are using the correct drivers:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tClick a device to open the \u003Cspan class=\"strong strong\">\u003Cstrong>Driver Properties\u003C/strong>\u003C/span> window.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tNavigate to the \u003Cspan class=\"strong strong\">\u003Cstrong>Driver\u003C/strong>\u003C/span> tab.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Driver Details\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Next steps\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIf you installed the NetKVM driver, you might also need to configure the Windows guest’s networking parameters. For more information, see \u003Ca class=\"link\" href=\"#configuring-netkvm-driver-parameters_optimizing-windows-virtual-machines-on-rhel\" title=\"21.2.3. Configuring NetKVM driver parameters\">Configuring NetKVM driver parameters\u003C/a>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_updating-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch5 class=\"title\">21.2.1.4. Updating virtio drivers on a Windows guest\u003C/h5>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\t\tTo update KVM \u003Ccode class=\"literal\">virtio\u003C/code> drivers on a Windows guest operating system (OS), you can use the \u003Ccode class=\"literal\">Windows Update\u003C/code> service, if the Windows OS version supports it. If it does not, reinstall the drivers from \u003Ccode class=\"literal\">virtio\u003C/code> driver installation media attached to the Windows virtual machine (VM).\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tA Windows guest OS with \u003Ca class=\"link\" href=\"#installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines\" title=\"21.2.1.3. Installing virtio drivers on a Windows guest\">virtio drivers installed\u003C/a>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIf not using \u003Ccode class=\"literal\">Windows Update\u003C/code>, an installation medium with up-to-date KVM \u003Ccode class=\"literal\">virtio\u003C/code> drivers must be attached to the Windows VM. For instructions on preparing the medium, see \u003Ca class=\"link\" href=\"#installing-kvm-drivers-on-a-host-machine_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines\" title=\"21.2.1.2. Preparing virtio driver installation media on a host machine\">Preparing virtio driver installation media on a host machine\u003C/a>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Procedure 1: Updating the drivers by using Windows Update\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\tOn Windows 10, Windows Server 2016 and later operating systems, check if the driver updates are available by using the \u003Ccode class=\"literal\">Windows Update\u003C/code> graphical interface:\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tStart the Windows VM and log in to its guest OS.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tNavigate to the \u003Cspan class=\"strong strong\">\u003Cstrong>Optional updates\u003C/strong>\u003C/span> page:\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Settings → Windows Update → Advanced options → Optional updates\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tInstall all updates from \u003Cspan class=\"strong strong\">\u003Cstrong>Red Hat, Inc.\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Procedure 2: Updating the drivers by reinstalling them\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\t\tOn operating systems prior to Windows 10 and Windows Server 2016, or if the OS does not have access to \u003Ccode class=\"literal\">Windows Update\u003C/code>, reinstall the drivers. This restores the Windows guest OS network configuration to default (DHCP). If you want to preserve a customized network configuration, you also need to create a backup and restore it by using the \u003Ccode class=\"literal\">netsh\u003C/code> utility:\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tStart the Windows VM and log in to its guest OS.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOpen the Windows Command Prompt:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tUse the \u003Ckbd class=\"keycap\">Super\u003C/kbd>+\u003Ckbd class=\"keycap\">R\u003C/kbd> keyboard shortcut.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tIn the window that appears, type \u003Ccode class=\"literal\">cmd\u003C/code> and press \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">Shift\u003C/kbd>+\u003Ckbd class=\"keycap\">Enter\u003C/kbd> to run as administrator.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tBack up the OS network configuration by using the Windows Command Prompt:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">\u003Cspan class=\"strong strong\">\u003Cstrong>C:\\WINDOWS\\system32\\netsh dump &gt; backup.txt\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tReinstall KVM \u003Ccode class=\"literal\">virtio\u003C/code> drivers from the attached installation media. Do one of the following:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tReinstall the drivers by using the Windows Command Prompt, where \u003Cspan class=\"emphasis\">\u003Cem>X\u003C/em>\u003C/span> is the installation media drive letter. The following commands install all \u003Ccode class=\"literal\">virtio\u003C/code> drivers.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\t\tIf using a 64-bit vCPU:\n\t\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>C:\\WINDOWS\\system32\\msiexec.exe /i \u003Cspan class=\"emphasis\">\u003Cem>X\u003C/em>\u003C/span>:\\virtio-win-gt-x64.msi /passive /norestart\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\t\tIf using a 32-bit vCPU:\n\t\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">\u003Cspan class=\"strong strong\">\u003Cstrong>C:\\WINDOWS\\system32\\msiexec.exe /i \u003Cspan class=\"emphasis\">\u003Cem>X\u003C/em>\u003C/span>:\\virtio-win-gt-x86.msi /passive /norestart\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tReinstall the drivers \u003Ca class=\"link\" href=\"#installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines\" title=\"21.2.1.3. Installing virtio drivers on a Windows guest\">using the graphical interface\u003C/a> without rebooting the VM.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRestore the OS network configuration using the Windows Command Prompt:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">\u003Cspan class=\"strong strong\">\u003Cstrong>C:\\WINDOWS\\system32\\netsh -f backup.txt\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tReboot the VM to complete the driver installation.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://docs.microsoft.com/en-us/windows/deployment/update/windows-update-overview\">Microsoft documentation on Windows Update\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_installing-qemu-guest-agent-on-windows-guests_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch5 class=\"title\">21.2.1.5. Enabling QEMU Guest Agent on Windows guests\u003C/h5>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\t\tTo allow a RHEL host to perform \u003Ca class=\"link\" href=\"#virtualization-features-that-require-qemu-guest-agent_enabling-qemu-guest-agent-features-on-your-virtual-machines\" title=\"2.4.3. Virtualization features that require QEMU Guest Agent\">a certain subset of operations\u003C/a> on a Windows virtual machine (VM), you must enable the QEMU Guest Agent (GA). To do so, add a storage device that contains the QEMU Guest Agent installer to an existing VM or when creating a new VM, and install the drivers on the Windows guest operating system.\n\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\tTo install the Guest Agent (GA) by using the graphical interface, see the procedure below. To install the GA in a command-line interface, use the \u003Ca class=\"link\" href=\"https://docs.microsoft.com/en-us/windows/win32/msi/about-windows-installer\">Microsoft Windows Installer (MSI)\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAn installation medium with the Guest Agent is attached to the VM. For instructions on preparing the medium, see \u003Ca class=\"link\" href=\"#installing-kvm-drivers-on-a-host-machine_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines\" title=\"21.2.1.2. Preparing virtio driver installation media on a host machine\">Preparing virtio driver installation media on a host machine\u003C/a>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIn the Windows guest operating system, open the \u003Ccode class=\"literal\">File Explorer\u003C/code> application.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tClick \u003Ccode class=\"literal\">This PC\u003C/code>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIn the \u003Ccode class=\"literal\">Devices and drives\u003C/code> pane, open the \u003Ccode class=\"literal\">virtio-win\u003C/code> medium.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOpen the \u003Ccode class=\"literal\">guest-agent\u003C/code> folder.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tBased on the operating system installed on the VM, run one of the following installers:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tIf using a 32-bit operating system, run the \u003Ccode class=\"literal\">qemu-ga-i386.msi\u003C/code> installer.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tIf using a 64-bit operating system, run the \u003Ccode class=\"literal\">qemu-ga-x86_64.msi\u003C/code> installer.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOptional: If you want to use the para-virtualized serial driver (\u003Ccode class=\"literal\">virtio-serial\u003C/code>) as the communication interface between the host and the Windows guest, verify that the \u003Ccode class=\"literal\">virtio-serial\u003C/code> driver is installed on the Windows guest. For more information about installing \u003Ccode class=\"literal\">virtio\u003C/code> drivers, see: \u003Ca class=\"link\" href=\"#installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines\" title=\"21.2.1.3. Installing virtio drivers on a Windows guest\">Installing virtio drivers on a Windows guest\u003C/a>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn your Windows VM, navigate to the \u003Cspan class=\"strong strong\">\u003Cstrong>Services\u003C/strong>\u003C/span> window.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Computer Management &gt; Services\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tEnsure that the status of the \u003Ccode class=\"literal\">QEMU Guest Agent\u003C/code> service is \u003Ccode class=\"literal\">Running\u003C/code>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#virtualization-features-that-require-qemu-guest-agent_enabling-qemu-guest-agent-features-on-your-virtual-machines\" title=\"2.4.3. Virtualization features that require QEMU Guest Agent\">Virtualization features that require QEMU Guest Agent\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"enabling-hyper-v-enlightenments_optimizing-windows-virtual-machines-on-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">21.2.2. Enabling Hyper-V enlightenments\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tHyper-V enlightenments provide a method for KVM to emulate the Microsoft Hyper-V hypervisor. This improves the performance of Windows virtual machines.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tThe following sections provide information about the supported Hyper-V enlightenments and how to enable them.\n\t\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"enabling-hyper-v-enlightenments-on-a-windows-virtual-machine-in-rhel-8_enabling-hyper-v-enlightenments\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch5 class=\"title\">21.2.2.1. Enabling Hyper-V enlightenments on a Windows virtual machine\u003C/h5>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\t\tHyper-V enlightenments provide better performance in a Windows virtual machine (VM) running in a RHEL 9 host. For instructions on how to enable them, see the following.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal command\">virsh edit\u003C/code> command to open the XML configuration of the VM. For example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh edit \u003Cspan class=\"emphasis\">\u003Cem>windows-vm\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAdd the following \u003Ccode class=\"literal\">&lt;hyperv&gt;\u003C/code> sub-section to the \u003Ccode class=\"literal\">&lt;features&gt;\u003C/code> section of the XML:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;features&gt;\n  [...]\n  &lt;hyperv&gt;\n    &lt;relaxed state='on'/&gt;\n    &lt;vapic state='on'/&gt;\n    &lt;spinlocks state='on' retries='8191'/&gt;\n    &lt;vendor_id state='on' value='KVM Hv'/&gt;\n    &lt;vpindex state='on'/&gt;\n    &lt;runtime state='on' /&gt;\n    &lt;synic state='on'/&gt;\n    &lt;stimer state='on'&gt;\n      &lt;direct state='on'/&gt;\n    &lt;/stimer&gt;\n    &lt;frequencies state='on'/&gt;\n    &lt;reset state='on'/&gt;\n    &lt;tlbflush state='on'/&gt;\n    &lt;reenlightenment state='on'/&gt;\n    &lt;ipi state='on'/&gt;\n    &lt;evmcs state='on'/&gt;\n  &lt;/hyperv&gt;\n  [...]\n&lt;/features&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf the XML already contains a \u003Ccode class=\"literal\">&lt;hyperv&gt;\u003C/code> sub-section, modify it as shown above.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tChange the \u003Ccode class=\"literal\">clock\u003C/code> section of the configuration as follows:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;clock offset='localtime'&gt;\n  ...\n  &lt;timer name='hypervclock' present='yes'/&gt;\n&lt;/clock&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSave and exit the XML configuration.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIf the VM is running, restart it.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virsh dumpxml\u003C/code> command to display the XML configuration of the running VM. If it includes the following segments, the Hyper-V enlightenments are enabled on the VM.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;hyperv&gt;\n  &lt;relaxed state='on'/&gt;\n  &lt;vapic state='on'/&gt;\n  &lt;spinlocks state='on' retries='8191'/&gt;\n  &lt;vendor_id state='on' value='KVM Hv'/&gt;\n  &lt;vpindex state='on'/&gt;\n  &lt;runtime state='on' /&gt;\n  &lt;synic state='on'/&gt;\n  &lt;frequencies state='on'/&gt;\n  &lt;reset state='on'/&gt;\n  &lt;tlbflush state='on'/&gt;\n  &lt;reenlightenment state='on'/&gt;\n  &lt;stimer state='on'&gt;\n    &lt;direct state='on'/&gt;\n  &lt;/stimer&gt;\n  &lt;ipi state='on'/&gt;\n  &lt;evmcs state='on'/&gt;\n&lt;/hyperv&gt;\n\n&lt;clock offset='localtime'&gt;\n  ...\n  &lt;timer name='hypervclock' present='yes'/&gt;\n&lt;/clock&gt;\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configurable-hyper-v-enlightenments_enabling-hyper-v-enlightenments\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch5 class=\"title\">21.2.2.2. Configurable Hyper-V enlightenments\u003C/h5>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\t\tYou can configure certain Hyper-V features to optimize Windows VMs. The following table provides information about these configurable Hyper-V features and their values.\n\t\t\t\t\t\u003C/p>\u003Crh-table id=\"idm140237773312272\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 21.1. Configurable Hyper-V features\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 33%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 33%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 33%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237773306496\" scope=\"col\">Enlightenment\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237773305408\" scope=\"col\">Description\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237773304320\" scope=\"col\">Values\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773306496\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tevmcs\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773305408\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tImplements paravirtualized protocol between L0 (KVM) and L1 (Hyper-V) hypervisors, which enables faster L2 exits to the hypervisor.\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\tThis feature is exclusive to Intel processors.\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773304320\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\ton, off\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773306496\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tfrequencies\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773305408\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tEnables Hyper-V frequency Machine Specific Registers (MSRs).\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773304320\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\ton, off\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773306496\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tipi\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773305408\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tEnables paravirtualized inter processor interrupts (IPI) support.\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773304320\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\ton, off\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773306496\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\treenlightenment\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773305408\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tNotifies when there is a time stamp counter (TSC) frequency change which only occurs during migration. It also allows the guest to keep using the old frequency until it is ready to switch to the new one.\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773304320\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\ton, off\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773306496\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\trelaxed\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773305408\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tDisables a Windows sanity check that commonly results in a BSOD when the VM is running on a heavily loaded host. This is similar to the Linux kernel option no_timer_check, which is automatically enabled when Linux is running on KVM.\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773304320\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\ton, off\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773306496\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\truntime\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773305408\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tSets processor time spent on running the guest code, and on behalf of the guest code.\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773304320\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\ton, off\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773306496\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tspinlocks\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773305408\"> \u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\tUsed by a VM’s operating system to notify Hyper-V that the calling virtual processor is attempting to acquire a resource that is potentially held by another virtual processor within the same partition.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\tUsed by Hyper-V to indicate to the virtual machine’s operating system the number of times a spinlock acquisition should be attempted before indicating an excessive spin situation to Hyper-V.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773304320\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\ton, off\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773306496\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tstimer\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773305408\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tEnables synthetic timers for virtual processors. Note that certain Windows versions revert to using HPET (or even RTC when HPET is unavailable) when this enlightenment is not provided, which can lead to significant CPU consumption, even when the virtual CPU is idle.\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773304320\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\ton, off\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773306496\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tstimer-direct\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773305408\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tEnables synthetic timers when an expiration event is delivered via a normal interrupt.\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773304320\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\ton, off.\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773306496\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tsynic\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773305408\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tTogether with stimer, activates the synthetic timer. Windows 8 uses this feature in periodic mode.\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773304320\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\ton, off\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773306496\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\ttime\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773305408\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tEnables the following Hyper-V-specific clock sources available to the VM,\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\tMSR-based 82 Hyper-V clock source (HV_X64_MSR_TIME_REF_COUNT, 0x40000020)\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\tReference TSC 83 page which is enabled via MSR (HV_X64_MSR_REFERENCE_TSC, 0x40000021)\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773304320\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\ton, off\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773306496\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\ttlbflush\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773305408\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tFlushes the TLB of the virtual processors.\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773304320\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\ton, off\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773306496\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tvapic\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773305408\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tEnables virtual APIC, which provides accelerated MSR access to the high-usage, memory-mapped Advanced Programmable Interrupt Controller (APIC) registers.\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773304320\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\ton, off\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773306496\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tvendor_id\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773305408\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tSets the Hyper-V vendor id.\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773304320\"> \u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\ton, off\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\tId value - string of up to 12 characters\n\t\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773306496\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tvpindex\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773305408\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tEnables virtual processor index.\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237773304320\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\ton, off\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"configuring-netkvm-driver-parameters_optimizing-windows-virtual-machines-on-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">21.2.3. Configuring NetKVM driver parameters\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tAfter the NetKVM driver is installed, you can configure it to better suit your environment. The parameters listed in the following procedure can be configured by using the Windows Device Manager (\u003Ccode class=\"literal\">devmgmt.msc\u003C/code>).\n\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tModifying the driver’s parameters causes Windows to reload that driver. This interrupts existing network activity.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe NetKVM driver is installed on the virtual machine.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor more information, see \u003Ca class=\"link\" href=\"#installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines_optimizing-windows-virtual-machines-on-rhel\" title=\"21.2.1. Installing KVM paravirtualized drivers for Windows virtual machines\">Installing KVM paravirtualized drivers for Windows virtual machines\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOpen Windows Device Manager.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor information about opening Device Manager, refer to the Windows documentation.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tLocate the \u003Cspan class=\"strong strong\">\u003Cstrong>Red Hat VirtIO Ethernet Adapter\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tIn the Device Manager window, click \u003Cspan class=\"guibutton\">+\u003C/span> next to Network adapters.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tUnder the list of network adapters, double-click \u003Cspan class=\"strong strong\">\u003Cstrong>Red Hat VirtIO Ethernet Adapter\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Properties\u003C/strong>\u003C/span> window for the device opens.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tView the device parameters.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Properties\u003C/strong>\u003C/span> window, click the \u003Cspan class=\"strong strong\">\u003Cstrong>Advanced\u003C/strong>\u003C/span> tab.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tModify the device parameters.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tClick the parameter you want to modify.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tOptions for that parameter are displayed.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tModify the options as needed.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tFor information about the NetKVM parameter options, refer to \u003Ca class=\"link\" href=\"#netkvm-driver-parameters_optimizing-windows-virtual-machines-on-rhel\" title=\"21.2.4. NetKVM driver parameters\">NetKVM driver parameters\u003C/a>.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">OK\u003C/span> to save the changes.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"netkvm-driver-parameters_optimizing-windows-virtual-machines-on-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">21.2.4. NetKVM driver parameters\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tThe following table provides information about the configurable NetKVM driver logging parameters.\n\t\t\t\t\u003C/p>\u003Crh-table id=\"idm140237771820944\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 21.2. Logging parameters\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 50%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 50%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237771816112\" scope=\"col\">Parameter\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237771815024\" scope=\"col\">Description 2\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771816112\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tLogging.Enable\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771815024\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tA Boolean value that determines whether logging is enabled. The default value is Enabled.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771816112\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tLogging.Level\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771815024\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tAn integer that defines the logging level. As the integer increases, so does the verbosity of the log.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tThe default value is 0 (errors only).\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t1-2 adds configuration messages.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t3-4 adds packet flow information.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t5-6 adds interrupt and DPC level trace information.\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\n\t\t\t\t\t\t\t\t \u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\t\tHigh logging levels will slow down your virtual machine.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cp>\n\t\t\t\t\tThe following table provides information about the configurable NetKVM driver initial parameters.\n\t\t\t\t\u003C/p>\u003Crh-table id=\"idm140237771799408\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 21.3. Initial parameters\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 50%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 50%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237771794576\" scope=\"col\">Parameter\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237771793488\" scope=\"col\">Description\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771794576\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tAssign MAC\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771793488\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tA string that defines the locally-administered MAC address for the paravirtualized NIC. This is not set by default.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771794576\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tInit.Do802.1PQ\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771793488\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tA Boolean value that enables Priority/VLAN tag population and removal support. The default value is Enabled.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771794576\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tInit.MaxTxBuffers\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771793488\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tAn integer that represents the number of TX ring descriptors that will be allocated. The value is limited by the size of Tx queue of QEMU.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003Cp>\n\t\t\t\t\t\t\t\t\tThe default value is 1024.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003Cp>\n\t\t\t\t\t\t\t\t\tValid values are: 16, 32, 64, 128, 256, 512, and 1024.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771794576\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tInit.MaxRxBuffers\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771793488\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tAn integer that represents the number of RX ring descriptors that will be allocated. The value is limited by the size of Tx queue of QEMU.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003Cp>\n\t\t\t\t\t\t\t\t\tThe default value is 1024.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003Cp>\n\t\t\t\t\t\t\t\t\tValid values are: 16, 32, 64, 128, 256, 512, 1024, 2048, and 4096.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771794576\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tOffload.Tx.Checksum\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771793488\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tSpecifies the TX checksum offloading capability.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003Cp>\n\t\t\t\t\t\t\t\t\tIn Red Hat Enterprise Linux 9, the valid values for this parameter are:\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tAll (the default) which enables IP, TCP, and UDP checksum offloading for both IPv4 and IPv6\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tTCP/UDP(v4,v6) which enables TCP and UDP checksum offloading for both IPv4 and IPv6\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tTCP/UDP(v4) which enables TCP and UDP checksum offloading for IPv4 only\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tTCP(v4) which enables only TCP checksum offloading for IPv4 only\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771794576\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tOffload.Rx.Checksum\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771793488\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tSpecifies the RX checksum offloading capability.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003Cp>\n\t\t\t\t\t\t\t\t\tIn Red Hat Enterprise Linux 9, the valid values for this parameter are:\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tAll (the default) which enables IP, TCP, and UDP checksum offloading for both IPv4 and IPv6\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tTCP/UDP(v4,v6) which enables TCP and UDP checksum offloading for both IPv4 and IPv6\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tTCP/UDP(v4) which enables TCP and UDP checksum offloading for IPv4 only\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tTCP(v4) which enables only TCP checksum offloading for IPv4 only\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771794576\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tOffload.Tx.LSO\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771793488\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tSpecifies the TX large segments offloading (LSO) capability.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003Cp>\n\t\t\t\t\t\t\t\t\tIn Red Hat Enterprise Linux 9, the valid values for this parameter are:\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tMaximal (the default) which enables LSO offloading for both TCPv4 and TCPv6\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tIPv4 which enables LSO offloading for TCPv4 only\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\tDisable which disables LSO offloading\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771794576\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tMinRxBufferPercent\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237771793488\"> \u003Cp>\n\t\t\t\t\t\t\t\t\tSpecifies minimal amount of available buffers in RX queue in percent of total amount of RX buffers. If the actual number of available buffers is lower than that value, the NetKVM driver indicates low resources condition to the operating system (requesting it to return the RX buffers as soon as possible)\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003Cp>\n\t\t\t\t\t\t\t\t\tMinimum value (default) - \u003Ccode class=\"literal\">0\u003C/code>, meaning the driver never indicates low resources condition.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003Cp>\n\t\t\t\t\t\t\t\t\tMaximum value - \u003Ccode class=\"literal\">100\u003C/code>, meaning the driver indicates low resources condition all the time.\n\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://learn.microsoft.com/en-us/windows-hardware/drivers/network/enumeration-keywords\">INF enumeration keywords\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://learn.microsoft.com/en-us/windows-hardware/drivers/network/keywords-that-can-be-edited\">INF keywords that can be edited\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"optimizing-background-processes-on-windows-virtual-machines_optimizing-windows-virtual-machines-on-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">21.2.5. Optimizing background processes on Windows virtual machines\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tTo optimize the performance of a virtual machine (VM) running a Windows OS, you can configure or disable a variety of Windows processes.\n\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tCertain processes might not work as expected if you change their configuration.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tYou can optimize your Windows VMs by performing any combination of the following:\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tRemove unused devices, such as USBs or CD-ROMs, and disable the ports.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tDisable background services, such as SuperFetch and Windows Search. For more information about stopping services, see \u003Ca class=\"link\" href=\"https://docs.microsoft.com/en-us/windows-server/security/windows-services/security-guidelines-for-disabling-system-services-in-windows-server\">Disabling system services\u003C/a> or \u003Ca class=\"link\" href=\"https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.management/stop-service?view=powershell-7\">Stop-Service\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tDisable \u003Ccode class=\"literal\">useplatformclock\u003C/code>. To do so, run the following command,\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>bcdedit /set useplatformclock No\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tReview and disable unnecessary scheduled tasks, such as scheduled disk defragmentation. For more information about how to do so, see \u003Ca class=\"link\" href=\"https://docs.microsoft.com/en-us/powershell/module/scheduledtasks/disable-scheduledtask?view=win10-ps\">Disable Scheduled Tasks\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tMake sure the disks are not encrypted.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tReduce periodic activity of server applications. You can do so by editing the respective timers. For more information, see \u003Ca class=\"link\" href=\"https://docs.microsoft.com/en-us/windows/win32/multimedia/multimedia-timers\">Multimedia Timers\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tClose the Server Manager application on the VM.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tDisable the antivirus software. Note that disabling the antivirus might compromise the security of the VM.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tDisable the screen saver.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tKeep the Windows OS on the sign-in screen when not in use.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"enabling-standard-harware-security-on-windows-virtual-machines_installing-and-managing-windows-virtual-machines-on-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.3. Enabling standard hardware security on Windows virtual machines\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo secure Windows virtual machines (VMs), you can enable basic level security by using the standard hardware capabilities of the Windows device.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tMake sure you have installed the latest WHQL certified VirtIO drivers.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tMake sure the VM’s firmware supports UEFI boot.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">edk2-OVMF\u003C/code> package on your host machine.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>{PackageManagerCommand} install edk2-ovmf\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">vTPM\u003C/code> packages on your host machine.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>{PackageManagerCommand} install swtpm libtpms\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tMake sure the VM is using the Q35 machine architecture.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tMake sure you have the Windows installation media.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable TPM 2.0 by adding the following parameters to the \u003Ccode class=\"literal\">&lt;devices&gt;\u003C/code> section in the VM’s XML configuration.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;devices&gt;\n[...]\n  &lt;tpm model='tpm-crb'&gt;\n    &lt;backend type='emulator' version='2.0'/&gt;\n  &lt;/tpm&gt;\n[...]\n&lt;/devices&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tInstall Windows in UEFI mode. For more information about how to do so, see \u003Ca class=\"link\" href=\"#creating-a-secureboot-virtual-machine_securing-virtual-machines-in-rhel\" title=\"19.4. Creating a SecureBoot virtual machine\">Creating a SecureBoot virtual machine\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tInstall the VirtIO drivers on the Windows VM. For more information about how to do so, see \u003Ca class=\"link\" href=\"#installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines\" title=\"21.2.1.3. Installing virtio drivers on a Windows guest\">Installing virtio drivers on a Windows guest\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIn UEFI, enable Secure Boot. For more information about how to do so, see \u003Ca class=\"link\" href=\"https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/secure-boot-landing\">Secure Boot\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnsure that the \u003Cspan class=\"strong strong\">\u003Cstrong>Device Security\u003C/strong>\u003C/span> page on your Windows machine displays the following message:\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Settings &gt; Update &amp; Security &gt; Windows Security &gt; Device Security\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">\u003Cspan class=\"strong strong\">\u003Cstrong>Your device meets the requirements for standard hardware security.\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_enabling-enhanced-hardware-security-on-windows-virtual-machines_installing-and-managing-windows-virtual-machines-on-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.4. Enabling enhanced hardware security on Windows virtual machines\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo further secure Windows virtual machines (VMs), you can enable virtualization-based protection of code integrity, also known as Hypervisor-Protected Code Integrity (HVCI).\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnsure that standard hardware security is enabled. For more information, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/securing-virtual-machines-in-rhel_configuring-and-managing-virtualization#enabling-standard-harware-security-on-windows-virtual-machines_securing-virtual-machines-in-rhel\">Enabling standard hardware security on Windows virtual machines\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnsure you have enabled Hyper-V enlightenments. For more information, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_and_managing_virtualization/installing-and-managing-windows-virtual-machines-on-rhel_configuring-and-managing-virtualization#enabling-hyper-v-enlightenments_optimizing-windows-virtual-machines-on-rhel\">Enabling Hyper-V enlightenments\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen the XML configuration of the Windows VM. The following example opens the configuration of the \u003Cspan class=\"emphasis\">\u003Cem>Example-L1\u003C/em>\u003C/span> VM:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh edit \u003Cspan class=\"emphasis\">\u003Cem>Example-L1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUnder the \u003Ccode class=\"literal\">&lt;cpu&gt;\u003C/code> section, specify the CPU mode and add the policy flag.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tFor Intel CPUs, enable the \u003Ccode class=\"literal\">vmx\u003C/code> policy flag.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tFor AMD CPUs, enable the \u003Ccode class=\"literal\">svm\u003C/code> policy flag.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tIf you do not wish to specify a custom CPU, you can set the \u003Ccode class=\"literal\">&lt;cpu mode&gt;\u003C/code> as \u003Ccode class=\"literal\">host-passthrough\u003C/code>.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003Cpre class=\"programlisting language-xml\">&lt;cpu mode='custom' match='exact' check='partial'&gt;\n    &lt;model fallback='allow'&gt;Skylake-Client-IBRS&lt;/model&gt;\n    &lt;topology sockets='1' dies='1' cores='4' threads='1'/&gt;\n    &lt;feature policy='require' name='vmx'/&gt;\n&lt;/cpu&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSave the XML configuration and reboot the VM.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the VMs operating system, navigate to the \u003Cspan class=\"strong strong\">\u003Cstrong>Core isolation details\u003C/strong>\u003C/span> page:\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Settings &gt; Update &amp; Security &gt; Windows Security &gt; Device Security &gt; Core isolation details\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tToggle the switch to enable \u003Cspan class=\"strong strong\">\u003Cstrong>Memory Integrity\u003C/strong>\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tReboot the VM.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tFor other methods of enabling HVCI, see the relevant Microsoft documentation.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnsure that the \u003Cspan class=\"strong strong\">\u003Cstrong>Device Security\u003C/strong>\u003C/span> page on your Windows VM displays the following message:\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Settings &gt; Update &amp; Security &gt; Windows Security &gt; Device Security\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">\u003Cspan class=\"strong strong\">\u003Cstrong>Your device meets the requirements for enhanced hardware security.\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAlternatively, check System Information about the Windows VM:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tRun \u003Ccode class=\"literal\">msinfo32.exe\u003C/code> in a command prompt.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tCheck if \u003Cspan class=\"strong strong\">\u003Cstrong>Credential Guard, Hypervisor enforced Code Integrity\u003C/strong>\u003C/span> is listed under \u003Cspan class=\"strong strong\">\u003Cstrong>Virtualization-based security Services Running\u003C/strong>\u003C/span>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"next-steps-installing-and-managing-windows-virtual-machines-on-rhel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.5. Next steps\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo use utilities for accessing, editing, and creating virtual machine disks or other disk images for a Windows VM, install the \u003Ccode class=\"literal package\">libguestfs-tools\u003C/code> and \u003Ccode class=\"literal package\">libguestfs-winsupport\u003C/code> packages on the host machine:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo dnf install libguestfs-tools libguestfs-winsupport\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo use utilities for accessing, editing, and creating virtual machine disks or other disk images for a Windows VM, install the \u003Ccode class=\"literal package\">guestfs-tools\u003C/code> and \u003Ccode class=\"literal package\">guestfs-winsupport\u003C/code> packages on the host machine:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo dnf install guestfs-tools guestfs-winsupport\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTo share files between your RHEL 9 host and its Windows VMs, you can use \u003Ca class=\"link\" href=\"#sharing-files-between-the-host-and-its-virtual-machines-using-virtiofs_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs\" title=\"20.2.1. Sharing files between the host and its virtual machines by using virtiofs\">virtiofs\u003C/a> or \u003Ca class=\"link\" href=\"#sharing-files-between-the-host-and-its-virtual-machines-using-NFS_sharing-files-between-the-host-and-its-virtual-machines\" title=\"20.1. Sharing files between the host and its virtual machines by using NFS\">NFS\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"creating-nested-virtual-machines_configuring-and-managing-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 22. Creating nested virtual machines\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tYou can use nested virtual machines (VMs) if you require a different host operating system than what your local host is running. This eliminates the need for additional physical hardware.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tIn most environments, nested virtualization is only available as a \u003Ca class=\"link\" href=\"https://access.redhat.com/support/offerings/techpreview/\">Technology Preview\u003C/a> in RHEL 9.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor detailed descriptions of the supported and unsupported environments, see \u003Ca class=\"link\" href=\"#support-limitations-for-nested-virtualization_creating-nested-virtual-machines\" title=\"22.2. Support limitations for nested virtualization\">Support limitations for nested virtualization\u003C/a>.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"what-is-nested-virtualization_creating-nested-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">22.1. What is nested virtualization?\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tWith nested virtualization, you can run virtual machines (VMs) within other VMs. A standard VM that runs on a physical host can also act as a second hypervisor and create its own VMs.\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cp class=\"title\">\u003Cstrong>Nested virtualization terminology\u003C/strong>\u003C/p>\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Level 0 (\u003Ccode class=\"literal\">L0\u003C/code>)\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tA physical host, a bare-metal machine.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Level 1 (\u003Ccode class=\"literal\">L1\u003C/code>)\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tA standard VM, running on an \u003Ccode class=\"literal\">L0\u003C/code> physical host, that can act as an additional virtual host.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Level 2 (\u003Ccode class=\"literal\">L2\u003C/code>)\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA nested VM running on an \u003Ccode class=\"literal\">L1\u003C/code> virtual host.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Important:\u003C/strong>\u003C/span> The second level of virtualization severely limits the performance of an \u003Ccode class=\"literal\">L2\u003C/code> VM. For this reason, nested virtualization is primarily intended for development and testing scenarios, such as:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tDebugging hypervisors in a constrained environment\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tTesting larger virtual deployments on a limited amount of physical resources\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003C/dl>\u003C/div>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIn most environments, nested virtualization is only available as a \u003Ca class=\"link\" href=\"https://access.redhat.com/support/offerings/techpreview/\">Technology Preview\u003C/a> in RHEL 9.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tFor detailed descriptions of the supported and unsupported environments, see \u003Ca class=\"link\" href=\"#support-limitations-for-nested-virtualization_creating-nested-virtual-machines\" title=\"22.2. Support limitations for nested virtualization\">Support limitations for nested virtualization\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#support-limitations-for-nested-virtualization_creating-nested-virtual-machines\" title=\"22.2. Support limitations for nested virtualization\">Support limitations for nested virtualization\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"support-limitations-for-nested-virtualization_creating-nested-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">22.2. Support limitations for nested virtualization\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tIn most environments, nested virtualization is only available as a Technology Preview in RHEL 9.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tHowever, you can use a Windows virtual machine (VM) with the Windows Subsystem for Linux (WSL2) to create a virtual Linux environment inside the Windows VM. This use case is fully supported on RHEL 9 under specific conditions.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo learn more about the relevant terminology for nested virtualization, see \u003Ca class=\"link\" href=\"#what-is-nested-virtualization_creating-nested-virtual-machines\" title=\"22.1. What is nested virtualization?\">What is nested virtualization?\u003C/a>\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Supported environments\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tTo create a supported deployment of nested virtualization, create an \u003Ccode class=\"literal\">L1\u003C/code> Windows VM on a RHEL 9 \u003Ccode class=\"literal\">L0\u003C/code> host and use WSL2 to create a virtual Linux environment inside the \u003Ccode class=\"literal\">L1\u003C/code> Windows VM. Currently, this is the only supported nested environment.\n\t\t\t\t\u003C/p>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe \u003Ccode class=\"literal\">L0\u003C/code> host must be an Intel or AMD system. Other architectures, such as ARM or IBM Z, are currently not supported.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tYou must use only the following operating system versions:\n\t\t\t\u003C/p>\u003Crh-table>\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccolgroup>\u003Ccol style=\"width: 50%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 50%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237772935456\" scope=\"col\">\u003Cspan class=\"strong strong\">\u003Cstrong>On the \u003Ccode class=\"literal\">L0\u003C/code> host\u003C/strong>\u003C/span>:\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237772933264\" scope=\"col\">\u003Cspan class=\"strong strong\">\u003Cstrong>On the \u003Ccode class=\"literal\">L1\u003C/code> VMs\u003C/strong>\u003C/span>:\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772935456\"> \u003Cp>\n\t\t\t\t\t\t\t\tRHEL 9.2 and later\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772933264\"> \u003Cp>\n\t\t\t\t\t\t\t\tWindows Server 2019 with WSL2\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772935456\"> \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772933264\"> \u003Cp>\n\t\t\t\t\t\t\t\tWindows Server 2022 with WSL2\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772935456\"> \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772933264\"> \u003Cp>\n\t\t\t\t\t\t\t\tWindows 10 with WSL2\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772935456\"> \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772933264\"> \u003Cp>\n\t\t\t\t\t\t\t\tWindows 11 with WSL2\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cp>\n\t\t\t\tSee \u003Ca class=\"link\" href=\"https://learn.microsoft.com/en-us/windows/wsl/install\">Microsoft documentation\u003C/a> for instructions on installing WSL2 and choosing supported Linux distributions.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo create a supported nested environment, use one of the following procedures:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-a-nested-virtual-machine-on-intel_creating-nested-virtual-machines\" title=\"22.3. Creating a nested virtual machine on Intel\">Creating a nested virtual machine on Intel\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-a-nested-virtual-machine-on-amd_creating-nested-virtual-machines\" title=\"22.4. Creating a nested virtual machine on AMD\">Creating a nested virtual machine on AMD\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Technology Preview environments\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tThese nested environments are available only as a Technology Preview and are not supported.\n\t\t\t\t\u003C/p>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe \u003Ccode class=\"literal\">L0\u003C/code> host must be an Intel, AMD, or IBM Z system. Nested virtualization currently does not work on other architectures, such as ARM.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tYou must use only the following operating system versions:\n\t\t\t\u003C/p>\u003Crh-table>\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccolgroup>\u003Ccol style=\"width: 33%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 33%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 33%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237772370064\" scope=\"col\">\u003Cspan class=\"strong strong\">\u003Cstrong>On the \u003Ccode class=\"literal\">L0\u003C/code> host\u003C/strong>\u003C/span>:\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237772367872\" scope=\"col\">\u003Cspan class=\"strong strong\">\u003Cstrong>On the \u003Ccode class=\"literal\">L1\u003C/code> VMs\u003C/strong>\u003C/span>:\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237772365680\" scope=\"col\">\u003Cspan class=\"strong strong\">\u003Cstrong>On the \u003Ccode class=\"literal\">L2\u003C/code> VMs\u003C/strong>\u003C/span>:\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772370064\"> \u003Cp>\n\t\t\t\t\t\t\t\tRHEL 9.2 and later\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772367872\"> \u003Cp>\n\t\t\t\t\t\t\t\tRHEL 8.8 and later\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772365680\"> \u003Cp>\n\t\t\t\t\t\t\t\tRHEL 8.8 and later\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772370064\"> \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772367872\"> \u003Cp>\n\t\t\t\t\t\t\t\tRHEL 9.2 and later\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772365680\"> \u003Cp>\n\t\t\t\t\t\t\t\tRHEL 9.2 and later\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772370064\"> \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772367872\"> \u003Cp>\n\t\t\t\t\t\t\t\tWindows Server 2016 with Hyper-V\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772365680\"> \u003Cp>\n\t\t\t\t\t\t\t\tWindows Server 2019\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772370064\"> \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772367872\"> \u003Cp>\n\t\t\t\t\t\t\t\tWindows Server 2019 with Hyper-V\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772365680\"> \u003Cp>\n\t\t\t\t\t\t\t\tWindows Server 2022\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772370064\"> \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772367872\"> \u003Cp>\n\t\t\t\t\t\t\t\tWindows Server 2022 with Hyper-V\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772365680\"> \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772370064\"> \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772367872\"> \u003Cp>\n\t\t\t\t\t\t\t\tWindows 10 with Hyper-V\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772365680\"> \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772370064\"> \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772367872\"> \u003Cp>\n\t\t\t\t\t\t\t\tWindows 11 with Hyper-V\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237772365680\"> \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tCreating RHEL \u003Ccode class=\"literal\">L1\u003C/code> VMs is not tested when used in other Red Hat virtualization offerings. These include:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tRed Hat Virtualization\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tRed Hat OpenStack Platform\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tOpenShift Virtualization\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tTo create a Technology Preview nested environment, use one of the following procedures:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-a-nested-virtual-machine-on-intel_creating-nested-virtual-machines\" title=\"22.3. Creating a nested virtual machine on Intel\">Creating a nested virtual machine on Intel\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-a-nested-virtual-machine-on-amd_creating-nested-virtual-machines\" title=\"22.4. Creating a nested virtual machine on AMD\">Creating a nested virtual machine on AMD\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-a-nested-virtual-machine-on-ibm-z_creating-nested-virtual-machines\" title=\"22.5. Creating a nested virtual machine on IBM Z\">Creating a nested virtual machine on IBM Z\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Hypervisor limitations\u003C/strong>\u003C/span>\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCurrently, Red Hat tests nesting only on RHEL-KVM. When RHEL is used as the \u003Ccode class=\"literal\">L0\u003C/code> hypervisor, you can use RHEL or Windows as the \u003Ccode class=\"literal\">L1\u003C/code> hypervisor.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWhen using an \u003Ccode class=\"literal\">L1\u003C/code> RHEL VM on a non-KVM \u003Ccode class=\"literal\">L0\u003C/code> hypervisor, such as VMware ESXi or Amazon Web Services (AWS), creating \u003Ccode class=\"literal\">L2\u003C/code> VMs in the RHEL guest operating system has not been tested and might not work.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Feature limitations\u003C/strong>\u003C/span>\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tUse of \u003Ccode class=\"literal\">L2\u003C/code> VMs as hypervisors and creating \u003Ccode class=\"literal\">L3\u003C/code> guests has not been properly tested and is not expected to work.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tMigrating VMs currently does not work on AMD systems if nested virtualization has been enabled on the \u003Ccode class=\"literal\">L0\u003C/code> host.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn an IBM Z system, huge-page backing storage and nested virtualization cannot be used at the same time.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>modprobe kvm hpage=1 nested=1\u003C/strong>\u003C/span>\nmodprobe: ERROR: could not insert 'kvm': Invalid argument\n# \u003Cspan class=\"strong strong\">\u003Cstrong>dmesg |tail -1\u003C/strong>\u003C/span>\n[90226.508366] kvm-s390: A KVM host that supports nesting cannot back its KVM guests with huge pages\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSome features available on the \u003Ccode class=\"literal\">L0\u003C/code> host might be unavailable for the \u003Ccode class=\"literal\">L1\u003C/code> hypervisor.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://learn.microsoft.com/en-gb/windows/wsl/about\">What is Windows Subsystem for Linux?\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-a-nested-virtual-machine-on-intel_creating-nested-virtual-machines\" title=\"22.3. Creating a nested virtual machine on Intel\">Creating a nested virtual machine on Intel\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-a-nested-virtual-machine-on-amd_creating-nested-virtual-machines\" title=\"22.4. Creating a nested virtual machine on AMD\">Creating a nested virtual machine on AMD\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#creating-a-nested-virtual-machine-on-ibm-z_creating-nested-virtual-machines\" title=\"22.5. Creating a nested virtual machine on IBM Z\">Creating a nested virtual machine on IBM Z\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-a-nested-virtual-machine-on-intel_creating-nested-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">22.3. Creating a nested virtual machine on Intel\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tFollow the steps below to enable and configure nested virtualization on an Intel host.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIn most environments, nested virtualization is only available as a \u003Ca class=\"link\" href=\"https://access.redhat.com/support/offerings/techpreview/\">Technology Preview\u003C/a> in RHEL 9.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tFor detailed descriptions of the supported and unsupported environments, see \u003Ca class=\"link\" href=\"#support-limitations-for-nested-virtualization_creating-nested-virtual-machines\" title=\"22.2. Support limitations for nested virtualization\">Support limitations for nested virtualization\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAn L0 RHEL 9 host running an L1 virtual machine (VM).\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe hypervisor CPU must support nested virtualization. To verify, use the \u003Ccode class=\"literal\">cat /proc/cpuinfo\u003C/code> command on the L0 hypervisor. If the output of the command includes the \u003Ccode class=\"literal\">vmx\u003C/code> and \u003Ccode class=\"literal\">ept\u003C/code> flags, creating L2 VMs is possible. This is generally the case on Intel Xeon v3 cores and later.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnsure that nested virtualization is enabled on the L0 host:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /sys/module/kvm_intel/parameters/nested\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIf the command returns \u003Cspan class=\"strong strong\">\u003Cstrong>1\u003C/strong>\u003C/span> or \u003Cspan class=\"strong strong\">\u003Cstrong>Y\u003C/strong>\u003C/span>, the feature is enabled. Skip the remaining prerequisite steps, and continue with the Procedure section.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf the command returns \u003Cspan class=\"strong strong\">\u003Cstrong>0\u003C/strong>\u003C/span> or \u003Cspan class=\"strong strong\">\u003Cstrong>N\u003C/strong>\u003C/span> but your system supports nested virtualization, use the following steps to enable the feature.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tUnload the \u003Ccode class=\"literal\">kvm_intel\u003C/code> module:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>modprobe -r kvm_intel\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tActivate the nesting feature:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>modprobe kvm_intel nested=1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tThe nesting feature is now enabled, but only until the next reboot of the L0 host. To enable it permanently, add the following line to the \u003Ccode class=\"literal\">/etc/modprobe.d/kvm.conf\u003C/code> file:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">options kvm_intel nested=1\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure your L1 VM for nested virtualization.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOpen the XML configuration of the VM. The following example opens the configuration of the \u003Cspan class=\"emphasis\">\u003Cem>Intel-L1\u003C/em>\u003C/span> VM:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh edit \u003Cspan class=\"emphasis\">\u003Cem>Intel-L1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tConfigure the VM to use \u003Ccode class=\"literal\">host-passthrough\u003C/code> CPU mode by editing the \u003Ccode class=\"literal\">&lt;cpu&gt;\u003C/code> element:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">&lt;cpu \u003Cspan class=\"strong strong\">\u003Cstrong>mode='host-passthrough'\u003C/strong>\u003C/span>/&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you require the VM to use a specific CPU model, configure the VM to use \u003Ccode class=\"literal\">custom\u003C/code> CPU mode. Inside the \u003Ccode class=\"literal\">&lt;cpu&gt;\u003C/code> element, add a \u003Ccode class=\"literal\">&lt;feature policy='require' name='vmx'/&gt;\u003C/code> element and a \u003Ccode class=\"literal\">&lt;model&gt;\u003C/code> element with the CPU model specified inside. For example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">&lt;cpu \u003Cspan class=\"strong strong\">\u003Cstrong>mode ='custom'\u003C/strong>\u003C/span> match ='exact' check='partial'&gt;\n  &lt;model fallback='allow'&gt;\u003Cspan class=\"strong strong\">\u003Cstrong>Haswell-noTSX\u003C/strong>\u003C/span>&lt;/model&gt;\n  \u003Cspan class=\"strong strong\">\u003Cstrong>&lt;feature policy='require' name='vmx'/&gt;\u003C/strong>\u003C/span>\n  ...\n&lt;/cpu&gt;\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCreate an L2 VM within the L1 VM. To do this, follow the same procedure as when \u003Ca class=\"link\" href=\"#assembly_creating-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 3. Creating virtual machines\">creating the L1 VM\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-a-nested-virtual-machine-on-amd_creating-nested-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">22.4. Creating a nested virtual machine on AMD\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tFollow the steps below to enable and configure nested virtualization on an AMD host.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIn most environments, nested virtualization is only available as a \u003Ca class=\"link\" href=\"https://access.redhat.com/support/offerings/techpreview/\">Technology Preview\u003C/a> in RHEL 9.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tFor detailed descriptions of the supported and unsupported environments, see \u003Ca class=\"link\" href=\"#support-limitations-for-nested-virtualization_creating-nested-virtual-machines\" title=\"22.2. Support limitations for nested virtualization\">Support limitations for nested virtualization\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAn L0 RHEL 9 host running an L1 virtual machine (VM).\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe hypervisor CPU must support nested virtualization. To verify, use the \u003Ccode class=\"literal\">cat /proc/cpuinfo\u003C/code> command on the L0 hypervisor. If the output of the command includes the \u003Ccode class=\"literal\">svm\u003C/code> and \u003Ccode class=\"literal\">npt\u003C/code> flags, creating L2 VMs is possible. This is generally the case on AMD EPYC cores and later.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnsure that nested virtualization is enabled on the L0 host:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /sys/module/kvm_amd/parameters/nested\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIf the command returns \u003Cspan class=\"strong strong\">\u003Cstrong>1\u003C/strong>\u003C/span> or \u003Cspan class=\"strong strong\">\u003Cstrong>Y\u003C/strong>\u003C/span>, the feature is enabled. Skip the remaining prerequisite steps, and continue with the Procedure section.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf the command returns \u003Cspan class=\"strong strong\">\u003Cstrong>0\u003C/strong>\u003C/span> or \u003Cspan class=\"strong strong\">\u003Cstrong>N\u003C/strong>\u003C/span>, use the following steps to enable the feature.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tStop all running VMs on the L0 host.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tUnload the \u003Ccode class=\"literal\">kvm_amd\u003C/code> module:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>modprobe -r kvm_amd\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tActivate the nesting feature:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>modprobe kvm_amd nested=1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tThe nesting feature is now enabled, but only until the next reboot of the L0 host. To enable it permanently, add the following to the \u003Ccode class=\"literal\">/etc/modprobe.d/kvm.conf\u003C/code> file:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">options kvm_amd nested=1\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure your L1 VM for nested virtualization.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOpen the XML configuration of the VM. The following example opens the configuration of the \u003Cspan class=\"emphasis\">\u003Cem>AMD-L1\u003C/em>\u003C/span> VM:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh edit \u003Cspan class=\"emphasis\">\u003Cem>AMD-L1\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tConfigure the VM to use \u003Ccode class=\"literal\">host-passthrough\u003C/code> CPU mode by editing the \u003Ccode class=\"literal\">&lt;cpu&gt;\u003C/code> element:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">&lt;cpu \u003Cspan class=\"strong strong\">\u003Cstrong>mode='host-passthrough'\u003C/strong>\u003C/span>/&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you require the VM to use a specific CPU model, configure the VM to use \u003Ccode class=\"literal\">custom\u003C/code> CPU mode. Inside the \u003Ccode class=\"literal\">&lt;cpu&gt;\u003C/code> element, add a \u003Ccode class=\"literal\">&lt;feature policy='require' name='svm'/&gt;\u003C/code> element and a \u003Ccode class=\"literal\">&lt;model&gt;\u003C/code> element with the CPU model specified inside. For example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">&lt;cpu \u003Cspan class=\"strong strong\">\u003Cstrong>mode=\"custom\"\u003C/strong>\u003C/span> match=\"exact\" check=\"none\"&gt;\n  &lt;model fallback=\"allow\"&gt;\u003Cspan class=\"strong strong\">\u003Cstrong>EPYC-IBPB\u003C/strong>\u003C/span>&lt;/model&gt;\n  \u003Cspan class=\"strong strong\">\u003Cstrong>&lt;feature policy=\"require\" name=\"svm\"/&gt;\u003C/strong>\u003C/span>\n  ...\n&lt;/cpu&gt;\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCreate an L2 VM within the L1 VM. To do this, follow the same procedure as when \u003Ca class=\"link\" href=\"#assembly_creating-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 3. Creating virtual machines\">creating the L1 VM\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-a-nested-virtual-machine-on-ibm-z_creating-nested-virtual-machines\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">22.5. Creating a nested virtual machine on IBM Z\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tFollow the steps below to enable and configure nested virtualization on an IBM Z host.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIBM Z does not really provide a bare-metal \u003Ccode class=\"literal\">L0\u003C/code> host. Instead, user systems are set up on a logical partition (LPAR), which is already a virtualized system, so it is often referred to as \u003Ccode class=\"literal\">L1\u003C/code>. However, for better alignment with other architectures in this guide, the following steps refer to IBM Z as if it provides an \u003Ccode class=\"literal\">L0\u003C/code> host.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tTo learn more about nested virtualization, see: \u003Ca class=\"link\" href=\"#what-is-nested-virtualization_creating-nested-virtual-machines\" title=\"22.1. What is nested virtualization?\">What is nested virtualization?\u003C/a>\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIn most environments, nested virtualization is only available as a \u003Ca class=\"link\" href=\"https://access.redhat.com/support/offerings/techpreview/\">Technology Preview\u003C/a> in RHEL 9.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tFor detailed descriptions of the supported and unsupported environments, see \u003Ca class=\"link\" href=\"#support-limitations-for-nested-virtualization_creating-nested-virtual-machines\" title=\"22.2. Support limitations for nested virtualization\">Support limitations for nested virtualization\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAn L0 RHEL 9 host running an L1 virtual machine (VM).\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe hypervisor CPU must support nested virtualization. To verify this is the case, use the \u003Ccode class=\"literal\">cat /proc/cpuinfo\u003C/code> command on the L0 hypervisor. If the output of the command includes the \u003Ccode class=\"literal\">sie\u003C/code> flag, creating L2 VMs is possible.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnsure that nested virtualization is enabled on the L0 host:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /sys/module/kvm/parameters/nested\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIf the command returns \u003Cspan class=\"strong strong\">\u003Cstrong>1\u003C/strong>\u003C/span> or \u003Cspan class=\"strong strong\">\u003Cstrong>Y\u003C/strong>\u003C/span>, the feature is enabled. Skip the remaining prerequisite steps, and continue with the Procedure section.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf the command returns \u003Cspan class=\"strong strong\">\u003Cstrong>0\u003C/strong>\u003C/span> or \u003Cspan class=\"strong strong\">\u003Cstrong>N\u003C/strong>\u003C/span>, use the following steps to enable the feature.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tStop all running VMs on the L0 host.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tUnload the \u003Ccode class=\"literal\">kvm\u003C/code> module:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>modprobe -r kvm\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tActivate the nesting feature:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>modprobe kvm nested=1\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tThe nesting feature is now enabled, but only until the next reboot of the L0 host. To enable it permanently, add the following line to the \u003Ccode class=\"literal\">/etc/modprobe.d/kvm.conf\u003C/code> file:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">options kvm nested=1\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCreate an L2 VM within the L1 VM. To do this, follow the same procedure as when \u003Ca class=\"link\" href=\"#assembly_creating-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 3. Creating virtual machines\">creating the L1 VM\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"diagnosing-virtual-machine-problems_configuring-and-managing-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 23. Diagnosing virtual machine problems\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tWhen working with virtual machines (VMs), you may encounter problems with varying levels of severity. Some problems may have a quick and easy fix, while for others, you may have to capture VM-related data and logs to report or diagnose the problems.\n\t\t\u003C/p>\u003Cp>\n\t\t\tThe following sections provide detailed information about generating logs and diagnosing some common VM problems, as well as about reporting these problems.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"generating-virtual-machine-debug-logs_diagnosing-virtual-machine-problems\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.1. Generating libvirt debug logs\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tTo diagnose virtual machine (VM) problems, it is helpful to generate and review libvirt debug logs. Attaching debug logs is also useful when asking for support to resolve VM-related problems.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe following sections explain \u003Ca class=\"link\" href=\"#understanding-virtual-machine-debug-logs_generating-virtual-machine-debug-logs\" title=\"23.1.1. Understanding libvirt debug logs\">what debug logs are\u003C/a>, how you can \u003Ca class=\"link\" href=\"#enabling-persistent-settings-for-virtual-machine-debug-logs_generating-virtual-machine-debug-logs\" title=\"23.1.2. Enabling persistent settings for libvirt debug logs\">set them to be persistent\u003C/a>, \u003Ca class=\"link\" href=\"#enabling-virtual-machine-debug-logs-during-runtime_generating-virtual-machine-debug-logs\" title=\"23.1.3. Enabling libvirt debug logs during runtime\">enable them during runtime\u003C/a>, and \u003Ca class=\"link\" href=\"#attaching-virtual-machine-debug-logs_generating-virtual-machine-debug-logs\" title=\"23.1.4. Attaching libvirt debug logs to support requests\">attach them\u003C/a> when reporting problems.\n\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"understanding-virtual-machine-debug-logs_generating-virtual-machine-debug-logs\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">23.1.1. Understanding libvirt debug logs\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tDebug logs are text files that contain data about events that occur during virtual machine (VM) runtime. The logs provide information about fundamental server-side functionalities, such as host libraries and the libvirt daemon. The log files also contain the standard error output (\u003Ccode class=\"literal\">stderr\u003C/code>) of all running VMs.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tDebug logging is not enabled by default and has to be enabled when libvirt starts. You can enable logging for a single session or \u003Ca class=\"link\" href=\"#enabling-persistent-settings-for-virtual-machine-debug-logs_generating-virtual-machine-debug-logs\" title=\"23.1.2. Enabling persistent settings for libvirt debug logs\">persistently\u003C/a>. You can also enable logging when a libvirt daemon session is already running by \u003Ca class=\"link\" href=\"#enabling-virtual-machine-debug-logs-during-runtime_generating-virtual-machine-debug-logs\" title=\"23.1.3. Enabling libvirt debug logs during runtime\">modifying the daemon run-time settings\u003C/a>.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\u003Ca class=\"link\" href=\"#attaching-virtual-machine-debug-logs_generating-virtual-machine-debug-logs\" title=\"23.1.4. Attaching libvirt debug logs to support requests\">Attaching the libvirt debug logs\u003C/a> is also useful when requesting support with a VM problem.\n\t\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"enabling-persistent-settings-for-virtual-machine-debug-logs_generating-virtual-machine-debug-logs\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">23.1.2. Enabling persistent settings for libvirt debug logs\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tYou can configure libvirt debug logging to be automatically enabled whenever libvirt starts. By default, \u003Ccode class=\"literal\">virtqemud\u003C/code> is the main libvirt daemon in RHEL 9. To make persistent changes in the libvirt configuration, you must edit the \u003Ccode class=\"literal\">virtqemud.conf\u003C/code> file, located in the \u003Ccode class=\"literal\">/etc/libvirt\u003C/code> directory.\n\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tIn some cases, for example when you upgrade from RHEL 8, \u003Ccode class=\"literal\">libvirtd\u003C/code> might still be the enabled libvirt daemon. In that case, you must edit the \u003Ccode class=\"literal\">libvirtd.conf\u003C/code> file instead.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tOpen the \u003Ccode class=\"literal\">virtqemud.conf\u003C/code> file in an editor.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tReplace or set the filters according to your requirements.\n\t\t\t\t\t\t\u003C/p>\u003Crh-table id=\"idm140237781428976\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 23.1. Debugging filter values\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 10%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 90%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>1\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\tlogs all messages generated by libvirt.\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>2\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\tlogs all non-debugging information.\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>3\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\tlogs all warning and error messages. This is the default value.\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>4\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\tlogs only error messages.\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cdiv class=\"example\" id=\"idm140237781406192\">\u003Cp class=\"title\">\u003Cstrong>Example 23.1. Sample daemon settings for logging filters\u003C/strong>\u003C/p>\u003Cdiv class=\"example-contents\">\u003Cp>\n\t\t\t\t\t\t\t\tThe following settings:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tLog all error and warning messages from the \u003Ccode class=\"literal\">remote\u003C/code>, \u003Ccode class=\"literal\">util.json\u003C/code>, and \u003Ccode class=\"literal\">rpc\u003C/code> layers\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tLog only error messages from the \u003Ccode class=\"literal\">event\u003C/code> layer.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tSave the filtered logs to \u003Ccode class=\"literal\">/var/log/libvirt/libvirt.log\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cpre class=\"screen\">\u003Cspan class=\"strong strong\">\u003Cstrong>log_filters=\"3:remote 4:event 3:util.json 3:rpc\"\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>log_outputs=\"1:file:/var/log/libvirt/libvirt.log\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tSave and exit.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tRestart the libvirt daemon.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl restart virtqemud.service\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"enabling-virtual-machine-debug-logs-during-runtime_generating-virtual-machine-debug-logs\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">23.1.3. Enabling libvirt debug logs during runtime\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tYou can modify the libvirt daemon’s runtime settings to enable debug logs and save them to an output file.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tThis is useful when restarting the libvirt daemon is not possible because restarting fixes the problem, or because there is another process, such as migration or backup, running at the same time. Modifying runtime settings is also useful if you want to try a command without editing the configuration files or restarting the daemon.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tMake sure the \u003Ccode class=\"literal\">libvirt-admin\u003C/code> package is installed.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: Back up the active set of log filters.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-admin -c virtqemud:///system daemon-log-filters &gt;&gt; virt-filters-backup\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tIt is recommended that you back up the active set of filters so that you can restore them after generating the logs. If you do not restore the filters, the messages will continue to be logged which may affect system performance.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virt-admin\u003C/code> utility to enable debugging and set the filters according to your requirements.\n\t\t\t\t\t\t\u003C/p>\u003Crh-table id=\"idm140237781382208\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 23.2. Debugging filter values\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 10%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 90%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>1\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\tlogs all messages generated by libvirt.\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>2\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\tlogs all non-debugging information.\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>3\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\tlogs all warning and error messages. This is the default value.\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>4\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\tlogs only error messages.\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cdiv class=\"example\" id=\"idm140237781359424\">\u003Cp class=\"title\">\u003Cstrong>Example 23.2. Sample virt-admin setting for logging filters\u003C/strong>\u003C/p>\u003Cdiv class=\"example-contents\">\u003Cp>\n\t\t\t\t\t\t\t\tThe following command:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tLogs all error and warning messages from the \u003Ccode class=\"literal\">remote\u003C/code>, \u003Ccode class=\"literal\">util.json\u003C/code>, and \u003Ccode class=\"literal\">rpc\u003C/code> layers\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tLogs only error messages from the \u003Ccode class=\"literal\">event\u003C/code> layer.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-admin -c virtqemud:///system daemon-log-filters \"3:remote 4:event 3:util.json 3:rpc\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virt-admin\u003C/code> utility to save the logs to a specific file or directory.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, the following command saves the log output to the \u003Ccode class=\"literal\">libvirt.log\u003C/code> file in the \u003Ccode class=\"literal\">/var/log/libvirt/\u003C/code> directory.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-admin -c virtqemud:///system daemon-log-outputs \"1:file:/var/log/libvirt/libvirt.log\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tOptional: You can also remove the filters to generate a log file that contains all VM-related information. However, it is not recommended since this file may contain a large amount of redundant information produced by libvirt’s modules.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virt-admin\u003C/code> utility to specify an empty set of filters.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virt-admin -c virtqemud:///system daemon-log-filters\u003C/strong>\u003C/span>\n  Logging filters:\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tOptional: Restore the filters to their original state using the backup file.\u003Cbr/> Perform the second step with the saved values to restore the filters.\n\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"attaching-virtual-machine-debug-logs_generating-virtual-machine-debug-logs\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">23.1.4. Attaching libvirt debug logs to support requests\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tYou may have to request additional support to diagnose and resolve virtual machine (VM) problems. Attaching the debug logs to the support request is highly recommended to ensure that the support team has access to all the information they need to provide a quick resolution of the VM-related problem.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tTo report a problem and request support, \u003Ca class=\"link\" href=\"https://access.redhat.com/support/cases/#/case/new?intcmp=hp|a|a3|case&amp;\">open a support case\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tBased on the encountered problems, attach the following logs along with your report:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tFor problems with the libvirt service, attach the \u003Ccode class=\"literal\">/var/log/libvirt/libvirt.log\u003C/code> file from the host.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tFor problems with a specific VM, attach its respective log file.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tFor example, for the \u003Cspan class=\"emphasis\">\u003Cem>testguest1\u003C/em>\u003C/span> VM, attach the \u003Ccode class=\"literal\">testguest1.log\u003C/code> file, which can be found at \u003Ccode class=\"literal\">/var/log/libvirt/qemu/testguest1.log\u003C/code>.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/2112\">How to provide log files to Red Hat Support?\u003C/a> (Red Hat Knowledgebase)\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"dumping-a-virtual-machine-core_diagnosing-virtual-machine-problems\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.2. Dumping a virtual machine core\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tTo analyze why a virtual machine (VM) crashed or malfunctioned, you can dump the VM core to a file on disk for later analysis and diagnostics.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThis section provides a brief \u003Ca class=\"link\" href=\"#how-virtual-machine-core-dumping-works_dumping-a-virtual-machine-core\" title=\"23.2.1. How virtual machine core dumping works\">introduction to core dumping\u003C/a> and explains how you can \u003Ca class=\"link\" href=\"#creating-a-virtual-machine-core-dump-file_dumping-a-virtual-machine-core\" title=\"23.2.2. Creating a virtual machine core dump file\">dump a VM core\u003C/a> to a specific file.\n\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"how-virtual-machine-core-dumping-works_dumping-a-virtual-machine-core\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">23.2.1. How virtual machine core dumping works\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tA virtual machine (VM) requires numerous running processes to work accurately and efficiently. In some cases, a running VM may terminate unexpectedly or malfunction while you are using it. Restarting the VM may cause the data to be reset or lost, which makes it difficult to diagnose the exact problem that caused the VM to crash.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIn such cases, you can use the \u003Ccode class=\"literal\">virsh dump\u003C/code> utility to save (or \u003Cspan class=\"emphasis\">\u003Cem>dump\u003C/em>\u003C/span>) the core of a VM to a file before you reboot the VM. The core dump file contains a raw physical memory image of the VM which contains detailed information about the VM. This information can be used to diagnose VM problems, either manually, or by using a tool such as the \u003Ccode class=\"literal\">crash\u003C/code> utility.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">crash\u003C/code> man page on your system\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe \u003Ca class=\"link\" href=\"https://github.com/crash-utility/crash\">\u003Ccode class=\"literal\">crash\u003C/code> Github repository\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-a-virtual-machine-core-dump-file_dumping-a-virtual-machine-core\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">23.2.2. Creating a virtual machine core dump file\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tA virtual machine (VM) core dump contains detailed information about the state of a VM at any given time. This information, which is similar to a snapshot of the VM, can help you detect problems if a VM malfunctions or shuts down suddenly.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tMake sure you have sufficient disk space to save the file. Note that the space occupied by the VM depends on the amount of RAM allocated to the VM.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">virsh dump\u003C/code> utility.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, the following command dumps the \u003Ccode class=\"literal\">lander1\u003C/code> VM’s cores, its memory and the CPU common register file to \u003Ccode class=\"literal\">gargantua.file\u003C/code> in the \u003Ccode class=\"literal\">/core/file\u003C/code> directory.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dump lander1 /core/file/gargantua.file --memory-only\u003C/strong>\u003C/span>\nDomain 'lander1' dumped to /core/file/gargantua.file\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">crash\u003C/code> utility no longer supports the default file format of the virsh dump command. To analyze a core dump file by using \u003Ccode class=\"literal\">crash\u003C/code>, you must create the file with the \u003Ccode class=\"literal\">--memory-only\u003C/code> option.\n\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\tAdditionally, you must use the \u003Ccode class=\"literal\">--memory-only\u003C/code> option when creating a core dump file to attach to a Red Hat Support Case.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Troubleshooting\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\tIf the \u003Ccode class=\"literal\">virsh dump\u003C/code> command fails with a \u003Ccode class=\"literal\">System is deadlocked on memory\u003C/code> error, ensure you are assigning sufficient memory for the core dump file. To do so, use the following \u003Ccode class=\"literal\">crashkernel\u003C/code> option value. Alternatively, do not use \u003Ccode class=\"literal\">crashkernel\u003C/code> at all, which assigns core dump memory automatically.\n\t\t\t\t\t\u003C/p>\u003C/div>\u003Cpre class=\"screen\">crashkernel=1G-4G:192M,4G-64G:256M,64G-:512M\u003C/pre>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">virsh dump --help\u003C/code> command\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">virsh\u003C/code> man page on your system\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/support/cases/#/case/new?intcmp=hp|a|a3|case&amp;\">Opening a Support Case\u003C/a>\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"backtracing-virtual-machine-processes_diagnosing-virtual-machine-problems\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.3. Backtracing virtual machine processes\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tWhen a process related to a virtual machine (VM) malfunctions, you can use the \u003Ccode class=\"literal\">gstack\u003C/code> command along with the process identifier (PID) to generate an execution stack trace of the malfunctioning process. If the process is a part of a thread group then all the threads are traced as well.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnsure that the \u003Ccode class=\"literal\">GDB\u003C/code> package is installed.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details about installing \u003Ccode class=\"literal\">GDB\u003C/code> and the available components, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_developer_toolset/10/html/user_guide/chap-gdb#sect-GDB-Install\">Installing the GNU Debugger\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tMake sure you know the PID of the processes that you want to backtrace.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou can find the PID by using the \u003Ccode class=\"literal\">pgrep\u003C/code> command followed by the name of the process. For example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>pgrep libvirt\u003C/strong>\u003C/span>\n22014\n22025\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the \u003Ccode class=\"literal\">gstack\u003C/code> utility followed by the PID of the process you wish to backtrace.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, the following command backtraces the libvirt process with the PID 22014.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>gstack 22014\u003C/strong>\u003C/span>\nThread 3 (Thread 0x7f33edaf7700 (LWP 22017)):\n#0  0x00007f33f81aef21 in poll () from /lib64/libc.so.6\n#1  0x00007f33f89059b6 in g_main_context_iterate.isra () from /lib64/libglib-2.0.so.0\n#2  0x00007f33f8905d72 in g_main_loop_run () from /lib64/libglib-2.0.so.0\n...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">gstack\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_developer_toolset/10/html/user_guide/chap-gdb\">GNU Debugger (GDB)\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv id=\"additional-resources-for-reporting-virtual-machine-problems-and-providing-logs_diagnosing-virtual-machine-problems\" class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Additional resources for reporting virtual machine problems and providing logs\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tTo request additional help and support, you can:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRaise a service request by using the \u003Cspan class=\"strong strong\">\u003Cstrong>redhat-support-tool\u003C/strong>\u003C/span> command line option, the Red Hat Portal UI, or several methods of FTP.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tTo report problems and request support, see \u003Ca class=\"link\" href=\"https://access.redhat.com/support/cases/#/case/new?intcmp=hp|a|a3|case&amp;\">Open a Support Case\u003C/a>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUpload the SOS Report and the log files when you submit a service request.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis ensures that the Red Hat support engineer has all the necessary diagnostic information for reference.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tFor more information about SOS reports, see \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/3592#command\">What is an SOS Report and how to create one in Red Hat Enterprise Linux?\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tFor information about attaching log files, see \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/2112\">How to provide files to Red Hat Support?\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_feature-support-and-limitations-in-rhel-9-virtualization_configuring-and-managing-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 24. Feature support and limitations in RHEL 9 virtualization\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tThis document provides information about feature support and restrictions in Red Hat Enterprise Linux 9 (RHEL 9) virtualization.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"how-rhel-virtualization-support-works_feature-support-and-limitations-in-rhel-9-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.1. How RHEL virtualization support works\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tA set of support limitations applies to virtualization in Red Hat Enterprise Linux 9 (RHEL 9). This means that when you use certain features or exceed a certain amount of allocated resources when using virtual machines in RHEL 9, Red Hat will not support these guests unless you have a specific subscription plan.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFeatures listed in \u003Ca class=\"link\" href=\"#recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization\" title=\"24.2. Recommended features in RHEL 9 virtualization\">Recommended features in RHEL 9 virtualization\u003C/a> have been tested and certified by Red Hat to work with the KVM hypervisor on a RHEL 9 system. Therefore, they are fully supported and recommended for use in virtualization in RHEL 9.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFeatures listed in \u003Ca class=\"link\" href=\"#unsupported-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization\" title=\"24.3. Unsupported features in RHEL 9 virtualization\">Unsupported features in RHEL 9 virtualization\u003C/a> may work, but are not supported and not intended for use in RHEL 9. Therefore, Red Hat strongly recommends not using these features in RHEL 9 with KVM.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\u003Ca class=\"link\" href=\"#resource-allocation-limits-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization\" title=\"24.4. Resource allocation limits in RHEL 9 virtualization\">Resource allocation limits in RHEL 9 virtualization\u003C/a> lists the maximum amount of specific resources supported on a KVM guest in RHEL 9. Guests that exceed these limits are not supported by Red Hat.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIn addition, unless stated otherwise, all features and solutions used by the documentation for RHEL 9 virtualization are supported. However, some of these have not been completely tested and therefore may not be fully optimized.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tMany of these limitations do not apply to other virtualization solutions provided by Red Hat, such as OpenShift Virtualization or Red Hat OpenStack Platform (RHOSP).\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.2. Recommended features in RHEL 9 virtualization\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe following features are recommended for use with the KVM hypervisor included with Red Hat Enterprise Linux 9 (RHEL 9):\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Host system architectures\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tRHEL 9 with KVM is only supported on the following host architectures:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAMD64 and Intel 64\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIBM Z - IBM z13 systems and later\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tARM 64\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tAny other hardware architectures are not supported for using RHEL 9 as a KVM virtualization host, and Red Hat highly discourages doing so.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Guest operating systems\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tRed Hat provides support with KVM virtual machines that use specific guest operating systems (OSs). For a detailed list of supported guest OSs, see the Certified Guest Operating Systems in \u003Ca class=\"link\" href=\"https://access.redhat.com/articles/973163#rhelkvm\">the Red Hat KnowledgeBase\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tNote, however, that by default, your guest OS does not use the same subscription as your host. Therefore, you must activate a separate licence or subscription for the guest OS to work properly.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIn addition, the pass-through devices that you attach to the VM must be supported by both the host OS and the guest OS.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tSimilarly, for optimal function of your deployment, Red Hat recommends that the CPU model and features that you define in the XML configuration of a VM are supported by both the host OS and the guest OS.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo view the certified CPUs and other hardware for various versions of RHEL, see the \u003Ca class=\"link\" href=\"https://catalog.redhat.com/hardware/search?type=Component|CPU%20Collection&amp;p=1\">Red Hat Ecosystem Catalog\u003C/a>.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Machine types\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tTo ensure that your VM is compatible with your host architecture and that the guest OS runs optimally, the VM must use an appropriate machine type.\n\t\t\t\t\u003C/p>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIn RHEL 9, \u003Ccode class=\"literal\">pc-i440fx-rhel7.5.0\u003C/code> and earlier machine types, which were default in earlier major versions of RHEL, are no longer supported. As a consequence, attempting to start a VM with such machine types on a RHEL 9 host fails with an \u003Ccode class=\"literal\">unsupported configuration\u003C/code> error. If you encounter this problem after upgrading your host to RHEL 9, see the \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/6999469\">Red Hat KnowledgeBase\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tWhen \u003Ca class=\"link\" href=\"#creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines\" title=\"3.1. Creating virtual machines by using the command-line interface\">creating a VM by using the command line\u003C/a>, the \u003Ccode class=\"literal\">virt-install\u003C/code> utility provides multiple methods of setting the machine type.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWhen you use the \u003Ccode class=\"literal\">--os-variant\u003C/code> option, \u003Ccode class=\"literal\">virt-install\u003C/code> automatically selects the machine type recommended for your host CPU and supported by the guest OS.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf you do not use \u003Ccode class=\"literal\">--os-variant\u003C/code> or require a different machine type, use the \u003Ccode class=\"literal\">--machine\u003C/code> option to specify the machine type explicitly.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf you specify a \u003Ccode class=\"literal\">--machine\u003C/code> value that is unsupported or not compatible with your host, \u003Ccode class=\"literal\">virt-install\u003C/code> fails and displays an error message.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThe recommended machine types for KVM virtual machines on supported architectures, and the corresponding values for the \u003Ccode class=\"literal\">--machine\u003C/code> option, are as follows. \u003Cspan class=\"emphasis\">\u003Cem>Y\u003C/em>\u003C/span> stands for the latest minor version of RHEL 9.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOn \u003Cspan class=\"strong strong\">\u003Cstrong>Intel 64 and AMD64\u003C/strong>\u003C/span> (x86_64): \u003Ccode class=\"literal\">pc-q35-rhel9.\u003Cspan class=\"emphasis\">\u003Cem>Y\u003C/em>\u003C/span>.0\u003C/code> → \u003Ccode class=\"literal\">--machine=q35\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOn \u003Cspan class=\"strong strong\">\u003Cstrong>IBM Z\u003C/strong>\u003C/span> (s390x): \u003Ccode class=\"literal\">s390-ccw-virtio-rhel9.\u003Cspan class=\"emphasis\">\u003Cem>Y\u003C/em>\u003C/span>.0\u003C/code> → \u003Ccode class=\"literal\">--machine=s390-ccw-virtio\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOn \u003Cspan class=\"strong strong\">\u003Cstrong>ARM 64\u003C/strong>\u003C/span>: \u003Ccode class=\"literal\">virt-rhel9.\u003Cspan class=\"emphasis\">\u003Cem>Y\u003C/em>\u003C/span>.0\u003C/code> → \u003Ccode class=\"literal\">--machine=virt\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tTo obtain the machine type of an existing VM:\n\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh dumpxml \u003Cspan class=\"emphasis\">\u003Cem>VM-name\u003C/em>\u003C/span> | grep machine=\u003C/strong>\u003C/span>\u003C/pre>\u003Cp>\n\t\t\t\tTo view the full list of machine types supported on your host:\n\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\"># \u003Cspan class=\"strong strong\">\u003Cstrong>/usr/libexec/qemu-kvm -M help\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#unsupported-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization\" title=\"24.3. Unsupported features in RHEL 9 virtualization\">Unsupported features in RHEL 9 virtualization\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#resource-allocation-limits-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization\" title=\"24.4. Resource allocation limits in RHEL 9 virtualization\">Resource allocation limits in RHEL 9 virtualization\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"unsupported-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.3. Unsupported features in RHEL 9 virtualization\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe following features are not supported by the KVM hypervisor included with Red Hat Enterprise Linux 9 (RHEL 9):\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tMany of these limitations may not apply to other virtualization solutions provided by Red Hat, such as OpenShift Virtualization or Red Hat OpenStack Platform (RHOSP).\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tFeatures supported by other virtualization solutions are described as such in the following paragraphs.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Host system architectures\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tRHEL 9 with KVM is not supported on any host architectures that are not listed in \u003Ca class=\"link\" href=\"#recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization\" title=\"24.2. Recommended features in RHEL 9 virtualization\">Recommended features in RHEL 9 virtualization\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Guest operating systems\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tKVM virtual machines (VMs) that use the following guest operating systems (OSs) are not supported on a RHEL 9 host:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWindows 8.1 and earlier\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWindows Server 2012 R2 and earlier\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tmacOS\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSolaris for x86 systems\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAny operating system released before 2009\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tFor a list of guest OSs supported on RHEL hosts and other virtualization solutions, see \u003Ca class=\"link\" href=\"https://access.redhat.com/articles/973163\">Certified Guest Operating Systems in Red Hat OpenStack Platform, Red Hat Virtualization, OpenShift Virtualization and Red Hat Enterprise Linux with KVM\u003C/a>.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Creating VMs in containers\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tRed Hat does not support creating KVM virtual machines in any type of container that includes the elements of the RHEL 9 hypervisor (such as the \u003Ccode class=\"literal\">QEMU\u003C/code> emulator or the \u003Ccode class=\"literal\">libvirt\u003C/code> package).\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tTo create VMs in containers, Red Hat recommends using the \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/openshift_container_platform/4.14/html/virtualization/about#about-virt\">OpenShift Virtualization\u003C/a> offering.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Specific virsh commands and options\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tNot every parameter that you can use with the \u003Ccode class=\"literal\">virsh\u003C/code> utility has been tested and certified as production-ready by Red Hat. Therefore, any \u003Ccode class=\"literal\">virsh\u003C/code> commands and options that are not explicitly recommended by Red Hat documentation may not work correctly, and Red Hat recommends not using them in your production environment.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tNotably, unsupported \u003Ccode class=\"literal\">virsh\u003C/code> commands include the following:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">virsh iface-*\u003C/code> commands, such as \u003Ccode class=\"literal\">virsh iface-start\u003C/code> and \u003Ccode class=\"literal\">virsh iface-destroy\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">virsh blkdeviotune\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">virsh snapshot-*\u003C/code> commands, such as \u003Ccode class=\"literal\">virsh snapshot-create\u003C/code> and \u003Ccode class=\"literal\">virsh snapshot-revert\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>The QEMU command line\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tQEMU is an essential component of the virtualization architecture in RHEL 9, but it is difficult to manage manually, and improper QEMU configurations might cause security vulnerabilities. Therefore, using \u003Ccode class=\"literal\">qemu-*\u003C/code> command-line utilities, such as, \u003Ccode class=\"literal\">qemu-kvm\u003C/code> is not supported by Red Hat. Instead, use \u003Cspan class=\"emphasis\">\u003Cem>libvirt\u003C/em>\u003C/span> utilities, such as \u003Ccode class=\"literal\">virt-install\u003C/code>, \u003Ccode class=\"literal\">virt-xml\u003C/code>, and supported \u003Ccode class=\"literal\">virsh\u003C/code> commands, as these orchestrate QEMU according to the best practices. However, the \u003Ccode class=\"literal\">qemu-img\u003C/code> utility is supported for \u003Ca class=\"link\" href=\"#managing-virtual-disk-images-by-using-the-cli_managing-storage-for-virtual-machines\" title=\"15.6. Managing virtual disk images by using the CLI\">management of virtual disk images\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>vCPU hot unplug\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tRemoving a virtual CPU (vCPU) from a running VM, also referred to as a vCPU hot unplug, is not supported in RHEL 9.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Memory hot unplug\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tRemoving a memory device attached to a running VM, also referred to as a memory hot unplug, is unsupported in RHEL 9.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>QEMU-side I/O throttling\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tUsing the \u003Ccode class=\"literal\">virsh blkdeviotune\u003C/code> utility to configure maximum input and output levels for operations on virtual disk, also known as QEMU-side I/O throttling, is not supported in RHEL 9.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tTo set up I/O throttling in RHEL 9, use \u003Ccode class=\"literal\">virsh blkiotune\u003C/code>. This is also known as libvirt-side I/O throttling. For instructions, see \u003Ca class=\"link\" href=\"#disk-i-o-throttling-in-virtual-machines_optimizing-virtual-machine-i-o-performance\" title=\"18.5.2. Disk I/O throttling in virtual machines\">Disk I/O throttling in virtual machines\u003C/a>.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tOther solutions:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tQEMU-side I/O throttling is also supported in RHOSP. For details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/875363\">Setting Resource Limitation on Disk\u003C/a> and the \u003Cspan class=\"strong strong\">\u003Cstrong>Use Quality-of-Service Specifications\u003C/strong>\u003C/span> section in the \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.0/html/storage_guide/index\">RHOSP Storage Guide\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIn addition, OpenShift Virtualizaton supports QEMU-side I/O throttling as well.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Storage live migration\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tMigrating a disk image of a running VM between hosts is not supported in RHEL 9.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tOther solutions:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStorage live migration is supported in RHOSP, but with some limitations. For details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.0/html/storage_guide/ch-cinder#section-volumes-advanced-migrate\">Migrate a Volume\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Internal snapshots\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tCreating and using internal snapshots for VMs is deprecated in RHEL 9, and highly discouraged for use in production environment. Instead, use external snapshots. For details, see \u003Ca class=\"link\" href=\"#support-limitations-for-virtual-machine-snapshots_creating-virtual-machine-snapshots\" title=\"13.1. Support limitations for virtual machine snapshots\">support-limitations-for-virtual-machine-snapshots_creating-virtual-machine-snapshots\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tOther solutions:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRHOSP supports live snapshots. For details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/16.0/html/director_installation_and_usage/performing-basic-overcloud-administration-tasks#importing-virtual-machines-into-the-overcloud\">Importing virtual machines into the overcloud\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tLive snapshots are also supported on OpenShift Virtualization.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>vHost Data Path Acceleration\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tOn RHEL 9 hosts, it is possible to configure vHost Data Path Acceleration (vDPA) for virtio devices, but Red Hat currently does not support this feature, and strongly discourages its use in production environments.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>vhost-user\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tRHEL 9 does not support the implementation of a user-space vHost interface.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tOther solutions:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">vhost-user\u003C/code> is supported in RHOSP, but only for \u003Ccode class=\"literal\">virtio-net\u003C/code> interfaces. For details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/3394851\">virtio-net implementation\u003C/a> and \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/10/html/network_functions_virtualization_planning_guide/ch-vhost-user-ports\">vhost user ports\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOpenShift Virtualization supports \u003Ccode class=\"literal\">vhost-user\u003C/code> as well.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>S3 and S4 system power states\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tSuspending a VM to the \u003Cspan class=\"strong strong\">\u003Cstrong>Suspend to RAM\u003C/strong>\u003C/span> (S3) or \u003Cspan class=\"strong strong\">\u003Cstrong>Suspend to disk\u003C/strong>\u003C/span> (S4) system power states is not supported. Note that these features are disabled by default, and enabling them will make your VM not supportable by Red Hat.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tNote that the S3 and S4 states are also currently not supported in any other virtualization solution provided by Red Hat.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>S3-PR on a multipathed vDisk\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tSCSI3 persistent reservation (S3-PR) on a multipathed vDisk is not supported in RHEL 9. As a consequence, Windows Cluster is not supported in RHEL 9.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>virtio-crypto\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tUsing the \u003Cspan class=\"emphasis\">\u003Cem>virtio-crypto\u003C/em>\u003C/span> device in RHEL 9 is not supported and RHEL strongly discourages its use.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tNote that \u003Cspan class=\"emphasis\">\u003Cem>virtio-crypto\u003C/em>\u003C/span> devices are also not supported in any other virtualization solution provided by Red Hat.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>virtio-multitouch-device, virtio-multitouch-pci\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tUsing the \u003Cspan class=\"emphasis\">\u003Cem>virtio-multitouch-device\u003C/em>\u003C/span> and \u003Cspan class=\"emphasis\">\u003Cem>virtio-multitouch-pci\u003C/em>\u003C/span> devices in RHEL 9 is not supported and RHEL strongly discourages their use.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Incremental live backup\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tConfiguring a VM backup that only saves VM changes since the last backup, also known as incremental live backup, is not supported in RHEL 9, and Red Hat highly discourages its use.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>net_failover\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tUsing the \u003Ccode class=\"literal\">net_failover\u003C/code> driver to set up an automated network device failover mechanism is not supported in RHEL 9.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tNote that \u003Ccode class=\"literal\">net_failover\u003C/code> is also currently not supported in any other virtualization solution provided by Red Hat.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>TCG\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tQEMU and libvirt include a dynamic translation mode using the QEMU Tiny Code Generator (TCG). This mode does not require hardware virtualization support. However, TCG is not supported by Red Hat.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tTCG-based guests can be recognized by examining its XML configuration, for example using the \u003Ccode class=\"literal\">virsh dumpxml\u003C/code> command.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe configuration file of a TCG guest contains the following line:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;domain type='qemu'&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe configuration file of a KVM guest contains the following line:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;domain type='kvm'&gt;\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>SR-IOV InfiniBand networking devices\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tAttaching InfiniBand networking devices to VMs using Single-root I/O virtualization (SR-IOV) is not supported.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization\" title=\"24.2. Recommended features in RHEL 9 virtualization\">Recommended features in RHEL 9 virtualization\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#resource-allocation-limits-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization\" title=\"24.4. Resource allocation limits in RHEL 9 virtualization\">Resource allocation limits in RHEL 9 virtualization\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"resource-allocation-limits-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.4. Resource allocation limits in RHEL 9 virtualization\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe following limits apply to virtualized resources that can be allocated to a single KVM virtual machine (VM) on a Red Hat Enterprise Linux 9 (RHEL 9) host.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tMany of these limitations do not apply to other virtualization solutions provided by Red Hat, such as OpenShift Virtualization or Red Hat OpenStack Platform (RHOSP).\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Maximum vCPUs per VM\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tFor the maximum amount of vCPUs and memory that is supported on a single VM running on a RHEL 9 host, see: \u003Ca class=\"link\" href=\"https://access.redhat.com/articles/rhel-kvm-limits\">Virtualization limits for Red Hat Enterprise Linux with KVM\u003C/a>\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>PCI devices per VM\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tRHEL 9 supports \u003Cspan class=\"strong strong\">\u003Cstrong>32\u003C/strong>\u003C/span> PCI device slots per VM bus, and \u003Cspan class=\"strong strong\">\u003Cstrong>8\u003C/strong>\u003C/span> PCI functions per device slot. This gives a theoretical maximum of 256 PCI functions per bus when multi-function capabilities are enabled in the VM, and no PCI bridges are used.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cp>\n\t\t\t\tEach PCI bridge adds a new bus, potentially enabling another 256 device addresses. However, some buses do not make all 256 device addresses available for the user; for example, the root bus has several built-in devices occupying slots.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Virtualized IDE devices\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tKVM is limited to a maximum of \u003Cspan class=\"strong strong\">\u003Cstrong>4\u003C/strong>\u003C/span> virtualized IDE devices per VM.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"supported-disk-image-formats_feature-support-and-limitations-in-rhel-9-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.5. Supported disk image formats\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tTo run a virtual machine (VM) on RHEL, you must use a disk image with a supported format. You can also convert certain unsupported disk images to a supported format.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Supported disk image formats for VMs\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tYou can use disk images that use the following formats to run VMs in RHEL:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>qcow2\u003C/strong>\u003C/span> - Provides certain additional features, such as compression.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>raw\u003C/strong>\u003C/span> - Might provide better performance.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>luks\u003C/strong>\u003C/span> - Disk images encrypted by using the Linux Unified Key Setup (LUKS) specification.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Supported disk image formats for conversion\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf required, you can convert your disk images between the \u003Ccode class=\"literal\">raw\u003C/code> and \u003Ccode class=\"literal\">qcow2\u003C/code> formats \u003Ca class=\"link\" href=\"#converting-between-virtual-disk-image-formats_managing-virtual-disk-images-by-using-the-cli\" title=\"15.6.4. Converting between virtual disk image formats\">by using the \u003Ccode class=\"literal\">qemu-img convert\u003C/code> command\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf you require converting a \u003Cspan class=\"strong strong\">\u003Cstrong>vmdk\u003C/strong>\u003C/span> disk image to a \u003Ccode class=\"literal\">raw\u003C/code> or \u003Ccode class=\"literal\">qcow2\u003C/code> format, convert the VM that uses the disk to KVM \u003Ca class=\"link\" href=\"https://access.redhat.com/articles/1351473\">by using the \u003Ccode class=\"literal\">virt-v2v\u003C/code> utility\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo convert other disk image formats to \u003Ccode class=\"literal\">raw\u003C/code> or \u003Ccode class=\"literal\">qcow2\u003C/code>, you can use \u003Ca class=\"link\" href=\"#converting-between-virtual-disk-image-formats_managing-virtual-disk-images-by-using-the-cli\" title=\"15.6.4. Converting between virtual disk image formats\">the \u003Ccode class=\"literal\">qemu-img convert\u003C/code> command\u003C/a>. For a list of formats that work with this command, see \u003Ca class=\"link\" href=\"https://qemu.weilnetz.de/doc/9.1/system/images.html#disk-image-file-formats\">the QEMU documentation\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that in most cases, converting the disk image format of a non-KVM virtual machine to \u003Ccode class=\"literal\">qcow2\u003C/code> or \u003Ccode class=\"literal\">raw\u003C/code> is not sufficient for the VM to correctly run on RHEL KVM. In addition to converting the disk image, corresponding drivers must be installed and configured in the guest operating system of the VM. For supported hypervisor conversion, use the \u003Ccode class=\"literal\">virt-v2v\u003C/code> utility.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/articles/1351473\">Converting virtual machines from other hypervisors to KVM with virt-v2v in RHEL 7, RHEL 8, and RHEL 9\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#converting-between-virtual-disk-image-formats_managing-virtual-disk-images-by-using-the-cli\" title=\"15.6.4. Converting between virtual disk image formats\">Converting between virtual disk image formats\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"how-virtualization-on-ibm-z-differs-from-amd64-and-intel64_feature-support-and-limitations-in-rhel-9-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.6. How virtualization on IBM Z differs from AMD64 and Intel 64\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tKVM virtualization in RHEL 9 on IBM Z systems differs from KVM on AMD64 and Intel 64 systems in the following:\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">PCI and USB devices\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tVirtual PCI and USB devices are not supported on IBM Z. This also means that \u003Ccode class=\"literal\">virtio-\u003Cspan class=\"emphasis\">\u003Cem>*\u003C/em>\u003C/span>-pci\u003C/code> devices are unsupported, and \u003Ccode class=\"literal\">virtio-\u003Cspan class=\"emphasis\">\u003Cem>*\u003C/em>\u003C/span>-ccw\u003C/code> devices should be used instead. For example, use \u003Ccode class=\"literal\">virtio-net-ccw\u003C/code> instead of \u003Ccode class=\"literal\">virtio-net-pci\u003C/code>.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tNote that direct attachment of PCI devices, also known as PCI passthrough, is supported.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Supported guest operating system\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tRed Hat only supports VMs hosted on IBM Z if they use RHEL 7, 8, or 9 as their guest operating system.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Device boot order\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIBM Z does not support the \u003Ccode class=\"literal\">&lt;boot dev='\u003Cspan class=\"emphasis\">\u003Cem>device\u003C/em>\u003C/span>'&gt;\u003C/code> XML configuration element. To define device boot order, use the \u003Ccode class=\"literal\">&lt;boot order='\u003Cspan class=\"emphasis\">\u003Cem>number\u003C/em>\u003C/span>'&gt;\u003C/code> element in the \u003Ccode class=\"literal\">&lt;devices&gt;\u003C/code> section of the XML.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn addition, you can select the required boot entry by using the architecture-specific \u003Ccode class=\"literal\">loadparm\u003C/code> attribute in the \u003Ccode class=\"literal\">&lt;boot&gt;\u003C/code> element. For example, the following determines that the disk should be used first in the boot sequence and if a Linux distribution is available on that disk, it will select the second boot entry:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;disk type='file' device='disk'&gt;\n  &lt;driver name='qemu' type='qcow2'/&gt;\n  &lt;source file='/path/to/qcow2'/&gt;\n  &lt;target dev='vda' bus='virtio'/&gt;\n  &lt;address type='ccw' cssid='0xfe' ssid='0x0' devno='0x0000'/&gt;\n  &lt;boot order='1' loadparm='2'/&gt;\n&lt;/disk&gt;\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tBy using \u003Ccode class=\"literal\">&lt;boot order='\u003Cspan class=\"emphasis\">\u003Cem>number\u003C/em>\u003C/span>'&gt;\u003C/code> for boot order management is also preferred on AMD64 and Intel 64 hosts.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Memory hot plug\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tAdding memory to a running VM is not possible on IBM Z. Note that removing memory from a running VM (\u003Cspan class=\"emphasis\">\u003Cem>memory hot unplug\u003C/em>\u003C/span>) is also not possible on IBM Z, as well as on AMD64 and Intel 64.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">NUMA topology\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tNon-Uniform Memory Access (NUMA) topology for CPUs is not supported by \u003Ccode class=\"literal\">libvirt\u003C/code> on IBM Z. Therefore, tuning vCPU performance by using NUMA is not possible on these systems.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">GPU devices\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#assembly_managing-gpu-devices-in-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 16. Managing GPU devices in virtual machines\">Assigning GPU devices\u003C/a> is not supported on IBM Z systems.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">vfio-ap\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tVMs on an IBM Z host can use the \u003Cspan class=\"emphasis\">\u003Cem>vfio-ap\u003C/em>\u003C/span> cryptographic device passthrough, which is not supported on any other architecture.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">vfio-ccw\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tVMs on an IBM Z host can use the \u003Cspan class=\"emphasis\">\u003Cem>vfio-ccw\u003C/em>\u003C/span> disk device passthrough, which is not supported on any other architecture.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">SMBIOS\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tSMBIOS configuration is not available on IBM Z.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Watchdog devices\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf using watchdog devices in your VM on an IBM Z host, use the \u003Ccode class=\"literal\">diag288\u003C/code> model. For example:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-xml\">&lt;devices&gt;\n  &lt;watchdog model='diag288' action='poweroff'/&gt;\n&lt;/devices&gt;\u003C/pre>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">kvm-clock\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">kvm-clock\u003C/code> service is specific to AMD64 and Intel 64 systems, and does not have to be configured for VM time management on IBM Z.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">v2v and p2v\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">virt-v2v\u003C/code> and \u003Ccode class=\"literal\">virt-p2v\u003C/code> utilities are supported only on the AMD64 and Intel 64 architecture, and are not provided on IBM Z.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Migrations\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo successfully migrate to a later host model (for example from IBM z14 to z15), or to update the hypervisor, use the \u003Ccode class=\"literal\">host-model\u003C/code> CPU mode. The \u003Ccode class=\"literal\">host-passthrough\u003C/code> and \u003Ccode class=\"literal\">maximum\u003C/code> CPU modes are not recommended, as they are generally not migration-safe.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf you want to specify an explicit CPU model in the \u003Ccode class=\"literal\">custom\u003C/code> CPU mode, follow these guidelines:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tDo not use CPU models that end with \u003Ccode class=\"literal\">-base\u003C/code>.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tDo not use the \u003Ccode class=\"literal\">qemu\u003C/code>, \u003Ccode class=\"literal\">max\u003C/code> or \u003Ccode class=\"literal\">host\u003C/code> CPU model.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo successfully migrate to an older host model (such as from z15 to z14), or to an earlier version of QEMU, KVM, or the RHEL kernel, use the CPU type of the oldest available host model without \u003Ccode class=\"literal\">-base\u003C/code> at the end.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tIf you have both the source host and the destination host running, you can instead use the \u003Ccode class=\"literal command\">virsh hypervisor-cpu-baseline\u003C/code> command on the destination host to obtain a suitable CPU model. For details, see \u003Ca class=\"link\" href=\"#verifying-host-cpu-compatibility-for-virtual-machine-migration_migrating-virtual-machines\" title=\"12.4. Verifying host CPU compatibility for virtual machine migration\">Verifying host CPU compatibility for virtual machine migration\u003C/a>.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tFor more information about supported machine types in RHEL 9, see \u003Ca class=\"link\" href=\"#recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization\" title=\"24.2. Recommended features in RHEL 9 virtualization\">Recommended features in RHEL 9 virtualization\u003C/a>.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">PXE installation and booting\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tWhen \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/interactively_installing_rhel_over_the_network/index#preparing-for-a-network-install_rhel-installer\">using PXE\u003C/a> to run a VM on IBM Z, a specific configuration is required for the \u003Ccode class=\"literal\">pxelinux.cfg/default\u003C/code> file. For example:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># pxelinux\ndefault linux\nlabel linux\nkernel kernel.img\ninitrd initrd.img\nappend ip=dhcp inst.repo=example.com/redhat/BaseOS/s390x/os/\u003C/pre>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Secure Execution\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tYou can boot a VM with a prepared secure guest image by defining \u003Ccode class=\"literal\">&lt;launchSecurity type=\"s390-pv\"/&gt;\u003C/code> in the XML configuration of the VM. This encrypts the VM’s memory to protect it from unwanted access by the hypervisor.\n\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cp>\n\t\t\t\tNote that the following features are not supported when running a VM in secure execution mode:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tDevice passthrough by using \u003Ccode class=\"literal\">vfio\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tObtaining memory information by using \u003Ccode class=\"literal\">virsh domstats\u003C/code> and \u003Ccode class=\"literal\">virsh memstat\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">memballoon\u003C/code> and \u003Ccode class=\"literal\">virtio-rng\u003C/code> virtual devices\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tMemory backing by using huge pages\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tLive and non-live VM migrations\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSaving and restoring VMs\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tVM snapshots, including memory snapshots (using the \u003Ccode class=\"literal\">--memspec\u003C/code> option)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFull memory dumps. Instead, specify the \u003Ccode class=\"literal\">--memory-only\u003C/code> option for the \u003Ccode class=\"literal\">virsh dump\u003C/code> command.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t248 or more vCPUs. The vCPU limit for secure guests is 247.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#an-overview-of-virtualization-features-support-in-rhel-9_feature-support-and-limitations-in-rhel-9-virtualization\" title=\"24.8. An overview of virtualization features support in RHEL 9\">An overview of virtualization features support across architectures\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"how-virtualization-on-arm-64-differs-from-amd64-and-intel64_feature-support-and-limitations-in-rhel-9-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.7. How virtualization on ARM 64 differs from AMD64 and Intel 64\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tKVM virtualization in RHEL 9 on ARM 64 systems (also known as AArch64) is different from KVM on AMD64 and Intel 64 systems in several aspects. These include, but are not limited to, the following:\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Guest operating systems\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tThe only guest operating system currently supported on ARM 64 virtual machines (VMs) is RHEL 9.\n\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">vCPU hot plug and hot unplug\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tAttaching a virtual CPU (vCPU) to a running VM, also referred to as a vCPU hot plug, is currently not supported on ARM 64 hosts. In addition, like on AMD64 and Intel 64 hosts, removing a vCPU from a running VM (vCPU hot unplug), is not supported on ARM 64.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">SecureBoot\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tThe SecureBoot feature is not available on ARM 64 systems.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Migration\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tMigrating VMs between ARM 64 hosts is currently not supported.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Saving and restoring VMs\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#saving-and-restoring-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 10. Saving and restoring virtual machines\">Saving and restoring\u003C/a> a VM is currently unsupported on an ARM 64 host.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Memory page sizes\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tARM 64 currently supports running VMs with 64 KB or 4 KB memory page sizes, however both the host and the guest must use the same memory page size. Configurations where host and guest have different memory page sizes are not supported.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tBy default, RHEL 9 uses a 4 KB memory page size. If you want to run a VM with a 64 KB memory page size, your host must be \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/automatically_installing_rhel/installing-kernel-64k-on-arm-using-the-command-line_rhel-installer\">using a kernel with 64 KB memory page size\u003C/a>. When creating the VM, you must install it with the \u003Ccode class=\"literal\">kernel-64k package\u003C/code>, for example by including the following parameter in the kickstart file:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-bash\">%packages\n-kernel\nkernel-64k\n%end\u003C/pre>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Huge pages\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tARM 64 hosts with 64 KB memory page size support huge memory pages with the following sizes:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t2 MB\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t512 MB\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t16 GB\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tWhen you use transparent huge pages (THP) on an ARM 64 host with 64 KB memory page size, it supports only 512 MB huge pages.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tARM 64 hosts with 4 KB memory page size support huge memory pages with the following sizes:\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t64 KB\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t2 MB\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t32 MB\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t1024 MB\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tWhen you use transparent huge pages (THP) on an ARM 64 host with 4 KB memory page size, it supports only 2 MB huge pages.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">SVE\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe ARM 64 architecture provides the Scalable Vector Expansion (SVE) feature. If the host supports the feature, using SVE in your VMs improves the speed of vector mathematics computation and string operations in these VMs.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe base-line level of SVE is enabled by default on host CPUs that support it. However, Red Hat recommends configuring each vector length explicitly. This ensures that the VM can only be launched on compatible hosts. To do so:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tVerify that your CPU has the SVE feature:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grep -m 1 Features /proc/cpuinfo | grep -w sve\u003C/strong>\u003C/span>\n\nFeatures: fp asimd evtstrm aes pmull sha1 sha2 crc32 atomics fphp asimdhp cpuid asimdrdm fcma dcpop \u003Cspan class=\"strong strong\">\u003Cstrong>sve\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIf the output of this command includes \u003Ccode class=\"literal\">sve\u003C/code> or if its exit code is 0, your CPU supports SVE.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tOpen the XML configuration of the VM you want to modify:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>virsh edit vm-name\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tEdit the \u003Ccode class=\"literal\">&lt;cpu&gt;\u003C/code> element similarly to the following:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">&lt;cpu mode='host-passthrough' check='none'&gt;\n&lt;feature policy='require' name='sve'/&gt;\n&lt;feature policy='require' name='sve128'/&gt;\n&lt;feature policy='require' name='sve256'/&gt;\n&lt;feature policy='disable' name='sve384'/&gt;\n&lt;feature policy='require' name='sve512'/&gt;\n&lt;/cpu&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThis example explicitly enables SVE vector lengths 128, 256, and 512, and explicitly disables vector length 384.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">CPU models\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tVMs on ARM 64 currently only support the \u003Ccode class=\"literal\">host-passthrough\u003C/code> CPU model.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">PXE\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tBooting in the Preboot Execution Environment (PXE) is functional but not supported, Red Hat strongly discourages using it in production environments.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf you require PXE booting, it is only possible with the \u003Ccode class=\"literal\">virtio-net-pci\u003C/code> network interface controller (NIC).\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">EDK2\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tARM 64 guests use UEFI firmware included in the \u003Ccode class=\"literal\">edk2-aarch64\u003C/code> package, which provides a similar interface as OVMF UEFI on AMD64 and Intel 64, and implements a similar set of features.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tSpecifically, \u003Ccode class=\"literal\">edk2-aarch64\u003C/code> provides a built-in UEFI shell, but does not support the following functionality:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tSecureBoot\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tManagement Mode\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">kvm-clock\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">kvm-clock\u003C/code> service does not have to be configured for time management in VMs on ARM 64.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Peripheral devices\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tARM 64 systems support a partly different set of peripheral devices than AMD64 and Intel 64 devices.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tOnly PCIe topologies are supported.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tARM 64 systems support \u003Ccode class=\"literal\">virtio\u003C/code> devices by using the \u003Ccode class=\"literal\">virtio-*-pci\u003C/code> drivers. In addition, the \u003Ccode class=\"literal\">virtio-iommu\u003C/code> and \u003Ccode class=\"literal\">virtio-input\u003C/code> devices are unsupported.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">virtio-gpu\u003C/code> driver is only supported for graphical installs.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tARM 64 systems support \u003Ccode class=\"literal\">usb-mouse\u003C/code> and \u003Ccode class=\"literal\">usb-tablet\u003C/code> devices for graphical installs only. Other USB devices, USB passthrough, or USB redirect are not supported.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tDevice assignment that uses Virtual Function I/O (VFIO) is supported only for NICs (physical and virtual functions).\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Emulated devices\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe following devices are not supported on ARM 64:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tEmulated sound devices, such as ICH9, ICH6 or AC97.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tEmulated graphics cards, such as VGA cards.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tEmulated network devices, such as \u003Ccode class=\"literal\">rtl8139\u003C/code>.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">GPU devices\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#assembly_managing-gpu-devices-in-virtual-machines_configuring-and-managing-virtualization\" title=\"Chapter 16. Managing GPU devices in virtual machines\">Assigning GPU devices\u003C/a> is currently not supported on ARM 64 systems.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Nested virtualization\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tCreating nested VMs is currently not possible on ARM 64 hosts.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">v2v and p2v\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">virt-v2v\u003C/code> and \u003Ccode class=\"literal\">virt-p2v\u003C/code> utilities are only supported on the AMD64 and Intel 64 architecture and are, therefore, not provided on ARM 64.\n\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"an-overview-of-virtualization-features-support-in-rhel-9_feature-support-and-limitations-in-rhel-9-virtualization\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.8. An overview of virtualization features support in RHEL 9\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe following tables provide comparative information about the support state of selected virtualization features in RHEL 9 across the available system architectures.\n\t\t\t\u003C/p>\u003Crh-table id=\"idm140237770578656\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 24.1. General support\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 33%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 33%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 33%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237770572896\" scope=\"col\">Intel 64 and AMD64\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237770571808\" scope=\"col\">IBM Z\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237770570720\" scope=\"col\">ARM 64\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770572896\"> \u003Cp>\n\t\t\t\t\t\t\t\tSupported\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770571808\"> \u003Cp>\n\t\t\t\t\t\t\t\tSupported\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770570720\"> \u003Cp>\n\t\t\t\t\t\t\t\tSupported\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Crh-table id=\"idm140237770563280\">\u003Ctable class=\"gt-4-cols lt-7-rows\">\u003Ccaption>Table 24.2. Device hot plug and hot unplug\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 25%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 25%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 25%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 25%; \" class=\"col_4\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237770556576\" scope=\"col\"> \u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237770555648\" scope=\"col\">Intel 64 and AMD64\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237770554560\" scope=\"col\">IBM Z\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237770553472\" scope=\"col\">ARM 64\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770556576\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>CPU hot plug\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770555648\"> \u003Cp>\n\t\t\t\t\t\t\t\tSupported\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770554560\"> \u003Cp>\n\t\t\t\t\t\t\t\tSupported\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770553472\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>UNSUPPORTED\u003C/em>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770556576\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>CPU hot unplug\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770555648\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>UNSUPPORTED\u003C/em>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770554560\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>UNSUPPORTED\u003C/em>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770553472\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>UNSUPPORTED\u003C/em>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770556576\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Memory hot plug\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770555648\"> \u003Cp>\n\t\t\t\t\t\t\t\tSupported\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770554560\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>UNSUPPORTED\u003C/em>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770553472\"> \u003Cp>\n\t\t\t\t\t\t\t\tSupported\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770556576\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Memory hot unplug\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770555648\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>UNSUPPORTED\u003C/em>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770554560\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>UNSUPPORTED\u003C/em>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770553472\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>UNSUPPORTED\u003C/em>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770556576\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Peripheral device hot plug\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770555648\"> \u003Cp>\n\t\t\t\t\t\t\t\tSupported\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770554560\"> \u003Cp>\n\t\t\t\t\t\t\t\tSupported \u003Ca href=\"#ftn.idm140237770512128\" class=\"footnote\">\u003Csup class=\"footnote\" id=\"idm140237770512128\">[a]\u003C/sup>\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770553472\"> \u003Cp>\n\t\t\t\t\t\t\t\tSupported\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770556576\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Peripheral device hot unplug\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770555648\"> \u003Cp>\n\t\t\t\t\t\t\t\tSupported\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770554560\"> \u003Cp>\n\t\t\t\t\t\t\t\tSupported \u003Ca href=\"#ftn.idm140237770501648\" class=\"footnote\">\u003Csup class=\"footnote\" id=\"idm140237770501648\">[b]\u003C/sup>\u003C/a>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770553472\"> \u003Cp>\n\t\t\t\t\t\t\t\tSupported\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003Ctbody class=\"footnotes\">\u003Ctr>\u003Ctd colspan=\"4\">\u003Cdiv id=\"ftn.idm140237770512128\" class=\"footnote\">\u003Cdiv class=\"para\">\u003Ca href=\"#idm140237770512128\" class=\"simpara\">\u003Csup class=\"simpara\">[a] \u003C/sup>\u003C/a>\n\t\t\t\t\t\t\t\t\tRequires using \u003Ccode class=\"literal\">virtio-\u003Cspan class=\"emphasis\">\u003Cem>*\u003C/em>\u003C/span>-ccw\u003C/code> devices instead of \u003Ccode class=\"literal\">virtio-\u003Cspan class=\"emphasis\">\u003Cem>*\u003C/em>\u003C/span>-pci\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/div>\u003Cdiv id=\"ftn.idm140237770501648\" class=\"footnote\">\u003Cdiv class=\"para\">\u003Ca href=\"#idm140237770501648\" class=\"simpara\">\u003Csup class=\"simpara\">[b] \u003C/sup>\u003C/a>\n\t\t\t\t\t\t\t\t\tRequires using \u003Ccode class=\"literal\">virtio-\u003Cspan class=\"emphasis\">\u003Cem>*\u003C/em>\u003C/span>-ccw\u003C/code> devices instead of \u003Ccode class=\"literal\">virtio-\u003Cspan class=\"emphasis\">\u003Cem>*\u003C/em>\u003C/span>-pci\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/div>\u003C/div>\u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Crh-table id=\"idm140237770496208\">\u003Ctable class=\"gt-4-cols lt-7-rows\">\u003Ccaption>Table 24.3. Other selected features\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 25%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 25%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 25%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 25%; \" class=\"col_4\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237770489520\" scope=\"col\"> \u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237770488592\" scope=\"col\">Intel 64 and AMD64\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237770487504\" scope=\"col\">IBM Z\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm140237770486416\" scope=\"col\">ARM 64\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770489520\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>NUMA tuning\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770488592\"> \u003Cp>\n\t\t\t\t\t\t\t\tSupported\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770487504\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>UNSUPPORTED\u003C/em>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770486416\"> \u003Cp>\n\t\t\t\t\t\t\t\tSupported\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770489520\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>SR-IOV devices\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770488592\"> \u003Cp>\n\t\t\t\t\t\t\t\tSupported\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770487504\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>UNSUPPORTED\u003C/em>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770486416\"> \u003Cp>\n\t\t\t\t\t\t\t\tSupported\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770489520\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>virt-v2v and p2v\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770488592\"> \u003Cp>\n\t\t\t\t\t\t\t\tSupported\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770487504\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>UNSUPPORTED\u003C/em>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm140237770486416\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>UNAVAILABLE\u003C/em>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cp>\n\t\t\t\tNote that some of the unsupported features are supported on other Red Hat products, such as Red Hat Virtualization and Red Hat OpenStack platform. For more information, see \u003Ca class=\"link\" href=\"#unsupported-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization\" title=\"24.3. Unsupported features in RHEL 9 virtualization\">Unsupported features in RHEL 9 virtualization\u003C/a>.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional sources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#unsupported-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization\" title=\"24.3. Unsupported features in RHEL 9 virtualization\">Unsupported features in RHEL 9 virtualization\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Cdiv>\u003Cdiv xml:lang=\"en-US\" class=\"legalnotice\" id=\"idm140237782377296\">\u003Ch2 class=\"legalnotice\">Legal Notice\u003C/h2>\u003Cdiv class=\"para\">\n\t\tCopyright \u003Cspan class=\"trademark\">\u003C!--Empty-->\u003C/span>© 2024 Red Hat, Inc.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\tThe text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license (\"CC-BY-SA\"). An explanation of CC-BY-SA is available at \u003Ca class=\"uri\" href=\"http://creativecommons.org/licenses/by-sa/3.0/\">http://creativecommons.org/licenses/by-sa/3.0/\u003C/a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\tRed Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\tRed Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\u003Cspan class=\"trademark\">Linux\u003C/span>® is the registered trademark of Linus Torvalds in the United States and other countries.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\u003Cspan class=\"trademark\">Java\u003C/span>® is a registered trademark of Oracle and/or its affiliates.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\u003Cspan class=\"trademark\">XFS\u003C/span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\u003Cspan class=\"trademark\">MySQL\u003C/span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\u003Cspan class=\"trademark\">Node.js\u003C/span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\tThe \u003Cspan class=\"trademark\">OpenStack\u003C/span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\tAll other trademarks are the property of their respective owners.\n\t\u003C/div>\u003C/div>\u003C/div>\u003C/div>\u003C/body>",[14,21,26,54,88,118,136,183,210,224,246,289,311,342,393,427,546,772,807,935,1055,1101,1132,1209,1235,1279,1317],{"title":11,"visible":15,"weight":16,"urlFragment":17,"anchor":18,"singlePageAnchor":18,"docTitle":19,"url":20},true,1,"index",null,"configuring_and_managing_virtualization","#",{"title":22,"visible":15,"weight":23,"urlFragment":24,"anchor":18,"singlePageAnchor":24,"docTitle":19,"url":25},"Providing feedback on Red Hat documentation",2,"proc_providing-feedback-on-red-hat-documentation_configuring-and-managing-virtualization","#proc_providing-feedback-on-red-hat-documentation_configuring-and-managing-virtualization",{"title":27,"visible":15,"weight":28,"urlFragment":29,"anchor":18,"singlePageAnchor":29,"sections":30,"docTitle":19,"url":53},"1. Introducing virtualization in RHEL",3,"introducing-virtualization-in-rhel_configuring-and-managing-virtualization",[31,35,39,43,48],{"title":32,"visible":15,"weight":16,"urlFragment":29,"anchor":33,"singlePageAnchor":33,"docTitle":19,"url":34},"1.1. What is virtualization?","what-is-virtualization_introducing-virtualization-in-rhel","#what-is-virtualization_introducing-virtualization-in-rhel",{"title":36,"visible":15,"weight":23,"urlFragment":29,"anchor":37,"singlePageAnchor":37,"docTitle":19,"url":38},"1.2. Advantages of virtualization","advantages-of-virtualization_introducing-virtualization-in-rhel","#advantages-of-virtualization_introducing-virtualization-in-rhel",{"title":40,"visible":15,"weight":28,"urlFragment":29,"anchor":41,"singlePageAnchor":41,"docTitle":19,"url":42},"1.3. Virtual machine components and their interaction","rhel-virtual-machine-components-and-their-interaction_introducing-virtualization-in-rhel","#rhel-virtual-machine-components-and-their-interaction_introducing-virtualization-in-rhel",{"title":44,"visible":15,"weight":45,"urlFragment":29,"anchor":46,"singlePageAnchor":46,"docTitle":19,"url":47},"1.4. Tools and interfaces for virtualization management",4,"con_tools-and-interfaces-for-virtualization-management_introducing-virtualization-in-rhel","#con_tools-and-interfaces-for-virtualization-management_introducing-virtualization-in-rhel",{"title":49,"visible":15,"weight":50,"urlFragment":29,"anchor":51,"singlePageAnchor":51,"docTitle":19,"url":52},"1.5. Red Hat virtualization solutions",5,"red-hat-virtualization-solutions_introducing-virtualization-in-rhel","#red-hat-virtualization-solutions_introducing-virtualization-in-rhel","#introducing-virtualization-in-rhel_configuring-and-managing-virtualization",{"title":55,"visible":15,"weight":45,"urlFragment":56,"anchor":18,"singlePageAnchor":56,"sections":57,"docTitle":19,"url":87},"2. Enabling virtualization","assembly_enabling-virtualization-in-rhel-9_configuring-and-managing-virtualization",[58,62,66,70],{"title":59,"visible":15,"weight":16,"urlFragment":56,"anchor":60,"singlePageAnchor":60,"docTitle":19,"url":61},"2.1. Enabling virtualization on AMD64 and Intel 64","proc_enabling-virtualization-in-rhel-9_assembly_enabling-virtualization-in-rhel-9","#proc_enabling-virtualization-in-rhel-9_assembly_enabling-virtualization-in-rhel-9",{"title":63,"visible":15,"weight":23,"urlFragment":56,"anchor":64,"singlePageAnchor":64,"docTitle":19,"url":65},"2.2. Enabling virtualization on IBM Z","enabling-virtualization-on-ibm-z_assembly_enabling-virtualization-in-rhel-9","#enabling-virtualization-on-ibm-z_assembly_enabling-virtualization-in-rhel-9",{"title":67,"visible":15,"weight":28,"urlFragment":56,"anchor":68,"singlePageAnchor":68,"docTitle":19,"url":69},"2.3. Enabling virtualization on ARM 64","enabling-virtualization-on-arm-64_assembly_enabling-virtualization-in-rhel-9","#enabling-virtualization-on-arm-64_assembly_enabling-virtualization-in-rhel-9",{"title":71,"visible":15,"weight":45,"urlFragment":56,"anchor":72,"singlePageAnchor":72,"sections":73,"docTitle":19,"url":86},"2.4. Enabling QEMU Guest Agent features on your virtual machines","enabling-qemu-guest-agent-features-on-your-virtual-machines_assembly_enabling-virtualization-in-rhel-9",[74,78,82],{"title":75,"visible":15,"weight":16,"urlFragment":56,"anchor":76,"singlePageAnchor":76,"docTitle":19,"url":77},"2.4.1. Enabling QEMU Guest Agent on Linux guests","installing-qemu-guest-agent-on-linux-guests_enabling-qemu-guest-agent-features-on-your-virtual-machines","#installing-qemu-guest-agent-on-linux-guests_enabling-qemu-guest-agent-features-on-your-virtual-machines",{"title":79,"visible":15,"weight":23,"urlFragment":56,"anchor":80,"singlePageAnchor":80,"docTitle":19,"url":81},"2.4.2. Enabling QEMU Guest Agent on Windows guests","proc_installing-qemu-guest-agent-on-windows-guests_enabling-qemu-guest-agent-features-on-your-virtual-machines","#proc_installing-qemu-guest-agent-on-windows-guests_enabling-qemu-guest-agent-features-on-your-virtual-machines",{"title":83,"visible":15,"weight":28,"urlFragment":56,"anchor":84,"singlePageAnchor":84,"docTitle":19,"url":85},"2.4.3. Virtualization features that require QEMU Guest Agent","virtualization-features-that-require-qemu-guest-agent_enabling-qemu-guest-agent-features-on-your-virtual-machines","#virtualization-features-that-require-qemu-guest-agent_enabling-qemu-guest-agent-features-on-your-virtual-machines","#enabling-qemu-guest-agent-features-on-your-virtual-machines_assembly_enabling-virtualization-in-rhel-9","#assembly_enabling-virtualization-in-rhel-9_configuring-and-managing-virtualization",{"title":89,"visible":15,"weight":50,"urlFragment":90,"anchor":18,"singlePageAnchor":90,"sections":91,"docTitle":19,"url":117},"3. Creating virtual machines","assembly_creating-virtual-machines_configuring-and-managing-virtualization",[92,96],{"title":93,"visible":15,"weight":16,"urlFragment":90,"anchor":94,"singlePageAnchor":94,"docTitle":19,"url":95},"3.1. Creating virtual machines by using the command-line interface","creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines","#creating-virtual-machines-using-the-command-line-interface_assembly_creating-virtual-machines",{"title":97,"visible":15,"weight":23,"urlFragment":90,"anchor":98,"singlePageAnchor":98,"sections":99,"docTitle":19,"url":116},"3.2. Creating virtual machines and installing guest operating systems by using the web console","creating-vms-and-installing-an-os-using-the-rhel-web-console_assembly_creating-virtual-machines",[100,104,108,112],{"title":101,"visible":15,"weight":16,"urlFragment":90,"anchor":102,"singlePageAnchor":102,"docTitle":19,"url":103},"3.2.1. Creating virtual machines by using the web console","creating-vms-using-the-rhel-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console","#creating-vms-using-the-rhel-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console",{"title":105,"visible":15,"weight":23,"urlFragment":90,"anchor":106,"singlePageAnchor":106,"docTitle":19,"url":107},"3.2.2. Creating virtual machines by importing disk images by using the web console","creating-virtual-machines-by-importing-disk-images-using-the-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console","#creating-virtual-machines-by-importing-disk-images-using-the-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console",{"title":109,"visible":15,"weight":28,"urlFragment":90,"anchor":110,"singlePageAnchor":110,"docTitle":19,"url":111},"3.2.3. Installing guest operating systems by using the web console","installing-an-os-using-the-rhel-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console","#installing-an-os-using-the-rhel-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console",{"title":113,"visible":15,"weight":45,"urlFragment":90,"anchor":114,"singlePageAnchor":114,"docTitle":19,"url":115},"3.2.4. Creating virtual machines with cloud image authentication by using the web console","proc_creating-virtual-machines-with-cloud-image-authentication-using-the-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console","#proc_creating-virtual-machines-with-cloud-image-authentication-using-the-web-console_creating-vms-and-installing-an-os-using-the-rhel-web-console","#creating-vms-and-installing-an-os-using-the-rhel-web-console_assembly_creating-virtual-machines","#assembly_creating-virtual-machines_configuring-and-managing-virtualization",{"title":119,"visible":15,"weight":120,"urlFragment":121,"anchor":18,"singlePageAnchor":121,"sections":122,"docTitle":19,"url":135},"4. Starting virtual machines",6,"assembly_starting-virtual-machines_configuring-and-managing-virtualization",[123,127,131],{"title":124,"visible":15,"weight":16,"urlFragment":121,"anchor":125,"singlePageAnchor":125,"docTitle":19,"url":126},"4.1. Starting a virtual machine by using the command-line interface","starting-a-virtual-machine-using-the-command-line-interface_assembly_starting-virtual-machines","#starting-a-virtual-machine-using-the-command-line-interface_assembly_starting-virtual-machines",{"title":128,"visible":15,"weight":23,"urlFragment":121,"anchor":129,"singlePageAnchor":129,"docTitle":19,"url":130},"4.2. Starting virtual machines by using the web console","powering-up-vms-using-the-rhel-web-console_assembly_starting-virtual-machines","#powering-up-vms-using-the-rhel-web-console_assembly_starting-virtual-machines",{"title":132,"visible":15,"weight":28,"urlFragment":121,"anchor":133,"singlePageAnchor":133,"docTitle":19,"url":134},"4.3. Starting virtual machines automatically when the host starts","starting-virtual-machines-automatically-when-the-host-starts_assembly_starting-virtual-machines","#starting-virtual-machines-automatically-when-the-host-starts_assembly_starting-virtual-machines","#assembly_starting-virtual-machines_configuring-and-managing-virtualization",{"title":137,"visible":15,"weight":138,"urlFragment":139,"anchor":18,"singlePageAnchor":139,"sections":140,"docTitle":19,"url":182},"5. Connecting to virtual machines",7,"assembly_connecting-to-virtual-machines_configuring-and-managing-virtualization",[141,162,166,170,174,178],{"title":142,"visible":15,"weight":16,"urlFragment":139,"anchor":143,"singlePageAnchor":143,"sections":144,"docTitle":19,"url":161},"5.1. Interacting with virtual machines by using the web console","viewing-vm-consoles-using-the-rhel-web-console_assembly_connecting-to-virtual-machines",[145,149,153,157],{"title":146,"visible":15,"weight":16,"urlFragment":139,"anchor":147,"singlePageAnchor":147,"docTitle":19,"url":148},"5.1.1. Viewing the virtual machine graphical console in the web console","viewing-guest-graphical-console-in-the-rhel-web-console_viewing-vm-consoles-using-the-rhel-web-console","#viewing-guest-graphical-console-in-the-rhel-web-console_viewing-vm-consoles-using-the-rhel-web-console",{"title":150,"visible":15,"weight":23,"urlFragment":139,"anchor":151,"singlePageAnchor":151,"docTitle":19,"url":152},"5.1.2. Viewing the graphical console in a remote viewer by using the web console","viewing-graphical-console-in-remote-viewer_viewing-vm-consoles-using-the-rhel-web-console","#viewing-graphical-console-in-remote-viewer_viewing-vm-consoles-using-the-rhel-web-console",{"title":154,"visible":15,"weight":28,"urlFragment":139,"anchor":155,"singlePageAnchor":155,"docTitle":19,"url":156},"5.1.3. Viewing the virtual machine serial console in the web console","viewing-vm-serial-console-in-the-rhel-web-console_viewing-vm-consoles-using-the-rhel-web-console","#viewing-vm-serial-console-in-the-rhel-web-console_viewing-vm-consoles-using-the-rhel-web-console",{"title":158,"visible":15,"weight":45,"urlFragment":139,"anchor":159,"singlePageAnchor":159,"docTitle":19,"url":160},"5.1.4. Replacing the SPICE remote display protocol with VNC in the web console","replacing-spice-virtual-device-with-vnc_viewing-vm-consoles-using-the-rhel-web-console","#replacing-spice-virtual-device-with-vnc_viewing-vm-consoles-using-the-rhel-web-console","#viewing-vm-consoles-using-the-rhel-web-console_assembly_connecting-to-virtual-machines",{"title":163,"visible":15,"weight":23,"urlFragment":139,"anchor":164,"singlePageAnchor":164,"docTitle":19,"url":165},"5.2. Opening a virtual machine graphical console by using Virt Viewer","proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines","#proc_opening-a-virtual-machine-graphical-console-using-virt-viewer_assembly_connecting-to-virtual-machines",{"title":167,"visible":15,"weight":28,"urlFragment":139,"anchor":168,"singlePageAnchor":168,"docTitle":19,"url":169},"5.3. Connecting to a virtual machine by using SSH","proc_connecting-to-a-virtual-machine-using-ssh_assembly_connecting-to-virtual-machines","#proc_connecting-to-a-virtual-machine-using-ssh_assembly_connecting-to-virtual-machines",{"title":171,"visible":15,"weight":45,"urlFragment":139,"anchor":172,"singlePageAnchor":172,"docTitle":19,"url":173},"5.4. Opening a virtual machine serial console","proc_opening-a-virtual-machine-serial-console_assembly_connecting-to-virtual-machines","#proc_opening-a-virtual-machine-serial-console_assembly_connecting-to-virtual-machines",{"title":175,"visible":15,"weight":50,"urlFragment":139,"anchor":176,"singlePageAnchor":176,"docTitle":19,"url":177},"5.5. Setting up easy access to remote virtualization hosts","setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines","#setting-up-easy-access-to-remote-virtualization-hosts_assembly_connecting-to-virtual-machines",{"title":179,"visible":15,"weight":120,"urlFragment":139,"anchor":180,"singlePageAnchor":180,"docTitle":19,"url":181},"5.6. Configuring VNC passwords","configuring-vnc-passwords_assembly_connecting-to-virtual-machines","#configuring-vnc-passwords_assembly_connecting-to-virtual-machines","#assembly_connecting-to-virtual-machines_configuring-and-managing-virtualization",{"title":184,"visible":15,"weight":185,"urlFragment":186,"anchor":18,"singlePageAnchor":186,"sections":187,"docTitle":19,"url":209},"6. Shutting down virtual machines",8,"assembly_shutting-down-virtual-machines_configuring-and-managing-virtualization",[188,192],{"title":189,"visible":15,"weight":16,"urlFragment":186,"anchor":190,"singlePageAnchor":190,"docTitle":19,"url":191},"6.1. Shutting down a virtual machine by using the command-line interface","shutting-down-a-virtual-machine-using-the-command-line-interface_assembly_shutting-down-virtual-machines","#shutting-down-a-virtual-machine-using-the-command-line-interface_assembly_shutting-down-virtual-machines",{"title":193,"visible":15,"weight":23,"urlFragment":186,"anchor":194,"singlePageAnchor":194,"sections":195,"docTitle":19,"url":208},"6.2. Shutting down and restarting virtual machines by using the web console","powering-down-and-restarting-vms-using-the-rhel-web-console_assembly_shutting-down-virtual-machines",[196,200,204],{"title":197,"visible":15,"weight":16,"urlFragment":186,"anchor":198,"singlePageAnchor":198,"docTitle":19,"url":199},"6.2.1. Shutting down virtual machines in the web console","powering-down-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console","#powering-down-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console",{"title":201,"visible":15,"weight":23,"urlFragment":186,"anchor":202,"singlePageAnchor":202,"docTitle":19,"url":203},"6.2.2. Restarting virtual machines by using the web console","restarting-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console","#restarting-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console",{"title":205,"visible":15,"weight":28,"urlFragment":186,"anchor":206,"singlePageAnchor":206,"docTitle":19,"url":207},"6.2.3. Sending non-maskable interrupts to VMs by using the web console","sending-NMIs-to-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console","#sending-NMIs-to-vms-using-the-rhel-web-console_powering-down-and-restarting-vms-using-the-rhel-web-console","#powering-down-and-restarting-vms-using-the-rhel-web-console_assembly_shutting-down-virtual-machines","#assembly_shutting-down-virtual-machines_configuring-and-managing-virtualization",{"title":211,"visible":15,"weight":212,"urlFragment":213,"anchor":18,"singlePageAnchor":213,"sections":214,"docTitle":19,"url":223},"7. Deleting virtual machines",9,"assembly_deleting-virtual-machines_configuring-and-managing-virtualization",[215,219],{"title":216,"visible":15,"weight":16,"urlFragment":213,"anchor":217,"singlePageAnchor":217,"docTitle":19,"url":218},"7.1. Deleting virtual machines by using the command-line interface","deleting-virtual-machines-using-cli_assembly_deleting-virtual-machines","#deleting-virtual-machines-using-cli_assembly_deleting-virtual-machines",{"title":220,"visible":15,"weight":23,"urlFragment":213,"anchor":221,"singlePageAnchor":221,"docTitle":19,"url":222},"7.2. Deleting virtual machines by using the web console","deleting-vms-using-the-rhel-web-console_assembly_deleting-virtual-machines","#deleting-vms-using-the-rhel-web-console_assembly_deleting-virtual-machines","#assembly_deleting-virtual-machines_configuring-and-managing-virtualization",{"title":225,"visible":15,"weight":226,"urlFragment":227,"anchor":18,"singlePageAnchor":227,"sections":228,"docTitle":19,"url":245},"8. Managing virtual machines in the web console",10,"managing-virtual-machines-in-the-web-console_configuring-and-managing-virtualization",[229,233,237,241],{"title":230,"visible":15,"weight":16,"urlFragment":227,"anchor":231,"singlePageAnchor":231,"docTitle":19,"url":232},"8.1. Overview of virtual machine management by using the web console","overview-of-virtual-machine-management-using-the-web-console_managing-virtual-machines-in-the-web-console","#overview-of-virtual-machine-management-using-the-web-console_managing-virtual-machines-in-the-web-console",{"title":234,"visible":15,"weight":23,"urlFragment":227,"anchor":235,"singlePageAnchor":235,"docTitle":19,"url":236},"8.2. Setting up the web console to manage virtual machines","setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console","#setting-up-the-rhel-web-console-to-manage-vms_managing-virtual-machines-in-the-web-console",{"title":238,"visible":15,"weight":28,"urlFragment":227,"anchor":239,"singlePageAnchor":239,"docTitle":19,"url":240},"8.3. Renaming virtual machines by using the web console","proc_renaming-virtual-machines-using-the-web-console_managing-virtual-machines-in-the-web-console","#proc_renaming-virtual-machines-using-the-web-console_managing-virtual-machines-in-the-web-console",{"title":242,"visible":15,"weight":45,"urlFragment":227,"anchor":243,"singlePageAnchor":243,"docTitle":19,"url":244},"8.4. Virtual machine management features available in the web console","virtual-machine-management-features-available-in-the-web-console_managing-virtual-machines-in-the-web-console","#virtual-machine-management-features-available-in-the-web-console_managing-virtual-machines-in-the-web-console","#managing-virtual-machines-in-the-web-console_configuring-and-managing-virtualization",{"title":247,"visible":15,"weight":248,"urlFragment":249,"anchor":18,"singlePageAnchor":249,"sections":250,"docTitle":19,"url":288},"9. Viewing information about virtual machines",11,"viewing-information-about-virtual-machines_configuring-and-managing-virtualization",[251,255,284],{"title":252,"visible":15,"weight":16,"urlFragment":249,"anchor":253,"singlePageAnchor":253,"docTitle":19,"url":254},"9.1. Viewing virtual machine information by using the command-line interface","viewing-virtual-machine-information-using-the-command-line-interface_viewing-information-about-virtual-machines","#viewing-virtual-machine-information-using-the-command-line-interface_viewing-information-about-virtual-machines",{"title":256,"visible":15,"weight":23,"urlFragment":249,"anchor":257,"singlePageAnchor":257,"sections":258,"docTitle":19,"url":283},"9.2. Viewing virtual machine information by using the web console","viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines",[259,263,267,271,275,279],{"title":260,"visible":15,"weight":16,"urlFragment":249,"anchor":261,"singlePageAnchor":261,"docTitle":19,"url":262},"9.2.1. Viewing a virtualization overview in the web console","viewing-vm-state-and-connection-information-in-the-rhel-web-console_viewing-vm-information-using-the-rhel-web-console","#viewing-vm-state-and-connection-information-in-the-rhel-web-console_viewing-vm-information-using-the-rhel-web-console",{"title":264,"visible":15,"weight":23,"urlFragment":249,"anchor":265,"singlePageAnchor":265,"docTitle":19,"url":266},"9.2.2. Viewing storage pool information by using the web console","viewing-storage-pool-information-using-the-web-console_viewing-vm-information-using-the-rhel-web-console","#viewing-storage-pool-information-using-the-web-console_viewing-vm-information-using-the-rhel-web-console",{"title":268,"visible":15,"weight":28,"urlFragment":249,"anchor":269,"singlePageAnchor":269,"docTitle":19,"url":270},"9.2.3. Viewing basic virtual machine information in the web console","viewing-basic-vm-information-in-the-rhel-web-console_viewing-vm-information-using-the-rhel-web-console","#viewing-basic-vm-information-in-the-rhel-web-console_viewing-vm-information-using-the-rhel-web-console",{"title":272,"visible":15,"weight":45,"urlFragment":249,"anchor":273,"singlePageAnchor":273,"docTitle":19,"url":274},"9.2.4. Viewing virtual machine resource usage in the web console","viewing-vm-resource-usage-in-the-rhel-web-console_viewing-vm-information-using-the-rhel-web-console","#viewing-vm-resource-usage-in-the-rhel-web-console_viewing-vm-information-using-the-rhel-web-console",{"title":276,"visible":15,"weight":50,"urlFragment":249,"anchor":277,"singlePageAnchor":277,"docTitle":19,"url":278},"9.2.5. Viewing virtual machine disk information in the web console","viewing-vm-disk-information-in-the-web-console_viewing-vm-information-using-the-rhel-web-console","#viewing-vm-disk-information-in-the-web-console_viewing-vm-information-using-the-rhel-web-console",{"title":280,"visible":15,"weight":120,"urlFragment":249,"anchor":281,"singlePageAnchor":281,"docTitle":19,"url":282},"9.2.6. Viewing and editing virtual network interface information in the web console","viewing-and-editing-virtual-network-interface-information-in-the-web-console_viewing-vm-information-using-the-rhel-web-console","#viewing-and-editing-virtual-network-interface-information-in-the-web-console_viewing-vm-information-using-the-rhel-web-console","#viewing-vm-information-using-the-rhel-web-console_viewing-information-about-virtual-machines",{"title":285,"visible":15,"weight":28,"urlFragment":249,"anchor":286,"singlePageAnchor":286,"docTitle":19,"url":287},"9.3. Sample virtual machine XML configuration","sample-virtual-machine-xml-configuration_viewing-information-about-virtual-machines","#sample-virtual-machine-xml-configuration_viewing-information-about-virtual-machines","#viewing-information-about-virtual-machines_configuring-and-managing-virtualization",{"title":290,"visible":15,"weight":291,"urlFragment":292,"anchor":18,"singlePageAnchor":292,"sections":293,"docTitle":19,"url":310},"10. Saving and restoring virtual machines",12,"saving-and-restoring-virtual-machines_configuring-and-managing-virtualization",[294,298,302,306],{"title":295,"visible":15,"weight":16,"urlFragment":292,"anchor":296,"singlePageAnchor":296,"docTitle":19,"url":297},"10.1. How saving and restoring virtual machines works","how-saving-and-restoring-vms-works_saving-and-restoring-virtual-machines","#how-saving-and-restoring-vms-works_saving-and-restoring-virtual-machines",{"title":299,"visible":15,"weight":23,"urlFragment":292,"anchor":300,"singlePageAnchor":300,"docTitle":19,"url":301},"10.2. Saving a virtual machine by using the command-line interface","saving-a-virtual-machines-using-cli_saving-and-restoring-virtual-machines","#saving-a-virtual-machines-using-cli_saving-and-restoring-virtual-machines",{"title":303,"visible":15,"weight":28,"urlFragment":292,"anchor":304,"singlePageAnchor":304,"docTitle":19,"url":305},"10.3. Starting a virtual machine by using the command-line interface","starting-a-virtual-machine-using-the-command-line-interface_saving-and-restoring-virtual-machines","#starting-a-virtual-machine-using-the-command-line-interface_saving-and-restoring-virtual-machines",{"title":307,"visible":15,"weight":45,"urlFragment":292,"anchor":308,"singlePageAnchor":308,"docTitle":19,"url":309},"10.4. Starting virtual machines by using the web console","powering-up-vms-using-the-rhel-web-console_saving-and-restoring-virtual-machines","#powering-up-vms-using-the-rhel-web-console_saving-and-restoring-virtual-machines","#saving-and-restoring-virtual-machines_configuring-and-managing-virtualization",{"title":312,"visible":15,"weight":313,"urlFragment":314,"anchor":18,"singlePageAnchor":314,"sections":315,"docTitle":19,"url":341},"11. Cloning virtual machines",13,"cloning-virtual-machines_configuring-and-managing-virtualization",[316,320,333,337],{"title":317,"visible":15,"weight":16,"urlFragment":314,"anchor":318,"singlePageAnchor":318,"docTitle":19,"url":319},"11.1. How cloning virtual machines works","how-cloning-virtual-machines-works_cloning-virtual-machines","#how-cloning-virtual-machines-works_cloning-virtual-machines",{"title":321,"visible":15,"weight":23,"urlFragment":314,"anchor":322,"singlePageAnchor":322,"sections":323,"docTitle":19,"url":332},"11.2. Creating virtual machine templates","assembly_creating-virtual-machine-templates_cloning-virtual-machines",[324,328],{"title":325,"visible":15,"weight":16,"urlFragment":314,"anchor":326,"singlePageAnchor":326,"docTitle":19,"url":327},"11.2.1. Creating a virtual machine template by using virt-sysprep","preparing-a-virtual-machine-template_assembly_creating-virtual-machine-templates","#preparing-a-virtual-machine-template_assembly_creating-virtual-machine-templates",{"title":329,"visible":15,"weight":23,"urlFragment":314,"anchor":330,"singlePageAnchor":330,"docTitle":19,"url":331},"11.2.2. Creating a virtual machine template manually","proc_creating-a-virtual-machine-template-manually_assembly_creating-virtual-machine-templates","#proc_creating-a-virtual-machine-template-manually_assembly_creating-virtual-machine-templates","#assembly_creating-virtual-machine-templates_cloning-virtual-machines",{"title":334,"visible":15,"weight":28,"urlFragment":314,"anchor":335,"singlePageAnchor":335,"docTitle":19,"url":336},"11.3. Cloning a virtual machine by using the command-line interface","cloning-a-virtual-machine-using-the-command-line-interface_cloning-virtual-machines","#cloning-a-virtual-machine-using-the-command-line-interface_cloning-virtual-machines",{"title":338,"visible":15,"weight":45,"urlFragment":314,"anchor":339,"singlePageAnchor":339,"docTitle":19,"url":340},"11.4. Cloning a virtual machine by using the web console","cloning-a-virtual-machine-using-the-web-console_cloning-virtual-machines","#cloning-a-virtual-machine-using-the-web-console_cloning-virtual-machines","#cloning-virtual-machines_configuring-and-managing-virtualization",{"title":343,"visible":15,"weight":344,"urlFragment":345,"anchor":18,"singlePageAnchor":345,"sections":346,"docTitle":19,"url":392},"12. Migrating virtual machines",14,"migrating-virtual-machines_configuring-and-managing-virtualization",[347,351,355,359,363,367,371,375,379,388],{"title":348,"visible":15,"weight":16,"urlFragment":345,"anchor":349,"singlePageAnchor":349,"docTitle":19,"url":350},"12.1. How migrating virtual machines works","how-migrating-virtual-machines-works_migrating-virtual-machines","#how-migrating-virtual-machines-works_migrating-virtual-machines",{"title":352,"visible":15,"weight":23,"urlFragment":345,"anchor":353,"singlePageAnchor":353,"docTitle":19,"url":354},"12.2. Benefits of migrating virtual machines","benefits-of-migrating-virtual-machines_migrating-virtual-machines","#benefits-of-migrating-virtual-machines_migrating-virtual-machines",{"title":356,"visible":15,"weight":28,"urlFragment":345,"anchor":357,"singlePageAnchor":357,"docTitle":19,"url":358},"12.3. Limitations for migrating virtual machines","limitations-for-migrating-virtual-machines_migrating-virtual-machines","#limitations-for-migrating-virtual-machines_migrating-virtual-machines",{"title":360,"visible":15,"weight":45,"urlFragment":345,"anchor":361,"singlePageAnchor":361,"docTitle":19,"url":362},"12.4. Verifying host CPU compatibility for virtual machine migration","verifying-host-cpu-compatibility-for-virtual-machine-migration_migrating-virtual-machines","#verifying-host-cpu-compatibility-for-virtual-machine-migration_migrating-virtual-machines",{"title":364,"visible":15,"weight":50,"urlFragment":345,"anchor":365,"singlePageAnchor":365,"docTitle":19,"url":366},"12.5. Sharing virtual machine disk images with other hosts","sharing-virtual-machine-disk-images-with-other-hosts_migrating-virtual-machines","#sharing-virtual-machine-disk-images-with-other-hosts_migrating-virtual-machines",{"title":368,"visible":15,"weight":120,"urlFragment":345,"anchor":369,"singlePageAnchor":369,"docTitle":19,"url":370},"12.6. Migrating a virtual machine by using the command-line interface","migrating-a-virtual-machine-using-the-cli_migrating-virtual-machines","#migrating-a-virtual-machine-using-the-cli_migrating-virtual-machines",{"title":372,"visible":15,"weight":138,"urlFragment":345,"anchor":373,"singlePageAnchor":373,"docTitle":19,"url":374},"12.7. Live migrating a virtual machine by using the web console","proc_live-migrating-a-virtual-machine-using-the-web-console_migrating-virtual-machines","#proc_live-migrating-a-virtual-machine-using-the-web-console_migrating-virtual-machines",{"title":376,"visible":15,"weight":185,"urlFragment":345,"anchor":377,"singlePageAnchor":377,"docTitle":19,"url":378},"12.8. Live migrating a virtual machine with an attached Mellanox virtual function","live-migrating-a-virtual-machine-with-an-attached-mellanox-virtual-function_migrating-virtual-machines","#live-migrating-a-virtual-machine-with-an-attached-mellanox-virtual-function_migrating-virtual-machines",{"title":380,"visible":15,"weight":212,"urlFragment":345,"anchor":381,"singlePageAnchor":381,"sections":382,"docTitle":19,"url":387},"12.9. Troubleshooting virtual machine migrations","troubleshooting-virtual-machine-migrations_migrating-virtual-machines",[383],{"title":384,"visible":15,"weight":16,"urlFragment":345,"anchor":385,"singlePageAnchor":385,"docTitle":19,"url":386},"12.9.1. Live migration of a VM takes a long time without completing","live_migration_of_a_vm_takes_a_long_time_without_completing","#live_migration_of_a_vm_takes_a_long_time_without_completing","#troubleshooting-virtual-machine-migrations_migrating-virtual-machines",{"title":389,"visible":15,"weight":226,"urlFragment":345,"anchor":390,"singlePageAnchor":390,"docTitle":19,"url":391},"12.10. Supported hosts for virtual machine migration","supported-hosts-for-virtual-machine-migration_migrating-virtual-machines","#supported-hosts-for-virtual-machine-migration_migrating-virtual-machines","#migrating-virtual-machines_configuring-and-managing-virtualization",{"title":394,"visible":15,"weight":395,"urlFragment":396,"anchor":18,"singlePageAnchor":396,"sections":397,"docTitle":19,"url":426},"13. Saving and restoring virtual machine state by using snapshots",15,"creating-virtual-machine-snapshots_configuring-and-managing-virtualization",[398,402,406,410,414,418,422],{"title":399,"visible":15,"weight":16,"urlFragment":396,"anchor":400,"singlePageAnchor":400,"docTitle":19,"url":401},"13.1. Support limitations for virtual machine snapshots","support-limitations-for-virtual-machine-snapshots_creating-virtual-machine-snapshots","#support-limitations-for-virtual-machine-snapshots_creating-virtual-machine-snapshots",{"title":403,"visible":15,"weight":23,"urlFragment":396,"anchor":404,"singlePageAnchor":404,"docTitle":19,"url":405},"13.2. Creating virtual machine snapshots by using the command-line interface","creating-virtual-machine-snapshots-entering-metadata-on-the-command-line_creating-virtual-machine-snapshots","#creating-virtual-machine-snapshots-entering-metadata-on-the-command-line_creating-virtual-machine-snapshots",{"title":407,"visible":15,"weight":28,"urlFragment":396,"anchor":408,"singlePageAnchor":408,"docTitle":19,"url":409},"13.3. Creating virtual machine snapshots by using the web console","creating-virtual-machine-snapshots-by-using-the-web-console_creating-virtual-machine-snapshots","#creating-virtual-machine-snapshots-by-using-the-web-console_creating-virtual-machine-snapshots",{"title":411,"visible":15,"weight":45,"urlFragment":396,"anchor":412,"singlePageAnchor":412,"docTitle":19,"url":413},"13.4. Reverting to a virtual machine snapshot by using the command-line interface","reverting-to-a-virtual-machine-snapshot-by-using-the-command-line-interface_creating-virtual-machine-snapshots","#reverting-to-a-virtual-machine-snapshot-by-using-the-command-line-interface_creating-virtual-machine-snapshots",{"title":415,"visible":15,"weight":50,"urlFragment":396,"anchor":416,"singlePageAnchor":416,"docTitle":19,"url":417},"13.5. Reverting to a virtual machine snapshot by using the web console","reverting-to-a-virtual-machine-snapshot-by-using-the-web-console_creating-virtual-machine-snapshots","#reverting-to-a-virtual-machine-snapshot-by-using-the-web-console_creating-virtual-machine-snapshots",{"title":419,"visible":15,"weight":120,"urlFragment":396,"anchor":420,"singlePageAnchor":420,"docTitle":19,"url":421},"13.6. Deleting virtual machine snapshots by using the command-line interface","deleting-virtual-machine-snapshots-by-using-the-command-line-interface_creating-virtual-machine-snapshots","#deleting-virtual-machine-snapshots-by-using-the-command-line-interface_creating-virtual-machine-snapshots",{"title":423,"visible":15,"weight":138,"urlFragment":396,"anchor":424,"singlePageAnchor":424,"docTitle":19,"url":425},"13.7. Deleting virtual machine snapshots by using the web console","deleting-virtual-machine-snapshots-by-using-the-web-console_creating-virtual-machine-snapshots","#deleting-virtual-machine-snapshots-by-using-the-web-console_creating-virtual-machine-snapshots","#creating-virtual-machine-snapshots_configuring-and-managing-virtualization",{"title":428,"visible":15,"weight":429,"urlFragment":430,"anchor":18,"singlePageAnchor":430,"sections":431,"docTitle":19,"url":545},"14. Managing virtual devices",16,"managing-virtual-devices_configuring-and-managing-virtualization",[432,436,440,457,474,487,516,533,537,541],{"title":433,"visible":15,"weight":16,"urlFragment":430,"anchor":434,"singlePageAnchor":434,"docTitle":19,"url":435},"14.1. How virtual devices work","how-virtual-devices-work_managing-virtual-devices","#how-virtual-devices-work_managing-virtual-devices",{"title":437,"visible":15,"weight":23,"urlFragment":430,"anchor":438,"singlePageAnchor":438,"docTitle":19,"url":439},"14.2. Types of virtual devices","types-of-virtual-devices_managing-virtual-devices","#types-of-virtual-devices_managing-virtual-devices",{"title":441,"visible":15,"weight":28,"urlFragment":430,"anchor":442,"singlePageAnchor":442,"sections":443,"docTitle":19,"url":456},"14.3. Managing devices attached to virtual machines by using the CLI","assembly_managing-virtual-devices-using-the-cli_managing-virtual-devices",[444,448,452],{"title":445,"visible":15,"weight":16,"urlFragment":430,"anchor":446,"singlePageAnchor":446,"docTitle":19,"url":447},"14.3.1. Attaching devices to virtual machines","attaching-devices-to-virtual-machines_assembly_managing-virtual-devices-using-the-cli","#attaching-devices-to-virtual-machines_assembly_managing-virtual-devices-using-the-cli",{"title":449,"visible":15,"weight":23,"urlFragment":430,"anchor":450,"singlePageAnchor":450,"docTitle":19,"url":451},"14.3.2. Modifying devices attached to virtual machines","modifying-devices-attached-to-virtual-machines_assembly_managing-virtual-devices-using-the-cli","#modifying-devices-attached-to-virtual-machines_assembly_managing-virtual-devices-using-the-cli",{"title":453,"visible":15,"weight":28,"urlFragment":430,"anchor":454,"singlePageAnchor":454,"docTitle":19,"url":455},"14.3.3. Removing devices from virtual machines","removing-devices-from-virtual-machines_assembly_managing-virtual-devices-using-the-cli","#removing-devices-from-virtual-machines_assembly_managing-virtual-devices-using-the-cli","#assembly_managing-virtual-devices-using-the-cli_managing-virtual-devices",{"title":458,"visible":15,"weight":45,"urlFragment":430,"anchor":459,"singlePageAnchor":459,"sections":460,"docTitle":19,"url":473},"14.4. Managing host devices by using the web console","assembly_managing-virtual-devices-using-the-web-console_managing-virtual-devices",[461,465,469],{"title":462,"visible":15,"weight":16,"urlFragment":430,"anchor":463,"singlePageAnchor":463,"docTitle":19,"url":464},"14.4.1. Viewing devices attached to virtual machines by using the web console","proc_viewing-devices-attached-to-virtual-machines-using-the-web-console_assembly_managing-virtual-devices-using-the-web-console","#proc_viewing-devices-attached-to-virtual-machines-using-the-web-console_assembly_managing-virtual-devices-using-the-web-console",{"title":466,"visible":15,"weight":23,"urlFragment":430,"anchor":467,"singlePageAnchor":467,"docTitle":19,"url":468},"14.4.2. Attaching devices to virtual machines by using the web console","proc_attaching-devices-to-virtual-machines-using-the-web-console_assembly_managing-virtual-devices-using-the-web-console","#proc_attaching-devices-to-virtual-machines-using-the-web-console_assembly_managing-virtual-devices-using-the-web-console",{"title":470,"visible":15,"weight":28,"urlFragment":430,"anchor":471,"singlePageAnchor":471,"docTitle":19,"url":472},"14.4.3. Removing devices from virtual machines by using the web console","proc_removing-devices-from-virtual-machines-using-the-web-console_assembly_managing-virtual-devices-using-the-web-console","#proc_removing-devices-from-virtual-machines-using-the-web-console_assembly_managing-virtual-devices-using-the-web-console","#assembly_managing-virtual-devices-using-the-web-console_managing-virtual-devices",{"title":475,"visible":15,"weight":50,"urlFragment":430,"anchor":476,"singlePageAnchor":476,"sections":477,"docTitle":19,"url":486},"14.5. Managing virtual USB devices","managing-virtual-usb-devices_managing-virtual-devices",[478,482],{"title":479,"visible":15,"weight":16,"urlFragment":430,"anchor":480,"singlePageAnchor":480,"docTitle":19,"url":481},"14.5.1. Attaching USB devices to virtual machines","attaching-usb-devices-to-virtual-machines_managing-virtual-usb-devices","#attaching-usb-devices-to-virtual-machines_managing-virtual-usb-devices",{"title":483,"visible":15,"weight":23,"urlFragment":430,"anchor":484,"singlePageAnchor":484,"docTitle":19,"url":485},"14.5.2. Removing USB devices from virtual machines","removing-usb-devices-from-virtual-machines_managing-virtual-usb-devices","#removing-usb-devices-from-virtual-machines_managing-virtual-usb-devices","#managing-virtual-usb-devices_managing-virtual-devices",{"title":488,"visible":15,"weight":120,"urlFragment":430,"anchor":489,"singlePageAnchor":489,"sections":490,"docTitle":19,"url":515},"14.6. Managing virtual optical drives","managing-virtual-optical-drives_managing-virtual-devices",[491,495,499,503,507,511],{"title":492,"visible":15,"weight":16,"urlFragment":430,"anchor":493,"singlePageAnchor":493,"docTitle":19,"url":494},"14.6.1. Attaching optical drives to virtual machines","attaching-optical-drives-to-virtual-machines_managing-virtual-optical-drives","#attaching-optical-drives-to-virtual-machines_managing-virtual-optical-drives",{"title":496,"visible":15,"weight":23,"urlFragment":430,"anchor":497,"singlePageAnchor":497,"docTitle":19,"url":498},"14.6.2. Adding a CD-ROM to a running virtual machine by using the web console","adding-a-cd-rom-to-a-virtual-machine_managing-virtual-optical-drives","#adding-a-cd-rom-to-a-virtual-machine_managing-virtual-optical-drives",{"title":500,"visible":15,"weight":28,"urlFragment":430,"anchor":501,"singlePageAnchor":501,"docTitle":19,"url":502},"14.6.3. Replacing ISO images in virtual optical drives","replacing-iso-images-in-virtual-optical-drives_managing-virtual-optical-drives","#replacing-iso-images-in-virtual-optical-drives_managing-virtual-optical-drives",{"title":504,"visible":15,"weight":45,"urlFragment":430,"anchor":505,"singlePageAnchor":505,"docTitle":19,"url":506},"14.6.4. Removing ISO images from virtual optical drives","removing-iso-images-from-virtual-optical-drives_managing-virtual-optical-drives","#removing-iso-images-from-virtual-optical-drives_managing-virtual-optical-drives",{"title":508,"visible":15,"weight":50,"urlFragment":430,"anchor":509,"singlePageAnchor":509,"docTitle":19,"url":510},"14.6.5. Removing optical drives from virtual machines","removing-optical-drives-from-virtual-machines_managing-virtual-optical-drives","#removing-optical-drives-from-virtual-machines_managing-virtual-optical-drives",{"title":512,"visible":15,"weight":120,"urlFragment":430,"anchor":513,"singlePageAnchor":513,"docTitle":19,"url":514},"14.6.6. Removing a CD-ROM from a running virtual machine by using the web console","removing-a-cd-rom-from-a-running-virtual-machine_managing-virtual-optical-drives","#removing-a-cd-rom-from-a-running-virtual-machine_managing-virtual-optical-drives","#managing-virtual-optical-drives_managing-virtual-devices",{"title":517,"visible":15,"weight":138,"urlFragment":430,"anchor":518,"singlePageAnchor":518,"sections":519,"docTitle":19,"url":532},"14.7. Managing SR-IOV devices","managing-sr-iov-devices_managing-virtual-devices",[520,524,528],{"title":521,"visible":15,"weight":16,"urlFragment":430,"anchor":522,"singlePageAnchor":522,"docTitle":19,"url":523},"14.7.1. What is SR-IOV?","what-is-sr-iov_managing-sr-iov-devices","#what-is-sr-iov_managing-sr-iov-devices",{"title":525,"visible":15,"weight":23,"urlFragment":430,"anchor":526,"singlePageAnchor":526,"docTitle":19,"url":527},"14.7.2. Attaching SR-IOV networking devices to virtual machines","attaching-sr-iov-networking-devices-to-virtual-machines_managing-sr-iov-devices","#attaching-sr-iov-networking-devices-to-virtual-machines_managing-sr-iov-devices",{"title":529,"visible":15,"weight":28,"urlFragment":430,"anchor":530,"singlePageAnchor":530,"docTitle":19,"url":531},"14.7.3. Supported devices for SR-IOV assignment","supported-devices-for-sr-iov-assignment-in-rhel_managing-sr-iov-devices","#supported-devices-for-sr-iov-assignment-in-rhel_managing-sr-iov-devices","#managing-sr-iov-devices_managing-virtual-devices",{"title":534,"visible":15,"weight":185,"urlFragment":430,"anchor":535,"singlePageAnchor":535,"docTitle":19,"url":536},"14.8. Attaching DASD devices to virtual machines on IBM Z","attaching-dasd-devices-to-virtual-machines-on-ibm-z_managing-virtual-devices","#attaching-dasd-devices-to-virtual-machines-on-ibm-z_managing-virtual-devices",{"title":538,"visible":15,"weight":212,"urlFragment":430,"anchor":539,"singlePageAnchor":539,"docTitle":19,"url":540},"14.9. Attaching a watchdog device to a virtual machine by using the web console","Attaching-a-watchdog-device-to-a-virtual-machine-using-the-web-console_managing-virtual-devices","#Attaching-a-watchdog-device-to-a-virtual-machine-using-the-web-console_managing-virtual-devices",{"title":542,"visible":15,"weight":226,"urlFragment":430,"anchor":543,"singlePageAnchor":543,"docTitle":19,"url":544},"14.10. Attaching PCI devices to virtual machines on IBM Z","attaching-zpci-devices-to-virtual-machines-on-ibm-z_managing-virtual-devices","#attaching-zpci-devices-to-virtual-machines-on-ibm-z_managing-virtual-devices","#managing-virtual-devices_configuring-and-managing-virtualization",{"title":547,"visible":15,"weight":548,"urlFragment":549,"anchor":18,"singlePageAnchor":549,"sections":550,"docTitle":19,"url":771},"15. Managing storage for virtual machines",17,"managing-storage-for-virtual-machines_configuring-and-managing-virtualization",[551,576,617,654,687,704,729,742,763,767],{"title":552,"visible":15,"weight":16,"urlFragment":549,"anchor":553,"singlePageAnchor":553,"sections":554,"docTitle":19,"url":575},"15.1. Understanding virtual machine storage","understanding-virtual-machine-storage_managing-storage-for-virtual-machines",[555,559,563,567,571],{"title":556,"visible":15,"weight":16,"urlFragment":549,"anchor":557,"singlePageAnchor":557,"docTitle":19,"url":558},"15.1.1. Introduction to storage pools","understanding-storage-pools_understanding-virtual-machine-storage","#understanding-storage-pools_understanding-virtual-machine-storage",{"title":560,"visible":15,"weight":23,"urlFragment":549,"anchor":561,"singlePageAnchor":561,"docTitle":19,"url":562},"15.1.2. Introduction to storage volumes","storage-volumes_understanding-virtual-machine-storage","#storage-volumes_understanding-virtual-machine-storage",{"title":564,"visible":15,"weight":28,"urlFragment":549,"anchor":565,"singlePageAnchor":565,"docTitle":19,"url":566},"15.1.3. Storage management by using libvirt","con_storage-management-using-libvirt_understanding-virtual-machine-storage","#con_storage-management-using-libvirt_understanding-virtual-machine-storage",{"title":568,"visible":15,"weight":45,"urlFragment":549,"anchor":569,"singlePageAnchor":569,"docTitle":19,"url":570},"15.1.4. Overview of storage management","con_overview-of-storage-management_understanding-virtual-machine-storage","#con_overview-of-storage-management_understanding-virtual-machine-storage",{"title":572,"visible":15,"weight":50,"urlFragment":549,"anchor":573,"singlePageAnchor":573,"docTitle":19,"url":574},"15.1.5. Supported and unsupported storage pool types","ref_supported-and-unsupported-storage-pool-types_understanding-virtual-machine-storage","#ref_supported-and-unsupported-storage-pool-types_understanding-virtual-machine-storage","#understanding-virtual-machine-storage_managing-storage-for-virtual-machines",{"title":577,"visible":15,"weight":23,"urlFragment":549,"anchor":578,"singlePageAnchor":578,"sections":579,"docTitle":19,"url":616},"15.2. Managing virtual machine storage pools by using the CLI","assembly_managing-virtual-machine-storage-pools-using-the-cli_managing-storage-for-virtual-machines",[580,584,588,592,596,600,604,608,612],{"title":581,"visible":15,"weight":16,"urlFragment":549,"anchor":582,"singlePageAnchor":582,"docTitle":19,"url":583},"15.2.1. Viewing storage pool information by using the CLI","viewing-storage-pool-information-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli","#viewing-storage-pool-information-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli",{"title":585,"visible":15,"weight":23,"urlFragment":549,"anchor":586,"singlePageAnchor":586,"docTitle":19,"url":587},"15.2.2. Creating directory-based storage pools by using the CLI","creating-directory-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli","#creating-directory-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli",{"title":589,"visible":15,"weight":28,"urlFragment":549,"anchor":590,"singlePageAnchor":590,"docTitle":19,"url":591},"15.2.3. Creating disk-based storage pools by using the CLI","creating-disk-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli","#creating-disk-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli",{"title":593,"visible":15,"weight":45,"urlFragment":549,"anchor":594,"singlePageAnchor":594,"docTitle":19,"url":595},"15.2.4. Creating filesystem-based storage pools by using the CLI","creating-filesystem-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli","#creating-filesystem-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli",{"title":597,"visible":15,"weight":50,"urlFragment":549,"anchor":598,"singlePageAnchor":598,"docTitle":19,"url":599},"15.2.5. Creating iSCSI-based storage pools by using the CLI","creating-iscsi-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli","#creating-iscsi-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli",{"title":601,"visible":15,"weight":120,"urlFragment":549,"anchor":602,"singlePageAnchor":602,"docTitle":19,"url":603},"15.2.6. Creating LVM-based storage pools by using the CLI","creating-lvm-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli","#creating-lvm-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli",{"title":605,"visible":15,"weight":138,"urlFragment":549,"anchor":606,"singlePageAnchor":606,"docTitle":19,"url":607},"15.2.7. Creating NFS-based storage pools by using the CLI","creating-nfs-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli","#creating-nfs-based-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli",{"title":609,"visible":15,"weight":185,"urlFragment":549,"anchor":610,"singlePageAnchor":610,"docTitle":19,"url":611},"15.2.8. Creating SCSI-based storage pools with vHBA devices by using the CLI","creating-scsi-based-storage-pools-with-vhba-devices-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli","#creating-scsi-based-storage-pools-with-vhba-devices-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli",{"title":613,"visible":15,"weight":212,"urlFragment":549,"anchor":614,"singlePageAnchor":614,"docTitle":19,"url":615},"15.2.9. Deleting storage pools by using the CLI","deleting-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli","#deleting-storage-pools-using-the-cli_assembly_managing-virtual-machine-storage-pools-using-the-cli","#assembly_managing-virtual-machine-storage-pools-using-the-cli_managing-storage-for-virtual-machines",{"title":618,"visible":15,"weight":28,"urlFragment":549,"anchor":619,"singlePageAnchor":619,"sections":620,"docTitle":19,"url":653},"15.3. Managing virtual machine storage pools by using the web console","assembly_managing-virtual-machine-storage-pools-using-the-web-console_managing-storage-for-virtual-machines",[621,625,629,633,637,641,645,649],{"title":622,"visible":15,"weight":16,"urlFragment":549,"anchor":623,"singlePageAnchor":623,"docTitle":19,"url":624},"15.3.1. Viewing storage pool information by using the web console","viewing-storage-pool-information-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console","#viewing-storage-pool-information-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console",{"title":626,"visible":15,"weight":23,"urlFragment":549,"anchor":627,"singlePageAnchor":627,"docTitle":19,"url":628},"15.3.2. Creating directory-based storage pools by using the web console","creating-directory-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console","#creating-directory-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console",{"title":630,"visible":15,"weight":28,"urlFragment":549,"anchor":631,"singlePageAnchor":631,"docTitle":19,"url":632},"15.3.3. Creating NFS-based storage pools by using the web console","proc_creating-nfs-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console","#proc_creating-nfs-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console",{"title":634,"visible":15,"weight":45,"urlFragment":549,"anchor":635,"singlePageAnchor":635,"docTitle":19,"url":636},"15.3.4. Creating iSCSI-based storage pools by using the web console","proc_creating-iscsi-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console","#proc_creating-iscsi-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console",{"title":638,"visible":15,"weight":50,"urlFragment":549,"anchor":639,"singlePageAnchor":639,"docTitle":19,"url":640},"15.3.5. Creating disk-based storage pools by using the web console","proc_creating-disk-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console","#proc_creating-disk-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console",{"title":642,"visible":15,"weight":120,"urlFragment":549,"anchor":643,"singlePageAnchor":643,"docTitle":19,"url":644},"15.3.6. Creating LVM-based storage pools by using the web console","proc_creating-lvm-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console","#proc_creating-lvm-based-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console",{"title":646,"visible":15,"weight":138,"urlFragment":549,"anchor":647,"singlePageAnchor":647,"docTitle":19,"url":648},"15.3.7. Removing storage pools by using the web console","removing-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console","#removing-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console",{"title":650,"visible":15,"weight":185,"urlFragment":549,"anchor":651,"singlePageAnchor":651,"docTitle":19,"url":652},"15.3.8. Deactivating storage pools by using the web console","deactivating-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console","#deactivating-storage-pools-using-the-web-console_assembly_managing-virtual-machine-storage-pools-using-the-web-console","#assembly_managing-virtual-machine-storage-pools-using-the-web-console_managing-storage-for-virtual-machines",{"title":655,"visible":15,"weight":45,"urlFragment":549,"anchor":656,"singlePageAnchor":656,"sections":657,"docTitle":19,"url":686},"15.4. Parameters for creating storage pools","assembly_parameters-for-creating-storage-pools_managing-storage-for-virtual-machines",[658,662,666,670,674,678,682],{"title":659,"visible":15,"weight":16,"urlFragment":549,"anchor":660,"singlePageAnchor":660,"docTitle":19,"url":661},"15.4.1. Directory-based storage pool parameters","directory-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools","#directory-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools",{"title":663,"visible":15,"weight":23,"urlFragment":549,"anchor":664,"singlePageAnchor":664,"docTitle":19,"url":665},"15.4.2. Disk-based storage pool parameters","disk-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools","#disk-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools",{"title":667,"visible":15,"weight":28,"urlFragment":549,"anchor":668,"singlePageAnchor":668,"docTitle":19,"url":669},"15.4.3. Filesystem-based storage pool parameters","filesystem-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools","#filesystem-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools",{"title":671,"visible":15,"weight":45,"urlFragment":549,"anchor":672,"singlePageAnchor":672,"docTitle":19,"url":673},"15.4.4. iSCSI-based storage pool parameters","iscsi-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools","#iscsi-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools",{"title":675,"visible":15,"weight":50,"urlFragment":549,"anchor":676,"singlePageAnchor":676,"docTitle":19,"url":677},"15.4.5. LVM-based storage pool parameters","lvm-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools","#lvm-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools",{"title":679,"visible":15,"weight":120,"urlFragment":549,"anchor":680,"singlePageAnchor":680,"docTitle":19,"url":681},"15.4.6. NFS-based storage pool parameters","nfs-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools","#nfs-based-storage-pool-parameters_assembly_parameters-for-creating-storage-pools",{"title":683,"visible":15,"weight":138,"urlFragment":549,"anchor":684,"singlePageAnchor":684,"docTitle":19,"url":685},"15.4.7. Parameters for SCSI-based storage pools with vHBA devices","parameters-for-scsi-based-storage-pools-with-vhba-devices_assembly_parameters-for-creating-storage-pools","#parameters-for-scsi-based-storage-pools-with-vhba-devices_assembly_parameters-for-creating-storage-pools","#assembly_parameters-for-creating-storage-pools_managing-storage-for-virtual-machines",{"title":688,"visible":15,"weight":50,"urlFragment":549,"anchor":689,"singlePageAnchor":689,"sections":690,"docTitle":19,"url":703},"15.5. Managing virtual machine storage volumes by using the CLI","assembly_managing-virtual-machine-storage-volumes-using-the-cli_managing-storage-for-virtual-machines",[691,695,699],{"title":692,"visible":15,"weight":16,"urlFragment":549,"anchor":693,"singlePageAnchor":693,"docTitle":19,"url":694},"15.5.1. Viewing storage volume information by using the CLI","viewing-storage-volume-information-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli","#viewing-storage-volume-information-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli",{"title":696,"visible":15,"weight":23,"urlFragment":549,"anchor":697,"singlePageAnchor":697,"docTitle":19,"url":698},"15.5.2. Creating and assigning storage volumes by using the CLI","creating-and-assigning-storage-volumes-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli","#creating-and-assigning-storage-volumes-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli",{"title":700,"visible":15,"weight":28,"urlFragment":549,"anchor":701,"singlePageAnchor":701,"docTitle":19,"url":702},"15.5.3. Deleting storage volumes by using the CLI","deleting-storage-volumes-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli","#deleting-storage-volumes-using-the-cli_assembly_managing-virtual-machine-storage-volumes-using-the-cli","#assembly_managing-virtual-machine-storage-volumes-using-the-cli_managing-storage-for-virtual-machines",{"title":705,"visible":15,"weight":120,"urlFragment":549,"anchor":706,"singlePageAnchor":706,"sections":707,"docTitle":19,"url":728},"15.6. Managing virtual disk images by using the CLI","managing-virtual-disk-images-by-using-the-cli_managing-storage-for-virtual-machines",[708,712,716,720,724],{"title":709,"visible":15,"weight":16,"urlFragment":549,"anchor":710,"singlePageAnchor":710,"docTitle":19,"url":711},"15.6.1. Creating a virtual disk image by using qemu-img","creating-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli","#creating-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli",{"title":713,"visible":15,"weight":23,"urlFragment":549,"anchor":714,"singlePageAnchor":714,"docTitle":19,"url":715},"15.6.2. Checking the consistency of a virtual disk image","checking-the-consistency-of-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli","#checking-the-consistency-of-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli",{"title":717,"visible":15,"weight":28,"urlFragment":549,"anchor":718,"singlePageAnchor":718,"docTitle":19,"url":719},"15.6.3. Resizing a virtual disk image","resizing-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli","#resizing-a-virtual-disk-image_managing-virtual-disk-images-by-using-the-cli",{"title":721,"visible":15,"weight":45,"urlFragment":549,"anchor":722,"singlePageAnchor":722,"docTitle":19,"url":723},"15.6.4. Converting between virtual disk image formats","converting-between-virtual-disk-image-formats_managing-virtual-disk-images-by-using-the-cli","#converting-between-virtual-disk-image-formats_managing-virtual-disk-images-by-using-the-cli",{"title":725,"visible":15,"weight":50,"urlFragment":549,"anchor":726,"singlePageAnchor":726,"docTitle":19,"url":727},"15.6.5. Supported disk image formats","supported-disk-image-formats_managing-virtual-disk-images-by-using-the-cli","#supported-disk-image-formats_managing-virtual-disk-images-by-using-the-cli","#managing-virtual-disk-images-by-using-the-cli_managing-storage-for-virtual-machines",{"title":730,"visible":15,"weight":138,"urlFragment":549,"anchor":731,"singlePageAnchor":731,"sections":732,"docTitle":19,"url":741},"15.7. Managing virtual machine storage volumes by using the web console","assembly_managing-virtual-machine-storage-volumes-using-the-web-console_managing-storage-for-virtual-machines",[733,737],{"title":734,"visible":15,"weight":16,"urlFragment":549,"anchor":735,"singlePageAnchor":735,"docTitle":19,"url":736},"15.7.1. Creating storage volumes by using the web console","creating-storage-volumes-using-the-web-console_assembly_managing-virtual-machine-storage-volumes-using-the-web-console","#creating-storage-volumes-using-the-web-console_assembly_managing-virtual-machine-storage-volumes-using-the-web-console",{"title":738,"visible":15,"weight":23,"urlFragment":549,"anchor":739,"singlePageAnchor":739,"docTitle":19,"url":740},"15.7.2. Removing storage volumes by using the web console","removing-storage-volumes-using-the-web-console_assembly_managing-virtual-machine-storage-volumes-using-the-web-console","#removing-storage-volumes-using-the-web-console_assembly_managing-virtual-machine-storage-volumes-using-the-web-console","#assembly_managing-virtual-machine-storage-volumes-using-the-web-console_managing-storage-for-virtual-machines",{"title":743,"visible":15,"weight":185,"urlFragment":549,"anchor":744,"singlePageAnchor":744,"sections":745,"docTitle":19,"url":762},"15.8. Managing virtual machine storage disks by using the web console","assembly_managing-virtual-machine-storage-disks-using-the-web-console_managing-storage-for-virtual-machines",[746,750,754,758],{"title":747,"visible":15,"weight":16,"urlFragment":549,"anchor":748,"singlePageAnchor":748,"docTitle":19,"url":749},"15.8.1. Viewing virtual machine disk information in the web console","viewing-vm-disk-information-in-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console","#viewing-vm-disk-information-in-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console",{"title":751,"visible":15,"weight":23,"urlFragment":549,"anchor":752,"singlePageAnchor":752,"docTitle":19,"url":753},"15.8.2. Adding new disks to virtual machines by using the web console","creating-and-attaching-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console","#creating-and-attaching-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console",{"title":755,"visible":15,"weight":28,"urlFragment":549,"anchor":756,"singlePageAnchor":756,"docTitle":19,"url":757},"15.8.3. Attaching existing disks to virtual machines by using the web console","attaching-existing-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console","#attaching-existing-disks-to-virtual-machines-using-the-web-console_assembly_managing-virtual-machine-storage-disks-using-the-web-console",{"title":759,"visible":15,"weight":45,"urlFragment":549,"anchor":760,"singlePageAnchor":760,"docTitle":19,"url":761},"15.8.4. Detaching disks from virtual machines by using the web console","detaching-disks-from-virtual-machines_assembly_managing-virtual-machine-storage-disks-using-the-web-console","#detaching-disks-from-virtual-machines_assembly_managing-virtual-machine-storage-disks-using-the-web-console","#assembly_managing-virtual-machine-storage-disks-using-the-web-console_managing-storage-for-virtual-machines",{"title":764,"visible":15,"weight":212,"urlFragment":549,"anchor":765,"singlePageAnchor":765,"docTitle":19,"url":766},"15.9. Securing iSCSI storage pools with libvirt secrets","securing-iscsi-storage-pools-with-libvirt-secrets_managing-storage-for-virtual-machines","#securing-iscsi-storage-pools-with-libvirt-secrets_managing-storage-for-virtual-machines",{"title":768,"visible":15,"weight":226,"urlFragment":549,"anchor":769,"singlePageAnchor":769,"docTitle":19,"url":770},"15.10. Creating vHBAs","creating-vhbas_managing-storage-for-virtual-machines","#creating-vhbas_managing-storage-for-virtual-machines","#managing-storage-for-virtual-machines_configuring-and-managing-virtualization",{"title":773,"visible":15,"weight":774,"urlFragment":775,"anchor":18,"singlePageAnchor":775,"sections":776,"docTitle":19,"url":806},"16. Managing GPU devices in virtual machines",18,"assembly_managing-gpu-devices-in-virtual-machines_configuring-and-managing-virtualization",[777,781],{"title":778,"visible":15,"weight":16,"urlFragment":775,"anchor":779,"singlePageAnchor":779,"docTitle":19,"url":780},"16.1. Assigning a GPU to a virtual machine","proc_assigning-a-gpu-to-a-virtual-machine_assembly_managing-gpu-devices-in-virtual-machines","#proc_assigning-a-gpu-to-a-virtual-machine_assembly_managing-gpu-devices-in-virtual-machines",{"title":782,"visible":15,"weight":23,"urlFragment":775,"anchor":783,"singlePageAnchor":783,"sections":784,"docTitle":19,"url":805},"16.2. Managing NVIDIA vGPU devices","assembly_managing-nvidia-vgpu-devices_assembly_managing-gpu-devices-in-virtual-machines",[785,789,793,797,801],{"title":786,"visible":15,"weight":16,"urlFragment":775,"anchor":787,"singlePageAnchor":787,"docTitle":19,"url":788},"16.2.1. Setting up NVIDIA vGPU devices","proc_setting-up-nvidia-vgpu-devices_assembly_managing-nvidia-vgpu-devices","#proc_setting-up-nvidia-vgpu-devices_assembly_managing-nvidia-vgpu-devices",{"title":790,"visible":15,"weight":23,"urlFragment":775,"anchor":791,"singlePageAnchor":791,"docTitle":19,"url":792},"16.2.2. Removing NVIDIA vGPU devices","proc_removing-nvidia-vgpu-devices_assembly_managing-nvidia-vgpu-devices","#proc_removing-nvidia-vgpu-devices_assembly_managing-nvidia-vgpu-devices",{"title":794,"visible":15,"weight":28,"urlFragment":775,"anchor":795,"singlePageAnchor":795,"docTitle":19,"url":796},"16.2.3. Obtaining NVIDIA vGPU information about your system","proc_obtaining-nvidia-vgpu-information-about-your-system_assembly_managing-nvidia-vgpu-devices","#proc_obtaining-nvidia-vgpu-information-about-your-system_assembly_managing-nvidia-vgpu-devices",{"title":798,"visible":15,"weight":45,"urlFragment":775,"anchor":799,"singlePageAnchor":799,"docTitle":19,"url":800},"16.2.4. Remote desktop streaming services for NVIDIA vGPU","ref_remote-desktop-streaming-services-for-nvidia-vgpu_assembly_managing-nvidia-vgpu-devices","#ref_remote-desktop-streaming-services-for-nvidia-vgpu_assembly_managing-nvidia-vgpu-devices",{"title":802,"visible":15,"weight":50,"urlFragment":775,"anchor":803,"singlePageAnchor":803,"docTitle":19,"url":804},"16.2.5. Additional resources","related-information-assembly_managing-nvidia-vgpu-devices","#related-information-assembly_managing-nvidia-vgpu-devices","#assembly_managing-nvidia-vgpu-devices_assembly_managing-gpu-devices-in-virtual-machines","#assembly_managing-gpu-devices-in-virtual-machines_configuring-and-managing-virtualization",{"title":808,"visible":15,"weight":809,"urlFragment":810,"anchor":18,"singlePageAnchor":810,"sections":811,"docTitle":19,"url":934},"17. Configuring virtual machine network connections",19,"configuring-virtual-machine-network-connections_configuring-and-managing-virtualization",[812,825,842,859,888,905,926,930],{"title":813,"visible":15,"weight":16,"urlFragment":810,"anchor":814,"singlePageAnchor":814,"sections":815,"docTitle":19,"url":824},"17.1. Understanding virtual networking","understanding-virtual-networking-overview_configuring-virtual-machine-network-connections",[816,820],{"title":817,"visible":15,"weight":16,"urlFragment":810,"anchor":818,"singlePageAnchor":818,"docTitle":19,"url":819},"17.1.1. How virtual networks work","how-virtual-networks-work_understanding-virtual-networking-overview","#how-virtual-networks-work_understanding-virtual-networking-overview",{"title":821,"visible":15,"weight":23,"urlFragment":810,"anchor":822,"singlePageAnchor":822,"docTitle":19,"url":823},"17.1.2. Virtual networking default configuration","virtual-networking-default-configuration_understanding-virtual-networking-overview","#virtual-networking-default-configuration_understanding-virtual-networking-overview","#understanding-virtual-networking-overview_configuring-virtual-machine-network-connections",{"title":826,"visible":15,"weight":23,"urlFragment":810,"anchor":827,"singlePageAnchor":827,"sections":828,"docTitle":19,"url":841},"17.2. Using the web console for managing virtual machine network interfaces","managing-virtual-machine-network-interfaces-using-the-web-console_configuring-virtual-machine-network-connections",[829,833,837],{"title":830,"visible":15,"weight":16,"urlFragment":810,"anchor":831,"singlePageAnchor":831,"docTitle":19,"url":832},"17.2.1. Viewing and editing virtual network interface information in the web console","viewing-and-editing-virtual-network-interface-information-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console","#viewing-and-editing-virtual-network-interface-information-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console",{"title":834,"visible":15,"weight":23,"urlFragment":810,"anchor":835,"singlePageAnchor":835,"docTitle":19,"url":836},"17.2.2. Adding and connecting virtual network interfaces in the web console","adding-and-connecting-virtual-network-interfaces-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console","#adding-and-connecting-virtual-network-interfaces-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console",{"title":838,"visible":15,"weight":28,"urlFragment":810,"anchor":839,"singlePageAnchor":839,"docTitle":19,"url":840},"17.2.3. Disconnecting and removing virtual network interfaces in the web console","disconnecting-and-removing-virtual-network-interfaces-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console","#disconnecting-and-removing-virtual-network-interfaces-in-the-web-console_managing-virtual-machine-network-interfaces-using-the-web-console","#managing-virtual-machine-network-interfaces-using-the-web-console_configuring-virtual-machine-network-connections",{"title":843,"visible":15,"weight":28,"urlFragment":810,"anchor":844,"singlePageAnchor":844,"sections":845,"docTitle":19,"url":858},"17.3. Recommended virtual machine networking configurations","recommended-virtual-machine-networking-configurations-using-the-command-line-interface_configuring-virtual-machine-network-connections",[846,850,854],{"title":847,"visible":15,"weight":16,"urlFragment":810,"anchor":848,"singlePageAnchor":848,"docTitle":19,"url":849},"17.3.1. Configuring externally visible virtual machines by using the command-line interface","configuring-externally-visible-virtual-machines-using-the-command-line-interface_recommended-virtual-machine-networking-configurations-using-the-command-line-interface","#configuring-externally-visible-virtual-machines-using-the-command-line-interface_recommended-virtual-machine-networking-configurations-using-the-command-line-interface",{"title":851,"visible":15,"weight":23,"urlFragment":810,"anchor":852,"singlePageAnchor":852,"docTitle":19,"url":853},"17.3.2. Configuring externally visible virtual machines by using the web console","configuring-externally-visible-virtual-machines-using-the-web-console_recommended-virtual-machine-networking-configurations-using-the-command-line-interface","#configuring-externally-visible-virtual-machines-using-the-web-console_recommended-virtual-machine-networking-configurations-using-the-command-line-interface",{"title":855,"visible":15,"weight":28,"urlFragment":810,"anchor":856,"singlePageAnchor":856,"docTitle":19,"url":857},"17.3.3. Replacing macvtap connections","replacing-macvtap-connections_recommended-virtual-machine-networking-configurations-using-the-command-line-interface","#replacing-macvtap-connections_recommended-virtual-machine-networking-configurations-using-the-command-line-interface","#recommended-virtual-machine-networking-configurations-using-the-command-line-interface_configuring-virtual-machine-network-connections",{"title":860,"visible":15,"weight":45,"urlFragment":810,"anchor":861,"singlePageAnchor":861,"sections":862,"docTitle":19,"url":887},"17.4. Types of virtual machine network connections","types-of-virtual-machine-network-connections_configuring-virtual-machine-network-connections",[863,867,871,875,879,883],{"title":864,"visible":15,"weight":16,"urlFragment":810,"anchor":865,"singlePageAnchor":865,"docTitle":19,"url":866},"17.4.1. Virtual networking with network address translation","virtual-networking-network-address-translation_types-of-virtual-machine-network-connections","#virtual-networking-network-address-translation_types-of-virtual-machine-network-connections",{"title":868,"visible":15,"weight":23,"urlFragment":810,"anchor":869,"singlePageAnchor":869,"docTitle":19,"url":870},"17.4.2. Virtual networking in routed mode","virtual-networking-routed-mode_types-of-virtual-machine-network-connections","#virtual-networking-routed-mode_types-of-virtual-machine-network-connections",{"title":872,"visible":15,"weight":28,"urlFragment":810,"anchor":873,"singlePageAnchor":873,"docTitle":19,"url":874},"17.4.3. Virtual networking in bridged mode","virtual-networking-bridged-mode_types-of-virtual-machine-network-connections","#virtual-networking-bridged-mode_types-of-virtual-machine-network-connections",{"title":876,"visible":15,"weight":45,"urlFragment":810,"anchor":877,"singlePageAnchor":877,"docTitle":19,"url":878},"17.4.4. Virtual networking in isolated mode","virtual-networking-isolated-mode_types-of-virtual-machine-network-connections","#virtual-networking-isolated-mode_types-of-virtual-machine-network-connections",{"title":880,"visible":15,"weight":50,"urlFragment":810,"anchor":881,"singlePageAnchor":881,"docTitle":19,"url":882},"17.4.5. Virtual networking in open mode","virtual-networking-open-mode_types-of-virtual-machine-network-connections","#virtual-networking-open-mode_types-of-virtual-machine-network-connections",{"title":884,"visible":15,"weight":120,"urlFragment":810,"anchor":885,"singlePageAnchor":885,"docTitle":19,"url":886},"17.4.6. Comparison of virtual machine connection types","comparison-of-virtual-machine-connection-types_types-of-virtual-machine-network-connections","#comparison-of-virtual-machine-connection-types_types-of-virtual-machine-network-connections","#types-of-virtual-machine-network-connections_configuring-virtual-machine-network-connections",{"title":889,"visible":15,"weight":50,"urlFragment":810,"anchor":890,"singlePageAnchor":890,"sections":891,"docTitle":19,"url":904},"17.5. Booting virtual machines from a PXE server","assembly_booting-virtual-machines-from-a-pxe-server_configuring-virtual-machine-network-connections",[892,896,900],{"title":893,"visible":15,"weight":16,"urlFragment":810,"anchor":894,"singlePageAnchor":894,"docTitle":19,"url":895},"17.5.1. Setting up a PXE boot server on a virtual network","proc_setting-up-a-pxe-boot-server-on-a-virtual-network_assembly_booting-virtual-machines-from-a-pxe-server","#proc_setting-up-a-pxe-boot-server-on-a-virtual-network_assembly_booting-virtual-machines-from-a-pxe-server",{"title":897,"visible":15,"weight":23,"urlFragment":810,"anchor":898,"singlePageAnchor":898,"docTitle":19,"url":899},"17.5.2. Booting virtual machines by using PXE and a virtual network","proc_booting-virtual-machines-using-pxe-and-a-virtual-network_assembly_booting-virtual-machines-from-a-pxe-server","#proc_booting-virtual-machines-using-pxe-and-a-virtual-network_assembly_booting-virtual-machines-from-a-pxe-server",{"title":901,"visible":15,"weight":28,"urlFragment":810,"anchor":902,"singlePageAnchor":902,"docTitle":19,"url":903},"17.5.3. Booting virtual machines by using PXE and a bridged network","proc_booting-virtual-machines-using-pxe-and-a-bridged-network_assembly_booting-virtual-machines-from-a-pxe-server","#proc_booting-virtual-machines-using-pxe-and-a-bridged-network_assembly_booting-virtual-machines-from-a-pxe-server","#assembly_booting-virtual-machines-from-a-pxe-server_configuring-virtual-machine-network-connections",{"title":906,"visible":15,"weight":120,"urlFragment":810,"anchor":907,"singlePageAnchor":907,"sections":908,"docTitle":19,"url":925},"17.6. Configuring bridges on a network bond to connect virtual machines with the network","configuring-bridges-on-a-network-bond-to-connect-virtual-machines-with-the-network_configuring-virtual-machine-network-connections",[909,913,917,921],{"title":910,"visible":15,"weight":16,"urlFragment":810,"anchor":911,"singlePageAnchor":911,"docTitle":19,"url":912},"17.6.1. Configuring network interfaces on a network bond by using nmcli","configuring-network-interfaces-on-a-network-bond-by-using-nmcli_configuring-bridges-on-a-network-bond-to-connect-vms-with-the-network","#configuring-network-interfaces-on-a-network-bond-by-using-nmcli_configuring-bridges-on-a-network-bond-to-connect-vms-with-the-network",{"title":914,"visible":15,"weight":23,"urlFragment":810,"anchor":915,"singlePageAnchor":915,"docTitle":19,"url":916},"17.6.2. Configuring a network bridge for network bonds by using nmcli","configuring-a-network-bridge-for-network-bonds-by-using-nmcli_configuring-bridges-on-a-network-bond-to-connect-vms-with-the-network","#configuring-a-network-bridge-for-network-bonds-by-using-nmcli_configuring-bridges-on-a-network-bond-to-connect-vms-with-the-network",{"title":918,"visible":15,"weight":28,"urlFragment":810,"anchor":919,"singlePageAnchor":919,"docTitle":19,"url":920},"17.6.3. Creating a virtual network in libvirt with an existing bond interface","creating-a-virtual-network-in-libvirt-with-an-existing-bond-interface_configuring-bridges-on-a-network-bond-to-connect-vms-with-the-network","#creating-a-virtual-network-in-libvirt-with-an-existing-bond-interface_configuring-bridges-on-a-network-bond-to-connect-vms-with-the-network",{"title":922,"visible":15,"weight":45,"urlFragment":810,"anchor":923,"singlePageAnchor":923,"docTitle":19,"url":924},"17.6.4. Configuring virtual machines to use a bond interface","proc_configuring-virtual-machines-to-use-a-bond-interface_configuring-bridges-on-a-network-bond-to-connect-vms-with-the-network","#proc_configuring-virtual-machines-to-use-a-bond-interface_configuring-bridges-on-a-network-bond-to-connect-vms-with-the-network","#configuring-bridges-on-a-network-bond-to-connect-virtual-machines-with-the-network_configuring-virtual-machine-network-connections",{"title":927,"visible":15,"weight":138,"urlFragment":810,"anchor":928,"singlePageAnchor":928,"docTitle":19,"url":929},"17.7. Configuring the passt user-space connection","configuring-the-passt-user-space-connection_configuring-virtual-machine-network-connections","#configuring-the-passt-user-space-connection_configuring-virtual-machine-network-connections",{"title":931,"visible":15,"weight":185,"urlFragment":810,"anchor":932,"singlePageAnchor":932,"docTitle":19,"url":933},"17.8. Additional resources","additional_resources","#additional_resources","#configuring-virtual-machine-network-connections_configuring-and-managing-virtualization",{"title":936,"visible":15,"weight":937,"urlFragment":938,"anchor":18,"singlePageAnchor":938,"sections":939,"docTitle":19,"url":1054},"18. Optimizing virtual machine performance",20,"optimizing-virtual-machine-performance-in-rhel_configuring-and-managing-virtualization",[940,944,948,961,1000,1017,1042,1046,1050],{"title":941,"visible":15,"weight":16,"urlFragment":938,"anchor":942,"singlePageAnchor":942,"docTitle":19,"url":943},"18.1. What influences virtual machine performance","what-influences-virtual-machine-performance_optimizing-virtual-machine-performance-in-rhel","#what-influences-virtual-machine-performance_optimizing-virtual-machine-performance-in-rhel",{"title":945,"visible":15,"weight":23,"urlFragment":938,"anchor":946,"singlePageAnchor":946,"docTitle":19,"url":947},"18.2. Optimizing virtual machine performance by using TuneD","optimizing-virtual-machine-performance-using-tuned_optimizing-virtual-machine-performance-in-rhel","#optimizing-virtual-machine-performance-using-tuned_optimizing-virtual-machine-performance-in-rhel",{"title":949,"visible":15,"weight":28,"urlFragment":938,"anchor":950,"singlePageAnchor":950,"sections":951,"docTitle":19,"url":960},"18.3. Optimizing libvirt daemons","assembly_optimizing-libvirt-daemons_optimizing-virtual-machine-performance-in-rhel",[952,956],{"title":953,"visible":15,"weight":16,"urlFragment":938,"anchor":954,"singlePageAnchor":954,"docTitle":19,"url":955},"18.3.1. Types of libvirt daemons","con_types-of-libvirt-daemons_assembly_optimizing-libvirt-daemons","#con_types-of-libvirt-daemons_assembly_optimizing-libvirt-daemons",{"title":957,"visible":15,"weight":23,"urlFragment":938,"anchor":958,"singlePageAnchor":958,"docTitle":19,"url":959},"18.3.2. Enabling modular libvirt daemons","proc_enabling-modular-libvirt-daemons_assembly_optimizing-libvirt-daemons","#proc_enabling-modular-libvirt-daemons_assembly_optimizing-libvirt-daemons","#assembly_optimizing-libvirt-daemons_optimizing-virtual-machine-performance-in-rhel",{"title":962,"visible":15,"weight":45,"urlFragment":938,"anchor":963,"singlePageAnchor":963,"sections":964,"docTitle":19,"url":999},"18.4. Configuring virtual machine memory","configuring-virtual-machine-ram_optimizing-virtual-machine-performance-in-rhel",[965,969,973,995],{"title":966,"visible":15,"weight":16,"urlFragment":938,"anchor":967,"singlePageAnchor":967,"docTitle":19,"url":968},"18.4.1. Adding and removing virtual machine memory by using the web console","adding-and-removing-virtual-machine-ram-using-the-web-console_configuring-virtual-machine-ram","#adding-and-removing-virtual-machine-ram-using-the-web-console_configuring-virtual-machine-ram",{"title":970,"visible":15,"weight":23,"urlFragment":938,"anchor":971,"singlePageAnchor":971,"docTitle":19,"url":972},"18.4.2. Adding and removing virtual machine memory by using the command-line interface","adding-and-removing-virtual-machine-ram-using-the-command-line-interface_configuring-virtual-machine-ram","#adding-and-removing-virtual-machine-ram-using-the-command-line-interface_configuring-virtual-machine-ram",{"title":974,"visible":15,"weight":28,"urlFragment":938,"anchor":975,"singlePageAnchor":975,"sections":976,"docTitle":19,"url":994},"18.4.3. Adding and removing virtual machine memory by using virtio-mem","adding-and-removing-virtual-machine-memory-by-using-virtio-mem_configuring-virtual-machine-ram",[977,982,986,990],{"title":978,"visible":979,"weight":16,"urlFragment":938,"anchor":980,"singlePageAnchor":980,"docTitle":19,"url":981},"18.4.3.1. Overview of virtio-mem",false,"overview-of-virtio-mem_adding-and-removing-virtual-machine-memory-by-using-virtio-mem","#overview-of-virtio-mem_adding-and-removing-virtual-machine-memory-by-using-virtio-mem",{"title":983,"visible":979,"weight":23,"urlFragment":938,"anchor":984,"singlePageAnchor":984,"docTitle":19,"url":985},"18.4.3.2. Configuring memory onlining in virtual machines","configuring-memory-onlining-in-virtual-machines_adding-and-removing-virtual-machine-memory-by-using-virtio-mem","#configuring-memory-onlining-in-virtual-machines_adding-and-removing-virtual-machine-memory-by-using-virtio-mem",{"title":987,"visible":979,"weight":28,"urlFragment":938,"anchor":988,"singlePageAnchor":988,"docTitle":19,"url":989},"18.4.3.3. Attaching a virtio-mem device to virtual machines","attaching-a-virtio-mem-device-to-virtual-machines_adding-and-removing-virtual-machine-memory-by-using-virtio-mem","#attaching-a-virtio-mem-device-to-virtual-machines_adding-and-removing-virtual-machine-memory-by-using-virtio-mem",{"title":991,"visible":979,"weight":45,"urlFragment":938,"anchor":992,"singlePageAnchor":992,"docTitle":19,"url":993},"18.4.3.4. Comparison of memory onlining configurations","comparison-of-memory-onlining-configurations_adding-and-removing-virtual-machine-memory-by-using-virtio-mem","#comparison-of-memory-onlining-configurations_adding-and-removing-virtual-machine-memory-by-using-virtio-mem","#adding-and-removing-virtual-machine-memory-by-using-virtio-mem_configuring-virtual-machine-ram",{"title":996,"visible":15,"weight":45,"urlFragment":938,"anchor":997,"singlePageAnchor":997,"docTitle":19,"url":998},"18.4.4. Additional resources","additional_resources_2","#additional_resources_2","#configuring-virtual-machine-ram_optimizing-virtual-machine-performance-in-rhel",{"title":1001,"visible":15,"weight":50,"urlFragment":938,"anchor":1002,"singlePageAnchor":1002,"sections":1003,"docTitle":19,"url":1016},"18.5. Optimizing virtual machine I/O performance","optimizing-virtual-machine-i-o-performance_optimizing-virtual-machine-performance-in-rhel",[1004,1008,1012],{"title":1005,"visible":15,"weight":16,"urlFragment":938,"anchor":1006,"singlePageAnchor":1006,"docTitle":19,"url":1007},"18.5.1. Tuning block I/O in virtual machines","tuning-block-i-o-in-virtual-machines_optimizing-virtual-machine-i-o-performance","#tuning-block-i-o-in-virtual-machines_optimizing-virtual-machine-i-o-performance",{"title":1009,"visible":15,"weight":23,"urlFragment":938,"anchor":1010,"singlePageAnchor":1010,"docTitle":19,"url":1011},"18.5.2. Disk I/O throttling in virtual machines","disk-i-o-throttling-in-virtual-machines_optimizing-virtual-machine-i-o-performance","#disk-i-o-throttling-in-virtual-machines_optimizing-virtual-machine-i-o-performance",{"title":1013,"visible":15,"weight":28,"urlFragment":938,"anchor":1014,"singlePageAnchor":1014,"docTitle":19,"url":1015},"18.5.3. Enabling multi-queue virtio-scsi","configuring-multi-queue-virtio-scsi_optimizing-virtual-machine-i-o-performance","#configuring-multi-queue-virtio-scsi_optimizing-virtual-machine-i-o-performance","#optimizing-virtual-machine-i-o-performance_optimizing-virtual-machine-performance-in-rhel",{"title":1018,"visible":15,"weight":120,"urlFragment":938,"anchor":1019,"singlePageAnchor":1019,"sections":1020,"docTitle":19,"url":1041},"18.6. Optimizing virtual machine CPU performance","optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel",[1021,1025,1029,1033,1037],{"title":1022,"visible":15,"weight":16,"urlFragment":938,"anchor":1023,"singlePageAnchor":1023,"docTitle":19,"url":1024},"18.6.1. Adding and removing virtual CPUs by using the command-line interface","adding-and-removing-virtual-cpus-using-the-command-line-interface_optimizing-virtual-machine-cpu-performance","#adding-and-removing-virtual-cpus-using-the-command-line-interface_optimizing-virtual-machine-cpu-performance",{"title":1026,"visible":15,"weight":23,"urlFragment":938,"anchor":1027,"singlePageAnchor":1027,"docTitle":19,"url":1028},"18.6.2. Managing virtual CPUs by using the web console","managing-virtual-cpus-using-the-web-console_optimizing-virtual-machine-cpu-performance","#managing-virtual-cpus-using-the-web-console_optimizing-virtual-machine-cpu-performance",{"title":1030,"visible":15,"weight":28,"urlFragment":938,"anchor":1031,"singlePageAnchor":1031,"docTitle":19,"url":1032},"18.6.3. Configuring NUMA in a virtual machine","configuring-numa-in-a-virtual-machine_optimizing-virtual-machine-cpu-performance","#configuring-numa-in-a-virtual-machine_optimizing-virtual-machine-cpu-performance",{"title":1034,"visible":15,"weight":45,"urlFragment":938,"anchor":1035,"singlePageAnchor":1035,"docTitle":19,"url":1036},"18.6.4. Sample vCPU performance tuning scenario","sample-vcpu-performance-tuning-scenario_optimizing-virtual-machine-cpu-performance","#sample-vcpu-performance-tuning-scenario_optimizing-virtual-machine-cpu-performance",{"title":1038,"visible":15,"weight":50,"urlFragment":938,"anchor":1039,"singlePageAnchor":1039,"docTitle":19,"url":1040},"18.6.5. Enabling and disabling kernel same-page merging","proc_managing-ksm_optimizing-virtual-machine-cpu-performance","#proc_managing-ksm_optimizing-virtual-machine-cpu-performance","#optimizing-virtual-machine-cpu-performance_optimizing-virtual-machine-performance-in-rhel",{"title":1043,"visible":15,"weight":138,"urlFragment":938,"anchor":1044,"singlePageAnchor":1044,"docTitle":19,"url":1045},"18.7. Optimizing virtual machine network performance","optimizing-virtual-machine-network-performance_optimizing-virtual-machine-performance-in-rhel","#optimizing-virtual-machine-network-performance_optimizing-virtual-machine-performance-in-rhel",{"title":1047,"visible":15,"weight":185,"urlFragment":938,"anchor":1048,"singlePageAnchor":1048,"docTitle":19,"url":1049},"18.8. Virtual machine performance monitoring tools","virtual-machine-performance-monitoring-tools_optimizing-virtual-machine-performance-in-rhel","#virtual-machine-performance-monitoring-tools_optimizing-virtual-machine-performance-in-rhel",{"title":1051,"visible":15,"weight":212,"urlFragment":938,"anchor":1052,"singlePageAnchor":1052,"docTitle":19,"url":1053},"18.9. Additional resources","related-information-optimizing-virtual-machine-performance-in-rhel","#related-information-optimizing-virtual-machine-performance-in-rhel","#optimizing-virtual-machine-performance-in-rhel_configuring-and-managing-virtualization",{"title":1056,"visible":15,"weight":1057,"urlFragment":1058,"anchor":18,"singlePageAnchor":1058,"sections":1059,"docTitle":19,"url":1100},"19. Securing virtual machines",21,"securing-virtual-machines-in-rhel_configuring-and-managing-virtualization",[1060,1064,1068,1072,1076,1080,1084,1088,1092,1096],{"title":1061,"visible":15,"weight":16,"urlFragment":1058,"anchor":1062,"singlePageAnchor":1062,"docTitle":19,"url":1063},"19.1. How security works in virtual machines","how-security-works-in-virtual-machines_securing-virtual-machines-in-rhel","#how-security-works-in-virtual-machines_securing-virtual-machines-in-rhel",{"title":1065,"visible":15,"weight":23,"urlFragment":1058,"anchor":1066,"singlePageAnchor":1066,"docTitle":19,"url":1067},"19.2. Best practices for securing virtual machines","best-practices-for-securing-virtual-machines_securing-virtual-machines-in-rhel","#best-practices-for-securing-virtual-machines_securing-virtual-machines-in-rhel",{"title":1069,"visible":15,"weight":28,"urlFragment":1058,"anchor":1070,"singlePageAnchor":1070,"docTitle":19,"url":1071},"19.3. Automatic features for virtual machine security","automatic-features-for-virtual-machine-security_securing-virtual-machines-in-rhel","#automatic-features-for-virtual-machine-security_securing-virtual-machines-in-rhel",{"title":1073,"visible":15,"weight":45,"urlFragment":1058,"anchor":1074,"singlePageAnchor":1074,"docTitle":19,"url":1075},"19.4. Creating a SecureBoot virtual machine","creating-a-secureboot-virtual-machine_securing-virtual-machines-in-rhel","#creating-a-secureboot-virtual-machine_securing-virtual-machines-in-rhel",{"title":1077,"visible":15,"weight":50,"urlFragment":1058,"anchor":1078,"singlePageAnchor":1078,"docTitle":19,"url":1079},"19.5. Limiting what actions are available to virtual machine users","proc_limiting-what-actions-are-available-to-virtual-machine-users_securing-virtual-machines-in-rhel","#proc_limiting-what-actions-are-available-to-virtual-machine-users_securing-virtual-machines-in-rhel",{"title":1081,"visible":15,"weight":120,"urlFragment":1058,"anchor":1082,"singlePageAnchor":1082,"docTitle":19,"url":1083},"19.6. SELinux booleans for virtualization","virtualization-booleans-in-rhel_securing-virtual-machines-in-rhel","#virtualization-booleans-in-rhel_securing-virtual-machines-in-rhel",{"title":1085,"visible":15,"weight":138,"urlFragment":1058,"anchor":1086,"singlePageAnchor":1086,"docTitle":19,"url":1087},"19.7. Setting up IBM Secure Execution on IBM Z","setting-up-secure-execution-on-ibm-z_securing-virtual-machines-in-rhel","#setting-up-secure-execution-on-ibm-z_securing-virtual-machines-in-rhel",{"title":1089,"visible":15,"weight":185,"urlFragment":1058,"anchor":1090,"singlePageAnchor":1090,"docTitle":19,"url":1091},"19.8. Attaching cryptographic coprocessors to virtual machines on IBM Z","attaching-cryptographic-coprocessors-to-virtual-machines-on-ibm-z_securing-virtual-machines-in-rhel","#attaching-cryptographic-coprocessors-to-virtual-machines-on-ibm-z_securing-virtual-machines-in-rhel",{"title":1093,"visible":15,"weight":212,"urlFragment":1058,"anchor":1094,"singlePageAnchor":1094,"docTitle":19,"url":1095},"19.9. Enabling standard hardware security on Windows virtual machines","enabling-standard-harware-security-on-windows-virtual-machines_securing-virtual-machines-in-rhel","#enabling-standard-harware-security-on-windows-virtual-machines_securing-virtual-machines-in-rhel",{"title":1097,"visible":15,"weight":226,"urlFragment":1058,"anchor":1098,"singlePageAnchor":1098,"docTitle":19,"url":1099},"19.10. Enabling enhanced hardware security on Windows virtual machines","proc_enabling-enhanced-hardware-security-on-windows-virtual-machines_securing-virtual-machines-in-rhel","#proc_enabling-enhanced-hardware-security-on-windows-virtual-machines_securing-virtual-machines-in-rhel","#securing-virtual-machines-in-rhel_configuring-and-managing-virtualization",{"title":1102,"visible":15,"weight":1103,"urlFragment":1104,"anchor":18,"singlePageAnchor":1104,"sections":1105,"docTitle":19,"url":1131},"20. Sharing files between the host and its virtual machines",22,"sharing-files-between-the-host-and-its-virtual-machines_configuring-and-managing-virtualization",[1106,1110],{"title":1107,"visible":15,"weight":16,"urlFragment":1104,"anchor":1108,"singlePageAnchor":1108,"docTitle":19,"url":1109},"20.1. Sharing files between the host and its virtual machines by using NFS","sharing-files-between-the-host-and-its-virtual-machines-using-NFS_sharing-files-between-the-host-and-its-virtual-machines","#sharing-files-between-the-host-and-its-virtual-machines-using-NFS_sharing-files-between-the-host-and-its-virtual-machines",{"title":1111,"visible":15,"weight":23,"urlFragment":1104,"anchor":1112,"singlePageAnchor":1112,"sections":1113,"docTitle":19,"url":1130},"20.2. Sharing files between the host and its virtual machines by using virtiofs","sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs_sharing-files-between-the-host-and-its-virtual-machines",[1114,1118,1122,1126],{"title":1115,"visible":15,"weight":16,"urlFragment":1104,"anchor":1116,"singlePageAnchor":1116,"docTitle":19,"url":1117},"20.2.1. Sharing files between the host and its virtual machines by using virtiofs","sharing-files-between-the-host-and-its-virtual-machines-using-virtiofs_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs","#sharing-files-between-the-host-and-its-virtual-machines-using-virtiofs_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs",{"title":1119,"visible":15,"weight":23,"urlFragment":1104,"anchor":1120,"singlePageAnchor":1120,"docTitle":19,"url":1121},"20.2.2. Sharing files between the host and Windows virtual machines by using virtiofs","sharing-files-between-the-host-and-windows-virtual-machines_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs","#sharing-files-between-the-host-and-windows-virtual-machines_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs",{"title":1123,"visible":15,"weight":28,"urlFragment":1104,"anchor":1124,"singlePageAnchor":1124,"docTitle":19,"url":1125},"20.2.3. Sharing files between the host and its virtual machines by using virtiofs in the web console","proc_using-the-web-console-to-share-files-between-the-host-and-its-virtual-machines-using-virtiofs_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs","#proc_using-the-web-console-to-share-files-between-the-host-and-its-virtual-machines-using-virtiofs_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs",{"title":1127,"visible":15,"weight":45,"urlFragment":1104,"anchor":1128,"singlePageAnchor":1128,"docTitle":19,"url":1129},"20.2.4. Using the web console to remove shared files between the host and its virtual machines by using virtiofs","proc_using-the-web-console-to-unshare-files-between-the-host-and-its-virtual-machines-using-virtiofs_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs","#proc_using-the-web-console-to-unshare-files-between-the-host-and-its-virtual-machines-using-virtiofs_sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs","#sharing-files-between-the-host-and-its-virtual-machines-using-virtio-fs_sharing-files-between-the-host-and-its-virtual-machines","#sharing-files-between-the-host-and-its-virtual-machines_configuring-and-managing-virtualization",{"title":1133,"visible":15,"weight":1134,"urlFragment":1135,"anchor":18,"singlePageAnchor":1135,"sections":1136,"docTitle":19,"url":1208},"21. Installing and managing Windows virtual machines",23,"installing-and-managing-windows-virtual-machines-on-rhel_configuring-and-managing-virtualization",[1137,1141,1196,1200,1204],{"title":1138,"visible":15,"weight":16,"urlFragment":1135,"anchor":1139,"singlePageAnchor":1139,"docTitle":19,"url":1140},"21.1. Installing Windows virtual machines","installing-windows-virtual-machines-on-rhel_installing-and-managing-windows-virtual-machines-on-rhel","#installing-windows-virtual-machines-on-rhel_installing-and-managing-windows-virtual-machines-on-rhel",{"title":1142,"visible":15,"weight":23,"urlFragment":1135,"anchor":1143,"singlePageAnchor":1143,"sections":1144,"docTitle":19,"url":1195},"21.2. Optimizing Windows virtual machines","optimizing-windows-virtual-machines-on-rhel_installing-and-managing-windows-virtual-machines-on-rhel",[1145,1170,1183,1187,1191],{"title":1146,"visible":15,"weight":16,"urlFragment":1135,"anchor":1147,"singlePageAnchor":1147,"sections":1148,"docTitle":19,"url":1169},"21.2.1. Installing KVM paravirtualized drivers for Windows virtual machines","installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines_optimizing-windows-virtual-machines-on-rhel",[1149,1153,1157,1161,1165],{"title":1150,"visible":979,"weight":16,"urlFragment":1135,"anchor":1151,"singlePageAnchor":1151,"docTitle":19,"url":1152},"21.2.1.1. How Windows virtio drivers work","how-windows-virtio-drivers-work_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines","#how-windows-virtio-drivers-work_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines",{"title":1154,"visible":979,"weight":23,"urlFragment":1135,"anchor":1155,"singlePageAnchor":1155,"docTitle":19,"url":1156},"21.2.1.2. Preparing virtio driver installation media on a host machine","installing-kvm-drivers-on-a-host-machine_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines","#installing-kvm-drivers-on-a-host-machine_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines",{"title":1158,"visible":979,"weight":28,"urlFragment":1135,"anchor":1159,"singlePageAnchor":1159,"docTitle":19,"url":1160},"21.2.1.3. Installing virtio drivers on a Windows guest","installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines","#installing-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines",{"title":1162,"visible":979,"weight":45,"urlFragment":1135,"anchor":1163,"singlePageAnchor":1163,"docTitle":19,"url":1164},"21.2.1.4. Updating virtio drivers on a Windows guest","proc_updating-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines","#proc_updating-kvm-drivers-on-a-windows-guest_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines",{"title":1166,"visible":979,"weight":50,"urlFragment":1135,"anchor":1167,"singlePageAnchor":1167,"docTitle":19,"url":1168},"21.2.1.5. Enabling QEMU Guest Agent on Windows guests","proc_installing-qemu-guest-agent-on-windows-guests_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines","#proc_installing-qemu-guest-agent-on-windows-guests_installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines","#installing-kvm-paravirtualized-drivers-for-rhel-virtual-machines_optimizing-windows-virtual-machines-on-rhel",{"title":1171,"visible":15,"weight":23,"urlFragment":1135,"anchor":1172,"singlePageAnchor":1172,"sections":1173,"docTitle":19,"url":1182},"21.2.2. Enabling Hyper-V enlightenments","enabling-hyper-v-enlightenments_optimizing-windows-virtual-machines-on-rhel",[1174,1178],{"title":1175,"visible":979,"weight":16,"urlFragment":1135,"anchor":1176,"singlePageAnchor":1176,"docTitle":19,"url":1177},"21.2.2.1. Enabling Hyper-V enlightenments on a Windows virtual machine","enabling-hyper-v-enlightenments-on-a-windows-virtual-machine-in-rhel-8_enabling-hyper-v-enlightenments","#enabling-hyper-v-enlightenments-on-a-windows-virtual-machine-in-rhel-8_enabling-hyper-v-enlightenments",{"title":1179,"visible":979,"weight":23,"urlFragment":1135,"anchor":1180,"singlePageAnchor":1180,"docTitle":19,"url":1181},"21.2.2.2. Configurable Hyper-V enlightenments","configurable-hyper-v-enlightenments_enabling-hyper-v-enlightenments","#configurable-hyper-v-enlightenments_enabling-hyper-v-enlightenments","#enabling-hyper-v-enlightenments_optimizing-windows-virtual-machines-on-rhel",{"title":1184,"visible":15,"weight":28,"urlFragment":1135,"anchor":1185,"singlePageAnchor":1185,"docTitle":19,"url":1186},"21.2.3. Configuring NetKVM driver parameters","configuring-netkvm-driver-parameters_optimizing-windows-virtual-machines-on-rhel","#configuring-netkvm-driver-parameters_optimizing-windows-virtual-machines-on-rhel",{"title":1188,"visible":15,"weight":45,"urlFragment":1135,"anchor":1189,"singlePageAnchor":1189,"docTitle":19,"url":1190},"21.2.4. NetKVM driver parameters","netkvm-driver-parameters_optimizing-windows-virtual-machines-on-rhel","#netkvm-driver-parameters_optimizing-windows-virtual-machines-on-rhel",{"title":1192,"visible":15,"weight":50,"urlFragment":1135,"anchor":1193,"singlePageAnchor":1193,"docTitle":19,"url":1194},"21.2.5. Optimizing background processes on Windows virtual machines","optimizing-background-processes-on-windows-virtual-machines_optimizing-windows-virtual-machines-on-rhel","#optimizing-background-processes-on-windows-virtual-machines_optimizing-windows-virtual-machines-on-rhel","#optimizing-windows-virtual-machines-on-rhel_installing-and-managing-windows-virtual-machines-on-rhel",{"title":1197,"visible":15,"weight":28,"urlFragment":1135,"anchor":1198,"singlePageAnchor":1198,"docTitle":19,"url":1199},"21.3. Enabling standard hardware security on Windows virtual machines","enabling-standard-harware-security-on-windows-virtual-machines_installing-and-managing-windows-virtual-machines-on-rhel","#enabling-standard-harware-security-on-windows-virtual-machines_installing-and-managing-windows-virtual-machines-on-rhel",{"title":1201,"visible":15,"weight":45,"urlFragment":1135,"anchor":1202,"singlePageAnchor":1202,"docTitle":19,"url":1203},"21.4. Enabling enhanced hardware security on Windows virtual machines","proc_enabling-enhanced-hardware-security-on-windows-virtual-machines_installing-and-managing-windows-virtual-machines-on-rhel","#proc_enabling-enhanced-hardware-security-on-windows-virtual-machines_installing-and-managing-windows-virtual-machines-on-rhel",{"title":1205,"visible":15,"weight":50,"urlFragment":1135,"anchor":1206,"singlePageAnchor":1206,"docTitle":19,"url":1207},"21.5. Next steps","next-steps-installing-and-managing-windows-virtual-machines-on-rhel","#next-steps-installing-and-managing-windows-virtual-machines-on-rhel","#installing-and-managing-windows-virtual-machines-on-rhel_configuring-and-managing-virtualization",{"title":1210,"visible":15,"weight":1211,"urlFragment":1212,"anchor":18,"singlePageAnchor":1212,"sections":1213,"docTitle":19,"url":1234},"22. Creating nested virtual machines",24,"creating-nested-virtual-machines_configuring-and-managing-virtualization",[1214,1218,1222,1226,1230],{"title":1215,"visible":15,"weight":16,"urlFragment":1212,"anchor":1216,"singlePageAnchor":1216,"docTitle":19,"url":1217},"22.1. What is nested virtualization?","what-is-nested-virtualization_creating-nested-virtual-machines","#what-is-nested-virtualization_creating-nested-virtual-machines",{"title":1219,"visible":15,"weight":23,"urlFragment":1212,"anchor":1220,"singlePageAnchor":1220,"docTitle":19,"url":1221},"22.2. Support limitations for nested virtualization","support-limitations-for-nested-virtualization_creating-nested-virtual-machines","#support-limitations-for-nested-virtualization_creating-nested-virtual-machines",{"title":1223,"visible":15,"weight":28,"urlFragment":1212,"anchor":1224,"singlePageAnchor":1224,"docTitle":19,"url":1225},"22.3. Creating a nested virtual machine on Intel","creating-a-nested-virtual-machine-on-intel_creating-nested-virtual-machines","#creating-a-nested-virtual-machine-on-intel_creating-nested-virtual-machines",{"title":1227,"visible":15,"weight":45,"urlFragment":1212,"anchor":1228,"singlePageAnchor":1228,"docTitle":19,"url":1229},"22.4. Creating a nested virtual machine on AMD","creating-a-nested-virtual-machine-on-amd_creating-nested-virtual-machines","#creating-a-nested-virtual-machine-on-amd_creating-nested-virtual-machines",{"title":1231,"visible":15,"weight":50,"urlFragment":1212,"anchor":1232,"singlePageAnchor":1232,"docTitle":19,"url":1233},"22.5. Creating a nested virtual machine on IBM Z","creating-a-nested-virtual-machine-on-ibm-z_creating-nested-virtual-machines","#creating-a-nested-virtual-machine-on-ibm-z_creating-nested-virtual-machines","#creating-nested-virtual-machines_configuring-and-managing-virtualization",{"title":1236,"visible":15,"weight":1237,"urlFragment":1238,"anchor":18,"singlePageAnchor":1238,"sections":1239,"docTitle":19,"url":1278},"23. Diagnosing virtual machine problems",25,"diagnosing-virtual-machine-problems_configuring-and-managing-virtualization",[1240,1261,1274],{"title":1241,"visible":15,"weight":16,"urlFragment":1238,"anchor":1242,"singlePageAnchor":1242,"sections":1243,"docTitle":19,"url":1260},"23.1. Generating libvirt debug logs","generating-virtual-machine-debug-logs_diagnosing-virtual-machine-problems",[1244,1248,1252,1256],{"title":1245,"visible":15,"weight":16,"urlFragment":1238,"anchor":1246,"singlePageAnchor":1246,"docTitle":19,"url":1247},"23.1.1. Understanding libvirt debug logs","understanding-virtual-machine-debug-logs_generating-virtual-machine-debug-logs","#understanding-virtual-machine-debug-logs_generating-virtual-machine-debug-logs",{"title":1249,"visible":15,"weight":23,"urlFragment":1238,"anchor":1250,"singlePageAnchor":1250,"docTitle":19,"url":1251},"23.1.2. Enabling persistent settings for libvirt debug logs","enabling-persistent-settings-for-virtual-machine-debug-logs_generating-virtual-machine-debug-logs","#enabling-persistent-settings-for-virtual-machine-debug-logs_generating-virtual-machine-debug-logs",{"title":1253,"visible":15,"weight":28,"urlFragment":1238,"anchor":1254,"singlePageAnchor":1254,"docTitle":19,"url":1255},"23.1.3. Enabling libvirt debug logs during runtime","enabling-virtual-machine-debug-logs-during-runtime_generating-virtual-machine-debug-logs","#enabling-virtual-machine-debug-logs-during-runtime_generating-virtual-machine-debug-logs",{"title":1257,"visible":15,"weight":45,"urlFragment":1238,"anchor":1258,"singlePageAnchor":1258,"docTitle":19,"url":1259},"23.1.4. Attaching libvirt debug logs to support requests","attaching-virtual-machine-debug-logs_generating-virtual-machine-debug-logs","#attaching-virtual-machine-debug-logs_generating-virtual-machine-debug-logs","#generating-virtual-machine-debug-logs_diagnosing-virtual-machine-problems",{"title":1262,"visible":15,"weight":23,"urlFragment":1238,"anchor":1263,"singlePageAnchor":1263,"sections":1264,"docTitle":19,"url":1273},"23.2. Dumping a virtual machine core","dumping-a-virtual-machine-core_diagnosing-virtual-machine-problems",[1265,1269],{"title":1266,"visible":15,"weight":16,"urlFragment":1238,"anchor":1267,"singlePageAnchor":1267,"docTitle":19,"url":1268},"23.2.1. How virtual machine core dumping works","how-virtual-machine-core-dumping-works_dumping-a-virtual-machine-core","#how-virtual-machine-core-dumping-works_dumping-a-virtual-machine-core",{"title":1270,"visible":15,"weight":23,"urlFragment":1238,"anchor":1271,"singlePageAnchor":1271,"docTitle":19,"url":1272},"23.2.2. Creating a virtual machine core dump file","creating-a-virtual-machine-core-dump-file_dumping-a-virtual-machine-core","#creating-a-virtual-machine-core-dump-file_dumping-a-virtual-machine-core","#dumping-a-virtual-machine-core_diagnosing-virtual-machine-problems",{"title":1275,"visible":15,"weight":28,"urlFragment":1238,"anchor":1276,"singlePageAnchor":1276,"docTitle":19,"url":1277},"23.3. Backtracing virtual machine processes","backtracing-virtual-machine-processes_diagnosing-virtual-machine-problems","#backtracing-virtual-machine-processes_diagnosing-virtual-machine-problems","#diagnosing-virtual-machine-problems_configuring-and-managing-virtualization",{"title":1280,"visible":15,"weight":1281,"urlFragment":1282,"anchor":18,"singlePageAnchor":1282,"sections":1283,"docTitle":19,"url":1316},"24. Feature support and limitations in RHEL 9 virtualization",26,"assembly_feature-support-and-limitations-in-rhel-9-virtualization_configuring-and-managing-virtualization",[1284,1288,1292,1296,1300,1304,1308,1312],{"title":1285,"visible":15,"weight":16,"urlFragment":1282,"anchor":1286,"singlePageAnchor":1286,"docTitle":19,"url":1287},"24.1. How RHEL virtualization support works","how-rhel-virtualization-support-works_feature-support-and-limitations-in-rhel-9-virtualization","#how-rhel-virtualization-support-works_feature-support-and-limitations-in-rhel-9-virtualization",{"title":1289,"visible":15,"weight":23,"urlFragment":1282,"anchor":1290,"singlePageAnchor":1290,"docTitle":19,"url":1291},"24.2. Recommended features in RHEL 9 virtualization","recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization","#recommended-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization",{"title":1293,"visible":15,"weight":28,"urlFragment":1282,"anchor":1294,"singlePageAnchor":1294,"docTitle":19,"url":1295},"24.3. Unsupported features in RHEL 9 virtualization","unsupported-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization","#unsupported-features-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization",{"title":1297,"visible":15,"weight":45,"urlFragment":1282,"anchor":1298,"singlePageAnchor":1298,"docTitle":19,"url":1299},"24.4. Resource allocation limits in RHEL 9 virtualization","resource-allocation-limits-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization","#resource-allocation-limits-in-rhel-9-virtualization_feature-support-and-limitations-in-rhel-9-virtualization",{"title":1301,"visible":15,"weight":50,"urlFragment":1282,"anchor":1302,"singlePageAnchor":1302,"docTitle":19,"url":1303},"24.5. Supported disk image formats","supported-disk-image-formats_feature-support-and-limitations-in-rhel-9-virtualization","#supported-disk-image-formats_feature-support-and-limitations-in-rhel-9-virtualization",{"title":1305,"visible":15,"weight":120,"urlFragment":1282,"anchor":1306,"singlePageAnchor":1306,"docTitle":19,"url":1307},"24.6. How virtualization on IBM Z differs from AMD64 and Intel 64","how-virtualization-on-ibm-z-differs-from-amd64-and-intel64_feature-support-and-limitations-in-rhel-9-virtualization","#how-virtualization-on-ibm-z-differs-from-amd64-and-intel64_feature-support-and-limitations-in-rhel-9-virtualization",{"title":1309,"visible":15,"weight":138,"urlFragment":1282,"anchor":1310,"singlePageAnchor":1310,"docTitle":19,"url":1311},"24.7. How virtualization on ARM 64 differs from AMD64 and Intel 64","how-virtualization-on-arm-64-differs-from-amd64-and-intel64_feature-support-and-limitations-in-rhel-9-virtualization","#how-virtualization-on-arm-64-differs-from-amd64-and-intel64_feature-support-and-limitations-in-rhel-9-virtualization",{"title":1313,"visible":15,"weight":185,"urlFragment":1282,"anchor":1314,"singlePageAnchor":1314,"docTitle":19,"url":1315},"24.8. An overview of virtualization features support in RHEL 9","an-overview-of-virtualization-features-support-in-rhel-9_feature-support-and-limitations-in-rhel-9-virtualization","#an-overview-of-virtualization-features-support-in-rhel-9_feature-support-and-limitations-in-rhel-9-virtualization","#assembly_feature-support-and-limitations-in-rhel-9-virtualization_configuring-and-managing-virtualization",{"title":1318,"visible":15,"weight":1319,"urlFragment":1320,"anchor":18,"singlePageAnchor":1321,"docTitle":19,"url":1322},"Legal Notice",27,"legal-notice","idm140237782377296","#idm140237782377296",[1324,1327,1330],{"text":1325,"link":1326},"Red Hat Enterprise Linux","/documentation/red_hat_enterprise_linux/",{"text":1328,"link":1329},"9","/documentation/red_hat_enterprise_linux/9/",{"text":11},{"name":11,"translations":1332,"productVersion":1333,"singlePage":1334,"pdf":1337,"publishingStatus":1339},[5,6,7,8,9],{"name":1328},{"contentUrl":1335,"name":11,"new":1336,"url":19},"https://d2bhdhkti9t3uj.cloudfront.net/html/d23a4052-fb00-48eb-9a2f-246030f4cb87/c40a08d2a223806d6ae1c71894b9f34f.html","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html-single/configuring_and_managing_virtualization/index",{"url":1338},"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/pdf/configuring_and_managing_virtualization/Red_Hat_Enterprise_Linux-9-Configuring_and_managing_virtualization-en-US.pdf","PUBLISHED",[1341,1346,1349,1353,1357,1361,1365],{"name":1342,"new":1343,"url":1344,"urlAliases":1345},"10.0-Beta","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/10-beta","10-beta",[],{"name":1328,"new":1347,"url":1328,"urlAliases":1348},"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9",[],{"name":1350,"new":1351,"url":1350,"urlAliases":1352},"8","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/8",[],{"name":1354,"new":1355,"url":1354,"urlAliases":1356},"7","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/7",[],{"name":1358,"new":1359,"url":1358,"urlAliases":1360},"6","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/6",[],{"name":1362,"new":1363,"url":1362,"urlAliases":1364},"5","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/5",[],{"name":1366,"new":1367,"url":1366,"urlAliases":1368},"4","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/4",[],{"configuring_and_managing_virtualization/index":1370,"configuring_and_managing_virtualization/proc_providing-feedback-on-red-hat-documentation_configuring-and-managing-virtualization":1371,"configuring_and_managing_virtualization/introducing-virtualization-in-rhel_configuring-and-managing-virtualization":1372,"configuring_and_managing_virtualization/assembly_enabling-virtualization-in-rhel-9_configuring-and-managing-virtualization":1373,"configuring_and_managing_virtualization/assembly_creating-virtual-machines_configuring-and-managing-virtualization":1374,"configuring_and_managing_virtualization/assembly_starting-virtual-machines_configuring-and-managing-virtualization":1375,"configuring_and_managing_virtualization/assembly_connecting-to-virtual-machines_configuring-and-managing-virtualization":1376,"configuring_and_managing_virtualization/assembly_shutting-down-virtual-machines_configuring-and-managing-virtualization":1377,"configuring_and_managing_virtualization/assembly_deleting-virtual-machines_configuring-and-managing-virtualization":1378,"configuring_and_managing_virtualization/managing-virtual-machines-in-the-web-console_configuring-and-managing-virtualization":1379,"configuring_and_managing_virtualization/viewing-information-about-virtual-machines_configuring-and-managing-virtualization":1380,"configuring_and_managing_virtualization/saving-and-restoring-virtual-machines_configuring-and-managing-virtualization":1381,"configuring_and_managing_virtualization/cloning-virtual-machines_configuring-and-managing-virtualization":1382,"configuring_and_managing_virtualization/migrating-virtual-machines_configuring-and-managing-virtualization":1383,"configuring_and_managing_virtualization/creating-virtual-machine-snapshots_configuring-and-managing-virtualization":1384,"configuring_and_managing_virtualization/managing-virtual-devices_configuring-and-managing-virtualization":1385,"configuring_and_managing_virtualization/managing-storage-for-virtual-machines_configuring-and-managing-virtualization":1386,"configuring_and_managing_virtualization/assembly_managing-gpu-devices-in-virtual-machines_configuring-and-managing-virtualization":1387,"configuring_and_managing_virtualization/configuring-virtual-machine-network-connections_configuring-and-managing-virtualization":1388,"configuring_and_managing_virtualization/optimizing-virtual-machine-performance-in-rhel_configuring-and-managing-virtualization":1389,"configuring_and_managing_virtualization/securing-virtual-machines-in-rhel_configuring-and-managing-virtualization":1390,"configuring_and_managing_virtualization/sharing-files-between-the-host-and-its-virtual-machines_configuring-and-managing-virtualization":1391,"configuring_and_managing_virtualization/installing-and-managing-windows-virtual-machines-on-rhel_configuring-and-managing-virtualization":1392,"configuring_and_managing_virtualization/creating-nested-virtual-machines_configuring-and-managing-virtualization":1393,"configuring_and_managing_virtualization/diagnosing-virtual-machine-problems_configuring-and-managing-virtualization":1394,"configuring_and_managing_virtualization/assembly_feature-support-and-limitations-in-rhel-9-virtualization_configuring-and-managing-virtualization":1395,"configuring_and_managing_virtualization/legal-notice":1396},{"prevt":18,"next":24},{"prevt":17,"next":29},{"prevt":18,"next":29},{"prevt":18,"next":56},{"prevt":18,"next":90},{"prevt":18,"next":121},{"prevt":18,"next":139},{"prevt":18,"next":186},{"prevt":18,"next":213},{"prevt":18,"next":227},{"prevt":18,"next":249},{"prevt":18,"next":292},{"prevt":18,"next":314},{"prevt":18,"next":18},{"prevt":18,"next":396},{"prevt":18,"next":430},{"prevt":18,"next":549},{"prevt":18,"next":775},{"prevt":18,"next":810},{"prevt":18,"next":938},{"prevt":18,"next":1058},{"prevt":18,"next":1104},{"prevt":18,"next":1135},{"prevt":18,"next":1212},{"prevt":18,"next":1238},{"prevt":18,"next":1282},{"prevt":1282,"next":18},{"product":18,"version":18},{"configuring_and_managing_virtualization":1399},[1336],{"products":1401},[1402,1403,1404,1405,1406,1407,1408,1409,1410,1411,1412,1413,1414],"builds_for_red_hat_openshift","migration_toolkit_for_virtualization","openshift_container_platform","openshift_sandboxed_containers","red_hat_advanced_cluster_security_for_kubernetes","red_hat_advanced_cluster_management_for_kubernetes","red_hat_openshift_data_foundation","red_hat_openshift_dev_spaces","red_hat_openshift_gitops","red_hat_openshift_local","red_hat_openshift_pipelines","red_hat_openshift_serverless","workload_availability_for_red_hat_openshift",[],{"default":1417},[1418,1427,1433,1442,1450,1458,1465,1473,1480],{"nid":1419,"type":1420,"langcode":1421,"Published":16,"title":1422,"Created":1423,"Updated":1424,"body_value":18,"field_documentation banner_text_value":18,"field_documentation banner_text_format":18,"field_paths_value":1425,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":1426},580,"rebrand banner","en","OpenShift Container Storage is now OpenShift Data Foundation starting with version 4.9.","2023-01-11 15:38:32","2023-01-11 15:40:04","/documentation/red_hat_openshift_container_storage\r\n/documentation/red_hat_openshift_container_storage/\r\n/documentation/red_hat_openshift_container_storage/*","internal:/documentation/red_hat_openshift_data_foundation/",{"nid":1428,"type":1420,"langcode":1421,"Published":16,"title":1422,"Created":1429,"Updated":1430,"body_value":18,"field_documentation banner_text_value":18,"field_documentation banner_text_format":18,"field_paths_value":1431,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":1432},581,"2023-01-11 15:41:31","2023-01-11 15:42:04","/documentation/red_hat_openshift_data_foundation/4.9\r\n/documentation/red_hat_openshift_data_foundation/4.9/\r\n/documentation/red_hat_openshift_data_foundation/4.9/*\r\n/documentation/red_hat_openshift_data_foundation/4.10\r\n/documentation/red_hat_openshift_data_foundation/4.10/\r\n/documentation/red_hat_openshift_data_foundation/4.10/*\r\n/documentation/red_hat_openshift_data_foundation/4.11\r\n/documentation/red_hat_openshift_data_foundation/4.11/\r\n/documentation/red_hat_openshift_data_foundation/4.11/*","internal:/documentation/red_hat_openshift_container_storage/",{"nid":1434,"type":1435,"langcode":1421,"Published":16,"title":1436,"Created":1437,"Updated":1438,"body_value":18,"field_documentation banner_text_value":1439,"field_documentation banner_text_format":1440,"field_paths_value":1441,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},582,"developer preview banner","MicroShift is Developer Preview software only","2023-01-11 15:50:24","2023-01-30 19:00:52","\u003Cp slot=header>MicroShift is Developer Preview software only.\u003C/p>For more information about the support scope of Red Hat Developer Preview software, see \u003Ca href=\"https://access.redhat.com/support/offerings/devpreview/\">Developer Preview Support Scope\u003C/a>.","documentation banner","/documentation/microshift/4.12\r\n/documentation/microshift/4.12/*\r\n/documentation/red_hat_build_of_microshift/4.12\r\n/documentation/red_hat_build_of_microshift/4.12/*",{"nid":1443,"type":1444,"langcode":1421,"Published":16,"title":1445,"Created":1446,"Updated":1447,"body_value":18,"field_documentation banner_text_value":1448,"field_documentation banner_text_format":1440,"field_paths_value":1449,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},583,"obsolete documentation banner","RHACS EOL - DAT-3433","2023-01-23 16:36:43","2023-01-23 16:39:14","\u003Cp slot=header>You are viewing documentation for a release that is no longer maintained. To view the documentation for the most recent version, see the \u003Ca href=\"/documentation/red_hat_advanced_cluster_security_for_kubernetes/\">latest RHACS docs\u003C/a>.\u003C/p>","/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.69\r\n/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.69/*\r\n/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.70\r\n/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.70/*\r\n/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.71\r\n/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.71/*",{"nid":1451,"type":1452,"langcode":1421,"Published":16,"title":1453,"Created":1454,"Updated":1455,"body_value":18,"field_documentation banner_text_value":1456,"field_documentation banner_text_format":1440,"field_paths_value":1457,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},584,"end of life banner","EOL banner for RHV","2023-05-23 14:58:05","2023-05-24 15:19:42","\u003Cp slot=header>The Red Hat Virtualization\u003C/p>Maintenance Phase runs until August 31, 2024, followed by the Extended Life Phase with no more software fixes through August 31, 2026. See \u003Ca href=\"https://access.redhat.com/articles/6975303\">Migration Paths for OpenShift Container Platform deployed on Red Hat Virtualization\u003C/a> for details.","/documentation/red_hat_virtualization/4.4",{"nid":1459,"type":1452,"langcode":1421,"Published":16,"title":1460,"Created":1461,"Updated":1462,"body_value":18,"field_documentation banner_text_value":1463,"field_documentation banner_text_format":1440,"field_paths_value":1464,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},585,"RHHI-V EOL","2023-06-01 16:52:57","2023-06-01 17:03:44","\u003Cp slot=header>Red Hat Hyperconverged Infrastructure for Virtualization\u003C/p> is in the \u003Ca href=\"https://access.redhat.com/support/policy/updates/rhhiv\">Maintenance Support Phase\u003C/a> of its lifecycle until October 31, 2024. After that date, the product will be End of Life. See the \u003Ca href=\"https://access.redhat.com/announcements/6972521\">RHHI-V announcement\u003C/a> for next steps.","/documentation/red_hat_hyperconverged_infrastructure_for_virtualization/1.8",{"nid":1466,"type":1467,"langcode":1421,"Published":16,"title":1468,"Created":1469,"Updated":1470,"body_value":18,"field_documentation banner_text_value":1471,"field_documentation banner_text_format":1440,"field_paths_value":1472,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},586,"preview banner","MicroShift is Technology Preview software only","2024-03-18 16:53:05","2024-03-18 16:54:56","\u003Cp slot=header>MicroShift is Technology Preview software only.\u003C/p>For more information about the support scope of Red Hat Technology Preview software, see \u003Ca href=\"https://access.redhat.com/support/offerings/techpreview/\">Technology Preview Support Scope\u003C/a>.","/documentation/red_hat_build_of_microshift/4.13\r\n/documentation/red_hat_build_of_microshift/4.13/*",{"nid":1474,"type":1467,"langcode":1421,"Published":16,"title":1475,"Created":1476,"Updated":1477,"body_value":18,"field_documentation banner_text_value":1478,"field_documentation banner_text_format":1440,"field_paths_value":1479,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},588,"Ansible 2.5 upgrade limitation","2024-09-30 16:53:05","2024-10-28 16:54:56","\u003Cp slot=\"header\">Support added for upgrades from 2.4\u003C/p>Ansible Automation Platform 2.5-3, released on October 28, 2024, adds support for upgrades from 2.4. See the upgrade documentation for more information.","",{"nid":1481,"alertType":1482,"type":1483,"langcode":1421,"Published":16,"title":1484,"Created":1479,"Updated":1479,"body_value":18,"field_documentation banner_text_value":1485,"field_documentation banner_text_format":1440,"field_paths_value":1486,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},587,"warning","Warning banner","Red Hat build of Apache Camel K","\u003Cp slot=header>Red Hat Camel K is deprecated\u003C/p>Red Hat Camel K is deprecated and the End of Life date for this product is June 30, 2025. For help migrating to the current go-to solution, \u003Ca target=_blank href=\"https://docs.redhat.com/en/documentation/red_hat_build_of_apache_camel\">Red Hat build of Apache Camel\u003C/a>, see the \u003Ca target=_blank href=\"https://docs.redhat.com/en/documentation/red_hat_build_of_apache_camel_k/1.10.7/html/migration_guide_camel_k_to_camel_extensions_for_quarkus/index\">Migration Guide\u003C/a>.","/documentation/red_hat_build_of_apache_camel_k/*",{"product":1325},["Reactive",1489],{"$snuxt-i18n-meta":1490,"$sisLoading":979,"$sisSinglePage":15,"$sisInFocusMode":979,"$smobileTocOpen":979,"$sisLargeTOC":979,"$scurrentChapter":17,"$scurrentSection":17,"$scurrentSubSection":1479},{},["Set"],["ShallowReactive",1493],{"s8LoCEfG4A":18,"rFVLKcOK8e":18,"uUstF4AIyn":18,"MdHNSZP4nR":18,"Pn02PlJOas":18},"/en/documentation/red_hat_enterprise_linux/9/html-single/configuring_and_managing_virtualization/index"]</script>
<script>window.__NUXT__={};window.__NUXT__.config={public:{contentEnv:"",collectFeedback:true,i18n:{baseUrl:"",defaultLocale:"en",defaultDirection:"ltr",strategy:"prefix",lazy:false,rootRedirect:"",routesNameSeparator:"___",defaultLocaleRouteNameSuffix:"default",skipSettingLocaleOnNavigate:false,differentDomains:false,trailingSlash:false,configLocales:[{code:"en",name:"English",iso:"en-US"},{code:"fr",name:"Français",iso:"fr-FR"},{code:"ko",name:"한국어",iso:"ko-KR"},{code:"ja",name:"日本語",iso:"ja-JP"},{code:"zh-cn",name:"中文 (中国)",iso:"zh-CN"},{code:"de",name:"Deutsch",iso:"de_DE"},{code:"it",name:"Italiano",iso:"it_IT"},{code:"pt-br",name:"Português",iso:"pt_BR"},{code:"es",name:"Español",iso:"es-ES"}],locales:{en:{domain:""},fr:{domain:""},ko:{domain:""},ja:{domain:""},"zh-cn":{domain:""},de:{domain:""},it:{domain:""},"pt-br":{domain:""},es:{domain:""}},detectBrowserLanguage:{alwaysRedirect:false,cookieCrossOrigin:false,cookieDomain:"",cookieKey:"i18n_redirected",cookieSecure:false,fallbackLocale:"",redirectOn:"root",useCookie:true},experimental:{localeDetector:"",switchLocalePathLinkSSR:false,autoImportTranslationFunctions:false}}},app:{baseURL:"/",buildId:"5ff82c51-785e-4a7d-aca6-77d6692e8c7a",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>
