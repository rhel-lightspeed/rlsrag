<!DOCTYPE html><html  data-capo=""><head><script type="importmap">
  {
    "imports": {
      "@patternfly/elements/": "/scripts/v1/@patternfly/elements/",
      "@patternfly/pfe-clipboard/": "/scripts/v1/@patternfly/pfe-clipboard/",
      "@rhds/elements/": "/scripts/v1/@rhds/elements/elements/",
      "@cpelements/elements/": "/scripts/v1/@cpelements/elements/elements/"
    },
    "scopes": {
      "/": {
        "@floating-ui/core": "/scripts/v1/@floating-ui/core/dist/floating-ui.core.mjs",
        "@floating-ui/dom": "/scripts/v1/@floating-ui/dom/dist/floating-ui.dom.mjs",
        "@floating-ui/utils": "/scripts/v1/@floating-ui/utils/dist/floating-ui.utils.mjs",
        "@floating-ui/utils/dom": "/scripts/v1/@floating-ui/utils/dom/dist/floating-ui.utils.dom.mjs",
        "@lit/reactive-element": "/scripts/v1/@lit/reactive-element/reactive-element.js",
        "@lit/reactive-element/decorators/": "/scripts/v1/@lit/reactive-element/decorators/",
        "@patternfly/pfe-core": "/scripts/v1/@patternfly/pfe-core/core.js",
        "@patternfly/pfe-core/": "/scripts/v1/@patternfly/pfe-core/",
        "@rhds/tokens/media.js": "/scripts/v1/@rhds/tokens/js/media.js",
        "lit": "/scripts/v1/lit/index.js",
        "lit-element/lit-element.js": "/scripts/v1/lit-element/lit-element.js",
        "lit-html": "/scripts/v1/lit-html/lit-html.js",
        "lit-html/": "/scripts/v1/lit-html/",
        "lit/": "/scripts/v1/lit/",
        "tslib": "/scripts/v1/tslib/tslib.es6.mjs",
        "@cpelements/rh-table/dist/rh-table.js": "/scripts/v1/@cpelements/rh-table/dist/rh-table.js"
      }
    }
  }
</script><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Managing smart card authentication | Red Hat Product Documentation</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<script type="text/javascript" id="trustarc" src="//static.redhat.com/libs/redhat/marketing/latest/trustarc/trustarc.js"></script>
<script src="//www.redhat.com/dtm.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:wght@400;500;700&family=Red+Hat+Text:wght@400;500;700&display=swap">
<link rel="stylesheet" href="/styles/rh-table--lightdom.min.css">
<style>.section .titlepage{gap:.75rem}.section .titlepage,div.edit{align-items:center;display:flex}div.edit{font-size:.9rem;margin-bottom:8px}div.edit>a{align-items:center;display:flex}.edit pf-icon{margin-right:4px}</style>
<style>#error[data-v-df31ff14]{align-items:center;display:flex;flex-direction:column;justify-content:center;min-height:80vh}h1[data-v-df31ff14]{font-size:calc(var(--rh-font-size-body-text-md, 1rem)*4);font-weight:700;margin-bottom:0}h1[data-v-df31ff14],h1 span[data-v-df31ff14]{line-height:var(--rh-line-height-heading,1.3)}h1 span[data-v-df31ff14]{color:var(--rh-color-text-brand-on-light,#e00);display:block;text-transform:uppercase}h1 span[data-v-df31ff14],p[data-v-df31ff14]{font-size:var(--rh-font-size-body-text-lg,1.125rem)}aside[data-v-df31ff14]{align-items:center;background:var(--rh-color-surface-lightest,#fff);border:var(--rh-border-width-sm,1px) solid var(--rh-color-border-subtle-on-light,#c7c7c7);border-radius:var(--rh-border-radius-default,3px);border-top:calc(var(--rh-border-width-md, 2px)*2) solid var(--rh-color-text-brand-on-light,#e00);box-shadow:var(--rh-box-shadow-sm,0 2px 4px 0 hsla(0,0%,8%,.2));display:flex;flex-direction:column;justify-content:space-between;margin-top:var(--rh-space-2xl,32px);padding:var(--rh-space-xl,24px)}aside[data-v-df31ff14],aside>div[data-v-df31ff14]{width:100%}.text-container[data-v-df31ff14]{margin:auto;max-width:442px;text-align:center}.desktop[data-v-df31ff14]{display:none}.sr-only[data-v-df31ff14]{height:1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);border:0;clip-path:inset(50%);white-space:nowrap}form[data-v-df31ff14]{display:flex}button[data-v-df31ff14],input[data-v-df31ff14]{border:1px solid var(--rh-color-black-500,#8a8d90);box-sizing:border-box;height:40px}input[data-v-df31ff14]{border-right:none;flex:1;font-family:var(--rh-font-family-heading,RedHatDisplay,"Red Hat Display","Noto Sans Arabic","Noto Sans Hebrew","Noto Sans JP","Noto Sans KR","Noto Sans Malayalam","Noto Sans SC","Noto Sans TC","Noto Sans Thai",Helvetica,Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);padding-left:var(--rh-space-md,8px);width:100%}button[data-v-df31ff14]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent;border-left:none;display:flex;width:var(--rh-size-icon-04,40px)}button[data-v-df31ff14]:before{background:var(--rh-context-light-color-text-link,#06c);content:"";cursor:pointer;display:block;height:28px;margin:auto;width:28px}.search-icon[data-v-df31ff14]{margin:auto}ul[data-v-df31ff14]{max-width:275px;padding:0}ul li[data-v-df31ff14]{display:inline-block;list-style:none;margin-right:var(--rh-space-xl,24px);padding:var(--rh-space-xs,4px) 0}ul li a[data-v-df31ff14]{color:var(--rh-context-light-color-text-link,#06c);text-decoration:none}@media (min-width:992px){aside[data-v-df31ff14]{flex-direction:row}.mobile[data-v-df31ff14]{display:none}.desktop[data-v-df31ff14]{display:block}input[data-v-df31ff14]{width:auto}}</style>
<style>@keyframes fade-in{0%{opacity:0;visibility:hidden}1%{visibility:visible}to{opacity:1;visibility:visible}}@media (min-height:48em){.rhdocs{--rh-table--maxHeight:calc(100vh - 12.5rem)}}*,.rhdocs *,.rhdocs :after,.rhdocs :before,:after,:before{box-sizing:border-box}.rhdocs img,.rhdocs object,.rhdocs svg,img,object,svg{display:inline-block;max-width:100%;vertical-align:middle}.rhdocs hr{border:0;border-top:.0625rem solid #d2d2d2;clear:both;margin:1rem 0}.rhdocs a{color:#06c;text-decoration:underline}.rhdocs a:focus,.rhdocs a:hover{color:#036}.rhdocs a.anchor-heading{color:#151515;cursor:pointer;text-decoration:none;word-break:break-all}.rhdocs p{margin:1.49963rem 0}.rhdocs li>p{margin:0}.rhdocs h1,.rhdocs h2,.rhdocs h3,.rhdocs h4,.rhdocs h5,.rhdocs h6{font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-weight:500;margin:0 0 .625rem}.rhdocs h1{font-size:2.25rem;margin:2rem 0}.rhdocs h2{font-size:1.625rem;margin:2rem 0}.rhdocs h3{font-size:1.5rem;font-weight:400}.rhdocs h4,.rhdocs h5{font-size:1.25rem}.rhdocs h5{font-weight:400}.rhdocs h6{font-size:1.125rem;font-weight:500;line-height:1.6667}.rhdocs ol,.rhdocs ul{margin:1rem 0;padding:0 0 0 1.5rem}.rhdocs ol ::marker,.rhdocs ul ::marker{font:inherit}.rhdocs li{margin:0 0 .5em;padding:0}.rhdocs li>p{margin:.5rem 0}.rhdocs li>ol,.rhdocs li>ul{margin:0}.rhdocs dl dd{margin:.5rem 0 .5rem 1rem}.rhdocs dl dd>p{margin:.5rem 0}.rhdocs .informaltable,.rhdocs .table-contents,.rhdocs .table-wrapper{max-height:var(--rh-table--maxHeight);overflow:auto}.rhdocs table{border:0;font-size:1rem;line-height:1.6667;table-layout:fixed}.rhdocs table caption{color:#585858;margin-bottom:.5rem;margin-top:.5rem;text-align:left}.rhdocs table td,.rhdocs table th{border:0;border-bottom:.0625rem solid #d2d2d2;border-bottom:.0625rem solid var(--pfe-table--Border,#d2d2d2);padding:.5em 1rem}.rhdocs table td.halign-left,.rhdocs table th.halign-left{text-align:left}.rhdocs table td.halign-center,.rhdocs table th.halign-center,table td.halign-center,table th.halign-center{text-align:center}.rhdocs table td.halign-right,.rhdocs table th.halign-right{text-align:right}.rhdocs table td.valign-top,.rhdocs table th.valign-top{vertical-align:top}.rhdocs table td.valign-middle,.rhdocs table th.valign-middle{vertical-align:middle}.rhdocs table td.valign-bottom,.rhdocs table th.valign-bottom{vertical-align:bottom}.rhdocs table thead td,.rhdocs table thead th{background:#f5f5f5;font-weight:600}.rhdocs rh-table table,.rhdocs rh-table.rh-table--expanded-vertically{max-height:-moz-max-content;max-height:max-content}.rhdocs pre.nowrap{overflow:auto;overflow-wrap:normal;white-space:pre;word-break:normal}.rhdocs .codeblock__wrapper pre{background:transparent}.rh-table--full-screen code,.rhdocs .content--md code,.rhdocs .content--sm code,.rhdocs .rh-table--full-screen code{overflow-wrap:normal;word-break:normal}.rhdocs[class] pre code,[class] pre code{background:inherit;color:inherit;font-family:inherit;font-size:inherit;font-weight:inherit;line-height:inherit;padding:0}.rhdocs .keycap,.rhdocs kbd{background-color:#eee;background-image:linear-gradient(180deg,#ddd,#eee,#fff);border-radius:.1875rem;box-shadow:0 -.0625rem 0 0 #fff,0 .0625rem 0 .1875rem #aaa;font-family:RedHatMono,Red Hat Mono,Consolas,monospace;font-size:90%;font-weight:400;margin:0 .25rem;padding:.125rem .375rem}.keycap strong,.rhdocs .keycap strong{font-weight:inherit}.rhdocs kbd.keyseq,kbd.keyseq{background:transparent;border:0;box-shadow:none;padding:0}.rhdocs kbd.keyseq kbd,kbd.keyseq kbd{display:inline-block;margin:0 .375rem}.rhdocs kbd.keyseq kbd:first-child,kbd.keyseq kbd:first-child{margin-left:0}.rhdocs b.button{font-size:90%;font-weight:700;padding:.1875rem}.rhdocs b.button:before{content:"["}.rhdocs b.button:after{content:"]"}html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}.rhdocs audio,.rhdocs canvas,.rhdocs progress,.rhdocs video{display:inline-block;vertical-align:baseline}.rhdocs audio:not([controls]){display:none;height:0}[hidden],template{display:none}.rhdocs a{background:transparent}.rhdocs a:active,.rhdocs a:hover{outline:0}.rhdocs a.anchor-heading:hover:before{color:#151515;content:"#";margin-left:-1.6rem;position:absolute}.rhdocs a.anchor-heading:focus-visible{color:#151515}@media screen and (max-width:990px){.rhdocs a.anchor-heading:hover:before{font-size:16px;margin-left:-1rem;padding-top:8px}.rhdocs h1 a.anchor-heading:hover:before{padding-top:12px}.rhdocs h4 a.anchor-heading:hover:before,.rhdocs h5 a.anchor-heading:hover:before{padding-top:4px}.rhdocs h6 a.anchor-heading:hover:before{padding-top:2px}}.rhdocs abbr[title]{border-bottom:.0625rem dotted}.rhdocs dfn{font-style:italic}.rhdocs h1{font-size:2em;margin:.67em 0}.rhdocs mark{background:#ff0;color:#000}.rhdocs small{font-size:80%}.rhdocs sub,.rhdocs sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}.rhdocs sup{top:-.5em}.rhdocs sub{bottom:-.25em}.rhdocs img{border:0}.rhdocs svg:not(:root){overflow:hidden}.rhdocs figure{margin:1em 2.5rem}.rhdocs hr{box-sizing:content-box;height:0}.rhdocs code,.rhdocs kbd,.rhdocs pre,.rhdocs samp{font-family:monospace,monospace;font-size:1em}.rhdocs button,.rhdocs optgroup,.rhdocs select,.rhdocs textarea,.rhdocsinput{color:inherit;font:inherit;margin:0}.rhdocs button.copy-link-btn{background:none;border:2px solid #fff;font:1px Red Hat Text}.rhdocs button.copy-link-btn:hover{border-bottom:2px solid #06c}.rhdocs button.copy-link-btn .link-icon{padding-bottom:4px}.rhdocs button{overflow:visible}.rhdocs button,.rhdocs select{text-transform:none}.rhdocs button,.rhdocs html input[type=button],.rhdocs input[type=reset],.rhdocs input[type=submit]{-moz-appearance:button;appearance:button;-webkit-appearance:button;cursor:pointer}.rhdocs button[disabled],.rhdocs html input[disabled]{cursor:default}.rhdocs button::-moz-focus-inner,.rhdocs input::-moz-focus-inner{border:0;padding:0}.rhdocs input{line-height:normal}.rhdocs input[type=checkbox],.rhdocs input[type=radio]{box-sizing:border-box;padding:0}.rhdocs input[type=number]::-webkit-inner-spin-button,.rhdocs input[type=number]::-webkit-outer-spin-button{height:auto}.rhdocs input[type=search]{-moz-appearance:textfield;appearance:textfield;-webkit-appearance:textfield;box-sizing:content-box}.rhdocs input[type=search]::-webkit-search-cancel-button,.rhdocs input[type=search]::-webkit-search-decoration{-webkit-appearance:none}.rhdocs fieldset{border:.0625rem solid silver;margin:0 .125rem;padding:.35em .625em .75em}.rhdocs legend{border:0;padding:0}.rhdocs textarea{overflow:auto}.rhdocs optgroup{font-weight:700}.rhdocs table{border-collapse:collapse;border-spacing:0}.rhdocs td,.rhdocs th{padding:0}.rhdocs ._additional-resources[class][class][id]:last-child{margin-top:-2rem}.rhdocs ._additional-resources[class][class]:only-child{grid-column:1/-1}._additional-resources[class][class] .additional-resources__heading,._additional-resources[class][class] .heading,._additional-resources[class][class] h1,._additional-resources[class][class] h2,._additional-resources[class][class] h3,._additional-resources[class][class] h4,._additional-resources[class][class] h5,._additional-resources[class][class] h6,._additional-resources[class][class] p.title{display:block;font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-size:1.125rem;font-weight:700;line-height:1.5rem;margin:0 0 .5rem;padding:0;text-transform:uppercase}._additional-resources[class][class] ul{border:0;list-style:none;margin:0;padding:0;position:relative}.related-topic-content__wrapper ._additional-resources[class][class] ul{display:block}._additional-resources[class][class] ul:after{background-color:#fff;bottom:0;content:"";display:block;height:.125rem;position:absolute;width:100%}._additional-resources[class][class] li{border-bottom:.0625rem solid #d2d2d2;box-sizing:content-box;margin:0;padding:1rem 1.5rem 1rem 0;-moz-column-break-inside:avoid;break-inside:avoid}._additional-resources[class][class] li:only-child{grid-column:1/-1}._additional-resources[class][class] li:last-child{border:0}@media (min-width:1100px){._additional-resources[class][class] li:last-child{border-bottom:.0625rem solid #d2d2d2}}._additional-resources[class][class] li p:only-child{margin:0;padding:0}._additional-resources[class][class] li a{text-decoration:none}._additional-resources[class][class] li a:focus,._additional-resources[class][class] li a:hover{text-decoration:underline}.rhdocs table .admonitionblock>div:nth-child(2),.rhdocs table .caution>div:nth-child(2),.rhdocs table .important>div:nth-child(2),.rhdocs table .note>div:nth-child(2),.rhdocs table .tip>div:nth-child(2),.rhdocs table .warning>div:nth-child(2){margin:.5rem 0}.rhdocs table .admonitionblock>div:nth-child(2)>:first-child,.rhdocs table .caution>div:nth-child(2)>:first-child,.rhdocs table .important>div:nth-child(2)>:first-child,.rhdocs table .note>div:nth-child(2)>:first-child,.rhdocs table .tip>div:nth-child(2)>:first-child,.rhdocs table .warning>div:nth-child(2)>:first-child{margin-top:0}.rhdocs table .admonitionblock>div:nth-child(2)>:last-child,.rhdocs table .caution>div:nth-child(2)>:last-child,.rhdocs table .important>div:nth-child(2)>:last-child,.rhdocs table .note>div:nth-child(2)>:last-child,.rhdocs table .tip>div:nth-child(2)>:last-child,.rhdocs table .warning>div:nth-child(2)>:last-child{margin-bottom:0}.rhdocs .codeblock__wrapper+.codeblock__wrapper,.rhdocs pre+pre,.rhdocs pre[class]+pre[class]{margin-top:2rem}.rhdocs .codeblock__wrapper{background:#f8f8f8;overflow:visible;position:relative;transform:translate(0);z-index:0}.codeblock__wrapper:before{background-repeat:no-repeat;background-size:6.25rem 100%;bottom:var(--scrollbar__height,1px);content:"";display:block;height:7.125rem;max-height:100%;max-height:calc(100% - var(--scrollbar__height, 2px));position:absolute;right:var(--scrollbar__width,6px);top:.0625rem;width:4.0625rem;z-index:1}.rhdocs .codeblock__inner-wrapper,.rhdocs pre{max-height:calc(100vh - 6.25rem)}@media (min-height:48em){.rhdocs .codeblock__inner-wrapper,.rhdocs pre{max-height:calc(100vh - 12.5rem)}}.rhdocs .codeblock__inner-wrapper{display:grid;grid-template-columns:1fr 4.375rem}.rhdocs .codeblock__wrapper--expanded .codeblock__inner-wrapper{max-height:-moz-max-content;max-height:max-content}.codeblock__copy span{display:block;height:0;position:absolute;visibility:hidden;width:0}.codeblock__copy:focus{outline:.0625rem dashed currentcolor}.codeblock__copy svg#icon--copy{height:1rem;width:1rem}.codeblock__expand{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#f0efef;border:0;cursor:pointer;height:1.75rem;left:calc(100% - 2.75rem - var(--scrollbar__width, 0px));position:absolute;text-indent:-9999em;top:3.25rem;width:1.75rem;z-index:2}.codeblock__expand:before{background:#6a6e73;content:"";height:100%;left:0;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512'%3E%3C!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc.--%3E%3Cpath d='M182.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l41.4-41.4v293.4l-41.4-41.3c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 402.7V109.3l41.4 41.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-96-96z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512'%3E%3C!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc.--%3E%3Cpath d='M182.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l41.4-41.4v293.4l-41.4-41.3c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 402.7V109.3l41.4 41.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-96-96z'/%3E%3C/svg%3E");-webkit-mask-position:center center;mask-position:center center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:auto 1rem;mask-size:auto 1rem;position:absolute;top:0;width:100%}.codeblock__wrapper--expanded .codeblock__expand{background:#2b9af3}.codeblock__wrapper--expanded .codeblock__expand:before{background:#fff}.codeblock__expand:focus:before,.codeblock__expand:hover:before{background:#06c}.codeblock__wrapper--expanded .codeblock__expand:focus:before,.codeblock__wrapper--expanded .codeblock__expand:hover:before{background:#fff}.codeblock__expand:focus{outline:.0625rem dashed currentcolor}.rhdocs .calloutlist>ol,.rhdocs .colist>ol{counter-reset:colist;list-style:none;margin:1rem 0 2rem;padding:0}.rhdocs .calloutlist>ol>li,.rhdocs .colist>ol>li{counter-increment:colist;font-size:1rem;margin:.5rem 0;padding-left:1.75rem;position:relative}.rhdocs .calloutlist>ol>li .colist-num,.rhdocs .colist>ol>li .colist-num{display:none}.calloutlist>ol>li:before,.colist>ol>li:before{content:counter(colist);left:0;position:absolute;top:.1875rem}.calloutlist dt{clear:left;float:left;margin:0;padding:0 .5rem 0 0}.included-in-guides[class],.included-in-guides[class][id]:last-child{background:#fff;border:.0625rem solid #d2d2d2;border-radius:.1875rem;margin:2em 0 4em;padding:2rem 2rem 1rem}.included-in-guides[class][id]:last-child{margin-top:-2rem}.included-in-guides[class]:only-child{grid-column:1/-1}.included-in-guides[class] .additional-resources__heading,.included-in-guides[class] .heading,.included-in-guides[class] h1,.included-in-guides[class] h2,.included-in-guides[class] h3,.included-in-guides[class] h4,.included-in-guides[class] h5,.included-in-guides[class] h6,.included-in-guides[class] p.title{display:block;font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-size:1.125rem;font-weight:700;line-height:1.5rem;margin:0 0 .5rem;padding:0;text-transform:uppercase}.included-in-guides[class] ul{border:0;list-style:none;margin:0;padding:0;position:relative}.related-topic-content__wrapper .included-in-guides[class] ul{display:block}.included-in-guides[class] ul:after{background-color:#fff;bottom:0;content:"";display:block;height:.125rem;position:absolute;width:100%}.included-in-guides[class] li{border-bottom:.0625rem solid #d2d2d2;box-sizing:content-box;margin:0;padding:1rem 1.5rem 1rem 0;-moz-column-break-inside:avoid;break-inside:avoid}.included-in-guides[class] li:only-child{grid-column:1/-1}.included-in-guides[class] li:last-child{border:0}@media (min-width:1100px){.included-in-guides[class] li:last-child{border-bottom:.0625rem solid #d2d2d2}}.included-in-guides[class] li p:only-child{margin:0;padding:0}.included-in-guides[class] li a{text-decoration:none}.included-in-guides[class] li a:focus,.included-in-guides[class] li a:hover{text-decoration:underline}.menuseq{display:inline-flex;overflow:hidden;text-indent:-9999em}.menuseq .menu,.menuseq .menuitem,.menuseq .submenu{display:block;position:relative;text-indent:0}.menuseq .menu+.menu:before,.menuseq .menu+.menuitem:before,.menuseq .menu+.submenu:before,.menuseq .menuitem+.menu:before,.menuseq .menuitem+.menuitem:before,.menuseq .menuitem+.submenu:before,.menuseq .submenu+.menu:before,.menuseq .submenu+.menuitem:before,.menuseq .submenu+.submenu:before{content:">";display:inline-block;font-weight:700;padding:0 .25em}.related-topic-content__wrapper{margin:2em 0}.related-topic-content__wrapper--for-guide{margin-bottom:-2.5rem;padding-bottom:.0625rem;position:relative;z-index:1}.related-topic-content__wrapper--for-guide:before{background:#f0f0f0;content:"";display:block;height:100%;left:-3rem;position:absolute;right:-4.5rem;top:0;width:auto;z-index:-1}@media (min-width:1100px){.related-topic-content__wrapper--for-guide:before{left:-2.5rem;right:-3.625rem}}.related-topic-content__wrapper--for-guide summary{padding:1em 2em 1em 2.1875rem}@media (min-width:950px){.related-topic-content__inner-wrapper{display:grid;gap:2em;grid-template-columns:repeat(2,minmax(0,1fr))}}.local-render .rhdocs-content{margin:0 auto}.rhdocs cp-documentation{display:block;padding-bottom:2.5rem}.rhdocs cp-documentation.PFElement,.rhdocs cp-documentation[pfelement]{padding:0}rh-table{display:block}::-webkit-scrollbar,:host .rhdocs ::-webkit-scrollbar{height:.625rem;width:.625rem}::-webkit-scrollbar,::-webkit-scrollbar-track,:host .rhdocs ::-webkit-scrollbar,:host .rhdocs ::-webkit-scrollbar-track{background-color:#d6d6d6}::-webkit-scrollbar-thumb,:host .rhdocs ::-webkit-scrollbar-thumb{background-color:#8e8e8e}*,:host .rhdocs *{scrollbar-color:#8e8e8e #d6d6d6}.rhdocs p:empty,p:empty{display:none}.rhdocs[class] h1 code,.rhdocs[class] h2 code,.rhdocs[class] h3 code,.rhdocs[class] h4 code,.rhdocs[class] h5 code,.rhdocs[class] h6 code,[class] h1 code,[class] h2 code,[class] h3 code,[class] h4 code,[class] h5 code,[class] h6 code{background:transparent;border:0;color:inherit;font:inherit;margin:0;padding:0}.pane-page-title h1,.rhdocs__header__primary-wrapper h1{font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-size:2.25rem;line-height:1.333}.rhdocs details[class]{list-style:none;margin:1rem 0 3rem;padding:0}.rhdocs-toc[class]{background:#f2f2f2;margin:1rem 0 2rem;padding:1rem}.rhdocs-toc[class]>:last-child{margin-bottom:0}.rhdocs-toc[class] .rhdocs-toctitle{font-size:1.25rem;font-weight:400;line-height:1.6667;margin-top:0;text-transform:none}.rhdocs-toc[class] li{margin-bottom:.25em;padding-left:.5em}.preamble{margin:0 0 2rem}.sect1{margin:2rem 0 1rem}:host .sect1,cp-documentation .sect1{margin:0 0 2rem;padding:.0625rem 0 0}:host(.cp-documentation--has-external-header) .sect1:first-child>h2:first-child,:host(.cp-documentation--has-external-header) .sect1:first-child>h3:first-child{margin-top:0}.listingblock,.literalblock{margin:1rem 0}.quoteblock,.verseblock{border-left:.25rem solid #d2d2d2;margin:1rem 0;padding:1rem 1rem 1rem 2rem}.quoteblock.pullleft,.verseblock.pullleft{float:left;margin-right:3rem;width:25rem}@media (min-width:768px){.quoteblock.pullleft,.verseblock.pullleft{margin-left:-1rem}}.quoteblock.pullright,.verseblock.pullright{float:right;margin-left:3rem;width:25rem}@media (min-width:768){.quoteblock.pullright,.verseblock.pullright{margin-right:-2rem}}@media (min-width:1100px){.quoteblock.pullright,.verseblock.pullright{margin-right:-10rem}}.quoteblock>:first-child,.verseblock>:first-child{margin-top:0}.quoteblock .content,.verseblock .content{font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;font-size:1.25rem;line-height:1.6667}.quoteblock .attribution,.verseblock .attribution{font-size:.875rem;font-style:italic;font-weight:600;line-height:1.6667;text-transform:uppercase}.quoteblock .attribution .citetitle,.verseblock .attribution .citetitle{color:#585858}.quoteblock .attribution cite,.verseblock .attribution cite{font-size:1em}.quoteblock blockquote{font-style:italic;margin:0;padding:0}.quoteblock blockquote .content>:first-child{margin-top:0}.quoteblock blockquote .content>:first-child:before{color:#e00;content:"â€œ";display:block;float:left;font-size:2.75rem;font-style:normal;line-height:1.125em;margin-right:.5rem}.quoteblock blockquote .content>:first-child .content>:first-child:before{content:none}.imageblock{margin:1rem 0}.imageblock.pullleft{float:left;margin-right:3rem;width:25rem}@media (min-width:768px){.imageblock.pullleft{margin-left:-1rem}}.imageblock.pullright{float:right;margin-left:3rem;width:25rem}@media (min-width:768){.imageblock.pullright{margin-right:-2rem}}@media (min-width:1100px){.imageblock.pullright{margin-right:-10rem}}.imageblock.interrupter{margin:2rem 0}@media (min-width:768px){.imageblock.interrupter{margin-left:-1rem;margin-right:-2rem}.imageblock.interrupter .caption{margin-left:1rem;margin-right:2rem}}@media (min-width:1100px){.imageblock.interrupter{margin-right:-10rem}.imageblock.interrupter .caption{margin-right:10rem}}.imageblock.interrupter img{max-width:100%}.imageblock .caption{color:#585858;display:block;font-size:.875rem;line-height:1.6667;margin:.5rem 0 0}.rhdocs-footnotes{border-top:.0625rem solid #d2d2d2;margin:3rem 0 1rem;padding:1rem 0 0}.rhdocs-footnotes>ol{margin:0;padding:0 0 0 1.5rem}@supports (counter-reset:footnotenum){.rhdocs-footnotes>ol{counter-reset:footnotenum;list-style:none;padding:0}.rhdocs-footnotes>ol>li{counter-increment:footnotenum}.rhdocs-footnotes>ol>li:before{color:#585858;content:"[" counter(footnotenum) "]";display:inline-block;margin-right:.25rem}}.rhdocs-footer{background:#ededed;color:#151515;font-size:.875rem;line-height:1.6667;margin:3rem 0 0;padding:1rem}.center{margin-left:auto;margin-right:auto}.stretch{width:100%}.visually-hidden{overflow:hidden;position:absolute;clip:rect(0,0,0,0);border:0;height:.0625rem;margin:-.0625rem;padding:0;width:.0625rem}.rh-docs-legal-notice{margin-top:4em}pre,pre[class]{margin:0;padding:1.25em 1em;position:relative}code[class*=language-],pre[class*=language-]{color:#151515;-moz-tab-size:4;-o-tab-size:4;tab-size:4}code.language-none,code.language-text,code.language-txt,pre.language-none,pre.language-text,pre.language-txt{color:#151515}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{background:#cceae7;color:#263238}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#cceae7;color:#263238}:not(pre)>code[class*=language-]{border-radius:.2em;padding:.1em;white-space:normal}.token.atrule{color:#40199a}.token.attr-name{color:#06c}.token.attr-value,.token.attribute{color:#b300b3}.token.boolean{color:#40199a}.token.builtin,.token.cdata,.token.char,.token.class,.token.class-name{color:#06c}.token.comment{color:#6a6e73}.token.constant{color:#40199a}.token.deleted{color:#c9190b}.token.doctype{color:#6a6e73}.token.entity{color:#c9190b}.token.function{color:#40199a}.token.hexcode{color:#b300b3}.token.id,.token.important{color:#40199a;font-weight:700}.token.inserted{color:#06c}.token.keyword{color:#40199a}.token.number{color:#b300b3}.token.operator{color:#06c}.token.prolog{color:#6a6e73}.token.property{color:#06c}.token.pseudo-class,.token.pseudo-element{color:#b300b3}.token.punctuation,.token.regex{color:#06c}.token.selector{color:#c9190b}.token.string{color:#b300b3}.token.symbol{color:#40199a}.token.unit{color:#b300b3}.token.url,.token.variable{color:#c9190b}.rhdocs.local-render{margin:0 auto;max-width:45.8125rem;padding:0 1.5rem}@media print{.field code,.field pre,code[class*=language-],pre,pre[class*=language-]{white-space:pre-wrap!important;word-wrap:break-word!important;overflow-wrap:break-word!important;word-break:break-word!important}}.book-nav__list[class]{display:flex;justify-content:space-between;line-height:var(--jupiter__lineHeight--xs,1.3333);list-style:none;margin:5rem 0 0;padding:0}@media (min-width:1200px){.book-nav__list[class]{display:grid;gap:2rem;grid-template-columns:repeat(2,minmax(0,1fr))}}.book-nav__item a{display:inline-block;font-size:.875rem;font-weight:500;padding-left:1.25rem;position:relative;text-transform:uppercase}.book-nav__item a:before{background:url(/sites/dxp-docs/penumbra-dist/jupiter/images/arrow-down-solid.svg) no-repeat;background-size:contain;content:"";display:block;height:.875rem;left:0;position:absolute;top:.125rem;transform:rotate(90deg);width:.875rem}.book>.titlepage:not(:last-child),.rhdocs .chapter,section[id]{padding-bottom:3.75rem}.book>.titlepage .chapter:last-child,.book>.titlepage section[id]:last-child,.chapter .chapter:last-child,.chapter section[id]:last-child,section[id] .chapter:last-child,section[id] section[id]:last-child{margin-bottom:-3.75rem}.rhdocs .codeblock__wrapper+section[id],pre+section[id]{padding-top:3.75rem}.rhdocs .cta-link{font-size:inherit}.rhdocs a{word-wrap:break-word;overflow-wrap:break-word}.rhdocs .caution,.rhdocs .important,.rhdocs .note,.rhdocs .tip,.rhdocs .warning{padding:.8888888889em;position:relative}.rhdocs .QSIPopOver{bottom:18.75rem!important;top:auto!important}.rhdocs .alert{position:relative}.rhdocs button.dismiss-button{background:none;border:0;cursor:pointer;height:2.5rem;margin-top:-1.25rem;padding:0;position:absolute;right:.3125rem;text-align:center;top:50%;width:2.5rem;z-index:50}.rhdocs button.dismiss-button:after{content:"\f109";display:inline-block;filter:alpha(opacity=30);font-family:rh-web-iconfont;font-size:1.3125rem;font-style:normal;font-variant:normal;font-weight:400;line-height:1;line-height:2.5rem;opacity:.3;text-decoration:inherit;text-rendering:optimizeLegibility;text-transform:none!important;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-smoothing:antialiased}.rhdocs .book>.titlepage,.rhdocs .chapter,.rhdocs section[id]{padding-bottom:var(--rh-space-4xl,64px)}.rhdocs .alert{border:0;border-radius:0}.rhdocs .alert>h2:first-child,.rhdocs .alert>h3:first-child,.rhdocs .alert>h4:first-child,.rhdocs .alert>h5:first-child,.rhdocs .alert>h6:first-child,.rhdocs .alert>p:first-child{margin-top:0!important}.rhdocs .alert>p:last-child{margin-bottom:0!important}.rhdocs .alert-w-icon[class]{padding-left:2.8125rem}.rhdocs .alert-w-icon .alert-icon{float:left;font-size:1.125rem;margin-left:-1.875rem;margin-right:.625rem}.rhdocs .alert-w-icon .alert-icon[class*=" rh-icon-"],.rhdocs .alert-w-icon .alert-icon[class^=rh-icon-]{font-size:2.25rem;line-height:1em;margin-left:-2.5rem;margin-top:-.375rem}.rhdocs .alert-w-icon .alert-icon[class*=" icon-innov-prev"],.rhdocs .alert-w-icon .alert-icon[class^=icon-innov-prev]{font-size:1.3125rem;margin-top:.25rem}.rhdocs .alert-w-icon.alert-plain{background:none;color:#151515;padding-left:5rem}.rhdocs .alert-w-icon.alert-plain .alert-icon{font-size:3rem;margin-left:-4.375rem;margin-right:0}.rhdocs .alert-w-icon.alert-plain.alert-success .alert-icon{color:#3f9c35}.rhdocs .alert-w-icon.alert-plain.alert-info .alert-icon{color:#0088ce}.rhdocs .alert-w-icon.alert-plain.alert-warning .alert-icon{color:#f0ab00}.rhdocs .alert-w-icon.alert-plain.alert-danger .alert-icon{color:#e00}#target_banner .copy-url{float:right;margin-top:0}#target_banner .dropdown-menu{font-size:inherit}.titlepage .svg-img[data*="title_logo.svg"]{margin:1.5rem 0;width:15rem}.para{margin:1.49963rem 0}.para[class]{margin-bottom:1.49963rem}dd{margin-bottom:2.5rem}.rhdocs .card-light,.rhdocs .card-light-gray,.rhdocs .card-light-grey{background:#f0f0f0;border:.0625rem solid #f0f0f0;color:#151515}.rhdocs .card-light-gray.push-bottom:first-child,.rhdocs .card-light-grey.push-bottom:first-child,.rhdocs .card-light.push-bottom:first-child{margin-bottom:3.125rem!important}.rhdocs .card-light a.card-link,.rhdocs .card-light h1,.rhdocs .card-light h2,.rhdocs .card-light h3,.rhdocs .card-light h4,.rhdocs .card-light h5,.rhdocs .card-light h6,.rhdocs .card-light-gray a.card-link,.rhdocs .card-light-gray h1,.rhdocs .card-light-gray h2,.rhdocs .card-light-gray h3,.rhdocs .card-light-gray h4,.rhdocs .card-light-gray h5,.rhdocs .card-light-gray h6,.rhdocs .card-light-grey a.card-link,.rhdocs .card-light-grey h1,.rhdocs .card-light-grey h2,.rhdocs .card-light-grey h3,.rhdocs .card-light-grey h4,.rhdocs .card-light-grey h5,.rhdocs .card-light-grey h6{color:#151515}.rhdocs .card-light-gray.card-active:after,.rhdocs .card-light-grey.card-active:after,.rhdocs .card-light.card-active:after{border-top-color:#f0f0f0}.rhdocs .card-md,.rhdocs .card-narrow{display:block;padding:1.1875rem;white-space:normal;word-wrap:break-word}.rhdocs .card .card-heading.card-heading-sm,.rhdocs .card-sm .card .card-heading{font-size:1.0625em;font-weight:500;line-height:1.5}.rhdocs .card .card-heading.card-heading-flush{margin-bottom:.25rem}.rhdocs .card .card-heading.card-heading-red{color:#d10000}.rhdocs .card>p{margin-top:0}.rhdocs .card>p:last-child{margin-bottom:0}.rhdocs .new-experience{background-color:#e7f1fa;border:.0625rem solid #bee1f4;font-size:1rem;margin:1.5rem;padding:1.5rem;position:relative;z-index:1}@media (min-width:48rem){.new-experience{display:flex}.new-experience--contained{left:50%;position:relative;transform:translateX(-50%);width:calc(100vw - 2.5rem)}}.new-experience__primary-content{flex-grow:1}@media (min-width:48rem){.new-experience__primary-content{margin-right:1.25rem}}.new-experience__title{font-size:inherit;font-weight:inherit;line-height:1.6;margin:0;padding:0}.new-experience__title+a,.new-experience__title+pfe-cta{display:inline-block;margin-top:1.5em}.new-experience__secondary-content{min-width:12.5rem}@media (min-width:48rem){.new-experience__secondary-content{text-align:right}}.example{border-left:.3125rem solid #ccc;margin-bottom:2rem;padding:1rem 0 1rem 1rem}dl.calloutlist[class]{display:grid;gap:1.25em .75em;grid-template-columns:min-content 1fr}dl.calloutlist[class] dt{float:none;margin:0;padding:0}dl.calloutlist[class] dd{margin:0;padding:0}dl.calloutlist[class] dd>:first-child{margin-top:0}dl.calloutlist[class] dd>:last-child{margin-bottom:0}.toast{background-color:#000;background-color:rgba(0,0,0,.9);bottom:.9375rem;box-shadow:0 .125rem .3125rem 0 rgba(0,0,0,.26);color:#fff;left:.9375rem;max-width:32.8125rem;min-width:6.25rem;padding:.9375rem;position:fixed;right:.9375rem;transform:translate3d(0,150%,0);transition:transform .2s cubic-bezier(.465,.183,.153,.946);will-change:transform;z-index:999}.toast.show{transform:translateZ(0)}.toast a{color:#fff;text-decoration:underline}.toast a:focus,.toast a:hover{color:#2b9af3}.toast a.btn{text-decoration:none}.toast .btn.btn-link{color:#fff}.toast .close{color:#fff;opacity:.3;text-decoration:none}.toast .close:focus,.toast .close:hover{color:#fff;opacity:.5}.no-csstransforms3d.csstransitions .toast{transition:all .2s cubic-bezier(.465,.183,.153,.946)}.no-csstransforms3d .toast{opacity:0;visibility:hidden}.no-csstransforms3d .toast.show{opacity:1;visibility:visible}.annotator-outer[class][class]{display:none;flex-direction:column;flex-grow:1;height:auto;margin:0;position:static;width:auto}@media (min-width:1400px){.annotator-outer[class][class]{display:flex}}.annotator-frame[class] *{height:auto}@media (min-width:1400px){.annotator-frame .h-sidebar-iframe[class]{position:static;width:calc(100% + 1.5rem)}}.annotator-toolbar[class][class]{position:static;width:auto}.annotator-toolbar>ul,.annotator-toolbar>ul>li{display:block;height:auto;list-style:none;margin:0;padding:0;width:auto}.annotator-toolbar>ul>li{display:flex;justify-content:flex-end}.annotator-frame[class] .annotator-frame-button--sidebar_toggle,.annotator-outer .annotator-frame-button[class][class],.app-content-wrapper *{font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif!important}.annotator-outer .annotator-frame-button[class][class]{font-size:.9375rem;font-weight:500;height:auto;line-height:1.333;margin-right:1.875rem;padding:.75em 1em;position:static}@media (min-width:1400px){.annotator-outer .annotator-frame-button[class][class]{margin-right:0}}.annotator-outer iframe{flex-grow:1;margin-bottom:1.25rem}@media (min-width:1400px){.annotator-outer iframe{min-height:37.5rem}}.producttitle{color:#000;font-size:1.25rem;text-transform:uppercase}.producttitle .productnumber{color:var(--jupiter__palette__red--50,#e00)}.cp-modal-open,.zoom-open{overflow:hidden}.cp-modal,.cp-video-modal,.zoom-modal{bottom:0;display:none;filter:alpha(opacity=0);left:0;opacity:0;outline:0;overflow:hidden;position:fixed;right:0;top:0;transition:all .2s cubic-bezier(.465,.183,.153,.946);z-index:1040;z-index:1050;-webkit-overflow-scrolling:touch}.rhdocs .in.cp-modal,.rhdocs .in.cp-video-modal,.rhdocs .in.zoom-modal{display:block;filter:alpha(opacity=100);opacity:1;overflow-x:hidden;overflow-y:auto}.rhdocs .cp-modal .close,.rhdocs .cp-video-modal .close,.rhdocs .zoom-modal .close{background-color:#fff;border-radius:50%;color:#1a1a1a;font-size:1.75rem;height:28px;height:1.75rem;line-height:1.75rem;margin-bottom:.375rem;margin-top:0;opacity:.9;position:absolute;right:-.5rem;text-shadow:none;top:0;width:28px;width:1.75rem}.cp-modal .close:after,.cp-video-modal .close:after,.zoom-modal .close:after{line-height:1.75rem}.cp-modal-wrap,.zoom-wrap{margin:.625rem;padding-top:.5rem;position:relative}@media (min-width:48rem){.rhdocs .cp-modal-wrap,.rhdocs .zoom-wrap{margin:2.8125rem auto;width:38.4375rem}}@media (min-width:62rem){.rhdocs .cp-modal-wrap,.rhdocs .zoom-wrap{width:49.8958rem}}@media (min-width:75rem){.rhdocs .cp-modal-wrap,.rhdocs .zoom-wrap{width:60.3125rem}}.rhdocs .cp-modal-body :last-child{margin-bottom:0}.rhdocs .cp-modal-backdrop,.rhdocs .zoom-backdrop{background-color:#000;bottom:0;display:none;filter:alpha(opacity=0);left:0;opacity:0;position:fixed;right:0;top:0;transition:opacity .2s cubic-bezier(.465,.183,.153,.946);z-index:1040}.rhdocs .in.cp-modal-backdrop,.rhdocs .in.zoom-backdrop{display:block;filter:alpha(opacity=80);opacity:.8}.rhdocs .cp-modal-body{background:#fff;padding:1.875rem}.rhdocs .cp-modal[data-cp-modal-video=true] .cp-modal-body,.rhdocs .cp-video-modal .cp-modal-body{padding:0}.rhdocs [data-action=zoom]{position:relative}.rhdocs [data-action=zoom]:after{background:rgba(0,0,0,.4);bottom:0;color:#fff;display:inline-block;font-family:rh-web-iconfont;font-style:normal;font-variant:normal;font-weight:400;line-height:1;padding:.375rem;position:absolute;right:0;text-decoration:inherit;text-decoration:none!important;text-rendering:optimizeLegibility;text-transform:none!important;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-smoothing:antialiased}.rhdocs [data-action=zoom]:focus:after,.rhdocs [data-action=zoom]:hover:after{background:rgba(0,0,0,.9)}.rhdocs .zoom-wrap .zoom-larger{text-align:center}.rhdocs .zoom-wrap .zoom-larger a{color:#fff}.rhdocs .zoom-wrap .zoom-larger a:focus,.rhdocs .zoom-wrap .zoom-larger a:hover{color:#fff;text-decoration:underline}.rhdocs .zoom-wrap .zoom-larger a:after{content:"â¿»";display:inline-block;margin-left:.25rem}.rhdocs .zoom-body{background:#fff;border-radius:.5rem;margin:0 0 1rem;padding:1rem;text-align:center}.rhdocs .zoom-body .video-wrapper{height:0;overflow:hidden;padding-bottom:56.25%;position:relative}.rhdocs .zoom-body .video-wrapper[data-aspect-ratio="4:3"]{padding-bottom:75%}.rhdocs .zoom-body iframe{height:100%;left:0;position:absolute;top:0;width:100%}.rhdocs .para>.title[class],.rhdocs p.title[class]{font-size:1rem;font-style:normal;font-weight:700;line-height:1.6667;margin:1.25rem 0 0;text-transform:none}.rhdocs .para>.title[class]+.content>:first-child,.rhdocs .para>.title[class]+p,.rhdocs p.title[class]+.content>:first-child,.rhdocs p.title[class]+p{margin-top:0}.rhdocs [class] pre .caution,.rhdocs [class] pre .important,.rhdocs [class] pre .note,.rhdocs [class] pre .tip,.rhdocs [class] pre .warning{background:transparent;border:0;color:inherit;font:inherit;margin:0;padding:0}.rhdocs [class] pre .caution:after,.rhdocs [class] pre .important:after,.rhdocs [class] pre .note:after,.rhdocs [class] pre .tip:after,.rhdocs [class] pre .warning:after{content:none}.rhdocs [class] code.email{background-color:transparent;font:inherit;padding:0}.rhdocs [class] .author{margin-bottom:1.5rem}.rhdocs [class] .author .author{margin-bottom:0}.rhdocs table{margin:2rem 0}.rhdocs [class] table{width:auto}.rhdocs table .table-contents table{max-width:100%;overflow:auto}.rhdocs rh-table table{margin:0;max-width:9999em;overflow:visible}.rhdocs td,.rhdocs th{border-left:0;padding:.5em 1rem;transition:background .25s ease-out}.rhdocs td.content--md[class][class],.rhdocs th.content--md[class][class]{min-width:13em}.rhdocs td.content--lg[class][class],.rhdocs th.content--lg[class][class]{min-width:20em}.rhdocs thead th{padding-top:1.5em}.rhdocs caption{color:currentColor;color:var(--pfe-table__caption--Color,currentColor);font-weight:700;margin-bottom:.5rem;margin-top:.5rem;text-align:center}.rhdocs .revhistory table td,.rhdocs .revhistory table th{border-color:transparent}.rhdocs .revhistory table td{padding:.625rem .875rem}.rhdocs .revhistory table.simplelist{margin:0}@media print{#masthead{display:none!important}}.rh-table--is-full-screen #to-top{display:none}.rhdocs{--rh-table--maxHeight:calc(100vh - 6.25rem);color:#151515;font-family:var(--rh-font-family-body-text,RedHatText,"Red Hat Text","Noto Sans Arabic","Noto Sans Hebrew","Noto Sans JP","Noto Sans KR","Noto Sans Malayalam","Noto Sans SC","Noto Sans TC","Noto Sans Thai",Helvetica,Arial,sans-serif);font-size:var(--rh-body-copy-lage,1.125rem);line-height:1.6667;-moz-tab-size:4;-o-tab-size:4;tab-size:4}.rhdocs rh-codeblock::slotted(#content){border-radius:.25rem;padding:var (--rh-space-lg,16px)}.rhdocs rh-codeblock .screen{display:grid;grid-template-columns:1fr 4.375rem}.rhdocs rh-codeblock[class][class][class][class][class]{max-width:99999em}.rhdocs .codeblock__copy span{display:block;height:0;position:absolute;visibility:hidden;width:0}.rhdocs .codeblock__copy:focus{outline:.0625rem dashed currentcolor}.rhdocs .codeblock__copy svg#icon--copy{height:1rem;width:1rem}.rhdocs pre{border:0;max-height:-moz-max-content;max-height:max-content}.rhdocs pre,pre[class]{margin:0;padding:1.25em 1em;position:relative}.rhdocs rh-code-block>div.codeblock__inner-wrapper>pre,.rhdocs rh-code-block>div.codeblock__inner-wrapper>pre[class]{margin:0;padding:0;position:relative}.rhdocs code[class*=language-],pre[class*=language-]{color:#151515;-moz-tab-size:4;-o-tab-size:4;tab-size:4}.rhdocs code.literal{background:#eee;border-radius:.25rem;color:#000;font-size:.875rem;line-height:1.6667;overflow-wrap:break-word;padding:.125em .5em;word-break:break-word}.rhdocs code.literal,.rhdocs kbd,.rhdocs span.keycap{font-family:RedHatMono,Red Hat Mono,Consolas,monospace}.rhdocs kbd,.rhdocs span.keycap{background-color:#eee;background-image:linear-gradient(180deg,#ddd,#eee,#fff);border-radius:.1875rem;box-shadow:0 -.0625rem 0 0 #fff,0 .0625rem 0 .1875rem #aaa;font-size:90%;font-weight:400;margin:0 .25rem;padding:.125rem .375rem}.rhdocs ol,.rhdocs ul{margin:1rem 0;padding:0 0 0 1.5rem}.rhdocs ._additional-resources[class][class],.rhdocs ._additional-resources[class][class][id]:last-child{background:#fff;border:.0625rem solid #d2d2d2;border-radius:.1875rem;margin:2em 0 4em;padding:2rem 2rem 1rem}.rhdocs ._additional-resources[class][class] ul{border:0;list-style:none;margin:0;padding:0;position:relative}.rhdocs ._additional-resources[class][class] li{border-bottom:.0625rem solid #d2d2d2;box-sizing:content-box;margin:0;padding:1rem 1.5rem 1rem 0;-moz-column-break-inside:avoid;break-inside:avoid}.rhdocs ._additional-resources[class][class] li:last-child{border:0}.rhdocs section.section#additional_resource .additional-resources__heading,.rhdocs section.section#additional_resource .heading,.rhdocs section.section#additional_resource h1,.rhdocs section.section#additional_resource h2,.rhdocs section.section#additional_resource h3,.rhdocs section.section#additional_resource h4,.rhdocs section.section#additional_resource h5,.rhdocs section.section#additional_resource h6,.rhdocs section.section#additional_resource p.title{display:block;font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-size:1.125rem;font-weight:700;line-height:1.5rem;margin:0 0 .5rem;padding:0;text-transform:uppercase}.rhdocs section.section:first-of-type{margin-top:var(--rh-space-4xl,64px)}.rhdocs section.section p{margin-bottom:var(--rh-space-lg,16px);margin-top:0;word-wrap:break-word}.rhdocs .section.section h1,.rhdocs .section.section h2,.rhdocs .section.section h3,.rhdocs .section.section h4,.rhdocs .section.section h5,.rhdocs .section.section h6,.rhdocs h1,.rhdocs h2,.rhdocs h3,.rhdocs h4,.rhdocs h5,.rhdocs h6{font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-weight:400;line-height:1.3333}.rhdocs h1:first-of-type,.rhdocs h2:first-of-type,.rhdocs h3:first-of-type,.rhdocs h4:first-of-type,.rhdocs h5:first-of-type,.rhdocs h6:first-of-type{margin-top:0}.rhdocs h1,.rhdocs h2,.rhdocs h3,.rhdocs h4,.rhdocs h5,.rhdocs h6{font-family:RedHatDisplay,Red Hat Display,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.3333}.rhdocs h2,.rhdocs section.section h2{font-size:var(--rh-font-size-heading-md,1.75rem)}.rhdocs h3,.rhdocs section.section h3{font-size:1.5rem;font-weight:400}.rhdocs dl dt{font-weight:600;margin:.5rem 0}.rhdocs dl{display:block;margin-block-end:1em;margin-block-start:1em;margin-inline-end:0;margin-inline-start:0}.rhdocs .para{margin:1.49963rem 0}.rhdocs dl.calloutlist[class] dt{float:none;margin:0;padding:0}.rhdocs dl.calloutlist[class] dd>:last-child{margin-bottom:0}.rhdocs dl.calloutlist[class]{display:grid;gap:1.25em .75em;grid-template-columns:fit-content(40%) 1fr}.rhdocs .calloutlist dt{clear:left;display:flex;flex-wrap:wrap;float:left;margin:0;padding:0 .5rem 0 0}.rhdocs .calloutlist dt a:not(:first-child){padding-left:4px}.rhdocs dl.calloutlist[class] dd{margin:0;padding:0}.rhdocs .callout,.rhdocs .colist>ol>li:before,.rhdocs .conum{background:#06c;border-radius:50%;color:#fff;display:inline-block;font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;font-size:.75rem;font-style:normal;font-weight:600;height:1.25rem;line-height:1.35rem;padding:0;position:relative;text-align:center;top:-.125em;vertical-align:middle;width:1.25rem}.rhdocs img,.rhdocs object,.rhdocs svg{display:inline-block;max-width:100%;vertical-align:middle}.rhdocs .titlepage .svg-img[data*="title_logo.svg"]{margin:1.5rem 0;width:15rem}.rhdocs[class] .author{margin-bottom:1.5rem}.rhdocs[class] .author .author{margin-bottom:0}.rhdocs .para>.title[class],p.title[class]{font-size:1rem;font-style:normal;font-weight:700;line-height:1.6667;margin:1.25rem 0 0}.rhdocs .example{border-left:.3125rem solid #ccc;margin-bottom:2rem;padding:1rem 0 1rem 1rem}.rhdocs code{background:#eee;color:#000;font-family:RedHatMono,Red Hat Mono,Consolas,monospace;font-size:.875rem;line-height:1.6667;overflow-wrap:break-word;padding:.125em .5em;word-break:break-word}.rhdocs .para[class]{margin-bottom:1.49963rem}.rhdocs[class] code.email{background-color:transparent;font:inherit;padding:0}rh-alert.admonition #description,rh-alert.admonition p{font-size:var(--rh-font-size-body-text-md,1rem)}rh-alert{width:-moz-fit-content;width:fit-content}.rhdocs .producttitle{color:#000;font-size:1.25rem;text-transform:uppercase}.rhdocs dl{margin:1rem 0}.rhdocs dl dt{font-weight:600;margin:.5rem 0}.rhdocs ol ol{list-style:lower-roman}.rhdocs .codeblock--processed pf-clipboard-copy::part(input),.rhdocs .codeblock--processed pf-clipboard-copy::part(span){display:none}.token.tag{color:#c9190b}.calloutlist div.para{margin:0}rh-alert.admonition{margin-bottom:var(--rh-space-lg,1rem)}.guibutton,.guimenu,.guimenuitem{font-weight:700}.guibutton{font-size:90%;padding:.1875rem}.guibutton:before{content:"["}.guibutton:after{content:"]"}.docs-content-container,.rhdocs{--rh-table--maxHeight:calc(100vh - 6.25rem);color:#151515;font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;font-size:1.125rem;line-height:1.6667;-moz-tab-size:4;-o-tab-size:4;tab-size:4}pre[hidden]{display:none}.codeblock[class][class][class][class][class]{max-width:99999em}.codeblock__wrapper{background:var(--rh-color-surface-lighter,#f2f2f2);margin:1rem 0;overflow:visible;position:relative;transform:translate(0);z-index:0}.codeblock__inner-wrapper:after{content:"";display:block;min-height:.625rem;width:4.375rem}.codeblock__copy{--pfe-clipboard--icon--Color--hover:#06c;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#f0efef;height:1.75rem;left:calc(100% - 2.75rem - var(--scrollbar__width, 0px));padding:.3125rem .375rem;position:absolute;top:1rem;width:1.75rem;z-index:2}.codeblock__inner-wrapper pre{border:0;max-height:-moz-max-content;max-height:max-content}.pfe-clipboard:not([copied]) .pfe-clipboard__text--success,:host(:not([copied])) .pfe-clipboard__text--success{display:none!important}.codeblock[class]{margin:0;overflow:visible;padding-right:0}pre{display:block;font-size:.8125rem;line-height:1.42857;margin:0 0 .625rem;word-break:break-all;word-wrap:break-word;background-color:var(--rh-color-surface-lighter,#f2f2f2);border:.0625rem solid #ccc;border-radius:.25rem;color:#333}.docs-content-container pre,.rhdocs pre{background:var(--rh-color-surface-lighter,#f2f2f2);color:#151515;font-family:RedHatMono,Red Hat Mono,Consolas,monospace;font-size:.875rem;line-height:1.6667;overflow-wrap:normal;white-space:pre;word-break:normal}.rhdocs pre[class]{line-height:1.6667;overflow-x:auto}rh-codeblock pre[class][class]{overflow-x:auto}.pfe-clipboard__text--success{background-color:#ddd;border:1px solid #000;border-radius:2px}*,:after,:before{box-sizing:border-box}:root{--rh-space-xs:4px;--rh-space-sm:6px;--rh-space-md:8px;--rh-space-lg:16px;--rh-space-xl:24px;--rh-space-2xl:32px;--rh-space-3xl:48px;--rh-space-4xl:64px;--rh-space-5xl:80px;--rh-space-6xl:96px;--rh-space-7xl:128px;--rh-font-size-body-text-xs:.75rem;--rh-font-size-body-text-sm:.875rem;--rh-font-size-body-text-md:1rem;--rh-font-size-body-text-lg:1.125rem;--rh-font-size-body-text-xl:1.25rem;--rh-font-size-body-text-2xl:1.5rem;--rh-font-size-heading-xs:1.25rem;--rh-font-size-heading-sm:1.5rem;--rh-font-size-heading-md:1.75rem;--rh-font-size-heading-lg:2.25rem;--rh-font-size-heading-xl:2.5rem;--rh-font-size-heading-2xl:3rem;--pfe-navigation--logo--maxWidth:200px;--pfe-navigation__logo--height:40px;--pfe-navigation--fade-transition-delay:500ms;--pfe-navigation__nav-bar--highlight-color:var(--rh-color-brand-red-on-dark,#e00);--pf-global--icon--FontSize--sm:.75rem}body,html{font-family:Red Hat Text,sans-serif;font-size:var(--rh-font-size-body-text-md,1rem);line-height:var(--rh-line-height-body-text,1.5);margin:0}h1,h2,h3,h4,h5,h6{font-family:Red Hat Display,sans-serif;font-weight:400;line-height:var(--rh-line-height-heading,1.3)}h1{font-size:var(--rh-font-size-heading-2xl,3rem);line-height:62px}h2{font-size:var(--rh-font-size-heading-xl,2.5rem);line-height:48px}h3{font-size:var(--rh-font-size-heading-lg,2.25rem)}h4{font-size:var(--rh-font-size-heading-md,2.25rem)}h5{font-size:var(--rh-font-size-heading-sm,2.25rem)}h6{font-size:var(--rh-font-size-heading-xs,2.25rem)}main{line-height:30px}section{padding-bottom:3rem;padding-top:3rem}img{height:auto;max-width:100%}a{color:var(--rh-color-interactive-blue-darker,#06c);text-decoration:none}a:hover{color:var(--rh-color-interactive-blue-darkest,#004080)}rh-alert.html-container a{text-decoration:underline}.container{padding-left:12px;padding-right:12px}.container,.container-fluid{margin-left:auto;margin-right:auto;width:100%}.container-fluid{padding:12px}@media (min-width:576px){.container{max-width:540px}}@media (min-width:768px){.container{max-width:720px}}@media (min-width:992px){.container{max-width:960px}}@media (min-width:1200px){.container{min-width:1140px}}@media (min-width:1400px){.container{min-width:1320px}}.grid{display:grid;gap:var(--rh-space-xl,24px)}.grid-center{margin:auto}.grid.grid-col-2{grid-template-columns:repeat(2,1fr)}.grid.grid-col-3{grid-template-columns:repeat(3,1fr)}.grid.grid-col-4{grid-template-columns:repeat(4,1fr)}.grid.grid-col-5{grid-template-columns:repeat(5,1fr)}.grid.grid-col-6{grid-template-columns:repeat(6,1fr)}.grid.grid-col-7{grid-template-columns:repeat(7,1fr)}.grid.grid-col-8{grid-template-columns:repeat(8,1fr)}.grid.grid-col-9{grid-template-columns:repeat(9,1fr)}.grid.grid-col-10{grid-template-columns:repeat(10,1fr)}.grid.grid-col-11{grid-template-columns:repeat(11,1fr)}.grid.grid-col-12{grid-template-columns:repeat(12,1fr)}@media (min-width:768px){.grid.grid-col-md-2{grid-template-columns:repeat(2,1fr)}.grid.grid-col-md-3{grid-template-columns:repeat(3,1fr)}.grid.grid-col-md-4{grid-template-columns:repeat(4,1fr)}.grid.grid-col-md-5{grid-template-columns:repeat(5,1fr)}.grid.grid-col-md-6{grid-template-columns:repeat(6,1fr)}.grid.grid-col-md-7{grid-template-columns:repeat(7,1fr)}.grid.grid-col-md-8{grid-template-columns:repeat(8,1fr)}.grid.grid-col-md-9{grid-template-columns:repeat(9,1fr)}.grid.grid-col-md-10{grid-template-columns:repeat(10,1fr)}.grid.grid-col-md-11{grid-template-columns:repeat(11,1fr)}.grid.grid-col-md-12{grid-template-columns:repeat(12,1fr)}}@media (min-width:992px){.grid.grid-col-lg-2{grid-template-columns:repeat(2,1fr)}.grid.grid-col-lg-3{grid-template-columns:repeat(3,1fr)}.grid.grid-col-lg-4{grid-template-columns:repeat(4,1fr)}.grid.grid-col-lg-5{grid-template-columns:repeat(5,1fr)}.grid.grid-col-lg-6{grid-template-columns:repeat(6,1fr)}.grid.grid-col-lg-7{grid-template-columns:repeat(7,1fr)}.grid.grid-col-lg-8{grid-template-columns:repeat(8,1fr)}.grid.grid-col-lg-9{grid-template-columns:repeat(9,1fr)}.grid.grid-col-lg-10{grid-template-columns:repeat(10,1fr)}.grid.grid-col-lg-11{grid-template-columns:repeat(11,1fr)}.grid.grid-col-lg-12{grid-template-columns:repeat(12,1fr)}}.span-1{grid-column:span 1}.span-2{grid-column:span 2}.span-3{grid-column:span 3}.span-4{grid-column:span 4}.span-5{grid-column:span 5}.span-6{grid-column:span 6}.span-7{grid-column:span 7}.span-8{grid-column:span 8}.span-9{grid-column:span 9}.span-10{grid-column:span 10}.span-11{grid-column:span 11}.span-12{grid-column:span 12}@media (min-width:399px){.span-xs-1{grid-column:span 1}.span-xs-2{grid-column:span 2}.span-xs-3{grid-column:span 3}.span-xs-4{grid-column:span 4}.span-xs-5{grid-column:span 5}.span-xs-6{grid-column:span 6}.span-xs-7{grid-column:span 7}.span-xs-8{grid-column:span 8}.span-xs-9{grid-column:span 9}.span-xs-10{grid-column:span 10}.span-xs-11{grid-column:span 11}.span-xs-12{grid-column:span 12}}@media (min-width:768px){.span-md-1{grid-column:span 1}.span-md-2{grid-column:span 2}.span-md-3{grid-column:span 3}.span-md-4{grid-column:span 4}.span-md-5{grid-column:span 5}.span-md-6{grid-column:span 6}.span-md-7{grid-column:span 7}.span-md-8{grid-column:span 8}.span-md-9{grid-column:span 9}.span-md-10{grid-column:span 10}.span-md-11{grid-column:span 11}.span-md-12{grid-column:span 12}}@media (min-width:992px){.span-lg-1{grid-column:span 1}.span-lg-2{grid-column:span 2}.span-lg-3{grid-column:span 3}.span-lg-4{grid-column:span 4}.span-lg-5{grid-column:span 5}.span-lg-6{grid-column:span 6}.span-lg-7{grid-column:span 7}.span-lg-8{grid-column:span 8}.span-lg-9{grid-column:span 9}.span-lg-10{grid-column:span 10}.span-lg-11{grid-column:span 11}.span-lg-12{grid-column:span 12}}@media (min-width:1025px){.span-xl-1{grid-column:span 1}.span-xl-2{grid-column:span 2}.span-xl-3{grid-column:span 3}.span-xl-4{grid-column:span 4}.span-xl-5{grid-column:span 5}.span-xl-6{grid-column:span 6}.span-xl-7{grid-column:span 7}.span-xl-8{grid-column:span 8}.span-xl-9{grid-column:span 9}.span-xl-10{grid-column:span 10}.span-xl-11{grid-column:span 11}.span-xl-12{grid-column:span 12}}@media (min-width:1200px){.span-2xl-1{grid-column:span 1}.span-2xl-2{grid-column:span 2}.span-2xl-3{grid-column:span 3}.span-2xl-4{grid-column:span 4}.span-2xl-5{grid-column:span 5}.span-2xl-6{grid-column:span 6}.span-2xl-7{grid-column:span 7}.span-2xl-8{grid-column:span 8}.span-2xl-9{grid-column:span 9}.span-2xl-10{grid-column:span 10}.span-2xl-11{grid-column:span 11}.span-2xl-12{grid-column:span 12}}.flex{display:flex;flex-direction:column;gap:var(--rh-space-lg,16px)}.flex-row{flex-direction:row}.flex-column{flex-direction:column}@media (min-width:768px){.flex-md-row{flex-direction:row}.flex-md-column{flex-direction:column}}.typography-h1{font-size:var(--rh-font-size-heading-2xl,3rem)}.typography-h2{font-size:var(--rh-font-size-heading-xl,2.5rem)}.typography-h3{font-size:var(--rh-font-size-heading-lg,2.25rem)}.typography-h4{font-size:var(--rh-font-size-heading-md,1.75rem)}.typography-h5{font-size:var(--rh-font-size-heading-sm,1.5rem)}.typography-h6{font-size:var(--rh-font-size-heading-xs,1.25rem)}.content section{padding:0}.content h1,.content h2,.content h3,.content h4,.content h5,.content h6{margin:var(--rh-space-lg,16px) 0}.sr-only{height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);border:0}.list-unstyled{list-style:none;padding-left:0}.tooltip-content{align-items:center;display:flex;font-family:Red Hat Text;justify-content:center;text-transform:none}.tooltip-content .check-icon{margin-left:var(--rh-space-md,8px)}.doc-image-link{display:inline-block;text-decoration:none}.modal-img{display:block;width:100%}.modal-helper-text{margin-top:.5rem;text-align:center}.modal-helper-text a{color:#000;cursor:pointer}.modal-helper-text a:hover{text-decoration:underline}.modal-helper-text a:after{content:"⿻";margin-left:.25rem}pf-modal.pf-img-modal{--pf-c-modal-box--MaxHeight:90vh;overflow-y:scroll}pf-modal.pf-img-modal::part(close-button){background-color:#fff;border-radius:50%;color:#000;margin-right:-2rem;margin-top:-2rem}pf-modal.pf-img-modal::part(close-button):hover{opacity:.7}h2.truste-title{line-height:normal;margin-top:0}rh-alert p[slot=header]{color:#002952}@media (width < 992px){html:has(nav.mobile-nav .mobile-nav-wrapper){scroll-behavior:smooth;scroll-padding-top:4rem}html:has(nav.mobile-nav .mobile-jump-links){scroll-padding-top:7rem}html:has(nav.mobile-nav.hide-mobile-nav){scroll-padding-top:2rem}}.highlight{background:#fff4cc;color:#000}</style>
<style>rh-alert[data-v-84359384]{width:100%}</style>
<style>.search-btn[data-v-edc0d12c]{align-items:center;background-color:var(--rh-color-canvas-black,#151515);border:3px solid var(--rh-color-canvas-black,#151515);cursor:pointer;display:flex;flex-direction:column;height:100%;justify-content:center;outline:none;padding:14px var(--rh-space-md,8px)}.search-btn[data-v-edc0d12c]:focus{border-top:3px solid var(--rh-color-accent-brand-on-light,#e00);outline:2px dotted var(--rh-color-white,#fff)}.search-btn .search-icon[data-v-edc0d12c]{height:26px;padding:2px 0 var(--rh-space-xs,4px);width:20px}.search-btn .search-icon[data-v-edc0d12c],.search-icon-helper-text[data-v-edc0d12c]{color:var(--rh-color-white,#fff)}.search-mobile[data-v-edc0d12c]{margin-bottom:var(--rh-space-2xl,32px)}.search-mobile form[data-v-edc0d12c]{display:flex;gap:var(--rh-space-md,8px);margin:auto}.search-box[data-v-edc0d12c]{width:35rem}nav[data-v-edc0d12c]{background-color:#151515;justify-content:space-between;width:100%}a[data-v-edc0d12c],a[data-v-edc0d12c]:visited{color:#fff;display:inline-block;font-size:var(--rh-font-size-body-text-md,1rem)}.skip-link[class][class][data-v-edc0d12c]{font-size:var(--pf-global--FontSize--sm,.875rem);line-height:18px}.skip-link[class][class][data-v-edc0d12c]:focus{border-radius:.21429em;height:auto;left:50%;padding:.42857em .57143em;position:fixed;top:8px;transform:translateX(-50%);width:auto;z-index:99999;clip:auto;background:#fff;background:var(--pfe-navigation__skip-link--BackgroundColor,var(--pfe-theme--color--surface--lightest,#fff));color:#06c;color:var(--pfe-navigation__skip-link--Color,var(--pfe-theme--color--link,#06c));text-decoration:none}.visually-hidden[data-v-edc0d12c]{border:1px solid #06c;height:1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);white-space:nowrap}h3[data-v-edc0d12c]{color:#464646;font-family:var(--rh-font-family-heading,"Red Hat Display",Helvetica,Arial,sans-serif);font-size:var(--rh-font-size-body-text-lg,1.125rem)}.language-picker[data-v-edc0d12c]{align-items:center;background-color:#fff;display:flex;flex-direction:column;padding:var(--rh-space-xl,24px);width:100%}.language-picker h3[data-v-edc0d12c]{margin:0;padding:0 1rem 1rem}.language-picker ul[data-v-edc0d12c]{margin:0;padding:0}.language-picker a[data-v-edc0d12c]{color:#06c}.language-picker li[data-v-edc0d12c]{list-style:none}.language-dropdown[data-v-edc0d12c]{background:#fff;box-shadow:0 3px 6px rgba(0,0,0,.098);display:block!important;position:absolute;right:0;width:100%;z-index:104}.pfe-navigation.pfe-navigation--processed>[slot=secondary-links][data-v-edc0d12c]{height:auto;overflow:visible;visibility:visible;width:auto}.upper-navigation[data-v-edc0d12c]{padding:0 var(--rh-space-2xl,32px)}.upper-nav-container[data-v-edc0d12c]{border-bottom:1px solid #404040;margin:0}.upper-nav-hidden[data-v-edc0d12c]:not(:focus):not(:active){clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}.upper-nav-menu[data-v-edc0d12c]{align-items:center;display:flex;justify-content:flex-end;line-height:1.444;list-style:none;margin-bottom:0;margin-top:0;padding-left:0}.upper-nav-menu[data-v-edc0d12c],.upper-nav-menu>li[data-v-edc0d12c]{position:relative}.upper-nav-menu>li:not(:first-child)>a[data-v-edc0d12c]:before,.upper-nav-menu>li:not(:first-child)>button[data-v-edc0d12c]:before{background-color:#404040;content:"";height:40%;left:0;position:absolute;top:30%;width:1px}li[data-v-edc0d12c]{display:list-item;margin:0;padding:0;text-align:-webkit-match-parent}.upper-nav-menu button.upper-nav-links[data-v-edc0d12c]{border:0;border-top:3px solid transparent;cursor:pointer;line-height:1.444}.upper-nav-menu button.upper-nav-links[aria-expanded=true][data-v-edc0d12c]{outline-color:#151515}.upper-nav-menu button.upper-nav-links[aria-expanded=true] .upper-nav-arrow[data-v-edc0d12c]{filter:invert(0) sepia(2%) saturate(21%) hue-rotate(257deg) brightness(108%) contrast(100%);transform:rotate(270deg)}.upper-nav-menu button.upper-nav-links[aria-expanded=true][data-v-edc0d12c]:before{display:none}.upper-nav-menu .upper-nav-links[data-v-edc0d12c]{background-color:var(--pfe-navigation--BackgroundColor,var(--pfe-theme--color--surface--darkest,#151515));border-top:3px solid transparent;color:#fff;display:block;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-sm,.875rem);outline:none;padding:12px 12px 14px;text-decoration:none}.upper-nav-menu .upper-nav-links[data-v-edc0d12c]:hover{border-top-color:#b8bbbe}.upper-nav-menu .upper-nav-links[data-v-edc0d12c]:focus-within{outline:1px dashed var(--rh-color-white,#fff);outline-offset:-1px}.upper-nav-menu .upper-nav-links[data-v-edc0d12c]:focus-within:before{display:none}.upper-nav-dropdown-container[data-v-edc0d12c]{background:#fff;box-shadow:0 3px 6px rgba(0,0,0,.098);display:none;padding:5px 30px 24px;position:absolute;right:0;top:100%;width:500px;z-index:105}.upper-nav-dropdown-container>ul[data-v-edc0d12c]{-moz-column-count:2;column-count:2;list-style-type:none;padding:0;width:auto}.upper-nav-dropdown-container>ul li[data-v-edc0d12c]{color:#151515;font-family:var(--rh-font-family-heading,"Red Hat Display",Helvetica,Arial,sans-serif);font-size:var(--rh-font-size-body-text-sm,.875rem);list-style-type:none;margin-bottom:0}.upper-nav-dropdown-container>ul li span[data-v-edc0d12c]{font-weight:var(--rh-font-weight-body-text-medium,500)}.upper-nav-dropdown-container>ul ul[data-v-edc0d12c]{padding-left:0;padding-top:9px}.upper-nav-dropdown-container>ul>li[data-v-edc0d12c]{padding-top:19px;-moz-column-break-inside:avoid;break-inside:avoid}.upper-nav-dropdown-container>ul>li>ul>li[data-v-edc0d12c]{line-height:1.45;padding:4px 0}.upper-nav-menu .upper-nav-arrow[data-v-edc0d12c]{display:inline-block;filter:invert(100%) sepia(8%) saturate(7%) hue-rotate(1turn) brightness(100%) contrast(93%);height:18px;margin-left:5px;transform:rotate(90deg);vertical-align:middle;width:8px}#pfe-navigation__secondary-links .show[data-v-edc0d12c],.upper-navigation .show[data-v-edc0d12c]{display:block}.upper-nav-menu .upper-nav-links[aria-expanded=true][data-v-edc0d12c]:active,.upper-nav-menu .upper-nav-links[aria-expanded=true][data-v-edc0d12c]:focus,.upper-nav-menu .upper-nav-links[aria-expanded=true][data-v-edc0d12c]:hover{background-color:#fff;color:#151515}.upper-nav-menu .upper-nav-links[aria-expanded=true][data-v-edc0d12c]{background-color:#fff;border-top-color:#b8bbbe;color:#000;position:relative;z-index:1}.upper-nav-dropdown-container>ul a[data-v-edc0d12c]{color:var(--rh-color-accent-base-on-light,#06c);font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:14px;text-decoration:none}.pfe-navigation__search[data-v-edc0d12c]{background-color:var(--rh-color-white,#fff)}.pfe-navigation__search form[data-v-edc0d12c]{display:flex;gap:var(--rh-space-md,8px);margin:auto;max-width:992px}pfe-navigation [slot=secondary-links] .buttons[data-v-edc0d12c]{display:flex;flex-wrap:wrap;gap:var(--rh-space-md,8px);margin-top:4px}pfe-navigation [slot=secondary-links] .buttons a[data-v-edc0d12c]{border:1px solid #d2d2d2;border-radius:3px;color:#06c;cursor:pointer;flex-basis:calc(50% - 5px);font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-weight:var(--rh-font-weight-code-regular,400);padding:1em;text-align:center;text-decoration:none}pfe-navigation [slot=secondary-links] .mobile-lang-select[data-v-edc0d12c]{border:1px solid #d2d2d2;border-bottom-color:#3c3f42;cursor:pointer;display:flex;margin:3rem 0;position:relative}pfe-navigation [slot=secondary-links] .mobile-lang-select label[data-v-edc0d12c]{bottom:100%;color:#000;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:14px;font-weight:500;margin-bottom:5px;position:absolute}pfe-navigation [slot=secondary-links] .mobile-lang-select select[data-v-edc0d12c]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border-style:none;color:#000;flex-basis:100%;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:16px;line-height:24px;padding:6px 24px 6px 8px}select[data-v-edc0d12c]{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6' fill='none' viewBox='0 0 10 6'%3E%3Cpath fill='%23151515' d='M.678 0h8.644c.596 0 .895.797.497 1.195l-4.372 4.58c-.298.3-.695.3-.993 0L.18 1.196C-.216.797.081 0 .678 0'/%3E%3C/svg%3E");background-position:98% 50%;background-repeat:no-repeat}#inputLabel[data-v-edc0d12c]{align-items:center;display:flex;position:relative}#inputLabel form[data-v-edc0d12c]{width:100%}.input-box[data-v-edc0d12c]{font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);height:36px;padding:0 8px;width:100%}.input-box[data-v-edc0d12c]::-moz-placeholder{color:#6a6e73;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);font-weight:var(--rh-font-weight-code-regular,400);line-height:24px}.input-box[data-v-edc0d12c]::placeholder{color:#6a6e73;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);font-weight:var(--rh-font-weight-code-regular,400);line-height:24px}@media(max-width:960px){.search-box[data-v-edc0d12c]{width:28rem}}@media (max-width:768px){.right-navigation[data-v-edc0d12c],.upper-navigation[data-v-edc0d12c]{display:none}}@media (min-width:767px){.pfe-navigation__search form[data-v-edc0d12c]{padding:var(--rh-space-2xl,32px) 0}}</style>
<style>.element-invisible,.sr-only,.visually-hidden{height:1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);border:0;white-space:nowrap}@keyframes reveal-nav{0%{max-height:72px;max-height:var(--pfe-navigation__nav-bar--Height,72px);opacity:0;visibility:hidden}99%{max-height:72px;max-height:var(--pfe-navigation__nav-bar--Height,72px)}to{max-height:9999em;opacity:1;visibility:visible}}@keyframes reveal-nav-parts{0%{max-height:72px;max-height:var(--pfe-navigation__nav-bar--Height,72px);opacity:0;visibility:hidden}1%{visibility:visible}99%{max-height:72px;max-height:var(--pfe-navigation__nav-bar--Height,72px)}to{max-height:9999em;opacity:1;visibility:visible}}@media print{.pfe-navigation__menu,pfe-navigation [slot]{display:none!important}}pfe-navigation{--pfe-broadcasted--text:var(--pfe-theme--color--text,#151515);--pfe-broadcasted--text--muted:var(--pfe-theme--color--text--muted,#6a6e73);--pfe-broadcasted--link:var(--pfe-theme--color--link,#06c);--pfe-broadcasted--link--hover:var(--pfe-theme--color--link--hover,#004080);--pfe-broadcasted--link--focus:var(--pfe-theme--color--link--focus,#004080);--pfe-broadcasted--link--visited:var(--pfe-theme--color--link--visited,#6753ac);--pfe-broadcasted--link-decoration:var(--pfe-theme--link-decoration,none);--pfe-broadcasted--link-decoration--hover:var(--pfe-theme--link-decoration--hover,underline);--pfe-broadcasted--link-decoration--focus:var(--pfe-theme--link-decoration--focus,underline);--pfe-broadcasted--link-decoration--visited:var(--pfe-theme--link-decoration--visited,none)}@supports (display:grid){pfe-navigation{animation:reveal-nav .1618s 4s 1 forwards;max-height:72px;max-height:var(--pfe-navigation__nav-bar--Height,72px)}pfe-navigation>*{animation:reveal-nav-parts .1618s 4s 1 forwards;opacity:0;transition:opacity .1618s ease-in-out;transition:opacity var(--pfe-reveal-duration,.1618s) ease-in-out;visibility:hidden}}pfe-navigation.pfe-navigation--processed,pfe-navigation.pfe-navigation--processed>*{animation:none;opacity:1;visibility:visible}pfe-navigation pfe-primary-detail{display:none}pfe-navigation[pfelement]{display:block}pfe-navigation-dropdown{color:#151515;color:var(--pfe-navigation__dropdown--Color,#151515)}#pfe-navigation[breakpoint=desktop] .hidden-at-desktop[class][class][class],#pfe-navigation[breakpoint=mobile] .hidden-at-mobile[class][class][class],#pfe-navigation[breakpoint=tablet] .hidden-at-tablet[class][class][class],pfe-navigation[breakpoint=desktop] .hidden-at-desktop[class][class][class],pfe-navigation[breakpoint=mobile] .hidden-at-mobile[class][class][class],pfe-navigation[breakpoint=tablet] .hidden-at-tablet[class][class][class]{display:none}#pfe-navigation,#pfe-navigation *,pfe-navigation,pfe-navigation *{box-sizing:border-box}#pfe-navigation [pfelement] .pfe-navigation__log-in-link,pfe-navigation [pfelement] .pfe-navigation__log-in-link{display:none}#pfe-navigation,pfe-navigation{align-items:stretch;background:#151515;background:var(--pfe-navigation__nav-bar--Background,#151515);color:#fff;color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));display:flex;font-family:Red Hat Text,RedHatText,Arial,Helvetica,sans-serif;font-family:var(--pfe-navigation--FontFamily,Red Hat Text,RedHatText,Arial,Helvetica,sans-serif);font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);height:72px;height:var(--pfe-navigation__nav-bar--Height,72px);height:auto;line-height:1.5;margin:0;max-width:9999em;min-height:72px;min-height:var(--pfe-navigation__nav-bar--Height,72px);padding:0 16px;position:relative;z-index:95;z-index:var(--pfe-navigation--ZIndex,var(--pfe-theme--zindex--navigation,95))}@media (min-width:768px){#pfe-navigation,pfe-navigation{flex-wrap:wrap;margin:0;max-width:9999em;padding:0 16px}}@media (min-width:1200px){#pfe-navigation,pfe-navigation{margin:0 auto;padding:0 32px}}#pfe-navigation .pfe-navigation__dropdown,#pfe-navigation pfe-navigation-dropdown,pfe-navigation .pfe-navigation__dropdown,pfe-navigation pfe-navigation-dropdown{display:none}#pfe-navigation>[slot=account],#pfe-navigation>[slot=search],#pfe-navigation>[slot=secondary-links],pfe-navigation>[slot=account],pfe-navigation>[slot=search],pfe-navigation>[slot=secondary-links]{height:0;overflow:hidden;visibility:hidden;width:0}@media (min-width:768px){#pfe-navigation nav.pfe-navigation,pfe-navigation nav.pfe-navigation{align-items:stretch;display:flex;flex-wrap:wrap}}@media (min-width:992px){#pfe-navigation nav.pfe-navigation,pfe-navigation nav.pfe-navigation{flex-wrap:nowrap}}#pfe-navigation .pfe-navigation__logo-wrapper,pfe-navigation .pfe-navigation__logo-wrapper{align-items:center;display:flex;justify-content:flex-start;margin:0;min-width:150px;padding:10px 16px 10px 0}@media (min-width:768px){.pfe-navigation--no-main-menu #pfe-navigation .pfe-navigation__logo-wrapper,.pfe-navigation--no-main-menu pfe-navigation .pfe-navigation__logo-wrapper{margin-right:auto}}.pfe-navigation--collapse-secondary-links .pfe-navigation--no-main-menu #pfe-navigation .pfe-navigation__logo-wrapper,.pfe-navigation--collapse-secondary-links .pfe-navigation--no-main-menu pfe-navigation .pfe-navigation__logo-wrapper{margin-right:0}#pfe-navigation .pfe-navigation__logo-link,pfe-navigation .pfe-navigation__logo-link{border-radius:3px;display:block;margin-left:-8px;outline:0;padding:6px 8px;position:relative}#pfe-navigation .pfe-navigation__logo-link:focus,pfe-navigation .pfe-navigation__logo-link:focus{outline:0}#pfe-navigation .pfe-navigation__logo-link:focus:after,pfe-navigation .pfe-navigation__logo-link:focus:after{border:1px dashed #fff;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation .pfe-navigation__logo-image,pfe-navigation .pfe-navigation__logo-image{display:block;height:auto;width:100%}@media (min-width:576px){#pfe-navigation .pfe-navigation__logo-image,pfe-navigation .pfe-navigation__logo-image{height:40px;height:var(--pfe-navigation__logo--height,40px);width:auto}}@media print{#pfe-navigation .pfe-navigation__logo-image,pfe-navigation .pfe-navigation__logo-image{display:none}}#pfe-navigation .pfe-navigation__logo-image:only-child,pfe-navigation .pfe-navigation__logo-image:only-child{display:block}@media (min-width:576px){#pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--small,pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--small{height:32px;height:var(--pfe-navigation__logo--height,32px)}}@media print{#pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--screen,pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--screen{display:none!important}}@media screen{#pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--print,pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--print{display:none!important}}#pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--screen.pfe-navigation__logo-image--print,pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--screen.pfe-navigation__logo-image--print{display:inline-block!important}#pfe-navigation .pfe-navigation__fallback-links a,#pfe-navigation .pfe-navigation__log-in-link,#pfe-navigation .pfe-navigation__menu-link,#pfe-navigation .pfe-navigation__secondary-link,pfe-navigation .pfe-navigation__fallback-links a,pfe-navigation .pfe-navigation__log-in-link,pfe-navigation .pfe-navigation__menu-link,pfe-navigation .pfe-navigation__secondary-link{--pfe-icon--color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:0 0;border:0;color:#06c;color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));color:#fff;color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));cursor:pointer;display:flex;font-family:inherit;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);justify-content:flex-start;justify-content:center;margin:0;outline:0;padding:8px 24px;position:relative;text-align:center;text-decoration:none;white-space:nowrap;width:100%}@media print{#pfe-navigation .pfe-navigation__fallback-links a,#pfe-navigation .pfe-navigation__log-in-link,#pfe-navigation .pfe-navigation__menu-link,#pfe-navigation .pfe-navigation__secondary-link,pfe-navigation .pfe-navigation__fallback-links a,pfe-navigation .pfe-navigation__log-in-link,pfe-navigation .pfe-navigation__menu-link,pfe-navigation .pfe-navigation__secondary-link{display:none!important}}@media (min-width:768px){#pfe-navigation .pfe-navigation__fallback-links a,#pfe-navigation .pfe-navigation__log-in-link,#pfe-navigation .pfe-navigation__menu-link,#pfe-navigation .pfe-navigation__secondary-link,pfe-navigation .pfe-navigation__fallback-links a,pfe-navigation .pfe-navigation__log-in-link,pfe-navigation .pfe-navigation__menu-link,pfe-navigation .pfe-navigation__secondary-link{--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));color:#fff;color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));display:flex;flex-direction:column;font-size:12px;font-size:var(--pfe-navigation--FontSize--xs,12px);height:72px;height:var(--pfe-navigation__nav-bar--Height,72px);justify-content:flex-end;padding:14px 8px;width:auto}@supports (display:grid){#pfe-navigation .pfe-navigation__fallback-links a,#pfe-navigation .pfe-navigation__log-in-link,#pfe-navigation .pfe-navigation__menu-link,#pfe-navigation .pfe-navigation__secondary-link,pfe-navigation .pfe-navigation__fallback-links a,pfe-navigation .pfe-navigation__log-in-link,pfe-navigation .pfe-navigation__menu-link,pfe-navigation .pfe-navigation__secondary-link{align-items:center;display:grid;grid-template-rows:26px 18px;justify-items:center}}#pfe-navigation .pfe-navigation__fallback-links a[class]:focus,#pfe-navigation .pfe-navigation__fallback-links a[class]:hover,#pfe-navigation .pfe-navigation__log-in-link[class]:focus,#pfe-navigation .pfe-navigation__log-in-link[class]:hover,#pfe-navigation .pfe-navigation__menu-link[class]:focus,#pfe-navigation .pfe-navigation__menu-link[class]:hover,#pfe-navigation .pfe-navigation__secondary-link[class]:focus,#pfe-navigation .pfe-navigation__secondary-link[class]:hover,pfe-navigation .pfe-navigation__fallback-links a[class]:focus,pfe-navigation .pfe-navigation__fallback-links a[class]:hover,pfe-navigation .pfe-navigation__log-in-link[class]:focus,pfe-navigation .pfe-navigation__log-in-link[class]:hover,pfe-navigation .pfe-navigation__menu-link[class]:focus,pfe-navigation .pfe-navigation__menu-link[class]:hover,pfe-navigation .pfe-navigation__secondary-link[class]:focus,pfe-navigation .pfe-navigation__secondary-link[class]:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}}#pfe-navigation .pfe-navigation__fallback-links a:focus,#pfe-navigation .pfe-navigation__fallback-links a:hover,#pfe-navigation .pfe-navigation__log-in-link:focus,#pfe-navigation .pfe-navigation__log-in-link:hover,#pfe-navigation .pfe-navigation__menu-link:focus,#pfe-navigation .pfe-navigation__menu-link:hover,#pfe-navigation .pfe-navigation__secondary-link:focus,#pfe-navigation .pfe-navigation__secondary-link:hover,pfe-navigation .pfe-navigation__fallback-links a:focus,pfe-navigation .pfe-navigation__fallback-links a:hover,pfe-navigation .pfe-navigation__log-in-link:focus,pfe-navigation .pfe-navigation__log-in-link:hover,pfe-navigation .pfe-navigation__menu-link:focus,pfe-navigation .pfe-navigation__menu-link:hover,pfe-navigation .pfe-navigation__secondary-link:focus,pfe-navigation .pfe-navigation__secondary-link:hover{box-shadow:inset 4px 0 0 0 #06c;box-shadow:inset 4px 0 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}@media (min-width:768px){#pfe-navigation .pfe-navigation__fallback-links a:focus,#pfe-navigation .pfe-navigation__fallback-links a:hover,#pfe-navigation .pfe-navigation__log-in-link:focus,#pfe-navigation .pfe-navigation__log-in-link:hover,#pfe-navigation .pfe-navigation__menu-link:focus,#pfe-navigation .pfe-navigation__menu-link:hover,#pfe-navigation .pfe-navigation__secondary-link:focus,#pfe-navigation .pfe-navigation__secondary-link:hover,pfe-navigation .pfe-navigation__fallback-links a:focus,pfe-navigation .pfe-navigation__fallback-links a:hover,pfe-navigation .pfe-navigation__log-in-link:focus,pfe-navigation .pfe-navigation__log-in-link:hover,pfe-navigation .pfe-navigation__menu-link:focus,pfe-navigation .pfe-navigation__menu-link:hover,pfe-navigation .pfe-navigation__secondary-link:focus,pfe-navigation .pfe-navigation__secondary-link:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}}.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__fallback-links a:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__fallback-links a:hover,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__log-in-link:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__log-in-link:hover,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__menu-link:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__menu-link:hover,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__secondary-link:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__secondary-link:hover,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__fallback-links a:focus,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__fallback-links a:hover,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__log-in-link:focus,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__log-in-link:hover,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__menu-link:focus,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__menu-link:hover,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__secondary-link:focus,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__secondary-link:hover{box-shadow:inset 4px 0 0 0 #06c;box-shadow:inset 4px 0 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}#pfe-navigation .pfe-navigation__fallback-links a:focus,#pfe-navigation .pfe-navigation__log-in-link:focus,#pfe-navigation .pfe-navigation__menu-link:focus,#pfe-navigation .pfe-navigation__secondary-link:focus,pfe-navigation .pfe-navigation__fallback-links a:focus,pfe-navigation .pfe-navigation__log-in-link:focus,pfe-navigation .pfe-navigation__menu-link:focus,pfe-navigation .pfe-navigation__secondary-link:focus{outline:0}#pfe-navigation .pfe-navigation__fallback-links a:focus:after,#pfe-navigation .pfe-navigation__log-in-link:focus:after,#pfe-navigation .pfe-navigation__menu-link:focus:after,#pfe-navigation .pfe-navigation__secondary-link:focus:after,pfe-navigation .pfe-navigation__fallback-links a:focus:after,pfe-navigation .pfe-navigation__log-in-link:focus:after,pfe-navigation .pfe-navigation__menu-link:focus:after,pfe-navigation .pfe-navigation__secondary-link:focus:after{border:1px dashed;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation .pfe-navigation__fallback-links a pfe-icon,#pfe-navigation .pfe-navigation__log-in-link pfe-icon,#pfe-navigation .pfe-navigation__menu-link pfe-icon,#pfe-navigation .pfe-navigation__secondary-link pfe-icon,pfe-navigation .pfe-navigation__fallback-links a pfe-icon,pfe-navigation .pfe-navigation__log-in-link pfe-icon,pfe-navigation .pfe-navigation__menu-link pfe-icon,pfe-navigation .pfe-navigation__secondary-link pfe-icon{pointer-events:none}#pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,#pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__log-in-link>pfe-icon,#pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__menu-link>pfe-icon,#pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__secondary-link>pfe-icon,pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__log-in-link>pfe-icon,pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__menu-link>pfe-icon,pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__secondary-link>pfe-icon{--pfe-icon--size:18px;padding-right:5px}@media (min-width:768px){#pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,#pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__log-in-link>pfe-icon,#pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__menu-link>pfe-icon,#pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__secondary-link>pfe-icon,pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__log-in-link>pfe-icon,pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__menu-link>pfe-icon,pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__secondary-link>pfe-icon{padding-right:0;padding:2px 0 4px}}.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__log-in-link>pfe-icon,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__menu-link>pfe-icon,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__secondary-link>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__log-in-link>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__menu-link>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__secondary-link>pfe-icon{padding:0 16px 0 0}#pfe-navigation .pfe-navigation__fallback-links a pfe-icon,#pfe-navigation .pfe-navigation__log-in-link pfe-icon,#pfe-navigation .pfe-navigation__menu-link pfe-icon,#pfe-navigation .pfe-navigation__secondary-link pfe-icon,pfe-navigation .pfe-navigation__fallback-links a pfe-icon,pfe-navigation .pfe-navigation__log-in-link pfe-icon,pfe-navigation .pfe-navigation__menu-link pfe-icon,pfe-navigation .pfe-navigation__secondary-link pfe-icon{display:block;height:18px}#pfe-navigation .pfe-navigation__fallback-links a[class],#pfe-navigation .pfe-navigation__fallback-links a[href],#pfe-navigation .pfe-navigation__log-in-link[class],#pfe-navigation .pfe-navigation__log-in-link[href],#pfe-navigation .pfe-navigation__menu-link[class],#pfe-navigation .pfe-navigation__menu-link[href],#pfe-navigation .pfe-navigation__secondary-link[class],#pfe-navigation .pfe-navigation__secondary-link[href],pfe-navigation .pfe-navigation__fallback-links a[class],pfe-navigation .pfe-navigation__fallback-links a[href],pfe-navigation .pfe-navigation__log-in-link[class],pfe-navigation .pfe-navigation__log-in-link[href],pfe-navigation .pfe-navigation__menu-link[class],pfe-navigation .pfe-navigation__menu-link[href],pfe-navigation .pfe-navigation__secondary-link[class],pfe-navigation .pfe-navigation__secondary-link[href]{align-items:center;justify-content:center}#pfe-navigation .pfe-navigation__account-toggle,#pfe-navigation [slot=account]>a[href],pfe-navigation .pfe-navigation__account-toggle,pfe-navigation [slot=account]>a[href]{--pfe-icon--color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:0 0;border:0;color:#06c;color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));cursor:pointer;font-family:inherit;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);justify-content:flex-start;margin:0;outline:0;position:relative;text-align:center;text-decoration:none;white-space:nowrap;width:100%;--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));color:#fff;color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));display:flex;flex-direction:column;font-size:12px;font-size:var(--pfe-navigation--FontSize--xs,12px);height:72px;height:var(--pfe-navigation__nav-bar--Height,72px);justify-content:flex-end;padding:14px 8px;width:auto}@media print{#pfe-navigation .pfe-navigation__account-toggle,#pfe-navigation [slot=account]>a[href],pfe-navigation .pfe-navigation__account-toggle,pfe-navigation [slot=account]>a[href]{display:none!important}}#pfe-navigation .pfe-navigation__account-toggle:focus,#pfe-navigation .pfe-navigation__account-toggle:hover,#pfe-navigation [slot=account]>a[href]:focus,#pfe-navigation [slot=account]>a[href]:hover,pfe-navigation .pfe-navigation__account-toggle:focus,pfe-navigation .pfe-navigation__account-toggle:hover,pfe-navigation [slot=account]>a[href]:focus,pfe-navigation [slot=account]>a[href]:hover{box-shadow:inset 4px 0 0 0 #06c;box-shadow:inset 4px 0 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}#pfe-navigation .pfe-navigation__account-toggle:focus,#pfe-navigation [slot=account]>a[href]:focus,pfe-navigation .pfe-navigation__account-toggle:focus,pfe-navigation [slot=account]>a[href]:focus{outline:0}#pfe-navigation .pfe-navigation__account-toggle:focus:after,#pfe-navigation [slot=account]>a[href]:focus:after,pfe-navigation .pfe-navigation__account-toggle:focus:after,pfe-navigation [slot=account]>a[href]:focus:after{border:1px dashed;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation .pfe-navigation__account-toggle pfe-icon,#pfe-navigation [slot=account]>a[href] pfe-icon,pfe-navigation .pfe-navigation__account-toggle pfe-icon,pfe-navigation [slot=account]>a[href] pfe-icon{pointer-events:none}@supports (display:grid){#pfe-navigation .pfe-navigation__account-toggle,#pfe-navigation [slot=account]>a[href],pfe-navigation .pfe-navigation__account-toggle,pfe-navigation [slot=account]>a[href]{align-items:center;display:grid;grid-template-rows:26px 18px;justify-items:center}}#pfe-navigation .pfe-navigation__account-toggle[class]:focus,#pfe-navigation .pfe-navigation__account-toggle[class]:hover,#pfe-navigation [slot=account]>a[href][class]:focus,#pfe-navigation [slot=account]>a[href][class]:hover,pfe-navigation .pfe-navigation__account-toggle[class]:focus,pfe-navigation .pfe-navigation__account-toggle[class]:hover,pfe-navigation [slot=account]>a[href][class]:focus,pfe-navigation [slot=account]>a[href][class]:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}@media print{#pfe-navigation .pfe-navigation__account-toggle,#pfe-navigation [slot=account]>a[href],pfe-navigation .pfe-navigation__account-toggle,pfe-navigation [slot=account]>a[href]{display:none}}#pfe-navigation .pfe-navigation__account-toggle pfe-icon,#pfe-navigation [slot=account]>a[href] pfe-icon,pfe-navigation .pfe-navigation__account-toggle pfe-icon,pfe-navigation [slot=account]>a[href] pfe-icon{--pfe-icon--size:18px;padding:2px 0 4px}@media (min-width:768px){#pfe-navigation .pfe-navigation__account-toggle pfe-icon,#pfe-navigation [slot=account]>a[href] pfe-icon,pfe-navigation .pfe-navigation__account-toggle pfe-icon,pfe-navigation [slot=account]>a[href] pfe-icon{padding-right:0}}#pfe-navigation .pfe-navigation__account-toggle:focus,#pfe-navigation .pfe-navigation__account-toggle:hover,#pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true],#pfe-navigation [slot=account]>a[href][href]:focus,#pfe-navigation [slot=account]>a[href][href]:hover,pfe-navigation .pfe-navigation__account-toggle:focus,pfe-navigation .pfe-navigation__account-toggle:hover,pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true],pfe-navigation [slot=account]>a[href][href]:focus,pfe-navigation [slot=account]>a[href][href]:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}#pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true],pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true]{--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515));background:#fff;background:var(--pfe-navigation__nav-bar--toggle--BackgroundColor--active,var(--pfe-theme--color--surface--lightest,#fff));color:#151515;color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515))}#pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true]:focus,pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true]:focus{outline:0}#pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true]:focus:after,pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true]:focus:after{border:1px dashed #151515;border:1px dashed var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515));bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation .pfe-navigation__fallback-links,#pfe-navigation .pfe-navigation__menu,pfe-navigation .pfe-navigation__fallback-links,pfe-navigation .pfe-navigation__menu{font-size:inherit;list-style:none;margin:0;padding:0}@media (min-width:768px){#pfe-navigation .pfe-navigation__fallback-links,#pfe-navigation .pfe-navigation__menu,pfe-navigation .pfe-navigation__fallback-links,pfe-navigation .pfe-navigation__menu{align-items:stretch;display:flex}}#pfe-navigation .pfe-navigation__fallback-links li,#pfe-navigation .pfe-navigation__menu li,pfe-navigation .pfe-navigation__fallback-links li,pfe-navigation .pfe-navigation__menu li{font-size:inherit;margin:0;padding:0}#pfe-navigation .pfe-navigation__fallback-links li:before,#pfe-navigation .pfe-navigation__menu li:before,pfe-navigation .pfe-navigation__fallback-links li:before,pfe-navigation .pfe-navigation__menu li:before{content:none}#pfe-navigation .pfe-navigation__fallback-links,pfe-navigation .pfe-navigation__fallback-links{margin-left:auto}#pfe-navigation .pfe-navigation__menu-link,pfe-navigation .pfe-navigation__menu-link{display:flex;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);white-space:nowrap}#pfe-navigation.pfe-navigation--processed,pfe-navigation.pfe-navigation--processed{display:block;padding:0}#pfe-navigation.pfe-navigation--processed:before,pfe-navigation.pfe-navigation--processed:before{content:none}#pfe-navigation.pfe-navigation--processed>[slot=account],#pfe-navigation.pfe-navigation--processed>[slot=search],#pfe-navigation.pfe-navigation--processed>[slot=secondary-links],pfe-navigation.pfe-navigation--processed>[slot=account],pfe-navigation.pfe-navigation--processed>[slot=search],pfe-navigation.pfe-navigation--processed>[slot=secondary-links]{height:auto;overflow:visible;visibility:visible;width:auto}#pfe-navigation.pfe-navigation--processed pfe-navigation-dropdown,pfe-navigation.pfe-navigation--processed pfe-navigation-dropdown{display:block}#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown,#pfe-navigation.pfe-navigation--processed pfe-navigation-dropdown,#pfe-navigation.pfe-navigation--processed>[slot],pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown,pfe-navigation.pfe-navigation--processed pfe-navigation-dropdown,pfe-navigation.pfe-navigation--processed>[slot]{animation:none;opacity:1}#pfe-navigation.pfe-navigation--processed [slot=secondary-links],pfe-navigation.pfe-navigation--processed [slot=secondary-links]{display:block;height:auto;list-style:none;margin:0 0 8px;padding:0;width:auto}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links],pfe-navigation.pfe-navigation--processed [slot=secondary-links]{margin:0}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]{margin:0 0 8px}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button{--pfe-icon--color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:0 0;border:0;color:#06c;color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));cursor:pointer;display:flex;font-family:inherit;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);justify-content:flex-start;margin:0;outline:0;padding:8px 24px;position:relative;text-align:center;text-decoration:none;white-space:nowrap;width:100%}@media print{#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button{display:none!important}}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button{--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));color:#fff;color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));display:flex;flex-direction:column;font-size:12px;font-size:var(--pfe-navigation--FontSize--xs,12px);height:72px;height:var(--pfe-navigation__nav-bar--Height,72px);justify-content:flex-end;padding:14px 8px;width:auto}@supports (display:grid){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button{align-items:center;display:grid;grid-template-rows:26px 18px;justify-items:center}}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[class]:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[class]:hover,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[class]:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[class]:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[class]:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[class]:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[class]:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[class]:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover{box-shadow:inset 4px 0 0 0 #06c;box-shadow:inset 4px 0 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover{box-shadow:inset 4px 0 0 0 #06c;box-shadow:inset 4px 0 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus{outline:0}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus:after,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus:after,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus:after,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus:after{border:1px dashed;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a pfe-icon,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button pfe-icon{pointer-events:none}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon{--pfe-icon--size:18px;padding-right:5px}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon{padding-right:0;padding:2px 0 4px}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon{padding:0 16px 0 0}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a pfe-icon,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button pfe-icon{display:block;height:18px}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus{outline:0}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus:after,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus:after,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus:after,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus:after{border:1px dashed #fff;border:1px dashed var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus{box-shadow:none}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[aria-expanded=true],#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[aria-expanded=true],pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[aria-expanded=true],pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[aria-expanded=true]{--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515));background:#fff;background:var(--pfe-navigation__nav-bar--toggle--BackgroundColor--active,var(--pfe-theme--color--surface--lightest,#fff));color:#151515;color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515))}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[aria-expanded=true],.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[aria-expanded=true],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[aria-expanded=true],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[aria-expanded=true]{background:0 0;box-shadow:none}#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown__wrapper--single-column,pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown__wrapper--single-column{position:relative}#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown__wrapper,pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown__wrapper{display:block}#pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class],pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class]{height:0;transition:height .25s ease-in-out;transition:var(--pfe-navigation--accordion-transition,height .25s ease-in-out)}@media (prefers-reduced-motion){#pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class],pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class]{transition:none}}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class],pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class]{position:absolute;right:0;top:72px;top:var(--pfe-navigation__nav-bar--Height,72px)}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class]{position:static}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class][aria-hidden=false],pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class][aria-hidden=false]{height:auto}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class][aria-hidden=false],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class][aria-hidden=false]{height:0}#pfe-navigation.pfe-navigation--processed[breakpoint=mobile] [slot=secondary-links][mobile-slider] .pfe-navigation__dropdown-wrapper,pfe-navigation.pfe-navigation--processed[breakpoint=mobile] [slot=secondary-links][mobile-slider] .pfe-navigation__dropdown-wrapper{left:100vw;left:calc(100vw - 32px);left:calc(100vw - var(--pfe-navigation__mobile-dropdown--PaddingHorizontal,32px));position:absolute;top:0;width:100vw}#pfe-navigation.pfe-navigation--processed[breakpoint=mobile] [slot=secondary-links][mobile-slider] .pfe-navigation__dropdown-wrapper[aria-hidden=false],pfe-navigation.pfe-navigation--processed[breakpoint=mobile] [slot=secondary-links][mobile-slider] .pfe-navigation__dropdown-wrapper[aria-hidden=false]{height:100vh;height:calc(100vh - 72px);height:calc(100vh - var(--pfe-navigation__nav-bar--Height,72px));overflow-y:scroll}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper{background:#fff;background:var(--pfe-navigation__dropdown--Background,var(--pfe-theme--color--surface--lightest,#fff));padding:0 24px;padding:0 var(--pfe-navigation__dropdown--full-width--spacing--mobile,24px)}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper{padding:0 64px24px;padding:0 var(--pfe-navigation__dropdown--full-width--spacing--desktop,64px) var(--pfe-navigation__dropdown--full-width--spacing--mobile,24px)}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper{padding:0 24px;padding:0 var(--pfe-navigation__dropdown--full-width--spacing--mobile,24px)}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a{border:1px solid transparent;color:#06c;color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));display:inline-block}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:hover{color:#036;color:var(--pfe-navigation__dropdown--link--Color--hover,#036);text-decoration:underline}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:focus{border:1px dashed;outline:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level],#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level],#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level],pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level],pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6{margin:32px 0 .75em;margin:var(--pfe-navigation--gutter,32px) 0 .75em;padding:0;-moz-column-break-inside:avoid;break-inside:avoid;color:#464646;color:var(--pfe-navigation__dropdown--headings--Color,#464646);font-family:Red Hat Display,RedHatDisplay,Arial,Helvetica,sans-serif;font-family:var(--pfe-navigation--FontFamilyHeadline,Red Hat Display,RedHatDisplay,Arial,Helvetica,sans-serif);font-size:1.125rem;font-size:var(--pf-global--FontSize--lg,1.125rem);font-weight:500}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level]:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level]:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level]:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level]:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6:first-child{margin-top:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a{border:1px solid transparent;color:#464646;color:var(--pfe-navigation__dropdown--headings--Color,#464646);text-decoration:underline}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:hover{color:#036;color:var(--pfe-navigation__dropdown--link--Color--hover,#036);text-decoration:none}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:focus{border:1px dashed;outline:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container li,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles li,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container li,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles li{margin:0 0 16px;-moz-column-break-inside:avoid;break-inside:avoid}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-card,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-card,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-card,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-card,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta{-moz-column-break-inside:avoid;break-inside:avoid}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary],#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary],#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary],#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary],pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary],pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary],pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary],pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary]{--pfe-cta--BackgroundColor:var(--pfe-navigation__dropdown--pfe-cta--BackgroundColor,#e00);--pfe-cta--BackgroundColor--hover:var(--pfe-navigation__dropdown--pfe-cta--hover--BackgroundColor,#c00);--pfe-theme--ui--border-width:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary]:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary]:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary]:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary]:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary]:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary]:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary]:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary]:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary]:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary]:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary]:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary]:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary]:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary]:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary]:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary]:hover{--pfe-cta--BackgroundColor:var(--pfe-navigation__dropdown--pfe-cta--hover--BackgroundColor,#c00)}pfe-card #pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta,pfe-card #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta,pfe-card pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta,pfe-card pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta{margin-top:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container li,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container ul,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles li,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles ul,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container li,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container ul,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles li,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles ul{list-style:none;margin:0;padding:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{color:#151515;color:var(--pfe-navigation__dropdown--Color,#151515);-moz-column-count:auto;column-count:auto;display:block;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);gap:0;margin-left:auto;margin-right:auto;max-width:1136px;max-width:var(--pfe-navigation--content-max-width,1136px);padding-bottom:12px;padding-top:12px;width:calc(100% + 32px)}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{-moz-column-count:3;column-count:3;display:block;gap:32px;gap:var(--pfe-navigation--gutter,32px);padding-bottom:12px;padding-top:12px}}@media (min-width:1200px){#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{-moz-column-count:auto;column-count:auto;display:flex;flex-wrap:wrap;padding-bottom:32px;padding-top:32px}@supports (display:grid){#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{display:grid;gap:32px;gap:var(--pfe-navigation--gutter,32px);grid-auto-flow:row;grid-template-columns:repeat(4,minmax(0,1fr))}}}.pfe-navigation--collapse-main-menu #pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation--collapse-main-menu #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,.pfe-navigation--collapse-main-menu pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation--collapse-main-menu pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{-moz-column-count:3;column-count:3;display:block;gap:32px;gap:var(--pfe-navigation--gutter,32px);padding-bottom:12px;padding-top:12px}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{-moz-column-count:auto;column-count:auto;display:block;gap:0;margin-left:-16px;margin-right:-16px;max-width:1136px;max-width:var(--pfe-navigation--content-max-width,1136px);padding-bottom:12px;padding-top:12px;width:calc(100% + 32px)}.pfe-navigation__menu-item--open #pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation__menu-item--open #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,.pfe-navigation__menu-item--open pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation__menu-item--open pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{transition-delay:0s;visibility:visible}#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*{margin:0 0 18px;-moz-column-break-inside:avoid;break-inside:avoid}@media (min-width:1200px){#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*{margin:0}}.pfe-navigation--collapse-main-menu #pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,.pfe-navigation--collapse-main-menu #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*,.pfe-navigation--collapse-main-menu pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,.pfe-navigation--collapse-main-menu pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*{margin:0 0 18px}#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid{max-width:100%}#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--1-x,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--1-x{display:block}#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown{background:#fff}#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher{margin-left:auto;margin-right:auto;max-width:1136px;max-width:var(--pfe-navigation--content-max-width,1136px);padding:12px 24px;padding:12px var(--pfe-navigation__dropdown--full-width--spacing--mobile,24px)}@media (min-width:1200px){#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher{padding:32px 64px;padding:32px var(--pfe-navigation__dropdown--full-width--spacing--desktop,64px)}}.pfe-navigation--collapse-main-menu #pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher,.pfe-navigation--collapse-main-menu pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher{padding:12px 24px;padding:12px var(--pfe-navigation__dropdown--full-width--spacing--mobile,24px)}#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher .container,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher .container{margin:0;padding:0;width:auto}#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--invisible[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--invisible[class]{padding:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--invisible pfe-navigation-dropdown,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--invisible pfe-navigation-dropdown{visibility:hidden}#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class]{padding:0}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class]{box-shadow:0 1px 2px rgba(0,0,0,.12);box-shadow:var(--pfe-navigation__dropdown--BoxShadow,0 1px 2px rgba(0,0,0,.12));max-width:100%;min-width:13em;padding:0 32px;position:absolute;top:100%}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class]{box-shadow:none;max-width:100%;position:static}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class]{right:0}}#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class]{width:100%}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class]{left:0;position:absolute;right:0}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class]{position:static}#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class] .pfe-navigation__dropdown,pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class] .pfe-navigation__dropdown{width:100%}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles{padding-left:16px;padding-right:16px}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles form,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles form{align-items:center;display:flex}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button,#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input{padding:10px;transition:box-shadow .2s}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input{border:1px solid #f0f0f0;border-bottom-color:#8b8e91;color:#717579;flex-basis:0%;flex-grow:1;flex-shrink:1;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);margin-right:8px}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input::-moz-placeholder,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input::-moz-placeholder{color:#717579}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input::placeholder,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input::placeholder{color:#717579}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button{background-color:#e00;border:1px solid #e00;border-radius:2px;color:#fff;flex-basis:auto;flex-grow:0;flex-shrink:1;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem)}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:hover{outline:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:focus:after,#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:hover:after,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:focus:after,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:hover:after{border:1px dashed #000;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:hover{outline:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:focus:after,#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:hover:after,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:focus:after,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:hover:after{border:1px dashed #fff;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation .pfe-navigation__site-switcher__back-wrapper,pfe-navigation .pfe-navigation__site-switcher__back-wrapper{border-bottom:1px solid #d2d2d2;border-bottom:var(--pfe-navigation__dropdown--separator--Border,1px solid var(--pfe-theme--color--ui--border--lighter,#d2d2d2));display:block}@media (min-width:768px){#pfe-navigation .pfe-navigation__site-switcher__back-wrapper,pfe-navigation .pfe-navigation__site-switcher__back-wrapper{display:none}}.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__site-switcher__back-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__site-switcher__back-wrapper{display:block}#pfe-navigation .pfe-navigation__site-switcher__back-button,pfe-navigation .pfe-navigation__site-switcher__back-button{background-color:transparent;border:1px solid transparent;color:#06c;color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));cursor:pointer;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);padding:21px 21px 21px 45px;position:relative;text-align:left;width:100%}#pfe-navigation .pfe-navigation__site-switcher__back-button:before,pfe-navigation .pfe-navigation__site-switcher__back-button:before{border:2px solid #06c;border:2px solid var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));border-right:0;border-top:0;content:"";display:block;height:8px;left:35px;position:absolute;right:auto;top:27px;transform:rotate(45deg);transform-origin:left top;width:8px}#pfe-navigation .pfe-navigation__site-switcher__back-button:focus,#pfe-navigation .pfe-navigation__site-switcher__back-button:hover,pfe-navigation .pfe-navigation__site-switcher__back-button:focus,pfe-navigation .pfe-navigation__site-switcher__back-button:hover{border:1px dashed #151515;border-top:1px dashed #151515;border:1px dashed var(--pfe-navigation__dropdown--Color,#151515);color:#036;color:var(--pfe-navigation__dropdown--link--Color--hover,#036);outline:0}#pfe-navigation.pfe-navigation--processed site-switcher,pfe-navigation.pfe-navigation--processed site-switcher{-moz-columns:auto;columns:auto;display:block}#pfe-navigation.pfe-navigation--stuck,pfe-navigation.pfe-navigation--stuck{left:0;position:fixed;top:0;width:100%;z-index:95;z-index:var(--pfe-theme--zindex--navigation,95)}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__outer-menu-wrapper__inner,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__outer-menu-wrapper__inner{opacity:1!important}#pfe-navigation.pfe-navigation--in-crusty-browser pfe-navigation-account,#pfe-navigation.pfe-navigation--in-crusty-browser rh-account-dropdown,pfe-navigation.pfe-navigation--in-crusty-browser pfe-navigation-account,pfe-navigation.pfe-navigation--in-crusty-browser rh-account-dropdown{display:none!important}#pfe-navigation.pfe-navigation--in-crusty-browser[open-toggle=pfe-navigation__account-toggle] pfe-navigation-account,#pfe-navigation.pfe-navigation--in-crusty-browser[open-toggle=pfe-navigation__account-toggle] rh-account-dropdown,pfe-navigation.pfe-navigation--in-crusty-browser[open-toggle=pfe-navigation__account-toggle] pfe-navigation-account,pfe-navigation.pfe-navigation--in-crusty-browser[open-toggle=pfe-navigation__account-toggle] rh-account-dropdown{display:block!important}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-item,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-item{display:block}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true],pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true]{--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515));background:#fff;background:var(--pfe-navigation__nav-bar--toggle--BackgroundColor--active,var(--pfe-theme--color--surface--lightest,#fff));color:#151515;color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515))}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true]:focus,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true]:focus{outline:0}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true]:focus:after,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true]:focus:after{border:1px dashed;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown{display:flex;flex-wrap:wrap}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown>.style-scope,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown>.style-scope{flex-basis:25%}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown .pfe-navigation__footer.style-scope,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown .pfe-navigation__footer.style-scope{flex-basis:100%}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown .pfe-navigation__footer.style-scope>.style-scope,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown .pfe-navigation__footer.style-scope>.style-scope{margin-right:16px}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column ul,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column>.style-scope,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column ul,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column>.style-scope{display:flex;flex-direction:column;flex-wrap:nowrap}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column>.style-scope,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column>.style-scope{flex-basis:auto}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link,#pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link,pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a{color:#fff!important;justify-content:center!important}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle[aria-expanded=true],#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link[aria-expanded=true],#pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a[aria-expanded=true],pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle[aria-expanded=true],pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link[aria-expanded=true],pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a[aria-expanded=true]{color:#151515!important}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__account-wrapper--logged-in .pfe-navigation__log-in-link,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle pfe-icon,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link pfe-icon,#pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a pfe-icon,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__account-wrapper--logged-in .pfe-navigation__log-in-link,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle pfe-icon,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link pfe-icon,pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a pfe-icon{display:none!important}[id=pfe-navigation__account-dropdown][class][class]{display:block;height:auto;left:0;padding:0;position:absolute;top:72px;top:var(--pfe-navigation__nav-bar--Height,72px);width:100%}[id=pfe-navigation__account-dropdown].pfe-navigation__dropdown-wrapper--invisible[class]{display:none}.pfe-navigation__dropdown-wrapper{overflow:hidden}@media (min-width:768px){.pfe-navigation__custom-dropdown--single-column{min-width:25em}}.pfe-navigation--collapse-secondary-links .pfe-navigation__custom-dropdown--single-column{min-width:0}.secondary-link__icon-wrapper{align-items:center;display:flex;justify-content:center}.secondary-link__alert-count{background:#06c;background:var(--pfe-navigation__nav-bar--alert-color,var(--pfe-theme--color--link,#06c));border-radius:20px;color:#fff;color:var(--pfe-navigation__nav-bar--Color--on-highlight,var(--pfe-theme--color--text--on-saturated,#fff));display:block;font-size:12px;font-size:var(--pfe-navigation--FontSize--xs,12px);line-height:20px;margin:0 4px 0 2px;min-width:23px;overflow:hidden;padding:0 8px}.secondary-link__alert-count:empty{display:none}#pfe-navigation__1x-skip-links{left:0;position:absolute;top:0}#pfe-navigation__1x-skip-links,#pfe-navigation__1x-skip-links li{height:0;list-style:none;margin:0;padding:0;width:0}.skip-link[class][class]{font-size:.875rem;font-size:var(--pf-global--FontSize--sm,.875rem);line-height:18px}.skip-link[class][class]:focus{border-radius:.21429em;height:auto;left:50%;padding:.42857em .57143em;position:fixed;top:8px;transform:translateX(-50%);width:auto;z-index:99999;clip:auto;background:#fff;background:var(--pfe-navigation__skip-link--BackgroundColor,var(--pfe-theme--color--surface--lightest,#fff));color:#06c;color:var(--pfe-navigation__skip-link--Color,var(--pfe-theme--color--link,#06c));text-decoration:none}pfe-navigation pfe-navigation-account[slot=account]{background:#fff;background:var(--pfe-navigation__dropdown--Background,var(--pfe-theme--color--surface--lightest,#fff));width:100%}</style>
<style>:host([size=sm]) #container[data-v-8589d091]{--_size:var(--pf-global--icon--FontSize--sm,12px)}.content-wrapper[data-v-8589d091]{height:auto;margin:0 auto;min-height:46vh}.content[data-v-8589d091]{max-width:1000px}#left-content[data-v-8589d091]{max-width:330px;z-index:1}.line-below-chp[data-v-8589d091]{margin:var(--rh-space-xl,24px) 0 var(--rh-space-3xl,48px)}.toc-container[data-v-8589d091]{border-right:1px solid var(--rh-color-gray-30,#c7c7c7);min-height:100vh;position:sticky;top:0;transition:transform .3s ease-in-out}nav#toc[data-v-8589d091]{height:auto;overflow-y:auto;padding-bottom:var(--rh-space-2xl,32px)}.max-height-85[data-v-8589d091]{max-height:85vh}.max-height-75[data-v-8589d091]{max-height:75vh}.toc-filter[data-v-8589d091]{background-color:#fff;padding:var(--rh-space-lg,16px) var(--rh-space-2xl,32px);position:sticky;top:-1px;width:100%;z-index:1}#text[data-v-8589d091],.toc-filter[data-v-8589d091]{align-items:center;display:flex}#text[data-v-8589d091]{flex:1;flex-direction:row}#search-icon[data-v-8589d091]{color:#151515;left:2.5rem;position:absolute;top:55%;transform:translateY(-50%)}pf-icon[data-v-8589d091]{--pf-icon--size:16px}#text:focus-within #icon[data-v-8589d091],#text:hover #icon[data-v-8589d091]{color:#151515}#text[data-v-8589d091]:after,#text[data-v-8589d091]:before{content:"";inset:0;pointer-events:none;position:absolute}#text-input[data-v-8589d091]:focus,#text-input:focus+#utilities[data-v-8589d091]{border-bottom:2px solid #06c;outline:none}#text-input[data-v-8589d091]{background-color:transparent;border:1px solid #f0f0f0;border-bottom-color:#8a8d90;color:#151515;font-family:inherit;font-size:100%;grid-area:text-input;line-height:1.5;overflow:hidden;padding:.375rem .25rem .375rem 2rem;position:relative;text-overflow:ellipsis;white-space:nowrap;width:100%}#utilities[data-v-8589d091]{align-items:center;border:1px solid #f0f0f0;border-bottom:1px solid #8a8d90;border-left:0;display:flex}#utilities rh-badge[data-v-8589d091]{border-radius:80px;font-weight:var(--rh-font-weight-heading-medium,500);--_background-color:#e0e0e0;margin-right:8px}#clear-button[data-v-8589d091]{--pf-c-button--PaddingTop:0.625rem;--pf-c-button--PaddingRight:.25rem;--pf-c-button--PaddingBottom:0.625rem;--pf-c-button--PaddingLeft:.25rem;margin-right:8px}#text-input.no-right-border[data-v-8589d091]{border-right:0}.btn-container[data-v-8589d091]{bottom:0;display:flex;justify-content:flex-end;padding:1rem;pointer-events:none;position:fixed;right:0;z-index:2}.top-scroll-btn[data-v-8589d091]{--pf-c-button--BorderRadius:64px;pointer-events:all}.focusable[data-v-8589d091]:focus-visible{border:2px solid var(--rh-color-interactive-blue,#06c)}.mobile-nav-wrapper[data-v-8589d091]{align-items:center;border-bottom:1px solid #c7c7c7;display:flex;height:auto;justify-content:space-between;padding:var(--rh-space-sm,.5rem)}.mobile-nav[data-v-8589d091]{align-items:center;background-color:var(--rh-color-bg-page,#fff);min-height:51px;position:sticky;top:0;z-index:5}.active-mobile-menu[data-v-8589d091]{color:#151515;padding-left:.5rem}.hidden[data-v-8589d091]{display:none}.mobile-nav-btn[data-v-8589d091]{background-color:transparent;border:none;font-family:inherit;font-size:.875rem;font-weight:500;margin:0;min-height:40px;min-width:40px}.border-right[data-v-8589d091]{border-right:1px solid #c7c7c7}.toc-focus-container[data-v-8589d091]{position:sticky;top:0;z-index:2}.toc-focus-btn[data-v-8589d091]{align-items:center;background-color:var(--rh-color-white,#fff);border:1px solid var(--rh-color-blue-50,#06c);border-radius:50%;cursor:pointer;display:flex;height:40px;justify-content:center;position:absolute;right:-20px;top:15px;width:40px}.toc-focus-btn[data-v-8589d091]:focus-visible,.toc-focus-btn[data-v-8589d091]:hover{background-color:var(--rh-color-blue-10,#e0f0ff);box-shadow:var(--rh-box-shadow-sm,0 2px 4px 0 hsla(0,0%,8%,.2))}.toc-focus-btn[data-v-8589d091]:focus-visible{border:2px solid var(--rh-color-blue-50,#06c)}.toc-focus-btn-icon[data-v-8589d091]{color:var(--rh-color-blue-50,#06c)}.toc-wrapper[data-v-8589d091]{padding:0}.product-container[data-v-8589d091]{border-bottom:1px solid var(--rh-color-gray-30,#c7c7c7);padding:var(--rh-space-xl,24px) var(--rh-space-2xl,32px)}.product-container h1.product-title[data-v-8589d091]{font-size:var(--rh-font-size-code-xl,1.25rem);line-height:30px;margin-bottom:0;margin-top:0}.product-container .product-version[data-v-8589d091]{align-items:center;display:flex;flex-wrap:wrap;margin-top:var(--rh-space-lg,16px)}.product-version .version-label[data-v-8589d091]{color:var(--rh-color-canvas-black,#151515);font-family:Red Hat Text;font-size:var(--rh-font-size-body-text-sm,.875rem);font-weight:500}.product-version .version-select-dropdown[data-v-8589d091]{margin:var(--rh-space-md,8px) var(--rh-space-sm,6px);max-width:9.75rem;min-height:2rem;min-width:3rem;overflow:hidden;width:-moz-min-content;width:min-content;word-wrap:nowrap;-webkit-appearance:none;-moz-appearance:none;background:var(--rh-color-white,#fff);background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6' fill='none' viewBox='0 0 10 6'%3E%3Cpath fill='%23151515' d='M.678 0h8.644c.596 0 .895.797.497 1.195l-4.372 4.58c-.298.3-.695.3-.993 0L.18 1.196C-.216.797.081 0 .678 0'/%3E%3C/svg%3E");background-position-x:85%;background-position-y:50%;background-repeat:no-repeat;border:1px solid var(--rh-color-gray-30,#c7c7c7);border-bottom:0;box-shadow:0 -1px 0 0 var(--rh-color-gray-60,#4d4d4d) inset;cursor:pointer;font-size:var(--rh-font-size-body-text-md,1rem);padding:var(--rh-space-md,8px);padding-right:24px;text-overflow:ellipsis}pf-popover[data-v-8589d091]{margin-top:var(--rh-space-md,8px);--pf-c-popover__arrow--BackgroundColor:var(--rh-color-canvas-black,#151515);--pf-c-popover__content--BackgroundColor:var(--rh-color-canvas-black,#151515);--pf-c-popover--BoxShadow:0px 4px 8px 0px #15151540;--pf-c-popover__title-text--Color:var(--rh-color-white,#fff);--pf-c-popover--MaxWidth:300px;--pf-c-popover--MinWidth:300px;--pf-c-popover--c-button--Top:20px;--pf-c-popover--c-button--Right:4px;--pf-c-button--m-plain--hover--Color:var(--rh-color-white,#fff)}pf-popover[data-v-8589d091]::part(content){padding:var(--rh-space-2xl,32px)}pf-popover[data-v-8589d091]::part(body){margin-top:var(--rh-space-lg,16px)}pf-popover[data-v-8589d091]::part(close-button){--pf-c-button--m-plain--focus--Color:var(--rh-color-gray-30,#c7c7c7);--pf-c-button--m-plain--Color:var(--rh-color-gray-30,#c7c7c7)}.popover-header-text[data-v-8589d091]{color:var(--rh-color-white,#fff);font-size:var(--rh-font-size-code-md,1rem);margin:0;max-width:80%;padding:0}.popover-body-link[data-v-8589d091]{color:var(--rh-color-blue-30,#92c5f9);text-decoration:none}.popover-trigger-btn[data-v-8589d091]{align-items:center;background:none;border:none;cursor:pointer;display:flex;justify-content:center}#first-button[data-v-8589d091]{width:80%}#second-button[data-v-8589d091]{text-align:right;width:20%}#toc-btn[data-v-8589d091]{text-align:left;width:100%}.toc-error[data-v-8589d091]{margin:0;max-width:100%}#layout label[data-v-8589d091]{font-weight:500}.page-layout-options[data-v-8589d091]{background-color:#fff;display:flex;flex-direction:column;padding-bottom:var(--rh-space-lg,16px)}.sticky-top[data-v-8589d091]{position:sticky;top:0}summary[data-v-8589d091]{cursor:pointer;list-style:none;position:relative}summary[data-v-8589d091]::-webkit-details-marker{display:none}details#jump-links-details .jump-links-heading[data-v-8589d091]{background-color:var(--rh-color-white,#fff);display:block;margin-top:var(--rh-space-lg,16px);padding:var(--rh-space-lg,16px) 0 0 var(--rh-space-xl,24px);position:sticky;top:0}details#jump-links-details .jump-links-heading[data-v-8589d091]:before{border-right:3px solid #151515;border-top:3px solid #151515;color:#151515;content:"";display:flex;height:9px;left:2px;position:absolute;top:26px;transform:rotate(-135deg);width:9px}details#jump-links-details[open] .jump-links-heading[data-v-8589d091]:before{transform:rotate(135deg)}.table-of-contents>ol[data-v-8589d091]{list-style:none;margin:0;padding:0}nav.table-of-contents[data-v-8589d091]{z-index:1}nav.table-of-contents ol[data-v-8589d091]{list-style:none;margin:0;padding:0}#mobile-browse-docs[data-v-8589d091]{font-weight:var(--rh-font-weight-body-text-medium,500);padding-left:var(--rh-space-2xl,32px)}.docs-content-container[data-v-8589d091]{font-size:var(--rh-font-size-body-text-lg,1.125rem);font-weight:var(--rh-font-weight-body-text-regular,400);line-height:1.6667;padding-left:6rem;padding-right:6rem;padding-top:var(--rh-space-3xl,4rem)}.chapter-title[data-v-8589d091]{font-family:Red Hat Display}h1.chapter-title[data-v-8589d091]{font-size:var(--rh-fontsize-heading-xl,2.25rem);line-height:46.8px;margin:0;padding:0}.chapter .section h4[data-v-8589d091]{font-size:24px;font-weight:400}.banner-wrapper[data-v-8589d091]{padding:3rem 6rem 0}.page-format-dropdown[data-v-8589d091]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#fff;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABtSURBVHgBhc4xCoAwDAXQxE6li0K76w0cPZqjHsEb6AlcHb2BR9ADdG7GmIKTWv0QSOAFPjrndgAo4TtHxszTD4JoVAhh1VoXiNgkUO+971Q8iGgxxlSy1jc3CGof39baWTrzNSOkkksEbG/oBGEJIn6gD3jAAAAAAElFTkSuQmCC");background-position:8.5rem;background-repeat:no-repeat;background-size:auto;border:1px solid #c7c7c7;box-shadow:inset 0 -1px 0 0 #4d4d4d;font-family:Red Hat Text;font-size:var(--rh-font-size-body-text-md,1rem);margin-top:var(--rh-space-xs,4px);max-width:168px;min-height:36px;min-width:168px;overflow:hidden;padding:0 var(--rh-space-xl,24px) 0 var(--rh-space-md,8px);text-overflow:ellipsis;white-space:nowrap}.content-format-selectors[data-v-8589d091]{color:#151515;font-family:Red Hat Text;font-size:var(--rh-font-size-body-text-sm,.875rem);font-weight:var(--rh-font-weight-body-text-medium,500);margin-right:var(--rh-space-2xl,32px);max-width:250px;min-width:250px;padding-top:var(--rh-space-2xl,32px)}.chapter .section .simpara[data-v-8589d091],.chapter .section p[data-v-8589d091]{font-family:Red Hat Text;font-size:var(--rh-font-size-body-text-lg,1.125rem);font-weight:var(--rh-font-weight-body-text-regular,400);line-height:30px}#toggle-focus-mode[data-v-8589d091]{padding-right:var(--rh-space-lg,1rem)}@keyframes slideaway-left-8589d091{0%{display:block}to{opacity:0;transform:translateX(-40px)}}@keyframes slideaway-right-8589d091{0%{display:block}to{opacity:0;transform:translateX(40px)}}@keyframes enter-left-8589d091{0%{display:none;transform:translateX(-40px)}to{opacity:1}}@keyframes enter-right-8589d091{0%{display:none;transform:translateX(40px)}to{opacity:1}}.hide-left[data-v-8589d091]{animation:slideaway-left-8589d091 .2s;display:none}.enter-left[data-v-8589d091]{animation:enter-left-8589d091 .3s;border-right:none;display:block}.enter-right[data-v-8589d091]{animation:enter-right-8589d091 .3s;display:block}.hide-right[data-v-8589d091]{animation:slideaway-right-8589d091 .2s;display:none}.toc-container.enter-toc-container-left[data-v-8589d091]{transform:translateX(-85%)}.alert-section[data-v-8589d091]{padding-bottom:3rem}rh-alert[data-v-8589d091]{width:auto}@media (min-width:992px){#mobile-nav[data-v-8589d091],#toc-list-mobile[data-v-8589d091]{display:none}}@media (min-width:992px) and (max-width:1400px){.docs-ocp-content-container[data-v-8589d091]{padding:var(--rh-space-4xl,64px) var(--rh-space-lg,16px) 0}}@media (width < 992px){#breadcrumbs[data-v-8589d091],.content-format-selectors[data-v-8589d091],.toc-container[data-v-8589d091]{display:none}#mobile-nav-content-wrapper[data-v-8589d091]{border-bottom:1px solid #c7c7c7;border-top:1px solid #c7c7c7}#toc-wrapper-mobile[data-v-8589d091]{padding:var(--rh-space-md,1.5rem)}.product-container[data-v-8589d091]{padding:var(--rh-space-2xl,32px) var(--rh-space-lg,16px)}.product-container.shrink-product-padding[data-v-8589d091]{padding:var(--rh-space-lg,16px)}.product-version .version-select-dropdown[data-v-8589d091]{margin:0 var(--rh-space-lg,16px)}#page-content-options-mobile[data-v-8589d091]{padding:var(--rh-space-lg,2rem)}label[for=page-format][data-v-8589d091],label[for=toggle-focus-mode][data-v-8589d091]{display:block}.page-format-dropdown[data-v-8589d091]{background-position:97%;max-width:100%}nav#mobile-toc-menu[data-v-8589d091]{max-height:50vh;overflow-y:scroll}.mobile-jump-links #first-button[data-v-8589d091]{width:100%}#jump-links-btn[data-v-8589d091]{text-align:left;width:100%}#mobile-jump-links-content-wrapper[data-v-8589d091]{border-bottom:1px solid #c7c7c7;border-top:1px solid #c7c7c7;padding:0 var(--rh-space-lg,16px) var(--rh-space-2xl,32px)}.table-of-contents #browse-docs[data-v-8589d091]{margin-top:1rem;padding-top:var(--rh-space-md,1.5rem)}.mobile-nav[data-v-8589d091]{display:block}.hide-mobile-nav[data-v-8589d091],.mobile-nav[data-v-8589d091]{transition:transform .3s ease-in-out}.hide-mobile-nav[data-v-8589d091]{transform:translateY(-100%)}.docs-content-container[data-v-8589d091]{padding-left:1.25rem;padding-right:1.25rem;padding-top:var(--rh-space-xl,24px)}.banner-wrapper[data-v-8589d091]{padding:0 1rem}.toc-filter-mobile[data-v-8589d091]{align-items:center;display:flex;padding:var(--rh-space-lg,16px);width:100%}#text-input[data-v-8589d091]{padding-left:.5rem}.toc-filter[data-v-8589d091]{display:none}}@media (width <=576px){.content-format-selectors[data-v-8589d091]{display:none}}.informaltable[data-v-8589d091],.rhdocs .informaltable[data-v-8589d091],.rhdocs .table-contents[data-v-8589d091],.rhdocs .table-wrapper[data-v-8589d091],.table-contents[data-v-8589d091],.table-wrapper[data-v-8589d091]{max-height:var(--rh-table--maxHeight);overflow:auto}rh-table[data-v-8589d091]{display:block;margin:2rem 0;max-width:100%}.pvof-doc__wrapper[data-v-8589d091],.rhdocs[data-v-8589d091]{--rh-table--maxHeight:calc(100vh - 12.5rem)}</style>
<style>:is(rh-footer-block) a[data-v-97dd2752]{text-decoration:underline}</style>
<style>:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) a{color:var(--rh-color-link-inline-on-dark,var(--rh-color-interactive-blue-lighter,#92c5f9));text-decoration:none}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) a:hover{color:var(--rh-color-link-inline-hover-on-dark,var(--rh-color-interactive-blue-lightest,#b9dafc));text-decoration:underline}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) a:is(:focus,:focus-within){color:var(--rh-color-link-inline-focus-on-dark,var(--rh-color-interactive-blue-lightest,#b9dafc));text-decoration:underline}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) a:visited{color:var(--rh-color-link-inline-visited-on-dark,var(--rh-color-interactive-blue-lightest,#b9dafc));text-decoration:none}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) a[slot^=logo]{display:block}:is(rh-footer) a[slot^=logo]>img{display:block;height:100%;height:var(--rh-size-icon-04,40px);width:auto}:is(rh-footer,rh-footer-universal,rh-global-footer) :is(h1,h2,h3,h4,h5,h6){font-family:var(--rh-font-family-heading,RedHatDisplay,"Red Hat Display","Noto Sans Arabic","Noto Sans Hebrew","Noto Sans JP","Noto Sans KR","Noto Sans Malayalam","Noto Sans SC","Noto Sans TC","Noto Sans Thai",Helvetica,Arial,sans-serif);line-height:var(--rh-line-height-heading,1.3)}rh-footer [slot=links]:is(h1,h2,h3,h4,h5):nth-of-type(n+5){--_link-header-margin:calc(var(--rh-space-2xl, 32px) - var(--rh-space-lg, 16px))}rh-footer [slot^=links] a{gap:var(--rh-footer-links-gap,var(--rh-space-md,8px))}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) [slot^=links] li{display:contents;margin:0;padding:0}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) [slot^=links] a{color:var(--rh-color-text-primary-on-dark,#fff)!important;display:block;font-size:var(--rh-footer-link-font-size,var(--rh-font-size-body-text-sm,.875rem));width:-moz-fit-content;width:fit-content}:is(rh-footer-universal,rh-global-footer) [slot^=links] a{font-size:inherit}:is(rh-footer,rh-footer-universal,rh-global-footer){--rh-footer-section-side-gap:var(--rh-space-lg,16px)}@media screen and (min-width:768px){:is(rh-footer,rh-footer-universal,rh-global-footer){--rh-footer-section-side-gap:var(--rh-space-2xl,32px)}}@media screen and (min-width:1440px){:is(rh-footer,rh-footer-universal,rh-global-footer){--rh-footer-section-side-gap:var(--rh-space-4xl,64px)}}rh-footer:not(:defined){background-color:var(--rh-color-surface-darker,#1f1f1f);display:grid;grid-template-areas:"footer" "global";grid-template-rows:1fr auto;min-height:var(--rh-footer-nojs-min-height,750px);width:100%}:is(rh-footer-universal,rh-global-footer):not(:defined):before{grid-area:global}rh-footer:not(:defined)>[slot=logo]{padding:var(--rh-space-2xl,32px) var(--_section-side-gap)}:is(rh-footer-universal,rh-global-footer):not(:defined)>*,rh-footer:not(:defined)>:not([slot=logo],:is(rh-footer-universal,rh-global-footer)){border:0;clip:rect(1px,1px,1px,1px);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}:is(rh-footer-universal,rh-global-footer):not(:defined){background-color:var(--rh-color-surface-darkest,#151515);display:block;min-height:176px;width:100%}rh-footer-universal rh-footer-copyright{grid-column:-1/1}</style>
<style>.status-legal .status-page-widget[data-v-5f538988]{display:block;margin:.5rem 0;width:11.3125rem;width:-moz-max-content;width:max-content}.status-page-widget[data-v-5f538988]{align-items:center;display:flex;flex-direction:row}.status-legal .status-page-widget .status-description[data-v-5f538988]{color:#ccc;font-weight:600;letter-spacing:.0125rem;line-height:1.5;margin-right:.5rem}.status-good[data-v-5f538988]{background-color:#3e8536}.status-critical[data-v-5f538988]{background-color:#a30100}.status-partial[data-v-5f538988]{background-color:#f5c12d}.status-maintentance[data-v-5f538988]{background-color:#316dc1}.status-minor[data-v-5f538988]{background-color:#b85c00}.status-description[data-v-5f538988]{color:#ccc;font-weight:500;letter-spacing:.2px;line-height:1.5}.current-status-indicator[data-v-5f538988]{border-radius:6px;display:inline-block;height:12px;margin:0 0 0 5px;width:12px}.current-status-indicator.small[data-v-5f538988]{border-radius:4px;display:inline-block;height:8px;margin:0 0 0 5px;width:8px}</style>
<style>.breadcrumbs[data-v-798f280c]{align-items:center;background-color:#f6f6f6;display:flex;gap:var(--rh-space-xl,24px);padding:var(--rh-space-lg,16px) var(--rh-space-2xl,32px)}nav[data-v-798f280c]{flex:1}ol[data-v-798f280c]{background-color:#f6f6f6;font-size:.875rem;list-style:none;margin:0;padding:0}li[data-v-798f280c]{color:#151515;display:inline}a[data-v-798f280c]:after{border-bottom-color:transparent;border-left-color:transparent;box-shadow:inset .25rem .25rem 0 .0625rem #8a8d8d;content:"";display:inline-block;height:1.07143em;margin:0 .5em;position:relative;right:0;top:.75em;transform:translateY(-.5em) rotate(135deg) scale(.5);width:1.07143em}</style>
<style>ol[data-v-fa0dae77]{margin:0;padding:0}li[data-v-fa0dae77],ol[data-v-fa0dae77],ul[data-v-fa0dae77]{list-style:none;margin:0}.chapter-title[data-v-fa0dae77]{font-size:1em}.sub-chapter-title[data-v-fa0dae77],.sub-chapter-title a[data-v-fa0dae77]{font-size:.875rem}#toc .link[data-v-fa0dae77],#toc-mobile .link[data-v-fa0dae77],.heading[data-v-fa0dae77],.sub-nav .link[data-v-fa0dae77],.sub-nav .link .link[data-v-fa0dae77]{display:block;padding:var(--rh-space-md,8px) var(--rh-space-2xl,32px);padding-right:2.5em;text-decoration:none;transition:background-color .25s}.heading[data-v-fa0dae77]:hover,.link[data-v-fa0dae77]:hover,.sub-nav .link[data-v-fa0dae77]:hover{background:var(--rh-color-surface-lighter,#f2f2f2);box-shadow:inset 3px 0 0 0 #d2d2d2;color:#151515}details[open]:first-of-type>.heading[data-v-fa0dae77]:after{transform:rotate(135deg)}.item[data-v-fa0dae77]{line-height:22px}#toc .link[data-v-fa0dae77],#toc-mobile .link[data-v-fa0dae77]{color:var(--rh-color-text-primary-on-light,#151515)}.sub-nav[data-v-fa0dae77],.toc-wrapper[data-v-fa0dae77]{list-style:none;margin:0}.toc-wrapper[data-v-fa0dae77]{min-width:100%;padding:0}.sub-nav[data-v-fa0dae77]{font-size:1em;line-height:24px;padding-left:1rem;padding-left:16px}.sub-nav .link[data-v-fa0dae77]:hover{color:#151515}.active[data-v-fa0dae77]{background:var(--rh-color-surface-lighter,#f2f2f2);box-shadow:inset 3px 0 0 0 var(--rh-color-icon-primary-on-light,#e00)}.chapter-landing-page[data-v-fa0dae77]{font-weight:500}summary[data-v-fa0dae77]{cursor:pointer;list-style:none;position:relative}summary[data-v-fa0dae77]::-webkit-details-marker{display:none}@keyframes slideDown-fa0dae77{0%{height:0;opacity:0}to{height:var(--details-height-open,"100%");opacity:1}}html[data-v-fa0dae77]{--details-transition-time:400ms}details[data-v-fa0dae77]{max-height:var(--details-height-closed,auto);transition:all ease-out var(--details-transition-time,0)}details[open][data-v-fa0dae77]{max-height:var(--details-height-open,auto)}details .heading.sub-chapter-title[data-v-fa0dae77]:after,details .heading[data-v-fa0dae77]:after{border-right:3px solid #151515;border-top:3px solid #151515;color:#151515;content:"";display:flex;float:right;height:9px;margin-left:16px;position:absolute;right:var(--rh-space-xl,24px);top:14px;transform:rotate(45deg);width:9px}details .heading.sub-chapter-title[data-v-fa0dae77]:after{height:8px;width:8px}</style>
<style>.item[data-v-b883c74f]{line-height:22px}#toc .link[data-v-b883c74f],#toc-mobile .link[data-v-b883c74f]{color:var(--rh-color-text-primary-on-light,#151515)}#toc .link[data-v-b883c74f],#toc-mobile .link[data-v-b883c74f],.heading[data-v-b883c74f],.sub-nav .link[data-v-b883c74f],.sub-nav .link .link[data-v-b883c74f]{display:block;padding:var(--rh-space-md,8px) var(--rh-space-2xl,32px);padding-right:2.5em;text-decoration:none;transition:background-color .25s}.heading[data-v-b883c74f]:hover,.link[data-v-b883c74f]:hover,.sub-nav .link[data-v-b883c74f]:hover{background:var(--rh-color-surface-lighter,#f2f2f2);box-shadow:inset 3px 0 0 0 #d2d2d2;color:#151515}ol[data-v-b883c74f]{margin:0;padding:0}li[data-v-b883c74f],ol[data-v-b883c74f],ul[data-v-b883c74f]{list-style:none;margin:0}.chapter-title[data-v-b883c74f]{font-size:1em}.sub-nav[data-v-b883c74f]{font-size:1em;line-height:24px;list-style:none;margin:0;padding-left:1rem;padding-left:16px}.sub-nav .link[data-v-b883c74f]:hover{color:#151515}.active[data-v-b883c74f]{background:var(--rh-color-surface-lighter,#f2f2f2);box-shadow:inset 3px 0 0 0 var(--rh-color-icon-primary-on-light,#e00)}.sub-chapter-title[data-v-b883c74f],.sub-chapter-title a[data-v-b883c74f]{font-size:.875rem}summary[data-v-b883c74f]{cursor:pointer;list-style:none;position:relative}summary[data-v-b883c74f]::-webkit-details-marker{display:none}html[data-v-b883c74f]{--details-transition-time:400ms}.chapter-landing-page[data-v-b883c74f]{font-weight:500}details[open]:first-of-type>.heading[data-v-b883c74f]:after{transform:rotate(135deg)}details[data-v-b883c74f]{max-height:var(--details-height-closed,auto);transition:all ease-out var(--details-transition-time,0)}details[open][data-v-b883c74f]{max-height:var(--details-height-open,auto)}details .heading.sub-chapter-title[data-v-b883c74f]:after,details .heading[data-v-b883c74f]:after{border-right:3px solid #151515;border-top:3px solid #151515;color:#151515;content:"";display:flex;float:right;height:9px;margin-left:16px;position:absolute;right:var(--rh-space-xl,24px);top:14px;transform:rotate(45deg);width:9px}details .heading.sub-chapter-title[data-v-b883c74f]:after{height:8px;width:8px}</style>
<style>.html-container[data-v-9c2a9ddb]{padding:2rem 1.5rem 0}rh-alert[data-v-9c2a9ddb]{color:#151515}@media (max-width:772px){.html-container[data-v-9c2a9ddb]{padding:3rem 1rem 0}}</style>
<style>.search-container[data-v-69710f44]{height:100%}.form-box[data-v-69710f44],.search-container[data-v-69710f44]{justify-content:center}.form-box[data-v-69710f44],.search-box[data-v-69710f44],.search-container[data-v-69710f44]{align-items:center;display:flex;width:100%}.search-box[data-v-69710f44]{justify-content:space-between;position:relative}ul[data-v-69710f44]{list-style-type:none}#search-list[data-v-69710f44]{background:#fff;border:1px solid #f0f0f0;box-shadow:0 4px 4px 0 #00000040;color:#151515;display:block;left:0;margin:0;padding:0;position:absolute;top:37px;width:100%;z-index:200}#search-list li[data-v-69710f44]{align-items:center;display:flex;justify-content:space-between;padding:.75rem}#search-list .active[data-v-69710f44],#search-list li[data-v-69710f44]:hover{background:#f0f0f0}.group-title[data-v-69710f44]{border-top:1px solid #4d4d4d;color:#4d4d4d;cursor:default;font-size:12px;font-weight:400;pointer-events:none}.group-title[data-v-69710f44],.group-title[data-v-69710f44]:hover{background:#fff}.search-item-text-elipsis[data-v-69710f44]{display:inline-block;max-width:48%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.search-item-text[data-v-69710f44]{padding-left:1.75rem}.search-item-chip[data-v-69710f44]{float:right}.search-product-version[data-v-69710f44]{background:#fff;border:1px solid #f0f0f0;border-radius:3px;font-size:1rem;font-weight:400;line-height:24px}.search-icon-form[data-v-69710f44]{color:var(--rh-color-gray-50,#707070);left:12px;position:absolute}.input-search-box[data-v-69710f44]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);height:36px;padding:0 40px;width:100%}.input-clear-btn[data-v-69710f44]{align-items:center;background-color:transparent;border:none;display:flex;height:36px;justify-content:center;margin-right:-30px;outline:none;transform:translateX(-30px)}.input-clear-btn[data-v-69710f44]:focus{border:1px solid var(--rh-color-accent-base-on-light,#06c)}.input-clear-btn:focus .input-clear-icon[data-v-69710f44]{color:var(--rh-color-canvas-black,#151515)}.input-clear-icon[data-v-69710f44]{color:#6b6e72;cursor:pointer}.input-clear-icon[data-v-69710f44]:hover{color:var(--rh-color-canvas-black,#151515)}.form-submit-btn[data-v-69710f44]::part(button){align-items:center;background-color:var(--rh-color-gray-20,#e0e0e0);border-radius:0;display:flex;height:36px;justify-content:center;--_default-border-color:var(--rh-color-gray-20,#e0e0e0)}.input-close-btn[data-v-69710f44]{background:none;border:none;cursor:pointer;margin:0 var(--rh-space-lg,16px)}.input-close-icon[data-v-69710f44]{color:var(--rh-color-white,#fff)}@media (max-width:992px){.form-box[data-v-69710f44]{gap:var(--rh-space-md,8px);margin:auto;width:100%}.input-search-box[data-v-69710f44]{border:1px solid var(--rh-color-gray-30,#c7c7c7)}.input-search-box[data-v-69710f44]::-moz-placeholder{color:#6a6e73;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);font-weight:var(--rh-font-weight-code-regular,400);line-height:24px}.input-search-box[data-v-69710f44]::placeholder{color:#6a6e73;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);font-weight:var(--rh-font-weight-code-regular,400);line-height:24px}.search-item-text-elipsis[data-v-69710f44]{max-width:60%}}@media (max-width:767px){.input-close-btn[data-v-69710f44]{display:none}.search-container[data-v-69710f44]{border:1px solid #f0f0f0}}</style>
<link rel="stylesheet" href="/_nuxt/entry.DNAluCmw.css" integrity="sha384-FnrZajt9k3u4tri3ClqikI96k+jP7kyrvgKKgdzBr5Y8CQEi3gusKE0+eMSLvGxm">
<link rel="stylesheet" href="/_nuxt/SearchAutocomplete.DkrJaF8R.css" integrity="sha384-Zw8gf6w7SrpWDmknvrab5QanIN+DSJRS/bPB9/lgDkhR7JhDmG/VF++MTMKU8mKB">
<link rel="stylesheet" href="/_nuxt/Breadcrumbs.BLkLxUMB.css" integrity="sha384-f6iEfCywVoZB0/hIKTRaxywtS21KzhBx2JOI/uVjjU9aqFcP7X9cqLH29w2HQvLe">
<link rel="stylesheet" href="/_nuxt/Alert.fTkXFs3h.css" integrity="sha384-yFMpT5E64LAQi3qJ10AJJ1oOH3DrI68OvLSjSivjNCQXZ25pmFxlPavPQ0TEyEpq">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/C3PvZR0C.js" integrity="sha384-H9Can2ny34kmIBk2SNFJRaBH6FotFjI6LVF8tQ4HqJnqY0a1tGDF/4RHxK2LFs7c">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Ds9UYxCD.js" integrity="sha384-PFyBx6Pvk48yXM+prD4CDErW/3HFtPEqORVyAch5qDvJSyubA93+vR4jsWGRQKZs">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BUXK7nH-.js" integrity="sha384-Kqf3r1QrD7+NOn9EuK/ba9sTBZjn7vLAjnCoRtq7IKz+QV0JUUBFf1Snf1yVkkgr">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BxBriHwM.js" integrity="sha384-bejD6BN5N1iVRo5Ymn+LdVN0jvrnJTzgqgFD9xQ5+Yi46U6ff+s5W2AISzRWvJaM">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DB5Lt3x5.js" integrity="sha384-Ae/gV/4Dt4jnJApC0CWbckKJ7omq+W9Hb4jjdMyhxGJpwk6FlO7pGYMD3bPO/h1y">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/D8BFaW0S.js" integrity="sha384-/m09v/yYk14L9Hra6/9jYtMTn2IdkKQvzpFPRQ5P/baRKwdZQN98873hqvwuYXFS">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/_58Q44fW.js" integrity="sha384-EdSd8jpnetO/BWDAc8C4SpQExZ7pYjMygNPvbLmiA1TaYsNUdVOqIIyOIzaErEeU">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DOCUiUcq.js" integrity="sha384-9H868K5q7MLzC8TSRXT3pVqDzsOVxZLYvUQ8cLGpHPZCFEyEJjnwSHE+/7FWrJPV">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CiTVMRA7.js" integrity="sha384-xBIJ2xO0t62/oREKqSxPtW1tRxKY+5YYXbGcJ0QR9IRM28JhL+53NOiAvVFn3rmF">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/CR3F0y4K.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/Bn-QuJwp.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/T_zvNmZe.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/Ciddaed-.js">
<link rel="prefetch" as="image" type="image/svg+xml" href="/_nuxt/Footer_Cloud.DpSdW8MR.svg">
<script type="module">
      import "@rhds/elements/rh-cta/rh-cta.js";
      </script>
<script type="module">
      import '@rhds/elements/rh-alert/rh-alert.js';
      </script>
<script type="module">
        import "/scripts/v1/@cpelements/pfe-navigation/dist/pfe-navigation.min.js";
        import "/scripts/v1/@rhds/elements/elements/rh-button/rh-button.js";
      </script>
<script type="module">import "@rhds/elements/rh-footer/rh-footer.js"</script>
<link rel="canonical" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html-single/managing_smart_card_authentication/index">
<script type="module">
      import "@rhds/elements/rh-alert/rh-alert.js";
      import "@rhds/elements/rh-code-block/rh-code-block.js";
      import '@rhds/elements/rh-cta/rh-cta.js';
      import '@patternfly/elements/pf-switch/pf-switch.js';
      import '@cpelements/rh-table/dist/rh-table.js';
      import '@patternfly/pfe-clipboard/dist/pfe-clipboard.min.js';
      import '@patternfly/elements/pf-button/pf-button.js';
      import '@patternfly/elements/pf-modal/pf-modal.js';
      import '@patternfly/elements/pf-icon/pf-icon.js';
      import '@patternfly/elements/pf-popover/pf-popover.js';
      import '@patternfly/elements/pf-tooltip/pf-tooltip.js';
      import '@rhds/elements/rh-badge/rh-badge.js';
      </script>
<meta name="description" content="Managing smart card authentication | Red Hat Documentation">
<meta name="app-version" content="v0.0.1">
<script type="module">
        import "/scripts/v1/@rhds/elements/elements/rh-button/rh-button.js";
      </script>
<script type="module">
      import '@rhds/elements/rh-alert/rh-alert.js';
      </script>
<script type="module">
        import "/scripts/v1/@rhds/elements/elements/rh-button/rh-button.js";
        import "@patternfly/elements/pf-badge/pf-badge.js";
      </script>
<script type="module" src="/_nuxt/C3PvZR0C.js" crossorigin integrity="sha384-H9Can2ny34kmIBk2SNFJRaBH6FotFjI6LVF8tQ4HqJnqY0a1tGDF/4RHxK2LFs7c"></script></head><body><div id="__nuxt"><!--[--><!--[--><!----><header data-v-edc0d12c><a href="#pfe-navigation" id="global-skip-to-nav" class="skip-link visually-hidden" data-v-edc0d12c>Skip to navigation</a><a href="#main-content" class="skip-link visually-hidden" data-v-edc0d12c>Skip to content</a><nav id="upper-navigation" class="upper-navigation" aria-labelledby="upper-navigation-label" data-analytics-region="upper-navigation" data-v-edc0d12c><p id="upper-navigation-label" class="upper-nav-hidden" data-v-edc0d12c>Featured links</p><div class="upper-nav-container" data-v-edc0d12c><ul class="upper-nav-menu" data-v-edc0d12c><li data-v-edc0d12c><a href="https://access.redhat.com/" class="upper-nav-links" data-analytics-text="Support" data-analytics-category="Featured Links" data-v-edc0d12c>Support</a></li><li data-v-edc0d12c><a href="https://console.redhat.com/" class="upper-nav-links" data-analytics-text="Console" data-analytics-category="Featured Links" data-v-edc0d12c>Console</a></li><li data-v-edc0d12c><a href="https://developers.redhat.com/" class="upper-nav-links" data-analytics-text="Developers" data-analytics-category="Featured Links" data-v-edc0d12c>Developers</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/products/trials" class="upper-nav-links" data-analytics-text="Start a trial" data-analytics-category="Featured Links" data-v-edc0d12c>Start a trial</a></li><li data-v-edc0d12c><button id="all-red-hat" class="upper-nav-links" data-analytics-text="All Red Hat" data-analytics-category="Featured Links" aria-expanded="false" data-analytics-linktype="tab" data-v-edc0d12c>All Red Hat<svg class="upper-nav-arrow" xmlns="http://www.w3.org/2000/svg" width="1024" height="1024" viewBox="0 0 1024 1024" aria-hidden="true" data-v-edc0d12c=""><path d="M810.642 511.557c0 8.905-3.447 16.776-10.284 23.613L322.31 1013.216c-6.835 6.837-14.706 10.284-23.61 10.284s-16.776-3.447-23.613-10.284l-51.303-51.303c-6.837-6.837-10.284-14.707-10.284-23.612s3.447-16.775 10.284-23.61L626.972 511.5 223.784 108.31c-6.837-6.835-10.284-14.706-10.284-23.61s3.447-16.776 10.284-23.613l51.303-51.303C281.924 2.947 289.794-.5 298.7-.5s16.775 3.447 23.61 10.284L800.36 487.83c6.837 6.837 10.284 14.708 10.284 23.613v.114" data-v-edc0d12c=""/></svg></button><div class="upper-nav-dropdown-container" data-v-edc0d12c><ul data-v-edc0d12c><li data-v-edc0d12c><span data-v-edc0d12c>For customers</span><ul data-v-edc0d12c><li data-v-edc0d12c><a href="https://access.redhat.com/support" data-pzn-audience="customers" data-analytics-category="All Red Hat|For customers" data-analytics-text="Customer support" data-v-edc0d12c>Customer support</a></li><li data-v-edc0d12c><a href="/products" data-pzn-audience="customers" data-analytics-category="All Red Hat|For customers" data-analytics-text="Documentation" data-v-edc0d12c>Documentation</a></li><li data-v-edc0d12c><a href="https://access.redhat.com/support/cases" data-pzn-audience="customers" data-analytics-category="All Red Hat|For customers" data-analytics-text="Support cases" data-v-edc0d12c>Support Cases</a></li><li data-v-edc0d12c><a href="https://access.redhat.com/management" data-pzn-audience="customers" data-analytics-category="All Red Hat|For customers" data-analytics-text="Subscription management" data-v-edc0d12c>Subscription management</a></li><li data-v-edc0d12c><a href="https://catalog.redhat.com/" data-analytics-category="All Red Hat|For customers" data-analytics-text="Red Hat Ecosystem Catalog" data-v-edc0d12c>Red Hat Ecosystem Catalog</a></li><li data-v-edc0d12c><a href="https://catalog.redhat.com/partners" data-analytics-category="All Red Hat|For customers" data-analytics-text="Find a partner" data-v-edc0d12c>Find a partner</a></li></ul></li><li data-v-edc0d12c><span data-v-edc0d12c>For partners</span><ul data-v-edc0d12c><li data-v-edc0d12c><a href="https://connect.redhat.com/login" data-pzn-audience="partners" data-analytics-category="All Red Hat|For partners" data-analytics-text="Partner login" data-v-edc0d12c>Partner login</a></li><li data-v-edc0d12c><a href="https://connect.redhat.com/en/support" data-pzn-audience="partners" data-analytics-category="All Red Hat|For partners" data-analytics-text="Partner support" data-v-edc0d12c>Partner support</a></li><li data-v-edc0d12c><a href="https://connect.redhat.com/" data-pzn-audience="partners" data-analytics-category="All Red Hat|For partners" data-analytics-text="Become a partner " data-v-edc0d12c>Become a partner</a></li></ul></li><li data-v-edc0d12c><span data-v-edc0d12c>Try, buy, &amp; sell</span><ul data-v-edc0d12c><li data-v-edc0d12c><a href="https://marketplace.redhat.com/en-us" data-analytics-category="All Red Hat|Try, buy, &amp; sell" data-analytics-text="Red Hat Marketplace" data-v-edc0d12c>Red Hat Marketplace</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/store" data-analytics-category="All Red Hat|Try, buy, &amp; sell" data-analytics-text="Red Hat Store" data-v-edc0d12c>Red Hat Store</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/contact" data-analytics-category="All Red Hat|Try, buy, &amp; sell" data-analytics-text="Contact sales" data-v-edc0d12c>Contact Sales</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/products/trials" data-analytics-category="All Red Hat|Try, buy, &amp; sell" data-analytics-text="Start a trial" data-v-edc0d12c>Start a trial</a></li></ul></li><li data-v-edc0d12c><span data-v-edc0d12c>Learning resources</span><ul data-v-edc0d12c><li data-v-edc0d12c><a href="https://www.redhat.com/en/services/training-and-certification" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="Training and certification " data-v-edc0d12c>Training and certification</a></li><li data-v-edc0d12c><a href="https://developers.redhat.com/" data-pzn-audience="developers|community" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="For developers" data-v-edc0d12c>For developers</a></li><li data-v-edc0d12c><a href="https://cloud.redhat.com/learn" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="Hybrid cloud learning hub" data-v-edc0d12c>Hybrid cloud learning hub</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/interactive-labs" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="Interactive labs" data-v-edc0d12c>Interactive labs</a></li><li data-v-edc0d12c><a href="https://learn.redhat.com/" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="Learning community" data-v-edc0d12c>Learning community</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/tv" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="Red Hat TV" data-v-edc0d12c>Red Hat TV</a></li></ul></li><li data-v-edc0d12c><span data-v-edc0d12c>Open source communities</span><ul data-v-edc0d12c><li data-v-edc0d12c><a href="https://www.ansible.com/community" data-analytics-category="All Red Hat|Open source communities" data-analytics-text="Ansible" data-v-edc0d12c>Ansible</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/sysadmin/" id="community" data-analytics-category="All Red Hat|Open source communities" data-analytics-text="For system administrators" data-v-edc0d12c>For system administrators</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/architect/" data-pzn-audience="community" data-analytics-category="All Red Hat|Open source communities" data-analytics-text="For architects" data-v-edc0d12c>For architects</a></li></ul></li></ul></div></li></ul></div></nav><pfe-navigation full-width id="pfe-navigation" pf-sticky="true" lang="en" data-v-edc0d12c><nav class="pfe-navigation" aria-label="Main Navigation" data-v-edc0d12c><div class="pfe-navigation__logo-wrapper" id="pfe-navigation__logo-wrapper" data-v-edc0d12c><a href="/en" class="pfe-navigation__logo-link" data-v-edc0d12c><img class="pfe-navigation__logo-image pfe-navigation__logo-image--screen pfe-navigation__logo-image--small" src="/Logo-Red_Hat-Documentation-A-Reverse-RGB.svg" width="240" height="40" alt="Red Hat Documentation" data-v-edc0d12c></a></div></nav><span data-v-edc0d12c></span><div slot="secondary-links" data-v-edc0d12c><div class="hidden-at-desktop hidden-at-tablet search-mobile" data-v-edc0d12c><div id="search-form" class="search-container" opensearchbox="true" data-v-edc0d12c data-v-69710f44><form role="search" class="form-box" autocomplete="off" data-v-69710f44><div class="search-box" data-v-69710f44><pf-icon icon="search" size="md" class="search-icon-form" data-v-69710f44></pf-icon><input type="text" id="input-search" class="input-search-box" placeholder="Search documentation" value aria-autocomplete="list" data-v-69710f44><!----><!----><!----><rh-button disabled variant="tertiary" class="form-submit-btn" data-v-69710f44><img src="data:image/svg+xml,%3csvg%20width=&#39;14&#39;%20height=&#39;14&#39;%20viewBox=&#39;0%200%2014%2014&#39;%20fill=&#39;none&#39;%20xmlns=&#39;http://www.w3.org/2000/svg&#39;%3e%3cpath%20d=&#39;M7%200L5.6%201.4L10.3%206H0V8H10.3L5.6%2012.6L7%2014L14%207L7%200Z&#39;%20fill=&#39;%23707070&#39;/%3e%3c/svg%3e" alt="Submit button" data-v-69710f44></rh-button></div></form><!----></div></div><div class="hidden-at-desktop hidden-at-tablet buttons" data-v-edc0d12c><a href="https://access.redhat.com/" data-analytics-category="More Red Hat" data-analytics-text="Support" data-v-edc0d12c>Support</a><a href="https://console.redhat.com/" data-analytics-category="More Red Hat" data-analytics-text="Console" data-v-edc0d12c>Console</a><a href="https://developers.redhat.com/" data-analytics-category="More Red Hat" data-analytics-text="Developers" data-v-edc0d12c>Developers</a><a href="https://www.redhat.com/en/products/trials" data-analytics-category="More Red Hat" data-analytics-text="Start a trial" data-v-edc0d12c>Start a trial</a><a href="https://www.redhat.com/en/contact" data-analytics-category="More Red Hat" data-analytics-text="Contact" data-v-edc0d12c>Contact</a></div><div class="hidden-at-desktop hidden-at-tablet mobile-lang-select" data-v-edc0d12c><label for="lang_selection" data-v-edc0d12c>Select your language</label><select id="lang_selection" data-v-edc0d12c><!--[--><option value="en" xml:lang="en" hreflang="en" data-v-edc0d12c>English</option><option value="fr" xml:lang="fr" hreflang="fr" data-v-edc0d12c>Français</option><option value="ko" xml:lang="ko" hreflang="ko" data-v-edc0d12c>한국어</option><option value="ja" xml:lang="ja" hreflang="ja" data-v-edc0d12c>日本語</option><option value="zh-cn" xml:lang="zh-cn" hreflang="zh-cn" data-v-edc0d12c>中文 (中国)</option><option value="de" xml:lang="de" hreflang="de" data-v-edc0d12c>Deutsch</option><option value="it" xml:lang="it" hreflang="it" data-v-edc0d12c>Italiano</option><option value="pt-br" xml:lang="pt-br" hreflang="pt-br" data-v-edc0d12c>Português</option><option value="es" xml:lang="es" hreflang="es" data-v-edc0d12c>Español</option><!--]--></select></div></div></pfe-navigation></header><main id="main-content"><!--[--><!--[--><!--[--><!----><!----><!--]--><div class="breadcrumbs" id="breadcrumbs" data-v-8589d091 data-v-798f280c><nav aria-label="Breadcrumb" class="breadcrumb" data-v-798f280c><ol data-v-798f280c><li data-v-798f280c><a href="/" data-v-798f280c>Home</a></li><li data-v-798f280c><a href="/en/products" data-v-798f280c>Products</a></li><!--[--><li data-v-798f280c><a href="/en/documentation/red_hat_enterprise_linux/" data-v-798f280c>Red Hat Enterprise Linux</a></li><li data-v-798f280c><a href="/en/documentation/red_hat_enterprise_linux/9/" data-v-798f280c>9</a></li><li data-v-798f280c><!--[-->Managing smart card authentication<!--]--></li><!--]--></ol></nav><span data-v-798f280c></span></div><!----><nav id="mobile-nav" class="mobile-nav" aria-label="mobile menu" data-v-8589d091><div class="mobile-nav-wrapper" data-v-8589d091><div id="first-button" data-v-8589d091><button id="toc-btn" aria-expanded="false" aria-controls="mobile-nav-content-wrapper" class="mobile-nav-btn" data-v-8589d091><span class="sr-only" data-v-8589d091>Open </span>Table of contents</button></div><div id="second-button" data-v-8589d091><button id="settings-btn" aria-expanded="false" aria-controls="mobile-nav-content-wrapper" class="mobile-nav-btn" data-v-8589d091><pf-icon icon="cog" size="md" data-v-8589d091></pf-icon><span class="sr-only" data-v-8589d091>Open page settings</span></button></div></div><div id="mobile-nav-content-wrapper" class="hidden" role="navigation" tabindex="0" data-v-8589d091><div id="toc-mobile" class="hidden" aria-labelledby="toc-btn" data-v-8589d091><div class="shrink-product-padding product-container" id="product-container-mobile" data-v-8589d091><h1 class="product-title" data-v-8589d091>Red Hat Enterprise Linux</h1><!----></div><div class="toc-filter-mobile" data-v-8589d091><span id="text" part="text" data-v-8589d091><input id="text-input" aria-label="Search input" part="text-input" placeholder="Filter table of contents" type="text" class value data-v-8589d091><!----></span></div><div id="toc-wrapper-mobile" class="span-xs-12 span-sm-4 span-md-3" lang="en" data-v-8589d091><nav id="mobile-toc-menu" class="table-of-contents" aria-label="table of content - mobile" data-v-8589d091><!----></nav></div><!----></div><div id="page-content-options-mobile" class="hidden" aria-labelledby="settings-btn" data-v-8589d091><div class="page-layout-options" data-v-8589d091><label for="page-format-mobile" data-v-8589d091>Format</label><select id="page-format-mobile" class="page-format-dropdown" data-v-8589d091><option class="page-type" value="html" data-v-8589d091>Multi-page</option><option selected class="page-type" value="html-single" data-v-8589d091>Single-page</option><option class="page-type" value="pdf" data-v-8589d091>View full doc as PDF</option></select></div></div></div><!----><!----></nav><div class="grid grid-col-12 content-wrapper" data-v-8589d091><aside id="left-content" class="span-xs-12 span-sm-4 span-md-3" lang="en-us" aria-label="left navigation" xml:lang="en-us" data-v-8589d091><div class="toc-container" id="toc-container" visible="true" data-v-8589d091><div class="toc-focus-container" id="toc-focus-container" data-v-8589d091><button class="toc-focus-btn" aria-label="toggle left menu" aria-controls="toc-container" aria-expanded="true" data-v-8589d091><pf-icon size="md" icon="angle-left" class="toc-focus-btn-icon" data-v-8589d091></pf-icon></button></div><div class="product-container" id="product-container-desktop" data-v-8589d091><h1 class="product-title" data-v-8589d091>Red Hat Enterprise Linux</h1><!----></div><div class="toc-filter" id="toc-filter" data-v-8589d091><span id="text" part="text" data-v-8589d091><span id="search-icon" part="search-icon" data-v-8589d091><pf-icon icon="filter" size="md" data-v-8589d091></pf-icon></span><input id="text-input" aria-label="Search input" part="text-input" placeholder="Filter table of contents" type="text" class value data-v-8589d091><!----></span></div><div id="toc-wrapper" class="toc-wrapper" data-v-8589d091><nav id="toc" class="max-height-85 table-of-contents" aria-label="Table of contents" data-v-8589d091><ol id="toc-list" data-v-8589d091><!--[--><li class="item chapter" data-v-fa0dae77><a class="link active" href id="chapter-index" data-v-fa0dae77>Managing smart card authentication</a></li><li class="item chapter" data-v-fa0dae77><a class="link" href="#proc_providing-feedback-on-red-hat-documentation_managing-smart-card-authentication" id="chapter-landing--managing_smart_card_authentication-proc_providing-feedback-on-red-hat-documentation_managing-smart-card-authentication" data-v-fa0dae77>Providing feedback on Red Hat documentation</a></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_understanding-smart-card-authentication_managing-smart-card-authentication" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_understanding-smart-card-authentication_managing-smart-card-authentication--summary" data-v-fa0dae77>1. Understanding smart card authentication</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_understanding-smart-card-authentication_managing-smart-card-authentication" id="chapter-landing--managing_smart_card_authentication-assembly_understanding-smart-card-authentication_managing-smart-card-authentication" data-v-fa0dae77>Understanding smart card authentication</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_what-is-a-smart-card_assembly_understanding-smart-card-authentication" id="sub-link-to-managing_smart_card_authentication-con_what-is-a-smart-card_assembly_understanding-smart-card-authentication" data-v-b883c74f>1.1. What is a smart card</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--con_what-is-smart-card-authentication_assembly_understanding-smart-card-authentication" data-v-b883c74f><summary class="heading sub-chapter-title" id="con_what-is-smart-card-authentication_assembly_understanding-smart-card-authentication--summary" data-v-b883c74f>1.2. What is smart card authentication</summary><ol id="sub-nav--con_what-is-smart-card-authentication_assembly_understanding-smart-card-authentication" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#con_what-is-smart-card-authentication_assembly_understanding-smart-card-authentication" id="chapter-landing--managing_smart_card_authentication-con_what-is-smart-card-authentication_assembly_understanding-smart-card-authentication" data-v-b883c74f>What is smart card authentication</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--examples_of_smart_card_authentication_in_idm" data-v-b883c74f><summary class="heading sub-chapter-title" id="examples_of_smart_card_authentication_in_idm--summary" data-v-b883c74f>1.2.1. Examples of smart card authentication in IdM</summary><ol id="sub-nav--examples_of_smart_card_authentication_in_idm" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#examples_of_smart_card_authentication_in_idm" id="chapter-landing--managing_smart_card_authentication-examples_of_smart_card_authentication_in_idm" data-v-b883c74f>Examples of smart card authentication in IdM</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#logging_in_to_your_system_with_a_smart_card" id="sub-link-to-managing_smart_card_authentication-logging_in_to_your_system_with_a_smart_card" data-v-b883c74f>1.2.1.1. Logging in to your system with a smart card</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#logging_in_to_gdm_with_lock_on_removal" id="sub-link-to-managing_smart_card_authentication-logging_in_to_gdm_with_lock_on_removal" data-v-b883c74f>1.2.1.2. Logging in to GDM with lock on removal</a></li><!--]--><!--]--></ol></details></li><!--]--><!--]--></ol></details></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_smart-card-authentication-options-in-rhel_assembly_understanding-smart-card-authentication" id="sub-link-to-managing_smart_card_authentication-con_smart-card-authentication-options-in-rhel_assembly_understanding-smart-card-authentication" data-v-b883c74f>1.3. Smart card authentication options in RHEL</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_tools-for-managing-smart-cards-and-their-contents_assembly_understanding-smart-card-authentication" id="sub-link-to-managing_smart_card_authentication-con_tools-for-managing-smart-cards-and-their-contents_assembly_understanding-smart-card-authentication" data-v-b883c74f>1.4. Tools for managing smart cards and their contents</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_certificates-and-smart-card-authentication_assembly_understanding-smart-card-authentication" id="sub-link-to-managing_smart_card_authentication-con_certificates-and-smart-card-authentication_assembly_understanding-smart-card-authentication" data-v-b883c74f>1.5. Certificates and smart card authentication</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_required-steps-for-smart-card-authentication-in-idm_assembly_understanding-smart-card-authentication" id="sub-link-to-managing_smart_card_authentication-con_required-steps-for-smart-card-authentication-in-idm_assembly_understanding-smart-card-authentication" data-v-b883c74f>1.6. Required steps for smart card authentication in IdM</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_required-steps-for-smart-card-authentication-in-active-directory_assembly_understanding-smart-card-authentication" id="sub-link-to-managing_smart_card_authentication-con_required-steps-for-smart-card-authentication-in-active-directory_assembly_understanding-smart-card-authentication" data-v-b883c74f>1.7. Required steps for smart card authentication with certificates issued by Active Directory</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-idm-for-smart-card-auth_managing-smart-card-authentication" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-idm-for-smart-card-auth_managing-smart-card-authentication--summary" data-v-fa0dae77>2. Configuring Identity Management for smart card authentication</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-idm-for-smart-card-auth_managing-smart-card-authentication" id="chapter-landing--managing_smart_card_authentication-configuring-idm-for-smart-card-auth_managing-smart-card-authentication" data-v-fa0dae77>Configuring Identity Management for smart card authentication</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#conf-idm-server-for-smart-card-auth_configuring-idm-for-smart-card-auth" id="sub-link-to-managing_smart_card_authentication-conf-idm-server-for-smart-card-auth_configuring-idm-for-smart-card-auth" data-v-b883c74f>2.1. Configuring the IdM server for smart card authentication</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_using-ansible-to-configure-the-idm-server-for-smart-card-authentication_configuring-idm-for-smart-card-auth" id="sub-link-to-managing_smart_card_authentication-proc_using-ansible-to-configure-the-idm-server-for-smart-card-authentication_configuring-idm-for-smart-card-auth" data-v-b883c74f>2.2. Using Ansible to configure the IdM server for smart card authentication</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#conf-idm-client-for-smart-card-auth_configuring-idm-for-smart-card-auth" id="sub-link-to-managing_smart_card_authentication-conf-idm-client-for-smart-card-auth_configuring-idm-for-smart-card-auth" data-v-b883c74f>2.3. Configuring the IdM client for smart card authentication</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_using-ansible-to-configure-idm-clients-for-smart-card-authentication_configuring-idm-for-smart-card-auth" id="sub-link-to-managing_smart_card_authentication-proc_using-ansible-to-configure-idm-clients-for-smart-card-authentication_configuring-idm-for-smart-card-auth" data-v-b883c74f>2.4. Using Ansible to configure IdM clients for smart card authentication</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc-add-cert-idm-user-webui_configuring-idm-for-smart-card-auth" id="sub-link-to-managing_smart_card_authentication-proc-add-cert-idm-user-webui_configuring-idm-for-smart-card-auth" data-v-b883c74f>2.5. Adding a certificate to a user entry in the IdM Web UI</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc-add-cert-idm-user-cli_configuring-idm-for-smart-card-auth" id="sub-link-to-managing_smart_card_authentication-proc-add-cert-idm-user-cli_configuring-idm-for-smart-card-auth" data-v-b883c74f>2.6. Adding a certificate to a user entry in the IdM CLI</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-tools-for-managing-and-using-smart-cards_configuring-idm-for-smart-card-auth" id="sub-link-to-managing_smart_card_authentication-installing-tools-for-managing-and-using-smart-cards_configuring-idm-for-smart-card-auth" data-v-b883c74f>2.7. Installing tools for managing and using smart cards</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#storing-a-certificate-on-the-smart-card_configuring-idm-for-smart-card-auth" id="sub-link-to-managing_smart_card_authentication-storing-a-certificate-on-the-smart-card_configuring-idm-for-smart-card-auth" data-v-b883c74f>2.8. Preparing your smart card and uploading your certificates and keys to your smart card</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#logging-in-to-idm-with-smart-cards_configuring-idm-for-smart-card-auth" id="sub-link-to-managing_smart_card_authentication-logging-in-to-idm-with-smart-cards_configuring-idm-for-smart-card-auth" data-v-b883c74f>2.9. Logging in to IdM with smart cards</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-gdm-access-using-smart-card-authentication_configuring-idm-for-smart-card-auth" id="sub-link-to-managing_smart_card_authentication-configuring-gdm-access-using-smart-card-authentication_configuring-idm-for-smart-card-auth" data-v-b883c74f>2.10. Logging in to GDM using smart card authentication on an IdM client</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-su-access-using-smart-card-authentication_configuring-idm-for-smart-card-auth" id="sub-link-to-managing_smart_card_authentication-configuring-su-access-using-smart-card-authentication_configuring-idm-for-smart-card-auth" data-v-b883c74f>2.11. Using smart card authentication with the su command</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication--summary" data-v-fa0dae77>3. Configuring certificates issued by ADCS for smart card authentication in IdM</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication" id="chapter-landing--managing_smart_card_authentication-configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication" data-v-fa0dae77>Configuring certificates issued by ADCS for smart card authentication in IdM</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#windows-server-settings-required-for-trust-configuration-and-certificate-usage_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm" id="sub-link-to-managing_smart_card_authentication-windows-server-settings-required-for-trust-configuration-and-certificate-usage_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm" data-v-b883c74f>3.1. Windows Server settings required for trust configuration and certificate usage</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#copying-certificates-from-active-directory-using-sftp_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm" id="sub-link-to-managing_smart_card_authentication-copying-certificates-from-active-directory-using-sftp_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm" data-v-b883c74f>3.2. Copying certificates from Active Directory using sftp</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-the-idm-server-and-clients-for-smart-card-authentication-using-adcs-certificates_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm" id="sub-link-to-managing_smart_card_authentication-configuring-the-idm-server-and-clients-for-smart-card-authentication-using-adcs-certificates_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm" data-v-b883c74f>3.3. Configuring the IdM server and clients for smart card authentication using ADCS certificates</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#converting-the-pfx-file_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm" id="sub-link-to-managing_smart_card_authentication-converting-the-pfx-file_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm" data-v-b883c74f>3.4. Converting the PFX file</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-tools-for-managing-and-using-smart-cards_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm" id="sub-link-to-managing_smart_card_authentication-installing-tools-for-managing-and-using-smart-cards_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm" data-v-b883c74f>3.5. Installing tools for managing and using smart cards</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#storing-a-certificate-on-the-smart-card_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm" id="sub-link-to-managing_smart_card_authentication-storing-a-certificate-on-the-smart-card_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm" data-v-b883c74f>3.6. Preparing your smart card and uploading your certificates and keys to your smart card</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-timeouts-in-sssd-conf_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm" id="sub-link-to-managing_smart_card_authentication-configuring-timeouts-in-sssd-conf_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm" data-v-b883c74f>3.7. Configuring timeouts in sssd.conf</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#certificate-mapping-rules-for-smart-card-authentication_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm" id="sub-link-to-managing_smart_card_authentication-certificate-mapping-rules-for-smart-card-authentication_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm" data-v-b883c74f>3.8. Creating certificate mapping rules for smart card authentication</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><a class="link" href="#con-idm-certmapdata_managing-smart-card-authentication" id="chapter-landing--managing_smart_card_authentication-con-idm-certmapdata_managing-smart-card-authentication" data-v-fa0dae77>4. Certificate mapping rules for configuring authentication</a></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-smart-card-authentication-with-the-web-console_managing-smart-card-authentication" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-smart-card-authentication-with-the-web-console_managing-smart-card-authentication--summary" data-v-fa0dae77>5. Configuring smart card authentication with the web console for centrally managed users</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-smart-card-authentication-with-the-web-console_managing-smart-card-authentication" id="chapter-landing--managing_smart_card_authentication-configuring-smart-card-authentication-with-the-web-console_managing-smart-card-authentication" data-v-fa0dae77>Configuring smart card authentication with the web console for centrally managed users</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#smart-card-authentication-for-centrally-managed-users_configuring-smart-card-authentication-with-the-web-console" id="sub-link-to-managing_smart_card_authentication-smart-card-authentication-for-centrally-managed-users_configuring-smart-card-authentication-with-the-web-console" data-v-b883c74f>5.1. Smart card authentication for centrally managed users</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-tools-for-managing-and-using-smart-cards_configuring-smart-card-authentication-with-the-web-console" id="sub-link-to-managing_smart_card_authentication-installing-tools-for-managing-and-using-smart-cards_configuring-smart-card-authentication-with-the-web-console" data-v-b883c74f>5.2. Installing tools for managing and using smart cards</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#storing-a-certificate-on-the-smart-card_configuring-smart-card-authentication-with-the-web-console" id="sub-link-to-managing_smart_card_authentication-storing-a-certificate-on-the-smart-card_configuring-smart-card-authentication-with-the-web-console" data-v-b883c74f>5.3. Preparing your smart card and uploading your certificates and keys to your smart card</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#enabling-smart-card-authentication-for-the-web-console_configuring-smart-card-authentication-with-the-web-console" id="sub-link-to-managing_smart_card_authentication-enabling-smart-card-authentication-for-the-web-console_configuring-smart-card-authentication-with-the-web-console" data-v-b883c74f>5.4. Enabling smart card authentication for the web console</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#logging-in-to-the-web-console-with-smart-cards_configuring-smart-card-authentication-with-the-web-console" id="sub-link-to-managing_smart_card_authentication-logging-in-to-the-web-console-with-smart-cards_configuring-smart-card-authentication-with-the-web-console" data-v-b883c74f>5.5. Logging in to the web console with smart cards</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_enabling-password-less-sudo-for-smart-card-users_configuring-smart-card-authentication-with-the-web-console" id="sub-link-to-managing_smart_card_authentication-proc_enabling-password-less-sudo-for-smart-card-users_configuring-smart-card-authentication-with-the-web-console" data-v-b883c74f>5.6. Enabling passwordless sudo authentication for smart card users</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#limiting-user-sessions-and-memory-to-prevent-a-dos-attack_configuring-smart-card-authentication-with-the-web-console" id="sub-link-to-managing_smart_card_authentication-limiting-user-sessions-and-memory-to-prevent-a-dos-attack_configuring-smart-card-authentication-with-the-web-console" data-v-b883c74f>5.7. Limiting user sessions and memory to prevent a DoS attack</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#additional_resources" id="sub-link-to-managing_smart_card_authentication-additional_resources" data-v-b883c74f>5.8. Additional resources</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-and-importing-local-certificates-to-a-smart-card_managing-smart-card-authentication" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-and-importing-local-certificates-to-a-smart-card_managing-smart-card-authentication--summary" data-v-fa0dae77>6. Configuring smart card authentication with local certificates</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-and-importing-local-certificates-to-a-smart-card_managing-smart-card-authentication" id="chapter-landing--managing_smart_card_authentication-configuring-and-importing-local-certificates-to-a-smart-card_managing-smart-card-authentication" data-v-fa0dae77>Configuring smart card authentication with local certificates</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-local-certificates_configuring-and-importing-local-certificates-to-a-smart-card" id="sub-link-to-managing_smart_card_authentication-creating-local-certificates_configuring-and-importing-local-certificates-to-a-smart-card" data-v-b883c74f>6.1. Creating local certificates</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_copying-certificate-to-the-sssd-directory_configuring-and-importing-local-certificates-to-a-smart-card" id="sub-link-to-managing_smart_card_authentication-proc_copying-certificate-to-the-sssd-directory_configuring-and-importing-local-certificates-to-a-smart-card" data-v-b883c74f>6.2. Copying certificates to the SSSD directory</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-tools-for-managing-and-using-smart-cards_configuring-and-importing-local-certificates-to-a-smart-card" id="sub-link-to-managing_smart_card_authentication-installing-tools-for-managing-and-using-smart-cards_configuring-and-importing-local-certificates-to-a-smart-card" data-v-b883c74f>6.3. Installing tools for managing and using smart cards</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#storing-a-certificate-on-the-smart-card_configuring-and-importing-local-certificates-to-a-smart-card" id="sub-link-to-managing_smart_card_authentication-storing-a-certificate-on-the-smart-card_configuring-and-importing-local-certificates-to-a-smart-card" data-v-b883c74f>6.4. Preparing your smart card and uploading your certificates and keys to your smart card</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-ssh-access-using-smart-card-authentication_configuring-and-importing-local-certificates-to-a-smart-card" id="sub-link-to-managing_smart_card_authentication-configuring-ssh-access-using-smart-card-authentication_configuring-and-importing-local-certificates-to-a-smart-card" data-v-b883c74f>6.5. Configuring SSH access using smart card authentication</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-smart-cards-using-authselect_managing-smart-card-authentication" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-smart-cards-using-authselect_managing-smart-card-authentication--summary" data-v-fa0dae77>7. Configuring smart card authentication using authselect</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-smart-cards-using-authselect_managing-smart-card-authentication" id="chapter-landing--managing_smart_card_authentication-configuring-smart-cards-using-authselect_managing-smart-card-authentication" data-v-fa0dae77>Configuring smart card authentication using authselect</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#certificates-eligible-for-smart-cards_configuring-smart-cards-using-authselect" id="sub-link-to-managing_smart_card_authentication-certificates-eligible-for-smart-cards_configuring-smart-cards-using-authselect" data-v-b883c74f>7.1. Certificates eligible for smart cards</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-smart-card-authentication-to-enable-user-password-authentication_configuring-smart-cards-using-authselect" id="sub-link-to-managing_smart_card_authentication-configuring-smart-card-authentication-to-enable-user-password-authentication_configuring-smart-cards-using-authselect" data-v-b883c74f>7.2. Configure your system to enable both smart card and password authentication</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-authselect-to-enforce-smart-card-authentication_configuring-smart-cards-using-authselect" id="sub-link-to-managing_smart_card_authentication-configuring-authselect-to-enforce-smart-card-authentication_configuring-smart-cards-using-authselect" data-v-b883c74f>7.3. Configuring your system to enforce smart card authentication</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-smart-card-authentication-with-lock-on-removal_configuring-smart-cards-using-authselect" id="sub-link-to-managing_smart_card_authentication-configuring-smart-card-authentication-with-lock-on-removal_configuring-smart-cards-using-authselect" data-v-b883c74f>7.4. Configuring smart card authentication with lock on removal</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_authenticating-to-sudo-remotely-using-smart-cards_managing-smart-card-authentication" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_authenticating-to-sudo-remotely-using-smart-cards_managing-smart-card-authentication--summary" data-v-fa0dae77>8. Authenticating to sudo remotely using smart cards</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_authenticating-to-sudo-remotely-using-smart-cards_managing-smart-card-authentication" id="chapter-landing--managing_smart_card_authentication-assembly_authenticating-to-sudo-remotely-using-smart-cards_managing-smart-card-authentication" data-v-fa0dae77>Authenticating to sudo remotely using smart cards</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_creating-sudo-rules-in-idm_assembly_authenticating-to-sudo-remotely-using-smart-cards" id="sub-link-to-managing_smart_card_authentication-proc_creating-sudo-rules-in-idm_assembly_authenticating-to-sudo-remotely-using-smart-cards" data-v-b883c74f>8.1. Creating sudo rules in IdM</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_setting-up-the-pam-module-for-sudo_assembly_authenticating-to-sudo-remotely-using-smart-cards" id="sub-link-to-managing_smart_card_authentication-proc_setting-up-the-pam-module-for-sudo_assembly_authenticating-to-sudo-remotely-using-smart-cards" data-v-b883c74f>8.2. Setting up the PAM module for sudo</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_connecting-to-sudo-remotely-using-a-smart-card_assembly_authenticating-to-sudo-remotely-using-smart-cards" id="sub-link-to-managing_smart_card_authentication-proc_connecting-to-sudo-remotely-using-a-smart-card_assembly_authenticating-to-sudo-remotely-using-smart-cards" data-v-b883c74f>8.3. Connecting to sudo remotely using a smart card</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><a class="link" href="#authenticating-as-an-active-directory-user-using-pkinit-with-a-smart-card_managing-smart-card-authentication" id="chapter-landing--managing_smart_card_authentication-authenticating-as-an-active-directory-user-using-pkinit-with-a-smart-card_managing-smart-card-authentication" data-v-fa0dae77>9. Authenticating as an Active Directory user using PKINIT with a smart card</a></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_troubleshooting-authentication-with-smart-cards_managing-smart-card-authentication" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_troubleshooting-authentication-with-smart-cards_managing-smart-card-authentication--summary" data-v-fa0dae77>10. Troubleshooting authentication with smart cards</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_troubleshooting-authentication-with-smart-cards_managing-smart-card-authentication" id="chapter-landing--managing_smart_card_authentication-assembly_troubleshooting-authentication-with-smart-cards_managing-smart-card-authentication" data-v-fa0dae77>Troubleshooting authentication with smart cards</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_testing-smart-card-authentication_assembly_troubleshooting-authentication-with-smart-cards" id="sub-link-to-managing_smart_card_authentication-proc_testing-smart-card-authentication_assembly_troubleshooting-authentication-with-smart-cards" data-v-b883c74f>10.1. Testing smart card access on the system</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_troubleshooting-smart-card-authentication-with-sssd_assembly_troubleshooting-authentication-with-smart-cards" id="sub-link-to-managing_smart_card_authentication-proc_troubleshooting-smart-card-authentication-with-sssd_assembly_troubleshooting-authentication-with-smart-cards" data-v-b883c74f>10.2. Troubleshooting smart card authentication with SSSD</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_verifying-that-idm-kerberos-kdc-can-use-pkinit-and-that-the-ca-certificates-are-correctly-located_assembly_troubleshooting-authentication-with-smart-cards" id="sub-link-to-managing_smart_card_authentication-proc_verifying-that-idm-kerberos-kdc-can-use-pkinit-and-that-the-ca-certificates-are-correctly-located_assembly_troubleshooting-authentication-with-smart-cards" data-v-b883c74f>10.3. Verifying that IdM Kerberos KDC can use PKINIT and that the CA certificates are correctly located</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_increasing-sssd-timeouts_assembly_troubleshooting-authentication-with-smart-cards" id="sub-link-to-managing_smart_card_authentication-proc_increasing-sssd-timeouts_assembly_troubleshooting-authentication-with-smart-cards" data-v-b883c74f>10.4. Increasing SSSD timeouts</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><details id="nested-toc--assembly_troubleshooting-certificate-mapping-and-matching-rules_assembly_troubleshooting-authentication-with-smart-cards" data-v-b883c74f><summary class="heading sub-chapter-title" id="assembly_troubleshooting-certificate-mapping-and-matching-rules_assembly_troubleshooting-authentication-with-smart-cards--summary" data-v-b883c74f>10.5. Troubleshooting certificate mapping and matching rules</summary><ol id="sub-nav--assembly_troubleshooting-certificate-mapping-and-matching-rules_assembly_troubleshooting-authentication-with-smart-cards" class="sub-nav" data-v-b883c74f><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title chapter-landing-page" href="#assembly_troubleshooting-certificate-mapping-and-matching-rules_assembly_troubleshooting-authentication-with-smart-cards" id="chapter-landing--managing_smart_card_authentication-assembly_troubleshooting-certificate-mapping-and-matching-rules_assembly_troubleshooting-authentication-with-smart-cards" data-v-b883c74f>Troubleshooting certificate mapping and matching rules</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_checking-how-the-certificates-are-mapped-to-users_assembly_troubleshooting-certificate-mapping-and-matching-rules" id="sub-link-to-managing_smart_card_authentication-proc_checking-how-the-certificates-are-mapped-to-users_assembly_troubleshooting-certificate-mapping-and-matching-rules" data-v-b883c74f>10.5.1. Checking how the certificates are mapped to users</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_checking-the-user-associated-with-a-smart-card-certificate_assembly_troubleshooting-certificate-mapping-and-matching-rules" id="sub-link-to-managing_smart_card_authentication-proc_checking-the-user-associated-with-a-smart-card-certificate_assembly_troubleshooting-certificate-mapping-and-matching-rules" data-v-b883c74f>10.5.2. Checking the user associated with a smart card certificate</a></li><!--]--><!--]--></ol></details></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><a class="link" href="#idm140447723494704" id="chapter-landing--managing_smart_card_authentication-idm140447723494704" data-v-fa0dae77>Legal Notice</a></li><!--]--></ol></nav><!----></div></div></aside><article class="content span-xs-12 span-sm-6 span-md-12 span-lg-7" aria-live="polite" data-v-8589d091><!----><div lang="en-us" xml:lang="en-us" class="docs-content-container" data-v-8589d091><!----><!----><h1 data-id="content_chapter" class="chapter-title" data-v-8589d091>Managing smart card authentication</h1><hr class="line-below-chp" data-v-8589d091><section class="rhdocs" data-v-8589d091><body><div xml:lang="en-US" class="book" id="idm140447723551824"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Enterprise Linux</span> <span class="productnumber">9</span></div><div><h3 class="subtitle">Configuring and using smart card authentication</h3></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat</span> <span class="orgdiv">Customer Content Services</span></div></div><div><a href="#idm140447723494704">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				With Red Hat Identity Management (IdM), you can store credentials in the form of a private key and a certificate on a smart card. You can then use this smart card instead of passwords to authenticate to services. Administrators can configure mapping rules to reduce the administrative overhead.
			</div></div></div></div><hr></div><section class="preface" id="proc_providing-feedback-on-red-hat-documentation_managing-smart-card-authentication"><div class="titlepage"><div><div><h2 class="title">Providing feedback on Red Hat documentation</h2></div></div></div><p class="_abstract _abstract">
			We appreciate your feedback on our documentation. Let us know how we can improve it.
		</p><div class="orderedlist"><p class="title"><strong>Submitting feedback through Jira (account required)</strong></p><ol class="orderedlist" type="1"><li class="listitem">
					Log in to the <a class="link" href="https://issues.redhat.com/projects/RHELDOCS/issues">Jira</a> website.
				</li><li class="listitem">
					Click <span class="strong strong"><strong>Create</strong></span> in the top navigation bar
				</li><li class="listitem">
					Enter a descriptive title in the <span class="strong strong"><strong>Summary</strong></span> field.
				</li><li class="listitem">
					Enter your suggestion for improvement in the <span class="strong strong"><strong>Description</strong></span> field. Include links to the relevant parts of the documentation.
				</li><li class="listitem">
					Click <span class="strong strong"><strong>Create</strong></span> at the bottom of the dialogue.
				</li></ol></div></section><section class="chapter" id="assembly_understanding-smart-card-authentication_managing-smart-card-authentication"><div class="titlepage"><div><div><h2 class="title">Chapter 1. Understanding smart card authentication</h2></div></div></div><p>
			Authentication based on smart cards is an alternative to passwords. You can store user credentials on a smart card in the form of a private key and a certificate, and special software and hardware is used to access them. Place the smart card into a reader or a USB port and supply the PIN code for the smart card instead of providing your password.
		</p><p>
			This section describes what a smart card is and how smart card authentication works. It describes the tools that you can use to read and manipulate smart card content. It also provides sample use cases and describes the setup of both the IdM server and IdM client for smart card authentication.
		</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
				If you want to start to use smart card authentication, see the hardware requirements: <a class="link" href="https://access.redhat.com/articles/4253861">Smart Card support in RHEL9</a>.
			</p></div></rh-alert><section class="section" id="con_what-is-a-smart-card_assembly_understanding-smart-card-authentication"><div class="titlepage"><div><div><h3 class="title">1.1. What is a smart card</h3></div></div></div><p>
				A smart card is a physical device, usually a plastic card with a microprocessor, that can provide personal authentication using certificates stored on the card. Personal authentication means that you can use smart cards in the same way as user passwords.
			</p><p>
				You can store user credentials on the smart card in the form of a private key and a certificate, and special software and hardware is used to access them. You place the smart card into a reader or a USB socket and supply the PIN code for the smart card instead of providing your password.
			</p></section><section class="section" id="con_what-is-smart-card-authentication_assembly_understanding-smart-card-authentication"><div class="titlepage"><div><div><h3 class="title">1.2. What is smart card authentication</h3></div></div></div><p>
				Public-key based authentication and certificate based authentication are two widely used alternatives to password based authentication. Your identity is confirmed by using public and private keys instead of your password. A certificate is an electronic document used to identify an individual, a server, a company, or other entity and to associate that identity with a public key. Like a driver’s license or passport, a certificate provides generally recognized proof of a person’s identity. Public-key cryptography uses certificates to address the problem of impersonation.
			</p><p>
				In the case of smart card authentication, your user credentials, that is your public and private keys and certificate, are stored on a smart card and can only be used after the smart card is inserted into the reader and a PIN is provided. As you need to possess a physical device, the smart card, and know its PIN, smart card authentication is considered as a type of two factor authentication.
			</p><section class="section" id="examples_of_smart_card_authentication_in_idm"><div class="titlepage"><div><div><h4 class="title">1.2.1. Examples of smart card authentication in IdM</h4></div></div></div><p>
					The following examples describe two simple scenarios on how you can use smart cards in IdM.
				</p><section class="section" id="logging_in_to_your_system_with_a_smart_card"><div class="titlepage"><div><div><h5 class="title">1.2.1.1. Logging in to your system with a smart card</h5></div></div></div><p>
						You can use a smart card to authenticate to a RHEL system as a local user. If your system is configured to enforce smart card login, you are prompted to insert your smart card and enter its PIN and, if that fails, you cannot log in to your system. Alternatively, you can configure your system to authenticate using either smart card authentication or your user name and password. In this case, if you do not have your smart card inserted, you are prompted for your user name and password.
					</p></section><section class="section" id="logging_in_to_gdm_with_lock_on_removal"><div class="titlepage"><div><div><h5 class="title">1.2.1.2. Logging in to GDM with lock on removal</h5></div></div></div><p>
						You can activate the lock on removal function if you have configured smart card authentication on your RHEL system. If you are logged in to the GNOME Display Manager (GDM) and you remove your smart card, screen lock is enabled and you must reinsert your smart card and authenticate with the PIN to unlock the screen. You cannot use your user name and password to authenticate.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							If you are logged in to GDM and you remove your smart card, screen lock is enabled and you must reinsert your smart card and authenticate with the PIN to unlock the screen.
						</p></div></rh-alert></section></section></section><section class="section" id="con_smart-card-authentication-options-in-rhel_assembly_understanding-smart-card-authentication"><div class="titlepage"><div><div><h3 class="title">1.3. Smart card authentication options in RHEL</h3></div></div></div><p>
				You can configure how you want smart card authentication to work in a particular Identity Management (IdM) client by using the <code class="literal">authselect</code> command, <code class="literal">authselect enable-feature &lt;smartcardoption&gt;</code>. The following smart card options are available:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">with-smartcard</code>: Users can authenticate with the user name and password or with their smart card.
					</li><li class="listitem"><p class="simpara">
						<code class="literal">with-smartcard-required</code>: Users can authenticate with their smart cards, and password authentication is disabled. You cannot access the system without your smart card. Once you have authenticated with your smart card, you can stay logged in even if your smart card is removed from its reader.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							The <code class="literal">with-smartcard-required</code> option only enforces exclusive smart card authentication for login services, such as <code class="literal">login</code>, <code class="literal">gdm</code>, <code class="literal">xdm</code>, <code class="literal">xscreensaver</code>, and <code class="literal">gnome-screensaver</code>. For other services, such as <code class="literal">su</code> or <code class="literal">sudo</code> for switching users, smart card authentication is not enforced and if your smart card is not inserted, you are prompted for a password.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						<code class="literal">with-smartcard-lock-on-removal</code>: Users can authenticate with their smart card. However, if you remove your smart card from its reader, you are automatically locked out of the system. You cannot use password authentication.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							The <code class="literal">with-smartcard-lock-on-removal</code> option only works on systems with the GNOME desktop environment. If you are using a system that is <code class="literal">tty</code> or console based and you remove your smart card from its reader, you are not automatically locked out of the system.
						</p></div></rh-alert></li></ul></div><p>
				For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-smart-cards-using-authselect_managing-smart-card-authentication">Configuring smart cards using authselect</a>.
			</p></section><section class="section" id="con_tools-for-managing-smart-cards-and-their-contents_assembly_understanding-smart-card-authentication"><div class="titlepage"><div><div><h3 class="title">1.4. Tools for managing smart cards and their contents</h3></div></div></div><p>
				You can use many different tools to manage the keys and certificates stored on your smart cards. You can use these tools to do the following:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						List available smart card readers connected to a system.
					</li><li class="listitem">
						List available smart cards and view their contents.
					</li><li class="listitem">
						Manipulate the smart card content, that is the keys and certificates.
					</li></ul></div><p>
				There are many tools that provide similar functionality but some work at different layers of your system. Smart cards are managed on multiple layers by multiple components. On the lower level, the operating system communicates with the smart card reader using the PC/SC protocol, and this communication is handled by the pcsc-lite daemon. The daemon forwards the commands received to the smart card reader typically over USB, which is handled by low-level CCID driver. The PC/SC low level communication is rarely seen on the application level. The main method in RHEL for applications to access smart cards is via a higher level application programming interface (API), the OASIS PKCS#11 API, which abstracts the card communication to specific commands that operate on cryptographic objects, for example, private keys. Smart card vendors provide a shared module, such as an <code class="literal">.so</code> file, which follows the PKCS#11 API and serves as a driver for the smart card.
			</p><p>
				You can use the following tools to manage your smart cards and their contents:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						OpenSC tools: work with the drivers implemented in <code class="literal">opensc</code>.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								opensc-tool: perform smart card operations.
							</li><li class="listitem">
								pkcs15-tool: manage the PKCS#15 data structures on smart cards, such as listing and reading PINs, keys, and certificates stored on the token.
							</li><li class="listitem">
								pkcs11-tool: manage the PKCS#11 data objects on smart cards, such as listing and reading PINs, keys, and certificates stored on the token.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						GnuTLS utils: an API for applications to enable secure communication over the network transport layer, as well as interfaces to access X.509, PKCS#12, OpenPGP, and other structures.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								p11tool: perform operations on PKCS#11 smart cards and security modules.
							</li><li class="listitem">
								certtool: parse and generate X.509 certificates, requests, and private keys.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Network Security Services (NSS) Tools: a set of libraries designed to support the cross-platform development of security-enabled client and server applications. Applications built with NSS can support SSL v3, TLS, PKCS #5, PKCS #7, PKCS #11, PKCS #12, S/MIME, X.509 v3 certificates, and other security standards.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								modutil: manage PKCS#11 module information with the security module database.
							</li><li class="listitem">
								certutil: manage keys and certificates in both NSS databases and other NSS tokens.
							</li></ul></div></li></ul></div><p>
				For more information about using these tools to troubleshoot issues with authenticating using a smart card, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_troubleshooting-authentication-with-smart-cards_managing-smart-card-authentication">Troubleshooting authentication with smart cards</a>.
			</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">opensc-tool</code>, <code class="literal">pkcs15-tool</code>, and <code class="literal">pkcs11-tool</code> man pages on your system
					</li><li class="listitem">
						<code class="literal">p11tool</code> and <code class="literal">certtool</code> man pages on your system
					</li><li class="listitem">
						<code class="literal">modutil</code> and <code class="literal">certutil</code> man pages on your system
					</li></ul></div></section><section class="section" id="con_certificates-and-smart-card-authentication_assembly_understanding-smart-card-authentication"><div class="titlepage"><div><div><h3 class="title">1.5. Certificates and smart card authentication</h3></div></div></div><p>
				If you use Identity Management (IdM) or Active Directory (AD) to manage identity stores, authentication, policies, and authorization policies in your domain, the certificates used for authentication are generated by IdM or AD, respectively. You can also use certificates provided by an external certificate authority and in this case you must configure Active Directory or IdM to accept certificates from the external provider. If the user is not part of a domain, you can use a certificate generated by a local certificate authority. For details, refer to the following sections:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication">Configuring Identity Management for smart card authentication</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication">Configuring certificates issued by ADCS for smart card authentication in IdM</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/managing-externally-signed-certificates-for-idm-users-hosts-and-services_managing-certificates-in-idm">Managing externally signed certificates for IdM users, hosts, and services</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-and-importing-local-certificates-to-a-smart-card_managing-smart-card-authentication">Configuring and importing local certificates to a smart card</a>
					</li></ul></div><p>
				For a full list of certificates eligible for smart card authentication, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-smart-cards-using-authselect_managing-smart-card-authentication#certificates-eligible-for-smart-cards_configuring-smart-cards-using-authselect">Certificates eligible for smart cards</a>.
			</p></section><section class="section" id="con_required-steps-for-smart-card-authentication-in-idm_assembly_understanding-smart-card-authentication"><div class="titlepage"><div><div><h3 class="title">1.6. Required steps for smart card authentication in IdM</h3></div></div></div><p>
				You must ensure the following steps have been followed before you can authenticate with a smart card in Identity Management (IdM):
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Configure your IdM server for smart card authentication. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#conf-idm-server-for-smart-card-auth_configuring-idm-for-smart-card-auth">Configuring the IdM server for smart card authentication</a>
					</li><li class="listitem">
						Configure your IdM client for smart card authentication. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#conf-idm-client-for-smart-card-auth_configuring-idm-for-smart-card-auth">Configuring the IdM client for smart card authentication</a>
					</li><li class="listitem">
						Add the certificate to the user entry in IdM. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#proc-add-cert-idm-user-webui_configuring-idm-for-smart-card-auth">Adding a certificate to a user entry in the IdM Web UI</a>
					</li><li class="listitem">
						Store your keys and certificates on the smart card. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#storing-a-certificate-on-the-smart-card_configuring-idm-for-smart-card-auth">Storing a certificate on a smart card</a>
					</li></ul></div></section><section class="section" id="con_required-steps-for-smart-card-authentication-in-active-directory_assembly_understanding-smart-card-authentication"><div class="titlepage"><div><div><h3 class="title">1.7. Required steps for smart card authentication with certificates issued by Active Directory</h3></div></div></div><p>
				You must ensure the following steps have been followed before you can authenticate with a smart card with certificates issued by Active Directory (AD):
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication#copying-certificates-from-active-directory-using-sftp_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm">Copy the CA and user certificates from Active Directory to the IdM server and client</a>.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication#configuring-the-idm-server-and-clients-for-smart-card-authentication-using-adcs-certificates_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm">Configure the IdM server and clients for smart card authentication using ADCS certificates</a>.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication#converting-the-pfx-file_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm">Convert the PFX (PKCS#12) file to be able to store the certificate and private key on the smart card</a>.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication#configuring-timeouts-in-sssd-conf_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm">Configure timeouts in the sssd.conf file</a>.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication#certificate-mapping-rules-for-smart-card-authentication_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm">Create certificate mapping rules for smart card authentication</a>.
					</li></ul></div></section></section><section class="chapter" id="configuring-idm-for-smart-card-auth_managing-smart-card-authentication"><div class="titlepage"><div><div><h2 class="title">Chapter 2. Configuring Identity Management for smart card authentication</h2></div></div></div><p class="_abstract _abstract">
			Identity Management (IdM) supports smart card authentication with:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					User certificates issued by the IdM certificate authority
				</li><li class="listitem">
					User certificates issued by an external certificate authority
				</li></ul></div><p>
			You can configure smart card authentication in IdM for both types of certificates. In this scenario, the <code class="literal">rootca.pem</code> CA certificate is the file containing the certificate of a trusted external certificate authority.
		</p><p>
			For information about smart card authentication in IdM, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_understanding-smart-card-authentication_managing-smart-card-authentication">Understanding smart card authentication</a>.
		</p><p>
			For more details on configuring smart card authentication:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#conf-idm-server-for-smart-card-auth_configuring-idm-for-smart-card-auth">Configuring the IdM server for smart card authentication</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#conf-idm-client-for-smart-card-auth_configuring-idm-for-smart-card-auth">Configuring the IdM client for smart card authentication</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#proc-add-cert-idm-user-webui_configuring-idm-for-smart-card-auth">Adding a certificate to a user entry in the IdM Web UI</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#proc-add-cert-idm-user-cli_configuring-idm-for-smart-card-auth">Adding a certificate to a user entry in the IdM CLI</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#installing-tools-for-managing-and-using-smart-cards_configuring-idm-for-smart-card-auth">Installing tools for managing and using smart cards</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#storing-a-certificate-on-the-smart-card_configuring-idm-for-smart-card-auth">Storing a certificate on a smart card</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#logging-in-to-idm-with-smart-cards_configuring-idm-for-smart-card-auth">Logging in to IdM with smart cards</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#configuring-gdm-access-using-smart-card-authentication_configuring-idm-for-smart-card-auth">Configuring GDM access using smart card authentication</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#configuring-su-access-using-smart-card-authentication_configuring-idm-for-smart-card-auth">Configuring su access using smart card authentication</a>
				</li></ul></div><section class="section" id="conf-idm-server-for-smart-card-auth_configuring-idm-for-smart-card-auth"><div class="titlepage"><div><div><h3 class="title">2.1. Configuring the IdM server for smart card authentication</h3></div></div></div><p class="_abstract _abstract">
				If you want to enable smart card authentication for users whose certificates have been issued by the certificate authority (CA) of the &lt;EXAMPLE.ORG&gt; domain that your Identity Management (IdM) CA trusts, you must obtain the following certificates so that you can add them when running the <code class="literal">ipa-advise</code> script that configures the IdM server:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The certificate of the root CA that has either issued the certificate for the &lt;EXAMPLE.ORG&gt; CA directly, or through one or more of its sub-CAs. You can download the certificate chain from a web page whose certificate has been issued by the authority. For details, see Steps 1 - 4a in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/dc-web-ui-auth_managing-certificates-in-idm#configuring-browser-for-cert-auth_dc-web-ui-auth">Configuring a browser to enable certificate authentication</a>.
					</li><li class="listitem">
						The IdM CA certificate. You can obtain the CA certificate from the <code class="literal">/etc/ipa/ca.crt</code> file on the IdM server on which an IdM CA instance is running.
					</li><li class="listitem">
						The certificates of all of the intermediate CAs; that is, intermediate between the &lt;EXAMPLE.ORG&gt; CA and the IdM CA.
					</li></ul></div><p>
				To configure an IdM server for smart card authentication:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Obtain files with the CA certificates in the PEM format.
					</li><li class="listitem">
						Run the built-in <code class="literal">ipa-advise</code> script.
					</li><li class="listitem">
						Reload the system configuration.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have root access to the IdM server.
					</li><li class="listitem">
						You have the root CA certificate and all the intermediate CA certificates.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a directory in which you will do the configuration:
					</p><pre class="literallayout">[root@server]# <span class="strong strong"><strong>mkdir ~/SmartCard/</strong></span></pre></li><li class="listitem"><p class="simpara">
						Navigate to the directory:
					</p><pre class="literallayout">[root@server]# <span class="strong strong"><strong>cd ~/SmartCard/</strong></span></pre></li><li class="listitem"><p class="simpara">
						Obtain the relevant CA certificates stored in files in PEM format. If your CA certificate is stored in a file of a different format, such as DER, convert it to PEM format. The IdM Certificate Authority certificate is in PEM format and is located in the <code class="literal">/etc/ipa/ca.crt</code> file.
					</p><p class="simpara">
						Convert a DER file to a PEM file:
					</p><pre class="literallayout"># openssl x509 -in &lt;filename&gt;.der -inform DER -out &lt;filename&gt;.pem -outform PEM</pre></li><li class="listitem"><p class="simpara">
						For convenience, copy the certificates to the directory in which you want to do the configuration:
					</p><pre class="literallayout">[root@server SmartCard]# <span class="strong strong"><strong>cp /tmp/rootca.pem ~/SmartCard/</strong></span>
[root@server SmartCard]# <span class="strong strong"><strong>cp /tmp/subca.pem ~/SmartCard/</strong></span>
[root@server SmartCard]# <span class="strong strong"><strong>cp /tmp/issuingca.pem ~/SmartCard/</strong></span></pre></li><li class="listitem"><p class="simpara">
						Optional: If you use certificates of external certificate authorities, use the <code class="literal">openssl x509</code> utility to view the contents of the files in the <code class="literal">PEM</code> format to check that the <code class="literal">Issuer</code> and <code class="literal">Subject</code> values are correct:
					</p><pre class="literallayout">[root@server SmartCard]# <span class="strong strong"><strong>openssl x509 -noout -text -in rootca.pem | more</strong></span></pre></li><li class="listitem"><p class="simpara">
						Generate a configuration script with the in-built <code class="literal">ipa-advise</code> utility, using the administrator’s privileges:
					</p><pre class="literallayout">[root@server SmartCard]# <span class="strong strong"><strong>kinit admin</strong></span>
[root@server SmartCard]# <span class="strong strong"><strong>ipa-advise config-server-for-smart-card-auth &gt; config-server-for-smart-card-auth.sh</strong></span></pre><p class="simpara">
						The <code class="literal">config-server-for-smart-card-auth.sh</code> script performs the following actions:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								It configures the IdM Apache HTTP Server.
							</li><li class="listitem">
								It enables Public Key Cryptography for Initial Authentication in Kerberos (PKINIT) on the Key Distribution Center (KDC).
							</li><li class="listitem">
								It configures the IdM Web UI to accept smart card authorization requests.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Execute the script, adding the PEM files containing the root CA and sub CA certificates as arguments:
					</p><pre class="literallayout">[root@server SmartCard]# <span class="strong strong"><strong>chmod +x config-server-for-smart-card-auth.sh</strong></span>
[root@server SmartCard]# <span class="strong strong"><strong>./config-server-for-smart-card-auth.sh rootca.pem subca.pem issuingca.pem</strong></span>
Ticket cache:KEYRING:persistent:0:0
Default principal: admin@IDM.EXAMPLE.COM
[...]
Systemwide CA database updated.
The ipa-certupdate command was successful</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							Ensure that you add the root CA’s certificate as an argument before any sub CA certificates and that the CA or sub CA certificates have not expired.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Optional: If the certificate authority that issued the user certificate does not provide any Online Certificate Status Protocol (OCSP) responder, you may need to disable OCSP check for authentication to the IdM Web UI:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Set the <code class="literal">SSLOCSPEnable</code> parameter to <code class="literal">off</code> in the <code class="literal">/etc/httpd/conf.d/ssl.conf</code> file:
							</p><pre class="literallayout"><span class="strong strong"><strong>SSLOCSPEnable off</strong></span></pre></li><li class="listitem"><p class="simpara">
								Restart the Apache daemon (httpd) for the changes to take effect immediately:
							</p><pre class="literallayout">[root@server SmartCard]# <span class="strong strong"><strong>systemctl restart httpd</strong></span></pre></li></ol></div><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
							Do not disable the OCSP check if you only use user certificates issued by the IdM CA. OCSP responders are part of IdM.
						</p></div></rh-alert><p class="simpara">
						For instructions on how to keep the OCSP check enabled, and yet prevent a user certificate from being rejected by the IdM server if it does not contain the information about the location at which the CA that issued the user certificate listens for OCSP service requests, see the <code class="literal">SSLOCSPDefaultResponder</code> directive in <a class="link" href="http://httpd.apache.org/docs/trunk/en/mod/mod_ssl.html">Apache mod_ssl configuration options</a>.
					</p></li></ol></div><p>
				The server is now configured for smart card authentication.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					To enable smart card authentication in the whole topology, run the procedure on each IdM server.
				</p></div></rh-alert></section><section class="section" id="proc_using-ansible-to-configure-the-idm-server-for-smart-card-authentication_configuring-idm-for-smart-card-auth"><div class="titlepage"><div><div><h3 class="title">2.2. Using Ansible to configure the IdM server for smart card authentication</h3></div></div></div><p class="_abstract _abstract">
				You can use Ansible to enable smart card authentication for users whose certificates have been issued by the certificate authority (CA) of the &lt;EXAMPLE.ORG&gt; domain that your Identity Management (IdM) CA trusts. To do that, you must obtain the following certificates so that you can use them when running an Ansible playbook with the <code class="literal">ipasmartcard_server</code> <code class="literal">ansible-freeipa</code> role script:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The certificate of the root CA that has either issued the certificate for the &lt;EXAMPLE.ORG&gt; CA directly, or through one or more of its sub-CAs. You can download the certificate chain from a web page whose certificate has been issued by the authority. For details, see Step 4 in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/dc-web-ui-auth_managing-certificates-in-idm#configuring-browser-for-cert-auth_dc-web-ui-auth">Configuring a browser to enable certificate authentication</a>.
					</li><li class="listitem">
						The IdM CA certificate. You can obtain the CA certificate from the <code class="literal">/etc/ipa/ca.crt</code> file on any IdM CA server.
					</li><li class="listitem">
						The certificates of all of the CAs that are intermediate between the &lt;EXAMPLE.ORG&gt; CA and the IdM CA.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have <code class="literal">root</code> access to the IdM server.
					</li><li class="listitem">
						You know the IdM <code class="literal">admin</code> password.
					</li><li class="listitem">
						You have the root CA certificate, the IdM CA certificate, and all the intermediate CA certificates.
					</li><li class="listitem"><p class="simpara">
						You have configured your Ansible control node to meet the following requirements:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								You are using Ansible version 2.15 or later.
							</li><li class="listitem">
								You have installed the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/installing-an-identity-management-server-using-an-ansible-playbook_installing-identity-management#installing-the-ansible-freeipa-package_server-ansible"><code class="literal">ansible-freeipa</code></a> package on the Ansible controller.
							</li><li class="listitem">
								The example assumes that in the <span class="strong strong"><strong>~/<span class="emphasis"><em>MyPlaybooks</em></span>/</strong></span> directory, you have created an <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_ansible_to_install_and_manage_identity_management/preparing-your-environment-for-managing-idm-using-ansible-playbooks_using-ansible-to-install-and-manage-identity-management">Ansible inventory file</a> with the fully-qualified domain name (FQDN) of the IdM server.
							</li><li class="listitem">
								The example assumes that the <span class="strong strong"><strong>secret.yml</strong></span> Ansible vault stores your <code class="literal">ipaadmin_password</code>.
							</li></ul></div></li><li class="listitem">
						The target node, that is the node on which the <code class="literal">ansible-freeipa</code> module is executed, is part of the IdM domain as an IdM client, server or replica.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						If your CA certificates are stored in files of a different format, such as <code class="literal">DER</code>, convert them to <code class="literal">PEM</code> format:
					</p><pre class="literallayout"># <span class="strong strong"><strong>openssl x509 -in &lt;filename&gt;.der -inform DER -out &lt;filename&gt;.pem -outform PEM</strong></span></pre><p class="simpara">
						The IdM Certificate Authority certificate is in <code class="literal">PEM</code> format and is located in the <code class="literal">/etc/ipa/ca.crt</code> file.
					</p></li><li class="listitem"><p class="simpara">
						Optional: Use the <code class="literal">openssl x509</code> utility to view the contents of the files in the <code class="literal">PEM</code> format to check that the <code class="literal">Issuer</code> and <code class="literal">Subject</code> values are correct:
					</p><pre class="literallayout"># <span class="strong strong"><strong>openssl x509 -noout -text -in root-ca.pem | more</strong></span></pre></li><li class="listitem"><p class="simpara">
						Navigate to your <span class="strong strong"><strong>~/<span class="emphasis"><em>MyPlaybooks</em></span>/</strong></span> directory:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>cd ~/<span class="emphasis"><em>MyPlaybooks</em></span>/</strong></span></pre></li><li class="listitem"><p class="simpara">
						Create a subdirectory dedicated to the CA certificates:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>mkdir SmartCard/</strong></span></pre></li><li class="listitem"><p class="simpara">
						For convenience, copy all the required certificates to the <span class="strong strong"><strong>~/MyPlaybooks/SmartCard/</strong></span> directory:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cp /tmp/root-ca.pem ~/MyPlaybooks/SmartCard/</strong></span>
# <span class="strong strong"><strong>cp /tmp/intermediate-ca.pem ~/MyPlaybooks/SmartCard/</strong></span>
# <span class="strong strong"><strong>cp /etc/ipa/ca.crt ~/MyPlaybooks/SmartCard/ipa-ca.crt</strong></span></pre></li><li class="listitem"><p class="simpara">
						In your Ansible inventory file, specify the following:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The IdM servers that you want to configure for smart card authentication.
							</li><li class="listitem">
								The IdM administrator password.
							</li><li class="listitem"><p class="simpara">
								The paths to the certificates of the CAs in the following order:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										The root CA certificate file
									</li><li class="listitem">
										The intermediate CA certificates files
									</li><li class="listitem">
										The IdM CA certificate file
									</li></ul></div></li></ul></div><p class="simpara">
						The file can look as follows:
					</p><pre class="literallayout"><span class="strong strong"><strong>[ipaserver]</strong></span>
<span class="strong strong"><strong>ipaserver.idm.example.com</strong></span>

[ipareplicas]
ipareplica1.idm.example.com
ipareplica2.idm.example.com

[ipacluster:children]
ipaserver
ipareplicas

[ipacluster:vars]
<span class="strong strong"><strong>ipaadmin_password= "{{ ipaadmin_password }}"</strong></span>
<span class="strong strong"><strong>ipasmartcard_server_ca_certs=/home/&lt;user_name&gt;/MyPlaybooks/SmartCard/root-ca.pem,/home/&lt;user_name&gt;/MyPlaybooks/SmartCard/intermediate-ca.pem,/home/&lt;user_name&gt;/MyPlaybooks/SmartCard/ipa-ca.crt</strong></span></pre></li><li class="listitem"><p class="simpara">
						Create an <code class="literal">install-smartcard-server.yml</code> playbook with the following content:
					</p><pre class="literallayout">---
- name: Playbook to set up smart card authentication for an IdM server
  <span class="strong strong"><strong>hosts: ipaserver</strong></span>
  become: true

  roles:
  - <span class="strong strong"><strong>role: ipasmartcard_server</strong></span>
    state: present</pre></li><li class="listitem">
						Save the file.
					</li><li class="listitem"><p class="simpara">
						Run the Ansible playbook. Specify the playbook file, the file storing the password protecting the <span class="strong strong"><strong>secret.yml</strong></span> file, and the inventory file:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --vault-password-file=password_file -v -i inventory install-smartcard-server.yml</strong></span></pre><p class="simpara">
						The <code class="literal">ipasmartcard_server</code> Ansible role performs the following actions:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								It configures the IdM Apache HTTP Server.
							</li><li class="listitem">
								It enables Public Key Cryptography for Initial Authentication in Kerberos (PKINIT) on the Key Distribution Center (KDC).
							</li><li class="listitem">
								It configures the IdM Web UI to accept smart card authorization requests.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: If the certificate authority that issued the user certificate does not provide any Online Certificate Status Protocol (OCSP) responder, you may need to disable OCSP check for authentication to the IdM Web UI:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Connect to the IdM server as <code class="literal">root</code>:
							</p><pre class="literallayout"><span class="strong strong"><strong>ssh root@ipaserver.idm.example.com</strong></span></pre></li><li class="listitem"><p class="simpara">
								Set the <code class="literal">SSLOCSPEnable</code> parameter to <code class="literal">off</code> in the <code class="literal">/etc/httpd/conf.d/ssl.conf</code> file:
							</p><pre class="literallayout"><span class="strong strong"><strong>SSLOCSPEnable off</strong></span></pre></li><li class="listitem"><p class="simpara">
								Restart the Apache daemon (httpd) for the changes to take effect immediately:
							</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl restart httpd</strong></span></pre></li></ol></div><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
							Do not disable the OCSP check if you only use user certificates issued by the IdM CA. OCSP responders are part of IdM.
						</p></div></rh-alert><p class="simpara">
						For instructions on how to keep the OCSP check enabled, and yet prevent a user certificate from being rejected by the IdM server if it does not contain the information about the location at which the CA that issued the user certificate listens for OCSP service requests, see the <code class="literal">SSLOCSPDefaultResponder</code> directive in <a class="link" href="http://httpd.apache.org/docs/trunk/en/mod/mod_ssl.html">Apache mod_ssl configuration options</a>.
					</p></li></ol></div><p>
				The server listed in the inventory file is now configured for smart card authentication.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					To enable smart card authentication in the whole topology, set the <code class="literal">hosts</code> variable in the Ansible playbook to <code class="literal">ipacluster</code>:
				</p><pre class="literallayout">---
- name: Playbook to setup smartcard for IPA server and replicas
  <span class="strong strong"><strong>hosts: ipacluster</strong></span>
[...]</pre></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						Sample playbooks using the <code class="literal">ipasmartcard_server</code> role in the <code class="literal">/usr/share/doc/ansible-freeipa/playbooks/</code> directory
					</li></ul></div></section><section class="section" id="conf-idm-client-for-smart-card-auth_configuring-idm-for-smart-card-auth"><div class="titlepage"><div><div><h3 class="title">2.3. Configuring the IdM client for smart card authentication</h3></div></div></div><p class="_abstract _abstract">
				Follow this procedure to configure IdM clients for smart card authentication. The procedure needs to be run on each IdM system, a client or a server, to which you want to connect while using a smart card for authentication. For example, to enable an <code class="literal">ssh</code> connection from host A to host B, the script needs to be run on host B.
			</p><p>
				As an administrator, run this procedure to enable smart card authentication using
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The <code class="literal">ssh</code> protocol
					</p><p class="simpara">
						For details see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-and-importing-local-certificates-to-a-smart-card_managing-smart-card-authentication#configuring-ssh-access-using-smart-card-authentication_configuring-and-importing-local-certificates-to-a-smart-card">Configuring SSH access using smart card authentication</a>.
					</p></li><li class="listitem">
						The console login
					</li><li class="listitem">
						The GNOME Display Manager (GDM)
					</li><li class="listitem">
						The <code class="literal">su</code> command
					</li></ul></div><p>
				This procedure is not required for authenticating to the IdM Web UI. Authenticating to the IdM Web UI involves two hosts, neither of which needs to be an IdM client:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The machine on which the browser is running. The machine can be outside of the IdM domain.
					</li><li class="listitem">
						The IdM server on which <code class="literal">httpd</code> is running.
					</li></ul></div><p>
				The following procedure assumes that you are configuring smart card authentication on an IdM client, not an IdM server. For this reason you need two computers: an IdM server to generate the configuration script, and the IdM client on which to run the script.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Your IdM server has been configured for smart card authentication, as described in <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#conf-idm-server-for-smart-card-auth_configuring-idm-for-smart-card-auth">Configuring the IdM server for smart card authentication</a>.
					</li><li class="listitem">
						You have root access to the IdM server and the IdM client.
					</li><li class="listitem">
						You have the root CA certificate and all the intermediate CA certificates.
					</li><li class="listitem">
						You installed the IdM client with the <code class="literal">--mkhomedir</code> option to ensure remote users can log in successfully. If you do not create a home directory, the default login location is the root of the directory structure, <code class="literal">/</code>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On an IdM server, generate a configuration script with <code class="literal">ipa-advise</code> using the administrator’s privileges:
					</p><pre class="literallayout">[root@server SmartCard]# <span class="strong strong"><strong>kinit admin</strong></span>
[root@server SmartCard]# <span class="strong strong"><strong>ipa-advise config-client-for-smart-card-auth &gt; config-client-for-smart-card-auth.sh</strong></span></pre><p class="simpara">
						The <code class="literal">config-client-for-smart-card-auth.sh</code> script performs the following actions:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								It configures the smart card daemon.
							</li><li class="listitem">
								It sets the system-wide truststore.
							</li><li class="listitem">
								It configures the System Security Services Daemon (SSSD) to allow users to authenticate with either their user name and password or with their smart card. For more details on SSSD profile options for smart card authentication, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_understanding-smart-card-authentication_managing-smart-card-authentication#con_smart-card-authentication-options-in-rhel_assembly_understanding-smart-card-authentication">Smart card authentication options in RHEL</a>.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						From the IdM server, copy the script to a directory of your choice on the IdM client machine:
					</p><pre class="literallayout">[root@server SmartCard]# <span class="strong strong"><strong>scp config-client-for-smart-card-auth.sh root<span class="strong strong"><strong>@</strong></span>client.idm.example.com:/root/SmartCard/</strong></span>
Password:
config-client-for-smart-card-auth.sh        100%   2419       3.5MB/s   00:00</pre></li><li class="listitem"><p class="simpara">
						From the IdM server, copy the CA certificate files in PEM format for convenience to the same directory on the IdM client machine as used in the previous step:
					</p><pre class="literallayout">[root@server SmartCard]# <span class="strong strong"><strong>scp {rootca.pem,subca.pem,issuingca.pem} root<span class="strong strong"><strong>@</strong></span>client.idm.example.com:/root/SmartCard/</strong></span>
Password:
rootca.pem                          100%   1237     9.6KB/s   00:00
subca.pem                           100%   2514    19.6KB/s   00:00
issuingca.pem                       100%   2514    19.6KB/s   00:00</pre></li><li class="listitem"><p class="simpara">
						On the client machine, execute the script, adding the PEM files containing the CA certificates as arguments:
					</p><pre class="literallayout">[root@client SmartCard]# <span class="strong strong"><strong>kinit admin</strong></span>
[root@client SmartCard]# <span class="strong strong"><strong>chmod +x config-client-for-smart-card-auth.sh</strong></span>
[root@client SmartCard]# <span class="strong strong"><strong>./config-client-for-smart-card-auth.sh rootca.pem subca.pem issuingca.pem</strong></span>
Ticket cache:KEYRING:persistent:0:0
Default principal: admin@IDM.EXAMPLE.COM
[...]
Systemwide CA database updated.
The ipa-certupdate command was successful</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							Ensure that you add the root CA’s certificate as an argument before any sub CA certificates and that the CA or sub CA certificates have not expired.
						</p></div></rh-alert></li></ol></div><p>
				The client is now configured for smart card authentication.
			</p></section><section class="section" id="proc_using-ansible-to-configure-idm-clients-for-smart-card-authentication_configuring-idm-for-smart-card-auth"><div class="titlepage"><div><div><h3 class="title">2.4. Using Ansible to configure IdM clients for smart card authentication</h3></div></div></div><p class="_abstract _abstract">
				Follow this procedure to use the <code class="literal">ansible-freeipa</code> <code class="literal">ipasmartcard_client</code> module to configure specific Identity Management (IdM) clients to permit IdM users to authenticate with a smart card. Run this procedure to enable smart card authentication for IdM users that use any of the following to access IdM:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The <code class="literal">ssh</code> protocol
					</p><p class="simpara">
						For details see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-and-importing-local-certificates-to-a-smart-card_managing-smart-card-authentication#configuring-ssh-access-using-smart-card-authentication_configuring-and-importing-local-certificates-to-a-smart-card">Configuring SSH access using smart card authentication</a>.
					</p></li><li class="listitem">
						The console login
					</li><li class="listitem">
						The GNOME Display Manager (GDM)
					</li><li class="listitem">
						The <code class="literal">su</code> command
					</li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					This procedure is not required for authenticating to the IdM Web UI. Authenticating to the IdM Web UI involves two hosts, neither of which needs to be an IdM client:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The machine on which the browser is running. The machine can be outside of the IdM domain.
						</li><li class="listitem">
							The IdM server on which <code class="literal">httpd</code> is running.
						</li></ul></div></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Your IdM server has been configured for smart card authentication, as described in <a class="link" href="#proc_using-ansible-to-configure-the-idm-server-for-smart-card-authentication_configuring-idm-for-smart-card-auth" title="2.2. Using Ansible to configure the IdM server for smart card authentication">Using Ansible to configure the IdM server for smart card authentication</a>.
					</li><li class="listitem">
						You have root access to the IdM server and the IdM client.
					</li><li class="listitem">
						You have the root CA certificate, the IdM CA certificate, and all the intermediate CA certificates.
					</li><li class="listitem"><p class="simpara">
						You have configured your Ansible control node to meet the following requirements:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								You are using Ansible version 2.15 or later.
							</li><li class="listitem">
								You have installed the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/installing-an-identity-management-server-using-an-ansible-playbook_installing-identity-management#installing-the-ansible-freeipa-package_server-ansible"><code class="literal">ansible-freeipa</code></a> package on the Ansible controller.
							</li><li class="listitem">
								The example assumes that in the <span class="strong strong"><strong>~/<span class="emphasis"><em>MyPlaybooks</em></span>/</strong></span> directory, you have created an <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_ansible_to_install_and_manage_identity_management/preparing-your-environment-for-managing-idm-using-ansible-playbooks_using-ansible-to-install-and-manage-identity-management">Ansible inventory file</a> with the fully-qualified domain name (FQDN) of the IdM server.
							</li><li class="listitem">
								The example assumes that the <span class="strong strong"><strong>secret.yml</strong></span> Ansible vault stores your <code class="literal">ipaadmin_password</code>.
							</li></ul></div></li><li class="listitem">
						The target node, that is the node on which the <code class="literal">ansible-freeipa</code> module is executed, is part of the IdM domain as an IdM client, server or replica.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						If your CA certificates are stored in files of a different format, such as <code class="literal">DER</code>, convert them to <code class="literal">PEM</code> format:
					</p><pre class="literallayout"># <span class="strong strong"><strong>openssl x509 -in &lt;filename&gt;.der -inform DER -out &lt;filename&gt;.pem -outform PEM</strong></span></pre><p class="simpara">
						The IdM CA certificate is in <code class="literal">PEM</code> format and is located in the <code class="literal">/etc/ipa/ca.crt</code> file.
					</p></li><li class="listitem"><p class="simpara">
						Optional: Use the <code class="literal">openssl x509</code> utility to view the contents of the files in the <code class="literal">PEM</code> format to check that the <code class="literal">Issuer</code> and <code class="literal">Subject</code> values are correct:
					</p><pre class="literallayout"># <span class="strong strong"><strong>openssl x509 -noout -text -in root-ca.pem | more</strong></span></pre></li><li class="listitem"><p class="simpara">
						On your Ansible control node, navigate to your <span class="strong strong"><strong>~/<span class="emphasis"><em>MyPlaybooks</em></span>/</strong></span> directory:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>cd ~/<span class="emphasis"><em>MyPlaybooks</em></span>/</strong></span></pre></li><li class="listitem"><p class="simpara">
						Create a subdirectory dedicated to the CA certificates:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>mkdir SmartCard/</strong></span></pre></li><li class="listitem"><p class="simpara">
						For convenience, copy all the required certificates to the <span class="strong strong"><strong>~/MyPlaybooks/SmartCard/</strong></span> directory, for example:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cp /tmp/root-ca.pem ~/MyPlaybooks/SmartCard/</strong></span>
# <span class="strong strong"><strong>cp /tmp/intermediate-ca.pem ~/MyPlaybooks/SmartCard/</strong></span>
# <span class="strong strong"><strong>cp /etc/ipa/ca.crt ~/MyPlaybooks/SmartCard/ipa-ca.crt</strong></span></pre></li><li class="listitem"><p class="simpara">
						In your Ansible inventory file, specify the following:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The IdM clients that you want to configure for smart card authentication.
							</li><li class="listitem">
								The IdM administrator password.
							</li><li class="listitem"><p class="simpara">
								The paths to the certificates of the CAs in the following order:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										The root CA certificate file
									</li><li class="listitem">
										The intermediate CA certificates files
									</li><li class="listitem">
										The IdM CA certificate file
									</li></ul></div></li></ul></div><p class="simpara">
						The file can look as follows:
					</p><pre class="literallayout"><span class="strong strong"><strong>[ipaclients]</strong></span>
ipaclient1.example.com
ipaclient2.example.com

[ipaclients:vars]
<span class="strong strong"><strong>ipaadmin_password=SomeADMINpassword</strong></span>
<span class="strong strong"><strong>ipasmartcard_client_ca_certs=/home/&lt;user_name&gt;/MyPlaybooks/SmartCard/root-ca.pem,/home/&lt;user_name&gt;/MyPlaybooks/SmartCard/intermediate-ca.pem,/home/&lt;user_name&gt;/MyPlaybooks/SmartCard/ipa-ca.crt</strong></span></pre></li><li class="listitem"><p class="simpara">
						Create an <code class="literal">install-smartcard-clients.yml</code> playbook with the following content:
					</p><pre class="literallayout">---
- name: Playbook to set up smart card authentication for an IdM client
  <span class="strong strong"><strong>hosts: ipaclients</strong></span>
  become: true

  roles:
  - <span class="strong strong"><strong>role: ipasmartcard_client</strong></span>
    state: present</pre></li><li class="listitem">
						Save the file.
					</li><li class="listitem"><p class="simpara">
						Run the Ansible playbook. Specify the playbook and inventory files:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --vault-password-file=password_file -v -i inventory install-smartcard-clients.yml</strong></span></pre><p class="simpara">
						The <code class="literal">ipasmartcard_client</code> Ansible role performs the following actions:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								It configures the smart card daemon.
							</li><li class="listitem">
								It sets the system-wide truststore.
							</li><li class="listitem">
								It configures the System Security Services Daemon (SSSD) to allow users to authenticate with either their user name and password or their smart card. For more details on SSSD profile options for smart card authentication, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_understanding-smart-card-authentication_managing-smart-card-authentication#con_smart-card-authentication-options-in-rhel_assembly_understanding-smart-card-authentication">Smart card authentication options in RHEL</a>.
							</li></ul></div></li></ol></div><p>
				The clients listed in the <span class="strong strong"><strong>ipaclients</strong></span> section of the inventory file are now configured for smart card authentication.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					If you have installed the IdM clients with the <code class="literal">--mkhomedir</code> option, remote users will be able to log in to their home directories. Otherwise, the default login location is the root of the directory structure, <code class="literal">/</code>.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						Sample playbooks using the <code class="literal">ipasmartcard_server</code> role in the <code class="literal">/usr/share/doc/ansible-freeipa/playbooks/</code> directory
					</li></ul></div></section><section class="section" id="proc-add-cert-idm-user-webui_configuring-idm-for-smart-card-auth"><div class="titlepage"><div><div><h3 class="title">2.5. Adding a certificate to a user entry in the IdM Web UI</h3></div></div></div><p class="_abstract _abstract">
				Follow this procedure to add an external certificate to a user entry in IdM Web UI.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					Instead of uploading the whole certificate, it is also possible to upload certificate mapping data to a user entry in IdM. User entries containing either full certificates or certificate mapping data can be used in conjunction with corresponding certificate mapping rules to facilitate the configuration of smart card authentication for system administrators. For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/con-idm-certmapdata_managing-smart-card-authentication">Certificate mapping rules for configuring authentication</a>.
				</p></div></rh-alert><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					If the user’s certificate has been issued by the IdM Certificate Authority, the certificate is already stored in the user entry, and you do not need to follow this procedure.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have the certificate that you want to add to the user entry at your disposal.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Log into the IdM Web UI as an administrator if you want to add a certificate to another user. For adding a certificate to your own profile, you do not need the administrator’s credentials.
					</li><li class="listitem">
						Navigate to <code class="literal">Users</code> → <code class="literal">Active users</code> → <code class="literal">sc_user</code>.
					</li><li class="listitem">
						Find the <code class="literal">Certificate</code> option and click <code class="literal">Add</code>.
					</li><li class="listitem"><p class="simpara">
						In the command-line interface, display the certificate in the <code class="literal">PEM</code> format using the <code class="literal">cat</code> utility or a text editor:
					</p><pre class="literallayout">[user@client SmartCard]$ <span class="strong strong"><strong>cat testuser.crt</strong></span></pre></li><li class="listitem">
						Copy and paste the certificate from the CLI into the window that has opened in the Web UI.
					</li><li class="listitem"><p class="simpara">
						Click <code class="literal">Add</code>.
					</p><div class="figure" id="configuring-idm-for-smart-card-auth-new-certmaprule-add"><p class="title"><strong>Figure 2.1. Adding a new certificate in the IdM Web UI</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Managing_smart_card_authentication-en-US/images/1f589affb4e3eb5c0a47755352e5bcd6/idm-add-cert.png" alt="Screenshot of the &quot;New Certificate&quot; pop-up window with one large field for the Certificate in base64 of PEM format. The &quot;Add&quot; button at the bottom right is highlighted."></div></div></div></li></ol></div><p>
				The <code class="literal">sc_user</code> entry now contains an external certificate.
			</p></section><section class="section" id="proc-add-cert-idm-user-cli_configuring-idm-for-smart-card-auth"><div class="titlepage"><div><div><h3 class="title">2.6. Adding a certificate to a user entry in the IdM CLI</h3></div></div></div><p class="_abstract _abstract">
				Follow this procedure to add an external certificate to a user entry in IdM CLI.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					Instead of uploading the whole certificate, it is also possible to upload certificate mapping data to a user entry in IdM. User entries containing either full certificates or certificate mapping data can be used in conjunction with corresponding certificate mapping rules to facilitate the configuration of smart card authentication for system administrators. For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/con-idm-certmapdata_managing-smart-card-authentication">Certificate mapping rules for configuring authentication</a>.
				</p></div></rh-alert><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					If the user’s certificate has been issued by the IdM Certificate Authority, the certificate is already stored in the user entry, and you do not need to follow this procedure.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have the certificate that you want to add to the user entry at your disposal.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Log into the IdM CLI as an administrator if you want to add a certificate to another user:
					</p><pre class="literallayout">[user@client SmartCard]$ <span class="strong strong"><strong>kinit admin</strong></span></pre><p class="simpara">
						For adding a certificate to your own profile, you do not need the administrator’s credentials:
					</p><pre class="literallayout">[user@client SmartCard]$ <span class="strong strong"><strong>kinit sc_user</strong></span></pre></li><li class="listitem"><p class="simpara">
						Create an environment variable containing the certificate with the header and footer removed and concatenated into a single line, which is the format expected by the <code class="literal">ipa user-add-cert</code> command:
					</p><pre class="literallayout">[user@client SmartCard]$ <span class="strong strong"><strong>export CERT=`openssl x509 -outform der -in testuser.crt | base64 -w0 -`</strong></span></pre><p class="simpara">
						Note that certificate in the <code class="literal">testuser.crt</code> file must be in the <code class="literal">PEM</code> format.
					</p></li><li class="listitem"><p class="simpara">
						Add the certificate to the profile of sc_user using the <code class="literal">ipa user-add-cert</code> command:
					</p><pre class="literallayout">[user@client SmartCard]$ <span class="strong strong"><strong>ipa user-add-cert sc_user --certificate=$CERT</strong></span></pre></li></ol></div><p>
				The <code class="literal">sc_user</code> entry now contains an external certificate.
			</p></section><section class="section" id="installing-tools-for-managing-and-using-smart-cards_configuring-idm-for-smart-card-auth"><div class="titlepage"><div><div><h3 class="title">2.7. Installing tools for managing and using smart cards</h3></div></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">gnutls-utils</code> package is installed.
					</li><li class="listitem">
						The <code class="literal">opensc</code> package is installed.
					</li><li class="listitem">
						The <code class="literal">pcscd</code> service is running.
					</li></ul></div><p class="_abstract _abstract">
				Before you can configure your smart card, you must install the corresponding tools, which can generate certificates and start the <code class="literal">pscd</code> service.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the <code class="literal">opensc</code> and <code class="literal">gnutls-utils</code> packages:
					</p><pre class="screen"># <span class="strong strong"><strong>dnf -y install opensc gnutls-utils</strong></span></pre></li><li class="listitem"><p class="simpara">
						Start the <code class="literal">pcscd</code> service.
					</p><pre class="screen"># <span class="strong strong"><strong>systemctl start pcscd</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify that the <code class="literal">pcscd</code> service is up and running
					</p><pre class="screen"># <span class="strong strong"><strong>systemctl status pcscd</strong></span></pre></li></ul></div></section><section class="section" id="storing-a-certificate-on-the-smart-card_configuring-idm-for-smart-card-auth"><div class="titlepage"><div><div><h3 class="title">2.8. Preparing your smart card and uploading your certificates and keys to your smart card</h3></div></div></div><p class="_abstract _abstract">
				Follow this procedure to configure your smart card with the <code class="literal">pkcs15-init</code> tool, which helps you to configure:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Erasing your smart card
					</li><li class="listitem">
						Setting new PINs and optional PIN Unblocking Keys (PUKs)
					</li><li class="listitem">
						Creating a new slot on the smart card
					</li><li class="listitem">
						Storing the certificate, private key, and public key in the slot
					</li><li class="listitem">
						If required, locking the smart card settings as certain smart cards require this type of finalization
					</li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The <code class="literal">pkcs15-init</code> tool may not work with all smart cards. You must use the tools that work with the smart card you are using.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The <code class="literal">opensc</code> package, which includes the <code class="literal">pkcs15-init</code> tool, is installed.
					</p><p class="simpara">
						For more details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#installing-tools-for-managing-and-using-smart-cards_configuring-idm-for-smart-card-auth">Installing tools for managing and using smart cards</a>.
					</p></li><li class="listitem">
						The card is inserted in the reader and connected to the computer.
					</li><li class="listitem">
						You have a private key, a public key, and a certificate to store on the smart card. In this procedure, <code class="literal">testuser.key</code>, <code class="literal">testuserpublic.key</code>, and <code class="literal">testuser.crt</code> are the names used for the private key, public key, and the certificate.
					</li><li class="listitem">
						You have your current smart card user PIN and Security Officer PIN (SO-PIN).
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Erase your smart card and authenticate yourself with your PIN:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>pkcs15-init --erase-card --use-default-transport-keys</strong></span>
Using reader with a card: <span class="emphasis"><em>Reader name</em></span>
PIN [Security Officer PIN] required.
Please enter PIN [Security Officer PIN]:</pre><p class="simpara">
						The card has been erased.
					</p></li><li class="listitem"><p class="simpara">
						Initialize your smart card, set your user PIN and PUK, and your Security Officer PIN and PUK:
					</p><pre class="screen">$ <span class="strong strong"><strong>pkcs15-init --create-pkcs15 --use-default-transport-keys \ --pin <span class="emphasis"><em>963214</em></span> --puk <span class="emphasis"><em>321478</em></span> --so-pin <span class="emphasis"><em>65498714</em></span> --so-puk <span class="emphasis"><em>784123</em></span></strong></span>
Using reader with a card: <span class="emphasis"><em>Reader name</em></span></pre><p class="simpara">
						The <code class="literal">pcks15-init</code> tool creates a new slot on the smart card.
					</p></li><li class="listitem"><p class="simpara">
						Set a label and the authentication ID for the slot:
					</p><pre class="screen">$ <span class="strong strong"><strong>pkcs15-init --store-pin --label testuser \ --auth-id 01 --so-pin <span class="emphasis"><em>65498714</em></span> --pin <span class="emphasis"><em>963214</em></span> --puk <span class="emphasis"><em>321478</em></span></strong></span>
Using reader with a card: <span class="emphasis"><em>Reader name</em></span></pre><p class="simpara">
						The label is set to a human-readable value, in this case, <code class="literal">testuser</code>. The <code class="literal">auth-id</code> must be two hexadecimal values, in this case it is set to <code class="literal">01</code>.
					</p></li><li class="listitem"><p class="simpara">
						Store and label the private key in the new slot on the smart card:
					</p><pre class="screen">$ <span class="strong strong"><strong>pkcs15-init --store-private-key testuser.key --label testuser_key \ --auth-id 01 --id 01 --pin <span class="emphasis"><em>963214</em></span></strong></span>
Using reader with a card: <span class="emphasis"><em>Reader name</em></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							The value you specify for <code class="literal">--id</code> must be the same when storing your private key and storing your certificate in the next step. Specifying your own value for <code class="literal">--id</code> is recommended as otherwise a more complicated value is calculated by the tool.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Store and label the certificate in the new slot on the smart card:
					</p><pre class="screen">$ <span class="strong strong"><strong>pkcs15-init --store-certificate testuser.crt --label testuser_crt \ --auth-id 01 --id 01 --format pem --pin <span class="emphasis"><em>963214</em></span></strong></span>
Using reader with a card: <span class="emphasis"><em>Reader name</em></span></pre></li><li class="listitem"><p class="simpara">
						Optional: Store and label the public key in the new slot on the smart card:
					</p><pre class="screen">$ <span class="strong strong"><strong>pkcs15-init --store-public-key testuserpublic.key --label testuserpublic_key --auth-id 01 --id 01 --pin <span class="emphasis"><em>963214</em></span></strong></span>
Using reader with a card: <span class="emphasis"><em>Reader name</em></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							If the public key corresponds to a private key or certificate, specify the same ID as the ID of the private key or certificate.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Optional: Certain smart cards require you to finalize the card by locking the settings:
					</p><pre class="screen">$ <span class="strong strong"><strong>pkcs15-init -F</strong></span></pre><p class="simpara">
						At this stage, your smart card includes the certificate, private key, and public key in the newly created slot. You have also created your user PIN and PUK and the Security Officer PIN and PUK.
					</p></li></ol></div></section><section class="section" id="logging-in-to-idm-with-smart-cards_configuring-idm-for-smart-card-auth"><div class="titlepage"><div><div><h3 class="title">2.9. Logging in to IdM with smart cards</h3></div></div></div><p class="_abstract _abstract">
				Follow this procedure to use smart cards for logging in to the IdM Web UI.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The web browser is configured for using smart card authentication.
					</li><li class="listitem">
						The IdM server is configured for smart card authentication.
					</li><li class="listitem">
						The certificate installed on your smart card is either issued by the IdM server or has been added to the user entry in IdM.
					</li><li class="listitem">
						You know the PIN required to unlock the smart card.
					</li><li class="listitem">
						The smart card has been inserted into the reader.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Open the IdM Web UI in the browser.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Log In Using Certificate</strong></span>.
					</p><p class="simpara">
						<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Managing_smart_card_authentication-en-US/images/e2df8c824273dc927cde799f821b8c6c/ipa-login-smart-card.png" alt="A screenshot of the IdM Web UI displaying an empty &quot;Username&quot; field and an empty &quot;Password&quot; field. Below those two fields the &quot;Log in using a Certificate&quot; option has been highlighted."></span>

					</p></li><li class="listitem"><p class="simpara">
						If the <span class="strong strong"><strong>Password Required</strong></span> dialog box opens, add the PIN to unlock the smart card and click the <span class="strong strong"><strong>OK</strong></span> button.
					</p><p class="simpara">
						The <span class="strong strong"><strong>User Identification Request</strong></span> dialog box opens.
					</p><p class="simpara">
						If the smart card contains more than one certificate, select the certificate you want to use for authentication in the drop down list below <span class="strong strong"><strong>Choose a certificate to present as identification</strong></span>.
					</p></li><li class="listitem">
						Click the <span class="strong strong"><strong>OK</strong></span> button.
					</li></ol></div><p>
				Now you are successfully logged in to the IdM Web UI.
			</p><p>
				<span class="inlinemediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Managing_smart_card_authentication-en-US/images/62db8da1055ce6a2efadfd397d26a6fe/web_ui_users.png" alt="A screenshot of the first screen visible after logging in to the IdM Web UI. There are 5 tabs listed along the top of the screen: Identity - Policy - Authentication - Network Services - IPA Server. The Identity tab has been selected and it is displaying the Users page which is the first menu item among 6 choices just below the tabs: Users - Hosts - Services - Groups - ID Views - Automember. The Active users page displays a table of user logins and their information: First name - Last name - Status - UID - Email address - Telephone number - Job Title."></span>

			</p></section><section class="section" id="configuring-gdm-access-using-smart-card-authentication_configuring-idm-for-smart-card-auth"><div class="titlepage"><div><div><h3 class="title">2.10. Logging in to GDM using smart card authentication on an IdM client</h3></div></div></div><p class="_abstract _abstract">
				The GNOME Desktop Manager (GDM) requires authentication. You can use your password; however, you can also use a smart card for authentication.
			</p><p>
				Follow this procedure to use smart card authentication to access GDM.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The system has been configured for smart card authentication. For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#conf-idm-client-for-smart-card-auth_configuring-idm-for-smart-card-auth">Configuring the IdM client for smart card authentication</a>.
					</li><li class="listitem">
						The smart card contains your certificate and private key.
					</li><li class="listitem">
						The user account is a member of the IdM domain.
					</li><li class="listitem"><p class="simpara">
						The certificate on the smart card maps to the user entry through:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Assigning the certificate to a particular user entry. For details, see, <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#proc-add-cert-idm-user-webui_configuring-idm-for-smart-card-auth">Adding a certificate to a user entry in the IdM Web UI</a> or <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#proc-add-cert-idm-user-cli_configuring-idm-for-smart-card-auth">Adding a certificate to a user entry in the IdM CLI</a>.
							</li><li class="listitem">
								The certificate mapping data being applied to the account. For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/con-idm-certmapdata_managing-smart-card-authentication">Certificate mapping rules for configuring authentication on smart cards</a>.
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Insert the smart card in the reader.
					</li><li class="listitem">
						Enter the smart card PIN.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>Sign In</strong></span>.
					</li></ol></div><p>
				You are successfully logged in to the RHEL system and you have a TGT provided by the IdM server.
			</p><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						In the <span class="strong strong"><strong>Terminal</strong></span> window, enter <code class="literal">klist</code> and check the result:
					</p><pre class="literallayout">$ klist
Ticket cache: KEYRING:persistent:1358900015:krb_cache_TObtNMd
Default principal: example.user@REDHAT.COM

Valid starting       Expires              Service principal
04/20/2020 13:58:24  04/20/2020 23:58:24  krbtgt/EXAMPLE.COM@EXAMPLE.COM
	renew until 04/27/2020 08:58:15</pre></li></ul></div></section><section class="section" id="configuring-su-access-using-smart-card-authentication_configuring-idm-for-smart-card-auth"><div class="titlepage"><div><div><h3 class="title">2.11. Using smart card authentication with the su command</h3></div></div></div><p class="_abstract _abstract">
				Changing to a different user requires authentication. You can use a password or a certificate. Follow this procedure to use your smart card with the <code class="literal">su</code> command. It means that after entering the <code class="literal">su</code> command, you are prompted for the smart card PIN.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Your IdM server and client have been configured for smart card authentication.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#conf-idm-server-for-smart-card-auth_configuring-idm-for-smart-card-auth">Configuring the IdM server for smart card authentication</a>
							</li><li class="listitem">
								See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#conf-idm-client-for-smart-card-auth_configuring-idm-for-smart-card-auth">Configuring the IdM client for smart card authentication</a>
							</li></ul></div></li><li class="listitem">
						The smart card contains your certificate and private key. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#storing-a-certificate-on-the-smart-card_configuring-idm-for-smart-card-auth">Storing a certificate on a smart card</a>
					</li><li class="listitem">
						The card is inserted in the reader and connected to the computer.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						In a terminal window, change to a different user with the <code class="literal">su</code> command:
					</p><pre class="literallayout">$ su - example.user
PIN for smart_card</pre><p class="simpara">
						If the configuration is correct, you are prompted to enter the smart card PIN.
					</p></li></ul></div></section></section><section class="chapter" id="configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication"><div class="titlepage"><div><div><h2 class="title">Chapter 3. Configuring certificates issued by ADCS for smart card authentication in IdM</h2></div></div></div><p class="_abstract _abstract">
			To configure smart card authentication in IdM for users whose certificates are issued by Active Directory (AD) certificate services:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Your deployment is based on cross-forest trust between Identity Management (IdM) and Active Directory (AD).
				</li><li class="listitem">
					You want to allow smart card authentication for users whose accounts are stored in AD.
				</li><li class="listitem">
					Certificates are created and stored in Active Directory Certificate Services (ADCS).
				</li></ul></div><p>
			For an overview of smart card authentication, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_understanding-smart-card-authentication_managing-smart-card-authentication">Understanding smart card authentication</a>.
		</p><p>
			Configuration is accomplished in the following steps:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication#copying-certificates-from-active-directory-using-sftp_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm">Copying CA and user certificates from Active Directory to the IdM server and client</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication#configuring-the-idm-server-and-clients-for-smart-card-authentication-using-adcs-certificates_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm">Configuring the IdM server and clients for smart card authentication using ADCS certificates</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication#converting-the-pfx-file_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm">Converting a PFX (PKCS#12) file to be able to store the certificate and private key into the smart card</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication#configuring-timeouts-in-sssd-conf_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm">Configuring timeouts in the sssd.conf file</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication#certificate-mapping-rules-for-smart-card-authentication_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm">Creating certificate mapping rules for smart card authentication</a>
				</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
					Identity Management (IdM) and Active Directory (AD) trust is installed
				</p><p class="simpara">
					For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_trust_between_idm_and_ad/index">Installing trust between IdM and AD</a>.
				</p></li><li class="listitem">
					Active Directory Certificate Services (ADCS) is installed and certificates for users are generated
				</li></ul></div><section class="section" id="windows-server-settings-required-for-trust-configuration-and-certificate-usage_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm"><div class="titlepage"><div><div><h3 class="title">3.1. Windows Server settings required for trust configuration and certificate usage</h3></div></div></div><p class="_abstract _abstract">
				You must configure the following on the Windows Server:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Active Directory Certificate Services (ADCS) is installed
					</li><li class="listitem">
						Certificate Authority is created
					</li><li class="listitem">
						Optional: If you are using Certificate Authority Web Enrollment, the Internet Information Services (IIS) must be configured
					</li></ul></div><p>
				Export the certificate:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Key must have <code class="literal">2048</code> bits or more
					</li><li class="listitem">
						Include a private key
					</li><li class="listitem"><p class="simpara">
						You will need a certificate in the following format: Personal Information Exchange — <code class="literal">PKCS #12(.PFX)</code>
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Enable certificate privacy
							</li></ul></div></li></ul></div></section><section class="section" id="copying-certificates-from-active-directory-using-sftp_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm"><div class="titlepage"><div><div><h3 class="title">3.2. Copying certificates from Active Directory using sftp</h3></div></div></div><p class="_abstract _abstract">
				To be able to use smart card authetication, you need to copy the following certificate files:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						A root CA certificate in the <code class="literal">CER</code> format: <code class="literal">adcs-winserver-ca.cer</code> on your IdM server.
					</li><li class="listitem">
						A user certificate with a private key in the <code class="literal">PFX</code> format: <code class="literal">aduser1.pfx</code> on an IdM client.
					</li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					This procedure expects SSH access is allowed. If SSH is unavailable the user must copy the file from the AD Server to the IdM server and client.
				</p></div></rh-alert><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Connect from <span class="strong strong"><strong>the IdM server</strong></span> and copy the <code class="literal">adcs-winserver-ca.cer</code> root certificate to the IdM server:
					</p><pre class="literallayout">root@idmserver ~]# sftp Administrator@winserver.ad.example.com
Administrator@winserver.ad.example.com's password:
Connected to Administrator@winserver.ad.example.com.
sftp&gt; cd &lt;Path to certificates&gt;
sftp&gt; ls
adcs-winserver-ca.cer    aduser1.pfx
sftp&gt;
sftp&gt; get adcs-winserver-ca.cer
Fetching &lt;Path to certificates&gt;/adcs-winserver-ca.cer to adcs-winserver-ca.cer
&lt;Path to certificates&gt;/adcs-winserver-ca.cer                 100%  1254    15KB/s 00:00
sftp quit</pre></li><li class="listitem"><p class="simpara">
						Connect from <span class="strong strong"><strong>the IdM client</strong></span> and copy the <code class="literal">aduser1.pfx</code> user certificate to the client:
					</p><pre class="literallayout">[root@client1 ~]# sftp Administrator@winserver.ad.example.com
Administrator@winserver.ad.example.com's password:
Connected to Administrator@winserver.ad.example.com.
sftp&gt; cd /&lt;Path to certificates&gt;
sftp&gt; get aduser1.pfx
Fetching &lt;Path to certificates&gt;/aduser1.pfx to aduser1.pfx
&lt;Path to certificates&gt;/aduser1.pfx                 100%  1254    15KB/s 00:00
sftp quit</pre></li></ol></div><p>
				Now the CA certificate is stored in the IdM server and the user certificates is stored on the client machine.
			</p></section><section class="section" id="configuring-the-idm-server-and-clients-for-smart-card-authentication-using-adcs-certificates_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm"><div class="titlepage"><div><div><h3 class="title">3.3. Configuring the IdM server and clients for smart card authentication using ADCS certificates</h3></div></div></div><p class="_abstract _abstract">
				You must configure the IdM (Identity Management) server and clients to be able to use smart card authentication in the IdM environment. IdM includes the <code class="literal">ipa-advise</code> scripts which makes all necessary changes:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Install necessary packages
					</li><li class="listitem">
						Configure IdM server and clients
					</li><li class="listitem">
						Copy the CA certificates into the expected locations
					</li></ul></div><p>
				You can run <code class="literal">ipa-advise</code> on your IdM server.
			</p><p>
				Follow this procedure to configure your server and clients for smart card authentication:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						On an IdM server: Preparing the <code class="literal">ipa-advise</code> script to configure your IdM server for smart card authentication.
					</li><li class="listitem">
						On an IdM server: Preparing the <code class="literal">ipa-advise</code> script to configure your IdM client for smart card authentication.
					</li><li class="listitem">
						On an IdM server: Applying the the <code class="literal">ipa-advise</code> server script on the IdM server using the AD certificate.
					</li><li class="listitem">
						Moving the client script to the IdM client machine.
					</li><li class="listitem">
						On an IdM client: Applying the the <code class="literal">ipa-advise</code> client script on the IdM client using the AD certificate.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The certificate has been copied to the IdM server.
					</li><li class="listitem">
						Obtain the Kerberos ticket.
					</li><li class="listitem">
						Log in as a user with administration rights.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On the IdM server, use the <code class="literal">ipa-advise</code> script for configuring a client:
					</p><pre class="literallayout">[root@idmserver ~]# ipa-advise config-client-for-smart-card-auth &gt; sc_client.sh</pre></li><li class="listitem"><p class="simpara">
						On the IdM server, use the <code class="literal">ipa-advise</code> script for configuring a server:
					</p><pre class="literallayout">[root@idmserver ~]# ipa-advise config-server-for-smart-card-auth &gt; sc_server.sh</pre></li><li class="listitem"><p class="simpara">
						On the IdM server, execute the script:
					</p><pre class="literallayout">[root@idmserver ~]# sh -x sc_server.sh adcs-winserver-ca.cer</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								It configures the IdM Apache HTTP Server.
							</li><li class="listitem">
								It enables Public Key Cryptography for Initial Authentication in Kerberos (PKINIT) on the Key Distribution Center (KDC).
							</li><li class="listitem">
								It configures the IdM Web UI to accept smart card authorization requests.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Copy the <code class="literal">sc_client.sh</code> script to the client system:
					</p><pre class="literallayout">[root@idmserver ~]# scp sc_client.sh root@client1.idm.example.com:/root
Password:
sc_client.sh                  100%  2857   1.6MB/s   00:00</pre></li><li class="listitem"><p class="simpara">
						Copy the Windows certificate to the client system:
					</p><pre class="literallayout">[root@idmserver ~]# scp adcs-winserver-ca.cer root@client1.idm.example.com:/root
Password:
adcs-winserver-ca.cer                 100%  1254   952.0KB/s   00:00</pre></li><li class="listitem"><p class="simpara">
						On the client system, run the client script:
					</p><pre class="literallayout">[root@idmclient1 ~]# sh -x sc_client.sh adcs-winserver-ca.cer</pre></li></ol></div><p>
				The CA certificate is installed in the correct format on the IdM server and client systems and next step is to copy the user certificates onto the smart card itself.
			</p></section><section class="section" id="converting-the-pfx-file_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm"><div class="titlepage"><div><div><h3 class="title">3.4. Converting the PFX file</h3></div></div></div><p class="_abstract _abstract">
				Before you store the PFX (PKCS#12) file into the smart card, you must:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Convert the file to the PEM format
					</li><li class="listitem">
						Extract the private key and the certificate to two different files
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The PFX file is copied into the IdM client machine.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On the IdM client, into the PEM format:
					</p><pre class="literallayout">[root@idmclient1 ~]# openssl pkcs12 -in aduser1.pfx -out aduser1_cert_only.pem -clcerts -nodes
Enter Import Password:</pre></li><li class="listitem"><p class="simpara">
						Extract the key into the separate file:
					</p><pre class="literallayout">[root@idmclient1 ~]# openssl pkcs12 -in adduser1.pfx -nocerts -out adduser1.pem &gt; aduser1.key</pre></li><li class="listitem"><p class="simpara">
						Extract the public certificate into the separate file:
					</p><pre class="literallayout">[root@idmclient1 ~]# openssl pkcs12 -in adduser1.pfx -clcerts -nokeys -out aduser1_cert_only.pem &gt; aduser1.crt</pre></li></ol></div><p>
				At this point, you can store the <code class="literal">aduser1.key</code> and <code class="literal">aduser1.crt</code> into the smart card.
			</p></section><section class="section" id="installing-tools-for-managing-and-using-smart-cards_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm"><div class="titlepage"><div><div><h3 class="title">3.5. Installing tools for managing and using smart cards</h3></div></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">gnutls-utils</code> package is installed.
					</li><li class="listitem">
						The <code class="literal">opensc</code> package is installed.
					</li><li class="listitem">
						The <code class="literal">pcscd</code> service is running.
					</li></ul></div><p class="_abstract _abstract">
				Before you can configure your smart card, you must install the corresponding tools, which can generate certificates and start the <code class="literal">pscd</code> service.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the <code class="literal">opensc</code> and <code class="literal">gnutls-utils</code> packages:
					</p><pre class="screen"># <span class="strong strong"><strong>dnf -y install opensc gnutls-utils</strong></span></pre></li><li class="listitem"><p class="simpara">
						Start the <code class="literal">pcscd</code> service.
					</p><pre class="screen"># <span class="strong strong"><strong>systemctl start pcscd</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify that the <code class="literal">pcscd</code> service is up and running
					</p><pre class="screen"># <span class="strong strong"><strong>systemctl status pcscd</strong></span></pre></li></ul></div></section><section class="section" id="storing-a-certificate-on-the-smart-card_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm"><div class="titlepage"><div><div><h3 class="title">3.6. Preparing your smart card and uploading your certificates and keys to your smart card</h3></div></div></div><p class="_abstract _abstract">
				Follow this procedure to configure your smart card with the <code class="literal">pkcs15-init</code> tool, which helps you to configure:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Erasing your smart card
					</li><li class="listitem">
						Setting new PINs and optional PIN Unblocking Keys (PUKs)
					</li><li class="listitem">
						Creating a new slot on the smart card
					</li><li class="listitem">
						Storing the certificate, private key, and public key in the slot
					</li><li class="listitem">
						If required, locking the smart card settings as certain smart cards require this type of finalization
					</li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The <code class="literal">pkcs15-init</code> tool may not work with all smart cards. You must use the tools that work with the smart card you are using.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The <code class="literal">opensc</code> package, which includes the <code class="literal">pkcs15-init</code> tool, is installed.
					</p><p class="simpara">
						For more details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#installing-tools-for-managing-and-using-smart-cards_configuring-idm-for-smart-card-auth">Installing tools for managing and using smart cards</a>.
					</p></li><li class="listitem">
						The card is inserted in the reader and connected to the computer.
					</li><li class="listitem">
						You have a private key, a public key, and a certificate to store on the smart card. In this procedure, <code class="literal">testuser.key</code>, <code class="literal">testuserpublic.key</code>, and <code class="literal">testuser.crt</code> are the names used for the private key, public key, and the certificate.
					</li><li class="listitem">
						You have your current smart card user PIN and Security Officer PIN (SO-PIN).
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Erase your smart card and authenticate yourself with your PIN:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>pkcs15-init --erase-card --use-default-transport-keys</strong></span>
Using reader with a card: <span class="emphasis"><em>Reader name</em></span>
PIN [Security Officer PIN] required.
Please enter PIN [Security Officer PIN]:</pre><p class="simpara">
						The card has been erased.
					</p></li><li class="listitem"><p class="simpara">
						Initialize your smart card, set your user PIN and PUK, and your Security Officer PIN and PUK:
					</p><pre class="screen">$ <span class="strong strong"><strong>pkcs15-init --create-pkcs15 --use-default-transport-keys \ --pin <span class="emphasis"><em>963214</em></span> --puk <span class="emphasis"><em>321478</em></span> --so-pin <span class="emphasis"><em>65498714</em></span> --so-puk <span class="emphasis"><em>784123</em></span></strong></span>
Using reader with a card: <span class="emphasis"><em>Reader name</em></span></pre><p class="simpara">
						The <code class="literal">pcks15-init</code> tool creates a new slot on the smart card.
					</p></li><li class="listitem"><p class="simpara">
						Set a label and the authentication ID for the slot:
					</p><pre class="screen">$ <span class="strong strong"><strong>pkcs15-init --store-pin --label testuser \ --auth-id 01 --so-pin <span class="emphasis"><em>65498714</em></span> --pin <span class="emphasis"><em>963214</em></span> --puk <span class="emphasis"><em>321478</em></span></strong></span>
Using reader with a card: <span class="emphasis"><em>Reader name</em></span></pre><p class="simpara">
						The label is set to a human-readable value, in this case, <code class="literal">testuser</code>. The <code class="literal">auth-id</code> must be two hexadecimal values, in this case it is set to <code class="literal">01</code>.
					</p></li><li class="listitem"><p class="simpara">
						Store and label the private key in the new slot on the smart card:
					</p><pre class="screen">$ <span class="strong strong"><strong>pkcs15-init --store-private-key testuser.key --label testuser_key \ --auth-id 01 --id 01 --pin <span class="emphasis"><em>963214</em></span></strong></span>
Using reader with a card: <span class="emphasis"><em>Reader name</em></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							The value you specify for <code class="literal">--id</code> must be the same when storing your private key and storing your certificate in the next step. Specifying your own value for <code class="literal">--id</code> is recommended as otherwise a more complicated value is calculated by the tool.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Store and label the certificate in the new slot on the smart card:
					</p><pre class="screen">$ <span class="strong strong"><strong>pkcs15-init --store-certificate testuser.crt --label testuser_crt \ --auth-id 01 --id 01 --format pem --pin <span class="emphasis"><em>963214</em></span></strong></span>
Using reader with a card: <span class="emphasis"><em>Reader name</em></span></pre></li><li class="listitem"><p class="simpara">
						Optional: Store and label the public key in the new slot on the smart card:
					</p><pre class="screen">$ <span class="strong strong"><strong>pkcs15-init --store-public-key testuserpublic.key --label testuserpublic_key --auth-id 01 --id 01 --pin <span class="emphasis"><em>963214</em></span></strong></span>
Using reader with a card: <span class="emphasis"><em>Reader name</em></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							If the public key corresponds to a private key or certificate, specify the same ID as the ID of the private key or certificate.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Optional: Certain smart cards require you to finalize the card by locking the settings:
					</p><pre class="screen">$ <span class="strong strong"><strong>pkcs15-init -F</strong></span></pre><p class="simpara">
						At this stage, your smart card includes the certificate, private key, and public key in the newly created slot. You have also created your user PIN and PUK and the Security Officer PIN and PUK.
					</p></li></ol></div></section><section class="section" id="configuring-timeouts-in-sssd-conf_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm"><div class="titlepage"><div><div><h3 class="title">3.7. Configuring timeouts in sssd.conf</h3></div></div></div><p class="_abstract _abstract">
				Authentication with a smart card certificate might take longer than the default timeouts used by SSSD. Time out expiration can be caused by:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Slow reader
					</li><li class="listitem">
						A forwarding form a physical device into a virtual environment
					</li><li class="listitem">
						Too many certificates stored on the smart card
					</li><li class="listitem">
						Slow response from the OCSP (Online Certificate Status Protocol) responder if OCSP is used to verify the certificates
					</li></ul></div><p>
				In this case you can prolong the following timeouts in the <code class="literal">sssd.conf</code> file, for example, to 60 seconds:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">p11_child_timeout</code>
					</li><li class="listitem">
						<code class="literal">krb5_auth_timeout</code>
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You must be logged in as root.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open the <code class="literal">sssd.conf</code> file:
					</p><pre class="literallayout">[root@idmclient1 ~]# vim /etc/sssd/sssd.conf</pre></li><li class="listitem"><p class="simpara">
						Change the value of <code class="literal">p11_child_timeout</code>:
					</p><pre class="literallayout">[pam]
p11_child_timeout = 60</pre></li><li class="listitem"><p class="simpara">
						Change the value of <code class="literal">krb5_auth_timeout</code>:
					</p><pre class="literallayout">[domain/IDM.EXAMPLE.COM]
krb5_auth_timeout = 60</pre></li><li class="listitem">
						Save the settings.
					</li></ol></div><p>
				Now, the interaction with the smart card is allowed to run for 1 minute (60 seconds) before authentication will fail with a timeout.
			</p></section><section class="section" id="certificate-mapping-rules-for-smart-card-authentication_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm"><div class="titlepage"><div><div><h3 class="title">3.8. Creating certificate mapping rules for smart card authentication</h3></div></div></div><p class="_abstract _abstract">
				If you want to use one certificate for a user who has accounts in AD (Active Directory) and in IdM (Identity Management), you can create a certificate mapping rule on the IdM server.
			</p><p>
				After creating such a rule, the user is able to authenticate with their smart card in both domains.
			</p><p>
				For details about certificate mapping rules, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/con-idm-certmapdata_managing-smart-card-authentication">Certificate mapping rules for configuring authentication</a>.
			</p></section></section><section class="chapter" id="con-idm-certmapdata_managing-smart-card-authentication"><div class="titlepage"><div><div><h2 class="title">Chapter 4. Certificate mapping rules for configuring authentication</h2></div></div></div><p class="_abstract _abstract">
			You might need to configure certificate mapping rules in the following scenarios:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Certificates have been issued by the Certificate System of the Active Directory (AD) with which the IdM domain is in a trust relationship.
				</li><li class="listitem">
					Certificates have been issued by an external certificate authority.
				</li><li class="listitem">
					The IdM environment is large with many users using smart cards. In this case, adding full certificates can be complicated. The subject and issuer are predictable in most scenarios and therefore easier to add ahead of time than the full certificate.
				</li></ul></div><p>
			As a system administrator, you can create a certificate mapping rule and add certificate mapping data to a user entry even before a certificate is issued to a particular user. Once the certificate is issued, the user can log in using the certificate even though the full certificate has not yet been uploaded to the user entry.
		</p><p>
			In addition, as certificates are renewed at regular intervals, certificate mapping rules reduce administrative overhead. When a user’s certificate is renewed, the administrator does not have to update the user entry. For example, if the mapping is based on the <code class="literal">Subject</code> and <code class="literal">Issuer</code> values, and if the new certificate has the same subject and issuer as the old one, the mapping still applies. If, in contrast, the full certificate was used, then the administrator would have to upload the new certificate to the user entry to replace the old one.
		</p><p>
			To set up certificate mapping:
		</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
					An administrator has to load the certificate mapping data or the full certificate into a user account.
				</li><li class="listitem">
					An administrator has to create a certificate mapping rule to allow successful logging into IdM for a user whose account contains a certificate mapping data entry that matches the information on the certificate.
				</li></ol></div><p>
			Once the certificate mapping rules have been created, when the end-user presents the certificate, stored either on a <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/dc-web-ui-auth_managing-certificates-in-idm">filesystem</a> or a <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#logging-in-to-idm-with-smart-cards_configuring-idm-for-smart-card-auth">smart card</a>, authentication is successful.
		</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
				The Key Distribution Center (KDC) has a cache for certificate mapping rules. The cache is populated on the first <code class="literal">certauth</code> request and it has a hard-coded timeout of 300 seconds. KDC will not see any changes to certificate mapping rules unless it is restarted or the cache expires.
			</p></div></rh-alert><p>
			For details on the individual components that make up a mapping rule and how to obtain and use them, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/conf-certmap-idm_managing-certificates-in-idm#sc-id-mapping_conf-certmap-idm">Components of an identity mapping rule in IdM</a> and <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/conf-certmap-idm_managing-certificates-in-idm#sc-id-issuer-obtain-example_conf-certmap-idm">Obtaining the issuer from a certificate for use in a matching rule</a>.
		</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
				Your certificate mapping rules can depend on the use case for which you are using the certificate. For example, if you are using SSH with certificates, you must have the full certificate to extract the public key from the certificate.
			</p></div></rh-alert></section><section class="chapter" id="configuring-smart-card-authentication-with-the-web-console_managing-smart-card-authentication"><div class="titlepage"><div><div><h2 class="title">Chapter 5. Configuring smart card authentication with the web console for centrally managed users</h2></div></div></div><p>
			You can configure smart card authentication in the RHEL web console for users who are centrally managed by:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Identity Management
				</li><li class="listitem">
					Active Directory which is connected in the cross-forest trust with Identity Management
				</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
					The system for which you want to use the smart card authentication must be a member of an Active Directory or Identity Management domain.
				</p><p class="simpara">
					For details about joining the RHEL 9 system into a domain using the web console, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/configuring_single_sign_on_for_the_rhel_8_web_console_in_the_idm_domain_system-management-using-the-rhel-9-web-console#joining-a-rhel-8-system-to-an-idm-domain-using-the-web-console_configuring-single-sign-on-for-the-web-console-in-the-idm-domain">Joining a RHEL system to an IdM domain using the web console</a>.
				</p></li><li class="listitem"><p class="simpara">
					The certificate used for the smart card authentication must be associated with a particular user in Identity Management or Active Directory.
				</p><p class="simpara">
					For more details about associating a certificate with the user in Identity Management, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#proc-add-cert-idm-user-webui_configuring-idm-for-smart-card-auth">Adding a certificate to a user entry in the IdM Web UI</a> or <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#proc-add-cert-idm-user-cli_configuring-idm-for-smart-card-auth">Adding a certificate to a user entry in the IdM CLI</a>.
				</p></li></ul></div><section class="section" id="smart-card-authentication-for-centrally-managed-users_configuring-smart-card-authentication-with-the-web-console"><div class="titlepage"><div><div><h3 class="title">5.1. Smart card authentication for centrally managed users</h3></div></div></div><p class="_abstract _abstract">
				A smart card is a physical device, which can provide personal authentication using certificates stored on the card. Personal authentication means that you can use smart cards in the same way as user passwords.
			</p><p>
				You can store user credentials on the smart card in the form of a private key and a certificate. Special software and hardware is used to access them. You insert the smart card into a reader or a USB socket and supply the PIN code for the smart card instead of providing your password.
			</p><p>
				Identity Management (IdM) supports smart card authentication with:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						User certificates issued by the IdM certificate authority.
					</li><li class="listitem">
						User certificates issued by the Active Directory Certificate Service (ADCS) certificate authority.
					</li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					If you want to start using smart card authentication, see the hardware requirements: <a class="link" href="https://access.redhat.com/articles/4253861">Smart Card support in RHEL8+</a>.
				</p></div></rh-alert></section><section class="section" id="installing-tools-for-managing-and-using-smart-cards_configuring-smart-card-authentication-with-the-web-console"><div class="titlepage"><div><div><h3 class="title">5.2. Installing tools for managing and using smart cards</h3></div></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">gnutls-utils</code> package is installed.
					</li><li class="listitem">
						The <code class="literal">opensc</code> package is installed.
					</li><li class="listitem">
						The <code class="literal">pcscd</code> service is running.
					</li></ul></div><p class="_abstract _abstract">
				Before you can configure your smart card, you must install the corresponding tools, which can generate certificates and start the <code class="literal">pscd</code> service.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the <code class="literal">opensc</code> and <code class="literal">gnutls-utils</code> packages:
					</p><pre class="screen"># <span class="strong strong"><strong>dnf -y install opensc gnutls-utils</strong></span></pre></li><li class="listitem"><p class="simpara">
						Start the <code class="literal">pcscd</code> service.
					</p><pre class="screen"># <span class="strong strong"><strong>systemctl start pcscd</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify that the <code class="literal">pcscd</code> service is up and running
					</p><pre class="screen"># <span class="strong strong"><strong>systemctl status pcscd</strong></span></pre></li></ul></div></section><section class="section" id="storing-a-certificate-on-the-smart-card_configuring-smart-card-authentication-with-the-web-console"><div class="titlepage"><div><div><h3 class="title">5.3. Preparing your smart card and uploading your certificates and keys to your smart card</h3></div></div></div><p class="_abstract _abstract">
				Follow this procedure to configure your smart card with the <code class="literal">pkcs15-init</code> tool, which helps you to configure:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Erasing your smart card
					</li><li class="listitem">
						Setting new PINs and optional PIN Unblocking Keys (PUKs)
					</li><li class="listitem">
						Creating a new slot on the smart card
					</li><li class="listitem">
						Storing the certificate, private key, and public key in the slot
					</li><li class="listitem">
						If required, locking the smart card settings as certain smart cards require this type of finalization
					</li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The <code class="literal">pkcs15-init</code> tool may not work with all smart cards. You must use the tools that work with the smart card you are using.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The <code class="literal">opensc</code> package, which includes the <code class="literal">pkcs15-init</code> tool, is installed.
					</p><p class="simpara">
						For more details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#installing-tools-for-managing-and-using-smart-cards_configuring-idm-for-smart-card-auth">Installing tools for managing and using smart cards</a>.
					</p></li><li class="listitem">
						The card is inserted in the reader and connected to the computer.
					</li><li class="listitem">
						You have a private key, a public key, and a certificate to store on the smart card. In this procedure, <code class="literal">testuser.key</code>, <code class="literal">testuserpublic.key</code>, and <code class="literal">testuser.crt</code> are the names used for the private key, public key, and the certificate.
					</li><li class="listitem">
						You have your current smart card user PIN and Security Officer PIN (SO-PIN).
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Erase your smart card and authenticate yourself with your PIN:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>pkcs15-init --erase-card --use-default-transport-keys</strong></span>
Using reader with a card: <span class="emphasis"><em>Reader name</em></span>
PIN [Security Officer PIN] required.
Please enter PIN [Security Officer PIN]:</pre><p class="simpara">
						The card has been erased.
					</p></li><li class="listitem"><p class="simpara">
						Initialize your smart card, set your user PIN and PUK, and your Security Officer PIN and PUK:
					</p><pre class="screen">$ <span class="strong strong"><strong>pkcs15-init --create-pkcs15 --use-default-transport-keys \ --pin <span class="emphasis"><em>963214</em></span> --puk <span class="emphasis"><em>321478</em></span> --so-pin <span class="emphasis"><em>65498714</em></span> --so-puk <span class="emphasis"><em>784123</em></span></strong></span>
Using reader with a card: <span class="emphasis"><em>Reader name</em></span></pre><p class="simpara">
						The <code class="literal">pcks15-init</code> tool creates a new slot on the smart card.
					</p></li><li class="listitem"><p class="simpara">
						Set a label and the authentication ID for the slot:
					</p><pre class="screen">$ <span class="strong strong"><strong>pkcs15-init --store-pin --label testuser \ --auth-id 01 --so-pin <span class="emphasis"><em>65498714</em></span> --pin <span class="emphasis"><em>963214</em></span> --puk <span class="emphasis"><em>321478</em></span></strong></span>
Using reader with a card: <span class="emphasis"><em>Reader name</em></span></pre><p class="simpara">
						The label is set to a human-readable value, in this case, <code class="literal">testuser</code>. The <code class="literal">auth-id</code> must be two hexadecimal values, in this case it is set to <code class="literal">01</code>.
					</p></li><li class="listitem"><p class="simpara">
						Store and label the private key in the new slot on the smart card:
					</p><pre class="screen">$ <span class="strong strong"><strong>pkcs15-init --store-private-key testuser.key --label testuser_key \ --auth-id 01 --id 01 --pin <span class="emphasis"><em>963214</em></span></strong></span>
Using reader with a card: <span class="emphasis"><em>Reader name</em></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							The value you specify for <code class="literal">--id</code> must be the same when storing your private key and storing your certificate in the next step. Specifying your own value for <code class="literal">--id</code> is recommended as otherwise a more complicated value is calculated by the tool.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Store and label the certificate in the new slot on the smart card:
					</p><pre class="screen">$ <span class="strong strong"><strong>pkcs15-init --store-certificate testuser.crt --label testuser_crt \ --auth-id 01 --id 01 --format pem --pin <span class="emphasis"><em>963214</em></span></strong></span>
Using reader with a card: <span class="emphasis"><em>Reader name</em></span></pre></li><li class="listitem"><p class="simpara">
						Optional: Store and label the public key in the new slot on the smart card:
					</p><pre class="screen">$ <span class="strong strong"><strong>pkcs15-init --store-public-key testuserpublic.key --label testuserpublic_key --auth-id 01 --id 01 --pin <span class="emphasis"><em>963214</em></span></strong></span>
Using reader with a card: <span class="emphasis"><em>Reader name</em></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							If the public key corresponds to a private key or certificate, specify the same ID as the ID of the private key or certificate.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Optional: Certain smart cards require you to finalize the card by locking the settings:
					</p><pre class="screen">$ <span class="strong strong"><strong>pkcs15-init -F</strong></span></pre><p class="simpara">
						At this stage, your smart card includes the certificate, private key, and public key in the newly created slot. You have also created your user PIN and PUK and the Security Officer PIN and PUK.
					</p></li></ol></div></section><section class="section" id="enabling-smart-card-authentication-for-the-web-console_configuring-smart-card-authentication-with-the-web-console"><div class="titlepage"><div><div><h3 class="title">5.4. Enabling smart card authentication for the web console</h3></div></div></div><p class="_abstract _abstract">
				To use smart card authentication in the web console, enable this authentication method in the <code class="literal">cockpit.conf</code> file.
			</p><p>
				Additionally, you can disable password authentication in the same file.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You have installed the RHEL 9 web console.
					</p><p class="simpara">
						For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Log in to the RHEL 9 web console.
					</p><p class="simpara">
						For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
					</p></li><li class="listitem">
						Click <span class="strong strong"><strong>Terminal</strong></span>.
					</li><li class="listitem"><p class="simpara">
						In the <code class="literal">/etc/cockpit/cockpit.conf</code>, set the <code class="literal">ClientCertAuthentication</code> to <code class="literal">yes</code>:
					</p><pre class="literallayout">[WebService]
ClientCertAuthentication = yes</pre></li><li class="listitem"><p class="simpara">
						Optional: Disable password based authentication in <code class="literal">cockpit.conf</code> with:
					</p><pre class="literallayout">[Basic]
action = none</pre><p class="simpara">
						This configuration disables password authentication and you must always use the smart card.
					</p></li><li class="listitem"><p class="simpara">
						Restart the web console to ensure that the <code class="literal">cockpit.service</code> accepts the change:
					</p><pre class="screen"># <span class="strong strong"><strong>systemctl restart cockpit</strong></span></pre></li></ol></div></section><section class="section" id="logging-in-to-the-web-console-with-smart-cards_configuring-smart-card-authentication-with-the-web-console"><div class="titlepage"><div><div><h3 class="title">5.5. Logging in to the web console with smart cards</h3></div></div></div><p class="_abstract _abstract">
				You can use smart cards to log in to the web console.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A valid certificate stored in your smart card that is associated to a user account created in a Active Directory or Identity Management domain.
					</li><li class="listitem">
						PIN to unlock the smart card.
					</li><li class="listitem">
						The smart card has been put into the reader.
					</li></ul></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You have installed the RHEL 9 web console.
					</p><p class="simpara">
						For instructions, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing and enabling the web console</a>.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Log in to the RHEL 9 web console.
					</p><p class="simpara">
						For details, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console">Logging in to the web console</a>.
					</p><p class="simpara">
						The browser asks you to add the PIN protecting the certificate stored on the smart card.
					</p></li><li class="listitem">
						In the <span class="strong strong"><strong>Password Required</strong></span> dialog box, enter PIN and click <span class="strong strong"><strong>OK</strong></span>.
					</li><li class="listitem">
						In the <span class="strong strong"><strong>User Identification Request</strong></span> dialog box, select the certificate stored in the smart card.
					</li><li class="listitem"><p class="simpara">
						Select <span class="strong strong"><strong>Remember this decision</strong></span>.
					</p><p class="simpara">
						The system does not open this window next time.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							This step does not apply to Google Chrome users.
						</p></div></rh-alert></li><li class="listitem">
						Click <span class="strong strong"><strong>OK</strong></span>.
					</li></ol></div><p>
				You are now connected and the web console displays its content.
			</p></section><section class="section" id="proc_enabling-password-less-sudo-for-smart-card-users_configuring-smart-card-authentication-with-the-web-console"><div class="titlepage"><div><div><h3 class="title">5.6. Enabling passwordless sudo authentication for smart card users</h3></div></div></div><p class="_abstract _abstract">
				You can configure passwordless authentication to <code class="literal">sudo</code> and other services for smart card users in the web console.
			</p><p>
				As an alternative, if you use Red Hat Identity Management, you can declare the initial web console certificate authentication as trusted for authenticating to <code class="literal">sudo</code>, SSH, or other services. For that purpose, the web console automatically creates an S4U2Proxy Kerberos ticket in the user session.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Identity Management installed.
					</li><li class="listitem">
						Active Directory connected in the cross-forest trust with Identity Management.
					</li><li class="listitem">
						Smart card set up to log in to the web console. See <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/configuring-smart-card-authentication-with-the-web-console_system-management-using-the-rhel-9-web-console">Configuring smart card authentication with the web console for centrally managed users</a> for more information.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Set up constraint delegation rules to list which hosts the ticket can access.
					</p><div class="example" id="ex-setting-up-constraint-delegation-rules"><p class="title"><strong>Example 5.1. Setting up constraint delegation rules</strong></p><div class="example-contents"><p>
							The web console session runs host <code class="literal">host.example.com</code> and should be trusted to access its own host with <code class="literal">sudo</code>. Additionally, we are adding second trusted host - <code class="literal">remote.example.com</code>.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									Create the following delegation:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
											Run the following commands to add a list of target machines a particular rule can access:
										</p><pre class="screen"># <span class="strong strong"><strong>ipa servicedelegationtarget-add cockpit-target</strong></span>
# <span class="strong strong"><strong>ipa servicedelegationtarget-add-member cockpit-target \ --principals=host/host.example.com@EXAMPLE.COM \ --principals=host/remote.example.com@EXAMPLE.COM</strong></span></pre></li><li class="listitem"><p class="simpara">
											To allow the web console sessions (HTTP/principal) to access that host list, use the following commands:
										</p><pre class="screen"># <span class="strong strong"><strong>ipa servicedelegationrule-add cockpit-delegation</strong></span>
# <span class="strong strong"><strong>ipa servicedelegationrule-add-member cockpit-delegation \ --principals=HTTP/host.example.com@EXAMPLE.COM</strong></span>
# <span class="strong strong"><strong>ipa servicedelegationrule-add-target cockpit-delegation \ --servicedelegationtargets=cockpit-target</strong></span></pre></li></ul></div></li></ul></div></div></div></li><li class="listitem"><p class="simpara">
						Enable GSS authentication in the corresponding services:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								For sudo, enable the <code class="literal">pam_sss_gss</code> module in the <code class="literal">/etc/sssd/sssd.conf</code> file:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
										As root, add an entry for your domain to the <code class="literal">/etc/sssd/sssd.conf</code> configuration file.
									</p><pre class="screen">[domain/example.com]
pam_gssapi_services = sudo, sudo-i</pre></li><li class="listitem"><p class="simpara">
										Enable the module in the <code class="literal">/etc/pam.d/sudo</code> file on the first line.
									</p><pre class="screen">auth sufficient pam_sss_gss.so</pre></li></ol></div></li><li class="listitem">
								For SSH, update the <code class="literal">GSSAPIAuthentication</code> option in the <code class="literal">/etc/ssh/sshd_config</code> file to <code class="literal">yes</code>.
							</li></ol></div></li></ol></div><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					The delegated S4U ticket is not forwarded to remote SSH hosts when connecting to them from the web console. Authenticating to sudo on a remote host with your ticket will not work.
				</p></div></rh-alert><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Log in to the web console using a smart card.
					</li><li class="listitem">
						Click the <code class="literal">Limited access</code> button.
					</li><li class="listitem">
						Authenticate using your smart card.
					</li></ol></div><p>
				Alternatively:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Try to connect to a different host with SSH.
					</li></ul></div></section><section class="section" id="limiting-user-sessions-and-memory-to-prevent-a-dos-attack_configuring-smart-card-authentication-with-the-web-console"><div class="titlepage"><div><div><h3 class="title">5.7. Limiting user sessions and memory to prevent a DoS attack</h3></div></div></div><p class="_abstract _abstract">
				A certificate authentication is protected by separating and isolating instances of the <code class="literal">cockpit-ws</code> web server against attackers who wants to impersonate another user. However, this introduces a potential denial of service (DoS) attack: A remote attacker could create a large number of certificates and send a large number of HTTPS requests to <code class="literal">cockpit-ws</code> each using a different certificate.
			</p><p>
				To prevent such DoS attacks, the collective resources of these web server instances are limited. By default, limits for the number of connections and memory usage are set to 200 threads and 75 % (soft) or 90 % (hard) memory limit.
			</p><p>
				The example procedure demonstrates resource protection by limiting the number of connections and memory.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						In the terminal, open the <code class="literal">system-cockpithttps.slice</code> configuration file:
					</p><pre class="screen"># <span class="strong strong"><strong>systemctl edit system-cockpithttps.slice</strong></span></pre></li><li class="listitem"><p class="simpara">
						Limit the <code class="literal">TasksMax</code> to <span class="emphasis"><em>100</em></span> and <code class="literal">CPUQuota</code> to <span class="emphasis"><em>30%</em></span>:
					</p><pre class="screen">[Slice]
# change existing value
TasksMax=<span class="emphasis"><em>100</em></span>
# add new restriction
CPUQuota=<span class="emphasis"><em>30%</em></span></pre></li><li class="listitem"><p class="simpara">
						To apply the changes, restart the system:
					</p><pre class="screen"># <span class="strong strong"><strong>systemctl daemon-reload</strong></span>
# <span class="strong strong"><strong>systemctl stop cockpit</strong></span></pre></li></ol></div><p>
				Now, the new memory and user session lower the risk of DoS attacks on the <code class="literal">cockpit-ws</code> web server.
			</p></section><section class="section _additional-resources" id="additional_resources"><div class="titlepage"><div><div><h3 class="title">5.8. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication">Configuring Identity Management for smart card authentication</a>.
					</li><li class="listitem">
						<a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/8/html/configuring_and_managing_identity_management/configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_configuring-and-managing-idm">Configuring certificates issued by ADCS for smart card authentication in IdM</a>.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-and-importing-local-certificates-to-a-smart-card_managing-smart-card-authentication">Configuring and importing local certificates to a smart card</a>.
					</li></ul></div></section></section><section class="chapter" id="configuring-and-importing-local-certificates-to-a-smart-card_managing-smart-card-authentication"><div class="titlepage"><div><div><h2 class="title">Chapter 6. Configuring smart card authentication with local certificates</h2></div></div></div><p class="_abstract _abstract">
			To configure smart card authentication with local certificates:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					The host is not connected to a domain.
				</li><li class="listitem">
					You want to authenticate with a smart card on this host.
				</li><li class="listitem">
					You want to configure SSH access using smart card authentication.
				</li><li class="listitem">
					You want to configure the smart card with <code class="literal">authselect</code>.
				</li></ul></div><p>
			Use the following configuration to accomplish this scenario:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
					Obtain a user certificate for the user who wants to authenticate with a smart card. The certificate should be generated by a trustworthy Certification Authority used in the domain.
				</p><p class="simpara">
					If you cannot get the certificate, you can generate a user certificate signed by a local certificate authority for testing purposes,
				</p></li><li class="listitem">
					Store the certificate and private key in a smart card.
				</li><li class="listitem">
					Configure the smart card authentication for SSH access.
				</li></ul></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
				If a host can be part of the domain, add the host to the domain and use certificates generated by Active Directory or Identity Management Certification Authority.
			</p><p>
				For details about how to create IdM certificates for a smart card, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication">Configuring Identity Management for smart card authentication</a>.
			</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
					Authselect installed
				</p><p class="simpara">
					The authselect tool configures user authentication on Linux hosts and you can use it to configure smart card authentication parameters. For details about authselect, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_authentication_and_authorization_in_rhel/configuring-user-authentication-using-authselect_configuring-authentication-and-authorization-in-rhel#what-is-authselect-used-for_configuring-user-authentication-using-authselect">Explaining authselect</a>.
				</p></li><li class="listitem"><p class="simpara">
					Smart Card or USB devices supported by RHEL 9
				</p><p class="simpara">
					For details, see <a class="link" href="https://access.redhat.com/articles/4253861">Smart Card support in RHEL9</a>.
				</p></li></ul></div><section class="section" id="creating-local-certificates_configuring-and-importing-local-certificates-to-a-smart-card"><div class="titlepage"><div><div><h3 class="title">6.1. Creating local certificates</h3></div></div></div><p class="_abstract _abstract">
				Follow this procedure to perform the following tasks:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Generate the OpenSSL certificate authority
					</li><li class="listitem">
						Create a certificate signing request
					</li></ul></div><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					The following steps are intended for testing purposes only. Certificates generated by a local self-signed Certificate Authority are not as secure as using AD, IdM, or RHCS Certification Authority. You should use a certificate generated by your enterprise Certification Authority even if the host is not part of the domain.
				</p></div></rh-alert><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a directory where you can generate the certificate, for example:
					</p><pre class="literallayout"># mkdir /tmp/ca
# cd /tmp/ca</pre></li><li class="listitem"><p class="simpara">
						Set up the certificate (copy this text to your command line in the <code class="literal">ca</code> directory):
					</p><pre class="literallayout">cat &gt; ca.cnf &lt;&lt;EOF
[ ca ]
default_ca = CA_default

[ CA_default ]
dir              = .
database         = \$dir/index.txt
new_certs_dir    = \$dir/newcerts

certificate      = \$dir/rootCA.crt
serial           = \$dir/serial
private_key      = \$dir/rootCA.key
RANDFILE         = \$dir/rand

default_days     = 365
default_crl_days = 30
default_md       = sha256

policy           = policy_any
email_in_dn      = no

name_opt         = ca_default
cert_opt         = ca_default
copy_extensions  = copy

[ usr_cert ]
authorityKeyIdentifier = keyid, issuer

[ v3_ca ]
subjectKeyIdentifier   = hash
authorityKeyIdentifier = keyid:always,issuer:always
basicConstraints       = CA:true
keyUsage               = critical, digitalSignature, cRLSign, keyCertSign

[ policy_any ]
organizationName       = supplied
organizationalUnitName = supplied
commonName             = supplied
emailAddress           = optional

[ req ]
distinguished_name = req_distinguished_name
prompt             = no

[ req_distinguished_name ]
O  = Example
OU = Example Test
CN = Example Test CA
EOF</pre></li><li class="listitem"><p class="simpara">
						Create the following directories:
					</p><pre class="literallayout"># mkdir certs crl newcerts</pre></li><li class="listitem"><p class="simpara">
						Create the following files:
					</p><pre class="literallayout"># touch index.txt crlnumber index.txt.attr</pre></li><li class="listitem"><p class="simpara">
						Write the number 01 in the serial file:
					</p><pre class="literallayout"># echo 01 &gt; serial</pre><p class="simpara">
						This command writes a number 01 in the serial file. It is a serial number of the certificate. With each new certificate released by this CA the number increases by one.
					</p></li><li class="listitem"><p class="simpara">
						Create an OpenSSL root CA key:
					</p><pre class="literallayout"># openssl genrsa -out rootCA.key 2048</pre></li><li class="listitem"><p class="simpara">
						Create a self-signed root Certification Authority certificate:
					</p><pre class="literallayout"># openssl req -batch -config ca.cnf \
    -x509 -new -nodes -key rootCA.key -sha256 -days 10000 \
    -set_serial 0 -extensions v3_ca -out rootCA.crt</pre></li><li class="listitem"><p class="simpara">
						Create the key for your username:
					</p><pre class="literallayout"># openssl genrsa -out example.user.key 2048</pre><p class="simpara">
						This key is generated in the local system which is not secure, therefore, remove the key from the system when the key is stored in the card.
					</p><p class="simpara">
						You can create a key directly in the smart card as well. For doing this, follow instructions created by the manufacturer of your smart card.
					</p></li><li class="listitem"><p class="simpara">
						Create the certificate signing request configuration file (copy this text to your command line in the ca directory):
					</p><pre class="literallayout">cat &gt; req.cnf &lt;&lt;EOF
[ req ]
distinguished_name = req_distinguished_name
prompt = no

[ req_distinguished_name ]
O = Example
OU = Example Test
CN = testuser

[ req_exts ]
basicConstraints = CA:FALSE
nsCertType = client, email
nsComment = "testuser"
subjectKeyIdentifier = hash
keyUsage = critical, nonRepudiation, digitalSignature, keyEncipherment
extendedKeyUsage = clientAuth, emailProtection, msSmartcardLogin
subjectAltName = otherName:msUPN;UTF8:testuser@EXAMPLE.COM, email:testuser@example.com
EOF</pre></li><li class="listitem"><p class="simpara">
						Create a certificate signing request for your example.user certificate:
					</p><pre class="literallayout"># openssl req -new -nodes -key example.user.key \
    -reqexts req_exts -config req.cnf -out example.user.csr</pre></li><li class="listitem"><p class="simpara">
						Configure the new certificate. Expiration period is set to 1 year:
					</p><pre class="literallayout"># openssl ca -config ca.cnf -batch -notext \
    -keyfile rootCA.key -in example.user.csr -days 365 \
    -extensions usr_cert -out example.user.crt</pre></li></ol></div><p>
				At this point, the certification authority and certificates are successfully generated and prepared for import into a smart card.
			</p></section><section class="section" id="proc_copying-certificate-to-the-sssd-directory_configuring-and-importing-local-certificates-to-a-smart-card"><div class="titlepage"><div><div><h3 class="title">6.2. Copying certificates to the SSSD directory</h3></div></div></div><p class="_abstract _abstract">
				GNOME Desktop Manager (GDM) requires SSSD. If you use GDM, you need to copy the PEM certificate to the <code class="literal">/etc/sssd/pki</code> directory.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The local CA authority and certificates have been generated
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Ensure that you have SSSD installed on the system.
					</p><pre class="literallayout"># rpm -q sssd
sssd-2.0.0.43.el8_0.3.x86_64</pre></li><li class="listitem"><p class="simpara">
						Create a <code class="literal">/etc/sssd/pki</code> directory:
					</p><pre class="literallayout"># file /etc/sssd/pki
/etc/sssd/pki/: directory</pre></li><li class="listitem"><p class="simpara">
						Copy the <code class="literal">rootCA.crt</code> as a PEM file in the <code class="literal">/etc/sssd/pki/</code> directory:
					</p><pre class="literallayout"># cp /tmp/ca/rootCA.crt /etc/sssd/pki/sssd_auth_ca_db.pem</pre></li></ol></div><p>
				Now you have successfully generated the certificate authority and certificates, and you have saved them in the <code class="literal">/etc/sssd/pki</code> directory.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					If you want to share the Certificate Authority certificates with another application, you can change the location in sssd.conf:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							SSSD PAM responder: <code class="literal">pam_cert_db_path</code> in the <code class="literal">[pam]</code> section
						</li><li class="listitem">
							SSSD ssh responder: <code class="literal">ca_db</code> in the <code class="literal">[ssh]</code> section
						</li></ul></div><p>
					For details, see man page for <code class="literal">sssd.conf</code>.
				</p><p>
					Red Hat recommends keeping the default path and using a dedicated Certificate Authority certificate file for SSSD to make sure that only Certificate Authorities trusted for authentication are listed here.
				</p></div></rh-alert></section><section class="section" id="installing-tools-for-managing-and-using-smart-cards_configuring-and-importing-local-certificates-to-a-smart-card"><div class="titlepage"><div><div><h3 class="title">6.3. Installing tools for managing and using smart cards</h3></div></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">gnutls-utils</code> package is installed.
					</li><li class="listitem">
						The <code class="literal">opensc</code> package is installed.
					</li><li class="listitem">
						The <code class="literal">pcscd</code> service is running.
					</li></ul></div><p class="_abstract _abstract">
				Before you can configure your smart card, you must install the corresponding tools, which can generate certificates and start the <code class="literal">pscd</code> service.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the <code class="literal">opensc</code> and <code class="literal">gnutls-utils</code> packages:
					</p><pre class="screen"># <span class="strong strong"><strong>dnf -y install opensc gnutls-utils</strong></span></pre></li><li class="listitem"><p class="simpara">
						Start the <code class="literal">pcscd</code> service.
					</p><pre class="screen"># <span class="strong strong"><strong>systemctl start pcscd</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify that the <code class="literal">pcscd</code> service is up and running
					</p><pre class="screen"># <span class="strong strong"><strong>systemctl status pcscd</strong></span></pre></li></ul></div></section><section class="section" id="storing-a-certificate-on-the-smart-card_configuring-and-importing-local-certificates-to-a-smart-card"><div class="titlepage"><div><div><h3 class="title">6.4. Preparing your smart card and uploading your certificates and keys to your smart card</h3></div></div></div><p class="_abstract _abstract">
				Follow this procedure to configure your smart card with the <code class="literal">pkcs15-init</code> tool, which helps you to configure:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Erasing your smart card
					</li><li class="listitem">
						Setting new PINs and optional PIN Unblocking Keys (PUKs)
					</li><li class="listitem">
						Creating a new slot on the smart card
					</li><li class="listitem">
						Storing the certificate, private key, and public key in the slot
					</li><li class="listitem">
						If required, locking the smart card settings as certain smart cards require this type of finalization
					</li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The <code class="literal">pkcs15-init</code> tool may not work with all smart cards. You must use the tools that work with the smart card you are using.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The <code class="literal">opensc</code> package, which includes the <code class="literal">pkcs15-init</code> tool, is installed.
					</p><p class="simpara">
						For more details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#installing-tools-for-managing-and-using-smart-cards_configuring-idm-for-smart-card-auth">Installing tools for managing and using smart cards</a>.
					</p></li><li class="listitem">
						The card is inserted in the reader and connected to the computer.
					</li><li class="listitem">
						You have a private key, a public key, and a certificate to store on the smart card. In this procedure, <code class="literal">testuser.key</code>, <code class="literal">testuserpublic.key</code>, and <code class="literal">testuser.crt</code> are the names used for the private key, public key, and the certificate.
					</li><li class="listitem">
						You have your current smart card user PIN and Security Officer PIN (SO-PIN).
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Erase your smart card and authenticate yourself with your PIN:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>pkcs15-init --erase-card --use-default-transport-keys</strong></span>
Using reader with a card: <span class="emphasis"><em>Reader name</em></span>
PIN [Security Officer PIN] required.
Please enter PIN [Security Officer PIN]:</pre><p class="simpara">
						The card has been erased.
					</p></li><li class="listitem"><p class="simpara">
						Initialize your smart card, set your user PIN and PUK, and your Security Officer PIN and PUK:
					</p><pre class="screen">$ <span class="strong strong"><strong>pkcs15-init --create-pkcs15 --use-default-transport-keys \ --pin <span class="emphasis"><em>963214</em></span> --puk <span class="emphasis"><em>321478</em></span> --so-pin <span class="emphasis"><em>65498714</em></span> --so-puk <span class="emphasis"><em>784123</em></span></strong></span>
Using reader with a card: <span class="emphasis"><em>Reader name</em></span></pre><p class="simpara">
						The <code class="literal">pcks15-init</code> tool creates a new slot on the smart card.
					</p></li><li class="listitem"><p class="simpara">
						Set a label and the authentication ID for the slot:
					</p><pre class="screen">$ <span class="strong strong"><strong>pkcs15-init --store-pin --label testuser \ --auth-id 01 --so-pin <span class="emphasis"><em>65498714</em></span> --pin <span class="emphasis"><em>963214</em></span> --puk <span class="emphasis"><em>321478</em></span></strong></span>
Using reader with a card: <span class="emphasis"><em>Reader name</em></span></pre><p class="simpara">
						The label is set to a human-readable value, in this case, <code class="literal">testuser</code>. The <code class="literal">auth-id</code> must be two hexadecimal values, in this case it is set to <code class="literal">01</code>.
					</p></li><li class="listitem"><p class="simpara">
						Store and label the private key in the new slot on the smart card:
					</p><pre class="screen">$ <span class="strong strong"><strong>pkcs15-init --store-private-key testuser.key --label testuser_key \ --auth-id 01 --id 01 --pin <span class="emphasis"><em>963214</em></span></strong></span>
Using reader with a card: <span class="emphasis"><em>Reader name</em></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							The value you specify for <code class="literal">--id</code> must be the same when storing your private key and storing your certificate in the next step. Specifying your own value for <code class="literal">--id</code> is recommended as otherwise a more complicated value is calculated by the tool.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Store and label the certificate in the new slot on the smart card:
					</p><pre class="screen">$ <span class="strong strong"><strong>pkcs15-init --store-certificate testuser.crt --label testuser_crt \ --auth-id 01 --id 01 --format pem --pin <span class="emphasis"><em>963214</em></span></strong></span>
Using reader with a card: <span class="emphasis"><em>Reader name</em></span></pre></li><li class="listitem"><p class="simpara">
						Optional: Store and label the public key in the new slot on the smart card:
					</p><pre class="screen">$ <span class="strong strong"><strong>pkcs15-init --store-public-key testuserpublic.key --label testuserpublic_key --auth-id 01 --id 01 --pin <span class="emphasis"><em>963214</em></span></strong></span>
Using reader with a card: <span class="emphasis"><em>Reader name</em></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							If the public key corresponds to a private key or certificate, specify the same ID as the ID of the private key or certificate.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Optional: Certain smart cards require you to finalize the card by locking the settings:
					</p><pre class="screen">$ <span class="strong strong"><strong>pkcs15-init -F</strong></span></pre><p class="simpara">
						At this stage, your smart card includes the certificate, private key, and public key in the newly created slot. You have also created your user PIN and PUK and the Security Officer PIN and PUK.
					</p></li></ol></div></section><section class="section" id="configuring-ssh-access-using-smart-card-authentication_configuring-and-importing-local-certificates-to-a-smart-card"><div class="titlepage"><div><div><h3 class="title">6.5. Configuring SSH access using smart card authentication</h3></div></div></div><p class="_abstract _abstract">
				SSH connections require authentication. You can use a password or a certificate. Follow this procedure to enable authentication using a certificate stored on a smart card.
			</p><p>
				For details about configuring smart cards with <code class="literal">authselect</code>, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-smart-cards-using-authselect_managing-smart-card-authentication">Configuring smart cards using authselect</a>.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The smart card contains your certificate and private key.
					</li><li class="listitem">
						The card is inserted in the reader and connected to the computer.
					</li><li class="listitem">
						Your username matches the Common Name (CN) or User ID (UID) in the certificate’s SUBJECT.
					</li><li class="listitem"><p class="simpara">
						The <code class="literal">pcscd</code> service is running on your local machine.
					</p><p class="simpara">
						For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-and-importing-local-certificates-to-a-smart-card_managing-smart-card-authentication#installing-tools-for-managing-and-using-smart-cards_configuring-and-importing-local-certificates-to-a-smart-card">Installing tools for managing and using smart cards</a>.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a new directory for SSH keys in the home directory of the user who uses smart card authentication:
					</p><pre class="literallayout"># mkdir /home/example.user/.ssh</pre></li><li class="listitem"><p class="simpara">
						Run the <code class="literal">ssh-keygen -D</code> command with the <code class="literal">opensc</code> library to retrieve the existing public key paired with the private key on the smart card, and add it to the <code class="literal">authorized_keys</code> list of the user’s SSH keys directory to enable SSH access with smart card authentication.
					</p><pre class="literallayout"># ssh-keygen -D /usr/lib64/pkcs11/opensc-pkcs11.so &gt;&gt; ~example.user/.ssh/authorized_keys</pre></li><li class="listitem"><p class="simpara">
						SSH requires access right configuration for the <code class="literal">/.ssh</code> directory and the <code class="literal">authorized_keys</code> file. To set or change the access rights, enter:
					</p><pre class="literallayout"># chown -R example.user:example.user ~example.user/.ssh/
# chmod 700 ~example.user/.ssh/
# chmod 600 ~example.user/.ssh/authorized_keys</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the keys:
					</p><pre class="literallayout"># cat ~example.user/.ssh/authorized_keys</pre><p class="simpara">
						The terminal displays the keys.
					</p></li></ol></div><p>
				You can verify the SSH access with the following command:
			</p><pre class="literallayout"># ssh -I /usr/lib64/opensc-pkcs11.so -l example.user localhost hostname</pre><p>
				If the configuration is successful, you are prompted to enter the smart card PIN.
			</p><p>
				The configuration works now locally. Now you can copy the public key and distribute it to <code class="literal">authorized_keys</code> files located on all servers on which you want to use SSH.
			</p></section></section><section class="chapter" id="configuring-smart-cards-using-authselect_managing-smart-card-authentication"><div class="titlepage"><div><div><h2 class="title">Chapter 7. Configuring smart card authentication using authselect</h2></div></div></div><p class="_abstract _abstract">
			This section describes how to configure your smart card to achieve one of the following aims:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Enable both password and smart card authentication
				</li><li class="listitem">
					Disable password and enable smart card authentication
				</li><li class="listitem">
					Enable lock on removal
				</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
					Authselect installed
				</p><p class="simpara">
					The authselect tool configures user authentication on Linux hosts and you can use it to configure smart card authentication parameters. For details about authselect, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_authentication_and_authorization_in_rhel/index#configuring-user-authentication-using-authselect_configuring-authentication-and-authorization-in-rhel">Configuring user authentication using authselect</a>.
				</p></li><li class="listitem"><p class="simpara">
					Smart Card or USB devices supported by RHEL 9
				</p><p class="simpara">
					For details, see <a class="link" href="https://access.redhat.com/articles/4253861">Smart Card support in RHEL9</a>.
				</p></li></ul></div><section class="section" id="certificates-eligible-for-smart-cards_configuring-smart-cards-using-authselect"><div class="titlepage"><div><div><h3 class="title">7.1. Certificates eligible for smart cards</h3></div></div></div><p class="_abstract _abstract">
				Before you can configure a smart card with <code class="literal">authselect</code>, you must import a certificate into your card. You can use the following tools to generate the certificate:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Active Directory (AD)
					</li><li class="listitem"><p class="simpara">
						Identity Management (IdM)
					</p><p class="simpara">
						For details about how to create IdM certificates, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/dc-web-ui-auth_managing-certificates-in-idm#requesting-and-exporting-a-user-certificate_dc-web-ui-auth">Requesting a new user certificate and exporting it to the client</a>.
					</p></li><li class="listitem"><p class="simpara">
						Red Hat Certificate System (RHCS)
					</p><p class="simpara">
						For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_certificate_system/10/html/managing_smart_cards_with_the_enterprise_security_client/index">Managing Smart Cards with the Enterprise Security Client</a>.
					</p></li><li class="listitem">
						Third-party Certification Authority (CA)
					</li><li class="listitem"><p class="simpara">
						Local Certification Authority. You can use a certificate generated by the Local Certification Authority if the user is not part of a domain or for testing purposes.
					</p><p class="simpara">
						For details about how to create and import local certificates into a smart card, <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-and-importing-local-certificates-to-a-smart-card_managing-smart-card-authentication">Configuring and importing local certificates to a smart card</a>.
					</p></li></ul></div></section><section class="section" id="configuring-smart-card-authentication-to-enable-user-password-authentication_configuring-smart-cards-using-authselect"><div class="titlepage"><div><div><h3 class="title">7.2. Configure your system to enable both smart card and password authentication</h3></div></div></div><p class="_abstract _abstract">
				Follow this procedure to enable both smart card and password authentication on your system.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The Smart card contains your certificate and private key.
					</li><li class="listitem">
						The card is inserted into the reader and connected to the computer.
					</li><li class="listitem">
						The <code class="literal">authselect</code> tool is installed on your system.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Enter the following command to allow smart card and password authentication:
					</p><pre class="literallayout"># authselect select sssd with-smartcard --force</pre></li></ul></div><p>
				At this point, smart card authentication is enabled, however, password authentication will work if you forget your smart card at home.
			</p></section><section class="section" id="configuring-authselect-to-enforce-smart-card-authentication_configuring-smart-cards-using-authselect"><div class="titlepage"><div><div><h3 class="title">7.3. Configuring your system to enforce smart card authentication</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">authselect</code> tool enables you to configure smart card authentication on your system and to disable the default password authentication. The <code class="literal">authselect</code> command includes the following options:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">with-smartcard</code> — enables smart card authentication in addition to password authentication
					</li><li class="listitem">
						<code class="literal">with-smartcard-required</code>  — enables smart card authentication and disables password authentication
					</li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The <code class="literal">with-smartcard-required</code> option only enforces exclusive smart card authentication for login services, such as <code class="literal">login</code>, <code class="literal">gdm</code>, <code class="literal">xdm</code>, <code class="literal">kdm</code>, <code class="literal">xscreensaver</code>, <code class="literal">gnome-screensaver</code>, and <code class="literal">kscreensaver</code>. Other services, such as <code class="literal">su</code> or <code class="literal">sudo</code> for switching users, do not use smart card authentication by default and will continue to prompt you for a password.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Smart card contains your certificate and private key.
					</li><li class="listitem">
						The card is inserted into the reader and connected to the computer.
					</li><li class="listitem">
						The <code class="literal">authselect</code> tool is installed on your local system.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Enter the following command to enforce smart card authentication:
					</p><pre class="literallayout"># authselect select sssd with-smartcard  with-smartcard-required --force</pre></li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					Once you run this command, password authentication will no longer work and you can only log in with a smart card. Ensure smart card authentication is working before running this command or you may be locked out of your system.
				</p></div></rh-alert></section><section class="section" id="configuring-smart-card-authentication-with-lock-on-removal_configuring-smart-cards-using-authselect"><div class="titlepage"><div><div><h3 class="title">7.4. Configuring smart card authentication with lock on removal</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">authselect</code> service enables you to configure your smart card authentication to lock your screen instantly after removing the smart card from the reader. The <code class="literal">authselect</code> command must include the following variables:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">with-smartcard</code> — enabling smart card authentication
					</li><li class="listitem">
						<code class="literal">with-smartcard-required</code> — enabling exclusive smart card authentication (authentication with a password is disabled)
					</li><li class="listitem"><p class="simpara">
						<code class="literal">with-smartcard-lock-on-removal</code> — enforcing log out after the smart card removal
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							The <code class="literal">with-smartcard-lock-on-removal</code> option only works on systems with the GNOME desktop environment. If you are using a system that is <code class="literal">tty</code> or console based and you remove your smart card from its reader, you are not automatically locked out of the system.
						</p></div></rh-alert></li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Smart card contains your certificate and private key.
					</li><li class="listitem">
						The card is inserted into the reader and connected to the computer.
					</li><li class="listitem">
						The <code class="literal">authselect</code> tool is installed on your local system.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Enter the following command to enable smart card authentication, disable password authentication, and enforce lock on removal:
					</p><pre class="literallayout"># authselect select sssd  with-smartcard  with-smartcard-required with-smartcard-lock-on-removal --force</pre></li></ul></div><p>
				Now, when you remove the card, the screen locks. You must re-insert your smart card to unlock it.
			</p></section></section><section class="chapter" id="assembly_authenticating-to-sudo-remotely-using-smart-cards_managing-smart-card-authentication"><div class="titlepage"><div><div><h2 class="title">Chapter 8. Authenticating to sudo remotely using smart cards</h2></div></div></div><p class="_abstract _abstract">
			This section describes how to authenticate to sudo remotely using smart cards. After the <code class="literal">ssh-agent</code> service is running locally and can forward the <code class="literal">ssh-agent</code> socket to a remote machine, you can use the SSH authentication protocol in the sudo PAM module to authenticate users remotely.
		</p><p>
			After logging in locally using a smart card, you can log in through SSH to the remote machine and run the <code class="literal">sudo</code> command without being prompted for a password by using SSH forwarding of the smart card authentication.
		</p><p>
			For the purposes of this example, a client is connecting to the IPA server through SSH and running the sudo command on the IPA server with credentials stored on a smart card.
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_authenticating-to-sudo-remotely-using-smart-cards_managing-smart-card-authentication#proc_creating-sudo-rules-in-idm_assembly_authenticating-to-sudo-remotely-using-smart-cards">Creating sudo rules in IdM</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_authenticating-to-sudo-remotely-using-smart-cards_managing-smart-card-authentication#proc_setting-up-the-pam-module-for-sudo_assembly_authenticating-to-sudo-remotely-using-smart-cards">Setting up the PAM module for sudo</a>
				</li><li class="listitem">
					<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_authenticating-to-sudo-remotely-using-smart-cards_managing-smart-card-authentication#proc_connecting-to-sudo-remotely-using-a-smart-card_assembly_authenticating-to-sudo-remotely-using-smart-cards">Connecting to sudo remotely using a smart card</a>
				</li></ul></div><section class="section" id="proc_creating-sudo-rules-in-idm_assembly_authenticating-to-sudo-remotely-using-smart-cards"><div class="titlepage"><div><div><h3 class="title">8.1. Creating sudo rules in IdM</h3></div></div></div><p class="_abstract _abstract">
				Follow this procedure to create sudo rules in IdM to give <code class="literal">ipauser1</code> permission to run sudo on the remote host.
			</p><p>
				For the purposes of this example, the <code class="literal">less</code> and <code class="literal">whoami</code> commands are added as sudo commands to test the procedure.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The IdM user has been created. For the purpose of this example, the user is <code class="literal">ipauser1</code>.
					</li><li class="listitem">
						You have the hostname of the system where you are running sudo remotely. For the purpose of this example, the host is <code class="literal">server.ipa.test</code>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a <code class="literal">sudo</code> rule named <code class="literal">adminrule</code> to allow a user to run commands.
					</p><pre class="literallayout">ipa sudorule-add adminrule</pre></li><li class="listitem"><p class="simpara">
						Add <code class="literal">less</code> and <code class="literal">whoami</code> as <code class="literal">sudo</code> commands:
					</p><pre class="literallayout">ipa sudocmd-add /usr/bin/less
ipa sudocmd-add /usr/bin/whoami</pre></li><li class="listitem"><p class="simpara">
						Add the <code class="literal">less</code> and <code class="literal">whoami</code> commands to the <code class="literal">adminrule</code>:
					</p><pre class="literallayout">ipa sudorule-add-allow-command adminrule --sudocmds /usr/bin/less
ipa sudorule-add-allow-command adminrule --sudocmds /usr/bin/whoami</pre></li><li class="listitem"><p class="simpara">
						Add the <code class="literal">ipauser1</code> user to the <code class="literal">adminrule</code>:
					</p><pre class="literallayout">ipa sudorule-add-user adminrule --users ipauser1</pre></li><li class="listitem"><p class="simpara">
						Add the host on which you are running <code class="literal">sudo</code> to the <code class="literal">adminrule</code>:
					</p><pre class="literallayout">ipa sudorule-add-host adminrule --hosts server.ipa.test</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						See <code class="literal">ipa sudorule-add --help</code>.
					</li><li class="listitem">
						See <code class="literal">ipa sudocmd-add --help</code>.
					</li></ul></div></section><section class="section" id="proc_setting-up-the-pam-module-for-sudo_assembly_authenticating-to-sudo-remotely-using-smart-cards"><div class="titlepage"><div><div><h3 class="title">8.2. Setting up the PAM module for sudo</h3></div></div></div><p class="_abstract _abstract">
				Follow this procedure to install and set up the <code class="literal">pam_ssh_agent_auth.so</code> PAM module for sudo authentication with a smart card on any host where you are running sudo.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Install the PAM SSH agent:
					</p><pre class="literallayout">dnf -y install pam_ssh_agent_auth</pre></li><li class="listitem"><p class="simpara">
						Add the <code class="literal">authorized_keys_command</code> for <code class="literal">pam_ssh_agent_auth.so</code> to the <code class="literal">/etc/pam.d/sudo</code> file before any other <code class="literal">auth</code> entry:
					</p><pre class="literallayout">#%PAM-1.0
<span class="strong strong"><strong>auth sufficient pam_ssh_agent_auth.so authorized_keys_command=/usr/bin/sss_ssh_authorizedkeys</strong></span>
auth       include      system-auth
account    include      system-auth
password   include      system-auth
session    include      system-auth</pre></li><li class="listitem"><p class="simpara">
						To enable the SSH agent forwarding to work when you run sudo commands, add the following to the <code class="literal">/etc/sudoers</code> file:
					</p><pre class="literallayout">Defaults env_keep += "SSH_AUTH_SOCK"</pre><p class="simpara">
						This allows users who have their public keys from smart cards stored in IPA/SSSD to authenticate to sudo without entering a password.
					</p></li><li class="listitem"><p class="simpara">
						Restart the <code class="literal">sssd</code> service:
					</p><pre class="literallayout">systemctl restart sssd</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						See the <code class="literal">pam</code> man page on your system.
					</li></ul></div></section><section class="section" id="proc_connecting-to-sudo-remotely-using-a-smart-card_assembly_authenticating-to-sudo-remotely-using-smart-cards"><div class="titlepage"><div><div><h3 class="title">8.3. Connecting to sudo remotely using a smart card</h3></div></div></div><p class="_abstract _abstract">
				Follow this procedure to configure the SSH agent and client to connect to <code class="literal">sudo</code> remotely using a smart card.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have created <code class="literal">sudo</code> rules in IdM.
					</li><li class="listitem">
						You have installed and set up the <code class="literal">pam_ssh_agent_auth</code> PAM module for <code class="literal">sudo</code> authentication on the remote system where you are going to run <code class="literal">sudo</code>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Start the SSH agent (if not already running).
					</p><pre class="literallayout">eval `ssh-agent`</pre></li><li class="listitem"><p class="simpara">
						Add your smart card to the SSH agent. Enter your PIN when prompted:
					</p><pre class="literallayout">ssh-add -s /usr/lib64/opensc-pkcs11.so</pre></li><li class="listitem"><p class="simpara">
						Connect to the system where you need to run <code class="literal">sudo</code> remotely by using SSH with ssh-agent forwarding enabled. Use the <code class="literal">-A</code> option:
					</p><pre class="literallayout">ssh -A ipauser1@server.ipa.test</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Run the <code class="literal">whoami</code> command with <code class="literal">sudo</code>:
					</p><pre class="literallayout">sudo /usr/bin/whoami</pre></li></ul></div><p>
				You are not prompted for a PIN or password when the smart card is inserted.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					If the SSH agent is configured to use other sources, such as the GNOME Keyring, and you run the <code class="literal">sudo</code> command after removing the smart card, you might not be prompted for a PIN or password, as one of the other sources might provide access to a valid private key. To check the public keys of all identities known by the SSH agent, run the <code class="literal">ssh-add -L</code> command.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/securing_networks/assembly_using-secure-communications-between-two-systems-with-openssh_securing-networks">Using secure communications between two systems with OpenSSH</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/securing_networks/assembly_using-secure-communications-between-two-systems-with-openssh_securing-networks#connecting-to-remote-machines-with-ssh-keys-using-ssh-agent_assembly_using-secure-communications-between-two-systems-with-openssh">Connecting to remote machines with SSH keys using ssh-agent</a>
					</li></ul></div></section></section><section class="chapter" id="authenticating-as-an-active-directory-user-using-pkinit-with-a-smart-card_managing-smart-card-authentication"><div class="titlepage"><div><div><h2 class="title">Chapter 9. Authenticating as an Active Directory user using PKINIT with a smart card</h2></div></div></div><p>
			Active Directory (AD) users can authenticate with a smart card to a desktop client system joined to IdM and get a Kerberos ticket-granting ticket (TGT). These tickets can be used for single sign-on (SSO) authentication from the client.
		</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					The client is configured for smart card authentication.
				</li><li class="listitem">
					The <code class="literal">krb5-pkinit</code> package is installed.
				</li><li class="listitem">
					The AD server is configured to trust the certificate authority (CA) that issued the smart card certificate. Import the CA certificates into the NTAuth store (see <a class="link" href="https://learn.microsoft.com/en-US/troubleshoot/windows-server/certificates-and-public-key-infrastructure-pki/import-third-party-ca-to-enterprise-ntauth-store">Microsoft support</a>) and add the CA as a trusted CA. See Active Directory documentation for details.
				</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
					Configure the Kerberos client to trust the CA that issued the smart card certificate:
				</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
							On the IdM client, open the <code class="literal">/etc/krb5.conf</code> file.
						</li><li class="listitem"><p class="simpara">
							Add the following lines to the file:
						</p><pre class="literallayout">[realms]
  AD.DOMAIN.COM = {
    pkinit_eku_checking = kpServerAuth
    pkinit_kdc_hostname = adserver.ad.domain.com
  }</pre></li></ol></div></li><li class="listitem"><p class="simpara">
					If the user certificates do not contain a certificate revocation list (CRL) distribution point extension, configure AD to ignore revocation errors:
				</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
							Save the following REG-formatted content in a plain text file and import it to the Windows registry:
						</p><pre class="literallayout">Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Kdc]
"UseCachedCRLOnlyAndIgnoreRevocationUnknownErrors"=dword:00000001

[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\LSA\Kerberos\Parameters]
"UseCachedCRLOnlyAndIgnoreRevocationUnknownErrors"=dword:00000001</pre><p class="simpara">
							Alternatively, you can set the values manually by using the <code class="literal">regedit.exe</code> application.
						</p></li><li class="listitem">
							Reboot the Windows system to apply the changes.
						</li></ol></div></li><li class="listitem"><p class="simpara">
					Authenticate by using the <code class="literal">kinit</code> utility on an Identity Management client. Specify the Active Directory user with the user name and domain name:
				</p><pre class="literallayout">$ kinit -X X509_user_identity='PKCS11:opensc-pkcs11.so' ad_user@AD.DOMAIN.COM</pre><p class="simpara">
					The <code class="literal">-X</code> option specifies the <code class="literal">opensc-pkcs11.so module</code> as the pre-authentication attribute.
				</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
					<code class="literal">kinit(1)</code> man page on your system
				</li></ul></div></section><section class="chapter" id="assembly_troubleshooting-authentication-with-smart-cards_managing-smart-card-authentication"><div class="titlepage"><div><div><h2 class="title">Chapter 10. Troubleshooting authentication with smart cards</h2></div></div></div><p class="_abstract _abstract">
			The following sections describe how to resolve some of the issues you might encounter when setting up smart card authentication.
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					<a class="link" href="#proc_testing-smart-card-authentication_assembly_troubleshooting-authentication-with-smart-cards" title="10.1. Testing smart card access on the system">Testing smart card authentication</a>
				</li><li class="listitem">
					<a class="link" href="#proc_troubleshooting-smart-card-authentication-with-sssd_assembly_troubleshooting-authentication-with-smart-cards" title="10.2. Troubleshooting smart card authentication with SSSD">Troubleshooting smart card authentication with SSSD</a>
				</li><li class="listitem">
					<a class="link" href="#proc_verifying-that-idm-kerberos-kdc-can-use-pkinit-and-that-the-ca-certificates-are-correctly-located_assembly_troubleshooting-authentication-with-smart-cards" title="10.3. Verifying that IdM Kerberos KDC can use PKINIT and that the CA certificates are correctly located">Verifying that IdM Kerberos KDC can use PKINIT and that the CA certificates are correctly located</a>
				</li><li class="listitem">
					<a class="link" href="#proc_increasing-sssd-timeouts_assembly_troubleshooting-authentication-with-smart-cards" title="10.4. Increasing SSSD timeouts">Increasing SSSD timeouts</a>
				</li><li class="listitem">
					<a class="link" href="#assembly_troubleshooting-certificate-mapping-and-matching-rules_assembly_troubleshooting-authentication-with-smart-cards" title="10.5. Troubleshooting certificate mapping and matching rules">Troubleshooting certificate mapping and matching rules</a>
				</li></ul></div><section class="section" id="proc_testing-smart-card-authentication_assembly_troubleshooting-authentication-with-smart-cards"><div class="titlepage"><div><div><h3 class="title">10.1. Testing smart card access on the system</h3></div></div></div><p class="_abstract _abstract">
				Follow this procedure to test whether you can access your smart card.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have installed and configured your IdM Server and client for use with smart cards.
					</li><li class="listitem">
						You have installed the <code class="literal">certutil</code> tool from the <code class="literal">nss-tools</code> package.
					</li><li class="listitem">
						You have the PIN or password for your smart card.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Using the <code class="literal">lsusb</code> command, verify that the smart card reader is visible to the operating system:
					</p><pre class="screen white-space-pre white-space-pre">$ lsusb
Bus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
<span class="strong strong"><strong>Bus 001 Device 003: ID 072f:b100 Advanced Card Systems, Ltd ACR39U</strong></span>
Bus 001 Device 002: ID 0627:0001 Adomax Technology Co., Ltd
Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub</pre><p class="simpara">
						For more information about the smart cards and readers tested and supported in RHEL, see <a class="link" href="https://access.redhat.com/articles/4253861">Smart Card support in RHEL 9</a>.
					</p></li><li class="listitem"><p class="simpara">
						Ensure that the <code class="literal">pcscd</code> service and socket are enabled and running:
					</p><pre class="screen white-space-pre white-space-pre">$ systemctl status pcscd.service pcscd.socket

● pcscd.service - PC/SC Smart Card Daemon
      <span class="strong strong"><strong>Loaded: loaded</strong></span> (/usr/lib/systemd/system/pcscd.service; indirect;
vendor preset: disabled)
      <span class="strong strong"><strong>Active: active (running)</strong></span> since Fri 2021-09-24 11:05:04 CEST; 2
weeks 6 days ago
TriggeredBy: ● pcscd.socket
        Docs: man:pcscd(8)
    Main PID: 3772184 (pcscd)
       Tasks: 12 (limit: 38201)
      Memory: 8.2M
         CPU: 1min 8.067s
      CGroup: /system.slice/pcscd.service
              └─3772184 /usr/sbin/pcscd --foreground --auto-exit

● pcscd.socket - PC/SC Smart Card Daemon Activation Socket
      <span class="strong strong"><strong>Loaded: loaded</strong></span> (/usr/lib/systemd/system/pcscd.socket; enabled;
vendor preset: enabled)
      <span class="strong strong"><strong>Active: active (running)</strong></span> since Fri 2021-09-24 11:05:04 CEST; 2
weeks 6 days ago
    Triggers: ● pcscd.service
      Listen: /run/pcscd/pcscd.comm (Stream)
      CGroup: /system.slice/pcscd.socket</pre></li><li class="listitem"><p class="simpara">
						Using the <code class="literal">p11-kit list-modules</code> command, display information about the configured smart card and the tokens present on the smart card:
					</p><pre class="screen white-space-pre white-space-pre">$ p11-kit list-modules
p11-kit-trust: p11-kit-trust.so
[...]
opensc: opensc-pkcs11.so
    library-description: OpenSC smartcard framework
    library-manufacturer: OpenSC Project
    library-version: 0.20
    <span class="strong strong"><strong>token: MyEID (sctest)</strong></span>
        manufacturer: Aventra Ltd.
        model: PKCS#15
        serial-number: 8185043840990797
        firmware-version: 40.1
        flags:
               rng
               login-required
               user-pin-initialized
               token-initialized</pre></li><li class="listitem"><p class="simpara">
						Verify you can access the contents of your smart card:
					</p><pre class="screen white-space-pre white-space-pre">$ pkcs11-tool --list-objects --login
Using slot 0 with a present token (0x0)
Logging in to "MyEID (sctest)".
Please enter User PIN:
Private Key Object; RSA
  label:      Certificate
  ID:         01
  Usage:      sign
  Access:     sensitive
Public Key Object; RSA 2048 bits
  label:      Public Key
  ID:         01
  Usage:      verify
  Access:     none
Certificate Object; type = X.509 cert
  label:      Certificate
  subject:    DN: O=IDM.EXAMPLE.COM, CN=idmuser1
  ID:         01</pre></li><li class="listitem"><p class="simpara">
						Display the contents of the certificate on your smart card using the <code class="literal">certutil</code> command:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Run the following command to determine the correct name of your certificate:
							</p><pre class="screen white-space-pre white-space-pre">$ certutil -d /etc/pki/nssdb -L -h all

Certificate Nickname                                         Trust Attributes
                                                             SSL,S/MIME,JAR/XPI

Enter Password or Pin for "MyEID (sctest)":
Smart Card CA 0f5019a8-7e65-46a1-afe5-8e17c256ae00           CT,C,C
<span class="strong strong"><strong>MyEID (sctest):Certificate</strong></span>                                   u,u,u</pre></li><li class="listitem"><p class="simpara">
								Display the contents of the certificate on your smart card:
							</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
									Ensure the name of the certificate is an exact match for the output displayed in the previous step, in this example <code class="literal">MyEID (sctest):Certificate</code>.
								</p></div></rh-alert><pre class="screen white-space-pre white-space-pre">$ certutil -d /etc/pki/nssdb -L -n "MyEID (sctest):Certificate"

Enter Password or Pin for "MyEID (sctest)":
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number: 15 (0xf)
        Signature Algorithm: PKCS #1 SHA-256 With RSA Encryption
        Issuer: "CN=Certificate Authority,O=IDM.EXAMPLE.COM"
        Validity:
            Not Before: Thu Sep 30 14:01:41 2021
            Not After : Sun Oct 01 14:01:41 2023
        Subject: "CN=idmuser1,O=IDM.EXAMPLE.COM"
        Subject Public Key Info:
            Public Key Algorithm: PKCS #1 RSA Encryption
            RSA Public Key:
                Modulus:
                    [...]
                Exponent: 65537 (0x10001)
        Signed Extensions:
            Name: Certificate Authority Key Identifier
            Key ID:
                e2:27:56:0d:2f:f5:f2:72:ce:de:37:20:44:8f:18:7f:
                2f:56:f9:1a

            Name: Authority Information Access
            Method: PKIX Online Certificate Status Protocol
            Location:
                URI: "http://ipa-ca.idm.example.com/ca/ocsp"

            Name: Certificate Key Usage
            Critical: True
            Usages: Digital Signature
                    Non-Repudiation
                    Key Encipherment
                    Data Encipherment

            Name: Extended Key Usage
                TLS Web Server Authentication Certificate
                TLS Web Client Authentication Certificate

            Name: CRL Distribution Points
            Distribution point:
                URI: "http://ipa-ca.idm.example.com/ipa/crl/MasterCRL.bin"
                CRL issuer:
                    Directory Name: "CN=Certificate Authority,O=ipaca"

            Name: Certificate Subject Key ID
            Data:
                43:23:9f:c1:cf:b1:9f:51:18:be:05:b5:44:dc:e6:ab:
                be:07:1f:36

    Signature Algorithm: PKCS #1 SHA-256 With RSA Encryption
    Signature:
        [...]
    Fingerprint (SHA-256):
        6A:F9:64:F7:F2:A2:B5:04:88:27:6E:B8:53:3E:44:3E:F5:75:85:91:34:ED:48:A8:0D:F0:31:5D:7B:C9:E0:EC
    Fingerprint (SHA1):
        B4:9A:59:9F:1C:A8:5D:0E:C1:A2:41:EC:FD:43:E0:80:5F:63:DF:29

    Mozilla-CA-Policy: false (attribute missing)
    Certificate Trust Flags:
        SSL Flags:
            User
        Email Flags:
            User
        Object Signing Flags:
            User</pre></li></ol></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">certutil(1)</code> man page on your system
					</li></ul></div></section><section class="section" id="proc_troubleshooting-smart-card-authentication-with-sssd_assembly_troubleshooting-authentication-with-smart-cards"><div class="titlepage"><div><div><h3 class="title">10.2. Troubleshooting smart card authentication with SSSD</h3></div></div></div><p class="_abstract _abstract">
				Follow this procedure to troubleshoot authentication with SSSD using smart cards.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have installed and configured your IdM Server and client for use with smart cards.
					</li><li class="listitem">
						You have installed the <code class="literal">sssd-tools</code> package.
					</li><li class="listitem">
						You are able to detect your smart card reader and display the contents of your smart card. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_troubleshooting-authentication-with-smart-cards_managing-smart-card-authentication#proc_testing-smart-card-authentication_assembly_troubleshooting-authentication-with-smart-cards">Testing smart card access on the system</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify you can authenticate with your smart card using <code class="literal">su</code>:
					</p><pre class="screen white-space-pre white-space-pre">$ su - idmuser1 -c ‘su - idmuser1 -c whoami’
PIN for MyEID (sctest):
idmuser1</pre><p class="simpara">
						If you are not prompted for the smart card PIN, and either a password prompt or an authorization error are returned, check the SSSD logs. See <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html-single/configuring_authentication_and_authorization_in_rhel/index#assembly_troubleshooting-authentication-with-sssd-in-idm_configuring-authentication-and-authorization-in-rhel">Troubleshooting authentication with SSSD in IdM</a> for information about logging in SSSD. The following is an example of an authentication failure:
					</p><pre class="screen white-space-pre white-space-pre">$ su - idmuser1 -c ‘su - idmuser1 -c whoami’
PIN for MyEID (sctest):
su: Authentication failure</pre><p class="simpara">
						If the SSSD logs indicate an issue from the <code class="literal">krb5_child</code>, similar to the following, you may have an issue with your CA certificates. To troubleshoot issues with certificates, see <a class="link" href="#proc_verifying-that-idm-kerberos-kdc-can-use-pkinit-and-that-the-ca-certificates-are-correctly-located_assembly_troubleshooting-authentication-with-smart-cards" title="10.3. Verifying that IdM Kerberos KDC can use PKINIT and that the CA certificates are correctly located">Verifying that IdM Kerberos KDC can use Pkinit and that the CA certificates are correctly located</a>.
					</p><pre class="screen white-space-pre white-space-pre">[Pre-authentication failed: Failed to verify own certificate (depth 0): unable to get local issuer certificate: could not load the shared library]</pre><p class="simpara">
						If the SSSD logs indicate a timeout either from <code class="literal">p11_child</code> or <code class="literal">krb5_child</code>, you may need to increase the SSSD timeouts and try authenticating again with your smart card. See <a class="link" href="#proc_increasing-sssd-timeouts_assembly_troubleshooting-authentication-with-smart-cards" title="10.4. Increasing SSSD timeouts">Increasing SSSD timeouts</a> for details on how to increase the timeouts.
					</p></li><li class="listitem"><p class="simpara">
						Verify your GDM smart card authentication configuration is correct. A success message for PAM authentication should be returned as shown below:
					</p><pre class="screen white-space-pre white-space-pre"># sssctl user-checks -s gdm-smartcard "idmuser1" -a auth
user: idmuser1
action: auth
service: gdm-smartcard

SSSD nss user lookup result:
 - user name: idmuser1
 - user id: 603200210
 - group id: 603200210
 - gecos: idm user1
 - home directory: /home/idmuser1
 - shell: /bin/sh

SSSD InfoPipe user lookup result:
 - name: idmuser1
 - uidNumber: 603200210
 - gidNumber: 603200210
 - gecos: idm user1
 - homeDirectory: /home/idmuser1
 - loginShell: /bin/sh

testing pam_authenticate

PIN for MyEID (sctest)
<span class="strong strong"><strong>pam_authenticate for user [idmuser1]: Success</strong></span>

PAM Environment:
 - PKCS11_LOGIN_TOKEN_NAME=MyEID (sctest)
 - KRB5CCNAME=KCM:</pre><p class="simpara">
						If an authentication error, similar to the following, is returned, check the SSSD logs to try and determine what is causing the issue. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_authentication_and_authorization_in_rhel/assembly_troubleshooting-authentication-with-sssd-in-idm_restricting-domains-for-pam-services-using-sssd">Troubleshooting authentication with SSSD in IdM</a> for information about logging in SSSD.
					</p><pre class="screen white-space-pre white-space-pre">pam_authenticate for user [idmuser1]: Authentication failure

PAM Environment:
 - no env -</pre><p class="simpara">
						If PAM authentication continues to fail, clear your cache and run the command again.
					</p><pre class="screen white-space-pre white-space-pre"># sssctl cache-remove
SSSD must not be running. Stop SSSD now? (yes/no) [yes] yes
Creating backup of local data…
Removing cache files…
SSSD needs to be running. Start SSSD now? (yes/no) [yes] yes</pre></li></ol></div></section><section class="section" id="proc_verifying-that-idm-kerberos-kdc-can-use-pkinit-and-that-the-ca-certificates-are-correctly-located_assembly_troubleshooting-authentication-with-smart-cards"><div class="titlepage"><div><div><h3 class="title">10.3. Verifying that IdM Kerberos KDC can use PKINIT and that the CA certificates are correctly located</h3></div></div></div><p class="_abstract _abstract">
				Follow this procedure to verify that IdM Kerberos KDC can use PKINIT and also describes how to verify your CA certificates are correctly located.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have installed and configured your IdM Server and client for use with smart cards.
					</li><li class="listitem">
						You are able to detect your smart card reader and display the contents of your smart card. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_troubleshooting-authentication-with-smart-cards_managing-smart-card-authentication#proc_testing-smart-card-authentication_assembly_troubleshooting-authentication-with-smart-cards">Testing smart card access on the system</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Run the <code class="literal">kinit</code> utility to authenticate as the <code class="literal">idmuser1</code> with the certificate stored on your smart card:
					</p><pre class="screen white-space-pre white-space-pre">$ kinit -X X509_user_identity=PKCS11: idmuser1
MyEID (sctest)                   PIN:</pre></li><li class="listitem">
						Enter your smart card PIN. If you are not prompted for your PIN, check that you can detect your smart card reader and display the contents of your smart card. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_troubleshooting-authentication-with-smart-cards_managing-smart-card-authentication#proc_testing-smart-card-authentication_assembly_troubleshooting-authentication-with-smart-cards">Testing smart card authentication</a>.
					</li><li class="listitem"><p class="simpara">
						If your PIN is accepted and you are then prompted for your password, you might be missing your CA signing certificate.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Verify the CA chain is listed in the default certificate bundle file using <code class="literal">openssl</code> commands:
							</p><pre class="screen white-space-pre white-space-pre">$ openssl crl2pkcs7 -nocrl -certfile /var/lib/ipa-client/pki/ca-bundle.pem | openssl pkcs7 -print_certs -noout
subject=O = IDM.EXAMPLE.COM, CN = Certificate Authority

issuer=O = IDM.EXAMPLE.COM, CN = Certificate Authority</pre></li><li class="listitem"><p class="simpara">
								Verify the validity of your certificates:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
										Find the user authentication certificate ID for <code class="literal">idmuser1</code>:
									</p><pre class="screen white-space-pre white-space-pre">$ pkcs11-tool --list-objects --login
[...]
Certificate Object; type = X.509 cert
  label:      Certificate
  subject:    DN: O=IDM.EXAMPLE.COM, CN=idmuser1
 <span class="strong strong"><strong>ID: 01</strong></span></pre></li><li class="listitem"><p class="simpara">
										Read the user certificate information from the smart card in DER format:
									</p><pre class="screen white-space-pre white-space-pre">$ pkcs11-tool --read-object --id 01 --type cert --output-file cert.der
Using slot 0 with a present token (0x0)</pre></li><li class="listitem"><p class="simpara">
										Convert the DER certificate to PEM format:
									</p><pre class="screen white-space-pre white-space-pre">$ openssl x509 -in cert.der -inform DER -out cert.pem -outform PEM</pre></li><li class="listitem"><p class="simpara">
										Verify the certificate has valid issuer signatures up to the CA:
									</p><pre class="screen white-space-pre white-space-pre">$ openssl verify -CAfile /var/lib/ipa-client/pki/ca-bundle.pem &lt;path&gt;/cert.pem
<span class="strong strong"><strong>cert.pem: OK</strong></span></pre></li></ol></div></li></ol></div></li><li class="listitem"><p class="simpara">
						If your smart card contains several certificates, <code class="literal">kinit</code> might fail to choose the correct certificate for authentication. In this case, you need to specify the certificate ID as an argument to the <code class="literal">kinit</code> command using the <code class="literal">certid=&lt;ID&gt;</code> option.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Check how many certificates are stored on the smart card and get the certificate ID for the one you are using:
							</p><pre class="screen white-space-pre white-space-pre">$ pkcs11-tool --list-objects --type cert --login
Using slot 0 with a present token (0x0)
Logging in to "MyEID (sctest)".
Please enter User PIN:
Certificate Object; type = X.509 cert
  label:      Certificate
  subject:    DN: O=IDM.EXAMPLE.COM, CN=idmuser1
  ID:         01
Certificate Object; type = X.509 cert
  label:      Second certificate
  subject:    DN: O=IDM.EXAMPLE.COM, CN=ipauser1
  ID:         02</pre></li><li class="listitem"><p class="simpara">
								Run <code class="literal">kinit</code> with certificate ID 01:
							</p><pre class="screen white-space-pre white-space-pre">$ kinit -X kinit -X X509_user_identity=PKCS11:certid=01 idmuser1
MyEID (sctest)                   PIN:</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Run <code class="literal">klist</code> to view the contents of the Kerberos credentials cache:
					</p><pre class="screen white-space-pre white-space-pre">$ klist
Ticket cache: KCM:0:11485
Default principal: idmuser1@EXAMPLE.COM

Valid starting       Expires              Service principal
10/04/2021 10:50:04  10/05/2021 10:49:55  krbtgt/EXAMPLE.COM@EXAMPLE.COM</pre></li><li class="listitem"><p class="simpara">
						Destroy your active Kerberos tickets once you have finished:
					</p><pre class="screen white-space-pre white-space-pre">$ kdestroy -A</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						See <code class="literal">kinit</code> man page on your system.
					</li><li class="listitem">
						See <code class="literal">kdestroy</code> man page on your system.
					</li></ul></div></section><section class="section" id="proc_increasing-sssd-timeouts_assembly_troubleshooting-authentication-with-smart-cards"><div class="titlepage"><div><div><h3 class="title">10.4. Increasing SSSD timeouts</h3></div></div></div><p class="_abstract _abstract">
				If you are having issues authenticating with a smart card, check the <code class="literal">krb5_child.log</code> and the <code class="literal">p11_child.log</code> file for timeout entries similar to the following:
			</p><p>
				<code class="literal">krb5_child: Timeout for child [9607] reached…​..consider increasing value of krb5_auth_timeout.</code>
			</p><p>
				If there is a timeout entry in the log file, try increasing the SSSD timeouts as outlined in this procedure.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have configured your IdM Server and client for smart card authentication.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Open the <code class="literal">sssd.conf</code> file on the IdM client:
					</p><pre class="screen white-space-pre white-space-pre"># vim /etc/sssd/sssd.conf</pre></li><li class="listitem"><p class="simpara">
						In your domain section, for example <code class="literal">[domain/idm.example.com]</code>, add the following option:
					</p><pre class="screen white-space-pre white-space-pre">krb5_auth_timeout = 60</pre></li><li class="listitem"><p class="simpara">
						In the <code class="literal">[pam]</code> section, add the following:
					</p><pre class="screen white-space-pre white-space-pre">p11_child_timeout = 60</pre></li><li class="listitem"><p class="simpara">
						Clear the SSSD cache:
					</p><pre class="screen white-space-pre white-space-pre"># sssctl cache-remove
SSSD must not be running. Stop SSSD now? (yes/no) [yes] yes
Creating backup of local data…
Removing cache files…
SSSD needs to be running. Start SSSD now? (yes/no) [yes] yes</pre></li></ol></div><p>
				Once you have increased the timeouts, try authenticating again using your smart card. See <a class="link" href="#proc_testing-smart-card-authentication_assembly_troubleshooting-authentication-with-smart-cards" title="10.1. Testing smart card access on the system">Testing smart card authentication</a> for more details.
			</p></section><section class="section" id="assembly_troubleshooting-certificate-mapping-and-matching-rules_assembly_troubleshooting-authentication-with-smart-cards"><div class="titlepage"><div><div><h3 class="title">10.5. Troubleshooting certificate mapping and matching rules</h3></div></div></div><p class="_abstract _abstract">
				If you are having issues authenticating with a smart card, check that you have linked your smart card certificate correctly to a user. By default, a certificate is associated with a user when the user entry contains the full certificate as part of the <code class="literal">usercertificate</code> attribute. However, if you have defined certificate mapping rules, you may have changed how certificates are associated with users. To troubleshoot certificate mapping and matching rules, refer to the following sections:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#proc_checking-how-the-certificates-are-mapped-to-users_assembly_troubleshooting-certificate-mapping-and-matching-rules" title="10.5.1. Checking how the certificates are mapped to users">Checking how the certificates are mapped to users</a>
					</li><li class="listitem">
						<a class="link" href="#proc_checking-the-user-associated-with-a-smart-card-certificate_assembly_troubleshooting-certificate-mapping-and-matching-rules" title="10.5.2. Checking the user associated with a smart card certificate">Checking the user associated with a smart card certificate</a>
					</li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					If you are using your smart card to authenticate using SSH, you need to add the full certificate to the user entry in Identity Management (IdM). If you are not using your smart card to authenticate using SSH, you can add certificate mapping data using the <code class="literal">ipa user-add-certmapdata</code> command.
				</p></div></rh-alert><section class="section" id="proc_checking-how-the-certificates-are-mapped-to-users_assembly_troubleshooting-certificate-mapping-and-matching-rules"><div class="titlepage"><div><div><h4 class="title">10.5.1. Checking how the certificates are mapped to users</h4></div></div></div><p class="_abstract _abstract">
					By default, a certificate is associated with a user when the user entry contains the full certificate as part of the <code class="literal">usercertificate</code> attribute. However, if you have defined certificate mapping rules, you may have changed how certificates are associated with users. Follow this procedure to check your certificate mapping rules.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have installed and configured your Identity Management (IdM) server and client for use with smart cards.
						</li><li class="listitem">
							You are able to detect your smart card reader and display the contents of your smart card. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_troubleshooting-authentication-with-smart-cards_managing-smart-card-authentication#proc_testing-smart-card-authentication_assembly_troubleshooting-authentication-with-smart-cards">Testing smart card access on the system</a>.
						</li><li class="listitem">
							You have mapped your smart card certificate to an IdM user. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/con-idm-certmapdata_managing-smart-card-authentication">Certificate mapping rules for configuring authentication on smart cards</a>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Verify the certificate mapping rules currently configured for IdM:
						</p><pre class="literallayout"># ipa certmaprule-find
-------------------------------------------
1 Certificate Identity Mapping Rule matched
-------------------------------------------
  Rule name: smartcardrule
  Mapping rule: (ipacertmapdata=X509:&lt;I&gt;{issuer_dn!nss_x500}&lt;S&gt;{subject_dn!nss_x500})
  Matching rule: &lt;ISSUER&gt;CN=Certificate Authority,O=IDM.EXAMPLE.COM
  Enabled: TRUE
----------------------------
Number of entries returned 1
----------------------------</pre><p class="simpara">
							You can expect to see one of the following mapping rules defined:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">ipacertmapdata</code> indicates that the IdM user entry <code class="literal">certmapdata</code> attribute is used.
								</li><li class="listitem">
									<code class="literal">altSecurityIdentities</code> specifies that Active Directory’s user entry name mapping attribute is used.
								</li><li class="listitem">
									<code class="literal">userCertificate;binary=</code> indicates that the whole certificate in either IdM or AD is used.
								</li></ul></div><p class="simpara">
							You can define many matching options but some of the typically configured options are as follows:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">&lt;ISSUER&gt;CN=[…​]</code> specifies the issuer attribute of the certificate being used is checked to make sure it matches this.
								</li><li class="listitem">
									<code class="literal">&lt;SUBJECT&gt;.*,DC=MY,DC=DOMAIN</code> indicates the subject of the certificate is checked.
								</li></ul></div></li><li class="listitem"><p class="simpara">
							Enable System Security Services Daemon (SSSD) logging by adding <code class="literal">debug_level = 9</code> to the <code class="literal">/etc/sssd/sssd.conf</code> file on the IdM server:
						</p><pre class="literallayout">[domain/idm.example.com]
...
<span class="strong strong"><strong>debug_level = 9</strong></span></pre></li><li class="listitem"><p class="simpara">
							Restart SSSD:
						</p><pre class="literallayout"># systemctl restart sssd</pre></li><li class="listitem"><p class="simpara">
							You should see the following entry in the <code class="literal">/var/log/sssd/sssd_idm.example.com.log</code> file if the mapping is read correctly:
						</p><pre class="literallayout">[be[idm.example.com]] [sdap_setup_certmap] (0x4000): Trying to add rule [smartcardrule][-1][&lt;ISSUER&gt;CN=Certificate Authority,O=IDM.EXAMPLE.COM][(|(userCertificate;binary={cert!bin})(ipacertmapdata=X509:&lt;I&gt;{issuer_dn!nss_x500}&lt;S&gt;{subject_dn!nss_x500}))].</pre></li><li class="listitem"><p class="simpara">
							If your mapping rule contains an invalid syntax, an entry similar to the following can be seen in the log file:
						</p><pre class="literallayout">[be[idm.example.com]]] [sss_certmap_init] (0x0040): sss_certmap initialized.
[be[idm.example.com]]] [ipa_certmap_parse_results] (0x4000): Trying to add rule [smartcardrule][-1][&lt;ISSUER&gt;CN=Certificate Authority,O=IDM.EXAMPLE.COM][(ipacertmapdata=X509:&lt;I&gt;{issuer_dn!x509}&lt;S&gt;{subject_dn})].
[be[idm.example.com]]] [parse_template] (0x0040): Parse template invalid.
[be[idm.example.com]]] [parse_ldap_mapping_rule] (0x0040): Failed to add template.
[be[idm.example.com]]] [parse_mapping_rule] (0x0040): Failed to parse LDAP mapping rule.
[be[idm.example.com]]] [ipa_certmap_parse_results] (0x0020): sss_certmap_add_rule failed for rule [smartcardrule], skipping. Please check for typos and if rule syntax is supported.
[be[idm.example.com]]] [ipa_subdomains_certmap_done] (0x0040): Unable to parse certmap results [22]: Invalid argument
[be[idm.example.com]]] [ipa_subdomains_refresh_certmap_done] (0x0020): Failed to read certificate mapping rules [22]: Invalid argument</pre></li><li class="listitem"><p class="simpara">
							Check your mapping rule syntax.
						</p><pre class="literallayout"># ipa certmaprule-show smartcardrule
  Rule name: smartcardrule
  Mapping rule: (|(userCertificate;binary={cert!bin})(ipacertmapdata=X509:&lt;I&gt;{issuer_dn!nss_x500}&lt;S&gt;{subject_dn!nss_x500}))
  Matching rule: &lt;ISSUER&gt;CN=Certificate Authority,O=IDM.EXAMPLE.COM
  Domain name: ipa.test
  Enabled: TRUE</pre></li><li class="listitem"><p class="simpara">
							If required, modify your certificate mapping rule:
						</p><pre class="literallayout"># ipa certmaprule-mod smartcardrule --maprule '(ipacertmapdata=X509:&lt;I&gt;{issuer_dn!nss_x500}&lt;S&gt;{subject_dn!nss_x500})'</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							See the <code class="literal">sss-certmap</code> man page on your system.
						</li></ul></div></section><section class="section" id="proc_checking-the-user-associated-with-a-smart-card-certificate_assembly_troubleshooting-certificate-mapping-and-matching-rules"><div class="titlepage"><div><div><h4 class="title">10.5.2. Checking the user associated with a smart card certificate</h4></div></div></div><p class="_abstract _abstract">
					If you are having issues authenticating with a smart card, verify the correct user is associated with your smart card certificate.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have installed and configured your Identity Management (IdM) server and client for use with smart cards.
						</li><li class="listitem">
							You are able to detect your smart card reader and display the contents of your smart card. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_troubleshooting-authentication-with-smart-cards_managing-smart-card-authentication#proc_testing-smart-card-authentication_assembly_troubleshooting-authentication-with-smart-cards">Testing smart card access on the system</a>.
						</li><li class="listitem">
							You have mapped your smart card certificate to an IdM user. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/con-idm-certmapdata_managing-smart-card-authentication">Certificate mapping rules for configuring authentication on smart cards</a>.
						</li><li class="listitem">
							You have a copy of the certificate from your smart card in PEM format, for example, <code class="literal">cert.pem</code>.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Verify the user is associated with your smart card certificate:
						</p><pre class="literallayout"># ipa certmap-match cert.pem
--------------
1 user matched
--------------
  Domain: IDM.EXAMPLE.COM
  User logins: idmuser1
----------------------------
Number of entries returned 1
----------------------------</pre><p class="simpara">
							If the user or domain are not correct, check how your certificates are mapped to users. See <a class="link" href="#proc_checking-how-the-certificates-are-mapped-to-users_assembly_troubleshooting-certificate-mapping-and-matching-rules" title="10.5.1. Checking how the certificates are mapped to users">Checking how the certificates are mapped to users</a>.
						</p></li><li class="listitem"><p class="simpara">
							Check if the user entry contains the certificate:
						</p><pre class="literallayout"># ipa user-show idmuser1
  User login: idmuser1
[...]
Certificate:MIIEejCCAuKgAwIBAgIBCzANBgkqhkiG9w0BAQsFADAzMREwDwYDVQQKDAhJUEEuVEVTVDEeMBwGA1UEAwwVQ2VydGlmaWNhdGUgQXV0aG9yaXR5MB4XD</pre></li><li class="listitem"><p class="simpara">
							If your user entry does not contain the certificate, add your base-64 encoded certificate to the user entry:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Create an environment variable containing the certificate with the header and footer removed and concatenated into a single line, which is the format expected by the <code class="literal">ipa user-add-cert</code> command:
								</p><pre class="literallayout">$ export CERT=`openssl x509 -outform der -in idmuser1.crt | base64 -w0 -`</pre><p class="simpara">
									Note that the certificate in the <code class="literal">idmuser1.crt</code> file must be in PEM format.
								</p></li><li class="listitem"><p class="simpara">
									Add the certificate to the profile of <code class="literal">idmuser1</code> using the <code class="literal">ipa user-add-cert</code> command:
								</p><pre class="literallayout">$ ipa user-add-cert idmuser1 --certificate=$CERT</pre></li><li class="listitem"><p class="simpara">
									Clear the System Security Services Daemon (SSSD) cache.
								</p><pre class="literallayout"># sssctl cache-remove
SSSD must not be running. Stop SSSD now? (yes/no) [yes] yes
Creating backup of local data…
Removing cache files…
SSSD needs to be running. Start SSSD now? (yes/no) [yes] yes</pre></li></ol></div></li><li class="listitem">
							Run <code class="literal">ipa certmap-match</code> again to confirm the user is associated with your smart card certificate.
						</li></ol></div></section></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm140447723494704"><h2 class="legalnotice">Legal Notice</h2><div class="para">
		Copyright <span class="trademark"><!--Empty--></span>© 2024 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div></body></section><!----></div></article><aside id="layout" class="span-xs-12 span-sm-2 span-md-2 content-format-selectors" aria-label="Select page format" data-v-8589d091><div class="sticky-top page-layout-options" data-v-8589d091><label for="page-format" data-v-8589d091>Format</label><select id="page-format" class="page-format-dropdown" data-v-8589d091><option class="page-type" value="html" data-v-8589d091>Multi-page</option><option selected class="page-type" value="html-single" data-v-8589d091>Single-page</option><option class="page-type" value="pdf" data-v-8589d091>View full doc as PDF</option></select></div><!----></aside></div><div class="btn-container hidden" data-v-8589d091><pf-button class="top-scroll-btn" icon="angle-up" icon-set="fas" icon-position="right" data-v-8589d091>Back to top</pf-button></div><!--]--><!--]--></main><rh-footer data-analytics-region="page-footer" data-v-97dd2752><a slot="logo" href="/en" data-analytics-category="Footer" data-analytics-text="Logo" data-v-97dd2752><img alt="Red Hat logo" src="/Logo-Red_Hat-Documentation-A-Reverse-RGB.svg" loading="lazy" width="222" height="40" data-v-97dd2752></a><rh-footer-social-link slot="social-links" icon="github" data-v-97dd2752><a href="https://github.com/redhat-documentation" data-analytics-region="social-links-exit" data-analytics-category="Footer|social-links" data-analytics-text="LinkedIn" data-v-97dd2752>Github</a></rh-footer-social-link><rh-footer-social-link slot="social-links" icon="reddit" data-v-97dd2752><a href="https://www.reddit.com/r/redhat/" data-analytics-region="social-links-exit" data-analytics-category="Footer|social-links" data-analytics-text="YouTube" data-v-97dd2752>Reddit</a></rh-footer-social-link><rh-footer-social-link slot="social-links" icon="youtube" data-v-97dd2752><a href="https://www.youtube.com/@redhat" data-analytics-region="social-links-exit" data-analytics-category="Footer|social-links" data-analytics-text="Facebook" data-v-97dd2752>Youtube</a></rh-footer-social-link><rh-footer-social-link slot="social-links" icon="twitter" data-v-97dd2752><a href="https://twitter.com/RedHat" data-analytics-region="social-links-exit" data-analytics-category="Footer|social-links" data-analytics-text="Twitter" data-v-97dd2752>Twitter</a></rh-footer-social-link><h3 slot="links" data-analytics-text="Learn" data-v-97dd2752>Learn</h3><ul slot="links" data-v-97dd2752><li data-v-97dd2752><a href="https://developers.redhat.com/learn" data-analytics-category="Footer|Learn" data-analytics-text="Developer resources" data-v-97dd2752>Developer resources</a></li><li data-v-97dd2752><a href="https://cloud.redhat.com/learn" data-analytics-category="Footer|Learn" data-analytics-text="Cloud learning hub" data-v-97dd2752>Cloud learning hub</a></li><li data-v-97dd2752><a href="https://www.redhat.com/en/interactive-labs" data-analytics-category="Footer|Learn" data-analytics-text="Interactive labs" data-v-97dd2752>Interactive labs</a></li><li data-v-97dd2752><a href="https://www.redhat.com/services/training-and-certification" data-analytics-category="Footer|Learn" data-analytics-text="Training and certification" data-v-97dd2752>Training and certification</a></li><li data-v-97dd2752><a href="https://access.redhat.com/support" data-analytics-category="Footer|Learn" data-analytics-text="Customer support" data-v-97dd2752>Customer support</a></li><li data-v-97dd2752><a href="/products" data-analytics-category="Footer|Learn" data-analytics-text="See all documentation" data-v-97dd2752>See all documentation</a></li></ul><h3 slot="links" data-analytics-text="Try buy sell" data-v-97dd2752>Try, buy, &amp; sell</h3><ul slot="links" data-v-97dd2752><li data-v-97dd2752><a href="https://redhat.com/en/products/trials" data-analytics-category="Footer|Try buy sell" data-analytics-text="Product trial center" data-v-97dd2752>Product trial center</a></li><li data-v-97dd2752><a href="https://marketplace.redhat.com" data-analytics-category="Footer|Try buy sell" data-analytics-text="Red Hat Marketplace" data-v-97dd2752>Red Hat Marketplace</a></li><li data-v-97dd2752><a href="https://catalog.redhat.com/" data-analytics-category="Footer|Try buy sell" data-analytics-text="Red Hat Ecosystem Catalog" data-v-97dd2752>Red Hat Ecosystem Catalog</a></li><li data-v-97dd2752><a href="https://www.redhat.com/en/store" data-analytics-category="Footer|Try buy sell" data-analytics-text="Red Hat Store" data-v-97dd2752>Red Hat Store</a></li><li data-v-97dd2752><a href="https://www.redhat.com/about/japan-buy" data-analytics-category="Footer|Try buy sell" data-analytics-text="Buy online (Japan)" data-v-97dd2752>Buy online (Japan)</a></li></ul><h3 slot="links" data-analytics-text="Communities" data-v-97dd2752>Communities</h3><ul slot="links" data-v-97dd2752><li data-v-97dd2752><a href="https://access.redhat.com/community" data-analytics-category="Footer|Communities" data-analytics-text="Customer Portal Community" data-v-97dd2752>Customer Portal Community</a></li><li data-v-97dd2752><a href="https://www.redhat.com/events" data-analytics-category="Footer|Communities" data-analytics-text="Events" data-v-97dd2752>Events</a></li><li data-v-97dd2752><a href="https://www.redhat.com/about/our-community-contributions" data-analytics-category="Footer|Communities" data-analytics-text="How we contribute" data-v-97dd2752>How we contribute</a></li></ul><rh-footer-block slot="main-secondary" data-v-97dd2752><h3 slot="header" data-analytics-text="About Red Hat Documentation" data-v-97dd2752>About Red Hat Documentation</h3><p data-v-97dd2752>We help Red Hat users innovate and achieve their goals with our products and services with content they can trust.</p></rh-footer-block><rh-footer-block slot="main-secondary" data-v-97dd2752><h3 slot="header" data-analytics-text="Making open source more inclusive" data-v-97dd2752>Making open source more inclusive</h3><p data-v-97dd2752>Red Hat is committed to replacing problematic language in our code, documentation, and web properties. For more details, see the <a href=" https://www.redhat.com/en/blog/making-open-source-more-inclusive-eradicating-problematic-language" data-analytics-category="Footer|Making open source more inclusive" data-analytics-text="Red Hat Blog" data-v-97dd2752>Red Hat Blog</a>.</p></rh-footer-block><rh-footer-block slot="main-secondary" data-v-97dd2752><h3 slot="header" data-analytics-text="About Red Hat" data-v-97dd2752>About Red Hat</h3><p data-v-97dd2752>We deliver hardened solutions that make it easier for enterprises to work across platforms and environments, from the core datacenter to the network edge.</p></rh-footer-block><rh-footer-universal slot="universal" data-v-97dd2752><h3 slot="links-primary" data-analytics-text="Red Hat legal and privacy links" hidden data-v-97dd2752>Red Hat legal and privacy links</h3><ul slot="links-primary" data-analytics-region="page-footer-bottom-primary" data-v-97dd2752><li data-v-97dd2752><a href="https://redhat.com/en/about/company" data-analytics-category="Footer|Corporate" data-analytics-text="About Red Hat" data-v-97dd2752>About Red Hat</a></li><li data-v-97dd2752><a href="https://redhat.com/en/jobs" data-analytics-category="Footer|Corporate" data-analytics-text="Jobs" data-v-97dd2752>Jobs</a></li><li data-v-97dd2752><a href="https://redhat.com/en/events" data-analytics-category="Footer|Corporate" data-analytics-text="Events" data-v-97dd2752>Events</a></li><li data-v-97dd2752><a href="https://redhat.com/en/about/office-locations" data-analytics-category="Footer|Corporate" data-analytics-text="Locations" data-v-97dd2752>Locations</a></li><li data-v-97dd2752><a href="https://redhat.com/en/contact" data-analytics-category="Footer|Corporate" data-analytics-text="Contact Red Hat" data-v-97dd2752>Contact Red Hat</a></li><li data-v-97dd2752><a href="https://redhat.com/en/blog" data-analytics-category="Footer|Corporate" data-analytics-text="Red Hat Blog" data-v-97dd2752>Red Hat Blog</a></li><li data-v-97dd2752><a href="https://redhat.com/en/about/our-culture/diversity-equity-inclusion" data-analytics-category="Footer|Corporate" data-analytics-text="Diversity equity and inclusion" data-v-97dd2752>Diversity, equity, and inclusion</a></li><li data-v-97dd2752><a href="https://coolstuff.redhat.com/" data-analytics-category="Footer|Corporate" data-analytics-text="Cool Stuff Store" data-v-97dd2752>Cool Stuff Store</a></li><li data-v-97dd2752><a href="https://www.redhat.com/en/summit" data-analytics-category="Footer|Corporate" data-analytics-text="Red Hat Summit" data-v-97dd2752>Red Hat Summit</a></li></ul><span data-v-97dd2752 data-v-5f538988></span><rh-footer-copyright slot="links-secondary" data-v-97dd2752>© 2024 Red Hat, Inc.</rh-footer-copyright><h3 slot="links-secondary" data-analytics-text="Red Hat legal and privacy links" hidden data-v-97dd2752>Red Hat legal and privacy links</h3><ul slot="links-secondary" data-analytics-region="page-footer-bottom-secondary" data-v-97dd2752><li data-v-97dd2752><a href="https://redhat.com/en/about/privacy-policy" data-analytics-category="Footer|Red Hat legal and privacy links" data-analytics-text="Privacy statement" data-v-97dd2752>Privacy statement</a></li><li data-v-97dd2752><a href="https://redhat.com/en/about/terms-use" data-analytics-category="Footer|Red Hat legal and privacy links" data-analytics-text="Terms of use" data-v-97dd2752>Terms of use</a></li><li data-v-97dd2752><a href="https://redhat.com/en/about/all-policies-guidelines" data-analytics-category="Footer|Red Hat legal and privacy links" data-analytics-text="All policies and guidelines" data-v-97dd2752>All policies and guidelines</a></li><li data-v-97dd2752><a href="https://redhat.com/en/about/digital-accessibility" data-analytics-category="Footer|Red Hat legal and privacy links" data-analytics-text="Digital accessibility" class="active" data-v-97dd2752>Digital accessibility</a></li><li data-v-97dd2752><span id="teconsent" data-v-97dd2752></span></li></ul></rh-footer-universal></rh-footer><div id="consent_blackbar" style="position:fixed;bottom:0;width:100%;z-index:5;padding:10px;"></div><!--]--><!--]--></div><div id="teleports"></div><script type="application/json" id="__NUXT_DATA__" data-ssr="true">[["ShallowReactive",1],{"data":2,"state":469,"once":472,"_errors":473,"serverRendered":15,"path":475},["ShallowReactive",3],{"s8LoCEfG4A":4,"uUstF4AIyn":10,"Pn02PlJOas":397,"rFVLKcOK8e":468},[5,6,7,8,9],"fr-fr","en-us","zh-cn","ko-kr","ja-jp",{"name":11,"html":12,"type":-1,"toc":13,"breadcrumbs":318,"error":18,"title":326,"productName":320,"productVersions":335,"pagination":364,"redirect":378,"canonicalLinks":379,"openShiftProducts":381,"tocFromVolume":-1,"jumpLinks":396},"Managing smart card authentication","\u003Cbody>\u003Cdiv xml:lang=\"en-US\" class=\"book\" id=\"idm140447723551824\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv class=\"producttitle\">\u003Cspan class=\"productname\">Red Hat Enterprise Linux\u003C/span> \u003Cspan class=\"productnumber\">9\u003C/span>\u003C/div>\u003Cdiv>\u003Ch3 class=\"subtitle\">Configuring and using smart card authentication\u003C/h3>\u003C/div>\u003Cdiv>\u003Cdiv xml:lang=\"en-US\" class=\"authorgroup\">\u003Cspan class=\"orgname\">Red Hat\u003C/span> \u003Cspan class=\"orgdiv\">Customer Content Services\u003C/span>\u003C/div>\u003C/div>\u003Cdiv>\u003Ca href=\"#idm140447723494704\">Legal Notice\u003C/a>\u003C/div>\u003Cdiv>\u003Cdiv class=\"abstract\">\u003Cp class=\"title\">\u003Cstrong>Abstract\u003C/strong>\u003C/p>\u003Cdiv class=\"para\">\n\t\t\t\tWith Red Hat Identity Management (IdM), you can store credentials in the form of a private key and a certificate on a smart card. You can then use this smart card instead of passwords to authenticate to services. Administrators can configure mapping rules to reduce the administrative overhead.\n\t\t\t\u003C/div>\u003C/div>\u003C/div>\u003C/div>\u003Chr/>\u003C/div>\u003Csection class=\"preface\" id=\"proc_providing-feedback-on-red-hat-documentation_managing-smart-card-authentication\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Providing feedback on Red Hat documentation\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tWe appreciate your feedback on our documentation. Let us know how we can improve it.\n\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Submitting feedback through Jira (account required)\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\tLog in to the \u003Ca class=\"link\" href=\"https://issues.redhat.com/projects/RHELDOCS/issues\">Jira\u003C/a> website.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Create\u003C/strong>\u003C/span> in the top navigation bar\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tEnter a descriptive title in the \u003Cspan class=\"strong strong\">\u003Cstrong>Summary\u003C/strong>\u003C/span> field.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tEnter your suggestion for improvement in the \u003Cspan class=\"strong strong\">\u003Cstrong>Description\u003C/strong>\u003C/span> field. Include links to the relevant parts of the documentation.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Create\u003C/strong>\u003C/span> at the bottom of the dialogue.\n\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_understanding-smart-card-authentication_managing-smart-card-authentication\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 1. Understanding smart card authentication\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tAuthentication based on smart cards is an alternative to passwords. You can store user credentials on a smart card in the form of a private key and a certificate, and special software and hardware is used to access them. Place the smart card into a reader or a USB port and supply the PIN code for the smart card instead of providing your password.\n\t\t\u003C/p>\u003Cp>\n\t\t\tThis section describes what a smart card is and how smart card authentication works. It describes the tools that you can use to read and manipulate smart card content. It also provides sample use cases and describes the setup of both the IdM server and IdM client for smart card authentication.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tIf you want to start to use smart card authentication, see the hardware requirements: \u003Ca class=\"link\" href=\"https://access.redhat.com/articles/4253861\">Smart Card support in RHEL9\u003C/a>.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"con_what-is-a-smart-card_assembly_understanding-smart-card-authentication\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.1. What is a smart card\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tA smart card is a physical device, usually a plastic card with a microprocessor, that can provide personal authentication using certificates stored on the card. Personal authentication means that you can use smart cards in the same way as user passwords.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can store user credentials on the smart card in the form of a private key and a certificate, and special software and hardware is used to access them. You place the smart card into a reader or a USB socket and supply the PIN code for the smart card instead of providing your password.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"con_what-is-smart-card-authentication_assembly_understanding-smart-card-authentication\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.2. What is smart card authentication\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tPublic-key based authentication and certificate based authentication are two widely used alternatives to password based authentication. Your identity is confirmed by using public and private keys instead of your password. A certificate is an electronic document used to identify an individual, a server, a company, or other entity and to associate that identity with a public key. Like a driver’s license or passport, a certificate provides generally recognized proof of a person’s identity. Public-key cryptography uses certificates to address the problem of impersonation.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIn the case of smart card authentication, your user credentials, that is your public and private keys and certificate, are stored on a smart card and can only be used after the smart card is inserted into the reader and a PIN is provided. As you need to possess a physical device, the smart card, and know its PIN, smart card authentication is considered as a type of two factor authentication.\n\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"examples_of_smart_card_authentication_in_idm\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">1.2.1. Examples of smart card authentication in IdM\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\tThe following examples describe two simple scenarios on how you can use smart cards in IdM.\n\t\t\t\t\u003C/p>\u003Csection class=\"section\" id=\"logging_in_to_your_system_with_a_smart_card\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch5 class=\"title\">1.2.1.1. Logging in to your system with a smart card\u003C/h5>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\t\tYou can use a smart card to authenticate to a RHEL system as a local user. If your system is configured to enforce smart card login, you are prompted to insert your smart card and enter its PIN and, if that fails, you cannot log in to your system. Alternatively, you can configure your system to authenticate using either smart card authentication or your user name and password. In this case, if you do not have your smart card inserted, you are prompted for your user name and password.\n\t\t\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"logging_in_to_gdm_with_lock_on_removal\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch5 class=\"title\">1.2.1.2. Logging in to GDM with lock on removal\u003C/h5>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\t\t\tYou can activate the lock on removal function if you have configured smart card authentication on your RHEL system. If you are logged in to the GNOME Display Manager (GDM) and you remove your smart card, screen lock is enabled and you must reinsert your smart card and authenticate with the PIN to unlock the screen. You cannot use your user name and password to authenticate.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tIf you are logged in to GDM and you remove your smart card, screen lock is enabled and you must reinsert your smart card and authenticate with the PIN to unlock the screen.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003C/section>\u003C/section>\u003Csection class=\"section\" id=\"con_smart-card-authentication-options-in-rhel_assembly_understanding-smart-card-authentication\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.3. Smart card authentication options in RHEL\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can configure how you want smart card authentication to work in a particular Identity Management (IdM) client by using the \u003Ccode class=\"literal\">authselect\u003C/code> command, \u003Ccode class=\"literal\">authselect enable-feature &lt;smartcardoption&gt;\u003C/code>. The following smart card options are available:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">with-smartcard\u003C/code>: Users can authenticate with the user name and password or with their smart card.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">with-smartcard-required\u003C/code>: Users can authenticate with their smart cards, and password authentication is disabled. You cannot access the system without your smart card. Once you have authenticated with your smart card, you can stay logged in even if your smart card is removed from its reader.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">with-smartcard-required\u003C/code> option only enforces exclusive smart card authentication for login services, such as \u003Ccode class=\"literal\">login\u003C/code>, \u003Ccode class=\"literal\">gdm\u003C/code>, \u003Ccode class=\"literal\">xdm\u003C/code>, \u003Ccode class=\"literal\">xscreensaver\u003C/code>, and \u003Ccode class=\"literal\">gnome-screensaver\u003C/code>. For other services, such as \u003Ccode class=\"literal\">su\u003C/code> or \u003Ccode class=\"literal\">sudo\u003C/code> for switching users, smart card authentication is not enforced and if your smart card is not inserted, you are prompted for a password.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">with-smartcard-lock-on-removal\u003C/code>: Users can authenticate with their smart card. However, if you remove your smart card from its reader, you are automatically locked out of the system. You cannot use password authentication.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">with-smartcard-lock-on-removal\u003C/code> option only works on systems with the GNOME desktop environment. If you are using a system that is \u003Ccode class=\"literal\">tty\u003C/code> or console based and you remove your smart card from its reader, you are not automatically locked out of the system.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tFor more information, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-smart-cards-using-authselect_managing-smart-card-authentication\">Configuring smart cards using authselect\u003C/a>.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"con_tools-for-managing-smart-cards-and-their-contents_assembly_understanding-smart-card-authentication\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.4. Tools for managing smart cards and their contents\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can use many different tools to manage the keys and certificates stored on your smart cards. You can use these tools to do the following:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tList available smart card readers connected to a system.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tList available smart cards and view their contents.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tManipulate the smart card content, that is the keys and certificates.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThere are many tools that provide similar functionality but some work at different layers of your system. Smart cards are managed on multiple layers by multiple components. On the lower level, the operating system communicates with the smart card reader using the PC/SC protocol, and this communication is handled by the pcsc-lite daemon. The daemon forwards the commands received to the smart card reader typically over USB, which is handled by low-level CCID driver. The PC/SC low level communication is rarely seen on the application level. The main method in RHEL for applications to access smart cards is via a higher level application programming interface (API), the OASIS PKCS#11 API, which abstracts the card communication to specific commands that operate on cryptographic objects, for example, private keys. Smart card vendors provide a shared module, such as an \u003Ccode class=\"literal\">.so\u003C/code> file, which follows the PKCS#11 API and serves as a driver for the smart card.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can use the following tools to manage your smart cards and their contents:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpenSC tools: work with the drivers implemented in \u003Ccode class=\"literal\">opensc\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\topensc-tool: perform smart card operations.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tpkcs15-tool: manage the PKCS#15 data structures on smart cards, such as listing and reading PINs, keys, and certificates stored on the token.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tpkcs11-tool: manage the PKCS#11 data objects on smart cards, such as listing and reading PINs, keys, and certificates stored on the token.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tGnuTLS utils: an API for applications to enable secure communication over the network transport layer, as well as interfaces to access X.509, PKCS#12, OpenPGP, and other structures.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tp11tool: perform operations on PKCS#11 smart cards and security modules.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tcerttool: parse and generate X.509 certificates, requests, and private keys.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNetwork Security Services (NSS) Tools: a set of libraries designed to support the cross-platform development of security-enabled client and server applications. Applications built with NSS can support SSL v3, TLS, PKCS #5, PKCS #7, PKCS #11, PKCS #12, S/MIME, X.509 v3 certificates, and other security standards.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tmodutil: manage PKCS#11 module information with the security module database.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tcertutil: manage keys and certificates in both NSS databases and other NSS tokens.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tFor more information about using these tools to troubleshoot issues with authenticating using a smart card, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_troubleshooting-authentication-with-smart-cards_managing-smart-card-authentication\">Troubleshooting authentication with smart cards\u003C/a>.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">opensc-tool\u003C/code>, \u003Ccode class=\"literal\">pkcs15-tool\u003C/code>, and \u003Ccode class=\"literal\">pkcs11-tool\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">p11tool\u003C/code> and \u003Ccode class=\"literal\">certtool\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">modutil\u003C/code> and \u003Ccode class=\"literal\">certutil\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"con_certificates-and-smart-card-authentication_assembly_understanding-smart-card-authentication\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.5. Certificates and smart card authentication\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tIf you use Identity Management (IdM) or Active Directory (AD) to manage identity stores, authentication, policies, and authorization policies in your domain, the certificates used for authentication are generated by IdM or AD, respectively. You can also use certificates provided by an external certificate authority and in this case you must configure Active Directory or IdM to accept certificates from the external provider. If the user is not part of a domain, you can use a certificate generated by a local certificate authority. For details, refer to the following sections:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication\">Configuring Identity Management for smart card authentication\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication\">Configuring certificates issued by ADCS for smart card authentication in IdM\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/managing-externally-signed-certificates-for-idm-users-hosts-and-services_managing-certificates-in-idm\">Managing externally signed certificates for IdM users, hosts, and services\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-and-importing-local-certificates-to-a-smart-card_managing-smart-card-authentication\">Configuring and importing local certificates to a smart card\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tFor a full list of certificates eligible for smart card authentication, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-smart-cards-using-authselect_managing-smart-card-authentication#certificates-eligible-for-smart-cards_configuring-smart-cards-using-authselect\">Certificates eligible for smart cards\u003C/a>.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"con_required-steps-for-smart-card-authentication-in-idm_assembly_understanding-smart-card-authentication\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.6. Required steps for smart card authentication in IdM\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou must ensure the following steps have been followed before you can authenticate with a smart card in Identity Management (IdM):\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tConfigure your IdM server for smart card authentication. See \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#conf-idm-server-for-smart-card-auth_configuring-idm-for-smart-card-auth\">Configuring the IdM server for smart card authentication\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tConfigure your IdM client for smart card authentication. See \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#conf-idm-client-for-smart-card-auth_configuring-idm-for-smart-card-auth\">Configuring the IdM client for smart card authentication\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAdd the certificate to the user entry in IdM. See \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#proc-add-cert-idm-user-webui_configuring-idm-for-smart-card-auth\">Adding a certificate to a user entry in the IdM Web UI\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStore your keys and certificates on the smart card. See \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#storing-a-certificate-on-the-smart-card_configuring-idm-for-smart-card-auth\">Storing a certificate on a smart card\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"con_required-steps-for-smart-card-authentication-in-active-directory_assembly_understanding-smart-card-authentication\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.7. Required steps for smart card authentication with certificates issued by Active Directory\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou must ensure the following steps have been followed before you can authenticate with a smart card with certificates issued by Active Directory (AD):\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication#copying-certificates-from-active-directory-using-sftp_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm\">Copy the CA and user certificates from Active Directory to the IdM server and client\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication#configuring-the-idm-server-and-clients-for-smart-card-authentication-using-adcs-certificates_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm\">Configure the IdM server and clients for smart card authentication using ADCS certificates\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication#converting-the-pfx-file_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm\">Convert the PFX (PKCS#12) file to be able to store the certificate and private key on the smart card\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication#configuring-timeouts-in-sssd-conf_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm\">Configure timeouts in the sssd.conf file\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication#certificate-mapping-rules-for-smart-card-authentication_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm\">Create certificate mapping rules for smart card authentication\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-idm-for-smart-card-auth_managing-smart-card-authentication\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 2. Configuring Identity Management for smart card authentication\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tIdentity Management (IdM) supports smart card authentication with:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tUser certificates issued by the IdM certificate authority\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tUser certificates issued by an external certificate authority\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tYou can configure smart card authentication in IdM for both types of certificates. In this scenario, the \u003Ccode class=\"literal\">rootca.pem\u003C/code> CA certificate is the file containing the certificate of a trusted external certificate authority.\n\t\t\u003C/p>\u003Cp>\n\t\t\tFor information about smart card authentication in IdM, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_understanding-smart-card-authentication_managing-smart-card-authentication\">Understanding smart card authentication\u003C/a>.\n\t\t\u003C/p>\u003Cp>\n\t\t\tFor more details on configuring smart card authentication:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#conf-idm-server-for-smart-card-auth_configuring-idm-for-smart-card-auth\">Configuring the IdM server for smart card authentication\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#conf-idm-client-for-smart-card-auth_configuring-idm-for-smart-card-auth\">Configuring the IdM client for smart card authentication\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#proc-add-cert-idm-user-webui_configuring-idm-for-smart-card-auth\">Adding a certificate to a user entry in the IdM Web UI\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#proc-add-cert-idm-user-cli_configuring-idm-for-smart-card-auth\">Adding a certificate to a user entry in the IdM CLI\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#installing-tools-for-managing-and-using-smart-cards_configuring-idm-for-smart-card-auth\">Installing tools for managing and using smart cards\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#storing-a-certificate-on-the-smart-card_configuring-idm-for-smart-card-auth\">Storing a certificate on a smart card\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#logging-in-to-idm-with-smart-cards_configuring-idm-for-smart-card-auth\">Logging in to IdM with smart cards\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#configuring-gdm-access-using-smart-card-authentication_configuring-idm-for-smart-card-auth\">Configuring GDM access using smart card authentication\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#configuring-su-access-using-smart-card-authentication_configuring-idm-for-smart-card-auth\">Configuring su access using smart card authentication\u003C/a>\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"conf-idm-server-for-smart-card-auth_configuring-idm-for-smart-card-auth\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.1. Configuring the IdM server for smart card authentication\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIf you want to enable smart card authentication for users whose certificates have been issued by the certificate authority (CA) of the &lt;EXAMPLE.ORG&gt; domain that your Identity Management (IdM) CA trusts, you must obtain the following certificates so that you can add them when running the \u003Ccode class=\"literal\">ipa-advise\u003C/code> script that configures the IdM server:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe certificate of the root CA that has either issued the certificate for the &lt;EXAMPLE.ORG&gt; CA directly, or through one or more of its sub-CAs. You can download the certificate chain from a web page whose certificate has been issued by the authority. For details, see Steps 1 - 4a in \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/dc-web-ui-auth_managing-certificates-in-idm#configuring-browser-for-cert-auth_dc-web-ui-auth\">Configuring a browser to enable certificate authentication\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe IdM CA certificate. You can obtain the CA certificate from the \u003Ccode class=\"literal\">/etc/ipa/ca.crt\u003C/code> file on the IdM server on which an IdM CA instance is running.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe certificates of all of the intermediate CAs; that is, intermediate between the &lt;EXAMPLE.ORG&gt; CA and the IdM CA.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tTo configure an IdM server for smart card authentication:\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tObtain files with the CA certificates in the PEM format.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRun the built-in \u003Ccode class=\"literal\">ipa-advise\u003C/code> script.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tReload the system configuration.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have root access to the IdM server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have the root CA certificate and all the intermediate CA certificates.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a directory in which you will do the configuration:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server]# \u003Cspan class=\"strong strong\">\u003Cstrong>mkdir ~/SmartCard/\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNavigate to the directory:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server]# \u003Cspan class=\"strong strong\">\u003Cstrong>cd ~/SmartCard/\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tObtain the relevant CA certificates stored in files in PEM format. If your CA certificate is stored in a file of a different format, such as DER, convert it to PEM format. The IdM Certificate Authority certificate is in PEM format and is located in the \u003Ccode class=\"literal\">/etc/ipa/ca.crt\u003C/code> file.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConvert a DER file to a PEM file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># openssl x509 -in &lt;filename&gt;.der -inform DER -out &lt;filename&gt;.pem -outform PEM\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor convenience, copy the certificates to the directory in which you want to do the configuration:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server SmartCard]# \u003Cspan class=\"strong strong\">\u003Cstrong>cp /tmp/rootca.pem ~/SmartCard/\u003C/strong>\u003C/span>\n[root@server SmartCard]# \u003Cspan class=\"strong strong\">\u003Cstrong>cp /tmp/subca.pem ~/SmartCard/\u003C/strong>\u003C/span>\n[root@server SmartCard]# \u003Cspan class=\"strong strong\">\u003Cstrong>cp /tmp/issuingca.pem ~/SmartCard/\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: If you use certificates of external certificate authorities, use the \u003Ccode class=\"literal\">openssl x509\u003C/code> utility to view the contents of the files in the \u003Ccode class=\"literal\">PEM\u003C/code> format to check that the \u003Ccode class=\"literal\">Issuer\u003C/code> and \u003Ccode class=\"literal\">Subject\u003C/code> values are correct:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server SmartCard]# \u003Cspan class=\"strong strong\">\u003Cstrong>openssl x509 -noout -text -in rootca.pem | more\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tGenerate a configuration script with the in-built \u003Ccode class=\"literal\">ipa-advise\u003C/code> utility, using the administrator’s privileges:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server SmartCard]# \u003Cspan class=\"strong strong\">\u003Cstrong>kinit admin\u003C/strong>\u003C/span>\n[root@server SmartCard]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-advise config-server-for-smart-card-auth &gt; config-server-for-smart-card-auth.sh\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">config-server-for-smart-card-auth.sh\u003C/code> script performs the following actions:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIt configures the IdM Apache HTTP Server.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIt enables Public Key Cryptography for Initial Authentication in Kerberos (PKINIT) on the Key Distribution Center (KDC).\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIt configures the IdM Web UI to accept smart card authorization requests.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tExecute the script, adding the PEM files containing the root CA and sub CA certificates as arguments:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server SmartCard]# \u003Cspan class=\"strong strong\">\u003Cstrong>chmod +x config-server-for-smart-card-auth.sh\u003C/strong>\u003C/span>\n[root@server SmartCard]# \u003Cspan class=\"strong strong\">\u003Cstrong>./config-server-for-smart-card-auth.sh rootca.pem subca.pem issuingca.pem\u003C/strong>\u003C/span>\nTicket cache:KEYRING:persistent:0:0\nDefault principal: admin@IDM.EXAMPLE.COM\n[...]\nSystemwide CA database updated.\nThe ipa-certupdate command was successful\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tEnsure that you add the root CA’s certificate as an argument before any sub CA certificates and that the CA or sub CA certificates have not expired.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: If the certificate authority that issued the user certificate does not provide any Online Certificate Status Protocol (OCSP) responder, you may need to disable OCSP check for authentication to the IdM Web UI:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSet the \u003Ccode class=\"literal\">SSLOCSPEnable\u003C/code> parameter to \u003Ccode class=\"literal\">off\u003C/code> in the \u003Ccode class=\"literal\">/etc/httpd/conf.d/ssl.conf\u003C/code> file:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Cspan class=\"strong strong\">\u003Cstrong>SSLOCSPEnable off\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRestart the Apache daemon (httpd) for the changes to take effect immediately:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server SmartCard]# \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl restart httpd\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tDo not disable the OCSP check if you only use user certificates issued by the IdM CA. OCSP responders are part of IdM.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor instructions on how to keep the OCSP check enabled, and yet prevent a user certificate from being rejected by the IdM server if it does not contain the information about the location at which the CA that issued the user certificate listens for OCSP service requests, see the \u003Ccode class=\"literal\">SSLOCSPDefaultResponder\u003C/code> directive in \u003Ca class=\"link\" href=\"http://httpd.apache.org/docs/trunk/en/mod/mod_ssl.html\">Apache mod_ssl configuration options\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tThe server is now configured for smart card authentication.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tTo enable smart card authentication in the whole topology, run the procedure on each IdM server.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"proc_using-ansible-to-configure-the-idm-server-for-smart-card-authentication_configuring-idm-for-smart-card-auth\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.2. Using Ansible to configure the IdM server for smart card authentication\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can use Ansible to enable smart card authentication for users whose certificates have been issued by the certificate authority (CA) of the &lt;EXAMPLE.ORG&gt; domain that your Identity Management (IdM) CA trusts. To do that, you must obtain the following certificates so that you can use them when running an Ansible playbook with the \u003Ccode class=\"literal\">ipasmartcard_server\u003C/code> \u003Ccode class=\"literal\">ansible-freeipa\u003C/code> role script:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe certificate of the root CA that has either issued the certificate for the &lt;EXAMPLE.ORG&gt; CA directly, or through one or more of its sub-CAs. You can download the certificate chain from a web page whose certificate has been issued by the authority. For details, see Step 4 in \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/dc-web-ui-auth_managing-certificates-in-idm#configuring-browser-for-cert-auth_dc-web-ui-auth\">Configuring a browser to enable certificate authentication\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe IdM CA certificate. You can obtain the CA certificate from the \u003Ccode class=\"literal\">/etc/ipa/ca.crt\u003C/code> file on any IdM CA server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe certificates of all of the CAs that are intermediate between the &lt;EXAMPLE.ORG&gt; CA and the IdM CA.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have \u003Ccode class=\"literal\">root\u003C/code> access to the IdM server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou know the IdM \u003Ccode class=\"literal\">admin\u003C/code> password.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have the root CA certificate, the IdM CA certificate, and all the intermediate CA certificates.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have configured your Ansible control node to meet the following requirements:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tYou are using Ansible version 2.15 or later.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tYou have installed the \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/installing-an-identity-management-server-using-an-ansible-playbook_installing-identity-management#installing-the-ansible-freeipa-package_server-ansible\">\u003Ccode class=\"literal\">ansible-freeipa\u003C/code>\u003C/a> package on the Ansible controller.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe example assumes that in the \u003Cspan class=\"strong strong\">\u003Cstrong>~/\u003Cspan class=\"emphasis\">\u003Cem>MyPlaybooks\u003C/em>\u003C/span>/\u003C/strong>\u003C/span> directory, you have created an \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_ansible_to_install_and_manage_identity_management/preparing-your-environment-for-managing-idm-using-ansible-playbooks_using-ansible-to-install-and-manage-identity-management\">Ansible inventory file\u003C/a> with the fully-qualified domain name (FQDN) of the IdM server.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe example assumes that the \u003Cspan class=\"strong strong\">\u003Cstrong>secret.yml\u003C/strong>\u003C/span> Ansible vault stores your \u003Ccode class=\"literal\">ipaadmin_password\u003C/code>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe target node, that is the node on which the \u003Ccode class=\"literal\">ansible-freeipa\u003C/code> module is executed, is part of the IdM domain as an IdM client, server or replica.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf your CA certificates are stored in files of a different format, such as \u003Ccode class=\"literal\">DER\u003C/code>, convert them to \u003Ccode class=\"literal\">PEM\u003C/code> format:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>openssl x509 -in &lt;filename&gt;.der -inform DER -out &lt;filename&gt;.pem -outform PEM\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe IdM Certificate Authority certificate is in \u003Ccode class=\"literal\">PEM\u003C/code> format and is located in the \u003Ccode class=\"literal\">/etc/ipa/ca.crt\u003C/code> file.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Use the \u003Ccode class=\"literal\">openssl x509\u003C/code> utility to view the contents of the files in the \u003Ccode class=\"literal\">PEM\u003C/code> format to check that the \u003Ccode class=\"literal\">Issuer\u003C/code> and \u003Ccode class=\"literal\">Subject\u003C/code> values are correct:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>openssl x509 -noout -text -in root-ca.pem | more\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNavigate to your \u003Cspan class=\"strong strong\">\u003Cstrong>~/\u003Cspan class=\"emphasis\">\u003Cem>MyPlaybooks\u003C/em>\u003C/span>/\u003C/strong>\u003C/span> directory:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>cd ~/\u003Cspan class=\"emphasis\">\u003Cem>MyPlaybooks\u003C/em>\u003C/span>/\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a subdirectory dedicated to the CA certificates:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>mkdir SmartCard/\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor convenience, copy all the required certificates to the \u003Cspan class=\"strong strong\">\u003Cstrong>~/MyPlaybooks/SmartCard/\u003C/strong>\u003C/span> directory:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cp /tmp/root-ca.pem ~/MyPlaybooks/SmartCard/\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>cp /tmp/intermediate-ca.pem ~/MyPlaybooks/SmartCard/\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>cp /etc/ipa/ca.crt ~/MyPlaybooks/SmartCard/ipa-ca.crt\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn your Ansible inventory file, specify the following:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe IdM servers that you want to configure for smart card authentication.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe IdM administrator password.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe paths to the certificates of the CAs in the following order:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tThe root CA certificate file\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tThe intermediate CA certificates files\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tThe IdM CA certificate file\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe file can look as follows:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Cspan class=\"strong strong\">\u003Cstrong>[ipaserver]\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>ipaserver.idm.example.com\u003C/strong>\u003C/span>\n\n[ipareplicas]\nipareplica1.idm.example.com\nipareplica2.idm.example.com\n\n[ipacluster:children]\nipaserver\nipareplicas\n\n[ipacluster:vars]\n\u003Cspan class=\"strong strong\">\u003Cstrong>ipaadmin_password= \"{{ ipaadmin_password }}\"\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>ipasmartcard_server_ca_certs=/home/&lt;user_name&gt;/MyPlaybooks/SmartCard/root-ca.pem,/home/&lt;user_name&gt;/MyPlaybooks/SmartCard/intermediate-ca.pem,/home/&lt;user_name&gt;/MyPlaybooks/SmartCard/ipa-ca.crt\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate an \u003Ccode class=\"literal\">install-smartcard-server.yml\u003C/code> playbook with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">---\n- name: Playbook to set up smart card authentication for an IdM server\n  \u003Cspan class=\"strong strong\">\u003Cstrong>hosts: ipaserver\u003C/strong>\u003C/span>\n  become: true\n\n  roles:\n  - \u003Cspan class=\"strong strong\">\u003Cstrong>role: ipasmartcard_server\u003C/strong>\u003C/span>\n    state: present\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSave the file.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the Ansible playbook. Specify the playbook file, the file storing the password protecting the \u003Cspan class=\"strong strong\">\u003Cstrong>secret.yml\u003C/strong>\u003C/span> file, and the inventory file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --vault-password-file=password_file -v -i inventory install-smartcard-server.yml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">ipasmartcard_server\u003C/code> Ansible role performs the following actions:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIt configures the IdM Apache HTTP Server.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIt enables Public Key Cryptography for Initial Authentication in Kerberos (PKINIT) on the Key Distribution Center (KDC).\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIt configures the IdM Web UI to accept smart card authorization requests.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: If the certificate authority that issued the user certificate does not provide any Online Certificate Status Protocol (OCSP) responder, you may need to disable OCSP check for authentication to the IdM Web UI:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tConnect to the IdM server as \u003Ccode class=\"literal\">root\u003C/code>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Cspan class=\"strong strong\">\u003Cstrong>ssh root@ipaserver.idm.example.com\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSet the \u003Ccode class=\"literal\">SSLOCSPEnable\u003C/code> parameter to \u003Ccode class=\"literal\">off\u003C/code> in the \u003Ccode class=\"literal\">/etc/httpd/conf.d/ssl.conf\u003C/code> file:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Cspan class=\"strong strong\">\u003Cstrong>SSLOCSPEnable off\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRestart the Apache daemon (httpd) for the changes to take effect immediately:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl restart httpd\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tDo not disable the OCSP check if you only use user certificates issued by the IdM CA. OCSP responders are part of IdM.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor instructions on how to keep the OCSP check enabled, and yet prevent a user certificate from being rejected by the IdM server if it does not contain the information about the location at which the CA that issued the user certificate listens for OCSP service requests, see the \u003Ccode class=\"literal\">SSLOCSPDefaultResponder\u003C/code> directive in \u003Ca class=\"link\" href=\"http://httpd.apache.org/docs/trunk/en/mod/mod_ssl.html\">Apache mod_ssl configuration options\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tThe server listed in the inventory file is now configured for smart card authentication.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tTo enable smart card authentication in the whole topology, set the \u003Ccode class=\"literal\">hosts\u003C/code> variable in the Ansible playbook to \u003Ccode class=\"literal\">ipacluster\u003C/code>:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">---\n- name: Playbook to setup smartcard for IPA server and replicas\n  \u003Cspan class=\"strong strong\">\u003Cstrong>hosts: ipacluster\u003C/strong>\u003C/span>\n[...]\u003C/pre>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSample playbooks using the \u003Ccode class=\"literal\">ipasmartcard_server\u003C/code> role in the \u003Ccode class=\"literal\">/usr/share/doc/ansible-freeipa/playbooks/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"conf-idm-client-for-smart-card-auth_configuring-idm-for-smart-card-auth\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.3. Configuring the IdM client for smart card authentication\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFollow this procedure to configure IdM clients for smart card authentication. The procedure needs to be run on each IdM system, a client or a server, to which you want to connect while using a smart card for authentication. For example, to enable an \u003Ccode class=\"literal\">ssh\u003C/code> connection from host A to host B, the script needs to be run on host B.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tAs an administrator, run this procedure to enable smart card authentication using\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">ssh\u003C/code> protocol\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-and-importing-local-certificates-to-a-smart-card_managing-smart-card-authentication#configuring-ssh-access-using-smart-card-authentication_configuring-and-importing-local-certificates-to-a-smart-card\">Configuring SSH access using smart card authentication\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe console login\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe GNOME Display Manager (GDM)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">su\u003C/code> command\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThis procedure is not required for authenticating to the IdM Web UI. Authenticating to the IdM Web UI involves two hosts, neither of which needs to be an IdM client:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe machine on which the browser is running. The machine can be outside of the IdM domain.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe IdM server on which \u003Ccode class=\"literal\">httpd\u003C/code> is running.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThe following procedure assumes that you are configuring smart card authentication on an IdM client, not an IdM server. For this reason you need two computers: an IdM server to generate the configuration script, and the IdM client on which to run the script.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYour IdM server has been configured for smart card authentication, as described in \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#conf-idm-server-for-smart-card-auth_configuring-idm-for-smart-card-auth\">Configuring the IdM server for smart card authentication\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have root access to the IdM server and the IdM client.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have the root CA certificate and all the intermediate CA certificates.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou installed the IdM client with the \u003Ccode class=\"literal\">--mkhomedir\u003C/code> option to ensure remote users can log in successfully. If you do not create a home directory, the default login location is the root of the directory structure, \u003Ccode class=\"literal\">/\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn an IdM server, generate a configuration script with \u003Ccode class=\"literal\">ipa-advise\u003C/code> using the administrator’s privileges:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server SmartCard]# \u003Cspan class=\"strong strong\">\u003Cstrong>kinit admin\u003C/strong>\u003C/span>\n[root@server SmartCard]# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa-advise config-client-for-smart-card-auth &gt; config-client-for-smart-card-auth.sh\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">config-client-for-smart-card-auth.sh\u003C/code> script performs the following actions:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIt configures the smart card daemon.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIt sets the system-wide truststore.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIt configures the System Security Services Daemon (SSSD) to allow users to authenticate with either their user name and password or with their smart card. For more details on SSSD profile options for smart card authentication, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_understanding-smart-card-authentication_managing-smart-card-authentication#con_smart-card-authentication-options-in-rhel_assembly_understanding-smart-card-authentication\">Smart card authentication options in RHEL\u003C/a>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFrom the IdM server, copy the script to a directory of your choice on the IdM client machine:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server SmartCard]# \u003Cspan class=\"strong strong\">\u003Cstrong>scp config-client-for-smart-card-auth.sh root\u003Cspan class=\"strong strong\">\u003Cstrong>@\u003C/strong>\u003C/span>client.idm.example.com:/root/SmartCard/\u003C/strong>\u003C/span>\nPassword:\nconfig-client-for-smart-card-auth.sh        100%   2419       3.5MB/s   00:00\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFrom the IdM server, copy the CA certificate files in PEM format for convenience to the same directory on the IdM client machine as used in the previous step:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@server SmartCard]# \u003Cspan class=\"strong strong\">\u003Cstrong>scp {rootca.pem,subca.pem,issuingca.pem} root\u003Cspan class=\"strong strong\">\u003Cstrong>@\u003C/strong>\u003C/span>client.idm.example.com:/root/SmartCard/\u003C/strong>\u003C/span>\nPassword:\nrootca.pem                          100%   1237     9.6KB/s   00:00\nsubca.pem                           100%   2514    19.6KB/s   00:00\nissuingca.pem                       100%   2514    19.6KB/s   00:00\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the client machine, execute the script, adding the PEM files containing the CA certificates as arguments:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@client SmartCard]# \u003Cspan class=\"strong strong\">\u003Cstrong>kinit admin\u003C/strong>\u003C/span>\n[root@client SmartCard]# \u003Cspan class=\"strong strong\">\u003Cstrong>chmod +x config-client-for-smart-card-auth.sh\u003C/strong>\u003C/span>\n[root@client SmartCard]# \u003Cspan class=\"strong strong\">\u003Cstrong>./config-client-for-smart-card-auth.sh rootca.pem subca.pem issuingca.pem\u003C/strong>\u003C/span>\nTicket cache:KEYRING:persistent:0:0\nDefault principal: admin@IDM.EXAMPLE.COM\n[...]\nSystemwide CA database updated.\nThe ipa-certupdate command was successful\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tEnsure that you add the root CA’s certificate as an argument before any sub CA certificates and that the CA or sub CA certificates have not expired.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tThe client is now configured for smart card authentication.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"proc_using-ansible-to-configure-idm-clients-for-smart-card-authentication_configuring-idm-for-smart-card-auth\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.4. Using Ansible to configure IdM clients for smart card authentication\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFollow this procedure to use the \u003Ccode class=\"literal\">ansible-freeipa\u003C/code> \u003Ccode class=\"literal\">ipasmartcard_client\u003C/code> module to configure specific Identity Management (IdM) clients to permit IdM users to authenticate with a smart card. Run this procedure to enable smart card authentication for IdM users that use any of the following to access IdM:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">ssh\u003C/code> protocol\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-and-importing-local-certificates-to-a-smart-card_managing-smart-card-authentication#configuring-ssh-access-using-smart-card-authentication_configuring-and-importing-local-certificates-to-a-smart-card\">Configuring SSH access using smart card authentication\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe console login\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe GNOME Display Manager (GDM)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">su\u003C/code> command\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThis procedure is not required for authenticating to the IdM Web UI. Authenticating to the IdM Web UI involves two hosts, neither of which needs to be an IdM client:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe machine on which the browser is running. The machine can be outside of the IdM domain.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tThe IdM server on which \u003Ccode class=\"literal\">httpd\u003C/code> is running.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYour IdM server has been configured for smart card authentication, as described in \u003Ca class=\"link\" href=\"#proc_using-ansible-to-configure-the-idm-server-for-smart-card-authentication_configuring-idm-for-smart-card-auth\" title=\"2.2. Using Ansible to configure the IdM server for smart card authentication\">Using Ansible to configure the IdM server for smart card authentication\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have root access to the IdM server and the IdM client.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have the root CA certificate, the IdM CA certificate, and all the intermediate CA certificates.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have configured your Ansible control node to meet the following requirements:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tYou are using Ansible version 2.15 or later.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tYou have installed the \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_identity_management/installing-an-identity-management-server-using-an-ansible-playbook_installing-identity-management#installing-the-ansible-freeipa-package_server-ansible\">\u003Ccode class=\"literal\">ansible-freeipa\u003C/code>\u003C/a> package on the Ansible controller.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe example assumes that in the \u003Cspan class=\"strong strong\">\u003Cstrong>~/\u003Cspan class=\"emphasis\">\u003Cem>MyPlaybooks\u003C/em>\u003C/span>/\u003C/strong>\u003C/span> directory, you have created an \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_ansible_to_install_and_manage_identity_management/preparing-your-environment-for-managing-idm-using-ansible-playbooks_using-ansible-to-install-and-manage-identity-management\">Ansible inventory file\u003C/a> with the fully-qualified domain name (FQDN) of the IdM server.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe example assumes that the \u003Cspan class=\"strong strong\">\u003Cstrong>secret.yml\u003C/strong>\u003C/span> Ansible vault stores your \u003Ccode class=\"literal\">ipaadmin_password\u003C/code>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe target node, that is the node on which the \u003Ccode class=\"literal\">ansible-freeipa\u003C/code> module is executed, is part of the IdM domain as an IdM client, server or replica.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf your CA certificates are stored in files of a different format, such as \u003Ccode class=\"literal\">DER\u003C/code>, convert them to \u003Ccode class=\"literal\">PEM\u003C/code> format:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>openssl x509 -in &lt;filename&gt;.der -inform DER -out &lt;filename&gt;.pem -outform PEM\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe IdM CA certificate is in \u003Ccode class=\"literal\">PEM\u003C/code> format and is located in the \u003Ccode class=\"literal\">/etc/ipa/ca.crt\u003C/code> file.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Use the \u003Ccode class=\"literal\">openssl x509\u003C/code> utility to view the contents of the files in the \u003Ccode class=\"literal\">PEM\u003C/code> format to check that the \u003Ccode class=\"literal\">Issuer\u003C/code> and \u003Ccode class=\"literal\">Subject\u003C/code> values are correct:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>openssl x509 -noout -text -in root-ca.pem | more\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn your Ansible control node, navigate to your \u003Cspan class=\"strong strong\">\u003Cstrong>~/\u003Cspan class=\"emphasis\">\u003Cem>MyPlaybooks\u003C/em>\u003C/span>/\u003C/strong>\u003C/span> directory:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>cd ~/\u003Cspan class=\"emphasis\">\u003Cem>MyPlaybooks\u003C/em>\u003C/span>/\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a subdirectory dedicated to the CA certificates:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>mkdir SmartCard/\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor convenience, copy all the required certificates to the \u003Cspan class=\"strong strong\">\u003Cstrong>~/MyPlaybooks/SmartCard/\u003C/strong>\u003C/span> directory, for example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cp /tmp/root-ca.pem ~/MyPlaybooks/SmartCard/\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>cp /tmp/intermediate-ca.pem ~/MyPlaybooks/SmartCard/\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>cp /etc/ipa/ca.crt ~/MyPlaybooks/SmartCard/ipa-ca.crt\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn your Ansible inventory file, specify the following:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe IdM clients that you want to configure for smart card authentication.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe IdM administrator password.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe paths to the certificates of the CAs in the following order:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tThe root CA certificate file\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tThe intermediate CA certificates files\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tThe IdM CA certificate file\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe file can look as follows:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Cspan class=\"strong strong\">\u003Cstrong>[ipaclients]\u003C/strong>\u003C/span>\nipaclient1.example.com\nipaclient2.example.com\n\n[ipaclients:vars]\n\u003Cspan class=\"strong strong\">\u003Cstrong>ipaadmin_password=SomeADMINpassword\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>ipasmartcard_client_ca_certs=/home/&lt;user_name&gt;/MyPlaybooks/SmartCard/root-ca.pem,/home/&lt;user_name&gt;/MyPlaybooks/SmartCard/intermediate-ca.pem,/home/&lt;user_name&gt;/MyPlaybooks/SmartCard/ipa-ca.crt\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate an \u003Ccode class=\"literal\">install-smartcard-clients.yml\u003C/code> playbook with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">---\n- name: Playbook to set up smart card authentication for an IdM client\n  \u003Cspan class=\"strong strong\">\u003Cstrong>hosts: ipaclients\u003C/strong>\u003C/span>\n  become: true\n\n  roles:\n  - \u003Cspan class=\"strong strong\">\u003Cstrong>role: ipasmartcard_client\u003C/strong>\u003C/span>\n    state: present\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSave the file.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the Ansible playbook. Specify the playbook and inventory files:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --vault-password-file=password_file -v -i inventory install-smartcard-clients.yml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">ipasmartcard_client\u003C/code> Ansible role performs the following actions:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIt configures the smart card daemon.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIt sets the system-wide truststore.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIt configures the System Security Services Daemon (SSSD) to allow users to authenticate with either their user name and password or their smart card. For more details on SSSD profile options for smart card authentication, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_understanding-smart-card-authentication_managing-smart-card-authentication#con_smart-card-authentication-options-in-rhel_assembly_understanding-smart-card-authentication\">Smart card authentication options in RHEL\u003C/a>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tThe clients listed in the \u003Cspan class=\"strong strong\">\u003Cstrong>ipaclients\u003C/strong>\u003C/span> section of the inventory file are now configured for smart card authentication.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIf you have installed the IdM clients with the \u003Ccode class=\"literal\">--mkhomedir\u003C/code> option, remote users will be able to log in to their home directories. Otherwise, the default login location is the root of the directory structure, \u003Ccode class=\"literal\">/\u003C/code>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSample playbooks using the \u003Ccode class=\"literal\">ipasmartcard_server\u003C/code> role in the \u003Ccode class=\"literal\">/usr/share/doc/ansible-freeipa/playbooks/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc-add-cert-idm-user-webui_configuring-idm-for-smart-card-auth\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.5. Adding a certificate to a user entry in the IdM Web UI\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFollow this procedure to add an external certificate to a user entry in IdM Web UI.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tInstead of uploading the whole certificate, it is also possible to upload certificate mapping data to a user entry in IdM. User entries containing either full certificates or certificate mapping data can be used in conjunction with corresponding certificate mapping rules to facilitate the configuration of smart card authentication for system administrators. For details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/con-idm-certmapdata_managing-smart-card-authentication\">Certificate mapping rules for configuring authentication\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIf the user’s certificate has been issued by the IdM Certificate Authority, the certificate is already stored in the user entry, and you do not need to follow this procedure.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have the certificate that you want to add to the user entry at your disposal.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tLog into the IdM Web UI as an administrator if you want to add a certificate to another user. For adding a certificate to your own profile, you do not need the administrator’s credentials.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tNavigate to \u003Ccode class=\"literal\">Users\u003C/code> → \u003Ccode class=\"literal\">Active users\u003C/code> → \u003Ccode class=\"literal\">sc_user\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFind the \u003Ccode class=\"literal\">Certificate\u003C/code> option and click \u003Ccode class=\"literal\">Add\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the command-line interface, display the certificate in the \u003Ccode class=\"literal\">PEM\u003C/code> format using the \u003Ccode class=\"literal\">cat\u003C/code> utility or a text editor:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@client SmartCard]$ \u003Cspan class=\"strong strong\">\u003Cstrong>cat testuser.crt\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCopy and paste the certificate from the CLI into the window that has opened in the Web UI.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tClick \u003Ccode class=\"literal\">Add\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"figure\" id=\"configuring-idm-for-smart-card-auth-new-certmaprule-add\">\u003Cp class=\"title\">\u003Cstrong>Figure 2.1. Adding a new certificate in the IdM Web UI\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Managing_smart_card_authentication-en-US/images/1f589affb4e3eb5c0a47755352e5bcd6/idm-add-cert.png\" alt=\"Screenshot of the &quot;New Certificate&quot; pop-up window with one large field for the Certificate in base64 of PEM format. The &quot;Add&quot; button at the bottom right is highlighted.\"/>\u003C/div>\u003C/div>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">sc_user\u003C/code> entry now contains an external certificate.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"proc-add-cert-idm-user-cli_configuring-idm-for-smart-card-auth\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.6. Adding a certificate to a user entry in the IdM CLI\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFollow this procedure to add an external certificate to a user entry in IdM CLI.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tInstead of uploading the whole certificate, it is also possible to upload certificate mapping data to a user entry in IdM. User entries containing either full certificates or certificate mapping data can be used in conjunction with corresponding certificate mapping rules to facilitate the configuration of smart card authentication for system administrators. For details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/con-idm-certmapdata_managing-smart-card-authentication\">Certificate mapping rules for configuring authentication\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIf the user’s certificate has been issued by the IdM Certificate Authority, the certificate is already stored in the user entry, and you do not need to follow this procedure.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have the certificate that you want to add to the user entry at your disposal.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLog into the IdM CLI as an administrator if you want to add a certificate to another user:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@client SmartCard]$ \u003Cspan class=\"strong strong\">\u003Cstrong>kinit admin\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor adding a certificate to your own profile, you do not need the administrator’s credentials:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@client SmartCard]$ \u003Cspan class=\"strong strong\">\u003Cstrong>kinit sc_user\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate an environment variable containing the certificate with the header and footer removed and concatenated into a single line, which is the format expected by the \u003Ccode class=\"literal\">ipa user-add-cert\u003C/code> command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@client SmartCard]$ \u003Cspan class=\"strong strong\">\u003Cstrong>export CERT=`openssl x509 -outform der -in testuser.crt | base64 -w0 -`\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that certificate in the \u003Ccode class=\"literal\">testuser.crt\u003C/code> file must be in the \u003Ccode class=\"literal\">PEM\u003C/code> format.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the certificate to the profile of sc_user using the \u003Ccode class=\"literal\">ipa user-add-cert\u003C/code> command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[user@client SmartCard]$ \u003Cspan class=\"strong strong\">\u003Cstrong>ipa user-add-cert sc_user --certificate=$CERT\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">sc_user\u003C/code> entry now contains an external certificate.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"installing-tools-for-managing-and-using-smart-cards_configuring-idm-for-smart-card-auth\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.7. Installing tools for managing and using smart cards\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">gnutls-utils\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">opensc\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">pcscd\u003C/code> service is running.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBefore you can configure your smart card, you must install the corresponding tools, which can generate certificates and start the \u003Ccode class=\"literal\">pscd\u003C/code> service.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">opensc\u003C/code> and \u003Ccode class=\"literal\">gnutls-utils\u003C/code> packages:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf -y install opensc gnutls-utils\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart the \u003Ccode class=\"literal\">pcscd\u003C/code> service.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl start pcscd\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the \u003Ccode class=\"literal\">pcscd\u003C/code> service is up and running\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl status pcscd\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"storing-a-certificate-on-the-smart-card_configuring-idm-for-smart-card-auth\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.8. Preparing your smart card and uploading your certificates and keys to your smart card\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFollow this procedure to configure your smart card with the \u003Ccode class=\"literal\">pkcs15-init\u003C/code> tool, which helps you to configure:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tErasing your smart card\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSetting new PINs and optional PIN Unblocking Keys (PUKs)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCreating a new slot on the smart card\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStoring the certificate, private key, and public key in the slot\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf required, locking the smart card settings as certain smart cards require this type of finalization\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe \u003Ccode class=\"literal\">pkcs15-init\u003C/code> tool may not work with all smart cards. You must use the tools that work with the smart card you are using.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">opensc\u003C/code> package, which includes the \u003Ccode class=\"literal\">pkcs15-init\u003C/code> tool, is installed.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor more details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#installing-tools-for-managing-and-using-smart-cards_configuring-idm-for-smart-card-auth\">Installing tools for managing and using smart cards\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe card is inserted in the reader and connected to the computer.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have a private key, a public key, and a certificate to store on the smart card. In this procedure, \u003Ccode class=\"literal\">testuser.key\u003C/code>, \u003Ccode class=\"literal\">testuserpublic.key\u003C/code>, and \u003Ccode class=\"literal\">testuser.crt\u003C/code> are the names used for the private key, public key, and the certificate.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have your current smart card user PIN and Security Officer PIN (SO-PIN).\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tErase your smart card and authenticate yourself with your PIN:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init --erase-card --use-default-transport-keys\u003C/strong>\u003C/span>\nUsing reader with a card: \u003Cspan class=\"emphasis\">\u003Cem>Reader name\u003C/em>\u003C/span>\nPIN [Security Officer PIN] required.\nPlease enter PIN [Security Officer PIN]:\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe card has been erased.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInitialize your smart card, set your user PIN and PUK, and your Security Officer PIN and PUK:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init --create-pkcs15 --use-default-transport-keys \\ --pin \u003Cspan class=\"emphasis\">\u003Cem>963214\u003C/em>\u003C/span> --puk \u003Cspan class=\"emphasis\">\u003Cem>321478\u003C/em>\u003C/span> --so-pin \u003Cspan class=\"emphasis\">\u003Cem>65498714\u003C/em>\u003C/span> --so-puk \u003Cspan class=\"emphasis\">\u003Cem>784123\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nUsing reader with a card: \u003Cspan class=\"emphasis\">\u003Cem>Reader name\u003C/em>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">pcks15-init\u003C/code> tool creates a new slot on the smart card.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet a label and the authentication ID for the slot:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init --store-pin --label testuser \\ --auth-id 01 --so-pin \u003Cspan class=\"emphasis\">\u003Cem>65498714\u003C/em>\u003C/span> --pin \u003Cspan class=\"emphasis\">\u003Cem>963214\u003C/em>\u003C/span> --puk \u003Cspan class=\"emphasis\">\u003Cem>321478\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nUsing reader with a card: \u003Cspan class=\"emphasis\">\u003Cem>Reader name\u003C/em>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe label is set to a human-readable value, in this case, \u003Ccode class=\"literal\">testuser\u003C/code>. The \u003Ccode class=\"literal\">auth-id\u003C/code> must be two hexadecimal values, in this case it is set to \u003Ccode class=\"literal\">01\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStore and label the private key in the new slot on the smart card:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init --store-private-key testuser.key --label testuser_key \\ --auth-id 01 --id 01 --pin \u003Cspan class=\"emphasis\">\u003Cem>963214\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nUsing reader with a card: \u003Cspan class=\"emphasis\">\u003Cem>Reader name\u003C/em>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe value you specify for \u003Ccode class=\"literal\">--id\u003C/code> must be the same when storing your private key and storing your certificate in the next step. Specifying your own value for \u003Ccode class=\"literal\">--id\u003C/code> is recommended as otherwise a more complicated value is calculated by the tool.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStore and label the certificate in the new slot on the smart card:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init --store-certificate testuser.crt --label testuser_crt \\ --auth-id 01 --id 01 --format pem --pin \u003Cspan class=\"emphasis\">\u003Cem>963214\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nUsing reader with a card: \u003Cspan class=\"emphasis\">\u003Cem>Reader name\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Store and label the public key in the new slot on the smart card:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init --store-public-key testuserpublic.key --label testuserpublic_key --auth-id 01 --id 01 --pin \u003Cspan class=\"emphasis\">\u003Cem>963214\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nUsing reader with a card: \u003Cspan class=\"emphasis\">\u003Cem>Reader name\u003C/em>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tIf the public key corresponds to a private key or certificate, specify the same ID as the ID of the private key or certificate.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Certain smart cards require you to finalize the card by locking the settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init -F\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAt this stage, your smart card includes the certificate, private key, and public key in the newly created slot. You have also created your user PIN and PUK and the Security Officer PIN and PUK.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"logging-in-to-idm-with-smart-cards_configuring-idm-for-smart-card-auth\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.9. Logging in to IdM with smart cards\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFollow this procedure to use smart cards for logging in to the IdM Web UI.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe web browser is configured for using smart card authentication.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe IdM server is configured for smart card authentication.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe certificate installed on your smart card is either issued by the IdM server or has been added to the user entry in IdM.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou know the PIN required to unlock the smart card.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe smart card has been inserted into the reader.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOpen the IdM Web UI in the browser.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Log In Using Certificate\u003C/strong>\u003C/span>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Cspan class=\"inlinemediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Managing_smart_card_authentication-en-US/images/e2df8c824273dc927cde799f821b8c6c/ipa-login-smart-card.png\" alt=\"A screenshot of the IdM Web UI displaying an empty &quot;Username&quot; field and an empty &quot;Password&quot; field. Below those two fields the &quot;Log in using a Certificate&quot; option has been highlighted.\"/>\u003C/span>\n\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the \u003Cspan class=\"strong strong\">\u003Cstrong>Password Required\u003C/strong>\u003C/span> dialog box opens, add the PIN to unlock the smart card and click the \u003Cspan class=\"strong strong\">\u003Cstrong>OK\u003C/strong>\u003C/span> button.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>User Identification Request\u003C/strong>\u003C/span> dialog box opens.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the smart card contains more than one certificate, select the certificate you want to use for authentication in the drop down list below \u003Cspan class=\"strong strong\">\u003Cstrong>Choose a certificate to present as identification\u003C/strong>\u003C/span>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick the \u003Cspan class=\"strong strong\">\u003Cstrong>OK\u003C/strong>\u003C/span> button.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tNow you are successfully logged in to the IdM Web UI.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\u003Cspan class=\"inlinemediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Managing_smart_card_authentication-en-US/images/62db8da1055ce6a2efadfd397d26a6fe/web_ui_users.png\" alt=\"A screenshot of the first screen visible after logging in to the IdM Web UI. There are 5 tabs listed along the top of the screen: Identity - Policy - Authentication - Network Services - IPA Server. The Identity tab has been selected and it is displaying the Users page which is the first menu item among 6 choices just below the tabs: Users - Hosts - Services - Groups - ID Views - Automember. The Active users page displays a table of user logins and their information: First name - Last name - Status - UID - Email address - Telephone number - Job Title.\"/>\u003C/span>\n\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"configuring-gdm-access-using-smart-card-authentication_configuring-idm-for-smart-card-auth\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.10. Logging in to GDM using smart card authentication on an IdM client\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe GNOME Desktop Manager (GDM) requires authentication. You can use your password; however, you can also use a smart card for authentication.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFollow this procedure to use smart card authentication to access GDM.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe system has been configured for smart card authentication. For details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#conf-idm-client-for-smart-card-auth_configuring-idm-for-smart-card-auth\">Configuring the IdM client for smart card authentication\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe smart card contains your certificate and private key.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe user account is a member of the IdM domain.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe certificate on the smart card maps to the user entry through:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAssigning the certificate to a particular user entry. For details, see, \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#proc-add-cert-idm-user-webui_configuring-idm-for-smart-card-auth\">Adding a certificate to a user entry in the IdM Web UI\u003C/a> or \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#proc-add-cert-idm-user-cli_configuring-idm-for-smart-card-auth\">Adding a certificate to a user entry in the IdM CLI\u003C/a>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe certificate mapping data being applied to the account. For details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/con-idm-certmapdata_managing-smart-card-authentication\">Certificate mapping rules for configuring authentication on smart cards\u003C/a>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tInsert the smart card in the reader.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnter the smart card PIN.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Sign In\u003C/strong>\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tYou are successfully logged in to the RHEL system and you have a TGT provided by the IdM server.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Terminal\u003C/strong>\u003C/span> window, enter \u003Ccode class=\"literal\">klist\u003C/code> and check the result:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ klist\nTicket cache: KEYRING:persistent:1358900015:krb_cache_TObtNMd\nDefault principal: example.user@REDHAT.COM\n\nValid starting       Expires              Service principal\n04/20/2020 13:58:24  04/20/2020 23:58:24  krbtgt/EXAMPLE.COM@EXAMPLE.COM\n\trenew until 04/27/2020 08:58:15\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-su-access-using-smart-card-authentication_configuring-idm-for-smart-card-auth\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">2.11. Using smart card authentication with the su command\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tChanging to a different user requires authentication. You can use a password or a certificate. Follow this procedure to use your smart card with the \u003Ccode class=\"literal\">su\u003C/code> command. It means that after entering the \u003Ccode class=\"literal\">su\u003C/code> command, you are prompted for the smart card PIN.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYour IdM server and client have been configured for smart card authentication.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSee \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#conf-idm-server-for-smart-card-auth_configuring-idm-for-smart-card-auth\">Configuring the IdM server for smart card authentication\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSee \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#conf-idm-client-for-smart-card-auth_configuring-idm-for-smart-card-auth\">Configuring the IdM client for smart card authentication\u003C/a>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe smart card contains your certificate and private key. See \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#storing-a-certificate-on-the-smart-card_configuring-idm-for-smart-card-auth\">Storing a certificate on a smart card\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe card is inserted in the reader and connected to the computer.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn a terminal window, change to a different user with the \u003Ccode class=\"literal\">su\u003C/code> command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ su - example.user\nPIN for smart_card\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the configuration is correct, you are prompted to enter the smart card PIN.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 3. Configuring certificates issued by ADCS for smart card authentication in IdM\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tTo configure smart card authentication in IdM for users whose certificates are issued by Active Directory (AD) certificate services:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tYour deployment is based on cross-forest trust between Identity Management (IdM) and Active Directory (AD).\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tYou want to allow smart card authentication for users whose accounts are stored in AD.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tCertificates are created and stored in Active Directory Certificate Services (ADCS).\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tFor an overview of smart card authentication, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_understanding-smart-card-authentication_managing-smart-card-authentication\">Understanding smart card authentication\u003C/a>.\n\t\t\u003C/p>\u003Cp>\n\t\t\tConfiguration is accomplished in the following steps:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication#copying-certificates-from-active-directory-using-sftp_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm\">Copying CA and user certificates from Active Directory to the IdM server and client\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication#configuring-the-idm-server-and-clients-for-smart-card-authentication-using-adcs-certificates_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm\">Configuring the IdM server and clients for smart card authentication using ADCS certificates\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication#converting-the-pfx-file_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm\">Converting a PFX (PKCS#12) file to be able to store the certificate and private key into the smart card\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication#configuring-timeouts-in-sssd-conf_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm\">Configuring timeouts in the sssd.conf file\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication#certificate-mapping-rules-for-smart-card-authentication_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm\">Creating certificate mapping rules for smart card authentication\u003C/a>\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tIdentity Management (IdM) and Active Directory (AD) trust is installed\n\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/installing_trust_between_idm_and_ad/index\">Installing trust between IdM and AD\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tActive Directory Certificate Services (ADCS) is installed and certificates for users are generated\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"windows-server-settings-required-for-trust-configuration-and-certificate-usage_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.1. Windows Server settings required for trust configuration and certificate usage\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou must configure the following on the Windows Server:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tActive Directory Certificate Services (ADCS) is installed\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCertificate Authority is created\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOptional: If you are using Certificate Authority Web Enrollment, the Internet Information Services (IIS) must be configured\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tExport the certificate:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tKey must have \u003Ccode class=\"literal\">2048\u003C/code> bits or more\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tInclude a private key\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou will need a certificate in the following format: Personal Information Exchange — \u003Ccode class=\"literal\">PKCS #12(.PFX)\u003C/code>\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tEnable certificate privacy\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"copying-certificates-from-active-directory-using-sftp_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.2. Copying certificates from Active Directory using sftp\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo be able to use smart card authetication, you need to copy the following certificate files:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA root CA certificate in the \u003Ccode class=\"literal\">CER\u003C/code> format: \u003Ccode class=\"literal\">adcs-winserver-ca.cer\u003C/code> on your IdM server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA user certificate with a private key in the \u003Ccode class=\"literal\">PFX\u003C/code> format: \u003Ccode class=\"literal\">aduser1.pfx\u003C/code> on an IdM client.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThis procedure expects SSH access is allowed. If SSH is unavailable the user must copy the file from the AD Server to the IdM server and client.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConnect from \u003Cspan class=\"strong strong\">\u003Cstrong>the IdM server\u003C/strong>\u003C/span> and copy the \u003Ccode class=\"literal\">adcs-winserver-ca.cer\u003C/code> root certificate to the IdM server:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">root@idmserver ~]# sftp Administrator@winserver.ad.example.com\nAdministrator@winserver.ad.example.com's password:\nConnected to Administrator@winserver.ad.example.com.\nsftp&gt; cd &lt;Path to certificates&gt;\nsftp&gt; ls\nadcs-winserver-ca.cer    aduser1.pfx\nsftp&gt;\nsftp&gt; get adcs-winserver-ca.cer\nFetching &lt;Path to certificates&gt;/adcs-winserver-ca.cer to adcs-winserver-ca.cer\n&lt;Path to certificates&gt;/adcs-winserver-ca.cer                 100%  1254    15KB/s 00:00\nsftp quit\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConnect from \u003Cspan class=\"strong strong\">\u003Cstrong>the IdM client\u003C/strong>\u003C/span> and copy the \u003Ccode class=\"literal\">aduser1.pfx\u003C/code> user certificate to the client:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@client1 ~]# sftp Administrator@winserver.ad.example.com\nAdministrator@winserver.ad.example.com's password:\nConnected to Administrator@winserver.ad.example.com.\nsftp&gt; cd /&lt;Path to certificates&gt;\nsftp&gt; get aduser1.pfx\nFetching &lt;Path to certificates&gt;/aduser1.pfx to aduser1.pfx\n&lt;Path to certificates&gt;/aduser1.pfx                 100%  1254    15KB/s 00:00\nsftp quit\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tNow the CA certificate is stored in the IdM server and the user certificates is stored on the client machine.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"configuring-the-idm-server-and-clients-for-smart-card-authentication-using-adcs-certificates_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.3. Configuring the IdM server and clients for smart card authentication using ADCS certificates\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou must configure the IdM (Identity Management) server and clients to be able to use smart card authentication in the IdM environment. IdM includes the \u003Ccode class=\"literal\">ipa-advise\u003C/code> scripts which makes all necessary changes:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tInstall necessary packages\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tConfigure IdM server and clients\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCopy the CA certificates into the expected locations\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tYou can run \u003Ccode class=\"literal\">ipa-advise\u003C/code> on your IdM server.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFollow this procedure to configure your server and clients for smart card authentication:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOn an IdM server: Preparing the \u003Ccode class=\"literal\">ipa-advise\u003C/code> script to configure your IdM server for smart card authentication.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOn an IdM server: Preparing the \u003Ccode class=\"literal\">ipa-advise\u003C/code> script to configure your IdM client for smart card authentication.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOn an IdM server: Applying the the \u003Ccode class=\"literal\">ipa-advise\u003C/code> server script on the IdM server using the AD certificate.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tMoving the client script to the IdM client machine.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOn an IdM client: Applying the the \u003Ccode class=\"literal\">ipa-advise\u003C/code> client script on the IdM client using the AD certificate.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe certificate has been copied to the IdM server.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tObtain the Kerberos ticket.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tLog in as a user with administration rights.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the IdM server, use the \u003Ccode class=\"literal\">ipa-advise\u003C/code> script for configuring a client:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@idmserver ~]# ipa-advise config-client-for-smart-card-auth &gt; sc_client.sh\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the IdM server, use the \u003Ccode class=\"literal\">ipa-advise\u003C/code> script for configuring a server:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@idmserver ~]# ipa-advise config-server-for-smart-card-auth &gt; sc_server.sh\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the IdM server, execute the script:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@idmserver ~]# sh -x sc_server.sh adcs-winserver-ca.cer\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIt configures the IdM Apache HTTP Server.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIt enables Public Key Cryptography for Initial Authentication in Kerberos (PKINIT) on the Key Distribution Center (KDC).\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tIt configures the IdM Web UI to accept smart card authorization requests.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCopy the \u003Ccode class=\"literal\">sc_client.sh\u003C/code> script to the client system:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@idmserver ~]# scp sc_client.sh root@client1.idm.example.com:/root\nPassword:\nsc_client.sh                  100%  2857   1.6MB/s   00:00\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCopy the Windows certificate to the client system:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@idmserver ~]# scp adcs-winserver-ca.cer root@client1.idm.example.com:/root\nPassword:\nadcs-winserver-ca.cer                 100%  1254   952.0KB/s   00:00\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the client system, run the client script:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@idmclient1 ~]# sh -x sc_client.sh adcs-winserver-ca.cer\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tThe CA certificate is installed in the correct format on the IdM server and client systems and next step is to copy the user certificates onto the smart card itself.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"converting-the-pfx-file_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.4. Converting the PFX file\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBefore you store the PFX (PKCS#12) file into the smart card, you must:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tConvert the file to the PEM format\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tExtract the private key and the certificate to two different files\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe PFX file is copied into the IdM client machine.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the IdM client, into the PEM format:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@idmclient1 ~]# openssl pkcs12 -in aduser1.pfx -out aduser1_cert_only.pem -clcerts -nodes\nEnter Import Password:\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tExtract the key into the separate file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@idmclient1 ~]# openssl pkcs12 -in adduser1.pfx -nocerts -out adduser1.pem &gt; aduser1.key\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tExtract the public certificate into the separate file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@idmclient1 ~]# openssl pkcs12 -in adduser1.pfx -clcerts -nokeys -out aduser1_cert_only.pem &gt; aduser1.crt\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tAt this point, you can store the \u003Ccode class=\"literal\">aduser1.key\u003C/code> and \u003Ccode class=\"literal\">aduser1.crt\u003C/code> into the smart card.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"installing-tools-for-managing-and-using-smart-cards_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.5. Installing tools for managing and using smart cards\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">gnutls-utils\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">opensc\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">pcscd\u003C/code> service is running.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBefore you can configure your smart card, you must install the corresponding tools, which can generate certificates and start the \u003Ccode class=\"literal\">pscd\u003C/code> service.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">opensc\u003C/code> and \u003Ccode class=\"literal\">gnutls-utils\u003C/code> packages:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf -y install opensc gnutls-utils\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart the \u003Ccode class=\"literal\">pcscd\u003C/code> service.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl start pcscd\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the \u003Ccode class=\"literal\">pcscd\u003C/code> service is up and running\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl status pcscd\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"storing-a-certificate-on-the-smart-card_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.6. Preparing your smart card and uploading your certificates and keys to your smart card\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFollow this procedure to configure your smart card with the \u003Ccode class=\"literal\">pkcs15-init\u003C/code> tool, which helps you to configure:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tErasing your smart card\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSetting new PINs and optional PIN Unblocking Keys (PUKs)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCreating a new slot on the smart card\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStoring the certificate, private key, and public key in the slot\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf required, locking the smart card settings as certain smart cards require this type of finalization\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe \u003Ccode class=\"literal\">pkcs15-init\u003C/code> tool may not work with all smart cards. You must use the tools that work with the smart card you are using.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">opensc\u003C/code> package, which includes the \u003Ccode class=\"literal\">pkcs15-init\u003C/code> tool, is installed.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor more details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#installing-tools-for-managing-and-using-smart-cards_configuring-idm-for-smart-card-auth\">Installing tools for managing and using smart cards\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe card is inserted in the reader and connected to the computer.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have a private key, a public key, and a certificate to store on the smart card. In this procedure, \u003Ccode class=\"literal\">testuser.key\u003C/code>, \u003Ccode class=\"literal\">testuserpublic.key\u003C/code>, and \u003Ccode class=\"literal\">testuser.crt\u003C/code> are the names used for the private key, public key, and the certificate.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have your current smart card user PIN and Security Officer PIN (SO-PIN).\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tErase your smart card and authenticate yourself with your PIN:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init --erase-card --use-default-transport-keys\u003C/strong>\u003C/span>\nUsing reader with a card: \u003Cspan class=\"emphasis\">\u003Cem>Reader name\u003C/em>\u003C/span>\nPIN [Security Officer PIN] required.\nPlease enter PIN [Security Officer PIN]:\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe card has been erased.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInitialize your smart card, set your user PIN and PUK, and your Security Officer PIN and PUK:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init --create-pkcs15 --use-default-transport-keys \\ --pin \u003Cspan class=\"emphasis\">\u003Cem>963214\u003C/em>\u003C/span> --puk \u003Cspan class=\"emphasis\">\u003Cem>321478\u003C/em>\u003C/span> --so-pin \u003Cspan class=\"emphasis\">\u003Cem>65498714\u003C/em>\u003C/span> --so-puk \u003Cspan class=\"emphasis\">\u003Cem>784123\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nUsing reader with a card: \u003Cspan class=\"emphasis\">\u003Cem>Reader name\u003C/em>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">pcks15-init\u003C/code> tool creates a new slot on the smart card.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet a label and the authentication ID for the slot:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init --store-pin --label testuser \\ --auth-id 01 --so-pin \u003Cspan class=\"emphasis\">\u003Cem>65498714\u003C/em>\u003C/span> --pin \u003Cspan class=\"emphasis\">\u003Cem>963214\u003C/em>\u003C/span> --puk \u003Cspan class=\"emphasis\">\u003Cem>321478\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nUsing reader with a card: \u003Cspan class=\"emphasis\">\u003Cem>Reader name\u003C/em>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe label is set to a human-readable value, in this case, \u003Ccode class=\"literal\">testuser\u003C/code>. The \u003Ccode class=\"literal\">auth-id\u003C/code> must be two hexadecimal values, in this case it is set to \u003Ccode class=\"literal\">01\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStore and label the private key in the new slot on the smart card:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init --store-private-key testuser.key --label testuser_key \\ --auth-id 01 --id 01 --pin \u003Cspan class=\"emphasis\">\u003Cem>963214\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nUsing reader with a card: \u003Cspan class=\"emphasis\">\u003Cem>Reader name\u003C/em>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe value you specify for \u003Ccode class=\"literal\">--id\u003C/code> must be the same when storing your private key and storing your certificate in the next step. Specifying your own value for \u003Ccode class=\"literal\">--id\u003C/code> is recommended as otherwise a more complicated value is calculated by the tool.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStore and label the certificate in the new slot on the smart card:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init --store-certificate testuser.crt --label testuser_crt \\ --auth-id 01 --id 01 --format pem --pin \u003Cspan class=\"emphasis\">\u003Cem>963214\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nUsing reader with a card: \u003Cspan class=\"emphasis\">\u003Cem>Reader name\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Store and label the public key in the new slot on the smart card:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init --store-public-key testuserpublic.key --label testuserpublic_key --auth-id 01 --id 01 --pin \u003Cspan class=\"emphasis\">\u003Cem>963214\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nUsing reader with a card: \u003Cspan class=\"emphasis\">\u003Cem>Reader name\u003C/em>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tIf the public key corresponds to a private key or certificate, specify the same ID as the ID of the private key or certificate.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Certain smart cards require you to finalize the card by locking the settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init -F\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAt this stage, your smart card includes the certificate, private key, and public key in the newly created slot. You have also created your user PIN and PUK and the Security Officer PIN and PUK.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-timeouts-in-sssd-conf_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.7. Configuring timeouts in sssd.conf\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tAuthentication with a smart card certificate might take longer than the default timeouts used by SSSD. Time out expiration can be caused by:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSlow reader\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA forwarding form a physical device into a virtual environment\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tToo many certificates stored on the smart card\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSlow response from the OCSP (Online Certificate Status Protocol) responder if OCSP is used to verify the certificates\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tIn this case you can prolong the following timeouts in the \u003Ccode class=\"literal\">sssd.conf\u003C/code> file, for example, to 60 seconds:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">p11_child_timeout\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">krb5_auth_timeout\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou must be logged in as root.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen the \u003Ccode class=\"literal\">sssd.conf\u003C/code> file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[root@idmclient1 ~]# vim /etc/sssd/sssd.conf\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tChange the value of \u003Ccode class=\"literal\">p11_child_timeout\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[pam]\np11_child_timeout = 60\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tChange the value of \u003Ccode class=\"literal\">krb5_auth_timeout\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[domain/IDM.EXAMPLE.COM]\nkrb5_auth_timeout = 60\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSave the settings.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tNow, the interaction with the smart card is allowed to run for 1 minute (60 seconds) before authentication will fail with a timeout.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"certificate-mapping-rules-for-smart-card-authentication_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.8. Creating certificate mapping rules for smart card authentication\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIf you want to use one certificate for a user who has accounts in AD (Active Directory) and in IdM (Identity Management), you can create a certificate mapping rule on the IdM server.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tAfter creating such a rule, the user is able to authenticate with their smart card in both domains.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor details about certificate mapping rules, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/con-idm-certmapdata_managing-smart-card-authentication\">Certificate mapping rules for configuring authentication\u003C/a>.\n\t\t\t\u003C/p>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"con-idm-certmapdata_managing-smart-card-authentication\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 4. Certificate mapping rules for configuring authentication\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tYou might need to configure certificate mapping rules in the following scenarios:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tCertificates have been issued by the Certificate System of the Active Directory (AD) with which the IdM domain is in a trust relationship.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tCertificates have been issued by an external certificate authority.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tThe IdM environment is large with many users using smart cards. In this case, adding full certificates can be complicated. The subject and issuer are predictable in most scenarios and therefore easier to add ahead of time than the full certificate.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tAs a system administrator, you can create a certificate mapping rule and add certificate mapping data to a user entry even before a certificate is issued to a particular user. Once the certificate is issued, the user can log in using the certificate even though the full certificate has not yet been uploaded to the user entry.\n\t\t\u003C/p>\u003Cp>\n\t\t\tIn addition, as certificates are renewed at regular intervals, certificate mapping rules reduce administrative overhead. When a user’s certificate is renewed, the administrator does not have to update the user entry. For example, if the mapping is based on the \u003Ccode class=\"literal\">Subject\u003C/code> and \u003Ccode class=\"literal\">Issuer\u003C/code> values, and if the new certificate has the same subject and issuer as the old one, the mapping still applies. If, in contrast, the full certificate was used, then the administrator would have to upload the new certificate to the user entry to replace the old one.\n\t\t\u003C/p>\u003Cp>\n\t\t\tTo set up certificate mapping:\n\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\tAn administrator has to load the certificate mapping data or the full certificate into a user account.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tAn administrator has to create a certificate mapping rule to allow successful logging into IdM for a user whose account contains a certificate mapping data entry that matches the information on the certificate.\n\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\tOnce the certificate mapping rules have been created, when the end-user presents the certificate, stored either on a \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/dc-web-ui-auth_managing-certificates-in-idm\">filesystem\u003C/a> or a \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#logging-in-to-idm-with-smart-cards_configuring-idm-for-smart-card-auth\">smart card\u003C/a>, authentication is successful.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tThe Key Distribution Center (KDC) has a cache for certificate mapping rules. The cache is populated on the first \u003Ccode class=\"literal\">certauth\u003C/code> request and it has a hard-coded timeout of 300 seconds. KDC will not see any changes to certificate mapping rules unless it is restarted or the cache expires.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\tFor details on the individual components that make up a mapping rule and how to obtain and use them, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/conf-certmap-idm_managing-certificates-in-idm#sc-id-mapping_conf-certmap-idm\">Components of an identity mapping rule in IdM\u003C/a> and \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/conf-certmap-idm_managing-certificates-in-idm#sc-id-issuer-obtain-example_conf-certmap-idm\">Obtaining the issuer from a certificate for use in a matching rule\u003C/a>.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tYour certificate mapping rules can depend on the use case for which you are using the certificate. For example, if you are using SSH with certificates, you must have the full certificate to extract the public key from the certificate.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-smart-card-authentication-with-the-web-console_managing-smart-card-authentication\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 5. Configuring smart card authentication with the web console for centrally managed users\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tYou can configure smart card authentication in the RHEL web console for users who are centrally managed by:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tIdentity Management\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tActive Directory which is connected in the cross-forest trust with Identity Management\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tThe system for which you want to use the smart card authentication must be a member of an Active Directory or Identity Management domain.\n\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\tFor details about joining the RHEL 9 system into a domain using the web console, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/configuring_single_sign_on_for_the_rhel_8_web_console_in_the_idm_domain_system-management-using-the-rhel-9-web-console#joining-a-rhel-8-system-to-an-idm-domain-using-the-web-console_configuring-single-sign-on-for-the-web-console-in-the-idm-domain\">Joining a RHEL system to an IdM domain using the web console\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tThe certificate used for the smart card authentication must be associated with a particular user in Identity Management or Active Directory.\n\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\tFor more details about associating a certificate with the user in Identity Management, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#proc-add-cert-idm-user-webui_configuring-idm-for-smart-card-auth\">Adding a certificate to a user entry in the IdM Web UI\u003C/a> or \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#proc-add-cert-idm-user-cli_configuring-idm-for-smart-card-auth\">Adding a certificate to a user entry in the IdM CLI\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"smart-card-authentication-for-centrally-managed-users_configuring-smart-card-authentication-with-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.1. Smart card authentication for centrally managed users\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tA smart card is a physical device, which can provide personal authentication using certificates stored on the card. Personal authentication means that you can use smart cards in the same way as user passwords.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can store user credentials on the smart card in the form of a private key and a certificate. Special software and hardware is used to access them. You insert the smart card into a reader or a USB socket and supply the PIN code for the smart card instead of providing your password.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIdentity Management (IdM) supports smart card authentication with:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tUser certificates issued by the IdM certificate authority.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tUser certificates issued by the Active Directory Certificate Service (ADCS) certificate authority.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIf you want to start using smart card authentication, see the hardware requirements: \u003Ca class=\"link\" href=\"https://access.redhat.com/articles/4253861\">Smart Card support in RHEL8+\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"installing-tools-for-managing-and-using-smart-cards_configuring-smart-card-authentication-with-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.2. Installing tools for managing and using smart cards\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">gnutls-utils\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">opensc\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">pcscd\u003C/code> service is running.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBefore you can configure your smart card, you must install the corresponding tools, which can generate certificates and start the \u003Ccode class=\"literal\">pscd\u003C/code> service.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">opensc\u003C/code> and \u003Ccode class=\"literal\">gnutls-utils\u003C/code> packages:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf -y install opensc gnutls-utils\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart the \u003Ccode class=\"literal\">pcscd\u003C/code> service.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl start pcscd\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the \u003Ccode class=\"literal\">pcscd\u003C/code> service is up and running\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl status pcscd\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"storing-a-certificate-on-the-smart-card_configuring-smart-card-authentication-with-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.3. Preparing your smart card and uploading your certificates and keys to your smart card\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFollow this procedure to configure your smart card with the \u003Ccode class=\"literal\">pkcs15-init\u003C/code> tool, which helps you to configure:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tErasing your smart card\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSetting new PINs and optional PIN Unblocking Keys (PUKs)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCreating a new slot on the smart card\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStoring the certificate, private key, and public key in the slot\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf required, locking the smart card settings as certain smart cards require this type of finalization\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe \u003Ccode class=\"literal\">pkcs15-init\u003C/code> tool may not work with all smart cards. You must use the tools that work with the smart card you are using.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">opensc\u003C/code> package, which includes the \u003Ccode class=\"literal\">pkcs15-init\u003C/code> tool, is installed.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor more details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#installing-tools-for-managing-and-using-smart-cards_configuring-idm-for-smart-card-auth\">Installing tools for managing and using smart cards\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe card is inserted in the reader and connected to the computer.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have a private key, a public key, and a certificate to store on the smart card. In this procedure, \u003Ccode class=\"literal\">testuser.key\u003C/code>, \u003Ccode class=\"literal\">testuserpublic.key\u003C/code>, and \u003Ccode class=\"literal\">testuser.crt\u003C/code> are the names used for the private key, public key, and the certificate.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have your current smart card user PIN and Security Officer PIN (SO-PIN).\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tErase your smart card and authenticate yourself with your PIN:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init --erase-card --use-default-transport-keys\u003C/strong>\u003C/span>\nUsing reader with a card: \u003Cspan class=\"emphasis\">\u003Cem>Reader name\u003C/em>\u003C/span>\nPIN [Security Officer PIN] required.\nPlease enter PIN [Security Officer PIN]:\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe card has been erased.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInitialize your smart card, set your user PIN and PUK, and your Security Officer PIN and PUK:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init --create-pkcs15 --use-default-transport-keys \\ --pin \u003Cspan class=\"emphasis\">\u003Cem>963214\u003C/em>\u003C/span> --puk \u003Cspan class=\"emphasis\">\u003Cem>321478\u003C/em>\u003C/span> --so-pin \u003Cspan class=\"emphasis\">\u003Cem>65498714\u003C/em>\u003C/span> --so-puk \u003Cspan class=\"emphasis\">\u003Cem>784123\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nUsing reader with a card: \u003Cspan class=\"emphasis\">\u003Cem>Reader name\u003C/em>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">pcks15-init\u003C/code> tool creates a new slot on the smart card.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet a label and the authentication ID for the slot:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init --store-pin --label testuser \\ --auth-id 01 --so-pin \u003Cspan class=\"emphasis\">\u003Cem>65498714\u003C/em>\u003C/span> --pin \u003Cspan class=\"emphasis\">\u003Cem>963214\u003C/em>\u003C/span> --puk \u003Cspan class=\"emphasis\">\u003Cem>321478\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nUsing reader with a card: \u003Cspan class=\"emphasis\">\u003Cem>Reader name\u003C/em>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe label is set to a human-readable value, in this case, \u003Ccode class=\"literal\">testuser\u003C/code>. The \u003Ccode class=\"literal\">auth-id\u003C/code> must be two hexadecimal values, in this case it is set to \u003Ccode class=\"literal\">01\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStore and label the private key in the new slot on the smart card:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init --store-private-key testuser.key --label testuser_key \\ --auth-id 01 --id 01 --pin \u003Cspan class=\"emphasis\">\u003Cem>963214\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nUsing reader with a card: \u003Cspan class=\"emphasis\">\u003Cem>Reader name\u003C/em>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe value you specify for \u003Ccode class=\"literal\">--id\u003C/code> must be the same when storing your private key and storing your certificate in the next step. Specifying your own value for \u003Ccode class=\"literal\">--id\u003C/code> is recommended as otherwise a more complicated value is calculated by the tool.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStore and label the certificate in the new slot on the smart card:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init --store-certificate testuser.crt --label testuser_crt \\ --auth-id 01 --id 01 --format pem --pin \u003Cspan class=\"emphasis\">\u003Cem>963214\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nUsing reader with a card: \u003Cspan class=\"emphasis\">\u003Cem>Reader name\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Store and label the public key in the new slot on the smart card:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init --store-public-key testuserpublic.key --label testuserpublic_key --auth-id 01 --id 01 --pin \u003Cspan class=\"emphasis\">\u003Cem>963214\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nUsing reader with a card: \u003Cspan class=\"emphasis\">\u003Cem>Reader name\u003C/em>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tIf the public key corresponds to a private key or certificate, specify the same ID as the ID of the private key or certificate.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Certain smart cards require you to finalize the card by locking the settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init -F\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAt this stage, your smart card includes the certificate, private key, and public key in the newly created slot. You have also created your user PIN and PUK and the Security Officer PIN and PUK.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"enabling-smart-card-authentication-for-the-web-console_configuring-smart-card-authentication-with-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.4. Enabling smart card authentication for the web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo use smart card authentication in the web console, enable this authentication method in the \u003Ccode class=\"literal\">cockpit.conf\u003C/code> file.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tAdditionally, you can disable password authentication in the same file.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Terminal\u003C/strong>\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the \u003Ccode class=\"literal\">/etc/cockpit/cockpit.conf\u003C/code>, set the \u003Ccode class=\"literal\">ClientCertAuthentication\u003C/code> to \u003Ccode class=\"literal\">yes\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[WebService]\nClientCertAuthentication = yes\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Disable password based authentication in \u003Ccode class=\"literal\">cockpit.conf\u003C/code> with:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[Basic]\naction = none\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis configuration disables password authentication and you must always use the smart card.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRestart the web console to ensure that the \u003Ccode class=\"literal\">cockpit.service\u003C/code> accepts the change:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl restart cockpit\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"logging-in-to-the-web-console-with-smart-cards_configuring-smart-card-authentication-with-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.5. Logging in to the web console with smart cards\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can use smart cards to log in to the web console.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA valid certificate stored in your smart card that is associated to a user account created in a Active Directory or Identity Management domain.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPIN to unlock the smart card.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe smart card has been put into the reader.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou have installed the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing and enabling the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLog in to the RHEL 9 web console.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#logging-in-to-the-web-console_getting-started-with-the-rhel-9-web-console\">Logging in to the web console\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe browser asks you to add the PIN protecting the certificate stored on the smart card.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Password Required\u003C/strong>\u003C/span> dialog box, enter PIN and click \u003Cspan class=\"strong strong\">\u003Cstrong>OK\u003C/strong>\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>User Identification Request\u003C/strong>\u003C/span> dialog box, select the certificate stored in the smart card.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSelect \u003Cspan class=\"strong strong\">\u003Cstrong>Remember this decision\u003C/strong>\u003C/span>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe system does not open this window next time.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThis step does not apply to Google Chrome users.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>OK\u003C/strong>\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tYou are now connected and the web console displays its content.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"proc_enabling-password-less-sudo-for-smart-card-users_configuring-smart-card-authentication-with-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.6. Enabling passwordless sudo authentication for smart card users\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can configure passwordless authentication to \u003Ccode class=\"literal\">sudo\u003C/code> and other services for smart card users in the web console.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tAs an alternative, if you use Red Hat Identity Management, you can declare the initial web console certificate authentication as trusted for authenticating to \u003Ccode class=\"literal\">sudo\u003C/code>, SSH, or other services. For that purpose, the web console automatically creates an S4U2Proxy Kerberos ticket in the user session.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIdentity Management installed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tActive Directory connected in the cross-forest trust with Identity Management.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSmart card set up to log in to the web console. See \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/configuring-smart-card-authentication-with-the-web-console_system-management-using-the-rhel-9-web-console\">Configuring smart card authentication with the web console for centrally managed users\u003C/a> for more information.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet up constraint delegation rules to list which hosts the ticket can access.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"example\" id=\"ex-setting-up-constraint-delegation-rules\">\u003Cp class=\"title\">\u003Cstrong>Example 5.1. Setting up constraint delegation rules\u003C/strong>\u003C/p>\u003Cdiv class=\"example-contents\">\u003Cp>\n\t\t\t\t\t\t\tThe web console session runs host \u003Ccode class=\"literal\">host.example.com\u003C/code> and should be trusted to access its own host with \u003Ccode class=\"literal\">sudo\u003C/code>. Additionally, we are adding second trusted host - \u003Ccode class=\"literal\">remote.example.com\u003C/code>.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tCreate the following delegation:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\tRun the following commands to add a list of target machines a particular rule can access:\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa servicedelegationtarget-add cockpit-target\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa servicedelegationtarget-add-member cockpit-target \\ --principals=host/host.example.com@EXAMPLE.COM \\ --principals=host/remote.example.com@EXAMPLE.COM\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\tTo allow the web console sessions (HTTP/principal) to access that host list, use the following commands:\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ipa servicedelegationrule-add cockpit-delegation\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa servicedelegationrule-add-member cockpit-delegation \\ --principals=HTTP/host.example.com@EXAMPLE.COM\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>ipa servicedelegationrule-add-target cockpit-delegation \\ --servicedelegationtargets=cockpit-target\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable GSS authentication in the corresponding services:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tFor sudo, enable the \u003Ccode class=\"literal\">pam_sss_gss\u003C/code> module in the \u003Ccode class=\"literal\">/etc/sssd/sssd.conf\u003C/code> file:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tAs root, add an entry for your domain to the \u003Ccode class=\"literal\">/etc/sssd/sssd.conf\u003C/code> configuration file.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">[domain/example.com]\npam_gssapi_services = sudo, sudo-i\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tEnable the module in the \u003Ccode class=\"literal\">/etc/pam.d/sudo\u003C/code> file on the first line.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">auth sufficient pam_sss_gss.so\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tFor SSH, update the \u003Ccode class=\"literal\">GSSAPIAuthentication\u003C/code> option in the \u003Ccode class=\"literal\">/etc/ssh/sshd_config\u003C/code> file to \u003Ccode class=\"literal\">yes\u003C/code>.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe delegated S4U ticket is not forwarded to remote SSH hosts when connecting to them from the web console. Authenticating to sudo on a remote host with your ticket will not work.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tLog in to the web console using a smart card.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick the \u003Ccode class=\"literal\">Limited access\u003C/code> button.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAuthenticate using your smart card.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tAlternatively:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTry to connect to a different host with SSH.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"limiting-user-sessions-and-memory-to-prevent-a-dos-attack_configuring-smart-card-authentication-with-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.7. Limiting user sessions and memory to prevent a DoS attack\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tA certificate authentication is protected by separating and isolating instances of the \u003Ccode class=\"literal\">cockpit-ws\u003C/code> web server against attackers who wants to impersonate another user. However, this introduces a potential denial of service (DoS) attack: A remote attacker could create a large number of certificates and send a large number of HTTPS requests to \u003Ccode class=\"literal\">cockpit-ws\u003C/code> each using a different certificate.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo prevent such DoS attacks, the collective resources of these web server instances are limited. By default, limits for the number of connections and memory usage are set to 200 threads and 75 % (soft) or 90 % (hard) memory limit.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe example procedure demonstrates resource protection by limiting the number of connections and memory.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the terminal, open the \u003Ccode class=\"literal\">system-cockpithttps.slice\u003C/code> configuration file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl edit system-cockpithttps.slice\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLimit the \u003Ccode class=\"literal\">TasksMax\u003C/code> to \u003Cspan class=\"emphasis\">\u003Cem>100\u003C/em>\u003C/span> and \u003Ccode class=\"literal\">CPUQuota\u003C/code> to \u003Cspan class=\"emphasis\">\u003Cem>30%\u003C/em>\u003C/span>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">[Slice]\n# change existing value\nTasksMax=\u003Cspan class=\"emphasis\">\u003Cem>100\u003C/em>\u003C/span>\n# add new restriction\nCPUQuota=\u003Cspan class=\"emphasis\">\u003Cem>30%\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo apply the changes, restart the system:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl daemon-reload\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl stop cockpit\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tNow, the new memory and user session lower the risk of DoS attacks on the \u003Ccode class=\"literal\">cockpit-ws\u003C/code> web server.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section _additional-resources\" id=\"additional_resources\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.8. Additional resources\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication\">Configuring Identity Management for smart card authentication\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/8/html/configuring_and_managing_identity_management/configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_configuring-and-managing-idm\">Configuring certificates issued by ADCS for smart card authentication in IdM\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-and-importing-local-certificates-to-a-smart-card_managing-smart-card-authentication\">Configuring and importing local certificates to a smart card\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-and-importing-local-certificates-to-a-smart-card_managing-smart-card-authentication\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 6. Configuring smart card authentication with local certificates\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tTo configure smart card authentication with local certificates:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tThe host is not connected to a domain.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tYou want to authenticate with a smart card on this host.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tYou want to configure SSH access using smart card authentication.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tYou want to configure the smart card with \u003Ccode class=\"literal\">authselect\u003C/code>.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tUse the following configuration to accomplish this scenario:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tObtain a user certificate for the user who wants to authenticate with a smart card. The certificate should be generated by a trustworthy Certification Authority used in the domain.\n\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\tIf you cannot get the certificate, you can generate a user certificate signed by a local certificate authority for testing purposes,\n\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tStore the certificate and private key in a smart card.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tConfigure the smart card authentication for SSH access.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tIf a host can be part of the domain, add the host to the domain and use certificates generated by Active Directory or Identity Management Certification Authority.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor details about how to create IdM certificates for a smart card, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication\">Configuring Identity Management for smart card authentication\u003C/a>.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tAuthselect installed\n\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\tThe authselect tool configures user authentication on Linux hosts and you can use it to configure smart card authentication parameters. For details about authselect, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_authentication_and_authorization_in_rhel/configuring-user-authentication-using-authselect_configuring-authentication-and-authorization-in-rhel#what-is-authselect-used-for_configuring-user-authentication-using-authselect\">Explaining authselect\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tSmart Card or USB devices supported by RHEL 9\n\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/articles/4253861\">Smart Card support in RHEL9\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"creating-local-certificates_configuring-and-importing-local-certificates-to-a-smart-card\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">6.1. Creating local certificates\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFollow this procedure to perform the following tasks:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tGenerate the OpenSSL certificate authority\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCreate a certificate signing request\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe following steps are intended for testing purposes only. Certificates generated by a local self-signed Certificate Authority are not as secure as using AD, IdM, or RHCS Certification Authority. You should use a certificate generated by your enterprise Certification Authority even if the host is not part of the domain.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a directory where you can generate the certificate, for example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># mkdir /tmp/ca\n# cd /tmp/ca\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet up the certificate (copy this text to your command line in the \u003Ccode class=\"literal\">ca\u003C/code> directory):\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">cat &gt; ca.cnf &lt;&lt;EOF\n[ ca ]\ndefault_ca = CA_default\n\n[ CA_default ]\ndir              = .\ndatabase         = \\$dir/index.txt\nnew_certs_dir    = \\$dir/newcerts\n\ncertificate      = \\$dir/rootCA.crt\nserial           = \\$dir/serial\nprivate_key      = \\$dir/rootCA.key\nRANDFILE         = \\$dir/rand\n\ndefault_days     = 365\ndefault_crl_days = 30\ndefault_md       = sha256\n\npolicy           = policy_any\nemail_in_dn      = no\n\nname_opt         = ca_default\ncert_opt         = ca_default\ncopy_extensions  = copy\n\n[ usr_cert ]\nauthorityKeyIdentifier = keyid, issuer\n\n[ v3_ca ]\nsubjectKeyIdentifier   = hash\nauthorityKeyIdentifier = keyid:always,issuer:always\nbasicConstraints       = CA:true\nkeyUsage               = critical, digitalSignature, cRLSign, keyCertSign\n\n[ policy_any ]\norganizationName       = supplied\norganizationalUnitName = supplied\ncommonName             = supplied\nemailAddress           = optional\n\n[ req ]\ndistinguished_name = req_distinguished_name\nprompt             = no\n\n[ req_distinguished_name ]\nO  = Example\nOU = Example Test\nCN = Example Test CA\nEOF\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the following directories:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># mkdir certs crl newcerts\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the following files:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># touch index.txt crlnumber index.txt.attr\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tWrite the number 01 in the serial file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># echo 01 &gt; serial\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis command writes a number 01 in the serial file. It is a serial number of the certificate. With each new certificate released by this CA the number increases by one.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate an OpenSSL root CA key:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># openssl genrsa -out rootCA.key 2048\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a self-signed root Certification Authority certificate:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># openssl req -batch -config ca.cnf \\\n    -x509 -new -nodes -key rootCA.key -sha256 -days 10000 \\\n    -set_serial 0 -extensions v3_ca -out rootCA.crt\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the key for your username:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># openssl genrsa -out example.user.key 2048\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis key is generated in the local system which is not secure, therefore, remove the key from the system when the key is stored in the card.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou can create a key directly in the smart card as well. For doing this, follow instructions created by the manufacturer of your smart card.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the certificate signing request configuration file (copy this text to your command line in the ca directory):\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">cat &gt; req.cnf &lt;&lt;EOF\n[ req ]\ndistinguished_name = req_distinguished_name\nprompt = no\n\n[ req_distinguished_name ]\nO = Example\nOU = Example Test\nCN = testuser\n\n[ req_exts ]\nbasicConstraints = CA:FALSE\nnsCertType = client, email\nnsComment = \"testuser\"\nsubjectKeyIdentifier = hash\nkeyUsage = critical, nonRepudiation, digitalSignature, keyEncipherment\nextendedKeyUsage = clientAuth, emailProtection, msSmartcardLogin\nsubjectAltName = otherName:msUPN;UTF8:testuser@EXAMPLE.COM, email:testuser@example.com\nEOF\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a certificate signing request for your example.user certificate:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># openssl req -new -nodes -key example.user.key \\\n    -reqexts req_exts -config req.cnf -out example.user.csr\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the new certificate. Expiration period is set to 1 year:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># openssl ca -config ca.cnf -batch -notext \\\n    -keyfile rootCA.key -in example.user.csr -days 365 \\\n    -extensions usr_cert -out example.user.crt\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tAt this point, the certification authority and certificates are successfully generated and prepared for import into a smart card.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"proc_copying-certificate-to-the-sssd-directory_configuring-and-importing-local-certificates-to-a-smart-card\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">6.2. Copying certificates to the SSSD directory\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tGNOME Desktop Manager (GDM) requires SSSD. If you use GDM, you need to copy the PEM certificate to the \u003Ccode class=\"literal\">/etc/sssd/pki\u003C/code> directory.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe local CA authority and certificates have been generated\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnsure that you have SSSD installed on the system.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># rpm -q sssd\nsssd-2.0.0.43.el8_0.3.x86_64\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a \u003Ccode class=\"literal\">/etc/sssd/pki\u003C/code> directory:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># file /etc/sssd/pki\n/etc/sssd/pki/: directory\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCopy the \u003Ccode class=\"literal\">rootCA.crt\u003C/code> as a PEM file in the \u003Ccode class=\"literal\">/etc/sssd/pki/\u003C/code> directory:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># cp /tmp/ca/rootCA.crt /etc/sssd/pki/sssd_auth_ca_db.pem\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tNow you have successfully generated the certificate authority and certificates, and you have saved them in the \u003Ccode class=\"literal\">/etc/sssd/pki\u003C/code> directory.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIf you want to share the Certificate Authority certificates with another application, you can change the location in sssd.conf:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tSSSD PAM responder: \u003Ccode class=\"literal\">pam_cert_db_path\u003C/code> in the \u003Ccode class=\"literal\">[pam]\u003C/code> section\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tSSSD ssh responder: \u003Ccode class=\"literal\">ca_db\u003C/code> in the \u003Ccode class=\"literal\">[ssh]\u003C/code> section\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\t\tFor details, see man page for \u003Ccode class=\"literal\">sssd.conf\u003C/code>.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tRed Hat recommends keeping the default path and using a dedicated Certificate Authority certificate file for SSSD to make sure that only Certificate Authorities trusted for authentication are listed here.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"installing-tools-for-managing-and-using-smart-cards_configuring-and-importing-local-certificates-to-a-smart-card\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">6.3. Installing tools for managing and using smart cards\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">gnutls-utils\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">opensc\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">pcscd\u003C/code> service is running.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBefore you can configure your smart card, you must install the corresponding tools, which can generate certificates and start the \u003Ccode class=\"literal\">pscd\u003C/code> service.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">opensc\u003C/code> and \u003Ccode class=\"literal\">gnutls-utils\u003C/code> packages:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf -y install opensc gnutls-utils\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart the \u003Ccode class=\"literal\">pcscd\u003C/code> service.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl start pcscd\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the \u003Ccode class=\"literal\">pcscd\u003C/code> service is up and running\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl status pcscd\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"storing-a-certificate-on-the-smart-card_configuring-and-importing-local-certificates-to-a-smart-card\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">6.4. Preparing your smart card and uploading your certificates and keys to your smart card\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFollow this procedure to configure your smart card with the \u003Ccode class=\"literal\">pkcs15-init\u003C/code> tool, which helps you to configure:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tErasing your smart card\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSetting new PINs and optional PIN Unblocking Keys (PUKs)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCreating a new slot on the smart card\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStoring the certificate, private key, and public key in the slot\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf required, locking the smart card settings as certain smart cards require this type of finalization\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe \u003Ccode class=\"literal\">pkcs15-init\u003C/code> tool may not work with all smart cards. You must use the tools that work with the smart card you are using.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">opensc\u003C/code> package, which includes the \u003Ccode class=\"literal\">pkcs15-init\u003C/code> tool, is installed.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor more details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication#installing-tools-for-managing-and-using-smart-cards_configuring-idm-for-smart-card-auth\">Installing tools for managing and using smart cards\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe card is inserted in the reader and connected to the computer.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have a private key, a public key, and a certificate to store on the smart card. In this procedure, \u003Ccode class=\"literal\">testuser.key\u003C/code>, \u003Ccode class=\"literal\">testuserpublic.key\u003C/code>, and \u003Ccode class=\"literal\">testuser.crt\u003C/code> are the names used for the private key, public key, and the certificate.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have your current smart card user PIN and Security Officer PIN (SO-PIN).\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tErase your smart card and authenticate yourself with your PIN:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init --erase-card --use-default-transport-keys\u003C/strong>\u003C/span>\nUsing reader with a card: \u003Cspan class=\"emphasis\">\u003Cem>Reader name\u003C/em>\u003C/span>\nPIN [Security Officer PIN] required.\nPlease enter PIN [Security Officer PIN]:\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe card has been erased.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInitialize your smart card, set your user PIN and PUK, and your Security Officer PIN and PUK:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init --create-pkcs15 --use-default-transport-keys \\ --pin \u003Cspan class=\"emphasis\">\u003Cem>963214\u003C/em>\u003C/span> --puk \u003Cspan class=\"emphasis\">\u003Cem>321478\u003C/em>\u003C/span> --so-pin \u003Cspan class=\"emphasis\">\u003Cem>65498714\u003C/em>\u003C/span> --so-puk \u003Cspan class=\"emphasis\">\u003Cem>784123\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nUsing reader with a card: \u003Cspan class=\"emphasis\">\u003Cem>Reader name\u003C/em>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">pcks15-init\u003C/code> tool creates a new slot on the smart card.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet a label and the authentication ID for the slot:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init --store-pin --label testuser \\ --auth-id 01 --so-pin \u003Cspan class=\"emphasis\">\u003Cem>65498714\u003C/em>\u003C/span> --pin \u003Cspan class=\"emphasis\">\u003Cem>963214\u003C/em>\u003C/span> --puk \u003Cspan class=\"emphasis\">\u003Cem>321478\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nUsing reader with a card: \u003Cspan class=\"emphasis\">\u003Cem>Reader name\u003C/em>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe label is set to a human-readable value, in this case, \u003Ccode class=\"literal\">testuser\u003C/code>. The \u003Ccode class=\"literal\">auth-id\u003C/code> must be two hexadecimal values, in this case it is set to \u003Ccode class=\"literal\">01\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStore and label the private key in the new slot on the smart card:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init --store-private-key testuser.key --label testuser_key \\ --auth-id 01 --id 01 --pin \u003Cspan class=\"emphasis\">\u003Cem>963214\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nUsing reader with a card: \u003Cspan class=\"emphasis\">\u003Cem>Reader name\u003C/em>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe value you specify for \u003Ccode class=\"literal\">--id\u003C/code> must be the same when storing your private key and storing your certificate in the next step. Specifying your own value for \u003Ccode class=\"literal\">--id\u003C/code> is recommended as otherwise a more complicated value is calculated by the tool.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStore and label the certificate in the new slot on the smart card:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init --store-certificate testuser.crt --label testuser_crt \\ --auth-id 01 --id 01 --format pem --pin \u003Cspan class=\"emphasis\">\u003Cem>963214\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nUsing reader with a card: \u003Cspan class=\"emphasis\">\u003Cem>Reader name\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Store and label the public key in the new slot on the smart card:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init --store-public-key testuserpublic.key --label testuserpublic_key --auth-id 01 --id 01 --pin \u003Cspan class=\"emphasis\">\u003Cem>963214\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\nUsing reader with a card: \u003Cspan class=\"emphasis\">\u003Cem>Reader name\u003C/em>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tIf the public key corresponds to a private key or certificate, specify the same ID as the ID of the private key or certificate.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Certain smart cards require you to finalize the card by locking the settings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>pkcs15-init -F\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAt this stage, your smart card includes the certificate, private key, and public key in the newly created slot. You have also created your user PIN and PUK and the Security Officer PIN and PUK.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-ssh-access-using-smart-card-authentication_configuring-and-importing-local-certificates-to-a-smart-card\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">6.5. Configuring SSH access using smart card authentication\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tSSH connections require authentication. You can use a password or a certificate. Follow this procedure to enable authentication using a certificate stored on a smart card.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor details about configuring smart cards with \u003Ccode class=\"literal\">authselect\u003C/code>, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-smart-cards-using-authselect_managing-smart-card-authentication\">Configuring smart cards using authselect\u003C/a>.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe smart card contains your certificate and private key.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe card is inserted in the reader and connected to the computer.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYour username matches the Common Name (CN) or User ID (UID) in the certificate’s SUBJECT.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">pcscd\u003C/code> service is running on your local machine.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-and-importing-local-certificates-to-a-smart-card_managing-smart-card-authentication#installing-tools-for-managing-and-using-smart-cards_configuring-and-importing-local-certificates-to-a-smart-card\">Installing tools for managing and using smart cards\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a new directory for SSH keys in the home directory of the user who uses smart card authentication:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># mkdir /home/example.user/.ssh\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the \u003Ccode class=\"literal\">ssh-keygen -D\u003C/code> command with the \u003Ccode class=\"literal\">opensc\u003C/code> library to retrieve the existing public key paired with the private key on the smart card, and add it to the \u003Ccode class=\"literal\">authorized_keys\u003C/code> list of the user’s SSH keys directory to enable SSH access with smart card authentication.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># ssh-keygen -D /usr/lib64/pkcs11/opensc-pkcs11.so &gt;&gt; ~example.user/.ssh/authorized_keys\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSSH requires access right configuration for the \u003Ccode class=\"literal\">/.ssh\u003C/code> directory and the \u003Ccode class=\"literal\">authorized_keys\u003C/code> file. To set or change the access rights, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># chown -R example.user:example.user ~example.user/.ssh/\n# chmod 700 ~example.user/.ssh/\n# chmod 600 ~example.user/.ssh/authorized_keys\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the keys:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># cat ~example.user/.ssh/authorized_keys\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe terminal displays the keys.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tYou can verify the SSH access with the following command:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># ssh -I /usr/lib64/opensc-pkcs11.so -l example.user localhost hostname\u003C/pre>\u003Cp>\n\t\t\t\tIf the configuration is successful, you are prompted to enter the smart card PIN.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe configuration works now locally. Now you can copy the public key and distribute it to \u003Ccode class=\"literal\">authorized_keys\u003C/code> files located on all servers on which you want to use SSH.\n\t\t\t\u003C/p>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-smart-cards-using-authselect_managing-smart-card-authentication\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 7. Configuring smart card authentication using authselect\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tThis section describes how to configure your smart card to achieve one of the following aims:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tEnable both password and smart card authentication\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tDisable password and enable smart card authentication\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tEnable lock on removal\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tAuthselect installed\n\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\tThe authselect tool configures user authentication on Linux hosts and you can use it to configure smart card authentication parameters. For details about authselect, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_authentication_and_authorization_in_rhel/index#configuring-user-authentication-using-authselect_configuring-authentication-and-authorization-in-rhel\">Configuring user authentication using authselect\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tSmart Card or USB devices supported by RHEL 9\n\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/articles/4253861\">Smart Card support in RHEL9\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"certificates-eligible-for-smart-cards_configuring-smart-cards-using-authselect\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.1. Certificates eligible for smart cards\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBefore you can configure a smart card with \u003Ccode class=\"literal\">authselect\u003C/code>, you must import a certificate into your card. You can use the following tools to generate the certificate:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tActive Directory (AD)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIdentity Management (IdM)\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details about how to create IdM certificates, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_certificates_in_idm/dc-web-ui-auth_managing-certificates-in-idm#requesting-and-exporting-a-user-certificate_dc-web-ui-auth\">Requesting a new user certificate and exporting it to the client\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRed Hat Certificate System (RHCS)\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_certificate_system/10/html/managing_smart_cards_with_the_enterprise_security_client/index\">Managing Smart Cards with the Enterprise Security Client\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThird-party Certification Authority (CA)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLocal Certification Authority. You can use a certificate generated by the Local Certification Authority if the user is not part of a domain or for testing purposes.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details about how to create and import local certificates into a smart card, \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/configuring-and-importing-local-certificates-to-a-smart-card_managing-smart-card-authentication\">Configuring and importing local certificates to a smart card\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-smart-card-authentication-to-enable-user-password-authentication_configuring-smart-cards-using-authselect\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.2. Configure your system to enable both smart card and password authentication\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFollow this procedure to enable both smart card and password authentication on your system.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe Smart card contains your certificate and private key.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe card is inserted into the reader and connected to the computer.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">authselect\u003C/code> tool is installed on your system.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter the following command to allow smart card and password authentication:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># authselect select sssd with-smartcard --force\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tAt this point, smart card authentication is enabled, however, password authentication will work if you forget your smart card at home.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"configuring-authselect-to-enforce-smart-card-authentication_configuring-smart-cards-using-authselect\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.3. Configuring your system to enforce smart card authentication\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">authselect\u003C/code> tool enables you to configure smart card authentication on your system and to disable the default password authentication. The \u003Ccode class=\"literal\">authselect\u003C/code> command includes the following options:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">with-smartcard\u003C/code> — enables smart card authentication in addition to password authentication\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">with-smartcard-required\u003C/code>  — enables smart card authentication and disables password authentication\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe \u003Ccode class=\"literal\">with-smartcard-required\u003C/code> option only enforces exclusive smart card authentication for login services, such as \u003Ccode class=\"literal\">login\u003C/code>, \u003Ccode class=\"literal\">gdm\u003C/code>, \u003Ccode class=\"literal\">xdm\u003C/code>, \u003Ccode class=\"literal\">kdm\u003C/code>, \u003Ccode class=\"literal\">xscreensaver\u003C/code>, \u003Ccode class=\"literal\">gnome-screensaver\u003C/code>, and \u003Ccode class=\"literal\">kscreensaver\u003C/code>. Other services, such as \u003Ccode class=\"literal\">su\u003C/code> or \u003Ccode class=\"literal\">sudo\u003C/code> for switching users, do not use smart card authentication by default and will continue to prompt you for a password.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSmart card contains your certificate and private key.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe card is inserted into the reader and connected to the computer.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">authselect\u003C/code> tool is installed on your local system.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter the following command to enforce smart card authentication:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># authselect select sssd with-smartcard  with-smartcard-required --force\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tOnce you run this command, password authentication will no longer work and you can only log in with a smart card. Ensure smart card authentication is working before running this command or you may be locked out of your system.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"configuring-smart-card-authentication-with-lock-on-removal_configuring-smart-cards-using-authselect\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.4. Configuring smart card authentication with lock on removal\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">authselect\u003C/code> service enables you to configure your smart card authentication to lock your screen instantly after removing the smart card from the reader. The \u003Ccode class=\"literal\">authselect\u003C/code> command must include the following variables:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">with-smartcard\u003C/code> — enabling smart card authentication\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">with-smartcard-required\u003C/code> — enabling exclusive smart card authentication (authentication with a password is disabled)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">with-smartcard-lock-on-removal\u003C/code> — enforcing log out after the smart card removal\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">with-smartcard-lock-on-removal\u003C/code> option only works on systems with the GNOME desktop environment. If you are using a system that is \u003Ccode class=\"literal\">tty\u003C/code> or console based and you remove your smart card from its reader, you are not automatically locked out of the system.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSmart card contains your certificate and private key.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe card is inserted into the reader and connected to the computer.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">authselect\u003C/code> tool is installed on your local system.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter the following command to enable smart card authentication, disable password authentication, and enforce lock on removal:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># authselect select sssd  with-smartcard  with-smartcard-required with-smartcard-lock-on-removal --force\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tNow, when you remove the card, the screen locks. You must re-insert your smart card to unlock it.\n\t\t\t\u003C/p>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_authenticating-to-sudo-remotely-using-smart-cards_managing-smart-card-authentication\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 8. Authenticating to sudo remotely using smart cards\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tThis section describes how to authenticate to sudo remotely using smart cards. After the \u003Ccode class=\"literal\">ssh-agent\u003C/code> service is running locally and can forward the \u003Ccode class=\"literal\">ssh-agent\u003C/code> socket to a remote machine, you can use the SSH authentication protocol in the sudo PAM module to authenticate users remotely.\n\t\t\u003C/p>\u003Cp>\n\t\t\tAfter logging in locally using a smart card, you can log in through SSH to the remote machine and run the \u003Ccode class=\"literal\">sudo\u003C/code> command without being prompted for a password by using SSH forwarding of the smart card authentication.\n\t\t\u003C/p>\u003Cp>\n\t\t\tFor the purposes of this example, a client is connecting to the IPA server through SSH and running the sudo command on the IPA server with credentials stored on a smart card.\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_authenticating-to-sudo-remotely-using-smart-cards_managing-smart-card-authentication#proc_creating-sudo-rules-in-idm_assembly_authenticating-to-sudo-remotely-using-smart-cards\">Creating sudo rules in IdM\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_authenticating-to-sudo-remotely-using-smart-cards_managing-smart-card-authentication#proc_setting-up-the-pam-module-for-sudo_assembly_authenticating-to-sudo-remotely-using-smart-cards\">Setting up the PAM module for sudo\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_authenticating-to-sudo-remotely-using-smart-cards_managing-smart-card-authentication#proc_connecting-to-sudo-remotely-using-a-smart-card_assembly_authenticating-to-sudo-remotely-using-smart-cards\">Connecting to sudo remotely using a smart card\u003C/a>\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"proc_creating-sudo-rules-in-idm_assembly_authenticating-to-sudo-remotely-using-smart-cards\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.1. Creating sudo rules in IdM\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFollow this procedure to create sudo rules in IdM to give \u003Ccode class=\"literal\">ipauser1\u003C/code> permission to run sudo on the remote host.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor the purposes of this example, the \u003Ccode class=\"literal\">less\u003C/code> and \u003Ccode class=\"literal\">whoami\u003C/code> commands are added as sudo commands to test the procedure.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe IdM user has been created. For the purpose of this example, the user is \u003Ccode class=\"literal\">ipauser1\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have the hostname of the system where you are running sudo remotely. For the purpose of this example, the host is \u003Ccode class=\"literal\">server.ipa.test\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a \u003Ccode class=\"literal\">sudo\u003C/code> rule named \u003Ccode class=\"literal\">adminrule\u003C/code> to allow a user to run commands.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">ipa sudorule-add adminrule\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd \u003Ccode class=\"literal\">less\u003C/code> and \u003Ccode class=\"literal\">whoami\u003C/code> as \u003Ccode class=\"literal\">sudo\u003C/code> commands:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">ipa sudocmd-add /usr/bin/less\nipa sudocmd-add /usr/bin/whoami\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the \u003Ccode class=\"literal\">less\u003C/code> and \u003Ccode class=\"literal\">whoami\u003C/code> commands to the \u003Ccode class=\"literal\">adminrule\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">ipa sudorule-add-allow-command adminrule --sudocmds /usr/bin/less\nipa sudorule-add-allow-command adminrule --sudocmds /usr/bin/whoami\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the \u003Ccode class=\"literal\">ipauser1\u003C/code> user to the \u003Ccode class=\"literal\">adminrule\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">ipa sudorule-add-user adminrule --users ipauser1\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the host on which you are running \u003Ccode class=\"literal\">sudo\u003C/code> to the \u003Ccode class=\"literal\">adminrule\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">ipa sudorule-add-host adminrule --hosts server.ipa.test\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSee \u003Ccode class=\"literal\">ipa sudorule-add --help\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSee \u003Ccode class=\"literal\">ipa sudocmd-add --help\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_setting-up-the-pam-module-for-sudo_assembly_authenticating-to-sudo-remotely-using-smart-cards\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.2. Setting up the PAM module for sudo\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFollow this procedure to install and set up the \u003Ccode class=\"literal\">pam_ssh_agent_auth.so\u003C/code> PAM module for sudo authentication with a smart card on any host where you are running sudo.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the PAM SSH agent:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">dnf -y install pam_ssh_agent_auth\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the \u003Ccode class=\"literal\">authorized_keys_command\u003C/code> for \u003Ccode class=\"literal\">pam_ssh_agent_auth.so\u003C/code> to the \u003Ccode class=\"literal\">/etc/pam.d/sudo\u003C/code> file before any other \u003Ccode class=\"literal\">auth\u003C/code> entry:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">#%PAM-1.0\n\u003Cspan class=\"strong strong\">\u003Cstrong>auth sufficient pam_ssh_agent_auth.so authorized_keys_command=/usr/bin/sss_ssh_authorizedkeys\u003C/strong>\u003C/span>\nauth       include      system-auth\naccount    include      system-auth\npassword   include      system-auth\nsession    include      system-auth\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo enable the SSH agent forwarding to work when you run sudo commands, add the following to the \u003Ccode class=\"literal\">/etc/sudoers\u003C/code> file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">Defaults env_keep += \"SSH_AUTH_SOCK\"\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis allows users who have their public keys from smart cards stored in IPA/SSSD to authenticate to sudo without entering a password.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRestart the \u003Ccode class=\"literal\">sssd\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">systemctl restart sssd\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSee the \u003Ccode class=\"literal\">pam\u003C/code> man page on your system.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_connecting-to-sudo-remotely-using-a-smart-card_assembly_authenticating-to-sudo-remotely-using-smart-cards\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.3. Connecting to sudo remotely using a smart card\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFollow this procedure to configure the SSH agent and client to connect to \u003Ccode class=\"literal\">sudo\u003C/code> remotely using a smart card.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have created \u003Ccode class=\"literal\">sudo\u003C/code> rules in IdM.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have installed and set up the \u003Ccode class=\"literal\">pam_ssh_agent_auth\u003C/code> PAM module for \u003Ccode class=\"literal\">sudo\u003C/code> authentication on the remote system where you are going to run \u003Ccode class=\"literal\">sudo\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart the SSH agent (if not already running).\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">eval `ssh-agent`\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd your smart card to the SSH agent. Enter your PIN when prompted:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">ssh-add -s /usr/lib64/opensc-pkcs11.so\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConnect to the system where you need to run \u003Ccode class=\"literal\">sudo\u003C/code> remotely by using SSH with ssh-agent forwarding enabled. Use the \u003Ccode class=\"literal\">-A\u003C/code> option:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">ssh -A ipauser1@server.ipa.test\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the \u003Ccode class=\"literal\">whoami\u003C/code> command with \u003Ccode class=\"literal\">sudo\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">sudo /usr/bin/whoami\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tYou are not prompted for a PIN or password when the smart card is inserted.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIf the SSH agent is configured to use other sources, such as the GNOME Keyring, and you run the \u003Ccode class=\"literal\">sudo\u003C/code> command after removing the smart card, you might not be prompted for a PIN or password, as one of the other sources might provide access to a valid private key. To check the public keys of all identities known by the SSH agent, run the \u003Ccode class=\"literal\">ssh-add -L\u003C/code> command.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/securing_networks/assembly_using-secure-communications-between-two-systems-with-openssh_securing-networks\">Using secure communications between two systems with OpenSSH\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/securing_networks/assembly_using-secure-communications-between-two-systems-with-openssh_securing-networks#connecting-to-remote-machines-with-ssh-keys-using-ssh-agent_assembly_using-secure-communications-between-two-systems-with-openssh\">Connecting to remote machines with SSH keys using ssh-agent\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"authenticating-as-an-active-directory-user-using-pkinit-with-a-smart-card_managing-smart-card-authentication\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 9. Authenticating as an Active Directory user using PKINIT with a smart card\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tActive Directory (AD) users can authenticate with a smart card to a desktop client system joined to IdM and get a Kerberos ticket-granting ticket (TGT). These tickets can be used for single sign-on (SSO) authentication from the client.\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tThe client is configured for smart card authentication.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tThe \u003Ccode class=\"literal\">krb5-pkinit\u003C/code> package is installed.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tThe AD server is configured to trust the certificate authority (CA) that issued the smart card certificate. Import the CA certificates into the NTAuth store (see \u003Ca class=\"link\" href=\"https://learn.microsoft.com/en-US/troubleshoot/windows-server/certificates-and-public-key-infrastructure-pki/import-third-party-ca-to-enterprise-ntauth-store\">Microsoft support\u003C/a>) and add the CA as a trusted CA. See Active Directory documentation for details.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tConfigure the Kerberos client to trust the CA that issued the smart card certificate:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tOn the IdM client, open the \u003Ccode class=\"literal\">/etc/krb5.conf\u003C/code> file.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tAdd the following lines to the file:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[realms]\n  AD.DOMAIN.COM = {\n    pkinit_eku_checking = kpServerAuth\n    pkinit_kdc_hostname = adserver.ad.domain.com\n  }\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tIf the user certificates do not contain a certificate revocation list (CRL) distribution point extension, configure AD to ignore revocation errors:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tSave the following REG-formatted content in a plain text file and import it to the Windows registry:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">Windows Registry Editor Version 5.00\n\n[HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\Kdc]\n\"UseCachedCRLOnlyAndIgnoreRevocationUnknownErrors\"=dword:00000001\n\n[HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\LSA\\Kerberos\\Parameters]\n\"UseCachedCRLOnlyAndIgnoreRevocationUnknownErrors\"=dword:00000001\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tAlternatively, you can set the values manually by using the \u003Ccode class=\"literal\">regedit.exe\u003C/code> application.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tReboot the Windows system to apply the changes.\n\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\tAuthenticate by using the \u003Ccode class=\"literal\">kinit\u003C/code> utility on an Identity Management client. Specify the Active Directory user with the user name and domain name:\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ kinit -X X509_user_identity='PKCS11:opensc-pkcs11.so' ad_user@AD.DOMAIN.COM\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\tThe \u003Ccode class=\"literal\">-X\u003C/code> option specifies the \u003Ccode class=\"literal\">opensc-pkcs11.so module\u003C/code> as the pre-authentication attribute.\n\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ccode class=\"literal\">kinit(1)\u003C/code> man page on your system\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_troubleshooting-authentication-with-smart-cards_managing-smart-card-authentication\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 10. Troubleshooting authentication with smart cards\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tThe following sections describe how to resolve some of the issues you might encounter when setting up smart card authentication.\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_testing-smart-card-authentication_assembly_troubleshooting-authentication-with-smart-cards\" title=\"10.1. Testing smart card access on the system\">Testing smart card authentication\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_troubleshooting-smart-card-authentication-with-sssd_assembly_troubleshooting-authentication-with-smart-cards\" title=\"10.2. Troubleshooting smart card authentication with SSSD\">Troubleshooting smart card authentication with SSSD\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_verifying-that-idm-kerberos-kdc-can-use-pkinit-and-that-the-ca-certificates-are-correctly-located_assembly_troubleshooting-authentication-with-smart-cards\" title=\"10.3. Verifying that IdM Kerberos KDC can use PKINIT and that the CA certificates are correctly located\">Verifying that IdM Kerberos KDC can use PKINIT and that the CA certificates are correctly located\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_increasing-sssd-timeouts_assembly_troubleshooting-authentication-with-smart-cards\" title=\"10.4. Increasing SSSD timeouts\">Increasing SSSD timeouts\u003C/a>\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"#assembly_troubleshooting-certificate-mapping-and-matching-rules_assembly_troubleshooting-authentication-with-smart-cards\" title=\"10.5. Troubleshooting certificate mapping and matching rules\">Troubleshooting certificate mapping and matching rules\u003C/a>\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"proc_testing-smart-card-authentication_assembly_troubleshooting-authentication-with-smart-cards\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">10.1. Testing smart card access on the system\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFollow this procedure to test whether you can access your smart card.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have installed and configured your IdM Server and client for use with smart cards.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have installed the \u003Ccode class=\"literal\">certutil\u003C/code> tool from the \u003Ccode class=\"literal\">nss-tools\u003C/code> package.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have the PIN or password for your smart card.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUsing the \u003Ccode class=\"literal\">lsusb\u003C/code> command, verify that the smart card reader is visible to the operating system:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\">$ lsusb\nBus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub\n\u003Cspan class=\"strong strong\">\u003Cstrong>Bus 001 Device 003: ID 072f:b100 Advanced Card Systems, Ltd ACR39U\u003C/strong>\u003C/span>\nBus 001 Device 002: ID 0627:0001 Adomax Technology Co., Ltd\nBus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor more information about the smart cards and readers tested and supported in RHEL, see \u003Ca class=\"link\" href=\"https://access.redhat.com/articles/4253861\">Smart Card support in RHEL 9\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnsure that the \u003Ccode class=\"literal\">pcscd\u003C/code> service and socket are enabled and running:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\">$ systemctl status pcscd.service pcscd.socket\n\n● pcscd.service - PC/SC Smart Card Daemon\n      \u003Cspan class=\"strong strong\">\u003Cstrong>Loaded: loaded\u003C/strong>\u003C/span> (/usr/lib/systemd/system/pcscd.service; indirect;\nvendor preset: disabled)\n      \u003Cspan class=\"strong strong\">\u003Cstrong>Active: active (running)\u003C/strong>\u003C/span> since Fri 2021-09-24 11:05:04 CEST; 2\nweeks 6 days ago\nTriggeredBy: ● pcscd.socket\n        Docs: man:pcscd(8)\n    Main PID: 3772184 (pcscd)\n       Tasks: 12 (limit: 38201)\n      Memory: 8.2M\n         CPU: 1min 8.067s\n      CGroup: /system.slice/pcscd.service\n              └─3772184 /usr/sbin/pcscd --foreground --auto-exit\n\n● pcscd.socket - PC/SC Smart Card Daemon Activation Socket\n      \u003Cspan class=\"strong strong\">\u003Cstrong>Loaded: loaded\u003C/strong>\u003C/span> (/usr/lib/systemd/system/pcscd.socket; enabled;\nvendor preset: enabled)\n      \u003Cspan class=\"strong strong\">\u003Cstrong>Active: active (running)\u003C/strong>\u003C/span> since Fri 2021-09-24 11:05:04 CEST; 2\nweeks 6 days ago\n    Triggers: ● pcscd.service\n      Listen: /run/pcscd/pcscd.comm (Stream)\n      CGroup: /system.slice/pcscd.socket\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUsing the \u003Ccode class=\"literal\">p11-kit list-modules\u003C/code> command, display information about the configured smart card and the tokens present on the smart card:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\">$ p11-kit list-modules\np11-kit-trust: p11-kit-trust.so\n[...]\nopensc: opensc-pkcs11.so\n    library-description: OpenSC smartcard framework\n    library-manufacturer: OpenSC Project\n    library-version: 0.20\n    \u003Cspan class=\"strong strong\">\u003Cstrong>token: MyEID (sctest)\u003C/strong>\u003C/span>\n        manufacturer: Aventra Ltd.\n        model: PKCS#15\n        serial-number: 8185043840990797\n        firmware-version: 40.1\n        flags:\n               rng\n               login-required\n               user-pin-initialized\n               token-initialized\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify you can access the contents of your smart card:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\">$ pkcs11-tool --list-objects --login\nUsing slot 0 with a present token (0x0)\nLogging in to \"MyEID (sctest)\".\nPlease enter User PIN:\nPrivate Key Object; RSA\n  label:      Certificate\n  ID:         01\n  Usage:      sign\n  Access:     sensitive\nPublic Key Object; RSA 2048 bits\n  label:      Public Key\n  ID:         01\n  Usage:      verify\n  Access:     none\nCertificate Object; type = X.509 cert\n  label:      Certificate\n  subject:    DN: O=IDM.EXAMPLE.COM, CN=idmuser1\n  ID:         01\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the contents of the certificate on your smart card using the \u003Ccode class=\"literal\">certutil\u003C/code> command:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRun the following command to determine the correct name of your certificate:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\">$ certutil -d /etc/pki/nssdb -L -h all\n\nCertificate Nickname                                         Trust Attributes\n                                                             SSL,S/MIME,JAR/XPI\n\nEnter Password or Pin for \"MyEID (sctest)\":\nSmart Card CA 0f5019a8-7e65-46a1-afe5-8e17c256ae00           CT,C,C\n\u003Cspan class=\"strong strong\">\u003Cstrong>MyEID (sctest):Certificate\u003C/strong>\u003C/span>                                   u,u,u\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tDisplay the contents of the certificate on your smart card:\n\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tEnsure the name of the certificate is an exact match for the output displayed in the previous step, in this example \u003Ccode class=\"literal\">MyEID (sctest):Certificate\u003C/code>.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cpre class=\"screen white-space-pre white-space-pre\">$ certutil -d /etc/pki/nssdb -L -n \"MyEID (sctest):Certificate\"\n\nEnter Password or Pin for \"MyEID (sctest)\":\nCertificate:\n    Data:\n        Version: 3 (0x2)\n        Serial Number: 15 (0xf)\n        Signature Algorithm: PKCS #1 SHA-256 With RSA Encryption\n        Issuer: \"CN=Certificate Authority,O=IDM.EXAMPLE.COM\"\n        Validity:\n            Not Before: Thu Sep 30 14:01:41 2021\n            Not After : Sun Oct 01 14:01:41 2023\n        Subject: \"CN=idmuser1,O=IDM.EXAMPLE.COM\"\n        Subject Public Key Info:\n            Public Key Algorithm: PKCS #1 RSA Encryption\n            RSA Public Key:\n                Modulus:\n                    [...]\n                Exponent: 65537 (0x10001)\n        Signed Extensions:\n            Name: Certificate Authority Key Identifier\n            Key ID:\n                e2:27:56:0d:2f:f5:f2:72:ce:de:37:20:44:8f:18:7f:\n                2f:56:f9:1a\n\n            Name: Authority Information Access\n            Method: PKIX Online Certificate Status Protocol\n            Location:\n                URI: \"http://ipa-ca.idm.example.com/ca/ocsp\"\n\n            Name: Certificate Key Usage\n            Critical: True\n            Usages: Digital Signature\n                    Non-Repudiation\n                    Key Encipherment\n                    Data Encipherment\n\n            Name: Extended Key Usage\n                TLS Web Server Authentication Certificate\n                TLS Web Client Authentication Certificate\n\n            Name: CRL Distribution Points\n            Distribution point:\n                URI: \"http://ipa-ca.idm.example.com/ipa/crl/MasterCRL.bin\"\n                CRL issuer:\n                    Directory Name: \"CN=Certificate Authority,O=ipaca\"\n\n            Name: Certificate Subject Key ID\n            Data:\n                43:23:9f:c1:cf:b1:9f:51:18:be:05:b5:44:dc:e6:ab:\n                be:07:1f:36\n\n    Signature Algorithm: PKCS #1 SHA-256 With RSA Encryption\n    Signature:\n        [...]\n    Fingerprint (SHA-256):\n        6A:F9:64:F7:F2:A2:B5:04:88:27:6E:B8:53:3E:44:3E:F5:75:85:91:34:ED:48:A8:0D:F0:31:5D:7B:C9:E0:EC\n    Fingerprint (SHA1):\n        B4:9A:59:9F:1C:A8:5D:0E:C1:A2:41:EC:FD:43:E0:80:5F:63:DF:29\n\n    Mozilla-CA-Policy: false (attribute missing)\n    Certificate Trust Flags:\n        SSL Flags:\n            User\n        Email Flags:\n            User\n        Object Signing Flags:\n            User\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">certutil(1)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_troubleshooting-smart-card-authentication-with-sssd_assembly_troubleshooting-authentication-with-smart-cards\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">10.2. Troubleshooting smart card authentication with SSSD\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFollow this procedure to troubleshoot authentication with SSSD using smart cards.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have installed and configured your IdM Server and client for use with smart cards.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have installed the \u003Ccode class=\"literal\">sssd-tools\u003C/code> package.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are able to detect your smart card reader and display the contents of your smart card. See \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_troubleshooting-authentication-with-smart-cards_managing-smart-card-authentication#proc_testing-smart-card-authentication_assembly_troubleshooting-authentication-with-smart-cards\">Testing smart card access on the system\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify you can authenticate with your smart card using \u003Ccode class=\"literal\">su\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\">$ su - idmuser1 -c ‘su - idmuser1 -c whoami’\nPIN for MyEID (sctest):\nidmuser1\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf you are not prompted for the smart card PIN, and either a password prompt or an authorization error are returned, check the SSSD logs. See \u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html-single/configuring_authentication_and_authorization_in_rhel/index#assembly_troubleshooting-authentication-with-sssd-in-idm_configuring-authentication-and-authorization-in-rhel\">Troubleshooting authentication with SSSD in IdM\u003C/a> for information about logging in SSSD. The following is an example of an authentication failure:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\">$ su - idmuser1 -c ‘su - idmuser1 -c whoami’\nPIN for MyEID (sctest):\nsu: Authentication failure\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the SSSD logs indicate an issue from the \u003Ccode class=\"literal\">krb5_child\u003C/code>, similar to the following, you may have an issue with your CA certificates. To troubleshoot issues with certificates, see \u003Ca class=\"link\" href=\"#proc_verifying-that-idm-kerberos-kdc-can-use-pkinit-and-that-the-ca-certificates-are-correctly-located_assembly_troubleshooting-authentication-with-smart-cards\" title=\"10.3. Verifying that IdM Kerberos KDC can use PKINIT and that the CA certificates are correctly located\">Verifying that IdM Kerberos KDC can use Pkinit and that the CA certificates are correctly located\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\">[Pre-authentication failed: Failed to verify own certificate (depth 0): unable to get local issuer certificate: could not load the shared library]\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the SSSD logs indicate a timeout either from \u003Ccode class=\"literal\">p11_child\u003C/code> or \u003Ccode class=\"literal\">krb5_child\u003C/code>, you may need to increase the SSSD timeouts and try authenticating again with your smart card. See \u003Ca class=\"link\" href=\"#proc_increasing-sssd-timeouts_assembly_troubleshooting-authentication-with-smart-cards\" title=\"10.4. Increasing SSSD timeouts\">Increasing SSSD timeouts\u003C/a> for details on how to increase the timeouts.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify your GDM smart card authentication configuration is correct. A success message for PAM authentication should be returned as shown below:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\"># sssctl user-checks -s gdm-smartcard \"idmuser1\" -a auth\nuser: idmuser1\naction: auth\nservice: gdm-smartcard\n\nSSSD nss user lookup result:\n - user name: idmuser1\n - user id: 603200210\n - group id: 603200210\n - gecos: idm user1\n - home directory: /home/idmuser1\n - shell: /bin/sh\n\nSSSD InfoPipe user lookup result:\n - name: idmuser1\n - uidNumber: 603200210\n - gidNumber: 603200210\n - gecos: idm user1\n - homeDirectory: /home/idmuser1\n - loginShell: /bin/sh\n\ntesting pam_authenticate\n\nPIN for MyEID (sctest)\n\u003Cspan class=\"strong strong\">\u003Cstrong>pam_authenticate for user [idmuser1]: Success\u003C/strong>\u003C/span>\n\nPAM Environment:\n - PKCS11_LOGIN_TOKEN_NAME=MyEID (sctest)\n - KRB5CCNAME=KCM:\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf an authentication error, similar to the following, is returned, check the SSSD logs to try and determine what is causing the issue. See \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_authentication_and_authorization_in_rhel/assembly_troubleshooting-authentication-with-sssd-in-idm_restricting-domains-for-pam-services-using-sssd\">Troubleshooting authentication with SSSD in IdM\u003C/a> for information about logging in SSSD.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\">pam_authenticate for user [idmuser1]: Authentication failure\n\nPAM Environment:\n - no env -\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf PAM authentication continues to fail, clear your cache and run the command again.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\"># sssctl cache-remove\nSSSD must not be running. Stop SSSD now? (yes/no) [yes] yes\nCreating backup of local data…\nRemoving cache files…\nSSSD needs to be running. Start SSSD now? (yes/no) [yes] yes\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_verifying-that-idm-kerberos-kdc-can-use-pkinit-and-that-the-ca-certificates-are-correctly-located_assembly_troubleshooting-authentication-with-smart-cards\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">10.3. Verifying that IdM Kerberos KDC can use PKINIT and that the CA certificates are correctly located\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFollow this procedure to verify that IdM Kerberos KDC can use PKINIT and also describes how to verify your CA certificates are correctly located.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have installed and configured your IdM Server and client for use with smart cards.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are able to detect your smart card reader and display the contents of your smart card. See \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_troubleshooting-authentication-with-smart-cards_managing-smart-card-authentication#proc_testing-smart-card-authentication_assembly_troubleshooting-authentication-with-smart-cards\">Testing smart card access on the system\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the \u003Ccode class=\"literal\">kinit\u003C/code> utility to authenticate as the \u003Ccode class=\"literal\">idmuser1\u003C/code> with the certificate stored on your smart card:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\">$ kinit -X X509_user_identity=PKCS11: idmuser1\nMyEID (sctest)                   PIN:\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnter your smart card PIN. If you are not prompted for your PIN, check that you can detect your smart card reader and display the contents of your smart card. See \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_troubleshooting-authentication-with-smart-cards_managing-smart-card-authentication#proc_testing-smart-card-authentication_assembly_troubleshooting-authentication-with-smart-cards\">Testing smart card authentication\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf your PIN is accepted and you are then prompted for your password, you might be missing your CA signing certificate.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tVerify the CA chain is listed in the default certificate bundle file using \u003Ccode class=\"literal\">openssl\u003C/code> commands:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\">$ openssl crl2pkcs7 -nocrl -certfile /var/lib/ipa-client/pki/ca-bundle.pem | openssl pkcs7 -print_certs -noout\nsubject=O = IDM.EXAMPLE.COM, CN = Certificate Authority\n\nissuer=O = IDM.EXAMPLE.COM, CN = Certificate Authority\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tVerify the validity of your certificates:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tFind the user authentication certificate ID for \u003Ccode class=\"literal\">idmuser1\u003C/code>:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\">$ pkcs11-tool --list-objects --login\n[...]\nCertificate Object; type = X.509 cert\n  label:      Certificate\n  subject:    DN: O=IDM.EXAMPLE.COM, CN=idmuser1\n \u003Cspan class=\"strong strong\">\u003Cstrong>ID: 01\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tRead the user certificate information from the smart card in DER format:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\">$ pkcs11-tool --read-object --id 01 --type cert --output-file cert.der\nUsing slot 0 with a present token (0x0)\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tConvert the DER certificate to PEM format:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\">$ openssl x509 -in cert.der -inform DER -out cert.pem -outform PEM\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tVerify the certificate has valid issuer signatures up to the CA:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\">$ openssl verify -CAfile /var/lib/ipa-client/pki/ca-bundle.pem &lt;path&gt;/cert.pem\n\u003Cspan class=\"strong strong\">\u003Cstrong>cert.pem: OK\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf your smart card contains several certificates, \u003Ccode class=\"literal\">kinit\u003C/code> might fail to choose the correct certificate for authentication. In this case, you need to specify the certificate ID as an argument to the \u003Ccode class=\"literal\">kinit\u003C/code> command using the \u003Ccode class=\"literal\">certid=&lt;ID&gt;\u003C/code> option.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCheck how many certificates are stored on the smart card and get the certificate ID for the one you are using:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\">$ pkcs11-tool --list-objects --type cert --login\nUsing slot 0 with a present token (0x0)\nLogging in to \"MyEID (sctest)\".\nPlease enter User PIN:\nCertificate Object; type = X.509 cert\n  label:      Certificate\n  subject:    DN: O=IDM.EXAMPLE.COM, CN=idmuser1\n  ID:         01\nCertificate Object; type = X.509 cert\n  label:      Second certificate\n  subject:    DN: O=IDM.EXAMPLE.COM, CN=ipauser1\n  ID:         02\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRun \u003Ccode class=\"literal\">kinit\u003C/code> with certificate ID 01:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\">$ kinit -X kinit -X X509_user_identity=PKCS11:certid=01 idmuser1\nMyEID (sctest)                   PIN:\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun \u003Ccode class=\"literal\">klist\u003C/code> to view the contents of the Kerberos credentials cache:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\">$ klist\nTicket cache: KCM:0:11485\nDefault principal: idmuser1@EXAMPLE.COM\n\nValid starting       Expires              Service principal\n10/04/2021 10:50:04  10/05/2021 10:49:55  krbtgt/EXAMPLE.COM@EXAMPLE.COM\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDestroy your active Kerberos tickets once you have finished:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\">$ kdestroy -A\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSee \u003Ccode class=\"literal\">kinit\u003C/code> man page on your system.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSee \u003Ccode class=\"literal\">kdestroy\u003C/code> man page on your system.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_increasing-sssd-timeouts_assembly_troubleshooting-authentication-with-smart-cards\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">10.4. Increasing SSSD timeouts\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIf you are having issues authenticating with a smart card, check the \u003Ccode class=\"literal\">krb5_child.log\u003C/code> and the \u003Ccode class=\"literal\">p11_child.log\u003C/code> file for timeout entries similar to the following:\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\u003Ccode class=\"literal\">krb5_child: Timeout for child [9607] reached…​..consider increasing value of krb5_auth_timeout.\u003C/code>\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIf there is a timeout entry in the log file, try increasing the SSSD timeouts as outlined in this procedure.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have configured your IdM Server and client for smart card authentication.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOpen the \u003Ccode class=\"literal\">sssd.conf\u003C/code> file on the IdM client:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\"># vim /etc/sssd/sssd.conf\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn your domain section, for example \u003Ccode class=\"literal\">[domain/idm.example.com]\u003C/code>, add the following option:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\">krb5_auth_timeout = 60\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the \u003Ccode class=\"literal\">[pam]\u003C/code> section, add the following:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\">p11_child_timeout = 60\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tClear the SSSD cache:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen white-space-pre white-space-pre\"># sssctl cache-remove\nSSSD must not be running. Stop SSSD now? (yes/no) [yes] yes\nCreating backup of local data…\nRemoving cache files…\nSSSD needs to be running. Start SSSD now? (yes/no) [yes] yes\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tOnce you have increased the timeouts, try authenticating again using your smart card. See \u003Ca class=\"link\" href=\"#proc_testing-smart-card-authentication_assembly_troubleshooting-authentication-with-smart-cards\" title=\"10.1. Testing smart card access on the system\">Testing smart card authentication\u003C/a> for more details.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"assembly_troubleshooting-certificate-mapping-and-matching-rules_assembly_troubleshooting-authentication-with-smart-cards\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">10.5. Troubleshooting certificate mapping and matching rules\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIf you are having issues authenticating with a smart card, check that you have linked your smart card certificate correctly to a user. By default, a certificate is associated with a user when the user entry contains the full certificate as part of the \u003Ccode class=\"literal\">usercertificate\u003C/code> attribute. However, if you have defined certificate mapping rules, you may have changed how certificates are associated with users. To troubleshoot certificate mapping and matching rules, refer to the following sections:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_checking-how-the-certificates-are-mapped-to-users_assembly_troubleshooting-certificate-mapping-and-matching-rules\" title=\"10.5.1. Checking how the certificates are mapped to users\">Checking how the certificates are mapped to users\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_checking-the-user-associated-with-a-smart-card-certificate_assembly_troubleshooting-certificate-mapping-and-matching-rules\" title=\"10.5.2. Checking the user associated with a smart card certificate\">Checking the user associated with a smart card certificate\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIf you are using your smart card to authenticate using SSH, you need to add the full certificate to the user entry in Identity Management (IdM). If you are not using your smart card to authenticate using SSH, you can add certificate mapping data using the \u003Ccode class=\"literal\">ipa user-add-certmapdata\u003C/code> command.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"proc_checking-how-the-certificates-are-mapped-to-users_assembly_troubleshooting-certificate-mapping-and-matching-rules\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">10.5.1. Checking how the certificates are mapped to users\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tBy default, a certificate is associated with a user when the user entry contains the full certificate as part of the \u003Ccode class=\"literal\">usercertificate\u003C/code> attribute. However, if you have defined certificate mapping rules, you may have changed how certificates are associated with users. Follow this procedure to check your certificate mapping rules.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou have installed and configured your Identity Management (IdM) server and client for use with smart cards.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou are able to detect your smart card reader and display the contents of your smart card. See \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_troubleshooting-authentication-with-smart-cards_managing-smart-card-authentication#proc_testing-smart-card-authentication_assembly_troubleshooting-authentication-with-smart-cards\">Testing smart card access on the system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou have mapped your smart card certificate to an IdM user. See \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/con-idm-certmapdata_managing-smart-card-authentication\">Certificate mapping rules for configuring authentication on smart cards\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tVerify the certificate mapping rules currently configured for IdM:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># ipa certmaprule-find\n-------------------------------------------\n1 Certificate Identity Mapping Rule matched\n-------------------------------------------\n  Rule name: smartcardrule\n  Mapping rule: (ipacertmapdata=X509:&lt;I&gt;{issuer_dn!nss_x500}&lt;S&gt;{subject_dn!nss_x500})\n  Matching rule: &lt;ISSUER&gt;CN=Certificate Authority,O=IDM.EXAMPLE.COM\n  Enabled: TRUE\n----------------------------\nNumber of entries returned 1\n----------------------------\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou can expect to see one of the following mapping rules defined:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">ipacertmapdata\u003C/code> indicates that the IdM user entry \u003Ccode class=\"literal\">certmapdata\u003C/code> attribute is used.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">altSecurityIdentities\u003C/code> specifies that Active Directory’s user entry name mapping attribute is used.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">userCertificate;binary=\u003C/code> indicates that the whole certificate in either IdM or AD is used.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou can define many matching options but some of the typically configured options are as follows:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;ISSUER&gt;CN=[…​]\u003C/code> specifies the issuer attribute of the certificate being used is checked to make sure it matches this.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">&lt;SUBJECT&gt;.*,DC=MY,DC=DOMAIN\u003C/code> indicates the subject of the certificate is checked.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tEnable System Security Services Daemon (SSSD) logging by adding \u003Ccode class=\"literal\">debug_level = 9\u003C/code> to the \u003Ccode class=\"literal\">/etc/sssd/sssd.conf\u003C/code> file on the IdM server:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[domain/idm.example.com]\n...\n\u003Cspan class=\"strong strong\">\u003Cstrong>debug_level = 9\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tRestart SSSD:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># systemctl restart sssd\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou should see the following entry in the \u003Ccode class=\"literal\">/var/log/sssd/sssd_idm.example.com.log\u003C/code> file if the mapping is read correctly:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[be[idm.example.com]] [sdap_setup_certmap] (0x4000): Trying to add rule [smartcardrule][-1][&lt;ISSUER&gt;CN=Certificate Authority,O=IDM.EXAMPLE.COM][(|(userCertificate;binary={cert!bin})(ipacertmapdata=X509:&lt;I&gt;{issuer_dn!nss_x500}&lt;S&gt;{subject_dn!nss_x500}))].\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf your mapping rule contains an invalid syntax, an entry similar to the following can be seen in the log file:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">[be[idm.example.com]]] [sss_certmap_init] (0x0040): sss_certmap initialized.\n[be[idm.example.com]]] [ipa_certmap_parse_results] (0x4000): Trying to add rule [smartcardrule][-1][&lt;ISSUER&gt;CN=Certificate Authority,O=IDM.EXAMPLE.COM][(ipacertmapdata=X509:&lt;I&gt;{issuer_dn!x509}&lt;S&gt;{subject_dn})].\n[be[idm.example.com]]] [parse_template] (0x0040): Parse template invalid.\n[be[idm.example.com]]] [parse_ldap_mapping_rule] (0x0040): Failed to add template.\n[be[idm.example.com]]] [parse_mapping_rule] (0x0040): Failed to parse LDAP mapping rule.\n[be[idm.example.com]]] [ipa_certmap_parse_results] (0x0020): sss_certmap_add_rule failed for rule [smartcardrule], skipping. Please check for typos and if rule syntax is supported.\n[be[idm.example.com]]] [ipa_subdomains_certmap_done] (0x0040): Unable to parse certmap results [22]: Invalid argument\n[be[idm.example.com]]] [ipa_subdomains_refresh_certmap_done] (0x0020): Failed to read certificate mapping rules [22]: Invalid argument\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tCheck your mapping rule syntax.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># ipa certmaprule-show smartcardrule\n  Rule name: smartcardrule\n  Mapping rule: (|(userCertificate;binary={cert!bin})(ipacertmapdata=X509:&lt;I&gt;{issuer_dn!nss_x500}&lt;S&gt;{subject_dn!nss_x500}))\n  Matching rule: &lt;ISSUER&gt;CN=Certificate Authority,O=IDM.EXAMPLE.COM\n  Domain name: ipa.test\n  Enabled: TRUE\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf required, modify your certificate mapping rule:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># ipa certmaprule-mod smartcardrule --maprule '(ipacertmapdata=X509:&lt;I&gt;{issuer_dn!nss_x500}&lt;S&gt;{subject_dn!nss_x500})'\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tSee the \u003Ccode class=\"literal\">sss-certmap\u003C/code> man page on your system.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_checking-the-user-associated-with-a-smart-card-certificate_assembly_troubleshooting-certificate-mapping-and-matching-rules\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch4 class=\"title\">10.5.2. Checking the user associated with a smart card certificate\u003C/h4>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\tIf you are having issues authenticating with a smart card, verify the correct user is associated with your smart card certificate.\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou have installed and configured your Identity Management (IdM) server and client for use with smart cards.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou are able to detect your smart card reader and display the contents of your smart card. See \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/assembly_troubleshooting-authentication-with-smart-cards_managing-smart-card-authentication#proc_testing-smart-card-authentication_assembly_troubleshooting-authentication-with-smart-cards\">Testing smart card access on the system\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou have mapped your smart card certificate to an IdM user. See \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_smart_card_authentication/con-idm-certmapdata_managing-smart-card-authentication\">Certificate mapping rules for configuring authentication on smart cards\u003C/a>.\n\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tYou have a copy of the certificate from your smart card in PEM format, for example, \u003Ccode class=\"literal\">cert.pem\u003C/code>.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tVerify the user is associated with your smart card certificate:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># ipa certmap-match cert.pem\n--------------\n1 user matched\n--------------\n  Domain: IDM.EXAMPLE.COM\n  User logins: idmuser1\n----------------------------\nNumber of entries returned 1\n----------------------------\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf the user or domain are not correct, check how your certificates are mapped to users. See \u003Ca class=\"link\" href=\"#proc_checking-how-the-certificates-are-mapped-to-users_assembly_troubleshooting-certificate-mapping-and-matching-rules\" title=\"10.5.1. Checking how the certificates are mapped to users\">Checking how the certificates are mapped to users\u003C/a>.\n\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tCheck if the user entry contains the certificate:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># ipa user-show idmuser1\n  User login: idmuser1\n[...]\nCertificate:MIIEejCCAuKgAwIBAgIBCzANBgkqhkiG9w0BAQsFADAzMREwDwYDVQQKDAhJUEEuVEVTVDEeMBwGA1UEAwwVQ2VydGlmaWNhdGUgQXV0aG9yaXR5MB4XD\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIf your user entry does not contain the certificate, add your base-64 encoded certificate to the user entry:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tCreate an environment variable containing the certificate with the header and footer removed and concatenated into a single line, which is the format expected by the \u003Ccode class=\"literal\">ipa user-add-cert\u003C/code> command:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ export CERT=`openssl x509 -outform der -in idmuser1.crt | base64 -w0 -`\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tNote that the certificate in the \u003Ccode class=\"literal\">idmuser1.crt\u003C/code> file must be in PEM format.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tAdd the certificate to the profile of \u003Ccode class=\"literal\">idmuser1\u003C/code> using the \u003Ccode class=\"literal\">ipa user-add-cert\u003C/code> command:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ ipa user-add-cert idmuser1 --certificate=$CERT\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tClear the System Security Services Daemon (SSSD) cache.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># sssctl cache-remove\nSSSD must not be running. Stop SSSD now? (yes/no) [yes] yes\nCreating backup of local data…\nRemoving cache files…\nSSSD needs to be running. Start SSSD now? (yes/no) [yes] yes\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tRun \u003Ccode class=\"literal\">ipa certmap-match\u003C/code> again to confirm the user is associated with your smart card certificate.\n\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003C/section>\u003C/section>\u003Cdiv>\u003Cdiv xml:lang=\"en-US\" class=\"legalnotice\" id=\"idm140447723494704\">\u003Ch2 class=\"legalnotice\">Legal Notice\u003C/h2>\u003Cdiv class=\"para\">\n\t\tCopyright \u003Cspan class=\"trademark\">\u003C!--Empty-->\u003C/span>© 2024 Red Hat, Inc.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\tThe text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license (\"CC-BY-SA\"). An explanation of CC-BY-SA is available at \u003Ca class=\"uri\" href=\"http://creativecommons.org/licenses/by-sa/3.0/\">http://creativecommons.org/licenses/by-sa/3.0/\u003C/a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\tRed Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\tRed Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\u003Cspan class=\"trademark\">Linux\u003C/span>® is the registered trademark of Linus Torvalds in the United States and other countries.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\u003Cspan class=\"trademark\">Java\u003C/span>® is a registered trademark of Oracle and/or its affiliates.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\u003Cspan class=\"trademark\">XFS\u003C/span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\u003Cspan class=\"trademark\">MySQL\u003C/span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\u003Cspan class=\"trademark\">Node.js\u003C/span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\tThe \u003Cspan class=\"trademark\">OpenStack\u003C/span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\tAll other trademarks are the property of their respective owners.\n\t\u003C/div>\u003C/div>\u003C/div>\u003C/div>\u003C/body>",[14,21,26,79,132,169,173,210,235,256,273,277,312],{"title":11,"visible":15,"weight":16,"urlFragment":17,"anchor":18,"singlePageAnchor":18,"docTitle":19,"url":20},true,1,"index",null,"managing_smart_card_authentication","#",{"title":22,"visible":15,"weight":23,"urlFragment":24,"anchor":18,"singlePageAnchor":24,"docTitle":19,"url":25},"Providing feedback on Red Hat documentation",2,"proc_providing-feedback-on-red-hat-documentation_managing-smart-card-authentication","#proc_providing-feedback-on-red-hat-documentation_managing-smart-card-authentication",{"title":27,"visible":15,"weight":28,"urlFragment":29,"anchor":18,"singlePageAnchor":29,"sections":30,"docTitle":19,"url":78},"1. Understanding smart card authentication",3,"assembly_understanding-smart-card-authentication_managing-smart-card-authentication",[31,35,54,58,63,68,73],{"title":32,"visible":15,"weight":16,"urlFragment":29,"anchor":33,"singlePageAnchor":33,"docTitle":19,"url":34},"1.1. What is a smart card","con_what-is-a-smart-card_assembly_understanding-smart-card-authentication","#con_what-is-a-smart-card_assembly_understanding-smart-card-authentication",{"title":36,"visible":15,"weight":23,"urlFragment":29,"anchor":37,"singlePageAnchor":37,"sections":38,"docTitle":19,"url":53},"1.2. What is smart card authentication","con_what-is-smart-card-authentication_assembly_understanding-smart-card-authentication",[39],{"title":40,"visible":15,"weight":16,"urlFragment":29,"anchor":41,"singlePageAnchor":41,"sections":42,"docTitle":19,"url":52},"1.2.1. Examples of smart card authentication in IdM","examples_of_smart_card_authentication_in_idm",[43,48],{"title":44,"visible":45,"weight":16,"urlFragment":29,"anchor":46,"singlePageAnchor":46,"docTitle":19,"url":47},"1.2.1.1. Logging in to your system with a smart card",false,"logging_in_to_your_system_with_a_smart_card","#logging_in_to_your_system_with_a_smart_card",{"title":49,"visible":45,"weight":23,"urlFragment":29,"anchor":50,"singlePageAnchor":50,"docTitle":19,"url":51},"1.2.1.2. Logging in to GDM with lock on removal","logging_in_to_gdm_with_lock_on_removal","#logging_in_to_gdm_with_lock_on_removal","#examples_of_smart_card_authentication_in_idm","#con_what-is-smart-card-authentication_assembly_understanding-smart-card-authentication",{"title":55,"visible":15,"weight":28,"urlFragment":29,"anchor":56,"singlePageAnchor":56,"docTitle":19,"url":57},"1.3. Smart card authentication options in RHEL","con_smart-card-authentication-options-in-rhel_assembly_understanding-smart-card-authentication","#con_smart-card-authentication-options-in-rhel_assembly_understanding-smart-card-authentication",{"title":59,"visible":15,"weight":60,"urlFragment":29,"anchor":61,"singlePageAnchor":61,"docTitle":19,"url":62},"1.4. Tools for managing smart cards and their contents",4,"con_tools-for-managing-smart-cards-and-their-contents_assembly_understanding-smart-card-authentication","#con_tools-for-managing-smart-cards-and-their-contents_assembly_understanding-smart-card-authentication",{"title":64,"visible":15,"weight":65,"urlFragment":29,"anchor":66,"singlePageAnchor":66,"docTitle":19,"url":67},"1.5. Certificates and smart card authentication",5,"con_certificates-and-smart-card-authentication_assembly_understanding-smart-card-authentication","#con_certificates-and-smart-card-authentication_assembly_understanding-smart-card-authentication",{"title":69,"visible":15,"weight":70,"urlFragment":29,"anchor":71,"singlePageAnchor":71,"docTitle":19,"url":72},"1.6. Required steps for smart card authentication in IdM",6,"con_required-steps-for-smart-card-authentication-in-idm_assembly_understanding-smart-card-authentication","#con_required-steps-for-smart-card-authentication-in-idm_assembly_understanding-smart-card-authentication",{"title":74,"visible":15,"weight":75,"urlFragment":29,"anchor":76,"singlePageAnchor":76,"docTitle":19,"url":77},"1.7. Required steps for smart card authentication with certificates issued by Active Directory",7,"con_required-steps-for-smart-card-authentication-in-active-directory_assembly_understanding-smart-card-authentication","#con_required-steps-for-smart-card-authentication-in-active-directory_assembly_understanding-smart-card-authentication","#assembly_understanding-smart-card-authentication_managing-smart-card-authentication",{"title":80,"visible":15,"weight":60,"urlFragment":81,"anchor":18,"singlePageAnchor":81,"sections":82,"docTitle":19,"url":131},"2. Configuring Identity Management for smart card authentication","configuring-idm-for-smart-card-auth_managing-smart-card-authentication",[83,87,91,95,99,103,107,111,116,121,126],{"title":84,"visible":15,"weight":16,"urlFragment":81,"anchor":85,"singlePageAnchor":85,"docTitle":19,"url":86},"2.1. Configuring the IdM server for smart card authentication","conf-idm-server-for-smart-card-auth_configuring-idm-for-smart-card-auth","#conf-idm-server-for-smart-card-auth_configuring-idm-for-smart-card-auth",{"title":88,"visible":15,"weight":23,"urlFragment":81,"anchor":89,"singlePageAnchor":89,"docTitle":19,"url":90},"2.2. Using Ansible to configure the IdM server for smart card authentication","proc_using-ansible-to-configure-the-idm-server-for-smart-card-authentication_configuring-idm-for-smart-card-auth","#proc_using-ansible-to-configure-the-idm-server-for-smart-card-authentication_configuring-idm-for-smart-card-auth",{"title":92,"visible":15,"weight":28,"urlFragment":81,"anchor":93,"singlePageAnchor":93,"docTitle":19,"url":94},"2.3. Configuring the IdM client for smart card authentication","conf-idm-client-for-smart-card-auth_configuring-idm-for-smart-card-auth","#conf-idm-client-for-smart-card-auth_configuring-idm-for-smart-card-auth",{"title":96,"visible":15,"weight":60,"urlFragment":81,"anchor":97,"singlePageAnchor":97,"docTitle":19,"url":98},"2.4. Using Ansible to configure IdM clients for smart card authentication","proc_using-ansible-to-configure-idm-clients-for-smart-card-authentication_configuring-idm-for-smart-card-auth","#proc_using-ansible-to-configure-idm-clients-for-smart-card-authentication_configuring-idm-for-smart-card-auth",{"title":100,"visible":15,"weight":65,"urlFragment":81,"anchor":101,"singlePageAnchor":101,"docTitle":19,"url":102},"2.5. Adding a certificate to a user entry in the IdM Web UI","proc-add-cert-idm-user-webui_configuring-idm-for-smart-card-auth","#proc-add-cert-idm-user-webui_configuring-idm-for-smart-card-auth",{"title":104,"visible":15,"weight":70,"urlFragment":81,"anchor":105,"singlePageAnchor":105,"docTitle":19,"url":106},"2.6. Adding a certificate to a user entry in the IdM CLI","proc-add-cert-idm-user-cli_configuring-idm-for-smart-card-auth","#proc-add-cert-idm-user-cli_configuring-idm-for-smart-card-auth",{"title":108,"visible":15,"weight":75,"urlFragment":81,"anchor":109,"singlePageAnchor":109,"docTitle":19,"url":110},"2.7. Installing tools for managing and using smart cards","installing-tools-for-managing-and-using-smart-cards_configuring-idm-for-smart-card-auth","#installing-tools-for-managing-and-using-smart-cards_configuring-idm-for-smart-card-auth",{"title":112,"visible":15,"weight":113,"urlFragment":81,"anchor":114,"singlePageAnchor":114,"docTitle":19,"url":115},"2.8. Preparing your smart card and uploading your certificates and keys to your smart card",8,"storing-a-certificate-on-the-smart-card_configuring-idm-for-smart-card-auth","#storing-a-certificate-on-the-smart-card_configuring-idm-for-smart-card-auth",{"title":117,"visible":15,"weight":118,"urlFragment":81,"anchor":119,"singlePageAnchor":119,"docTitle":19,"url":120},"2.9. Logging in to IdM with smart cards",9,"logging-in-to-idm-with-smart-cards_configuring-idm-for-smart-card-auth","#logging-in-to-idm-with-smart-cards_configuring-idm-for-smart-card-auth",{"title":122,"visible":15,"weight":123,"urlFragment":81,"anchor":124,"singlePageAnchor":124,"docTitle":19,"url":125},"2.10. Logging in to GDM using smart card authentication on an IdM client",10,"configuring-gdm-access-using-smart-card-authentication_configuring-idm-for-smart-card-auth","#configuring-gdm-access-using-smart-card-authentication_configuring-idm-for-smart-card-auth",{"title":127,"visible":15,"weight":128,"urlFragment":81,"anchor":129,"singlePageAnchor":129,"docTitle":19,"url":130},"2.11. Using smart card authentication with the su command",11,"configuring-su-access-using-smart-card-authentication_configuring-idm-for-smart-card-auth","#configuring-su-access-using-smart-card-authentication_configuring-idm-for-smart-card-auth","#configuring-idm-for-smart-card-auth_managing-smart-card-authentication",{"title":133,"visible":15,"weight":65,"urlFragment":134,"anchor":18,"singlePageAnchor":134,"sections":135,"docTitle":19,"url":168},"3. Configuring certificates issued by ADCS for smart card authentication in IdM","configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication",[136,140,144,148,152,156,160,164],{"title":137,"visible":15,"weight":16,"urlFragment":134,"anchor":138,"singlePageAnchor":138,"docTitle":19,"url":139},"3.1. Windows Server settings required for trust configuration and certificate usage","windows-server-settings-required-for-trust-configuration-and-certificate-usage_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm","#windows-server-settings-required-for-trust-configuration-and-certificate-usage_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm",{"title":141,"visible":15,"weight":23,"urlFragment":134,"anchor":142,"singlePageAnchor":142,"docTitle":19,"url":143},"3.2. Copying certificates from Active Directory using sftp","copying-certificates-from-active-directory-using-sftp_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm","#copying-certificates-from-active-directory-using-sftp_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm",{"title":145,"visible":15,"weight":28,"urlFragment":134,"anchor":146,"singlePageAnchor":146,"docTitle":19,"url":147},"3.3. Configuring the IdM server and clients for smart card authentication using ADCS certificates","configuring-the-idm-server-and-clients-for-smart-card-authentication-using-adcs-certificates_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm","#configuring-the-idm-server-and-clients-for-smart-card-authentication-using-adcs-certificates_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm",{"title":149,"visible":15,"weight":60,"urlFragment":134,"anchor":150,"singlePageAnchor":150,"docTitle":19,"url":151},"3.4. Converting the PFX file","converting-the-pfx-file_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm","#converting-the-pfx-file_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm",{"title":153,"visible":15,"weight":65,"urlFragment":134,"anchor":154,"singlePageAnchor":154,"docTitle":19,"url":155},"3.5. Installing tools for managing and using smart cards","installing-tools-for-managing-and-using-smart-cards_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm","#installing-tools-for-managing-and-using-smart-cards_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm",{"title":157,"visible":15,"weight":70,"urlFragment":134,"anchor":158,"singlePageAnchor":158,"docTitle":19,"url":159},"3.6. Preparing your smart card and uploading your certificates and keys to your smart card","storing-a-certificate-on-the-smart-card_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm","#storing-a-certificate-on-the-smart-card_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm",{"title":161,"visible":15,"weight":75,"urlFragment":134,"anchor":162,"singlePageAnchor":162,"docTitle":19,"url":163},"3.7. Configuring timeouts in sssd.conf","configuring-timeouts-in-sssd-conf_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm","#configuring-timeouts-in-sssd-conf_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm",{"title":165,"visible":15,"weight":113,"urlFragment":134,"anchor":166,"singlePageAnchor":166,"docTitle":19,"url":167},"3.8. Creating certificate mapping rules for smart card authentication","certificate-mapping-rules-for-smart-card-authentication_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm","#certificate-mapping-rules-for-smart-card-authentication_configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm","#configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication",{"title":170,"visible":15,"weight":70,"urlFragment":171,"anchor":18,"singlePageAnchor":171,"docTitle":19,"url":172},"4. Certificate mapping rules for configuring authentication","con-idm-certmapdata_managing-smart-card-authentication","#con-idm-certmapdata_managing-smart-card-authentication",{"title":174,"visible":15,"weight":75,"urlFragment":175,"anchor":18,"singlePageAnchor":175,"sections":176,"docTitle":19,"url":209},"5. Configuring smart card authentication with the web console for centrally managed users","configuring-smart-card-authentication-with-the-web-console_managing-smart-card-authentication",[177,181,185,189,193,197,201,205],{"title":178,"visible":15,"weight":16,"urlFragment":175,"anchor":179,"singlePageAnchor":179,"docTitle":19,"url":180},"5.1. Smart card authentication for centrally managed users","smart-card-authentication-for-centrally-managed-users_configuring-smart-card-authentication-with-the-web-console","#smart-card-authentication-for-centrally-managed-users_configuring-smart-card-authentication-with-the-web-console",{"title":182,"visible":15,"weight":23,"urlFragment":175,"anchor":183,"singlePageAnchor":183,"docTitle":19,"url":184},"5.2. Installing tools for managing and using smart cards","installing-tools-for-managing-and-using-smart-cards_configuring-smart-card-authentication-with-the-web-console","#installing-tools-for-managing-and-using-smart-cards_configuring-smart-card-authentication-with-the-web-console",{"title":186,"visible":15,"weight":28,"urlFragment":175,"anchor":187,"singlePageAnchor":187,"docTitle":19,"url":188},"5.3. Preparing your smart card and uploading your certificates and keys to your smart card","storing-a-certificate-on-the-smart-card_configuring-smart-card-authentication-with-the-web-console","#storing-a-certificate-on-the-smart-card_configuring-smart-card-authentication-with-the-web-console",{"title":190,"visible":15,"weight":60,"urlFragment":175,"anchor":191,"singlePageAnchor":191,"docTitle":19,"url":192},"5.4. Enabling smart card authentication for the web console","enabling-smart-card-authentication-for-the-web-console_configuring-smart-card-authentication-with-the-web-console","#enabling-smart-card-authentication-for-the-web-console_configuring-smart-card-authentication-with-the-web-console",{"title":194,"visible":15,"weight":65,"urlFragment":175,"anchor":195,"singlePageAnchor":195,"docTitle":19,"url":196},"5.5. Logging in to the web console with smart cards","logging-in-to-the-web-console-with-smart-cards_configuring-smart-card-authentication-with-the-web-console","#logging-in-to-the-web-console-with-smart-cards_configuring-smart-card-authentication-with-the-web-console",{"title":198,"visible":15,"weight":70,"urlFragment":175,"anchor":199,"singlePageAnchor":199,"docTitle":19,"url":200},"5.6. Enabling passwordless sudo authentication for smart card users","proc_enabling-password-less-sudo-for-smart-card-users_configuring-smart-card-authentication-with-the-web-console","#proc_enabling-password-less-sudo-for-smart-card-users_configuring-smart-card-authentication-with-the-web-console",{"title":202,"visible":15,"weight":75,"urlFragment":175,"anchor":203,"singlePageAnchor":203,"docTitle":19,"url":204},"5.7. Limiting user sessions and memory to prevent a DoS attack","limiting-user-sessions-and-memory-to-prevent-a-dos-attack_configuring-smart-card-authentication-with-the-web-console","#limiting-user-sessions-and-memory-to-prevent-a-dos-attack_configuring-smart-card-authentication-with-the-web-console",{"title":206,"visible":15,"weight":113,"urlFragment":175,"anchor":207,"singlePageAnchor":207,"docTitle":19,"url":208},"5.8. Additional resources","additional_resources","#additional_resources","#configuring-smart-card-authentication-with-the-web-console_managing-smart-card-authentication",{"title":211,"visible":15,"weight":113,"urlFragment":212,"anchor":18,"singlePageAnchor":212,"sections":213,"docTitle":19,"url":234},"6. Configuring smart card authentication with local certificates","configuring-and-importing-local-certificates-to-a-smart-card_managing-smart-card-authentication",[214,218,222,226,230],{"title":215,"visible":15,"weight":16,"urlFragment":212,"anchor":216,"singlePageAnchor":216,"docTitle":19,"url":217},"6.1. Creating local certificates","creating-local-certificates_configuring-and-importing-local-certificates-to-a-smart-card","#creating-local-certificates_configuring-and-importing-local-certificates-to-a-smart-card",{"title":219,"visible":15,"weight":23,"urlFragment":212,"anchor":220,"singlePageAnchor":220,"docTitle":19,"url":221},"6.2. Copying certificates to the SSSD directory","proc_copying-certificate-to-the-sssd-directory_configuring-and-importing-local-certificates-to-a-smart-card","#proc_copying-certificate-to-the-sssd-directory_configuring-and-importing-local-certificates-to-a-smart-card",{"title":223,"visible":15,"weight":28,"urlFragment":212,"anchor":224,"singlePageAnchor":224,"docTitle":19,"url":225},"6.3. Installing tools for managing and using smart cards","installing-tools-for-managing-and-using-smart-cards_configuring-and-importing-local-certificates-to-a-smart-card","#installing-tools-for-managing-and-using-smart-cards_configuring-and-importing-local-certificates-to-a-smart-card",{"title":227,"visible":15,"weight":60,"urlFragment":212,"anchor":228,"singlePageAnchor":228,"docTitle":19,"url":229},"6.4. Preparing your smart card and uploading your certificates and keys to your smart card","storing-a-certificate-on-the-smart-card_configuring-and-importing-local-certificates-to-a-smart-card","#storing-a-certificate-on-the-smart-card_configuring-and-importing-local-certificates-to-a-smart-card",{"title":231,"visible":15,"weight":65,"urlFragment":212,"anchor":232,"singlePageAnchor":232,"docTitle":19,"url":233},"6.5. Configuring SSH access using smart card authentication","configuring-ssh-access-using-smart-card-authentication_configuring-and-importing-local-certificates-to-a-smart-card","#configuring-ssh-access-using-smart-card-authentication_configuring-and-importing-local-certificates-to-a-smart-card","#configuring-and-importing-local-certificates-to-a-smart-card_managing-smart-card-authentication",{"title":236,"visible":15,"weight":118,"urlFragment":237,"anchor":18,"singlePageAnchor":237,"sections":238,"docTitle":19,"url":255},"7. Configuring smart card authentication using authselect","configuring-smart-cards-using-authselect_managing-smart-card-authentication",[239,243,247,251],{"title":240,"visible":15,"weight":16,"urlFragment":237,"anchor":241,"singlePageAnchor":241,"docTitle":19,"url":242},"7.1. Certificates eligible for smart cards","certificates-eligible-for-smart-cards_configuring-smart-cards-using-authselect","#certificates-eligible-for-smart-cards_configuring-smart-cards-using-authselect",{"title":244,"visible":15,"weight":23,"urlFragment":237,"anchor":245,"singlePageAnchor":245,"docTitle":19,"url":246},"7.2. Configure your system to enable both smart card and password authentication","configuring-smart-card-authentication-to-enable-user-password-authentication_configuring-smart-cards-using-authselect","#configuring-smart-card-authentication-to-enable-user-password-authentication_configuring-smart-cards-using-authselect",{"title":248,"visible":15,"weight":28,"urlFragment":237,"anchor":249,"singlePageAnchor":249,"docTitle":19,"url":250},"7.3. Configuring your system to enforce smart card authentication","configuring-authselect-to-enforce-smart-card-authentication_configuring-smart-cards-using-authselect","#configuring-authselect-to-enforce-smart-card-authentication_configuring-smart-cards-using-authselect",{"title":252,"visible":15,"weight":60,"urlFragment":237,"anchor":253,"singlePageAnchor":253,"docTitle":19,"url":254},"7.4. Configuring smart card authentication with lock on removal","configuring-smart-card-authentication-with-lock-on-removal_configuring-smart-cards-using-authselect","#configuring-smart-card-authentication-with-lock-on-removal_configuring-smart-cards-using-authselect","#configuring-smart-cards-using-authselect_managing-smart-card-authentication",{"title":257,"visible":15,"weight":123,"urlFragment":258,"anchor":18,"singlePageAnchor":258,"sections":259,"docTitle":19,"url":272},"8. Authenticating to sudo remotely using smart cards","assembly_authenticating-to-sudo-remotely-using-smart-cards_managing-smart-card-authentication",[260,264,268],{"title":261,"visible":15,"weight":16,"urlFragment":258,"anchor":262,"singlePageAnchor":262,"docTitle":19,"url":263},"8.1. Creating sudo rules in IdM","proc_creating-sudo-rules-in-idm_assembly_authenticating-to-sudo-remotely-using-smart-cards","#proc_creating-sudo-rules-in-idm_assembly_authenticating-to-sudo-remotely-using-smart-cards",{"title":265,"visible":15,"weight":23,"urlFragment":258,"anchor":266,"singlePageAnchor":266,"docTitle":19,"url":267},"8.2. Setting up the PAM module for sudo","proc_setting-up-the-pam-module-for-sudo_assembly_authenticating-to-sudo-remotely-using-smart-cards","#proc_setting-up-the-pam-module-for-sudo_assembly_authenticating-to-sudo-remotely-using-smart-cards",{"title":269,"visible":15,"weight":28,"urlFragment":258,"anchor":270,"singlePageAnchor":270,"docTitle":19,"url":271},"8.3. Connecting to sudo remotely using a smart card","proc_connecting-to-sudo-remotely-using-a-smart-card_assembly_authenticating-to-sudo-remotely-using-smart-cards","#proc_connecting-to-sudo-remotely-using-a-smart-card_assembly_authenticating-to-sudo-remotely-using-smart-cards","#assembly_authenticating-to-sudo-remotely-using-smart-cards_managing-smart-card-authentication",{"title":274,"visible":15,"weight":128,"urlFragment":275,"anchor":18,"singlePageAnchor":275,"docTitle":19,"url":276},"9. Authenticating as an Active Directory user using PKINIT with a smart card","authenticating-as-an-active-directory-user-using-pkinit-with-a-smart-card_managing-smart-card-authentication","#authenticating-as-an-active-directory-user-using-pkinit-with-a-smart-card_managing-smart-card-authentication",{"title":278,"visible":15,"weight":279,"urlFragment":280,"anchor":18,"singlePageAnchor":280,"sections":281,"docTitle":19,"url":311},"10. Troubleshooting authentication with smart cards",12,"assembly_troubleshooting-authentication-with-smart-cards_managing-smart-card-authentication",[282,286,290,294,298],{"title":283,"visible":15,"weight":16,"urlFragment":280,"anchor":284,"singlePageAnchor":284,"docTitle":19,"url":285},"10.1. Testing smart card access on the system","proc_testing-smart-card-authentication_assembly_troubleshooting-authentication-with-smart-cards","#proc_testing-smart-card-authentication_assembly_troubleshooting-authentication-with-smart-cards",{"title":287,"visible":15,"weight":23,"urlFragment":280,"anchor":288,"singlePageAnchor":288,"docTitle":19,"url":289},"10.2. Troubleshooting smart card authentication with SSSD","proc_troubleshooting-smart-card-authentication-with-sssd_assembly_troubleshooting-authentication-with-smart-cards","#proc_troubleshooting-smart-card-authentication-with-sssd_assembly_troubleshooting-authentication-with-smart-cards",{"title":291,"visible":15,"weight":28,"urlFragment":280,"anchor":292,"singlePageAnchor":292,"docTitle":19,"url":293},"10.3. Verifying that IdM Kerberos KDC can use PKINIT and that the CA certificates are correctly located","proc_verifying-that-idm-kerberos-kdc-can-use-pkinit-and-that-the-ca-certificates-are-correctly-located_assembly_troubleshooting-authentication-with-smart-cards","#proc_verifying-that-idm-kerberos-kdc-can-use-pkinit-and-that-the-ca-certificates-are-correctly-located_assembly_troubleshooting-authentication-with-smart-cards",{"title":295,"visible":15,"weight":60,"urlFragment":280,"anchor":296,"singlePageAnchor":296,"docTitle":19,"url":297},"10.4. Increasing SSSD timeouts","proc_increasing-sssd-timeouts_assembly_troubleshooting-authentication-with-smart-cards","#proc_increasing-sssd-timeouts_assembly_troubleshooting-authentication-with-smart-cards",{"title":299,"visible":15,"weight":65,"urlFragment":280,"anchor":300,"singlePageAnchor":300,"sections":301,"docTitle":19,"url":310},"10.5. Troubleshooting certificate mapping and matching rules","assembly_troubleshooting-certificate-mapping-and-matching-rules_assembly_troubleshooting-authentication-with-smart-cards",[302,306],{"title":303,"visible":15,"weight":16,"urlFragment":280,"anchor":304,"singlePageAnchor":304,"docTitle":19,"url":305},"10.5.1. Checking how the certificates are mapped to users","proc_checking-how-the-certificates-are-mapped-to-users_assembly_troubleshooting-certificate-mapping-and-matching-rules","#proc_checking-how-the-certificates-are-mapped-to-users_assembly_troubleshooting-certificate-mapping-and-matching-rules",{"title":307,"visible":15,"weight":23,"urlFragment":280,"anchor":308,"singlePageAnchor":308,"docTitle":19,"url":309},"10.5.2. Checking the user associated with a smart card certificate","proc_checking-the-user-associated-with-a-smart-card-certificate_assembly_troubleshooting-certificate-mapping-and-matching-rules","#proc_checking-the-user-associated-with-a-smart-card-certificate_assembly_troubleshooting-certificate-mapping-and-matching-rules","#assembly_troubleshooting-certificate-mapping-and-matching-rules_assembly_troubleshooting-authentication-with-smart-cards","#assembly_troubleshooting-authentication-with-smart-cards_managing-smart-card-authentication",{"title":313,"visible":15,"weight":314,"urlFragment":315,"anchor":18,"singlePageAnchor":316,"docTitle":19,"url":317},"Legal Notice",13,"legal-notice","idm140447723494704","#idm140447723494704",[319,322,325],{"text":320,"link":321},"Red Hat Enterprise Linux","/documentation/red_hat_enterprise_linux/",{"text":323,"link":324},"9","/documentation/red_hat_enterprise_linux/9/",{"text":11},{"name":11,"translations":327,"productVersion":328,"singlePage":329,"pdf":332,"publishingStatus":334},[5,6,7,8,9],{"name":323},{"contentUrl":330,"name":11,"new":331,"url":19},"https://d2bhdhkti9t3uj.cloudfront.net/html/c9ab6df4-890b-41e7-9d49-af38524a53cc/9298d50932a712042e251bd86ccff985.html","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html-single/managing_smart_card_authentication/index",{"url":333},"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/pdf/managing_smart_card_authentication/Red_Hat_Enterprise_Linux-9-Managing_smart_card_authentication-en-US.pdf","PUBLISHED",[336,341,344,348,352,356,360],{"name":337,"new":338,"url":339,"urlAliases":340},"10.0-Beta","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/10-beta","10-beta",[],{"name":323,"new":342,"url":323,"urlAliases":343},"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9",[],{"name":345,"new":346,"url":345,"urlAliases":347},"8","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/8",[],{"name":349,"new":350,"url":349,"urlAliases":351},"7","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/7",[],{"name":353,"new":354,"url":353,"urlAliases":355},"6","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/6",[],{"name":357,"new":358,"url":357,"urlAliases":359},"5","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/5",[],{"name":361,"new":362,"url":361,"urlAliases":363},"4","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/4",[],{"managing_smart_card_authentication/index":365,"managing_smart_card_authentication/proc_providing-feedback-on-red-hat-documentation_managing-smart-card-authentication":366,"managing_smart_card_authentication/assembly_understanding-smart-card-authentication_managing-smart-card-authentication":367,"managing_smart_card_authentication/configuring-idm-for-smart-card-auth_managing-smart-card-authentication":368,"managing_smart_card_authentication/configuring-certificates-issued-by-adcs-for-smart-card-authentication-in-idm_managing-smart-card-authentication":369,"managing_smart_card_authentication/con-idm-certmapdata_managing-smart-card-authentication":370,"managing_smart_card_authentication/configuring-smart-card-authentication-with-the-web-console_managing-smart-card-authentication":371,"managing_smart_card_authentication/configuring-and-importing-local-certificates-to-a-smart-card_managing-smart-card-authentication":372,"managing_smart_card_authentication/configuring-smart-cards-using-authselect_managing-smart-card-authentication":373,"managing_smart_card_authentication/assembly_authenticating-to-sudo-remotely-using-smart-cards_managing-smart-card-authentication":374,"managing_smart_card_authentication/authenticating-as-an-active-directory-user-using-pkinit-with-a-smart-card_managing-smart-card-authentication":375,"managing_smart_card_authentication/assembly_troubleshooting-authentication-with-smart-cards_managing-smart-card-authentication":376,"managing_smart_card_authentication/legal-notice":377},{"prevt":18,"next":24},{"prevt":17,"next":29},{"prevt":18,"next":29},{"prevt":18,"next":81},{"prevt":18,"next":134},{"prevt":134,"next":175},{"prevt":18,"next":175},{"prevt":18,"next":212},{"prevt":18,"next":237},{"prevt":18,"next":258},{"prevt":258,"next":280},{"prevt":18,"next":280},{"prevt":280,"next":18},{"product":18,"version":18},{"managing_smart_card_authentication":380},[331],{"products":382},[383,384,385,386,387,388,389,390,391,392,393,394,395],"builds_for_red_hat_openshift","migration_toolkit_for_virtualization","openshift_container_platform","openshift_sandboxed_containers","red_hat_advanced_cluster_security_for_kubernetes","red_hat_advanced_cluster_management_for_kubernetes","red_hat_openshift_data_foundation","red_hat_openshift_dev_spaces","red_hat_openshift_gitops","red_hat_openshift_local","red_hat_openshift_pipelines","red_hat_openshift_serverless","workload_availability_for_red_hat_openshift",[],{"default":398},[399,408,414,423,431,439,446,454,461],{"nid":400,"type":401,"langcode":402,"Published":16,"title":403,"Created":404,"Updated":405,"body_value":18,"field_documentation banner_text_value":18,"field_documentation banner_text_format":18,"field_paths_value":406,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":407},580,"rebrand banner","en","OpenShift Container Storage is now OpenShift Data Foundation starting with version 4.9.","2023-01-11 15:38:32","2023-01-11 15:40:04","/documentation/red_hat_openshift_container_storage\r\n/documentation/red_hat_openshift_container_storage/\r\n/documentation/red_hat_openshift_container_storage/*","internal:/documentation/red_hat_openshift_data_foundation/",{"nid":409,"type":401,"langcode":402,"Published":16,"title":403,"Created":410,"Updated":411,"body_value":18,"field_documentation banner_text_value":18,"field_documentation banner_text_format":18,"field_paths_value":412,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":413},581,"2023-01-11 15:41:31","2023-01-11 15:42:04","/documentation/red_hat_openshift_data_foundation/4.9\r\n/documentation/red_hat_openshift_data_foundation/4.9/\r\n/documentation/red_hat_openshift_data_foundation/4.9/*\r\n/documentation/red_hat_openshift_data_foundation/4.10\r\n/documentation/red_hat_openshift_data_foundation/4.10/\r\n/documentation/red_hat_openshift_data_foundation/4.10/*\r\n/documentation/red_hat_openshift_data_foundation/4.11\r\n/documentation/red_hat_openshift_data_foundation/4.11/\r\n/documentation/red_hat_openshift_data_foundation/4.11/*","internal:/documentation/red_hat_openshift_container_storage/",{"nid":415,"type":416,"langcode":402,"Published":16,"title":417,"Created":418,"Updated":419,"body_value":18,"field_documentation banner_text_value":420,"field_documentation banner_text_format":421,"field_paths_value":422,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},582,"developer preview banner","MicroShift is Developer Preview software only","2023-01-11 15:50:24","2023-01-30 19:00:52","\u003Cp slot=header>MicroShift is Developer Preview software only.\u003C/p>For more information about the support scope of Red Hat Developer Preview software, see \u003Ca href=\"https://access.redhat.com/support/offerings/devpreview/\">Developer Preview Support Scope\u003C/a>.","documentation banner","/documentation/microshift/4.12\r\n/documentation/microshift/4.12/*\r\n/documentation/red_hat_build_of_microshift/4.12\r\n/documentation/red_hat_build_of_microshift/4.12/*",{"nid":424,"type":425,"langcode":402,"Published":16,"title":426,"Created":427,"Updated":428,"body_value":18,"field_documentation banner_text_value":429,"field_documentation banner_text_format":421,"field_paths_value":430,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},583,"obsolete documentation banner","RHACS EOL - DAT-3433","2023-01-23 16:36:43","2023-01-23 16:39:14","\u003Cp slot=header>You are viewing documentation for a release that is no longer maintained. To view the documentation for the most recent version, see the \u003Ca href=\"/documentation/red_hat_advanced_cluster_security_for_kubernetes/\">latest RHACS docs\u003C/a>.\u003C/p>","/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.69\r\n/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.69/*\r\n/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.70\r\n/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.70/*\r\n/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.71\r\n/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.71/*",{"nid":432,"type":433,"langcode":402,"Published":16,"title":434,"Created":435,"Updated":436,"body_value":18,"field_documentation banner_text_value":437,"field_documentation banner_text_format":421,"field_paths_value":438,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},584,"end of life banner","EOL banner for RHV","2023-05-23 14:58:05","2023-05-24 15:19:42","\u003Cp slot=header>The Red Hat Virtualization\u003C/p>Maintenance Phase runs until August 31, 2024, followed by the Extended Life Phase with no more software fixes through August 31, 2026. See \u003Ca href=\"https://access.redhat.com/articles/6975303\">Migration Paths for OpenShift Container Platform deployed on Red Hat Virtualization\u003C/a> for details.","/documentation/red_hat_virtualization/4.4",{"nid":440,"type":433,"langcode":402,"Published":16,"title":441,"Created":442,"Updated":443,"body_value":18,"field_documentation banner_text_value":444,"field_documentation banner_text_format":421,"field_paths_value":445,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},585,"RHHI-V EOL","2023-06-01 16:52:57","2023-06-01 17:03:44","\u003Cp slot=header>Red Hat Hyperconverged Infrastructure for Virtualization\u003C/p> is in the \u003Ca href=\"https://access.redhat.com/support/policy/updates/rhhiv\">Maintenance Support Phase\u003C/a> of its lifecycle until October 31, 2024. After that date, the product will be End of Life. See the \u003Ca href=\"https://access.redhat.com/announcements/6972521\">RHHI-V announcement\u003C/a> for next steps.","/documentation/red_hat_hyperconverged_infrastructure_for_virtualization/1.8",{"nid":447,"type":448,"langcode":402,"Published":16,"title":449,"Created":450,"Updated":451,"body_value":18,"field_documentation banner_text_value":452,"field_documentation banner_text_format":421,"field_paths_value":453,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},586,"preview banner","MicroShift is Technology Preview software only","2024-03-18 16:53:05","2024-03-18 16:54:56","\u003Cp slot=header>MicroShift is Technology Preview software only.\u003C/p>For more information about the support scope of Red Hat Technology Preview software, see \u003Ca href=\"https://access.redhat.com/support/offerings/techpreview/\">Technology Preview Support Scope\u003C/a>.","/documentation/red_hat_build_of_microshift/4.13\r\n/documentation/red_hat_build_of_microshift/4.13/*",{"nid":455,"type":448,"langcode":402,"Published":16,"title":456,"Created":457,"Updated":458,"body_value":18,"field_documentation banner_text_value":459,"field_documentation banner_text_format":421,"field_paths_value":460,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},588,"Ansible 2.5 upgrade limitation","2024-09-30 16:53:05","2024-10-28 16:54:56","\u003Cp slot=\"header\">Support added for upgrades from 2.4\u003C/p>Ansible Automation Platform 2.5-3, released on October 28, 2024, adds support for upgrades from 2.4. See the upgrade documentation for more information.","",{"nid":462,"alertType":463,"type":464,"langcode":402,"Published":16,"title":465,"Created":460,"Updated":460,"body_value":18,"field_documentation banner_text_value":466,"field_documentation banner_text_format":421,"field_paths_value":467,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},587,"warning","Warning banner","Red Hat build of Apache Camel K","\u003Cp slot=header>Red Hat Camel K is deprecated\u003C/p>Red Hat Camel K is deprecated and the End of Life date for this product is June 30, 2025. For help migrating to the current go-to solution, \u003Ca target=_blank href=\"https://docs.redhat.com/en/documentation/red_hat_build_of_apache_camel\">Red Hat build of Apache Camel\u003C/a>, see the \u003Ca target=_blank href=\"https://docs.redhat.com/en/documentation/red_hat_build_of_apache_camel_k/1.10.7/html/migration_guide_camel_k_to_camel_extensions_for_quarkus/index\">Migration Guide\u003C/a>.","/documentation/red_hat_build_of_apache_camel_k/*",{"product":320},["Reactive",470],{"$snuxt-i18n-meta":471,"$sisLoading":45,"$sisSinglePage":15,"$sisInFocusMode":45,"$smobileTocOpen":45,"$sisLargeTOC":45,"$scurrentChapter":17,"$scurrentSection":17,"$scurrentSubSection":460},{},["Set"],["ShallowReactive",474],{"s8LoCEfG4A":18,"rFVLKcOK8e":18,"uUstF4AIyn":18,"MdHNSZP4nR":18,"Pn02PlJOas":18},"/en/documentation/red_hat_enterprise_linux/9/html-single/managing_smart_card_authentication/index"]</script>
<script>window.__NUXT__={};window.__NUXT__.config={public:{contentEnv:"",collectFeedback:true,i18n:{baseUrl:"",defaultLocale:"en",defaultDirection:"ltr",strategy:"prefix",lazy:false,rootRedirect:"",routesNameSeparator:"___",defaultLocaleRouteNameSuffix:"default",skipSettingLocaleOnNavigate:false,differentDomains:false,trailingSlash:false,configLocales:[{code:"en",name:"English",iso:"en-US"},{code:"fr",name:"Français",iso:"fr-FR"},{code:"ko",name:"한국어",iso:"ko-KR"},{code:"ja",name:"日本語",iso:"ja-JP"},{code:"zh-cn",name:"中文 (中国)",iso:"zh-CN"},{code:"de",name:"Deutsch",iso:"de_DE"},{code:"it",name:"Italiano",iso:"it_IT"},{code:"pt-br",name:"Português",iso:"pt_BR"},{code:"es",name:"Español",iso:"es-ES"}],locales:{en:{domain:""},fr:{domain:""},ko:{domain:""},ja:{domain:""},"zh-cn":{domain:""},de:{domain:""},it:{domain:""},"pt-br":{domain:""},es:{domain:""}},detectBrowserLanguage:{alwaysRedirect:false,cookieCrossOrigin:false,cookieDomain:"",cookieKey:"i18n_redirected",cookieSecure:false,fallbackLocale:"",redirectOn:"root",useCookie:true},experimental:{localeDetector:"",switchLocalePathLinkSSR:false,autoImportTranslationFunctions:false}}},app:{baseURL:"/",buildId:"5ff82c51-785e-4a7d-aca6-77d6692e8c7a",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>
