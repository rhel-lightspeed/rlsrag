<!DOCTYPE html><html  data-capo=""><head><script type="importmap">
  {
    "imports": {
      "@patternfly/elements/": "/scripts/v1/@patternfly/elements/",
      "@patternfly/pfe-clipboard/": "/scripts/v1/@patternfly/pfe-clipboard/",
      "@rhds/elements/": "/scripts/v1/@rhds/elements/elements/",
      "@cpelements/elements/": "/scripts/v1/@cpelements/elements/elements/"
    },
    "scopes": {
      "/": {
        "@floating-ui/core": "/scripts/v1/@floating-ui/core/dist/floating-ui.core.mjs",
        "@floating-ui/dom": "/scripts/v1/@floating-ui/dom/dist/floating-ui.dom.mjs",
        "@floating-ui/utils": "/scripts/v1/@floating-ui/utils/dist/floating-ui.utils.mjs",
        "@floating-ui/utils/dom": "/scripts/v1/@floating-ui/utils/dom/dist/floating-ui.utils.dom.mjs",
        "@lit/reactive-element": "/scripts/v1/@lit/reactive-element/reactive-element.js",
        "@lit/reactive-element/decorators/": "/scripts/v1/@lit/reactive-element/decorators/",
        "@patternfly/pfe-core": "/scripts/v1/@patternfly/pfe-core/core.js",
        "@patternfly/pfe-core/": "/scripts/v1/@patternfly/pfe-core/",
        "@rhds/tokens/media.js": "/scripts/v1/@rhds/tokens/js/media.js",
        "lit": "/scripts/v1/lit/index.js",
        "lit-element/lit-element.js": "/scripts/v1/lit-element/lit-element.js",
        "lit-html": "/scripts/v1/lit-html/lit-html.js",
        "lit-html/": "/scripts/v1/lit-html/",
        "lit/": "/scripts/v1/lit/",
        "tslib": "/scripts/v1/tslib/tslib.es6.mjs",
        "@cpelements/rh-table/dist/rh-table.js": "/scripts/v1/@cpelements/rh-table/dist/rh-table.js"
      }
    }
  }
</script><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Managing, monitoring, and updating the kernel | Red Hat Product Documentation</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<script type="text/javascript" id="trustarc" src="//static.redhat.com/libs/redhat/marketing/latest/trustarc/trustarc.js"></script>
<script src="//www.redhat.com/dtm.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:wght@400;500;700&family=Red+Hat+Text:wght@400;500;700&display=swap">
<link rel="stylesheet" href="/styles/rh-table--lightdom.min.css">
<style>.section .titlepage{gap:.75rem}.section .titlepage,div.edit{align-items:center;display:flex}div.edit{font-size:.9rem;margin-bottom:8px}div.edit>a{align-items:center;display:flex}.edit pf-icon{margin-right:4px}</style>
<style>#error[data-v-df31ff14]{align-items:center;display:flex;flex-direction:column;justify-content:center;min-height:80vh}h1[data-v-df31ff14]{font-size:calc(var(--rh-font-size-body-text-md, 1rem)*4);font-weight:700;margin-bottom:0}h1[data-v-df31ff14],h1 span[data-v-df31ff14]{line-height:var(--rh-line-height-heading,1.3)}h1 span[data-v-df31ff14]{color:var(--rh-color-text-brand-on-light,#e00);display:block;text-transform:uppercase}h1 span[data-v-df31ff14],p[data-v-df31ff14]{font-size:var(--rh-font-size-body-text-lg,1.125rem)}aside[data-v-df31ff14]{align-items:center;background:var(--rh-color-surface-lightest,#fff);border:var(--rh-border-width-sm,1px) solid var(--rh-color-border-subtle-on-light,#c7c7c7);border-radius:var(--rh-border-radius-default,3px);border-top:calc(var(--rh-border-width-md, 2px)*2) solid var(--rh-color-text-brand-on-light,#e00);box-shadow:var(--rh-box-shadow-sm,0 2px 4px 0 hsla(0,0%,8%,.2));display:flex;flex-direction:column;justify-content:space-between;margin-top:var(--rh-space-2xl,32px);padding:var(--rh-space-xl,24px)}aside[data-v-df31ff14],aside>div[data-v-df31ff14]{width:100%}.text-container[data-v-df31ff14]{margin:auto;max-width:442px;text-align:center}.desktop[data-v-df31ff14]{display:none}.sr-only[data-v-df31ff14]{height:1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);border:0;clip-path:inset(50%);white-space:nowrap}form[data-v-df31ff14]{display:flex}button[data-v-df31ff14],input[data-v-df31ff14]{border:1px solid var(--rh-color-black-500,#8a8d90);box-sizing:border-box;height:40px}input[data-v-df31ff14]{border-right:none;flex:1;font-family:var(--rh-font-family-heading,RedHatDisplay,"Red Hat Display","Noto Sans Arabic","Noto Sans Hebrew","Noto Sans JP","Noto Sans KR","Noto Sans Malayalam","Noto Sans SC","Noto Sans TC","Noto Sans Thai",Helvetica,Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);padding-left:var(--rh-space-md,8px);width:100%}button[data-v-df31ff14]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:transparent;border-left:none;display:flex;width:var(--rh-size-icon-04,40px)}button[data-v-df31ff14]:before{background:var(--rh-context-light-color-text-link,#06c);content:"";cursor:pointer;display:block;height:28px;margin:auto;width:28px}.search-icon[data-v-df31ff14]{margin:auto}ul[data-v-df31ff14]{max-width:275px;padding:0}ul li[data-v-df31ff14]{display:inline-block;list-style:none;margin-right:var(--rh-space-xl,24px);padding:var(--rh-space-xs,4px) 0}ul li a[data-v-df31ff14]{color:var(--rh-context-light-color-text-link,#06c);text-decoration:none}@media (min-width:992px){aside[data-v-df31ff14]{flex-direction:row}.mobile[data-v-df31ff14]{display:none}.desktop[data-v-df31ff14]{display:block}input[data-v-df31ff14]{width:auto}}</style>
<style>@keyframes fade-in{0%{opacity:0;visibility:hidden}1%{visibility:visible}to{opacity:1;visibility:visible}}@media (min-height:48em){.rhdocs{--rh-table--maxHeight:calc(100vh - 12.5rem)}}*,.rhdocs *,.rhdocs :after,.rhdocs :before,:after,:before{box-sizing:border-box}.rhdocs img,.rhdocs object,.rhdocs svg,img,object,svg{display:inline-block;max-width:100%;vertical-align:middle}.rhdocs hr{border:0;border-top:.0625rem solid #d2d2d2;clear:both;margin:1rem 0}.rhdocs a{color:#06c;text-decoration:underline}.rhdocs a:focus,.rhdocs a:hover{color:#036}.rhdocs a.anchor-heading{color:#151515;cursor:pointer;text-decoration:none;word-break:break-all}.rhdocs p{margin:1.49963rem 0}.rhdocs li>p{margin:0}.rhdocs h1,.rhdocs h2,.rhdocs h3,.rhdocs h4,.rhdocs h5,.rhdocs h6{font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-weight:500;margin:0 0 .625rem}.rhdocs h1{font-size:2.25rem;margin:2rem 0}.rhdocs h2{font-size:1.625rem;margin:2rem 0}.rhdocs h3{font-size:1.5rem;font-weight:400}.rhdocs h4,.rhdocs h5{font-size:1.25rem}.rhdocs h5{font-weight:400}.rhdocs h6{font-size:1.125rem;font-weight:500;line-height:1.6667}.rhdocs ol,.rhdocs ul{margin:1rem 0;padding:0 0 0 1.5rem}.rhdocs ol ::marker,.rhdocs ul ::marker{font:inherit}.rhdocs li{margin:0 0 .5em;padding:0}.rhdocs li>p{margin:.5rem 0}.rhdocs li>ol,.rhdocs li>ul{margin:0}.rhdocs dl dd{margin:.5rem 0 .5rem 1rem}.rhdocs dl dd>p{margin:.5rem 0}.rhdocs .informaltable,.rhdocs .table-contents,.rhdocs .table-wrapper{max-height:var(--rh-table--maxHeight);overflow:auto}.rhdocs table{border:0;font-size:1rem;line-height:1.6667;table-layout:fixed}.rhdocs table caption{color:#585858;margin-bottom:.5rem;margin-top:.5rem;text-align:left}.rhdocs table td,.rhdocs table th{border:0;border-bottom:.0625rem solid #d2d2d2;border-bottom:.0625rem solid var(--pfe-table--Border,#d2d2d2);padding:.5em 1rem}.rhdocs table td.halign-left,.rhdocs table th.halign-left{text-align:left}.rhdocs table td.halign-center,.rhdocs table th.halign-center,table td.halign-center,table th.halign-center{text-align:center}.rhdocs table td.halign-right,.rhdocs table th.halign-right{text-align:right}.rhdocs table td.valign-top,.rhdocs table th.valign-top{vertical-align:top}.rhdocs table td.valign-middle,.rhdocs table th.valign-middle{vertical-align:middle}.rhdocs table td.valign-bottom,.rhdocs table th.valign-bottom{vertical-align:bottom}.rhdocs table thead td,.rhdocs table thead th{background:#f5f5f5;font-weight:600}.rhdocs rh-table table,.rhdocs rh-table.rh-table--expanded-vertically{max-height:-moz-max-content;max-height:max-content}.rhdocs pre.nowrap{overflow:auto;overflow-wrap:normal;white-space:pre;word-break:normal}.rhdocs .codeblock__wrapper pre{background:transparent}.rh-table--full-screen code,.rhdocs .content--md code,.rhdocs .content--sm code,.rhdocs .rh-table--full-screen code{overflow-wrap:normal;word-break:normal}.rhdocs[class] pre code,[class] pre code{background:inherit;color:inherit;font-family:inherit;font-size:inherit;font-weight:inherit;line-height:inherit;padding:0}.rhdocs .keycap,.rhdocs kbd{background-color:#eee;background-image:linear-gradient(180deg,#ddd,#eee,#fff);border-radius:.1875rem;box-shadow:0 -.0625rem 0 0 #fff,0 .0625rem 0 .1875rem #aaa;font-family:RedHatMono,Red Hat Mono,Consolas,monospace;font-size:90%;font-weight:400;margin:0 .25rem;padding:.125rem .375rem}.keycap strong,.rhdocs .keycap strong{font-weight:inherit}.rhdocs kbd.keyseq,kbd.keyseq{background:transparent;border:0;box-shadow:none;padding:0}.rhdocs kbd.keyseq kbd,kbd.keyseq kbd{display:inline-block;margin:0 .375rem}.rhdocs kbd.keyseq kbd:first-child,kbd.keyseq kbd:first-child{margin-left:0}.rhdocs b.button{font-size:90%;font-weight:700;padding:.1875rem}.rhdocs b.button:before{content:"["}.rhdocs b.button:after{content:"]"}html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}.rhdocs audio,.rhdocs canvas,.rhdocs progress,.rhdocs video{display:inline-block;vertical-align:baseline}.rhdocs audio:not([controls]){display:none;height:0}[hidden],template{display:none}.rhdocs a{background:transparent}.rhdocs a:active,.rhdocs a:hover{outline:0}.rhdocs a.anchor-heading:hover:before{color:#151515;content:"#";margin-left:-1.6rem;position:absolute}.rhdocs a.anchor-heading:focus-visible{color:#151515}@media screen and (max-width:990px){.rhdocs a.anchor-heading:hover:before{font-size:16px;margin-left:-1rem;padding-top:8px}.rhdocs h1 a.anchor-heading:hover:before{padding-top:12px}.rhdocs h4 a.anchor-heading:hover:before,.rhdocs h5 a.anchor-heading:hover:before{padding-top:4px}.rhdocs h6 a.anchor-heading:hover:before{padding-top:2px}}.rhdocs abbr[title]{border-bottom:.0625rem dotted}.rhdocs dfn{font-style:italic}.rhdocs h1{font-size:2em;margin:.67em 0}.rhdocs mark{background:#ff0;color:#000}.rhdocs small{font-size:80%}.rhdocs sub,.rhdocs sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}.rhdocs sup{top:-.5em}.rhdocs sub{bottom:-.25em}.rhdocs img{border:0}.rhdocs svg:not(:root){overflow:hidden}.rhdocs figure{margin:1em 2.5rem}.rhdocs hr{box-sizing:content-box;height:0}.rhdocs code,.rhdocs kbd,.rhdocs pre,.rhdocs samp{font-family:monospace,monospace;font-size:1em}.rhdocs button,.rhdocs optgroup,.rhdocs select,.rhdocs textarea,.rhdocsinput{color:inherit;font:inherit;margin:0}.rhdocs button.copy-link-btn{background:none;border:2px solid #fff;font:1px Red Hat Text}.rhdocs button.copy-link-btn:hover{border-bottom:2px solid #06c}.rhdocs button.copy-link-btn .link-icon{padding-bottom:4px}.rhdocs button{overflow:visible}.rhdocs button,.rhdocs select{text-transform:none}.rhdocs button,.rhdocs html input[type=button],.rhdocs input[type=reset],.rhdocs input[type=submit]{-moz-appearance:button;appearance:button;-webkit-appearance:button;cursor:pointer}.rhdocs button[disabled],.rhdocs html input[disabled]{cursor:default}.rhdocs button::-moz-focus-inner,.rhdocs input::-moz-focus-inner{border:0;padding:0}.rhdocs input{line-height:normal}.rhdocs input[type=checkbox],.rhdocs input[type=radio]{box-sizing:border-box;padding:0}.rhdocs input[type=number]::-webkit-inner-spin-button,.rhdocs input[type=number]::-webkit-outer-spin-button{height:auto}.rhdocs input[type=search]{-moz-appearance:textfield;appearance:textfield;-webkit-appearance:textfield;box-sizing:content-box}.rhdocs input[type=search]::-webkit-search-cancel-button,.rhdocs input[type=search]::-webkit-search-decoration{-webkit-appearance:none}.rhdocs fieldset{border:.0625rem solid silver;margin:0 .125rem;padding:.35em .625em .75em}.rhdocs legend{border:0;padding:0}.rhdocs textarea{overflow:auto}.rhdocs optgroup{font-weight:700}.rhdocs table{border-collapse:collapse;border-spacing:0}.rhdocs td,.rhdocs th{padding:0}.rhdocs ._additional-resources[class][class][id]:last-child{margin-top:-2rem}.rhdocs ._additional-resources[class][class]:only-child{grid-column:1/-1}._additional-resources[class][class] .additional-resources__heading,._additional-resources[class][class] .heading,._additional-resources[class][class] h1,._additional-resources[class][class] h2,._additional-resources[class][class] h3,._additional-resources[class][class] h4,._additional-resources[class][class] h5,._additional-resources[class][class] h6,._additional-resources[class][class] p.title{display:block;font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-size:1.125rem;font-weight:700;line-height:1.5rem;margin:0 0 .5rem;padding:0;text-transform:uppercase}._additional-resources[class][class] ul{border:0;list-style:none;margin:0;padding:0;position:relative}.related-topic-content__wrapper ._additional-resources[class][class] ul{display:block}._additional-resources[class][class] ul:after{background-color:#fff;bottom:0;content:"";display:block;height:.125rem;position:absolute;width:100%}._additional-resources[class][class] li{border-bottom:.0625rem solid #d2d2d2;box-sizing:content-box;margin:0;padding:1rem 1.5rem 1rem 0;-moz-column-break-inside:avoid;break-inside:avoid}._additional-resources[class][class] li:only-child{grid-column:1/-1}._additional-resources[class][class] li:last-child{border:0}@media (min-width:1100px){._additional-resources[class][class] li:last-child{border-bottom:.0625rem solid #d2d2d2}}._additional-resources[class][class] li p:only-child{margin:0;padding:0}._additional-resources[class][class] li a{text-decoration:none}._additional-resources[class][class] li a:focus,._additional-resources[class][class] li a:hover{text-decoration:underline}.rhdocs table .admonitionblock>div:nth-child(2),.rhdocs table .caution>div:nth-child(2),.rhdocs table .important>div:nth-child(2),.rhdocs table .note>div:nth-child(2),.rhdocs table .tip>div:nth-child(2),.rhdocs table .warning>div:nth-child(2){margin:.5rem 0}.rhdocs table .admonitionblock>div:nth-child(2)>:first-child,.rhdocs table .caution>div:nth-child(2)>:first-child,.rhdocs table .important>div:nth-child(2)>:first-child,.rhdocs table .note>div:nth-child(2)>:first-child,.rhdocs table .tip>div:nth-child(2)>:first-child,.rhdocs table .warning>div:nth-child(2)>:first-child{margin-top:0}.rhdocs table .admonitionblock>div:nth-child(2)>:last-child,.rhdocs table .caution>div:nth-child(2)>:last-child,.rhdocs table .important>div:nth-child(2)>:last-child,.rhdocs table .note>div:nth-child(2)>:last-child,.rhdocs table .tip>div:nth-child(2)>:last-child,.rhdocs table .warning>div:nth-child(2)>:last-child{margin-bottom:0}.rhdocs .codeblock__wrapper+.codeblock__wrapper,.rhdocs pre+pre,.rhdocs pre[class]+pre[class]{margin-top:2rem}.rhdocs .codeblock__wrapper{background:#f8f8f8;overflow:visible;position:relative;transform:translate(0);z-index:0}.codeblock__wrapper:before{background-repeat:no-repeat;background-size:6.25rem 100%;bottom:var(--scrollbar__height,1px);content:"";display:block;height:7.125rem;max-height:100%;max-height:calc(100% - var(--scrollbar__height, 2px));position:absolute;right:var(--scrollbar__width,6px);top:.0625rem;width:4.0625rem;z-index:1}.rhdocs .codeblock__inner-wrapper,.rhdocs pre{max-height:calc(100vh - 6.25rem)}@media (min-height:48em){.rhdocs .codeblock__inner-wrapper,.rhdocs pre{max-height:calc(100vh - 12.5rem)}}.rhdocs .codeblock__inner-wrapper{display:grid;grid-template-columns:1fr 4.375rem}.rhdocs .codeblock__wrapper--expanded .codeblock__inner-wrapper{max-height:-moz-max-content;max-height:max-content}.codeblock__copy span{display:block;height:0;position:absolute;visibility:hidden;width:0}.codeblock__copy:focus{outline:.0625rem dashed currentcolor}.codeblock__copy svg#icon--copy{height:1rem;width:1rem}.codeblock__expand{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#f0efef;border:0;cursor:pointer;height:1.75rem;left:calc(100% - 2.75rem - var(--scrollbar__width, 0px));position:absolute;text-indent:-9999em;top:3.25rem;width:1.75rem;z-index:2}.codeblock__expand:before{background:#6a6e73;content:"";height:100%;left:0;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512'%3E%3C!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc.--%3E%3Cpath d='M182.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l41.4-41.4v293.4l-41.4-41.3c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 402.7V109.3l41.4 41.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-96-96z'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 512'%3E%3C!--! Font Awesome Pro 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc.--%3E%3Cpath d='M182.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l41.4-41.4v293.4l-41.4-41.3c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 402.7V109.3l41.4 41.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-96-96z'/%3E%3C/svg%3E");-webkit-mask-position:center center;mask-position:center center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-size:auto 1rem;mask-size:auto 1rem;position:absolute;top:0;width:100%}.codeblock__wrapper--expanded .codeblock__expand{background:#2b9af3}.codeblock__wrapper--expanded .codeblock__expand:before{background:#fff}.codeblock__expand:focus:before,.codeblock__expand:hover:before{background:#06c}.codeblock__wrapper--expanded .codeblock__expand:focus:before,.codeblock__wrapper--expanded .codeblock__expand:hover:before{background:#fff}.codeblock__expand:focus{outline:.0625rem dashed currentcolor}.rhdocs .calloutlist>ol,.rhdocs .colist>ol{counter-reset:colist;list-style:none;margin:1rem 0 2rem;padding:0}.rhdocs .calloutlist>ol>li,.rhdocs .colist>ol>li{counter-increment:colist;font-size:1rem;margin:.5rem 0;padding-left:1.75rem;position:relative}.rhdocs .calloutlist>ol>li .colist-num,.rhdocs .colist>ol>li .colist-num{display:none}.calloutlist>ol>li:before,.colist>ol>li:before{content:counter(colist);left:0;position:absolute;top:.1875rem}.calloutlist dt{clear:left;float:left;margin:0;padding:0 .5rem 0 0}.included-in-guides[class],.included-in-guides[class][id]:last-child{background:#fff;border:.0625rem solid #d2d2d2;border-radius:.1875rem;margin:2em 0 4em;padding:2rem 2rem 1rem}.included-in-guides[class][id]:last-child{margin-top:-2rem}.included-in-guides[class]:only-child{grid-column:1/-1}.included-in-guides[class] .additional-resources__heading,.included-in-guides[class] .heading,.included-in-guides[class] h1,.included-in-guides[class] h2,.included-in-guides[class] h3,.included-in-guides[class] h4,.included-in-guides[class] h5,.included-in-guides[class] h6,.included-in-guides[class] p.title{display:block;font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-size:1.125rem;font-weight:700;line-height:1.5rem;margin:0 0 .5rem;padding:0;text-transform:uppercase}.included-in-guides[class] ul{border:0;list-style:none;margin:0;padding:0;position:relative}.related-topic-content__wrapper .included-in-guides[class] ul{display:block}.included-in-guides[class] ul:after{background-color:#fff;bottom:0;content:"";display:block;height:.125rem;position:absolute;width:100%}.included-in-guides[class] li{border-bottom:.0625rem solid #d2d2d2;box-sizing:content-box;margin:0;padding:1rem 1.5rem 1rem 0;-moz-column-break-inside:avoid;break-inside:avoid}.included-in-guides[class] li:only-child{grid-column:1/-1}.included-in-guides[class] li:last-child{border:0}@media (min-width:1100px){.included-in-guides[class] li:last-child{border-bottom:.0625rem solid #d2d2d2}}.included-in-guides[class] li p:only-child{margin:0;padding:0}.included-in-guides[class] li a{text-decoration:none}.included-in-guides[class] li a:focus,.included-in-guides[class] li a:hover{text-decoration:underline}.menuseq{display:inline-flex;overflow:hidden;text-indent:-9999em}.menuseq .menu,.menuseq .menuitem,.menuseq .submenu{display:block;position:relative;text-indent:0}.menuseq .menu+.menu:before,.menuseq .menu+.menuitem:before,.menuseq .menu+.submenu:before,.menuseq .menuitem+.menu:before,.menuseq .menuitem+.menuitem:before,.menuseq .menuitem+.submenu:before,.menuseq .submenu+.menu:before,.menuseq .submenu+.menuitem:before,.menuseq .submenu+.submenu:before{content:">";display:inline-block;font-weight:700;padding:0 .25em}.related-topic-content__wrapper{margin:2em 0}.related-topic-content__wrapper--for-guide{margin-bottom:-2.5rem;padding-bottom:.0625rem;position:relative;z-index:1}.related-topic-content__wrapper--for-guide:before{background:#f0f0f0;content:"";display:block;height:100%;left:-3rem;position:absolute;right:-4.5rem;top:0;width:auto;z-index:-1}@media (min-width:1100px){.related-topic-content__wrapper--for-guide:before{left:-2.5rem;right:-3.625rem}}.related-topic-content__wrapper--for-guide summary{padding:1em 2em 1em 2.1875rem}@media (min-width:950px){.related-topic-content__inner-wrapper{display:grid;gap:2em;grid-template-columns:repeat(2,minmax(0,1fr))}}.local-render .rhdocs-content{margin:0 auto}.rhdocs cp-documentation{display:block;padding-bottom:2.5rem}.rhdocs cp-documentation.PFElement,.rhdocs cp-documentation[pfelement]{padding:0}rh-table{display:block}::-webkit-scrollbar,:host .rhdocs ::-webkit-scrollbar{height:.625rem;width:.625rem}::-webkit-scrollbar,::-webkit-scrollbar-track,:host .rhdocs ::-webkit-scrollbar,:host .rhdocs ::-webkit-scrollbar-track{background-color:#d6d6d6}::-webkit-scrollbar-thumb,:host .rhdocs ::-webkit-scrollbar-thumb{background-color:#8e8e8e}*,:host .rhdocs *{scrollbar-color:#8e8e8e #d6d6d6}.rhdocs p:empty,p:empty{display:none}.rhdocs[class] h1 code,.rhdocs[class] h2 code,.rhdocs[class] h3 code,.rhdocs[class] h4 code,.rhdocs[class] h5 code,.rhdocs[class] h6 code,[class] h1 code,[class] h2 code,[class] h3 code,[class] h4 code,[class] h5 code,[class] h6 code{background:transparent;border:0;color:inherit;font:inherit;margin:0;padding:0}.pane-page-title h1,.rhdocs__header__primary-wrapper h1{font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-size:2.25rem;line-height:1.333}.rhdocs details[class]{list-style:none;margin:1rem 0 3rem;padding:0}.rhdocs-toc[class]{background:#f2f2f2;margin:1rem 0 2rem;padding:1rem}.rhdocs-toc[class]>:last-child{margin-bottom:0}.rhdocs-toc[class] .rhdocs-toctitle{font-size:1.25rem;font-weight:400;line-height:1.6667;margin-top:0;text-transform:none}.rhdocs-toc[class] li{margin-bottom:.25em;padding-left:.5em}.preamble{margin:0 0 2rem}.sect1{margin:2rem 0 1rem}:host .sect1,cp-documentation .sect1{margin:0 0 2rem;padding:.0625rem 0 0}:host(.cp-documentation--has-external-header) .sect1:first-child>h2:first-child,:host(.cp-documentation--has-external-header) .sect1:first-child>h3:first-child{margin-top:0}.listingblock,.literalblock{margin:1rem 0}.quoteblock,.verseblock{border-left:.25rem solid #d2d2d2;margin:1rem 0;padding:1rem 1rem 1rem 2rem}.quoteblock.pullleft,.verseblock.pullleft{float:left;margin-right:3rem;width:25rem}@media (min-width:768px){.quoteblock.pullleft,.verseblock.pullleft{margin-left:-1rem}}.quoteblock.pullright,.verseblock.pullright{float:right;margin-left:3rem;width:25rem}@media (min-width:768){.quoteblock.pullright,.verseblock.pullright{margin-right:-2rem}}@media (min-width:1100px){.quoteblock.pullright,.verseblock.pullright{margin-right:-10rem}}.quoteblock>:first-child,.verseblock>:first-child{margin-top:0}.quoteblock .content,.verseblock .content{font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;font-size:1.25rem;line-height:1.6667}.quoteblock .attribution,.verseblock .attribution{font-size:.875rem;font-style:italic;font-weight:600;line-height:1.6667;text-transform:uppercase}.quoteblock .attribution .citetitle,.verseblock .attribution .citetitle{color:#585858}.quoteblock .attribution cite,.verseblock .attribution cite{font-size:1em}.quoteblock blockquote{font-style:italic;margin:0;padding:0}.quoteblock blockquote .content>:first-child{margin-top:0}.quoteblock blockquote .content>:first-child:before{color:#e00;content:"â€œ";display:block;float:left;font-size:2.75rem;font-style:normal;line-height:1.125em;margin-right:.5rem}.quoteblock blockquote .content>:first-child .content>:first-child:before{content:none}.imageblock{margin:1rem 0}.imageblock.pullleft{float:left;margin-right:3rem;width:25rem}@media (min-width:768px){.imageblock.pullleft{margin-left:-1rem}}.imageblock.pullright{float:right;margin-left:3rem;width:25rem}@media (min-width:768){.imageblock.pullright{margin-right:-2rem}}@media (min-width:1100px){.imageblock.pullright{margin-right:-10rem}}.imageblock.interrupter{margin:2rem 0}@media (min-width:768px){.imageblock.interrupter{margin-left:-1rem;margin-right:-2rem}.imageblock.interrupter .caption{margin-left:1rem;margin-right:2rem}}@media (min-width:1100px){.imageblock.interrupter{margin-right:-10rem}.imageblock.interrupter .caption{margin-right:10rem}}.imageblock.interrupter img{max-width:100%}.imageblock .caption{color:#585858;display:block;font-size:.875rem;line-height:1.6667;margin:.5rem 0 0}.rhdocs-footnotes{border-top:.0625rem solid #d2d2d2;margin:3rem 0 1rem;padding:1rem 0 0}.rhdocs-footnotes>ol{margin:0;padding:0 0 0 1.5rem}@supports (counter-reset:footnotenum){.rhdocs-footnotes>ol{counter-reset:footnotenum;list-style:none;padding:0}.rhdocs-footnotes>ol>li{counter-increment:footnotenum}.rhdocs-footnotes>ol>li:before{color:#585858;content:"[" counter(footnotenum) "]";display:inline-block;margin-right:.25rem}}.rhdocs-footer{background:#ededed;color:#151515;font-size:.875rem;line-height:1.6667;margin:3rem 0 0;padding:1rem}.center{margin-left:auto;margin-right:auto}.stretch{width:100%}.visually-hidden{overflow:hidden;position:absolute;clip:rect(0,0,0,0);border:0;height:.0625rem;margin:-.0625rem;padding:0;width:.0625rem}.rh-docs-legal-notice{margin-top:4em}pre,pre[class]{margin:0;padding:1.25em 1em;position:relative}code[class*=language-],pre[class*=language-]{color:#151515;-moz-tab-size:4;-o-tab-size:4;tab-size:4}code.language-none,code.language-text,code.language-txt,pre.language-none,pre.language-text,pre.language-txt{color:#151515}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{background:#cceae7;color:#263238}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{background:#cceae7;color:#263238}:not(pre)>code[class*=language-]{border-radius:.2em;padding:.1em;white-space:normal}.token.atrule{color:#40199a}.token.attr-name{color:#06c}.token.attr-value,.token.attribute{color:#b300b3}.token.boolean{color:#40199a}.token.builtin,.token.cdata,.token.char,.token.class,.token.class-name{color:#06c}.token.comment{color:#6a6e73}.token.constant{color:#40199a}.token.deleted{color:#c9190b}.token.doctype{color:#6a6e73}.token.entity{color:#c9190b}.token.function{color:#40199a}.token.hexcode{color:#b300b3}.token.id,.token.important{color:#40199a;font-weight:700}.token.inserted{color:#06c}.token.keyword{color:#40199a}.token.number{color:#b300b3}.token.operator{color:#06c}.token.prolog{color:#6a6e73}.token.property{color:#06c}.token.pseudo-class,.token.pseudo-element{color:#b300b3}.token.punctuation,.token.regex{color:#06c}.token.selector{color:#c9190b}.token.string{color:#b300b3}.token.symbol{color:#40199a}.token.unit{color:#b300b3}.token.url,.token.variable{color:#c9190b}.rhdocs.local-render{margin:0 auto;max-width:45.8125rem;padding:0 1.5rem}@media print{.field code,.field pre,code[class*=language-],pre,pre[class*=language-]{white-space:pre-wrap!important;word-wrap:break-word!important;overflow-wrap:break-word!important;word-break:break-word!important}}.book-nav__list[class]{display:flex;justify-content:space-between;line-height:var(--jupiter__lineHeight--xs,1.3333);list-style:none;margin:5rem 0 0;padding:0}@media (min-width:1200px){.book-nav__list[class]{display:grid;gap:2rem;grid-template-columns:repeat(2,minmax(0,1fr))}}.book-nav__item a{display:inline-block;font-size:.875rem;font-weight:500;padding-left:1.25rem;position:relative;text-transform:uppercase}.book-nav__item a:before{background:url(/sites/dxp-docs/penumbra-dist/jupiter/images/arrow-down-solid.svg) no-repeat;background-size:contain;content:"";display:block;height:.875rem;left:0;position:absolute;top:.125rem;transform:rotate(90deg);width:.875rem}.book>.titlepage:not(:last-child),.rhdocs .chapter,section[id]{padding-bottom:3.75rem}.book>.titlepage .chapter:last-child,.book>.titlepage section[id]:last-child,.chapter .chapter:last-child,.chapter section[id]:last-child,section[id] .chapter:last-child,section[id] section[id]:last-child{margin-bottom:-3.75rem}.rhdocs .codeblock__wrapper+section[id],pre+section[id]{padding-top:3.75rem}.rhdocs .cta-link{font-size:inherit}.rhdocs a{word-wrap:break-word;overflow-wrap:break-word}.rhdocs .caution,.rhdocs .important,.rhdocs .note,.rhdocs .tip,.rhdocs .warning{padding:.8888888889em;position:relative}.rhdocs .QSIPopOver{bottom:18.75rem!important;top:auto!important}.rhdocs .alert{position:relative}.rhdocs button.dismiss-button{background:none;border:0;cursor:pointer;height:2.5rem;margin-top:-1.25rem;padding:0;position:absolute;right:.3125rem;text-align:center;top:50%;width:2.5rem;z-index:50}.rhdocs button.dismiss-button:after{content:"\f109";display:inline-block;filter:alpha(opacity=30);font-family:rh-web-iconfont;font-size:1.3125rem;font-style:normal;font-variant:normal;font-weight:400;line-height:1;line-height:2.5rem;opacity:.3;text-decoration:inherit;text-rendering:optimizeLegibility;text-transform:none!important;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-smoothing:antialiased}.rhdocs .book>.titlepage,.rhdocs .chapter,.rhdocs section[id]{padding-bottom:var(--rh-space-4xl,64px)}.rhdocs .alert{border:0;border-radius:0}.rhdocs .alert>h2:first-child,.rhdocs .alert>h3:first-child,.rhdocs .alert>h4:first-child,.rhdocs .alert>h5:first-child,.rhdocs .alert>h6:first-child,.rhdocs .alert>p:first-child{margin-top:0!important}.rhdocs .alert>p:last-child{margin-bottom:0!important}.rhdocs .alert-w-icon[class]{padding-left:2.8125rem}.rhdocs .alert-w-icon .alert-icon{float:left;font-size:1.125rem;margin-left:-1.875rem;margin-right:.625rem}.rhdocs .alert-w-icon .alert-icon[class*=" rh-icon-"],.rhdocs .alert-w-icon .alert-icon[class^=rh-icon-]{font-size:2.25rem;line-height:1em;margin-left:-2.5rem;margin-top:-.375rem}.rhdocs .alert-w-icon .alert-icon[class*=" icon-innov-prev"],.rhdocs .alert-w-icon .alert-icon[class^=icon-innov-prev]{font-size:1.3125rem;margin-top:.25rem}.rhdocs .alert-w-icon.alert-plain{background:none;color:#151515;padding-left:5rem}.rhdocs .alert-w-icon.alert-plain .alert-icon{font-size:3rem;margin-left:-4.375rem;margin-right:0}.rhdocs .alert-w-icon.alert-plain.alert-success .alert-icon{color:#3f9c35}.rhdocs .alert-w-icon.alert-plain.alert-info .alert-icon{color:#0088ce}.rhdocs .alert-w-icon.alert-plain.alert-warning .alert-icon{color:#f0ab00}.rhdocs .alert-w-icon.alert-plain.alert-danger .alert-icon{color:#e00}#target_banner .copy-url{float:right;margin-top:0}#target_banner .dropdown-menu{font-size:inherit}.titlepage .svg-img[data*="title_logo.svg"]{margin:1.5rem 0;width:15rem}.para{margin:1.49963rem 0}.para[class]{margin-bottom:1.49963rem}dd{margin-bottom:2.5rem}.rhdocs .card-light,.rhdocs .card-light-gray,.rhdocs .card-light-grey{background:#f0f0f0;border:.0625rem solid #f0f0f0;color:#151515}.rhdocs .card-light-gray.push-bottom:first-child,.rhdocs .card-light-grey.push-bottom:first-child,.rhdocs .card-light.push-bottom:first-child{margin-bottom:3.125rem!important}.rhdocs .card-light a.card-link,.rhdocs .card-light h1,.rhdocs .card-light h2,.rhdocs .card-light h3,.rhdocs .card-light h4,.rhdocs .card-light h5,.rhdocs .card-light h6,.rhdocs .card-light-gray a.card-link,.rhdocs .card-light-gray h1,.rhdocs .card-light-gray h2,.rhdocs .card-light-gray h3,.rhdocs .card-light-gray h4,.rhdocs .card-light-gray h5,.rhdocs .card-light-gray h6,.rhdocs .card-light-grey a.card-link,.rhdocs .card-light-grey h1,.rhdocs .card-light-grey h2,.rhdocs .card-light-grey h3,.rhdocs .card-light-grey h4,.rhdocs .card-light-grey h5,.rhdocs .card-light-grey h6{color:#151515}.rhdocs .card-light-gray.card-active:after,.rhdocs .card-light-grey.card-active:after,.rhdocs .card-light.card-active:after{border-top-color:#f0f0f0}.rhdocs .card-md,.rhdocs .card-narrow{display:block;padding:1.1875rem;white-space:normal;word-wrap:break-word}.rhdocs .card .card-heading.card-heading-sm,.rhdocs .card-sm .card .card-heading{font-size:1.0625em;font-weight:500;line-height:1.5}.rhdocs .card .card-heading.card-heading-flush{margin-bottom:.25rem}.rhdocs .card .card-heading.card-heading-red{color:#d10000}.rhdocs .card>p{margin-top:0}.rhdocs .card>p:last-child{margin-bottom:0}.rhdocs .new-experience{background-color:#e7f1fa;border:.0625rem solid #bee1f4;font-size:1rem;margin:1.5rem;padding:1.5rem;position:relative;z-index:1}@media (min-width:48rem){.new-experience{display:flex}.new-experience--contained{left:50%;position:relative;transform:translateX(-50%);width:calc(100vw - 2.5rem)}}.new-experience__primary-content{flex-grow:1}@media (min-width:48rem){.new-experience__primary-content{margin-right:1.25rem}}.new-experience__title{font-size:inherit;font-weight:inherit;line-height:1.6;margin:0;padding:0}.new-experience__title+a,.new-experience__title+pfe-cta{display:inline-block;margin-top:1.5em}.new-experience__secondary-content{min-width:12.5rem}@media (min-width:48rem){.new-experience__secondary-content{text-align:right}}.example{border-left:.3125rem solid #ccc;margin-bottom:2rem;padding:1rem 0 1rem 1rem}dl.calloutlist[class]{display:grid;gap:1.25em .75em;grid-template-columns:min-content 1fr}dl.calloutlist[class] dt{float:none;margin:0;padding:0}dl.calloutlist[class] dd{margin:0;padding:0}dl.calloutlist[class] dd>:first-child{margin-top:0}dl.calloutlist[class] dd>:last-child{margin-bottom:0}.toast{background-color:#000;background-color:rgba(0,0,0,.9);bottom:.9375rem;box-shadow:0 .125rem .3125rem 0 rgba(0,0,0,.26);color:#fff;left:.9375rem;max-width:32.8125rem;min-width:6.25rem;padding:.9375rem;position:fixed;right:.9375rem;transform:translate3d(0,150%,0);transition:transform .2s cubic-bezier(.465,.183,.153,.946);will-change:transform;z-index:999}.toast.show{transform:translateZ(0)}.toast a{color:#fff;text-decoration:underline}.toast a:focus,.toast a:hover{color:#2b9af3}.toast a.btn{text-decoration:none}.toast .btn.btn-link{color:#fff}.toast .close{color:#fff;opacity:.3;text-decoration:none}.toast .close:focus,.toast .close:hover{color:#fff;opacity:.5}.no-csstransforms3d.csstransitions .toast{transition:all .2s cubic-bezier(.465,.183,.153,.946)}.no-csstransforms3d .toast{opacity:0;visibility:hidden}.no-csstransforms3d .toast.show{opacity:1;visibility:visible}.annotator-outer[class][class]{display:none;flex-direction:column;flex-grow:1;height:auto;margin:0;position:static;width:auto}@media (min-width:1400px){.annotator-outer[class][class]{display:flex}}.annotator-frame[class] *{height:auto}@media (min-width:1400px){.annotator-frame .h-sidebar-iframe[class]{position:static;width:calc(100% + 1.5rem)}}.annotator-toolbar[class][class]{position:static;width:auto}.annotator-toolbar>ul,.annotator-toolbar>ul>li{display:block;height:auto;list-style:none;margin:0;padding:0;width:auto}.annotator-toolbar>ul>li{display:flex;justify-content:flex-end}.annotator-frame[class] .annotator-frame-button--sidebar_toggle,.annotator-outer .annotator-frame-button[class][class],.app-content-wrapper *{font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif!important}.annotator-outer .annotator-frame-button[class][class]{font-size:.9375rem;font-weight:500;height:auto;line-height:1.333;margin-right:1.875rem;padding:.75em 1em;position:static}@media (min-width:1400px){.annotator-outer .annotator-frame-button[class][class]{margin-right:0}}.annotator-outer iframe{flex-grow:1;margin-bottom:1.25rem}@media (min-width:1400px){.annotator-outer iframe{min-height:37.5rem}}.producttitle{color:#000;font-size:1.25rem;text-transform:uppercase}.producttitle .productnumber{color:var(--jupiter__palette__red--50,#e00)}.cp-modal-open,.zoom-open{overflow:hidden}.cp-modal,.cp-video-modal,.zoom-modal{bottom:0;display:none;filter:alpha(opacity=0);left:0;opacity:0;outline:0;overflow:hidden;position:fixed;right:0;top:0;transition:all .2s cubic-bezier(.465,.183,.153,.946);z-index:1040;z-index:1050;-webkit-overflow-scrolling:touch}.rhdocs .in.cp-modal,.rhdocs .in.cp-video-modal,.rhdocs .in.zoom-modal{display:block;filter:alpha(opacity=100);opacity:1;overflow-x:hidden;overflow-y:auto}.rhdocs .cp-modal .close,.rhdocs .cp-video-modal .close,.rhdocs .zoom-modal .close{background-color:#fff;border-radius:50%;color:#1a1a1a;font-size:1.75rem;height:28px;height:1.75rem;line-height:1.75rem;margin-bottom:.375rem;margin-top:0;opacity:.9;position:absolute;right:-.5rem;text-shadow:none;top:0;width:28px;width:1.75rem}.cp-modal .close:after,.cp-video-modal .close:after,.zoom-modal .close:after{line-height:1.75rem}.cp-modal-wrap,.zoom-wrap{margin:.625rem;padding-top:.5rem;position:relative}@media (min-width:48rem){.rhdocs .cp-modal-wrap,.rhdocs .zoom-wrap{margin:2.8125rem auto;width:38.4375rem}}@media (min-width:62rem){.rhdocs .cp-modal-wrap,.rhdocs .zoom-wrap{width:49.8958rem}}@media (min-width:75rem){.rhdocs .cp-modal-wrap,.rhdocs .zoom-wrap{width:60.3125rem}}.rhdocs .cp-modal-body :last-child{margin-bottom:0}.rhdocs .cp-modal-backdrop,.rhdocs .zoom-backdrop{background-color:#000;bottom:0;display:none;filter:alpha(opacity=0);left:0;opacity:0;position:fixed;right:0;top:0;transition:opacity .2s cubic-bezier(.465,.183,.153,.946);z-index:1040}.rhdocs .in.cp-modal-backdrop,.rhdocs .in.zoom-backdrop{display:block;filter:alpha(opacity=80);opacity:.8}.rhdocs .cp-modal-body{background:#fff;padding:1.875rem}.rhdocs .cp-modal[data-cp-modal-video=true] .cp-modal-body,.rhdocs .cp-video-modal .cp-modal-body{padding:0}.rhdocs [data-action=zoom]{position:relative}.rhdocs [data-action=zoom]:after{background:rgba(0,0,0,.4);bottom:0;color:#fff;display:inline-block;font-family:rh-web-iconfont;font-style:normal;font-variant:normal;font-weight:400;line-height:1;padding:.375rem;position:absolute;right:0;text-decoration:inherit;text-decoration:none!important;text-rendering:optimizeLegibility;text-transform:none!important;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-smoothing:antialiased}.rhdocs [data-action=zoom]:focus:after,.rhdocs [data-action=zoom]:hover:after{background:rgba(0,0,0,.9)}.rhdocs .zoom-wrap .zoom-larger{text-align:center}.rhdocs .zoom-wrap .zoom-larger a{color:#fff}.rhdocs .zoom-wrap .zoom-larger a:focus,.rhdocs .zoom-wrap .zoom-larger a:hover{color:#fff;text-decoration:underline}.rhdocs .zoom-wrap .zoom-larger a:after{content:"â¿»";display:inline-block;margin-left:.25rem}.rhdocs .zoom-body{background:#fff;border-radius:.5rem;margin:0 0 1rem;padding:1rem;text-align:center}.rhdocs .zoom-body .video-wrapper{height:0;overflow:hidden;padding-bottom:56.25%;position:relative}.rhdocs .zoom-body .video-wrapper[data-aspect-ratio="4:3"]{padding-bottom:75%}.rhdocs .zoom-body iframe{height:100%;left:0;position:absolute;top:0;width:100%}.rhdocs .para>.title[class],.rhdocs p.title[class]{font-size:1rem;font-style:normal;font-weight:700;line-height:1.6667;margin:1.25rem 0 0;text-transform:none}.rhdocs .para>.title[class]+.content>:first-child,.rhdocs .para>.title[class]+p,.rhdocs p.title[class]+.content>:first-child,.rhdocs p.title[class]+p{margin-top:0}.rhdocs [class] pre .caution,.rhdocs [class] pre .important,.rhdocs [class] pre .note,.rhdocs [class] pre .tip,.rhdocs [class] pre .warning{background:transparent;border:0;color:inherit;font:inherit;margin:0;padding:0}.rhdocs [class] pre .caution:after,.rhdocs [class] pre .important:after,.rhdocs [class] pre .note:after,.rhdocs [class] pre .tip:after,.rhdocs [class] pre .warning:after{content:none}.rhdocs [class] code.email{background-color:transparent;font:inherit;padding:0}.rhdocs [class] .author{margin-bottom:1.5rem}.rhdocs [class] .author .author{margin-bottom:0}.rhdocs table{margin:2rem 0}.rhdocs [class] table{width:auto}.rhdocs table .table-contents table{max-width:100%;overflow:auto}.rhdocs rh-table table{margin:0;max-width:9999em;overflow:visible}.rhdocs td,.rhdocs th{border-left:0;padding:.5em 1rem;transition:background .25s ease-out}.rhdocs td.content--md[class][class],.rhdocs th.content--md[class][class]{min-width:13em}.rhdocs td.content--lg[class][class],.rhdocs th.content--lg[class][class]{min-width:20em}.rhdocs thead th{padding-top:1.5em}.rhdocs caption{color:currentColor;color:var(--pfe-table__caption--Color,currentColor);font-weight:700;margin-bottom:.5rem;margin-top:.5rem;text-align:center}.rhdocs .revhistory table td,.rhdocs .revhistory table th{border-color:transparent}.rhdocs .revhistory table td{padding:.625rem .875rem}.rhdocs .revhistory table.simplelist{margin:0}@media print{#masthead{display:none!important}}.rh-table--is-full-screen #to-top{display:none}.rhdocs{--rh-table--maxHeight:calc(100vh - 6.25rem);color:#151515;font-family:var(--rh-font-family-body-text,RedHatText,"Red Hat Text","Noto Sans Arabic","Noto Sans Hebrew","Noto Sans JP","Noto Sans KR","Noto Sans Malayalam","Noto Sans SC","Noto Sans TC","Noto Sans Thai",Helvetica,Arial,sans-serif);font-size:var(--rh-body-copy-lage,1.125rem);line-height:1.6667;-moz-tab-size:4;-o-tab-size:4;tab-size:4}.rhdocs rh-codeblock::slotted(#content){border-radius:.25rem;padding:var (--rh-space-lg,16px)}.rhdocs rh-codeblock .screen{display:grid;grid-template-columns:1fr 4.375rem}.rhdocs rh-codeblock[class][class][class][class][class]{max-width:99999em}.rhdocs .codeblock__copy span{display:block;height:0;position:absolute;visibility:hidden;width:0}.rhdocs .codeblock__copy:focus{outline:.0625rem dashed currentcolor}.rhdocs .codeblock__copy svg#icon--copy{height:1rem;width:1rem}.rhdocs pre{border:0;max-height:-moz-max-content;max-height:max-content}.rhdocs pre,pre[class]{margin:0;padding:1.25em 1em;position:relative}.rhdocs rh-code-block>div.codeblock__inner-wrapper>pre,.rhdocs rh-code-block>div.codeblock__inner-wrapper>pre[class]{margin:0;padding:0;position:relative}.rhdocs code[class*=language-],pre[class*=language-]{color:#151515;-moz-tab-size:4;-o-tab-size:4;tab-size:4}.rhdocs code.literal{background:#eee;border-radius:.25rem;color:#000;font-size:.875rem;line-height:1.6667;overflow-wrap:break-word;padding:.125em .5em;word-break:break-word}.rhdocs code.literal,.rhdocs kbd,.rhdocs span.keycap{font-family:RedHatMono,Red Hat Mono,Consolas,monospace}.rhdocs kbd,.rhdocs span.keycap{background-color:#eee;background-image:linear-gradient(180deg,#ddd,#eee,#fff);border-radius:.1875rem;box-shadow:0 -.0625rem 0 0 #fff,0 .0625rem 0 .1875rem #aaa;font-size:90%;font-weight:400;margin:0 .25rem;padding:.125rem .375rem}.rhdocs ol,.rhdocs ul{margin:1rem 0;padding:0 0 0 1.5rem}.rhdocs ._additional-resources[class][class],.rhdocs ._additional-resources[class][class][id]:last-child{background:#fff;border:.0625rem solid #d2d2d2;border-radius:.1875rem;margin:2em 0 4em;padding:2rem 2rem 1rem}.rhdocs ._additional-resources[class][class] ul{border:0;list-style:none;margin:0;padding:0;position:relative}.rhdocs ._additional-resources[class][class] li{border-bottom:.0625rem solid #d2d2d2;box-sizing:content-box;margin:0;padding:1rem 1.5rem 1rem 0;-moz-column-break-inside:avoid;break-inside:avoid}.rhdocs ._additional-resources[class][class] li:last-child{border:0}.rhdocs section.section#additional_resource .additional-resources__heading,.rhdocs section.section#additional_resource .heading,.rhdocs section.section#additional_resource h1,.rhdocs section.section#additional_resource h2,.rhdocs section.section#additional_resource h3,.rhdocs section.section#additional_resource h4,.rhdocs section.section#additional_resource h5,.rhdocs section.section#additional_resource h6,.rhdocs section.section#additional_resource p.title{display:block;font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-size:1.125rem;font-weight:700;line-height:1.5rem;margin:0 0 .5rem;padding:0;text-transform:uppercase}.rhdocs section.section:first-of-type{margin-top:var(--rh-space-4xl,64px)}.rhdocs section.section p{margin-bottom:var(--rh-space-lg,16px);margin-top:0;word-wrap:break-word}.rhdocs .section.section h1,.rhdocs .section.section h2,.rhdocs .section.section h3,.rhdocs .section.section h4,.rhdocs .section.section h5,.rhdocs .section.section h6,.rhdocs h1,.rhdocs h2,.rhdocs h3,.rhdocs h4,.rhdocs h5,.rhdocs h6{font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;font-weight:400;line-height:1.3333}.rhdocs h1:first-of-type,.rhdocs h2:first-of-type,.rhdocs h3:first-of-type,.rhdocs h4:first-of-type,.rhdocs h5:first-of-type,.rhdocs h6:first-of-type{margin-top:0}.rhdocs h1,.rhdocs h2,.rhdocs h3,.rhdocs h4,.rhdocs h5,.rhdocs h6{font-family:RedHatDisplay,Red Hat Display,Helvetica,Arial,sans-serif;font-weight:400;line-height:1.3333}.rhdocs h2,.rhdocs section.section h2{font-size:var(--rh-font-size-heading-md,1.75rem)}.rhdocs h3,.rhdocs section.section h3{font-size:1.5rem;font-weight:400}.rhdocs dl dt{font-weight:600;margin:.5rem 0}.rhdocs dl{display:block;margin-block-end:1em;margin-block-start:1em;margin-inline-end:0;margin-inline-start:0}.rhdocs .para{margin:1.49963rem 0}.rhdocs dl.calloutlist[class] dt{float:none;margin:0;padding:0}.rhdocs dl.calloutlist[class] dd>:last-child{margin-bottom:0}.rhdocs dl.calloutlist[class]{display:grid;gap:1.25em .75em;grid-template-columns:fit-content(40%) 1fr}.rhdocs .calloutlist dt{clear:left;display:flex;flex-wrap:wrap;float:left;margin:0;padding:0 .5rem 0 0}.rhdocs .calloutlist dt a:not(:first-child){padding-left:4px}.rhdocs dl.calloutlist[class] dd{margin:0;padding:0}.rhdocs .callout,.rhdocs .colist>ol>li:before,.rhdocs .conum{background:#06c;border-radius:50%;color:#fff;display:inline-block;font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;font-size:.75rem;font-style:normal;font-weight:600;height:1.25rem;line-height:1.35rem;padding:0;position:relative;text-align:center;top:-.125em;vertical-align:middle;width:1.25rem}.rhdocs img,.rhdocs object,.rhdocs svg{display:inline-block;max-width:100%;vertical-align:middle}.rhdocs .titlepage .svg-img[data*="title_logo.svg"]{margin:1.5rem 0;width:15rem}.rhdocs[class] .author{margin-bottom:1.5rem}.rhdocs[class] .author .author{margin-bottom:0}.rhdocs .para>.title[class],p.title[class]{font-size:1rem;font-style:normal;font-weight:700;line-height:1.6667;margin:1.25rem 0 0}.rhdocs .example{border-left:.3125rem solid #ccc;margin-bottom:2rem;padding:1rem 0 1rem 1rem}.rhdocs code{background:#eee;color:#000;font-family:RedHatMono,Red Hat Mono,Consolas,monospace;font-size:.875rem;line-height:1.6667;overflow-wrap:break-word;padding:.125em .5em;word-break:break-word}.rhdocs .para[class]{margin-bottom:1.49963rem}.rhdocs[class] code.email{background-color:transparent;font:inherit;padding:0}rh-alert.admonition #description,rh-alert.admonition p{font-size:var(--rh-font-size-body-text-md,1rem)}rh-alert{width:-moz-fit-content;width:fit-content}.rhdocs .producttitle{color:#000;font-size:1.25rem;text-transform:uppercase}.rhdocs dl{margin:1rem 0}.rhdocs dl dt{font-weight:600;margin:.5rem 0}.rhdocs ol ol{list-style:lower-roman}.rhdocs .codeblock--processed pf-clipboard-copy::part(input),.rhdocs .codeblock--processed pf-clipboard-copy::part(span){display:none}.token.tag{color:#c9190b}.calloutlist div.para{margin:0}rh-alert.admonition{margin-bottom:var(--rh-space-lg,1rem)}.guibutton,.guimenu,.guimenuitem{font-weight:700}.guibutton{font-size:90%;padding:.1875rem}.guibutton:before{content:"["}.guibutton:after{content:"]"}.docs-content-container,.rhdocs{--rh-table--maxHeight:calc(100vh - 6.25rem);color:#151515;font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;font-size:1.125rem;line-height:1.6667;-moz-tab-size:4;-o-tab-size:4;tab-size:4}pre[hidden]{display:none}.codeblock[class][class][class][class][class]{max-width:99999em}.codeblock__wrapper{background:var(--rh-color-surface-lighter,#f2f2f2);margin:1rem 0;overflow:visible;position:relative;transform:translate(0);z-index:0}.codeblock__inner-wrapper:after{content:"";display:block;min-height:.625rem;width:4.375rem}.codeblock__copy{--pfe-clipboard--icon--Color--hover:#06c;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#f0efef;height:1.75rem;left:calc(100% - 2.75rem - var(--scrollbar__width, 0px));padding:.3125rem .375rem;position:absolute;top:1rem;width:1.75rem;z-index:2}.codeblock__inner-wrapper pre{border:0;max-height:-moz-max-content;max-height:max-content}.pfe-clipboard:not([copied]) .pfe-clipboard__text--success,:host(:not([copied])) .pfe-clipboard__text--success{display:none!important}.codeblock[class]{margin:0;overflow:visible;padding-right:0}pre{display:block;font-size:.8125rem;line-height:1.42857;margin:0 0 .625rem;word-break:break-all;word-wrap:break-word;background-color:var(--rh-color-surface-lighter,#f2f2f2);border:.0625rem solid #ccc;border-radius:.25rem;color:#333}.docs-content-container pre,.rhdocs pre{background:var(--rh-color-surface-lighter,#f2f2f2);color:#151515;font-family:RedHatMono,Red Hat Mono,Consolas,monospace;font-size:.875rem;line-height:1.6667;overflow-wrap:normal;white-space:pre;word-break:normal}.rhdocs pre[class]{line-height:1.6667;overflow-x:auto}rh-codeblock pre[class][class]{overflow-x:auto}.pfe-clipboard__text--success{background-color:#ddd;border:1px solid #000;border-radius:2px}*,:after,:before{box-sizing:border-box}:root{--rh-space-xs:4px;--rh-space-sm:6px;--rh-space-md:8px;--rh-space-lg:16px;--rh-space-xl:24px;--rh-space-2xl:32px;--rh-space-3xl:48px;--rh-space-4xl:64px;--rh-space-5xl:80px;--rh-space-6xl:96px;--rh-space-7xl:128px;--rh-font-size-body-text-xs:.75rem;--rh-font-size-body-text-sm:.875rem;--rh-font-size-body-text-md:1rem;--rh-font-size-body-text-lg:1.125rem;--rh-font-size-body-text-xl:1.25rem;--rh-font-size-body-text-2xl:1.5rem;--rh-font-size-heading-xs:1.25rem;--rh-font-size-heading-sm:1.5rem;--rh-font-size-heading-md:1.75rem;--rh-font-size-heading-lg:2.25rem;--rh-font-size-heading-xl:2.5rem;--rh-font-size-heading-2xl:3rem;--pfe-navigation--logo--maxWidth:200px;--pfe-navigation__logo--height:40px;--pfe-navigation--fade-transition-delay:500ms;--pfe-navigation__nav-bar--highlight-color:var(--rh-color-brand-red-on-dark,#e00);--pf-global--icon--FontSize--sm:.75rem}body,html{font-family:Red Hat Text,sans-serif;font-size:var(--rh-font-size-body-text-md,1rem);line-height:var(--rh-line-height-body-text,1.5);margin:0}h1,h2,h3,h4,h5,h6{font-family:Red Hat Display,sans-serif;font-weight:400;line-height:var(--rh-line-height-heading,1.3)}h1{font-size:var(--rh-font-size-heading-2xl,3rem);line-height:62px}h2{font-size:var(--rh-font-size-heading-xl,2.5rem);line-height:48px}h3{font-size:var(--rh-font-size-heading-lg,2.25rem)}h4{font-size:var(--rh-font-size-heading-md,2.25rem)}h5{font-size:var(--rh-font-size-heading-sm,2.25rem)}h6{font-size:var(--rh-font-size-heading-xs,2.25rem)}main{line-height:30px}section{padding-bottom:3rem;padding-top:3rem}img{height:auto;max-width:100%}a{color:var(--rh-color-interactive-blue-darker,#06c);text-decoration:none}a:hover{color:var(--rh-color-interactive-blue-darkest,#004080)}rh-alert.html-container a{text-decoration:underline}.container{padding-left:12px;padding-right:12px}.container,.container-fluid{margin-left:auto;margin-right:auto;width:100%}.container-fluid{padding:12px}@media (min-width:576px){.container{max-width:540px}}@media (min-width:768px){.container{max-width:720px}}@media (min-width:992px){.container{max-width:960px}}@media (min-width:1200px){.container{min-width:1140px}}@media (min-width:1400px){.container{min-width:1320px}}.grid{display:grid;gap:var(--rh-space-xl,24px)}.grid-center{margin:auto}.grid.grid-col-2{grid-template-columns:repeat(2,1fr)}.grid.grid-col-3{grid-template-columns:repeat(3,1fr)}.grid.grid-col-4{grid-template-columns:repeat(4,1fr)}.grid.grid-col-5{grid-template-columns:repeat(5,1fr)}.grid.grid-col-6{grid-template-columns:repeat(6,1fr)}.grid.grid-col-7{grid-template-columns:repeat(7,1fr)}.grid.grid-col-8{grid-template-columns:repeat(8,1fr)}.grid.grid-col-9{grid-template-columns:repeat(9,1fr)}.grid.grid-col-10{grid-template-columns:repeat(10,1fr)}.grid.grid-col-11{grid-template-columns:repeat(11,1fr)}.grid.grid-col-12{grid-template-columns:repeat(12,1fr)}@media (min-width:768px){.grid.grid-col-md-2{grid-template-columns:repeat(2,1fr)}.grid.grid-col-md-3{grid-template-columns:repeat(3,1fr)}.grid.grid-col-md-4{grid-template-columns:repeat(4,1fr)}.grid.grid-col-md-5{grid-template-columns:repeat(5,1fr)}.grid.grid-col-md-6{grid-template-columns:repeat(6,1fr)}.grid.grid-col-md-7{grid-template-columns:repeat(7,1fr)}.grid.grid-col-md-8{grid-template-columns:repeat(8,1fr)}.grid.grid-col-md-9{grid-template-columns:repeat(9,1fr)}.grid.grid-col-md-10{grid-template-columns:repeat(10,1fr)}.grid.grid-col-md-11{grid-template-columns:repeat(11,1fr)}.grid.grid-col-md-12{grid-template-columns:repeat(12,1fr)}}@media (min-width:992px){.grid.grid-col-lg-2{grid-template-columns:repeat(2,1fr)}.grid.grid-col-lg-3{grid-template-columns:repeat(3,1fr)}.grid.grid-col-lg-4{grid-template-columns:repeat(4,1fr)}.grid.grid-col-lg-5{grid-template-columns:repeat(5,1fr)}.grid.grid-col-lg-6{grid-template-columns:repeat(6,1fr)}.grid.grid-col-lg-7{grid-template-columns:repeat(7,1fr)}.grid.grid-col-lg-8{grid-template-columns:repeat(8,1fr)}.grid.grid-col-lg-9{grid-template-columns:repeat(9,1fr)}.grid.grid-col-lg-10{grid-template-columns:repeat(10,1fr)}.grid.grid-col-lg-11{grid-template-columns:repeat(11,1fr)}.grid.grid-col-lg-12{grid-template-columns:repeat(12,1fr)}}.span-1{grid-column:span 1}.span-2{grid-column:span 2}.span-3{grid-column:span 3}.span-4{grid-column:span 4}.span-5{grid-column:span 5}.span-6{grid-column:span 6}.span-7{grid-column:span 7}.span-8{grid-column:span 8}.span-9{grid-column:span 9}.span-10{grid-column:span 10}.span-11{grid-column:span 11}.span-12{grid-column:span 12}@media (min-width:399px){.span-xs-1{grid-column:span 1}.span-xs-2{grid-column:span 2}.span-xs-3{grid-column:span 3}.span-xs-4{grid-column:span 4}.span-xs-5{grid-column:span 5}.span-xs-6{grid-column:span 6}.span-xs-7{grid-column:span 7}.span-xs-8{grid-column:span 8}.span-xs-9{grid-column:span 9}.span-xs-10{grid-column:span 10}.span-xs-11{grid-column:span 11}.span-xs-12{grid-column:span 12}}@media (min-width:768px){.span-md-1{grid-column:span 1}.span-md-2{grid-column:span 2}.span-md-3{grid-column:span 3}.span-md-4{grid-column:span 4}.span-md-5{grid-column:span 5}.span-md-6{grid-column:span 6}.span-md-7{grid-column:span 7}.span-md-8{grid-column:span 8}.span-md-9{grid-column:span 9}.span-md-10{grid-column:span 10}.span-md-11{grid-column:span 11}.span-md-12{grid-column:span 12}}@media (min-width:992px){.span-lg-1{grid-column:span 1}.span-lg-2{grid-column:span 2}.span-lg-3{grid-column:span 3}.span-lg-4{grid-column:span 4}.span-lg-5{grid-column:span 5}.span-lg-6{grid-column:span 6}.span-lg-7{grid-column:span 7}.span-lg-8{grid-column:span 8}.span-lg-9{grid-column:span 9}.span-lg-10{grid-column:span 10}.span-lg-11{grid-column:span 11}.span-lg-12{grid-column:span 12}}@media (min-width:1025px){.span-xl-1{grid-column:span 1}.span-xl-2{grid-column:span 2}.span-xl-3{grid-column:span 3}.span-xl-4{grid-column:span 4}.span-xl-5{grid-column:span 5}.span-xl-6{grid-column:span 6}.span-xl-7{grid-column:span 7}.span-xl-8{grid-column:span 8}.span-xl-9{grid-column:span 9}.span-xl-10{grid-column:span 10}.span-xl-11{grid-column:span 11}.span-xl-12{grid-column:span 12}}@media (min-width:1200px){.span-2xl-1{grid-column:span 1}.span-2xl-2{grid-column:span 2}.span-2xl-3{grid-column:span 3}.span-2xl-4{grid-column:span 4}.span-2xl-5{grid-column:span 5}.span-2xl-6{grid-column:span 6}.span-2xl-7{grid-column:span 7}.span-2xl-8{grid-column:span 8}.span-2xl-9{grid-column:span 9}.span-2xl-10{grid-column:span 10}.span-2xl-11{grid-column:span 11}.span-2xl-12{grid-column:span 12}}.flex{display:flex;flex-direction:column;gap:var(--rh-space-lg,16px)}.flex-row{flex-direction:row}.flex-column{flex-direction:column}@media (min-width:768px){.flex-md-row{flex-direction:row}.flex-md-column{flex-direction:column}}.typography-h1{font-size:var(--rh-font-size-heading-2xl,3rem)}.typography-h2{font-size:var(--rh-font-size-heading-xl,2.5rem)}.typography-h3{font-size:var(--rh-font-size-heading-lg,2.25rem)}.typography-h4{font-size:var(--rh-font-size-heading-md,1.75rem)}.typography-h5{font-size:var(--rh-font-size-heading-sm,1.5rem)}.typography-h6{font-size:var(--rh-font-size-heading-xs,1.25rem)}.content section{padding:0}.content h1,.content h2,.content h3,.content h4,.content h5,.content h6{margin:var(--rh-space-lg,16px) 0}.sr-only{height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);border:0}.list-unstyled{list-style:none;padding-left:0}.tooltip-content{align-items:center;display:flex;font-family:Red Hat Text;justify-content:center;text-transform:none}.tooltip-content .check-icon{margin-left:var(--rh-space-md,8px)}.doc-image-link{display:inline-block;text-decoration:none}.modal-img{display:block;width:100%}.modal-helper-text{margin-top:.5rem;text-align:center}.modal-helper-text a{color:#000;cursor:pointer}.modal-helper-text a:hover{text-decoration:underline}.modal-helper-text a:after{content:"⿻";margin-left:.25rem}pf-modal.pf-img-modal{--pf-c-modal-box--MaxHeight:90vh;overflow-y:scroll}pf-modal.pf-img-modal::part(close-button){background-color:#fff;border-radius:50%;color:#000;margin-right:-2rem;margin-top:-2rem}pf-modal.pf-img-modal::part(close-button):hover{opacity:.7}h2.truste-title{line-height:normal;margin-top:0}rh-alert p[slot=header]{color:#002952}@media (width < 992px){html:has(nav.mobile-nav .mobile-nav-wrapper){scroll-behavior:smooth;scroll-padding-top:4rem}html:has(nav.mobile-nav .mobile-jump-links){scroll-padding-top:7rem}html:has(nav.mobile-nav.hide-mobile-nav){scroll-padding-top:2rem}}.highlight{background:#fff4cc;color:#000}</style>
<style>rh-alert[data-v-84359384]{width:100%}</style>
<style>.search-btn[data-v-edc0d12c]{align-items:center;background-color:var(--rh-color-canvas-black,#151515);border:3px solid var(--rh-color-canvas-black,#151515);cursor:pointer;display:flex;flex-direction:column;height:100%;justify-content:center;outline:none;padding:14px var(--rh-space-md,8px)}.search-btn[data-v-edc0d12c]:focus{border-top:3px solid var(--rh-color-accent-brand-on-light,#e00);outline:2px dotted var(--rh-color-white,#fff)}.search-btn .search-icon[data-v-edc0d12c]{height:26px;padding:2px 0 var(--rh-space-xs,4px);width:20px}.search-btn .search-icon[data-v-edc0d12c],.search-icon-helper-text[data-v-edc0d12c]{color:var(--rh-color-white,#fff)}.search-mobile[data-v-edc0d12c]{margin-bottom:var(--rh-space-2xl,32px)}.search-mobile form[data-v-edc0d12c]{display:flex;gap:var(--rh-space-md,8px);margin:auto}.search-box[data-v-edc0d12c]{width:35rem}nav[data-v-edc0d12c]{background-color:#151515;justify-content:space-between;width:100%}a[data-v-edc0d12c],a[data-v-edc0d12c]:visited{color:#fff;display:inline-block;font-size:var(--rh-font-size-body-text-md,1rem)}.skip-link[class][class][data-v-edc0d12c]{font-size:var(--pf-global--FontSize--sm,.875rem);line-height:18px}.skip-link[class][class][data-v-edc0d12c]:focus{border-radius:.21429em;height:auto;left:50%;padding:.42857em .57143em;position:fixed;top:8px;transform:translateX(-50%);width:auto;z-index:99999;clip:auto;background:#fff;background:var(--pfe-navigation__skip-link--BackgroundColor,var(--pfe-theme--color--surface--lightest,#fff));color:#06c;color:var(--pfe-navigation__skip-link--Color,var(--pfe-theme--color--link,#06c));text-decoration:none}.visually-hidden[data-v-edc0d12c]{border:1px solid #06c;height:1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);white-space:nowrap}h3[data-v-edc0d12c]{color:#464646;font-family:var(--rh-font-family-heading,"Red Hat Display",Helvetica,Arial,sans-serif);font-size:var(--rh-font-size-body-text-lg,1.125rem)}.language-picker[data-v-edc0d12c]{align-items:center;background-color:#fff;display:flex;flex-direction:column;padding:var(--rh-space-xl,24px);width:100%}.language-picker h3[data-v-edc0d12c]{margin:0;padding:0 1rem 1rem}.language-picker ul[data-v-edc0d12c]{margin:0;padding:0}.language-picker a[data-v-edc0d12c]{color:#06c}.language-picker li[data-v-edc0d12c]{list-style:none}.language-dropdown[data-v-edc0d12c]{background:#fff;box-shadow:0 3px 6px rgba(0,0,0,.098);display:block!important;position:absolute;right:0;width:100%;z-index:104}.pfe-navigation.pfe-navigation--processed>[slot=secondary-links][data-v-edc0d12c]{height:auto;overflow:visible;visibility:visible;width:auto}.upper-navigation[data-v-edc0d12c]{padding:0 var(--rh-space-2xl,32px)}.upper-nav-container[data-v-edc0d12c]{border-bottom:1px solid #404040;margin:0}.upper-nav-hidden[data-v-edc0d12c]:not(:focus):not(:active){clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}.upper-nav-menu[data-v-edc0d12c]{align-items:center;display:flex;justify-content:flex-end;line-height:1.444;list-style:none;margin-bottom:0;margin-top:0;padding-left:0}.upper-nav-menu[data-v-edc0d12c],.upper-nav-menu>li[data-v-edc0d12c]{position:relative}.upper-nav-menu>li:not(:first-child)>a[data-v-edc0d12c]:before,.upper-nav-menu>li:not(:first-child)>button[data-v-edc0d12c]:before{background-color:#404040;content:"";height:40%;left:0;position:absolute;top:30%;width:1px}li[data-v-edc0d12c]{display:list-item;margin:0;padding:0;text-align:-webkit-match-parent}.upper-nav-menu button.upper-nav-links[data-v-edc0d12c]{border:0;border-top:3px solid transparent;cursor:pointer;line-height:1.444}.upper-nav-menu button.upper-nav-links[aria-expanded=true][data-v-edc0d12c]{outline-color:#151515}.upper-nav-menu button.upper-nav-links[aria-expanded=true] .upper-nav-arrow[data-v-edc0d12c]{filter:invert(0) sepia(2%) saturate(21%) hue-rotate(257deg) brightness(108%) contrast(100%);transform:rotate(270deg)}.upper-nav-menu button.upper-nav-links[aria-expanded=true][data-v-edc0d12c]:before{display:none}.upper-nav-menu .upper-nav-links[data-v-edc0d12c]{background-color:var(--pfe-navigation--BackgroundColor,var(--pfe-theme--color--surface--darkest,#151515));border-top:3px solid transparent;color:#fff;display:block;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-sm,.875rem);outline:none;padding:12px 12px 14px;text-decoration:none}.upper-nav-menu .upper-nav-links[data-v-edc0d12c]:hover{border-top-color:#b8bbbe}.upper-nav-menu .upper-nav-links[data-v-edc0d12c]:focus-within{outline:1px dashed var(--rh-color-white,#fff);outline-offset:-1px}.upper-nav-menu .upper-nav-links[data-v-edc0d12c]:focus-within:before{display:none}.upper-nav-dropdown-container[data-v-edc0d12c]{background:#fff;box-shadow:0 3px 6px rgba(0,0,0,.098);display:none;padding:5px 30px 24px;position:absolute;right:0;top:100%;width:500px;z-index:105}.upper-nav-dropdown-container>ul[data-v-edc0d12c]{-moz-column-count:2;column-count:2;list-style-type:none;padding:0;width:auto}.upper-nav-dropdown-container>ul li[data-v-edc0d12c]{color:#151515;font-family:var(--rh-font-family-heading,"Red Hat Display",Helvetica,Arial,sans-serif);font-size:var(--rh-font-size-body-text-sm,.875rem);list-style-type:none;margin-bottom:0}.upper-nav-dropdown-container>ul li span[data-v-edc0d12c]{font-weight:var(--rh-font-weight-body-text-medium,500)}.upper-nav-dropdown-container>ul ul[data-v-edc0d12c]{padding-left:0;padding-top:9px}.upper-nav-dropdown-container>ul>li[data-v-edc0d12c]{padding-top:19px;-moz-column-break-inside:avoid;break-inside:avoid}.upper-nav-dropdown-container>ul>li>ul>li[data-v-edc0d12c]{line-height:1.45;padding:4px 0}.upper-nav-menu .upper-nav-arrow[data-v-edc0d12c]{display:inline-block;filter:invert(100%) sepia(8%) saturate(7%) hue-rotate(1turn) brightness(100%) contrast(93%);height:18px;margin-left:5px;transform:rotate(90deg);vertical-align:middle;width:8px}#pfe-navigation__secondary-links .show[data-v-edc0d12c],.upper-navigation .show[data-v-edc0d12c]{display:block}.upper-nav-menu .upper-nav-links[aria-expanded=true][data-v-edc0d12c]:active,.upper-nav-menu .upper-nav-links[aria-expanded=true][data-v-edc0d12c]:focus,.upper-nav-menu .upper-nav-links[aria-expanded=true][data-v-edc0d12c]:hover{background-color:#fff;color:#151515}.upper-nav-menu .upper-nav-links[aria-expanded=true][data-v-edc0d12c]{background-color:#fff;border-top-color:#b8bbbe;color:#000;position:relative;z-index:1}.upper-nav-dropdown-container>ul a[data-v-edc0d12c]{color:var(--rh-color-accent-base-on-light,#06c);font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:14px;text-decoration:none}.pfe-navigation__search[data-v-edc0d12c]{background-color:var(--rh-color-white,#fff)}.pfe-navigation__search form[data-v-edc0d12c]{display:flex;gap:var(--rh-space-md,8px);margin:auto;max-width:992px}pfe-navigation [slot=secondary-links] .buttons[data-v-edc0d12c]{display:flex;flex-wrap:wrap;gap:var(--rh-space-md,8px);margin-top:4px}pfe-navigation [slot=secondary-links] .buttons a[data-v-edc0d12c]{border:1px solid #d2d2d2;border-radius:3px;color:#06c;cursor:pointer;flex-basis:calc(50% - 5px);font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-weight:var(--rh-font-weight-code-regular,400);padding:1em;text-align:center;text-decoration:none}pfe-navigation [slot=secondary-links] .mobile-lang-select[data-v-edc0d12c]{border:1px solid #d2d2d2;border-bottom-color:#3c3f42;cursor:pointer;display:flex;margin:3rem 0;position:relative}pfe-navigation [slot=secondary-links] .mobile-lang-select label[data-v-edc0d12c]{bottom:100%;color:#000;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:14px;font-weight:500;margin-bottom:5px;position:absolute}pfe-navigation [slot=secondary-links] .mobile-lang-select select[data-v-edc0d12c]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:#fff;border-style:none;color:#000;flex-basis:100%;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:16px;line-height:24px;padding:6px 24px 6px 8px}select[data-v-edc0d12c]{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6' fill='none' viewBox='0 0 10 6'%3E%3Cpath fill='%23151515' d='M.678 0h8.644c.596 0 .895.797.497 1.195l-4.372 4.58c-.298.3-.695.3-.993 0L.18 1.196C-.216.797.081 0 .678 0'/%3E%3C/svg%3E");background-position:98% 50%;background-repeat:no-repeat}#inputLabel[data-v-edc0d12c]{align-items:center;display:flex;position:relative}#inputLabel form[data-v-edc0d12c]{width:100%}.input-box[data-v-edc0d12c]{font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);height:36px;padding:0 8px;width:100%}.input-box[data-v-edc0d12c]::-moz-placeholder{color:#6a6e73;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);font-weight:var(--rh-font-weight-code-regular,400);line-height:24px}.input-box[data-v-edc0d12c]::placeholder{color:#6a6e73;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);font-weight:var(--rh-font-weight-code-regular,400);line-height:24px}@media(max-width:960px){.search-box[data-v-edc0d12c]{width:28rem}}@media (max-width:768px){.right-navigation[data-v-edc0d12c],.upper-navigation[data-v-edc0d12c]{display:none}}@media (min-width:767px){.pfe-navigation__search form[data-v-edc0d12c]{padding:var(--rh-space-2xl,32px) 0}}</style>
<style>.element-invisible,.sr-only,.visually-hidden{height:1px;overflow:hidden;padding:0;position:absolute;width:1px;clip:rect(0,0,0,0);border:0;white-space:nowrap}@keyframes reveal-nav{0%{max-height:72px;max-height:var(--pfe-navigation__nav-bar--Height,72px);opacity:0;visibility:hidden}99%{max-height:72px;max-height:var(--pfe-navigation__nav-bar--Height,72px)}to{max-height:9999em;opacity:1;visibility:visible}}@keyframes reveal-nav-parts{0%{max-height:72px;max-height:var(--pfe-navigation__nav-bar--Height,72px);opacity:0;visibility:hidden}1%{visibility:visible}99%{max-height:72px;max-height:var(--pfe-navigation__nav-bar--Height,72px)}to{max-height:9999em;opacity:1;visibility:visible}}@media print{.pfe-navigation__menu,pfe-navigation [slot]{display:none!important}}pfe-navigation{--pfe-broadcasted--text:var(--pfe-theme--color--text,#151515);--pfe-broadcasted--text--muted:var(--pfe-theme--color--text--muted,#6a6e73);--pfe-broadcasted--link:var(--pfe-theme--color--link,#06c);--pfe-broadcasted--link--hover:var(--pfe-theme--color--link--hover,#004080);--pfe-broadcasted--link--focus:var(--pfe-theme--color--link--focus,#004080);--pfe-broadcasted--link--visited:var(--pfe-theme--color--link--visited,#6753ac);--pfe-broadcasted--link-decoration:var(--pfe-theme--link-decoration,none);--pfe-broadcasted--link-decoration--hover:var(--pfe-theme--link-decoration--hover,underline);--pfe-broadcasted--link-decoration--focus:var(--pfe-theme--link-decoration--focus,underline);--pfe-broadcasted--link-decoration--visited:var(--pfe-theme--link-decoration--visited,none)}@supports (display:grid){pfe-navigation{animation:reveal-nav .1618s 4s 1 forwards;max-height:72px;max-height:var(--pfe-navigation__nav-bar--Height,72px)}pfe-navigation>*{animation:reveal-nav-parts .1618s 4s 1 forwards;opacity:0;transition:opacity .1618s ease-in-out;transition:opacity var(--pfe-reveal-duration,.1618s) ease-in-out;visibility:hidden}}pfe-navigation.pfe-navigation--processed,pfe-navigation.pfe-navigation--processed>*{animation:none;opacity:1;visibility:visible}pfe-navigation pfe-primary-detail{display:none}pfe-navigation[pfelement]{display:block}pfe-navigation-dropdown{color:#151515;color:var(--pfe-navigation__dropdown--Color,#151515)}#pfe-navigation[breakpoint=desktop] .hidden-at-desktop[class][class][class],#pfe-navigation[breakpoint=mobile] .hidden-at-mobile[class][class][class],#pfe-navigation[breakpoint=tablet] .hidden-at-tablet[class][class][class],pfe-navigation[breakpoint=desktop] .hidden-at-desktop[class][class][class],pfe-navigation[breakpoint=mobile] .hidden-at-mobile[class][class][class],pfe-navigation[breakpoint=tablet] .hidden-at-tablet[class][class][class]{display:none}#pfe-navigation,#pfe-navigation *,pfe-navigation,pfe-navigation *{box-sizing:border-box}#pfe-navigation [pfelement] .pfe-navigation__log-in-link,pfe-navigation [pfelement] .pfe-navigation__log-in-link{display:none}#pfe-navigation,pfe-navigation{align-items:stretch;background:#151515;background:var(--pfe-navigation__nav-bar--Background,#151515);color:#fff;color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));display:flex;font-family:Red Hat Text,RedHatText,Arial,Helvetica,sans-serif;font-family:var(--pfe-navigation--FontFamily,Red Hat Text,RedHatText,Arial,Helvetica,sans-serif);font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);height:72px;height:var(--pfe-navigation__nav-bar--Height,72px);height:auto;line-height:1.5;margin:0;max-width:9999em;min-height:72px;min-height:var(--pfe-navigation__nav-bar--Height,72px);padding:0 16px;position:relative;z-index:95;z-index:var(--pfe-navigation--ZIndex,var(--pfe-theme--zindex--navigation,95))}@media (min-width:768px){#pfe-navigation,pfe-navigation{flex-wrap:wrap;margin:0;max-width:9999em;padding:0 16px}}@media (min-width:1200px){#pfe-navigation,pfe-navigation{margin:0 auto;padding:0 32px}}#pfe-navigation .pfe-navigation__dropdown,#pfe-navigation pfe-navigation-dropdown,pfe-navigation .pfe-navigation__dropdown,pfe-navigation pfe-navigation-dropdown{display:none}#pfe-navigation>[slot=account],#pfe-navigation>[slot=search],#pfe-navigation>[slot=secondary-links],pfe-navigation>[slot=account],pfe-navigation>[slot=search],pfe-navigation>[slot=secondary-links]{height:0;overflow:hidden;visibility:hidden;width:0}@media (min-width:768px){#pfe-navigation nav.pfe-navigation,pfe-navigation nav.pfe-navigation{align-items:stretch;display:flex;flex-wrap:wrap}}@media (min-width:992px){#pfe-navigation nav.pfe-navigation,pfe-navigation nav.pfe-navigation{flex-wrap:nowrap}}#pfe-navigation .pfe-navigation__logo-wrapper,pfe-navigation .pfe-navigation__logo-wrapper{align-items:center;display:flex;justify-content:flex-start;margin:0;min-width:150px;padding:10px 16px 10px 0}@media (min-width:768px){.pfe-navigation--no-main-menu #pfe-navigation .pfe-navigation__logo-wrapper,.pfe-navigation--no-main-menu pfe-navigation .pfe-navigation__logo-wrapper{margin-right:auto}}.pfe-navigation--collapse-secondary-links .pfe-navigation--no-main-menu #pfe-navigation .pfe-navigation__logo-wrapper,.pfe-navigation--collapse-secondary-links .pfe-navigation--no-main-menu pfe-navigation .pfe-navigation__logo-wrapper{margin-right:0}#pfe-navigation .pfe-navigation__logo-link,pfe-navigation .pfe-navigation__logo-link{border-radius:3px;display:block;margin-left:-8px;outline:0;padding:6px 8px;position:relative}#pfe-navigation .pfe-navigation__logo-link:focus,pfe-navigation .pfe-navigation__logo-link:focus{outline:0}#pfe-navigation .pfe-navigation__logo-link:focus:after,pfe-navigation .pfe-navigation__logo-link:focus:after{border:1px dashed #fff;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation .pfe-navigation__logo-image,pfe-navigation .pfe-navigation__logo-image{display:block;height:auto;width:100%}@media (min-width:576px){#pfe-navigation .pfe-navigation__logo-image,pfe-navigation .pfe-navigation__logo-image{height:40px;height:var(--pfe-navigation__logo--height,40px);width:auto}}@media print{#pfe-navigation .pfe-navigation__logo-image,pfe-navigation .pfe-navigation__logo-image{display:none}}#pfe-navigation .pfe-navigation__logo-image:only-child,pfe-navigation .pfe-navigation__logo-image:only-child{display:block}@media (min-width:576px){#pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--small,pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--small{height:32px;height:var(--pfe-navigation__logo--height,32px)}}@media print{#pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--screen,pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--screen{display:none!important}}@media screen{#pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--print,pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--print{display:none!important}}#pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--screen.pfe-navigation__logo-image--print,pfe-navigation .pfe-navigation__logo-image.pfe-navigation__logo-image--screen.pfe-navigation__logo-image--print{display:inline-block!important}#pfe-navigation .pfe-navigation__fallback-links a,#pfe-navigation .pfe-navigation__log-in-link,#pfe-navigation .pfe-navigation__menu-link,#pfe-navigation .pfe-navigation__secondary-link,pfe-navigation .pfe-navigation__fallback-links a,pfe-navigation .pfe-navigation__log-in-link,pfe-navigation .pfe-navigation__menu-link,pfe-navigation .pfe-navigation__secondary-link{--pfe-icon--color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:0 0;border:0;color:#06c;color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));color:#fff;color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));cursor:pointer;display:flex;font-family:inherit;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);justify-content:flex-start;justify-content:center;margin:0;outline:0;padding:8px 24px;position:relative;text-align:center;text-decoration:none;white-space:nowrap;width:100%}@media print{#pfe-navigation .pfe-navigation__fallback-links a,#pfe-navigation .pfe-navigation__log-in-link,#pfe-navigation .pfe-navigation__menu-link,#pfe-navigation .pfe-navigation__secondary-link,pfe-navigation .pfe-navigation__fallback-links a,pfe-navigation .pfe-navigation__log-in-link,pfe-navigation .pfe-navigation__menu-link,pfe-navigation .pfe-navigation__secondary-link{display:none!important}}@media (min-width:768px){#pfe-navigation .pfe-navigation__fallback-links a,#pfe-navigation .pfe-navigation__log-in-link,#pfe-navigation .pfe-navigation__menu-link,#pfe-navigation .pfe-navigation__secondary-link,pfe-navigation .pfe-navigation__fallback-links a,pfe-navigation .pfe-navigation__log-in-link,pfe-navigation .pfe-navigation__menu-link,pfe-navigation .pfe-navigation__secondary-link{--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));color:#fff;color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));display:flex;flex-direction:column;font-size:12px;font-size:var(--pfe-navigation--FontSize--xs,12px);height:72px;height:var(--pfe-navigation__nav-bar--Height,72px);justify-content:flex-end;padding:14px 8px;width:auto}@supports (display:grid){#pfe-navigation .pfe-navigation__fallback-links a,#pfe-navigation .pfe-navigation__log-in-link,#pfe-navigation .pfe-navigation__menu-link,#pfe-navigation .pfe-navigation__secondary-link,pfe-navigation .pfe-navigation__fallback-links a,pfe-navigation .pfe-navigation__log-in-link,pfe-navigation .pfe-navigation__menu-link,pfe-navigation .pfe-navigation__secondary-link{align-items:center;display:grid;grid-template-rows:26px 18px;justify-items:center}}#pfe-navigation .pfe-navigation__fallback-links a[class]:focus,#pfe-navigation .pfe-navigation__fallback-links a[class]:hover,#pfe-navigation .pfe-navigation__log-in-link[class]:focus,#pfe-navigation .pfe-navigation__log-in-link[class]:hover,#pfe-navigation .pfe-navigation__menu-link[class]:focus,#pfe-navigation .pfe-navigation__menu-link[class]:hover,#pfe-navigation .pfe-navigation__secondary-link[class]:focus,#pfe-navigation .pfe-navigation__secondary-link[class]:hover,pfe-navigation .pfe-navigation__fallback-links a[class]:focus,pfe-navigation .pfe-navigation__fallback-links a[class]:hover,pfe-navigation .pfe-navigation__log-in-link[class]:focus,pfe-navigation .pfe-navigation__log-in-link[class]:hover,pfe-navigation .pfe-navigation__menu-link[class]:focus,pfe-navigation .pfe-navigation__menu-link[class]:hover,pfe-navigation .pfe-navigation__secondary-link[class]:focus,pfe-navigation .pfe-navigation__secondary-link[class]:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}}#pfe-navigation .pfe-navigation__fallback-links a:focus,#pfe-navigation .pfe-navigation__fallback-links a:hover,#pfe-navigation .pfe-navigation__log-in-link:focus,#pfe-navigation .pfe-navigation__log-in-link:hover,#pfe-navigation .pfe-navigation__menu-link:focus,#pfe-navigation .pfe-navigation__menu-link:hover,#pfe-navigation .pfe-navigation__secondary-link:focus,#pfe-navigation .pfe-navigation__secondary-link:hover,pfe-navigation .pfe-navigation__fallback-links a:focus,pfe-navigation .pfe-navigation__fallback-links a:hover,pfe-navigation .pfe-navigation__log-in-link:focus,pfe-navigation .pfe-navigation__log-in-link:hover,pfe-navigation .pfe-navigation__menu-link:focus,pfe-navigation .pfe-navigation__menu-link:hover,pfe-navigation .pfe-navigation__secondary-link:focus,pfe-navigation .pfe-navigation__secondary-link:hover{box-shadow:inset 4px 0 0 0 #06c;box-shadow:inset 4px 0 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}@media (min-width:768px){#pfe-navigation .pfe-navigation__fallback-links a:focus,#pfe-navigation .pfe-navigation__fallback-links a:hover,#pfe-navigation .pfe-navigation__log-in-link:focus,#pfe-navigation .pfe-navigation__log-in-link:hover,#pfe-navigation .pfe-navigation__menu-link:focus,#pfe-navigation .pfe-navigation__menu-link:hover,#pfe-navigation .pfe-navigation__secondary-link:focus,#pfe-navigation .pfe-navigation__secondary-link:hover,pfe-navigation .pfe-navigation__fallback-links a:focus,pfe-navigation .pfe-navigation__fallback-links a:hover,pfe-navigation .pfe-navigation__log-in-link:focus,pfe-navigation .pfe-navigation__log-in-link:hover,pfe-navigation .pfe-navigation__menu-link:focus,pfe-navigation .pfe-navigation__menu-link:hover,pfe-navigation .pfe-navigation__secondary-link:focus,pfe-navigation .pfe-navigation__secondary-link:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}}.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__fallback-links a:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__fallback-links a:hover,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__log-in-link:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__log-in-link:hover,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__menu-link:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__menu-link:hover,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__secondary-link:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__secondary-link:hover,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__fallback-links a:focus,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__fallback-links a:hover,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__log-in-link:focus,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__log-in-link:hover,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__menu-link:focus,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__menu-link:hover,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__secondary-link:focus,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__secondary-link:hover{box-shadow:inset 4px 0 0 0 #06c;box-shadow:inset 4px 0 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}#pfe-navigation .pfe-navigation__fallback-links a:focus,#pfe-navigation .pfe-navigation__log-in-link:focus,#pfe-navigation .pfe-navigation__menu-link:focus,#pfe-navigation .pfe-navigation__secondary-link:focus,pfe-navigation .pfe-navigation__fallback-links a:focus,pfe-navigation .pfe-navigation__log-in-link:focus,pfe-navigation .pfe-navigation__menu-link:focus,pfe-navigation .pfe-navigation__secondary-link:focus{outline:0}#pfe-navigation .pfe-navigation__fallback-links a:focus:after,#pfe-navigation .pfe-navigation__log-in-link:focus:after,#pfe-navigation .pfe-navigation__menu-link:focus:after,#pfe-navigation .pfe-navigation__secondary-link:focus:after,pfe-navigation .pfe-navigation__fallback-links a:focus:after,pfe-navigation .pfe-navigation__log-in-link:focus:after,pfe-navigation .pfe-navigation__menu-link:focus:after,pfe-navigation .pfe-navigation__secondary-link:focus:after{border:1px dashed;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation .pfe-navigation__fallback-links a pfe-icon,#pfe-navigation .pfe-navigation__log-in-link pfe-icon,#pfe-navigation .pfe-navigation__menu-link pfe-icon,#pfe-navigation .pfe-navigation__secondary-link pfe-icon,pfe-navigation .pfe-navigation__fallback-links a pfe-icon,pfe-navigation .pfe-navigation__log-in-link pfe-icon,pfe-navigation .pfe-navigation__menu-link pfe-icon,pfe-navigation .pfe-navigation__secondary-link pfe-icon{pointer-events:none}#pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,#pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__log-in-link>pfe-icon,#pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__menu-link>pfe-icon,#pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__secondary-link>pfe-icon,pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__log-in-link>pfe-icon,pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__menu-link>pfe-icon,pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__secondary-link>pfe-icon{--pfe-icon--size:18px;padding-right:5px}@media (min-width:768px){#pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,#pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__log-in-link>pfe-icon,#pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__menu-link>pfe-icon,#pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,#pfe-navigation .pfe-navigation__secondary-link>pfe-icon,pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__log-in-link>pfe-icon,pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__menu-link>pfe-icon,pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,pfe-navigation .pfe-navigation__secondary-link>pfe-icon{padding-right:0;padding:2px 0 4px}}.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__log-in-link>pfe-icon,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__menu-link>pfe-icon,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__secondary-link>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__fallback-links a .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__fallback-links a>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__log-in-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__log-in-link>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__menu-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__menu-link>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__secondary-link .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__secondary-link>pfe-icon{padding:0 16px 0 0}#pfe-navigation .pfe-navigation__fallback-links a pfe-icon,#pfe-navigation .pfe-navigation__log-in-link pfe-icon,#pfe-navigation .pfe-navigation__menu-link pfe-icon,#pfe-navigation .pfe-navigation__secondary-link pfe-icon,pfe-navigation .pfe-navigation__fallback-links a pfe-icon,pfe-navigation .pfe-navigation__log-in-link pfe-icon,pfe-navigation .pfe-navigation__menu-link pfe-icon,pfe-navigation .pfe-navigation__secondary-link pfe-icon{display:block;height:18px}#pfe-navigation .pfe-navigation__fallback-links a[class],#pfe-navigation .pfe-navigation__fallback-links a[href],#pfe-navigation .pfe-navigation__log-in-link[class],#pfe-navigation .pfe-navigation__log-in-link[href],#pfe-navigation .pfe-navigation__menu-link[class],#pfe-navigation .pfe-navigation__menu-link[href],#pfe-navigation .pfe-navigation__secondary-link[class],#pfe-navigation .pfe-navigation__secondary-link[href],pfe-navigation .pfe-navigation__fallback-links a[class],pfe-navigation .pfe-navigation__fallback-links a[href],pfe-navigation .pfe-navigation__log-in-link[class],pfe-navigation .pfe-navigation__log-in-link[href],pfe-navigation .pfe-navigation__menu-link[class],pfe-navigation .pfe-navigation__menu-link[href],pfe-navigation .pfe-navigation__secondary-link[class],pfe-navigation .pfe-navigation__secondary-link[href]{align-items:center;justify-content:center}#pfe-navigation .pfe-navigation__account-toggle,#pfe-navigation [slot=account]>a[href],pfe-navigation .pfe-navigation__account-toggle,pfe-navigation [slot=account]>a[href]{--pfe-icon--color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:0 0;border:0;color:#06c;color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));cursor:pointer;font-family:inherit;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);justify-content:flex-start;margin:0;outline:0;position:relative;text-align:center;text-decoration:none;white-space:nowrap;width:100%;--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));color:#fff;color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));display:flex;flex-direction:column;font-size:12px;font-size:var(--pfe-navigation--FontSize--xs,12px);height:72px;height:var(--pfe-navigation__nav-bar--Height,72px);justify-content:flex-end;padding:14px 8px;width:auto}@media print{#pfe-navigation .pfe-navigation__account-toggle,#pfe-navigation [slot=account]>a[href],pfe-navigation .pfe-navigation__account-toggle,pfe-navigation [slot=account]>a[href]{display:none!important}}#pfe-navigation .pfe-navigation__account-toggle:focus,#pfe-navigation .pfe-navigation__account-toggle:hover,#pfe-navigation [slot=account]>a[href]:focus,#pfe-navigation [slot=account]>a[href]:hover,pfe-navigation .pfe-navigation__account-toggle:focus,pfe-navigation .pfe-navigation__account-toggle:hover,pfe-navigation [slot=account]>a[href]:focus,pfe-navigation [slot=account]>a[href]:hover{box-shadow:inset 4px 0 0 0 #06c;box-shadow:inset 4px 0 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}#pfe-navigation .pfe-navigation__account-toggle:focus,#pfe-navigation [slot=account]>a[href]:focus,pfe-navigation .pfe-navigation__account-toggle:focus,pfe-navigation [slot=account]>a[href]:focus{outline:0}#pfe-navigation .pfe-navigation__account-toggle:focus:after,#pfe-navigation [slot=account]>a[href]:focus:after,pfe-navigation .pfe-navigation__account-toggle:focus:after,pfe-navigation [slot=account]>a[href]:focus:after{border:1px dashed;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation .pfe-navigation__account-toggle pfe-icon,#pfe-navigation [slot=account]>a[href] pfe-icon,pfe-navigation .pfe-navigation__account-toggle pfe-icon,pfe-navigation [slot=account]>a[href] pfe-icon{pointer-events:none}@supports (display:grid){#pfe-navigation .pfe-navigation__account-toggle,#pfe-navigation [slot=account]>a[href],pfe-navigation .pfe-navigation__account-toggle,pfe-navigation [slot=account]>a[href]{align-items:center;display:grid;grid-template-rows:26px 18px;justify-items:center}}#pfe-navigation .pfe-navigation__account-toggle[class]:focus,#pfe-navigation .pfe-navigation__account-toggle[class]:hover,#pfe-navigation [slot=account]>a[href][class]:focus,#pfe-navigation [slot=account]>a[href][class]:hover,pfe-navigation .pfe-navigation__account-toggle[class]:focus,pfe-navigation .pfe-navigation__account-toggle[class]:hover,pfe-navigation [slot=account]>a[href][class]:focus,pfe-navigation [slot=account]>a[href][class]:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}@media print{#pfe-navigation .pfe-navigation__account-toggle,#pfe-navigation [slot=account]>a[href],pfe-navigation .pfe-navigation__account-toggle,pfe-navigation [slot=account]>a[href]{display:none}}#pfe-navigation .pfe-navigation__account-toggle pfe-icon,#pfe-navigation [slot=account]>a[href] pfe-icon,pfe-navigation .pfe-navigation__account-toggle pfe-icon,pfe-navigation [slot=account]>a[href] pfe-icon{--pfe-icon--size:18px;padding:2px 0 4px}@media (min-width:768px){#pfe-navigation .pfe-navigation__account-toggle pfe-icon,#pfe-navigation [slot=account]>a[href] pfe-icon,pfe-navigation .pfe-navigation__account-toggle pfe-icon,pfe-navigation [slot=account]>a[href] pfe-icon{padding-right:0}}#pfe-navigation .pfe-navigation__account-toggle:focus,#pfe-navigation .pfe-navigation__account-toggle:hover,#pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true],#pfe-navigation [slot=account]>a[href][href]:focus,#pfe-navigation [slot=account]>a[href][href]:hover,pfe-navigation .pfe-navigation__account-toggle:focus,pfe-navigation .pfe-navigation__account-toggle:hover,pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true],pfe-navigation [slot=account]>a[href][href]:focus,pfe-navigation [slot=account]>a[href][href]:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}#pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true],pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true]{--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515));background:#fff;background:var(--pfe-navigation__nav-bar--toggle--BackgroundColor--active,var(--pfe-theme--color--surface--lightest,#fff));color:#151515;color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515))}#pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true]:focus,pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true]:focus{outline:0}#pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true]:focus:after,pfe-navigation .pfe-navigation__account-toggle[aria-expanded=true]:focus:after{border:1px dashed #151515;border:1px dashed var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515));bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation .pfe-navigation__fallback-links,#pfe-navigation .pfe-navigation__menu,pfe-navigation .pfe-navigation__fallback-links,pfe-navigation .pfe-navigation__menu{font-size:inherit;list-style:none;margin:0;padding:0}@media (min-width:768px){#pfe-navigation .pfe-navigation__fallback-links,#pfe-navigation .pfe-navigation__menu,pfe-navigation .pfe-navigation__fallback-links,pfe-navigation .pfe-navigation__menu{align-items:stretch;display:flex}}#pfe-navigation .pfe-navigation__fallback-links li,#pfe-navigation .pfe-navigation__menu li,pfe-navigation .pfe-navigation__fallback-links li,pfe-navigation .pfe-navigation__menu li{font-size:inherit;margin:0;padding:0}#pfe-navigation .pfe-navigation__fallback-links li:before,#pfe-navigation .pfe-navigation__menu li:before,pfe-navigation .pfe-navigation__fallback-links li:before,pfe-navigation .pfe-navigation__menu li:before{content:none}#pfe-navigation .pfe-navigation__fallback-links,pfe-navigation .pfe-navigation__fallback-links{margin-left:auto}#pfe-navigation .pfe-navigation__menu-link,pfe-navigation .pfe-navigation__menu-link{display:flex;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);white-space:nowrap}#pfe-navigation.pfe-navigation--processed,pfe-navigation.pfe-navigation--processed{display:block;padding:0}#pfe-navigation.pfe-navigation--processed:before,pfe-navigation.pfe-navigation--processed:before{content:none}#pfe-navigation.pfe-navigation--processed>[slot=account],#pfe-navigation.pfe-navigation--processed>[slot=search],#pfe-navigation.pfe-navigation--processed>[slot=secondary-links],pfe-navigation.pfe-navigation--processed>[slot=account],pfe-navigation.pfe-navigation--processed>[slot=search],pfe-navigation.pfe-navigation--processed>[slot=secondary-links]{height:auto;overflow:visible;visibility:visible;width:auto}#pfe-navigation.pfe-navigation--processed pfe-navigation-dropdown,pfe-navigation.pfe-navigation--processed pfe-navigation-dropdown{display:block}#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown,#pfe-navigation.pfe-navigation--processed pfe-navigation-dropdown,#pfe-navigation.pfe-navigation--processed>[slot],pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown,pfe-navigation.pfe-navigation--processed pfe-navigation-dropdown,pfe-navigation.pfe-navigation--processed>[slot]{animation:none;opacity:1}#pfe-navigation.pfe-navigation--processed [slot=secondary-links],pfe-navigation.pfe-navigation--processed [slot=secondary-links]{display:block;height:auto;list-style:none;margin:0 0 8px;padding:0;width:auto}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links],pfe-navigation.pfe-navigation--processed [slot=secondary-links]{margin:0}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]{margin:0 0 8px}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button{--pfe-icon--color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));align-items:center;-webkit-appearance:none;-moz-appearance:none;appearance:none;background:0 0;border:0;color:#06c;color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));cursor:pointer;display:flex;font-family:inherit;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);justify-content:flex-start;margin:0;outline:0;padding:8px 24px;position:relative;text-align:center;text-decoration:none;white-space:nowrap;width:100%}@media print{#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button{display:none!important}}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button{--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));color:#fff;color:var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));display:flex;flex-direction:column;font-size:12px;font-size:var(--pfe-navigation--FontSize--xs,12px);height:72px;height:var(--pfe-navigation__nav-bar--Height,72px);justify-content:flex-end;padding:14px 8px;width:auto}@supports (display:grid){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button{align-items:center;display:grid;grid-template-rows:26px 18px;justify-items:center}}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[class]:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[class]:hover,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[class]:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[class]:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[class]:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[class]:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[class]:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[class]:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover{box-shadow:inset 4px 0 0 0 #06c;box-shadow:inset 4px 0 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover{box-shadow:inset 0 4px 0 0 #06c;box-shadow:inset 0 4px 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:hover,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:hover{box-shadow:inset 4px 0 0 0 #06c;box-shadow:inset 4px 0 0 0 var(--pfe-navigation__nav-bar--highlight-color,var(--pfe-theme--color--ui-accent,#06c))}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus{outline:0}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus:after,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus:after,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus:after,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus:after{border:1px dashed;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a pfe-icon,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button pfe-icon{pointer-events:none}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon{--pfe-icon--size:18px;padding-right:5px}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon{padding-right:0;padding:2px 0 4px}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a>pfe-icon,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button .secondary-link__icon-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button>pfe-icon{padding:0 16px 0 0}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a pfe-icon,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a pfe-icon,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button pfe-icon{display:block;height:18px}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus{outline:0}#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus:after,#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus:after,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus:after,pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus:after{border:1px dashed #fff;border:1px dashed var(--pfe-navigation__nav-bar--Color--default,var(--pfe-theme--color--ui-base--text,#fff));bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a:focus,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button:focus{box-shadow:none}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[aria-expanded=true],#pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[aria-expanded=true],pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[aria-expanded=true],pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[aria-expanded=true]{--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515));background:#fff;background:var(--pfe-navigation__nav-bar--toggle--BackgroundColor--active,var(--pfe-theme--color--surface--lightest,#fff));color:#151515;color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515))}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[aria-expanded=true],.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[aria-expanded=true],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>a[aria-expanded=true],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links]>button[aria-expanded=true]{background:0 0;box-shadow:none}#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown__wrapper--single-column,pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown__wrapper--single-column{position:relative}#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown__wrapper,pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown__wrapper{display:block}#pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class],pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class]{height:0;transition:height .25s ease-in-out;transition:var(--pfe-navigation--accordion-transition,height .25s ease-in-out)}@media (prefers-reduced-motion){#pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class],pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class]{transition:none}}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class],pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class]{position:absolute;right:0;top:72px;top:var(--pfe-navigation__nav-bar--Height,72px)}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class]{position:static}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class][aria-hidden=false],pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class][aria-hidden=false]{height:auto}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class][aria-hidden=false],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed [slot=secondary-links] .pfe-navigation__dropdown-wrapper[class][aria-hidden=false]{height:0}#pfe-navigation.pfe-navigation--processed[breakpoint=mobile] [slot=secondary-links][mobile-slider] .pfe-navigation__dropdown-wrapper,pfe-navigation.pfe-navigation--processed[breakpoint=mobile] [slot=secondary-links][mobile-slider] .pfe-navigation__dropdown-wrapper{left:100vw;left:calc(100vw - 32px);left:calc(100vw - var(--pfe-navigation__mobile-dropdown--PaddingHorizontal,32px));position:absolute;top:0;width:100vw}#pfe-navigation.pfe-navigation--processed[breakpoint=mobile] [slot=secondary-links][mobile-slider] .pfe-navigation__dropdown-wrapper[aria-hidden=false],pfe-navigation.pfe-navigation--processed[breakpoint=mobile] [slot=secondary-links][mobile-slider] .pfe-navigation__dropdown-wrapper[aria-hidden=false]{height:100vh;height:calc(100vh - 72px);height:calc(100vh - var(--pfe-navigation__nav-bar--Height,72px));overflow-y:scroll}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper{background:#fff;background:var(--pfe-navigation__dropdown--Background,var(--pfe-theme--color--surface--lightest,#fff));padding:0 24px;padding:0 var(--pfe-navigation__dropdown--full-width--spacing--mobile,24px)}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper{padding:0 64px24px;padding:0 var(--pfe-navigation__dropdown--full-width--spacing--desktop,64px) var(--pfe-navigation__dropdown--full-width--spacing--mobile,24px)}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown-wrapper{padding:0 24px;padding:0 var(--pfe-navigation__dropdown--full-width--spacing--mobile,24px)}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a{border:1px solid transparent;color:#06c;color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));display:inline-block}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:hover{color:#036;color:var(--pfe-navigation__dropdown--link--Color--hover,#036);text-decoration:underline}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a:focus{border:1px dashed;outline:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level],#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level],#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level],pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level],pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6{margin:32px 0 .75em;margin:var(--pfe-navigation--gutter,32px) 0 .75em;padding:0;-moz-column-break-inside:avoid;break-inside:avoid;color:#464646;color:var(--pfe-navigation__dropdown--headings--Color,#464646);font-family:Red Hat Display,RedHatDisplay,Arial,Helvetica,sans-serif;font-family:var(--pfe-navigation--FontFamilyHeadline,Red Hat Display,RedHatDisplay,Arial,Helvetica,sans-serif);font-size:1.125rem;font-size:var(--pf-global--FontSize--lg,1.125rem);font-weight:500}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level]:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level]:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5:first-child,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level]:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level]:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5:first-child,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6:first-child{margin-top:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a{border:1px solid transparent;color:#464646;color:var(--pfe-navigation__dropdown--headings--Color,#464646);text-decoration:underline}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:hover{color:#036;color:var(--pfe-navigation__dropdown--link--Color--hover,#036);text-decoration:none}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container .pfe-link-list--header a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container [role=heading][aria-heading-level] a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h2 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h3 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h4 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h5 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container h6 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles .pfe-link-list--header a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles [role=heading][aria-heading-level] a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h2 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h3 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h4 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h5 a:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles h6 a:focus{border:1px dashed;outline:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container li,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles li,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container li,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles li{margin:0 0 16px;-moz-column-break-inside:avoid;break-inside:avoid}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-card,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-card,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container a,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-card,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles a,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-card,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta{-moz-column-break-inside:avoid;break-inside:avoid}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary],#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary],#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary],#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary],pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary],pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary],pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary],pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary]{--pfe-cta--BackgroundColor:var(--pfe-navigation__dropdown--pfe-cta--BackgroundColor,#e00);--pfe-cta--BackgroundColor--hover:var(--pfe-navigation__dropdown--pfe-cta--hover--BackgroundColor,#c00);--pfe-theme--ui--border-width:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary]:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary]:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary]:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary]:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary]:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary]:hover,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary]:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary]:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary]:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[pfe-priority=primary]:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary]:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta[priority=primary]:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary]:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[pfe-priority=primary]:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary]:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta[priority=primary]:hover{--pfe-cta--BackgroundColor:var(--pfe-navigation__dropdown--pfe-cta--hover--BackgroundColor,#c00)}pfe-card #pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta,pfe-card #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta,pfe-card pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container pfe-cta,pfe-card pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles pfe-cta{margin-top:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container li,#pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container ul,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles li,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles ul,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container li,pfe-navigation.pfe-navigation--processed .pfe-navigation-item__tray--container ul,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles li,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--default-styles ul{list-style:none;margin:0;padding:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{color:#151515;color:var(--pfe-navigation__dropdown--Color,#151515);-moz-column-count:auto;column-count:auto;display:block;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);gap:0;margin-left:auto;margin-right:auto;max-width:1136px;max-width:var(--pfe-navigation--content-max-width,1136px);padding-bottom:12px;padding-top:12px;width:calc(100% + 32px)}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{-moz-column-count:3;column-count:3;display:block;gap:32px;gap:var(--pfe-navigation--gutter,32px);padding-bottom:12px;padding-top:12px}}@media (min-width:1200px){#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{-moz-column-count:auto;column-count:auto;display:flex;flex-wrap:wrap;padding-bottom:32px;padding-top:32px}@supports (display:grid){#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{display:grid;gap:32px;gap:var(--pfe-navigation--gutter,32px);grid-auto-flow:row;grid-template-columns:repeat(4,minmax(0,1fr))}}}.pfe-navigation--collapse-main-menu #pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation--collapse-main-menu #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,.pfe-navigation--collapse-main-menu pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation--collapse-main-menu pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{-moz-column-count:3;column-count:3;display:block;gap:32px;gap:var(--pfe-navigation--gutter,32px);padding-bottom:12px;padding-top:12px}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{-moz-column-count:auto;column-count:auto;display:block;gap:0;margin-left:-16px;margin-right:-16px;max-width:1136px;max-width:var(--pfe-navigation--content-max-width,1136px);padding-bottom:12px;padding-top:12px;width:calc(100% + 32px)}.pfe-navigation__menu-item--open #pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation__menu-item--open #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles,.pfe-navigation__menu-item--open pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,.pfe-navigation__menu-item--open pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles{transition-delay:0s;visibility:visible}#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*{margin:0 0 18px;-moz-column-break-inside:avoid;break-inside:avoid}@media (min-width:1200px){#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*{margin:0}}.pfe-navigation--collapse-main-menu #pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,.pfe-navigation--collapse-main-menu #pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*,.pfe-navigation--collapse-main-menu pfe-navigation.pfe-navigation--processed .pfe-navigation-grid>*,.pfe-navigation--collapse-main-menu pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--default-styles>*{margin:0 0 18px}#pfe-navigation.pfe-navigation--processed .pfe-navigation-grid,pfe-navigation.pfe-navigation--processed .pfe-navigation-grid{max-width:100%}#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--1-x,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown--1-x{display:block}#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown{background:#fff}#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher{margin-left:auto;margin-right:auto;max-width:1136px;max-width:var(--pfe-navigation--content-max-width,1136px);padding:12px 24px;padding:12px var(--pfe-navigation__dropdown--full-width--spacing--mobile,24px)}@media (min-width:1200px){#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher{padding:32px 64px;padding:32px var(--pfe-navigation__dropdown--full-width--spacing--desktop,64px)}}.pfe-navigation--collapse-main-menu #pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher,.pfe-navigation--collapse-main-menu pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher{padding:12px 24px;padding:12px var(--pfe-navigation__dropdown--full-width--spacing--mobile,24px)}#pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher .container,pfe-navigation.pfe-navigation--processed .pfe-navigation__site-switcher .pfe-navigation__dropdown site-switcher .container{margin:0;padding:0;width:auto}#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--invisible[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--invisible[class]{padding:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--invisible pfe-navigation-dropdown,pfe-navigation.pfe-navigation--processed .pfe-navigation__dropdown-wrapper--invisible pfe-navigation-dropdown{visibility:hidden}#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class]{padding:0}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class]{box-shadow:0 1px 2px rgba(0,0,0,.12);box-shadow:var(--pfe-navigation__dropdown--BoxShadow,0 1px 2px rgba(0,0,0,.12));max-width:100%;min-width:13em;padding:0 32px;position:absolute;top:100%}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class]{box-shadow:none;max-width:100%;position:static}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--single-column[class]{right:0}}#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class]{width:100%}@media (min-width:768px){#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class],pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class]{left:0;position:absolute;right:0}}.pfe-navigation--collapse-secondary-links #pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class],.pfe-navigation--collapse-secondary-links pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class]{position:static}#pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class] .pfe-navigation__dropdown,pfe-navigation.pfe-navigation--processed .pfe-navigation__custom-dropdown--full[class] .pfe-navigation__dropdown{width:100%}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles{padding-left:16px;padding-right:16px}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles form,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles form{align-items:center;display:flex}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button,#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input{padding:10px;transition:box-shadow .2s}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input{border:1px solid #f0f0f0;border-bottom-color:#8b8e91;color:#717579;flex-basis:0%;flex-grow:1;flex-shrink:1;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);margin-right:8px}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input::-moz-placeholder,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input::-moz-placeholder{color:#717579}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input::placeholder,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input::placeholder{color:#717579}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button{background-color:#e00;border:1px solid #e00;border-radius:2px;color:#fff;flex-basis:auto;flex-grow:0;flex-shrink:1;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem)}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:hover{outline:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:focus:after,#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:hover:after,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:focus:after,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles input:hover:after{border:1px dashed #000;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:focus,#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:hover,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:focus,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:hover{outline:0}#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:focus:after,#pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:hover:after,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:focus:after,pfe-navigation.pfe-navigation--processed .pfe-navigation__search--default-styles button:hover:after{border:1px dashed #fff;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation .pfe-navigation__site-switcher__back-wrapper,pfe-navigation .pfe-navigation__site-switcher__back-wrapper{border-bottom:1px solid #d2d2d2;border-bottom:var(--pfe-navigation__dropdown--separator--Border,1px solid var(--pfe-theme--color--ui--border--lighter,#d2d2d2));display:block}@media (min-width:768px){#pfe-navigation .pfe-navigation__site-switcher__back-wrapper,pfe-navigation .pfe-navigation__site-switcher__back-wrapper{display:none}}.pfe-navigation--collapse-secondary-links #pfe-navigation .pfe-navigation__site-switcher__back-wrapper,.pfe-navigation--collapse-secondary-links pfe-navigation .pfe-navigation__site-switcher__back-wrapper{display:block}#pfe-navigation .pfe-navigation__site-switcher__back-button,pfe-navigation .pfe-navigation__site-switcher__back-button{background-color:transparent;border:1px solid transparent;color:#06c;color:var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));cursor:pointer;font-size:1rem;font-size:var(--pf-global--FontSize--md,1rem);padding:21px 21px 21px 45px;position:relative;text-align:left;width:100%}#pfe-navigation .pfe-navigation__site-switcher__back-button:before,pfe-navigation .pfe-navigation__site-switcher__back-button:before{border:2px solid #06c;border:2px solid var(--pfe-navigation__dropdown--link--Color,var(--pfe-theme--color--link,#06c));border-right:0;border-top:0;content:"";display:block;height:8px;left:35px;position:absolute;right:auto;top:27px;transform:rotate(45deg);transform-origin:left top;width:8px}#pfe-navigation .pfe-navigation__site-switcher__back-button:focus,#pfe-navigation .pfe-navigation__site-switcher__back-button:hover,pfe-navigation .pfe-navigation__site-switcher__back-button:focus,pfe-navigation .pfe-navigation__site-switcher__back-button:hover{border:1px dashed #151515;border-top:1px dashed #151515;border:1px dashed var(--pfe-navigation__dropdown--Color,#151515);color:#036;color:var(--pfe-navigation__dropdown--link--Color--hover,#036);outline:0}#pfe-navigation.pfe-navigation--processed site-switcher,pfe-navigation.pfe-navigation--processed site-switcher{-moz-columns:auto;columns:auto;display:block}#pfe-navigation.pfe-navigation--stuck,pfe-navigation.pfe-navigation--stuck{left:0;position:fixed;top:0;width:100%;z-index:95;z-index:var(--pfe-theme--zindex--navigation,95)}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__outer-menu-wrapper__inner,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__outer-menu-wrapper__inner{opacity:1!important}#pfe-navigation.pfe-navigation--in-crusty-browser pfe-navigation-account,#pfe-navigation.pfe-navigation--in-crusty-browser rh-account-dropdown,pfe-navigation.pfe-navigation--in-crusty-browser pfe-navigation-account,pfe-navigation.pfe-navigation--in-crusty-browser rh-account-dropdown{display:none!important}#pfe-navigation.pfe-navigation--in-crusty-browser[open-toggle=pfe-navigation__account-toggle] pfe-navigation-account,#pfe-navigation.pfe-navigation--in-crusty-browser[open-toggle=pfe-navigation__account-toggle] rh-account-dropdown,pfe-navigation.pfe-navigation--in-crusty-browser[open-toggle=pfe-navigation__account-toggle] pfe-navigation-account,pfe-navigation.pfe-navigation--in-crusty-browser[open-toggle=pfe-navigation__account-toggle] rh-account-dropdown{display:block!important}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-item,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-item{display:block}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true],pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true]{--pfe-icon--color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515));background:#fff;background:var(--pfe-navigation__nav-bar--toggle--BackgroundColor--active,var(--pfe-theme--color--surface--lightest,#fff));color:#151515;color:var(--pfe-navigation__nav-bar--Color--active,var(--pfe-theme--color--text,#151515))}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true]:focus,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true]:focus{outline:0}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true]:focus:after,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__menu-link[aria-expanded=true]:focus:after{border:1px dashed;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown{display:flex;flex-wrap:wrap}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown>.style-scope,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown>.style-scope{flex-basis:25%}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown .pfe-navigation__footer.style-scope,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown .pfe-navigation__footer.style-scope{flex-basis:100%}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown .pfe-navigation__footer.style-scope>.style-scope,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown .pfe-navigation__footer.style-scope>.style-scope{margin-right:16px}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column ul,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column>.style-scope,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column ul,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column>.style-scope{display:flex;flex-direction:column;flex-wrap:nowrap}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column>.style-scope,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__dropdown--single-column>.style-scope{flex-basis:auto}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link,#pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link,pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a{color:#fff!important;justify-content:center!important}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle[aria-expanded=true],#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link[aria-expanded=true],#pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a[aria-expanded=true],pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle[aria-expanded=true],pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link[aria-expanded=true],pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a[aria-expanded=true]{color:#151515!important}#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__account-wrapper--logged-in .pfe-navigation__log-in-link,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle pfe-icon,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link pfe-icon,#pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a .secondary-link__icon-wrapper,#pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a pfe-icon,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__account-wrapper--logged-in .pfe-navigation__log-in-link,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__search-toggle pfe-icon,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--in-crusty-browser .pfe-navigation__secondary-link pfe-icon,pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a .secondary-link__icon-wrapper,pfe-navigation.pfe-navigation--in-crusty-browser [slot=secondary-links]>a pfe-icon{display:none!important}[id=pfe-navigation__account-dropdown][class][class]{display:block;height:auto;left:0;padding:0;position:absolute;top:72px;top:var(--pfe-navigation__nav-bar--Height,72px);width:100%}[id=pfe-navigation__account-dropdown].pfe-navigation__dropdown-wrapper--invisible[class]{display:none}.pfe-navigation__dropdown-wrapper{overflow:hidden}@media (min-width:768px){.pfe-navigation__custom-dropdown--single-column{min-width:25em}}.pfe-navigation--collapse-secondary-links .pfe-navigation__custom-dropdown--single-column{min-width:0}.secondary-link__icon-wrapper{align-items:center;display:flex;justify-content:center}.secondary-link__alert-count{background:#06c;background:var(--pfe-navigation__nav-bar--alert-color,var(--pfe-theme--color--link,#06c));border-radius:20px;color:#fff;color:var(--pfe-navigation__nav-bar--Color--on-highlight,var(--pfe-theme--color--text--on-saturated,#fff));display:block;font-size:12px;font-size:var(--pfe-navigation--FontSize--xs,12px);line-height:20px;margin:0 4px 0 2px;min-width:23px;overflow:hidden;padding:0 8px}.secondary-link__alert-count:empty{display:none}#pfe-navigation__1x-skip-links{left:0;position:absolute;top:0}#pfe-navigation__1x-skip-links,#pfe-navigation__1x-skip-links li{height:0;list-style:none;margin:0;padding:0;width:0}.skip-link[class][class]{font-size:.875rem;font-size:var(--pf-global--FontSize--sm,.875rem);line-height:18px}.skip-link[class][class]:focus{border-radius:.21429em;height:auto;left:50%;padding:.42857em .57143em;position:fixed;top:8px;transform:translateX(-50%);width:auto;z-index:99999;clip:auto;background:#fff;background:var(--pfe-navigation__skip-link--BackgroundColor,var(--pfe-theme--color--surface--lightest,#fff));color:#06c;color:var(--pfe-navigation__skip-link--Color,var(--pfe-theme--color--link,#06c));text-decoration:none}pfe-navigation pfe-navigation-account[slot=account]{background:#fff;background:var(--pfe-navigation__dropdown--Background,var(--pfe-theme--color--surface--lightest,#fff));width:100%}</style>
<style>:host([size=sm]) #container[data-v-8589d091]{--_size:var(--pf-global--icon--FontSize--sm,12px)}.content-wrapper[data-v-8589d091]{height:auto;margin:0 auto;min-height:46vh}.content[data-v-8589d091]{max-width:1000px}#left-content[data-v-8589d091]{max-width:330px;z-index:1}.line-below-chp[data-v-8589d091]{margin:var(--rh-space-xl,24px) 0 var(--rh-space-3xl,48px)}.toc-container[data-v-8589d091]{border-right:1px solid var(--rh-color-gray-30,#c7c7c7);min-height:100vh;position:sticky;top:0;transition:transform .3s ease-in-out}nav#toc[data-v-8589d091]{height:auto;overflow-y:auto;padding-bottom:var(--rh-space-2xl,32px)}.max-height-85[data-v-8589d091]{max-height:85vh}.max-height-75[data-v-8589d091]{max-height:75vh}.toc-filter[data-v-8589d091]{background-color:#fff;padding:var(--rh-space-lg,16px) var(--rh-space-2xl,32px);position:sticky;top:-1px;width:100%;z-index:1}#text[data-v-8589d091],.toc-filter[data-v-8589d091]{align-items:center;display:flex}#text[data-v-8589d091]{flex:1;flex-direction:row}#search-icon[data-v-8589d091]{color:#151515;left:2.5rem;position:absolute;top:55%;transform:translateY(-50%)}pf-icon[data-v-8589d091]{--pf-icon--size:16px}#text:focus-within #icon[data-v-8589d091],#text:hover #icon[data-v-8589d091]{color:#151515}#text[data-v-8589d091]:after,#text[data-v-8589d091]:before{content:"";inset:0;pointer-events:none;position:absolute}#text-input[data-v-8589d091]:focus,#text-input:focus+#utilities[data-v-8589d091]{border-bottom:2px solid #06c;outline:none}#text-input[data-v-8589d091]{background-color:transparent;border:1px solid #f0f0f0;border-bottom-color:#8a8d90;color:#151515;font-family:inherit;font-size:100%;grid-area:text-input;line-height:1.5;overflow:hidden;padding:.375rem .25rem .375rem 2rem;position:relative;text-overflow:ellipsis;white-space:nowrap;width:100%}#utilities[data-v-8589d091]{align-items:center;border:1px solid #f0f0f0;border-bottom:1px solid #8a8d90;border-left:0;display:flex}#utilities rh-badge[data-v-8589d091]{border-radius:80px;font-weight:var(--rh-font-weight-heading-medium,500);--_background-color:#e0e0e0;margin-right:8px}#clear-button[data-v-8589d091]{--pf-c-button--PaddingTop:0.625rem;--pf-c-button--PaddingRight:.25rem;--pf-c-button--PaddingBottom:0.625rem;--pf-c-button--PaddingLeft:.25rem;margin-right:8px}#text-input.no-right-border[data-v-8589d091]{border-right:0}.btn-container[data-v-8589d091]{bottom:0;display:flex;justify-content:flex-end;padding:1rem;pointer-events:none;position:fixed;right:0;z-index:2}.top-scroll-btn[data-v-8589d091]{--pf-c-button--BorderRadius:64px;pointer-events:all}.focusable[data-v-8589d091]:focus-visible{border:2px solid var(--rh-color-interactive-blue,#06c)}.mobile-nav-wrapper[data-v-8589d091]{align-items:center;border-bottom:1px solid #c7c7c7;display:flex;height:auto;justify-content:space-between;padding:var(--rh-space-sm,.5rem)}.mobile-nav[data-v-8589d091]{align-items:center;background-color:var(--rh-color-bg-page,#fff);min-height:51px;position:sticky;top:0;z-index:5}.active-mobile-menu[data-v-8589d091]{color:#151515;padding-left:.5rem}.hidden[data-v-8589d091]{display:none}.mobile-nav-btn[data-v-8589d091]{background-color:transparent;border:none;font-family:inherit;font-size:.875rem;font-weight:500;margin:0;min-height:40px;min-width:40px}.border-right[data-v-8589d091]{border-right:1px solid #c7c7c7}.toc-focus-container[data-v-8589d091]{position:sticky;top:0;z-index:2}.toc-focus-btn[data-v-8589d091]{align-items:center;background-color:var(--rh-color-white,#fff);border:1px solid var(--rh-color-blue-50,#06c);border-radius:50%;cursor:pointer;display:flex;height:40px;justify-content:center;position:absolute;right:-20px;top:15px;width:40px}.toc-focus-btn[data-v-8589d091]:focus-visible,.toc-focus-btn[data-v-8589d091]:hover{background-color:var(--rh-color-blue-10,#e0f0ff);box-shadow:var(--rh-box-shadow-sm,0 2px 4px 0 hsla(0,0%,8%,.2))}.toc-focus-btn[data-v-8589d091]:focus-visible{border:2px solid var(--rh-color-blue-50,#06c)}.toc-focus-btn-icon[data-v-8589d091]{color:var(--rh-color-blue-50,#06c)}.toc-wrapper[data-v-8589d091]{padding:0}.product-container[data-v-8589d091]{border-bottom:1px solid var(--rh-color-gray-30,#c7c7c7);padding:var(--rh-space-xl,24px) var(--rh-space-2xl,32px)}.product-container h1.product-title[data-v-8589d091]{font-size:var(--rh-font-size-code-xl,1.25rem);line-height:30px;margin-bottom:0;margin-top:0}.product-container .product-version[data-v-8589d091]{align-items:center;display:flex;flex-wrap:wrap;margin-top:var(--rh-space-lg,16px)}.product-version .version-label[data-v-8589d091]{color:var(--rh-color-canvas-black,#151515);font-family:Red Hat Text;font-size:var(--rh-font-size-body-text-sm,.875rem);font-weight:500}.product-version .version-select-dropdown[data-v-8589d091]{margin:var(--rh-space-md,8px) var(--rh-space-sm,6px);max-width:9.75rem;min-height:2rem;min-width:3rem;overflow:hidden;width:-moz-min-content;width:min-content;word-wrap:nowrap;-webkit-appearance:none;-moz-appearance:none;background:var(--rh-color-white,#fff);background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='10' height='6' fill='none' viewBox='0 0 10 6'%3E%3Cpath fill='%23151515' d='M.678 0h8.644c.596 0 .895.797.497 1.195l-4.372 4.58c-.298.3-.695.3-.993 0L.18 1.196C-.216.797.081 0 .678 0'/%3E%3C/svg%3E");background-position-x:85%;background-position-y:50%;background-repeat:no-repeat;border:1px solid var(--rh-color-gray-30,#c7c7c7);border-bottom:0;box-shadow:0 -1px 0 0 var(--rh-color-gray-60,#4d4d4d) inset;cursor:pointer;font-size:var(--rh-font-size-body-text-md,1rem);padding:var(--rh-space-md,8px);padding-right:24px;text-overflow:ellipsis}pf-popover[data-v-8589d091]{margin-top:var(--rh-space-md,8px);--pf-c-popover__arrow--BackgroundColor:var(--rh-color-canvas-black,#151515);--pf-c-popover__content--BackgroundColor:var(--rh-color-canvas-black,#151515);--pf-c-popover--BoxShadow:0px 4px 8px 0px #15151540;--pf-c-popover__title-text--Color:var(--rh-color-white,#fff);--pf-c-popover--MaxWidth:300px;--pf-c-popover--MinWidth:300px;--pf-c-popover--c-button--Top:20px;--pf-c-popover--c-button--Right:4px;--pf-c-button--m-plain--hover--Color:var(--rh-color-white,#fff)}pf-popover[data-v-8589d091]::part(content){padding:var(--rh-space-2xl,32px)}pf-popover[data-v-8589d091]::part(body){margin-top:var(--rh-space-lg,16px)}pf-popover[data-v-8589d091]::part(close-button){--pf-c-button--m-plain--focus--Color:var(--rh-color-gray-30,#c7c7c7);--pf-c-button--m-plain--Color:var(--rh-color-gray-30,#c7c7c7)}.popover-header-text[data-v-8589d091]{color:var(--rh-color-white,#fff);font-size:var(--rh-font-size-code-md,1rem);margin:0;max-width:80%;padding:0}.popover-body-link[data-v-8589d091]{color:var(--rh-color-blue-30,#92c5f9);text-decoration:none}.popover-trigger-btn[data-v-8589d091]{align-items:center;background:none;border:none;cursor:pointer;display:flex;justify-content:center}#first-button[data-v-8589d091]{width:80%}#second-button[data-v-8589d091]{text-align:right;width:20%}#toc-btn[data-v-8589d091]{text-align:left;width:100%}.toc-error[data-v-8589d091]{margin:0;max-width:100%}#layout label[data-v-8589d091]{font-weight:500}.page-layout-options[data-v-8589d091]{background-color:#fff;display:flex;flex-direction:column;padding-bottom:var(--rh-space-lg,16px)}.sticky-top[data-v-8589d091]{position:sticky;top:0}summary[data-v-8589d091]{cursor:pointer;list-style:none;position:relative}summary[data-v-8589d091]::-webkit-details-marker{display:none}details#jump-links-details .jump-links-heading[data-v-8589d091]{background-color:var(--rh-color-white,#fff);display:block;margin-top:var(--rh-space-lg,16px);padding:var(--rh-space-lg,16px) 0 0 var(--rh-space-xl,24px);position:sticky;top:0}details#jump-links-details .jump-links-heading[data-v-8589d091]:before{border-right:3px solid #151515;border-top:3px solid #151515;color:#151515;content:"";display:flex;height:9px;left:2px;position:absolute;top:26px;transform:rotate(-135deg);width:9px}details#jump-links-details[open] .jump-links-heading[data-v-8589d091]:before{transform:rotate(135deg)}.table-of-contents>ol[data-v-8589d091]{list-style:none;margin:0;padding:0}nav.table-of-contents[data-v-8589d091]{z-index:1}nav.table-of-contents ol[data-v-8589d091]{list-style:none;margin:0;padding:0}#mobile-browse-docs[data-v-8589d091]{font-weight:var(--rh-font-weight-body-text-medium,500);padding-left:var(--rh-space-2xl,32px)}.docs-content-container[data-v-8589d091]{font-size:var(--rh-font-size-body-text-lg,1.125rem);font-weight:var(--rh-font-weight-body-text-regular,400);line-height:1.6667;padding-left:6rem;padding-right:6rem;padding-top:var(--rh-space-3xl,4rem)}.chapter-title[data-v-8589d091]{font-family:Red Hat Display}h1.chapter-title[data-v-8589d091]{font-size:var(--rh-fontsize-heading-xl,2.25rem);line-height:46.8px;margin:0;padding:0}.chapter .section h4[data-v-8589d091]{font-size:24px;font-weight:400}.banner-wrapper[data-v-8589d091]{padding:3rem 6rem 0}.page-format-dropdown[data-v-8589d091]{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#fff;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABtSURBVHgBhc4xCoAwDAXQxE6li0K76w0cPZqjHsEb6AlcHb2BR9ADdG7GmIKTWv0QSOAFPjrndgAo4TtHxszTD4JoVAhh1VoXiNgkUO+971Q8iGgxxlSy1jc3CGof39baWTrzNSOkkksEbG/oBGEJIn6gD3jAAAAAAElFTkSuQmCC");background-position:8.5rem;background-repeat:no-repeat;background-size:auto;border:1px solid #c7c7c7;box-shadow:inset 0 -1px 0 0 #4d4d4d;font-family:Red Hat Text;font-size:var(--rh-font-size-body-text-md,1rem);margin-top:var(--rh-space-xs,4px);max-width:168px;min-height:36px;min-width:168px;overflow:hidden;padding:0 var(--rh-space-xl,24px) 0 var(--rh-space-md,8px);text-overflow:ellipsis;white-space:nowrap}.content-format-selectors[data-v-8589d091]{color:#151515;font-family:Red Hat Text;font-size:var(--rh-font-size-body-text-sm,.875rem);font-weight:var(--rh-font-weight-body-text-medium,500);margin-right:var(--rh-space-2xl,32px);max-width:250px;min-width:250px;padding-top:var(--rh-space-2xl,32px)}.chapter .section .simpara[data-v-8589d091],.chapter .section p[data-v-8589d091]{font-family:Red Hat Text;font-size:var(--rh-font-size-body-text-lg,1.125rem);font-weight:var(--rh-font-weight-body-text-regular,400);line-height:30px}#toggle-focus-mode[data-v-8589d091]{padding-right:var(--rh-space-lg,1rem)}@keyframes slideaway-left-8589d091{0%{display:block}to{opacity:0;transform:translateX(-40px)}}@keyframes slideaway-right-8589d091{0%{display:block}to{opacity:0;transform:translateX(40px)}}@keyframes enter-left-8589d091{0%{display:none;transform:translateX(-40px)}to{opacity:1}}@keyframes enter-right-8589d091{0%{display:none;transform:translateX(40px)}to{opacity:1}}.hide-left[data-v-8589d091]{animation:slideaway-left-8589d091 .2s;display:none}.enter-left[data-v-8589d091]{animation:enter-left-8589d091 .3s;border-right:none;display:block}.enter-right[data-v-8589d091]{animation:enter-right-8589d091 .3s;display:block}.hide-right[data-v-8589d091]{animation:slideaway-right-8589d091 .2s;display:none}.toc-container.enter-toc-container-left[data-v-8589d091]{transform:translateX(-85%)}.alert-section[data-v-8589d091]{padding-bottom:3rem}rh-alert[data-v-8589d091]{width:auto}@media (min-width:992px){#mobile-nav[data-v-8589d091],#toc-list-mobile[data-v-8589d091]{display:none}}@media (min-width:992px) and (max-width:1400px){.docs-ocp-content-container[data-v-8589d091]{padding:var(--rh-space-4xl,64px) var(--rh-space-lg,16px) 0}}@media (width < 992px){#breadcrumbs[data-v-8589d091],.content-format-selectors[data-v-8589d091],.toc-container[data-v-8589d091]{display:none}#mobile-nav-content-wrapper[data-v-8589d091]{border-bottom:1px solid #c7c7c7;border-top:1px solid #c7c7c7}#toc-wrapper-mobile[data-v-8589d091]{padding:var(--rh-space-md,1.5rem)}.product-container[data-v-8589d091]{padding:var(--rh-space-2xl,32px) var(--rh-space-lg,16px)}.product-container.shrink-product-padding[data-v-8589d091]{padding:var(--rh-space-lg,16px)}.product-version .version-select-dropdown[data-v-8589d091]{margin:0 var(--rh-space-lg,16px)}#page-content-options-mobile[data-v-8589d091]{padding:var(--rh-space-lg,2rem)}label[for=page-format][data-v-8589d091],label[for=toggle-focus-mode][data-v-8589d091]{display:block}.page-format-dropdown[data-v-8589d091]{background-position:97%;max-width:100%}nav#mobile-toc-menu[data-v-8589d091]{max-height:50vh;overflow-y:scroll}.mobile-jump-links #first-button[data-v-8589d091]{width:100%}#jump-links-btn[data-v-8589d091]{text-align:left;width:100%}#mobile-jump-links-content-wrapper[data-v-8589d091]{border-bottom:1px solid #c7c7c7;border-top:1px solid #c7c7c7;padding:0 var(--rh-space-lg,16px) var(--rh-space-2xl,32px)}.table-of-contents #browse-docs[data-v-8589d091]{margin-top:1rem;padding-top:var(--rh-space-md,1.5rem)}.mobile-nav[data-v-8589d091]{display:block}.hide-mobile-nav[data-v-8589d091],.mobile-nav[data-v-8589d091]{transition:transform .3s ease-in-out}.hide-mobile-nav[data-v-8589d091]{transform:translateY(-100%)}.docs-content-container[data-v-8589d091]{padding-left:1.25rem;padding-right:1.25rem;padding-top:var(--rh-space-xl,24px)}.banner-wrapper[data-v-8589d091]{padding:0 1rem}.toc-filter-mobile[data-v-8589d091]{align-items:center;display:flex;padding:var(--rh-space-lg,16px);width:100%}#text-input[data-v-8589d091]{padding-left:.5rem}.toc-filter[data-v-8589d091]{display:none}}@media (width <=576px){.content-format-selectors[data-v-8589d091]{display:none}}.informaltable[data-v-8589d091],.rhdocs .informaltable[data-v-8589d091],.rhdocs .table-contents[data-v-8589d091],.rhdocs .table-wrapper[data-v-8589d091],.table-contents[data-v-8589d091],.table-wrapper[data-v-8589d091]{max-height:var(--rh-table--maxHeight);overflow:auto}rh-table[data-v-8589d091]{display:block;margin:2rem 0;max-width:100%}.pvof-doc__wrapper[data-v-8589d091],.rhdocs[data-v-8589d091]{--rh-table--maxHeight:calc(100vh - 12.5rem)}</style>
<style>:is(rh-footer-block) a[data-v-97dd2752]{text-decoration:underline}</style>
<style>:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) a{color:var(--rh-color-link-inline-on-dark,var(--rh-color-interactive-blue-lighter,#92c5f9));text-decoration:none}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) a:hover{color:var(--rh-color-link-inline-hover-on-dark,var(--rh-color-interactive-blue-lightest,#b9dafc));text-decoration:underline}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) a:is(:focus,:focus-within){color:var(--rh-color-link-inline-focus-on-dark,var(--rh-color-interactive-blue-lightest,#b9dafc));text-decoration:underline}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) a:visited{color:var(--rh-color-link-inline-visited-on-dark,var(--rh-color-interactive-blue-lightest,#b9dafc));text-decoration:none}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) a[slot^=logo]{display:block}:is(rh-footer) a[slot^=logo]>img{display:block;height:100%;height:var(--rh-size-icon-04,40px);width:auto}:is(rh-footer,rh-footer-universal,rh-global-footer) :is(h1,h2,h3,h4,h5,h6){font-family:var(--rh-font-family-heading,RedHatDisplay,"Red Hat Display","Noto Sans Arabic","Noto Sans Hebrew","Noto Sans JP","Noto Sans KR","Noto Sans Malayalam","Noto Sans SC","Noto Sans TC","Noto Sans Thai",Helvetica,Arial,sans-serif);line-height:var(--rh-line-height-heading,1.3)}rh-footer [slot=links]:is(h1,h2,h3,h4,h5):nth-of-type(n+5){--_link-header-margin:calc(var(--rh-space-2xl, 32px) - var(--rh-space-lg, 16px))}rh-footer [slot^=links] a{gap:var(--rh-footer-links-gap,var(--rh-space-md,8px))}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) [slot^=links] li{display:contents;margin:0;padding:0}:is(rh-footer,:is(rh-footer-universal,rh-global-footer)) [slot^=links] a{color:var(--rh-color-text-primary-on-dark,#fff)!important;display:block;font-size:var(--rh-footer-link-font-size,var(--rh-font-size-body-text-sm,.875rem));width:-moz-fit-content;width:fit-content}:is(rh-footer-universal,rh-global-footer) [slot^=links] a{font-size:inherit}:is(rh-footer,rh-footer-universal,rh-global-footer){--rh-footer-section-side-gap:var(--rh-space-lg,16px)}@media screen and (min-width:768px){:is(rh-footer,rh-footer-universal,rh-global-footer){--rh-footer-section-side-gap:var(--rh-space-2xl,32px)}}@media screen and (min-width:1440px){:is(rh-footer,rh-footer-universal,rh-global-footer){--rh-footer-section-side-gap:var(--rh-space-4xl,64px)}}rh-footer:not(:defined){background-color:var(--rh-color-surface-darker,#1f1f1f);display:grid;grid-template-areas:"footer" "global";grid-template-rows:1fr auto;min-height:var(--rh-footer-nojs-min-height,750px);width:100%}:is(rh-footer-universal,rh-global-footer):not(:defined):before{grid-area:global}rh-footer:not(:defined)>[slot=logo]{padding:var(--rh-space-2xl,32px) var(--_section-side-gap)}:is(rh-footer-universal,rh-global-footer):not(:defined)>*,rh-footer:not(:defined)>:not([slot=logo],:is(rh-footer-universal,rh-global-footer)){border:0;clip:rect(1px,1px,1px,1px);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}:is(rh-footer-universal,rh-global-footer):not(:defined){background-color:var(--rh-color-surface-darkest,#151515);display:block;min-height:176px;width:100%}rh-footer-universal rh-footer-copyright{grid-column:-1/1}</style>
<style>.status-legal .status-page-widget[data-v-5f538988]{display:block;margin:.5rem 0;width:11.3125rem;width:-moz-max-content;width:max-content}.status-page-widget[data-v-5f538988]{align-items:center;display:flex;flex-direction:row}.status-legal .status-page-widget .status-description[data-v-5f538988]{color:#ccc;font-weight:600;letter-spacing:.0125rem;line-height:1.5;margin-right:.5rem}.status-good[data-v-5f538988]{background-color:#3e8536}.status-critical[data-v-5f538988]{background-color:#a30100}.status-partial[data-v-5f538988]{background-color:#f5c12d}.status-maintentance[data-v-5f538988]{background-color:#316dc1}.status-minor[data-v-5f538988]{background-color:#b85c00}.status-description[data-v-5f538988]{color:#ccc;font-weight:500;letter-spacing:.2px;line-height:1.5}.current-status-indicator[data-v-5f538988]{border-radius:6px;display:inline-block;height:12px;margin:0 0 0 5px;width:12px}.current-status-indicator.small[data-v-5f538988]{border-radius:4px;display:inline-block;height:8px;margin:0 0 0 5px;width:8px}</style>
<style>.breadcrumbs[data-v-798f280c]{align-items:center;background-color:#f6f6f6;display:flex;gap:var(--rh-space-xl,24px);padding:var(--rh-space-lg,16px) var(--rh-space-2xl,32px)}nav[data-v-798f280c]{flex:1}ol[data-v-798f280c]{background-color:#f6f6f6;font-size:.875rem;list-style:none;margin:0;padding:0}li[data-v-798f280c]{color:#151515;display:inline}a[data-v-798f280c]:after{border-bottom-color:transparent;border-left-color:transparent;box-shadow:inset .25rem .25rem 0 .0625rem #8a8d8d;content:"";display:inline-block;height:1.07143em;margin:0 .5em;position:relative;right:0;top:.75em;transform:translateY(-.5em) rotate(135deg) scale(.5);width:1.07143em}</style>
<style>ol[data-v-fa0dae77]{margin:0;padding:0}li[data-v-fa0dae77],ol[data-v-fa0dae77],ul[data-v-fa0dae77]{list-style:none;margin:0}.chapter-title[data-v-fa0dae77]{font-size:1em}.sub-chapter-title[data-v-fa0dae77],.sub-chapter-title a[data-v-fa0dae77]{font-size:.875rem}#toc .link[data-v-fa0dae77],#toc-mobile .link[data-v-fa0dae77],.heading[data-v-fa0dae77],.sub-nav .link[data-v-fa0dae77],.sub-nav .link .link[data-v-fa0dae77]{display:block;padding:var(--rh-space-md,8px) var(--rh-space-2xl,32px);padding-right:2.5em;text-decoration:none;transition:background-color .25s}.heading[data-v-fa0dae77]:hover,.link[data-v-fa0dae77]:hover,.sub-nav .link[data-v-fa0dae77]:hover{background:var(--rh-color-surface-lighter,#f2f2f2);box-shadow:inset 3px 0 0 0 #d2d2d2;color:#151515}details[open]:first-of-type>.heading[data-v-fa0dae77]:after{transform:rotate(135deg)}.item[data-v-fa0dae77]{line-height:22px}#toc .link[data-v-fa0dae77],#toc-mobile .link[data-v-fa0dae77]{color:var(--rh-color-text-primary-on-light,#151515)}.sub-nav[data-v-fa0dae77],.toc-wrapper[data-v-fa0dae77]{list-style:none;margin:0}.toc-wrapper[data-v-fa0dae77]{min-width:100%;padding:0}.sub-nav[data-v-fa0dae77]{font-size:1em;line-height:24px;padding-left:1rem;padding-left:16px}.sub-nav .link[data-v-fa0dae77]:hover{color:#151515}.active[data-v-fa0dae77]{background:var(--rh-color-surface-lighter,#f2f2f2);box-shadow:inset 3px 0 0 0 var(--rh-color-icon-primary-on-light,#e00)}.chapter-landing-page[data-v-fa0dae77]{font-weight:500}summary[data-v-fa0dae77]{cursor:pointer;list-style:none;position:relative}summary[data-v-fa0dae77]::-webkit-details-marker{display:none}@keyframes slideDown-fa0dae77{0%{height:0;opacity:0}to{height:var(--details-height-open,"100%");opacity:1}}html[data-v-fa0dae77]{--details-transition-time:400ms}details[data-v-fa0dae77]{max-height:var(--details-height-closed,auto);transition:all ease-out var(--details-transition-time,0)}details[open][data-v-fa0dae77]{max-height:var(--details-height-open,auto)}details .heading.sub-chapter-title[data-v-fa0dae77]:after,details .heading[data-v-fa0dae77]:after{border-right:3px solid #151515;border-top:3px solid #151515;color:#151515;content:"";display:flex;float:right;height:9px;margin-left:16px;position:absolute;right:var(--rh-space-xl,24px);top:14px;transform:rotate(45deg);width:9px}details .heading.sub-chapter-title[data-v-fa0dae77]:after{height:8px;width:8px}</style>
<style>.item[data-v-b883c74f]{line-height:22px}#toc .link[data-v-b883c74f],#toc-mobile .link[data-v-b883c74f]{color:var(--rh-color-text-primary-on-light,#151515)}#toc .link[data-v-b883c74f],#toc-mobile .link[data-v-b883c74f],.heading[data-v-b883c74f],.sub-nav .link[data-v-b883c74f],.sub-nav .link .link[data-v-b883c74f]{display:block;padding:var(--rh-space-md,8px) var(--rh-space-2xl,32px);padding-right:2.5em;text-decoration:none;transition:background-color .25s}.heading[data-v-b883c74f]:hover,.link[data-v-b883c74f]:hover,.sub-nav .link[data-v-b883c74f]:hover{background:var(--rh-color-surface-lighter,#f2f2f2);box-shadow:inset 3px 0 0 0 #d2d2d2;color:#151515}ol[data-v-b883c74f]{margin:0;padding:0}li[data-v-b883c74f],ol[data-v-b883c74f],ul[data-v-b883c74f]{list-style:none;margin:0}.chapter-title[data-v-b883c74f]{font-size:1em}.sub-nav[data-v-b883c74f]{font-size:1em;line-height:24px;list-style:none;margin:0;padding-left:1rem;padding-left:16px}.sub-nav .link[data-v-b883c74f]:hover{color:#151515}.active[data-v-b883c74f]{background:var(--rh-color-surface-lighter,#f2f2f2);box-shadow:inset 3px 0 0 0 var(--rh-color-icon-primary-on-light,#e00)}.sub-chapter-title[data-v-b883c74f],.sub-chapter-title a[data-v-b883c74f]{font-size:.875rem}summary[data-v-b883c74f]{cursor:pointer;list-style:none;position:relative}summary[data-v-b883c74f]::-webkit-details-marker{display:none}html[data-v-b883c74f]{--details-transition-time:400ms}.chapter-landing-page[data-v-b883c74f]{font-weight:500}details[open]:first-of-type>.heading[data-v-b883c74f]:after{transform:rotate(135deg)}details[data-v-b883c74f]{max-height:var(--details-height-closed,auto);transition:all ease-out var(--details-transition-time,0)}details[open][data-v-b883c74f]{max-height:var(--details-height-open,auto)}details .heading.sub-chapter-title[data-v-b883c74f]:after,details .heading[data-v-b883c74f]:after{border-right:3px solid #151515;border-top:3px solid #151515;color:#151515;content:"";display:flex;float:right;height:9px;margin-left:16px;position:absolute;right:var(--rh-space-xl,24px);top:14px;transform:rotate(45deg);width:9px}details .heading.sub-chapter-title[data-v-b883c74f]:after{height:8px;width:8px}</style>
<style>.html-container[data-v-9c2a9ddb]{padding:2rem 1.5rem 0}rh-alert[data-v-9c2a9ddb]{color:#151515}@media (max-width:772px){.html-container[data-v-9c2a9ddb]{padding:3rem 1rem 0}}</style>
<style>.search-container[data-v-69710f44]{height:100%}.form-box[data-v-69710f44],.search-container[data-v-69710f44]{justify-content:center}.form-box[data-v-69710f44],.search-box[data-v-69710f44],.search-container[data-v-69710f44]{align-items:center;display:flex;width:100%}.search-box[data-v-69710f44]{justify-content:space-between;position:relative}ul[data-v-69710f44]{list-style-type:none}#search-list[data-v-69710f44]{background:#fff;border:1px solid #f0f0f0;box-shadow:0 4px 4px 0 #00000040;color:#151515;display:block;left:0;margin:0;padding:0;position:absolute;top:37px;width:100%;z-index:200}#search-list li[data-v-69710f44]{align-items:center;display:flex;justify-content:space-between;padding:.75rem}#search-list .active[data-v-69710f44],#search-list li[data-v-69710f44]:hover{background:#f0f0f0}.group-title[data-v-69710f44]{border-top:1px solid #4d4d4d;color:#4d4d4d;cursor:default;font-size:12px;font-weight:400;pointer-events:none}.group-title[data-v-69710f44],.group-title[data-v-69710f44]:hover{background:#fff}.search-item-text-elipsis[data-v-69710f44]{display:inline-block;max-width:48%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.search-item-text[data-v-69710f44]{padding-left:1.75rem}.search-item-chip[data-v-69710f44]{float:right}.search-product-version[data-v-69710f44]{background:#fff;border:1px solid #f0f0f0;border-radius:3px;font-size:1rem;font-weight:400;line-height:24px}.search-icon-form[data-v-69710f44]{color:var(--rh-color-gray-50,#707070);left:12px;position:absolute}.input-search-box[data-v-69710f44]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:0;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);height:36px;padding:0 40px;width:100%}.input-clear-btn[data-v-69710f44]{align-items:center;background-color:transparent;border:none;display:flex;height:36px;justify-content:center;margin-right:-30px;outline:none;transform:translateX(-30px)}.input-clear-btn[data-v-69710f44]:focus{border:1px solid var(--rh-color-accent-base-on-light,#06c)}.input-clear-btn:focus .input-clear-icon[data-v-69710f44]{color:var(--rh-color-canvas-black,#151515)}.input-clear-icon[data-v-69710f44]{color:#6b6e72;cursor:pointer}.input-clear-icon[data-v-69710f44]:hover{color:var(--rh-color-canvas-black,#151515)}.form-submit-btn[data-v-69710f44]::part(button){align-items:center;background-color:var(--rh-color-gray-20,#e0e0e0);border-radius:0;display:flex;height:36px;justify-content:center;--_default-border-color:var(--rh-color-gray-20,#e0e0e0)}.input-close-btn[data-v-69710f44]{background:none;border:none;cursor:pointer;margin:0 var(--rh-space-lg,16px)}.input-close-icon[data-v-69710f44]{color:var(--rh-color-white,#fff)}@media (max-width:992px){.form-box[data-v-69710f44]{gap:var(--rh-space-md,8px);margin:auto;width:100%}.input-search-box[data-v-69710f44]{border:1px solid var(--rh-color-gray-30,#c7c7c7)}.input-search-box[data-v-69710f44]::-moz-placeholder{color:#6a6e73;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);font-weight:var(--rh-font-weight-code-regular,400);line-height:24px}.input-search-box[data-v-69710f44]::placeholder{color:#6a6e73;font-family:var(--rh-font-family-body-text,"Red Hat Text","RedHatText",Arial,sans-serif);font-size:var(--rh-font-size-body-text-md,1rem);font-weight:var(--rh-font-weight-code-regular,400);line-height:24px}.search-item-text-elipsis[data-v-69710f44]{max-width:60%}}@media (max-width:767px){.input-close-btn[data-v-69710f44]{display:none}.search-container[data-v-69710f44]{border:1px solid #f0f0f0}}</style>
<link rel="stylesheet" href="/_nuxt/entry.DNAluCmw.css" integrity="sha384-FnrZajt9k3u4tri3ClqikI96k+jP7kyrvgKKgdzBr5Y8CQEi3gusKE0+eMSLvGxm">
<link rel="stylesheet" href="/_nuxt/SearchAutocomplete.DkrJaF8R.css" integrity="sha384-Zw8gf6w7SrpWDmknvrab5QanIN+DSJRS/bPB9/lgDkhR7JhDmG/VF++MTMKU8mKB">
<link rel="stylesheet" href="/_nuxt/Breadcrumbs.BLkLxUMB.css" integrity="sha384-f6iEfCywVoZB0/hIKTRaxywtS21KzhBx2JOI/uVjjU9aqFcP7X9cqLH29w2HQvLe">
<link rel="stylesheet" href="/_nuxt/Alert.fTkXFs3h.css" integrity="sha384-yFMpT5E64LAQi3qJ10AJJ1oOH3DrI68OvLSjSivjNCQXZ25pmFxlPavPQ0TEyEpq">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/C3PvZR0C.js" integrity="sha384-H9Can2ny34kmIBk2SNFJRaBH6FotFjI6LVF8tQ4HqJnqY0a1tGDF/4RHxK2LFs7c">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Ds9UYxCD.js" integrity="sha384-PFyBx6Pvk48yXM+prD4CDErW/3HFtPEqORVyAch5qDvJSyubA93+vR4jsWGRQKZs">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BUXK7nH-.js" integrity="sha384-Kqf3r1QrD7+NOn9EuK/ba9sTBZjn7vLAjnCoRtq7IKz+QV0JUUBFf1Snf1yVkkgr">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/BxBriHwM.js" integrity="sha384-bejD6BN5N1iVRo5Ymn+LdVN0jvrnJTzgqgFD9xQ5+Yi46U6ff+s5W2AISzRWvJaM">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DB5Lt3x5.js" integrity="sha384-Ae/gV/4Dt4jnJApC0CWbckKJ7omq+W9Hb4jjdMyhxGJpwk6FlO7pGYMD3bPO/h1y">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/D8BFaW0S.js" integrity="sha384-/m09v/yYk14L9Hra6/9jYtMTn2IdkKQvzpFPRQ5P/baRKwdZQN98873hqvwuYXFS">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/_58Q44fW.js" integrity="sha384-EdSd8jpnetO/BWDAc8C4SpQExZ7pYjMygNPvbLmiA1TaYsNUdVOqIIyOIzaErEeU">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DOCUiUcq.js" integrity="sha384-9H868K5q7MLzC8TSRXT3pVqDzsOVxZLYvUQ8cLGpHPZCFEyEJjnwSHE+/7FWrJPV">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CiTVMRA7.js" integrity="sha384-xBIJ2xO0t62/oREKqSxPtW1tRxKY+5YYXbGcJ0QR9IRM28JhL+53NOiAvVFn3rmF">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/CR3F0y4K.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/Bn-QuJwp.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/T_zvNmZe.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/Ciddaed-.js">
<link rel="prefetch" as="image" type="image/svg+xml" href="/_nuxt/Footer_Cloud.DpSdW8MR.svg">
<script type="module">
      import "@rhds/elements/rh-cta/rh-cta.js";
      </script>
<script type="module">
      import '@rhds/elements/rh-alert/rh-alert.js';
      </script>
<script type="module">
        import "/scripts/v1/@cpelements/pfe-navigation/dist/pfe-navigation.min.js";
        import "/scripts/v1/@rhds/elements/elements/rh-button/rh-button.js";
      </script>
<script type="module">import "@rhds/elements/rh-footer/rh-footer.js"</script>
<link rel="canonical" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index">
<script type="module">
      import "@rhds/elements/rh-alert/rh-alert.js";
      import "@rhds/elements/rh-code-block/rh-code-block.js";
      import '@rhds/elements/rh-cta/rh-cta.js';
      import '@patternfly/elements/pf-switch/pf-switch.js';
      import '@cpelements/rh-table/dist/rh-table.js';
      import '@patternfly/pfe-clipboard/dist/pfe-clipboard.min.js';
      import '@patternfly/elements/pf-button/pf-button.js';
      import '@patternfly/elements/pf-modal/pf-modal.js';
      import '@patternfly/elements/pf-icon/pf-icon.js';
      import '@patternfly/elements/pf-popover/pf-popover.js';
      import '@patternfly/elements/pf-tooltip/pf-tooltip.js';
      import '@rhds/elements/rh-badge/rh-badge.js';
      </script>
<meta name="description" content="Managing, monitoring, and updating the kernel | Red Hat Documentation">
<meta name="app-version" content="v0.0.1">
<script type="module">
        import "/scripts/v1/@rhds/elements/elements/rh-button/rh-button.js";
      </script>
<script type="module">
      import '@rhds/elements/rh-alert/rh-alert.js';
      </script>
<script type="module">
        import "/scripts/v1/@rhds/elements/elements/rh-button/rh-button.js";
        import "@patternfly/elements/pf-badge/pf-badge.js";
      </script>
<script type="module" src="/_nuxt/C3PvZR0C.js" crossorigin integrity="sha384-H9Can2ny34kmIBk2SNFJRaBH6FotFjI6LVF8tQ4HqJnqY0a1tGDF/4RHxK2LFs7c"></script></head><body><div id="__nuxt"><!--[--><!--[--><!----><header data-v-edc0d12c><a href="#pfe-navigation" id="global-skip-to-nav" class="skip-link visually-hidden" data-v-edc0d12c>Skip to navigation</a><a href="#main-content" class="skip-link visually-hidden" data-v-edc0d12c>Skip to content</a><nav id="upper-navigation" class="upper-navigation" aria-labelledby="upper-navigation-label" data-analytics-region="upper-navigation" data-v-edc0d12c><p id="upper-navigation-label" class="upper-nav-hidden" data-v-edc0d12c>Featured links</p><div class="upper-nav-container" data-v-edc0d12c><ul class="upper-nav-menu" data-v-edc0d12c><li data-v-edc0d12c><a href="https://access.redhat.com/" class="upper-nav-links" data-analytics-text="Support" data-analytics-category="Featured Links" data-v-edc0d12c>Support</a></li><li data-v-edc0d12c><a href="https://console.redhat.com/" class="upper-nav-links" data-analytics-text="Console" data-analytics-category="Featured Links" data-v-edc0d12c>Console</a></li><li data-v-edc0d12c><a href="https://developers.redhat.com/" class="upper-nav-links" data-analytics-text="Developers" data-analytics-category="Featured Links" data-v-edc0d12c>Developers</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/products/trials" class="upper-nav-links" data-analytics-text="Start a trial" data-analytics-category="Featured Links" data-v-edc0d12c>Start a trial</a></li><li data-v-edc0d12c><button id="all-red-hat" class="upper-nav-links" data-analytics-text="All Red Hat" data-analytics-category="Featured Links" aria-expanded="false" data-analytics-linktype="tab" data-v-edc0d12c>All Red Hat<svg class="upper-nav-arrow" xmlns="http://www.w3.org/2000/svg" width="1024" height="1024" viewBox="0 0 1024 1024" aria-hidden="true" data-v-edc0d12c=""><path d="M810.642 511.557c0 8.905-3.447 16.776-10.284 23.613L322.31 1013.216c-6.835 6.837-14.706 10.284-23.61 10.284s-16.776-3.447-23.613-10.284l-51.303-51.303c-6.837-6.837-10.284-14.707-10.284-23.612s3.447-16.775 10.284-23.61L626.972 511.5 223.784 108.31c-6.837-6.835-10.284-14.706-10.284-23.61s3.447-16.776 10.284-23.613l51.303-51.303C281.924 2.947 289.794-.5 298.7-.5s16.775 3.447 23.61 10.284L800.36 487.83c6.837 6.837 10.284 14.708 10.284 23.613v.114" data-v-edc0d12c=""/></svg></button><div class="upper-nav-dropdown-container" data-v-edc0d12c><ul data-v-edc0d12c><li data-v-edc0d12c><span data-v-edc0d12c>For customers</span><ul data-v-edc0d12c><li data-v-edc0d12c><a href="https://access.redhat.com/support" data-pzn-audience="customers" data-analytics-category="All Red Hat|For customers" data-analytics-text="Customer support" data-v-edc0d12c>Customer support</a></li><li data-v-edc0d12c><a href="/products" data-pzn-audience="customers" data-analytics-category="All Red Hat|For customers" data-analytics-text="Documentation" data-v-edc0d12c>Documentation</a></li><li data-v-edc0d12c><a href="https://access.redhat.com/support/cases" data-pzn-audience="customers" data-analytics-category="All Red Hat|For customers" data-analytics-text="Support cases" data-v-edc0d12c>Support Cases</a></li><li data-v-edc0d12c><a href="https://access.redhat.com/management" data-pzn-audience="customers" data-analytics-category="All Red Hat|For customers" data-analytics-text="Subscription management" data-v-edc0d12c>Subscription management</a></li><li data-v-edc0d12c><a href="https://catalog.redhat.com/" data-analytics-category="All Red Hat|For customers" data-analytics-text="Red Hat Ecosystem Catalog" data-v-edc0d12c>Red Hat Ecosystem Catalog</a></li><li data-v-edc0d12c><a href="https://catalog.redhat.com/partners" data-analytics-category="All Red Hat|For customers" data-analytics-text="Find a partner" data-v-edc0d12c>Find a partner</a></li></ul></li><li data-v-edc0d12c><span data-v-edc0d12c>For partners</span><ul data-v-edc0d12c><li data-v-edc0d12c><a href="https://connect.redhat.com/login" data-pzn-audience="partners" data-analytics-category="All Red Hat|For partners" data-analytics-text="Partner login" data-v-edc0d12c>Partner login</a></li><li data-v-edc0d12c><a href="https://connect.redhat.com/en/support" data-pzn-audience="partners" data-analytics-category="All Red Hat|For partners" data-analytics-text="Partner support" data-v-edc0d12c>Partner support</a></li><li data-v-edc0d12c><a href="https://connect.redhat.com/" data-pzn-audience="partners" data-analytics-category="All Red Hat|For partners" data-analytics-text="Become a partner " data-v-edc0d12c>Become a partner</a></li></ul></li><li data-v-edc0d12c><span data-v-edc0d12c>Try, buy, &amp; sell</span><ul data-v-edc0d12c><li data-v-edc0d12c><a href="https://marketplace.redhat.com/en-us" data-analytics-category="All Red Hat|Try, buy, &amp; sell" data-analytics-text="Red Hat Marketplace" data-v-edc0d12c>Red Hat Marketplace</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/store" data-analytics-category="All Red Hat|Try, buy, &amp; sell" data-analytics-text="Red Hat Store" data-v-edc0d12c>Red Hat Store</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/contact" data-analytics-category="All Red Hat|Try, buy, &amp; sell" data-analytics-text="Contact sales" data-v-edc0d12c>Contact Sales</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/products/trials" data-analytics-category="All Red Hat|Try, buy, &amp; sell" data-analytics-text="Start a trial" data-v-edc0d12c>Start a trial</a></li></ul></li><li data-v-edc0d12c><span data-v-edc0d12c>Learning resources</span><ul data-v-edc0d12c><li data-v-edc0d12c><a href="https://www.redhat.com/en/services/training-and-certification" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="Training and certification " data-v-edc0d12c>Training and certification</a></li><li data-v-edc0d12c><a href="https://developers.redhat.com/" data-pzn-audience="developers|community" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="For developers" data-v-edc0d12c>For developers</a></li><li data-v-edc0d12c><a href="https://cloud.redhat.com/learn" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="Hybrid cloud learning hub" data-v-edc0d12c>Hybrid cloud learning hub</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/interactive-labs" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="Interactive labs" data-v-edc0d12c>Interactive labs</a></li><li data-v-edc0d12c><a href="https://learn.redhat.com/" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="Learning community" data-v-edc0d12c>Learning community</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/en/tv" data-analytics-category="All Red Hat|Learning resources" data-analytics-text="Red Hat TV" data-v-edc0d12c>Red Hat TV</a></li></ul></li><li data-v-edc0d12c><span data-v-edc0d12c>Open source communities</span><ul data-v-edc0d12c><li data-v-edc0d12c><a href="https://www.ansible.com/community" data-analytics-category="All Red Hat|Open source communities" data-analytics-text="Ansible" data-v-edc0d12c>Ansible</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/sysadmin/" id="community" data-analytics-category="All Red Hat|Open source communities" data-analytics-text="For system administrators" data-v-edc0d12c>For system administrators</a></li><li data-v-edc0d12c><a href="https://www.redhat.com/architect/" data-pzn-audience="community" data-analytics-category="All Red Hat|Open source communities" data-analytics-text="For architects" data-v-edc0d12c>For architects</a></li></ul></li></ul></div></li></ul></div></nav><pfe-navigation full-width id="pfe-navigation" pf-sticky="true" lang="en" data-v-edc0d12c><nav class="pfe-navigation" aria-label="Main Navigation" data-v-edc0d12c><div class="pfe-navigation__logo-wrapper" id="pfe-navigation__logo-wrapper" data-v-edc0d12c><a href="/en" class="pfe-navigation__logo-link" data-v-edc0d12c><img class="pfe-navigation__logo-image pfe-navigation__logo-image--screen pfe-navigation__logo-image--small" src="/Logo-Red_Hat-Documentation-A-Reverse-RGB.svg" width="240" height="40" alt="Red Hat Documentation" data-v-edc0d12c></a></div></nav><span data-v-edc0d12c></span><div slot="secondary-links" data-v-edc0d12c><div class="hidden-at-desktop hidden-at-tablet search-mobile" data-v-edc0d12c><div id="search-form" class="search-container" opensearchbox="true" data-v-edc0d12c data-v-69710f44><form role="search" class="form-box" autocomplete="off" data-v-69710f44><div class="search-box" data-v-69710f44><pf-icon icon="search" size="md" class="search-icon-form" data-v-69710f44></pf-icon><input type="text" id="input-search" class="input-search-box" placeholder="Search documentation" value aria-autocomplete="list" data-v-69710f44><!----><!----><!----><rh-button disabled variant="tertiary" class="form-submit-btn" data-v-69710f44><img src="data:image/svg+xml,%3csvg%20width=&#39;14&#39;%20height=&#39;14&#39;%20viewBox=&#39;0%200%2014%2014&#39;%20fill=&#39;none&#39;%20xmlns=&#39;http://www.w3.org/2000/svg&#39;%3e%3cpath%20d=&#39;M7%200L5.6%201.4L10.3%206H0V8H10.3L5.6%2012.6L7%2014L14%207L7%200Z&#39;%20fill=&#39;%23707070&#39;/%3e%3c/svg%3e" alt="Submit button" data-v-69710f44></rh-button></div></form><!----></div></div><div class="hidden-at-desktop hidden-at-tablet buttons" data-v-edc0d12c><a href="https://access.redhat.com/" data-analytics-category="More Red Hat" data-analytics-text="Support" data-v-edc0d12c>Support</a><a href="https://console.redhat.com/" data-analytics-category="More Red Hat" data-analytics-text="Console" data-v-edc0d12c>Console</a><a href="https://developers.redhat.com/" data-analytics-category="More Red Hat" data-analytics-text="Developers" data-v-edc0d12c>Developers</a><a href="https://www.redhat.com/en/products/trials" data-analytics-category="More Red Hat" data-analytics-text="Start a trial" data-v-edc0d12c>Start a trial</a><a href="https://www.redhat.com/en/contact" data-analytics-category="More Red Hat" data-analytics-text="Contact" data-v-edc0d12c>Contact</a></div><div class="hidden-at-desktop hidden-at-tablet mobile-lang-select" data-v-edc0d12c><label for="lang_selection" data-v-edc0d12c>Select your language</label><select id="lang_selection" data-v-edc0d12c><!--[--><option value="en" xml:lang="en" hreflang="en" data-v-edc0d12c>English</option><option value="fr" xml:lang="fr" hreflang="fr" data-v-edc0d12c>Français</option><option value="ko" xml:lang="ko" hreflang="ko" data-v-edc0d12c>한국어</option><option value="ja" xml:lang="ja" hreflang="ja" data-v-edc0d12c>日本語</option><option value="zh-cn" xml:lang="zh-cn" hreflang="zh-cn" data-v-edc0d12c>中文 (中国)</option><option value="de" xml:lang="de" hreflang="de" data-v-edc0d12c>Deutsch</option><option value="it" xml:lang="it" hreflang="it" data-v-edc0d12c>Italiano</option><option value="pt-br" xml:lang="pt-br" hreflang="pt-br" data-v-edc0d12c>Português</option><option value="es" xml:lang="es" hreflang="es" data-v-edc0d12c>Español</option><!--]--></select></div></div></pfe-navigation></header><main id="main-content"><!--[--><!--[--><!--[--><!----><!----><!--]--><div class="breadcrumbs" id="breadcrumbs" data-v-8589d091 data-v-798f280c><nav aria-label="Breadcrumb" class="breadcrumb" data-v-798f280c><ol data-v-798f280c><li data-v-798f280c><a href="/" data-v-798f280c>Home</a></li><li data-v-798f280c><a href="/en/products" data-v-798f280c>Products</a></li><!--[--><li data-v-798f280c><a href="/en/documentation/red_hat_enterprise_linux/" data-v-798f280c>Red Hat Enterprise Linux</a></li><li data-v-798f280c><a href="/en/documentation/red_hat_enterprise_linux/9/" data-v-798f280c>9</a></li><li data-v-798f280c><!--[-->Managing, monitoring, and updating the kernel<!--]--></li><!--]--></ol></nav><span data-v-798f280c></span></div><!----><nav id="mobile-nav" class="mobile-nav" aria-label="mobile menu" data-v-8589d091><div class="mobile-nav-wrapper" data-v-8589d091><div id="first-button" data-v-8589d091><button id="toc-btn" aria-expanded="false" aria-controls="mobile-nav-content-wrapper" class="mobile-nav-btn" data-v-8589d091><span class="sr-only" data-v-8589d091>Open </span>Table of contents</button></div><div id="second-button" data-v-8589d091><button id="settings-btn" aria-expanded="false" aria-controls="mobile-nav-content-wrapper" class="mobile-nav-btn" data-v-8589d091><pf-icon icon="cog" size="md" data-v-8589d091></pf-icon><span class="sr-only" data-v-8589d091>Open page settings</span></button></div></div><div id="mobile-nav-content-wrapper" class="hidden" role="navigation" tabindex="0" data-v-8589d091><div id="toc-mobile" class="hidden" aria-labelledby="toc-btn" data-v-8589d091><div class="shrink-product-padding product-container" id="product-container-mobile" data-v-8589d091><h1 class="product-title" data-v-8589d091>Red Hat Enterprise Linux</h1><!----></div><div class="toc-filter-mobile" data-v-8589d091><span id="text" part="text" data-v-8589d091><input id="text-input" aria-label="Search input" part="text-input" placeholder="Filter table of contents" type="text" class value data-v-8589d091><!----></span></div><div id="toc-wrapper-mobile" class="span-xs-12 span-sm-4 span-md-3" lang="en" data-v-8589d091><nav id="mobile-toc-menu" class="table-of-contents" aria-label="table of content - mobile" data-v-8589d091><!----></nav></div><!----></div><div id="page-content-options-mobile" class="hidden" aria-labelledby="settings-btn" data-v-8589d091><div class="page-layout-options" data-v-8589d091><label for="page-format-mobile" data-v-8589d091>Format</label><select id="page-format-mobile" class="page-format-dropdown" data-v-8589d091><option class="page-type" value="html" data-v-8589d091>Multi-page</option><option selected class="page-type" value="html-single" data-v-8589d091>Single-page</option><option class="page-type" value="pdf" data-v-8589d091>View full doc as PDF</option></select></div></div></div><!----><!----></nav><div class="grid grid-col-12 content-wrapper" data-v-8589d091><aside id="left-content" class="span-xs-12 span-sm-4 span-md-3" lang="en-us" aria-label="left navigation" xml:lang="en-us" data-v-8589d091><div class="toc-container" id="toc-container" visible="true" data-v-8589d091><div class="toc-focus-container" id="toc-focus-container" data-v-8589d091><button class="toc-focus-btn" aria-label="toggle left menu" aria-controls="toc-container" aria-expanded="true" data-v-8589d091><pf-icon size="md" icon="angle-left" class="toc-focus-btn-icon" data-v-8589d091></pf-icon></button></div><div class="product-container" id="product-container-desktop" data-v-8589d091><h1 class="product-title" data-v-8589d091>Red Hat Enterprise Linux</h1><!----></div><div class="toc-filter" id="toc-filter" data-v-8589d091><span id="text" part="text" data-v-8589d091><span id="search-icon" part="search-icon" data-v-8589d091><pf-icon icon="filter" size="md" data-v-8589d091></pf-icon></span><input id="text-input" aria-label="Search input" part="text-input" placeholder="Filter table of contents" type="text" class value data-v-8589d091><!----></span></div><div id="toc-wrapper" class="toc-wrapper" data-v-8589d091><nav id="toc" class="max-height-85 table-of-contents" aria-label="Table of contents" data-v-8589d091><ol id="toc-list" data-v-8589d091><!--[--><li class="item chapter" data-v-fa0dae77><a class="link active" href id="chapter-index" data-v-fa0dae77>Managing, monitoring, and updating the kernel</a></li><li class="item chapter" data-v-fa0dae77><a class="link" href="#proc_providing-feedback-on-red-hat-documentation_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-proc_providing-feedback-on-red-hat-documentation_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>Providing feedback on Red Hat documentation</a></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_the-linux-kernel_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_the-linux-kernel_managing-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>1. The Linux kernel</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_the-linux-kernel_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-assembly_the-linux-kernel_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>The Linux kernel</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#what-the-kernel-is_assembly_the-linux-kernel" id="sub-link-to-managing_monitoring_and_updating_the_kernel-what-the-kernel-is_assembly_the-linux-kernel" data-v-b883c74f>1.1. What the kernel is</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_rpm-packages_assembly_the-linux-kernel" id="sub-link-to-managing_monitoring_and_updating_the_kernel-con_rpm-packages_assembly_the-linux-kernel" data-v-b883c74f>1.2. RPM packages</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#the-linux-kernel-rpm-package-overview_assembly_the-linux-kernel" id="sub-link-to-managing_monitoring_and_updating_the_kernel-the-linux-kernel-rpm-package-overview_assembly_the-linux-kernel" data-v-b883c74f>1.3. The Linux kernel RPM package overview</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#displaying-contents-of-the-kernel-package_assembly_the-linux-kernel" id="sub-link-to-managing_monitoring_and_updating_the_kernel-displaying-contents-of-the-kernel-package_assembly_the-linux-kernel" data-v-b883c74f>1.4. Displaying contents of a kernel package</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-the-kernel_assembly_the-linux-kernel" id="sub-link-to-managing_monitoring_and_updating_the_kernel-installing-the-kernel_assembly_the-linux-kernel" data-v-b883c74f>1.5. Installing specific kernel versions</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#updating-the-kernel_assembly_the-linux-kernel" id="sub-link-to-managing_monitoring_and_updating_the_kernel-updating-the-kernel_assembly_the-linux-kernel" data-v-b883c74f>1.6. Updating the kernel</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#setting-a-kernel-as-default_assembly_the-linux-kernel" id="sub-link-to-managing_monitoring_and_updating_the_kernel-setting-a-kernel-as-default_assembly_the-linux-kernel" data-v-b883c74f>1.7. Setting a kernel as default</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><a class="link" href="#what-is-kernel-64k_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-what-is-kernel-64k_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>2. The 64k page size kernel</a></li><li class="item chapter" data-v-fa0dae77><details id="toc--managing-kernel-modules_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="managing-kernel-modules_managing-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>3. Managing kernel modules</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#managing-kernel-modules_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-managing-kernel-modules_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>Managing kernel modules</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#introduction-to-kernel-modules_managing-kernel-modules" id="sub-link-to-managing_monitoring_and_updating_the_kernel-introduction-to-kernel-modules_managing-kernel-modules" data-v-b883c74f>3.1. Introduction to kernel modules</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#kernel-module-dependencies_managing-kernel-modules" id="sub-link-to-managing_monitoring_and_updating_the_kernel-kernel-module-dependencies_managing-kernel-modules" data-v-b883c74f>3.2. Kernel module dependencies</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#listing-installed-kernel-modules_managing-kernel-modules" id="sub-link-to-managing_monitoring_and_updating_the_kernel-listing-installed-kernel-modules_managing-kernel-modules" data-v-b883c74f>3.3. Listing installed kernel modules</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#listing-currently-loaded-kernel-modules_managing-kernel-modules" id="sub-link-to-managing_monitoring_and_updating_the_kernel-listing-currently-loaded-kernel-modules_managing-kernel-modules" data-v-b883c74f>3.4. Listing currently loaded kernel modules</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#displaying-information-about-kernel-modules_managing-kernel-modules" id="sub-link-to-managing_monitoring_and_updating_the_kernel-displaying-information-about-kernel-modules_managing-kernel-modules" data-v-b883c74f>3.5. Displaying information about kernel modules</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#loading-kernel-modules-at-system-runtime_managing-kernel-modules" id="sub-link-to-managing_monitoring_and_updating_the_kernel-loading-kernel-modules-at-system-runtime_managing-kernel-modules" data-v-b883c74f>3.6. Loading kernel modules at system runtime</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#unloading-kernel-modules-at-system-runtime_managing-kernel-modules" id="sub-link-to-managing_monitoring_and_updating_the_kernel-unloading-kernel-modules-at-system-runtime_managing-kernel-modules" data-v-b883c74f>3.7. Unloading kernel modules at system runtime</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_unloading-kernel-modules-at-early-stages-of-the-boot-process_managing-kernel-modules" id="sub-link-to-managing_monitoring_and_updating_the_kernel-proc_unloading-kernel-modules-at-early-stages-of-the-boot-process_managing-kernel-modules" data-v-b883c74f>3.8. Unloading kernel modules at early stages of the boot process</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#loading-kernel-modules-automatically-at-system-boot-time_managing-kernel-modules" id="sub-link-to-managing_monitoring_and_updating_the_kernel-loading-kernel-modules-automatically-at-system-boot-time_managing-kernel-modules" data-v-b883c74f>3.9. Loading kernel modules automatically at system boot time</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#preventing-kernel-modules-from-being-automatically-loaded-at-system-boot-time_managing-kernel-modules" id="sub-link-to-managing_monitoring_and_updating_the_kernel-preventing-kernel-modules-from-being-automatically-loaded-at-system-boot-time_managing-kernel-modules" data-v-b883c74f>3.10. Preventing kernel modules from being automatically loaded at system boot time</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_compiling-custom-kernel-modules_managing-kernel-modules" id="sub-link-to-managing_monitoring_and_updating_the_kernel-proc_compiling-custom-kernel-modules_managing-kernel-modules" data-v-b883c74f>3.11. Compiling custom kernel modules</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-kernel-command-line-parameters_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-kernel-command-line-parameters_managing-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>4. Configuring kernel command-line parameters</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-kernel-command-line-parameters_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-configuring-kernel-command-line-parameters_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>Configuring kernel command-line parameters</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#understanding-kernel-command-line-parameters_configuring-kernel-command-line-parameters" id="sub-link-to-managing_monitoring_and_updating_the_kernel-understanding-kernel-command-line-parameters_configuring-kernel-command-line-parameters" data-v-b883c74f>4.1. What are kernel command-line parameters</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#what-boot-entries-are_configuring-kernel-command-line-parameters" id="sub-link-to-managing_monitoring_and_updating_the_kernel-what-boot-entries-are_configuring-kernel-command-line-parameters" data-v-b883c74f>4.2. Understanding boot entries</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#changing-kernel-command-line-parameters-for-all-boot-entries_configuring-kernel-command-line-parameters" id="sub-link-to-managing_monitoring_and_updating_the_kernel-changing-kernel-command-line-parameters-for-all-boot-entries_configuring-kernel-command-line-parameters" data-v-b883c74f>4.3. Changing kernel command-line parameters for all boot entries</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#changing-kernel-command-line-parameters-for-a-single-boot-entry_configuring-kernel-command-line-parameters" id="sub-link-to-managing_monitoring_and_updating_the_kernel-changing-kernel-command-line-parameters-for-a-single-boot-entry_configuring-kernel-command-line-parameters" data-v-b883c74f>4.4. Changing kernel command-line parameters for a single boot entry</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#changing-kernel-command-line-parameters-temporarily-at-boot-time_configuring-kernel-command-line-parameters" id="sub-link-to-managing_monitoring_and_updating_the_kernel-changing-kernel-command-line-parameters-temporarily-at-boot-time_configuring-kernel-command-line-parameters" data-v-b883c74f>4.5. Changing kernel command-line parameters temporarily at boot time</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-grub-2-settings-to-enable-serial-console-connection_configuring-kernel-command-line-parameters" id="sub-link-to-managing_monitoring_and_updating_the_kernel-proc_configuring-grub-2-settings-to-enable-serial-console-connection_configuring-kernel-command-line-parameters" data-v-b883c74f>4.6. Configuring GRUB settings to enable serial console connection</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#changing-boot-entries-with-the-grub-configuration-file_configuring-kernel-command-line-parameters" id="sub-link-to-managing_monitoring_and_updating_the_kernel-changing-boot-entries-with-the-grub-configuration-file_configuring-kernel-command-line-parameters" data-v-b883c74f>4.7. Changing boot entries with the GRUB configuration file</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-kernel-parameters-at-runtime_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-kernel-parameters-at-runtime_managing-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>5. Configuring kernel parameters at runtime</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-kernel-parameters-at-runtime_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-configuring-kernel-parameters-at-runtime_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>Configuring kernel parameters at runtime</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#what-are-kernel-parameters_configuring-kernel-parameters-at-runtime" id="sub-link-to-managing_monitoring_and_updating_the_kernel-what-are-kernel-parameters_configuring-kernel-parameters-at-runtime" data-v-b883c74f>5.1. What are kernel parameters</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-kernel-parameters-temporarily-with-sysctl_configuring-kernel-parameters-at-runtime" id="sub-link-to-managing_monitoring_and_updating_the_kernel-configuring-kernel-parameters-temporarily-with-sysctl_configuring-kernel-parameters-at-runtime" data-v-b883c74f>5.2. Configuring kernel parameters temporarily with sysctl</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-kernel-parameters-permanently-with-sysctl_configuring-kernel-parameters-at-runtime" id="sub-link-to-managing_monitoring_and_updating_the_kernel-configuring-kernel-parameters-permanently-with-sysctl_configuring-kernel-parameters-at-runtime" data-v-b883c74f>5.3. Configuring kernel parameters permanently with sysctl</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#using-configuration-files-in-etc-sysctl-d-to-adjust-kernel-parameters_configuring-kernel-parameters-at-runtime" id="sub-link-to-managing_monitoring_and_updating_the_kernel-using-configuration-files-in-etc-sysctl-d-to-adjust-kernel-parameters_configuring-kernel-parameters-at-runtime" data-v-b883c74f>5.4. Using configuration files in /etc/sysctl.d/ to adjust kernel parameters</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-kernel-parameters-temporarily-through-proc-sys_configuring-kernel-parameters-at-runtime" id="sub-link-to-managing_monitoring_and_updating_the_kernel-configuring-kernel-parameters-temporarily-through-proc-sys_configuring-kernel-parameters-at-runtime" data-v-b883c74f>5.5. Configuring kernel parameters temporarily through /proc/sys/</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-kernel-parameters-permanently-by-using-the-kernel-settings-rhel-system-role_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-kernel-parameters-permanently-by-using-the-kernel-settings-rhel-system-role_managing-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>6. Configuring kernel parameters permanently by using RHEL system roles</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-kernel-parameters-permanently-by-using-the-kernel-settings-rhel-system-role_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-configuring-kernel-parameters-permanently-by-using-the-kernel-settings-rhel-system-role_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>Configuring kernel parameters permanently by using RHEL system roles</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#applying-selected-kernel-parameters-using-the-kernel-settings-role_configuring-kernel-parameters-permanently-by-using-the-kernel-settings-rhel-system-role" id="sub-link-to-managing_monitoring_and_updating_the_kernel-applying-selected-kernel-parameters-using-the-kernel-settings-role_configuring-kernel-parameters-permanently-by-using-the-kernel-settings-rhel-system-role" data-v-b883c74f>6.1. Applying selected kernel parameters by using the kernel_settings RHEL system role</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-the-grub-2-boot-loader-by-using-rhel-system-roles_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-the-grub-2-boot-loader-by-using-rhel-system-roles_managing-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>7. Configuring the GRUB 2 boot loader by using RHEL system roles</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-the-grub-2-boot-loader-by-using-rhel-system-roles_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-configuring-the-grub-2-boot-loader-by-using-rhel-system-roles_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>Configuring the GRUB 2 boot loader by using RHEL system roles</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#updating-the-existing-boot-loader-entries-by-using-the-bootloader-rhel-system-role_configuring-the-grub-2-boot-loader-by-using-rhel-system-roles" id="sub-link-to-managing_monitoring_and_updating_the_kernel-updating-the-existing-boot-loader-entries-by-using-the-bootloader-rhel-system-role_configuring-the-grub-2-boot-loader-by-using-rhel-system-roles" data-v-b883c74f>7.1. Updating the existing boot loader entries by using the bootloader RHEL system role</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#securing-the-boot-menu-with-password-by-using-the-bootloader-rhel-system-role_configuring-the-grub-2-boot-loader-by-using-rhel-system-roles" id="sub-link-to-managing_monitoring_and_updating_the_kernel-securing-the-boot-menu-with-password-by-using-the-bootloader-rhel-system-role_configuring-the-grub-2-boot-loader-by-using-rhel-system-roles" data-v-b883c74f>7.2. Securing the boot menu with password by using the bootloader RHEL system role</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#setting-a-timeout-for-the-boot-loader-menu-by-using-the-bootloader-rhel-system-role_configuring-the-grub-2-boot-loader-by-using-rhel-system-roles" id="sub-link-to-managing_monitoring_and_updating_the_kernel-setting-a-timeout-for-the-boot-loader-menu-by-using-the-bootloader-rhel-system-role_configuring-the-grub-2-boot-loader-by-using-rhel-system-roles" data-v-b883c74f>7.3. Setting a timeout for the boot loader menu by using the bootloader RHEL system role</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#collecting-the-boot-loader-configuration-information-by-using-the-bootloader-rhel-system-role_configuring-the-grub-2-boot-loader-by-using-rhel-system-roles" id="sub-link-to-managing_monitoring_and_updating_the_kernel-collecting-the-boot-loader-configuration-information-by-using-the-bootloader-rhel-system-role_configuring-the-grub-2-boot-loader-by-using-rhel-system-roles" data-v-b883c74f>7.4. Collecting the boot loader configuration information by using the bootloader RHEL system role</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--applying-patches-with-kernel-live-patching_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="applying-patches-with-kernel-live-patching_managing-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>8. Applying patches with kernel live patching</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#applying-patches-with-kernel-live-patching_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-applying-patches-with-kernel-live-patching_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>Applying patches with kernel live patching</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#limitations-of-kpatch_applying-patches-with-kernel-live-patching" id="sub-link-to-managing_monitoring_and_updating_the_kernel-limitations-of-kpatch_applying-patches-with-kernel-live-patching" data-v-b883c74f>8.1. Limitations of kpatch</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#support-for-third-party-live-patching_applying-patches-with-kernel-live-patching" id="sub-link-to-managing_monitoring_and_updating_the_kernel-support-for-third-party-live-patching_applying-patches-with-kernel-live-patching" data-v-b883c74f>8.2. Support for third-party live patching</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#access-to-kernel-live-patches_applying-patches-with-kernel-live-patching" id="sub-link-to-managing_monitoring_and_updating_the_kernel-access-to-kernel-live-patches_applying-patches-with-kernel-live-patching" data-v-b883c74f>8.3. Access to kernel live patches</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#the-process-of-live-patching-kernels_applying-patches-with-kernel-live-patching" id="sub-link-to-managing_monitoring_and_updating_the_kernel-the-process-of-live-patching-kernels_applying-patches-with-kernel-live-patching" data-v-b883c74f>8.4. The process of live patching kernels</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#subscribing-the-currently-installed-kernels-to-the-live-patching-stream_applying-patches-with-kernel-live-patching" id="sub-link-to-managing_monitoring_and_updating_the_kernel-subscribing-the-currently-installed-kernels-to-the-live-patching-stream_applying-patches-with-kernel-live-patching" data-v-b883c74f>8.5. Subscribing the currently installed kernels to the live patching stream</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#automatically-subscribing-any-future-kernel-to-the-live-patching-stream_applying-patches-with-kernel-live-patching" id="sub-link-to-managing_monitoring_and_updating_the_kernel-automatically-subscribing-any-future-kernel-to-the-live-patching-stream_applying-patches-with-kernel-live-patching" data-v-b883c74f>8.6. Automatically subscribing any future kernel to the live patching stream</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_disabling-automatic-subscription-to-the-live-patching-stream_applying-patches-with-kernel-live-patching" id="sub-link-to-managing_monitoring_and_updating_the_kernel-proc_disabling-automatic-subscription-to-the-live-patching-stream_applying-patches-with-kernel-live-patching" data-v-b883c74f>8.7. Disabling automatic subscription to the live patching stream</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#updating-kernel-patch-modules_applying-patches-with-kernel-live-patching" id="sub-link-to-managing_monitoring_and_updating_the_kernel-updating-kernel-patch-modules_applying-patches-with-kernel-live-patching" data-v-b883c74f>8.8. Updating kernel patch modules</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#removing-the-live-patching-package_applying-patches-with-kernel-live-patching" id="sub-link-to-managing_monitoring_and_updating_the_kernel-removing-the-live-patching-package_applying-patches-with-kernel-live-patching" data-v-b883c74f>8.9. Removing the live patching package</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#uninstalling-the-kernel-patch-module_applying-patches-with-kernel-live-patching" id="sub-link-to-managing_monitoring_and_updating_the_kernel-uninstalling-the-kernel-patch-module_applying-patches-with-kernel-live-patching" data-v-b883c74f>8.10. Uninstalling the kernel patch module</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#disabling-kpatch-service_applying-patches-with-kernel-live-patching" id="sub-link-to-managing_monitoring_and_updating_the_kernel-disabling-kpatch-service_applying-patches-with-kernel-live-patching" data-v-b883c74f>8.11. Disabling kpatch.service</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--keeping-kernel-panic-parameters-disabled-in-virtualized-environments_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="keeping-kernel-panic-parameters-disabled-in-virtualized-environments_managing-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>9. Keeping kernel panic parameters disabled in virtualized environments</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#keeping-kernel-panic-parameters-disabled-in-virtualized-environments_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-keeping-kernel-panic-parameters-disabled-in-virtualized-environments_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>Keeping kernel panic parameters disabled in virtualized environments</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#what-is-a-soft-lockup_keeping-kernel-panic-parameters-disabled-in-virtualized-environments" id="sub-link-to-managing_monitoring_and_updating_the_kernel-what-is-a-soft-lockup_keeping-kernel-panic-parameters-disabled-in-virtualized-environments" data-v-b883c74f>9.1. What is a soft lockup</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#parameters-controlling-kernel-panic_keeping-kernel-panic-parameters-disabled-in-virtualized-environments" id="sub-link-to-managing_monitoring_and_updating_the_kernel-parameters-controlling-kernel-panic_keeping-kernel-panic-parameters-disabled-in-virtualized-environments" data-v-b883c74f>9.2. Parameters controlling kernel panic</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#spurious-soft-lockups-in-virtualized-environments_keeping-kernel-panic-parameters-disabled-in-virtualized-environments" id="sub-link-to-managing_monitoring_and_updating_the_kernel-spurious-soft-lockups-in-virtualized-environments_keeping-kernel-panic-parameters-disabled-in-virtualized-environments" data-v-b883c74f>9.3. Spurious soft lockups in virtualized environments</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--adjusting-kernel-parameters-for-database-servers_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="adjusting-kernel-parameters-for-database-servers_managing-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>10. Adjusting kernel parameters for database servers</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#adjusting-kernel-parameters-for-database-servers_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-adjusting-kernel-parameters-for-database-servers_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>Adjusting kernel parameters for database servers</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#introduction-to-databases_adjusting-kernel-parameters-for-database-servers" id="sub-link-to-managing_monitoring_and_updating_the_kernel-introduction-to-databases_adjusting-kernel-parameters-for-database-servers" data-v-b883c74f>10.1. Introduction to database servers</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#parameters-affecting-performance-of-database-applications_adjusting-kernel-parameters-for-database-servers" id="sub-link-to-managing_monitoring_and_updating_the_kernel-parameters-affecting-performance-of-database-applications_adjusting-kernel-parameters-for-database-servers" data-v-b883c74f>10.2. Parameters affecting performance of database applications</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--getting-started-with-kernel-logging_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="getting-started-with-kernel-logging_managing-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>11. Getting started with kernel logging</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#getting-started-with-kernel-logging_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-getting-started-with-kernel-logging_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>Getting started with kernel logging</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#what-is-the-kernel-ring-buffer_getting-started-with-kernel-logging" id="sub-link-to-managing_monitoring_and_updating_the_kernel-what-is-the-kernel-ring-buffer_getting-started-with-kernel-logging" data-v-b883c74f>11.1. What is the kernel ring buffer</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#role-of-printk-on-log-levels-and-kernel-logging_getting-started-with-kernel-logging" id="sub-link-to-managing_monitoring_and_updating_the_kernel-role-of-printk-on-log-levels-and-kernel-logging_getting-started-with-kernel-logging" data-v-b883c74f>11.2. Role of printk on log-levels and kernel logging</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_reinstalling-grub_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_reinstalling-grub_managing-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>12. Reinstalling GRUB</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_reinstalling-grub_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-assembly_reinstalling-grub_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>Reinstalling GRUB</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_reinstalling-grub-on-bios-based-machines_assembly_reinstalling-grub" id="sub-link-to-managing_monitoring_and_updating_the_kernel-proc_reinstalling-grub-on-bios-based-machines_assembly_reinstalling-grub" data-v-b883c74f>12.1. Reinstalling GRUB on BIOS-based machines</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_reinstalling-grub-on-uefi-based-machines_assembly_reinstalling-grub" id="sub-link-to-managing_monitoring_and_updating_the_kernel-proc_reinstalling-grub-on-uefi-based-machines_assembly_reinstalling-grub" data-v-b883c74f>12.2. Reinstalling GRUB on UEFI-based machines</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#reinstalling-grub-on-ibm-power-machines_assembly_reinstalling-grub" id="sub-link-to-managing_monitoring_and_updating_the_kernel-reinstalling-grub-on-ibm-power-machines_assembly_reinstalling-grub" data-v-b883c74f>12.3. Reinstalling GRUB on IBM Power machines</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_resetting-grub_assembly_reinstalling-grub" id="sub-link-to-managing_monitoring_and_updating_the_kernel-proc_resetting-grub_assembly_reinstalling-grub" data-v-b883c74f>12.4. Resetting GRUB</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--installing-kdump_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="installing-kdump_managing-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>13. Installing kdump</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#installing-kdump_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-installing-kdump_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>Installing kdump</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#what-is-kdumpinstalling-kdump" id="sub-link-to-managing_monitoring_and_updating_the_kernel-what-is-kdumpinstalling-kdump" data-v-b883c74f>13.1. What is kdump</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-kdump-anacondainstalling-kdump" id="sub-link-to-managing_monitoring_and_updating_the_kernel-installing-kdump-anacondainstalling-kdump" data-v-b883c74f>13.2. Installing kdump using Anaconda</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-kdump-on-the-command-line_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-kdump-on-the-command-line_managing-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>14. Configuring kdump on the command line</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-kdump-on-the-command-line_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-configuring-kdump-on-the-command-line_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>Configuring kdump on the command line</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#estimating-the-kdump-size_configuring-kdump-on-the-command-line" id="sub-link-to-managing_monitoring_and_updating_the_kernel-estimating-the-kdump-size_configuring-kdump-on-the-command-line" data-v-b883c74f>14.1. Estimating the kdump size</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-kdump-memory-usage-on-rhel-9_configuring-kdump-on-the-command-line" id="sub-link-to-managing_monitoring_and_updating_the_kernel-configuring-kdump-memory-usage-on-rhel-9_configuring-kdump-on-the-command-line" data-v-b883c74f>14.2. Configuring kdump memory usage on RHEL 9</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-the-kdump-target_configuring-kdump-on-the-command-line" id="sub-link-to-managing_monitoring_and_updating_the_kernel-configuring-the-kdump-target_configuring-kdump-on-the-command-line" data-v-b883c74f>14.3. Configuring the kdump target</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-the-kdump-core-collectorconfiguring-kdump-on-the-command-line" id="sub-link-to-managing_monitoring_and_updating_the_kernel-configuring-the-kdump-core-collectorconfiguring-kdump-on-the-command-line" data-v-b883c74f>14.4. Configuring the kdump core collector</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-the-kdump-default-failure-responses_configuring-kdump-on-the-command-line" id="sub-link-to-managing_monitoring_and_updating_the_kernel-configuring-the-kdump-default-failure-responses_configuring-kdump-on-the-command-line" data-v-b883c74f>14.5. Configuring the kdump default failure responses</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuration-file-for-kdump_configuring-kdump-on-the-command-line" id="sub-link-to-managing_monitoring_and_updating_the_kernel-configuration-file-for-kdump_configuring-kdump-on-the-command-line" data-v-b883c74f>14.6. Configuration file for kdump</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#testing-the-kdump-configuration_configuring-kdump-on-the-command-line" id="sub-link-to-managing_monitoring_and_updating_the_kernel-testing-the-kdump-configuration_configuring-kdump-on-the-command-line" data-v-b883c74f>14.7. Testing the kdump configuration</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#files-produced-by-kdump-after-system-crash_configuring-kdump-on-the-command-line" id="sub-link-to-managing_monitoring_and_updating_the_kernel-files-produced-by-kdump-after-system-crash_configuring-kdump-on-the-command-line" data-v-b883c74f>14.8. Files produced by kdump after system crash</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#enabling-and-disabling-the-kdump-service_configuring-kdump-on-the-command-line" id="sub-link-to-managing_monitoring_and_updating_the_kernel-enabling-and-disabling-the-kdump-service_configuring-kdump-on-the-command-line" data-v-b883c74f>14.9. Enabling and disabling the kdump service</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#preventing-kernel-drivers-from-loading-for-kdump_configuring-kdump-on-the-command-line" id="sub-link-to-managing_monitoring_and_updating_the_kernel-preventing-kernel-drivers-from-loading-for-kdump_configuring-kdump-on-the-command-line" data-v-b883c74f>14.10. Preventing kernel drivers from loading for kdump</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#running-kdump-on-systems-with-encrypted-disk_configuring-kdump-on-the-command-line" id="sub-link-to-managing_monitoring_and_updating_the_kernel-running-kdump-on-systems-with-encrypted-disk_configuring-kdump-on-the-command-line" data-v-b883c74f>14.11. Running kdump on systems with encrypted disk</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--configuring-kdump-in-the-web-console_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="configuring-kdump-in-the-web-console_managing-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>15. Configuring kdump in the web console</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#configuring-kdump-in-the-web-console_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-configuring-kdump-in-the-web-console_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>Configuring kdump in the web console</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#configuring-kdump-memory-usage-and-target-location-in-web-console_configuring-kdump-in-the-web-console" id="sub-link-to-managing_monitoring_and_updating_the_kernel-configuring-kdump-memory-usage-and-target-location-in-web-console_configuring-kdump-in-the-web-console" data-v-b883c74f>15.1. Configuring kdump memory usage and target location in web console</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--enabling-kdumpmanaging-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="enabling-kdumpmanaging-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>16. Enabling kdump</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#enabling-kdumpmanaging-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-enabling-kdumpmanaging-monitoring-and-updating-the-kernel" data-v-fa0dae77>Enabling kdump</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#enabling-kdump-for-all-installed-kernels_enabling-kdump" id="sub-link-to-managing_monitoring_and_updating_the_kernel-enabling-kdump-for-all-installed-kernels_enabling-kdump" data-v-b883c74f>16.1. Enabling kdump for all installed kernels</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#enabling-kdump-for-a-specific-installed-kernel_enabling-kdump" id="sub-link-to-managing_monitoring_and_updating_the_kernel-enabling-kdump-for-a-specific-installed-kernel_enabling-kdump" data-v-b883c74f>16.2. Enabling kdump for a specific installed kernel</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#disabling-the-kdump-service_enabling-kdump" id="sub-link-to-managing_monitoring_and_updating_the_kernel-disabling-the-kdump-service_enabling-kdump" data-v-b883c74f>16.3. Disabling the kdump service</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>17. Supported kdump configurations and targets</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>Supported kdump configurations and targets</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#memory-requirements-for-kdump_supported-kdump-configurations-and-targets" id="sub-link-to-managing_monitoring_and_updating_the_kernel-memory-requirements-for-kdump_supported-kdump-configurations-and-targets" data-v-b883c74f>17.1. Memory requirements for kdump</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#minimum-threshold-for-automatic-memory-reservation_supported-kdump-configurations-and-targets" id="sub-link-to-managing_monitoring_and_updating_the_kernel-minimum-threshold-for-automatic-memory-reservation_supported-kdump-configurations-and-targets" data-v-b883c74f>17.2. Minimum threshold for automatic memory reservation</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#supported-kdump-targets_supported-kdump-configurations-and-targets" id="sub-link-to-managing_monitoring_and_updating_the_kernel-supported-kdump-targets_supported-kdump-configurations-and-targets" data-v-b883c74f>17.3. Supported kdump targets</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#supported-kdump-filtering-levels_supported-kdump-configurations-and-targets" id="sub-link-to-managing_monitoring_and_updating_the_kernel-supported-kdump-filtering-levels_supported-kdump-configurations-and-targets" data-v-b883c74f>17.4. Supported kdump filtering levels</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#supported-default-failure-responses_supported-kdump-configurations-and-targets" id="sub-link-to-managing_monitoring_and_updating_the_kernel-supported-default-failure-responses_supported-kdump-configurations-and-targets" data-v-b883c74f>17.5. Supported default failure responses</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#using-final_action-parameter_supported-kdump-configurations-and-targets" id="sub-link-to-managing_monitoring_and_updating_the_kernel-using-final_action-parameter_supported-kdump-configurations-and-targets" data-v-b883c74f>17.6. Using final_action parameter</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_using-failure_action-parameter_supported-kdump-configurations-and-targets" id="sub-link-to-managing_monitoring_and_updating_the_kernel-proc_using-failure_action-parameter_supported-kdump-configurations-and-targets" data-v-b883c74f>17.7. Using failure_action parameter</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--firmware-assisted-dump-mechanisms_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="firmware-assisted-dump-mechanisms_managing-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>18. Firmware assisted dump mechanisms</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#firmware-assisted-dump-mechanisms_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-firmware-assisted-dump-mechanisms_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>Firmware assisted dump mechanisms</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#firmware-assisted-dump-on-ibm-powerpc-hardware_firmware-assisted-dump-mechanisms" id="sub-link-to-managing_monitoring_and_updating_the_kernel-firmware-assisted-dump-on-ibm-powerpc-hardware_firmware-assisted-dump-mechanisms" data-v-b883c74f>18.1. Firmware assisted dump on IBM PowerPC hardware</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#enabling-firmware-assisted-dump-mechanism_firmware-assisted-dump-mechanisms" id="sub-link-to-managing_monitoring_and_updating_the_kernel-enabling-firmware-assisted-dump-mechanism_firmware-assisted-dump-mechanisms" data-v-b883c74f>18.2. Enabling firmware assisted dump mechanism</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#firmware-assisted-dump-mechanisms-on-ibm-z-hardware_firmware-assisted-dump-mechanisms" id="sub-link-to-managing_monitoring_and_updating_the_kernel-firmware-assisted-dump-mechanisms-on-ibm-z-hardware_firmware-assisted-dump-mechanisms" data-v-b883c74f>18.3. Firmware assisted dump mechanisms on IBM Z hardware</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#using-sadump-on-fujitsu-primequest-systems_firmware-assisted-dump-mechanisms" id="sub-link-to-managing_monitoring_and_updating_the_kernel-using-sadump-on-fujitsu-primequest-systems_firmware-assisted-dump-mechanisms" data-v-b883c74f>18.4. Using sadump on Fujitsu PRIMEQUEST systems</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--analyzing-a-core-dump_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="analyzing-a-core-dump_managing-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>19. Analyzing a core dump</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#analyzing-a-core-dump_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-analyzing-a-core-dump_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>Analyzing a core dump</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-the-crash-utility_analyzing-a-core-dump" id="sub-link-to-managing_monitoring_and_updating_the_kernel-installing-the-crash-utility_analyzing-a-core-dump" data-v-b883c74f>19.1. Installing the crash utility</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#running-and-exiting-the-crash-utility_analyzing-a-core-dump" id="sub-link-to-managing_monitoring_and_updating_the_kernel-running-and-exiting-the-crash-utility_analyzing-a-core-dump" data-v-b883c74f>19.2. Running and exiting the crash utility</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#displaying-various-indicators-in-the-crash-utility_analyzing-a-core-dump" id="sub-link-to-managing_monitoring_and_updating_the_kernel-displaying-various-indicators-in-the-crash-utility_analyzing-a-core-dump" data-v-b883c74f>19.3. Displaying various indicators in the crash utility</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#using-kernel-oops-analyzer_analyzing-a-core-dump" id="sub-link-to-managing_monitoring_and_updating_the_kernel-using-kernel-oops-analyzer_analyzing-a-core-dump" data-v-b883c74f>19.4. Using Kernel Oops Analyzer</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#the-kdump-helper-tool_analyzing-a-core-dump" id="sub-link-to-managing_monitoring_and_updating_the_kernel-the-kdump-helper-tool_analyzing-a-core-dump" data-v-b883c74f>19.5. The Kdump Helper tool</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--using-early-kdump-to-capture-boot-time-crashes_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="using-early-kdump-to-capture-boot-time-crashes_managing-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>20. Using early kdump to capture boot time crashes</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#using-early-kdump-to-capture-boot-time-crashes_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-using-early-kdump-to-capture-boot-time-crashes_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>Using early kdump to capture boot time crashes</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#enabling-early-kdump_using-early-kdump-to-capture-boot-time-crashes" id="sub-link-to-managing_monitoring_and_updating_the_kernel-enabling-early-kdump_using-early-kdump-to-capture-boot-time-crashes" data-v-b883c74f>20.1. Enabling early kdump</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--signing-a-kernel-and-modules-for-secure-boot_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="signing-a-kernel-and-modules-for-secure-boot_managing-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>21. Signing a kernel and modules for Secure Boot</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#signing-a-kernel-and-modules-for-secure-boot_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-signing-a-kernel-and-modules-for-secure-boot_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>Signing a kernel and modules for Secure Boot</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#prerequisites" id="sub-link-to-managing_monitoring_and_updating_the_kernel-prerequisites" data-v-b883c74f>21.1. Prerequisites</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_what-is-uefi-secure-boot_signing-a-kernel-and-modules-for-secure-boot" id="sub-link-to-managing_monitoring_and_updating_the_kernel-con_what-is-uefi-secure-boot_signing-a-kernel-and-modules-for-secure-boot" data-v-b883c74f>21.2. What is UEFI Secure Boot</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_uefi-secure-boot-support_signing-a-kernel-and-modules-for-secure-boot" id="sub-link-to-managing_monitoring_and_updating_the_kernel-con_uefi-secure-boot-support_signing-a-kernel-and-modules-for-secure-boot" data-v-b883c74f>21.3. UEFI Secure Boot support</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ref_requirements-for-authenticating-kernel-modules-with-x-509-keys_signing-a-kernel-and-modules-for-secure-boot" id="sub-link-to-managing_monitoring_and_updating_the_kernel-ref_requirements-for-authenticating-kernel-modules-with-x-509-keys_signing-a-kernel-and-modules-for-secure-boot" data-v-b883c74f>21.4. Requirements for authenticating kernel modules with X.509 keys</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#sources-for-public-keys_signing-a-kernel-and-modules-for-secure-boot" id="sub-link-to-managing_monitoring_and_updating_the_kernel-sources-for-public-keys_signing-a-kernel-and-modules-for-secure-boot" data-v-b883c74f>21.5. Sources for public keys</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#generating-a-public-and-private-key-pair_signing-a-kernel-and-modules-for-secure-boot" id="sub-link-to-managing_monitoring_and_updating_the_kernel-generating-a-public-and-private-key-pair_signing-a-kernel-and-modules-for-secure-boot" data-v-b883c74f>21.6. Generating a public and private key pair</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#example-output-of-system-keyrings_signing-a-kernel-and-modules-for-secure-boot" id="sub-link-to-managing_monitoring_and_updating_the_kernel-example-output-of-system-keyrings_signing-a-kernel-and-modules-for-secure-boot" data-v-b883c74f>21.7. Example output of system keyrings</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#enrolling-public-key-on-target-system-by-adding-the-public-key-to-the-mok-list_signing-a-kernel-and-modules-for-secure-boot" id="sub-link-to-managing_monitoring_and_updating_the_kernel-enrolling-public-key-on-target-system-by-adding-the-public-key-to-the-mok-list_signing-a-kernel-and-modules-for-secure-boot" data-v-b883c74f>21.8. Enrolling public key on target system by adding the public key to the MOK list</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#signing-a-kernel-with-the-private-key_signing-a-kernel-and-modules-for-secure-boot" id="sub-link-to-managing_monitoring_and_updating_the_kernel-signing-a-kernel-with-the-private-key_signing-a-kernel-and-modules-for-secure-boot" data-v-b883c74f>21.9. Signing a kernel with the private key</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#signing-a-grub-build-with-the-private-key_signing-a-kernel-and-modules-for-secure-boot" id="sub-link-to-managing_monitoring_and_updating_the_kernel-signing-a-grub-build-with-the-private-key_signing-a-kernel-and-modules-for-secure-boot" data-v-b883c74f>21.10. Signing a GRUB build with the private key</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#signing-kernel-modules-with-the-private-key_signing-a-kernel-and-modules-for-secure-boot" id="sub-link-to-managing_monitoring_and_updating_the_kernel-signing-kernel-modules-with-the-private-key_signing-a-kernel-and-modules-for-secure-boot" data-v-b883c74f>21.11. Signing kernel modules with the private key</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#loading-signed-kernel-modules_signing-a-kernel-and-modules-for-secure-boot" id="sub-link-to-managing_monitoring_and_updating_the_kernel-loading-signed-kernel-modules_signing-a-kernel-and-modules-for-secure-boot" data-v-b883c74f>21.12. Loading signed kernel modules</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--updating-the-secure-boot-revocation-list_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="updating-the-secure-boot-revocation-list_managing-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>22. Updating the Secure Boot Revocation List</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#updating-the-secure-boot-revocation-list_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-updating-the-secure-boot-revocation-list_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>Updating the Secure Boot Revocation List</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_what-is-uefi-secure-boot_updating-the-secure-boot-revocation-list" id="sub-link-to-managing_monitoring_and_updating_the_kernel-con_what-is-uefi-secure-boot_updating-the-secure-boot-revocation-list" data-v-b883c74f>22.1. What is UEFI Secure Boot</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#the-secure-boot-revocation-list_updating-the-secure-boot-revocation-list" id="sub-link-to-managing_monitoring_and_updating_the_kernel-the-secure-boot-revocation-list_updating-the-secure-boot-revocation-list" data-v-b883c74f>22.2. The Secure Boot Revocation List</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#applying-an-online-revocation-list-update_updating-the-secure-boot-revocation-list" id="sub-link-to-managing_monitoring_and_updating_the_kernel-applying-an-online-revocation-list-update_updating-the-secure-boot-revocation-list" data-v-b883c74f>22.3. Applying an online Revocation List update</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#applying-an-offline-revocation-list-update_updating-the-secure-boot-revocation-list" id="sub-link-to-managing_monitoring_and_updating_the_kernel-applying-an-offline-revocation-list-update_updating-the-secure-boot-revocation-list" data-v-b883c74f>22.4. Applying an offline Revocation List update</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--enhancing-security-with-the-kernel-integrity-subsystem_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="enhancing-security-with-the-kernel-integrity-subsystem_managing-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>23. Enhancing security with the kernel integrity subsystem</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#enhancing-security-with-the-kernel-integrity-subsystem_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-enhancing-security-with-the-kernel-integrity-subsystem_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>Enhancing security with the kernel integrity subsystem</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#the-kernel-integrity-subsystem_enhancing-security-with-the-kernel-integrity-subsystem" id="sub-link-to-managing_monitoring_and_updating_the_kernel-the-kernel-integrity-subsystem_enhancing-security-with-the-kernel-integrity-subsystem" data-v-b883c74f>23.1. The kernel integrity subsystem</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#trusted-and-encrypted-keys_enhancing-security-with-the-kernel-integrity-subsystem" id="sub-link-to-managing_monitoring_and_updating_the_kernel-trusted-and-encrypted-keys_enhancing-security-with-the-kernel-integrity-subsystem" data-v-b883c74f>23.2. Trusted and encrypted keys</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#working-with-trusted-keys_enhancing-security-with-the-kernel-integrity-subsystem" id="sub-link-to-managing_monitoring_and_updating_the_kernel-working-with-trusted-keys_enhancing-security-with-the-kernel-integrity-subsystem" data-v-b883c74f>23.3. Working with trusted keys</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#working-with-encrypted-keys_enhancing-security-with-the-kernel-integrity-subsystem" id="sub-link-to-managing_monitoring_and_updating_the_kernel-working-with-encrypted-keys_enhancing-security-with-the-kernel-integrity-subsystem" data-v-b883c74f>23.4. Working with encrypted keys</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#enabling-integrity-measurement-architecture-and-extended-verification-module_enhancing-security-with-the-kernel-integrity-subsystem" id="sub-link-to-managing_monitoring_and_updating_the_kernel-enabling-integrity-measurement-architecture-and-extended-verification-module_enhancing-security-with-the-kernel-integrity-subsystem" data-v-b883c74f>23.5. Enabling IMA and EVM</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#collecting-file-hashes-with-integrity-measurement-architecture_enhancing-security-with-the-kernel-integrity-subsystem" id="sub-link-to-managing_monitoring_and_updating_the_kernel-collecting-file-hashes-with-integrity-measurement-architecture_enhancing-security-with-the-kernel-integrity-subsystem" data-v-b883c74f>23.6. Collecting file hashes with integrity measurement architecture</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#adding-ima-signatures-to-package-files_enhancing-security-with-the-kernel-integrity-subsystem" id="sub-link-to-managing_monitoring_and_updating_the_kernel-adding-ima-signatures-to-package-files_enhancing-security-with-the-kernel-integrity-subsystem" data-v-b883c74f>23.7. Adding IMA signatures to package files</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#enabling-kernel-runtime-integrity-monitoring_enhancing-security-with-the-kernel-integrity-subsystem" id="sub-link-to-managing_monitoring_and_updating_the_kernel-enabling-kernel-runtime-integrity-monitoring_enhancing-security-with-the-kernel-integrity-subsystem" data-v-b883c74f>23.8. Enabling kernel runtime integrity monitoring</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-custom-ima-keys-using-openssl_enhancing-security-with-the-kernel-integrity-subsystem" id="sub-link-to-managing_monitoring_and_updating_the_kernel-creating-custom-ima-keys-using-openssl_enhancing-security-with-the-kernel-integrity-subsystem" data-v-b883c74f>23.9. Creating custom IMA keys using OpenSSL</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#deploying-a-custom-signed-ima-policy-for-uefi-systems_enhancing-security-with-the-kernel-integrity-subsystem" id="sub-link-to-managing_monitoring_and_updating_the_kernel-deploying-a-custom-signed-ima-policy-for-uefi-systems_enhancing-security-with-the-kernel-integrity-subsystem" data-v-b883c74f>23.10. Deploying a custom signed IMA policy for UEFI systems</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_using-systemd-to-manage-resources-used-by-applications_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_using-systemd-to-manage-resources-used-by-applications_managing-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>24. Using systemd to manage resources used by applications</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_using-systemd-to-manage-resources-used-by-applications_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-assembly_using-systemd-to-manage-resources-used-by-applications_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>Using systemd to manage resources used by applications</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_role-of-systemd-in-resource-management_assembly_using-systemd-to-manage-resources-used-by-applications" id="sub-link-to-managing_monitoring_and_updating_the_kernel-con_role-of-systemd-in-resource-management_assembly_using-systemd-to-manage-resources-used-by-applications" data-v-b883c74f>24.1. Role of systemd in resource management</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#distribution-models-of-system-sources_assembly_using-systemd-to-manage-resources-used-by-applications" id="sub-link-to-managing_monitoring_and_updating_the_kernel-distribution-models-of-system-sources_assembly_using-systemd-to-manage-resources-used-by-applications" data-v-b883c74f>24.2. Distribution models of system sources</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_allocating-system-resources-using-systemd_assembly_using-systemd-to-manage-resources-used-by-applications" id="sub-link-to-managing_monitoring_and_updating_the_kernel-proc_allocating-system-resources-using-systemd_assembly_using-systemd-to-manage-resources-used-by-applications" data-v-b883c74f>24.3. Allocating system resources using systemd</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#con_overview-of-systemd-hierarchy-for-cgroups_assembly_using-systemd-to-manage-resources-used-by-applications" id="sub-link-to-managing_monitoring_and_updating_the_kernel-con_overview-of-systemd-hierarchy-for-cgroups_assembly_using-systemd-to-manage-resources-used-by-applications" data-v-b883c74f>24.4. Overview of systemd hierarchy for cgroups</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#listing-systemd_units_assembly_using-systemd-to-manage-resources-used-by-applications" id="sub-link-to-managing_monitoring_and_updating_the_kernel-listing-systemd_units_assembly_using-systemd-to-manage-resources-used-by-applications" data-v-b883c74f>24.5. Listing systemd units</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#viewing-systemd-control-group-hierarchy_assembly_using-systemd-to-manage-resources-used-by-applications" id="sub-link-to-managing_monitoring_and_updating_the_kernel-viewing-systemd-control-group-hierarchy_assembly_using-systemd-to-manage-resources-used-by-applications" data-v-b883c74f>24.6. Viewing systemd cgroups hierarchy</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_viewing-cgroups-of-processes_assembly_using-systemd-to-manage-resources-used-by-applications" id="sub-link-to-managing_monitoring_and_updating_the_kernel-proc_viewing-cgroups-of-processes_assembly_using-systemd-to-manage-resources-used-by-applications" data-v-b883c74f>24.7. Viewing cgroups of processes</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#monitoring-resource-consumption_assembly_using-systemd-to-manage-resources-used-by-applications" id="sub-link-to-managing_monitoring_and_updating_the_kernel-monitoring-resource-consumption_assembly_using-systemd-to-manage-resources-used-by-applications" data-v-b883c74f>24.8. Monitoring resource consumption</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_using-systemd-unit-files-to-set-limits-for-applications_assembly_using-systemd-to-manage-resources-used-by-applications" id="sub-link-to-managing_monitoring_and_updating_the_kernel-proc_using-systemd-unit-files-to-set-limits-for-applications_assembly_using-systemd-to-manage-resources-used-by-applications" data-v-b883c74f>24.9. Using systemd unit files to set limits for applications</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_using-systemctl-command-to-set-limits-to-applications_assembly_using-systemd-to-manage-resources-used-by-applications" id="sub-link-to-managing_monitoring_and_updating_the_kernel-proc_using-systemctl-command-to-set-limits-to-applications_assembly_using-systemd-to-manage-resources-used-by-applications" data-v-b883c74f>24.10. Using systemctl command to set limits to applications</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_setting-global-default-cpu-affinity-through-manager-configuration_assembly_using-systemd-to-manage-resources-used-by-applications" id="sub-link-to-managing_monitoring_and_updating_the_kernel-proc_setting-global-default-cpu-affinity-through-manager-configuration_assembly_using-systemd-to-manage-resources-used-by-applications" data-v-b883c74f>24.11. Setting global default CPU affinity through manager configuration</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_configuring-numa-using-systemd_assembly_using-systemd-to-manage-resources-used-by-applications" id="sub-link-to-managing_monitoring_and_updating_the_kernel-proc_configuring-numa-using-systemd_assembly_using-systemd-to-manage-resources-used-by-applications" data-v-b883c74f>24.12. Configuring NUMA policies using systemd</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#ref_numa-policy-configuration-options-with-systemd_assembly_using-systemd-to-manage-resources-used-by-applications" id="sub-link-to-managing_monitoring_and_updating_the_kernel-ref_numa-policy-configuration-options-with-systemd_assembly_using-systemd-to-manage-resources-used-by-applications" data-v-b883c74f>24.13. NUMA policy configuration options for systemd</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#creating-transient-control-groups_assembly_using-systemd-to-manage-resources-used-by-applications" id="sub-link-to-managing_monitoring_and_updating_the_kernel-creating-transient-control-groups_assembly_using-systemd-to-manage-resources-used-by-applications" data-v-b883c74f>24.14. Creating transient cgroups using systemd-run command</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#removing-transient-control-groups_assembly_using-systemd-to-manage-resources-used-by-applications" id="sub-link-to-managing_monitoring_and_updating_the_kernel-removing-transient-control-groups_assembly_using-systemd-to-manage-resources-used-by-applications" data-v-b883c74f>24.15. Removing transient control groups</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--setting-limits-for-applications_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="setting-limits-for-applications_managing-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>25. Understanding control groups</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#setting-limits-for-applications_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-setting-limits-for-applications_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>Understanding control groups</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#understanding-control-groups_setting-limits-for-applications" id="sub-link-to-managing_monitoring_and_updating_the_kernel-understanding-control-groups_setting-limits-for-applications" data-v-b883c74f>25.1. Introducing control groups</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#what-kernel-resource-controllers-are_setting-limits-for-applications" id="sub-link-to-managing_monitoring_and_updating_the_kernel-what-kernel-resource-controllers-are_setting-limits-for-applications" data-v-b883c74f>25.2. Introducing kernel resource controllers</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#what-namespaces-are_setting-limits-for-applications" id="sub-link-to-managing_monitoring_and_updating_the_kernel-what-namespaces-are_setting-limits-for-applications" data-v-b883c74f>25.3. Introducing namespaces</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--assembly_using-cgroupfs-to-manually-manage-cgroups_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="assembly_using-cgroupfs-to-manually-manage-cgroups_managing-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>26. Using cgroupfs to manually manage cgroups</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#assembly_using-cgroupfs-to-manually-manage-cgroups_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-assembly_using-cgroupfs-to-manually-manage-cgroups_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>Using cgroupfs to manually manage cgroups</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_creating-cgroups-and-enabling-controllers-in-cgroups-v2-file-system_assembly_using-cgroupfs-to-manually-manage-cgroups" id="sub-link-to-managing_monitoring_and_updating_the_kernel-proc_creating-cgroups-and-enabling-controllers-in-cgroups-v2-file-system_assembly_using-cgroupfs-to-manually-manage-cgroups" data-v-b883c74f>26.1. Creating cgroups and enabling controllers in cgroups-v2 file system</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_controlling-distribution-of-cpu-time-for-applications-by-adjusting-cpu-weight_assembly_using-cgroupfs-to-manually-manage-cgroups" id="sub-link-to-managing_monitoring_and_updating_the_kernel-proc_controlling-distribution-of-cpu-time-for-applications-by-adjusting-cpu-weight_assembly_using-cgroupfs-to-manually-manage-cgroups" data-v-b883c74f>26.2. Controlling distribution of CPU time for applications by adjusting CPU weight</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#proc_mounting-cgroups-v1_assembly_using-cgroupfs-to-manually-manage-cgroups" id="sub-link-to-managing_monitoring_and_updating_the_kernel-proc_mounting-cgroups-v1_assembly_using-cgroupfs-to-manually-manage-cgroups" data-v-b883c74f>26.3. Mounting cgroups-v1</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#setting-cpu-limits-to-applications-using-cgroups-v1_assembly_using-cgroupfs-to-manually-manage-cgroups" id="sub-link-to-managing_monitoring_and_updating_the_kernel-setting-cpu-limits-to-applications-using-cgroups-v1_assembly_using-cgroupfs-to-manually-manage-cgroups" data-v-b883c74f>26.4. Setting CPU limits to applications using cgroups-v1</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><details id="toc--analyzing-system-performance-with-bpf-compiler_collection_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77><summary class="heading chapter-title" id="analyzing-system-performance-with-bpf-compiler_collection_managing-monitoring-and-updating-the-kernel--summary" data-v-fa0dae77>27. Analyzing system performance with BPF Compiler Collection</summary><ol class="sub-nav" data-v-fa0dae77><li class="item sub-chapter" data-v-fa0dae77><a class="link sub-chapter-title chapter-landing-page" href="#analyzing-system-performance-with-bpf-compiler_collection_managing-monitoring-and-updating-the-kernel" id="chapter-landing--managing_monitoring_and_updating_the_kernel-analyzing-system-performance-with-bpf-compiler_collection_managing-monitoring-and-updating-the-kernel" data-v-fa0dae77>Analyzing system performance with BPF Compiler Collection</a></li><!--[--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#installing-the-bcc-tools-package_analyzing-system-performance-with-bpf-compiler_collection" id="sub-link-to-managing_monitoring_and_updating_the_kernel-installing-the-bcc-tools-package_analyzing-system-performance-with-bpf-compiler_collection" data-v-b883c74f>27.1. Installing the bcc-tools package</a></li><!--]--><!--[--><li class="item sub-chapter" data-v-b883c74f><a class="link sub-chapter-title" href="#using-selected-bcc-tools-for-performance-analyses_analyzing-system-performance-with-bpf-compiler_collection" id="sub-link-to-managing_monitoring_and_updating_the_kernel-using-selected-bcc-tools-for-performance-analyses_analyzing-system-performance-with-bpf-compiler_collection" data-v-b883c74f>27.2. Using selected bcc-tools for performance analyses</a></li><!--]--><!--]--></ol></details></li><li class="item chapter" data-v-fa0dae77><a class="link" href="#idm139825285704640" id="chapter-landing--managing_monitoring_and_updating_the_kernel-idm139825285704640" data-v-fa0dae77>Legal Notice</a></li><!--]--></ol></nav><!----></div></div></aside><article class="content span-xs-12 span-sm-6 span-md-12 span-lg-7" aria-live="polite" data-v-8589d091><!----><div lang="en-us" xml:lang="en-us" class="docs-content-container" data-v-8589d091><!----><!----><h1 data-id="content_chapter" class="chapter-title" data-v-8589d091>Managing, monitoring, and updating the kernel</h1><hr class="line-below-chp" data-v-8589d091><section class="rhdocs" data-v-8589d091><body><div xml:lang="en-US" class="book" id="idm139825298919472"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Enterprise Linux</span> <span class="productnumber">9</span></div><div><h3 class="subtitle">A guide to managing the Linux kernel on Red Hat Enterprise Linux 9</h3></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat</span> <span class="orgdiv">Customer Content Services</span></div></div><div><a href="#idm139825285704640">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				As a system administrator, you can configure the Linux kernel to optimize the operating system. Changes to the Linux kernel can improve system performance, security, and stability, as well as your ability to audit the system and troubleshoot problems.
			</div></div></div></div><hr></div><section class="preface" id="proc_providing-feedback-on-red-hat-documentation_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Providing feedback on Red Hat documentation</h2></div></div></div><p class="_abstract _abstract">
			We appreciate your feedback on our documentation. Let us know how we can improve it.
		</p><div class="orderedlist"><p class="title"><strong>Submitting feedback through Jira (account required)</strong></p><ol class="orderedlist" type="1"><li class="listitem">
					Log in to the <a class="link" href="https://issues.redhat.com/projects/RHELDOCS/issues">Jira</a> website.
				</li><li class="listitem">
					Click <span class="strong strong"><strong>Create</strong></span> in the top navigation bar
				</li><li class="listitem">
					Enter a descriptive title in the <span class="strong strong"><strong>Summary</strong></span> field.
				</li><li class="listitem">
					Enter your suggestion for improvement in the <span class="strong strong"><strong>Description</strong></span> field. Include links to the relevant parts of the documentation.
				</li><li class="listitem">
					Click <span class="strong strong"><strong>Create</strong></span> at the bottom of the dialogue.
				</li></ol></div></section><section class="chapter" id="assembly_the-linux-kernel_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 1. The Linux kernel</h2></div></div></div><p>
			Learn about the Linux kernel and the Linux kernel RPM package provided and maintained by Red Hat (Red Hat kernel). Keep the Red Hat kernel updated, which ensures the operating system has all the latest bug fixes, performance enhancements, and patches, and is compatible with new hardware.
		</p><section class="section" id="what-the-kernel-is_assembly_the-linux-kernel"><div class="titlepage"><div><div><h3 class="title">1.1. What the kernel is</h3></div></div></div><p class="_abstract _abstract">
				The kernel is a core part of a Linux operating system that manages the system resources and provides interface between hardware and software applications.
			</p><p>
				The Red Hat kernel is a custom-built kernel based on the upstream Linux mainline kernel that Red Hat engineers further develop and harden with a focus on stability and compatibility with the latest technologies and hardware.
			</p><p>
				Before Red Hat releases a new kernel version, the kernel needs to pass a set of rigorous quality assurance tests.
			</p><p>
				The Red Hat kernels are packaged in the RPM format so that they are easily upgraded and verified by the <span class="strong strong"><strong><span class="application application">DNF</span></strong></span> package manager.
			</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					Kernels that have not been compiled by Red Hat are <span class="strong strong"><strong>not</strong></span> supported by Red Hat.
				</p></div></rh-alert></section><section class="section" id="con_rpm-packages_assembly_the-linux-kernel"><div class="titlepage"><div><div><h3 class="title">1.2. RPM packages</h3></div></div></div><p class="_abstract _abstract">
				An RPM package consists of an archive of files and metadata used to install and erase these files. Specifically, the RPM package contains the following parts:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">GPG signature</span></dt><dd>
							The GPG signature is used to verify the integrity of the package.
						</dd><dt><span class="term">Header (package metadata)</span></dt><dd>
							The RPM package manager uses this metadata to determine package dependencies, where to install files, and other information.
						</dd><dt><span class="term">Payload</span></dt><dd>
							The payload is a <code class="literal">cpio</code> archive that contains files to install to the system.
						</dd></dl></div><p>
				There are two types of RPM packages. Both types share the file format and tooling, but have different contents and serve different purposes:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Source RPM (SRPM)
					</p><p class="simpara">
						An SRPM contains source code and a <code class="literal">spec</code> file, which describes how to build the source code into a binary RPM. Optionally, the SRPM can contain patches to source code.
					</p></li><li class="listitem"><p class="simpara">
						Binary RPM
					</p><p class="simpara">
						A binary RPM contains the binaries built from the sources and patches.
					</p></li></ul></div></section><section class="section" id="the-linux-kernel-rpm-package-overview_assembly_the-linux-kernel"><div class="titlepage"><div><div><h3 class="title">1.3. The Linux kernel RPM package overview</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">kernel</code> RPM is a meta package that does not contain any files, but rather ensures that the following required sub-packages are properly installed:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal package">kernel-core</code></span></dt><dd>
							Contains the binary image of the Linux kernel (<code class="literal">vmlinuz</code>).
						</dd><dt><span class="term"><code class="literal package">kernel-modules-core</code></span></dt><dd>
							Contains the basic kernel modules to ensure core functionality. This includes the modules essential for the proper functioning of the most commonly used hardware.
						</dd><dt><span class="term"><code class="literal package">kernel-modules</code></span></dt><dd>
							Contains the remaining kernel modules that are not present in <code class="literal">kernel-core</code>.
						</dd></dl></div><p>
				The <code class="literal">kernel-core</code> and <code class="literal">kernel-modules-core</code> sub-packages together can be used in virtualized and cloud environments to provide a RHEL 9 kernel with a quick boot time and a small disk size footprint. <code class="literal">kernel-modules</code> sub-package is usually unnecessary for such deployments.
			</p><p>
				Optional kernel packages are for example:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal package">kernel-modules-extra</code></span></dt><dd>
							Contains kernel modules for rare hardware. Loading of the module is disabled by default.
						</dd><dt><span class="term"><code class="literal package">kernel-debug</code></span></dt><dd>
							Contains a kernel with many debugging options enabled for kernel diagnosis, at the expense of reduced performance.
						</dd><dt><span class="term"><code class="literal package">kernel-tools</code></span></dt><dd>
							Contains tools for manipulating the Linux kernel and supporting documentation.
						</dd><dt><span class="term"><code class="literal package">kernel-devel</code></span></dt><dd>
							Contains the kernel headers and makefiles that are sufficient to build modules against the <code class="literal package">kernel</code> package.
						</dd><dt><span class="term"><code class="literal package">kernel-abi-stablelists</code></span></dt><dd>
							Contains information pertaining to the RHEL kernel ABI, including a list of kernel symbols required by external Linux kernel modules and a <code class="literal package">dnf</code> plug-in to aid enforcement.
						</dd><dt><span class="term"><code class="literal package">kernel-headers</code></span></dt><dd>
							Includes the C header files that specify the interface between the Linux kernel and user-space libraries and programs. The header files define structures and constants required for building most standard programs.
						</dd><dt><span class="term"><code class="literal package">kernel-uki-virt</code></span></dt><dd><p class="simpara">
							Contains the Unified Kernel Image (UKI) of the RHEL kernel.
						</p><p class="simpara">
							UKI combines the Linux kernel, <code class="literal">initramfs</code>, and the kernel command line into a single signed binary which can be booted directly from the UEFI firmware.
						</p><p class="simpara">
							<code class="literal">kernel-uki-virt</code> contains the required kernel modules to run in virtualized and cloud environments and can be used instead of the <code class="literal">kernel-core</code> sub-package.
						</p></dd></dl></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/articles/3739611">What are the kernel-core, kernel-modules, and kernel-modules-extras packages?</a></span></em></span>
					</li></ul></div></section><section class="section" id="displaying-contents-of-the-kernel-package_assembly_the-linux-kernel"><div class="titlepage"><div><div><h3 class="title">1.4. Displaying contents of a kernel package</h3></div></div></div><p class="_abstract _abstract">
				By querying the repository, you can see if a kernel package provides a specific file, such as a module. It is not necessary to download or install the package to display the file list.
			</p><p>
				Use the <code class="literal">dnf</code> utility to query the file list, for example, of the <code class="literal">kernel-core</code>, <code class="literal">kernel-modules-core</code>, or <code class="literal">kernel-modules</code> package. Note that the <code class="literal">kernel</code> package is a meta package that does not contain any files.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						List the available versions of a package:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>dnf repoquery <span class="emphasis"><em>&lt;package_name&gt;</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Display the list of files in a package:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>dnf repoquery -l <span class="emphasis"><em>&lt;package_name&gt;</em></span></strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/packaging_and_distributing_software/index">Packaging and distributing software</a>
					</li></ul></div></section><section class="section" id="installing-the-kernel_assembly_the-linux-kernel"><div class="titlepage"><div><div><h3 class="title">1.5. Installing specific kernel versions</h3></div></div></div><p class="_abstract _abstract">
				Install new kernels using the <span class="strong strong"><strong><span class="application application">dnf</span></strong></span> package manager.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To install a specific kernel version, enter the following command:
					</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install kernel-<span class="emphasis"><em>{version}</em></span></strong></span></pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/labs/rhcb/">Red Hat Code Browser</a></span></em></span>
					</li><li class="listitem">
						<span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/articles/3078">Red Hat Enterprise Linux Release Dates </a></span></em></span>
					</li></ul></div></section><section class="section" id="updating-the-kernel_assembly_the-linux-kernel"><div class="titlepage"><div><div><h3 class="title">1.6. Updating the kernel</h3></div></div></div><p class="_abstract _abstract">
				Update the kernel using the <span class="strong strong"><strong><span class="application application">dnf</span></strong></span> package manager.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To update the kernel, enter the following command:
					</p><pre class="literallayout"># <span class="strong strong"><strong>dnf update kernel</strong></span></pre><p class="simpara">
						This command updates the kernel along with all dependencies to the latest available version.
					</p></li><li class="listitem">
						Reboot your system for the changes to take effect.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_software_with_the_dnf_tool/con_software-management-tools-in-red-hat-enterprise-linux-9_managing-software-with-the-dnf-tool">package manager</a>
					</li><li class="listitem">
						The <code class="literal">dnf(8)</code> manual page
					</li></ul></div></section><section class="section" id="setting-a-kernel-as-default_assembly_the-linux-kernel"><div class="titlepage"><div><div><h3 class="title">1.7. Setting a kernel as default</h3></div></div></div><p class="_abstract _abstract">
				Set a specific kernel as default using the <code class="literal">grubby</code> command-line tool and GRUB.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Setting the kernel as default, using the <code class="literal">grubby</code> tool
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								Enter the following command to set the kernel as default using the <code class="literal">grubby</code> tool:
							</p><pre class="screen"># <span class="strong strong"><strong>grubby --set-default $kernel_path</strong></span></pre><p class="simpara">
								The command uses a machine ID without the <code class="literal">.conf</code> suffix as an argument.
							</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
									The machine ID is located in the <code class="literal">/boot/loader/entries/</code> directory.
								</p></div></rh-alert></li></ul></div></li><li class="listitem"><p class="simpara">
						Setting the kernel as default, using the <code class="literal">id</code> argument
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								List the boot entries using the <code class="literal">id</code> argument and then set an intended kernel as default:
							</p><pre class="screen"># <span class="strong strong"><strong>grubby --info ALL | grep id</strong></span>
# <span class="strong strong"><strong>grubby --set-default /boot/vmlinuz-&lt;version&gt;.&lt;architecture&gt;</strong></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
									To list the boot entries using the <code class="literal">title</code> argument, execute the <code class="literal"># <span class="strong strong"><strong>grubby --info=ALL | grep title</strong></span></code> command.
								</p></div></rh-alert></li></ul></div></li><li class="listitem"><p class="simpara">
						Setting the default kernel for only the next boot
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								Execute the following command to set the default kernel for only the next reboot using the <code class="literal">grub2-reboot</code> command:
							</p><pre class="screen"># <span class="strong strong"><strong>grub2-reboot &lt;index|title|id&gt;</strong></span></pre><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
									Set the default kernel for only the next boot with care. Installing new kernel RPM’s, self-built kernels, and manually adding the entries to the <code class="literal">/boot/loader/entries/</code> directory may change the index values.
								</p></div></rh-alert></li></ul></div></li></ul></div></section></section><section class="chapter" id="what-is-kernel-64k_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 2. The 64k page size kernel</h2></div></div></div><p>
			<code class="literal">kernel-64k</code> is an additional, optional 64-bit ARM architecture kernel package that supports 64k pages. This additional kernel exists alongside the RHEL 9 for ARM kernel which supports 4k pages.
		</p><p>
			Optimal system performance directly relates to different memory configuration requirements. These requirements are addressed by the two variants of kernel, each suitable for different workloads. RHEL 9 on 64-bit ARM hardware thus offers two MMU page sizes:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					4k pages kernel for efficient memory usage in smaller environments,
				</li><li class="listitem">
					<code class="literal">kernel-64k</code> for workloads with large, contiguous memory working sets.
				</li></ul></div><p>
			The 4k pages kernel and <code class="literal">kernel-64k</code> do not differ in the user experience as the user space is the same. You can choose the variant that addresses your situation the best.
		</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">4k pages kernel</span></dt><dd><p class="simpara">
						Use 4k pages for more efficient memory usage in smaller environments, such as those in Edge and lower-cost, small cloud instances. In these environments, increasing the physical system memory amounts is not practical due to space, power, and cost constraints. Also, not all 64-bit ARM architecture processors support a 64k page size.
					</p><p class="simpara">
						The 4k pages kernel supports graphical installation using Anaconda, system or cloud image-based installations, as well as advanced installations using Kickstart.
					</p></dd><dt><span class="term"><code class="literal">kernel-64k</code></span></dt><dd><p class="simpara">
						The 64k page size kernel is a useful option for large datasets on ARM platforms. <code class="literal">kernel-64k</code> is suitable for memory-intensive workloads as it has significant gains in overall system performance, namely in large database, HPC, and high network performance.
					</p><p class="simpara">
						You must choose page size on 64-bit ARM architecture systems at the time of installation. You can install <code class="literal">kernel-64k</code> only by Kickstart by adding the <code class="literal">kernel-64k</code> package to the package list in the <code class="literal">Kickstart</code> file.
					</p></dd></dl></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
					<a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html-single/automatically_installing_rhel/index#installing-kernel-64k-on-arm-using-the-command-line_rhel-installer">Installing Kernel-64k on ARM</a>
				</li></ul></div></section><section class="chapter" id="managing-kernel-modules_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 3. Managing kernel modules</h2></div></div></div><p class="_abstract _abstract">
			Learn about kernel modules, how to display their information, and how to perform basic administrative tasks with kernel modules.
		</p><section class="section" id="introduction-to-kernel-modules_managing-kernel-modules"><div class="titlepage"><div><div><h3 class="title">3.1. Introduction to kernel modules</h3></div></div></div><p class="_abstract _abstract">
				The Red Hat Enterprise Linux kernel can be extended with optional, additional pieces of functionality, called kernel modules, without having to reboot the system. On Red Hat Enterprise Linux 9, kernel modules are extra kernel code which is built into compressed <code class="literal file">&lt;KERNEL_MODULE_NAME&gt;.ko.xz</code> object files.
			</p><p>
				The most common functionality enabled by kernel modules are:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Device driver which adds support for new hardware
					</li><li class="listitem">
						Support for a file system such as GFS2 or NFS
					</li><li class="listitem">
						System calls
					</li></ul></div><p>
				On modern systems, kernel modules are automatically loaded when needed. However, in some cases it is necessary to load or unload modules manually.
			</p><p>
				Like the kernel itself, the modules can take parameters that customize their behavior if needed.
			</p><p>
				Tooling is provided to inspect which modules are currently running, which modules are available to load into the kernel and which parameters a module accepts. The tooling also provides a mechanism to load and unload kernel modules into the running kernel.
			</p></section><section class="section" id="kernel-module-dependencies_managing-kernel-modules"><div class="titlepage"><div><div><h3 class="title">3.2. Kernel module dependencies</h3></div></div></div><p class="_abstract _abstract">
				Certain kernel modules sometimes depend on one or more other kernel modules. The <code class="literal file">/lib/modules/&lt;KERNEL_VERSION&gt;/modules.dep</code> file contains a complete list of kernel module dependencies for the respective kernel version.
			</p><div class="formalpara"><p class="title"><strong><code class="literal">depmod</code></strong></p><p>
					The dependency file is generated by the <code class="literal utility">depmod</code> program, which is a part of the <code class="literal package">kmod</code> package. Many of the utilities provided by <code class="literal package">kmod</code> take module dependencies into account when performing operations so that <span class="strong strong"><strong>manual</strong></span> dependency-tracking is rarely necessary.
				</p></div><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					The code of kernel modules is executed in kernel-space in the unrestricted mode. Because of this, you should be mindful of what modules you are loading.
				</p></div></rh-alert><div class="formalpara"><p class="title"><strong><code class="literal">weak-modules</code></strong></p><p>
					In addition to <code class="literal utility">depmod</code>, Red Hat Enterprise Linux provides the <code class="literal">weak-modules</code> script shipped also with the <code class="literal package">kmod</code> package. <code class="literal">weak-modules</code> determines which modules are kABI-compatible with installed kernels. While checking modules kernel compatibility, <code class="literal">weak-modules</code> processes modules symbol dependencies from higher to lower release of kernel for which they were built. This means that <code class="literal">weak-modules</code> processes each module independently of kernel release they were built against.
				</p></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The <code class="literal">modules.dep(5)</code> manual page
					</li><li class="listitem">
						The <code class="literal">depmod(8)</code> manual page
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/articles/9749">What is the purpose of weak-modules script shipped with Red Hat Enterprise Linux?</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/444773">What is Kernel Application Binary Interface (kABI)?</a> (Red Hat Knowledgebase)
					</li></ul></div></section><section class="section" id="listing-installed-kernel-modules_managing-kernel-modules"><div class="titlepage"><div><div><h3 class="title">3.3. Listing installed kernel modules</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">grubby --info=ALL</code> command displays an indexed list of installed kernels on <code class="literal">!BLS</code> and <code class="literal">BLS</code> installs.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						List the installed kernels using the following command:
					</p><pre class="literallayout"># <span class="strong strong"><strong>grubby --info=ALL | grep title</strong></span></pre><p class="simpara">
						The list of all installed kernels is displayed as follows:
					</p><pre class="literallayout white-space-pre">title="Red Hat Enterprise Linux (5.14.0-1.el9.x86_64) 9.0 (Plow)"
title="Red Hat Enterprise Linux (0-rescue-0d772916a9724907a5d1350bcd39ac92) 9.0 (Plow)"</pre></li></ul></div><p>
				The above example displays the installed kernels list of grubby-8.40-17, from the GRUB menu.
			</p></section><section class="section" id="listing-currently-loaded-kernel-modules_managing-kernel-modules"><div class="titlepage"><div><div><h3 class="title">3.4. Listing currently loaded kernel modules</h3></div></div></div><p class="_abstract _abstract">
				View the currently loaded kernel modules.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal package">kmod</code> package is installed.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To list all currently loaded kernel modules, enter:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>lsmod</strong></span>

Module                  Size  Used by
fuse                  126976  3
uinput                 20480  1
xt_CHECKSUM            16384  1
ipt_MASQUERADE         16384  1
xt_conntrack           16384  1
ipt_REJECT             16384  1
nft_counter            16384  16
nf_nat_tftp            16384  0
nf_conntrack_tftp      16384  1 nf_nat_tftp
tun                    49152  1
bridge                192512  0
stp                    16384  1 bridge
llc                    16384  2 bridge,stp
nf_tables_set          32768  5
nft_fib_inet           16384  1
…​</pre><p class="simpara">
						In the example above:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								The <code class="literal">Module</code> column provides the <span class="strong strong"><strong>names</strong></span> of currently loaded modules.
							</li><li class="listitem">
								The <code class="literal">Size</code> column displays the amount of <span class="strong strong"><strong>memory</strong></span> per module in kilobytes.
							</li><li class="listitem">
								The <code class="literal">Used by</code> column shows the number, and optionally the names of modules that are <span class="strong strong"><strong>dependent</strong></span> on a particular module.
							</li></ol></div></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The <code class="literal">/usr/share/doc/kmod/README</code> file
					</li><li class="listitem">
						The <code class="literal">lsmod(8)</code> manual page
					</li></ul></div></section><section class="section" id="displaying-information-about-kernel-modules_managing-kernel-modules"><div class="titlepage"><div><div><h3 class="title">3.5. Displaying information about kernel modules</h3></div></div></div><p class="_abstract _abstract">
				Use the <code class="literal command">modinfo</code> command to display some detailed information about the specified kernel module.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal package">kmod</code> package is installed.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To display information about any kernel module, enter:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>modinfo &lt;<span class="emphasis"><em>KERNEL_MODULE_NAME</em></span>&gt;</strong></span></pre><p class="simpara">
						For example:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>modinfo virtio_net</strong></span>

filename:       /lib/modules/5.14.0-1.el9.x86_64/kernel/drivers/net/virtio_net.ko.xz
license:        GPL
description:    Virtio network driver
rhelversion:    9.0
srcversion:     8809CDDBE7202A1B00B9F1C
alias:          virtio:d00000001v*
depends:        net_failover
retpoline:      Y
intree:         Y
name:           virtio_net
vermagic:       5.14.0-1.el9.x86_64 SMP mod_unload modversions
…​
parm:           napi_weight:int
parm:           csum:bool
parm:           gso:bool
parm:           napi_tx:bool</pre><p class="simpara">
						You can query information about all available modules, regardless of whether they are loaded or not. The <code class="literal">parm</code> entries show parameters the user is able to set for the module, and what type of value they expect.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							When entering the name of a kernel module, do not append the <code class="literal">.ko.xz</code> extension to the end of the name. Kernel module names do not have extensions; their corresponding files do.
						</p></div></rh-alert></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The <code class="literal">modinfo(8)</code> manual page
					</li></ul></div></section><section class="section" id="loading-kernel-modules-at-system-runtime_managing-kernel-modules"><div class="titlepage"><div><div><h3 class="title">3.6. Loading kernel modules at system runtime</h3></div></div></div><p class="_abstract _abstract">
				The optimal way to expand the functionality of the Linux kernel is by loading kernel modules. Use the <code class="literal command">modprobe</code> command to find and load a kernel module into the currently running kernel.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					The changes described in this procedure <span class="strong strong"><strong>will not persist</strong></span> after rebooting the system. For information about how to load kernel modules to <span class="strong strong"><strong>persist</strong></span> across system reboots, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#loading-kernel-modules-automatically-at-system-boot-time_managing-kernel-modules">Loading kernel modules automatically at system boot time</a>.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Root permissions
					</li><li class="listitem">
						The <code class="literal package">kmod</code> package is installed.
					</li><li class="listitem">
						The respective kernel module is not loaded. To ensure this is the case, list the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#listing-currently-loaded-kernel-modules_managing-kernel-modules">loaded kernel modules</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Select a kernel module you want to load.
					</p><p class="simpara">
						The modules are located in the <code class="literal">/lib/modules/$(uname -r)/kernel/&lt;SUBSYSTEM&gt;/</code> directory.
					</p></li><li class="listitem"><p class="simpara">
						Load the relevant kernel module:
					</p><pre class="literallayout"># <span class="strong strong"><strong>modprobe &lt;<span class="emphasis"><em>MODULE_NAME</em></span>&gt;</strong></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							When entering the name of a kernel module, do not append the <code class="literal">.ko.xz</code> extension to the end of the name. Kernel module names do not have extensions; their corresponding files do.
						</p></div></rh-alert></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Optionally, verify the relevant module was loaded:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>lsmod | grep &lt;<span class="emphasis"><em>MODULE_NAME</em></span>&gt;</strong></span></pre><p class="simpara">
						If the module was loaded correctly, this command displays the relevant kernel module. For example:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>lsmod | grep serio_raw</strong></span>
serio_raw              16384  0</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The <code class="literal">modprobe(8)</code> manual page
					</li></ul></div></section><section class="section" id="unloading-kernel-modules-at-system-runtime_managing-kernel-modules"><div class="titlepage"><div><div><h3 class="title">3.7. Unloading kernel modules at system runtime</h3></div></div></div><p class="_abstract _abstract">
				At times, you find that you need to unload certain kernel modules from the running kernel. Use the <code class="literal command">modprobe</code> command to find and unload a kernel module at system runtime from the currently loaded kernel.
			</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					Do not unload kernel modules when they are used by the running system. Doing so can lead to an unstable or non-operational system.
				</p></div></rh-alert><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					After finishing this procedure, the kernel modules that are defined to be automatically loaded on boot, <span class="strong strong"><strong>will not stay unloaded</strong></span> after rebooting the system. For information about how to counter this outcome, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#preventing-kernel-modules-from-being-automatically-loaded-at-system-boot-time_managing-kernel-modules">Preventing kernel modules from being automatically loaded at system boot time</a>.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Root permissions
					</li><li class="listitem">
						The <code class="literal package">kmod</code> package is installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						List all loaded kernel modules:
					</p><pre class="screen"># <span class="strong strong"><strong>lsmod</strong></span></pre></li><li class="listitem"><p class="simpara">
						Select the kernel module you want to unload.
					</p><p class="simpara">
						If a kernel module has dependencies, unload those prior to unloading the kernel module. For details on identifying modules with dependencies, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#listing-currently-loaded-kernel-modules_managing-kernel-modules">Listing currently loaded kernel modules</a> and <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#kernel-module-dependencies_managing-kernel-modules">Kernel module dependencies</a>.
					</p></li><li class="listitem"><p class="simpara">
						Unload the relevant kernel module:
					</p><pre class="literallayout"># <span class="strong strong"><strong>modprobe -r &lt;<span class="emphasis"><em>MODULE_NAME</em></span>&gt;</strong></span></pre><p class="simpara">
						When entering the name of a kernel module, do not append the <code class="literal">.ko.xz</code> extension to the end of the name. Kernel module names do not have extensions; their corresponding files do.
					</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Optionally, verify the relevant module was unloaded:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>lsmod | grep &lt;<span class="emphasis"><em>MODULE_NAME</em></span>&gt;</strong></span></pre><p class="simpara">
						If the module was unloaded successfully, this command does not display any output.
					</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">modprobe(8)</code> manual page
					</li></ul></div></section><section class="section" id="proc_unloading-kernel-modules-at-early-stages-of-the-boot-process_managing-kernel-modules"><div class="titlepage"><div><div><h3 class="title">3.8. Unloading kernel modules at early stages of the boot process</h3></div></div></div><p class="_abstract _abstract">
				In certain situations, it is necessary to unload a kernel module very early in the booting process. For example, when the kernel module contains a code, which causes the system to become unresponsive, and the user is not able to reach the stage to permanently disable the rogue kernel module. In that case it is possible to temporarily block the loading of the kernel module using a boot loader.
			</p><p>
				You can edit the relevant boot loader entry to unload the desired kernel module before the booting sequence continues.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					The changes described in this procedure <span class="strong strong"><strong>will not persist</strong></span> after the next reboot. For information about how to add a kernel module to a denylist so that it will not be automatically loaded during the boot process, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#preventing-kernel-modules-from-being-automatically-loaded-at-system-boot-time_managing-kernel-modules">Preventing kernel modules from being automatically loaded at system boot time</a>.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have a loadable kernel module that you want to prevent from loading for some reason.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Boot the system into the boot loader.
					</li><li class="listitem">
						Use the cursor keys to highlight the relevant boot loader entry.
					</li><li class="listitem"><p class="simpara">
						Press the <kbd class="keycap">e</kbd> key to edit the entry.
					</p><div class="figure" id="managing-kernel-modules-figu-kernel-bootmenu"><p class="title"><strong>Figure 3.1. Kernel boot menu</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Managing_monitoring_and_updating_the_kernel-en-US/images/a6fe4f013d8c0809c0c5a46999303518/kernel-bootmenu-rhel9.png" alt="kernel bootmenu rhel9"></div></div></div></li><li class="listitem">
						Use the cursor keys to navigate to the line that starts with <span class="strong strong"><strong>linux</strong></span>.
					</li><li class="listitem"><p class="simpara">
						Append <code class="literal">modprobe.blacklist=<span class="emphasis"><em>module_name</em></span></code> to the end of the line.
					</p><div class="figure" id="managing-kernel-modules-figu-kernel-boot-entry"><p class="title"><strong>Figure 3.2. Kernel boot entry</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Managing_monitoring_and_updating_the_kernel-en-US/images/fac2da22603707549b86b01c72c16894/kernel-boot-entry-rhel9.png" alt="kernel boot entry rhel9"></div></div></div><p class="simpara">
						The <code class="literal">serio_raw</code> kernel module illustrates a rogue module to be unloaded early in the boot process.
					</p></li><li class="listitem">
						Press <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">X</kbd> to boot using the modified configuration.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Once the system fully boots, verify that the relevant kernel module is not loaded.
					</p><pre class="literallayout"># <span class="strong strong"><strong>lsmod | grep <span class="emphasis"><em>serio_raw</em></span></strong></span></pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#managing-kernel-modules_managing-monitoring-and-updating-the-kernel">Managing kernel modules</a>
					</li></ul></div></section><section class="section" id="loading-kernel-modules-automatically-at-system-boot-time_managing-kernel-modules"><div class="titlepage"><div><div><h3 class="title">3.9. Loading kernel modules automatically at system boot time</h3></div></div></div><p class="_abstract _abstract">
				Configure a kernel module so that it is loaded automatically during the boot process.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Root permissions
					</li><li class="listitem">
						The <code class="literal package">kmod</code> package is installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Select a kernel module you want to load during the boot process.
					</p><p class="simpara">
						The modules are located in the <code class="literal">/lib/modules/$(uname -r)/kernel/&lt;SUBSYSTEM&gt;/</code> directory.
					</p></li><li class="listitem"><p class="simpara">
						Create a configuration file for the module:
					</p><pre class="literallayout"># <span class="strong strong"><strong>echo &lt;<span class="emphasis"><em>MODULE_NAME</em></span>&gt; &gt; /etc/modules-load.d/&lt;<span class="emphasis"><em>MODULE_NAME</em></span>&gt;.conf</strong></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							When entering the name of a kernel module, do not append the <code class="literal">.ko.xz</code> extension to the end of the name. Kernel module names do not have extensions; their corresponding files do.
						</p></div></rh-alert></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						After reboot, verify the relevant module was loaded:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>lsmod | grep &lt;<span class="emphasis"><em>MODULE_NAME</em></span>&gt;</strong></span></pre><p class="simpara">
						The example command above should succeed and display the relevant kernel module.
					</p></li></ol></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					The changes described in this procedure <span class="strong strong"><strong>will persist</strong></span> after rebooting the system.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">modules-load.d(5)</code> manual page
					</li></ul></div></section><section class="section" id="preventing-kernel-modules-from-being-automatically-loaded-at-system-boot-time_managing-kernel-modules"><div class="titlepage"><div><div><h3 class="title">3.10. Preventing kernel modules from being automatically loaded at system boot time</h3></div></div></div><p>
				You can prevent the system from loading a kernel module automatically during the boot process by listing the module in <code class="literal">modprobe</code> configuration file with a corresponding command.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The commands in this procedure require root privileges. Either use <code class="literal">su -</code> to switch to the root user or preface the commands with <code class="literal">sudo</code>.
					</li><li class="listitem">
						The <code class="literal">kmod</code> package is installed.
					</li><li class="listitem">
						Ensure that your current system configuration does not require a kernel module you plan to deny.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						List modules loaded to the currently running kernel by using the <code class="literal">lsmod</code> command:
					</p><pre class="screen">$ <span class="strong strong"><strong>lsmod</strong></span>
Module                  Size  Used by
tls                   131072  0
uinput                 20480  1
snd_seq_dummy          16384  0
snd_hrtimer            16384  1
…</pre><p class="simpara">
						In the output, identify the module you want to prevent from being loaded.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Alternatively, identify an unloaded kernel module you want to prevent from potentially loading in the <code class="literal">/lib/modules/<span class="emphasis"><em>&lt;KERNEL-VERSION&gt;</em></span>/kernel/<span class="emphasis"><em>&lt;SUBSYSTEM&gt;</em></span>/</code> directory, for example:
							</p><pre class="screen">$ <span class="strong strong"><strong>ls /lib/modules/4.18.0-477.20.1.el8_8.x86_64/kernel/crypto/</strong></span>
ansi_cprng.ko.xz        chacha20poly1305.ko.xz  md4.ko.xz               serpent_generic.ko.xz
anubis.ko.xz            cmac.ko.xz…</pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Create a configuration file serving as a denylist:
					</p><pre class="screen"># <span class="strong strong"><strong>touch /etc/modprobe.d/denylist.conf</strong></span></pre></li><li class="listitem"><p class="simpara">
						In a text editor of your choice, combine the names of modules you want to exclude from automatic loading to the kernel with the <code class="literal">blacklist</code> configuration command, for example:
					</p><pre class="screen"># Prevents <span class="emphasis"><em>&lt;KERNEL-MODULE-1&gt;</em></span> from being loaded
blacklist <span class="emphasis"><em>&lt;MODULE-NAME-1&gt;</em></span>
install <span class="emphasis"><em>&lt;MODULE-NAME-1&gt;</em></span> /bin/false

# Prevents <span class="emphasis"><em>&lt;KERNEL-MODULE-2&gt;</em></span> from being loaded
blacklist <span class="emphasis"><em>&lt;MODULE-NAME-2&gt;</em></span>
install <span class="emphasis"><em>&lt;MODULE-NAME-2&gt;</em></span> /bin/false
…</pre><p class="simpara">
						Because the <code class="literal">blacklist</code> command does not prevent the module from being loaded as a dependency for another kernel module that is not in a denylist, you must also define the <code class="literal">install</code> line. In this case, the system runs <code class="literal">/bin/false</code> instead of installing the module. The lines starting with a hash sign are comments you can use to make the file more readable.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							When entering the name of a kernel module, do not append the <code class="literal">.ko.xz</code> extension to the end of the name. Kernel module names do not have extensions; their corresponding files do.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Create a backup copy of the current initial RAM disk image before rebuilding:
					</p><pre class="screen"># <span class="strong strong"><strong>cp /boot/initramfs-$(uname -r).img /boot/initramfs-$(uname -r).bak.$(date +%m-%d-%H%M%S).img</strong></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Alternatively, create a backup copy of an initial RAM disk image which corresponds to the kernel version for which you want to prevent kernel modules from automatic loading:
							</p><pre class="screen"># <span class="strong strong"><strong>cp /boot/initramfs-<span class="emphasis"><em>&lt;VERSION&gt;</em></span>.img /boot/initramfs-<span class="emphasis"><em>&lt;VERSION&gt;</em></span>.img.bak.$(date +%m-%d-%H%M%S)</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Generate a new initial RAM disk image to apply the changes:
					</p><pre class="screen"># <span class="strong strong"><strong>dracut -f -v</strong></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								If you build an initial RAM disk image for a different kernel version than your system currently uses, specify both target <code class="literal">initramfs</code> and kernel version:
							</p><pre class="screen"># <span class="strong strong"><strong>dracut -f -v /boot/initramfs-<span class="emphasis"><em>&lt;TARGET-VERSION&gt;</em></span>.img <span class="emphasis"><em>&lt;CORRESPONDING-TARGET-KERNEL-VERSION&gt;</em></span></strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Restart the system:
					</p><pre class="screen">$ <span class="strong strong"><strong>reboot</strong></span></pre></li></ol></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					The changes described in this procedure <span class="strong strong"><strong>will take effect and persist</strong></span> after rebooting the system. If you incorrectly list a key kernel module in the denylist, you can switch the system to an unstable or non-operational state.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/41278">How do I prevent a kernel module from loading automatically?</a> (Red Hat Knowledgebase)
					</li><li class="listitem">
						<code class="literal">modprobe.d(5)</code> and <code class="literal">dracut(8)</code> man pages on your system
					</li></ul></div></section><section class="section" id="proc_compiling-custom-kernel-modules_managing-kernel-modules"><div class="titlepage"><div><div><h3 class="title">3.11. Compiling custom kernel modules</h3></div></div></div><p class="_abstract _abstract">
				You can build a sampling kernel module as requested by various configurations at hardware and software level.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You installed the <code class="literal">kernel-devel</code>, <code class="literal">gcc</code>, and <code class="literal">elfutils-libelf-devel</code> packages.
					</p><pre class="screen"># dnf install kernel-devel-$(uname -r) gcc elfutils-libelf-devel</pre></li><li class="listitem">
						You have root permissions.
					</li><li class="listitem">
						You created the <code class="literal">/root/testmodule/</code> directory where you compile the custom kernel module.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create the <code class="literal">/root/testmodule/test.c</code> file with the following content.
					</p><pre class="programlisting language-c">#include &lt;linux/module.h&gt;
#include &lt;linux/kernel.h&gt;

int init_module(void)
    { printk("Hello World\n This is a test\n"); return 0; }

void cleanup_module(void)
    { printk("Good Bye World"); }

MODULE_LICENSE("GPL");</pre><p class="simpara">
						The <code class="literal">test.c</code> file is a source file that provides the main functionality to the kernel module. The file has been created in a dedicated <code class="literal">/root/testmodule/</code> directory for organizational purposes. After the module compilation, the <code class="literal">/root/testmodule/</code> directory will contain multiple files.
					</p><p class="simpara">
						The <code class="literal">test.c</code> file includes from the system libraries:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The <code class="literal">linux/kernel.h</code> header file is necessary for the <code class="literal">printk()</code> function in the example code.
							</li><li class="listitem">
								The <code class="literal">linux/module.h</code> file contains function declarations and macro definitions to be shared between several source files written in C programming language.
							</li></ul></div></li><li class="listitem">
						Follow the <code class="literal">init_module()</code> and <code class="literal">cleanup_module()</code> functions to start and end the kernel logging function <code class="literal">printk()</code>, which prints text.
					</li><li class="listitem"><p class="simpara">
						Create the <code class="literal">/root/testmodule/Makefile</code> file with the following content.
					</p><pre class="programlisting language-makefile">obj-m := test.o</pre><p class="simpara">
						The Makefile contains instructions that the compiler has to produce an object file specifically named <code class="literal">test.o</code>. The <code class="literal">obj-m</code> directive specifies that the resulting <code class="literal">test.ko</code> file is going to be compiled as a loadable kernel module. Alternatively, the <code class="literal">obj-y</code> directive would instruct to build <code class="literal">test.ko</code> as a built-in kernel module.
					</p></li><li class="listitem"><p class="simpara">
						Compile the kernel module.
					</p><pre class="literallayout"># <span class="strong strong"><strong>make -C /lib/modules/$(uname -r)/build M=/root/testmodule modules</strong></span>
make: Entering directory '/usr/src/kernels/5.14.0-70.17.1.el9_0.x86_64'
  CC [M]  /root/testmodule/test.o
  MODPOST /root/testmodule/Module.symvers
  CC [M]  /root/testmodule/test.mod.o
  LD [M]  /root/testmodule/test.ko
  BTF [M] /root/testmodule/test.ko
Skipping BTF generation for /root/testmodule/test.ko due to unavailability of vmlinux
make: Leaving directory '/usr/src/kernels/5.14.0-70.17.1.el9_0.x86_64'</pre><p class="simpara">
						The compiler creates an object file (<code class="literal">test.o</code>) for each source file (<code class="literal">test.c</code>) as an intermediate step before linking them together into the final kernel module (<code class="literal">test.ko</code>).
					</p><p class="simpara">
						After a successful compilation, <code class="literal">/root/testmodule/</code> contains additional files that relate to the compiled custom kernel module. The compiled module itself is represented by the <code class="literal">test.ko</code> file.
					</p></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: check the contents of the <code class="literal">/root/testmodule/</code> directory:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ls -l /root/testmodule/</strong></span>
total 152
-rw-r—​r--. 1 root root    16 Jul 26 08:19 Makefile
-rw-r—​r--. 1 root root    25 Jul 26 08:20 modules.order
-rw-r—​r--. 1 root root     0 Jul 26 08:20 Module.symvers
-rw-r—​r--. 1 root root   224 Jul 26 08:18 test.c
-rw-r—​r--. 1 root root 62176 Jul 26 08:20 test.ko
-rw-r—​r--. 1 root root    25 Jul 26 08:20 test.mod
-rw-r—​r--. 1 root root   849 Jul 26 08:20 test.mod.c
-rw-r—​r--. 1 root root 50936 Jul 26 08:20 test.mod.o
-rw-r—​r--. 1 root root 12912 Jul 26 08:20 test.o</pre></li><li class="listitem"><p class="simpara">
						Copy the kernel module to the <code class="literal">/lib/modules/$(uname -r)/</code> directory:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cp /root/testmodule/test.ko /lib/modules/$(uname -r)/</strong></span></pre></li><li class="listitem"><p class="simpara">
						Update the modular dependency list:
					</p><pre class="literallayout"># <span class="strong strong"><strong>depmod -a</strong></span></pre></li><li class="listitem"><p class="simpara">
						Load the kernel module:
					</p><pre class="literallayout"># <span class="strong strong"><strong>modprobe -v test</strong></span>
insmod /lib/modules/<span class="emphasis"><em>5.14.0-1.el9.x86_64</em></span>/test.ko</pre></li><li class="listitem"><p class="simpara">
						Verify that the kernel module was successfully loaded:
					</p><pre class="literallayout"># <span class="strong strong"><strong>lsmod | grep test</strong></span>
test                   16384  0</pre></li><li class="listitem"><p class="simpara">
						Read the latest messages from the kernel ring buffer:
					</p><pre class="literallayout"># <span class="strong strong"><strong>dmesg</strong></span>
[<span class="emphasis"><em>74422.545004</em></span>] Hello World
                This is a test</pre></li></ol></div></section></section><section class="chapter" id="configuring-kernel-command-line-parameters_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 4. Configuring kernel command-line parameters</h2></div></div></div><p class="_abstract _abstract">
			With kernel command-line parameters, you can change the behavior of certain aspects of the Red Hat Enterprise Linux kernel at boot time. As a system administrator, you have full control over what options get set at boot. Certain kernel behaviors can only be set at boot time, so understanding how to make these changes is a key administration skill.
		</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
				Changing the behavior of the system by modifying kernel command-line parameters may have negative effects on your system. Always test changes prior to deploying them in production. For further guidance, contact Red Hat Support.
			</p></div></rh-alert><section class="section" id="understanding-kernel-command-line-parameters_configuring-kernel-command-line-parameters"><div class="titlepage"><div><div><h3 class="title">4.1. What are kernel command-line parameters</h3></div></div></div><p class="_abstract _abstract">
				With kernel command-line parameters, you can overwrite default values and set specific hardware settings. At boot time, you can configure the following features:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The Red Hat Enterprise Linux kernel
					</li><li class="listitem">
						The initial RAM disk
					</li><li class="listitem">
						The user space features
					</li></ul></div><p>
				By default, the kernel command-line parameters for systems using the GRUB boot loader are defined in the boot entry configuration file for each kernel boot entry.
			</p><p>
				You can manipulate boot loader configuration files by using the <code class="literal">grubby</code> utility. With <code class="literal">grubby</code>, you can perform these actions:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Change the default boot entry.
					</li><li class="listitem">
						Add or remove arguments from a GRUB menu entry.
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">kernel-command-line(7)</code>, <code class="literal">bootparam(7)</code> and <code class="literal">dracut.cmdline(7)</code> manual pages
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/articles/3938081">How to install and boot custom kernels in Red Hat Enterprise Linux 8</a>
					</li><li class="listitem">
						The <code class="literal">grubby(8)</code> manual page
					</li></ul></div></section><section class="section" id="what-boot-entries-are_configuring-kernel-command-line-parameters"><div class="titlepage"><div><div><h3 class="title">4.2. Understanding boot entries</h3></div></div></div><p class="_abstract _abstract">
				A boot entry is a collection of options which are stored in a configuration file and tied to a particular kernel version. In practice, you have at least as many boot entries as your system has installed kernels. The boot entry configuration file is located in the <code class="literal">/boot/loader/entries/</code> directory and can look like this:
			</p><pre class="screen">d8712ab6d4f14683c5625e87b52b6b6e-5.14.0-1.el9.x86_64.conf</pre><p>
				The file name above consists of a machine ID stored in the <code class="literal">/etc/machine-id</code> file, and a kernel version.
			</p><p>
				The boot entry configuration file contains information about the kernel version, the initial ramdisk image, and the kernel command-line parameters. The example contents of a boot entry config can be seen below:
			</p><pre class="literallayout white-space-pre">title Red Hat Enterprise Linux (5.14.0-1.el9.x86_64) 9.0 (Plow)
version 5.14.0-1.el9.x86_64
linux /vmlinuz-5.14.0-1.el9.x86_64
initrd /initramfs-5.14.0-1.el9.x86_64.img
options root=/dev/mapper/rhel_kvm--02--guest08-root ro crashkernel=1G-4G:192M,4G-64G:256M,64G-:512M resume=/dev/mapper/rhel_kvm--02--guest08-swap rd.lvm.lv=rhel_kvm-02-guest08/root rd.lvm.lv=rhel_kvm-02-guest08/swap console=ttyS0,115200
grub_users $grub_users
grub_arg --unrestricted
grub_class kernel</pre></section><section class="section" id="changing-kernel-command-line-parameters-for-all-boot-entries_configuring-kernel-command-line-parameters"><div class="titlepage"><div><div><h3 class="title">4.3. Changing kernel command-line parameters for all boot entries</h3></div></div></div><p class="_abstract _abstract">
				Change kernel command-line parameters for all boot entries on your system.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					When installing a newer version of the kernel in RHEL 9 systems, the <code class="literal">grubby</code> tool passes the kernel command-line arguments from the previous kernel version.
				</p><p>
					However, this does not apply to RHEL version 9.0 in which newly installed kernels lose previous command-line options. You must run the <code class="literal">grub2-mkconfig</code> command on the newly installed kernel to pass the parameters to your new kernel. For more information about this known issue, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/9.0_release_notes/index#known-issue_boot-loader">Boot loader</a>.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Verify that the <code class="literal">grubby</code> utility is installed on your system.
					</li><li class="listitem">
						Verify that the <code class="literal">zipl</code> utility is installed on your IBM Z system.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To add a parameter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>grubby --update-kernel=ALL --args="&lt;<span class="emphasis"><em>NEW_PARAMETER</em></span>&gt;"</strong></span></pre><p class="simpara">
						For systems that use the GRUB boot loader and, on IBM Z that use the zIPL boot loader, the command adds a new kernel parameter to each <code class="literal">/boot/loader/entries/&lt;<span class="emphasis"><em>ENTRY</em></span>&gt;.conf</code> file.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								On IBM Z, update the boot menu:
							</p><pre class="screen"># <span class="strong strong"><strong>zipl</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						To remove a parameter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>grubby --update-kernel=ALL --remove-args="&lt;<span class="emphasis"><em>PARAMETER_TO_REMOVE</em></span>&gt;"</strong></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								On IBM Z, update the boot menu:
							</p><pre class="screen"># <span class="strong strong"><strong>zipl</strong></span></pre></li></ul></div></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#understanding-kernel-command-line-parameters_configuring-kernel-command-line-parameters" title="4.1. What are kernel command-line parameters">What are kernel command-line parameters</a>
					</li><li class="listitem">
						<code class="literal">grubby(8)</code> and <code class="literal">zipl(8)</code> manual pages
					</li></ul></div></section><section class="section" id="changing-kernel-command-line-parameters-for-a-single-boot-entry_configuring-kernel-command-line-parameters"><div class="titlepage"><div><div><h3 class="title">4.4. Changing kernel command-line parameters for a single boot entry</h3></div></div></div><p class="_abstract _abstract">
				Make changes in kernel command-line parameters for a single boot entry on your system.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Verify that the <code class="literal">grubby</code> and <code class="literal">zipl</code> utilities are installed on your system.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To add a parameter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>grubby --update-kernel=/boot/vmlinuz-$(uname -r) --args="&lt;<span class="emphasis"><em>NEW_PARAMETER</em></span>&gt;"</strong></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								On IBM Z, update the boot menu:
							</p><pre class="screen"># <span class="strong strong"><strong>zipl</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						To remove a parameter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>grubby --update-kernel=/boot/vmlinuz-$(uname -r) --remove-args="&lt;<span class="emphasis"><em>PARAMETER_TO_REMOVE</em></span>&gt;"</strong></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								On IBM Z, update the boot menu:
							</p><pre class="screen"># <span class="strong strong"><strong>zipl</strong></span></pre></li></ul></div></li></ul></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<code class="literal">grubby</code> modifies and stores the kernel command-line parameters of an individual kernel boot entry in the <code class="literal">/boot/loader/entries/&lt;<span class="emphasis"><em>ENTRY</em></span>&gt;.conf</code> file.
						</li></ul></div></div></rh-alert></section><section class="section" id="changing-kernel-command-line-parameters-temporarily-at-boot-time_configuring-kernel-command-line-parameters"><div class="titlepage"><div><div><h3 class="title">4.5. Changing kernel command-line parameters temporarily at boot time</h3></div></div></div><p>
				Make temporary changes to a Kernel Menu Entry by changing the kernel parameters only during a single boot process.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					This procedure applies only for a single boot and does not persistently make the changes.
				</p></div></rh-alert><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Boot into the GRUB 2 boot menu.
					</li><li class="listitem">
						Select the kernel you want to start.
					</li><li class="listitem">
						Press the <kbd class="keycap">e</kbd> key to edit the kernel parameters.
					</li><li class="listitem">
						Find the kernel command line by moving the cursor down. The kernel command line starts with <code class="literal">linux</code> on 64-Bit IBM Power Series and x86-64 BIOS-based systems, or <code class="literal">linuxefi</code> on UEFI systems.
					</li><li class="listitem"><p class="simpara">
						Move the cursor to the end of the line.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							Press <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">a</kbd> to jump to the start of the line and <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">e</kbd> to jump to the end of the line. On some systems, <kbd class="keycap">Home</kbd> and <kbd class="keycap">End</kbd> keys might also work.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Edit the kernel parameters as required. For example, to run the system in emergency mode, add the <code class="literal">emergency</code> parameter at the end of the <code class="literal">linux</code> line:
					</p><pre class="screen">linux   ($root)/vmlinuz-5.14.0-63.el9.x86_64 root=/dev/mapper/rhel-root ro crashkernel=1G-4G:192M,4G-64G:256M,64G-:512M resume=/dev/mapper/rhel-swap rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap rhgb quiet <span class="strong strong"><strong>emergency</strong></span></pre><p class="simpara">
						To enable the system messages, remove the <code class="literal">rhgb</code> and <code class="literal">quiet</code> parameters.
					</p></li><li class="listitem">
						Press <kbd class="keycap">Ctrl</kbd>+<kbd class="keycap">x</kbd> to boot with the selected kernel and the modified command line parameters.
					</li></ol></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					If you press the <kbd class="keycap">Esc</kbd> key to leave command line editing, it will drop all the user made changes.
				</p></div></rh-alert></section><section class="section" id="proc_configuring-grub-2-settings-to-enable-serial-console-connection_configuring-kernel-command-line-parameters"><div class="titlepage"><div><div><h3 class="title">4.6. Configuring GRUB settings to enable serial console connection</h3></div></div></div><p>
				The serial console is beneficial when you need to connect to a headless server or an embedded system and the network is down. Or when you need to avoid security rules and obtain login access on a different system.
			</p><p>
				You need to configure some default GRUB settings to use the serial console connection.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have root permissions.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Add the following two lines to the <code class="literal">/etc/default/grub</code> file:
					</p><pre class="literallayout white-space-pre">GRUB_TERMINAL="serial"
GRUB_SERIAL_COMMAND="serial --speed=9600 --unit=0 --word=8 --parity=no --stop=1"</pre><p class="simpara">
						The first line disables the graphical terminal. The <code class="literal">GRUB_TERMINAL</code> key overrides values of <code class="literal">GRUB_TERMINAL_INPUT</code> and <code class="literal">GRUB_TERMINAL_OUTPUT</code> keys.
					</p><p class="simpara">
						The second line adjusts the baud rate (<code class="literal">--speed</code>), parity and other values to fit your environment and hardware. Note that a much higher baud rate, for example 115200, is preferable for tasks such as following log files.
					</p></li><li class="listitem"><p class="simpara">
						Update the GRUB configuration file.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								On BIOS-based machines:
							</p><pre class="literallayout"># <span class="strong strong"><strong>grub2-mkconfig -o /boot/grub2/grub.cfg</strong></span></pre></li><li class="listitem"><p class="simpara">
								On UEFI-based machines:
							</p><pre class="literallayout"># <span class="strong strong"><strong>grub2-mkconfig -o /boot/grub2/grub.cfg</strong></span></pre></li></ul></div></li><li class="listitem">
						Reboot the system for the changes to take effect.
					</li></ol></div></section><section class="section" id="changing-boot-entries-with-the-grub-configuration-file_configuring-kernel-command-line-parameters"><div class="titlepage"><div><div><h3 class="title">4.7. Changing boot entries with the GRUB configuration file</h3></div></div></div><p>
				The <code class="literal">/etc/default/grub</code> GRUB configuration file contains the <code class="literal">GRUB_CMDLINE_LINUX</code> key, which lists kernel command-line arguments to add to boot entries for the Linux kernel. For example:
			</p><pre class="screen">GRUB_CMDLINE_LINUX="crashkernel=1G-4G:192M,4G-64G:256M,64G-:512M resume=/dev/mapper/rhel-swap rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap"</pre><p>
				To change the boot entries, overwrite Boot Loader Specification (BLS) snippets with the contents of the <code class="literal">GRUB_CMDLINE_LINUX</code> values.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						A fresh RHEL 9 installation.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Add or remove a kernel parameter for individual kernels in a post installation script with <code class="literal">grubby</code>:
					</p><pre class="screen"># <span class="strong strong"><strong>grubby --update-kernel &lt;<span class="emphasis"><em>PATH_TO_KERNEL</em></span>&gt; --args "&lt;<span class="emphasis"><em>NEW_ARGUMENTS</em></span>&gt;"</strong></span></pre><p class="simpara">
						For example, add the <code class="literal">noapic</code> parameter to the chosen kernel:
					</p><pre class="screen"># <span class="strong strong"><strong>grubby --update-kernel /boot/vmlinuz-5.14.0-362.8.1.el9_3.x86_64 --args "noapic"</strong></span></pre><p class="simpara">
						The parameter is propagated into the BLS snippets, but not into the <code class="literal">/etc/default/grub</code> file.
					</p></li><li class="listitem"><p class="simpara">
						Overwrite BLS snippets with the contents of the <code class="literal">GRUB_CMDLINE_LINUX</code> values present in the <code class="literal">/etc/default/grub</code> file:
					</p><pre class="screen"># <span class="strong strong"><strong>grub2-mkconfig -o /boot/grub2/grub.cfg --update-bls-cmdline</strong></span>
Generating grub configuration file …​
Adding boot menu entry for UEFI Firmware Settings …​
done</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							Other changes, such as changes made to <code class="literal">GRUB_TIMEOUT</code> key (also included in the <code class="literal">/etc/default/grub</code> GRUB configuration file), do get propagated to the new <code class="literal">grub.cfg</code> by default.
						</p></div></rh-alert></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Reboot your operating system.
					</li><li class="listitem"><p class="simpara">
						Verify that the parameters are included in the <code class="literal">/proc/cmdline</code> file.
					</p><p class="simpara">
						For example, <code class="literal">/proc/cmdline</code> contains the <code class="literal">noapic</code> kernel parameter:
					</p><pre class="screen">BOOT_IMAGE=(hd0,gpt2)/vmlinuz-4.18.0-425.3.1.el8.x86_64 root=/dev/mapper/RHELCSB-Root ro vconsole.keymap=us crashkernel=auto rd.lvm.lv=RHELCSB/Root rd.luks.uuid=luks-d8a28c4c-96aa-4319-be26-96896272151d rhgb quiet <span class="strong strong"><strong>noapic</strong></span> rd.luks.key=d8a28c4c-96aa-4319-be26-96896272151d=/keyfile:UUID=c47d962e-4be8-41d6-8216-8cf7a0d3b911 ipv6.disable=1</pre></li></ol></div></section></section><section class="chapter" id="configuring-kernel-parameters-at-runtime_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 5. Configuring kernel parameters at runtime</h2></div></div></div><p class="_abstract _abstract">
			As a system administrator, you can modify many facets of the Red Hat Enterprise Linux kernel’s behavior at runtime. Configure kernel parameters at runtime by using the <code class="literal command">sysctl</code> command and by modifying the configuration files in the <code class="literal">/etc/sysctl.d/</code> and <code class="literal">/proc/sys/</code> directories.
		</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
				Configuring kernel parameters on a production system requires careful planning. Unplanned changes can render the kernel unstable, requiring a system reboot. Verify that you are using valid options before changing any kernel values.
			</p></div></rh-alert><p>
			For more information about tuning kernel on IBM DB2, see <a class="link" href="https://access.redhat.com/solutions/3530941">Tuning Red Hat Enterprise Linux for IBM DB2</a>.
		</p><section class="section" id="what-are-kernel-parameters_configuring-kernel-parameters-at-runtime"><div class="titlepage"><div><div><h3 class="title">5.1. What are kernel parameters</h3></div></div></div><p class="_abstract _abstract">
				Kernel parameters are tunable values which you can adjust while the system is running. There is no requirement to reboot or recompile the kernel for changes to take effect.
			</p><p>
				It is possible to address the kernel parameters through:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal command">sysctl</code> command
					</li><li class="listitem">
						The virtual file system mounted at the <code class="literal filename">/proc/sys/</code> directory
					</li><li class="listitem">
						The configuration files in the <code class="literal">/etc/sysctl.d/</code> directory
					</li></ul></div><p>
				Tunables are divided into classes by the kernel subsystem. Red Hat Enterprise Linux has the following tunable classes:
			</p><rh-table id="idm139825296859264"><table class="lt-4-cols lt-7-rows"><caption>Table 5.1. Table of sysctl classes</caption><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 67%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm139825297269760" scope="col">Tunable class</th><th align="left" valign="top" id="idm139825297268672" scope="col">Subsystem</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139825297269760"> <p>
								<code class="literal">abi</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139825297268672"> <p>
								Execution domains and personalities
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825297269760"> <p>
								<code class="literal">crypto</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139825297268672"> <p>
								Cryptographic interfaces
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825297269760"> <p>
								<code class="literal">debug</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139825297268672"> <p>
								Kernel debugging interfaces
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825297269760"> <p>
								<code class="literal">dev</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139825297268672"> <p>
								Device-specific information
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825297269760"> <p>
								<code class="literal">fs</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139825297268672"> <p>
								Global and specific file system tunables
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825297269760"> <p>
								<code class="literal">kernel</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139825297268672"> <p>
								Global kernel tunables
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825297269760"> <p>
								<code class="literal">net</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139825297268672"> <p>
								Network tunables
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825297269760"> <p>
								<code class="literal">sunrpc</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139825297268672"> <p>
								Sun Remote Procedure Call (NFS)
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825297269760"> <p>
								<code class="literal">user</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139825297268672"> <p>
								User Namespace limits
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825297269760"> <p>
								<code class="literal">vm</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139825297268672"> <p>
								Tuning and management of memory, buffers, and cache
							</p>
							 </td></tr></tbody></table></rh-table><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">sysctl(8)</code>, and <code class="literal">sysctl.d(5)</code> manual pages
					</li></ul></div></section><section class="section" id="configuring-kernel-parameters-temporarily-with-sysctl_configuring-kernel-parameters-at-runtime"><div class="titlepage"><div><div><h3 class="title">5.2. Configuring kernel parameters temporarily with sysctl</h3></div></div></div><p class="_abstract _abstract">
				Use the <code class="literal command">sysctl</code> command to temporarily set kernel parameters at runtime. The command is also useful for listing and filtering tunables.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Root permissions
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						List all parameters and their values.
					</p><pre class="literallayout"><code class="literal command"># <span class="strong strong"><strong>sysctl -a</strong></span></code></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							The <code class="literal command"># sysctl -a</code> command displays kernel parameters, which can be adjusted at runtime and at boot time.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						To configure a parameter temporarily, enter:
					</p><pre class="screen"># <span class="strong strong"><strong>sysctl &lt;TUNABLE_CLASS&gt;.&lt;PARAMETER&gt;=&lt;TARGET_VALUE&gt;</strong></span></pre><p class="simpara">
						The sample command above changes the parameter value while the system is running. The changes take effect immediately, without a need for restart.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							The changes return back to default after your system reboots.
						</p></div></rh-alert></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The <code class="literal">sysctl(8)</code> manual page
					</li><li class="listitem">
						<a class="link" href="#using-configuration-files-in-etc-sysctl-d-to-adjust-kernel-parameters_configuring-kernel-parameters-at-runtime" title="5.4. Using configuration files in /etc/sysctl.d/ to adjust kernel parameters">Using configuration files in /etc/sysctl.d/ to adjust kernel parameters</a>
					</li></ul></div></section><section class="section" id="configuring-kernel-parameters-permanently-with-sysctl_configuring-kernel-parameters-at-runtime"><div class="titlepage"><div><div><h3 class="title">5.3. Configuring kernel parameters permanently with sysctl</h3></div></div></div><p class="_abstract _abstract">
				Use the <code class="literal command">sysctl</code> command to permanently set kernel parameters.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Root permissions
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						List all parameters.
					</p><pre class="literallayout"><code class="literal command"># <span class="strong strong"><strong>sysctl -a</strong></span></code></pre><p class="simpara">
						The command displays all kernel parameters that can be configured at runtime.
					</p></li><li class="listitem"><p class="simpara">
						Configure a parameter permanently:
					</p><pre class="screen"># <span class="strong strong"><strong>sysctl -w &lt;TUNABLE_CLASS&gt;.&lt;PARAMETER&gt;=&lt;TARGET_VALUE&gt; &gt;&gt; /etc/sysctl.conf</strong></span></pre><p class="simpara">
						The sample command changes the tunable value and writes it to the <code class="literal">/etc/sysctl.conf</code> file, which overrides the default values of kernel parameters. The changes take effect immediately and persistently, without a need for restart.
					</p></li></ol></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					To permanently modify kernel parameters you can also make manual changes to the configuration files in the <code class="literal">/etc/sysctl.d/</code> directory.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The <code class="literal">sysctl(8)</code> and <code class="literal">sysctl.conf(5)</code> manual pages
					</li><li class="listitem">
						<a class="link" href="#using-configuration-files-in-etc-sysctl-d-to-adjust-kernel-parameters_configuring-kernel-parameters-at-runtime" title="5.4. Using configuration files in /etc/sysctl.d/ to adjust kernel parameters">Using configuration files in /etc/sysctl.d/ to adjust kernel parameters</a>
					</li></ul></div></section><section class="section" id="using-configuration-files-in-etc-sysctl-d-to-adjust-kernel-parameters_configuring-kernel-parameters-at-runtime"><div class="titlepage"><div><div><h3 class="title">5.4. Using configuration files in /etc/sysctl.d/ to adjust kernel parameters</h3></div></div></div><p class="_abstract _abstract">
				Modify configuration files in the <code class="literal">/etc/sysctl.d/</code> directory manually to permanently set kernel parameters.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Root permissions
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a new configuration file in <code class="literal">/etc/sysctl.d/</code>.
					</p><pre class="literallayout"><code class="literal command"># <span class="strong strong"><strong>vim /etc/sysctl.d/&lt;<span class="emphasis"><em>some_file.conf</em></span>&gt;</strong></span></code></pre></li><li class="listitem"><p class="simpara">
						Include kernel parameters, one per line.
					</p><pre class="literallayout"><code class="literal command">&lt;<span class="emphasis"><em>TUNABLE_CLASS</em></span>&gt;.&lt;<span class="emphasis"><em>PARAMETER</em></span>&gt;=&lt;<span class="emphasis"><em>TARGET_VALUE</em></span>&gt;</code>
<code class="literal command">&lt;<span class="emphasis"><em>TUNABLE_CLASS</em></span>&gt;.&lt;<span class="emphasis"><em>PARAMETER</em></span>&gt;=&lt;<span class="emphasis"><em>TARGET_VALUE</em></span>&gt;</code></pre></li><li class="listitem">
						Save the configuration file.
					</li><li class="listitem"><p class="simpara">
						Reboot the machine for the changes to take effect.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Alternatively, to apply changes without rebooting, enter:
							</p><pre class="literallayout"><code class="literal command"># <span class="strong strong"><strong>sysctl -p /etc/sysctl.d/&lt;<span class="emphasis"><em>some_file.conf</em></span>&gt;</strong></span></code></pre><p class="simpara">
								The command enables you to read values from the configuration file, which you created earlier.
							</p></li></ul></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">sysctl(8)</code>, <code class="literal">sysctl.d(5)</code> manual pages
					</li></ul></div></section><section class="section" id="configuring-kernel-parameters-temporarily-through-proc-sys_configuring-kernel-parameters-at-runtime"><div class="titlepage"><div><div><h3 class="title">5.5. Configuring kernel parameters temporarily through /proc/sys/</h3></div></div></div><p class="_abstract _abstract">
				Set kernel parameters temporarily through the files in the <code class="literal">/proc/sys/</code> virtual file system directory.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Root permissions
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Identify a kernel parameter you want to configure.
					</p><pre class="literallayout"><code class="literal command"># <span class="strong strong"><strong>ls -l /proc/sys/&lt;<span class="emphasis"><em>TUNABLE_CLASS</em></span>&gt;/</strong></span></code></pre><p class="simpara">
						The writable files returned by the command can be used to configure the kernel. The files with read-only permissions provide feedback on the current settings.
					</p></li><li class="listitem"><p class="simpara">
						Assign a target value to the kernel parameter.
					</p><pre class="literallayout"><code class="literal command"># <span class="strong strong"><strong>echo &lt;<span class="emphasis"><em>TARGET_VALUE</em></span>&gt; &gt; /proc/sys/&lt;<span class="emphasis"><em>TUNABLE_CLASS</em></span>&gt;/&lt;<span class="emphasis"><em>PARAMETER</em></span>&gt;</strong></span></code></pre><p class="simpara">
						The command makes configuration changes that will disappear once the system is restarted.
					</p></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify the value of the newly set kernel parameter.
					</p><pre class="literallayout"><code class="literal command"># <span class="strong strong"><strong>cat /proc/sys/&lt;<span class="emphasis"><em>TUNABLE_CLASS</em></span>&gt;/&lt;<span class="emphasis"><em>PARAMETER</em></span>&gt;</strong></span></code></pre></li></ol></div></section></section><section class="chapter" id="configuring-kernel-parameters-permanently-by-using-the-kernel-settings-rhel-system-role_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 6. Configuring kernel parameters permanently by using RHEL system roles</h2></div></div></div><p>
			You can use the <code class="literal">kernel_settings</code> RHEL system role to configure kernel parameters on multiple clients at once. This solution:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Provides a friendly interface with efficient input setting.
				</li><li class="listitem">
					Keeps all intended kernel parameters in one place.
				</li></ul></div><p>
			After you run the <code class="literal">kernel_settings</code> role from the control machine, the kernel parameters are applied to the managed systems immediately and persist across reboots.
		</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
				Note that RHEL system role delivered over RHEL channels are available to RHEL customers as an RPM package in the default AppStream repository. RHEL system role are also available as a collection to customers with Ansible subscriptions over Ansible Automation Hub.
			</p></div></rh-alert><section class="section" id="applying-selected-kernel-parameters-using-the-kernel-settings-role_configuring-kernel-parameters-permanently-by-using-the-kernel-settings-rhel-system-role"><div class="titlepage"><div><div><h3 class="title">6.1. Applying selected kernel parameters by using the <code class="literal">kernel_settings</code> RHEL system role</h3></div></div></div><p class="_abstract _abstract">
				You can use the <code class="literal">kernel_settings</code> RHEL system role to remotely configure various kernel parameters across multiple managed operating systems with persistent effects. For example, you can configure:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Transparent hugepages to increase performance by reducing the overhead of managing smaller pages.
					</li><li class="listitem">
						The largest packet sizes are to be transmitted over the network with the loopback interface.
					</li><li class="listitem">
						Limits on files, which can be opened simultaneously.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles">You have prepared the control node and the managed nodes</a>
					</li><li class="listitem">
						You are logged in to the control node as a user who can run playbooks on the managed nodes.
					</li><li class="listitem">
						The account you use to connect to the managed nodes has <code class="literal">sudo</code> permissions on them.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a playbook file, for example <code class="literal">~/playbook.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
- name: Configuring kernel settings
  hosts: managed-node-01.example.com
  tasks:
    - name: Configure hugepages, packet size for loopback device, and limits on simultaneously open files.
      ansible.builtin.include_role:
        name: rhel-system-roles.kernel_settings
      vars:
        kernel_settings_sysctl:
          - name: fs.file-max
            value: 400000
          - name: kernel.threads-max
            value: 65536
        kernel_settings_sysfs:
          - name: /sys/class/net/lo/mtu
            value: 65000
        kernel_settings_transparent_hugepages: madvise
        kernel_settings_reboot_ok: true</pre><p class="simpara">
						The settings specified in the example playbook include the following:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">kernel_settings_sysfs: <span class="emphasis"><em>&lt;list_of_sysctl_settings&gt;</em></span></code></span></dt><dd>
									A YAML list of <code class="literal">sysctl</code> settings and the values you want to assign to these settings.
								</dd><dt><span class="term"><code class="literal">kernel_settings_transparent_hugepages: <span class="emphasis"><em>&lt;value&gt;</em></span></code></span></dt><dd>
									Controls the memory subsystem Transparent Huge Pages (THP) setting. You can disable THP support (<code class="literal">never</code>), enable it system wide (<code class="literal">always</code>) or inside <code class="literal">MAD_HUGEPAGE</code> regions (<code class="literal">madvise</code>).
								</dd><dt><span class="term"><code class="literal">kernel_settings_reboot_ok: <span class="emphasis"><em>&lt;true|false&gt;</em></span></code></span></dt><dd>
									The default is <code class="literal">false</code>. If set to <code class="literal">true</code>, the system role will determine if a reboot of the managed host is necessary for the requested changes to take effect and reboot it. If set to <code class="literal">false</code>, the role will return the variable <code class="literal">kernel_settings_reboot_required</code> with a value of <code class="literal">true</code>, indicating that a reboot is required. In this case, a user must reboot the managed node manually.
								</dd></dl></div></li></ol></div><p>
				For details about all variables used in the playbook, see the <code class="literal">/usr/share/ansible/roles/rhel-system-roles.kdump/README.md</code> file on the control node.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Validate the playbook syntax:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --syntax-check ~/playbook.yml</strong></span></pre><p class="simpara">
						Note that this command only validates the syntax and does not protect against a wrong but valid configuration.
					</p></li><li class="listitem"><p class="simpara">
						Run the playbook:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook ~/playbook.yml</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify the affected kernel parameters:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ansible managed-node-01.example.com -m command -a 'sysctl fs.file-max kernel.threads-max net.ipv6.conf.lo.mtu'</strong></span>
# <span class="strong strong"><strong>ansible managed-node-01.example.com -m command -a 'cat /sys/kernel/mm/transparent_hugepage/enabled'</strong></span></pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/rhel-system-roles.kernel_settings/README.md</code> file
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/rhel-system-roles/kernel_settings/</code> directory
					</li></ul></div></section></section><section class="chapter" id="configuring-the-grub-2-boot-loader-by-using-rhel-system-roles_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 7. Configuring the GRUB 2 boot loader by using RHEL system roles</h2></div></div></div><p>
			By using the <code class="literal">bootloader</code> RHEL system role, you can automate the configuration and management tasks related to the GRUB2 boot loader.
		</p><p>
			This role currently supports configuring the GRUB2 boot loader, which runs on the following CPU architectures:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					AMD and Intel 64-bit architectures (x86-64)
				</li><li class="listitem">
					The 64-bit ARM architecture (ARMv8.0)
				</li><li class="listitem">
					IBM Power Systems, Little Endian (POWER9)
				</li></ul></div><section class="section" id="updating-the-existing-boot-loader-entries-by-using-the-bootloader-rhel-system-role_configuring-the-grub-2-boot-loader-by-using-rhel-system-roles"><div class="titlepage"><div><div><h3 class="title">7.1. Updating the existing boot loader entries by using the <code class="literal">bootloader</code> RHEL system role</h3></div></div></div><p>
				You can use the <code class="literal">bootloader</code> RHEL system role to update the existing entries in the GRUB2 boot menu in an automated fashion. This way you can efficiently pass specific kernel command-line parameters that can optimize the performance or behavior of your systems.
			</p><p>
				For example, if you leverage systems, where detailed boot messages from the kernel and init system are not necessary, use <code class="literal">bootloader</code> to apply the <code class="literal">quiet</code> parameter to your existing boot loader entries on your managed nodes to achieve a cleaner, less cluttered, and more user-friendly booting experience.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles">You have prepared the control node and the managed nodes</a>
					</li><li class="listitem">
						You are logged in to the control node as a user who can run playbooks on the managed nodes.
					</li><li class="listitem">
						The account you use to connect to the managed nodes has <code class="literal">sudo</code> permissions on them.
					</li><li class="listitem">
						You identified the kernel that corresponds to the boot loader entry you want to update.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a playbook file, for example <code class="literal">~/playbook.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
- name: Configuration and management of GRUB2 boot loader
  hosts: managed-node-01.example.com
  tasks:
    - name: Update existing boot loader entries
      ansible.builtin.include_role:
        name: rhel-system-roles.bootloader
      vars:
        bootloader_settings:
          - kernel:
              path: /boot/vmlinuz-5.14.0-362.24.1.el9_3.aarch64
            options:
              - name: quiet
                state: present
        bootloader_reboot_ok: true</pre><p class="simpara">
						The settings specified in the example playbook include the following:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">kernel</code></span></dt><dd>
									Specifies the kernel connected with the boot loader entry that you want to update.
								</dd><dt><span class="term"><code class="literal">options</code></span></dt><dd>
									Specifies the kernel command-line parameters to update for your chosen boot loader entry (kernel).
								</dd><dt><span class="term"><code class="literal">bootloader_reboot_ok: <span class="emphasis"><em>true</em></span></code></span></dt><dd>
									The role detects that a reboot is needed for the changes to take effect and performs a restart of the managed node.
								</dd></dl></div><p class="simpara">
						For details about all variables used in the playbook, see the <code class="literal">/usr/share/ansible/roles/rhel-system-roles.bootloader/README.md</code> file on the control node.
					</p></li><li class="listitem"><p class="simpara">
						Validate the playbook syntax:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --syntax-check ~/playbook.yml</strong></span></pre><p class="simpara">
						Note that this command only validates the syntax and does not protect against a wrong but valid configuration.
					</p></li><li class="listitem"><p class="simpara">
						Run the playbook:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook ~/playbook.yml</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Check that your specified boot loader entry has updated kernel command-line parameters:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ansible managed-node-01.example.com -m ansible.builtin.command -a 'grubby --info=ALL'</strong></span>
managed-node-01.example.com | CHANGED | rc=0 &gt;&gt;
...
index=1
kernel="/boot/vmlinuz-5.14.0-362.24.1.el9_3.aarch64"
args="ro crashkernel=1G-4G:256M,4G-64G:320M,64G-:576M rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap $tuned_params <span class="strong strong"><strong>quiet</strong></span>"
root="/dev/mapper/rhel-root"
initrd="/boot/initramfs-5.14.0-362.24.1.el9_3.aarch64.img $tuned_initrd"
title="Red Hat Enterprise Linux (5.14.0-362.24.1.el9_3.aarch64) 9.4 (Plow)"
id="2c9ec787230141a9b087f774955795ab-5.14.0-362.24.1.el9_3.aarch64"
...</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/rhel-system-roles.bootloader/README.md</code> file
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/rhel-system-roles/bootloader/</code> directory
					</li><li class="listitem">
						<a class="link" href="https://docs.ansible.com/ansible/latest/user_guide/playbooks.html">Working With Playbooks</a>
					</li><li class="listitem">
						<a class="link" href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_variables.html">Using Variables</a>
					</li><li class="listitem">
						<a class="link" href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_reuse_roles.html">Roles</a>
					</li><li class="listitem">
						<a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index#configuring-kernel-command-line-parameters_managing-monitoring-and-updating-the-kernel">Configuring kernel command-line parameters</a>
					</li></ul></div></section><section class="section" id="securing-the-boot-menu-with-password-by-using-the-bootloader-rhel-system-role_configuring-the-grub-2-boot-loader-by-using-rhel-system-roles"><div class="titlepage"><div><div><h3 class="title">7.2. Securing the boot menu with password by using the <code class="literal">bootloader</code> RHEL system role</h3></div></div></div><p>
				You can use the <code class="literal">bootloader</code> RHEL system role to set a password to the GRUB2 boot menu in an automated fashion. This way you can efficiently prevent unauthorized users from modifying boot parameters, and to have better control over the system boot.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles">You have prepared the control node and the managed nodes</a>
					</li><li class="listitem">
						You are logged in to the control node as a user who can run playbooks on the managed nodes.
					</li><li class="listitem">
						The account you use to connect to the managed nodes has <code class="literal">sudo</code> permissions on them.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Store your sensitive variables in an encrypted file:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create the vault:
							</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-vault create vault.yml</strong></span>
New Vault password: <span class="emphasis"><em>&lt;vault_password&gt;</em></span>
Confirm New Vault password: <span class="emphasis"><em>&lt;vault_password&gt;</em></span></pre></li><li class="listitem"><p class="simpara">
								After the <code class="literal">ansible-vault create</code> command opens an editor, enter the sensitive data in the <code class="literal"><span class="emphasis"><em>&lt;key&gt;</em></span>: <span class="emphasis"><em>&lt;value&gt;</em></span></code> format:
							</p><pre class="programlisting language-ini">pwd: <span class="emphasis"><em>&lt;password&gt;</em></span></pre></li><li class="listitem">
								Save the changes, and close the editor. Ansible encrypts the data in the vault.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Create a playbook file, for example <code class="literal">~/playbook.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
- name: Configuration and management of GRUB2 boot loader
  hosts: managed-node-01.example.com
  vars_files:
    - vault.yml
  tasks:
    - name: Set the bootloader password
      ansible.builtin.include_role:
        name: rhel-system-roles.bootloader
      vars:
        bootloader_password: "{{ pwd }}"
        bootloader_reboot_ok: true</pre><p class="simpara">
						The settings specified in the example playbook include the following:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">bootloader_password: <span class="emphasis"><em>"{{ pwd }}"</em></span></code></span></dt><dd>
									The variable ensures protection of boot parameters with a password.
								</dd><dt><span class="term"><code class="literal">bootloader_reboot_ok: <span class="emphasis"><em>true</em></span></code></span></dt><dd>
									The role detects that a reboot is needed for the changes to take effect and performs a restart of the managed node.
								</dd></dl></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							Changing the boot loader password is not an idempotent transaction. This means that if you apply the same Ansible playbook again, the result will not be the same, and the state of the managed node will change.
						</p></div></rh-alert><p class="simpara">
						For details about all variables used in the playbook, see the <code class="literal">/usr/share/ansible/roles/rhel-system-roles.bootloader/README.md</code> file on the control node.
					</p></li><li class="listitem"><p class="simpara">
						Validate the playbook syntax:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --syntax-check --ask-vault-pass ~/playbook.yml</strong></span></pre><p class="simpara">
						Note that this command only validates the syntax and does not protect against a wrong but valid configuration.
					</p></li><li class="listitem"><p class="simpara">
						Run the playbook:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --ask-vault-pass ~/playbook.yml</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						On your managed node during the GRUB2 boot menu screen, press the <kbd class="keycap">e</kbd> key for edit.
					</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Managing_monitoring_and_updating_the_kernel-en-US/images/cd35c09a617934aa83c413f94deb1c9a/bootloader_password_verification1.png" alt="GRUB2 boot loader menu"></div></div></li><li class="listitem"><p class="simpara">
						You will be prompted for a username and a password:
					</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Managing_monitoring_and_updating_the_kernel-en-US/images/1d6466a16badfca79aff8cbb9eba7cb2/bootloader_password_verification2.png" alt="GRUB2 menu lock"></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">Enter username: root</code></span></dt><dd>
									The boot loader username is always <code class="literal">root</code> and you do not need to specify it in your Ansible playbook.
								</dd><dt><span class="term"><code class="literal">Enter password: <span class="emphasis"><em>&lt;password&gt;</em></span></code></span></dt><dd>
									The boot loader password corresponds to the <code class="literal">pwd</code> variable that you defined in the <code class="literal">vault.yml</code> file.
								</dd></dl></div></li><li class="listitem"><p class="simpara">
						You can view or edit configuration of the particular boot loader entry:
					</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Managing_monitoring_and_updating_the_kernel-en-US/images/960bfee9d3a0f90d4e48b74ee4388b0c/bootloader_password_verification3.png" alt="GRUB2 boot loader entry details"></div></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/rhel-system-roles.bootloader/README.md</code> file
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/rhel-system-roles/bootloader/</code> directory
					</li></ul></div></section><section class="section" id="setting-a-timeout-for-the-boot-loader-menu-by-using-the-bootloader-rhel-system-role_configuring-the-grub-2-boot-loader-by-using-rhel-system-roles"><div class="titlepage"><div><div><h3 class="title">7.3. Setting a timeout for the boot loader menu by using the <code class="literal">bootloader</code> RHEL system role</h3></div></div></div><p>
				You can use the <code class="literal">bootloader</code> RHEL system role to configure a timeout for the GRUB2 boot loader menu in an automated fashion. This way you can efficiently update a period of time during which you can intervene and select a non-default boot entry for various purposes.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles">You have prepared the control node and the managed nodes</a>
					</li><li class="listitem">
						You are logged in to the control node as a user who can run playbooks on the managed nodes.
					</li><li class="listitem">
						The account you use to connect to the managed nodes has <code class="literal">sudo</code> permissions on them.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a playbook file, for example <code class="literal">~/playbook.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
- name: Configuration and management of GRUB2 boot loader
  hosts: managed-node-01.example.com
  tasks:
    - name: Update the boot loader timeout
      ansible.builtin.include_role:
        name: rhel-system-roles.bootloader
      vars:
        bootloader_timeout: 10</pre><p class="simpara">
						The settings specified in the example playbook include the following:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">bootloader_timeout: 10</code></span></dt><dd>
									Input an integer to control for how long the GRUB2 boot loader menu is displayed before booting the default entry.
								</dd></dl></div><p class="simpara">
						For details about all variables used in the playbook, see the <code class="literal">/usr/share/ansible/roles/rhel-system-roles.bootloader/README.md</code> file on the control node.
					</p></li><li class="listitem"><p class="simpara">
						Validate the playbook syntax:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --syntax-check ~/playbook.yml</strong></span></pre><p class="simpara">
						Note that this command only validates the syntax and does not protect against a wrong but valid configuration.
					</p></li><li class="listitem"><p class="simpara">
						Run the playbook:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook ~/playbook.yml</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Remotely restart your managed node:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ansible managed-node-01.example.com -m ansible.builtin.reboot</strong></span>
managed-node-01.example.com | CHANGED =&gt; {
    "changed": true,
    "elapsed": 21,
    "rebooted": true
}</pre></li><li class="listitem"><p class="simpara">
						On the managed node, observe the GRUB2 boot menu screen.
					</p><div class="informalfigure"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Managing_monitoring_and_updating_the_kernel-en-US/images/4799ebe2185bd3c825a53458bc866301/bootloader_timeout_verification.png" alt="GRUB2 boot loader menu timeout"></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">The highlighted entry will be executed automatically in 10s</code></span></dt><dd><p class="simpara">
									For how long this boot menu is displayed before GRUB2 automatically uses the default entry.
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
											Alternative: you can remotely query for the "timeout" settings in the <code class="literal">/boot/grub2/grub.cfg</code> file of your managed node:
										</p><pre class="literallayout"># <span class="strong strong"><strong>ansible managed-node-01.example.com -m ansible.builtin.command -a "grep 'timeout' /boot/grub2/grub.cfg"</strong></span>
managed-node-01.example.com | CHANGED | rc=0 &gt;&gt;
if [ x$feature_timeout_style = xy ] ; then
  set timeout_style=menu
  <span class="strong strong"><strong>set timeout=10</strong></span>
# Fallback normal timeout code in case the timeout_style feature is
  <span class="strong strong"><strong>set timeout=10</strong></span>
if [ x$feature_timeout_style = xy ] ; then
    set timeout_style=menu
    <span class="strong strong"><strong>set timeout=10</strong></span>
    set orig_timeout_style=${timeout_style}
    set orig_timeout=${timeout}
      # timeout_style=menu + timeout=0 avoids the countdown code keypress check
      set timeout_style=menu
      <span class="strong strong"><strong>set timeout=10</strong></span>
      set timeout_style=hidden
      <span class="strong strong"><strong>set timeout=10</strong></span>
if [ x$feature_timeout_style = xy ]; then
  if [ "${menu_show_once_timeout}" ]; then
    set timeout_style=menu
    <span class="strong strong"><strong>set timeout=10</strong></span>
    unset menu_show_once_timeout
    save_env menu_show_once_timeout</pre></li></ul></div></dd></dl></div></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/rhel-system-roles.bootloader/README.md</code> file
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/rhel-system-roles/bootloader/</code> directory
					</li></ul></div></section><section class="section" id="collecting-the-boot-loader-configuration-information-by-using-the-bootloader-rhel-system-role_configuring-the-grub-2-boot-loader-by-using-rhel-system-roles"><div class="titlepage"><div><div><h3 class="title">7.4. Collecting the boot loader configuration information by using the <code class="literal">bootloader</code> RHEL system role</h3></div></div></div><p>
				You can use the <code class="literal">bootloader</code> RHEL system role to gather information about the GRUB2 boot loader entries in an automated fashion. This way you can quickly identify that your systems are set up to boot correctly, all entries point to the right kernels and initial RAM disk images.
			</p><p>
				As a result, you can for example:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Prevent boot failures.
					</li><li class="listitem">
						Revert to a known good state when troubleshooting.
					</li><li class="listitem">
						Be sure that security-related kernel command-line parameters are correctly configured.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles">You have prepared the control node and the managed nodes</a>
					</li><li class="listitem">
						You are logged in to the control node as a user who can run playbooks on the managed nodes.
					</li><li class="listitem">
						The account you use to connect to the managed nodes has <code class="literal">sudo</code> permissions on them.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a playbook file, for example <code class="literal">~/playbook.yml</code>, with the following content:
					</p><pre class="programlisting language-yaml">---
- name: Configuration and management of GRUB2 boot loader
  hosts: managed-node-01.example.com
  tasks:
    - name: Gather information about the boot loader configuration
      ansible.builtin.include_role:
        name: rhel-system-roles.bootloader
      vars:
        bootloader_gather_facts: true

    - name: Display the collected boot loader configuration information
      debug:
        var: bootloader_facts</pre><p class="simpara">
						For details about all variables used in the playbook, see the <code class="literal">/usr/share/ansible/roles/rhel-system-roles.bootloader/README.md</code> file on the control node.
					</p></li><li class="listitem"><p class="simpara">
						Validate the playbook syntax:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook --syntax-check ~/playbook.yml</strong></span></pre><p class="simpara">
						Note that this command only validates the syntax and does not protect against a wrong but valid configuration.
					</p></li><li class="listitem"><p class="simpara">
						Run the playbook:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>ansible-playbook ~/playbook.yml</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						After you run the preceding playbook on the control node, you will see a similar command-line output as in the following example:
					</p><pre class="literallayout">...
    "bootloader_facts": [
        {
            "args": "ro crashkernel=1G-4G:256M,4G-64G:320M,64G-:576M rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap $tuned_params quiet",
            "default": true,
            "id": "2c9ec787230141a9b087f774955795ab-5.14.0-362.24.1.el9_3.aarch64",
            "index": "1",
            "initrd": "/boot/initramfs-5.14.0-362.24.1.el9_3.aarch64.img $tuned_initrd",
            "kernel": "/boot/vmlinuz-5.14.0-362.24.1.el9_3.aarch64",
            "root": "/dev/mapper/rhel-root",
            "title": "Red Hat Enterprise Linux (5.14.0-362.24.1.el9_3.aarch64) 9.4 (Plow)"
        }
    ]
...</pre><p class="simpara">
						The command-line output shows the following notable configuration information about the boot entry:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">args</code></span></dt><dd>
									Command-line parameters passed to the kernel by the GRUB2 boot loader during the boot process. They configure various settings and behaviors of the kernel, initramfs, and other boot-time components.
								</dd><dt><span class="term"><code class="literal">id</code></span></dt><dd>
									Unique identifier assigned to each boot entry in a boot loader menu. It consists of machine ID and the kernel version.
								</dd><dt><span class="term"><code class="literal">root</code></span></dt><dd>
									The root filesystem for the kernel to mount and use as the primary filesystem during the boot.
								</dd></dl></div></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">/usr/share/ansible/roles/rhel-system-roles.bootloader/README.md</code> file
					</li><li class="listitem">
						<code class="literal">/usr/share/doc/rhel-system-roles/bootloader/</code> directory
					</li><li class="listitem">
						<a class="link" href="https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index#what-boot-entries-are_configuring-kernel-command-line-parameters">Understanding boot entries</a>
					</li></ul></div></section></section><section class="chapter" id="applying-patches-with-kernel-live-patching_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 8. Applying patches with kernel live patching</h2></div></div></div><p class="_abstract _abstract">
			You can use the Red Hat Enterprise Linux kernel live patching solution to patch a running kernel without rebooting or restarting any processes.
		</p><p>
			With this solution, system administrators:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Can immediately apply critical security patches to the kernel.
				</li><li class="listitem">
					Do not have to wait for long-running tasks to complete, for users to log off, or for scheduled downtime.
				</li><li class="listitem">
					Control the system’s uptime more and do not sacrifice security or stability.
				</li></ul></div><p>
			Note that not every critical or important CVE will be resolved using the kernel live patching solution. Our goal is to reduce the required reboots for security-related patches, not to eliminate them entirely. For more details about the scope of live patching, see the <span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/solutions/2206511">Is live kernel patch (kpatch) supported in Red Hat Enterprise Linux?</a></span></em></span>.
		</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
				Some incompatibilities exist between kernel live patching and other kernel subcomponents. Read the <a class="link" href="#limitations-of-kpatch_applying-patches-with-kernel-live-patching" title="8.1. Limitations of kpatch">Limitations of kpatch</a> carefully before using kernel live patching.
			</p></div></rh-alert><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
				For details about the support cadence of kernel live patching updates, see:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/articles/7057149">Kernel Live Patch Support Cadence Update</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/articles/4499631">Kernel Live Patch life cycles</a>
					</li></ul></div></div></rh-alert><section class="section" id="limitations-of-kpatch_applying-patches-with-kernel-live-patching"><div class="titlepage"><div><div><h3 class="title">8.1. Limitations of kpatch</h3></div></div></div><div class="itemizedlist _abstract"><ul class="itemizedlist _abstract" type="disc"><li class="listitem">
						The <code class="literal">kpatch</code> feature is not a general-purpose kernel upgrade mechanism. It is used for applying simple security and bug fix updates when rebooting the system is not immediately possible.
					</li><li class="listitem">
						Do not use the <code class="literal">SystemTap</code> or <code class="literal">kprobe</code> tools during or after loading a patch. The patch could fail to take effect until after such probes have been removed.
					</li></ul></div></section><section class="section" id="support-for-third-party-live-patching_applying-patches-with-kernel-live-patching"><div class="titlepage"><div><div><h3 class="title">8.2. Support for third-party live patching</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">kpatch</code> utility is the only kernel live patching utility supported by Red Hat with the RPM modules provided by Red Hat repositories. Red Hat will not support any live patches which were not provided by Red Hat itself.
			</p><p>
				If you require support for an issue that arises with a third-party live patch, Red Hat recommends that you open a case with the live patching vendor at the outset of any investigation in which a root cause determination is necessary. This allows the source code to be supplied if the vendor allows, and for their support organization to provide assistance in root cause determination prior to escalating the investigation to Red Hat Support.
			</p><p>
				For any system running with third-party live patches, Red Hat reserves the right to ask for reproduction with Red Hat shipped and supported software. In the event that this is not possible, we require a similar system and workload be deployed on your test environment without live patches applied, to confirm if the same behavior is observed.
			</p><p>
				For more information about third-party software support policies, see <a class="link" href="https://access.redhat.com/articles/1067">As a customer how does Red Hat support me when I use third party components?</a>
			</p></section><section class="section" id="access-to-kernel-live-patches_applying-patches-with-kernel-live-patching"><div class="titlepage"><div><div><h3 class="title">8.3. Access to kernel live patches</h3></div></div></div><p class="_abstract _abstract">
				Kernel live patching capability is implemented as a kernel module (<code class="literal">kmod</code>) that is delivered as an RPM package.
			</p><p>
				All customers have access to kernel live patches, which are delivered through the usual channels. However, customers who do not subscribe to an extended support offering will lose access to new patches for the current minor release once the next minor release becomes available. For example, customers with standard subscriptions will only be able to live patch RHEL 9.1 kernel until the RHEL 9.2 kernel is released.
			</p><p>
				The components of kernel live patching are as follows:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Kernel patch module</span></dt><dd><p class="simpara">

						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									The delivery mechanism for kernel live patches.
								</li><li class="listitem">
									A kernel module which is built specifically for the kernel being patched.
								</li><li class="listitem">
									The patch module contains the code of the desired fixes for the kernel.
								</li><li class="listitem">
									The patch modules register with the <code class="literal">livepatch</code> kernel subsystem and provide information about original functions to be replaced, with corresponding pointers to the replacement functions. Kernel patch modules are delivered as RPMs.
								</li><li class="listitem">
									The naming convention is <code class="literal">kpatch_&lt;kernel version&gt;_&lt;kpatch version&gt;_&lt;kpatch release&gt;</code>. The "kernel version" part of the name has <span class="emphasis"><em>dots</em></span> replaced with <span class="emphasis"><em>underscores</em></span>.
								</li></ul></div></dd><dt><span class="term">The <code class="literal">kpatch</code> utility</span></dt><dd>
							A command-line utility for managing patch modules.
						</dd><dt><span class="term">The <code class="literal">kpatch</code> service</span></dt><dd>
							A <code class="literal">systemd</code> service required by <code class="literal">multiuser.target</code>. This target loads the kernel patch module at boot time.
						</dd><dt><span class="term">The <code class="literal">kpatch-dnf</code> package</span></dt><dd>
							A DNF plugin delivered in the form of an RPM package. This plugin manages automatic subscription to kernel live patches.
						</dd></dl></div></section><section class="section" id="the-process-of-live-patching-kernels_applying-patches-with-kernel-live-patching"><div class="titlepage"><div><div><h3 class="title">8.4. The process of live patching kernels</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">kpatch</code> kernel patching solution uses the <code class="literal">livepatch</code> kernel subsystem to redirect old functions to new ones. When a live kernel patch is applied to a system, the following things happen:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						The kernel patch module is copied to the <code class="literal">/var/lib/kpatch/</code> directory and registered for re-application to the kernel by <code class="literal">systemd</code> on next boot.
					</li><li class="listitem">
						The kpatch module is loaded into the running kernel and the new functions are registered to the <code class="literal">ftrace</code> mechanism with a pointer to the location in memory of the new code.
					</li><li class="listitem">
						When the kernel accesses the patched function, it is redirected by the <code class="literal">ftrace</code> mechanism which bypasses the original functions and redirects the kernel to patched version of the function.
					</li></ol></div><div class="figure" id="applying-patches-with-kernel-live-patching-figu-how-kpatch-works"><p class="title"><strong>Figure 8.1. How kernel live patching works</strong></p><div class="figure-contents"><div class="mediaobject"><img src="https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Managing_monitoring_and_updating_the_kernel-en-US/images/0753f887dc454f8d70e75ba6ebe5d325/rhel_kpatch_overview.png" alt="rhel kpatch overview"></div></div></div></section><section class="section" id="subscribing-the-currently-installed-kernels-to-the-live-patching-stream_applying-patches-with-kernel-live-patching"><div class="titlepage"><div><div><h3 class="title">8.5. Subscribing the currently installed kernels to the live patching stream</h3></div></div></div><p class="_abstract _abstract">
				A kernel patch module is delivered in an RPM package, specific to the version of the kernel being patched. Each RPM package will be cumulatively updated over time.
			</p><p>
				The following procedure explains how to subscribe to all future cumulative live patching updates for a given kernel. Because live patches are cumulative, you cannot select which individual patches are deployed for a given kernel.
			</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					Red Hat does not support any third party live patches applied to a Red Hat supported system.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Root permissions
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: Check your kernel version:
					</p><pre class="literallayout"># <span class="strong strong"><strong>uname -r</strong></span>
5.14.0-1.el9.x86_64</pre></li><li class="listitem"><p class="simpara">
						Search for a live patching package that corresponds to the version of your kernel:
					</p><pre class="literallayout"># <span class="strong strong"><strong>dnf search $(uname -r)</strong></span></pre></li><li class="listitem"><p class="simpara">
						Install the live patching package:
					</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install "kpatch-patch = $(uname -r)"</strong></span></pre><p class="simpara">
						The command above installs and applies the latest cumulative live patches for that specific kernel only.
					</p><p class="simpara">
						If the version of a live patching package is 1-1 or higher, the package will contain a patch module. In that case the kernel will be automatically patched during the installation of the live patching package.
					</p><p class="simpara">
						The kernel patch module is also installed into the <code class="literal">/var/lib/kpatch/</code> directory to be loaded by the <code class="literal">systemd</code> system and service manager during the future reboots.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							An empty live patching package will be installed when there are no live patches available for a given kernel. An empty live patching package will have a <span class="emphasis"><em>kpatch_version-kpatch_release</em></span> of 0-0, for example <code class="literal">kpatch-patch-5_14_0-1-0-0.x86_64.rpm</code>. The installation of the empty RPM subscribes the system to all future live patches for the given kernel.
						</p></div></rh-alert></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify that all installed kernels have been patched:
					</p><pre class="literallayout"># <span class="strong strong"><strong>kpatch list</strong></span>
Loaded patch modules:
kpatch_5_14_0_1_0_1 [enabled]

Installed patch modules:
kpatch_5_14_0_1_0_1 (5.14.0-1.el9.x86_64)
…​</pre><p class="simpara">
						The output shows that the kernel patch module has been loaded into the kernel that is now patched with the latest fixes from the <code class="literal">kpatch-patch-5_14_0-1-0-1.el9.x86_64.rpm</code> package.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							Entering the <code class="literal">kpatch list</code> command does not return an empty live patching package. Use the <code class="literal">rpm -qa | grep kpatch</code> command instead.
						</p><pre class="literallayout"># <span class="strong strong"><strong>rpm -qa | grep kpatch</strong></span>
kpatch-dnf-0.4-3.el9.noarch
kpatch-0.9.7-2.el9.noarch
kpatch-patch-5_14_0-284_25_1-0-0.el9_2.x86_64</pre></div></rh-alert></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">kpatch(1)</code> manual page
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_software_with_the_dnf_tool/assembly_installing-rhel-9-content_managing-software-with-the-dnf-tool">Installing RHEL 9 content</a>
					</li></ul></div></section><section class="section" id="automatically-subscribing-any-future-kernel-to-the-live-patching-stream_applying-patches-with-kernel-live-patching"><div class="titlepage"><div><div><h3 class="title">8.6. Automatically subscribing any future kernel to the live patching stream</h3></div></div></div><p class="_abstract _abstract">
				You can use the <code class="literal">kpatch-dnf</code> DNF plugin to subscribe your system to fixes delivered by the kernel patch module, also known as kernel live patches. The plugin enables <span class="strong strong"><strong>automatic</strong></span> subscription for any kernel the system currently uses, and also for kernels <span class="strong strong"><strong>to-be-installed in the future</strong></span>.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have root permissions.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: Check all installed kernels and the kernel you are currently running:
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>dnf list installed | grep kernel</strong></span>
Updating Subscription Management repositories.
Installed Packages
...
kernel-core.x86_64            5.14.0-1.el9              @beaker-BaseOS
kernel-core.x86_64            5.14.0-2.el9              @@commandline
...

# <span class="strong strong"><strong>uname -r</strong></span>
5.14.0-2.el9.x86_64</pre></li><li class="listitem"><p class="simpara">
						Install the <code class="literal">kpatch-dnf</code> plugin:
					</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install kpatch-dnf</strong></span></pre></li><li class="listitem"><p class="simpara">
						Enable automatic subscription to kernel live patches:
					</p><pre class="literallayout"># <span class="strong strong"><strong>dnf kpatch auto</strong></span>
Updating Subscription Management repositories.
Last metadata expiration check: 1:38:21 ago on Fri 17 Sep 2021 07:29:53 AM EDT.
Dependencies resolved.
==================================================
 Package                             Architecture
==================================================
Installing:
 kpatch-patch-5_14_0-1               x86_64
 kpatch-patch-5_14_0-2               x86_64

Transaction Summary
===================================================
Install  2 Packages
…​</pre><p class="simpara">
						This command subscribes all currently installed kernels to receiving kernel live patches. The command also installs and applies the latest cumulative live patches, if any, for all installed kernels.
					</p><p class="simpara">
						In the future, when you update the kernel, live patches will automatically be installed during the new kernel installation process.
					</p><p class="simpara">
						The kernel patch module is also installed into the <code class="literal">/var/lib/kpatch/</code> directory to be loaded by the <code class="literal">systemd</code> system and service manager during future reboots.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							An empty live patching package will be installed when there are no live patches available for a given kernel. An empty live patching package will have a <span class="emphasis"><em>kpatch_version-kpatch_release</em></span> of 0-0, for example <code class="literal">kpatch-patch-5_14_0-1-0-0.el9.x86_64.rpm</code>. The installation of the empty RPM subscribes the system to all future live patches for the given kernel.
						</p></div></rh-alert></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify that all installed kernels have been patched:
					</p><pre class="literallayout"># <span class="strong strong"><strong>kpatch list</strong></span>
Loaded patch modules:
kpatch_5_14_0_2_0_1 [enabled]

Installed patch modules:
kpatch_5_14_0_1_0_1 (5.14.0-1.el9.x86_64)
kpatch_5_14_0_2_0_1 (5.14.0-2.el9.x86_64)</pre><p class="simpara">
						The output shows that both the kernel you are running, and the other installed kernel have been patched with fixes from <code class="literal">kpatch-patch-5_14_0-1-0-1.el9.x86_64.rpm</code> and <code class="literal">kpatch-patch-5_14_0-2-0-1.el9.x86_64.rpm</code> packages respectively.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							Entering the <code class="literal">kpatch list</code> command does not return an empty live patching package. Use the <code class="literal">rpm -qa | grep kpatch</code> command instead.
						</p><pre class="literallayout"># <span class="strong strong"><strong>rpm -qa | grep kpatch</strong></span>
kpatch-dnf-0.4-3.el9.noarch
kpatch-0.9.7-2.el9.noarch
kpatch-patch-5_14_0-284_25_1-0-0.el9_2.x86_64</pre></div></rh-alert></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">kpatch(1)</code> and <code class="literal">dnf-kpatch(8)</code> manual pages
					</li></ul></div></section><section class="section" id="proc_disabling-automatic-subscription-to-the-live-patching-stream_applying-patches-with-kernel-live-patching"><div class="titlepage"><div><div><h3 class="title">8.7. Disabling automatic subscription to the live patching stream</h3></div></div></div><p class="_abstract _abstract">
				When you subscribe your system to fixes delivered by the kernel patch module, your subscription is <span class="strong strong"><strong>automatic</strong></span>. You can disable this feature, and thus disable automatic installation of <code class="literal">kpatch-patch</code> packages.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have root permissions.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Optional: Check all installed kernels and the kernel you are currently running:
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>dnf list installed | grep kernel</strong></span>
Updating Subscription Management repositories.
Installed Packages
...
kernel-core.x86_64            5.14.0-1.el9              @beaker-BaseOS
kernel-core.x86_64            5.14.0-2.el9              @@commandline
...

# <span class="strong strong"><strong>uname -r</strong></span>
5.14.0-2.el9.x86_64</pre></li><li class="listitem"><p class="simpara">
						Disable automatic subscription to kernel live patches:
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>dnf kpatch manual</strong></span>
Updating Subscription Management repositories.</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You can check for the successful outcome:
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>yum kpatch status</strong></span>
...
Updating Subscription Management repositories.
Last metadata expiration check: 0:30:41 ago on Tue Jun 14 15:59:26 2022.
Kpatch update setting: <span class="strong strong"><strong>manual</strong></span></pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">kpatch(1)</code> and <code class="literal">dnf-kpatch(8)</code> manual pages
					</li></ul></div></section><section class="section" id="updating-kernel-patch-modules_applying-patches-with-kernel-live-patching"><div class="titlepage"><div><div><h3 class="title">8.8. Updating kernel patch modules</h3></div></div></div><p class="_abstract _abstract">
				Kernel patch modules are delivered and applied through RPM packages. The process of updating a cumulative kernel patch module is similar to updating any other RPM package.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The system is subscribed to the live patching stream, as described in <a class="link" href="#subscribing-the-currently-installed-kernels-to-the-live-patching-stream_applying-patches-with-kernel-live-patching" title="8.5. Subscribing the currently installed kernels to the live patching stream">Subscribing the currently installed kernels to the live patching stream</a>.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Update to a new cumulative version for the current kernel:
					</p><pre class="literallayout"># <span class="strong strong"><strong>dnf update "kpatch-patch = $(uname -r)"</strong></span></pre><p class="simpara">
						The command above automatically installs and applies any updates that are available for the currently running kernel. Including any future released cumulative live patches.
					</p></li><li class="listitem"><p class="simpara">
						Alternatively, update all installed kernel patch modules:
					</p><pre class="literallayout"># <span class="strong strong"><strong>dnf update "kpatch-patch</strong></span>"</pre></li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					When the system reboots into the same kernel, the kernel is automatically live patched again by the <code class="literal">kpatch.service</code> systemd service.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_software_with_the_dnf_tool/assembly_updating-rhel-9-content_managing-software-with-the-dnf-tool#proc_updating-packages-with-yum_assembly_updating-rhel-9-content">Updating software packages</a></span></em></span> in RHEL
					</li></ul></div></section><section class="section" id="removing-the-live-patching-package_applying-patches-with-kernel-live-patching"><div class="titlepage"><div><div><h3 class="title">8.9. Removing the live patching package</h3></div></div></div><p class="_abstract _abstract">
				Disable the Red Hat Enterprise Linux kernel live patching solution by removing the live patching package.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Root permissions
					</li><li class="listitem">
						The live patching package is installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Select the live patching package.
					</p><pre class="literallayout"># <span class="strong strong"><strong>dnf list installed | grep kpatch-patch</strong></span>
kpatch-patch-5_14_0-1.x86_64        0-1.el9        @@commandline
…​</pre><p class="simpara">
						The example output above lists live patching packages that you installed.
					</p></li><li class="listitem"><p class="simpara">
						Remove the live patching package.
					</p><pre class="literallayout"># <span class="strong strong"><strong>dnf remove kpatch-patch-5_14_0-1.x86_64</strong></span></pre><p class="simpara">
						When a live patching package is removed, the kernel remains patched until the next reboot, but the kernel patch module is removed from disk. On future reboot, the corresponding kernel will no longer be patched.
					</p></li><li class="listitem">
						Reboot your system.
					</li><li class="listitem"><p class="simpara">
						Verify that the live patching package has been removed.
					</p><pre class="literallayout"># <span class="strong strong"><strong>dnf list installed | grep kpatch-patch</strong></span></pre><p class="simpara">
						The command displays no output if the package has been successfully removed.
					</p></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify that the kernel live patching solution is disabled.
					</p><pre class="literallayout"># <span class="strong strong"><strong>kpatch list</strong></span>
Loaded patch modules:</pre><p class="simpara">
						The example output shows that the kernel is not patched and the live patching solution is not active because there are no patch modules that are currently loaded.
					</p></li></ol></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					Currently, Red Hat does not support reverting live patches without rebooting your system. In case of any issues, contact our support team.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The <code class="literal">kpatch(1)</code> manual page
					</li><li class="listitem">
						<span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_software_with_the_dnf_tool/assembly_removing-rhel-9-content_managing-software-with-the-dnf-tool#proc_removing-installed-packages-with-yum_assembly_removing-rhel-9-content">Removing installed packages</a></span></em></span> in RHEL
					</li></ul></div></section><section class="section" id="uninstalling-the-kernel-patch-module_applying-patches-with-kernel-live-patching"><div class="titlepage"><div><div><h3 class="title">8.10. Uninstalling the kernel patch module</h3></div></div></div><p class="_abstract _abstract">
				Prevent the Red Hat Enterprise Linux kernel live patching solution from applying a kernel patch module on subsequent boots.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Root permissions
					</li><li class="listitem">
						A live patching package is installed.
					</li><li class="listitem">
						A kernel patch module is installed and loaded.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Select a kernel patch module:
					</p><pre class="literallayout"># <span class="strong strong"><strong>kpatch list</strong></span>
Loaded patch modules:
kpatch_5_14_0_1_0_1 [enabled]

Installed patch modules:
kpatch_5_14_0_1_0_1 (5.14.0-1.el9.x86_64)
…​</pre></li><li class="listitem"><p class="simpara">
						Uninstall the selected kernel patch module.
					</p><pre class="literallayout"># <span class="strong strong"><strong>kpatch uninstall kpatch_5_14_0_1_0_1</strong></span>
uninstalling kpatch_5_14_0_1_0_1 (5.14.0-1.el9.x86_64)</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Note that the uninstalled kernel patch module is still loaded:
							</p><pre class="literallayout"># <span class="strong strong"><strong>kpatch list</strong></span>
Loaded patch modules:
kpatch_5_14_0_1_0_1 [enabled]

Installed patch modules:
&lt;<span class="emphasis"><em>NO_RESULT</em></span>&gt;</pre><p class="simpara">
								When the selected module is uninstalled, the kernel remains patched until the next reboot, but the kernel patch module is removed from disk.
							</p></li></ul></div></li><li class="listitem">
						Reboot your system.
					</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify that the kernel patch module is uninstalled.
					</p><pre class="literallayout"># <span class="strong strong"><strong>kpatch list</strong></span>
Loaded patch modules:
…​</pre><p class="simpara">
						This example output shows no loaded or installed kernel patch modules, therefore the kernel is not patched and the kernel live patching solution is not active.
					</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The <code class="literal">kpatch(1)</code> manual page
					</li></ul></div></section><section class="section" id="disabling-kpatch-service_applying-patches-with-kernel-live-patching"><div class="titlepage"><div><div><h3 class="title">8.11. Disabling kpatch.service</h3></div></div></div><p class="_abstract _abstract">
				Prevent the Red Hat Enterprise Linux kernel live patching solution from applying all kernel patch modules globally on subsequent boots.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Root permissions
					</li><li class="listitem">
						A live patching package is installed.
					</li><li class="listitem">
						A kernel patch module is installed and loaded.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify <code class="literal">kpatch.service</code> is enabled.
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl is-enabled kpatch.service</strong></span>
enabled</pre></li><li class="listitem"><p class="simpara">
						Disable <code class="literal">kpatch.service</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl disable kpatch.service</strong></span>
Removed /etc/systemd/system/multi-user.target.wants/kpatch.service.</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Note that the applied kernel patch module is still loaded:
							</p><pre class="literallayout"># <span class="strong strong"><strong>kpatch list</strong></span>
Loaded patch modules:
kpatch_5_14_0_1_0_1 [enabled]

Installed patch modules:
kpatch_5_14_0_1_0_1 (5.14.0-1.el9.x86_64)</pre></li></ul></div></li><li class="listitem">
						Reboot your system.
					</li><li class="listitem"><p class="simpara">
						Optional: Verify the status of <code class="literal">kpatch.service</code>.
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl status kpatch.service</strong></span>
● kpatch.service - "Apply kpatch kernel patches"
   Loaded: loaded (/usr/lib/systemd/system/kpatch.service; disabled; vendor preset: disabled)
   Active: inactive (dead)</pre><p class="simpara">
						The example output testifies that <code class="literal">kpatch.service</code> has been disabled and is not running. Thereby, the kernel live patching solution is not active.
					</p></li><li class="listitem"><p class="simpara">
						Verify that the kernel patch module has been unloaded.
					</p><pre class="literallayout"># <span class="strong strong"><strong>kpatch list</strong></span>
Loaded patch modules:

Installed patch modules:
kpatch_5_14_0_1_0_1 (5.14.0-1.el9.x86_64)</pre><p class="simpara">
						The example output above shows that a kernel patch module is still installed but the kernel is not patched.
					</p></li></ol></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					Currently, Red Hat does not support reverting live patches without rebooting your system. In case of any issues, contact our support team.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The <code class="literal">kpatch(1)</code> manual page.
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/managing-systemd_configuring-basic-system-settings">Managing systemd</a>
					</li></ul></div></section></section><section class="chapter" id="keeping-kernel-panic-parameters-disabled-in-virtualized-environments_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 9. Keeping kernel panic parameters disabled in virtualized environments</h2></div></div></div><p class="_abstract _abstract">
			When configuring a Virtual Machine in RHEL 9, you should not enable the <code class="literal">softlockup_panic</code> and <code class="literal">nmi_watchdog</code> kernel parameters, because the Virtual Machine might suffer from a spurious soft lockup. And that should not require a kernel panic.
		</p><p>
			Find the reasons behind this advice in the following sections.
		</p><section class="section" id="what-is-a-soft-lockup_keeping-kernel-panic-parameters-disabled-in-virtualized-environments"><div class="titlepage"><div><div><h3 class="title">9.1. What is a soft lockup</h3></div></div></div><p class="_abstract _abstract">
				A soft lockup is a situation usually caused by a bug, when a task is executing in kernel space on a CPU without rescheduling. The task also does not allow any other task to execute on that particular CPU. As a result, a warning is displayed to a user through the system console. This problem is also referred to as the soft lockup firing.
			</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/articles/371803">What is a CPU soft lockup? </a></span></em></span>
					</li></ul></div></section><section class="section" id="parameters-controlling-kernel-panic_keeping-kernel-panic-parameters-disabled-in-virtualized-environments"><div class="titlepage"><div><div><h3 class="title">9.2. Parameters controlling kernel panic</h3></div></div></div><p class="_abstract _abstract">
				The following kernel parameters can be set to control a system’s behavior when a soft lockup is detected.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">softlockup_panic</span></dt><dd><p class="simpara">
							Controls whether or not the kernel will panic when a soft lockup is detected.
						</p><rh-table><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 29%; " class="col_1"><!--Empty--><col style="width: 14%; " class="col_2"><!--Empty--><col style="width: 57%; " class="col_3"><!--Empty--></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm139825296707440" scope="col">Type</th><th style="text-align: left; vertical-align: top; " id="idm139825296706352" scope="col">Value</th><th style="text-align: left; vertical-align: top; " id="idm139825296705264" scope="col">Effect</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm139825296707440"> <p>
											Integer
										</p>
										 </td><td style="text-align: left; vertical-align: top; " headers="idm139825296706352"> <p>
											0
										</p>
										 </td><td style="text-align: left; vertical-align: top; " headers="idm139825296705264"> <p>
											kernel does not panic on soft lockup
										</p>
										 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm139825296707440"> <p>
											Integer
										</p>
										 </td><td style="text-align: left; vertical-align: top; " headers="idm139825296706352"> <p>
											1
										</p>
										 </td><td style="text-align: left; vertical-align: top; " headers="idm139825296705264"> <p>
											kernel panics on soft lockup
										</p>
										 </td></tr></tbody></table></rh-table><p class="simpara">
							By default, on RHEL8 this value is 0.
						</p><p class="simpara">
							The system needs to detect a hard lockup first to be able to panic. The detection is controlled by the <code class="literal">nmi_watchdog</code> parameter.
						</p></dd><dt><span class="term">nmi_watchdog</span></dt><dd><p class="simpara">
							Controls whether lockup detection mechanisms (<code class="literal">watchdogs</code>) are active or not. This parameter is of integer type.
						</p><rh-table><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm139825304344352" scope="col">Value</th><th style="text-align: left; vertical-align: top; " id="idm139825304343264" scope="col">Effect</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm139825304344352"> <p>
											0
										</p>
										 </td><td style="text-align: left; vertical-align: top; " headers="idm139825304343264"> <p>
											disables lockup detector
										</p>
										 </td></tr><tr><td style="text-align: left; vertical-align: top; " headers="idm139825304344352"> <p>
											1
										</p>
										 </td><td style="text-align: left; vertical-align: top; " headers="idm139825304343264"> <p>
											enables lockup detector
										</p>
										 </td></tr></tbody></table></rh-table><p class="simpara">
							The hard lockup detector monitors each CPU for its ability to respond to interrupts.
						</p></dd><dt><span class="term">watchdog_thresh</span></dt><dd><p class="simpara">
							Controls frequency of watchdog <code class="literal">hrtimer</code>, NMI events, and soft/hard lockup thresholds.
						</p><rh-table><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th style="text-align: left; vertical-align: top; " id="idm139825297059152" scope="col">Default threshold</th><th style="text-align: left; vertical-align: top; " id="idm139825297058064" scope="col">Soft lockup threshold</th></tr></thead><tbody><tr><td style="text-align: left; vertical-align: top; " headers="idm139825297059152"> <p>
											10 seconds
										</p>
										 </td><td style="text-align: left; vertical-align: top; " headers="idm139825297058064"> <p>
											2 * <code class="literal">watchdog_thresh</code>
										</p>
										 </td></tr></tbody></table></rh-table><p class="simpara">
							Setting this parameter to zero disables lockup detection altogether.
						</p></dd></dl></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://www.kernel.org/doc/Documentation/lockup-watchdogs.txt">Softlockup detector and hardlockup detector</a></span></em></span>
					</li><li class="listitem">
						<span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://www.kernel.org/doc/Documentation/sysctl/kernel.txt">Kernel sysctl</a></span></em></span>
					</li></ul></div></section><section class="section" id="spurious-soft-lockups-in-virtualized-environments_keeping-kernel-panic-parameters-disabled-in-virtualized-environments"><div class="titlepage"><div><div><h3 class="title">9.3. Spurious soft lockups in virtualized environments</h3></div></div></div><p class="_abstract _abstract">
				The soft lockup firing on physical hosts, as described in <a class="link" href="#what-is-a-soft-lockup_keeping-kernel-panic-parameters-disabled-in-virtualized-environments" title="9.1. What is a soft lockup">What is a soft lockup</a>, usually represents a kernel or hardware bug. The same phenomenon happening on guest operating systems in virtualized environments may represent a false warning.
			</p><p>
				Heavy work-load on a host or high contention over some specific resource such as memory, usually causes a spurious soft lockup firing. This is because the host may schedule out the guest CPU for a period longer than 20 seconds. Then when the guest CPU is again scheduled to run on the host, it experiences a <span class="emphasis"><em>time jump</em></span> which triggers due timers. The timers include also watchdog <code class="literal">hrtimer</code>, which can consequently report a soft lockup on the guest CPU.
			</p><p>
				Because a soft lockup in a virtualized environment may be spurious, you should not enable the kernel parameters that would cause a system panic when a soft lockup is reported on a guest CPU.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					To understand soft lockups in guests, it is essential to know that the host schedules the guest as a task, and the guest then schedules its own tasks.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_and_managing_virtualization/index#rhel-virtual-machine-components-and-their-interaction_introducing-virtualization-in-rhel">Virtual machine components and their interaction</a></span></em></span>
					</li></ul></div></section></section><section class="chapter" id="adjusting-kernel-parameters-for-database-servers_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 10. Adjusting kernel parameters for database servers</h2></div></div></div><p class="_abstract _abstract">
			There are different sets of kernel parameters which can affect performance of specific database applications. To secure efficient operation of database servers and databases, configure the respective kernel parameters accordingly.
		</p><section class="section" id="introduction-to-databases_adjusting-kernel-parameters-for-database-servers"><div class="titlepage"><div><div><h3 class="title">10.1. Introduction to database servers</h3></div></div></div><p class="_abstract _abstract">
				A database server is a service that provides features of a database management system (DBMS). DBMS provides utilities for database administration and interacts with end users, applications, and databases.
			</p><p>
				Red Hat Enterprise Linux 9 provides the following database management systems:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="strong strong"><strong>MariaDB 10.5</strong></span>
					</li><li class="listitem">
						<span class="strong strong"><strong>MariaDB 10.11</strong></span> - available since RHEL 9.4
					</li><li class="listitem">
						<span class="strong strong"><strong>MySQL 8.0</strong></span>
					</li><li class="listitem">
						<span class="strong strong"><strong>PostgreSQL 13</strong></span>
					</li><li class="listitem">
						<span class="strong strong"><strong>PostgreSQL 15</strong></span> - available since RHEL 9.2
					</li><li class="listitem">
						<span class="strong strong"><strong>PostgreSQL 16</strong></span> - available since RHEL 9.4
					</li><li class="listitem">
						<span class="strong strong"><strong>Redis 6</strong></span>
					</li></ul></div></section><section class="section" id="parameters-affecting-performance-of-database-applications_adjusting-kernel-parameters-for-database-servers"><div class="titlepage"><div><div><h3 class="title">10.2. Parameters affecting performance of database applications</h3></div></div></div><p class="_abstract _abstract">
				The following kernel parameters affect performance of database applications.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">fs.aio-max-nr</span></dt><dd><p class="simpara">
							Defines the maximum number of asynchronous I/O operations the system can handle on the server.
						</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								Raising the <code class="literal">fs.aio-max-nr</code> parameter produces no additional changes beyond increasing the aio limit.
							</p></div></rh-alert></dd><dt><span class="term">fs.file-max</span></dt><dd><p class="simpara">
							Defines the maximum number of file handles (temporary file names or IDs assigned to open files) the system supports at any instance.
						</p><p class="simpara">
							The kernel dynamically allocates file handles whenever a file handle is requested by an application. The kernel however does not free these file handles when they are released by the application. The kernel recycles these file handles instead. This means that over time the total number of allocated file handles will increase even though the number of currently used file handles may be low.
						</p></dd><dt><span class="term">kernel.shmall</span></dt><dd>
							Defines the total number of shared memory pages that can be used system-wide. To use the entire main memory, the value of the <code class="literal">kernel.shmall</code> parameter should be ≤ total main memory size.
						</dd><dt><span class="term">kernel.shmmax</span></dt><dd>
							Defines the maximum size in bytes of a single shared memory segment that a Linux process can allocate in its virtual address space.
						</dd><dt><span class="term">kernel.shmmni</span></dt><dd>
							Defines the maximum number of shared memory segments the database server is able to handle.
						</dd><dt><span class="term">net.ipv4.ip_local_port_range</span></dt><dd>
							Defines the port range the system can use for programs which want to connect to a database server without a specific port number.
						</dd><dt><span class="term">net.core.rmem_default</span></dt><dd>
							Defines the default receive socket memory through Transmission Control Protocol (TCP).
						</dd><dt><span class="term">net.core.rmem_max</span></dt><dd>
							Defines the maximum receive socket memory through Transmission Control Protocol (TCP).
						</dd><dt><span class="term">net.core.wmem_default</span></dt><dd>
							Defines the default send socket memory through Transmission Control Protocol (TCP).
						</dd><dt><span class="term">net.core.wmem_max</span></dt><dd>
							Defines the maximum send socket memory through Transmission Control Protocol (TCP).
						</dd><dt><span class="term">vm.dirty_bytes / vm.dirty_ratio</span></dt><dd>
							Defines a threshold in bytes / in percentage of dirty-able memory at which a process generating dirty data is started in the <code class="literal">write()</code> function.
						</dd></dl></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					<span class="strong strong"><strong>Either</strong></span> <code class="literal">vm.dirty_bytes</code> <span class="strong strong"><strong>or</strong></span> <code class="literal">vm.dirty_ratio</code> can be specified at a time.
				</p></div></rh-alert><div class="variablelist"><dl class="variablelist"><dt><span class="term">vm.dirty_background_bytes / vm.dirty_background_ratio</span></dt><dd>
							Defines a threshold in bytes / in percentage of dirty-able memory at which the kernel tries to actively write dirty data to hard-disk.
						</dd></dl></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					<span class="strong strong"><strong>Either</strong></span> <code class="literal">vm.dirty_background_bytes</code> <span class="strong strong"><strong>or</strong></span> <code class="literal">vm.dirty_background_ratio</code> can be specified at a time.
				</p></div></rh-alert><div class="variablelist"><dl class="variablelist"><dt><span class="term">vm.dirty_writeback_centisecs</span></dt><dd><p class="simpara">
							Defines a time interval between periodic wake-ups of the kernel threads responsible for writing dirty data to hard-disk.
						</p><p class="simpara">
							This kernel parameters measures in 100th’s of a second.
						</p></dd><dt><span class="term">vm.dirty_expire_centisecs</span></dt><dd><p class="simpara">
							Defines the time after which dirty data is old enough to be written to hard-disk.
						</p><p class="simpara">
							This kernel parameters measures in 100th’s of a second.
						</p></dd></dl></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/articles/45002#control-parameters-4">Dirty pagecache writeback and vm.dirty parameters</a></span></em></span>
					</li></ul></div></section></section><section class="chapter" id="getting-started-with-kernel-logging_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 11. Getting started with kernel logging</h2></div></div></div><p class="_abstract _abstract">
			Log files are files that contain messages about the system, including the kernel, services, and applications running on it. The logging system in Red Hat Enterprise Linux is based on the built-in <span class="strong strong"><strong>syslog</strong></span> protocol. Various utilities use this system to record events and organize them into log files. These files are useful when auditing the operating system or troubleshooting problems.
		</p><section class="section" id="what-is-the-kernel-ring-buffer_getting-started-with-kernel-logging"><div class="titlepage"><div><div><h3 class="title">11.1. What is the kernel ring buffer</h3></div></div></div><p class="_abstract _abstract">
				During the boot process, the console provides a lot of important information about the initial phase of the system startup. To avoid loss of the early messages the kernel utilizes what is called a ring buffer. This buffer stores all messages, including boot messages, generated by the <code class="literal">printk()</code> function within the kernel code. The messages from the kernel ring buffer are then read and stored in log files on permanent storage, for example, by the <code class="literal">syslog</code> service.
			</p><p>
				The buffer mentioned above is a cyclic data structure which has a fixed size, and is hard-coded into the kernel. Users can display data stored in the kernel ring buffer through the <code class="literal">dmesg</code> command or the <code class="literal">/var/log/boot.log</code> file. When the ring buffer is full, the new data overwrites the old.
			</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">syslog(2)</code> and <code class="literal">dmesg(1)</code> manual page
					</li></ul></div></section><section class="section" id="role-of-printk-on-log-levels-and-kernel-logging_getting-started-with-kernel-logging"><div class="titlepage"><div><div><h3 class="title">11.2. Role of printk on log-levels and kernel logging</h3></div></div></div><p class="_abstract _abstract">
				Each message the kernel reports has a log-level associated with it that defines the importance of the message. The kernel ring buffer, as described in <a class="link" href="#what-is-the-kernel-ring-buffer_getting-started-with-kernel-logging" title="11.1. What is the kernel ring buffer">What is the kernel ring buffer</a>, collects kernel messages of all log-levels. It is the <code class="literal">kernel.printk</code> parameter that defines what messages from the buffer are printed to the console.
			</p><p>
				The log-level values break down in this order:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">0</span></dt><dd>
							Kernel emergency. The system is unusable.
						</dd><dt><span class="term">1</span></dt><dd>
							Kernel alert. Action must be taken immediately.
						</dd><dt><span class="term">2</span></dt><dd>
							Condition of the kernel is considered critical.
						</dd><dt><span class="term">3</span></dt><dd>
							General kernel error condition.
						</dd><dt><span class="term">4</span></dt><dd>
							General kernel warning condition.
						</dd><dt><span class="term">5</span></dt><dd>
							Kernel notice of a normal but significant condition.
						</dd><dt><span class="term">6</span></dt><dd>
							Kernel informational message.
						</dd><dt><span class="term">7</span></dt><dd>
							Kernel debug-level messages.
						</dd></dl></div><p>
				By default, <code class="literal">kernel.printk</code> in RHEL 9 contains the following four values:
			</p><pre class="literallayout"># <span class="strong strong"><strong>sysctl kernel.printk</strong></span>
kernel.printk = 7	4	1	7</pre><p>
				The four values define the following, in order:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Console log-level, defines the lowest priority of messages printed to the console.
					</li><li class="listitem">
						Default log-level for messages without an explicit log-level attached to them.
					</li><li class="listitem">
						Sets the lowest possible log-level configuration for the console log-level.
					</li><li class="listitem"><p class="simpara">
						Sets default value for the console log-level at boot time.
					</p><p class="simpara">
						Each of these values above defines a different rule for handling error messages.
					</p></li></ol></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					The default <code class="literal">7 4 1 7</code> <code class="literal">printk</code> value allows for better debugging of kernel activity. However, when coupled with a serial console, this <code class="literal">printk</code> setting might cause intense I/O bursts that might lead to a RHEL system becoming temporarily unresponsive. To avoid these situations, setting a <code class="literal">printk</code> value of <code class="literal">4 4 1 7</code> typically works, but at the expense of losing the extra debugging information.
				</p><p>
					Also note that certain kernel command line parameters, such as <code class="literal">quiet</code> or <code class="literal">debug</code>, change the default <code class="literal">kernel.printk</code> values.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">syslog(2)</code> manual page
					</li></ul></div></section></section><section class="chapter" id="assembly_reinstalling-grub_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 12. Reinstalling GRUB</h2></div></div></div><p>
			You can reinstall the GRUB boot loader to fix certain problems, usually caused by an incorrect installation of GRUB, missing files, or a broken system. You can resolve these issues by restoring the missing files and updating the boot information.
		</p><p>
			Reasons to reinstall GRUB:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Upgrading the GRUB boot loader packages.
				</li><li class="listitem">
					Adding the boot information to another drive.
				</li><li class="listitem">
					The user requires the GRUB boot loader to control installed operating systems. However, some operating systems are installed with their own boot loaders and reinstalling GRUB returns control to the desired operating system.
				</li></ul></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
				GRUB restores files only if they are not corrupted.
			</p></div></rh-alert><section class="section" id="proc_reinstalling-grub-on-bios-based-machines_assembly_reinstalling-grub"><div class="titlepage"><div><div><h3 class="title">12.1. Reinstalling GRUB on BIOS-based machines</h3></div></div></div><p>
				You can reinstall the GRUB boot loader on your BIOS-based system. Always reinstall GRUB after updating the GRUB packages.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					This overwrites the existing GRUB to install the new GRUB. Ensure that the system does not cause data corruption or boot crash during the installation.
				</p></div></rh-alert><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Reinstall GRUB on the device where it is installed. For example, if <code class="literal">sda</code> is your device:
					</p><pre class="literallayout"># <span class="strong strong"><strong>grub2-install <span class="emphasis"><em>/dev/sda</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Reboot your system for the changes to take effect:
					</p><pre class="literallayout"># <span class="strong strong"><strong>reboot</strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">grub-install(1)</code> man page on your system
					</li></ul></div></section><section class="section" id="proc_reinstalling-grub-on-uefi-based-machines_assembly_reinstalling-grub"><div class="titlepage"><div><div><h3 class="title">12.2. Reinstalling GRUB on UEFI-based machines</h3></div></div></div><p>
				You can reinstall the GRUB boot loader on your UEFI-based system.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					Ensure that the system does not cause data corruption or boot crash during the installation.
				</p></div></rh-alert><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Reinstall the <code class="literal">grub2-efi</code> and <code class="literal">shim</code> boot loader files:
					</p><pre class="literallayout"># <span class="strong strong"><strong>yum reinstall grub2-efi shim</strong></span></pre></li><li class="listitem"><p class="simpara">
						Reboot your system for the changes to take effect:
					</p><pre class="literallayout"># <span class="strong strong"><strong>reboot</strong></span></pre></li></ol></div></section><section class="section" id="reinstalling-grub-on-ibm-power-machines_assembly_reinstalling-grub"><div class="titlepage"><div><div><h3 class="title">12.3. Reinstalling GRUB on IBM Power machines</h3></div></div></div><p>
				You can reinstall the GRUB boot loader on the Power PC Reference Platform (PReP) boot partition of your IBM Power system. Always reinstall GRUB after updating the GRUB packages.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					This overwrites the existing GRUB to install the new GRUB. Ensure that the system does not cause data corruption or boot crash during the installation.
				</p></div></rh-alert><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Determine the disk partition that stores GRUB:
					</p><pre class="screen"># <span class="strong strong"><strong>bootlist -m normal -o</strong></span>
<span class="emphasis"><em>sda1</em></span></pre></li><li class="listitem"><p class="simpara">
						Reinstall GRUB on the disk partition:
					</p><pre class="screen"># <span class="strong strong"><strong>grub2-install <span class="emphasis"><em>partition</em></span></strong></span></pre><p class="simpara">
						Replace <code class="literal"><span class="emphasis"><em>partition</em></span></code> with the GRUB partition that you found in the previous step, such as <code class="literal">/dev/sda1</code>.
					</p></li><li class="listitem"><p class="simpara">
						Reboot your system for the changes to take effect:
					</p><pre class="screen"># <span class="strong strong"><strong>reboot</strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">grub-install(1)</code> man page on your system
					</li></ul></div></section><section class="section" id="proc_resetting-grub_assembly_reinstalling-grub"><div class="titlepage"><div><div><h3 class="title">12.4. Resetting GRUB</h3></div></div></div><p>
				Resetting GRUB completely removes all GRUB configuration files and system settings and reinstalls the bootloader. You can reset all the configuration settings to their default values, and thus fix failures caused by corrupted files and incorrect configuration.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					The following procedure will remove all the customization the user has made.
				</p></div></rh-alert><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Remove the configuration files.
					</p><pre class="literallayout"># <span class="strong strong"><strong>rm /etc/grub.d/</strong></span>*
# <span class="strong strong"><strong>rm /etc/sysconfig/grub</strong></span></pre></li><li class="listitem"><p class="simpara">
						Reinstall packages.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								On BIOS-based machines, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>yum reinstall grub2-tools</strong></span></pre></li><li class="listitem"><p class="simpara">
								On UEFI-based machines, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>yum reinstall grub2-efi shim grub2-tools</strong></span></pre></li></ul></div></li><li class="listitem"><p class="simpara">
						Rebuild the <code class="literal filename">grub.cfg</code> file for the changes to take effect.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								On BIOS-based machines, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>grub2-mkconfig -o /boot/grub2/grub.cfg</strong></span></pre></li><li class="listitem"><p class="simpara">
								On UEFI-based machines, enter:
							</p><pre class="literallayout"># <span class="strong strong"><strong>grub2-mkconfig -o /boot/grub2/grub.cfg</strong></span></pre></li></ul></div></li><li class="listitem">
						Follow <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#assembly_reinstalling-grub_managing-monitoring-and-updating-the-kernel">Reinstalling GRUB</a> procedure to restore GRUB on the <code class="literal">/boot/</code> partition.
					</li></ol></div></section></section><section class="chapter" id="installing-kdump_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 13. Installing kdump</h2></div></div></div><p class="_abstract _abstract">
			The <code class="literal">kdump</code> service is installed and activated by default on the new versions of Red Hat Enterprise Linux 9 installations. You will learn what the <code class="literal">kdump</code> is and its installation procedures if it is not enabled by default.
		</p><section class="section" id="what-is-kdumpinstalling-kdump"><div class="titlepage"><div><div><h3 class="title">13.1. What is kdump</h3></div></div></div><p class="_abstract _abstract">
				<code class="literal service">kdump</code> is a service that provides a crash dumping mechanism and generates a dump file, known as crash dump or a <code class="literal">vmcore</code> file. The <code class="literal">vmcore</code> file has the contents of the system memory that helps in analysis and troubleshooting. <code class="literal service">kdump</code> uses the <code class="literal">kexec</code> system call to boot into the second kernel, a <span class="emphasis"><em>capture kernel</em></span> without a reboot and then captures the contents of the crashed kernel’s memory. These contents are saved into a file. The second kernel is available in a reserved part of the system memory.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					A kernel crash dump can be the only information available if a system failure occur. Therefore, operational <code class="literal service">kdump</code> is important in mission-critical environments. Red Hat advises to regularly update and test <code class="literal package">kexec-tools</code> in your normal kernel update cycle. This is important when you install new kernel features.
				</p></div></rh-alert><p>
				You can enable <code class="literal service">kdump</code> for all installed kernels on a machine or for specified kernels only. This is useful when there are multiple kernels used on a machine, some of which are stable enough that there is no concern that they could crash. The system creates a default <code class="literal">/etc/kdump.conf</code> file when you install <code class="literal">kdump</code>. The <code class="literal">/etc/kdump.conf</code> file includes the default minimum <code class="literal">kdump</code> configuration, which you can edit to customize the <code class="literal">kdump</code> configuration.
			</p></section><section class="section" id="installing-kdump-anacondainstalling-kdump"><div class="titlepage"><div><div><h3 class="title">13.2. Installing kdump using Anaconda</h3></div></div></div><p class="_abstract _abstract">
				The <span class="strong strong"><strong>Anaconda</strong></span> installer provides a graphical interface screen for <code class="literal">kdump</code> configuration during an interactive installation. You can enable <code class="literal">kdump</code> and reserve the required amount of memory.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						On the Anaconda installer, click <span class="strong strong"><strong>KDUMP</strong></span> and enable <code class="literal">kdump</code>:
					</li><li class="listitem">
						In <span class="strong strong"><strong>Kdump Memory Reservation</strong></span>, select <span class="strong strong"><strong>Manual</strong></span>` if you must customize the memory reserve.
					</li><li class="listitem"><p class="simpara">
						In <span class="strong strong"><strong>KDUMP &gt; Memory To Be Reserved (MB)</strong></span>, set the required memory reserve for <code class="literal">kdump</code>.
					</p><p id="installing-kdump-command-lineinstalling-kdump" class="simpara">
						= Installing kdump on the command line
					</p></li></ol></div><p class="_abstract _abstract">
				Installation options such as custom <span class="strong strong"><strong>Kickstart</strong></span> installations, in some cases does <span class="strong strong"><strong>not</strong></span> install or enable <code class="literal">kdump</code> by default. The following procedure helps you enable <code class="literal">kdump</code> in this case.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						An active RHEL subscription.
					</li><li class="listitem">
						A repository containing the <code class="literal package">kexec-tools</code> package for your system CPU architecture.
					</li><li class="listitem">
						Fulfilled requirements for <code class="literal">kdump</code> configurations and targets. For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel">Supported kdump configurations and targets</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Check if <code class="literal">kdump</code> is installed on your system:
					</p><pre class="literallayout"># rpm -q kexec-tools</pre><p class="simpara">
						Output if the package is installed:
					</p><pre class="literallayout"># kexec-tools-2.0.22-13.el9.x86_64</pre><p class="simpara">
						Output if the package is not installed:
					</p><pre class="literallayout">package kexec-tools is not installed</pre></li><li class="listitem"><p class="simpara">
						Install <code class="literal">kdump</code> and other necessary packages:
					</p><pre class="literallayout"># dnf install kexec-tools</pre></li></ol></div></section></section><section class="chapter" id="configuring-kdump-on-the-command-line_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 14. Configuring kdump on the command line</h2></div></div></div><p class="_abstract _abstract">
			The memory for <code class="literal">kdump</code> is reserved during the system boot. The memory size is configured in the system’s Grand Unified Bootloader (GRUB) configuration file. The memory size depends on the <code class="literal">crashkernel=</code> value specified in the configuration file and the size of the system’s physical memory.
		</p><section class="section" id="estimating-the-kdump-size_configuring-kdump-on-the-command-line"><div class="titlepage"><div><div><h3 class="title">14.1. Estimating the kdump size</h3></div></div></div><p class="_abstract _abstract">
				When planning and building your <code class="literal">kdump</code> environment, it is important to know the space required by the crash dump file.
			</p><p>
				The <code class="literal">makedumpfile --mem-usage</code> command estimates the space required by the crash dump file. It generates a memory usage report. The report helps you decide the dump level and the pages that are safe to exclude.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Enter the following command to generate a memory usage report:
					</p><pre class="literallayout"># <span class="strong strong"><strong>makedumpfile --mem-usage /proc/kcore</strong></span>


TYPE        PAGES    EXCLUDABLE    DESCRIPTION
-------------------------------------------------------------
ZERO          501635      yes        Pages filled with zero
CACHE         51657       yes        Cache pages
CACHE_PRIVATE 5442        yes        Cache pages + private
USER          16301       yes        User process pages
FREE          77738211    yes        Free pages
KERN_DATA     1333192     no         Dumpable kernel data</pre></li></ul></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					The <code class="literal">makedumpfile --mem-usage</code> command reports required memory in pages. This means that you must calculate the size of memory in use against the kernel page size.
				</p><p>
					By default the RHEL kernel uses 4 KB sized pages on AMD64 and Intel 64 CPU architectures, and 64 KB sized pages on IBM POWER architectures.
				</p></div></rh-alert></section><section class="section" id="configuring-kdump-memory-usage-on-rhel-9_configuring-kdump-on-the-command-line"><div class="titlepage"><div><div><h3 class="title">14.2. Configuring kdump memory usage on RHEL 9</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">kexec-tools</code> package maintains the default <code class="literal">crashkernel=</code> memory reservation values. The <code class="literal">kdump</code> service uses the default value to reserve the crash kernel memory for each kernel. The default value can also serve as the reference base value to estimate the required memory size when you set the <code class="literal">crashkernel=</code> value manually. The minimum size of the crash kernel can vary depending on the hardware and machine specifications.
			</p><p>
				The automatic memory allocation for <code class="literal">kdump</code> also varies based on the system hardware architecture and available memory size. For example, on AMD64 and Intel 64-bit architectures, the default value for the <code class="literal">crashkernel=</code> parameter will work only when the available memory is more than 1 GB. The <code class="literal">kexec-tools</code> utility configures the following default memory reserves on AMD64 and Intel 64-bit architecture:
			</p><pre class="screen">crashkernel=1G-4G:192M,4G-64G:256M,64G:512M</pre><p>
				You can also run <code class="literal">kdumpctl estimate</code> to get an approximate value without triggering a crash. The estimated <code class="literal">crashkernel=</code> value might not be an exact one but can serve as a reference to set an appropriate <code class="literal">crashkernel=</code> value.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The <code class="literal">crashkernel=auto</code> option in the boot command line is no longer supported on RHEL 9 and later releases.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have root permissions on the system.
					</li><li class="listitem">
						You have fulfilled <code class="literal">kdump</code> requirements for configurations and targets. For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_monitoring_and_updating_the_kernel/supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel">Supported kdump configurations and targets</a>.
					</li><li class="listitem">
						You have installed the <code class="literal">zipl</code> utility if it is the IBM Z system.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Configure the default value for crash kernel:
					</p><pre class="screen"># kdumpctl reset-crashkernel --kernel=ALL</pre><p class="simpara">
						When configuring the <code class="literal">crashkernel=</code> value, test the configuration by rebooting the system with <code class="literal">kdump</code> enabled. If the <code class="literal">kdump</code> kernel fails to boot, increase the memory size gradually to set an acceptable value.
					</p></li><li class="listitem"><p class="simpara">
						To use a custom <code class="literal">crashkernel=</code> value:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Configure the required memory reserve.
							</p><pre class="screen">crashkernel=192M</pre><p class="simpara">
								Optionally, you can set the amount of reserved memory to a variable depending on the total amount of installed memory by using the syntax <code class="literal">crashkernel=<span class="emphasis"><em>&lt;range1&gt;:&lt;size1&gt;,&lt;range2&gt;:&lt;size2&gt;</em></span></code>. For example:
							</p><pre class="screen">crashkernel=1G-4G:192M,2G-64G:256M</pre><p class="simpara">
								The example reserves 192 MB of memory if the total amount of system memory is 1 GB or higher and lower than 4 GB. If the total amount of memory is more than 4 GB, 256 MB is reserved for <code class="literal">kdump</code>.
							</p></li><li class="listitem"><p class="simpara">
								Optional: Offset the reserved memory.
							</p><p class="simpara">
								Some systems require to reserve memory with a certain fixed offset since <code class="literal">crashkernel</code> reservation is very early, and it wants to reserve some area for special usage. If the offset is set, the reserved memory begins there. To offset the reserved memory, use the following syntax:
							</p><pre class="screen">crashkernel=192M@16M</pre><p class="simpara">
								The example reserves 192 MB of memory starting at 16 MB (physical address 0x01000000). If you offset to 0 or do not specify a value, <code class="literal">kdump</code> offsets the reserved memory automatically. You can also offset memory when setting a variable memory reservation by specifying the offset as the last value. For example, <code class="literal">crashkernel=1G-4G:192M,2G-64G:256M@16M</code>.
							</p></li><li class="listitem"><p class="simpara">
								Update the bootloader configuration:
							</p><pre class="screen"># grubby --update-kernel ALL --args "crashkernel=<span class="emphasis"><em>&lt;custom-value&gt;</em></span>"</pre><p class="simpara">
								The <code class="literal"><span class="emphasis"><em>&lt;custom-value&gt;</em></span></code> must contain the custom <code class="literal option">crashkernel=</code> value that you have configured for the crash kernel.
							</p></li></ol></div></li><li class="listitem"><p class="simpara">
						Reboot for changes to take effect:
					</p><pre class="screen"># reboot</pre></li></ol></div><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Verification</div><div><p>
					The commands to test <code class="literal">kdump</code> configuration will cause the kernel to crash with data loss. Follow the instructions with care. You must not use an active production system to test the kdump configuration.
				</p></div></rh-alert><p>
				Cause the kernel to crash by activating the <code class="literal">sysrq</code> key. The <code class="literal">address-YYYY-MM-DD-HH:MM:SS/vmcore</code> file is saved to the target location as specified in the <code class="literal">/etc/kdump.conf</code> file. If you select the default target location, the <code class="literal">vmcore</code> file is saved in the partition mounted under <code class="literal">/var/crash/</code>.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Activate the <code class="literal">sysrq</code> key to boot into the <code class="literal">kdump</code> kernel:
					</p><pre class="screen"># echo c &gt; /proc/sysrq-trigger</pre><p class="simpara">
						The command causes kernel to crash and reboots the kernel if required.
					</p></li><li class="listitem">
						Display the <code class="literal">/etc/kdump.conf</code> file and check if the <code class="literal">vmcore</code> file is saved in the target destination.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/32726">How to manually modify the boot parameter in grub before the system boots</a>.
					</li><li class="listitem">
						<code class="literal">grubby(8)</code> man page on your system.
					</li></ul></div></section><section class="section" id="configuring-the-kdump-target_configuring-kdump-on-the-command-line"><div class="titlepage"><div><div><h3 class="title">14.3. Configuring the kdump target</h3></div></div></div><p class="_abstract _abstract">
				The crash dump is usually stored as a file in a local file system, written directly to a device. Optionally, you can set up for the crash dump to be sent over a network by using the <code class="literal">NFS</code> or <code class="literal">SSH</code> protocols. Only one of these options to preserve a crash dump file can be set at a time. The default behavior is to store it in the <code class="literal">/var/crash/</code> directory of the local file system.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have root permissions on the system.
					</li><li class="listitem">
						Fulfilled requirements for <code class="literal">kdump</code> configurations and targets. For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel">Supported kdump configurations and targets</a>.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To store the crash dump file in <code class="literal">/var/crash/</code> directory of the local file system, edit the <code class="literal">/etc/kdump.conf</code> file and specify the path:
					</p><pre class="literallayout">path /var/crash</pre><p class="simpara">
						The option <code class="literal">path /var/crash</code> represents the path to the file system in which <code class="literal">kdump</code> saves the crash dump file.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									When you specify a dump target in the <code class="literal">/etc/kdump.conf</code> file, then the path is <span class="strong strong"><strong>relative</strong></span> to the specified dump target.
								</li><li class="listitem">
									When you do not specify a dump target in the <code class="literal">/etc/kdump.conf</code> file, then the path represents the <span class="strong strong"><strong>absolute</strong></span> path from the root directory.
								</li></ul></div></div></rh-alert><p class="simpara">
						Depending on what is mounted in the current system, the dump target and the adjusted dump path are configured automatically.
					</p></li><li class="listitem"><p class="simpara">
						To secure the crash dump file and the accompanying files produced by <code class="literal">kdump</code>, you should set up proper attributes for the target destination directory, such as user permissions and SELinux contexts. Additionally, you can define a script, for example <code class="literal">kdump_post.sh</code> in the <code class="literal">kdump.conf</code> file as follows:
					</p><pre class="literallayout">kdump_post &lt;path_to_kdump_post.sh&gt;</pre><p class="simpara">
						The <code class="literal">kdump_post</code> directive specifies a shell script or a command that executes <span class="strong strong"><strong>after</strong></span> <code class="literal">kdump</code> has completed capturing and saving a crash dump to the specified destination. You can use this mechanism to extend the functionality of <code class="literal">kdump</code> to perform actions including the adjustments in file permissions.
					</p></li><li class="listitem">
						The <code class="literal">kdump</code> target configuration
					</li></ul></div><pre class="literallayout"># *grep -v ^# /etc/kdump.conf | grep -v ^$*
ext4 /dev/mapper/vg00-varcrashvol
path /var/crash
core_collector makedumpfile -c --message-level 1 -d 31</pre><p>
				Here, the dump target is specified (<code class="literal">ext4 /dev/mapper/vg00-varcrashvol</code>), and therefore mounted at <code class="literal">/var/crash</code>. The <code class="literal">path</code> option is also set to <code class="literal">/var/crash</code>, so the <code class="literal">kdump</code> saves the <code class="literal">vmcore</code> file in the <code class="literal">/var/crash/var/crash</code> directory.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To change the local directory for saving the crash dump, edit the <code class="literal">/etc/kdump.conf</code> configuration file as a <code class="literal">root</code> user:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Remove the hash sign (<code class="literal">#</code>) from the beginning of the <code class="literal">#path /var/crash</code> line.
							</li><li class="listitem"><p class="simpara">
								Replace the value with the intended directory path. For example:
							</p><pre class="literallayout">path /usr/local/cores</pre><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
									In Red Hat Enterprise Linux 9, the directory defined as the <code class="literal">kdump</code> target using the <code class="literal">path</code> directive must exist when the <code class="literal">kdump</code> <code class="literal">systemd</code> service starts to avoid failures. This behavior is different from versions earlier than RHEL, where the directory is created automatically if it did not exist when the service started.
								</p></div></rh-alert></li></ol></div></li><li class="listitem"><p class="simpara">
						To write the file to a different partition, edit the <code class="literal">/etc/kdump.conf</code> configuration file:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Remove the hash sign (<code class="literal">#</code>) from the beginning of the <code class="literal">#ext4</code> line, depending on your choice.
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										device name (the <code class="literal">#ext4 /dev/vg/lv_kdump</code> line)
									</li><li class="listitem">
										file system label (the <code class="literal">#ext4 LABEL=/boot</code> line)
									</li><li class="listitem">
										UUID (the <code class="literal">#ext4 UUID=03138356-5e61-4ab3-b58e-27507ac41937</code> line)
									</li></ul></div></li><li class="listitem"><p class="simpara">
								Change the file system type and the device name, label or UUID, to the required values. The correct syntax for specifying UUID values is both <code class="literal">UUID="correct-uuid"</code> and <code class="literal">UUID=correct-uuid</code>. For example:
							</p><pre class="literallayout">ext4 UUID=03138356-5e61-4ab3-b58e-27507ac41937</pre><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
									It is recommended to specify storage devices by using a <code class="literal">LABEL=</code> or <code class="literal">UUID=</code>. Disk device names such as <code class="literal">/dev/sda3</code> are not guaranteed to be consistent across reboot.
								</p><p>
									When you use Direct Access Storage Device (DASD) on IBM Z hardware, ensure the dump devices are correctly specified in <code class="literal">/etc/dasd.conf</code> before proceeding with <code class="literal">kdump</code>.
								</p></div></rh-alert></li></ol></div></li><li class="listitem"><p class="simpara">
						To write the crash dump directly to a device, edit the <code class="literal">/etc/kdump.conf</code> configuration file:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Remove the hash sign (<code class="literal">#</code>) from the beginning of the <code class="literal">#raw /dev/vg/lv_kdump</code> line.
							</li><li class="listitem"><p class="simpara">
								Replace the value with the intended device name. For example:
							</p><pre class="literallayout">raw /dev/sdb1</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						To store the crash dump to a remote machine by using the <code class="literal">NFS</code> protocol:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Remove the hash sign (<code class="literal">#</code>) from the beginning of the <code class="literal">#nfs my.server.com:/export/tmp</code> line.
							</li><li class="listitem"><p class="simpara">
								Replace the value with a valid hostname and directory path. For example:
							</p><pre class="screen">nfs penguin.example.com:/export/cores</pre></li><li class="listitem"><p class="simpara">
								Restart the <code class="literal">kdump</code> service for the changes to take effect:
							</p><pre class="screen">sudo systemctl restart kdump.service</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
									While using the NFS directive to specify the NFS target, <code class="literal">kdump.service</code> automatically attempts to mount the NFS target to check the disk space. There is no need to mount the NFS target in advance. To prevent <code class="literal">kdump.service</code> from mounting the target, use the <code class="literal">dracut_args --mount</code> directive in <code class="literal">kdump.conf</code>. This will enable <code class="literal">kdump.service</code> to call the <code class="literal">dracut</code> utility with the <code class="literal">--mount</code> argument to specify the NFS target.
								</p></div></rh-alert></li></ol></div></li><li class="listitem"><p class="simpara">
						To store the crash dump to a remote machine by using the SSH protocol:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Remove the hash sign (<code class="literal">#</code>) from the beginning of the <code class="literal">#ssh user@my.server.com</code> line.
							</li><li class="listitem">
								Replace the value with a valid username and hostname.
							</li><li class="listitem"><p class="simpara">
								Include your SSH key in the configuration.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Remove the hash sign from the beginning of the <code class="literal">#sshkey /root/.ssh/kdump_id_rsa</code> line.
									</li><li class="listitem"><p class="simpara">
										Change the value to the location of a key valid on the server you are trying to dump to. For example:
									</p><pre class="literallayout">ssh john@penguin.example.com
sshkey /root/.ssh/mykey</pre></li></ol></div></li></ol></div></li></ul></div><div class="_additional-resources _additional-resources"><p class="title"><strong>Additional resources</strong></p><p>
					<a class="link" href="#files-produced-by-kdump-after-system-crash_configuring-kdump-on-the-command-line" title="14.8. Files produced by kdump after system crash">Files produced by kdump after system crash</a>.
				</p></div></section><section class="section" id="configuring-the-kdump-core-collectorconfiguring-kdump-on-the-command-line"><div class="titlepage"><div><div><h3 class="title">14.4. Configuring the kdump core collector</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">kdump</code> service uses a <code class="literal">core_collector</code> program to capture the crash dump image. In RHEL, the <code class="literal">makedumpfile</code> utility is the default core collector. It helps shrink the dump file by:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Compressing the size of a crash dump file and copying only necessary pages by using various dump levels.
					</li><li class="listitem">
						Excluding unnecessary crash dump pages.
					</li><li class="listitem">
						Filtering the page types to be included in the crash dump.
					</li></ul></div><div class="formalpara"><p class="title"><strong>Syntax</strong></p><p>

</p><pre class="screen">core_collector makedumpfile -l --message-level 1 -d 31</pre>

				<p></p></div><div class="itemizedlist"><p class="title"><strong>Options</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">-c</code>, <code class="literal">-l</code> or <code class="literal">-p</code>: specify compress dump file format by each page using either, <code class="literal">zlib</code> for <code class="literal">-c</code> option, <code class="literal">lzo</code> for <code class="literal">-l</code> option or <code class="literal">snappy</code> for <code class="literal">-p</code> option.
					</li><li class="listitem">
						<code class="literal">-d</code> <code class="literal">(dump_level)</code>: excludes pages so that they are not copied to the dump file.
					</li><li class="listitem">
						<code class="literal">--message-level</code> : specify the message types. You can restrict outputs printed by specifying <code class="literal">message_level</code> with this option. For example, specifying 7 as <code class="literal">message_level</code> prints common messages and error messages. The maximum value of <code class="literal">message_level</code> is 31.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have root permissions on the system.
					</li><li class="listitem">
						Fulfilled requirements for <code class="literal">kdump</code> configurations and targets. For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index#supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel">Supported kdump configurations and targets</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						As a <code class="literal">root</code>, edit the <code class="literal">/etc/kdump.conf</code> configuration file and remove the hash sign ("#") from the beginning of the <code class="literal">#core_collector makedumpfile -l --message-level 1 -d 31</code>.
					</li><li class="listitem">
						Enter the following command to enable crash dump file compression:
					</li></ol></div><pre class="screen">core_collector makedumpfile -l --message-level 1 -d 31</pre><p>
				The <code class="literal">-l</code> option specifies the <code class="literal">dump</code> compressed file format. The <code class="literal">-d</code> option specifies dump level as 31. The <code class="literal">--message-level</code> option specifies message level as 1.
			</p><p>
				Also, consider following examples with the <code class="literal">-c</code> and <code class="literal">-p</code> options:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To compress a crash dump file by using <code class="literal">-c</code>:
					</p><pre class="screen">core_collector makedumpfile -c -d 31 --message-level 1</pre></li><li class="listitem"><p class="simpara">
						To compress a crash dump file by using <code class="literal">-p</code>:
					</p><pre class="screen">core_collector makedumpfile -p -d 31 --message-level 1</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">makedumpfile(8)</code> man page on your system
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#configuration-file-for-kdump_configuring-kdump-on-the-command-line">Configuration file for kdump</a>
					</li></ul></div></section><section class="section" id="configuring-the-kdump-default-failure-responses_configuring-kdump-on-the-command-line"><div class="titlepage"><div><div><h3 class="title">14.5. Configuring the kdump default failure responses</h3></div></div></div><p class="_abstract _abstract">
				By default, when <code class="literal">kdump</code> fails to create a crash dump file at the configured target location, the system reboots and the dump is lost in the process. You can change the default failure response and configure <code class="literal">kdump</code> to perform a different operation when it fails to save the core dump to the primary target. The additional actions are:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">dump_to_rootfs</code></span></dt><dd>
							Saves the core dump to the <code class="literal">root</code> file system.
						</dd><dt><span class="term"><code class="literal">reboot</code></span></dt><dd>
							Reboots the system, losing the core dump in the process.
						</dd><dt><span class="term"><code class="literal">halt</code></span></dt><dd>
							Stops the system, losing the core dump in the process.
						</dd><dt><span class="term"><code class="literal">poweroff</code></span></dt><dd>
							Power the system off, losing the core dump in the process.
						</dd><dt><span class="term"><code class="literal">shell</code></span></dt><dd>
							Runs a shell session from within the <code class="literal">initramfs</code>, you can record the core dump manually.
						</dd><dt><span class="term"><code class="literal">final_action</code></span></dt><dd>
							Enables additional operations such as <code class="literal">reboot</code>, <code class="literal">halt</code>, and <code class="literal">poweroff</code> after a successful <code class="literal">kdump</code> or when shell or <code class="literal">dump_to_rootfs</code> failure action completes. The default is <code class="literal">reboot</code>.
						</dd><dt><span class="term"><code class="literal">failure_action</code></span></dt><dd>
							Specifies the action to perform when a dump might fail in a kernel crash. The default is <code class="literal">reboot</code>.
						</dd></dl></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Root permissions.
					</li><li class="listitem">
						Fulfilled requirements for <code class="literal">kdump</code> configurations and targets. For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel">Supported kdump configurations and targets</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						As a <code class="literal">root</code> user, remove the hash sign (<code class="literal">#</code>) from the beginning of the <code class="literal">#failure_action</code> line in the <code class="literal">/etc/kdump.conf</code> configuration file.
					</li><li class="listitem"><p class="simpara">
						Replace the value with a required action.
					</p><pre class="screen"><span class="strong strong"><strong>failure_action poweroff</strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index#configuring-the-kdump-target_configuring-kdump-on-the-command-line">Configuring the kdump target</a>
					</li></ul></div></section><section class="section" id="configuration-file-for-kdump_configuring-kdump-on-the-command-line"><div class="titlepage"><div><div><h3 class="title">14.6. Configuration file for kdump</h3></div></div></div><p class="_abstract _abstract">
				The configuration file for <code class="literal">kdump</code> kernel is <code class="literal">/etc/sysconfig/kdump</code>. This file controls the <code class="literal">kdump</code> kernel command line parameters. For most configurations, use the default options. However, in some scenarios you might need to modify certain parameters to control the <code class="literal">kdump</code> kernel behavior. For example, modifying the <code class="literal">KDUMP_COMMANDLINE_APPEND</code> option to append the <code class="literal">kdump</code> kernel command-line to obtain a detailed debugging output or the <code class="literal">KDUMP_COMMANDLINE_REMOVE</code> option to remove arguments from the <code class="literal">kdump</code> command line.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">KDUMP_COMMANDLINE_REMOVE</code></span></dt><dd><p class="simpara">
							This option removes arguments from the current <code class="literal">kdump</code> command line. It removes parameters that can cause <code class="literal">kdump</code> errors or <code class="literal">kdump</code> kernel boot failures. These parameters might have been parsed from the previous <code class="literal">KDUMP_COMMANDLINE</code> process or inherited from the <code class="literal">/proc/cmdline</code> file.
						</p><p class="simpara">
							When this variable is not configured, it inherits all values from the <code class="literal">/proc/cmdline</code> file. Configuring this option also provides information that is helpful in debugging an issue.
						</p><p class="simpara">
							To remove certain arguments, add them to <code class="literal">KDUMP_COMMANDLINE_REMOVE</code> as follows:
						</p></dd></dl></div><pre class="screen"># KDUMP_COMMANDLINE_REMOVE="hugepages hugepagesz slub_debug quiet log_buf_len swiotlb"</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">KDUMP_COMMANDLINE_APPEND</code></span></dt><dd><p class="simpara">
							This option appends arguments to the current command line. These arguments might have been parsed by the previous <code class="literal">KDUMP_COMMANDLINE_REMOVE</code> variable.
						</p><p class="simpara">
							For the <code class="literal">kdump</code> kernel, disabling certain modules such as <code class="literal">mce</code>, <code class="literal">cgroup</code>, <code class="literal">numa</code>, <code class="literal">hest_disable</code> can help prevent kernel errors. These modules can consume a significant part of the kernel memory reserved for <code class="literal">kdump</code> or cause <code class="literal">kdump</code> kernel boot failures.
						</p><p class="simpara">
							To disable memory <code class="literal">cgroups</code> on the <code class="literal">kdump</code> kernel command line, run the command as follows:
						</p></dd></dl></div><pre class="screen">KDUMP_COMMANDLINE_APPEND="cgroup_disable=memory"</pre><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The <code class="literal">Documentation/admin-guide/kernel-parameters.txt</code> file
					</li><li class="listitem">
						The <code class="literal">/etc/sysconfig/kdump</code> file
					</li></ul></div></section><section class="section" id="testing-the-kdump-configuration_configuring-kdump-on-the-command-line"><div class="titlepage"><div><div><h3 class="title">14.7. Testing the kdump configuration</h3></div></div></div><p class="_abstract _abstract">
				After configuring <code class="literal">kdump</code>, you must manually test a system crash and ensure that the <code class="literal">vmcore</code> file is generated in the defined <code class="literal">kdump</code> target. The <code class="literal">vmcore</code> file is captured from the context of the freshly booted kernel and therefore has critical information to help debug a kernel crash.
			</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					Do not test <code class="literal">kdump</code> on active production systems. The commands to test <code class="literal">kdump</code> will cause the kernel to crash with loss of data. Depending on your system architecture, ensure that you schedule significant maintenance time because <code class="literal">kdump</code> testing might require several reboots with a long boot time.
				</p><p>
					If the <code class="literal">vmcore</code> file is not generated during the <code class="literal">kdump</code> test, identify and fix issues before you run the test again for a successful <code class="literal">kdump</code> testing.
				</p></div></rh-alert><p>
				If you make any manual system modifications, you must test the <code class="literal">kdump</code> configuration at the end of any system modification. For example, if you make any of the following changes, ensure that you test the <code class="literal">kdump</code> configuration for an optimal <code class="literal">kdump</code> performances for:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Package upgrades.
					</li><li class="listitem">
						Hardware level changes, for example, storage or networking changes.
					</li><li class="listitem">
						Firmware upgrades.
					</li><li class="listitem">
						New installation and application upgrades that include third party modules.
					</li><li class="listitem">
						If you use the hot-plugging mechanism to add more memory on hardware that support this mechanism.
					</li><li class="listitem">
						After you make changes in the <code class="literal">/etc/kdump.conf</code> or <code class="literal">/etc/sysconfig/kdump</code> file.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have root permissions on the system.
					</li><li class="listitem">
						You have saved all important data. The commands to test <code class="literal">kdump</code> cause the kernel to crash with loss of data.
					</li><li class="listitem">
						You have scheduled significant machine maintenance time depending on the system architecture.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enable the <code class="literal">kdump</code> service:
					</p><pre class="literallayout"># <span class="strong strong"><strong>kdumpctl restart</strong></span></pre></li><li class="listitem"><p class="simpara">
						Check the status of the <code class="literal">kdump</code> service with the <code class="literal">kdumpctl</code>:
					</p><pre class="screen"># <span class="strong strong"><strong>kdumpctl status</strong></span>
  kdump:Kdump is operational</pre><p class="simpara">
						Optionally, if you use the <code class="literal">systemctl</code> command, the output prints in the <code class="literal">systemd</code> journal.
					</p></li><li class="listitem"><p class="simpara">
						Start a kernel crash to test the <code class="literal">kdump</code> configuration. The <code class="literal">sysrq-trigger</code> key combination causes the kernel to crash and might reboot the system if required.
					</p><pre class="literallayout"># <span class="strong strong"><strong>echo c &gt; /proc/sysrq-trigger</strong></span></pre><p class="simpara">
						On a kernel reboot, the <code class="literal"><span class="emphasis"><em>address</em></span>-<span class="emphasis"><em>YYYY-MM-DD</em></span>-<span class="emphasis"><em>HH:MM:SS</em></span>/vmcore</code> file is created at the location you have specified in the <code class="literal">/etc/kdump.conf</code> file. The default is <code class="literal">/var/crash/</code>.
					</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#configuring-the-kdump-target_configuring-kdump-on-the-command-line">Configuring the kdump target</a>
					</li></ul></div></section><section class="section" id="files-produced-by-kdump-after-system-crash_configuring-kdump-on-the-command-line"><div class="titlepage"><div><div><h3 class="title">14.8. Files produced by kdump after system crash</h3></div></div></div><p class="_abstract _abstract">
				After your system crashes, the <code class="literal">kdump</code> service captures the kernel memory in a dump file (<code class="literal">vmcore</code>) and it also generates additional diagnostic files to aid in troubleshooting and postmortem analysis.
			</p><p>
				Files produced by <code class="literal">kdump</code>:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">vmcore</code> - main kernel memory dump file containing system memory at the time of the crash. It includes data as per the configuration of the <code class="literal">core_collector</code> program specified in <code class="literal">kdump</code> configuration. By default the kernel data structures, process information, stack traces, and other diagnostic information.
					</li><li class="listitem">
						<code class="literal">vmcore-dmesg.txt</code> - contents of the kernel ring buffer log (<code class="literal">dmesg</code>) from the primary kernel that panicked.
					</li><li class="listitem">
						<code class="literal">kexec-dmesg.log</code> - has kernel and system log messages from the execution of the secondary <code class="literal">kexec</code> kernel that collects the <code class="literal">vmcore</code> data.
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index#what-is-the-kernel-ring-buffer_getting-started-with-kernel-logging">What is the kernel ring buffer</a>
					</li></ul></div></section><section class="section" id="enabling-and-disabling-the-kdump-service_configuring-kdump-on-the-command-line"><div class="titlepage"><div><div><h3 class="title">14.9. Enabling and disabling the kdump service</h3></div></div></div><p class="_abstract _abstract">
				You can configure to enable or disable the <code class="literal">kdump</code> functionality on a specific kernel or on all installed kernels. You must routinely test the <code class="literal">kdump</code> functionality and validate its operates correctly.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have root permissions on the system.
					</li><li class="listitem">
						You have completed <code class="literal">kdump</code> requirements for configurations and targets. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_monitoring_and_updating_the_kernel/supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel">Supported kdump configurations and targets</a>.
					</li><li class="listitem">
						All configurations for installing <code class="literal">kdump</code> are set up as required.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enable the <code class="literal">kdump</code> service for <code class="literal">multi-user.target</code>:
					</p><pre class="screen"># systemctl enable kdump.service</pre></li><li class="listitem"><p class="simpara">
						Start the service in the current session:
					</p><pre class="screen"># systemctl start kdump.service</pre></li><li class="listitem"><p class="simpara">
						Stop the <code class="literal">kdump</code> service:
					</p><pre class="screen"># systemctl stop kdump.service</pre></li><li class="listitem"><p class="simpara">
						Disable the <code class="literal">kdump</code> service:
					</p><pre class="screen"># systemctl disable kdump.service</pre></li></ol></div><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					It is recommended to set <code class="literal">kptr_restrict=1</code> as default. When <code class="literal">kptr_restrict</code> is set to (1) as default, the <code class="literal">kdumpctl</code> service loads the crash kernel even if Kernel Address Space Layout (KASLR) is enabled or not.
				</p><p>
					If <code class="literal">kptr_restrict</code> is not set to <code class="literal">1</code> and KASLR is enabled, the contents of <code class="literal">/proc/kore</code> file are generated as all zeros. The <code class="literal">kdumpctl</code> service fails to access the <code class="literal">/proc/kcore</code> file and load the crash kernel. The <code class="literal">kexec-kdump-howto.txt</code> file displays a warning message, which recommends you to set <code class="literal">kptr_restrict=1</code>. Verify for the following in the <code class="literal">sysctl.conf</code> file to ensure that <code class="literal">kdumpctl</code> service loads the crash kernel:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Kernel <code class="literal">kptr_restrict=1</code> in the <code class="literal">sysctl.conf</code> file.
						</li></ul></div></div></rh-alert></section><section class="section" id="preventing-kernel-drivers-from-loading-for-kdump_configuring-kdump-on-the-command-line"><div class="titlepage"><div><div><h3 class="title">14.10. Preventing kernel drivers from loading for kdump</h3></div></div></div><p class="_abstract _abstract">
				You can control the capture kernel from loading certain kernel drivers by adding the <code class="literal">KDUMP_COMMANDLINE_APPEND=</code> variable in the <code class="literal">/etc/sysconfig/kdump</code> configuration file. By using this method, you can prevent the <code class="literal">kdump</code> initial RAM disk image <code class="literal">initramfs</code> from loading the specified kernel module. This helps to prevent the out-of-memory (OOM) killer errors or other crash kernel failures.
			</p><p>
				You can append the <code class="literal">KDUMP_COMMANDLINE_APPEND=</code> variable by using one of the following configuration options:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">rd.driver.blacklist=<span class="emphasis"><em>&lt;modules&gt;</em></span></code>
					</li><li class="listitem">
						<code class="literal">modprobe.blacklist=<span class="emphasis"><em>&lt;modules&gt;</em></span></code>
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have root permissions on the system.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display the list of modules that are loaded to the currently running kernel. Select the kernel module that you intend to block from loading:
					</p><pre class="screen">$ <span class="strong strong"><strong>lsmod</strong></span>

Module                  Size  Used by
fuse                  126976  3
xt_CHECKSUM            16384  1
ipt_MASQUERADE         16384  1
uinput                 20480  1
xt_conntrack           16384  1</pre></li><li class="listitem"><p class="simpara">
						Update the <code class="literal">KDUMP_COMMANDLINE_APPEND=</code> variable in the <code class="literal">/etc/sysconfig/kdump</code> file. For example:
					</p><pre class="screen">KDUMP_COMMANDLINE_APPEND="rd.driver.blacklist=<span class="emphasis"><em>hv_vmbus,hv_storvsc,hv_utils,hv_netvsc,hid-hyperv</em></span>"</pre><p class="simpara">
						Also, consider the following example by using the <code class="literal">modprobe.blacklist=<span class="emphasis"><em>&lt;modules&gt;</em></span></code> configuration option:
					</p><pre class="screen">KDUMP_COMMANDLINE_APPEND="modprobe.blacklist=<span class="emphasis"><em>emcp</em></span> modprobe.blacklist=<span class="emphasis"><em>bnx2fc</em></span> modprobe.blacklist=<span class="emphasis"><em>libfcoe</em></span> modprobe.blacklist=<span class="emphasis"><em>fcoe</em></span>"</pre></li><li class="listitem"><p class="simpara">
						Restart the <code class="literal">kdump</code> service:
					</p><pre class="screen"># systemctl restart kdump</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">dracut.cmdline</code> man page on your system.
					</li></ul></div></section><section class="section" id="running-kdump-on-systems-with-encrypted-disk_configuring-kdump-on-the-command-line"><div class="titlepage"><div><div><h3 class="title">14.11. Running kdump on systems with encrypted disk</h3></div></div></div><p class="_abstract _abstract">
				When you run a LUKS encrypted partition, systems require certain amount of available memory. If the system has less than the required amount of available memory, the <code class="literal">cryptsetup</code> utility fails to mount the partition. As a result, capturing the <code class="literal">vmcore</code> file to an encrypted target location fails in the second kernel (capture kernel).
			</p><p>
				The <code class="literal">kdumpctl estimate</code> command helps you estimate the amount of memory you need for <code class="literal">kdump</code>. <code class="literal">kdumpctl estimate</code> prints the recommended <code class="literal">crashkernel</code> value, which is the most suitable memory size required for <code class="literal">kdump</code>.
			</p><p>
				The recommended <code class="literal">crashkernel</code> value is calculated based on the current kernel size, kernel module, initramfs, and the LUKS encrypted target memory requirement.
			</p><p>
				If you are using the custom <code class="literal">crashkernel=</code> option, <code class="literal">kdumpctl estimate</code> prints the <code class="literal">LUKS required size</code> value. The value is the memory size required for LUKS encrypted target.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Print the estimate <code class="literal">crashkernel=</code> value:
					</p><pre class="screen"># *kdumpctl estimate*

Encrypted kdump target requires extra memory, assuming using the keyslot with minimum memory requirement
   Reserved crashkernel:    256M
   Recommended crashkernel: 652M

   Kernel image size:   47M
   Kernel modules size: 8M
   Initramfs size:      20M
   Runtime reservation: 64M
   LUKS required size:  512M
   Large modules: &lt;none&gt;
   WARNING: Current crashkernel size is lower than recommended size 652M.</pre></li><li class="listitem">
						Configure the amount of required memory by increasing the <code class="literal">crashkernel=</code> value.
					</li><li class="listitem">
						Reboot the system.
					</li></ol></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					If the <code class="literal">kdump</code> service still fails to save the dump file to the encrypted target, increase the <code class="literal">crashkernel=</code> value as required.
				</p></div></rh-alert></section></section><section class="chapter" id="configuring-kdump-in-the-web-console_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 15. Configuring kdump in the web console</h2></div></div></div><p class="_abstract _abstract">
			You can set up and test the <code class="literal">kdump</code> configuration by using the RHEL 9 web console. The web console can enable the <code class="literal">kdump</code> service at boot time. Furthermore, with the web console you can configure the reserved memory for <code class="literal">kdump</code> and to select the <code class="literal">vmcore</code> saving location in an uncompressed or compressed format.
		</p><section class="section" id="configuring-kdump-memory-usage-and-target-location-in-web-console_configuring-kdump-in-the-web-console"><div class="titlepage"><div><div><h3 class="title">15.1. Configuring kdump memory usage and target location in web console</h3></div></div></div><p class="_abstract _abstract">
				You can configure the memory reserve for the <code class="literal">kdump</code> kernel and also specify the target location to capture the <code class="literal">vmcore</code> dump file with the RHEL web console interface.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The web console must be installed and accessible. For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console">Installing the web console</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the web console, open the <span class="strong strong"><strong><span class="button button">Kernel dump</span></strong></span> tab and start the <code class="literal">kdump</code> service by setting the <span class="strong strong"><strong>Kernel crash dump</strong></span> switch to on.
					</li><li class="listitem"><p class="simpara">
						Configure the <code class="literal">kdump</code> memory usage in the terminal, for example:
					</p><pre class="screen">$ <span class="strong strong"><strong>sudo grubby --update-kernel ALL --args crashkernel=512M</strong></span></pre><p class="simpara">
						Restart the system to apply the changes.
					</p></li><li class="listitem">
						In the <span class="strong strong"><strong>Kernel dump</strong></span> tab, click <span class="strong strong"><strong>Edit</strong></span> at the end of the <span class="strong strong"><strong>Crash dump location</strong></span> field.
					</li><li class="listitem"><p class="simpara">
						Specify the target directory for saving the <code class="literal">vmcore</code> dump file:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								For a local filesystem, select <span class="strong strong"><strong><span class="option option">Local Filesystem</span></strong></span> from the drop-down menu.
							</li><li class="listitem"><p class="simpara">
								For a remote system by using the SSH protocol, select <span class="strong strong"><strong><span class="option option">Remote over SSH</span></strong></span> from the drop-down menu and specify the following fields:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										In the <span class="strong strong"><strong>Server</strong></span> field, enter the remote server address.
									</li><li class="listitem">
										In the <span class="strong strong"><strong>SSH key</strong></span> field, enter the SSH key location.
									</li><li class="listitem">
										In the <span class="strong strong"><strong>Directory</strong></span> field, enter the target directory.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								For a remote system by using the NFS protocol, select <span class="strong strong"><strong><span class="option option">Remote over NFS</span></strong></span> from the drop-down menu and specify the following fields:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										In the <span class="strong strong"><strong>Server</strong></span> field, enter the remote server address.
									</li><li class="listitem">
										In the <span class="strong strong"><strong>Export</strong></span> field, enter the location of the shared folder of an NFS server.
									</li><li class="listitem"><p class="simpara">
										In the <span class="strong strong"><strong>Directory</strong></span> field, enter the target directory.
									</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
											You can reduce the size of the <code class="literal">vmcore</code> file by selecting the <span class="strong strong"><strong>Compression</strong></span> checkbox.
										</p></div></rh-alert></li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: Display the automation script by clicking <span class="strong strong"><strong>View automation script</strong></span>.
					</p><p class="simpara">
						A window with the generated script opens. You can browse a shell script and an Ansible playbook generation options tab.
					</p></li><li class="listitem"><p class="simpara">
						Optional: Copy the script by clicking <span class="strong strong"><strong>Copy to clipboard</strong></span>.
					</p><p class="simpara">
						You can use this script to apply the same configuration on multiple machines.
					</p></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Click <span class="guibutton">Test configuration</span>.
					</li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Crash system</strong></span> under <span class="strong strong"><strong>Test kdump settings</strong></span>.
					</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
							When you start the system crash, the kernel operation stops and results in a system crash with data loss.
						</p></div></rh-alert></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_monitoring_and_updating_the_kernel/supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel#supported-kdump-targets_supported-kdump-configurations-and-targets">Supported kdump targets</a>
					</li></ul></div></section></section><section class="chapter" id="enabling-kdumpmanaging-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 16. Enabling kdump</h2></div></div></div><p class="_abstract _abstract">
			For your Red Hat Enterprise Linux 9 systems, you can configure to enable or disable the <code class="literal">kdump</code> functionality on a specific kernel or on all installed kernels. However, you must routinely test the <code class="literal">kdump</code> functionality and validate that it’s working properly.
		</p><section class="section" id="enabling-kdump-for-all-installed-kernels_enabling-kdump"><div class="titlepage"><div><div><h3 class="title">16.1. Enabling kdump for all installed kernels</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">kdump</code> service starts by enabling <code class="literal">kdump.service</code> after the <code class="literal">kexec</code> tool is installed. You can enable and start the <code class="literal service">kdump</code> service for all kernels installed on the machine.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have administrator privileges.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Add the <code class="literal">crashkernel=</code> command-line parameter to all installed kernels.
					</p><pre class="screen"># grubby --update-kernel=ALL --args="crashkernel=xxM"</pre><p class="simpara">
						<code class="literal">xxM</code> is the required memory in megabytes.
					</p></li><li class="listitem"><p class="simpara">
						Enable the <code class="literal">kdump</code> service.
					</p><pre class="screen"># systemctl enable --now kdump.service</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Check that the <code class="literal">kdump</code> service is running.
					</p><pre class="screen"># <span class="strong strong"><strong>systemctl status kdump.service</strong></span>

○ kdump.service - Crash recovery kernel arming
     Loaded: loaded (/usr/lib/systemd/system/kdump.service; enabled; vendor preset: disabled)
     Active: active (live)</pre></li></ul></div></section><section class="section" id="enabling-kdump-for-a-specific-installed-kernel_enabling-kdump"><div class="titlepage"><div><div><h3 class="title">16.2. Enabling kdump for a specific installed kernel</h3></div></div></div><p class="_abstract _abstract">
				You can enable the <code class="literal service">kdump</code> service for a specific kernel on the machine.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have administrator privileges.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						List the kernels installed on the machine.
					</p><pre class="screen"># <span class="strong strong"><strong>ls -a /boot/vmlinuz-</strong></span>*
/boot/vmlinuz-0-rescue-2930657cd0dc43c2b75db480e5e5b4a9
/boot/vmlinuz-4.18.0-330.el8.x86_64
/boot/vmlinuz-4.18.0-330.rt7.111.el8.x86_64</pre></li><li class="listitem"><p class="simpara">
						Add a specific <code class="literal">kdump</code> kernel to the system’s Grand Unified Bootloader (GRUB) configuration.
					</p><p class="simpara">
						For example:
					</p><pre class="screen"># <span class="strong strong"><strong>grubby --update-kernel=<span class="emphasis"><em>vmlinuz-4.18.0-330.el8.x86_64</em></span> --args="crashkernel=<span class="emphasis"><em>xxM</em></span>"</strong></span></pre><p class="simpara">
						<code class="literal">xxM</code> is the required memory reserve in megabytes.
					</p></li><li class="listitem"><p class="simpara">
						Enable the <code class="literal">kdump</code> service.
					</p><pre class="screen"># <span class="strong strong"><strong>systemctl enable --now kdump.service</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Check that the <code class="literal">kdump</code> service is running.
					</p><pre class="screen"># <span class="strong strong"><strong>systemctl status kdump.service</strong></span>

○ kdump.service - Crash recovery kernel arming
     Loaded: loaded (/usr/lib/systemd/system/kdump.service; enabled; vendor preset: disabled)
     Active: active (live)</pre></li></ul></div></section><section class="section" id="disabling-the-kdump-service_enabling-kdump"><div class="titlepage"><div><div><h3 class="title">16.3. Disabling the kdump service</h3></div></div></div><p class="_abstract _abstract">
				You can stop the <code class="literal">kdump.service</code> and disable the service from starting on your Red Hat Enterprise Linux 9 systems.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Fulfilled requirements for <code class="literal">kdump</code> configurations and targets. For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel">Supported kdump configurations and targets</a>.
					</li><li class="listitem">
						All configurations for installing <code class="literal">kdump</code> are set up according to your needs. For details, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_monitoring_and_updating_the_kernel/installing-kdump_managing-monitoring-and-updating-the-kernel">Installing kdump</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To stop the <code class="literal">kdump</code> service in the current session:
					</p><pre class="screen"># systemctl stop kdump.service</pre></li><li class="listitem"><p class="simpara">
						To disable the <code class="literal">kdump</code> service:
					</p><pre class="screen"># systemctl disable kdump.service</pre></li></ol></div><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					It is recommended to set <code class="literal">kptr_restrict=1</code> as default. When <code class="literal">kptr_restrict</code> is set to (1) as default, the <code class="literal">kdumpctl</code> service loads the crash kernel even if Kernel Address Space Layout (<code class="literal">KASLR</code>) is enabled or not enabled.
				</p><p>
					If <code class="literal">kptr_restrict</code> is not set to <code class="literal">1</code> and <code class="literal">KASLR</code> is enabled, the contents of <code class="literal">/proc/kore</code> file are generated as all zeros. The <code class="literal">kdumpctl</code> service fails to access the <code class="literal">/proc/kcore</code> file and load the crash kernel. The <code class="literal">kexec-kdump-howto.txt</code> file displays a warning message, which recommends you to set <code class="literal">kptr_restrict=1</code>. Verify for the following in the <code class="literal">sysctl.conf</code> file to ensure that <code class="literal">kdumpctl</code> service loads the crash kernel:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Kernel <code class="literal">kptr_restrict=1</code> in the <code class="literal">sysctl.conf</code> file.
						</li></ul></div></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/managing-systemd_configuring-basic-system-settings">Managing systemd</a>
					</li></ul></div></section></section><section class="chapter" id="supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 17. Supported kdump configurations and targets</h2></div></div></div><p>
			The <code class="literal">kdump</code> mechanism is a feature of the Linux kernel that generates a crash dump file when a kernel crash occurs. The kernel dump file has critical information that helps to analyze and determine the root cause of a kernel crash. The crash can be because of various factors, hardware issues or third-party kernel modules problems, to name a few.
		</p><p>
			With the provided information and procedures, you understand the supported configurations and targets on your Red Hat Enterprise Linux 9 systems and properly configure <code class="literal">kdump</code> and validate it’s working.
		</p><section class="section" id="memory-requirements-for-kdump_supported-kdump-configurations-and-targets"><div class="titlepage"><div><div><h3 class="title">17.1. Memory requirements for kdump</h3></div></div></div><p class="_abstract _abstract">
				For <code class="literal">kdump</code> to capture a kernel crash dump and save it for further analysis, a part of the system memory should be permanently reserved for the capture kernel. When reserved, this part of the system memory is not available to the main kernel.
			</p><p>
				The memory requirements vary based on certain system parameters. One of the major factors is the system’s hardware architecture. To find out the exact machine architecture (such as Intel 64 and AMD64, also known as x86_64) and print it to standard output, use the following command:
			</p><pre class="screen"><code class="literal command">$ <span class="strong strong"><strong>uname -m</strong></span></code></pre><p>
				With the stated list of minimum memory requirements, you can set the appropriate memory size to automatically reserve a memory for <code class="literal">kdump</code> on the latest available versions. The memory size depends on the system’s architecture and total available physical memory.
			</p><rh-table id="idm139825289915056"><table class="lt-4-cols lt-7-rows"><caption>Table 17.1. Minimum amount of reserved memory required for kdump</caption><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 33%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm139825289909328" scope="col">Architecture</th><th align="left" valign="top" id="idm139825289908240" scope="col">Available Memory</th><th align="left" valign="top" id="idm139825289907152" scope="col">Minimum Reserved Memory</th></tr></thead><tbody><tr><td rowspan="3" align="left" valign="top" headers="idm139825289909328"> <p>
								AMD64 and Intel 64 (<code class="literal">x86_64</code>)
							</p>
							 </td><td align="left" valign="top" headers="idm139825289908240"> <p>
								1 GB to 4 GB
							</p>
							 </td><td align="left" valign="top" headers="idm139825289907152"> <p>
								192 MB of RAM
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825289908240"> <p>
								4 GB to 64 GB
							</p>
							 </td><td align="left" valign="top" headers="idm139825289907152"> <p>
								256 MB of RAM
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825289908240"> <p>
								64 GB and more
							</p>
							 </td><td align="left" valign="top" headers="idm139825289907152"> <p>
								512 MB of RAM
							</p>
							 </td></tr><tr><td rowspan="3" align="left" valign="top" headers="idm139825289909328"> <p>
								64-bit ARM (4k pages)
							</p>
							 </td><td align="left" valign="top" headers="idm139825289908240"> <p>
								1 GB to 4 GB
							</p>
							 </td><td align="left" valign="top" headers="idm139825289907152"> <p>
								256 MB of RAM
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825289908240"> <p>
								4 GB to 64 GB
							</p>
							 </td><td align="left" valign="top" headers="idm139825289907152"> <p>
								320 MB of RAM
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825289908240"> <p>
								64 GB and more
							</p>
							 </td><td align="left" valign="top" headers="idm139825289907152"> <p>
								576 MB of RAM
							</p>
							 </td></tr><tr><td rowspan="3" align="left" valign="top" headers="idm139825289909328"> <p>
								64-bit ARM (64k pages)
							</p>
							 </td><td align="left" valign="top" headers="idm139825289908240"> <p>
								1 GB to 4 GB
							</p>
							 </td><td align="left" valign="top" headers="idm139825289907152"> <p>
								356 MB of RAM
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825289908240"> <p>
								4 GB to 64 GB
							</p>
							 </td><td align="left" valign="top" headers="idm139825289907152"> <p>
								420 MB of RAM
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825289908240"> <p>
								64 GB and more
							</p>
							 </td><td align="left" valign="top" headers="idm139825289907152"> <p>
								676 MB of RAM
							</p>
							 </td></tr><tr><td rowspan="5" align="left" valign="top" headers="idm139825289909328"> <p>
								IBM Power Systems (<code class="literal">ppc64le</code>)
							</p>
							 </td><td align="left" valign="top" headers="idm139825289908240"> <p>
								2 GB to 4 GB
							</p>
							 </td><td align="left" valign="top" headers="idm139825289907152"> <p>
								384 MB of RAM
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825289908240"> <p>
								4 GB to 16 GB
							</p>
							 </td><td align="left" valign="top" headers="idm139825289907152"> <p>
								512 MB of RAM
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825289908240"> <p>
								16 GB to 64 GB
							</p>
							 </td><td align="left" valign="top" headers="idm139825289907152"> <p>
								1 GB of RAM
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825289908240"> <p>
								64 GB to 128 GB
							</p>
							 </td><td align="left" valign="top" headers="idm139825289907152"> <p>
								2 GB of RAM
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825289908240"> <p>
								128 GB and more
							</p>
							 </td><td align="left" valign="top" headers="idm139825289907152"> <p>
								4 GB of RAM
							</p>
							 </td></tr><tr><td rowspan="3" align="left" valign="top" headers="idm139825289909328"> <p>
								IBM Z (<code class="literal">s390x</code>)
							</p>
							 </td><td align="left" valign="top" headers="idm139825289908240"> <p>
								1 GB to 4 GB
							</p>
							 </td><td align="left" valign="top" headers="idm139825289907152"> <p>
								192 MB of RAM
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825289908240"> <p>
								4 GB to 64 GB
							</p>
							 </td><td align="left" valign="top" headers="idm139825289907152"> <p>
								256 MB of RAM
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825289908240"> <p>
								64 GB and more
							</p>
							 </td><td align="left" valign="top" headers="idm139825289907152"> <p>
								512 MB of RAM
							</p>
							 </td></tr></tbody></table></rh-table><p>
				On many systems, <code class="literal">kdump</code> is able to estimate the amount of required memory and reserve it automatically. This behavior is enabled by default, but only works on systems that have more than a certain amount of total available memory, which varies based on the system architecture.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					The automatic configuration of reserved memory based on the total amount of memory in the system is a best effort estimation. The actual required memory might vary due to other factors such as I/O devices. Using not enough of memory might cause debug kernel unable to boot as a capture kernel in the case of kernel panic. To avoid this problem, increase the crash kernel memory sufficiently.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/articles/rhel-limits">Red Hat Enterprise Linux Technology Capabilities and Limits </a>
					</li></ul></div></section><section class="section" id="minimum-threshold-for-automatic-memory-reservation_supported-kdump-configurations-and-targets"><div class="titlepage"><div><div><h3 class="title">17.2. Minimum threshold for automatic memory reservation</h3></div></div></div><p class="_abstract _abstract">
				By default, the <code class="literal">kexec-tools</code> utility configures the <code class="literal">crashkernel</code> command line parameter and reserves a certain amount of memory for <code class="literal">kdump</code>. On some systems however, it is still possible to assign memory for <code class="literal">kdump</code> either by using the <code class="literal option">crashkernel=auto</code> parameter in the boot loader configuration file, or by enabling this option in the graphical configuration utility. For this automatic reservation to work, a certain amount of total memory needs to be available in the system. The memory requirement varies based on the system’s architecture. If the system memory is less than the specified threshold value, you must configure the memory manually.
			</p><rh-table id="idm139825285979216"><table class="lt-4-cols lt-7-rows"><caption>Table 17.2. Minimum amount of memory required for automatic memory reservation</caption><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm139825290727440" scope="col">Architecture</th><th align="left" valign="top" id="idm139825290726352" scope="col">Required Memory</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139825290727440"> <p>
								AMD64 and Intel 64 (<code class="literal">x86_64</code>)
							</p>
							 </td><td align="left" valign="top" headers="idm139825290726352"> <p>
								1 GB
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825290727440"> <p>
								IBM Power Systems (<code class="literal">ppc64le</code>)
							</p>
							 </td><td align="left" valign="top" headers="idm139825290726352"> <p>
								2 GB
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825290727440"> <p>
								IBM  Z (<code class="literal">s390x</code>)
							</p>
							 </td><td align="left" valign="top" headers="idm139825290726352"> <p>
								1 GB
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825290727440"> <p>
								64-bit ARM
							</p>
							 </td><td align="left" valign="top" headers="idm139825290726352"> <p>
								1 GB
							</p>
							 </td></tr></tbody></table></rh-table><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The <code class="literal">crashkernel=auto</code> option in the boot command line is no longer supported on RHEL 9 and later releases.
				</p></div></rh-alert></section><section class="section" id="supported-kdump-targets_supported-kdump-configurations-and-targets"><div class="titlepage"><div><div><h3 class="title">17.3. Supported kdump targets</h3></div></div></div><p class="_abstract _abstract">
				When a kernel crash occurs, the operating system saves the dump file on the configured or default target location. You can save the dump file either directly to a device, store as a file on a local file system, or send the dump file over a network. With the following list of dump targets, you can know the targets that are currently supported or not supported by <code class="literal">kdump</code>.
			</p><rh-table id="idm139825290061808"><table class="lt-4-cols lt-7-rows"><caption>Table 17.3. kdump targets on RHEL 9</caption><colgroup><col style="width: 33%; " class="col_1"><!--Empty--><col style="width: 33%; " class="col_2"><!--Empty--><col style="width: 33%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm139825290055728" scope="col">Target type</th><th align="left" valign="top" id="idm139825290054640" scope="col">Supported Targets</th><th align="left" valign="top" id="idm139825289798512" scope="col">Unsupported Targets</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139825290055728"> <p>
								Physical Storage
							</p>
							 </td><td align="left" valign="top" headers="idm139825290054640"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Logical Volume Manager (LVM).
									</li><li class="listitem">
										Thin provisioning volume.
									</li><li class="listitem">
										Fibre Channel (FC) disks such as <code class="literal">qla2xxx</code>, <code class="literal">lpfc</code>, <code class="literal">bnx2fc</code>, and <code class="literal">bfa</code>.
									</li><li class="listitem">
										An <code class="literal">iSCSI</code> software-configured logical device on a networked storage server.
									</li><li class="listitem">
										The <code class="literal">mdraid</code> subsystem as a software <code class="literal">RAID</code> solution.
									</li><li class="listitem">
										Hardware RAID such as <code class="literal">smartpqi</code>, <code class="literal">hpsa</code>, <code class="literal">megaraid</code>, <code class="literal">mpt3sas</code>, <code class="literal">aacraid</code>, and <code class="literal">mpi3mr</code>.
									</li><li class="listitem">
										<code class="literal">SCSI</code> and <code class="literal">SATA</code> disks.
									</li><li class="listitem">
										<code class="literal">iSCSI</code> and <code class="literal">HBA</code> offloads.
									</li><li class="listitem">
										Hardware <code class="literal">FCoE</code> such as <code class="literal">qla2xxx</code> and <code class="literal">lpfc</code>.
									</li><li class="listitem">
										Software <code class="literal">FCoE</code> such as <code class="literal">bnx2fc</code>. For software <code class="literal">FCoE</code> to function, additional memory configuration might be required.
									</li></ul></div>
							 </td><td align="left" valign="top" headers="idm139825289798512"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										BIOS RAID.
									</li><li class="listitem">
										Software <code class="literal">iSCSI</code> with <code class="literal">iBFT</code>. Currently supported transports are <code class="literal">bnx2i</code>, <code class="literal">cxgb3i</code>, and <code class="literal">cxgb4i</code>.
									</li><li class="listitem">
										Software iSCSI with hybrid device driver such as <code class="literal">be2iscsi</code>.
									</li><li class="listitem">
										Fibre Channel over Ethernet (<code class="literal">FCoE</code>).
									</li><li class="listitem">
										Legacy IDE.
									</li><li class="listitem">
										<code class="literal">GlusterFS</code> servers.
									</li><li class="listitem">
										<code class="literal">GFS2</code> file system.
									</li><li class="listitem">
										Clustered Logical Volume Manager (CLVM).
									</li><li class="listitem">
										High availability LVM volumes (HA-LVM).
									</li></ul></div>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825290055728"> <p>
								Network
							</p>
							 </td><td align="left" valign="top" headers="idm139825290054640"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Hardware using kernel modules such as <code class="literal">igb</code>, <code class="literal">ixgbe</code>, <code class="literal">ice</code>, <code class="literal">i40e</code>, <code class="literal">e1000e</code>, <code class="literal">igc</code>, <code class="literal">tg3</code>, <code class="literal">bnx2x</code>, <code class="literal">bnxt_en</code>, <code class="literal">qede</code>, <code class="literal">cxgb4</code>, <code class="literal">be2net</code>, <code class="literal">enic</code>, <code class="literal">sfc</code>, <code class="literal">mlx4_en</code>, <code class="literal">mlx5_core</code>, <code class="literal">r8169</code>, <code class="literal">atlantic</code>, <code class="literal">nfp</code>, and <code class="literal">nicvf</code> on 64-bit ARM architecture only.
									</li></ul></div>
							 </td><td align="left" valign="top" headers="idm139825289798512"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Hardware using kernel modules such as <code class="literal">sfc SRIOV</code>, <code class="literal">cxgb4vf</code>, and <code class="literal">pch_gbe</code>.
									</li><li class="listitem">
										IPv6 protocol.
									</li><li class="listitem">
										Wireless connections.
									</li><li class="listitem">
										InfiniBand networks.
									</li><li class="listitem">
										VLAN network over bridge and team.
									</li></ul></div>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825290055728"> <p>
								Hypervisor
							</p>
							 </td><td align="left" valign="top" headers="idm139825290054640"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Kernel-based virtual machines (KVM).
									</li><li class="listitem">
										Xen hypervisor in certain configurations only.
									</li><li class="listitem">
										ESXi 6.6, 6.7, 7.0.
									</li><li class="listitem">
										Hyper-V 2012 R2 on RHEL Gen1 UP Guest only and later version.
									</li></ul></div>
							 </td><td align="left" valign="top" headers="idm139825289798512"> </td></tr><tr><td align="left" valign="top" headers="idm139825290055728"> <p>
								Filesystem
							</p>
							 </td><td align="left" valign="top" headers="idm139825290054640"> <p>
								The <code class="literal">ext[234]fs</code>, <code class="literal">XFS</code>, <code class="literal">virtiofs</code>, and NFS file systems.
							</p>
							 </td><td align="left" valign="top" headers="idm139825289798512"> <p>
								The <code class="literal">Btrfs</code> file system.
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825290055728"> <p>
								Firmware
							</p>
							 </td><td align="left" valign="top" headers="idm139825290054640"> <div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										BIOS-based systems.
									</li><li class="listitem">
										UEFI Secure Boot.
									</li></ul></div>
							 </td><td align="left" valign="top" headers="idm139825289798512"> </td></tr></tbody></table></rh-table><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_monitoring_and_updating_the_kernel/configuring-kdump-on-the-command-line_managing-monitoring-and-updating-the-kernel#configuring-the-kdump-target_configuring-kdump-on-the-command-line">Configuring the kdump target</a>
					</li></ul></div></section><section class="section" id="supported-kdump-filtering-levels_supported-kdump-configurations-and-targets"><div class="titlepage"><div><div><h3 class="title">17.4. Supported kdump filtering levels</h3></div></div></div><p class="_abstract _abstract">
				To reduce the size of the dump file, <code class="literal">kdump</code> uses the <code class="literal command">makedumpfile</code> core collector to compress the data and also exclude unwanted information, for example, you can remove <code class="literal">hugepages</code> and <code class="literal">hugetlbfs</code> pages by using the <code class="literal option">-8</code> level. The levels that <code class="literal">makedumpfile</code> currently supports can be seen in the table for <span class="emphasis"><em>Filtering levels for `kdump`</em></span> .
			</p><rh-table id="idm139825289236912"><table class="lt-4-cols lt-7-rows"><caption>Table 17.4. Filtering levels for kdump</caption><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm139825289231760" scope="col">Option</th><th align="left" valign="top" id="idm139825289230672" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139825289231760"> <p>
								<code class="literal option">1</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139825289230672"> <p>
								Zero pages
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825289231760"> <p>
								<code class="literal option">2</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139825289230672"> <p>
								Cache pages
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825289231760"> <p>
								<code class="literal option">4</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139825289230672"> <p>
								Cache private
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825289231760"> <p>
								<code class="literal option">8</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139825289230672"> <p>
								User pages
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825289231760"> <p>
								<code class="literal option">16</code>
							</p>
							 </td><td align="left" valign="top" headers="idm139825289230672"> <p>
								Free pages
							</p>
							 </td></tr></tbody></table></rh-table><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_monitoring_and_updating_the_kernel/configuring-kdump-on-the-command-line_managing-monitoring-and-updating-the-kernel#configuring-the-kdump-core-collectorconfiguring-kdump-on-the-command-line">Configuring the kdump core collector</a>
					</li></ul></div></section><section class="section" id="supported-default-failure-responses_supported-kdump-configurations-and-targets"><div class="titlepage"><div><div><h3 class="title">17.5. Supported default failure responses</h3></div></div></div><p class="_abstract _abstract">
				By default, when <code class="literal">kdump</code> fails to create a core dump, the operating system reboots. However, you can configure <code class="literal">kdump</code> to perform a different operation in case it fails to save the core dump to the primary target.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">dump_to_rootfs</code></span></dt><dd>
							Attempt to save the core dump to the root file system. This option is especially useful in combination with a network target: if the network target is unreachable, this option configures kdump to save the core dump locally. The system is rebooted afterwards.
						</dd><dt><span class="term"><code class="literal">reboot</code></span></dt><dd>
							Reboot the system, losing the core dump in the process.
						</dd><dt><span class="term"><code class="literal">halt</code></span></dt><dd>
							Halt the system, losing the core dump in the process.
						</dd><dt><span class="term"><code class="literal">poweroff</code></span></dt><dd>
							Power off the system, losing the core dump in the process.
						</dd><dt><span class="term"><code class="literal">shell</code></span></dt><dd>
							Run a shell session from within the initramfs, allowing the user to record the core dump manually.
						</dd><dt><span class="term"><code class="literal">final_action</code></span></dt><dd>
							Enable additional operations such as <code class="literal">reboot</code>, <code class="literal">halt</code>, and <code class="literal">poweroff</code> actions after a successful <code class="literal">kdump</code> or when <code class="literal">shell</code> or <code class="literal">dump_to_rootfs</code> failure action completes. The default <code class="literal">final_action</code> option is <code class="literal">reboot</code>.
						</dd><dt><span class="term"><code class="literal">failure_action</code></span></dt><dd>
							Specifies the action to perform when a dump might fail in the event of a kernel crash. The default <code class="literal">failure_action</code> option is <code class="literal">reboot</code>.
						</dd></dl></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_monitoring_and_updating_the_kernel/configuring-kdump-on-the-command-line_managing-monitoring-and-updating-the-kernel#configuring-the-kdump-default-failure-responses_configuring-kdump-on-the-command-line">Configuring the kdump default failure responses</a>
					</li></ul></div></section><section class="section" id="using-final_action-parameter_supported-kdump-configurations-and-targets"><div class="titlepage"><div><div><h3 class="title">17.6. Using final_action parameter</h3></div></div></div><p class="_abstract _abstract">
				When <code class="literal">kdump</code> succeeds or if <code class="literal">kdump</code> fails to save the <code class="literal">vmcore</code> file at the configured target, you can perform additional operations like <code class="literal">reboot</code>, <code class="literal">halt</code>, and <code class="literal">poweroff</code> by using the <code class="literal">final_action</code> parameter. If the <code class="literal">final_action</code> parameter is not specified, <code class="literal">reboot</code> is the default response.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To configure <code class="literal">final_action</code>, edit the <code class="literal">/etc/kdump.conf</code> file and add one of the following options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">final_action reboot</code>
							</li><li class="listitem">
								<code class="literal">final_action halt</code>
							</li><li class="listitem">
								<code class="literal">final_action poweroff</code>
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Restart the <code class="literal">kdump</code> service for the changes to take effect.
					</p><pre class="screen"># <span class="strong strong"><strong>kdumpctl restart</strong></span></pre></li></ol></div></section><section class="section" id="proc_using-failure_action-parameter_supported-kdump-configurations-and-targets"><div class="titlepage"><div><div><h3 class="title">17.7. Using failure_action parameter</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">failure_action</code> parameter specifies the action to perform when a dump fails in the event of a kernel crash. The default action for <code class="literal">failure_action</code> is <code class="literal">reboot</code> that reboots the system.
			</p><p>
				The parameter recognizes the following actions to take:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">reboot</code></span></dt><dd>
							Reboots the system after a dump failure.
						</dd><dt><span class="term"><code class="literal">dump_to_rootfs</code></span></dt><dd>
							Saves the dump file on a root file system when a non-root dump target is configured.
						</dd><dt><span class="term"><code class="literal">halt</code></span></dt><dd>
							Halts the system.
						</dd><dt><span class="term"><code class="literal">poweroff</code></span></dt><dd>
							Stops the running operations on the system.
						</dd><dt><span class="term"><code class="literal">shell</code></span></dt><dd>
							Starts a shell session inside <code class="literal">initramfs</code>, from which you can manually perform additional recovery actions.
						</dd></dl></div><div class="orderedlist"><p class="title"><strong>Procedure:</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To configure an action to take if the dump fails, edit the <code class="literal">/etc/kdump.conf</code> file and specify one of the <code class="literal">failure_action</code> options:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">failure_action reboot</code>
							</li><li class="listitem">
								<code class="literal">failure_action halt</code>
							</li><li class="listitem">
								<code class="literal">failure_action poweroff</code>
							</li><li class="listitem">
								<code class="literal">failure_action shell</code>
							</li><li class="listitem">
								<code class="literal">failure_action dump_to_rootfs</code>
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Restart the <code class="literal">kdump</code> service for the changes to take effect.
					</p><pre class="screen"># <span class="strong strong"><strong>kdumpctl restart</strong></span></pre></li></ol></div></section></section><section class="chapter" id="firmware-assisted-dump-mechanisms_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 18. Firmware assisted dump mechanisms</h2></div></div></div><p class="_abstract _abstract">
			Firmware assisted dump (fadump) is a dump capturing mechanism, provided as an alternative to the <code class="literal">kdump</code> mechanism on IBM POWER systems. The <code class="literal">kexec</code> and <code class="literal">kdump</code> mechanisms are useful for capturing core dumps on AMD64 and Intel 64 systems. However, some hardware such as mini systems and mainframe computers, leverage the onboard firmware to isolate regions of memory and prevent any accidental overwriting of data that is important to the crash analysis. The <code class="literal">fadump</code> utility, is optimized for the <code class="literal">fadump</code> mechanisms and their integration with RHEL on IBM POWER systems.
		</p><section class="section" id="firmware-assisted-dump-on-ibm-powerpc-hardware_firmware-assisted-dump-mechanisms"><div class="titlepage"><div><div><h3 class="title">18.1. Firmware assisted dump on IBM PowerPC hardware</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">fadump</code> utility captures the <code class="literal">vmcore</code> file from a fully-reset system with PCI and I/O devices. This mechanism uses firmware to preserve memory regions during a crash and then reuses the <code class="literal">kdump</code> userspace scripts to save the <code class="literal">vmcore</code> file. The memory regions consist of all system memory contents, except the boot memory, system registers, and hardware Page Table Entries (PTEs).
			</p><p>
				The <code class="literal">fadump</code> mechanism offers improved reliability over the traditional dump type, by rebooting the partition and using a new kernel to dump the data from the previous kernel crash. The <code class="literal">fadump</code> requires an IBM POWER6 processor-based or later version hardware platform.
			</p><p>
				For further details about the <code class="literal">fadump</code> mechanism, including PowerPC specific methods of resetting hardware, see the <code class="literal">/usr/share/doc/kexec-tools/fadump-howto.txt</code> file.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The area of memory that is not preserved, known as boot memory, is the amount of RAM required to successfully boot the kernel after a crash event. By default, the boot memory size is 256MB or 5% of total system RAM, whichever is larger.
				</p></div></rh-alert><p>
				Unlike <code class="literal">kexec-initiated</code> event, the <code class="literal">fadump</code> mechanism uses the production kernel to recover a crash dump. When booting after a crash, PowerPC hardware makes the device node <code class="literal">/proc/device-tree/rtas/ibm.kernel-dump</code> available to the <code class="literal">proc</code> filesystem (<code class="literal">procfs</code>). The <code class="literal">fadump-aware kdump</code> scripts, check for the stored <code class="literal">vmcore</code>, and then complete the system reboot cleanly.
			</p></section><section class="section" id="enabling-firmware-assisted-dump-mechanism_firmware-assisted-dump-mechanisms"><div class="titlepage"><div><div><h3 class="title">18.2. Enabling firmware assisted dump mechanism</h3></div></div></div><p class="_abstract _abstract">
				You can enhance the crash dumping capabilities of IBM POWER systems by enabling the firmware assisted dump (<code class="literal">fadump</code>) mechanism.
			</p><p>
				In the Secure Boot environment, the GRUB boot loader allocates a boot memory region, known as the Real Mode Area (RMA). The RMA has a size of 512 MB, which is divided among the boot components and, if a component exceeds its size allocation, GRUB fails with an out-of-memory (OOM) error.
			</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					Do not enable firmware assisted dump (<code class="literal">fadump</code>) mechanism in the Secure Boot environment on RHEL 9.1 and earlier versions. The GRUB boot loader fails with the following error:
				</p><pre class="screen">error: ../../grub-core/kern/mm.c:376:out of memory.
Press any key to continue…</pre><p>
					The system is recoverable only if you increase the default <code class="literal">initramfs</code> size due to the <code class="literal">fadump</code> configuration.
				</p><p>
					For information about workaround methods to recover the system, see the <a class="link" href="https://www.ibm.com/support/pages/node/6846531">System boot ends in GRUB Out of Memory (OOM)</a> article.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have root permissions on the system.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Install the <code class="literal package">kexec-tools</code> package.
					</li><li class="listitem"><p class="simpara">
						Configure the default value for <code class="literal">crashkernel</code>.
					</p><pre class="literallayout"># kdumpctl reset-crashkernel --fadump=on --kernel=ALL</pre></li><li class="listitem"><p class="simpara">
						Optional: Reserve boot memory instead of the default value.
					</p><pre class="literallayout"># grubby --update-kernel ALL --args="fadump=on crashkernel=xxM"</pre><p class="simpara">
						<code class="literal">xxM</code> is the required memory size in megabytes.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							When specifying boot configuration options, test the configurations by rebooting the kernel with <code class="literal">kdump</code> enabled. If the <code class="literal">kdump</code> kernel fails to boot, increase the <code class="literal">crashkernel</code> value gradually to set an appropriate value.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Reboot for changes to take effect.
					</p><pre class="literallayout"># reboot</pre></li></ol></div></section><section class="section" id="firmware-assisted-dump-mechanisms-on-ibm-z-hardware_firmware-assisted-dump-mechanisms"><div class="titlepage"><div><div><h3 class="title">18.3. Firmware assisted dump mechanisms on IBM Z hardware</h3></div></div></div><p class="_abstract _abstract">
				IBM Z systems support the following firmware assisted dump mechanisms:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">Stand-alone dump (sadump)</code>
					</li><li class="listitem">
						<code class="literal">VMDUMP</code>
					</li></ul></div><p>
				The <code class="literal">kdump</code> infrastructure is supported and utilized on IBM Z systems. However, using one of the firmware assisted dump (fadump) methods for IBM Z can provide various benefits:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">sadump</code> mechanism is initiated and controlled from the system console, and is stored on an <code class="literal">IPL</code> bootable device.
					</li><li class="listitem">
						The <code class="literal">VMDUMP</code> mechanism is similar to <code class="literal">sadump</code>. This tool is also initiated from the system console, but retrieves the resulting dump from hardware and copies it to the system for analysis.
					</li><li class="listitem">
						These methods (similarly to other hardware based dump mechanisms) have the ability to capture the state of a machine in the early boot phase, before the <code class="literal">kdump</code> service starts.
					</li><li class="listitem">
						Although <code class="literal">VMDUMP</code> contains a mechanism to receive the dump file into a Red Hat Enterprise Linux system, the configuration and control of <code class="literal">VMDUMP</code> is managed from the IBM Z Hardware console.
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://www.ibm.com/docs/en/linux-on-systems?topic=tools-red-hat-enterprise-linux-85">Using the Dump Tools on Red Hat Enterprise Linux 8.5</a>
					</li><li class="listitem">
						<a class="link" href="https://www.ibm.com/docs/en/zos/2.3.0?topic=aids-stand-alone-dump">Stand-alone dump</a>
					</li><li class="listitem">
						<a class="link" href="https://www.ibm.com/docs/en/linux-on-systems?topic=85-zvm-dump-vmdump">Creating dumps on z/VM with VMDUMP</a>
					</li></ul></div></section><section class="section" id="using-sadump-on-fujitsu-primequest-systems_firmware-assisted-dump-mechanisms"><div class="titlepage"><div><div><h3 class="title">18.4. Using sadump on Fujitsu PRIMEQUEST systems</h3></div></div></div><p class="_abstract _abstract">
				The Fujitsu <code class="literal">sadump</code> mechanism is designed to provide a <code class="literal">fallback</code> dump capture in an event when <code class="literal">kdump</code> is unable to complete successfully. The <code class="literal">sadump</code> mechanism is invoked manually from the system Management Board (MMB) interface. Using MMB, configure <code class="literal">kdump</code> like for an Intel 64 or AMD64 server and then proceed to enable <code class="literal">sadump</code>.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Add or edit the following lines in the <code class="literal">/etc/sysctl.conf</code> file to ensure that <code class="literal">kdump</code> starts as expected for <code class="literal">sadump</code>:
					</p><pre class="screen">kernel.panic=0
kernel.unknown_nmi_panic=1</pre><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
							In particular, ensure that after <code class="literal">kdump</code>, the system does not reboot. If the system reboots after <code class="literal">kdump</code> has failed to save the <code class="literal">vmcore</code> file, then it is not possible to invoke the <code class="literal">sadump</code>.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Set the <code class="literal">failure_action</code> parameter in <code class="literal">/etc/kdump.conf</code> appropriately as <code class="literal">halt</code> or <code class="literal">shell</code>.
					</p><pre class="screen">failure_action shell</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The FUJITSU Server PRIMEQUEST 2000 Series Installation Manual
					</li></ul></div></section></section><section class="chapter" id="analyzing-a-core-dump_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 19. Analyzing a core dump</h2></div></div></div><p class="_abstract _abstract">
			To determine the cause of the system crash, you can use the <span class="strong strong"><strong><span class="application application">crash</span></strong></span> utility, which provides an interactive prompt very similar to the GNU Debugger (GDB). This utility allows you to interactively analyze a core dump created by <code class="literal">kdump</code>, <code class="literal">netdump</code>, <code class="literal">diskdump</code> or <code class="literal">xendump</code> as well as a running Linux system. Alternatively, you have the option to use Kernel Oops Analyzer or the Kdump Helper tool.
		</p><section class="section" id="installing-the-crash-utility_analyzing-a-core-dump"><div class="titlepage"><div><div><h3 class="title">19.1. Installing the crash utility</h3></div></div></div><p class="_abstract _abstract">
				With the provided information, understand the required packages and the procedure to install the <span class="strong strong"><strong><span class="application application">crash</span></strong></span> utility. The <code class="literal">crash</code> utility might not be installed by default on your Red Hat Enterprise Linux 9 systems. <code class="literal">crash</code> is a tool to interactively analyze a system’s state while it is running or after a kernel crash occurs and a core dump file is created. The core dump file is also known as the <code class="literal">vmcore</code> file.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enable the relevant repositories:
					</p><pre class="screen"># subscription-manager repos --enable <span class="emphasis"><em>baseos repository</em></span></pre><pre class="screen"># subscription-manager repos --enable <span class="emphasis"><em>appstream repository</em></span></pre><pre class="screen"># subscription-manager repos --enable <span class="emphasis"><em>rhel-9-for-x86_64-baseos-debug-rpms</em></span></pre></li><li class="listitem"><p class="simpara">
						Install the <code class="literal package">crash</code> package:
					</p><pre class="screen"># dnf install crash</pre></li><li class="listitem"><p class="simpara">
						Install the <code class="literal package">kernel-debuginfo</code> package:
					</p><pre class="screen"># dnf install kernel-debuginfo</pre><p class="simpara">
						The package <code class="literal">kernel-debuginfo</code> will correspond to the running kernel and provides the data necessary for the dump analysis.
					</p></li></ol></div></section><section class="section" id="running-and-exiting-the-crash-utility_analyzing-a-core-dump"><div class="titlepage"><div><div><h3 class="title">19.2. Running and exiting the crash utility</h3></div></div></div><p class="_abstract _abstract">
				With the provided information, understand the required parameters and the procedure to run and exit the <code class="literal">crash</code> utility.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Identify the currently running kernel (for example <code class="literal">5.14.0-1.el9.x86_64</code>).
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To start the <code class="literal">crash</code> utility, two necessary parameters need to be passed to the command:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The debug-info (a decompressed vmlinuz image), for example <code class="literal">/usr/lib/debug/lib/modules/5.14.0-1.el9.x86_64/vmlinux</code> provided through a specific <code class="literal">kernel-debuginfo</code> package.
							</li><li class="listitem"><p class="simpara">
								The actual vmcore file, for example <code class="literal">/var/crash/127.0.0.1-2021-09-13-14:05:33/vmcore</code>
							</p><p class="simpara">
								The resulting <code class="literal command">crash</code> command then looks like this:
							</p><pre class="screen"># crash /usr/lib/debug/lib/modules/5.14.0-1.el9.x86_64/vmlinux /var/crash/127.0.0.1-2021-09-13-14:05:33/vmcore</pre><p class="simpara">
								Use the same <span class="emphasis"><em>&lt;kernel&gt;</em></span> version that was captured by <code class="literal">kdump</code>.
							</p></li></ul></div></li><li class="listitem"><p class="simpara">
						Running the crash utility
					</p><p class="simpara">
						The following example shows analyzing a core dump created on September 13 2021 at 14:05 PM, using the 5.14.0-1.el9.x86_64 kernel.
					</p><pre class="screen">...
WARNING: kernel relocated [202MB]: patching 90160 gdb minimal_symbol values

      KERNEL: /usr/lib/debug/lib/modules/5.14.0-1.el9.x86_64/vmlinux
    DUMPFILE: /var/crash/127.0.0.1-2021-09-13-14:05:33/vmcore  [PARTIAL DUMP]
        CPUS: 2
        DATE: Mon Sep 13 14:05:16 2021
      UPTIME: 01:03:57
LOAD AVERAGE: 0.00, 0.00, 0.00
       TASKS: 586
    NODENAME: localhost.localdomain
     RELEASE: 5.14.0-1.el9.x86_64
     VERSION: #1 SMP Wed Aug 29 11:51:55 UTC 2018
     MACHINE: x86_64  (2904 Mhz)
      MEMORY: 2.9 GB
       PANIC: "sysrq: SysRq : Trigger a crash"
         PID: 10635
     COMMAND: "bash"
        TASK: ffff8d6c84271800  [THREAD_INFO: ffff8d6c84271800]
         CPU: 1
       STATE: TASK_RUNNING (SYSRQ)

crash&gt;</pre></li><li class="listitem"><p class="simpara">
						To exit the interactive prompt and stop <code class="literal application">crash</code>, type <code class="literal command">exit</code> or <code class="literal command">q</code>.
					</p><pre class="screen">crash&gt; <span class="strong strong"><strong>exit</strong></span>
~]#</pre></li></ol></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The <code class="literal command">crash</code> command is also utilized as a powerful tool for debugging a live system. However, you must use it with caution to avoid system-level issues.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/articles/206873">A Guide to Unexpected System Restarts</a>
					</li></ul></div></section><section class="section" id="displaying-various-indicators-in-the-crash-utility_analyzing-a-core-dump"><div class="titlepage"><div><div><h3 class="title">19.3. Displaying various indicators in the crash utility</h3></div></div></div><p class="_abstract _abstract">
				Use the <code class="literal">crash</code> utility to display various indicators, such as a kernel message buffer, a backtrace, a process status, virtual memory information and open files.
			</p><div class="itemizedlist"><p class="title"><strong>Displaying the message buffer</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To display the kernel message buffer, type the <code class="literal command">log</code> command at the interactive prompt:
					</p><pre class="screen">crash&gt; <span class="strong strong"><strong>log</strong></span>
<span class="strong strong"><strong>... several lines omitted ...</strong></span>
EIP: 0060:[&lt;c068124f&gt;] EFLAGS: 00010096 CPU: 2
EIP is at sysrq_handle_crash+0xf/0x20
EAX: 00000063 EBX: 00000063 ECX: c09e1c8c EDX: 00000000
ESI: c0a09ca0 EDI: 00000286 EBP: 00000000 ESP: ef4dbf24
 DS: 007b ES: 007b FS: 00d8 GS: 00e0 SS: 0068
Process bash (pid: 5591, ti=ef4da000 task=f196d560 task.ti=ef4da000)
Stack:
 c068146b c0960891 c0968653 00000003 00000000 00000002 efade5c0 c06814d0
&lt;0&gt; fffffffb c068150f b7776000 f2600c40 c0569ec4 ef4dbf9c 00000002 b7776000
&lt;0&gt; efade5c0 00000002 b7776000 c0569e60 c051de50 ef4dbf9c f196d560 ef4dbfb4
Call Trace:
 [&lt;c068146b&gt;] ? __handle_sysrq+0xfb/0x160
 [&lt;c06814d0&gt;] ? write_sysrq_trigger+0x0/0x50
 [&lt;c068150f&gt;] ? write_sysrq_trigger+0x3f/0x50
 [&lt;c0569ec4&gt;] ? proc_reg_write+0x64/0xa0
 [&lt;c0569e60&gt;] ? proc_reg_write+0x0/0xa0
 [&lt;c051de50&gt;] ? vfs_write+0xa0/0x190
 [&lt;c051e8d1&gt;] ? sys_write+0x41/0x70
 [&lt;c0409adc&gt;] ? syscall_call+0x7/0xb
Code: a0 c0 01 0f b6 41 03 19 d2 f7 d2 83 e2 03 83 e0 cf c1 e2 04 09 d0 88 41 03 f3 c3 90 c7 05 c8 1b 9e c0 01 00 00 00 0f ae f8 89 f6 &lt;c6&gt; 05 00 00 00 00 01 c3 89 f6 8d bc 27 00 00 00 00 8d 50 d0 83
EIP: [&lt;c068124f&gt;] sysrq_handle_crash+0xf/0x20 SS:ESP 0068:ef4dbf24
CR2: 0000000000000000</pre><p class="simpara">
						Type <code class="literal command">help log</code> for more information about the command usage.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							The kernel message buffer includes the most essential information about the system crash. It is always dumped first in to the <code class="literal">vmcore-dmesg.txt</code> file. This is useful when an attempt to get the full <code class="literal">vmcore</code> file failed, for example because of lack of space on the target location. By default, <code class="literal">vmcore-dmesg.txt</code> is placed in the <code class="literal">/var/crash/</code> directory.
						</p></div></rh-alert></li></ul></div><div class="itemizedlist"><p class="title"><strong>Displaying a backtrace</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To display the kernel stack trace, use the <code class="literal command">bt</code> command.
					</p><pre class="screen">crash&gt; <span class="strong strong"><strong>bt</strong></span>
PID: 5591   TASK: f196d560  CPU: 2   COMMAND: "bash"
 #0 [ef4dbdcc] crash_kexec at c0494922
 #1 [ef4dbe20] oops_end at c080e402
 #2 [ef4dbe34] no_context at c043089d
 #3 [ef4dbe58] bad_area at c0430b26
 #4 [ef4dbe6c] do_page_fault at c080fb9b
 #5 [ef4dbee4] error_code (via page_fault) at c080d809
    EAX: 00000063  EBX: 00000063  ECX: c09e1c8c  EDX: 00000000  EBP: 00000000
    DS:  007b      ESI: c0a09ca0  ES:  007b      EDI: 00000286  GS:  00e0
    CS:  0060      EIP: c068124f  ERR: ffffffff  EFLAGS: 00010096
 #6 [ef4dbf18] sysrq_handle_crash at c068124f
 #7 [ef4dbf24] __handle_sysrq at c0681469
 #8 [ef4dbf48] write_sysrq_trigger at c068150a
 #9 [ef4dbf54] proc_reg_write at c0569ec2
#10 [ef4dbf74] vfs_write at c051de4e
#11 [ef4dbf94] sys_write at c051e8cc
#12 [ef4dbfb0] system_call at c0409ad5
    EAX: ffffffda  EBX: 00000001  ECX: b7776000  EDX: 00000002
    DS:  007b      ESI: 00000002  ES:  007b      EDI: b7776000
    SS:  007b      ESP: bfcb2088  EBP: bfcb20b4  GS:  0033
    CS:  0073      EIP: 00edc416  ERR: 00000004  EFLAGS: 00000246</pre><p class="simpara">
						Type <code class="literal command">bt <span class="emphasis"><em>&lt;pid&gt;</em></span></code> to display the backtrace of a specific process or type <code class="literal command">help bt</code> for more information about <code class="literal command">bt</code> usage.
					</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Displaying a process status</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To display the status of processes in the system, use the <code class="literal command">ps</code> command.
					</p><pre class="screen">crash&gt; <span class="strong strong"><strong>ps</strong></span>
   PID    PPID  CPU   TASK    ST  %MEM     VSZ    RSS  COMM
&gt;     0      0   0  c09dc560  RU   0.0       0      0  [swapper]
&gt;     0      0   1  f7072030  RU   0.0       0      0  [swapper]
      0      0   2  f70a3a90  RU   0.0       0      0  [swapper]
&gt;     0      0   3  f70ac560  RU   0.0       0      0  [swapper]
      1      0   1  f705ba90  IN   0.0    2828   1424  init
<span class="strong strong"><strong>... several lines omitted ...</strong></span>
   5566      1   1  f2592560  IN   0.0   12876    784  auditd
   5567      1   2  ef427560  IN   0.0   12876    784  auditd
   5587   5132   0  f196d030  IN   0.0   11064   3184  sshd
&gt;  5591   5587   2  f196d560  RU   0.0    5084   1648  bash</pre><p class="simpara">
						Use <code class="literal command">ps <span class="emphasis"><em>&lt;pid&gt;</em></span></code> to display the status of a single specific process. Use <span class="emphasis"><em>help ps</em></span> for more information about <code class="literal command">ps</code> usage.
					</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Displaying virtual memory information</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To display basic virtual memory information, type the <code class="literal command">vm</code> command at the interactive prompt.
					</p><pre class="screen">crash&gt; <span class="strong strong"><strong>vm</strong></span>
PID: 5591   TASK: f196d560  CPU: 2   COMMAND: "bash"
   MM       PGD      RSS    TOTAL_VM
f19b5900  ef9c6000  1648k    5084k
  VMA       START      END    FLAGS  FILE
f1bb0310    242000    260000 8000875  /lib/ld-2.12.so
f26af0b8    260000    261000 8100871  /lib/ld-2.12.so
efbc275c    261000    262000 8100873  /lib/ld-2.12.so
efbc2a18    268000    3ed000 8000075  /lib/libc-2.12.so
efbc23d8    3ed000    3ee000 8000070  /lib/libc-2.12.so
efbc2888    3ee000    3f0000 8100071  /lib/libc-2.12.so
efbc2cd4    3f0000    3f1000 8100073  /lib/libc-2.12.so
efbc243c    3f1000    3f4000 100073
efbc28ec    3f6000    3f9000 8000075  /lib/libdl-2.12.so
efbc2568    3f9000    3fa000 8100071  /lib/libdl-2.12.so
efbc2f2c    3fa000    3fb000 8100073  /lib/libdl-2.12.so
f26af888    7e6000    7fc000 8000075  /lib/libtinfo.so.5.7
f26aff2c    7fc000    7ff000 8100073  /lib/libtinfo.so.5.7
efbc211c    d83000    d8f000 8000075  /lib/libnss_files-2.12.so
efbc2504    d8f000    d90000 8100071  /lib/libnss_files-2.12.so
efbc2950    d90000    d91000 8100073  /lib/libnss_files-2.12.so
f26afe00    edc000    edd000 4040075
f1bb0a18   8047000   8118000 8001875  /bin/bash
f1bb01e4   8118000   811d000 8101873  /bin/bash
f1bb0c70   811d000   8122000 100073
f26afae0   9fd9000   9ffa000 100073
<span class="strong strong"><strong>... several lines omitted ...</strong></span></pre><p class="simpara">
						Use <code class="literal command">vm <span class="emphasis"><em>&lt;pid&gt;</em></span></code> to display information about a single specific process, or use <code class="literal command">help vm</code> for more information about <code class="literal command">vm</code> usage.
					</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Displaying open files</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To display information about open files, use the <code class="literal command">files</code> command.
					</p><pre class="screen">crash&gt; <span class="strong strong"><strong>files</strong></span>
PID: 5591   TASK: f196d560  CPU: 2   COMMAND: "bash"
ROOT: /    CWD: /root
 FD    FILE     DENTRY    INODE    TYPE  PATH
  0  f734f640  eedc2c6c  eecd6048  CHR   /pts/0
  1  efade5c0  eee14090  f00431d4  REG   /proc/sysrq-trigger
  2  f734f640  eedc2c6c  eecd6048  CHR   /pts/0
 10  f734f640  eedc2c6c  eecd6048  CHR   /pts/0
255  f734f640  eedc2c6c  eecd6048  CHR   /pts/0</pre><p class="simpara">
						Use <code class="literal command">files <span class="emphasis"><em>&lt;pid&gt;</em></span></code> to display files opened by only one selected process, or use <code class="literal command">help files</code> for more information about <code class="literal command">files</code> usage.
					</p></li></ul></div></section><section class="section" id="using-kernel-oops-analyzer_analyzing-a-core-dump"><div class="titlepage"><div><div><h3 class="title">19.4. Using Kernel Oops Analyzer</h3></div></div></div><p class="_abstract _abstract">
				The Kernel Oops Analyzer tool analyzes the crash dump by comparing the oops messages with known issues in the knowledge base.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Secure an oops message to feed the Kernel Oops Analyzer.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Access the Kernel Oops Analyzer tool.
					</li><li class="listitem"><p class="simpara">
						To diagnose a kernel crash issue, upload a kernel oops log generated in <code class="literal">vmcore</code>.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Alternatively you can also diagnose a kernel crash issue by providing a text message or a <code class="literal">vmcore-dmesg.txt</code> as an input.+
							</li></ul></div></li><li class="listitem">
						Click <code class="literal">DETECT</code> to compare the oops message based on information from the <code class="literal command">makedumpfile</code> against known solutions.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/labs/kerneloopsanalyzer/">The Kernel Oops Analyzer</a> article
					</li></ul></div></section><section class="section" id="the-kdump-helper-tool_analyzing-a-core-dump"><div class="titlepage"><div><div><h3 class="title">19.5. The Kdump Helper tool</h3></div></div></div><p class="_abstract _abstract">
				The Kdump Helper tool helps to set up the <code class="literal">kdump</code> using the provided information. Kdump Helper generates a configuration script based on your preferences. Initiating and running the script on your server sets up the <code class="literal">kdump</code> service.
			</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/labs/kdumphelper/wizard">Kdump Helper</a>
					</li></ul></div></section></section><section class="chapter" id="using-early-kdump-to-capture-boot-time-crashes_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 20. Using early kdump to capture boot time crashes</h2></div></div></div><p class="_abstract _abstract">
			Early kdump is a feature of the <code class="literal">kdump</code> mechanism to capture the <code class="literal">vmcore</code> file if a system or kernel crash occurs during the early phases of the boot process before the system services start. Early kdump loads the crash kernel and the crash kernel’s <code class="literal">initramfs</code> in the memory much earlier.
		</p><p>
			A kernel crash can sometimes occur during the early boot phase before the <code class="literal">kdump</code> service starts and is able to capture and save the contents of the crashed kernel memory. Therefore, crucial information related to the crash, which is important for troubleshooting, is lost. To address this problem, you can use the <code class="literal">early kdump</code> feature, which is part of the <code class="literal">kdump</code> service.
		</p><section class="section" id="enabling-early-kdump_using-early-kdump-to-capture-boot-time-crashes"><div class="titlepage"><div><div><h3 class="title">20.1. Enabling early kdump</h3></div></div></div><p class="_abstract _abstract">
				The <code class="literal">early kdump</code> feature sets up the crash kernel and the initial RAM disk image (<code class="literal">initramfs</code>) to load early enough to capture the <code class="literal">vmcore</code> information for an early crash. This helps to eliminate the risk of losing information about the early boot kernel crashes.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						An active RHEL subscription.
					</li><li class="listitem">
						A repository containing the <code class="literal package">kexec-tools</code> package for your system CPU architecture.
					</li><li class="listitem">
						Fulfilled <code class="literal">kdump</code> configuration and targets requirements. For more information see, <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index#supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel">Supported kdump configurations and targets</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify that the <code class="literal">kdump</code> service is enabled and active:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl is-enabled kdump.service &amp;&amp; systemctl is-active kdump.service</strong></span>
enabled
active</pre><p class="simpara">
						If <code class="literal">kdump</code> is not enabled and running, set all required configurations and verify that <code class="literal">kdump</code> service is enabled.
					</p></li><li class="listitem"><p class="simpara">
						Rebuild the <code class="literal">initramfs</code> image of the booting kernel with the <code class="literal">early kdump</code> functionality:
					</p><pre class="literallayout"># dracut -f --add earlykdump</pre></li><li class="listitem"><p class="simpara">
						Add the <code class="literal">rd.earlykdump</code> kernel command line parameter:
					</p><pre class="literallayout"># grubby --update-kernel=/boot/vmlinuz-$(uname -r) --args="rd.earlykdump"</pre></li><li class="listitem"><p class="simpara">
						Reboot the system to reflect the changes:
					</p><pre class="screen"># reboot</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify that <code class="literal">rd.earlykdump</code> is successfully added and <code class="literal">early kdump</code> feature is enabled:
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>cat /proc/cmdline</strong></span>
BOOT_IMAGE=(hd0,msdos1)/vmlinuz-5.14.0-1.el9.x86_64 root=/dev/mapper/rhel-root ro crashkernel=auto resume=/dev/mapper/rhel-swap rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap rhgb quiet rd.earlykdump

# <span class="strong strong"><strong>journalctl -x | grep early-kdump</strong></span>
Sep 13 15:46:11 redhat dracut-cmdline[304]: early-kdump is enabled.
Sep 13 15:46:12 redhat dracut-cmdline[304]: kexec: loaded early-kdump kernel</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The <code class="literal">/usr/share/doc/kexec-tools/early-kdump-howto.txt</code> file
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/solutions/3700611">What is early kdump support and how do I configure it?</a> (Red Hat Knowledgebase)
					</li></ul></div></section></section><section class="chapter" id="signing-a-kernel-and-modules-for-secure-boot_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 21. Signing a kernel and modules for Secure Boot</h2></div></div></div><p class="_abstract _abstract">
			You can enhance the security of your system by using a signed kernel and signed kernel modules. On UEFI-based build systems where Secure Boot is enabled, you can self-sign a privately built kernel or kernel modules. Furthermore, you can import your public key into a target system where you want to deploy your kernel or kernel modules.
		</p><p>
			If Secure Boot is enabled, all of the following components have to be signed with a private key and authenticated with the corresponding public key:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					UEFI operating system boot loader
				</li><li class="listitem">
					The Red Hat Enterprise Linux kernel
				</li><li class="listitem">
					All kernel modules
				</li></ul></div><p>
			If any of these components are not signed and authenticated, the system cannot finish the booting process.
		</p><p>
			Red Hat Enterprise Linux 9 includes:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Signed boot loaders
				</li><li class="listitem">
					Signed kernels
				</li><li class="listitem">
					Signed kernel modules
				</li></ul></div><p>
			In addition, the signed first-stage boot loader and the signed kernel include embedded Red Hat public keys. These signed executable binaries and embedded keys enable Red Hat Enterprise Linux 9 to install, boot, and run with the Microsoft UEFI Secure Boot Certification Authority keys that are provided by the UEFI firmware on systems that support UEFI Secure Boot.
		</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Not all UEFI-based systems include support for Secure Boot.
					</li><li class="listitem">
						The build system, where you build and sign your kernel module, does not need to have UEFI Secure Boot enabled and does not even need to be a UEFI-based system.
					</li></ul></div></div></rh-alert><section class="section" id="prerequisites"><div class="titlepage"><div><div><h3 class="title">21.1. Prerequisites</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To be able to sign externally built kernel modules, install the utilities from the following packages:
					</p><pre class="screen"># <span class="strong strong"><strong>dnf install pesign openssl kernel-devel mokutil keyutils</strong></span></pre><rh-table id="idm139825289654080"><table class="gt-4-cols lt-7-rows"><caption>Table 21.1. Required utilities</caption><colgroup><col style="width: 18%; " class="col_1"><!--Empty--><col style="width: 18%; " class="col_2"><!--Empty--><col style="width: 18%; " class="col_3"><!--Empty--><col style="width: 45%; " class="col_4"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm139825287942304" scope="col">Utility</th><th align="left" valign="top" id="idm139825287941216" scope="col">Provided by package</th><th align="left" valign="top" id="idm139825287940128" scope="col">Used on</th><th align="left" valign="top" id="idm139825287939040" scope="col">Purpose</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139825287942304"> <p>
										<code class="literal">efikeygen</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139825287941216"> <p>
										<code class="literal package">pesign</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139825287940128"> <p>
										Build system
									</p>
									 </td><td align="left" valign="top" headers="idm139825287939040"> <p>
										Generates public and private X.509 key pair
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139825287942304"> <p>
										<code class="literal">openssl</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139825287941216"> <p>
										<code class="literal package">openssl</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139825287940128"> <p>
										Build system
									</p>
									 </td><td align="left" valign="top" headers="idm139825287939040"> <p>
										Exports the unencrypted private key
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139825287942304"> <p>
										<code class="literal">sign-file</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139825287941216"> <p>
										<code class="literal package">kernel-devel</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139825287940128"> <p>
										Build system
									</p>
									 </td><td align="left" valign="top" headers="idm139825287939040"> <p>
										Executable file used to sign a kernel module with the private key
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139825287942304"> <p>
										<code class="literal">mokutil</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139825287941216"> <p>
										<code class="literal package">mokutil</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139825287940128"> <p>
										Target system
									</p>
									 </td><td align="left" valign="top" headers="idm139825287939040"> <p>
										Optional utility used to manually enroll the public key
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139825287942304"> <p>
										<code class="literal">keyctl</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139825287941216"> <p>
										<code class="literal package">keyutils</code>
									</p>
									 </td><td align="left" valign="top" headers="idm139825287940128"> <p>
										Target system
									</p>
									 </td><td align="left" valign="top" headers="idm139825287939040"> <p>
										Optional utility used to display public keys in the system keyring
									</p>
									 </td></tr></tbody></table></rh-table></li></ul></div></section><section class="section" id="con_what-is-uefi-secure-boot_signing-a-kernel-and-modules-for-secure-boot"><div class="titlepage"><div><div><h3 class="title">21.2. What is UEFI Secure Boot</h3></div></div></div><p>
				With the <span class="emphasis"><em>Unified Extensible Firmware Interface</em></span> (UEFI) Secure Boot technology, you can prevent the execution of the kernel-space code that has not been signed by a trusted key. The system boot loader is signed with a cryptographic key. The database of public keys, which is contained in the firmware, authorizes the signing key. You can subsequently verify a signature in the next-stage boot loader and the kernel.
			</p><p>
				UEFI Secure Boot establishes a chain of trust from the firmware to the signed drivers and kernel modules as follows:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						An UEFI private key signs, and a public key authenticates the <code class="literal">shim</code> first-stage boot loader. A <span class="emphasis"><em>certificate authority</em></span> (CA) in turn signs the public key. The CA is stored in the firmware database.
					</li><li class="listitem">
						The <code class="literal">shim</code> file contains the Red Hat public key <span class="strong strong"><strong>Red Hat Secure Boot (CA key 1)</strong></span> to authenticate the GRUB boot loader and the kernel.
					</li><li class="listitem">
						The kernel in turn contains public keys to authenticate drivers and modules.
					</li></ul></div><p>
				Secure Boot is the boot path validation component of the UEFI specification. The specification defines:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Programming interface for cryptographically protected UEFI variables in non-volatile storage.
					</li><li class="listitem">
						Storing the trusted X.509 root certificates in UEFI variables.
					</li><li class="listitem">
						Validation of UEFI applications such as boot loaders and drivers.
					</li><li class="listitem">
						Procedures to revoke known-bad certificates and application hashes.
					</li></ul></div><p>
				UEFI Secure Boot helps in the detection of unauthorized changes but does <span class="strong strong"><strong>not</strong></span>:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Prevent installation or removal of second-stage boot loaders.
					</li><li class="listitem">
						Require explicit user confirmation of such changes.
					</li><li class="listitem">
						Stop boot path manipulations. Signatures are verified during booting, not when the boot loader is installed or updated.
					</li></ul></div><p>
				If the boot loader or the kernel are not signed by a system trusted key, Secure Boot prevents them from starting.
			</p></section><section class="section" id="con_uefi-secure-boot-support_signing-a-kernel-and-modules-for-secure-boot"><div class="titlepage"><div><div><h3 class="title">21.3. UEFI Secure Boot support</h3></div></div></div><p>
				You can install and run Red Hat Enterprise Linux 9 on systems with enabled UEFI Secure Boot if the kernel and all the loaded drivers are signed with a trusted key. Red Hat provides kernels and drivers that are signed and authenticated by the relevant Red Hat keys.
			</p><p>
				If you want to load externally built kernels or drivers, you must sign them as well.
			</p><div class="itemizedlist"><p class="title"><strong>Restrictions imposed by UEFI Secure Boot</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The system only runs the kernel-mode code after its signature has been properly authenticated.
					</li><li class="listitem">
						GRUB module loading is disabled because there is no infrastructure for signing and verification of GRUB modules. Allowing them to be loaded constitutes execution of untrusted code inside the security perimeter that Secure Boot defines.
					</li><li class="listitem">
						Red Hat provides a signed GRUB binary that contains all the supported modules on Red Hat Enterprise Linux 9.
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/articles/1351013">Restrictions Imposed by UEFI Secure Boot</a>
					</li></ul></div></section><section class="section" id="ref_requirements-for-authenticating-kernel-modules-with-x-509-keys_signing-a-kernel-and-modules-for-secure-boot"><div class="titlepage"><div><div><h3 class="title">21.4. Requirements for authenticating kernel modules with X.509 keys</h3></div></div></div><p class="_abstract _abstract">
				In Red Hat Enterprise Linux 9, when a kernel module is loaded, the kernel checks the signature of the module against the public X.509 keys from the kernel system keyring (<code class="literal">.builtin_trusted_keys</code>) and the kernel platform keyring (<code class="literal">.platform</code>). The <code class="literal">.platform</code> keyring contains keys from third-party platform providers and custom public keys. The keys from the kernel system <code class="literal">.blacklist</code> keyring are excluded from verification.
			</p><p>
				You need to meet certain conditions to load kernel modules on systems with enabled UEFI Secure Boot functionality:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						If UEFI Secure Boot is enabled or if the <code class="literal option">module.sig_enforce</code> kernel parameter has been specified:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								You can only load those signed kernel modules whose signatures were authenticated against keys from the system keyring (<code class="literal">.builtin_trusted_keys</code>) and the platform keyring (<code class="literal">.platform</code>).
							</li><li class="listitem">
								The public key must not be on the system revoked keys keyring (<code class="literal">.blacklist</code>).
							</li></ul></div></li><li class="listitem"><p class="simpara">
						If UEFI Secure Boot is disabled and the <code class="literal option">module.sig_enforce</code> kernel parameter has not been specified:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								You can load unsigned kernel modules and signed kernel modules without a public key.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						If the system is not UEFI-based or if UEFI Secure Boot is disabled:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Only the keys embedded in the kernel are loaded onto <code class="literal">.builtin_trusted_keys</code> and <code class="literal">.platform</code>.
							</li><li class="listitem">
								You have no ability to augment that set of keys without rebuilding the kernel.
							</li></ul></div></li></ul></div><rh-table id="idm139825288822704"><table class="gt-4-cols lt-7-rows"><caption>Table 21.2. Kernel module authentication requirements for loading</caption><colgroup><col style="width: 18%; " class="col_1"><!--Empty--><col style="width: 18%; " class="col_2"><!--Empty--><col style="width: 18%; " class="col_3"><!--Empty--><col style="width: 18%; " class="col_4"><!--Empty--><col style="width: 18%; " class="col_5"><!--Empty--><col style="width: 9%; " class="col_6"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm139825288814128" scope="col">Module signed</th><th align="left" valign="top" id="idm139825288813040" scope="col">Public key found and signature valid</th><th align="left" valign="top" id="idm139825288811936" scope="col">UEFI Secure Boot state</th><th align="left" valign="top" id="idm139825288810848" scope="col"><code class="literal">sig_enforce</code></th><th align="left" valign="top" id="idm139825288809600" scope="col">Module load</th><th align="left" valign="top" id="idm139825288808352" scope="col">Kernel tainted</th></tr></thead><tbody><tr><td rowspan="3" align="left" valign="top" headers="idm139825288814128"> <p>
								Unsigned
							</p>
							 </td><td rowspan="3" align="left" valign="top" headers="idm139825288813040"> <p>
								-
							</p>
							 </td><td align="left" valign="top" headers="idm139825288811936"> <p>
								Not enabled
							</p>
							 </td><td align="left" valign="top" headers="idm139825288810848"> <p>
								Not enabled
							</p>
							 </td><td align="left" valign="top" headers="idm139825288809600"> <p>
								Succeeds
							</p>
							 </td><td align="left" valign="top" headers="idm139825288808352"> <p>
								Yes
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825288811936"> <p>
								Not enabled
							</p>
							 </td><td align="left" valign="top" headers="idm139825288810848"> <p>
								Enabled
							</p>
							 </td><td align="left" valign="top" headers="idm139825288809600"> <p>
								Fails
							</p>
							 </td><td align="left" valign="top" headers="idm139825288808352"> <p>
								-
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825288811936"> <p>
								Enabled
							</p>
							 </td><td align="left" valign="top" headers="idm139825288810848"> <p>
								-
							</p>
							 </td><td align="left" valign="top" headers="idm139825288809600"> <p>
								Fails
							</p>
							 </td><td align="left" valign="top" headers="idm139825288808352"> <p>
								-
							</p>
							 </td></tr><tr><td rowspan="3" align="left" valign="top" headers="idm139825288814128"> <p>
								Signed
							</p>
							 </td><td rowspan="3" align="left" valign="top" headers="idm139825288813040"> <p>
								No
							</p>
							 </td><td align="left" valign="top" headers="idm139825288811936"> <p>
								Not enabled
							</p>
							 </td><td align="left" valign="top" headers="idm139825288810848"> <p>
								Not enabled
							</p>
							 </td><td align="left" valign="top" headers="idm139825288809600"> <p>
								Succeeds
							</p>
							 </td><td align="left" valign="top" headers="idm139825288808352"> <p>
								Yes
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825288811936"> <p>
								Not enabled
							</p>
							 </td><td align="left" valign="top" headers="idm139825288810848"> <p>
								Enabled
							</p>
							 </td><td align="left" valign="top" headers="idm139825288809600"> <p>
								Fails
							</p>
							 </td><td align="left" valign="top" headers="idm139825288808352"> <p>
								-
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825288811936"> <p>
								Enabled
							</p>
							 </td><td align="left" valign="top" headers="idm139825288810848"> <p>
								-
							</p>
							 </td><td align="left" valign="top" headers="idm139825288809600"> <p>
								Fails
							</p>
							 </td><td align="left" valign="top" headers="idm139825288808352"> <p>
								-
							</p>
							 </td></tr><tr><td rowspan="3" align="left" valign="top" headers="idm139825288814128"> <p>
								Signed
							</p>
							 </td><td rowspan="3" align="left" valign="top" headers="idm139825288813040"> <p>
								Yes
							</p>
							 </td><td align="left" valign="top" headers="idm139825288811936"> <p>
								Not enabled
							</p>
							 </td><td align="left" valign="top" headers="idm139825288810848"> <p>
								Not enabled
							</p>
							 </td><td align="left" valign="top" headers="idm139825288809600"> <p>
								Succeeds
							</p>
							 </td><td align="left" valign="top" headers="idm139825288808352"> <p>
								No
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825288811936"> <p>
								Not enabled
							</p>
							 </td><td align="left" valign="top" headers="idm139825288810848"> <p>
								Enabled
							</p>
							 </td><td align="left" valign="top" headers="idm139825288809600"> <p>
								Succeeds
							</p>
							 </td><td align="left" valign="top" headers="idm139825288808352"> <p>
								No
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825288811936"> <p>
								Enabled
							</p>
							 </td><td align="left" valign="top" headers="idm139825288810848"> <p>
								-
							</p>
							 </td><td align="left" valign="top" headers="idm139825288809600"> <p>
								Succeeds
							</p>
							 </td><td align="left" valign="top" headers="idm139825288808352"> <p>
								No
							</p>
							 </td></tr></tbody></table></rh-table></section><section class="section" id="sources-for-public-keys_signing-a-kernel-and-modules-for-secure-boot"><div class="titlepage"><div><div><h3 class="title">21.5. Sources for public keys</h3></div></div></div><p class="_abstract _abstract">
				During boot, the kernel loads X.509 keys from a set of persistent key stores into the following keyrings:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The system keyring (<code class="literal">.builtin_trusted_keys</code>)
					</li><li class="listitem">
						The <code class="literal">.platform</code> keyring
					</li><li class="listitem">
						The system <code class="literal">.blacklist</code> keyring
					</li></ul></div><rh-table id="idm139825320459984"><table class="gt-4-cols lt-7-rows"><caption>Table 21.3. Sources for system keyrings</caption><colgroup><col style="width: 30%; " class="col_1"><!--Empty--><col style="width: 15%; " class="col_2"><!--Empty--><col style="width: 20%; " class="col_3"><!--Empty--><col style="width: 35%; " class="col_4"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm139825320453280" scope="col">Source of X.509 keys</th><th align="left" valign="top" id="idm139825320452192" scope="col">User can add keys</th><th align="left" valign="top" id="idm139825320451104" scope="col">UEFI Secure Boot state</th><th align="left" valign="top" id="idm139825320450016" scope="col">Keys loaded during boot</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139825320453280"> <p>
								Embedded in kernel
							</p>
							 </td><td align="left" valign="top" headers="idm139825320452192"> <p>
								No
							</p>
							 </td><td align="left" valign="top" headers="idm139825320451104"> <p>
								-
							</p>
							 </td><td align="left" valign="top" headers="idm139825320450016"> <p>
								<code class="literal">.builtin_trusted_keys</code>
							</p>
							 </td></tr><tr><td rowspan="2" align="left" valign="top" headers="idm139825320453280"> <p>
								UEFI <code class="literal">db</code>
							</p>
							 </td><td rowspan="2" align="left" valign="top" headers="idm139825320452192"> <p>
								Limited
							</p>
							 </td><td align="left" valign="top" headers="idm139825320451104"> <p>
								Not enabled
							</p>
							 </td><td align="left" valign="top" headers="idm139825320450016"> <p>
								No
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825320451104"> <p>
								Enabled
							</p>
							 </td><td align="left" valign="top" headers="idm139825320450016"> <p>
								<code class="literal">.platform</code>
							</p>
							 </td></tr><tr><td rowspan="2" align="left" valign="top" headers="idm139825320453280"> <p>
								Embedded in the <code class="literal">shim</code> boot loader
							</p>
							 </td><td rowspan="2" align="left" valign="top" headers="idm139825320452192"> <p>
								No
							</p>
							 </td><td align="left" valign="top" headers="idm139825320451104"> <p>
								Not enabled
							</p>
							 </td><td align="left" valign="top" headers="idm139825320450016"> <p>
								No
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825320451104"> <p>
								Enabled
							</p>
							 </td><td align="left" valign="top" headers="idm139825320450016"> <p>
								<code class="literal">.platform</code>
							</p>
							 </td></tr><tr><td rowspan="2" align="left" valign="top" headers="idm139825320453280"> <p>
								Machine Owner Key (MOK) list
							</p>
							 </td><td rowspan="2" align="left" valign="top" headers="idm139825320452192"> <p>
								Yes
							</p>
							 </td><td align="left" valign="top" headers="idm139825320451104"> <p>
								Not enabled
							</p>
							 </td><td align="left" valign="top" headers="idm139825320450016"> <p>
								No
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825320451104"> <p>
								Enabled
							</p>
							 </td><td align="left" valign="top" headers="idm139825320450016"> <p>
								<code class="literal">.platform</code>
							</p>
							 </td></tr></tbody></table></rh-table><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">.builtin_trusted_keys</code></span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									A keyring that is built on boot
								</li><li class="listitem">
									Contains trusted public keys
								</li><li class="listitem">
									<code class="literal">root</code> privileges are needed to view the keys
								</li></ul></div></dd><dt><span class="term"><code class="literal">.platform</code></span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									A keyring that is built on boot
								</li><li class="listitem">
									Contains keys from third-party platform providers and custom public keys
								</li><li class="listitem">
									<code class="literal">root</code> privileges are needed to view the keys
								</li></ul></div></dd><dt><span class="term"><code class="literal">.blacklist</code></span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									A keyring with X.509 keys which have been revoked
								</li><li class="listitem">
									A module signed by a key from <code class="literal">.blacklist</code> will fail authentication even if your public key is in <code class="literal">.builtin_trusted_keys</code>
								</li></ul></div></dd><dt><span class="term">UEFI Secure Boot <code class="literal">db</code></span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									A signature database
								</li><li class="listitem">
									Stores keys (hashes) of UEFI applications, UEFI drivers, and boot loaders
								</li><li class="listitem">
									The keys can be loaded on the machine
								</li></ul></div></dd><dt><span class="term">UEFI Secure Boot <code class="literal">dbx</code></span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									A revoked signature database
								</li><li class="listitem">
									Prevents keys from being loaded
								</li><li class="listitem">
									The revoked keys from this database are added to the <code class="literal">.blacklist</code> keyring
								</li></ul></div></dd></dl></div></section><section class="section" id="generating-a-public-and-private-key-pair_signing-a-kernel-and-modules-for-secure-boot"><div class="titlepage"><div><div><h3 class="title">21.6. Generating a public and private key pair</h3></div></div></div><p class="_abstract _abstract">
				To use a custom kernel or custom kernel modules on a Secure Boot-enabled system, you must generate a public and private X.509 key pair. You can use the generated private key to sign the kernel or the kernel modules. You can also validate the signed kernel or kernel modules by adding the corresponding public key to the Machine Owner Key (MOK) for Secure Boot.
			</p><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
					Apply strong security measures and access policies to guard the contents of your private key. In the wrong hands, the key could be used to compromise any system which is authenticated by the corresponding public key.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Create an X.509 public and private key pair:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
								If you only want to sign custom kernel <span class="emphasis"><em>modules</em></span>:
							</p><pre class="screen"># <span class="strong strong"><strong>efikeygen --dbdir /etc/pki/pesign \</strong></span>
            <span class="strong strong"><strong>--self-sign \</strong></span>
            <span class="strong strong"><strong>--module \</strong></span>
            <span class="strong strong"><strong>--common-name 'CN=<span class="emphasis"><em>Organization signing key</em></span>' \</strong></span>
            <span class="strong strong"><strong>--nickname '<span class="emphasis"><em>Custom Secure Boot key</em></span>'</strong></span></pre></li><li class="listitem"><p class="simpara">
								If you want to sign custom <span class="emphasis"><em>kernel</em></span>:
							</p><pre class="screen"># <span class="strong strong"><strong>efikeygen --dbdir /etc/pki/pesign \</strong></span>
            <span class="strong strong"><strong>--self-sign \</strong></span>
            <span class="strong strong"><strong>--kernel \</strong></span>
            <span class="strong strong"><strong>--common-name 'CN=<span class="emphasis"><em>Organization signing key</em></span>' \</strong></span>
            <span class="strong strong"><strong>--nickname '<span class="emphasis"><em>Custom Secure Boot key</em></span>'</strong></span></pre></li><li class="listitem"><p class="simpara">
								When the RHEL system is running FIPS mode:
							</p><pre class="screen"># <span class="strong strong"><strong>efikeygen --dbdir /etc/pki/pesign \</strong></span>
            <span class="strong strong"><strong>--self-sign \</strong></span>
            <span class="strong strong"><strong>--kernel \</strong></span>
            <span class="strong strong"><strong>--common-name 'CN=<span class="emphasis"><em>Organization signing key</em></span>' \</strong></span>
            <span class="strong strong"><strong>--nickname '<span class="emphasis"><em>Custom Secure Boot key</em></span>'</strong></span>
            <span class="strong strong"><strong>--token 'NSS FIPS 140-2 Certificate DB'</strong></span></pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
									In FIPS mode, you must use the <code class="literal">--token</code> option so that <code class="literal">efikeygen</code> finds the default "NSS Certificate DB" token in the PKI database.
								</p></div></rh-alert><p class="simpara">
								The public and private keys are now stored in the <code class="literal">/etc/pki/pesign/</code> directory.
							</p></li></ul></div></li></ul></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					It is a good security practice to sign the kernel and the kernel modules within the validity period of its signing key. However, the <code class="literal">sign-file</code> utility does not warn you and the key will be usable in Red Hat Enterprise Linux 9 regardless of the validity dates.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">openssl(1)</code> manual page
					</li><li class="listitem">
						<span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/security_guide/index#sec-Using_OpenSSL">RHEL Security Guide</a></span></em></span>
					</li><li class="listitem">
						<a class="link" href="#enrolling-public-key-on-target-system-by-adding-the-public-key-to-the-mok-list_signing-a-kernel-and-modules-for-secure-boot" title="21.8. Enrolling public key on target system by adding the public key to the MOK list">Enrolling public key on target system by adding the public key to the MOK list</a>
					</li></ul></div></section><section class="section" id="example-output-of-system-keyrings_signing-a-kernel-and-modules-for-secure-boot"><div class="titlepage"><div><div><h3 class="title">21.7. Example output of system keyrings</h3></div></div></div><p class="_abstract _abstract">
				You can display information about the keys on the system keyrings using the <code class="literal command">keyctl</code> utility from the <code class="literal">keyutils</code> package.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have root permissions.
					</li><li class="listitem">
						You have installed the <code class="literal command">keyctl</code> utility from the <code class="literal">keyutils</code> package.
					</li></ul></div><div class="example" id="idm139825287059216"><p class="title"><strong>Example 21.1. Keyrings output</strong></p><div class="example-contents"><p>
					The following is a shortened example output of <code class="literal">.builtin_trusted_keys</code>, <code class="literal">.platform</code>, and <code class="literal">.blacklist</code> keyrings from a Red Hat Enterprise Linux 9 system where UEFI Secure Boot is enabled.
				</p><pre class="literallayout"># <span class="strong strong"><strong>keyctl list %:.builtin_trusted_keys</strong></span>
6 keys in keyring:
...asymmetric: Red Hat Enterprise Linux Driver Update Program (key 3): bf57f3e87...
...asymmetric: Red Hat Secure Boot (CA key 1): 4016841644ce3a810408050766e8f8a29...
...asymmetric: Microsoft Corporation UEFI CA 2011: 13adbf4309bd82709c8cd54f316ed...
...asymmetric: Microsoft Windows Production PCA 2011: a92902398e16c49778cd90f99e...
...asymmetric: Red Hat Enterprise Linux kernel signing key: 4249689eefc77e95880b...
...asymmetric: Red Hat Enterprise Linux kpatch signing key: 4d38fd864ebe18c5f0b7...

# <span class="strong strong"><strong>keyctl list %:.platform</strong></span>
4 keys in keyring:
...asymmetric: VMware, Inc.: 4ad8da0472073...
...asymmetric: Red Hat Secure Boot CA 5: cc6fafe72...
...asymmetric: Microsoft Windows Production PCA 2011: a929f298e1...
...asymmetric: Microsoft Corporation UEFI CA 2011: 13adbf4e0bd82...

# <span class="strong strong"><strong>keyctl list %:.blacklist</strong></span>
4 keys in keyring:
...blacklist: bin:f5ff83a...
...blacklist: bin:0dfdbec...
...blacklist: bin:38f1d22...
...blacklist: bin:51f831f...</pre><p>
					The <code class="literal">.builtin_trusted_keys</code> keyring in the example shows the addition of two keys from the UEFI Secure Boot <code class="literal">db</code> keys as well as the <code class="literal">Red Hat Secure Boot (CA key 1)</code>, which is embedded in the <code class="literal">shim</code> boot loader.
				</p></div></div><div class="example" id="idm139825287049568"><p class="title"><strong>Example 21.2. Kernel console output</strong></p><div class="example-contents"><p>
					The following example shows the kernel console output. The messages identify the keys with an UEFI Secure Boot related source. These include UEFI Secure Boot <code class="literal">db</code>, embedded <code class="literal">shim</code>, and MOK list.
				</p><pre class="literallayout"># <span class="strong strong"><strong>dmesg | egrep 'integrity.*cert'</strong></span>
[1.512966] integrity: Loading X.509 certificate: UEFI:db
[1.513027] integrity: Loaded X.509 cert 'Microsoft Windows Production PCA 2011: a929023...
[1.513028] integrity: Loading X.509 certificate: UEFI:db
[1.513057] integrity: Loaded X.509 cert 'Microsoft Corporation UEFI CA 2011: 13adbf4309...
[1.513298] integrity: Loading X.509 certificate: UEFI:MokListRT (MOKvar table)
[1.513549] integrity: Loaded X.509 cert 'Red Hat Secure Boot CA 5: cc6fa5e72868ba494e93...</pre></div></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">keyctl(1)</code>, <code class="literal">dmesg(1)</code> manual pages
					</li></ul></div></section><section class="section" id="enrolling-public-key-on-target-system-by-adding-the-public-key-to-the-mok-list_signing-a-kernel-and-modules-for-secure-boot"><div class="titlepage"><div><div><h3 class="title">21.8. Enrolling public key on target system by adding the public key to the MOK list</h3></div></div></div><p class="_abstract _abstract">
				You must authenticate your public key on a system for kernel or kernel module access and enroll it in the platform keyring (<code class="literal">.platform</code>) of the target system. When RHEL 9 boots on a UEFI-based system with Secure Boot enabled, the kernel imports public keys from the <code class="literal">db</code> key database and excludes revoked keys from the <code class="literal">dbx</code> database.
			</p><p>
				The Machine Owner Key (MOK) facility allows expanding the UEFI Secure Boot key database. When booting RHEL 9 on UEFI-enabled systems with Secure Boot enabled, keys on the MOK list are added to the platform keyring (<code class="literal">.platform</code>), along with the keys from the Secure Boot database. The list of MOK keys is stored securely and persistently in the same way, but it is a separate facility from the Secure Boot databases.
			</p><p>
				The MOK facility is supported by <code class="literal">shim</code>, <code class="literal">MokManager</code>, <code class="literal">GRUB</code>, and the <code class="literal">mokutil</code> utility that enables secure key management and authentication for UEFI-based systems.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					To facilitate authentication of your kernel module on your systems, consider requesting your system vendor to incorporate your public key into the UEFI Secure Boot key database in their factory firmware image.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have generated a public and private key pair and know the validity dates of your public keys. For details, see <a class="link" href="#generating-a-public-and-private-key-pair_signing-a-kernel-and-modules-for-secure-boot" title="21.6. Generating a public and private key pair">Generating a public and private key pair</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Export your public key to the <code class="literal">sb_cert.cer</code> file:
					</p><pre class="screen"># <span class="strong strong"><strong>certutil -d /etc/pki/pesign \</strong></span>
           <span class="strong strong"><strong>-n '<span class="emphasis"><em>Custom Secure Boot key</em></span>' \</strong></span>
           <span class="strong strong"><strong>-Lr \</strong></span>
           <span class="strong strong"><strong>&gt; sb_cert.cer</strong></span></pre></li><li class="listitem"><p class="simpara">
						Import your public key into the MOK list:
					</p><pre class="screen"># <span class="strong strong"><strong>mokutil --import sb_cert.cer</strong></span></pre></li><li class="listitem">
						Enter a new password for this MOK enrollment request.
					</li><li class="listitem"><p class="simpara">
						Reboot the machine.
					</p><p class="simpara">
						The <code class="literal">shim</code> boot loader notices the pending MOK key enrollment request and it launches <code class="literal">MokManager.efi</code> to enable you to complete the enrollment from the UEFI console.
					</p></li><li class="listitem"><p class="simpara">
						Choose <code class="literal">Enroll MOK</code>, enter the password you previously associated with this request when prompted, and confirm the enrollment.
					</p><p class="simpara">
						Your public key is added to the MOK list, which is persistent.
					</p><p class="simpara">
						Once a key is on the MOK list, it will be automatically propagated to the <code class="literal">.platform</code> keyring on this and subsequent boots when UEFI Secure Boot is enabled.
					</p></li></ol></div></section><section class="section" id="signing-a-kernel-with-the-private-key_signing-a-kernel-and-modules-for-secure-boot"><div class="titlepage"><div><div><h3 class="title">21.9. Signing a kernel with the private key</h3></div></div></div><p class="_abstract _abstract">
				You can obtain enhanced security benefits on your system by loading a signed kernel if the UEFI Secure Boot mechanism is enabled.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have generated a public and private key pair and know the validity dates of your public keys. For details, see <a class="link" href="#generating-a-public-and-private-key-pair_signing-a-kernel-and-modules-for-secure-boot" title="21.6. Generating a public and private key pair">Generating a public and private key pair</a>.
					</li><li class="listitem">
						You have enrolled your public key on the target system. For details, see <a class="link" href="#enrolling-public-key-on-target-system-by-adding-the-public-key-to-the-mok-list_signing-a-kernel-and-modules-for-secure-boot" title="21.8. Enrolling public key on target system by adding the public key to the MOK list">Enrolling public key on target system by adding the public key to the MOK list</a>.
					</li><li class="listitem">
						You have a kernel image in the ELF format available for signing.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						On the x64 architecture:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create a signed image:
							</p><pre class="screen"># <span class="strong strong"><strong>pesign --certificate '<span class="emphasis"><em>Custom Secure Boot key</em></span>'</strong></span> \
         <span class="strong strong"><strong>--in vmlinuz-<span class="emphasis"><em>version</em></span></strong></span> \
         <span class="strong strong"><strong>--sign</strong></span> \
         <span class="strong strong"><strong>--out vmlinuz-<span class="emphasis"><em>version</em></span>.signed</strong></span></pre><p class="simpara">
								Replace <code class="literal"><span class="emphasis"><em>version</em></span></code> with the version suffix of your <code class="literal">vmlinuz</code> file, and <code class="literal"><span class="emphasis"><em>Custom Secure Boot key</em></span></code> with the name that you chose earlier.
							</p></li><li class="listitem"><p class="simpara">
								Optional: Check the signatures:
							</p><pre class="screen"># <span class="strong strong"><strong>pesign --show-signature</strong></span> \
         <span class="strong strong"><strong>--in vmlinuz-<span class="emphasis"><em>version</em></span>.signed</strong></span></pre></li><li class="listitem"><p class="simpara">
								Overwrite the unsigned image with the signed image:
							</p><pre class="screen"># <span class="strong strong"><strong>mv vmlinuz-<span class="emphasis"><em>version</em></span>.signed vmlinuz-<span class="emphasis"><em>version</em></span></strong></span></pre></li></ol></div></li><li class="listitem"><p class="simpara">
						On the 64-bit ARM architecture:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Decompress the <code class="literal">vmlinuz</code> file:
							</p><pre class="screen"># <span class="strong strong"><strong>zcat vmlinuz-<span class="emphasis"><em>version</em></span> &gt; vmlinux-<span class="emphasis"><em>version</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
								Create a signed image:
							</p><pre class="screen"># <span class="strong strong"><strong>pesign --certificate '<span class="emphasis"><em>Custom Secure Boot key</em></span>'</strong></span> \
         <span class="strong strong"><strong>--in vmlinux-<span class="emphasis"><em>version</em></span></strong></span> \
         <span class="strong strong"><strong>--sign</strong></span> \
         <span class="strong strong"><strong>--out vmlinux-<span class="emphasis"><em>version</em></span>.signed</strong></span></pre></li><li class="listitem"><p class="simpara">
								Optional: Check the signatures:
							</p><pre class="screen"># <span class="strong strong"><strong>pesign --show-signature</strong></span> \
         <span class="strong strong"><strong>--in vmlinux-<span class="emphasis"><em>version</em></span>.signed</strong></span></pre></li><li class="listitem"><p class="simpara">
								Compress the <code class="literal">vmlinux</code> file:
							</p><pre class="screen"># <span class="strong strong"><strong>gzip --to-stdout vmlinux-<span class="emphasis"><em>version</em></span>.signed &gt; vmlinuz-<span class="emphasis"><em>version</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
								Remove the uncompressed <code class="literal">vmlinux</code> file:
							</p><pre class="screen"># <span class="strong strong"><strong>rm vmlinux-<span class="emphasis"><em>version</em></span>*</strong></span></pre></li></ol></div></li></ul></div></section><section class="section" id="signing-a-grub-build-with-the-private-key_signing-a-kernel-and-modules-for-secure-boot"><div class="titlepage"><div><div><h3 class="title">21.10. Signing a GRUB build with the private key</h3></div></div></div><p class="_abstract _abstract">
				On a system where the UEFI Secure Boot mechanism is enabled, you can sign a GRUB build with a custom existing private key. You must do this if you are using a custom GRUB build, or if you have removed the Microsoft trust anchor from your system.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have generated a public and private key pair and know the validity dates of your public keys. For details, see <a class="link" href="#generating-a-public-and-private-key-pair_signing-a-kernel-and-modules-for-secure-boot" title="21.6. Generating a public and private key pair">Generating a public and private key pair</a>.
					</li><li class="listitem">
						You have enrolled your public key on the target system. For details, see <a class="link" href="#enrolling-public-key-on-target-system-by-adding-the-public-key-to-the-mok-list_signing-a-kernel-and-modules-for-secure-boot" title="21.8. Enrolling public key on target system by adding the public key to the MOK list">Enrolling public key on target system by adding the public key to the MOK list</a>.
					</li><li class="listitem">
						You have a GRUB EFI binary available for signing.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						On the x64 architecture:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create a signed GRUB EFI binary:
							</p><pre class="screen"># <span class="strong strong"><strong>pesign --in /boot/efi/EFI/redhat/grubx64.efi</strong></span> \
         <span class="strong strong"><strong>--out /boot/efi/EFI/redhat/grubx64.efi.signed</strong></span> \
         <span class="strong strong"><strong>--certificate '<span class="emphasis"><em>Custom Secure Boot key</em></span>'</strong></span> \
         <span class="strong strong"><strong>--sign</strong></span></pre><p class="simpara">
								Replace <code class="literal"><span class="emphasis"><em>Custom Secure Boot key</em></span></code> with the name that you chose earlier.
							</p></li><li class="listitem"><p class="simpara">
								Optional: Check the signatures:
							</p><pre class="screen"># <span class="strong strong"><strong>pesign --in /boot/efi/EFI/redhat/grubx64.efi.signed</strong></span> \
         <span class="strong strong"><strong>--show-signature</strong></span></pre></li><li class="listitem"><p class="simpara">
								Overwrite the unsigned binary with the signed binary:
							</p><pre class="screen"># <span class="strong strong"><strong>mv /boot/efi/EFI/redhat/grubx64.efi.signed</strong></span> \
     <span class="strong strong"><strong>/boot/efi/EFI/redhat/grubx64.efi</strong></span></pre></li></ol></div></li><li class="listitem"><p class="simpara">
						On the 64-bit ARM architecture:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create a signed GRUB EFI binary:
							</p><pre class="screen"># <span class="strong strong"><strong>pesign --in /boot/efi/EFI/redhat/grubaa64.efi</strong></span> \
         <span class="strong strong"><strong>--out /boot/efi/EFI/redhat/grubaa64.efi.signed</strong></span> \
         <span class="strong strong"><strong>--certificate '<span class="emphasis"><em>Custom Secure Boot key</em></span>'</strong></span> \
         <span class="strong strong"><strong>--sign</strong></span></pre><p class="simpara">
								Replace <code class="literal"><span class="emphasis"><em>Custom Secure Boot key</em></span></code> with the name that you chose earlier.
							</p></li><li class="listitem"><p class="simpara">
								Optional: Check the signatures:
							</p><pre class="screen"># <span class="strong strong"><strong>pesign --in /boot/efi/EFI/redhat/grubaa64.efi.signed</strong></span> \
         <span class="strong strong"><strong>--show-signature</strong></span></pre></li><li class="listitem"><p class="simpara">
								Overwrite the unsigned binary with the signed binary:
							</p><pre class="screen"># <span class="strong strong"><strong>mv /boot/efi/EFI/redhat/grubaa64.efi.signed</strong></span> \
     <span class="strong strong"><strong>/boot/efi/EFI/redhat/grubaa64.efi</strong></span></pre></li></ol></div></li></ul></div></section><section class="section" id="signing-kernel-modules-with-the-private-key_signing-a-kernel-and-modules-for-secure-boot"><div class="titlepage"><div><div><h3 class="title">21.11. Signing kernel modules with the private key</h3></div></div></div><p class="_abstract _abstract">
				You can enhance the security of your system by loading signed kernel modules if the UEFI Secure Boot mechanism is enabled.
			</p><p>
				Your signed kernel module is also loadable on systems where UEFI Secure Boot is disabled or on a non-UEFI system. As a result, you do not need to provide both a signed and unsigned version of your kernel module.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have generated a public and private key pair and know the validity dates of your public keys. For details, see <a class="link" href="#generating-a-public-and-private-key-pair_signing-a-kernel-and-modules-for-secure-boot" title="21.6. Generating a public and private key pair">Generating a public and private key pair</a>.
					</li><li class="listitem">
						You have enrolled your public key on the target system. For details, see <a class="link" href="#enrolling-public-key-on-target-system-by-adding-the-public-key-to-the-mok-list_signing-a-kernel-and-modules-for-secure-boot" title="21.8. Enrolling public key on target system by adding the public key to the MOK list">Enrolling public key on target system by adding the public key to the MOK list</a>.
					</li><li class="listitem">
						You have a kernel module in ELF image format available for signing.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Export your public key to the <code class="literal">sb_cert.cer</code> file:
					</p><pre class="screen"># <span class="strong strong"><strong>certutil -d /etc/pki/pesign \</strong></span>
           <span class="strong strong"><strong>-n '<span class="emphasis"><em>Custom Secure Boot key</em></span>' \</strong></span>
           <span class="strong strong"><strong>-Lr \</strong></span>
           <span class="strong strong"><strong>&gt; sb_cert.cer</strong></span></pre></li><li class="listitem"><p class="simpara">
						Extract the key from the NSS database as a PKCS #12 file:
					</p><pre class="screen"># <span class="strong strong"><strong>pk12util -o sb_cert.p12 \</strong></span>
           <span class="strong strong"><strong>-n '<span class="emphasis"><em>Custom Secure Boot key</em></span>' \</strong></span>
           <span class="strong strong"><strong>-d /etc/pki/pesign</strong></span></pre></li><li class="listitem">
						When the previous command prompts you, enter a new password that encrypts the private key.
					</li><li class="listitem"><p class="simpara">
						Export the unencrypted private key:
					</p><pre class="screen"># <span class="strong strong"><strong>openssl pkcs12 \</strong></span>
         <span class="strong strong"><strong>-in sb_cert.p12 \</strong></span>
         <span class="strong strong"><strong>-out sb_cert.priv \</strong></span>
         <span class="strong strong"><strong>-nocerts \</strong></span>
         <span class="strong strong"><strong>-noenc</strong></span></pre><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							Handle the unencrypted private key with care.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Sign your kernel module. The following command appends the signature directly to the ELF image in your kernel module file:
					</p><pre class="screen"># <span class="strong strong"><strong>/usr/src/kernels/$(uname -r)/scripts/sign-file \</strong></span>
          <span class="strong strong"><strong>sha256 \</strong></span>
          <span class="strong strong"><strong>sb_cert.priv \</strong></span>
          <span class="strong strong"><strong>sb_cert.cer \</strong></span>
          <span class="strong strong"><strong><span class="emphasis"><em>my_module</em></span>.ko</strong></span></pre></li></ol></div><p>
				Your kernel module is now ready for loading.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					In Red Hat Enterprise Linux 9, the validity dates of the key pair matter. The key does not expire, but the kernel module must be signed within the validity period of its signing key. The <code class="literal">sign-file</code> utility will not warn you of this. For example, a key that is only valid in 2021 can be used to authenticate a kernel module signed in 2021 with that key. However, users cannot use that key to sign a kernel module in 2022.
				</p></div></rh-alert><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display information about the kernel module’s signature:
					</p><pre class="screen"># <span class="strong strong"><strong>modinfo <span class="emphasis"><em>my_module</em></span>.ko | grep signer</strong></span>
  signer:         <span class="emphasis"><em>Your Name Key</em></span></pre><p class="simpara">
						Check that the signature lists your name as entered during generation.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							The appended signature is not contained in an ELF image section and is not a formal part of the ELF image. Therefore, utilities such as <code class="literal command">readelf</code> cannot display the signature on your kernel module.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Load the module:
					</p><pre class="screen"># <span class="strong strong"><strong>insmod <span class="emphasis"><em>my_module</em></span>.ko</strong></span></pre></li><li class="listitem"><p class="simpara">
						Remove (unload) the module:
					</p><pre class="screen"># <span class="strong strong"><strong>modprobe -r <span class="emphasis"><em>my_module</em></span>.ko</strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#displaying-information-about-kernel-modules_managing-kernel-modules" title="3.5. Displaying information about kernel modules">Displaying information about kernel modules</a>
					</li></ul></div></section><section class="section" id="loading-signed-kernel-modules_signing-a-kernel-and-modules-for-secure-boot"><div class="titlepage"><div><div><h3 class="title">21.12. Loading signed kernel modules</h3></div></div></div><p class="_abstract _abstract">
				Once your public key is enrolled in the system keyring (<code class="literal">.builtin_trusted_keys</code>) and the MOK list, and after you have signed the respective kernel module with your private key, you can load your signed kernel module with the <code class="literal command">modprobe</code> command.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have generated the public and private key pair. For details, see <a class="link" href="#generating-a-public-and-private-key-pair_signing-a-kernel-and-modules-for-secure-boot" title="21.6. Generating a public and private key pair">Generating a public and private key pair</a>.
					</li><li class="listitem">
						You have enrolled the public key into the system keyring. For details, see <a class="link" href="#enrolling-public-key-on-target-system-by-adding-the-public-key-to-the-mok-list_signing-a-kernel-and-modules-for-secure-boot" title="21.8. Enrolling public key on target system by adding the public key to the MOK list">Enrolling public key on target system by adding the public key to the MOK list</a>.
					</li><li class="listitem">
						You have signed a kernel module with the private key. For details, see <a class="link" href="#signing-kernel-modules-with-the-private-key_signing-a-kernel-and-modules-for-secure-boot" title="21.11. Signing kernel modules with the private key">Signing kernel modules with the private key</a>.
					</li><li class="listitem"><p class="simpara">
						Install the <code class="literal">kernel-modules-extra</code> package, which creates the <code class="literal">/lib/modules/$(uname -r)/extra/</code> directory:
					</p><pre class="literallayout"># <span class="strong strong"><strong>dnf -y install kernel-modules-extra</strong></span></pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify that your public keys are on the system keyring:
					</p><pre class="literallayout"># <span class="strong strong"><strong>keyctl list %:.platform</strong></span></pre></li><li class="listitem"><p class="simpara">
						Copy the kernel module into the <code class="literal">extra/</code> directory of the kernel that you want:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cp <span class="emphasis"><em>my_module</em></span>.ko /lib/modules/$(uname -r)/extra/</strong></span></pre></li><li class="listitem"><p class="simpara">
						Update the modular dependency list:
					</p><pre class="literallayout"># <span class="strong strong"><strong>depmod -a</strong></span></pre></li><li class="listitem"><p class="simpara">
						Load the kernel module:
					</p><pre class="literallayout"># <span class="strong strong"><strong>modprobe -v my_module</strong></span></pre></li><li class="listitem"><p class="simpara">
						Optional: To load the module on boot, add it to the <code class="literal">/etc/modules-loaded.d/<span class="emphasis"><em>my_module</em></span>.conf</code> file:
					</p><pre class="literallayout"># <span class="strong strong"><strong>echo "<span class="emphasis"><em>my_module</em></span>" &gt; /etc/modules-load.d/<span class="emphasis"><em>my_module</em></span>.conf</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify that the module was successfully loaded:
					</p><pre class="literallayout"># <span class="strong strong"><strong>lsmod | grep my_module</strong></span></pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#managing-kernel-modules_managing-monitoring-and-updating-the-kernel" title="Chapter 3. Managing kernel modules">Managing kernel modules</a>
					</li></ul></div></section></section><section class="chapter" id="updating-the-secure-boot-revocation-list_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 22. Updating the Secure Boot Revocation List</h2></div></div></div><p>
			You can update the UEFI Secure Boot Revocation List on your system so that Secure Boot identifies software with known security issues and prevents it from compromising your boot process.
		</p><section class="section" id="con_what-is-uefi-secure-boot_updating-the-secure-boot-revocation-list"><div class="titlepage"><div><div><h3 class="title">22.1. What is UEFI Secure Boot</h3></div></div></div><p>
				With the <span class="emphasis"><em>Unified Extensible Firmware Interface</em></span> (UEFI) Secure Boot technology, you can prevent the execution of the kernel-space code that has not been signed by a trusted key. The system boot loader is signed with a cryptographic key. The database of public keys, which is contained in the firmware, authorizes the signing key. You can subsequently verify a signature in the next-stage boot loader and the kernel.
			</p><p>
				UEFI Secure Boot establishes a chain of trust from the firmware to the signed drivers and kernel modules as follows:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						An UEFI private key signs, and a public key authenticates the <code class="literal">shim</code> first-stage boot loader. A <span class="emphasis"><em>certificate authority</em></span> (CA) in turn signs the public key. The CA is stored in the firmware database.
					</li><li class="listitem">
						The <code class="literal">shim</code> file contains the Red Hat public key <span class="strong strong"><strong>Red Hat Secure Boot (CA key 1)</strong></span> to authenticate the GRUB boot loader and the kernel.
					</li><li class="listitem">
						The kernel in turn contains public keys to authenticate drivers and modules.
					</li></ul></div><p>
				Secure Boot is the boot path validation component of the UEFI specification. The specification defines:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Programming interface for cryptographically protected UEFI variables in non-volatile storage.
					</li><li class="listitem">
						Storing the trusted X.509 root certificates in UEFI variables.
					</li><li class="listitem">
						Validation of UEFI applications such as boot loaders and drivers.
					</li><li class="listitem">
						Procedures to revoke known-bad certificates and application hashes.
					</li></ul></div><p>
				UEFI Secure Boot helps in the detection of unauthorized changes but does <span class="strong strong"><strong>not</strong></span>:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Prevent installation or removal of second-stage boot loaders.
					</li><li class="listitem">
						Require explicit user confirmation of such changes.
					</li><li class="listitem">
						Stop boot path manipulations. Signatures are verified during booting, not when the boot loader is installed or updated.
					</li></ul></div><p>
				If the boot loader or the kernel are not signed by a system trusted key, Secure Boot prevents them from starting.
			</p></section><section class="section" id="the-secure-boot-revocation-list_updating-the-secure-boot-revocation-list"><div class="titlepage"><div><div><h3 class="title">22.2. The Secure Boot Revocation List</h3></div></div></div><p>
				The UEFI Secure Boot Revocation List, or the Secure Boot Forbidden Signature Database (<code class="literal">dbx</code>), is a list that identifies software that Secure Boot no longer allows to run.
			</p><p>
				When a security issue or a stability problem is found in software that interfaces with Secure Boot, such as in the GRUB boot loader, the Revocation List stores its hash signature. Software with such a recognized signature cannot run during boot, and the system boot fails to prevent compromising the system.
			</p><p>
				For example, a certain version of GRUB might contain a security issue that allows an attacker to bypass the Secure Boot mechanism. When the issue is found, the Revocation List adds hash signatures of all GRUB versions that contain the issue. As a result, only secure GRUB versions can boot on the system.
			</p><p>
				The Revocation List requires regular updates to recognize newly found issues. When updating the Revocation List, make sure to use a safe update method that does not cause your currently installed system to no longer boot.
			</p></section><section class="section" id="applying-an-online-revocation-list-update_updating-the-secure-boot-revocation-list"><div class="titlepage"><div><div><h3 class="title">22.3. Applying an online Revocation List update</h3></div></div></div><p>
				You can update the Secure Boot Revocation List on your system so that Secure Boot prevents known security issues. This procedure is safe and ensures that the update does not prevent your system from booting.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Secure Boot is enabled on your system.
					</li><li class="listitem">
						Your system can access the internet for updates.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Determine the current version of the Revocation List:
					</p><pre class="screen"># fwupdmgr get-devices</pre><p class="simpara">
						See the <code class="literal">Current version</code> field under <code class="literal">UEFI dbx</code>.
					</p></li><li class="listitem"><p class="simpara">
						Enable the LVFS Revocation List repository:
					</p><pre class="screen"># fwupdmgr enable-remote lvfs</pre></li><li class="listitem"><p class="simpara">
						Refresh the repository metadata:
					</p><pre class="screen"># fwupdmgr refresh</pre></li><li class="listitem"><p class="simpara">
						Apply the Revocation List update:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								On the command line:
							</p><pre class="screen"># fwupdmgr update</pre></li><li class="listitem"><p class="simpara">
								In the graphical interface:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										Open the <span class="strong strong"><strong>Software</strong></span> application
									</li><li class="listitem">
										Navigate to the <span class="strong strong"><strong>Updates</strong></span> tab.
									</li><li class="listitem">
										Find the <span class="strong strong"><strong>Secure Boot dbx Configuration Update</strong></span> entry.
									</li><li class="listitem">
										Click <span class="guibutton">Update</span>.
									</li></ol></div></li></ul></div></li><li class="listitem">
						At the end of the update, <code class="literal">fwupdmgr</code> or <span class="strong strong"><strong>Software</strong></span> asks you to reboot the system. Confirm the reboot.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						After the reboot, check the current version of the Revocation List again:
					</p><pre class="screen"># fwupdmgr get-devices</pre></li></ul></div></section><section class="section" id="applying-an-offline-revocation-list-update_updating-the-secure-boot-revocation-list"><div class="titlepage"><div><div><h3 class="title">22.4. Applying an offline Revocation List update</h3></div></div></div><p>
				On a system with no internet connection, you can update the Secure Boot Revocation List from RHEL so that Secure Boot prevents known security issues. This procedure is safe and ensures that the update does not prevent your system from booting.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Determine the current version of the Revocation List:
					</p><pre class="screen"># fwupdmgr get-devices</pre><p class="simpara">
						See the <code class="literal">Current version</code> field under <code class="literal">UEFI dbx</code>.
					</p></li><li class="listitem"><p class="simpara">
						List the updates available from RHEL:
					</p><pre class="screen"># ls /usr/share/dbxtool/</pre></li><li class="listitem"><p class="simpara">
						Select the most recent update file for your architecture. The file names use the following format:
					</p><pre class="screen">DBXUpdate-<span class="emphasis"><em>date</em></span>-<span class="emphasis"><em>architecture</em></span>.cab</pre></li><li class="listitem"><p class="simpara">
						Install the selected update file:
					</p><pre class="screen"># fwupdmgr install /usr/share/dbxtool/DBXUpdate-<span class="emphasis"><em>date</em></span>-<span class="emphasis"><em>architecture</em></span>.cab</pre></li><li class="listitem">
						At the end of the update, <code class="literal">fwupdmgr</code> asks you to reboot the system. Confirm the reboot.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						After the reboot, check the current version of the Revocation List again:
					</p><pre class="screen"># fwupdmgr get-devices</pre></li></ul></div></section></section><section class="chapter" id="enhancing-security-with-the-kernel-integrity-subsystem_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 23. Enhancing security with the kernel integrity subsystem</h2></div></div></div><p class="_abstract _abstract">
			You can improve the protection of your system by using components of the kernel integrity subsystem. Learn more about the relevant components and their configuration.
		</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
				Red Hat products distributed through methods such as RPMs, ISOs, and zip files are signed with cryptographic signatures. The RHEL Kernel keyring system includes certificates for Red Hat product signing keys only. Therefore, to ensure kernels are tamper-proof, you must not use other hash features.
			</p></div></rh-alert><section class="section" id="the-kernel-integrity-subsystem_enhancing-security-with-the-kernel-integrity-subsystem"><div class="titlepage"><div><div><h3 class="title">23.1. The kernel integrity subsystem</h3></div></div></div><p class="_abstract _abstract">
				The integrity subsystem is the kernel component that maintains the overall integrity of system data. This subsystem helps in maintaining the system in the same state from the time it was built. Using this subsystem, you can protect executable files, libraries, and configuration files.
			</p><p>
				The kernel integrity subsystem consists of two major components:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Integrity Measurement Architecture (IMA)</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									IMA measures file content whenever it is executed or opened by cryptographically hashing or signing with cryptographic keys. The keys are stored in the kernel keyring subsystem.
								</li><li class="listitem">
									IMA places the measured values within the kernel’s memory space. This prevents users of the system from modifying the measured values.
								</li><li class="listitem">
									IMA allows local and remote parties to verify the measured values.
								</li><li class="listitem">
									IMA provides local validation of the current content of files against the values previously stored in the measurement list within the kernel memory. This extension forbids performing any operation on a specific file in case the current and the previous measures do not match.
								</li></ul></div></dd><dt><span class="term">Extended Verification Module (EVM)</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									EVM protects extended attributes of files (also known as <span class="emphasis"><em>xattr</em></span>) that are related to system security, such as IMA measurements and SELinux attributes. EVM cryptographically hashes their corresponding values or signs them with cryptographic keys. The keys are stored in the kernel keyring subsystem.
								</li></ul></div></dd></dl></div><p>
				The kernel integrity subsystem can use the Trusted Platform Module (TPM) to further harden system security.
			</p><p>
				A TPM is a hardware, firmware, or virtual component with integrated cryptographic keys, which is built according to the TPM specification by the Trusted Computing Group (TCG) for important cryptographic functions. TPMs are usually built as dedicated hardware attached to the platform’s motherboard. By providing cryptographic functions from a protected and tamper-proof area of the hardware chip, TPMs are protected from software-based attacks. TPMs provide the following features:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Random-number generator
					</li><li class="listitem">
						Generator and secure storage for cryptographic keys
					</li><li class="listitem">
						Hashing generator
					</li><li class="listitem">
						Remote attestation
					</li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/security_hardening/index">Security hardening</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_selinux/index">Basic and advanced configuration of Security-Enhanced Linux (SELinux)</a>
					</li></ul></div></section><section class="section" id="trusted-and-encrypted-keys_enhancing-security-with-the-kernel-integrity-subsystem"><div class="titlepage"><div><div><h3 class="title">23.2. Trusted and encrypted keys</h3></div></div></div><p class="_abstract _abstract">
				<span class="emphasis"><em>Trusted keys</em></span> and <span class="emphasis"><em>encrypted keys</em></span> are an important part of enhancing system security.
			</p><p>
				Trusted and encrypted keys are variable-length symmetric keys generated by the kernel that use the kernel keyring service. The integrity of the keys can be verified, which means that they can be used, for example, by the extended verification module (EVM) to verify and confirm the integrity of a running system. User-level programs can only access the keys in the form of encrypted <span class="emphasis"><em>blobs</em></span>.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Trusted keys</span></dt><dd><p class="simpara">
							Trusted keys need the Trusted Platform Module (TPM) chip, which is used to both create and encrypt (seal) the keys. Each TPM has a master wrapping key, called the storage root key, which is stored within the TPM itself.
						</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								RHEL 9 supports only TPM 2.0. If you must use TPM 1.2, use RHEL 8. For more information, see the <a class="link" href="https://access.redhat.com/solutions/253363">Is Trusted Platform Module (TPM) supported by Red Hat?</a> solution.
							</p></div></rh-alert><p class="simpara">
							You can verify that a TPM 2.0 chip has been enabled by entering the following command:
						</p><pre class="screen">$ <span class="strong strong"><strong>cat /sys/class/tpm/tpm0/tpm_version_major</strong></span>
2</pre><p class="simpara">
							You can also enable a TPM 2.0 chip and manage the TPM 2.0 device through settings in the machine firmware.
						</p><p class="simpara">
							In addition to that, you can seal the trusted keys with a specific set of the TPM’s <span class="emphasis"><em>platform configuration register</em></span> (PCR) values. PCR contains a set of integrity-management values that reflect the firmware, boot loader, and operating system. This means that PCR-sealed keys can only be decrypted by the TPM on the same system on which they were encrypted. However, when a PCR-sealed trusted key is loaded (added to a keyring), and thus its associated PCR values are verified, it can be updated with new (or future) PCR values, so that a new kernel, for example, can be booted. You can save a single key also as multiple blobs, each with a different PCR value.
						</p></dd><dt><span class="term">Encrypted keys</span></dt><dd>
							Encrypted keys do not require a TPM, because they use the kernel Advanced Encryption Standard (AES), which makes them faster than trusted keys. Encrypted keys are created using kernel-generated random numbers and encrypted by a <span class="emphasis"><em>master key</em></span> when they are exported into user-space blobs.
						</dd></dl></div><p>
				The master key is either a trusted key or a user key. If the master key is not trusted, the encrypted key is only as secure as the user key used to encrypt it.
			</p></section><section class="section" id="working-with-trusted-keys_enhancing-security-with-the-kernel-integrity-subsystem"><div class="titlepage"><div><div><h3 class="title">23.3. Working with trusted keys</h3></div></div></div><p class="_abstract _abstract">
				You can improve system security by using the <code class="literal">keyctl</code> utility to create, export, load and update trusted keys.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Trusted Platform Module (TPM) is enabled and active. See <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index#the-kernel-integrity-subsystem_enhancing-security-with-the-kernel-integrity-subsystem">The kernel integrity subsystem</a> and <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index#trusted-and-encrypted-keys_enhancing-security-with-the-kernel-integrity-subsystem">Trusted and encrypted keys</a>.
					</p><p class="simpara">
						You can verify that your system has a TPM by entering the <code class="literal">tpm2_pcrread</code> command. If the output from this command displays several hashes, you have a TPM.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a 2048-bit RSA key with an SHA-256 primary storage key with a persistent handle of, for example, <span class="emphasis"><em>81000001</em></span>, by using one of the following utilities:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								By using the <code class="literal">tss2</code> package:
							</p><pre class="literallayout"># <span class="strong strong"><strong>TPM_DEVICE=/dev/tpm0 tsscreateprimary -hi o -st</strong></span>
Handle 80000000
# <span class="strong strong"><strong>TPM_DEVICE=/dev/tpm0 tssevictcontrol -hi o -ho 80000000 -hp 81000001</strong></span></pre></li><li class="listitem"><p class="simpara">
								By using the <code class="literal">tpm2-tools</code> package:
							</p><pre class="literallayout"># <span class="strong strong"><strong>tpm2_createprimary --key-algorithm=rsa2048 --key-context=key.ctxt</strong></span>
name-alg:
  value: sha256
  raw: 0xb
…
sym-keybits: 128
rsa: xxxxxx…

# <span class="strong strong"><strong>tpm2_evictcontrol -c key.ctxt 0x81000001</strong></span>
persistentHandle: 0x81000001
action: persisted</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Create a trusted key by using a TPM 2.0 with the syntax of <code class="literal">keyctl add trusted <span class="emphasis"><em>&lt;NAME&gt;</em></span> "new <span class="emphasis"><em>&lt;KEY_LENGTH&gt;</em></span> keyhandle=<span class="emphasis"><em>&lt;PERSISTENT-HANDLE&gt;</em></span> [options]" <span class="emphasis"><em>&lt;KEYRING&gt;</em></span></code>. In this example, the persistent handle is <span class="emphasis"><em>81000001</em></span>.
					</p><pre class="literallayout"># <span class="strong strong"><strong>keyctl add trusted kmk "new 32 keyhandle=0x81000001" @u</strong></span>
642500861</pre><p class="simpara">
						The command creates a trusted key called <code class="literal">kmk</code> with the length of <code class="literal">32</code> bytes (256 bits) and places it in the user keyring (<code class="literal">@u</code>). The keys may have a length of 32 to 128 bytes (256 to 1024 bits).
					</p></li><li class="listitem"><p class="simpara">
						List the current structure of the kernel keyrings:
					</p><pre class="literallayout"># <span class="strong strong"><strong>keyctl show</strong></span>
Session Keyring
       -3 --alswrv    500   500  keyring: <span class="emphasis"><em>ses 97833714 --alswrv 500 -1 \</em></span> keyring: <span class="emphasis"><em>uid.1000 642500861 --alswrv 500 500 \</em></span> trusted: kmk</pre></li><li class="listitem"><p class="simpara">
						Export the key to a user-space blob by using the serial number of the trusted key:
					</p><pre class="literallayout"># <span class="strong strong"><strong>keyctl pipe 642500861 &gt; kmk.blob</strong></span></pre><p class="simpara">
						The command uses the <code class="literal">pipe</code> subcommand and the serial number of <code class="literal">kmk</code>.
					</p></li><li class="listitem"><p class="simpara">
						Load the trusted key from the user-space blob:
					</p><pre class="literallayout"># <span class="strong strong"><strong>keyctl add trusted kmk "load `cat kmk.blob`" @u</strong></span>
268728824</pre></li><li class="listitem"><p class="simpara">
						Create secure encrypted keys that use the TPM-sealed trusted key (<code class="literal">kmk</code>). Follow this syntax: <span class="emphasis"><em>keyctl add encrypted &lt;NAME&gt; "new [FORMAT] &lt;KEY_TYPE&gt;:&lt;PRIMARY_KEY_NAME&gt; &lt;KEY_LENGTH&gt;" &lt;KEYRING&gt;</em></span>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>keyctl add encrypted encr-key "new trusted:kmk 32" @u</strong></span>
159771175</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						the <code class="literal">keyctl(1)</code> manual page
					</li></ul></div></section><section class="section" id="working-with-encrypted-keys_enhancing-security-with-the-kernel-integrity-subsystem"><div class="titlepage"><div><div><h3 class="title">23.4. Working with encrypted keys</h3></div></div></div><p class="_abstract _abstract">
				You can improve system security on systems where a Trusted Platform Module (TPM) is not available by managing encrypted keys.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Generate a user key by using a random sequence of numbers.
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>keyctl add user kmk-user "$(dd if=/dev/urandom bs=1 count=32 2&gt;/dev/null)" @u</strong></span>
427069434</pre><p class="simpara">
						The command generates a user key called <code class="literal">kmk-user</code> which acts as a <span class="emphasis"><em>primary key</em></span> and is used to seal the actual encrypted keys.
					</p></li><li class="listitem"><p class="simpara">
						Generate an encrypted key using the primary key from the previous step:
					</p><pre class="literallayout"># <span class="strong strong"><strong>keyctl add encrypted encr-key "new user:kmk-user 32" @u</strong></span>
1012412758</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						List all keys in the specified user keyring:
					</p><pre class="literallayout"># <span class="strong strong"><strong>keyctl list @u</strong></span>
2 keys in keyring:
427069434: --alswrv  1000  1000 user: kmk-user
1012412758: --alswrv  1000  1000 encrypted: encr-key</pre></li></ol></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					Encrypted keys that are not sealed by a trusted primary key are only as secure as the user primary key (random-number key) that was used to encrypt them. Therefore, load the primary user key as securely as possible and preferably early during the boot process.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The <code class="literal">keyctl(1)</code> manual page
					</li></ul></div></section><section class="section" id="enabling-integrity-measurement-architecture-and-extended-verification-module_enhancing-security-with-the-kernel-integrity-subsystem"><div class="titlepage"><div><div><h3 class="title">23.5. Enabling IMA and EVM</h3></div></div></div><p class="_abstract _abstract">
				You can enable and configure Integrity measurement architecture (IMA) and extended verification module (EVM) to improve the security of the operating system.
			</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					Always enable EVM together with IMA.
				</p><p>
					Although you can enable EVM alone, EVM appraisal is only triggered by an IMA appraisal rule. Therefore, EVM does not protect file metadata such as SELinux attributes. If file metadata is tampered with offline, EVM can only prevent file metadata changes. It does not prevent file access, such as executing the file.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Secure Boot is temporarily disabled.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							When Secure Boot is enabled, the <code class="literal">ima_appraise=fix</code> kernel command-line parameter does not work.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						The <code class="literal">securityfs</code> file system is mounted on the <code class="literal">/sys/kernel/security/</code> directory and the <code class="literal">/sys/kernel/security/integrity/ima/</code> directory exists. You can verify where <code class="literal">securityfs</code> is mounted by using the <code class="literal">mount</code> command:
					</p><pre class="literallayout"># <span class="strong strong"><strong>mount</strong></span>
...
securityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)
...</pre></li><li class="listitem"><p class="simpara">
						The <code class="literal">systemd</code> service manager is patched to support IMA and EVM on boot time. Verify by using the following command:
					</p><pre class="literallayout"># grep &lt;<span class="emphasis"><em>options</em></span>&gt; pattern &lt;<span class="emphasis"><em>files</em></span>&gt;</pre><p class="simpara">
						For example:
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>dmesg | grep -i -e EVM -e IMA -w</strong></span>
[ 0.943873] ima: No TPM chip found, activating TPM-bypass!
[ 0.944566] ima: Allocated hash algorithm: sha256
[ 0.944579] ima: No architecture policies found
[ 0.944601] evm: Initialising EVM extended attributes:
[ 0.944602] evm: security.selinux
[ 0.944604] evm: security.SMACK64 (disabled)
[ 0.944605] evm: security.SMACK64EXEC (disabled)
[ 0.944607] evm: security.SMACK64TRANSMUTE (disabled)
[ 0.944608] evm: security.SMACK64MMAP (disabled)
[ 0.944609] evm: security.apparmor (disabled)
[ 0.944611] evm: security.ima
[ 0.944612] evm: security.capability
[ 0.944613] evm: HMAC attrs: 0x1
[ 1.314520] systemd[1]: systemd 252-18.el9 running in system mode (+PAM +AUDIT +SELINUX -APPARMOR +IMA +SMACK +SECCOMP +GCRYPT +GNUTLS +OPENSSL +ACL +BLKID +CURL +ELFUTILS -FIDO2 +IDN2 -IDN -IPTC +KMOD +LIBCRYPTSETUP +LIBFDISK +PCRE2 -PWQUALITY +P11KIT -QRENCODE +TPM2 +BZIP2 +LZ4 +XZ +ZLIB +ZSTD -BPF_FRAMEWORK +XKBCOMMON +UTMP +SYSVINIT default-hierarchy=unified)
[ 1.717675] device-mapper: core: CONFIG_IMA_DISABLE_HTABLE is disabled. Duplicate IMA measurements will not be recorded in the IMA log.
[ 4.799436] systemd[1]: systemd 252-18.el9 running in system mode (+PAM +AUDIT +SELINUX -APPARMOR +IMA +SMACK +SECCOMP +GCRYPT +GNUTLS +OPENSSL +ACL +BLKID +CURL +ELFUTILS -FIDO2 +IDN2 -IDN -IPTC +KMOD +LIBCRYPTSETUP +LIBFDISK +PCRE2 -PWQUALITY +P11KIT -QRENCODE +TPM2 +BZIP2 +LZ4 +XZ +ZLIB +ZSTD -BPF_FRAMEWORK +XKBCOMMON +UTMP +SYSVINIT default-hierarchy=unified)</pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Enable IMA and EVM in the <span class="emphasis"><em>fix</em></span> mode for the current boot entry and allow users to gather and update the IMA measurements by adding the following kernel command-line parameters:
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>grubby --update-kernel=/boot/vmlinuz-$(uname -r) --args="ima_policy=appraise_tcb ima_appraise=fix evm=fix"</strong></span></pre><p class="simpara">
						The command enables IMA and EVM in the <span class="emphasis"><em>fix</em></span> mode for the current boot entry and allows users to gather and update the IMA measurements.
					</p><p class="simpara">
						The <code class="literal">ima_policy=appraise_tcb</code> kernel command-line parameter ensures that the kernel uses the default Trusted Computing Base (TCB) measurement policy and the appraisal step. The appraisal step forbids access to files whose prior and current measures do not match.
					</p></li><li class="listitem">
						Reboot to make the changes come into effect.
					</li><li class="listitem"><p class="simpara">
						Optional: Verify that the parameters have been added to the kernel command line:
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>cat /proc/cmdline</strong></span>
BOOT_IMAGE=(hd0,msdos1)/vmlinuz-5.14.0-1.el9.x86_64 root=/dev/mapper/rhel-root ro crashkernel=1G-4G:192M,4G-64G:256M,64G-:512M resume=/dev/mapper/rhel-swap rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap rhgb quiet ima_policy=appraise_tcb ima_appraise=fix evm=fix</pre></li><li class="listitem"><p class="simpara">
						Create a kernel master key to protect the EVM key:
					</p><pre class="literallayout"># <span class="strong strong"><strong>keyctl add user kmk "$(dd if=/dev/urandom bs=1 count=32 2&gt; /dev/null)" @u</strong></span>
748544121</pre><p class="simpara">
						The <code class="literal">kmk</code> is kept entirely in the kernel space memory. The 32-byte long value of the <code class="literal">kmk</code> is generated from random bytes from the <code class="literal">/dev/urandom</code> file and placed in the user (<code class="literal">@u</code>) keyring. The key serial number is on the first line of the previous output.
					</p></li><li class="listitem"><p class="simpara">
						Create an encrypted EVM key based on the <code class="literal">kmk</code>:
					</p><pre class="literallayout"># <span class="strong strong"><strong>keyctl add encrypted evm-key "new user:kmk 64" @u</strong></span>
641780271</pre><p class="simpara">
						The command uses the <code class="literal">kmk</code> to generate and encrypt a 64-byte long user key (named <code class="literal">evm-key</code>) and places it in the user (<code class="literal">@u</code>) keyring. The key serial number is on the first line of the previous output.
					</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							It is necessary to name the user key as <span class="strong strong"><strong>evm-key</strong></span> because that is the name the EVM subsystem is expecting and is working with.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Create a directory for exported keys.
					</p><pre class="literallayout"># <span class="strong strong"><strong>mkdir -p /etc/keys/</strong></span></pre></li><li class="listitem"><p class="simpara">
						Search for the <code class="literal">kmk</code> and export its unencrypted value into the new directory.
					</p><pre class="literallayout"># <span class="strong strong"><strong>keyctl pipe $(keyctl search @u user kmk) &gt; /etc/keys/kmk</strong></span></pre></li><li class="listitem"><p class="simpara">
						Search for the <code class="literal">evm-key</code> and export its encrypted value into the new directory.
					</p><pre class="literallayout"># <span class="strong strong"><strong>keyctl pipe $(keyctl search @u encrypted evm-key) &gt; /etc/keys/evm-key</strong></span></pre><p class="simpara">
						The <code class="literal">evm-key</code> has been encrypted by the kernel master key earlier.
					</p></li><li class="listitem"><p class="simpara">
						Optional: View the newly created keys.
					</p><pre class="literallayout"># <span class="strong strong"><strong>keyctl show</strong></span>
Session Keyring
974575405   --alswrv     0        0      keyring: <span class="emphasis"><em>ses 299489774 --alswrv 0 65534 \</em></span> keyring: <span class="emphasis"><em>uid.0 748544121 --alswrv 0 0 \</em></span> user: kmk
641780271   --alswrv     0        0           \_ encrypted: evm-key

# <span class="strong strong"><strong>ls -l /etc/keys/</strong></span>
total 8
-rw-r--r--. 1 root root 246 Jun 24 12:44 evm-key
-rw-r--r--. 1 root root  32 Jun 24 12:43 kmk</pre></li><li class="listitem"><p class="simpara">
						Optional: If the keys have been removed from the keyring, for example after system reboot, you can import the already exported <code class="literal">kmk</code> and <code class="literal">evm-key</code> instead of creating new ones.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Import the <code class="literal">kmk</code>.
							</p><pre class="literallayout"># <span class="strong strong"><strong>keyctl add user kmk "$(cat /etc/keys/kmk)" @u</strong></span>
451342217</pre></li><li class="listitem"><p class="simpara">
								Import the <code class="literal">evm-key</code>.
							</p><pre class="literallayout"># <span class="strong strong"><strong>keyctl add encrypted evm-key "load $(cat /etc/keys/evm-key)" @u</strong></span>
924537557</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Activate EVM.
					</p><pre class="literallayout"># <span class="strong strong"><strong>echo 1 &gt; /sys/kernel/security/evm</strong></span></pre></li><li class="listitem"><p class="simpara">
						Relabel the whole system.
					</p><pre class="literallayout"># <span class="strong strong"><strong>find / -fstype xfs -type f -uid 0 -exec head -n 1 '{}' &gt;/dev/null \;</strong></span></pre><rh-alert class="admonition warning" state="danger"><div class="admonition_header" slot="header">Warning</div><div><p>
							Enabling IMA and EVM without relabeling the system might make the majority of the files on the system inaccessible.
						</p></div></rh-alert></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify that EVM has been initialized.
					</p><pre class="literallayout"># <span class="strong strong"><strong>dmesg | tail -1</strong></span>
[…​] evm: key initialized</pre></li></ul></div></section><section class="section" id="collecting-file-hashes-with-integrity-measurement-architecture_enhancing-security-with-the-kernel-integrity-subsystem"><div class="titlepage"><div><div><h3 class="title">23.6. Collecting file hashes with integrity measurement architecture</h3></div></div></div><p class="_abstract _abstract">
				In the <span class="emphasis"><em>measurement</em></span> phase, you can create file hashes and store them as extended attributes (<span class="emphasis"><em>xattrs</em></span>) of those files. With the file hashes, you can generate either an RSA-based digital signature or a Hash-based Message Authentication Code (HMAC-SHA1) and thus prevent offline tampering attacks on the extended attributes.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						IMA and EVM are enabled. For more information, see <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index#enabling-integrity-measurement-architecture-and-extended-verification-module_enhancing-security-with-the-kernel-integrity-subsystem">Enabling integrity measurement architecture and extended verification module</a>.
					</li><li class="listitem">
						A valid trusted key or encrypted key is stored in the kernel keyring.
					</li><li class="listitem">
						The <code class="literal">ima-evm-utils</code>, <code class="literal">attr</code>, and <code class="literal">keyutils</code> packages are installed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a test file:
					</p><pre class="literallayout"># <span class="strong strong"><strong>echo &lt;<span class="emphasis"><em>Test_text</em></span>&gt; &gt; test_file</strong></span></pre><p class="simpara">
						IMA and EVM ensure that the <code class="literal">test_file</code> example file has assigned hash values that are stored as its extended attributes.
					</p></li><li class="listitem"><p class="simpara">
						Inspect the file’s extended attributes:
					</p><pre class="literallayout"># <span class="strong strong"><strong>getfattr -m . -d test_file</strong></span>
# <span class="strong strong"><strong>file: test_file</strong></span>
security.evm=0sAnDIy4VPA0HArpPO/EqiutnNyBql
security.ima=0sAQOEDeuUnWzwwKYk+n66h/vby3eD</pre><p class="simpara">
						The example output shows extended attributes with the IMA and EVM hash values and SELinux context. EVM adds a <code class="literal">security.evm</code> extended attribute related to the other attributes. At this point, you can use the <code class="literal">evmctl</code> utility on <code class="literal">security.evm</code> to generate either an RSA-based digital signature or a Hash-based Message Authentication Code (HMAC-SHA1).
					</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/security_hardening/index">Security hardening</a>
					</li></ul></div></section><section class="section" id="adding-ima-signatures-to-package-files_enhancing-security-with-the-kernel-integrity-subsystem"><div class="titlepage"><div><div><h3 class="title">23.7. Adding IMA signatures to package files</h3></div></div></div><p>
				You need to add IMA signatures to RPM files to allow the kernel, Keylime, <code class="literal">fapolicyd</code>, and <code class="literal">debuginfo</code> packages to do their integrity checks. After installing the <code class="literal">rpm-plugin-ima</code> plugin, newly installed RPM files automatically have IMA signatures placed in the <code class="literal">security.ima</code> extended file attribute. However, you need to reinstall existing packages to obtain IMA signatures.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To install the <code class="literal">rpm-plugin-ima</code> plugin, run:
					</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install rpm-plugin-ima -y</strong></span></pre></li><li class="listitem"><p class="simpara">
						To reinstall all packages, run:
					</p><pre class="literallayout"># <span class="strong strong"><strong>dnf reinstall “*” -y</strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Confirm that the reinstalled package file has the valid IMA signature. For example, to check the IMA signature of the <code class="literal">/usr/bin/bash</code> file, run:
					</p><pre class="literallayout"># <span class="strong strong"><strong>getfattr -m security.ima -d /usr/bin/bash</strong></span>
security.ima=0sAwIE0zIESQBnMGUCMFhf0iBeM7NjjhCCHVt4/ORx1eCegjrWSHzFbJMCsAhR9bYU2hNGjiWUYT2IIqWaaAIxALFGUkqGP5vDLuxQXibO9g7HFcfyZzRBY4rbKPsXcAIZRtDHVS5dQBZqM3hyS5v1MA==</pre></li><li class="listitem"><p class="simpara">
						Verify IMA signature of a file with a specified certificate. The IMA code signing key is accessible by <code class="literal">/usr/share/doc/kernel-keys/$(uname -r)/ima.cer</code>.
					</p><pre class="literallayout"># <span class="strong strong"><strong>evmctl ima_verify -k /usr/share/doc/kernel-keys/$(uname -r)/ima.cer /usr/bin/bash</strong></span>
key 1: d3320449 /usr/share/doc/kernel-keys/5.14.0-359.el9.x86-64/ima.cer
/usr/bin/bash: verification is OK</pre></li></ol></div></section><section class="section" id="enabling-kernel-runtime-integrity-monitoring_enhancing-security-with-the-kernel-integrity-subsystem"><div class="titlepage"><div><div><h3 class="title">23.8. Enabling kernel runtime integrity monitoring</h3></div></div></div><p>
				You can enable kernel runtime integrity monitoring that IMA appraisal provides.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <code class="literal">kernel</code> installed on your system has version <code class="literal">5.14.0-359</code> or higher.
					</li><li class="listitem">
						The <code class="literal">dracut</code> package has version <code class="literal">057-43.git20230816</code> or higher.
					</li><li class="listitem">
						The <code class="literal">keyutils</code> package is installed.
					</li><li class="listitem">
						The <code class="literal">ima-evm-utils</code> package is installed.
					</li><li class="listitem">
						The files covered by the policy have valid signatures. For instructions, see <a class="link" href="#adding-ima-signatures-to-package-files_enhancing-security-with-the-kernel-integrity-subsystem" title="23.7. Adding IMA signatures to package files">Adding IMA signatures to package files</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To copy the Red Hat IMA code signing key to the <code class="literal">/etc/ima/keys</code> file, run:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>mkdir -p /etc/keys/ima</strong></span>
$ <span class="strong strong"><strong>cp /usr/share/doc/kernel-keys/$(uname -r)/ima.cer /etc/ima/keys</strong></span></pre></li><li class="listitem"><p class="simpara">
						To add the IMA code signing key to the <code class="literal">.ima</code> keyring, run:
					</p><pre class="literallayout"># <span class="strong strong"><strong>keyctl padd asymmetric RedHat-IMA %:.ima &lt; /etc/ima/keys/ima.cer</strong></span></pre></li><li class="listitem"><p class="simpara">
						Depending on your threat model, define an IMA policy in the <code class="literal">/etc/sysconfig/ima-policy</code> file. For example, the following IMA policy checks the integrity of both executables and involved memory mapping library files:
					</p><pre class="literallayout"># PROC_SUPER_MAGIC = 0x9fa0
dont_appraise fsmagic=0x9fa0
# SYSFS_MAGIC = 0x62656572
dont_appraise fsmagic=0x62656572
# DEBUGFS_MAGIC = 0x64626720
dont_appraise fsmagic=0x64626720
# TMPFS_MAGIC = 0x01021994
dont_appraise fsmagic=0x1021994
# RAMFS_MAGIC
dont_appraise fsmagic=0x858458f6
# DEVPTS_SUPER_MAGIC=0x1cd1
dont_appraise fsmagic=0x1cd1
# BINFMTFS_MAGIC=0x42494e4d
dont_appraise fsmagic=0x42494e4d
# SECURITYFS_MAGIC=0x73636673
dont_appraise fsmagic=0x73636673
# SELINUX_MAGIC=0xf97cff8c
dont_appraise fsmagic=0xf97cff8c
# SMACK_MAGIC=0x43415d53
dont_appraise fsmagic=0x43415d53
# NSFS_MAGIC=0x6e736673
dont_appraise fsmagic=0x6e736673
# EFIVARFS_MAGIC
dont_appraise fsmagic=0xde5e81e4
# CGROUP_SUPER_MAGIC=0x27e0eb
dont_appraise fsmagic=0x27e0eb
# CGROUP2_SUPER_MAGIC=0x63677270
dont_appraise fsmagic=0x63677270
appraise func=BPRM_CHECK
appraise func=FILE_MMAP mask=MAY_EXEC</pre></li><li class="listitem"><p class="simpara">
						To load the IMA policy to make sure the kernel accepts this IMA policy, run:
					</p><pre class="literallayout"># <span class="strong strong"><strong>echo /etc/sysconfig/ima-policy &gt; /sys/kernel/security/ima/policy</strong></span>
# <span class="strong strong"><strong>echo $?</strong></span>
0</pre></li><li class="listitem"><p class="simpara">
						To enable the <code class="literal">dracut</code> integrity module to automatically load the IMA code signing key and the IMA policy, run:
					</p><pre class="literallayout"># <span class="strong strong"><strong>echo 'add_dracutmodules+=" integrity "' &gt; /etc/dracut.conf.d/98-integrity.conf</strong></span>
# <span class="strong strong"><strong>dracut -f</strong></span></pre></li></ol></div></section><section class="section" id="creating-custom-ima-keys-using-openssl_enhancing-security-with-the-kernel-integrity-subsystem"><div class="titlepage"><div><div><h3 class="title">23.9. Creating custom IMA keys using OpenSSL</h3></div></div></div><p>
				You can use <code class="literal">OpenSSL</code> to generate a CSR for your digital certificates to secure your code.
			</p><p>
				The kernel searches the <code class="literal">.ima</code> keyring for a code signing key to verify an IMA signature. Before you add a code signing key to the <code class="literal">.ima</code> keyring, you need to ensure that IMA CA key signed this key in the <code class="literal">.builtin_trusted_keys</code> or <code class="literal">.secondary_trusted_keys</code> keyrings.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						The custom IMA CA key has the following extensions:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								the basic constraints extension with the CA boolean asserted.
							</li><li class="listitem">
								the <code class="literal">KeyUsage</code> extension with the <code class="literal">keyCertSign</code> bit asserted but <span class="strong strong"><strong>without</strong></span> the <code class="literal">digitalSignature</code> asserted.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						The custom IMA code signing key falls under the following criteria:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The IMA CA key signed this custom IMA code signing key.
							</li><li class="listitem">
								The custom key includes the <code class="literal">subjectKeyIdentifier</code> extension.
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To generate a custom IMA CA key pair, run:
					</p><pre class="literallayout"># <span class="strong strong"><strong>openssl req -new -x509 -utf8 -sha256 -days 3650 -batch -config ima_ca.conf -outform DER -out custom_ima_ca.der -keyout custom_ima_ca.priv</strong></span></pre></li><li class="listitem"><p class="simpara">
						Optional: To check the content of the <code class="literal">ima_ca.conf</code> file, run:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat ima_ca.conf</strong></span>
[ req ]
default_bits = 2048
distinguished_name = req_distinguished_name
prompt = no
string_mask = utf8only
x509_extensions = ca

[ req_distinguished_name ]
O = YOUR_ORG
CN =  YOUR_COMMON_NAME IMA CA
emailAddress = YOUR_EMAIL

[ ca ]
basicConstraints=critical,CA:TRUE
subjectKeyIdentifier=hash
authorityKeyIdentifier=keyid:always,issuer
keyUsage=critical,keyCertSign,cRLSign</pre></li><li class="listitem"><p class="simpara">
						To generate a private key and a certificate signing request (CSR) for the IMA code signing key, run:
					</p><pre class="literallayout"># <span class="strong strong"><strong>openssl req -new -utf8 -sha256 -days 365 -batch -config ima.conf -out custom_ima.csr -keyout custom_ima.priv</strong></span></pre></li><li class="listitem"><p class="simpara">
						Optional: To check the content of the <code class="literal">ima.conf</code> file, run:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat ima.conf</strong></span>
[ req ]
default_bits = 2048
distinguished_name = req_distinguished_name
prompt = no
string_mask = utf8only
x509_extensions = code_signing

[ req_distinguished_name ]
O = YOUR_ORG
CN = YOUR_COMMON_NAME IMA signing key
emailAddress = YOUR_EMAIL

[ code_signing ]
basicConstraints=critical,CA:FALSE
keyUsage=digitalSignature
subjectKeyIdentifier=hash
authorityKeyIdentifier=keyid:always,issuer</pre></li><li class="listitem"><p class="simpara">
						Use the IMA CA private key to sign the CSR to create the IMA code signing certificate:
					</p><pre class="literallayout"># <span class="strong strong"><strong>openssl x509 -req -in custom_ima.csr -days 365 -extfile ima.conf -extensions code_signing -CA custom_ima_ca.der -CAkey custom_ima_ca.priv -CAcreateserial -outform DER -out ima.der</strong></span></pre></li></ol></div></section><section class="section" id="deploying-a-custom-signed-ima-policy-for-uefi-systems_enhancing-security-with-the-kernel-integrity-subsystem"><div class="titlepage"><div><div><h3 class="title">23.10. Deploying a custom signed IMA policy for UEFI systems</h3></div></div></div><p>
				In the Secure Boot environment, you may want to only load a signed IMA policy signed by your custom IMA key.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The MOK list contains the custom IMA key. For guidance, see <a class="link" href="#enrolling-public-key-on-target-system-by-adding-the-public-key-to-the-mok-list_signing-a-kernel-and-modules-for-secure-boot" title="21.8. Enrolling public key on target system by adding the public key to the MOK list">Enrolling public key on target system by adding the public key to the MOK list</a>.
					</li><li class="listitem">
						The kernel installed on your system has version 5.14.0-335 or higher.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Enable Secure Boot.
					</li><li class="listitem"><p class="simpara">
						Permanently add the <code class="literal">ima_policy=secure_boot</code> kernel parameter.
					</p><p class="simpara">
						For instructions, see <a class="link" href="#configuring-kernel-parameters-permanently-with-sysctl_configuring-kernel-parameters-at-runtime" title="5.3. Configuring kernel parameters permanently with sysctl">Configuring kernel parameters permanently with sysctl</a>.
					</p></li><li class="listitem"><p class="simpara">
						Prepare your IMA policy by running the command:
					</p><pre class="literallayout"># <span class="strong strong"><strong>evmctl ima_sign /etc/sysconfig/ima-policy -k &lt;<span class="emphasis"><em>PATH_TO_YOUR_CUSTOM_IMA_KEY</em></span>&gt;</strong></span>
Place your public certificate under /etc/keys/ima/ and add it to the .ima keyring</pre></li><li class="listitem"><p class="simpara">
						Sign the policy with your custom IMA code signing key by running the command:
					</p><pre class="literallayout"># <span class="strong strong"><strong>keyctl padd asymmetric CUSTOM_IMA1 %:.ima &lt; /etc/ima/keys/my_ima.cer</strong></span></pre></li><li class="listitem"><p class="simpara">
						Load the IMA policy by running the command:
					</p><pre class="literallayout"># <span class="strong strong"><strong>echo /etc/sysconfig/ima-policy &gt; /sys/kernel/security/ima/policy</strong></span>
# <span class="strong strong"><strong>echo $?</strong></span>
0</pre></li></ol></div></section></section><section class="chapter" id="assembly_using-systemd-to-manage-resources-used-by-applications_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 24. Using systemd to manage resources used by applications</h2></div></div></div><p>
			RHEL 9 moves the resource management settings from the process level to the application level by binding the system of <code class="literal">cgroup</code> hierarchies with the <code class="literal">systemd</code> unit tree. Therefore, you can manage the system resources with the <code class="literal">systemctl</code> command, or by modifying the <code class="literal">systemd</code> unit files.
		</p><p>
			To achieve this, <code class="literal">systemd</code> takes various configuration options from the unit files or directly via the <code class="literal">systemctl</code> command. Then <code class="literal">systemd</code> applies those options to specific process groups by using the Linux kernel system calls and features like <code class="literal">cgroups</code> and <code class="literal">namespaces</code>.
		</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
				You can review the full set of configuration options for <code class="literal">systemd</code> in the following manual pages:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<code class="literal">systemd.resource-control(5)</code>
					</li><li class="listitem">
						<code class="literal">systemd.exec(5)</code>
					</li></ul></div></div></rh-alert><section class="section" id="con_role-of-systemd-in-resource-management_assembly_using-systemd-to-manage-resources-used-by-applications"><div class="titlepage"><div><div><h3 class="title">24.1. Role of systemd in resource management</h3></div></div></div><p>
				The core function of <code class="literal">systemd</code> is service management and supervision. The <code class="literal">systemd</code> system and service manager :
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						ensures that managed services start at the right time and in the correct order during the boot process.
					</li><li class="listitem">
						ensures that managed services run smoothly to use the underlying hardware platform optimally.
					</li><li class="listitem">
						provides capabilities to define resource management policies.
					</li><li class="listitem">
						provides capabilities to tune various options, which can improve the performance of the service.
					</li></ul></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					In general, Red Hat recommends you use <code class="literal">systemd</code> for controlling the usage of system resources. You should manually configure the <code class="literal">cgroups</code> virtual file system only in special cases. For example, when you need to use <code class="literal">cgroup-v1</code> controllers that have no equivalents in <code class="literal">cgroup-v2</code> hierarchy.
				</p></div></rh-alert></section><section class="section" id="distribution-models-of-system-sources_assembly_using-systemd-to-manage-resources-used-by-applications"><div class="titlepage"><div><div><h3 class="title">24.2. Distribution models of system sources</h3></div></div></div><p>
				To modify the distribution of system resources, you can apply one or more of the following distribution models:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Weights</span></dt><dd><p class="simpara">
							You can distribute the resource by adding up the weights of all sub-groups and giving each sub-group the fraction matching its ratio against the sum.
						</p><p class="simpara">
							For example, if you have 10 cgroups, each with weight of value 100, the sum is 1000. Each cgroup receives one tenth of the resource.
						</p><p class="simpara">
							Weight is usually used to distribute stateless resources. For example the <span class="emphasis"><em>CPUWeight=</em></span> option is an implementation of this resource distribution model.
						</p></dd><dt><span class="term">Limits</span></dt><dd><p class="simpara">
							A cgroup can consume up to the configured amount of the resource. The sum of sub-group limits can exceed the limit of the parent cgroup. Therefore it is possible to overcommit resources in this model.
						</p><p class="simpara">
							For example the <span class="emphasis"><em>MemoryMax=</em></span> option is an implementation of this resource distribution model.
						</p></dd><dt><span class="term">Protections</span></dt><dd><p class="simpara">
							You can set up a protected amount of a resource for a cgroup. If the resource usage is below the protection boundary, the kernel will try not to penalize this cgroup in favor of other cgroups that compete for the same resource. An overcommit is also possible.
						</p><p class="simpara">
							For example the <span class="emphasis"><em>MemoryLow=</em></span> option is an implementation of this resource distribution model.
						</p></dd><dt><span class="term">Allocations</span></dt><dd>
							Exclusive allocations of an absolute amount of a finite resource. An overcommit is not possible. An example of this resource type in Linux is the real-time budget.
						</dd><dt><span class="term">unit file option</span></dt><dd><p class="simpara">
							A setting for resource control configuration.
						</p><p class="simpara">
							For example, you can configure CPU resource with options like <span class="emphasis"><em>CPUAccounting=</em></span>, or <span class="emphasis"><em>CPUQuota=</em></span>. Similarly, you can configure memory or I/O resources with options like <span class="emphasis"><em>AllowedMemoryNodes=</em></span> and <span class="emphasis"><em>IOAccounting=</em></span>.
						</p></dd></dl></div></section><section class="section" id="proc_allocating-system-resources-using-systemd_assembly_using-systemd-to-manage-resources-used-by-applications"><div class="titlepage"><div><div><h3 class="title">24.3. Allocating system resources using systemd</h3></div></div></div><p>
				Allocating system resources by using systemd involves creating &amp; managing systemd services and units. This can be configured to start, stop, or restart at specific times or in response to certain system events.
			</p><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
					To change the required value of the unit file option of your service, you can adjust the value in the unit file, or use the <code class="literal">systemctl</code> command:
				</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Check the assigned values for the service of your choice.
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl show --property &lt;<span class="emphasis"><em>unit file option</em></span>&gt; &lt;<span class="emphasis"><em>service name</em></span>&gt;</strong></span></pre></li><li class="listitem"><p class="simpara">
						Set the required value of the CPU time allocation policy option:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl set-property &lt;<span class="emphasis"><em>service name</em></span>&gt; &lt;<span class="emphasis"><em>unit file option</em></span>&gt;=&lt;<span class="emphasis"><em>value</em></span>&gt;</strong></span></pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Check the newly assigned values for the service of your choice.
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl show --property &lt;<span class="emphasis"><em>unit file option</em></span>&gt; &lt;<span class="emphasis"><em>service name</em></span>&gt;</strong></span></pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">systemd.resource-control(5)</code> and <code class="literal">systemd.exec(5)</code> man pages on your system
					</li></ul></div></section><section class="section" id="con_overview-of-systemd-hierarchy-for-cgroups_assembly_using-systemd-to-manage-resources-used-by-applications"><div class="titlepage"><div><div><h3 class="title">24.4. Overview of systemd hierarchy for cgroups</h3></div></div></div><p>
				On the backend, the <code class="literal">systemd</code> system and service manager uses the <code class="literal">slice</code>, the <code class="literal">scope</code>, and the <code class="literal">service</code> units to organize and structure processes in the control groups. You can further modify this hierarchy by creating custom unit files or using the <code class="literal">systemctl</code> command. Also, <code class="literal">systemd</code> automatically mounts hierarchies for important kernel resource controllers at the <code class="literal">/sys/fs/cgroup/</code> directory.
			</p><p>
				For resource control, you can use the following three <code class="literal">systemd</code> unit types:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Service</span></dt><dd><p class="simpara">
							A process or a group of processes, which <code class="literal">systemd</code> started according to a unit configuration file.
						</p><p class="simpara">
							Services encapsulate the specified processes so that they can be started and stopped as one set. Services are named in the following way:
						</p><pre class="literallayout"><span class="emphasis"><em>&lt;name&gt;</em></span>.service</pre></dd><dt><span class="term">Scope</span></dt><dd><p class="simpara">
							A group of externally created processes. Scopes encapsulate processes that are started and stopped by the arbitrary processes through the <code class="literal">fork()</code> function and then registered by <code class="literal">systemd</code> at runtime. For example, user sessions, containers, and virtual machines are treated as scopes. Scopes are named as follows:
						</p><pre class="literallayout"><span class="emphasis"><em>&lt;name&gt;</em></span>.scope</pre></dd><dt><span class="term">Slice</span></dt><dd><p class="simpara">
							A group of hierarchically organized units. Slices organize a hierarchy in which scopes and services are placed.
						</p><p class="simpara">
							The actual processes are contained in scopes or in services. Every name of a slice unit corresponds to the path to a location in the hierarchy.
						</p><p class="simpara">
							The dash (<code class="literal">-</code>) character acts as a separator of the path components to a slice from the <code class="literal">-.slice</code> root slice. In the following example:
						</p><pre class="literallayout"><span class="emphasis"><em>&lt;parent-name&gt;</em></span>.slice</pre><p class="simpara">
							<code class="literal">parent-name.slice</code> is a sub-slice of <code class="literal">parent.slice</code>, which is a sub-slice of the <code class="literal">-.slice</code> root slice. <code class="literal">parent-name.slice</code> can have its own sub-slice named <code class="literal">parent-name-name2.slice</code>, and so on.
						</p></dd></dl></div><p>
				The <code class="literal">service</code>, the <code class="literal">scope</code>, and the <code class="literal">slice</code> units directly map to objects in the control group hierarchy. When these units are activated, they map directly to control group paths built from the unit names.
			</p><p>
				The following is an abbreviated example of a control group hierarchy:
			</p><pre class="literallayout">Control group /:
-.slice
├─user.slice
│ ├─user-42.slice
│ │ ├─session-c1.scope
│ │ │ ├─ 967 gdm-session-worker [pam/gdm-launch-environment]
│ │ │ ├─1035 /usr/libexec/gdm-x-session gnome-session --autostart /usr/share/gdm/greeter/autostart
│ │ │ ├─1054 /usr/libexec/Xorg vt1 -displayfd 3 -auth /run/user/42/gdm/Xauthority -background none -noreset -keeptty -verbose 3
│ │ │ ├─1212 /usr/libexec/gnome-session-binary --autostart /usr/share/gdm/greeter/autostart
│ │ │ ├─1369 /usr/bin/gnome-shell
│ │ │ ├─1732 ibus-daemon --xim --panel disable
│ │ │ ├─1752 /usr/libexec/ibus-dconf
│ │ │ ├─1762 /usr/libexec/ibus-x11 --kill-daemon
│ │ │ ├─1912 /usr/libexec/gsd-xsettings
│ │ │ ├─1917 /usr/libexec/gsd-a11y-settings
│ │ │ ├─1920 /usr/libexec/gsd-clipboard
…​
├─init.scope
│ └─1 /usr/lib/systemd/systemd --switched-root --system --deserialize 18
└─system.slice
  ├─rngd.service
  │ └─800 /sbin/rngd -f
  ├─systemd-udevd.service
  │ └─659 /usr/lib/systemd/systemd-udevd
  ├─chronyd.service
  │ └─823 /usr/sbin/chronyd
  ├─auditd.service
  │ ├─761 /sbin/auditd
  │ └─763 /usr/sbin/sedispatch
  ├─accounts-daemon.service
  │ └─876 /usr/libexec/accounts-daemon
  ├─example.service
  │ ├─ 929 /bin/bash /home/jdoe/example.sh
  │ └─4902 sleep 1
  …​</pre><p>
				The example above shows that services and scopes contain processes and are placed in slices that do not contain processes of their own.
			</p><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/managing-systemd_configuring-basic-system-settings#managing-system-services-with-systemctl_managing-systemd">Managing system services with systemctl</a></span></em></span> in Red Hat Enterprise Linux
					</li><li class="listitem">
						<a class="link" href="#what-kernel-resource-controllers-are_setting-limits-for-applications" title="25.2. Introducing kernel resource controllers">What are kernel resource controllers</a>
					</li><li class="listitem">
						The <code class="literal">systemd.resource-control(5)</code>, <code class="literal">systemd.exec(5)</code>, <code class="literal">cgroups(7)</code>, <code class="literal">fork()</code>, <code class="literal">fork(2)</code> manual pages
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index#setting-limits-for-applications_managing-monitoring-and-updating-the-kernel">Understanding cgroups</a>
					</li></ul></div></section><section class="section" id="listing-systemd_units_assembly_using-systemd-to-manage-resources-used-by-applications"><div class="titlepage"><div><div><h3 class="title">24.5. Listing systemd units</h3></div></div></div><p class="_abstract _abstract">
				Use the <code class="literal">systemd</code> system and service manager to list its units.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						List all active units on the system with the <code class="literal">systemctl</code> utility. The terminal returns an output similar to the following example:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl</strong></span>
UNIT                                                LOAD   ACTIVE SUB       DESCRIPTION
…​
init.scope                                          loaded active running   System and Service Manager
session-2.scope                                     loaded active running   Session 2 of user jdoe
abrt-ccpp.service                                   loaded active exited    Install ABRT coredump hook
abrt-oops.service                                   loaded active running   ABRT kernel log watcher
abrt-vmcore.service                                 loaded active exited    Harvest vmcores for ABRT
abrt-xorg.service                                   loaded active running   ABRT Xorg log watcher
…​
-.slice                                             loaded active active    Root Slice
machine.slice                                       loaded active active    Virtual Machine and Container Slice system-getty.slice                                                                       loaded active active    system-getty.slice
system-lvm2\x2dpvscan.slice                         loaded active active    system-lvm2\x2dpvscan.slice
system-sshd\x2dkeygen.slice                         loaded active active    system-sshd\x2dkeygen.slice
system-systemd\x2dhibernate\x2dresume.slice         loaded active active    system-systemd\x2dhibernate\x2dresume&gt;
system-user\x2druntime\x2ddir.slice                 loaded active active    system-user\x2druntime\x2ddir.slice
system.slice                                        loaded active active    System Slice
user-1000.slice                                     loaded active active    User Slice of UID 1000
user-42.slice                                       loaded active active    User Slice of UID 42
user.slice                                          loaded active active    User and Session Slice
…​</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">UNIT</code></span></dt><dd>
									A name of a unit that also reflects the unit position in a control group hierarchy. The units relevant for resource control are a <span class="emphasis"><em>slice</em></span>, a <span class="emphasis"><em>scope</em></span>, and a <span class="emphasis"><em>service</em></span>.
								</dd><dt><span class="term"><code class="literal">LOAD</code></span></dt><dd>
									Indicates whether the unit configuration file was properly loaded. If the unit file failed to load, the field contains the state <span class="emphasis"><em>error</em></span> instead of <span class="emphasis"><em>loaded</em></span>. Other unit load states are: <span class="emphasis"><em>stub</em></span>, <span class="emphasis"><em>merged</em></span>, and <span class="emphasis"><em>masked</em></span>.
								</dd><dt><span class="term"><code class="literal">ACTIVE</code></span></dt><dd>
									The high-level unit activation state, which is a generalization of <code class="literal">SUB</code>.
								</dd><dt><span class="term"><code class="literal">SUB</code></span></dt><dd>
									The low-level unit activation state. The range of possible values depends on the unit type.
								</dd><dt><span class="term"><code class="literal">DESCRIPTION</code></span></dt><dd>
									The description of the unit content and functionality.
								</dd></dl></div></li><li class="listitem"><p class="simpara">
						List all active and inactive units:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl --all</strong></span></pre></li><li class="listitem"><p class="simpara">
						Limit the amount of information in the output:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl --type service,masked</strong></span></pre><p class="simpara">
						The <code class="literal">--type</code> option requires a comma-separated list of unit types such as a <span class="emphasis"><em>service</em></span> and a <span class="emphasis"><em>slice</em></span>, or unit load states such as <span class="emphasis"><em>loaded</em></span> and <span class="emphasis"><em>masked</em></span>.
					</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/managing-systemd_configuring-basic-system-settings#managing-system-services-with-systemctl_managing-systemd">Managing system services with systemctl</a></span></em></span> in RHEL
					</li><li class="listitem">
						The <code class="literal">systemd.resource-control(5)</code>, <code class="literal">systemd.exec(5)</code> manual pages
					</li></ul></div></section><section class="section" id="viewing-systemd-control-group-hierarchy_assembly_using-systemd-to-manage-resources-used-by-applications"><div class="titlepage"><div><div><h3 class="title">24.6. Viewing systemd cgroups hierarchy</h3></div></div></div><p class="_abstract _abstract">
				Display control groups (<code class="literal">cgroups</code>) hierarchy and processes running in specific <code class="literal">cgroups</code>.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Display the whole <code class="literal">cgroups</code> hierarchy on your system with the <code class="literal">systemd-cgls</code> command.
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemd-cgls</strong></span>
Control group /:
-.slice
├─user.slice
│ ├─user-42.slice
│ │ ├─session-c1.scope
│ │ │ ├─ 965 gdm-session-worker [pam/gdm-launch-environment]
│ │ │ ├─1040 /usr/libexec/gdm-x-session gnome-session --autostart /usr/share/gdm/greeter/autostart
…​
├─init.scope
│ └─1 /usr/lib/systemd/systemd --switched-root --system --deserialize 18
└─system.slice
  …​
  ├─example.service
  │ ├─6882 /bin/bash /home/jdoe/example.sh
  │ └─6902 sleep 1
  ├─systemd-journald.service
    └─629 /usr/lib/systemd/systemd-journald
  …​</pre><p class="simpara">
						The example output returns the entire <code class="literal">cgroups</code> hierarchy, where the highest level is formed by <span class="emphasis"><em>slices</em></span>.
					</p></li><li class="listitem"><p class="simpara">
						Display the <code class="literal">cgroups</code> hierarchy filtered by a resource controller with the <code class="literal">systemd-cgls &lt;<span class="emphasis"><em>resource_controller</em></span>&gt;</code> command.
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemd-cgls memory</strong></span>
Controller memory; Control group /:
├─1 /usr/lib/systemd/systemd --switched-root --system --deserialize 18
├─user.slice
│ ├─user-42.slice
│ │ ├─session-c1.scope
│ │ │ ├─ 965 gdm-session-worker [pam/gdm-launch-environment]
…​
└─system.slice
  |
  …​
  ├─chronyd.service
  │ └─844 /usr/sbin/chronyd
  ├─example.service
  │ ├─8914 /bin/bash /home/jdoe/example.sh
  │ └─8916 sleep 1
  …​</pre><p class="simpara">
						The example output lists the services that interact with the selected controller.
					</p></li><li class="listitem"><p class="simpara">
						Display detailed information about a certain unit and its part of the <code class="literal">cgroups</code> hierarchy with the <code class="literal">systemctl status &lt;<span class="emphasis"><em>system_unit</em></span>&gt;</code> command.
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>systemctl status example.service</strong></span>
● example.service - My example service
   Loaded: loaded (/usr/lib/systemd/system/example.service; enabled; vendor preset: disabled)
   Active: active (running) since Tue 2019-04-16 12:12:39 CEST; 3s ago
 Main PID: 17737 (bash)
    Tasks: 2 (limit: 11522)
   Memory: 496.0K (limit: 1.5M)
   CGroup: /system.slice/example.service
           ├─17737 /bin/bash /home/jdoe/example.sh
           └─17743 sleep 1
Apr 16 12:12:39 redhat systemd[1]: Started My example service.
Apr 16 12:12:39 redhat bash[17737]: The current time is Tue Apr 16 12:12:39 CEST 2019
Apr 16 12:12:40 redhat bash[17737]: The current time is Tue Apr 16 12:12:40 CEST 2019</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">systemd.resource-control(5)</code> and <code class="literal">cgroups(7)</code> man pages on your system
					</li></ul></div></section><section class="section" id="proc_viewing-cgroups-of-processes_assembly_using-systemd-to-manage-resources-used-by-applications"><div class="titlepage"><div><div><h3 class="title">24.7. Viewing cgroups of processes</h3></div></div></div><p>
				You can learn which <span class="emphasis"><em>control group</em></span> (<code class="literal">cgroup</code>) a process belongs to. Then you can check the <code class="literal">cgroup</code> to find which controllers and controller-specific configurations it uses.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To view which <code class="literal">cgroup</code> a process belongs to, run the <code class="literal"># cat proc/&lt;<span class="emphasis"><em>PID</em></span>&gt;/cgroup</code> command:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /proc/2467/cgroup</strong></span>
0::/system.slice/example.service</pre><p class="simpara">
						The example output relates to a process of interest. In this case, it is a process identified by <code class="literal">PID 2467</code>, which belongs to the <code class="literal">example.service</code> unit. You can determine whether the process was placed in a correct control group as defined by the <code class="literal">systemd</code> unit file specifications.
					</p></li><li class="listitem"><p class="simpara">
						To display what controllers and respective configuration files the <code class="literal">cgroup</code> uses, check the <code class="literal">cgroup</code> directory:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /sys/fs/cgroup/system.slice/example.service/cgroup.controllers</strong></span>
memory pids

# <span class="strong strong"><strong>ls /sys/fs/cgroup/system.slice/example.service/</strong></span>
cgroup.controllers
cgroup.events
…​
cpu.pressure
cpu.stat
io.pressure
memory.current
memory.events
…​
pids.current
pids.events
pids.max</pre></li></ol></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The version 1 hierarchy of <code class="literal">cgroups</code> uses a per-controller model. Therefore the output from the <code class="literal">/proc/<span class="emphasis"><em>PID</em></span>/cgroup</code> file shows, which <code class="literal">cgroups</code> under each controller the PID belongs to. You can find the respective <code class="literal">cgroups</code> under the controller directories at <code class="literal">/sys/fs/cgroup/<span class="emphasis"><em>&lt;controller_name&gt;</em></span>/</code>.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The <code class="literal">cgroups(7)</code> manual page
					</li><li class="listitem">
						<a class="link" href="#what-kernel-resource-controllers-are_setting-limits-for-applications" title="25.2. Introducing kernel resource controllers">What are kernel resource controllers</a>
					</li><li class="listitem">
						Documentation in the <code class="literal">/usr/share/doc/kernel-doc-&lt;kernel_version&gt;/Documentation/admin-guide/cgroup-v2.rst</code> file (after installing the <code class="literal">kernel-doc</code> package)
					</li></ul></div></section><section class="section" id="monitoring-resource-consumption_assembly_using-systemd-to-manage-resources-used-by-applications"><div class="titlepage"><div><div><h3 class="title">24.8. Monitoring resource consumption</h3></div></div></div><p class="_abstract _abstract">
				View a list of currently running control groups (<code class="literal">cgroups</code>) and their resource consumption in real-time.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Display a dynamic account of currently running <code class="literal">cgroups</code> with the <code class="literal">systemd-cgtop</code> command.
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>systemd-cgtop</strong></span>
Control Group                            Tasks   %CPU   Memory  Input/s Output/s
/                                          607   29.8     1.5G        -        -
/system.slice                              125      -   428.7M        -        -
/system.slice/ModemManager.service           3      -     8.6M        -        -
/system.slice/NetworkManager.service         3      -    12.8M        -        -
/system.slice/accounts-daemon.service        3      -     1.8M        -        -
/system.slice/boot.mount                     -      -    48.0K        -        -
/system.slice/chronyd.service                1      -     2.0M        -        -
/system.slice/cockpit.socket                 -      -     1.3M        -        -
/system.slice/colord.service                 3      -     3.5M        -        -
/system.slice/crond.service                  1      -     1.8M        -        -
/system.slice/cups.service                   1      -     3.1M        -        -
/system.slice/dev-hugepages.mount            -      -   244.0K        -        -
/system.slice/dev-mapper-rhel\x2dswap.swap   -      -   912.0K        -        -
/system.slice/dev-mqueue.mount               -      -    48.0K        -        -
/system.slice/example.service                2      -     2.0M        -        -
/system.slice/firewalld.service              2      -    28.8M        -        -
...</pre><p class="simpara">
						The example output displays currently running <code class="literal">cgroups</code> ordered by their resource usage (CPU, memory, disk I/O load). The list refreshes every 1 second by default. Therefore, it offers a dynamic insight into the actual resource usage of each control group.
					</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The <code class="literal">systemd-cgtop(1)</code> manual page
					</li></ul></div></section><section class="section" id="proc_using-systemd-unit-files-to-set-limits-for-applications_assembly_using-systemd-to-manage-resources-used-by-applications"><div class="titlepage"><div><div><h3 class="title">24.9. Using systemd unit files to set limits for applications</h3></div></div></div><p>
				The <code class="literal">systemd</code> service manager supervises each existing or running unit and creates control groups for them. The units have configuration files in the <code class="literal">/usr/lib/systemd/system/</code> directory.
			</p><p>
				You can manually modify the unit files to:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						set limits.
					</li><li class="listitem">
						prioritize.
					</li><li class="listitem">
						control access to hardware resources for groups of processes.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have the <code class="literal">root</code> privileges.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Edit the <code class="literal">/usr/lib/systemd/system/example.service</code> file to limit the memory usage of a service:
					</p><pre class="literallayout">…​
[Service]
MemoryMax=1500K
…​</pre><p class="simpara">
						The configuration limits the maximum memory that the processes in a control group cannot exceed. The <code class="literal">example.service</code> service is part of such a control group which has imposed limitations. You can use suffixes K, M, G, or T to identify Kilobyte, Megabyte, Gigabyte, or Terabyte as a unit of measurement.
					</p></li><li class="listitem"><p class="simpara">
						Reload all unit configuration files:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl daemon-reload</strong></span></pre></li><li class="listitem"><p class="simpara">
						Restart the service:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl restart <span class="emphasis"><em>example.service</em></span></strong></span></pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Check that the changes took effect:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /sys/fs/cgroup/system.slice/example.service/memory.max</strong></span>
1536000</pre><p class="simpara">
						The example output shows that the memory consumption was limited at around 1,500 KB.
					</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index#setting-limits-for-applications_managing-monitoring-and-updating-the-kernel">Understanding cgroups</a>
					</li><li class="listitem">
						<span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/managing-systemd_configuring-basic-system-settings#managing-system-services-with-systemctl_managing-systemd">Managing system services with systemctl</a></span></em></span> in Red Hat Enterprise Linux
					</li><li class="listitem">
						<code class="literal">systemd.resource-control(5)</code>, <code class="literal">systemd.exec(5)</code>, and <code class="literal">cgroups(7)</code> man pages on your system
					</li></ul></div></section><section class="section" id="proc_using-systemctl-command-to-set-limits-to-applications_assembly_using-systemd-to-manage-resources-used-by-applications"><div class="titlepage"><div><div><h3 class="title">24.10. Using systemctl command to set limits to applications</h3></div></div></div><p class="_abstract _abstract">
				CPU affinity settings help you restrict the access of a particular process to some CPUs. Effectively, the CPU scheduler never schedules the process to run on the CPU that is not in the affinity mask of the process.
			</p><p>
				The default CPU affinity mask applies to all services managed by <code class="literal">systemd</code>.
			</p><p>
				To configure CPU affinity mask for a particular <code class="literal">systemd</code> service, <code class="literal">systemd</code> provides <code class="literal">CPUAffinity=</code> both as:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						a unit file option.
					</li><li class="listitem">
						a configuration option in the [Manager] section of the <code class="literal">/etc/systemd/system.conf</code> file.
					</li></ul></div><p>
				The <code class="literal">CPUAffinity=</code> unit file option sets a list of CPUs or CPU ranges that are merged and used as the affinity mask.
			</p><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
					To set CPU affinity mask for a particular <code class="literal">systemd</code> service using the <code class="literal">CPUAffinity</code> unit file option:
				</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Check the values of the <code class="literal">CPUAffinity</code> unit file option in the service of your choice:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>systemctl show --property <span class="emphasis"><em>&lt;CPU affinity configuration option&gt;</em></span> <span class="emphasis"><em>&lt;service name&gt;</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						As the root user, set the required value of the <code class="literal">CPUAffinity</code> unit file option for the CPU ranges used as the affinity mask:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl set-property <span class="emphasis"><em>&lt;service name&gt;</em></span> CPUAffinity=<span class="emphasis"><em>&lt;value&gt;</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Restart the service to apply the changes.
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl restart <span class="emphasis"><em>&lt;service name&gt;</em></span></strong></span></pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">systemd.resource-control(5)</code>, <code class="literal">systemd.exec(5)</code>, <code class="literal">cgroups(7)</code> man pages on your system
					</li></ul></div></section><section class="section" id="proc_setting-global-default-cpu-affinity-through-manager-configuration_assembly_using-systemd-to-manage-resources-used-by-applications"><div class="titlepage"><div><div><h3 class="title">24.11. Setting global default CPU affinity through manager configuration</h3></div></div></div><p>
				The <code class="literal">CPUAffinity</code> option in the <code class="literal">/etc/systemd/system.conf</code> file defines an affinity mask for the process identification number (PID) 1 and all processes forked off of PID1. You can then override the <code class="literal">CPUAffinity</code> on a per-service basis.
			</p><p>
				To set the default CPU affinity mask for all <code class="literal">systemd</code> services using the <code class="literal">/etc/systemd/system.conf</code> file:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Set the CPU numbers for the <code class="literal">CPUAffinity=</code> option in the [Manager] section of the <code class="literal">/etc/systemd/system.conf</code> file.
					</li><li class="listitem"><p class="simpara">
						Save the edited file and reload the <code class="literal">systemd</code> service:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl daemon-reload</strong></span></pre></li><li class="listitem">
						Reboot the server to apply the changes.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The <code class="literal">systemd.resource-control(5)</code> and <code class="literal">systemd.exec(5)</code> man pages.
					</li></ul></div></section><section class="section" id="proc_configuring-numa-using-systemd_assembly_using-systemd-to-manage-resources-used-by-applications"><div class="titlepage"><div><div><h3 class="title">24.12. Configuring NUMA policies using systemd</h3></div></div></div><p class="_abstract _abstract">
				Non-uniform memory access (NUMA) is a computer memory subsystem design, in which the memory access time depends on the physical memory location relative to the processor.
			</p><p>
				Memory close to the CPU has lower latency (local memory) than memory that is local for a different CPU (foreign memory) or is shared between a set of CPUs.
			</p><p>
				In terms of the Linux kernel, NUMA policy governs where (for example, on which NUMA nodes) the kernel allocates physical memory pages for the process.
			</p><p>
				<code class="literal">systemd</code> provides unit file options <code class="literal">NUMAPolicy</code> and <code class="literal">NUMAMask</code> to control memory allocation policies for services.
			</p><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
					To set the NUMA memory policy through the <code class="literal">NUMAPolicy</code> unit file option:
				</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Check the values of the <code class="literal">NUMAPolicy</code> unit file option in the service of your choice:
					</p><pre class="literallayout">$ <span class="strong strong"><strong>systemctl show --property <span class="emphasis"><em>&lt;NUMA policy configuration option&gt;</em></span> <span class="emphasis"><em>&lt;service name&gt;</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						As a root, set the required policy type of the <code class="literal">NUMAPolicy</code> unit file option:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl set-property <span class="emphasis"><em>&lt;service name&gt;</em></span> NUMAPolicy=<span class="emphasis"><em>&lt;value&gt;</em></span></strong></span></pre></li><li class="listitem"><p class="simpara">
						Restart the service to apply the changes.
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl restart <span class="emphasis"><em>&lt;service name&gt;</em></span></strong></span></pre></li></ol></div><p>
				To set a global <code class="literal">NUMAPolicy</code> setting using the [Manager] configuration option:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Search in the <code class="literal">/etc/systemd/system.conf</code> file for the <code class="literal">NUMAPolicy</code> option in the [Manager] section of the file.
					</li><li class="listitem">
						Edit the policy type and save the file.
					</li><li class="listitem"><p class="simpara">
						Reload the <code class="literal">systemd</code> configuration:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemd daemon-reload</strong></span></pre></li><li class="listitem">
						Reboot the server.
					</li></ol></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					When you configure a strict NUMA policy, for example <code class="literal">bind</code>, make sure that you also appropriately set the <code class="literal">CPUAffinity=</code> unit file option.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#proc_using-systemctl-command-to-set-limits-to-applications_assembly_using-systemd-to-manage-resources-used-by-applications" title="24.10. Using systemctl command to set limits to applications">Using systemctl command to set limits to applications</a>
					</li><li class="listitem">
						The <code class="literal">systemd.resource-control(5)</code>, <code class="literal">systemd.exec(5)</code>, and <code class="literal">set_mempolicy(2)</code> man pages.
					</li></ul></div></section><section class="section" id="ref_numa-policy-configuration-options-with-systemd_assembly_using-systemd-to-manage-resources-used-by-applications"><div class="titlepage"><div><div><h3 class="title">24.13. NUMA policy configuration options for systemd</h3></div></div></div><p class="_abstract _abstract">
				<code class="literal">Systemd</code> provides the following options to configure the NUMA policy:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">NUMAPolicy</code></span></dt><dd><p class="simpara">
							Controls the NUMA memory policy of the executed processes. You can use these policy types:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									default
								</li><li class="listitem">
									preferred
								</li><li class="listitem">
									bind
								</li><li class="listitem">
									interleave
								</li><li class="listitem">
									local
								</li></ul></div></dd><dt><span class="term"><code class="literal">NUMAMask</code></span></dt><dd><p class="simpara">
							Controls the NUMA node list which is associated with the selected NUMA policy.
						</p><p class="simpara">
							Note that you do not have to specify the <code class="literal">NUMAMask</code> option for the following policies:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									default
								</li><li class="listitem">
									local
								</li></ul></div><p class="simpara">
							For the preferred policy, the list specifies only a single NUMA node.
						</p></dd></dl></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<code class="literal">systemd.resource-control(5)</code>, <code class="literal">systemd.exec(5)</code>, and <code class="literal">set_mempolicy(2)</code> man pages on your system
					</li></ul></div></section><section class="section" id="creating-transient-control-groups_assembly_using-systemd-to-manage-resources-used-by-applications"><div class="titlepage"><div><div><h3 class="title">24.14. Creating transient cgroups using systemd-run command</h3></div></div></div><p class="_abstract _abstract">
				The transient <code class="literal">cgroups</code> set limits on resources consumed by a unit (service or scope) during its runtime.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To create a transient control group, use the <code class="literal">systemd-run</code> command in the following format:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemd-run --unit=<span class="emphasis"><em>&lt;name&gt;</em></span> --slice=<span class="emphasis"><em>&lt;name&gt;</em></span>.slice <span class="emphasis"><em>&lt;command&gt;</em></span></strong></span></pre><p class="simpara">
						This command creates and starts a transient service or a scope unit and runs a custom command in such a unit.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								The <code class="literal">--unit=&lt;name&gt;</code> option gives a name to the unit. If <code class="literal">--unit</code> is not specified, the name is generated automatically.
							</li><li class="listitem">
								The <code class="literal">--slice=&lt;<span class="emphasis"><em>name</em></span>&gt;.slice</code> option makes your service or scope unit a member of a specified slice. Replace <code class="literal">&lt;<span class="emphasis"><em>name</em></span>&gt;.slice</code> with the name of an existing slice (as shown in the output of <code class="literal">systemctl -t slice</code>), or create a new slice by passing a unique name. By default, services and scopes are created as members of the <code class="literal">system.slice</code>.
							</li><li class="listitem"><p class="simpara">
								Replace <code class="literal">&lt;<span class="emphasis"><em>command</em></span>&gt;</code> with the command you want to enter in the service or the scope unit.
							</p><p class="simpara">
								The following message is displayed to confirm that you created and started the service or the scope successfully:
							</p><pre class="literallayout"># Running as unit <span class="emphasis"><em>&lt;name&gt;</em></span>.service</pre></li></ul></div></li><li class="listitem"><p class="simpara">
						<span class="emphasis"><em>Optional</em></span>: Keep the unit running after its processes finished to collect run-time information:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemd-run --unit=<span class="emphasis"><em>&lt;name&gt;</em></span> --slice=<span class="emphasis"><em>&lt;name&gt;</em></span>.slice --remain-after-exit <span class="emphasis"><em>&lt;command&gt;</em></span></strong></span></pre><p class="simpara">
						The command creates and starts a transient service unit and runs a custom command in the unit. The <code class="literal">--remain-after-exit</code> option ensures that the service keeps running after its processes have finished.
					</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The <code class="literal">systemd-run(1)</code> manual page
					</li></ul></div></section><section class="section" id="removing-transient-control-groups_assembly_using-systemd-to-manage-resources-used-by-applications"><div class="titlepage"><div><div><h3 class="title">24.15. Removing transient control groups</h3></div></div></div><p class="_abstract _abstract">
				You can use the <code class="literal">systemd</code> system and service manager to remove transient control groups (<code class="literal">cgroups</code>) if you no longer need to limit, prioritize, or control access to hardware resources for groups of processes.
			</p><p>
				Transient <code class="literal">cgroups</code> are automatically released once all the processes that a service or a scope unit contains finish.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						To stop the service unit with all its processes, enter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl stop &lt;<span class="emphasis"><em>name</em></span>&gt;.service</strong></span></pre></li><li class="listitem"><p class="simpara">
						To terminate one or more of the unit processes, enter:
					</p><pre class="literallayout"># <span class="strong strong"><strong>systemctl kill &lt;<span class="emphasis"><em>name</em></span>&gt;.service --kill-who=<span class="emphasis"><em>PID,…​</em></span> --signal=&lt;<span class="emphasis"><em>signal</em></span>&gt;</strong></span></pre><p class="simpara">
						The command uses the <code class="literal">--kill-who</code> option to select process(es) from the control group you want to terminate. To kill multiple processes at the same time, pass a comma-separated list of PIDs. The <code class="literal">--signal</code> option determines the type of POSIX signal to be sent to the specified processes. The default signal is <span class="emphasis"><em>SIGTERM</em></span>.
					</p></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#understanding-control-groups_setting-limits-for-applications" title="25.1. Introducing control groups">What are control groups</a>
					</li><li class="listitem">
						<a class="link" href="#what-kernel-resource-controllers-are_setting-limits-for-applications" title="25.2. Introducing kernel resource controllers">What are kernel resource controllers</a>
					</li><li class="listitem">
						<code class="literal">systemd.resource-control(5)</code> and <code class="literal">cgroups(7)</code> man pages on your system
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index#setting-limits-for-applications_managing-monitoring-and-updating-the-kernel">Understanding control groups</a>
					</li><li class="listitem">
						<span class="emphasis"><em><span class="citetitle citetitle"><a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/managing-systemd_configuring-basic-system-settings">Managing systemd</a></span></em></span> in RHEL
					</li></ul></div></section></section><section class="chapter" id="setting-limits-for-applications_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 25. Understanding control groups</h2></div></div></div><p class="_abstract _abstract">
			Using the control groups (<code class="literal">cgroups</code>) kernel functionality, you can control resource usage of applications to use them more efficiently.
		</p><p>
			You can use <code class="literal">cgroups</code> for the following tasks:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Setting limits for system resource allocation.
				</li><li class="listitem">
					Prioritizing the allocation of hardware resources to specific processes.
				</li><li class="listitem">
					Isolating certain processes from obtaining hardware resources.
				</li></ul></div><section class="section" id="understanding-control-groups_setting-limits-for-applications"><div class="titlepage"><div><div><h3 class="title">25.1. Introducing control groups</h3></div></div></div><p class="_abstract _abstract">
				Using the <span class="emphasis"><em>control groups</em></span> Linux kernel feature, you can organize processes into hierarchically ordered groups - <code class="literal">cgroups</code>. You define the hierarchy (control groups tree) by providing structure to <code class="literal">cgroups</code> virtual file system, mounted by default on the <code class="literal">/sys/fs/cgroup/</code> directory.
			</p><p>
				The <code class="literal">systemd</code> service manager uses <code class="literal">cgroups</code> to organize all units and services that it governs. Manually, you can manage the hierarchies of <code class="literal">cgroups</code> by creating and removing sub-directories in the <code class="literal">/sys/fs/cgroup/</code> directory.
			</p><p>
				The resource controllers in the kernel then modify the behavior of processes in <code class="literal">cgroups</code> by limiting, prioritizing or allocating system resources, of those processes. These resources include the following:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						CPU time
					</li><li class="listitem">
						Memory
					</li><li class="listitem">
						Network bandwidth
					</li><li class="listitem">
						Combinations of these resources
					</li></ul></div><p>
				The primary use case of <code class="literal">cgroups</code> is aggregating system processes and dividing hardware resources among applications and users. This makes it possible to increase the efficiency, stability, and security of your environment.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Control groups version 1</span></dt><dd><p class="simpara">
							<span class="emphasis"><em>Control groups version 1</em></span> (<code class="literal">cgroups-v1</code>) provide a per-resource controller hierarchy. This means that each resource (such as CPU, memory, or I/O) has its own control group hierarchy. You can combine different control group hierarchies in a way that one controller can coordinate with another in managing their respective resources. However, when the two controllers belong to different process hierarchies, proper coordination is limited.
						</p><p class="simpara">
							The <code class="literal">cgroups-v1</code> controllers were developed across a large time span and as a result, the behavior and naming of their control files is not uniform.
						</p></dd><dt><span class="term">Control groups version 2</span></dt><dd><p class="simpara">
							<span class="emphasis"><em>Control groups version 2</em></span> (<code class="literal">cgroups-v2</code>) provide a single control group hierarchy against which all resource controllers are mounted.
						</p><p class="simpara">
							The control file behavior and naming is consistent among different controllers.
						</p></dd></dl></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					RHEL 9, by default, mounts and uses <code class="literal">cgroups-v2</code>.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#what-kernel-resource-controllers-are_setting-limits-for-applications" title="25.2. Introducing kernel resource controllers">Introducing kernel resource controllers</a>
					</li><li class="listitem">
						The <code class="literal">cgroups(7)</code> manual page
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/labs/rhcb/RHEL-9.0/kernel-5.14.0-70.13.1.el9/source/Documentation/admin-guide/cgroup-v1">cgroups-v1</a>
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/labs/rhcb/RHEL-9.0/kernel-5.14.0-70.13.1.el9/source/blob/Documentation/admin-guide/cgroup-v2.rst">cgroups-v2</a>
					</li></ul></div></section><section class="section" id="what-kernel-resource-controllers-are_setting-limits-for-applications"><div class="titlepage"><div><div><h3 class="title">25.2. Introducing kernel resource controllers</h3></div></div></div><p class="_abstract _abstract">
				Kernel resource controllers enable the functionality of control groups. RHEL 9 supports various controllers for <span class="emphasis"><em>control groups version 1</em></span> (<code class="literal">cgroups-v1</code>) and <span class="emphasis"><em>control groups version 2</em></span> (<code class="literal">cgroups-v2</code>).
			</p><p>
				A resource controller, also called a control group subsystem, is a kernel subsystem that represents a single resource, such as CPU time, memory, network bandwidth or disk I/O. The Linux kernel provides a range of resource controllers that are mounted automatically by the <code class="literal">systemd</code> service manager. You can find a list of the currently mounted resource controllers in the <code class="literal">/proc/cgroups</code> file.
			</p><div class="variablelist"><p class="title"><strong>Controllers available for <code class="literal">cgroups-v1</code>:</strong></p><dl class="variablelist"><dt><span class="term"><code class="literal">blkio</code></span></dt><dd>
							Sets limits on input/output access to and from block devices.
						</dd><dt><span class="term"><code class="literal">cpu</code></span></dt><dd>
							Adjusts the parameters of the Completely Fair Scheduler (CFS) for a control group’s tasks. The <code class="literal">cpu</code> controller is mounted together with the <code class="literal">cpuacct</code> controller on the same mount.
						</dd><dt><span class="term"><code class="literal">cpuacct</code></span></dt><dd>
							Creates automatic reports on CPU resources used by tasks in a control group. The <code class="literal">cpuacct</code> controller is mounted together with the <code class="literal">cpu</code> controller on the same mount.
						</dd><dt><span class="term"><code class="literal">cpuset</code></span></dt><dd>
							Restricts control group tasks to run only on a specified subset of CPUs and to direct the tasks to use memory only on specified memory nodes.
						</dd><dt><span class="term"><code class="literal">devices</code></span></dt><dd>
							Controls access to devices for tasks in a control group.
						</dd><dt><span class="term"><code class="literal">freezer</code></span></dt><dd>
							Suspends or resumes tasks in a control group.
						</dd><dt><span class="term"><code class="literal">memory</code></span></dt><dd>
							Sets limits on memory use by tasks in a control group and generates automatic reports on memory resources used by those tasks.
						</dd><dt><span class="term"><code class="literal">net_cls</code></span></dt><dd>
							Tags network packets with a class identifier (<code class="literal">classid</code>) that enables the Linux traffic controller (the <code class="literal">tc</code> command) to identify packets that originate from a particular control group task. A subsystem of <code class="literal">net_cls</code>, the <code class="literal">net_filter</code> (iptables), can also use this tag to perform actions on such packets. The <code class="literal">net_filter</code> tags network sockets with a firewall identifier (<code class="literal">fwid</code>) that allows the Linux firewall to identify packets that originate from a particular control group task (by using the <code class="literal">iptables</code> command).
						</dd><dt><span class="term"><code class="literal">net_prio</code></span></dt><dd>
							Sets the priority of network traffic.
						</dd><dt><span class="term"><code class="literal">pids</code></span></dt><dd>
							Sets limits for a number of processes and their children in a control group.
						</dd><dt><span class="term"><code class="literal">perf_event</code></span></dt><dd>
							Groups tasks for monitoring by the <code class="literal">perf</code> performance monitoring and reporting utility.
						</dd><dt><span class="term"><code class="literal">rdma</code></span></dt><dd>
							Sets limits on Remote Direct Memory Access/InfiniBand specific resources in a control group.
						</dd><dt><span class="term"><code class="literal">hugetlb</code></span></dt><dd>
							Can be used to limit the usage of large size virtual memory pages by tasks in a control group.
						</dd></dl></div><div class="variablelist"><p class="title"><strong>Controllers available for <code class="literal">cgroups-v2</code>:</strong></p><dl class="variablelist"><dt><span class="term"><code class="literal">io</code></span></dt><dd>
							Sets limits on input/output access to and from block devices.
						</dd><dt><span class="term"><code class="literal">memory</code></span></dt><dd>
							Sets limits on memory use by tasks in a control group and generates automatic reports on memory resources used by those tasks.
						</dd><dt><span class="term"><code class="literal">pids</code></span></dt><dd>
							Sets limits for a number of processes and their children in a control group.
						</dd><dt><span class="term"><code class="literal">rdma</code></span></dt><dd>
							Sets limits on Remote Direct Memory Access/InfiniBand specific resources in a control group.
						</dd><dt><span class="term"><code class="literal">cpu</code></span></dt><dd>
							Adjusts the parameters of the Completely Fair Scheduler (CFS) for a control group’s tasks and creates automatic reports on CPU resources used by tasks in a control group.
						</dd><dt><span class="term"><code class="literal">cpuset</code></span></dt><dd>
							Restricts control group tasks to run only on a specified subset of CPUs and to direct the tasks to use memory only on specified memory nodes. Supports only the core functionality (<code class="literal">cpus{,.effective}</code>, <code class="literal">mems{,.effective}</code>) with a new partition feature.
						</dd><dt><span class="term"><code class="literal">perf_event</code></span></dt><dd>
							Groups tasks for monitoring by the <code class="literal">perf</code> performance monitoring and reporting utility. <code class="literal">perf_event</code> is enabled automatically on the v2 hierarchy.
						</dd></dl></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					A resource controller can be used either in a <code class="literal">cgroups-v1</code> hierarchy or a <code class="literal">cgroups-v2</code> hierarchy, not simultaneously in both.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The <code class="literal">cgroups(7)</code> manual page
					</li><li class="listitem">
						Documentation in <code class="literal">/usr/share/doc/kernel-doc-&lt;kernel_version&gt;/Documentation/cgroups-v1/</code> directory (after installing the <code class="literal">kernel-doc</code> package).
					</li></ul></div></section><section class="section" id="what-namespaces-are_setting-limits-for-applications"><div class="titlepage"><div><div><h3 class="title">25.3. Introducing namespaces</h3></div></div></div><p class="_abstract _abstract">
				Namespaces are one of the most important methods for organizing and identifying software objects.
			</p><p>
				A namespace wraps a global system resource (for example, a mount point, a network device, or a hostname) in an abstraction that makes it appear to processes within the namespace that they have their own isolated instance of the global resource. One of the most common technologies that use namespaces are containers.
			</p><p>
				Changes to a particular global resource are visible only to processes in that namespace and do not affect the rest of the system or other namespaces.
			</p><p>
				To inspect which namespaces a process is a member of, you can check the symbolic links in the <code class="literal">/proc/&lt;<span class="emphasis"><em>PID</em></span>&gt;/ns/</code> directory.
			</p><rh-table id="idm139825289964736"><table class="lt-4-cols lt-7-rows"><caption>Table 25.1. Supported namespaces and resources which they isolate:</caption><colgroup><col style="width: 50%; " class="col_1"><!--Empty--><col style="width: 50%; " class="col_2"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm139825289959936" scope="col">Namespace</th><th align="left" valign="top" id="idm139825289958848" scope="col">Isolates</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139825289959936"> <p>
								<span class="strong strong"><strong>Mount</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm139825289958848"> <p>
								Mount points
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825289959936"> <p>
								<span class="strong strong"><strong>UTS</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm139825289958848"> <p>
								Hostname and NIS domain name
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825289959936"> <p>
								<span class="strong strong"><strong>IPC</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm139825289958848"> <p>
								System V IPC, POSIX message queues
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825289959936"> <p>
								<span class="strong strong"><strong>PID</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm139825289958848"> <p>
								Process IDs
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825289959936"> <p>
								<span class="strong strong"><strong>Network</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm139825289958848"> <p>
								Network devices, stacks, ports, etc
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825289959936"> <p>
								<span class="strong strong"><strong>User</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm139825289958848"> <p>
								User and group IDs
							</p>
							 </td></tr><tr><td align="left" valign="top" headers="idm139825289959936"> <p>
								<span class="strong strong"><strong>Control groups</strong></span>
							</p>
							 </td><td align="left" valign="top" headers="idm139825289958848"> <p>
								Control group root directory
							</p>
							 </td></tr></tbody></table></rh-table><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						The <code class="literal">namespaces(7)</code> and <code class="literal">cgroup_namespaces(7)</code> manual pages
					</li></ul></div></section></section><section class="chapter" id="assembly_using-cgroupfs-to-manually-manage-cgroups_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 26. Using cgroupfs to manually manage cgroups</h2></div></div></div><p>
			You can manage <code class="literal">cgroup</code> hierarchies on your system by creating directories on the <code class="literal">cgroupfs</code> virtual file system. The file system is mounted by default on the <code class="literal">/sys/fs/cgroup/</code> directory and you can specify desired configurations in dedicated control files.
		</p><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
				In general, Red Hat recommends you use <code class="literal">systemd</code> for controlling the usage of system resources. You should manually configure the <code class="literal">cgroups</code> virtual file system only in special cases. For example, when you need to use <code class="literal">cgroup-v1</code> controllers that have no equivalents in <code class="literal">cgroup-v2</code> hierarchy.
			</p></div></rh-alert><section class="section" id="proc_creating-cgroups-and-enabling-controllers-in-cgroups-v2-file-system_assembly_using-cgroupfs-to-manually-manage-cgroups"><div class="titlepage"><div><div><h3 class="title">26.1. Creating cgroups and enabling controllers in cgroups-v2 file system</h3></div></div></div><p>
				You can manage the <span class="emphasis"><em>control groups</em></span> (<code class="literal">cgroups</code>) by creating or removing directories and by writing to files in the <code class="literal">cgroups</code> virtual file system. The file system is by default mounted on the <code class="literal">/sys/fs/cgroup/</code> directory. To use settings from the <code class="literal">cgroups</code> controllers, you also need to enable the desired controllers for child <code class="literal">cgroups</code>. The root <code class="literal">cgroup</code> has, by default, enabled the <code class="literal">memory</code> and <code class="literal">pids</code> controllers for its child <code class="literal">cgroups</code>. Therefore, Red Hat recommends to create at least two levels of child <code class="literal">cgroups</code> inside the <code class="literal">/sys/fs/cgroup/</code> root <code class="literal">cgroup</code>. This way you optionally remove the <code class="literal">memory</code> and <code class="literal">pids</code> controllers from the child <code class="literal">cgroups</code> and maintain better organizational clarity of <code class="literal">cgroup</code> files.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have root permissions.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create the <code class="literal">/sys/fs/cgroup/Example/</code> directory:
					</p><pre class="literallayout"># <span class="strong strong"><strong>mkdir /sys/fs/cgroup/Example/</strong></span></pre><p class="simpara">
						The <code class="literal">/sys/fs/cgroup/Example/</code> directory defines a child group. When you create the <code class="literal">/sys/fs/cgroup/Example/</code> directory, some <code class="literal">cgroups-v2</code> interface files are automatically created in the directory. The <code class="literal">/sys/fs/cgroup/Example/</code> directory contains also controller-specific files for the <code class="literal">memory</code> and <code class="literal">pids</code> controllers.
					</p></li><li class="listitem"><p class="simpara">
						Optional: Inspect the newly created child control group:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ll /sys/fs/cgroup/Example/</strong></span>
-r—​r—​r--. 1 root root 0 Jun  1 10:33 cgroup.controllers
-r—​r—​r--. 1 root root 0 Jun  1 10:33 cgroup.events
-rw-r—​r--. 1 root root 0 Jun  1 10:33 cgroup.freeze
-rw-r—​r--. 1 root root 0 Jun  1 10:33 cgroup.procs
…​
-rw-r—​r--. 1 root root 0 Jun  1 10:33 cgroup.subtree_control
-r—​r—​r--. 1 root root 0 Jun  1 10:33 memory.events.local
-rw-r—​r--. 1 root root 0 Jun  1 10:33 memory.high
-rw-r—​r--. 1 root root 0 Jun  1 10:33 memory.low
…​
-r—​r—​r--. 1 root root 0 Jun  1 10:33 pids.current
-r—​r—​r--. 1 root root 0 Jun  1 10:33 pids.events
-rw-r—​r--. 1 root root 0 Jun  1 10:33 pids.max</pre><p class="simpara">
						The example output shows general <code class="literal">cgroup</code> control interface files such as <code class="literal">cgroup.procs</code> or <code class="literal">cgroup.controllers</code>. These files are common to all control groups, regardless of enabled controllers.
					</p><p class="simpara">
						The files such as <code class="literal">memory.high</code> and <code class="literal">pids.max</code> relate to the <code class="literal">memory</code> and <code class="literal">pids</code> controllers, which are in the root control group (<code class="literal">/sys/fs/cgroup/</code>), and are enabled by default by <code class="literal">systemd</code>.
					</p><p class="simpara">
						By default, the newly created child group inherits all settings from the parent <code class="literal">cgroup</code>. In this case, there are no limits from the root <code class="literal">cgroup</code>.
					</p></li><li class="listitem"><p class="simpara">
						Verify that the desired controllers are available in the <code class="literal">/sys/fs/cgroup/cgroup.controllers</code> file:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /sys/fs/cgroup/cgroup.controllers</strong></span>
cpuset cpu io memory hugetlb pids rdma</pre></li><li class="listitem"><p class="simpara">
						Enable the desired controllers. In this example it is <code class="literal">cpu</code> and <code class="literal">cpuset</code> controllers:
					</p><pre class="literallayout"># <span class="strong strong"><strong>echo "+cpu" &gt;&gt; /sys/fs/cgroup/cgroup.subtree_control</strong></span>
# <span class="strong strong"><strong>echo "+cpuset" &gt;&gt; /sys/fs/cgroup/cgroup.subtree_control</strong></span></pre><p class="simpara">
						These commands enable the <code class="literal">cpu</code> and <code class="literal">cpuset</code> controllers for the immediate child groups of the <code class="literal">/sys/fs/cgroup/</code> root control group. Including the newly created <code class="literal">Example</code> control group. A <span class="emphasis"><em>child group</em></span> is where you can specify processes and apply control checks to each of the processes based on your criteria.
					</p><p class="simpara">
						Users can read the contents of the <code class="literal">cgroup.subtree_control</code> file at any level to get an idea of what controllers are going to be available for enablement in the immediate child group.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							By default, the <code class="literal">/sys/fs/cgroup/cgroup.subtree_control</code> file in the root control group contains <code class="literal">memory</code> and <code class="literal">pids</code> controllers.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						Enable the desired controllers for child <code class="literal">cgroups</code> of the <code class="literal">Example</code> control group:
					</p><pre class="literallayout"># <span class="strong strong"><strong>echo "+cpu +cpuset" &gt;&gt; /sys/fs/cgroup/Example/cgroup.subtree_control</strong></span></pre><p class="simpara">
						This command ensures that the immediate child control group will <span class="emphasis"><em>only</em></span> have controllers relevant to regulate the CPU time distribution - not to <code class="literal">memory</code> or <code class="literal">pids</code> controllers.
					</p></li><li class="listitem"><p class="simpara">
						Create the <code class="literal">/sys/fs/cgroup/Example/tasks/</code> directory:
					</p><pre class="literallayout"># <span class="strong strong"><strong>mkdir /sys/fs/cgroup/Example/tasks/</strong></span></pre><p class="simpara">
						The <code class="literal">/sys/fs/cgroup/Example/tasks/</code> directory defines a child group with files that relate purely to <code class="literal">cpu</code> and <code class="literal">cpuset</code> controllers. You can now assign processes to this control group and utilize <code class="literal">cpu</code> and <code class="literal">cpuset</code> controller options for your processes.
					</p></li><li class="listitem"><p class="simpara">
						Optional: Inspect the child control group:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ll /sys/fs/cgroup/Example/tasks</strong></span>
-r—​r—​r--. 1 root root 0 Jun  1 11:45 cgroup.controllers
-r—​r—​r--. 1 root root 0 Jun  1 11:45 cgroup.events
-rw-r—​r--. 1 root root 0 Jun  1 11:45 cgroup.freeze
-rw-r—​r--. 1 root root 0 Jun  1 11:45 cgroup.max.depth
-rw-r—​r--. 1 root root 0 Jun  1 11:45 cgroup.max.descendants
-rw-r—​r--. 1 root root 0 Jun  1 11:45 cgroup.procs
-r—​r—​r--. 1 root root 0 Jun  1 11:45 cgroup.stat
-rw-r—​r--. 1 root root 0 Jun  1 11:45 cgroup.subtree_control
-rw-r—​r--. 1 root root 0 Jun  1 11:45 cgroup.threads
-rw-r—​r--. 1 root root 0 Jun  1 11:45 cgroup.type
-rw-r—​r--. 1 root root 0 Jun  1 11:45 cpu.max
-rw-r—​r--. 1 root root 0 Jun  1 11:45 cpu.pressure
-rw-r—​r--. 1 root root 0 Jun  1 11:45 cpuset.cpus
-r—​r—​r--. 1 root root 0 Jun  1 11:45 cpuset.cpus.effective
-rw-r—​r--. 1 root root 0 Jun  1 11:45 cpuset.cpus.partition
-rw-r—​r--. 1 root root 0 Jun  1 11:45 cpuset.mems
-r—​r—​r--. 1 root root 0 Jun  1 11:45 cpuset.mems.effective
-r—​r—​r--. 1 root root 0 Jun  1 11:45 cpu.stat
-rw-r—​r--. 1 root root 0 Jun  1 11:45 cpu.weight
-rw-r—​r--. 1 root root 0 Jun  1 11:45 cpu.weight.nice
-rw-r—​r--. 1 root root 0 Jun  1 11:45 io.pressure
-rw-r—​r--. 1 root root 0 Jun  1 11:45 memory.pressure</pre></li></ol></div><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
					The <code class="literal">cpu</code> controller is only activated if the relevant child control group has at least 2 processes which compete for time on a single CPU.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Optional: confirm that you have created a new <code class="literal">cgroup</code> with only the desired controllers active:
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>cat /sys/fs/cgroup/Example/tasks/cgroup.controllers</strong></span>
cpuset cpu</pre></li></ul></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#what-kernel-resource-controllers-are_setting-limits-for-applications" title="25.2. Introducing kernel resource controllers">What are kernel resource controllers</a>
					</li><li class="listitem">
						<a class="link" href="#proc_mounting-cgroups-v1_assembly_using-cgroupfs-to-manually-manage-cgroups" title="26.3. Mounting cgroups-v1">Mounting cgroups-v1</a>
					</li><li class="listitem">
						<code class="literal">cgroups(7)</code>, <code class="literal">sysfs(5)</code> manual pages
					</li></ul></div></section><section class="section" id="proc_controlling-distribution-of-cpu-time-for-applications-by-adjusting-cpu-weight_assembly_using-cgroupfs-to-manually-manage-cgroups"><div class="titlepage"><div><div><h3 class="title">26.2. Controlling distribution of CPU time for applications by adjusting CPU weight</h3></div></div></div><p class="_abstract _abstract">
				You need to assign values to the relevant files of the <code class="literal">cpu</code> controller to regulate distribution of the CPU time to applications under the specific cgroup tree.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have root permissions.
					</li><li class="listitem">
						You have applications for which you want to control distribution of CPU time.
					</li><li class="listitem"><p class="simpara">
						You created a two level hierarchy of <span class="emphasis"><em>child control groups</em></span> inside the <code class="literal">/sys/fs/cgroup/</code> <span class="emphasis"><em>root control group</em></span> as in the following example:
					</p><pre class="literallayout">…​
  ├── Example
  │   ├── g1
  │   ├── g2
  │   └── g3
…​</pre></li><li class="listitem">
						You enabled the <code class="literal">cpu</code> controller in the parent control group and in child control groups similarly as described in <a class="link" href="#proc_creating-cgroups-and-enabling-controllers-in-cgroups-v2-file-system_assembly_using-cgroupfs-to-manually-manage-cgroups" title="26.1. Creating cgroups and enabling controllers in cgroups-v2 file system">Creating cgroups and enabling controllers in cgroups-v2 file system</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Configure desired CPU weights to achieve resource restrictions within the control groups:
					</p><pre class="literallayout"># <span class="strong strong"><strong>echo "150" &gt; /sys/fs/cgroup/Example/g1/cpu.weight</strong></span>
# <span class="strong strong"><strong>echo "100" &gt; /sys/fs/cgroup/Example/g2/cpu.weight</strong></span>
# <span class="strong strong"><strong>echo "50" &gt; /sys/fs/cgroup/Example/g3/cpu.weight</strong></span></pre></li><li class="listitem"><p class="simpara">
						Add the applications' PIDs to the <code class="literal">g1</code>, <code class="literal">g2</code>, and <code class="literal">g3</code> child groups:
					</p><pre class="literallayout"># <span class="strong strong"><strong>echo "33373" &gt; /sys/fs/cgroup/Example/g1/cgroup.procs</strong></span>
# <span class="strong strong"><strong>echo "33374" &gt; /sys/fs/cgroup/Example/g2/cgroup.procs</strong></span>
# <span class="strong strong"><strong>echo "33377" &gt; /sys/fs/cgroup/Example/g3/cgroup.procs</strong></span></pre><p class="simpara">
						The example commands ensure that desired applications become members of the <code class="literal">Example/g*/</code> child cgroups and will get their CPU time distributed as per the configuration of those cgroups.
					</p><p class="simpara">
						The weights of the children cgroups (<code class="literal">g1</code>, <code class="literal">g2</code>, <code class="literal">g3</code>) that have running processes are summed up at the level of the parent cgroup (<code class="literal">Example</code>). The CPU resource is then distributed proportionally based on the respective weights.
					</p><p class="simpara">
						As a result, when all processes run at the same time, the kernel allocates to each of them the proportionate CPU time based on their respective cgroup’s <code class="literal">cpu.weight</code> file:
					</p><rh-table><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"><!--Empty--><col style="width: 30%; " class="col_2"><!--Empty--><col style="width: 40%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm139825287248544" scope="col">Child cgroup</th><th align="left" valign="top" id="idm139825287247456" scope="col"><code class="literal">cpu.weight</code> file</th><th align="left" valign="top" id="idm139825287246048" scope="col">CPU time allocation</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139825287248544"> <p>
										g1
									</p>
									 </td><td align="left" valign="top" headers="idm139825287247456"> <p>
										150
									</p>
									 </td><td align="left" valign="top" headers="idm139825287246048"> <p>
										~50% (150/300)
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139825287248544"> <p>
										g2
									</p>
									 </td><td align="left" valign="top" headers="idm139825287247456"> <p>
										100
									</p>
									 </td><td align="left" valign="top" headers="idm139825287246048"> <p>
										~33% (100/300)
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139825287248544"> <p>
										g3
									</p>
									 </td><td align="left" valign="top" headers="idm139825287247456"> <p>
										50
									</p>
									 </td><td align="left" valign="top" headers="idm139825287246048"> <p>
										~16% (50/300)
									</p>
									 </td></tr></tbody></table></rh-table><p class="simpara">
						The value of the <code class="literal">cpu.weight</code> controller file is not a percentage.
					</p><p class="simpara">
						If one process stopped running, leaving cgroup <code class="literal">g2</code> with no running processes, the calculation would omit the cgroup <code class="literal">g2</code> and only account weights of cgroups <code class="literal">g1</code> and <code class="literal">g3</code>:
					</p><rh-table><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 30%; " class="col_1"><!--Empty--><col style="width: 30%; " class="col_2"><!--Empty--><col style="width: 40%; " class="col_3"><!--Empty--></colgroup><thead><tr><th align="left" valign="top" id="idm139825286723872" scope="col">Child cgroup</th><th align="left" valign="top" id="idm139825286722784" scope="col"><code class="literal">cpu.weight</code> file</th><th align="left" valign="top" id="idm139825286721376" scope="col">CPU time allocation</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm139825286723872"> <p>
										g1
									</p>
									 </td><td align="left" valign="top" headers="idm139825286722784"> <p>
										150
									</p>
									 </td><td align="left" valign="top" headers="idm139825286721376"> <p>
										~75% (150/200)
									</p>
									 </td></tr><tr><td align="left" valign="top" headers="idm139825286723872"> <p>
										g3
									</p>
									 </td><td align="left" valign="top" headers="idm139825286722784"> <p>
										50
									</p>
									 </td><td align="left" valign="top" headers="idm139825286721376"> <p>
										~25% (50/200)
									</p>
									 </td></tr></tbody></table></rh-table><rh-alert class="admonition important" state="warning"><div class="admonition_header" slot="header">Important</div><div><p>
							If a child cgroup had multiple running processes, the CPU time allocated to the respective cgroup would be distributed equally to the member processes of that cgroup.
						</p></div></rh-alert></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify that the applications run in the specified control groups:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /proc/33373/cgroup /proc/33374/cgroup /proc/33377/cgroup</strong></span>
0::/Example/g1
0::/Example/g2
0::/Example/g3</pre><p class="simpara">
						The command output shows the processes of the specified applications that run in the <code class="literal">Example/g*/</code> child cgroups.
					</p></li><li class="listitem"><p class="simpara">
						Inspect the current CPU consumption of the throttled applications:
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>top</strong></span>
top - 05:17:18 up 1 day, 18:25,  1 user,  load average: 3.03, 3.03, 3.00
Tasks:  95 total,   4 running,  91 sleeping,   0 stopped,   0 zombie
%Cpu(s): 18.1 us, 81.6 sy,  0.0 ni,  0.0 id,  0.0 wa,  0.3 hi,  0.0 si,  0.0 st
MiB Mem :   3737.0 total,   3233.7 free,    132.8 used,    370.5 buff/cache
MiB Swap:   4060.0 total,   4060.0 free,      0.0 used.   3373.1 avail Mem

    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
  33373 root      20   0   18720   1748   1460 R  <span class="strong strong"><strong>49.5</strong></span>   0.0 415:05.87 sha1sum
  33374 root      20   0   18720   1756   1464 R  <span class="strong strong"><strong>32.9</strong></span>   0.0 412:58.33 sha1sum
  33377 root      20   0   18720   1860   1568 R  <span class="strong strong"><strong>16.3</strong></span>   0.0 411:03.12 sha1sum
    760 root      20   0  416620  28540  15296 S   0.3   0.7   0:10.23 tuned
      1 root      20   0  186328  14108   9484 S   0.0   0.4   0:02.00 systemd
      2 root      20   0       0      0      0 S   0.0   0.0   0:00.01 kthread
...</pre><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							We forced all the example processes to run on a single CPU for clearer illustration. The CPU weight applies the same principles also when used on multiple CPUs.
						</p></div></rh-alert><p class="simpara">
						Notice that the CPU resource for the <code class="literal">PID 33373</code>, <code class="literal">PID 33374</code>, and <code class="literal">PID 33377</code> was allocated based on the weights, 150, 100, 50, you assigned to the respective child cgroups. The weights correspond to around 50%, 33%, and 16% allocation of CPU time for each application.
					</p></li></ol></div></section><section class="section" id="proc_mounting-cgroups-v1_assembly_using-cgroupfs-to-manually-manage-cgroups"><div class="titlepage"><div><div><h3 class="title">26.3. Mounting cgroups-v1</h3></div></div></div><p>
				During the boot process, RHEL 9 mounts the <code class="literal">cgroup-v2</code> virtual filesystem by default. To utilize <code class="literal">cgroup-v1</code> functionality in limiting resources for your applications, manually configure the system.
			</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					Both <code class="literal">cgroup-v1</code> and <code class="literal">cgroup-v2</code> are fully enabled in the kernel. There is no default control group version from the kernel point of view, and is decided by <code class="literal">systemd</code> to mount at startup.
				</p></div></rh-alert><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have root permissions.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Configure the system to mount <code class="literal">cgroups-v1</code> by default during system boot by the <code class="literal">systemd</code> system and service manager:
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>grubby --update-kernel=/boot/vmlinuz-$(uname -r) --args="systemd.unified_cgroup_hierarchy=0 systemd.legacy_systemd_cgroup_controller"</strong></span></pre><p class="simpara">
						This adds the necessary kernel command-line parameters to the current boot entry.
					</p><p class="simpara">
						To add the same parameters to all kernel boot entries:
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>grubby --update-kernel=ALL --args="systemd.unified_cgroup_hierarchy=0 systemd.legacy_systemd_cgroup_controller"</strong></span></pre></li><li class="listitem">
						Reboot the system for the changes to take effect.
					</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify that the <code class="literal">cgroups-v1</code> filesystem was mounted:
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>mount -l | grep cgroup</strong></span>
tmpfs on /sys/fs/cgroup type tmpfs (ro,nosuid,nodev,noexec,seclabel,size=4096k,nr_inodes=1024,mode=755,inode64)
cgroup on /sys/fs/cgroup/systemd type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,xattr,release_agent=/usr/lib/systemd/systemd-cgroups-agent,name=systemd)
cgroup on /sys/fs/cgroup/perf_event type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,perf_event)
cgroup on /sys/fs/cgroup/cpu,cpuacct type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,cpu,cpuacct)
cgroup on /sys/fs/cgroup/pids type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,pids)
cgroup on /sys/fs/cgroup/cpuset type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,cpuset)
cgroup on /sys/fs/cgroup/net_cls,net_prio type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,net_cls,net_prio)
cgroup on /sys/fs/cgroup/hugetlb type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,hugetlb)
cgroup on /sys/fs/cgroup/memory type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,memory)
cgroup on /sys/fs/cgroup/blkio type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,blkio)
cgroup on /sys/fs/cgroup/devices type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,devices)
cgroup on /sys/fs/cgroup/misc type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,misc)
cgroup on /sys/fs/cgroup/freezer type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,freezer)
cgroup on /sys/fs/cgroup/rdma type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,rdma)</pre><p class="simpara">
						The <code class="literal">cgroups-v1</code> filesystems that correspond to various <code class="literal">cgroup-v1</code> controllers, were successfully mounted on the <code class="literal">/sys/fs/cgroup/</code> directory.
					</p></li><li class="listitem"><p class="simpara">
						Inspect the contents of the <code class="literal">/sys/fs/cgroup/</code> directory:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ll /sys/fs/cgroup/</strong></span>
dr-xr-xr-x. 10 root root  0 Mar 16 09:34 blkio
lrwxrwxrwx.  1 root root 11 Mar 16 09:34 cpu → cpu,cpuacct
lrwxrwxrwx.  1 root root 11 Mar 16 09:34 cpuacct → cpu,cpuacct
dr-xr-xr-x. 10 root root  0 Mar 16 09:34 cpu,cpuacct
dr-xr-xr-x.  2 root root  0 Mar 16 09:34 cpuset
dr-xr-xr-x. 10 root root  0 Mar 16 09:34 devices
dr-xr-xr-x.  2 root root  0 Mar 16 09:34 freezer
dr-xr-xr-x.  2 root root  0 Mar 16 09:34 hugetlb
dr-xr-xr-x. 10 root root  0 Mar 16 09:34 memory
dr-xr-xr-x.  2 root root  0 Mar 16 09:34 misc
lrwxrwxrwx.  1 root root 16 Mar 16 09:34 net_cls → net_cls,net_prio
dr-xr-xr-x.  2 root root  0 Mar 16 09:34 net_cls,net_prio
lrwxrwxrwx.  1 root root 16 Mar 16 09:34 net_prio → net_cls,net_prio
dr-xr-xr-x.  2 root root  0 Mar 16 09:34 perf_event
dr-xr-xr-x. 10 root root  0 Mar 16 09:34 pids
dr-xr-xr-x.  2 root root  0 Mar 16 09:34 rdma
dr-xr-xr-x. 11 root root  0 Mar 16 09:34 systemd</pre><p class="simpara">
						The <code class="literal">/sys/fs/cgroup/</code> directory, also called the <span class="emphasis"><em>root control group</em></span>, by default, contains controller-specific directories such as <code class="literal">cpuset</code>. In addition, there are some directories related to <code class="literal">systemd</code>.
					</p></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#what-kernel-resource-controllers-are_setting-limits-for-applications" title="25.2. Introducing kernel resource controllers">What are kernel resource controllers</a>
					</li><li class="listitem">
						<code class="literal">cgroups(7)</code>, <code class="literal">sysfs(5)</code> manual pages
					</li><li class="listitem">
						<a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/9.0_release_notes/index#BZ-1953515">cgroup-v2 enabled by default in RHEL 9</a>
					</li></ul></div></section><section class="section" id="setting-cpu-limits-to-applications-using-cgroups-v1_assembly_using-cgroupfs-to-manually-manage-cgroups"><div class="titlepage"><div><div><h3 class="title">26.4. Setting CPU limits to applications using cgroups-v1</h3></div></div></div><p class="_abstract _abstract">
				To configure CPU limits to an application by using <span class="emphasis"><em>control groups version 1</em></span> (<code class="literal">cgroups-v1</code>), use the <code class="literal">/sys/fs/</code> virtual file system.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have root permissions.
					</li><li class="listitem">
						You have an application whose CPU consumption you want to restrict.
					</li><li class="listitem"><p class="simpara">
						You configured the system to mount <code class="literal">cgroups-v1</code> by default during system boot by the <code class="literal">systemd</code> system and service manager:
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>grubby --update-kernel=/boot/vmlinuz-$(uname -r) --args="systemd.unified_cgroup_hierarchy=0 systemd.legacy_systemd_cgroup_controller"</strong></span></pre><p class="simpara">
						This adds the necessary kernel command-line parameters to the current boot entry.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Identify the process ID (PID) of the application that you want to restrict in CPU consumption:
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>top</strong></span>
top - 11:34:09 up 11 min,  1 user,  load average: 0.51, 0.27, 0.22
Tasks: 267 total,   3 running, 264 sleeping,   0 stopped,   0 zombie
%Cpu(s): 49.0 us,  3.3 sy,  0.0 ni, 47.5 id,  0.0 wa,  0.2 hi,  0.0 si,  0.0 st
MiB Mem :   1826.8 total,    303.4 free,   1046.8 used,    476.5 buff/cache
MiB Swap:   1536.0 total,   1396.0 free,    140.0 used.    616.4 avail Mem

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
 6955 root      20   0  228440   1752   1472 R  <span class="strong strong"><strong>99.3</strong></span>   0.1   0:32.71 sha1sum
 5760 jdoe      20   0 3603868 205188  64196 S   3.7  11.0   0:17.19 gnome-shell
 6448 jdoe      20   0  743648  30640  19488 S   0.7   1.6   0:02.73 gnome-terminal-
    1 root      20   0  245300   6568   4116 S   0.3   0.4   0:01.87 systemd
  505 root      20   0       0      0      0 I   0.3   0.0   0:00.75 kworker/u4:4-events_unbound
...</pre><p class="simpara">
						This example output of the <code class="literal">top</code> program reveals that illustrative application <code class="literal">sha1sum</code> with <code class="literal">PID 6955</code> consumes a lot of CPU resources.
					</p></li><li class="listitem"><p class="simpara">
						Create a sub-directory in the <code class="literal">cpu</code> resource controller directory:
					</p><pre class="literallayout"># <span class="strong strong"><strong>mkdir /sys/fs/cgroup/cpu/Example/</strong></span></pre><p class="simpara">
						This directory represents a control group, where you can place specific processes and apply certain CPU limits to the processes. At the same time, a number of <code class="literal">cgroups-v1</code> interface files and <code class="literal">cpu</code> controller-specific files will be created in the directory.
					</p></li><li class="listitem"><p class="simpara">
						Optional: Inspect the newly created control group:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ll /sys/fs/cgroup/cpu/Example/</strong></span>
-rw-r—​r--. 1 root root 0 Mar 11 11:42 cgroup.clone_children
-rw-r—​r--. 1 root root 0 Mar 11 11:42 cgroup.procs
-r—​r—​r--. 1 root root 0 Mar 11 11:42 cpuacct.stat
-rw-r—​r--. 1 root root 0 Mar 11 11:42 cpuacct.usage
-r—​r—​r--. 1 root root 0 Mar 11 11:42 cpuacct.usage_all
-r—​r—​r--. 1 root root 0 Mar 11 11:42 cpuacct.usage_percpu
-r—​r—​r--. 1 root root 0 Mar 11 11:42 cpuacct.usage_percpu_sys
-r—​r—​r--. 1 root root 0 Mar 11 11:42 cpuacct.usage_percpu_user
-r—​r—​r--. 1 root root 0 Mar 11 11:42 cpuacct.usage_sys
-r—​r—​r--. 1 root root 0 Mar 11 11:42 cpuacct.usage_user
-rw-r—​r--. 1 root root 0 Mar 11 11:42 cpu.cfs_period_us
-rw-r—​r--. 1 root root 0 Mar 11 11:42 cpu.cfs_quota_us
-rw-r—​r--. 1 root root 0 Mar 11 11:42 cpu.rt_period_us
-rw-r—​r--. 1 root root 0 Mar 11 11:42 cpu.rt_runtime_us
-rw-r—​r--. 1 root root 0 Mar 11 11:42 cpu.shares
-r—​r—​r--. 1 root root 0 Mar 11 11:42 cpu.stat
-rw-r—​r--. 1 root root 0 Mar 11 11:42 notify_on_release
-rw-r—​r--. 1 root root 0 Mar 11 11:42 tasks</pre><p class="simpara">
						This example output shows files, such as <code class="literal">cpuacct.usage</code>, <code class="literal">cpu.cfs._period_us</code>, that represent specific configurations and/or limits, which can be set for processes in the <code class="literal">Example</code> control group. Note that the respective file names are prefixed with the name of the control group controller to which they belong.
					</p><p class="simpara">
						By default, the newly created control group inherits access to the system’s entire CPU resources without a limit.
					</p></li><li class="listitem"><p class="simpara">
						Configure CPU limits for the control group:
					</p><pre class="literallayout"># <span class="strong strong"><strong>echo "1000000" &gt; /sys/fs/cgroup/cpu/Example/cpu.cfs_period_us</strong></span>
# <span class="strong strong"><strong>echo "200000" &gt; /sys/fs/cgroup/cpu/Example/cpu.cfs_quota_us</strong></span></pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								The <code class="literal">cpu.cfs_period_us</code> file represents a period of time in microseconds (µs, represented here as "us") for how frequently a control group’s access to CPU resources should be reallocated. The upper limit is 1 000 000 microsecond and the lower limit is 1 000 microseconds.
							</li><li class="listitem"><p class="simpara">
								The <code class="literal">cpu.cfs_quota_us</code> file represents the total amount of time in microseconds for which all processes collectively in a control group can run during one period (as defined by <code class="literal">cpu.cfs_period_us</code>). When processes in a control group, during a single period, use up all the time specified by the quota, they are throttled for the remainder of the period and not allowed to run until the next period. The lower limit is 1 000 microseconds.
							</p><p class="simpara">
								The example commands above set the CPU time limits so that all processes collectively in the <code class="literal">Example</code> control group will be able to run only for 0.2 seconds (defined by <code class="literal">cpu.cfs_quota_us</code>) out of every 1 second (defined by <code class="literal">cpu.cfs_period_us</code>).
							</p></li></ul></div></li><li class="listitem"><p class="simpara">
						Optional: Verify the limits:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /sys/fs/cgroup/cpu/Example/cpu.cfs_period_us /sys/fs/cgroup/cpu/Example/cpu.cfs_quota_us</strong></span>
1000000
200000</pre></li><li class="listitem"><p class="simpara">
						Add the application’s PID to the <code class="literal">Example</code> control group:
					</p><pre class="literallayout"># <span class="strong strong"><strong>echo "6955" &gt; /sys/fs/cgroup/cpu/Example/cgroup.procs</strong></span></pre><p class="simpara">
						This command ensures that a specific application becomes a member of the <code class="literal">Example</code> control group and hence does not exceed the CPU limits configured for the <code class="literal">Example</code> control group. The PID should represent an existing process in the system. The <code class="literal">PID 6955</code> here was assigned to process <code class="literal">sha1sum /dev/zero &amp;</code>, used to illustrate the use case of the <code class="literal">cpu</code> controller.
					</p></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify that the application runs in the specified control group:
					</p><pre class="literallayout"># <span class="strong strong"><strong>cat /proc/6955/cgroup</strong></span>
12:cpuset:/
11:hugetlb:/
10:net_cls,net_prio:/
9:memory:/user.slice/user-1000.slice/user@1000.service
8:devices:/user.slice
7:blkio:/
6:freezer:/
5:rdma:/
4:pids:/user.slice/user-1000.slice/user@1000.service
3:perf_event:/
2:cpu,cpuacct:/Example
1:name=systemd:/user.slice/user-1000.slice/user@1000.service/gnome-terminal-server.service</pre><p class="simpara">
						This example output shows that the process of the desired application runs in the <code class="literal">Example</code> control group, which applies CPU limits to the application’s process.
					</p></li><li class="listitem"><p class="simpara">
						Identify the current CPU consumption of your throttled application:
					</p><pre class="literallayout white-space-pre"># <span class="strong strong"><strong>top</strong></span>
top - 12:28:42 up  1:06,  1 user,  load average: 1.02, 1.02, 1.00
Tasks: 266 total,   6 running, 260 sleeping,   0 stopped,   0 zombie
%Cpu(s): 11.0 us,  1.2 sy,  0.0 ni, 87.5 id,  0.0 wa,  0.2 hi,  0.0 si,  0.2 st
MiB Mem :   1826.8 total,    287.1 free,   1054.4 used,    485.3 buff/cache
MiB Swap:   1536.0 total,   1396.7 free,    139.2 used.    608.3 avail Mem

  PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
 6955 root      20   0  228440   1752   1472 R  <span class="strong strong"><strong>20.6</strong></span>   0.1  47:11.43 sha1sum
 5760 jdoe      20   0 3604956 208832  65316 R   2.3  11.2   0:43.50 gnome-shell
 6448 jdoe      20   0  743836  31736  19488 S   0.7   1.7   0:08.25 gnome-terminal-
  505 root      20   0       0      0      0 I   0.3   0.0   0:03.39 kworker/u4:4-events_unbound
 4217 root      20   0   74192   1612   1320 S   0.3   0.1   0:01.19 spice-vdagentd
...</pre><p class="simpara">
						Note that the CPU consumption of the <code class="literal">PID 6955</code> has decreased from 99% to 20%.
					</p></li></ol></div><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
					The <code class="literal">cgroups-v2</code> counterpart for <code class="literal">cpu.cfs_period_us</code> and <code class="literal">cpu.cfs_quota_us</code> is the <code class="literal">cpu.max</code> file. The <code class="literal">cpu.max</code> file is available through the <code class="literal">cpu</code> controller.
				</p></div></rh-alert><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="#what-kernel-resource-controllers-are_setting-limits-for-applications" title="25.2. Introducing kernel resource controllers">Introducing kernel resource controllers</a>
					</li><li class="listitem">
						<code class="literal">cgroups(7)</code>, <code class="literal">sysfs(5)</code> manual pages
					</li></ul></div></section></section><section class="chapter" id="analyzing-system-performance-with-bpf-compiler_collection_managing-monitoring-and-updating-the-kernel"><div class="titlepage"><div><div><h2 class="title">Chapter 27. Analyzing system performance with BPF Compiler Collection</h2></div></div></div><p class="_abstract _abstract">
			As a system administrator, you can use the BPF Compiler Collection (BCC) library to create tools for analyzing the performance of your Linux operating system and gathering information, which could be difficult to obtain through other interfaces.
		</p><section class="section" id="installing-the-bcc-tools-package_analyzing-system-performance-with-bpf-compiler_collection"><div class="titlepage"><div><div><h3 class="title">27.1. Installing the bcc-tools package</h3></div></div></div><p class="_abstract _abstract">
				Install the <code class="literal">bcc-tools</code> package, which also installs the BPF Compiler Collection (BCC) library as a dependency.
			</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Install <code class="literal">bcc-tools</code>.
					</p><pre class="literallayout"># <span class="strong strong"><strong>dnf install bcc-tools</strong></span></pre><p class="simpara">
						The BCC tools are installed in the <code class="literal">/usr/share/bcc/tools/</code> directory.
					</p></li></ul></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Inspect the installed tools:
					</p><pre class="literallayout"># <span class="strong strong"><strong>ls -l /usr/share/bcc/tools/</strong></span>
...
-rwxr-xr-x. 1 root root  4198 Dec 14 17:53 dcsnoop
-rwxr-xr-x. 1 root root  3931 Dec 14 17:53 dcstat
-rwxr-xr-x. 1 root root 20040 Dec 14 17:53 deadlock_detector
-rw-r--r--. 1 root root  7105 Dec 14 17:53 deadlock_detector.c
drwxr-xr-x. 3 root root  8192 Mar 11 10:28 doc
-rwxr-xr-x. 1 root root  7588 Dec 14 17:53 execsnoop
-rwxr-xr-x. 1 root root  6373 Dec 14 17:53 ext4dist
-rwxr-xr-x. 1 root root 10401 Dec 14 17:53 ext4slower
...</pre><p class="simpara">
						The <code class="literal systemitem">doc</code> directory in the listing above contains documentation for each tool.
					</p></li></ul></div></section><section class="section" id="using-selected-bcc-tools-for-performance-analyses_analyzing-system-performance-with-bpf-compiler_collection"><div class="titlepage"><div><div><h3 class="title">27.2. Using selected bcc-tools for performance analyses</h3></div></div></div><p class="_abstract _abstract">
				Use certain pre-created programs from the BPF Compiler Collection (BCC) library to efficiently and securely analyze the system performance on the per-event basis. The set of pre-created programs in the BCC library can serve as examples for creation of additional programs.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="#installing-the-bcc-tools-package_analyzing-system-performance-with-bpf-compiler_collection" title="27.1. Installing the bcc-tools package">Installed bcc-tools package</a>
					</li><li class="listitem">
						Root permissions
					</li></ul></div><div class="variablelist"><p class="title"><strong>Procedure</strong></p><dl class="variablelist"><dt><span class="term">Using execsnoop to examine the system processes</span></dt><dd><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
									Run the <code class="literal">execsnoop</code> program in one terminal:
								</li></ol></div><pre class="screen"># <span class="strong strong"><strong>/usr/share/bcc/tools/execsnoop</strong></span></pre><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									In another terminal run, for example:
								</p><pre class="screen">$ <span class="strong strong"><strong>ls /usr/share/bcc/tools/doc/</strong></span></pre><p class="simpara">
									The above creates a short-lived process of the <code class="literal">ls</code> command.
								</p></li><li class="listitem"><p class="simpara">
									The terminal running <code class="literal">execsnoop</code> shows the output similar to the following:
								</p><pre class="screen">PCOMM	PID    PPID   RET ARGS
ls   	8382   8287     0 /usr/bin/ls --color=auto /usr/share/bcc/tools/doc/
...</pre><p class="simpara">
									The <code class="literal">execsnoop</code> program prints a line of output for each new process, which consumes system resources. It even detects processes of programs that run very shortly, such as <code class="literal">ls</code>, and most monitoring tools would not register them.
								</p><p class="simpara">
									The <code class="literal">execsnoop</code> output displays the following fields:
								</p></li></ol></div></dd><dt><span class="term">PCOMM</span></dt><dd>
							The parent process name. (<code class="literal">ls</code>)
						</dd><dt><span class="term">PID</span></dt><dd>
							The process ID. (<code class="literal">8382</code>)
						</dd><dt><span class="term">PPID</span></dt><dd>
							The parent process ID. (<code class="literal">8287</code>)
						</dd><dt><span class="term">RET</span></dt><dd>
							The return value of the <code class="literal">exec()</code> system call (<code class="literal">0</code>), which loads program code into new processes.
						</dd><dt><span class="term">ARGS</span></dt><dd>
							The location of the started program with arguments.
						</dd></dl></div><p>
				To see more details, examples, and options for <code class="literal">execsnoop</code>, refer to the <code class="literal">/usr/share/bcc/tools/doc/execsnoop_example.txt</code> file.
			</p><p>
				For more information about <code class="literal">exec()</code>, see <code class="literal">exec(3)</code> manual pages.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Using opensnoop to track what files a command opens</span></dt><dd><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
									Run the <code class="literal">opensnoop</code> program in one terminal:
								</li></ol></div><pre class="screen"># <span class="strong strong"><strong>/usr/share/bcc/tools/opensnoop -n uname</strong></span></pre><p class="simpara">
							The above prints output for files, which are opened only by the process of the <code class="literal">uname</code> command.
						</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									In another terminal, enter:
								</p><pre class="screen">$ <span class="strong strong"><strong>uname</strong></span></pre><p class="simpara">
									The command above opens certain files, which are captured in the next step.
								</p></li><li class="listitem"><p class="simpara">
									The terminal running <code class="literal">opensnoop</code> shows the output similar to the following:
								</p><pre class="screen">PID    COMM 	FD ERR PATH
8596   uname 	3  0   /etc/ld.so.cache
8596   uname 	3  0   /lib64/libc.so.6
8596   uname 	3  0   /usr/lib/locale/locale-archive
...</pre><p class="simpara">
									The <code class="literal">opensnoop</code> program watches the <code class="literal">open()</code> system call across the whole system, and prints a line of output for each file that <code class="literal">uname</code> tried to open along the way.
								</p><p class="simpara">
									The <code class="literal">opensnoop</code> output displays the following fields:
								</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">PID</span></dt><dd>
												The process ID. (<code class="literal">8596</code>)
											</dd><dt><span class="term">COMM</span></dt><dd>
												The process name. (<code class="literal">uname</code>)
											</dd><dt><span class="term">FD</span></dt><dd>
												The file descriptor - a value that <code class="literal">open()</code> returns to refer to the open file. (<code class="literal">3</code>)
											</dd><dt><span class="term">ERR</span></dt><dd>
												Any errors.
											</dd><dt><span class="term">PATH</span></dt><dd>
												The location of files that <code class="literal">open()</code> tried to open.
											</dd></dl></div><p class="simpara">
									If a command tries to read a non-existent file, then the <code class="literal">FD</code> column returns <code class="literal">-1</code> and the <code class="literal">ERR</code> column prints a value corresponding to the relevant error. As a result, <code class="literal">opensnoop</code> can help you identify an application that does not behave properly.
								</p></li></ol></div></dd></dl></div><p>
				To see more details, examples, and options for <code class="literal">opensnoop</code>, refer to the <code class="literal">/usr/share/bcc/tools/doc/opensnoop_example.txt</code> file.
			</p><p>
				For more information about <code class="literal">open()</code>, see <code class="literal">open(2)</code> manual pages.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Using biotop to examine the I/O operations on the disk</span></dt><dd><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
									Run the <code class="literal">biotop</code> program in one terminal:
								</li></ol></div><pre class="screen"># <span class="strong strong"><strong>/usr/share/bcc/tools/biotop 30</strong></span></pre><p class="simpara">
							The command enables you to monitor the top processes, which perform I/O operations on the disk. The argument ensures that the command will produce a 30 second summary.
						</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
								When no argument provided, the output screen by default refreshes every 1 second.
							</p></div></rh-alert><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									In another terminal enter, for example :
								</p><pre class="screen"># <span class="strong strong"><strong>dd if=/dev/vda of=/dev/zero</strong></span></pre><p class="simpara">
									The command above reads the content from the local hard disk device and writes the output to the <code class="literal">/dev/zero</code> file. This step generates certain I/O traffic to illustrate <code class="literal">biotop</code>.
								</p></li><li class="listitem"><p class="simpara">
									The terminal running <code class="literal">biotop</code> shows the output similar to the following:
								</p><pre class="screen">PID    COMM             D MAJ MIN DISK       I/O  Kbytes     AVGms
9568   dd               R 252 0   vda      16294 14440636.0  3.69
48     kswapd0          W 252 0   vda       1763 120696.0    1.65
7571   gnome-shell      R 252 0   vda        834 83612.0     0.33
1891   gnome-shell      R 252 0   vda       1379 19792.0     0.15
7515   Xorg             R 252 0   vda        280  9940.0     0.28
7579   llvmpipe-1       R 252 0   vda        228  6928.0     0.19
9515   gnome-control-c  R 252 0   vda         62  6444.0     0.43
8112   gnome-terminal-  R 252 0   vda         67  2572.0     1.54
7807   gnome-software   R 252 0   vda         31  2336.0     0.73
9578   awk              R 252 0   vda         17  2228.0     0.66
7578   llvmpipe-0       R 252 0   vda        156  2204.0     0.07
9581   pgrep            R 252 0   vda         58  1748.0     0.42
7531   InputThread      R 252 0   vda         30  1200.0     0.48
7504   gdbus            R 252 0   vda          3  1164.0     0.30
1983   llvmpipe-1       R 252 0   vda         39   724.0     0.08
1982   llvmpipe-0       R 252 0   vda         36   652.0     0.06
...</pre><p class="simpara">
									The <code class="literal">biotop</code> output displays the following fields:
								</p></li></ol></div></dd><dt><span class="term">PID</span></dt><dd>
							The process ID. (<code class="literal">9568</code>)
						</dd><dt><span class="term">COMM</span></dt><dd>
							The process name. (<code class="literal">dd</code>)
						</dd><dt><span class="term">DISK</span></dt><dd>
							The disk performing the read operations. (<code class="literal">vda</code>)
						</dd><dt><span class="term">I/O</span></dt><dd>
							The number of read operations performed. (16294)
						</dd><dt><span class="term">Kbytes</span></dt><dd>
							The amount of Kbytes reached by the read operations. (14,440,636)
						</dd><dt><span class="term">AVGms</span></dt><dd>
							The average I/O time of read operations. (3.69)
						</dd></dl></div><p>
				To see more details, examples, and options for <code class="literal">biotop</code>, refer to the <code class="literal">/usr/share/bcc/tools/doc/biotop_example.txt</code> file.
			</p><p>
				For more information about <code class="literal">dd</code>, see <code class="literal">dd(1)</code> manual pages.
			</p><h5 id="using_xfsslower_to_expose_unexpectedly_slow_file_system_operations">Using xfsslower to expose unexpectedly slow file system operations</h5><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Run the <code class="literal">xfsslower</code> program in one terminal:
					</p><pre class="screen"># <span class="strong strong"><strong>/usr/share/bcc/tools/xfsslower 1</strong></span></pre><p class="simpara">
						The command above measures the time the XFS file system spends in performing read, write, open or sync (<code class="literal">fsync</code>) operations. The <code class="literal">1</code> argument ensures that the program shows only the operations that are slower than 1 ms.
					</p><rh-alert class="admonition note" state="info"><div class="admonition_header" slot="header">Note</div><div><p>
							When no arguments provided, <code class="literal">xfsslower</code> by default displays operations slower than 10 ms.
						</p></div></rh-alert></li><li class="listitem"><p class="simpara">
						In another terminal enter, for example, the following:
					</p><pre class="screen">$ <span class="strong strong"><strong>vim text</strong></span></pre><p class="simpara">
						The command above creates a text file in the <code class="literal">vim</code> editor to initiate certain interaction with the XFS file system.
					</p></li><li class="listitem"><p class="simpara">
						The terminal running <code class="literal">xfsslower</code> shows something similar upon saving the file from the previous step:
					</p><pre class="screen">TIME     COMM           PID    T BYTES   OFF_KB   LAT(ms) FILENAME
13:07:14 b'bash'        4754   R 256     0           7.11 b'vim'
13:07:14 b'vim'         4754   R 832     0           4.03 b'libgpm.so.2.1.0'
13:07:14 b'vim'         4754   R 32      20          1.04 b'libgpm.so.2.1.0'
13:07:14 b'vim'         4754   R 1982    0           2.30 b'vimrc'
13:07:14 b'vim'         4754   R 1393    0           2.52 b'getscriptPlugin.vim'
13:07:45 b'vim'         4754   S 0       0           6.71 b'text'
13:07:45 b'pool'        2588   R 16      0           5.58 b'text'
...</pre><p class="simpara">
						Each line above represents an operation in the file system, which took more time than a certain threshold. <code class="literal">xfsslower</code> is good at exposing possible file system problems, which can take form of unexpectedly slow operations.
					</p><p class="simpara">
						The <code class="literal">xfsslower</code> output displays the following fields:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">COMM</span></dt><dd>
									The process name. (<code class="literal">b’bash'</code>)
								</dd><dt><span class="term">T</span></dt><dd><p class="simpara">
									The operation type. (<code class="literal">R</code>)
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="strong strong"><strong>R</strong></span>ead
										</li><li class="listitem">
											<span class="strong strong"><strong>W</strong></span>rite
										</li><li class="listitem">
											<span class="strong strong"><strong>S</strong></span>ync
										</li></ul></div></dd><dt><span class="term">OFF_KB</span></dt><dd>
									The file offset in KB. (0)
								</dd><dt><span class="term">FILENAME</span></dt><dd>
									The file being read, written, or synced.
								</dd></dl></div></li></ol></div><p>
				To see more details, examples, and options for <code class="literal">xfsslower</code>, refer to the <code class="literal">/usr/share/bcc/tools/doc/xfsslower_example.txt</code> file.
			</p><p>
				For more information about <code class="literal">fsync</code>, see <code class="literal">fsync(2)</code> manual pages.
			</p></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm139825285704640"><h2 class="legalnotice">Legal Notice</h2><div class="para">
		Copyright <span class="trademark"><!--Empty--></span>© 2024 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div></body></section><!----></div></article><aside id="layout" class="span-xs-12 span-sm-2 span-md-2 content-format-selectors" aria-label="Select page format" data-v-8589d091><div class="sticky-top page-layout-options" data-v-8589d091><label for="page-format" data-v-8589d091>Format</label><select id="page-format" class="page-format-dropdown" data-v-8589d091><option class="page-type" value="html" data-v-8589d091>Multi-page</option><option selected class="page-type" value="html-single" data-v-8589d091>Single-page</option><option class="page-type" value="pdf" data-v-8589d091>View full doc as PDF</option></select></div><!----></aside></div><div class="btn-container hidden" data-v-8589d091><pf-button class="top-scroll-btn" icon="angle-up" icon-set="fas" icon-position="right" data-v-8589d091>Back to top</pf-button></div><!--]--><!--]--></main><rh-footer data-analytics-region="page-footer" data-v-97dd2752><a slot="logo" href="/en" data-analytics-category="Footer" data-analytics-text="Logo" data-v-97dd2752><img alt="Red Hat logo" src="/Logo-Red_Hat-Documentation-A-Reverse-RGB.svg" loading="lazy" width="222" height="40" data-v-97dd2752></a><rh-footer-social-link slot="social-links" icon="github" data-v-97dd2752><a href="https://github.com/redhat-documentation" data-analytics-region="social-links-exit" data-analytics-category="Footer|social-links" data-analytics-text="LinkedIn" data-v-97dd2752>Github</a></rh-footer-social-link><rh-footer-social-link slot="social-links" icon="reddit" data-v-97dd2752><a href="https://www.reddit.com/r/redhat/" data-analytics-region="social-links-exit" data-analytics-category="Footer|social-links" data-analytics-text="YouTube" data-v-97dd2752>Reddit</a></rh-footer-social-link><rh-footer-social-link slot="social-links" icon="youtube" data-v-97dd2752><a href="https://www.youtube.com/@redhat" data-analytics-region="social-links-exit" data-analytics-category="Footer|social-links" data-analytics-text="Facebook" data-v-97dd2752>Youtube</a></rh-footer-social-link><rh-footer-social-link slot="social-links" icon="twitter" data-v-97dd2752><a href="https://twitter.com/RedHat" data-analytics-region="social-links-exit" data-analytics-category="Footer|social-links" data-analytics-text="Twitter" data-v-97dd2752>Twitter</a></rh-footer-social-link><h3 slot="links" data-analytics-text="Learn" data-v-97dd2752>Learn</h3><ul slot="links" data-v-97dd2752><li data-v-97dd2752><a href="https://developers.redhat.com/learn" data-analytics-category="Footer|Learn" data-analytics-text="Developer resources" data-v-97dd2752>Developer resources</a></li><li data-v-97dd2752><a href="https://cloud.redhat.com/learn" data-analytics-category="Footer|Learn" data-analytics-text="Cloud learning hub" data-v-97dd2752>Cloud learning hub</a></li><li data-v-97dd2752><a href="https://www.redhat.com/en/interactive-labs" data-analytics-category="Footer|Learn" data-analytics-text="Interactive labs" data-v-97dd2752>Interactive labs</a></li><li data-v-97dd2752><a href="https://www.redhat.com/services/training-and-certification" data-analytics-category="Footer|Learn" data-analytics-text="Training and certification" data-v-97dd2752>Training and certification</a></li><li data-v-97dd2752><a href="https://access.redhat.com/support" data-analytics-category="Footer|Learn" data-analytics-text="Customer support" data-v-97dd2752>Customer support</a></li><li data-v-97dd2752><a href="/products" data-analytics-category="Footer|Learn" data-analytics-text="See all documentation" data-v-97dd2752>See all documentation</a></li></ul><h3 slot="links" data-analytics-text="Try buy sell" data-v-97dd2752>Try, buy, &amp; sell</h3><ul slot="links" data-v-97dd2752><li data-v-97dd2752><a href="https://redhat.com/en/products/trials" data-analytics-category="Footer|Try buy sell" data-analytics-text="Product trial center" data-v-97dd2752>Product trial center</a></li><li data-v-97dd2752><a href="https://marketplace.redhat.com" data-analytics-category="Footer|Try buy sell" data-analytics-text="Red Hat Marketplace" data-v-97dd2752>Red Hat Marketplace</a></li><li data-v-97dd2752><a href="https://catalog.redhat.com/" data-analytics-category="Footer|Try buy sell" data-analytics-text="Red Hat Ecosystem Catalog" data-v-97dd2752>Red Hat Ecosystem Catalog</a></li><li data-v-97dd2752><a href="https://www.redhat.com/en/store" data-analytics-category="Footer|Try buy sell" data-analytics-text="Red Hat Store" data-v-97dd2752>Red Hat Store</a></li><li data-v-97dd2752><a href="https://www.redhat.com/about/japan-buy" data-analytics-category="Footer|Try buy sell" data-analytics-text="Buy online (Japan)" data-v-97dd2752>Buy online (Japan)</a></li></ul><h3 slot="links" data-analytics-text="Communities" data-v-97dd2752>Communities</h3><ul slot="links" data-v-97dd2752><li data-v-97dd2752><a href="https://access.redhat.com/community" data-analytics-category="Footer|Communities" data-analytics-text="Customer Portal Community" data-v-97dd2752>Customer Portal Community</a></li><li data-v-97dd2752><a href="https://www.redhat.com/events" data-analytics-category="Footer|Communities" data-analytics-text="Events" data-v-97dd2752>Events</a></li><li data-v-97dd2752><a href="https://www.redhat.com/about/our-community-contributions" data-analytics-category="Footer|Communities" data-analytics-text="How we contribute" data-v-97dd2752>How we contribute</a></li></ul><rh-footer-block slot="main-secondary" data-v-97dd2752><h3 slot="header" data-analytics-text="About Red Hat Documentation" data-v-97dd2752>About Red Hat Documentation</h3><p data-v-97dd2752>We help Red Hat users innovate and achieve their goals with our products and services with content they can trust.</p></rh-footer-block><rh-footer-block slot="main-secondary" data-v-97dd2752><h3 slot="header" data-analytics-text="Making open source more inclusive" data-v-97dd2752>Making open source more inclusive</h3><p data-v-97dd2752>Red Hat is committed to replacing problematic language in our code, documentation, and web properties. For more details, see the <a href=" https://www.redhat.com/en/blog/making-open-source-more-inclusive-eradicating-problematic-language" data-analytics-category="Footer|Making open source more inclusive" data-analytics-text="Red Hat Blog" data-v-97dd2752>Red Hat Blog</a>.</p></rh-footer-block><rh-footer-block slot="main-secondary" data-v-97dd2752><h3 slot="header" data-analytics-text="About Red Hat" data-v-97dd2752>About Red Hat</h3><p data-v-97dd2752>We deliver hardened solutions that make it easier for enterprises to work across platforms and environments, from the core datacenter to the network edge.</p></rh-footer-block><rh-footer-universal slot="universal" data-v-97dd2752><h3 slot="links-primary" data-analytics-text="Red Hat legal and privacy links" hidden data-v-97dd2752>Red Hat legal and privacy links</h3><ul slot="links-primary" data-analytics-region="page-footer-bottom-primary" data-v-97dd2752><li data-v-97dd2752><a href="https://redhat.com/en/about/company" data-analytics-category="Footer|Corporate" data-analytics-text="About Red Hat" data-v-97dd2752>About Red Hat</a></li><li data-v-97dd2752><a href="https://redhat.com/en/jobs" data-analytics-category="Footer|Corporate" data-analytics-text="Jobs" data-v-97dd2752>Jobs</a></li><li data-v-97dd2752><a href="https://redhat.com/en/events" data-analytics-category="Footer|Corporate" data-analytics-text="Events" data-v-97dd2752>Events</a></li><li data-v-97dd2752><a href="https://redhat.com/en/about/office-locations" data-analytics-category="Footer|Corporate" data-analytics-text="Locations" data-v-97dd2752>Locations</a></li><li data-v-97dd2752><a href="https://redhat.com/en/contact" data-analytics-category="Footer|Corporate" data-analytics-text="Contact Red Hat" data-v-97dd2752>Contact Red Hat</a></li><li data-v-97dd2752><a href="https://redhat.com/en/blog" data-analytics-category="Footer|Corporate" data-analytics-text="Red Hat Blog" data-v-97dd2752>Red Hat Blog</a></li><li data-v-97dd2752><a href="https://redhat.com/en/about/our-culture/diversity-equity-inclusion" data-analytics-category="Footer|Corporate" data-analytics-text="Diversity equity and inclusion" data-v-97dd2752>Diversity, equity, and inclusion</a></li><li data-v-97dd2752><a href="https://coolstuff.redhat.com/" data-analytics-category="Footer|Corporate" data-analytics-text="Cool Stuff Store" data-v-97dd2752>Cool Stuff Store</a></li><li data-v-97dd2752><a href="https://www.redhat.com/en/summit" data-analytics-category="Footer|Corporate" data-analytics-text="Red Hat Summit" data-v-97dd2752>Red Hat Summit</a></li></ul><span data-v-97dd2752 data-v-5f538988></span><rh-footer-copyright slot="links-secondary" data-v-97dd2752>© 2024 Red Hat, Inc.</rh-footer-copyright><h3 slot="links-secondary" data-analytics-text="Red Hat legal and privacy links" hidden data-v-97dd2752>Red Hat legal and privacy links</h3><ul slot="links-secondary" data-analytics-region="page-footer-bottom-secondary" data-v-97dd2752><li data-v-97dd2752><a href="https://redhat.com/en/about/privacy-policy" data-analytics-category="Footer|Red Hat legal and privacy links" data-analytics-text="Privacy statement" data-v-97dd2752>Privacy statement</a></li><li data-v-97dd2752><a href="https://redhat.com/en/about/terms-use" data-analytics-category="Footer|Red Hat legal and privacy links" data-analytics-text="Terms of use" data-v-97dd2752>Terms of use</a></li><li data-v-97dd2752><a href="https://redhat.com/en/about/all-policies-guidelines" data-analytics-category="Footer|Red Hat legal and privacy links" data-analytics-text="All policies and guidelines" data-v-97dd2752>All policies and guidelines</a></li><li data-v-97dd2752><a href="https://redhat.com/en/about/digital-accessibility" data-analytics-category="Footer|Red Hat legal and privacy links" data-analytics-text="Digital accessibility" class="active" data-v-97dd2752>Digital accessibility</a></li><li data-v-97dd2752><span id="teconsent" data-v-97dd2752></span></li></ul></rh-footer-universal></rh-footer><div id="consent_blackbar" style="position:fixed;bottom:0;width:100%;z-index:5;padding:10px;"></div><!--]--><!--]--></div><div id="teleports"></div><script type="application/json" id="__NUXT_DATA__" data-ssr="true">[["ShallowReactive",1],{"data":2,"state":925,"once":929,"_errors":930,"serverRendered":15,"path":932},["ShallowReactive",3],{"s8LoCEfG4A":4,"uUstF4AIyn":10,"Pn02PlJOas":853,"rFVLKcOK8e":924},[5,6,7,8,9],"fr-fr","zh-cn","ko-kr","en-us","ja-jp",{"name":11,"html":12,"type":-1,"toc":13,"breadcrumbs":757,"error":18,"title":765,"productName":759,"productVersions":774,"pagination":803,"redirect":834,"canonicalLinks":835,"openShiftProducts":837,"tocFromVolume":-1,"jumpLinks":852},"Managing, monitoring, and updating the kernel","\u003Cbody>\u003Cdiv xml:lang=\"en-US\" class=\"book\" id=\"idm139825298919472\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv class=\"producttitle\">\u003Cspan class=\"productname\">Red Hat Enterprise Linux\u003C/span> \u003Cspan class=\"productnumber\">9\u003C/span>\u003C/div>\u003Cdiv>\u003Ch3 class=\"subtitle\">A guide to managing the Linux kernel on Red Hat Enterprise Linux 9\u003C/h3>\u003C/div>\u003Cdiv>\u003Cdiv xml:lang=\"en-US\" class=\"authorgroup\">\u003Cspan class=\"orgname\">Red Hat\u003C/span> \u003Cspan class=\"orgdiv\">Customer Content Services\u003C/span>\u003C/div>\u003C/div>\u003Cdiv>\u003Ca href=\"#idm139825285704640\">Legal Notice\u003C/a>\u003C/div>\u003Cdiv>\u003Cdiv class=\"abstract\">\u003Cp class=\"title\">\u003Cstrong>Abstract\u003C/strong>\u003C/p>\u003Cdiv class=\"para\">\n\t\t\t\tAs a system administrator, you can configure the Linux kernel to optimize the operating system. Changes to the Linux kernel can improve system performance, security, and stability, as well as your ability to audit the system and troubleshoot problems.\n\t\t\t\u003C/div>\u003C/div>\u003C/div>\u003C/div>\u003Chr/>\u003C/div>\u003Csection class=\"preface\" id=\"proc_providing-feedback-on-red-hat-documentation_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Providing feedback on Red Hat documentation\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tWe appreciate your feedback on our documentation. Let us know how we can improve it.\n\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Submitting feedback through Jira (account required)\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\tLog in to the \u003Ca class=\"link\" href=\"https://issues.redhat.com/projects/RHELDOCS/issues\">Jira\u003C/a> website.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Create\u003C/strong>\u003C/span> in the top navigation bar\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tEnter a descriptive title in the \u003Cspan class=\"strong strong\">\u003Cstrong>Summary\u003C/strong>\u003C/span> field.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tEnter your suggestion for improvement in the \u003Cspan class=\"strong strong\">\u003Cstrong>Description\u003C/strong>\u003C/span> field. Include links to the relevant parts of the documentation.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Create\u003C/strong>\u003C/span> at the bottom of the dialogue.\n\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_the-linux-kernel_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 1. The Linux kernel\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tLearn about the Linux kernel and the Linux kernel RPM package provided and maintained by Red Hat (Red Hat kernel). Keep the Red Hat kernel updated, which ensures the operating system has all the latest bug fixes, performance enhancements, and patches, and is compatible with new hardware.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"what-the-kernel-is_assembly_the-linux-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.1. What the kernel is\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe kernel is a core part of a Linux operating system that manages the system resources and provides interface between hardware and software applications.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe Red Hat kernel is a custom-built kernel based on the upstream Linux mainline kernel that Red Hat engineers further develop and harden with a focus on stability and compatibility with the latest technologies and hardware.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tBefore Red Hat releases a new kernel version, the kernel needs to pass a set of rigorous quality assurance tests.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe Red Hat kernels are packaged in the RPM format so that they are easily upgraded and verified by the \u003Cspan class=\"strong strong\">\u003Cstrong>\u003Cspan class=\"application application\">DNF\u003C/span>\u003C/strong>\u003C/span> package manager.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tKernels that have not been compiled by Red Hat are \u003Cspan class=\"strong strong\">\u003Cstrong>not\u003C/strong>\u003C/span> supported by Red Hat.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"con_rpm-packages_assembly_the-linux-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.2. RPM packages\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tAn RPM package consists of an archive of files and metadata used to install and erase these files. Specifically, the RPM package contains the following parts:\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">GPG signature\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tThe GPG signature is used to verify the integrity of the package.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Header (package metadata)\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tThe RPM package manager uses this metadata to determine package dependencies, where to install files, and other information.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Payload\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tThe payload is a \u003Ccode class=\"literal\">cpio\u003C/code> archive that contains files to install to the system.\n\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cp>\n\t\t\t\tThere are two types of RPM packages. Both types share the file format and tooling, but have different contents and serve different purposes:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSource RPM (SRPM)\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAn SRPM contains source code and a \u003Ccode class=\"literal\">spec\u003C/code> file, which describes how to build the source code into a binary RPM. Optionally, the SRPM can contain patches to source code.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tBinary RPM\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA binary RPM contains the binaries built from the sources and patches.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"the-linux-kernel-rpm-package-overview_assembly_the-linux-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.3. The Linux kernel RPM package overview\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">kernel\u003C/code> RPM is a meta package that does not contain any files, but rather ensures that the following required sub-packages are properly installed:\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal package\">kernel-core\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tContains the binary image of the Linux kernel (\u003Ccode class=\"literal\">vmlinuz\u003C/code>).\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal package\">kernel-modules-core\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tContains the basic kernel modules to ensure core functionality. This includes the modules essential for the proper functioning of the most commonly used hardware.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal package\">kernel-modules\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tContains the remaining kernel modules that are not present in \u003Ccode class=\"literal\">kernel-core\u003C/code>.\n\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">kernel-core\u003C/code> and \u003Ccode class=\"literal\">kernel-modules-core\u003C/code> sub-packages together can be used in virtualized and cloud environments to provide a RHEL 9 kernel with a quick boot time and a small disk size footprint. \u003Ccode class=\"literal\">kernel-modules\u003C/code> sub-package is usually unnecessary for such deployments.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tOptional kernel packages are for example:\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal package\">kernel-modules-extra\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tContains kernel modules for rare hardware. Loading of the module is disabled by default.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal package\">kernel-debug\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tContains a kernel with many debugging options enabled for kernel diagnosis, at the expense of reduced performance.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal package\">kernel-tools\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tContains tools for manipulating the Linux kernel and supporting documentation.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal package\">kernel-devel\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tContains the kernel headers and makefiles that are sufficient to build modules against the \u003Ccode class=\"literal package\">kernel\u003C/code> package.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal package\">kernel-abi-stablelists\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tContains information pertaining to the RHEL kernel ABI, including a list of kernel symbols required by external Linux kernel modules and a \u003Ccode class=\"literal package\">dnf\u003C/code> plug-in to aid enforcement.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal package\">kernel-headers\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tIncludes the C header files that specify the interface between the Linux kernel and user-space libraries and programs. The header files define structures and constants required for building most standard programs.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal package\">kernel-uki-virt\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tContains the Unified Kernel Image (UKI) of the RHEL kernel.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tUKI combines the Linux kernel, \u003Ccode class=\"literal\">initramfs\u003C/code>, and the kernel command line into a single signed binary which can be booted directly from the UEFI firmware.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-uki-virt\u003C/code> contains the required kernel modules to run in virtualized and cloud environments and can be used instead of the \u003Ccode class=\"literal\">kernel-core\u003C/code> sub-package.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>\u003Cspan class=\"citetitle citetitle\">\u003Ca class=\"link\" href=\"https://access.redhat.com/articles/3739611\">What are the kernel-core, kernel-modules, and kernel-modules-extras packages?\u003C/a>\u003C/span>\u003C/em>\u003C/span>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"displaying-contents-of-the-kernel-package_assembly_the-linux-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.4. Displaying contents of a kernel package\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBy querying the repository, you can see if a kernel package provides a specific file, such as a module. It is not necessary to download or install the package to display the file list.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tUse the \u003Ccode class=\"literal\">dnf\u003C/code> utility to query the file list, for example, of the \u003Ccode class=\"literal\">kernel-core\u003C/code>, \u003Ccode class=\"literal\">kernel-modules-core\u003C/code>, or \u003Ccode class=\"literal\">kernel-modules\u003C/code> package. Note that the \u003Ccode class=\"literal\">kernel\u003C/code> package is a meta package that does not contain any files.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tList the available versions of a package:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>dnf repoquery \u003Cspan class=\"emphasis\">\u003Cem>&lt;package_name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the list of files in a package:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>dnf repoquery -l \u003Cspan class=\"emphasis\">\u003Cem>&lt;package_name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/packaging_and_distributing_software/index\">Packaging and distributing software\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"installing-the-kernel_assembly_the-linux-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.5. Installing specific kernel versions\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tInstall new kernels using the \u003Cspan class=\"strong strong\">\u003Cstrong>\u003Cspan class=\"application application\">dnf\u003C/span>\u003C/strong>\u003C/span> package manager.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo install a specific kernel version, enter the following command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install kernel-\u003Cspan class=\"emphasis\">\u003Cem>{version}\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>\u003Cspan class=\"citetitle citetitle\">\u003Ca class=\"link\" href=\"https://access.redhat.com/labs/rhcb/\">Red Hat Code Browser\u003C/a>\u003C/span>\u003C/em>\u003C/span>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>\u003Cspan class=\"citetitle citetitle\">\u003Ca class=\"link\" href=\"https://access.redhat.com/articles/3078\">Red Hat Enterprise Linux Release Dates \u003C/a>\u003C/span>\u003C/em>\u003C/span>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"updating-the-kernel_assembly_the-linux-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.6. Updating the kernel\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tUpdate the kernel using the \u003Cspan class=\"strong strong\">\u003Cstrong>\u003Cspan class=\"application application\">dnf\u003C/span>\u003C/strong>\u003C/span> package manager.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo update the kernel, enter the following command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf update kernel\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis command updates the kernel along with all dependencies to the latest available version.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tReboot your system for the changes to take effect.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_software_with_the_dnf_tool/con_software-management-tools-in-red-hat-enterprise-linux-9_managing-software-with-the-dnf-tool\">package manager\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">dnf(8)\u003C/code> manual page\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"setting-a-kernel-as-default_assembly_the-linux-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">1.7. Setting a kernel as default\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tSet a specific kernel as default using the \u003Ccode class=\"literal\">grubby\u003C/code> command-line tool and GRUB.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSetting the kernel as default, using the \u003Ccode class=\"literal\">grubby\u003C/code> tool\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tEnter the following command to set the kernel as default using the \u003Ccode class=\"literal\">grubby\u003C/code> tool:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --set-default $kernel_path\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe command uses a machine ID without the \u003Ccode class=\"literal\">.conf\u003C/code> suffix as an argument.\n\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tThe machine ID is located in the \u003Ccode class=\"literal\">/boot/loader/entries/\u003C/code> directory.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSetting the kernel as default, using the \u003Ccode class=\"literal\">id\u003C/code> argument\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tList the boot entries using the \u003Ccode class=\"literal\">id\u003C/code> argument and then set an intended kernel as default:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --info ALL | grep id\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --set-default /boot/vmlinuz-&lt;version&gt;.&lt;architecture&gt;\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tTo list the boot entries using the \u003Ccode class=\"literal\">title\u003C/code> argument, execute the \u003Ccode class=\"literal\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --info=ALL | grep title\u003C/strong>\u003C/span>\u003C/code> command.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSetting the default kernel for only the next boot\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tExecute the following command to set the default kernel for only the next reboot using the \u003Ccode class=\"literal\">grub2-reboot\u003C/code> command:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grub2-reboot &lt;index|title|id&gt;\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tSet the default kernel for only the next boot with care. Installing new kernel RPM’s, self-built kernels, and manually adding the entries to the \u003Ccode class=\"literal\">/boot/loader/entries/\u003C/code> directory may change the index values.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"what-is-kernel-64k_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 2. The 64k page size kernel\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\u003Ccode class=\"literal\">kernel-64k\u003C/code> is an additional, optional 64-bit ARM architecture kernel package that supports 64k pages. This additional kernel exists alongside the RHEL 9 for ARM kernel which supports 4k pages.\n\t\t\u003C/p>\u003Cp>\n\t\t\tOptimal system performance directly relates to different memory configuration requirements. These requirements are addressed by the two variants of kernel, each suitable for different workloads. RHEL 9 on 64-bit ARM hardware thus offers two MMU page sizes:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t4k pages kernel for efficient memory usage in smaller environments,\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ccode class=\"literal\">kernel-64k\u003C/code> for workloads with large, contiguous memory working sets.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tThe 4k pages kernel and \u003Ccode class=\"literal\">kernel-64k\u003C/code> do not differ in the user experience as the user space is the same. You can choose the variant that addresses your situation the best.\n\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">4k pages kernel\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse 4k pages for more efficient memory usage in smaller environments, such as those in Edge and lower-cost, small cloud instances. In these environments, increasing the physical system memory amounts is not practical due to space, power, and cost constraints. Also, not all 64-bit ARM architecture processors support a 64k page size.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe 4k pages kernel supports graphical installation using Anaconda, system or cloud image-based installations, as well as advanced installations using Kickstart.\n\t\t\t\t\t\u003C/p>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">kernel-64k\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe 64k page size kernel is a useful option for large datasets on ARM platforms. \u003Ccode class=\"literal\">kernel-64k\u003C/code> is suitable for memory-intensive workloads as it has significant gains in overall system performance, namely in large database, HPC, and high network performance.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou must choose page size on 64-bit ARM architecture systems at the time of installation. You can install \u003Ccode class=\"literal\">kernel-64k\u003C/code> only by Kickstart by adding the \u003Ccode class=\"literal\">kernel-64k\u003C/code> package to the package list in the \u003Ccode class=\"literal\">Kickstart\u003C/code> file.\n\t\t\t\t\t\u003C/p>\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html-single/automatically_installing_rhel/index#installing-kernel-64k-on-arm-using-the-command-line_rhel-installer\">Installing Kernel-64k on ARM\u003C/a>\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"chapter\" id=\"managing-kernel-modules_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 3. Managing kernel modules\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tLearn about kernel modules, how to display their information, and how to perform basic administrative tasks with kernel modules.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"introduction-to-kernel-modules_managing-kernel-modules\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.1. Introduction to kernel modules\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe Red Hat Enterprise Linux kernel can be extended with optional, additional pieces of functionality, called kernel modules, without having to reboot the system. On Red Hat Enterprise Linux 9, kernel modules are extra kernel code which is built into compressed \u003Ccode class=\"literal file\">&lt;KERNEL_MODULE_NAME&gt;.ko.xz\u003C/code> object files.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe most common functionality enabled by kernel modules are:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tDevice driver which adds support for new hardware\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSupport for a file system such as GFS2 or NFS\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSystem calls\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tOn modern systems, kernel modules are automatically loaded when needed. However, in some cases it is necessary to load or unload modules manually.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tLike the kernel itself, the modules can take parameters that customize their behavior if needed.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTooling is provided to inspect which modules are currently running, which modules are available to load into the kernel and which parameters a module accepts. The tooling also provides a mechanism to load and unload kernel modules into the running kernel.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"kernel-module-dependencies_managing-kernel-modules\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.2. Kernel module dependencies\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tCertain kernel modules sometimes depend on one or more other kernel modules. The \u003Ccode class=\"literal file\">/lib/modules/&lt;KERNEL_VERSION&gt;/modules.dep\u003C/code> file contains a complete list of kernel module dependencies for the respective kernel version.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>\u003Ccode class=\"literal\">depmod\u003C/code>\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tThe dependency file is generated by the \u003Ccode class=\"literal utility\">depmod\u003C/code> program, which is a part of the \u003Ccode class=\"literal package\">kmod\u003C/code> package. Many of the utilities provided by \u003Ccode class=\"literal package\">kmod\u003C/code> take module dependencies into account when performing operations so that \u003Cspan class=\"strong strong\">\u003Cstrong>manual\u003C/strong>\u003C/span> dependency-tracking is rarely necessary.\n\t\t\t\t\u003C/p>\u003C/div>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe code of kernel modules is executed in kernel-space in the unrestricted mode. Because of this, you should be mindful of what modules you are loading.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>\u003Ccode class=\"literal\">weak-modules\u003C/code>\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tIn addition to \u003Ccode class=\"literal utility\">depmod\u003C/code>, Red Hat Enterprise Linux provides the \u003Ccode class=\"literal\">weak-modules\u003C/code> script shipped also with the \u003Ccode class=\"literal package\">kmod\u003C/code> package. \u003Ccode class=\"literal\">weak-modules\u003C/code> determines which modules are kABI-compatible with installed kernels. While checking modules kernel compatibility, \u003Ccode class=\"literal\">weak-modules\u003C/code> processes modules symbol dependencies from higher to lower release of kernel for which they were built. This means that \u003Ccode class=\"literal\">weak-modules\u003C/code> processes each module independently of kernel release they were built against.\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">modules.dep(5)\u003C/code> manual page\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">depmod(8)\u003C/code> manual page\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/articles/9749\">What is the purpose of weak-modules script shipped with Red Hat Enterprise Linux?\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/444773\">What is Kernel Application Binary Interface (kABI)?\u003C/a> (Red Hat Knowledgebase)\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"listing-installed-kernel-modules_managing-kernel-modules\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.3. Listing installed kernel modules\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">grubby --info=ALL\u003C/code> command displays an indexed list of installed kernels on \u003Ccode class=\"literal\">!BLS\u003C/code> and \u003Ccode class=\"literal\">BLS\u003C/code> installs.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tList the installed kernels using the following command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --info=ALL | grep title\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe list of all installed kernels is displayed as follows:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout white-space-pre\">title=\"Red Hat Enterprise Linux (5.14.0-1.el9.x86_64) 9.0 (Plow)\"\ntitle=\"Red Hat Enterprise Linux (0-rescue-0d772916a9724907a5d1350bcd39ac92) 9.0 (Plow)\"\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThe above example displays the installed kernels list of grubby-8.40-17, from the GRUB menu.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"listing-currently-loaded-kernel-modules_managing-kernel-modules\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.4. Listing currently loaded kernel modules\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tView the currently loaded kernel modules.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal package\">kmod\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo list all currently loaded kernel modules, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>lsmod\u003C/strong>\u003C/span>\n\nModule                  Size  Used by\nfuse                  126976  3\nuinput                 20480  1\nxt_CHECKSUM            16384  1\nipt_MASQUERADE         16384  1\nxt_conntrack           16384  1\nipt_REJECT             16384  1\nnft_counter            16384  16\nnf_nat_tftp            16384  0\nnf_conntrack_tftp      16384  1 nf_nat_tftp\ntun                    49152  1\nbridge                192512  0\nstp                    16384  1 bridge\nllc                    16384  2 bridge,stp\nnf_tables_set          32768  5\nnft_fib_inet           16384  1\n…​\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the example above:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">Module\u003C/code> column provides the \u003Cspan class=\"strong strong\">\u003Cstrong>names\u003C/strong>\u003C/span> of currently loaded modules.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">Size\u003C/code> column displays the amount of \u003Cspan class=\"strong strong\">\u003Cstrong>memory\u003C/strong>\u003C/span> per module in kilobytes.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">Used by\u003C/code> column shows the number, and optionally the names of modules that are \u003Cspan class=\"strong strong\">\u003Cstrong>dependent\u003C/strong>\u003C/span> on a particular module.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">/usr/share/doc/kmod/README\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">lsmod(8)\u003C/code> manual page\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"displaying-information-about-kernel-modules_managing-kernel-modules\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.5. Displaying information about kernel modules\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tUse the \u003Ccode class=\"literal command\">modinfo\u003C/code> command to display some detailed information about the specified kernel module.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal package\">kmod\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display information about any kernel module, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>modinfo &lt;\u003Cspan class=\"emphasis\">\u003Cem>KERNEL_MODULE_NAME\u003C/em>\u003C/span>&gt;\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>modinfo virtio_net\u003C/strong>\u003C/span>\n\nfilename:       /lib/modules/5.14.0-1.el9.x86_64/kernel/drivers/net/virtio_net.ko.xz\nlicense:        GPL\ndescription:    Virtio network driver\nrhelversion:    9.0\nsrcversion:     8809CDDBE7202A1B00B9F1C\nalias:          virtio:d00000001v*\ndepends:        net_failover\nretpoline:      Y\nintree:         Y\nname:           virtio_net\nvermagic:       5.14.0-1.el9.x86_64 SMP mod_unload modversions\n…​\nparm:           napi_weight:int\nparm:           csum:bool\nparm:           gso:bool\nparm:           napi_tx:bool\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou can query information about all available modules, regardless of whether they are loaded or not. The \u003Ccode class=\"literal\">parm\u003C/code> entries show parameters the user is able to set for the module, and what type of value they expect.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tWhen entering the name of a kernel module, do not append the \u003Ccode class=\"literal\">.ko.xz\u003C/code> extension to the end of the name. Kernel module names do not have extensions; their corresponding files do.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">modinfo(8)\u003C/code> manual page\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"loading-kernel-modules-at-system-runtime_managing-kernel-modules\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.6. Loading kernel modules at system runtime\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe optimal way to expand the functionality of the Linux kernel is by loading kernel modules. Use the \u003Ccode class=\"literal command\">modprobe\u003C/code> command to find and load a kernel module into the currently running kernel.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe changes described in this procedure \u003Cspan class=\"strong strong\">\u003Cstrong>will not persist\u003C/strong>\u003C/span> after rebooting the system. For information about how to load kernel modules to \u003Cspan class=\"strong strong\">\u003Cstrong>persist\u003C/strong>\u003C/span> across system reboots, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#loading-kernel-modules-automatically-at-system-boot-time_managing-kernel-modules\">Loading kernel modules automatically at system boot time\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRoot permissions\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal package\">kmod\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe respective kernel module is not loaded. To ensure this is the case, list the \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#listing-currently-loaded-kernel-modules_managing-kernel-modules\">loaded kernel modules\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSelect a kernel module you want to load.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe modules are located in the \u003Ccode class=\"literal\">/lib/modules/$(uname -r)/kernel/&lt;SUBSYSTEM&gt;/\u003C/code> directory.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLoad the relevant kernel module:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>modprobe &lt;\u003Cspan class=\"emphasis\">\u003Cem>MODULE_NAME\u003C/em>\u003C/span>&gt;\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tWhen entering the name of a kernel module, do not append the \u003Ccode class=\"literal\">.ko.xz\u003C/code> extension to the end of the name. Kernel module names do not have extensions; their corresponding files do.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptionally, verify the relevant module was loaded:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>lsmod | grep &lt;\u003Cspan class=\"emphasis\">\u003Cem>MODULE_NAME\u003C/em>\u003C/span>&gt;\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the module was loaded correctly, this command displays the relevant kernel module. For example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>lsmod | grep serio_raw\u003C/strong>\u003C/span>\nserio_raw              16384  0\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">modprobe(8)\u003C/code> manual page\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"unloading-kernel-modules-at-system-runtime_managing-kernel-modules\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.7. Unloading kernel modules at system runtime\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tAt times, you find that you need to unload certain kernel modules from the running kernel. Use the \u003Ccode class=\"literal command\">modprobe\u003C/code> command to find and unload a kernel module at system runtime from the currently loaded kernel.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tDo not unload kernel modules when they are used by the running system. Doing so can lead to an unstable or non-operational system.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tAfter finishing this procedure, the kernel modules that are defined to be automatically loaded on boot, \u003Cspan class=\"strong strong\">\u003Cstrong>will not stay unloaded\u003C/strong>\u003C/span> after rebooting the system. For information about how to counter this outcome, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#preventing-kernel-modules-from-being-automatically-loaded-at-system-boot-time_managing-kernel-modules\">Preventing kernel modules from being automatically loaded at system boot time\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRoot permissions\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal package\">kmod\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tList all loaded kernel modules:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lsmod\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSelect the kernel module you want to unload.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf a kernel module has dependencies, unload those prior to unloading the kernel module. For details on identifying modules with dependencies, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#listing-currently-loaded-kernel-modules_managing-kernel-modules\">Listing currently loaded kernel modules\u003C/a> and \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#kernel-module-dependencies_managing-kernel-modules\">Kernel module dependencies\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUnload the relevant kernel module:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>modprobe -r &lt;\u003Cspan class=\"emphasis\">\u003Cem>MODULE_NAME\u003C/em>\u003C/span>&gt;\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tWhen entering the name of a kernel module, do not append the \u003Ccode class=\"literal\">.ko.xz\u003C/code> extension to the end of the name. Kernel module names do not have extensions; their corresponding files do.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptionally, verify the relevant module was unloaded:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>lsmod | grep &lt;\u003Cspan class=\"emphasis\">\u003Cem>MODULE_NAME\u003C/em>\u003C/span>&gt;\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the module was unloaded successfully, this command does not display any output.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">modprobe(8)\u003C/code> manual page\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_unloading-kernel-modules-at-early-stages-of-the-boot-process_managing-kernel-modules\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.8. Unloading kernel modules at early stages of the boot process\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIn certain situations, it is necessary to unload a kernel module very early in the booting process. For example, when the kernel module contains a code, which causes the system to become unresponsive, and the user is not able to reach the stage to permanently disable the rogue kernel module. In that case it is possible to temporarily block the loading of the kernel module using a boot loader.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can edit the relevant boot loader entry to unload the desired kernel module before the booting sequence continues.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe changes described in this procedure \u003Cspan class=\"strong strong\">\u003Cstrong>will not persist\u003C/strong>\u003C/span> after the next reboot. For information about how to add a kernel module to a denylist so that it will not be automatically loaded during the boot process, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#preventing-kernel-modules-from-being-automatically-loaded-at-system-boot-time_managing-kernel-modules\">Preventing kernel modules from being automatically loaded at system boot time\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have a loadable kernel module that you want to prevent from loading for some reason.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tBoot the system into the boot loader.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tUse the cursor keys to highlight the relevant boot loader entry.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tPress the \u003Ckbd class=\"keycap\">e\u003C/kbd> key to edit the entry.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"figure\" id=\"managing-kernel-modules-figu-kernel-bootmenu\">\u003Cp class=\"title\">\u003Cstrong>Figure 3.1. Kernel boot menu\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Managing_monitoring_and_updating_the_kernel-en-US/images/a6fe4f013d8c0809c0c5a46999303518/kernel-bootmenu-rhel9.png\" alt=\"kernel bootmenu rhel9\"/>\u003C/div>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tUse the cursor keys to navigate to the line that starts with \u003Cspan class=\"strong strong\">\u003Cstrong>linux\u003C/strong>\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAppend \u003Ccode class=\"literal\">modprobe.blacklist=\u003Cspan class=\"emphasis\">\u003Cem>module_name\u003C/em>\u003C/span>\u003C/code> to the end of the line.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"figure\" id=\"managing-kernel-modules-figu-kernel-boot-entry\">\u003Cp class=\"title\">\u003Cstrong>Figure 3.2. Kernel boot entry\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Managing_monitoring_and_updating_the_kernel-en-US/images/fac2da22603707549b86b01c72c16894/kernel-boot-entry-rhel9.png\" alt=\"kernel boot entry rhel9\"/>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">serio_raw\u003C/code> kernel module illustrates a rogue module to be unloaded early in the boot process.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">X\u003C/kbd> to boot using the modified configuration.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOnce the system fully boots, verify that the relevant kernel module is not loaded.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lsmod | grep \u003Cspan class=\"emphasis\">\u003Cem>serio_raw\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#managing-kernel-modules_managing-monitoring-and-updating-the-kernel\">Managing kernel modules\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"loading-kernel-modules-automatically-at-system-boot-time_managing-kernel-modules\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.9. Loading kernel modules automatically at system boot time\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tConfigure a kernel module so that it is loaded automatically during the boot process.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRoot permissions\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal package\">kmod\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSelect a kernel module you want to load during the boot process.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe modules are located in the \u003Ccode class=\"literal\">/lib/modules/$(uname -r)/kernel/&lt;SUBSYSTEM&gt;/\u003C/code> directory.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a configuration file for the module:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo &lt;\u003Cspan class=\"emphasis\">\u003Cem>MODULE_NAME\u003C/em>\u003C/span>&gt; &gt; /etc/modules-load.d/&lt;\u003Cspan class=\"emphasis\">\u003Cem>MODULE_NAME\u003C/em>\u003C/span>&gt;.conf\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tWhen entering the name of a kernel module, do not append the \u003Ccode class=\"literal\">.ko.xz\u003C/code> extension to the end of the name. Kernel module names do not have extensions; their corresponding files do.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAfter reboot, verify the relevant module was loaded:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>lsmod | grep &lt;\u003Cspan class=\"emphasis\">\u003Cem>MODULE_NAME\u003C/em>\u003C/span>&gt;\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe example command above should succeed and display the relevant kernel module.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe changes described in this procedure \u003Cspan class=\"strong strong\">\u003Cstrong>will persist\u003C/strong>\u003C/span> after rebooting the system.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">modules-load.d(5)\u003C/code> manual page\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"preventing-kernel-modules-from-being-automatically-loaded-at-system-boot-time_managing-kernel-modules\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.10. Preventing kernel modules from being automatically loaded at system boot time\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can prevent the system from loading a kernel module automatically during the boot process by listing the module in \u003Ccode class=\"literal\">modprobe\u003C/code> configuration file with a corresponding command.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe commands in this procedure require root privileges. Either use \u003Ccode class=\"literal\">su -\u003C/code> to switch to the root user or preface the commands with \u003Ccode class=\"literal\">sudo\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">kmod\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnsure that your current system configuration does not require a kernel module you plan to deny.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tList modules loaded to the currently running kernel by using the \u003Ccode class=\"literal\">lsmod\u003C/code> command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>lsmod\u003C/strong>\u003C/span>\nModule                  Size  Used by\ntls                   131072  0\nuinput                 20480  1\nsnd_seq_dummy          16384  0\nsnd_hrtimer            16384  1\n…\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the output, identify the module you want to prevent from being loaded.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAlternatively, identify an unloaded kernel module you want to prevent from potentially loading in the \u003Ccode class=\"literal\">/lib/modules/\u003Cspan class=\"emphasis\">\u003Cem>&lt;KERNEL-VERSION&gt;\u003C/em>\u003C/span>/kernel/\u003Cspan class=\"emphasis\">\u003Cem>&lt;SUBSYSTEM&gt;\u003C/em>\u003C/span>/\u003C/code> directory, for example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ls /lib/modules/4.18.0-477.20.1.el8_8.x86_64/kernel/crypto/\u003C/strong>\u003C/span>\nansi_cprng.ko.xz        chacha20poly1305.ko.xz  md4.ko.xz               serpent_generic.ko.xz\nanubis.ko.xz            cmac.ko.xz…\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a configuration file serving as a denylist:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>touch /etc/modprobe.d/denylist.conf\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn a text editor of your choice, combine the names of modules you want to exclude from automatic loading to the kernel with the \u003Ccode class=\"literal\">blacklist\u003C/code> configuration command, for example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># Prevents \u003Cspan class=\"emphasis\">\u003Cem>&lt;KERNEL-MODULE-1&gt;\u003C/em>\u003C/span> from being loaded\nblacklist \u003Cspan class=\"emphasis\">\u003Cem>&lt;MODULE-NAME-1&gt;\u003C/em>\u003C/span>\ninstall \u003Cspan class=\"emphasis\">\u003Cem>&lt;MODULE-NAME-1&gt;\u003C/em>\u003C/span> /bin/false\n\n# Prevents \u003Cspan class=\"emphasis\">\u003Cem>&lt;KERNEL-MODULE-2&gt;\u003C/em>\u003C/span> from being loaded\nblacklist \u003Cspan class=\"emphasis\">\u003Cem>&lt;MODULE-NAME-2&gt;\u003C/em>\u003C/span>\ninstall \u003Cspan class=\"emphasis\">\u003Cem>&lt;MODULE-NAME-2&gt;\u003C/em>\u003C/span> /bin/false\n…\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tBecause the \u003Ccode class=\"literal\">blacklist\u003C/code> command does not prevent the module from being loaded as a dependency for another kernel module that is not in a denylist, you must also define the \u003Ccode class=\"literal\">install\u003C/code> line. In this case, the system runs \u003Ccode class=\"literal\">/bin/false\u003C/code> instead of installing the module. The lines starting with a hash sign are comments you can use to make the file more readable.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tWhen entering the name of a kernel module, do not append the \u003Ccode class=\"literal\">.ko.xz\u003C/code> extension to the end of the name. Kernel module names do not have extensions; their corresponding files do.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a backup copy of the current initial RAM disk image before rebuilding:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cp /boot/initramfs-$(uname -r).img /boot/initramfs-$(uname -r).bak.$(date +%m-%d-%H%M%S).img\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAlternatively, create a backup copy of an initial RAM disk image which corresponds to the kernel version for which you want to prevent kernel modules from automatic loading:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cp /boot/initramfs-\u003Cspan class=\"emphasis\">\u003Cem>&lt;VERSION&gt;\u003C/em>\u003C/span>.img /boot/initramfs-\u003Cspan class=\"emphasis\">\u003Cem>&lt;VERSION&gt;\u003C/em>\u003C/span>.img.bak.$(date +%m-%d-%H%M%S)\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tGenerate a new initial RAM disk image to apply the changes:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dracut -f -v\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you build an initial RAM disk image for a different kernel version than your system currently uses, specify both target \u003Ccode class=\"literal\">initramfs\u003C/code> and kernel version:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dracut -f -v /boot/initramfs-\u003Cspan class=\"emphasis\">\u003Cem>&lt;TARGET-VERSION&gt;\u003C/em>\u003C/span>.img \u003Cspan class=\"emphasis\">\u003Cem>&lt;CORRESPONDING-TARGET-KERNEL-VERSION&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRestart the system:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>reboot\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe changes described in this procedure \u003Cspan class=\"strong strong\">\u003Cstrong>will take effect and persist\u003C/strong>\u003C/span> after rebooting the system. If you incorrectly list a key kernel module in the denylist, you can switch the system to an unstable or non-operational state.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/41278\">How do I prevent a kernel module from loading automatically?\u003C/a> (Red Hat Knowledgebase)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">modprobe.d(5)\u003C/code> and \u003Ccode class=\"literal\">dracut(8)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_compiling-custom-kernel-modules_managing-kernel-modules\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">3.11. Compiling custom kernel modules\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can build a sampling kernel module as requested by various configurations at hardware and software level.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou installed the \u003Ccode class=\"literal\">kernel-devel\u003C/code>, \u003Ccode class=\"literal\">gcc\u003C/code>, and \u003Ccode class=\"literal\">elfutils-libelf-devel\u003C/code> packages.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># dnf install kernel-devel-$(uname -r) gcc elfutils-libelf-devel\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have root permissions.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou created the \u003Ccode class=\"literal\">/root/testmodule/\u003C/code> directory where you compile the custom kernel module.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">/root/testmodule/test.c\u003C/code> file with the following content.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-c\">#include &lt;linux/module.h&gt;\n#include &lt;linux/kernel.h&gt;\n\nint init_module(void)\n    { printk(\"Hello World\\n This is a test\\n\"); return 0; }\n\nvoid cleanup_module(void)\n    { printk(\"Good Bye World\"); }\n\nMODULE_LICENSE(\"GPL\");\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">test.c\u003C/code> file is a source file that provides the main functionality to the kernel module. The file has been created in a dedicated \u003Ccode class=\"literal\">/root/testmodule/\u003C/code> directory for organizational purposes. After the module compilation, the \u003Ccode class=\"literal\">/root/testmodule/\u003C/code> directory will contain multiple files.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">test.c\u003C/code> file includes from the system libraries:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">linux/kernel.h\u003C/code> header file is necessary for the \u003Ccode class=\"literal\">printk()\u003C/code> function in the example code.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">linux/module.h\u003C/code> file contains function declarations and macro definitions to be shared between several source files written in C programming language.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFollow the \u003Ccode class=\"literal\">init_module()\u003C/code> and \u003Ccode class=\"literal\">cleanup_module()\u003C/code> functions to start and end the kernel logging function \u003Ccode class=\"literal\">printk()\u003C/code>, which prints text.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">/root/testmodule/Makefile\u003C/code> file with the following content.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-makefile\">obj-m := test.o\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe Makefile contains instructions that the compiler has to produce an object file specifically named \u003Ccode class=\"literal\">test.o\u003C/code>. The \u003Ccode class=\"literal\">obj-m\u003C/code> directive specifies that the resulting \u003Ccode class=\"literal\">test.ko\u003C/code> file is going to be compiled as a loadable kernel module. Alternatively, the \u003Ccode class=\"literal\">obj-y\u003C/code> directive would instruct to build \u003Ccode class=\"literal\">test.ko\u003C/code> as a built-in kernel module.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCompile the kernel module.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>make -C /lib/modules/$(uname -r)/build M=/root/testmodule modules\u003C/strong>\u003C/span>\nmake: Entering directory '/usr/src/kernels/5.14.0-70.17.1.el9_0.x86_64'\n  CC [M]  /root/testmodule/test.o\n  MODPOST /root/testmodule/Module.symvers\n  CC [M]  /root/testmodule/test.mod.o\n  LD [M]  /root/testmodule/test.ko\n  BTF [M] /root/testmodule/test.ko\nSkipping BTF generation for /root/testmodule/test.ko due to unavailability of vmlinux\nmake: Leaving directory '/usr/src/kernels/5.14.0-70.17.1.el9_0.x86_64'\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe compiler creates an object file (\u003Ccode class=\"literal\">test.o\u003C/code>) for each source file (\u003Ccode class=\"literal\">test.c\u003C/code>) as an intermediate step before linking them together into the final kernel module (\u003Ccode class=\"literal\">test.ko\u003C/code>).\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAfter a successful compilation, \u003Ccode class=\"literal\">/root/testmodule/\u003C/code> contains additional files that relate to the compiled custom kernel module. The compiled module itself is represented by the \u003Ccode class=\"literal\">test.ko\u003C/code> file.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: check the contents of the \u003Ccode class=\"literal\">/root/testmodule/\u003C/code> directory:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ls -l /root/testmodule/\u003C/strong>\u003C/span>\ntotal 152\n-rw-r—​r--. 1 root root    16 Jul 26 08:19 Makefile\n-rw-r—​r--. 1 root root    25 Jul 26 08:20 modules.order\n-rw-r—​r--. 1 root root     0 Jul 26 08:20 Module.symvers\n-rw-r—​r--. 1 root root   224 Jul 26 08:18 test.c\n-rw-r—​r--. 1 root root 62176 Jul 26 08:20 test.ko\n-rw-r—​r--. 1 root root    25 Jul 26 08:20 test.mod\n-rw-r—​r--. 1 root root   849 Jul 26 08:20 test.mod.c\n-rw-r—​r--. 1 root root 50936 Jul 26 08:20 test.mod.o\n-rw-r—​r--. 1 root root 12912 Jul 26 08:20 test.o\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCopy the kernel module to the \u003Ccode class=\"literal\">/lib/modules/$(uname -r)/\u003C/code> directory:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cp /root/testmodule/test.ko /lib/modules/$(uname -r)/\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUpdate the modular dependency list:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>depmod -a\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLoad the kernel module:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>modprobe -v test\u003C/strong>\u003C/span>\ninsmod /lib/modules/\u003Cspan class=\"emphasis\">\u003Cem>5.14.0-1.el9.x86_64\u003C/em>\u003C/span>/test.ko\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the kernel module was successfully loaded:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lsmod | grep test\u003C/strong>\u003C/span>\ntest                   16384  0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRead the latest messages from the kernel ring buffer:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dmesg\u003C/strong>\u003C/span>\n[\u003Cspan class=\"emphasis\">\u003Cem>74422.545004\u003C/em>\u003C/span>] Hello World\n                This is a test\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-kernel-command-line-parameters_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 4. Configuring kernel command-line parameters\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tWith kernel command-line parameters, you can change the behavior of certain aspects of the Red Hat Enterprise Linux kernel at boot time. As a system administrator, you have full control over what options get set at boot. Certain kernel behaviors can only be set at boot time, so understanding how to make these changes is a key administration skill.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tChanging the behavior of the system by modifying kernel command-line parameters may have negative effects on your system. Always test changes prior to deploying them in production. For further guidance, contact Red Hat Support.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"understanding-kernel-command-line-parameters_configuring-kernel-command-line-parameters\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">4.1. What are kernel command-line parameters\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tWith kernel command-line parameters, you can overwrite default values and set specific hardware settings. At boot time, you can configure the following features:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe Red Hat Enterprise Linux kernel\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe initial RAM disk\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe user space features\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tBy default, the kernel command-line parameters for systems using the GRUB boot loader are defined in the boot entry configuration file for each kernel boot entry.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can manipulate boot loader configuration files by using the \u003Ccode class=\"literal\">grubby\u003C/code> utility. With \u003Ccode class=\"literal\">grubby\u003C/code>, you can perform these actions:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tChange the default boot entry.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAdd or remove arguments from a GRUB menu entry.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel-command-line(7)\u003C/code>, \u003Ccode class=\"literal\">bootparam(7)\u003C/code> and \u003Ccode class=\"literal\">dracut.cmdline(7)\u003C/code> manual pages\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/articles/3938081\">How to install and boot custom kernels in Red Hat Enterprise Linux 8\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">grubby(8)\u003C/code> manual page\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"what-boot-entries-are_configuring-kernel-command-line-parameters\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">4.2. Understanding boot entries\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tA boot entry is a collection of options which are stored in a configuration file and tied to a particular kernel version. In practice, you have at least as many boot entries as your system has installed kernels. The boot entry configuration file is located in the \u003Ccode class=\"literal\">/boot/loader/entries/\u003C/code> directory and can look like this:\n\t\t\t\u003C/p>\u003Cpre class=\"screen\">d8712ab6d4f14683c5625e87b52b6b6e-5.14.0-1.el9.x86_64.conf\u003C/pre>\u003Cp>\n\t\t\t\tThe file name above consists of a machine ID stored in the \u003Ccode class=\"literal\">/etc/machine-id\u003C/code> file, and a kernel version.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe boot entry configuration file contains information about the kernel version, the initial ramdisk image, and the kernel command-line parameters. The example contents of a boot entry config can be seen below:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout white-space-pre\">title Red Hat Enterprise Linux (5.14.0-1.el9.x86_64) 9.0 (Plow)\nversion 5.14.0-1.el9.x86_64\nlinux /vmlinuz-5.14.0-1.el9.x86_64\ninitrd /initramfs-5.14.0-1.el9.x86_64.img\noptions root=/dev/mapper/rhel_kvm--02--guest08-root ro crashkernel=1G-4G:192M,4G-64G:256M,64G-:512M resume=/dev/mapper/rhel_kvm--02--guest08-swap rd.lvm.lv=rhel_kvm-02-guest08/root rd.lvm.lv=rhel_kvm-02-guest08/swap console=ttyS0,115200\ngrub_users $grub_users\ngrub_arg --unrestricted\ngrub_class kernel\u003C/pre>\u003C/section>\u003Csection class=\"section\" id=\"changing-kernel-command-line-parameters-for-all-boot-entries_configuring-kernel-command-line-parameters\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">4.3. Changing kernel command-line parameters for all boot entries\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tChange kernel command-line parameters for all boot entries on your system.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tWhen installing a newer version of the kernel in RHEL 9 systems, the \u003Ccode class=\"literal\">grubby\u003C/code> tool passes the kernel command-line arguments from the previous kernel version.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tHowever, this does not apply to RHEL version 9.0 in which newly installed kernels lose previous command-line options. You must run the \u003Ccode class=\"literal\">grub2-mkconfig\u003C/code> command on the newly installed kernel to pass the parameters to your new kernel. For more information about this known issue, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/9.0_release_notes/index#known-issue_boot-loader\">Boot loader\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tVerify that the \u003Ccode class=\"literal\">grubby\u003C/code> utility is installed on your system.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tVerify that the \u003Ccode class=\"literal\">zipl\u003C/code> utility is installed on your IBM Z system.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo add a parameter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --update-kernel=ALL --args=\"&lt;\u003Cspan class=\"emphasis\">\u003Cem>NEW_PARAMETER\u003C/em>\u003C/span>&gt;\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor systems that use the GRUB boot loader and, on IBM Z that use the zIPL boot loader, the command adds a new kernel parameter to each \u003Ccode class=\"literal\">/boot/loader/entries/&lt;\u003Cspan class=\"emphasis\">\u003Cem>ENTRY\u003C/em>\u003C/span>&gt;.conf\u003C/code> file.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn IBM Z, update the boot menu:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>zipl\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo remove a parameter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --update-kernel=ALL --remove-args=\"&lt;\u003Cspan class=\"emphasis\">\u003Cem>PARAMETER_TO_REMOVE\u003C/em>\u003C/span>&gt;\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn IBM Z, update the boot menu:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>zipl\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#understanding-kernel-command-line-parameters_configuring-kernel-command-line-parameters\" title=\"4.1. What are kernel command-line parameters\">What are kernel command-line parameters\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">grubby(8)\u003C/code> and \u003Ccode class=\"literal\">zipl(8)\u003C/code> manual pages\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"changing-kernel-command-line-parameters-for-a-single-boot-entry_configuring-kernel-command-line-parameters\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">4.4. Changing kernel command-line parameters for a single boot entry\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tMake changes in kernel command-line parameters for a single boot entry on your system.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tVerify that the \u003Ccode class=\"literal\">grubby\u003C/code> and \u003Ccode class=\"literal\">zipl\u003C/code> utilities are installed on your system.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo add a parameter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --update-kernel=/boot/vmlinuz-$(uname -r) --args=\"&lt;\u003Cspan class=\"emphasis\">\u003Cem>NEW_PARAMETER\u003C/em>\u003C/span>&gt;\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn IBM Z, update the boot menu:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>zipl\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo remove a parameter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --update-kernel=/boot/vmlinuz-$(uname -r) --remove-args=\"&lt;\u003Cspan class=\"emphasis\">\u003Cem>PARAMETER_TO_REMOVE\u003C/em>\u003C/span>&gt;\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn IBM Z, update the boot menu:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>zipl\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">grubby\u003C/code> modifies and stores the kernel command-line parameters of an individual kernel boot entry in the \u003Ccode class=\"literal\">/boot/loader/entries/&lt;\u003Cspan class=\"emphasis\">\u003Cem>ENTRY\u003C/em>\u003C/span>&gt;.conf\u003C/code> file.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"changing-kernel-command-line-parameters-temporarily-at-boot-time_configuring-kernel-command-line-parameters\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">4.5. Changing kernel command-line parameters temporarily at boot time\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tMake temporary changes to a Kernel Menu Entry by changing the kernel parameters only during a single boot process.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThis procedure applies only for a single boot and does not persistently make the changes.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tBoot into the GRUB 2 boot menu.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSelect the kernel you want to start.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress the \u003Ckbd class=\"keycap\">e\u003C/kbd> key to edit the kernel parameters.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFind the kernel command line by moving the cursor down. The kernel command line starts with \u003Ccode class=\"literal\">linux\u003C/code> on 64-Bit IBM Power Series and x86-64 BIOS-based systems, or \u003Ccode class=\"literal\">linuxefi\u003C/code> on UEFI systems.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tMove the cursor to the end of the line.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tPress \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">a\u003C/kbd> to jump to the start of the line and \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">e\u003C/kbd> to jump to the end of the line. On some systems, \u003Ckbd class=\"keycap\">Home\u003C/kbd> and \u003Ckbd class=\"keycap\">End\u003C/kbd> keys might also work.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEdit the kernel parameters as required. For example, to run the system in emergency mode, add the \u003Ccode class=\"literal\">emergency\u003C/code> parameter at the end of the \u003Ccode class=\"literal\">linux\u003C/code> line:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">linux   ($root)/vmlinuz-5.14.0-63.el9.x86_64 root=/dev/mapper/rhel-root ro crashkernel=1G-4G:192M,4G-64G:256M,64G-:512M resume=/dev/mapper/rhel-swap rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap rhgb quiet \u003Cspan class=\"strong strong\">\u003Cstrong>emergency\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo enable the system messages, remove the \u003Ccode class=\"literal\">rhgb\u003C/code> and \u003Ccode class=\"literal\">quiet\u003C/code> parameters.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPress \u003Ckbd class=\"keycap\">Ctrl\u003C/kbd>+\u003Ckbd class=\"keycap\">x\u003C/kbd> to boot with the selected kernel and the modified command line parameters.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIf you press the \u003Ckbd class=\"keycap\">Esc\u003C/kbd> key to leave command line editing, it will drop all the user made changes.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-grub-2-settings-to-enable-serial-console-connection_configuring-kernel-command-line-parameters\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">4.6. Configuring GRUB settings to enable serial console connection\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe serial console is beneficial when you need to connect to a headless server or an embedded system and the network is down. Or when you need to avoid security rules and obtain login access on a different system.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou need to configure some default GRUB settings to use the serial console connection.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have root permissions.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the following two lines to the \u003Ccode class=\"literal\">/etc/default/grub\u003C/code> file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout white-space-pre\">GRUB_TERMINAL=\"serial\"\nGRUB_SERIAL_COMMAND=\"serial --speed=9600 --unit=0 --word=8 --parity=no --stop=1\"\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe first line disables the graphical terminal. The \u003Ccode class=\"literal\">GRUB_TERMINAL\u003C/code> key overrides values of \u003Ccode class=\"literal\">GRUB_TERMINAL_INPUT\u003C/code> and \u003Ccode class=\"literal\">GRUB_TERMINAL_OUTPUT\u003C/code> keys.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe second line adjusts the baud rate (\u003Ccode class=\"literal\">--speed\u003C/code>), parity and other values to fit your environment and hardware. Note that a much higher baud rate, for example 115200, is preferable for tasks such as following log files.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUpdate the GRUB configuration file.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn BIOS-based machines:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grub2-mkconfig -o /boot/grub2/grub.cfg\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn UEFI-based machines:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grub2-mkconfig -o /boot/grub2/grub.cfg\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tReboot the system for the changes to take effect.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"changing-boot-entries-with-the-grub-configuration-file_configuring-kernel-command-line-parameters\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">4.7. Changing boot entries with the GRUB configuration file\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">/etc/default/grub\u003C/code> GRUB configuration file contains the \u003Ccode class=\"literal\">GRUB_CMDLINE_LINUX\u003C/code> key, which lists kernel command-line arguments to add to boot entries for the Linux kernel. For example:\n\t\t\t\u003C/p>\u003Cpre class=\"screen\">GRUB_CMDLINE_LINUX=\"crashkernel=1G-4G:192M,4G-64G:256M,64G-:512M resume=/dev/mapper/rhel-swap rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap\"\u003C/pre>\u003Cp>\n\t\t\t\tTo change the boot entries, overwrite Boot Loader Specification (BLS) snippets with the contents of the \u003Ccode class=\"literal\">GRUB_CMDLINE_LINUX\u003C/code> values.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA fresh RHEL 9 installation.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd or remove a kernel parameter for individual kernels in a post installation script with \u003Ccode class=\"literal\">grubby\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --update-kernel &lt;\u003Cspan class=\"emphasis\">\u003Cem>PATH_TO_KERNEL\u003C/em>\u003C/span>&gt; --args \"&lt;\u003Cspan class=\"emphasis\">\u003Cem>NEW_ARGUMENTS\u003C/em>\u003C/span>&gt;\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, add the \u003Ccode class=\"literal\">noapic\u003C/code> parameter to the chosen kernel:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --update-kernel /boot/vmlinuz-5.14.0-362.8.1.el9_3.x86_64 --args \"noapic\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe parameter is propagated into the BLS snippets, but not into the \u003Ccode class=\"literal\">/etc/default/grub\u003C/code> file.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOverwrite BLS snippets with the contents of the \u003Ccode class=\"literal\">GRUB_CMDLINE_LINUX\u003C/code> values present in the \u003Ccode class=\"literal\">/etc/default/grub\u003C/code> file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grub2-mkconfig -o /boot/grub2/grub.cfg --update-bls-cmdline\u003C/strong>\u003C/span>\nGenerating grub configuration file …​\nAdding boot menu entry for UEFI Firmware Settings …​\ndone\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tOther changes, such as changes made to \u003Ccode class=\"literal\">GRUB_TIMEOUT\u003C/code> key (also included in the \u003Ccode class=\"literal\">/etc/default/grub\u003C/code> GRUB configuration file), do get propagated to the new \u003Ccode class=\"literal\">grub.cfg\u003C/code> by default.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tReboot your operating system.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the parameters are included in the \u003Ccode class=\"literal\">/proc/cmdline\u003C/code> file.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example, \u003Ccode class=\"literal\">/proc/cmdline\u003C/code> contains the \u003Ccode class=\"literal\">noapic\u003C/code> kernel parameter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">BOOT_IMAGE=(hd0,gpt2)/vmlinuz-4.18.0-425.3.1.el8.x86_64 root=/dev/mapper/RHELCSB-Root ro vconsole.keymap=us crashkernel=auto rd.lvm.lv=RHELCSB/Root rd.luks.uuid=luks-d8a28c4c-96aa-4319-be26-96896272151d rhgb quiet \u003Cspan class=\"strong strong\">\u003Cstrong>noapic\u003C/strong>\u003C/span> rd.luks.key=d8a28c4c-96aa-4319-be26-96896272151d=/keyfile:UUID=c47d962e-4be8-41d6-8216-8cf7a0d3b911 ipv6.disable=1\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-kernel-parameters-at-runtime_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 5. Configuring kernel parameters at runtime\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tAs a system administrator, you can modify many facets of the Red Hat Enterprise Linux kernel’s behavior at runtime. Configure kernel parameters at runtime by using the \u003Ccode class=\"literal command\">sysctl\u003C/code> command and by modifying the configuration files in the \u003Ccode class=\"literal\">/etc/sysctl.d/\u003C/code> and \u003Ccode class=\"literal\">/proc/sys/\u003C/code> directories.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tConfiguring kernel parameters on a production system requires careful planning. Unplanned changes can render the kernel unstable, requiring a system reboot. Verify that you are using valid options before changing any kernel values.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\tFor more information about tuning kernel on IBM DB2, see \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/3530941\">Tuning Red Hat Enterprise Linux for IBM DB2\u003C/a>.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"what-are-kernel-parameters_configuring-kernel-parameters-at-runtime\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.1. What are kernel parameters\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tKernel parameters are tunable values which you can adjust while the system is running. There is no requirement to reboot or recompile the kernel for changes to take effect.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIt is possible to address the kernel parameters through:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal command\">sysctl\u003C/code> command\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe virtual file system mounted at the \u003Ccode class=\"literal filename\">/proc/sys/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe configuration files in the \u003Ccode class=\"literal\">/etc/sysctl.d/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tTunables are divided into classes by the kernel subsystem. Red Hat Enterprise Linux has the following tunable classes:\n\t\t\t\u003C/p>\u003Crh-table id=\"idm139825296859264\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 5.1. Table of sysctl classes\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 33%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 67%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825297269760\" scope=\"col\">Tunable class\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825297268672\" scope=\"col\">Subsystem\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825297269760\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">abi\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825297268672\"> \u003Cp>\n\t\t\t\t\t\t\t\tExecution domains and personalities\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825297269760\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">crypto\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825297268672\"> \u003Cp>\n\t\t\t\t\t\t\t\tCryptographic interfaces\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825297269760\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">debug\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825297268672\"> \u003Cp>\n\t\t\t\t\t\t\t\tKernel debugging interfaces\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825297269760\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">dev\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825297268672\"> \u003Cp>\n\t\t\t\t\t\t\t\tDevice-specific information\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825297269760\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">fs\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825297268672\"> \u003Cp>\n\t\t\t\t\t\t\t\tGlobal and specific file system tunables\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825297269760\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">kernel\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825297268672\"> \u003Cp>\n\t\t\t\t\t\t\t\tGlobal kernel tunables\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825297269760\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">net\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825297268672\"> \u003Cp>\n\t\t\t\t\t\t\t\tNetwork tunables\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825297269760\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">sunrpc\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825297268672\"> \u003Cp>\n\t\t\t\t\t\t\t\tSun Remote Procedure Call (NFS)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825297269760\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">user\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825297268672\"> \u003Cp>\n\t\t\t\t\t\t\t\tUser Namespace limits\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825297269760\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">vm\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825297268672\"> \u003Cp>\n\t\t\t\t\t\t\t\tTuning and management of memory, buffers, and cache\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">sysctl(8)\u003C/code>, and \u003Ccode class=\"literal\">sysctl.d(5)\u003C/code> manual pages\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-kernel-parameters-temporarily-with-sysctl_configuring-kernel-parameters-at-runtime\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.2. Configuring kernel parameters temporarily with sysctl\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tUse the \u003Ccode class=\"literal command\">sysctl\u003C/code> command to temporarily set kernel parameters at runtime. The command is also useful for listing and filtering tunables.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRoot permissions\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tList all parameters and their values.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Ccode class=\"literal command\"># \u003Cspan class=\"strong strong\">\u003Cstrong>sysctl -a\u003C/strong>\u003C/span>\u003C/code>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal command\"># sysctl -a\u003C/code> command displays kernel parameters, which can be adjusted at runtime and at boot time.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo configure a parameter temporarily, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>sysctl &lt;TUNABLE_CLASS&gt;.&lt;PARAMETER&gt;=&lt;TARGET_VALUE&gt;\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe sample command above changes the parameter value while the system is running. The changes take effect immediately, without a need for restart.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe changes return back to default after your system reboots.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">sysctl(8)\u003C/code> manual page\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#using-configuration-files-in-etc-sysctl-d-to-adjust-kernel-parameters_configuring-kernel-parameters-at-runtime\" title=\"5.4. Using configuration files in /etc/sysctl.d/ to adjust kernel parameters\">Using configuration files in /etc/sysctl.d/ to adjust kernel parameters\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-kernel-parameters-permanently-with-sysctl_configuring-kernel-parameters-at-runtime\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.3. Configuring kernel parameters permanently with sysctl\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tUse the \u003Ccode class=\"literal command\">sysctl\u003C/code> command to permanently set kernel parameters.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRoot permissions\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tList all parameters.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Ccode class=\"literal command\"># \u003Cspan class=\"strong strong\">\u003Cstrong>sysctl -a\u003C/strong>\u003C/span>\u003C/code>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe command displays all kernel parameters that can be configured at runtime.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure a parameter permanently:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>sysctl -w &lt;TUNABLE_CLASS&gt;.&lt;PARAMETER&gt;=&lt;TARGET_VALUE&gt; &gt;&gt; /etc/sysctl.conf\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe sample command changes the tunable value and writes it to the \u003Ccode class=\"literal\">/etc/sysctl.conf\u003C/code> file, which overrides the default values of kernel parameters. The changes take effect immediately and persistently, without a need for restart.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tTo permanently modify kernel parameters you can also make manual changes to the configuration files in the \u003Ccode class=\"literal\">/etc/sysctl.d/\u003C/code> directory.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">sysctl(8)\u003C/code> and \u003Ccode class=\"literal\">sysctl.conf(5)\u003C/code> manual pages\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#using-configuration-files-in-etc-sysctl-d-to-adjust-kernel-parameters_configuring-kernel-parameters-at-runtime\" title=\"5.4. Using configuration files in /etc/sysctl.d/ to adjust kernel parameters\">Using configuration files in /etc/sysctl.d/ to adjust kernel parameters\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"using-configuration-files-in-etc-sysctl-d-to-adjust-kernel-parameters_configuring-kernel-parameters-at-runtime\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.4. Using configuration files in /etc/sysctl.d/ to adjust kernel parameters\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tModify configuration files in the \u003Ccode class=\"literal\">/etc/sysctl.d/\u003C/code> directory manually to permanently set kernel parameters.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRoot permissions\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a new configuration file in \u003Ccode class=\"literal\">/etc/sysctl.d/\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Ccode class=\"literal command\"># \u003Cspan class=\"strong strong\">\u003Cstrong>vim /etc/sysctl.d/&lt;\u003Cspan class=\"emphasis\">\u003Cem>some_file.conf\u003C/em>\u003C/span>&gt;\u003C/strong>\u003C/span>\u003C/code>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInclude kernel parameters, one per line.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Ccode class=\"literal command\">&lt;\u003Cspan class=\"emphasis\">\u003Cem>TUNABLE_CLASS\u003C/em>\u003C/span>&gt;.&lt;\u003Cspan class=\"emphasis\">\u003Cem>PARAMETER\u003C/em>\u003C/span>&gt;=&lt;\u003Cspan class=\"emphasis\">\u003Cem>TARGET_VALUE\u003C/em>\u003C/span>&gt;\u003C/code>\n\u003Ccode class=\"literal command\">&lt;\u003Cspan class=\"emphasis\">\u003Cem>TUNABLE_CLASS\u003C/em>\u003C/span>&gt;.&lt;\u003Cspan class=\"emphasis\">\u003Cem>PARAMETER\u003C/em>\u003C/span>&gt;=&lt;\u003Cspan class=\"emphasis\">\u003Cem>TARGET_VALUE\u003C/em>\u003C/span>&gt;\u003C/code>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSave the configuration file.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReboot the machine for the changes to take effect.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAlternatively, to apply changes without rebooting, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Ccode class=\"literal command\"># \u003Cspan class=\"strong strong\">\u003Cstrong>sysctl -p /etc/sysctl.d/&lt;\u003Cspan class=\"emphasis\">\u003Cem>some_file.conf\u003C/em>\u003C/span>&gt;\u003C/strong>\u003C/span>\u003C/code>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe command enables you to read values from the configuration file, which you created earlier.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">sysctl(8)\u003C/code>, \u003Ccode class=\"literal\">sysctl.d(5)\u003C/code> manual pages\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-kernel-parameters-temporarily-through-proc-sys_configuring-kernel-parameters-at-runtime\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">5.5. Configuring kernel parameters temporarily through /proc/sys/\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tSet kernel parameters temporarily through the files in the \u003Ccode class=\"literal\">/proc/sys/\u003C/code> virtual file system directory.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRoot permissions\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIdentify a kernel parameter you want to configure.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Ccode class=\"literal command\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ls -l /proc/sys/&lt;\u003Cspan class=\"emphasis\">\u003Cem>TUNABLE_CLASS\u003C/em>\u003C/span>&gt;/\u003C/strong>\u003C/span>\u003C/code>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe writable files returned by the command can be used to configure the kernel. The files with read-only permissions provide feedback on the current settings.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAssign a target value to the kernel parameter.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Ccode class=\"literal command\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo &lt;\u003Cspan class=\"emphasis\">\u003Cem>TARGET_VALUE\u003C/em>\u003C/span>&gt; &gt; /proc/sys/&lt;\u003Cspan class=\"emphasis\">\u003Cem>TUNABLE_CLASS\u003C/em>\u003C/span>&gt;/&lt;\u003Cspan class=\"emphasis\">\u003Cem>PARAMETER\u003C/em>\u003C/span>&gt;\u003C/strong>\u003C/span>\u003C/code>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe command makes configuration changes that will disappear once the system is restarted.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify the value of the newly set kernel parameter.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Ccode class=\"literal command\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /proc/sys/&lt;\u003Cspan class=\"emphasis\">\u003Cem>TUNABLE_CLASS\u003C/em>\u003C/span>&gt;/&lt;\u003Cspan class=\"emphasis\">\u003Cem>PARAMETER\u003C/em>\u003C/span>&gt;\u003C/strong>\u003C/span>\u003C/code>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-kernel-parameters-permanently-by-using-the-kernel-settings-rhel-system-role_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 6. Configuring kernel parameters permanently by using RHEL system roles\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tYou can use the \u003Ccode class=\"literal\">kernel_settings\u003C/code> RHEL system role to configure kernel parameters on multiple clients at once. This solution:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tProvides a friendly interface with efficient input setting.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tKeeps all intended kernel parameters in one place.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tAfter you run the \u003Ccode class=\"literal\">kernel_settings\u003C/code> role from the control machine, the kernel parameters are applied to the managed systems immediately and persist across reboots.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tNote that RHEL system role delivered over RHEL channels are available to RHEL customers as an RPM package in the default AppStream repository. RHEL system role are also available as a collection to customers with Ansible subscriptions over Ansible Automation Hub.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"applying-selected-kernel-parameters-using-the-kernel-settings-role_configuring-kernel-parameters-permanently-by-using-the-kernel-settings-rhel-system-role\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">6.1. Applying selected kernel parameters by using the \u003Ccode class=\"literal\">kernel_settings\u003C/code> RHEL system role\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">kernel_settings\u003C/code> RHEL system role to remotely configure various kernel parameters across multiple managed operating systems with persistent effects. For example, you can configure:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tTransparent hugepages to increase performance by reducing the overhead of managing smaller pages.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe largest packet sizes are to be transmitted over the network with the loopback interface.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tLimits on files, which can be opened simultaneously.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles\">You have prepared the control node and the managed nodes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in to the control node as a user who can run playbooks on the managed nodes.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe account you use to connect to the managed nodes has \u003Ccode class=\"literal\">sudo\u003C/code> permissions on them.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a playbook file, for example \u003Ccode class=\"literal\">~/playbook.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\n- name: Configuring kernel settings\n  hosts: managed-node-01.example.com\n  tasks:\n    - name: Configure hugepages, packet size for loopback device, and limits on simultaneously open files.\n      ansible.builtin.include_role:\n        name: rhel-system-roles.kernel_settings\n      vars:\n        kernel_settings_sysctl:\n          - name: fs.file-max\n            value: 400000\n          - name: kernel.threads-max\n            value: 65536\n        kernel_settings_sysfs:\n          - name: /sys/class/net/lo/mtu\n            value: 65000\n        kernel_settings_transparent_hugepages: madvise\n        kernel_settings_reboot_ok: true\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe settings specified in the example playbook include the following:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">kernel_settings_sysfs: \u003Cspan class=\"emphasis\">\u003Cem>&lt;list_of_sysctl_settings&gt;\u003C/em>\u003C/span>\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tA YAML list of \u003Ccode class=\"literal\">sysctl\u003C/code> settings and the values you want to assign to these settings.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">kernel_settings_transparent_hugepages: \u003Cspan class=\"emphasis\">\u003Cem>&lt;value&gt;\u003C/em>\u003C/span>\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tControls the memory subsystem Transparent Huge Pages (THP) setting. You can disable THP support (\u003Ccode class=\"literal\">never\u003C/code>), enable it system wide (\u003Ccode class=\"literal\">always\u003C/code>) or inside \u003Ccode class=\"literal\">MAD_HUGEPAGE\u003C/code> regions (\u003Ccode class=\"literal\">madvise\u003C/code>).\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">kernel_settings_reboot_ok: \u003Cspan class=\"emphasis\">\u003Cem>&lt;true|false&gt;\u003C/em>\u003C/span>\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tThe default is \u003Ccode class=\"literal\">false\u003C/code>. If set to \u003Ccode class=\"literal\">true\u003C/code>, the system role will determine if a reboot of the managed host is necessary for the requested changes to take effect and reboot it. If set to \u003Ccode class=\"literal\">false\u003C/code>, the role will return the variable \u003Ccode class=\"literal\">kernel_settings_reboot_required\u003C/code> with a value of \u003Ccode class=\"literal\">true\u003C/code>, indicating that a reboot is required. In this case, a user must reboot the managed node manually.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tFor details about all variables used in the playbook, see the \u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.kdump/README.md\u003C/code> file on the control node.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tValidate the playbook syntax:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --syntax-check ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that this command only validates the syntax and does not protect against a wrong but valid configuration.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the playbook:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify the affected kernel parameters:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ansible managed-node-01.example.com -m command -a 'sysctl fs.file-max kernel.threads-max net.ipv6.conf.lo.mtu'\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>ansible managed-node-01.example.com -m command -a 'cat /sys/kernel/mm/transparent_hugepage/enabled'\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.kernel_settings/README.md\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/rhel-system-roles/kernel_settings/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-the-grub-2-boot-loader-by-using-rhel-system-roles_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 7. Configuring the GRUB 2 boot loader by using RHEL system roles\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tBy using the \u003Ccode class=\"literal\">bootloader\u003C/code> RHEL system role, you can automate the configuration and management tasks related to the GRUB2 boot loader.\n\t\t\u003C/p>\u003Cp>\n\t\t\tThis role currently supports configuring the GRUB2 boot loader, which runs on the following CPU architectures:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tAMD and Intel 64-bit architectures (x86-64)\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tThe 64-bit ARM architecture (ARMv8.0)\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tIBM Power Systems, Little Endian (POWER9)\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"updating-the-existing-boot-loader-entries-by-using-the-bootloader-rhel-system-role_configuring-the-grub-2-boot-loader-by-using-rhel-system-roles\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.1. Updating the existing boot loader entries by using the \u003Ccode class=\"literal\">bootloader\u003C/code> RHEL system role\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">bootloader\u003C/code> RHEL system role to update the existing entries in the GRUB2 boot menu in an automated fashion. This way you can efficiently pass specific kernel command-line parameters that can optimize the performance or behavior of your systems.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor example, if you leverage systems, where detailed boot messages from the kernel and init system are not necessary, use \u003Ccode class=\"literal\">bootloader\u003C/code> to apply the \u003Ccode class=\"literal\">quiet\u003C/code> parameter to your existing boot loader entries on your managed nodes to achieve a cleaner, less cluttered, and more user-friendly booting experience.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles\">You have prepared the control node and the managed nodes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in to the control node as a user who can run playbooks on the managed nodes.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe account you use to connect to the managed nodes has \u003Ccode class=\"literal\">sudo\u003C/code> permissions on them.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou identified the kernel that corresponds to the boot loader entry you want to update.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a playbook file, for example \u003Ccode class=\"literal\">~/playbook.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\n- name: Configuration and management of GRUB2 boot loader\n  hosts: managed-node-01.example.com\n  tasks:\n    - name: Update existing boot loader entries\n      ansible.builtin.include_role:\n        name: rhel-system-roles.bootloader\n      vars:\n        bootloader_settings:\n          - kernel:\n              path: /boot/vmlinuz-5.14.0-362.24.1.el9_3.aarch64\n            options:\n              - name: quiet\n                state: present\n        bootloader_reboot_ok: true\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe settings specified in the example playbook include the following:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">kernel\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tSpecifies the kernel connected with the boot loader entry that you want to update.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">options\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tSpecifies the kernel command-line parameters to update for your chosen boot loader entry (kernel).\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">bootloader_reboot_ok: \u003Cspan class=\"emphasis\">\u003Cem>true\u003C/em>\u003C/span>\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tThe role detects that a reboot is needed for the changes to take effect and performs a restart of the managed node.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details about all variables used in the playbook, see the \u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.bootloader/README.md\u003C/code> file on the control node.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tValidate the playbook syntax:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --syntax-check ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that this command only validates the syntax and does not protect against a wrong but valid configuration.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the playbook:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCheck that your specified boot loader entry has updated kernel command-line parameters:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ansible managed-node-01.example.com -m ansible.builtin.command -a 'grubby --info=ALL'\u003C/strong>\u003C/span>\nmanaged-node-01.example.com | CHANGED | rc=0 &gt;&gt;\n...\nindex=1\nkernel=\"/boot/vmlinuz-5.14.0-362.24.1.el9_3.aarch64\"\nargs=\"ro crashkernel=1G-4G:256M,4G-64G:320M,64G-:576M rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap $tuned_params \u003Cspan class=\"strong strong\">\u003Cstrong>quiet\u003C/strong>\u003C/span>\"\nroot=\"/dev/mapper/rhel-root\"\ninitrd=\"/boot/initramfs-5.14.0-362.24.1.el9_3.aarch64.img $tuned_initrd\"\ntitle=\"Red Hat Enterprise Linux (5.14.0-362.24.1.el9_3.aarch64) 9.4 (Plow)\"\nid=\"2c9ec787230141a9b087f774955795ab-5.14.0-362.24.1.el9_3.aarch64\"\n...\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.bootloader/README.md\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/rhel-system-roles/bootloader/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://docs.ansible.com/ansible/latest/user_guide/playbooks.html\">Working With Playbooks\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://docs.ansible.com/ansible/latest/user_guide/playbooks_variables.html\">Using Variables\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://docs.ansible.com/ansible/latest/user_guide/playbooks_reuse_roles.html\">Roles\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index#configuring-kernel-command-line-parameters_managing-monitoring-and-updating-the-kernel\">Configuring kernel command-line parameters\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"securing-the-boot-menu-with-password-by-using-the-bootloader-rhel-system-role_configuring-the-grub-2-boot-loader-by-using-rhel-system-roles\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.2. Securing the boot menu with password by using the \u003Ccode class=\"literal\">bootloader\u003C/code> RHEL system role\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">bootloader\u003C/code> RHEL system role to set a password to the GRUB2 boot menu in an automated fashion. This way you can efficiently prevent unauthorized users from modifying boot parameters, and to have better control over the system boot.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles\">You have prepared the control node and the managed nodes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in to the control node as a user who can run playbooks on the managed nodes.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe account you use to connect to the managed nodes has \u003Ccode class=\"literal\">sudo\u003C/code> permissions on them.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStore your sensitive variables in an encrypted file:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate the vault:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-vault create vault.yml\u003C/strong>\u003C/span>\nNew Vault password: \u003Cspan class=\"emphasis\">\u003Cem>&lt;vault_password&gt;\u003C/em>\u003C/span>\nConfirm New Vault password: \u003Cspan class=\"emphasis\">\u003Cem>&lt;vault_password&gt;\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tAfter the \u003Ccode class=\"literal\">ansible-vault create\u003C/code> command opens an editor, enter the sensitive data in the \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>&lt;key&gt;\u003C/em>\u003C/span>: \u003Cspan class=\"emphasis\">\u003Cem>&lt;value&gt;\u003C/em>\u003C/span>\u003C/code> format:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-ini\">pwd: \u003Cspan class=\"emphasis\">\u003Cem>&lt;password&gt;\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tSave the changes, and close the editor. Ansible encrypts the data in the vault.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a playbook file, for example \u003Ccode class=\"literal\">~/playbook.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\n- name: Configuration and management of GRUB2 boot loader\n  hosts: managed-node-01.example.com\n  vars_files:\n    - vault.yml\n  tasks:\n    - name: Set the bootloader password\n      ansible.builtin.include_role:\n        name: rhel-system-roles.bootloader\n      vars:\n        bootloader_password: \"{{ pwd }}\"\n        bootloader_reboot_ok: true\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe settings specified in the example playbook include the following:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">bootloader_password: \u003Cspan class=\"emphasis\">\u003Cem>\"{{ pwd }}\"\u003C/em>\u003C/span>\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tThe variable ensures protection of boot parameters with a password.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">bootloader_reboot_ok: \u003Cspan class=\"emphasis\">\u003Cem>true\u003C/em>\u003C/span>\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tThe role detects that a reboot is needed for the changes to take effect and performs a restart of the managed node.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tChanging the boot loader password is not an idempotent transaction. This means that if you apply the same Ansible playbook again, the result will not be the same, and the state of the managed node will change.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details about all variables used in the playbook, see the \u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.bootloader/README.md\u003C/code> file on the control node.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tValidate the playbook syntax:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --syntax-check --ask-vault-pass ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that this command only validates the syntax and does not protect against a wrong but valid configuration.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the playbook:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --ask-vault-pass ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn your managed node during the GRUB2 boot menu screen, press the \u003Ckbd class=\"keycap\">e\u003C/kbd> key for edit.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Managing_monitoring_and_updating_the_kernel-en-US/images/cd35c09a617934aa83c413f94deb1c9a/bootloader_password_verification1.png\" alt=\"GRUB2 boot loader menu\"/>\u003C/div>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou will be prompted for a username and a password:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Managing_monitoring_and_updating_the_kernel-en-US/images/1d6466a16badfca79aff8cbb9eba7cb2/bootloader_password_verification2.png\" alt=\"GRUB2 menu lock\"/>\u003C/div>\u003C/div>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">Enter username: root\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tThe boot loader username is always \u003Ccode class=\"literal\">root\u003C/code> and you do not need to specify it in your Ansible playbook.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">Enter password: \u003Cspan class=\"emphasis\">\u003Cem>&lt;password&gt;\u003C/em>\u003C/span>\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tThe boot loader password corresponds to the \u003Ccode class=\"literal\">pwd\u003C/code> variable that you defined in the \u003Ccode class=\"literal\">vault.yml\u003C/code> file.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou can view or edit configuration of the particular boot loader entry:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Managing_monitoring_and_updating_the_kernel-en-US/images/960bfee9d3a0f90d4e48b74ee4388b0c/bootloader_password_verification3.png\" alt=\"GRUB2 boot loader entry details\"/>\u003C/div>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.bootloader/README.md\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/rhel-system-roles/bootloader/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"setting-a-timeout-for-the-boot-loader-menu-by-using-the-bootloader-rhel-system-role_configuring-the-grub-2-boot-loader-by-using-rhel-system-roles\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.3. Setting a timeout for the boot loader menu by using the \u003Ccode class=\"literal\">bootloader\u003C/code> RHEL system role\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">bootloader\u003C/code> RHEL system role to configure a timeout for the GRUB2 boot loader menu in an automated fashion. This way you can efficiently update a period of time during which you can intervene and select a non-default boot entry for various purposes.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles\">You have prepared the control node and the managed nodes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in to the control node as a user who can run playbooks on the managed nodes.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe account you use to connect to the managed nodes has \u003Ccode class=\"literal\">sudo\u003C/code> permissions on them.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a playbook file, for example \u003Ccode class=\"literal\">~/playbook.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\n- name: Configuration and management of GRUB2 boot loader\n  hosts: managed-node-01.example.com\n  tasks:\n    - name: Update the boot loader timeout\n      ansible.builtin.include_role:\n        name: rhel-system-roles.bootloader\n      vars:\n        bootloader_timeout: 10\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe settings specified in the example playbook include the following:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">bootloader_timeout: 10\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tInput an integer to control for how long the GRUB2 boot loader menu is displayed before booting the default entry.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details about all variables used in the playbook, see the \u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.bootloader/README.md\u003C/code> file on the control node.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tValidate the playbook syntax:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --syntax-check ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that this command only validates the syntax and does not protect against a wrong but valid configuration.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the playbook:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRemotely restart your managed node:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ansible managed-node-01.example.com -m ansible.builtin.reboot\u003C/strong>\u003C/span>\nmanaged-node-01.example.com | CHANGED =&gt; {\n    \"changed\": true,\n    \"elapsed\": 21,\n    \"rebooted\": true\n}\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the managed node, observe the GRUB2 boot menu screen.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"informalfigure\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Managing_monitoring_and_updating_the_kernel-en-US/images/4799ebe2185bd3c825a53458bc866301/bootloader_timeout_verification.png\" alt=\"GRUB2 boot loader menu timeout\"/>\u003C/div>\u003C/div>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">The highlighted entry will be executed automatically in 10s\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tFor how long this boot menu is displayed before GRUB2 automatically uses the default entry.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\t\tAlternative: you can remotely query for the \"timeout\" settings in the \u003Ccode class=\"literal\">/boot/grub2/grub.cfg\u003C/code> file of your managed node:\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ansible managed-node-01.example.com -m ansible.builtin.command -a \"grep 'timeout' /boot/grub2/grub.cfg\"\u003C/strong>\u003C/span>\nmanaged-node-01.example.com | CHANGED | rc=0 &gt;&gt;\nif [ x$feature_timeout_style = xy ] ; then\n  set timeout_style=menu\n  \u003Cspan class=\"strong strong\">\u003Cstrong>set timeout=10\u003C/strong>\u003C/span>\n# Fallback normal timeout code in case the timeout_style feature is\n  \u003Cspan class=\"strong strong\">\u003Cstrong>set timeout=10\u003C/strong>\u003C/span>\nif [ x$feature_timeout_style = xy ] ; then\n    set timeout_style=menu\n    \u003Cspan class=\"strong strong\">\u003Cstrong>set timeout=10\u003C/strong>\u003C/span>\n    set orig_timeout_style=${timeout_style}\n    set orig_timeout=${timeout}\n      # timeout_style=menu + timeout=0 avoids the countdown code keypress check\n      set timeout_style=menu\n      \u003Cspan class=\"strong strong\">\u003Cstrong>set timeout=10\u003C/strong>\u003C/span>\n      set timeout_style=hidden\n      \u003Cspan class=\"strong strong\">\u003Cstrong>set timeout=10\u003C/strong>\u003C/span>\nif [ x$feature_timeout_style = xy ]; then\n  if [ \"${menu_show_once_timeout}\" ]; then\n    set timeout_style=menu\n    \u003Cspan class=\"strong strong\">\u003Cstrong>set timeout=10\u003C/strong>\u003C/span>\n    unset menu_show_once_timeout\n    save_env menu_show_once_timeout\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003C/dl>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.bootloader/README.md\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/rhel-system-roles/bootloader/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"collecting-the-boot-loader-configuration-information-by-using-the-bootloader-rhel-system-role_configuring-the-grub-2-boot-loader-by-using-rhel-system-roles\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">7.4. Collecting the boot loader configuration information by using the \u003Ccode class=\"literal\">bootloader\u003C/code> RHEL system role\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">bootloader\u003C/code> RHEL system role to gather information about the GRUB2 boot loader entries in an automated fashion. This way you can quickly identify that your systems are set up to boot correctly, all entries point to the right kernels and initial RAM disk images.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tAs a result, you can for example:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPrevent boot failures.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRevert to a known good state when troubleshooting.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tBe sure that security-related kernel command-line parameters are correctly configured.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/automating_system_administration_by_using_rhel_system_roles/assembly_preparing-a-control-node-and-managed-nodes-to-use-rhel-system-roles_automating-system-administration-by-using-rhel-system-roles\">You have prepared the control node and the managed nodes\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou are logged in to the control node as a user who can run playbooks on the managed nodes.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe account you use to connect to the managed nodes has \u003Ccode class=\"literal\">sudo\u003C/code> permissions on them.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a playbook file, for example \u003Ccode class=\"literal\">~/playbook.yml\u003C/code>, with the following content:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"programlisting language-yaml\">---\n- name: Configuration and management of GRUB2 boot loader\n  hosts: managed-node-01.example.com\n  tasks:\n    - name: Gather information about the boot loader configuration\n      ansible.builtin.include_role:\n        name: rhel-system-roles.bootloader\n      vars:\n        bootloader_gather_facts: true\n\n    - name: Display the collected boot loader configuration information\n      debug:\n        var: bootloader_facts\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor details about all variables used in the playbook, see the \u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.bootloader/README.md\u003C/code> file on the control node.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tValidate the playbook syntax:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook --syntax-check ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that this command only validates the syntax and does not protect against a wrong but valid configuration.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the playbook:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ansible-playbook ~/playbook.yml\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAfter you run the preceding playbook on the control node, you will see a similar command-line output as in the following example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">...\n    \"bootloader_facts\": [\n        {\n            \"args\": \"ro crashkernel=1G-4G:256M,4G-64G:320M,64G-:576M rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap $tuned_params quiet\",\n            \"default\": true,\n            \"id\": \"2c9ec787230141a9b087f774955795ab-5.14.0-362.24.1.el9_3.aarch64\",\n            \"index\": \"1\",\n            \"initrd\": \"/boot/initramfs-5.14.0-362.24.1.el9_3.aarch64.img $tuned_initrd\",\n            \"kernel\": \"/boot/vmlinuz-5.14.0-362.24.1.el9_3.aarch64\",\n            \"root\": \"/dev/mapper/rhel-root\",\n            \"title\": \"Red Hat Enterprise Linux (5.14.0-362.24.1.el9_3.aarch64) 9.4 (Plow)\"\n        }\n    ]\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe command-line output shows the following notable configuration information about the boot entry:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">args\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tCommand-line parameters passed to the kernel by the GRUB2 boot loader during the boot process. They configure various settings and behaviors of the kernel, initramfs, and other boot-time components.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">id\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tUnique identifier assigned to each boot entry in a boot loader menu. It consists of machine ID and the kernel version.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">root\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tThe root filesystem for the kernel to mount and use as the primary filesystem during the boot.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/ansible/roles/rhel-system-roles.bootloader/README.md\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">/usr/share/doc/rhel-system-roles/bootloader/\u003C/code> directory\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index#what-boot-entries-are_configuring-kernel-command-line-parameters\">Understanding boot entries\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"applying-patches-with-kernel-live-patching_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 8. Applying patches with kernel live patching\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tYou can use the Red Hat Enterprise Linux kernel live patching solution to patch a running kernel without rebooting or restarting any processes.\n\t\t\u003C/p>\u003Cp>\n\t\t\tWith this solution, system administrators:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tCan immediately apply critical security patches to the kernel.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tDo not have to wait for long-running tasks to complete, for users to log off, or for scheduled downtime.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tControl the system’s uptime more and do not sacrifice security or stability.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tNote that not every critical or important CVE will be resolved using the kernel live patching solution. Our goal is to reduce the required reboots for security-related patches, not to eliminate them entirely. For more details about the scope of live patching, see the \u003Cspan class=\"emphasis\">\u003Cem>\u003Cspan class=\"citetitle citetitle\">\u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/2206511\">Is live kernel patch (kpatch) supported in Red Hat Enterprise Linux?\u003C/a>\u003C/span>\u003C/em>\u003C/span>.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tSome incompatibilities exist between kernel live patching and other kernel subcomponents. Read the \u003Ca class=\"link\" href=\"#limitations-of-kpatch_applying-patches-with-kernel-live-patching\" title=\"8.1. Limitations of kpatch\">Limitations of kpatch\u003C/a> carefully before using kernel live patching.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tFor details about the support cadence of kernel live patching updates, see:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/articles/7057149\">Kernel Live Patch Support Cadence Update\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/articles/4499631\">Kernel Live Patch life cycles\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"limitations-of-kpatch_applying-patches-with-kernel-live-patching\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.1. Limitations of kpatch\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist _abstract\">\u003Cul class=\"itemizedlist _abstract\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">kpatch\u003C/code> feature is not a general-purpose kernel upgrade mechanism. It is used for applying simple security and bug fix updates when rebooting the system is not immediately possible.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tDo not use the \u003Ccode class=\"literal\">SystemTap\u003C/code> or \u003Ccode class=\"literal\">kprobe\u003C/code> tools during or after loading a patch. The patch could fail to take effect until after such probes have been removed.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"support-for-third-party-live-patching_applying-patches-with-kernel-live-patching\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.2. Support for third-party live patching\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">kpatch\u003C/code> utility is the only kernel live patching utility supported by Red Hat with the RPM modules provided by Red Hat repositories. Red Hat will not support any live patches which were not provided by Red Hat itself.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIf you require support for an issue that arises with a third-party live patch, Red Hat recommends that you open a case with the live patching vendor at the outset of any investigation in which a root cause determination is necessary. This allows the source code to be supplied if the vendor allows, and for their support organization to provide assistance in root cause determination prior to escalating the investigation to Red Hat Support.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor any system running with third-party live patches, Red Hat reserves the right to ask for reproduction with Red Hat shipped and supported software. In the event that this is not possible, we require a similar system and workload be deployed on your test environment without live patches applied, to confirm if the same behavior is observed.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor more information about third-party software support policies, see \u003Ca class=\"link\" href=\"https://access.redhat.com/articles/1067\">As a customer how does Red Hat support me when I use third party components?\u003C/a>\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"access-to-kernel-live-patches_applying-patches-with-kernel-live-patching\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.3. Access to kernel live patches\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tKernel live patching capability is implemented as a kernel module (\u003Ccode class=\"literal\">kmod\u003C/code>) that is delivered as an RPM package.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tAll customers have access to kernel live patches, which are delivered through the usual channels. However, customers who do not subscribe to an extended support offering will lose access to new patches for the current minor release once the next minor release becomes available. For example, customers with standard subscriptions will only be able to live patch RHEL 9.1 kernel until the RHEL 9.2 kernel is released.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe components of kernel live patching are as follows:\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Kernel patch module\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tThe delivery mechanism for kernel live patches.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tA kernel module which is built specifically for the kernel being patched.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tThe patch module contains the code of the desired fixes for the kernel.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tThe patch modules register with the \u003Ccode class=\"literal\">livepatch\u003C/code> kernel subsystem and provide information about original functions to be replaced, with corresponding pointers to the replacement functions. Kernel patch modules are delivered as RPMs.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tThe naming convention is \u003Ccode class=\"literal\">kpatch_&lt;kernel version&gt;_&lt;kpatch version&gt;_&lt;kpatch release&gt;\u003C/code>. The \"kernel version\" part of the name has \u003Cspan class=\"emphasis\">\u003Cem>dots\u003C/em>\u003C/span> replaced with \u003Cspan class=\"emphasis\">\u003Cem>underscores\u003C/em>\u003C/span>.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">The \u003Ccode class=\"literal\">kpatch\u003C/code> utility\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tA command-line utility for managing patch modules.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">The \u003Ccode class=\"literal\">kpatch\u003C/code> service\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tA \u003Ccode class=\"literal\">systemd\u003C/code> service required by \u003Ccode class=\"literal\">multiuser.target\u003C/code>. This target loads the kernel patch module at boot time.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">The \u003Ccode class=\"literal\">kpatch-dnf\u003C/code> package\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tA DNF plugin delivered in the form of an RPM package. This plugin manages automatic subscription to kernel live patches.\n\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"the-process-of-live-patching-kernels_applying-patches-with-kernel-live-patching\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.4. The process of live patching kernels\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">kpatch\u003C/code> kernel patching solution uses the \u003Ccode class=\"literal\">livepatch\u003C/code> kernel subsystem to redirect old functions to new ones. When a live kernel patch is applied to a system, the following things happen:\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe kernel patch module is copied to the \u003Ccode class=\"literal\">/var/lib/kpatch/\u003C/code> directory and registered for re-application to the kernel by \u003Ccode class=\"literal\">systemd\u003C/code> on next boot.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe kpatch module is loaded into the running kernel and the new functions are registered to the \u003Ccode class=\"literal\">ftrace\u003C/code> mechanism with a pointer to the location in memory of the new code.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWhen the kernel accesses the patched function, it is redirected by the \u003Ccode class=\"literal\">ftrace\u003C/code> mechanism which bypasses the original functions and redirects the kernel to patched version of the function.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"figure\" id=\"applying-patches-with-kernel-live-patching-figu-how-kpatch-works\">\u003Cp class=\"title\">\u003Cstrong>Figure 8.1. How kernel live patching works\u003C/strong>\u003C/p>\u003Cdiv class=\"figure-contents\">\u003Cdiv class=\"mediaobject\">\u003Cimg src=\"https://access.redhat.com/webassets/avalon/d/Red_Hat_Enterprise_Linux-9-Managing_monitoring_and_updating_the_kernel-en-US/images/0753f887dc454f8d70e75ba6ebe5d325/rhel_kpatch_overview.png\" alt=\"rhel kpatch overview\"/>\u003C/div>\u003C/div>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"subscribing-the-currently-installed-kernels-to-the-live-patching-stream_applying-patches-with-kernel-live-patching\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.5. Subscribing the currently installed kernels to the live patching stream\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tA kernel patch module is delivered in an RPM package, specific to the version of the kernel being patched. Each RPM package will be cumulatively updated over time.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe following procedure explains how to subscribe to all future cumulative live patching updates for a given kernel. Because live patches are cumulative, you cannot select which individual patches are deployed for a given kernel.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tRed Hat does not support any third party live patches applied to a Red Hat supported system.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRoot permissions\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Check your kernel version:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>uname -r\u003C/strong>\u003C/span>\n5.14.0-1.el9.x86_64\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSearch for a live patching package that corresponds to the version of your kernel:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf search $(uname -r)\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the live patching package:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install \"kpatch-patch = $(uname -r)\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe command above installs and applies the latest cumulative live patches for that specific kernel only.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the version of a live patching package is 1-1 or higher, the package will contain a patch module. In that case the kernel will be automatically patched during the installation of the live patching package.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe kernel patch module is also installed into the \u003Ccode class=\"literal\">/var/lib/kpatch/\u003C/code> directory to be loaded by the \u003Ccode class=\"literal\">systemd\u003C/code> system and service manager during the future reboots.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tAn empty live patching package will be installed when there are no live patches available for a given kernel. An empty live patching package will have a \u003Cspan class=\"emphasis\">\u003Cem>kpatch_version-kpatch_release\u003C/em>\u003C/span> of 0-0, for example \u003Ccode class=\"literal\">kpatch-patch-5_14_0-1-0-0.x86_64.rpm\u003C/code>. The installation of the empty RPM subscribes the system to all future live patches for the given kernel.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that all installed kernels have been patched:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>kpatch list\u003C/strong>\u003C/span>\nLoaded patch modules:\nkpatch_5_14_0_1_0_1 [enabled]\n\nInstalled patch modules:\nkpatch_5_14_0_1_0_1 (5.14.0-1.el9.x86_64)\n…​\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe output shows that the kernel patch module has been loaded into the kernel that is now patched with the latest fixes from the \u003Ccode class=\"literal\">kpatch-patch-5_14_0-1-0-1.el9.x86_64.rpm\u003C/code> package.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tEntering the \u003Ccode class=\"literal\">kpatch list\u003C/code> command does not return an empty live patching package. Use the \u003Ccode class=\"literal\">rpm -qa | grep kpatch\u003C/code> command instead.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>rpm -qa | grep kpatch\u003C/strong>\u003C/span>\nkpatch-dnf-0.4-3.el9.noarch\nkpatch-0.9.7-2.el9.noarch\nkpatch-patch-5_14_0-284_25_1-0-0.el9_2.x86_64\u003C/pre>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">kpatch(1)\u003C/code> manual page\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_software_with_the_dnf_tool/assembly_installing-rhel-9-content_managing-software-with-the-dnf-tool\">Installing RHEL 9 content\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"automatically-subscribing-any-future-kernel-to-the-live-patching-stream_applying-patches-with-kernel-live-patching\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.6. Automatically subscribing any future kernel to the live patching stream\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">kpatch-dnf\u003C/code> DNF plugin to subscribe your system to fixes delivered by the kernel patch module, also known as kernel live patches. The plugin enables \u003Cspan class=\"strong strong\">\u003Cstrong>automatic\u003C/strong>\u003C/span> subscription for any kernel the system currently uses, and also for kernels \u003Cspan class=\"strong strong\">\u003Cstrong>to-be-installed in the future\u003C/strong>\u003C/span>.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have root permissions.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Check all installed kernels and the kernel you are currently running:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout white-space-pre\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf list installed | grep kernel\u003C/strong>\u003C/span>\nUpdating Subscription Management repositories.\nInstalled Packages\n...\nkernel-core.x86_64            5.14.0-1.el9              @beaker-BaseOS\nkernel-core.x86_64            5.14.0-2.el9              @@commandline\n...\n\n# \u003Cspan class=\"strong strong\">\u003Cstrong>uname -r\u003C/strong>\u003C/span>\n5.14.0-2.el9.x86_64\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">kpatch-dnf\u003C/code> plugin:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install kpatch-dnf\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable automatic subscription to kernel live patches:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf kpatch auto\u003C/strong>\u003C/span>\nUpdating Subscription Management repositories.\nLast metadata expiration check: 1:38:21 ago on Fri 17 Sep 2021 07:29:53 AM EDT.\nDependencies resolved.\n==================================================\n Package                             Architecture\n==================================================\nInstalling:\n kpatch-patch-5_14_0-1               x86_64\n kpatch-patch-5_14_0-2               x86_64\n\nTransaction Summary\n===================================================\nInstall  2 Packages\n…​\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis command subscribes all currently installed kernels to receiving kernel live patches. The command also installs and applies the latest cumulative live patches, if any, for all installed kernels.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn the future, when you update the kernel, live patches will automatically be installed during the new kernel installation process.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe kernel patch module is also installed into the \u003Ccode class=\"literal\">/var/lib/kpatch/\u003C/code> directory to be loaded by the \u003Ccode class=\"literal\">systemd\u003C/code> system and service manager during future reboots.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tAn empty live patching package will be installed when there are no live patches available for a given kernel. An empty live patching package will have a \u003Cspan class=\"emphasis\">\u003Cem>kpatch_version-kpatch_release\u003C/em>\u003C/span> of 0-0, for example \u003Ccode class=\"literal\">kpatch-patch-5_14_0-1-0-0.el9.x86_64.rpm\u003C/code>. The installation of the empty RPM subscribes the system to all future live patches for the given kernel.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that all installed kernels have been patched:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>kpatch list\u003C/strong>\u003C/span>\nLoaded patch modules:\nkpatch_5_14_0_2_0_1 [enabled]\n\nInstalled patch modules:\nkpatch_5_14_0_1_0_1 (5.14.0-1.el9.x86_64)\nkpatch_5_14_0_2_0_1 (5.14.0-2.el9.x86_64)\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe output shows that both the kernel you are running, and the other installed kernel have been patched with fixes from \u003Ccode class=\"literal\">kpatch-patch-5_14_0-1-0-1.el9.x86_64.rpm\u003C/code> and \u003Ccode class=\"literal\">kpatch-patch-5_14_0-2-0-1.el9.x86_64.rpm\u003C/code> packages respectively.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tEntering the \u003Ccode class=\"literal\">kpatch list\u003C/code> command does not return an empty live patching package. Use the \u003Ccode class=\"literal\">rpm -qa | grep kpatch\u003C/code> command instead.\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>rpm -qa | grep kpatch\u003C/strong>\u003C/span>\nkpatch-dnf-0.4-3.el9.noarch\nkpatch-0.9.7-2.el9.noarch\nkpatch-patch-5_14_0-284_25_1-0-0.el9_2.x86_64\u003C/pre>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">kpatch(1)\u003C/code> and \u003Ccode class=\"literal\">dnf-kpatch(8)\u003C/code> manual pages\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_disabling-automatic-subscription-to-the-live-patching-stream_applying-patches-with-kernel-live-patching\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.7. Disabling automatic subscription to the live patching stream\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tWhen you subscribe your system to fixes delivered by the kernel patch module, your subscription is \u003Cspan class=\"strong strong\">\u003Cstrong>automatic\u003C/strong>\u003C/span>. You can disable this feature, and thus disable automatic installation of \u003Ccode class=\"literal\">kpatch-patch\u003C/code> packages.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have root permissions.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Check all installed kernels and the kernel you are currently running:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout white-space-pre\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf list installed | grep kernel\u003C/strong>\u003C/span>\nUpdating Subscription Management repositories.\nInstalled Packages\n...\nkernel-core.x86_64            5.14.0-1.el9              @beaker-BaseOS\nkernel-core.x86_64            5.14.0-2.el9              @@commandline\n...\n\n# \u003Cspan class=\"strong strong\">\u003Cstrong>uname -r\u003C/strong>\u003C/span>\n5.14.0-2.el9.x86_64\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisable automatic subscription to kernel live patches:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout white-space-pre\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf kpatch manual\u003C/strong>\u003C/span>\nUpdating Subscription Management repositories.\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou can check for the successful outcome:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout white-space-pre\"># \u003Cspan class=\"strong strong\">\u003Cstrong>yum kpatch status\u003C/strong>\u003C/span>\n...\nUpdating Subscription Management repositories.\nLast metadata expiration check: 0:30:41 ago on Tue Jun 14 15:59:26 2022.\nKpatch update setting: \u003Cspan class=\"strong strong\">\u003Cstrong>manual\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">kpatch(1)\u003C/code> and \u003Ccode class=\"literal\">dnf-kpatch(8)\u003C/code> manual pages\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"updating-kernel-patch-modules_applying-patches-with-kernel-live-patching\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.8. Updating kernel patch modules\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tKernel patch modules are delivered and applied through RPM packages. The process of updating a cumulative kernel patch module is similar to updating any other RPM package.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe system is subscribed to the live patching stream, as described in \u003Ca class=\"link\" href=\"#subscribing-the-currently-installed-kernels-to-the-live-patching-stream_applying-patches-with-kernel-live-patching\" title=\"8.5. Subscribing the currently installed kernels to the live patching stream\">Subscribing the currently installed kernels to the live patching stream\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUpdate to a new cumulative version for the current kernel:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf update \"kpatch-patch = $(uname -r)\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe command above automatically installs and applies any updates that are available for the currently running kernel. Including any future released cumulative live patches.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAlternatively, update all installed kernel patch modules:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf update \"kpatch-patch\u003C/strong>\u003C/span>\"\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tWhen the system reboots into the same kernel, the kernel is automatically live patched again by the \u003Ccode class=\"literal\">kpatch.service\u003C/code> systemd service.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>\u003Cspan class=\"citetitle citetitle\">\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_software_with_the_dnf_tool/assembly_updating-rhel-9-content_managing-software-with-the-dnf-tool#proc_updating-packages-with-yum_assembly_updating-rhel-9-content\">Updating software packages\u003C/a>\u003C/span>\u003C/em>\u003C/span> in RHEL\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"removing-the-live-patching-package_applying-patches-with-kernel-live-patching\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.9. Removing the live patching package\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tDisable the Red Hat Enterprise Linux kernel live patching solution by removing the live patching package.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRoot permissions\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe live patching package is installed.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSelect the live patching package.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf list installed | grep kpatch-patch\u003C/strong>\u003C/span>\nkpatch-patch-5_14_0-1.x86_64        0-1.el9        @@commandline\n…​\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe example output above lists live patching packages that you installed.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRemove the live patching package.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf remove kpatch-patch-5_14_0-1.x86_64\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tWhen a live patching package is removed, the kernel remains patched until the next reboot, but the kernel patch module is removed from disk. On future reboot, the corresponding kernel will no longer be patched.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tReboot your system.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the live patching package has been removed.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf list installed | grep kpatch-patch\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe command displays no output if the package has been successfully removed.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the kernel live patching solution is disabled.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>kpatch list\u003C/strong>\u003C/span>\nLoaded patch modules:\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe example output shows that the kernel is not patched and the live patching solution is not active because there are no patch modules that are currently loaded.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tCurrently, Red Hat does not support reverting live patches without rebooting your system. In case of any issues, contact our support team.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">kpatch(1)\u003C/code> manual page\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>\u003Cspan class=\"citetitle citetitle\">\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_software_with_the_dnf_tool/assembly_removing-rhel-9-content_managing-software-with-the-dnf-tool#proc_removing-installed-packages-with-yum_assembly_removing-rhel-9-content\">Removing installed packages\u003C/a>\u003C/span>\u003C/em>\u003C/span> in RHEL\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"uninstalling-the-kernel-patch-module_applying-patches-with-kernel-live-patching\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.10. Uninstalling the kernel patch module\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tPrevent the Red Hat Enterprise Linux kernel live patching solution from applying a kernel patch module on subsequent boots.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRoot permissions\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA live patching package is installed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA kernel patch module is installed and loaded.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSelect a kernel patch module:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>kpatch list\u003C/strong>\u003C/span>\nLoaded patch modules:\nkpatch_5_14_0_1_0_1 [enabled]\n\nInstalled patch modules:\nkpatch_5_14_0_1_0_1 (5.14.0-1.el9.x86_64)\n…​\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUninstall the selected kernel patch module.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>kpatch uninstall kpatch_5_14_0_1_0_1\u003C/strong>\u003C/span>\nuninstalling kpatch_5_14_0_1_0_1 (5.14.0-1.el9.x86_64)\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tNote that the uninstalled kernel patch module is still loaded:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>kpatch list\u003C/strong>\u003C/span>\nLoaded patch modules:\nkpatch_5_14_0_1_0_1 [enabled]\n\nInstalled patch modules:\n&lt;\u003Cspan class=\"emphasis\">\u003Cem>NO_RESULT\u003C/em>\u003C/span>&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tWhen the selected module is uninstalled, the kernel remains patched until the next reboot, but the kernel patch module is removed from disk.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tReboot your system.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the kernel patch module is uninstalled.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>kpatch list\u003C/strong>\u003C/span>\nLoaded patch modules:\n…​\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis example output shows no loaded or installed kernel patch modules, therefore the kernel is not patched and the kernel live patching solution is not active.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">kpatch(1)\u003C/code> manual page\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"disabling-kpatch-service_applying-patches-with-kernel-live-patching\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">8.11. Disabling kpatch.service\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tPrevent the Red Hat Enterprise Linux kernel live patching solution from applying all kernel patch modules globally on subsequent boots.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRoot permissions\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA live patching package is installed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA kernel patch module is installed and loaded.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify \u003Ccode class=\"literal\">kpatch.service\u003C/code> is enabled.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl is-enabled kpatch.service\u003C/strong>\u003C/span>\nenabled\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisable \u003Ccode class=\"literal\">kpatch.service\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl disable kpatch.service\u003C/strong>\u003C/span>\nRemoved /etc/systemd/system/multi-user.target.wants/kpatch.service.\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tNote that the applied kernel patch module is still loaded:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>kpatch list\u003C/strong>\u003C/span>\nLoaded patch modules:\nkpatch_5_14_0_1_0_1 [enabled]\n\nInstalled patch modules:\nkpatch_5_14_0_1_0_1 (5.14.0-1.el9.x86_64)\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tReboot your system.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Verify the status of \u003Ccode class=\"literal\">kpatch.service\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl status kpatch.service\u003C/strong>\u003C/span>\n● kpatch.service - \"Apply kpatch kernel patches\"\n   Loaded: loaded (/usr/lib/systemd/system/kpatch.service; disabled; vendor preset: disabled)\n   Active: inactive (dead)\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe example output testifies that \u003Ccode class=\"literal\">kpatch.service\u003C/code> has been disabled and is not running. Thereby, the kernel live patching solution is not active.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the kernel patch module has been unloaded.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>kpatch list\u003C/strong>\u003C/span>\nLoaded patch modules:\n\nInstalled patch modules:\nkpatch_5_14_0_1_0_1 (5.14.0-1.el9.x86_64)\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe example output above shows that a kernel patch module is still installed but the kernel is not patched.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tCurrently, Red Hat does not support reverting live patches without rebooting your system. In case of any issues, contact our support team.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">kpatch(1)\u003C/code> manual page.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/managing-systemd_configuring-basic-system-settings\">Managing systemd\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"keeping-kernel-panic-parameters-disabled-in-virtualized-environments_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 9. Keeping kernel panic parameters disabled in virtualized environments\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tWhen configuring a Virtual Machine in RHEL 9, you should not enable the \u003Ccode class=\"literal\">softlockup_panic\u003C/code> and \u003Ccode class=\"literal\">nmi_watchdog\u003C/code> kernel parameters, because the Virtual Machine might suffer from a spurious soft lockup. And that should not require a kernel panic.\n\t\t\u003C/p>\u003Cp>\n\t\t\tFind the reasons behind this advice in the following sections.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"what-is-a-soft-lockup_keeping-kernel-panic-parameters-disabled-in-virtualized-environments\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">9.1. What is a soft lockup\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tA soft lockup is a situation usually caused by a bug, when a task is executing in kernel space on a CPU without rescheduling. The task also does not allow any other task to execute on that particular CPU. As a result, a warning is displayed to a user through the system console. This problem is also referred to as the soft lockup firing.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>\u003Cspan class=\"citetitle citetitle\">\u003Ca class=\"link\" href=\"https://access.redhat.com/articles/371803\">What is a CPU soft lockup? \u003C/a>\u003C/span>\u003C/em>\u003C/span>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"parameters-controlling-kernel-panic_keeping-kernel-panic-parameters-disabled-in-virtualized-environments\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">9.2. Parameters controlling kernel panic\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe following kernel parameters can be set to control a system’s behavior when a soft lockup is detected.\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">softlockup_panic\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tControls whether or not the kernel will panic when a soft lockup is detected.\n\t\t\t\t\t\t\u003C/p>\u003Crh-table>\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccolgroup>\u003Ccol style=\"width: 29%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 14%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 57%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth style=\"text-align: left; vertical-align: top; \" id=\"idm139825296707440\" scope=\"col\">Type\u003C/th>\u003Cth style=\"text-align: left; vertical-align: top; \" id=\"idm139825296706352\" scope=\"col\">Value\u003C/th>\u003Cth style=\"text-align: left; vertical-align: top; \" id=\"idm139825296705264\" scope=\"col\">Effect\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd style=\"text-align: left; vertical-align: top; \" headers=\"idm139825296707440\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\tInteger\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd style=\"text-align: left; vertical-align: top; \" headers=\"idm139825296706352\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd style=\"text-align: left; vertical-align: top; \" headers=\"idm139825296705264\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\tkernel does not panic on soft lockup\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd style=\"text-align: left; vertical-align: top; \" headers=\"idm139825296707440\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\tInteger\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd style=\"text-align: left; vertical-align: top; \" headers=\"idm139825296706352\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd style=\"text-align: left; vertical-align: top; \" headers=\"idm139825296705264\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\tkernel panics on soft lockup\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tBy default, on RHEL8 this value is 0.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe system needs to detect a hard lockup first to be able to panic. The detection is controlled by the \u003Ccode class=\"literal\">nmi_watchdog\u003C/code> parameter.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">nmi_watchdog\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tControls whether lockup detection mechanisms (\u003Ccode class=\"literal\">watchdogs\u003C/code>) are active or not. This parameter is of integer type.\n\t\t\t\t\t\t\u003C/p>\u003Crh-table>\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccolgroup>\u003Ccol style=\"width: 50%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 50%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth style=\"text-align: left; vertical-align: top; \" id=\"idm139825304344352\" scope=\"col\">Value\u003C/th>\u003Cth style=\"text-align: left; vertical-align: top; \" id=\"idm139825304343264\" scope=\"col\">Effect\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd style=\"text-align: left; vertical-align: top; \" headers=\"idm139825304344352\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t0\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd style=\"text-align: left; vertical-align: top; \" headers=\"idm139825304343264\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\tdisables lockup detector\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd style=\"text-align: left; vertical-align: top; \" headers=\"idm139825304344352\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd style=\"text-align: left; vertical-align: top; \" headers=\"idm139825304343264\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\tenables lockup detector\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe hard lockup detector monitors each CPU for its ability to respond to interrupts.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">watchdog_thresh\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tControls frequency of watchdog \u003Ccode class=\"literal\">hrtimer\u003C/code>, NMI events, and soft/hard lockup thresholds.\n\t\t\t\t\t\t\u003C/p>\u003Crh-table>\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccolgroup>\u003Ccol style=\"width: 50%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 50%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth style=\"text-align: left; vertical-align: top; \" id=\"idm139825297059152\" scope=\"col\">Default threshold\u003C/th>\u003Cth style=\"text-align: left; vertical-align: top; \" id=\"idm139825297058064\" scope=\"col\">Soft lockup threshold\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd style=\"text-align: left; vertical-align: top; \" headers=\"idm139825297059152\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t10 seconds\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd style=\"text-align: left; vertical-align: top; \" headers=\"idm139825297058064\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\t2 * \u003Ccode class=\"literal\">watchdog_thresh\u003C/code>\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tSetting this parameter to zero disables lockup detection altogether.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>\u003Cspan class=\"citetitle citetitle\">\u003Ca class=\"link\" href=\"https://www.kernel.org/doc/Documentation/lockup-watchdogs.txt\">Softlockup detector and hardlockup detector\u003C/a>\u003C/span>\u003C/em>\u003C/span>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>\u003Cspan class=\"citetitle citetitle\">\u003Ca class=\"link\" href=\"https://www.kernel.org/doc/Documentation/sysctl/kernel.txt\">Kernel sysctl\u003C/a>\u003C/span>\u003C/em>\u003C/span>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"spurious-soft-lockups-in-virtualized-environments_keeping-kernel-panic-parameters-disabled-in-virtualized-environments\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">9.3. Spurious soft lockups in virtualized environments\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe soft lockup firing on physical hosts, as described in \u003Ca class=\"link\" href=\"#what-is-a-soft-lockup_keeping-kernel-panic-parameters-disabled-in-virtualized-environments\" title=\"9.1. What is a soft lockup\">What is a soft lockup\u003C/a>, usually represents a kernel or hardware bug. The same phenomenon happening on guest operating systems in virtualized environments may represent a false warning.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tHeavy work-load on a host or high contention over some specific resource such as memory, usually causes a spurious soft lockup firing. This is because the host may schedule out the guest CPU for a period longer than 20 seconds. Then when the guest CPU is again scheduled to run on the host, it experiences a \u003Cspan class=\"emphasis\">\u003Cem>time jump\u003C/em>\u003C/span> which triggers due timers. The timers include also watchdog \u003Ccode class=\"literal\">hrtimer\u003C/code>, which can consequently report a soft lockup on the guest CPU.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tBecause a soft lockup in a virtualized environment may be spurious, you should not enable the kernel parameters that would cause a system panic when a soft lockup is reported on a guest CPU.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tTo understand soft lockups in guests, it is essential to know that the host schedules the guest as a task, and the guest then schedules its own tasks.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>\u003Cspan class=\"citetitle citetitle\">\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/configuring_and_managing_virtualization/index#rhel-virtual-machine-components-and-their-interaction_introducing-virtualization-in-rhel\">Virtual machine components and their interaction\u003C/a>\u003C/span>\u003C/em>\u003C/span>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"adjusting-kernel-parameters-for-database-servers_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 10. Adjusting kernel parameters for database servers\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tThere are different sets of kernel parameters which can affect performance of specific database applications. To secure efficient operation of database servers and databases, configure the respective kernel parameters accordingly.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"introduction-to-databases_adjusting-kernel-parameters-for-database-servers\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">10.1. Introduction to database servers\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tA database server is a service that provides features of a database management system (DBMS). DBMS provides utilities for database administration and interacts with end users, applications, and databases.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tRed Hat Enterprise Linux 9 provides the following database management systems:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>MariaDB 10.5\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>MariaDB 10.11\u003C/strong>\u003C/span> - available since RHEL 9.4\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>MySQL 8.0\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>PostgreSQL 13\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>PostgreSQL 15\u003C/strong>\u003C/span> - available since RHEL 9.2\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>PostgreSQL 16\u003C/strong>\u003C/span> - available since RHEL 9.4\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Redis 6\u003C/strong>\u003C/span>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"parameters-affecting-performance-of-database-applications_adjusting-kernel-parameters-for-database-servers\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">10.2. Parameters affecting performance of database applications\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe following kernel parameters affect performance of database applications.\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">fs.aio-max-nr\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tDefines the maximum number of asynchronous I/O operations the system can handle on the server.\n\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tRaising the \u003Ccode class=\"literal\">fs.aio-max-nr\u003C/code> parameter produces no additional changes beyond increasing the aio limit.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">fs.file-max\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tDefines the maximum number of file handles (temporary file names or IDs assigned to open files) the system supports at any instance.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe kernel dynamically allocates file handles whenever a file handle is requested by an application. The kernel however does not free these file handles when they are released by the application. The kernel recycles these file handles instead. This means that over time the total number of allocated file handles will increase even though the number of currently used file handles may be low.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">kernel.shmall\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tDefines the total number of shared memory pages that can be used system-wide. To use the entire main memory, the value of the \u003Ccode class=\"literal\">kernel.shmall\u003C/code> parameter should be ≤ total main memory size.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">kernel.shmmax\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tDefines the maximum size in bytes of a single shared memory segment that a Linux process can allocate in its virtual address space.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">kernel.shmmni\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tDefines the maximum number of shared memory segments the database server is able to handle.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">net.ipv4.ip_local_port_range\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tDefines the port range the system can use for programs which want to connect to a database server without a specific port number.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">net.core.rmem_default\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tDefines the default receive socket memory through Transmission Control Protocol (TCP).\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">net.core.rmem_max\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tDefines the maximum receive socket memory through Transmission Control Protocol (TCP).\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">net.core.wmem_default\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tDefines the default send socket memory through Transmission Control Protocol (TCP).\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">net.core.wmem_max\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tDefines the maximum send socket memory through Transmission Control Protocol (TCP).\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">vm.dirty_bytes / vm.dirty_ratio\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tDefines a threshold in bytes / in percentage of dirty-able memory at which a process generating dirty data is started in the \u003Ccode class=\"literal\">write()\u003C/code> function.\n\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Either\u003C/strong>\u003C/span> \u003Ccode class=\"literal\">vm.dirty_bytes\u003C/code> \u003Cspan class=\"strong strong\">\u003Cstrong>or\u003C/strong>\u003C/span> \u003Ccode class=\"literal\">vm.dirty_ratio\u003C/code> can be specified at a time.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">vm.dirty_background_bytes / vm.dirty_background_ratio\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tDefines a threshold in bytes / in percentage of dirty-able memory at which the kernel tries to actively write dirty data to hard-disk.\n\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Either\u003C/strong>\u003C/span> \u003Ccode class=\"literal\">vm.dirty_background_bytes\u003C/code> \u003Cspan class=\"strong strong\">\u003Cstrong>or\u003C/strong>\u003C/span> \u003Ccode class=\"literal\">vm.dirty_background_ratio\u003C/code> can be specified at a time.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">vm.dirty_writeback_centisecs\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tDefines a time interval between periodic wake-ups of the kernel threads responsible for writing dirty data to hard-disk.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThis kernel parameters measures in 100th’s of a second.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">vm.dirty_expire_centisecs\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tDefines the time after which dirty data is old enough to be written to hard-disk.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThis kernel parameters measures in 100th’s of a second.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>\u003Cspan class=\"citetitle citetitle\">\u003Ca class=\"link\" href=\"https://access.redhat.com/articles/45002#control-parameters-4\">Dirty pagecache writeback and vm.dirty parameters\u003C/a>\u003C/span>\u003C/em>\u003C/span>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"getting-started-with-kernel-logging_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 11. Getting started with kernel logging\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tLog files are files that contain messages about the system, including the kernel, services, and applications running on it. The logging system in Red Hat Enterprise Linux is based on the built-in \u003Cspan class=\"strong strong\">\u003Cstrong>syslog\u003C/strong>\u003C/span> protocol. Various utilities use this system to record events and organize them into log files. These files are useful when auditing the operating system or troubleshooting problems.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"what-is-the-kernel-ring-buffer_getting-started-with-kernel-logging\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">11.1. What is the kernel ring buffer\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tDuring the boot process, the console provides a lot of important information about the initial phase of the system startup. To avoid loss of the early messages the kernel utilizes what is called a ring buffer. This buffer stores all messages, including boot messages, generated by the \u003Ccode class=\"literal\">printk()\u003C/code> function within the kernel code. The messages from the kernel ring buffer are then read and stored in log files on permanent storage, for example, by the \u003Ccode class=\"literal\">syslog\u003C/code> service.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe buffer mentioned above is a cyclic data structure which has a fixed size, and is hard-coded into the kernel. Users can display data stored in the kernel ring buffer through the \u003Ccode class=\"literal\">dmesg\u003C/code> command or the \u003Ccode class=\"literal\">/var/log/boot.log\u003C/code> file. When the ring buffer is full, the new data overwrites the old.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">syslog(2)\u003C/code> and \u003Ccode class=\"literal\">dmesg(1)\u003C/code> manual page\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"role-of-printk-on-log-levels-and-kernel-logging_getting-started-with-kernel-logging\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">11.2. Role of printk on log-levels and kernel logging\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tEach message the kernel reports has a log-level associated with it that defines the importance of the message. The kernel ring buffer, as described in \u003Ca class=\"link\" href=\"#what-is-the-kernel-ring-buffer_getting-started-with-kernel-logging\" title=\"11.1. What is the kernel ring buffer\">What is the kernel ring buffer\u003C/a>, collects kernel messages of all log-levels. It is the \u003Ccode class=\"literal\">kernel.printk\u003C/code> parameter that defines what messages from the buffer are printed to the console.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe log-level values break down in this order:\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">0\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tKernel emergency. The system is unusable.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">1\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tKernel alert. Action must be taken immediately.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">2\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tCondition of the kernel is considered critical.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">3\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tGeneral kernel error condition.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">4\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tGeneral kernel warning condition.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">5\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tKernel notice of a normal but significant condition.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">6\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tKernel informational message.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">7\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tKernel debug-level messages.\n\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cp>\n\t\t\t\tBy default, \u003Ccode class=\"literal\">kernel.printk\u003C/code> in RHEL 9 contains the following four values:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>sysctl kernel.printk\u003C/strong>\u003C/span>\nkernel.printk = 7\t4\t1\t7\u003C/pre>\u003Cp>\n\t\t\t\tThe four values define the following, in order:\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tConsole log-level, defines the lowest priority of messages printed to the console.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tDefault log-level for messages without an explicit log-level attached to them.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSets the lowest possible log-level configuration for the console log-level.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSets default value for the console log-level at boot time.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEach of these values above defines a different rule for handling error messages.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe default \u003Ccode class=\"literal\">7 4 1 7\u003C/code> \u003Ccode class=\"literal\">printk\u003C/code> value allows for better debugging of kernel activity. However, when coupled with a serial console, this \u003Ccode class=\"literal\">printk\u003C/code> setting might cause intense I/O bursts that might lead to a RHEL system becoming temporarily unresponsive. To avoid these situations, setting a \u003Ccode class=\"literal\">printk\u003C/code> value of \u003Ccode class=\"literal\">4 4 1 7\u003C/code> typically works, but at the expense of losing the extra debugging information.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tAlso note that certain kernel command line parameters, such as \u003Ccode class=\"literal\">quiet\u003C/code> or \u003Ccode class=\"literal\">debug\u003C/code>, change the default \u003Ccode class=\"literal\">kernel.printk\u003C/code> values.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">syslog(2)\u003C/code> manual page\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_reinstalling-grub_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 12. Reinstalling GRUB\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tYou can reinstall the GRUB boot loader to fix certain problems, usually caused by an incorrect installation of GRUB, missing files, or a broken system. You can resolve these issues by restoring the missing files and updating the boot information.\n\t\t\u003C/p>\u003Cp>\n\t\t\tReasons to reinstall GRUB:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tUpgrading the GRUB boot loader packages.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tAdding the boot information to another drive.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tThe user requires the GRUB boot loader to control installed operating systems. However, some operating systems are installed with their own boot loaders and reinstalling GRUB returns control to the desired operating system.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tGRUB restores files only if they are not corrupted.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"proc_reinstalling-grub-on-bios-based-machines_assembly_reinstalling-grub\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">12.1. Reinstalling GRUB on BIOS-based machines\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can reinstall the GRUB boot loader on your BIOS-based system. Always reinstall GRUB after updating the GRUB packages.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThis overwrites the existing GRUB to install the new GRUB. Ensure that the system does not cause data corruption or boot crash during the installation.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReinstall GRUB on the device where it is installed. For example, if \u003Ccode class=\"literal\">sda\u003C/code> is your device:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grub2-install \u003Cspan class=\"emphasis\">\u003Cem>/dev/sda\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReboot your system for the changes to take effect:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>reboot\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">grub-install(1)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_reinstalling-grub-on-uefi-based-machines_assembly_reinstalling-grub\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">12.2. Reinstalling GRUB on UEFI-based machines\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can reinstall the GRUB boot loader on your UEFI-based system.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tEnsure that the system does not cause data corruption or boot crash during the installation.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReinstall the \u003Ccode class=\"literal\">grub2-efi\u003C/code> and \u003Ccode class=\"literal\">shim\u003C/code> boot loader files:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>yum reinstall grub2-efi shim\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReboot your system for the changes to take effect:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>reboot\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"reinstalling-grub-on-ibm-power-machines_assembly_reinstalling-grub\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">12.3. Reinstalling GRUB on IBM Power machines\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can reinstall the GRUB boot loader on the Power PC Reference Platform (PReP) boot partition of your IBM Power system. Always reinstall GRUB after updating the GRUB packages.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThis overwrites the existing GRUB to install the new GRUB. Ensure that the system does not cause data corruption or boot crash during the installation.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDetermine the disk partition that stores GRUB:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>bootlist -m normal -o\u003C/strong>\u003C/span>\n\u003Cspan class=\"emphasis\">\u003Cem>sda1\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReinstall GRUB on the disk partition:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grub2-install \u003Cspan class=\"emphasis\">\u003Cem>partition\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReplace \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>partition\u003C/em>\u003C/span>\u003C/code> with the GRUB partition that you found in the previous step, such as \u003Ccode class=\"literal\">/dev/sda1\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReboot your system for the changes to take effect:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>reboot\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">grub-install(1)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_resetting-grub_assembly_reinstalling-grub\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">12.4. Resetting GRUB\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tResetting GRUB completely removes all GRUB configuration files and system settings and reinstalls the bootloader. You can reset all the configuration settings to their default values, and thus fix failures caused by corrupted files and incorrect configuration.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe following procedure will remove all the customization the user has made.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRemove the configuration files.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>rm /etc/grub.d/\u003C/strong>\u003C/span>*\n# \u003Cspan class=\"strong strong\">\u003Cstrong>rm /etc/sysconfig/grub\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReinstall packages.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn BIOS-based machines, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>yum reinstall grub2-tools\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn UEFI-based machines, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>yum reinstall grub2-efi shim grub2-tools\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRebuild the \u003Ccode class=\"literal filename\">grub.cfg\u003C/code> file for the changes to take effect.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn BIOS-based machines, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grub2-mkconfig -o /boot/grub2/grub.cfg\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn UEFI-based machines, enter:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grub2-mkconfig -o /boot/grub2/grub.cfg\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFollow \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#assembly_reinstalling-grub_managing-monitoring-and-updating-the-kernel\">Reinstalling GRUB\u003C/a> procedure to restore GRUB on the \u003Ccode class=\"literal\">/boot/\u003C/code> partition.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"installing-kdump_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 13. Installing kdump\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tThe \u003Ccode class=\"literal\">kdump\u003C/code> service is installed and activated by default on the new versions of Red Hat Enterprise Linux 9 installations. You will learn what the \u003Ccode class=\"literal\">kdump\u003C/code> is and its installation procedures if it is not enabled by default.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"what-is-kdumpinstalling-kdump\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">13.1. What is kdump\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\u003Ccode class=\"literal service\">kdump\u003C/code> is a service that provides a crash dumping mechanism and generates a dump file, known as crash dump or a \u003Ccode class=\"literal\">vmcore\u003C/code> file. The \u003Ccode class=\"literal\">vmcore\u003C/code> file has the contents of the system memory that helps in analysis and troubleshooting. \u003Ccode class=\"literal service\">kdump\u003C/code> uses the \u003Ccode class=\"literal\">kexec\u003C/code> system call to boot into the second kernel, a \u003Cspan class=\"emphasis\">\u003Cem>capture kernel\u003C/em>\u003C/span> without a reboot and then captures the contents of the crashed kernel’s memory. These contents are saved into a file. The second kernel is available in a reserved part of the system memory.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tA kernel crash dump can be the only information available if a system failure occur. Therefore, operational \u003Ccode class=\"literal service\">kdump\u003C/code> is important in mission-critical environments. Red Hat advises to regularly update and test \u003Ccode class=\"literal package\">kexec-tools\u003C/code> in your normal kernel update cycle. This is important when you install new kernel features.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tYou can enable \u003Ccode class=\"literal service\">kdump\u003C/code> for all installed kernels on a machine or for specified kernels only. This is useful when there are multiple kernels used on a machine, some of which are stable enough that there is no concern that they could crash. The system creates a default \u003Ccode class=\"literal\">/etc/kdump.conf\u003C/code> file when you install \u003Ccode class=\"literal\">kdump\u003C/code>. The \u003Ccode class=\"literal\">/etc/kdump.conf\u003C/code> file includes the default minimum \u003Ccode class=\"literal\">kdump\u003C/code> configuration, which you can edit to customize the \u003Ccode class=\"literal\">kdump\u003C/code> configuration.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"installing-kdump-anacondainstalling-kdump\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">13.2. Installing kdump using Anaconda\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Cspan class=\"strong strong\">\u003Cstrong>Anaconda\u003C/strong>\u003C/span> installer provides a graphical interface screen for \u003Ccode class=\"literal\">kdump\u003C/code> configuration during an interactive installation. You can enable \u003Ccode class=\"literal\">kdump\u003C/code> and reserve the required amount of memory.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tOn the Anaconda installer, click \u003Cspan class=\"strong strong\">\u003Cstrong>KDUMP\u003C/strong>\u003C/span> and enable \u003Ccode class=\"literal\">kdump\u003C/code>:\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIn \u003Cspan class=\"strong strong\">\u003Cstrong>Kdump Memory Reservation\u003C/strong>\u003C/span>, select \u003Cspan class=\"strong strong\">\u003Cstrong>Manual\u003C/strong>\u003C/span>` if you must customize the memory reserve.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn \u003Cspan class=\"strong strong\">\u003Cstrong>KDUMP &gt; Memory To Be Reserved (MB)\u003C/strong>\u003C/span>, set the required memory reserve for \u003Ccode class=\"literal\">kdump\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cp id=\"installing-kdump-command-lineinstalling-kdump\" class=\"simpara\">\n\t\t\t\t\t\t= Installing kdump on the command line\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tInstallation options such as custom \u003Cspan class=\"strong strong\">\u003Cstrong>Kickstart\u003C/strong>\u003C/span> installations, in some cases does \u003Cspan class=\"strong strong\">\u003Cstrong>not\u003C/strong>\u003C/span> install or enable \u003Ccode class=\"literal\">kdump\u003C/code> by default. The following procedure helps you enable \u003Ccode class=\"literal\">kdump\u003C/code> in this case.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAn active RHEL subscription.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA repository containing the \u003Ccode class=\"literal package\">kexec-tools\u003C/code> package for your system CPU architecture.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFulfilled requirements for \u003Ccode class=\"literal\">kdump\u003C/code> configurations and targets. For details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel\">Supported kdump configurations and targets\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCheck if \u003Ccode class=\"literal\">kdump\u003C/code> is installed on your system:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># rpm -q kexec-tools\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOutput if the package is installed:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># kexec-tools-2.0.22-13.el9.x86_64\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOutput if the package is not installed:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">package kexec-tools is not installed\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall \u003Ccode class=\"literal\">kdump\u003C/code> and other necessary packages:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># dnf install kexec-tools\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-kdump-on-the-command-line_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 14. Configuring kdump on the command line\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tThe memory for \u003Ccode class=\"literal\">kdump\u003C/code> is reserved during the system boot. The memory size is configured in the system’s Grand Unified Bootloader (GRUB) configuration file. The memory size depends on the \u003Ccode class=\"literal\">crashkernel=\u003C/code> value specified in the configuration file and the size of the system’s physical memory.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"estimating-the-kdump-size_configuring-kdump-on-the-command-line\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.1. Estimating the kdump size\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tWhen planning and building your \u003Ccode class=\"literal\">kdump\u003C/code> environment, it is important to know the space required by the crash dump file.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">makedumpfile --mem-usage\u003C/code> command estimates the space required by the crash dump file. It generates a memory usage report. The report helps you decide the dump level and the pages that are safe to exclude.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnter the following command to generate a memory usage report:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>makedumpfile --mem-usage /proc/kcore\u003C/strong>\u003C/span>\n\n\nTYPE        PAGES    EXCLUDABLE    DESCRIPTION\n-------------------------------------------------------------\nZERO          501635      yes        Pages filled with zero\nCACHE         51657       yes        Cache pages\nCACHE_PRIVATE 5442        yes        Cache pages + private\nUSER          16301       yes        User process pages\nFREE          77738211    yes        Free pages\nKERN_DATA     1333192     no         Dumpable kernel data\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe \u003Ccode class=\"literal\">makedumpfile --mem-usage\u003C/code> command reports required memory in pages. This means that you must calculate the size of memory in use against the kernel page size.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tBy default the RHEL kernel uses 4 KB sized pages on AMD64 and Intel 64 CPU architectures, and 64 KB sized pages on IBM POWER architectures.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"configuring-kdump-memory-usage-on-rhel-9_configuring-kdump-on-the-command-line\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.2. Configuring kdump memory usage on RHEL 9\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">kexec-tools\u003C/code> package maintains the default \u003Ccode class=\"literal\">crashkernel=\u003C/code> memory reservation values. The \u003Ccode class=\"literal\">kdump\u003C/code> service uses the default value to reserve the crash kernel memory for each kernel. The default value can also serve as the reference base value to estimate the required memory size when you set the \u003Ccode class=\"literal\">crashkernel=\u003C/code> value manually. The minimum size of the crash kernel can vary depending on the hardware and machine specifications.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe automatic memory allocation for \u003Ccode class=\"literal\">kdump\u003C/code> also varies based on the system hardware architecture and available memory size. For example, on AMD64 and Intel 64-bit architectures, the default value for the \u003Ccode class=\"literal\">crashkernel=\u003C/code> parameter will work only when the available memory is more than 1 GB. The \u003Ccode class=\"literal\">kexec-tools\u003C/code> utility configures the following default memory reserves on AMD64 and Intel 64-bit architecture:\n\t\t\t\u003C/p>\u003Cpre class=\"screen\">crashkernel=1G-4G:192M,4G-64G:256M,64G:512M\u003C/pre>\u003Cp>\n\t\t\t\tYou can also run \u003Ccode class=\"literal\">kdumpctl estimate\u003C/code> to get an approximate value without triggering a crash. The estimated \u003Ccode class=\"literal\">crashkernel=\u003C/code> value might not be an exact one but can serve as a reference to set an appropriate \u003Ccode class=\"literal\">crashkernel=\u003C/code> value.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe \u003Ccode class=\"literal\">crashkernel=auto\u003C/code> option in the boot command line is no longer supported on RHEL 9 and later releases.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have root permissions on the system.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have fulfilled \u003Ccode class=\"literal\">kdump\u003C/code> requirements for configurations and targets. For details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_monitoring_and_updating_the_kernel/supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel\">Supported kdump configurations and targets\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have installed the \u003Ccode class=\"literal\">zipl\u003C/code> utility if it is the IBM Z system.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the default value for crash kernel:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># kdumpctl reset-crashkernel --kernel=ALL\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tWhen configuring the \u003Ccode class=\"literal\">crashkernel=\u003C/code> value, test the configuration by rebooting the system with \u003Ccode class=\"literal\">kdump\u003C/code> enabled. If the \u003Ccode class=\"literal\">kdump\u003C/code> kernel fails to boot, increase the memory size gradually to set an acceptable value.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo use a custom \u003Ccode class=\"literal\">crashkernel=\u003C/code> value:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tConfigure the required memory reserve.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">crashkernel=192M\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOptionally, you can set the amount of reserved memory to a variable depending on the total amount of installed memory by using the syntax \u003Ccode class=\"literal\">crashkernel=\u003Cspan class=\"emphasis\">\u003Cem>&lt;range1&gt;:&lt;size1&gt;,&lt;range2&gt;:&lt;size2&gt;\u003C/em>\u003C/span>\u003C/code>. For example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">crashkernel=1G-4G:192M,2G-64G:256M\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe example reserves 192 MB of memory if the total amount of system memory is 1 GB or higher and lower than 4 GB. If the total amount of memory is more than 4 GB, 256 MB is reserved for \u003Ccode class=\"literal\">kdump\u003C/code>.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOptional: Offset the reserved memory.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tSome systems require to reserve memory with a certain fixed offset since \u003Ccode class=\"literal\">crashkernel\u003C/code> reservation is very early, and it wants to reserve some area for special usage. If the offset is set, the reserved memory begins there. To offset the reserved memory, use the following syntax:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">crashkernel=192M@16M\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe example reserves 192 MB of memory starting at 16 MB (physical address 0x01000000). If you offset to 0 or do not specify a value, \u003Ccode class=\"literal\">kdump\u003C/code> offsets the reserved memory automatically. You can also offset memory when setting a variable memory reservation by specifying the offset as the last value. For example, \u003Ccode class=\"literal\">crashkernel=1G-4G:192M,2G-64G:256M@16M\u003C/code>.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tUpdate the bootloader configuration:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># grubby --update-kernel ALL --args \"crashkernel=\u003Cspan class=\"emphasis\">\u003Cem>&lt;custom-value&gt;\u003C/em>\u003C/span>\"\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>&lt;custom-value&gt;\u003C/em>\u003C/span>\u003C/code> must contain the custom \u003Ccode class=\"literal option\">crashkernel=\u003C/code> value that you have configured for the crash kernel.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReboot for changes to take effect:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># reboot\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Verification\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe commands to test \u003Ccode class=\"literal\">kdump\u003C/code> configuration will cause the kernel to crash with data loss. Follow the instructions with care. You must not use an active production system to test the kdump configuration.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tCause the kernel to crash by activating the \u003Ccode class=\"literal\">sysrq\u003C/code> key. The \u003Ccode class=\"literal\">address-YYYY-MM-DD-HH:MM:SS/vmcore\u003C/code> file is saved to the target location as specified in the \u003Ccode class=\"literal\">/etc/kdump.conf\u003C/code> file. If you select the default target location, the \u003Ccode class=\"literal\">vmcore\u003C/code> file is saved in the partition mounted under \u003Ccode class=\"literal\">/var/crash/\u003C/code>.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tActivate the \u003Ccode class=\"literal\">sysrq\u003C/code> key to boot into the \u003Ccode class=\"literal\">kdump\u003C/code> kernel:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># echo c &gt; /proc/sysrq-trigger\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe command causes kernel to crash and reboots the kernel if required.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tDisplay the \u003Ccode class=\"literal\">/etc/kdump.conf\u003C/code> file and check if the \u003Ccode class=\"literal\">vmcore\u003C/code> file is saved in the target destination.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/32726\">How to manually modify the boot parameter in grub before the system boots\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">grubby(8)\u003C/code> man page on your system.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-the-kdump-target_configuring-kdump-on-the-command-line\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.3. Configuring the kdump target\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe crash dump is usually stored as a file in a local file system, written directly to a device. Optionally, you can set up for the crash dump to be sent over a network by using the \u003Ccode class=\"literal\">NFS\u003C/code> or \u003Ccode class=\"literal\">SSH\u003C/code> protocols. Only one of these options to preserve a crash dump file can be set at a time. The default behavior is to store it in the \u003Ccode class=\"literal\">/var/crash/\u003C/code> directory of the local file system.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have root permissions on the system.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFulfilled requirements for \u003Ccode class=\"literal\">kdump\u003C/code> configurations and targets. For details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel\">Supported kdump configurations and targets\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo store the crash dump file in \u003Ccode class=\"literal\">/var/crash/\u003C/code> directory of the local file system, edit the \u003Ccode class=\"literal\">/etc/kdump.conf\u003C/code> file and specify the path:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">path /var/crash\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe option \u003Ccode class=\"literal\">path /var/crash\u003C/code> represents the path to the file system in which \u003Ccode class=\"literal\">kdump\u003C/code> saves the crash dump file.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tWhen you specify a dump target in the \u003Ccode class=\"literal\">/etc/kdump.conf\u003C/code> file, then the path is \u003Cspan class=\"strong strong\">\u003Cstrong>relative\u003C/strong>\u003C/span> to the specified dump target.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tWhen you do not specify a dump target in the \u003Ccode class=\"literal\">/etc/kdump.conf\u003C/code> file, then the path represents the \u003Cspan class=\"strong strong\">\u003Cstrong>absolute\u003C/strong>\u003C/span> path from the root directory.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDepending on what is mounted in the current system, the dump target and the adjusted dump path are configured automatically.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo secure the crash dump file and the accompanying files produced by \u003Ccode class=\"literal\">kdump\u003C/code>, you should set up proper attributes for the target destination directory, such as user permissions and SELinux contexts. Additionally, you can define a script, for example \u003Ccode class=\"literal\">kdump_post.sh\u003C/code> in the \u003Ccode class=\"literal\">kdump.conf\u003C/code> file as follows:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">kdump_post &lt;path_to_kdump_post.sh&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">kdump_post\u003C/code> directive specifies a shell script or a command that executes \u003Cspan class=\"strong strong\">\u003Cstrong>after\u003C/strong>\u003C/span> \u003Ccode class=\"literal\">kdump\u003C/code> has completed capturing and saving a crash dump to the specified destination. You can use this mechanism to extend the functionality of \u003Ccode class=\"literal\">kdump\u003C/code> to perform actions including the adjustments in file permissions.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">kdump\u003C/code> target configuration\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cpre class=\"literallayout\"># *grep -v ^# /etc/kdump.conf | grep -v ^$*\next4 /dev/mapper/vg00-varcrashvol\npath /var/crash\ncore_collector makedumpfile -c --message-level 1 -d 31\u003C/pre>\u003Cp>\n\t\t\t\tHere, the dump target is specified (\u003Ccode class=\"literal\">ext4 /dev/mapper/vg00-varcrashvol\u003C/code>), and therefore mounted at \u003Ccode class=\"literal\">/var/crash\u003C/code>. The \u003Ccode class=\"literal\">path\u003C/code> option is also set to \u003Ccode class=\"literal\">/var/crash\u003C/code>, so the \u003Ccode class=\"literal\">kdump\u003C/code> saves the \u003Ccode class=\"literal\">vmcore\u003C/code> file in the \u003Ccode class=\"literal\">/var/crash/var/crash\u003C/code> directory.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo change the local directory for saving the crash dump, edit the \u003Ccode class=\"literal\">/etc/kdump.conf\u003C/code> configuration file as a \u003Ccode class=\"literal\">root\u003C/code> user:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tRemove the hash sign (\u003Ccode class=\"literal\">#\u003C/code>) from the beginning of the \u003Ccode class=\"literal\">#path /var/crash\u003C/code> line.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tReplace the value with the intended directory path. For example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">path /usr/local/cores\u003C/pre>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tIn Red Hat Enterprise Linux 9, the directory defined as the \u003Ccode class=\"literal\">kdump\u003C/code> target using the \u003Ccode class=\"literal\">path\u003C/code> directive must exist when the \u003Ccode class=\"literal\">kdump\u003C/code> \u003Ccode class=\"literal\">systemd\u003C/code> service starts to avoid failures. This behavior is different from versions earlier than RHEL, where the directory is created automatically if it did not exist when the service started.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo write the file to a different partition, edit the \u003Ccode class=\"literal\">/etc/kdump.conf\u003C/code> configuration file:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRemove the hash sign (\u003Ccode class=\"literal\">#\u003C/code>) from the beginning of the \u003Ccode class=\"literal\">#ext4\u003C/code> line, depending on your choice.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tdevice name (the \u003Ccode class=\"literal\">#ext4 /dev/vg/lv_kdump\u003C/code> line)\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tfile system label (the \u003Ccode class=\"literal\">#ext4 LABEL=/boot\u003C/code> line)\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tUUID (the \u003Ccode class=\"literal\">#ext4 UUID=03138356-5e61-4ab3-b58e-27507ac41937\u003C/code> line)\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tChange the file system type and the device name, label or UUID, to the required values. The correct syntax for specifying UUID values is both \u003Ccode class=\"literal\">UUID=\"correct-uuid\"\u003C/code> and \u003Ccode class=\"literal\">UUID=correct-uuid\u003C/code>. For example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">ext4 UUID=03138356-5e61-4ab3-b58e-27507ac41937\u003C/pre>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tIt is recommended to specify storage devices by using a \u003Ccode class=\"literal\">LABEL=\u003C/code> or \u003Ccode class=\"literal\">UUID=\u003C/code>. Disk device names such as \u003Ccode class=\"literal\">/dev/sda3\u003C/code> are not guaranteed to be consistent across reboot.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\t\t\t\t\tWhen you use Direct Access Storage Device (DASD) on IBM Z hardware, ensure the dump devices are correctly specified in \u003Ccode class=\"literal\">/etc/dasd.conf\u003C/code> before proceeding with \u003Ccode class=\"literal\">kdump\u003C/code>.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo write the crash dump directly to a device, edit the \u003Ccode class=\"literal\">/etc/kdump.conf\u003C/code> configuration file:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tRemove the hash sign (\u003Ccode class=\"literal\">#\u003C/code>) from the beginning of the \u003Ccode class=\"literal\">#raw /dev/vg/lv_kdump\u003C/code> line.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tReplace the value with the intended device name. For example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">raw /dev/sdb1\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo store the crash dump to a remote machine by using the \u003Ccode class=\"literal\">NFS\u003C/code> protocol:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tRemove the hash sign (\u003Ccode class=\"literal\">#\u003C/code>) from the beginning of the \u003Ccode class=\"literal\">#nfs my.server.com:/export/tmp\u003C/code> line.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tReplace the value with a valid hostname and directory path. For example:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">nfs penguin.example.com:/export/cores\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRestart the \u003Ccode class=\"literal\">kdump\u003C/code> service for the changes to take effect:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">sudo systemctl restart kdump.service\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tWhile using the NFS directive to specify the NFS target, \u003Ccode class=\"literal\">kdump.service\u003C/code> automatically attempts to mount the NFS target to check the disk space. There is no need to mount the NFS target in advance. To prevent \u003Ccode class=\"literal\">kdump.service\u003C/code> from mounting the target, use the \u003Ccode class=\"literal\">dracut_args --mount\u003C/code> directive in \u003Ccode class=\"literal\">kdump.conf\u003C/code>. This will enable \u003Ccode class=\"literal\">kdump.service\u003C/code> to call the \u003Ccode class=\"literal\">dracut\u003C/code> utility with the \u003Ccode class=\"literal\">--mount\u003C/code> argument to specify the NFS target.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo store the crash dump to a remote machine by using the SSH protocol:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tRemove the hash sign (\u003Ccode class=\"literal\">#\u003C/code>) from the beginning of the \u003Ccode class=\"literal\">#ssh user@my.server.com\u003C/code> line.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tReplace the value with a valid username and hostname.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tInclude your SSH key in the configuration.\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tRemove the hash sign from the beginning of the \u003Ccode class=\"literal\">#sshkey /root/.ssh/kdump_id_rsa\u003C/code> line.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tChange the value to the location of a key valid on the server you are trying to dump to. For example:\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">ssh john@penguin.example.com\nsshkey /root/.ssh/mykey\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"_additional-resources _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\u003Ca class=\"link\" href=\"#files-produced-by-kdump-after-system-crash_configuring-kdump-on-the-command-line\" title=\"14.8. Files produced by kdump after system crash\">Files produced by kdump after system crash\u003C/a>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-the-kdump-core-collectorconfiguring-kdump-on-the-command-line\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.4. Configuring the kdump core collector\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">kdump\u003C/code> service uses a \u003Ccode class=\"literal\">core_collector\u003C/code> program to capture the crash dump image. In RHEL, the \u003Ccode class=\"literal\">makedumpfile\u003C/code> utility is the default core collector. It helps shrink the dump file by:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCompressing the size of a crash dump file and copying only necessary pages by using various dump levels.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tExcluding unnecessary crash dump pages.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFiltering the page types to be included in the crash dump.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Syntax\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\t\n\u003Cpre class=\"screen\">core_collector makedumpfile -l --message-level 1 -d 31\u003C/pre>\n\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Options\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">-c\u003C/code>, \u003Ccode class=\"literal\">-l\u003C/code> or \u003Ccode class=\"literal\">-p\u003C/code>: specify compress dump file format by each page using either, \u003Ccode class=\"literal\">zlib\u003C/code> for \u003Ccode class=\"literal\">-c\u003C/code> option, \u003Ccode class=\"literal\">lzo\u003C/code> for \u003Ccode class=\"literal\">-l\u003C/code> option or \u003Ccode class=\"literal\">snappy\u003C/code> for \u003Ccode class=\"literal\">-p\u003C/code> option.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">-d\u003C/code> \u003Ccode class=\"literal\">(dump_level)\u003C/code>: excludes pages so that they are not copied to the dump file.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">--message-level\u003C/code> : specify the message types. You can restrict outputs printed by specifying \u003Ccode class=\"literal\">message_level\u003C/code> with this option. For example, specifying 7 as \u003Ccode class=\"literal\">message_level\u003C/code> prints common messages and error messages. The maximum value of \u003Ccode class=\"literal\">message_level\u003C/code> is 31.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have root permissions on the system.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFulfilled requirements for \u003Ccode class=\"literal\">kdump\u003C/code> configurations and targets. For details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index#supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel\">Supported kdump configurations and targets\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAs a \u003Ccode class=\"literal\">root\u003C/code>, edit the \u003Ccode class=\"literal\">/etc/kdump.conf\u003C/code> configuration file and remove the hash sign (\"#\") from the beginning of the \u003Ccode class=\"literal\">#core_collector makedumpfile -l --message-level 1 -d 31\u003C/code>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnter the following command to enable crash dump file compression:\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cpre class=\"screen\">core_collector makedumpfile -l --message-level 1 -d 31\u003C/pre>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">-l\u003C/code> option specifies the \u003Ccode class=\"literal\">dump\u003C/code> compressed file format. The \u003Ccode class=\"literal\">-d\u003C/code> option specifies dump level as 31. The \u003Ccode class=\"literal\">--message-level\u003C/code> option specifies message level as 1.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tAlso, consider following examples with the \u003Ccode class=\"literal\">-c\u003C/code> and \u003Ccode class=\"literal\">-p\u003C/code> options:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo compress a crash dump file by using \u003Ccode class=\"literal\">-c\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">core_collector makedumpfile -c -d 31 --message-level 1\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo compress a crash dump file by using \u003Ccode class=\"literal\">-p\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">core_collector makedumpfile -p -d 31 --message-level 1\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">makedumpfile(8)\u003C/code> man page on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#configuration-file-for-kdump_configuring-kdump-on-the-command-line\">Configuration file for kdump\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuring-the-kdump-default-failure-responses_configuring-kdump-on-the-command-line\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.5. Configuring the kdump default failure responses\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBy default, when \u003Ccode class=\"literal\">kdump\u003C/code> fails to create a crash dump file at the configured target location, the system reboots and the dump is lost in the process. You can change the default failure response and configure \u003Ccode class=\"literal\">kdump\u003C/code> to perform a different operation when it fails to save the core dump to the primary target. The additional actions are:\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">dump_to_rootfs\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tSaves the core dump to the \u003Ccode class=\"literal\">root\u003C/code> file system.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">reboot\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tReboots the system, losing the core dump in the process.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">halt\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tStops the system, losing the core dump in the process.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">poweroff\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tPower the system off, losing the core dump in the process.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">shell\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tRuns a shell session from within the \u003Ccode class=\"literal\">initramfs\u003C/code>, you can record the core dump manually.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">final_action\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tEnables additional operations such as \u003Ccode class=\"literal\">reboot\u003C/code>, \u003Ccode class=\"literal\">halt\u003C/code>, and \u003Ccode class=\"literal\">poweroff\u003C/code> after a successful \u003Ccode class=\"literal\">kdump\u003C/code> or when shell or \u003Ccode class=\"literal\">dump_to_rootfs\u003C/code> failure action completes. The default is \u003Ccode class=\"literal\">reboot\u003C/code>.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">failure_action\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tSpecifies the action to perform when a dump might fail in a kernel crash. The default is \u003Ccode class=\"literal\">reboot\u003C/code>.\n\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRoot permissions.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFulfilled requirements for \u003Ccode class=\"literal\">kdump\u003C/code> configurations and targets. For details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel\">Supported kdump configurations and targets\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAs a \u003Ccode class=\"literal\">root\u003C/code> user, remove the hash sign (\u003Ccode class=\"literal\">#\u003C/code>) from the beginning of the \u003Ccode class=\"literal\">#failure_action\u003C/code> line in the \u003Ccode class=\"literal\">/etc/kdump.conf\u003C/code> configuration file.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReplace the value with a required action.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">\u003Cspan class=\"strong strong\">\u003Cstrong>failure_action poweroff\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index#configuring-the-kdump-target_configuring-kdump-on-the-command-line\">Configuring the kdump target\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"configuration-file-for-kdump_configuring-kdump-on-the-command-line\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.6. Configuration file for kdump\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe configuration file for \u003Ccode class=\"literal\">kdump\u003C/code> kernel is \u003Ccode class=\"literal\">/etc/sysconfig/kdump\u003C/code>. This file controls the \u003Ccode class=\"literal\">kdump\u003C/code> kernel command line parameters. For most configurations, use the default options. However, in some scenarios you might need to modify certain parameters to control the \u003Ccode class=\"literal\">kdump\u003C/code> kernel behavior. For example, modifying the \u003Ccode class=\"literal\">KDUMP_COMMANDLINE_APPEND\u003C/code> option to append the \u003Ccode class=\"literal\">kdump\u003C/code> kernel command-line to obtain a detailed debugging output or the \u003Ccode class=\"literal\">KDUMP_COMMANDLINE_REMOVE\u003C/code> option to remove arguments from the \u003Ccode class=\"literal\">kdump\u003C/code> command line.\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">KDUMP_COMMANDLINE_REMOVE\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThis option removes arguments from the current \u003Ccode class=\"literal\">kdump\u003C/code> command line. It removes parameters that can cause \u003Ccode class=\"literal\">kdump\u003C/code> errors or \u003Ccode class=\"literal\">kdump\u003C/code> kernel boot failures. These parameters might have been parsed from the previous \u003Ccode class=\"literal\">KDUMP_COMMANDLINE\u003C/code> process or inherited from the \u003Ccode class=\"literal\">/proc/cmdline\u003C/code> file.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tWhen this variable is not configured, it inherits all values from the \u003Ccode class=\"literal\">/proc/cmdline\u003C/code> file. Configuring this option also provides information that is helpful in debugging an issue.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo remove certain arguments, add them to \u003Ccode class=\"literal\">KDUMP_COMMANDLINE_REMOVE\u003C/code> as follows:\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003C/dl>\u003C/div>\u003Cpre class=\"screen\"># KDUMP_COMMANDLINE_REMOVE=\"hugepages hugepagesz slub_debug quiet log_buf_len swiotlb\"\u003C/pre>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">KDUMP_COMMANDLINE_APPEND\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThis option appends arguments to the current command line. These arguments might have been parsed by the previous \u003Ccode class=\"literal\">KDUMP_COMMANDLINE_REMOVE\u003C/code> variable.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor the \u003Ccode class=\"literal\">kdump\u003C/code> kernel, disabling certain modules such as \u003Ccode class=\"literal\">mce\u003C/code>, \u003Ccode class=\"literal\">cgroup\u003C/code>, \u003Ccode class=\"literal\">numa\u003C/code>, \u003Ccode class=\"literal\">hest_disable\u003C/code> can help prevent kernel errors. These modules can consume a significant part of the kernel memory reserved for \u003Ccode class=\"literal\">kdump\u003C/code> or cause \u003Ccode class=\"literal\">kdump\u003C/code> kernel boot failures.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTo disable memory \u003Ccode class=\"literal\">cgroups\u003C/code> on the \u003Ccode class=\"literal\">kdump\u003C/code> kernel command line, run the command as follows:\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003C/dl>\u003C/div>\u003Cpre class=\"screen\">KDUMP_COMMANDLINE_APPEND=\"cgroup_disable=memory\"\u003C/pre>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">Documentation/admin-guide/kernel-parameters.txt\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">/etc/sysconfig/kdump\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"testing-the-kdump-configuration_configuring-kdump-on-the-command-line\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.7. Testing the kdump configuration\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tAfter configuring \u003Ccode class=\"literal\">kdump\u003C/code>, you must manually test a system crash and ensure that the \u003Ccode class=\"literal\">vmcore\u003C/code> file is generated in the defined \u003Ccode class=\"literal\">kdump\u003C/code> target. The \u003Ccode class=\"literal\">vmcore\u003C/code> file is captured from the context of the freshly booted kernel and therefore has critical information to help debug a kernel crash.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tDo not test \u003Ccode class=\"literal\">kdump\u003C/code> on active production systems. The commands to test \u003Ccode class=\"literal\">kdump\u003C/code> will cause the kernel to crash with loss of data. Depending on your system architecture, ensure that you schedule significant maintenance time because \u003Ccode class=\"literal\">kdump\u003C/code> testing might require several reboots with a long boot time.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIf the \u003Ccode class=\"literal\">vmcore\u003C/code> file is not generated during the \u003Ccode class=\"literal\">kdump\u003C/code> test, identify and fix issues before you run the test again for a successful \u003Ccode class=\"literal\">kdump\u003C/code> testing.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tIf you make any manual system modifications, you must test the \u003Ccode class=\"literal\">kdump\u003C/code> configuration at the end of any system modification. For example, if you make any of the following changes, ensure that you test the \u003Ccode class=\"literal\">kdump\u003C/code> configuration for an optimal \u003Ccode class=\"literal\">kdump\u003C/code> performances for:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPackage upgrades.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tHardware level changes, for example, storage or networking changes.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFirmware upgrades.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tNew installation and application upgrades that include third party modules.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIf you use the hot-plugging mechanism to add more memory on hardware that support this mechanism.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAfter you make changes in the \u003Ccode class=\"literal\">/etc/kdump.conf\u003C/code> or \u003Ccode class=\"literal\">/etc/sysconfig/kdump\u003C/code> file.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have root permissions on the system.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have saved all important data. The commands to test \u003Ccode class=\"literal\">kdump\u003C/code> cause the kernel to crash with loss of data.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have scheduled significant machine maintenance time depending on the system architecture.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable the \u003Ccode class=\"literal\">kdump\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>kdumpctl restart\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCheck the status of the \u003Ccode class=\"literal\">kdump\u003C/code> service with the \u003Ccode class=\"literal\">kdumpctl\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>kdumpctl status\u003C/strong>\u003C/span>\n  kdump:Kdump is operational\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptionally, if you use the \u003Ccode class=\"literal\">systemctl\u003C/code> command, the output prints in the \u003Ccode class=\"literal\">systemd\u003C/code> journal.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart a kernel crash to test the \u003Ccode class=\"literal\">kdump\u003C/code> configuration. The \u003Ccode class=\"literal\">sysrq-trigger\u003C/code> key combination causes the kernel to crash and might reboot the system if required.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo c &gt; /proc/sysrq-trigger\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn a kernel reboot, the \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>address\u003C/em>\u003C/span>-\u003Cspan class=\"emphasis\">\u003Cem>YYYY-MM-DD\u003C/em>\u003C/span>-\u003Cspan class=\"emphasis\">\u003Cem>HH:MM:SS\u003C/em>\u003C/span>/vmcore\u003C/code> file is created at the location you have specified in the \u003Ccode class=\"literal\">/etc/kdump.conf\u003C/code> file. The default is \u003Ccode class=\"literal\">/var/crash/\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#configuring-the-kdump-target_configuring-kdump-on-the-command-line\">Configuring the kdump target\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"files-produced-by-kdump-after-system-crash_configuring-kdump-on-the-command-line\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.8. Files produced by kdump after system crash\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tAfter your system crashes, the \u003Ccode class=\"literal\">kdump\u003C/code> service captures the kernel memory in a dump file (\u003Ccode class=\"literal\">vmcore\u003C/code>) and it also generates additional diagnostic files to aid in troubleshooting and postmortem analysis.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFiles produced by \u003Ccode class=\"literal\">kdump\u003C/code>:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">vmcore\u003C/code> - main kernel memory dump file containing system memory at the time of the crash. It includes data as per the configuration of the \u003Ccode class=\"literal\">core_collector\u003C/code> program specified in \u003Ccode class=\"literal\">kdump\u003C/code> configuration. By default the kernel data structures, process information, stack traces, and other diagnostic information.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">vmcore-dmesg.txt\u003C/code> - contents of the kernel ring buffer log (\u003Ccode class=\"literal\">dmesg\u003C/code>) from the primary kernel that panicked.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">kexec-dmesg.log\u003C/code> - has kernel and system log messages from the execution of the secondary \u003Ccode class=\"literal\">kexec\u003C/code> kernel that collects the \u003Ccode class=\"literal\">vmcore\u003C/code> data.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index#what-is-the-kernel-ring-buffer_getting-started-with-kernel-logging\">What is the kernel ring buffer\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"enabling-and-disabling-the-kdump-service_configuring-kdump-on-the-command-line\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.9. Enabling and disabling the kdump service\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can configure to enable or disable the \u003Ccode class=\"literal\">kdump\u003C/code> functionality on a specific kernel or on all installed kernels. You must routinely test the \u003Ccode class=\"literal\">kdump\u003C/code> functionality and validate its operates correctly.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have root permissions on the system.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have completed \u003Ccode class=\"literal\">kdump\u003C/code> requirements for configurations and targets. See \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_monitoring_and_updating_the_kernel/supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel\">Supported kdump configurations and targets\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAll configurations for installing \u003Ccode class=\"literal\">kdump\u003C/code> are set up as required.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable the \u003Ccode class=\"literal\">kdump\u003C/code> service for \u003Ccode class=\"literal\">multi-user.target\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># systemctl enable kdump.service\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStart the service in the current session:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># systemctl start kdump.service\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tStop the \u003Ccode class=\"literal\">kdump\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># systemctl stop kdump.service\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisable the \u003Ccode class=\"literal\">kdump\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># systemctl disable kdump.service\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIt is recommended to set \u003Ccode class=\"literal\">kptr_restrict=1\u003C/code> as default. When \u003Ccode class=\"literal\">kptr_restrict\u003C/code> is set to (1) as default, the \u003Ccode class=\"literal\">kdumpctl\u003C/code> service loads the crash kernel even if Kernel Address Space Layout (KASLR) is enabled or not.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIf \u003Ccode class=\"literal\">kptr_restrict\u003C/code> is not set to \u003Ccode class=\"literal\">1\u003C/code> and KASLR is enabled, the contents of \u003Ccode class=\"literal\">/proc/kore\u003C/code> file are generated as all zeros. The \u003Ccode class=\"literal\">kdumpctl\u003C/code> service fails to access the \u003Ccode class=\"literal\">/proc/kcore\u003C/code> file and load the crash kernel. The \u003Ccode class=\"literal\">kexec-kdump-howto.txt\u003C/code> file displays a warning message, which recommends you to set \u003Ccode class=\"literal\">kptr_restrict=1\u003C/code>. Verify for the following in the \u003Ccode class=\"literal\">sysctl.conf\u003C/code> file to ensure that \u003Ccode class=\"literal\">kdumpctl\u003C/code> service loads the crash kernel:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tKernel \u003Ccode class=\"literal\">kptr_restrict=1\u003C/code> in the \u003Ccode class=\"literal\">sysctl.conf\u003C/code> file.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"preventing-kernel-drivers-from-loading-for-kdump_configuring-kdump-on-the-command-line\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.10. Preventing kernel drivers from loading for kdump\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can control the capture kernel from loading certain kernel drivers by adding the \u003Ccode class=\"literal\">KDUMP_COMMANDLINE_APPEND=\u003C/code> variable in the \u003Ccode class=\"literal\">/etc/sysconfig/kdump\u003C/code> configuration file. By using this method, you can prevent the \u003Ccode class=\"literal\">kdump\u003C/code> initial RAM disk image \u003Ccode class=\"literal\">initramfs\u003C/code> from loading the specified kernel module. This helps to prevent the out-of-memory (OOM) killer errors or other crash kernel failures.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can append the \u003Ccode class=\"literal\">KDUMP_COMMANDLINE_APPEND=\u003C/code> variable by using one of the following configuration options:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">rd.driver.blacklist=\u003Cspan class=\"emphasis\">\u003Cem>&lt;modules&gt;\u003C/em>\u003C/span>\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">modprobe.blacklist=\u003Cspan class=\"emphasis\">\u003Cem>&lt;modules&gt;\u003C/em>\u003C/span>\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have root permissions on the system.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the list of modules that are loaded to the currently running kernel. Select the kernel module that you intend to block from loading:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>lsmod\u003C/strong>\u003C/span>\n\nModule                  Size  Used by\nfuse                  126976  3\nxt_CHECKSUM            16384  1\nipt_MASQUERADE         16384  1\nuinput                 20480  1\nxt_conntrack           16384  1\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUpdate the \u003Ccode class=\"literal\">KDUMP_COMMANDLINE_APPEND=\u003C/code> variable in the \u003Ccode class=\"literal\">/etc/sysconfig/kdump\u003C/code> file. For example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">KDUMP_COMMANDLINE_APPEND=\"rd.driver.blacklist=\u003Cspan class=\"emphasis\">\u003Cem>hv_vmbus,hv_storvsc,hv_utils,hv_netvsc,hid-hyperv\u003C/em>\u003C/span>\"\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAlso, consider the following example by using the \u003Ccode class=\"literal\">modprobe.blacklist=\u003Cspan class=\"emphasis\">\u003Cem>&lt;modules&gt;\u003C/em>\u003C/span>\u003C/code> configuration option:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">KDUMP_COMMANDLINE_APPEND=\"modprobe.blacklist=\u003Cspan class=\"emphasis\">\u003Cem>emcp\u003C/em>\u003C/span> modprobe.blacklist=\u003Cspan class=\"emphasis\">\u003Cem>bnx2fc\u003C/em>\u003C/span> modprobe.blacklist=\u003Cspan class=\"emphasis\">\u003Cem>libfcoe\u003C/em>\u003C/span> modprobe.blacklist=\u003Cspan class=\"emphasis\">\u003Cem>fcoe\u003C/em>\u003C/span>\"\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRestart the \u003Ccode class=\"literal\">kdump\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># systemctl restart kdump\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">dracut.cmdline\u003C/code> man page on your system.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"running-kdump-on-systems-with-encrypted-disk_configuring-kdump-on-the-command-line\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">14.11. Running kdump on systems with encrypted disk\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tWhen you run a LUKS encrypted partition, systems require certain amount of available memory. If the system has less than the required amount of available memory, the \u003Ccode class=\"literal\">cryptsetup\u003C/code> utility fails to mount the partition. As a result, capturing the \u003Ccode class=\"literal\">vmcore\u003C/code> file to an encrypted target location fails in the second kernel (capture kernel).\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">kdumpctl estimate\u003C/code> command helps you estimate the amount of memory you need for \u003Ccode class=\"literal\">kdump\u003C/code>. \u003Ccode class=\"literal\">kdumpctl estimate\u003C/code> prints the recommended \u003Ccode class=\"literal\">crashkernel\u003C/code> value, which is the most suitable memory size required for \u003Ccode class=\"literal\">kdump\u003C/code>.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe recommended \u003Ccode class=\"literal\">crashkernel\u003C/code> value is calculated based on the current kernel size, kernel module, initramfs, and the LUKS encrypted target memory requirement.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIf you are using the custom \u003Ccode class=\"literal\">crashkernel=\u003C/code> option, \u003Ccode class=\"literal\">kdumpctl estimate\u003C/code> prints the \u003Ccode class=\"literal\">LUKS required size\u003C/code> value. The value is the memory size required for LUKS encrypted target.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tPrint the estimate \u003Ccode class=\"literal\">crashkernel=\u003C/code> value:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># *kdumpctl estimate*\n\nEncrypted kdump target requires extra memory, assuming using the keyslot with minimum memory requirement\n   Reserved crashkernel:    256M\n   Recommended crashkernel: 652M\n\n   Kernel image size:   47M\n   Kernel modules size: 8M\n   Initramfs size:      20M\n   Runtime reservation: 64M\n   LUKS required size:  512M\n   Large modules: &lt;none&gt;\n   WARNING: Current crashkernel size is lower than recommended size 652M.\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tConfigure the amount of required memory by increasing the \u003Ccode class=\"literal\">crashkernel=\u003C/code> value.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tReboot the system.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIf the \u003Ccode class=\"literal\">kdump\u003C/code> service still fails to save the dump file to the encrypted target, increase the \u003Ccode class=\"literal\">crashkernel=\u003C/code> value as required.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"configuring-kdump-in-the-web-console_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 15. Configuring kdump in the web console\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tYou can set up and test the \u003Ccode class=\"literal\">kdump\u003C/code> configuration by using the RHEL 9 web console. The web console can enable the \u003Ccode class=\"literal\">kdump\u003C/code> service at boot time. Furthermore, with the web console you can configure the reserved memory for \u003Ccode class=\"literal\">kdump\u003C/code> and to select the \u003Ccode class=\"literal\">vmcore\u003C/code> saving location in an uncompressed or compressed format.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"configuring-kdump-memory-usage-and-target-location-in-web-console_configuring-kdump-in-the-web-console\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">15.1. Configuring kdump memory usage and target location in web console\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can configure the memory reserve for the \u003Ccode class=\"literal\">kdump\u003C/code> kernel and also specify the target location to capture the \u003Ccode class=\"literal\">vmcore\u003C/code> dump file with the RHEL web console interface.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe web console must be installed and accessible. For details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/getting-started-with-the-rhel-9-web-console_system-management-using-the-rhel-9-web-console#installing-the-web-console_getting-started-with-the-rhel-9-web-console\">Installing the web console\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIn the web console, open the \u003Cspan class=\"strong strong\">\u003Cstrong>\u003Cspan class=\"button button\">Kernel dump\u003C/span>\u003C/strong>\u003C/span> tab and start the \u003Ccode class=\"literal\">kdump\u003C/code> service by setting the \u003Cspan class=\"strong strong\">\u003Cstrong>Kernel crash dump\u003C/strong>\u003C/span> switch to on.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the \u003Ccode class=\"literal\">kdump\u003C/code> memory usage in the terminal, for example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>sudo grubby --update-kernel ALL --args crashkernel=512M\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRestart the system to apply the changes.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Kernel dump\u003C/strong>\u003C/span> tab, click \u003Cspan class=\"strong strong\">\u003Cstrong>Edit\u003C/strong>\u003C/span> at the end of the \u003Cspan class=\"strong strong\">\u003Cstrong>Crash dump location\u003C/strong>\u003C/span> field.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSpecify the target directory for saving the \u003Ccode class=\"literal\">vmcore\u003C/code> dump file:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tFor a local filesystem, select \u003Cspan class=\"strong strong\">\u003Cstrong>\u003Cspan class=\"option option\">Local Filesystem\u003C/span>\u003C/strong>\u003C/span> from the drop-down menu.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tFor a remote system by using the SSH protocol, select \u003Cspan class=\"strong strong\">\u003Cstrong>\u003Cspan class=\"option option\">Remote over SSH\u003C/span>\u003C/strong>\u003C/span> from the drop-down menu and specify the following fields:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Server\u003C/strong>\u003C/span> field, enter the remote server address.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>SSH key\u003C/strong>\u003C/span> field, enter the SSH key location.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Directory\u003C/strong>\u003C/span> field, enter the target directory.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tFor a remote system by using the NFS protocol, select \u003Cspan class=\"strong strong\">\u003Cstrong>\u003Cspan class=\"option option\">Remote over NFS\u003C/span>\u003C/strong>\u003C/span> from the drop-down menu and specify the following fields:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Server\u003C/strong>\u003C/span> field, enter the remote server address.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Export\u003C/strong>\u003C/span> field, enter the location of the shared folder of an NFS server.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\t\tIn the \u003Cspan class=\"strong strong\">\u003Cstrong>Directory\u003C/strong>\u003C/span> field, enter the target directory.\n\t\t\t\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\t\t\tYou can reduce the size of the \u003Ccode class=\"literal\">vmcore\u003C/code> file by selecting the \u003Cspan class=\"strong strong\">\u003Cstrong>Compression\u003C/strong>\u003C/span> checkbox.\n\t\t\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Display the automation script by clicking \u003Cspan class=\"strong strong\">\u003Cstrong>View automation script\u003C/strong>\u003C/span>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tA window with the generated script opens. You can browse a shell script and an Ansible playbook generation options tab.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Copy the script by clicking \u003Cspan class=\"strong strong\">\u003Cstrong>Copy to clipboard\u003C/strong>\u003C/span>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou can use this script to apply the same configuration on multiple machines.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Test configuration\u003C/span>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tClick \u003Cspan class=\"strong strong\">\u003Cstrong>Crash system\u003C/strong>\u003C/span> under \u003Cspan class=\"strong strong\">\u003Cstrong>Test kdump settings\u003C/strong>\u003C/span>.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tWhen you start the system crash, the kernel operation stops and results in a system crash with data loss.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_monitoring_and_updating_the_kernel/supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel#supported-kdump-targets_supported-kdump-configurations-and-targets\">Supported kdump targets\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"enabling-kdumpmanaging-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 16. Enabling kdump\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tFor your Red Hat Enterprise Linux 9 systems, you can configure to enable or disable the \u003Ccode class=\"literal\">kdump\u003C/code> functionality on a specific kernel or on all installed kernels. However, you must routinely test the \u003Ccode class=\"literal\">kdump\u003C/code> functionality and validate that it’s working properly.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"enabling-kdump-for-all-installed-kernels_enabling-kdump\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">16.1. Enabling kdump for all installed kernels\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">kdump\u003C/code> service starts by enabling \u003Ccode class=\"literal\">kdump.service\u003C/code> after the \u003Ccode class=\"literal\">kexec\u003C/code> tool is installed. You can enable and start the \u003Ccode class=\"literal service\">kdump\u003C/code> service for all kernels installed on the machine.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have administrator privileges.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the \u003Ccode class=\"literal\">crashkernel=\u003C/code> command-line parameter to all installed kernels.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># grubby --update-kernel=ALL --args=\"crashkernel=xxM\"\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">xxM\u003C/code> is the required memory in megabytes.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable the \u003Ccode class=\"literal\">kdump\u003C/code> service.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># systemctl enable --now kdump.service\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCheck that the \u003Ccode class=\"literal\">kdump\u003C/code> service is running.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl status kdump.service\u003C/strong>\u003C/span>\n\n○ kdump.service - Crash recovery kernel arming\n     Loaded: loaded (/usr/lib/systemd/system/kdump.service; enabled; vendor preset: disabled)\n     Active: active (live)\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"enabling-kdump-for-a-specific-installed-kernel_enabling-kdump\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">16.2. Enabling kdump for a specific installed kernel\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can enable the \u003Ccode class=\"literal service\">kdump\u003C/code> service for a specific kernel on the machine.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have administrator privileges.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tList the kernels installed on the machine.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ls -a /boot/vmlinuz-\u003C/strong>\u003C/span>*\n/boot/vmlinuz-0-rescue-2930657cd0dc43c2b75db480e5e5b4a9\n/boot/vmlinuz-4.18.0-330.el8.x86_64\n/boot/vmlinuz-4.18.0-330.rt7.111.el8.x86_64\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd a specific \u003Ccode class=\"literal\">kdump\u003C/code> kernel to the system’s Grand Unified Bootloader (GRUB) configuration.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --update-kernel=\u003Cspan class=\"emphasis\">\u003Cem>vmlinuz-4.18.0-330.el8.x86_64\u003C/em>\u003C/span> --args=\"crashkernel=\u003Cspan class=\"emphasis\">\u003Cem>xxM\u003C/em>\u003C/span>\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">xxM\u003C/code> is the required memory reserve in megabytes.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable the \u003Ccode class=\"literal\">kdump\u003C/code> service.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl enable --now kdump.service\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCheck that the \u003Ccode class=\"literal\">kdump\u003C/code> service is running.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl status kdump.service\u003C/strong>\u003C/span>\n\n○ kdump.service - Crash recovery kernel arming\n     Loaded: loaded (/usr/lib/systemd/system/kdump.service; enabled; vendor preset: disabled)\n     Active: active (live)\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"disabling-the-kdump-service_enabling-kdump\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">16.3. Disabling the kdump service\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can stop the \u003Ccode class=\"literal\">kdump.service\u003C/code> and disable the service from starting on your Red Hat Enterprise Linux 9 systems.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFulfilled requirements for \u003Ccode class=\"literal\">kdump\u003C/code> configurations and targets. For details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html-single/managing_monitoring_and_updating_the_kernel/index#supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel\">Supported kdump configurations and targets\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAll configurations for installing \u003Ccode class=\"literal\">kdump\u003C/code> are set up according to your needs. For details, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_monitoring_and_updating_the_kernel/installing-kdump_managing-monitoring-and-updating-the-kernel\">Installing kdump\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo stop the \u003Ccode class=\"literal\">kdump\u003C/code> service in the current session:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># systemctl stop kdump.service\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo disable the \u003Ccode class=\"literal\">kdump\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># systemctl disable kdump.service\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIt is recommended to set \u003Ccode class=\"literal\">kptr_restrict=1\u003C/code> as default. When \u003Ccode class=\"literal\">kptr_restrict\u003C/code> is set to (1) as default, the \u003Ccode class=\"literal\">kdumpctl\u003C/code> service loads the crash kernel even if Kernel Address Space Layout (\u003Ccode class=\"literal\">KASLR\u003C/code>) is enabled or not enabled.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tIf \u003Ccode class=\"literal\">kptr_restrict\u003C/code> is not set to \u003Ccode class=\"literal\">1\u003C/code> and \u003Ccode class=\"literal\">KASLR\u003C/code> is enabled, the contents of \u003Ccode class=\"literal\">/proc/kore\u003C/code> file are generated as all zeros. The \u003Ccode class=\"literal\">kdumpctl\u003C/code> service fails to access the \u003Ccode class=\"literal\">/proc/kcore\u003C/code> file and load the crash kernel. The \u003Ccode class=\"literal\">kexec-kdump-howto.txt\u003C/code> file displays a warning message, which recommends you to set \u003Ccode class=\"literal\">kptr_restrict=1\u003C/code>. Verify for the following in the \u003Ccode class=\"literal\">sysctl.conf\u003C/code> file to ensure that \u003Ccode class=\"literal\">kdumpctl\u003C/code> service loads the crash kernel:\n\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\tKernel \u003Ccode class=\"literal\">kptr_restrict=1\u003C/code> in the \u003Ccode class=\"literal\">sysctl.conf\u003C/code> file.\n\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/managing-systemd_configuring-basic-system-settings\">Managing systemd\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 17. Supported kdump configurations and targets\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tThe \u003Ccode class=\"literal\">kdump\u003C/code> mechanism is a feature of the Linux kernel that generates a crash dump file when a kernel crash occurs. The kernel dump file has critical information that helps to analyze and determine the root cause of a kernel crash. The crash can be because of various factors, hardware issues or third-party kernel modules problems, to name a few.\n\t\t\u003C/p>\u003Cp>\n\t\t\tWith the provided information and procedures, you understand the supported configurations and targets on your Red Hat Enterprise Linux 9 systems and properly configure \u003Ccode class=\"literal\">kdump\u003C/code> and validate it’s working.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"memory-requirements-for-kdump_supported-kdump-configurations-and-targets\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">17.1. Memory requirements for kdump\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tFor \u003Ccode class=\"literal\">kdump\u003C/code> to capture a kernel crash dump and save it for further analysis, a part of the system memory should be permanently reserved for the capture kernel. When reserved, this part of the system memory is not available to the main kernel.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe memory requirements vary based on certain system parameters. One of the major factors is the system’s hardware architecture. To find out the exact machine architecture (such as Intel 64 and AMD64, also known as x86_64) and print it to standard output, use the following command:\n\t\t\t\u003C/p>\u003Cpre class=\"screen\">\u003Ccode class=\"literal command\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>uname -m\u003C/strong>\u003C/span>\u003C/code>\u003C/pre>\u003Cp>\n\t\t\t\tWith the stated list of minimum memory requirements, you can set the appropriate memory size to automatically reserve a memory for \u003Ccode class=\"literal\">kdump\u003C/code> on the latest available versions. The memory size depends on the system’s architecture and total available physical memory.\n\t\t\t\u003C/p>\u003Crh-table id=\"idm139825289915056\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 17.1. Minimum amount of reserved memory required for kdump\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 33%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 33%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 33%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825289909328\" scope=\"col\">Architecture\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825289908240\" scope=\"col\">Available Memory\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825289907152\" scope=\"col\">Minimum Reserved Memory\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd rowspan=\"3\" align=\"left\" valign=\"top\" headers=\"idm139825289909328\"> \u003Cp>\n\t\t\t\t\t\t\t\tAMD64 and Intel 64 (\u003Ccode class=\"literal\">x86_64\u003C/code>)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289908240\"> \u003Cp>\n\t\t\t\t\t\t\t\t1 GB to 4 GB\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289907152\"> \u003Cp>\n\t\t\t\t\t\t\t\t192 MB of RAM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289908240\"> \u003Cp>\n\t\t\t\t\t\t\t\t4 GB to 64 GB\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289907152\"> \u003Cp>\n\t\t\t\t\t\t\t\t256 MB of RAM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289908240\"> \u003Cp>\n\t\t\t\t\t\t\t\t64 GB and more\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289907152\"> \u003Cp>\n\t\t\t\t\t\t\t\t512 MB of RAM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd rowspan=\"3\" align=\"left\" valign=\"top\" headers=\"idm139825289909328\"> \u003Cp>\n\t\t\t\t\t\t\t\t64-bit ARM (4k pages)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289908240\"> \u003Cp>\n\t\t\t\t\t\t\t\t1 GB to 4 GB\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289907152\"> \u003Cp>\n\t\t\t\t\t\t\t\t256 MB of RAM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289908240\"> \u003Cp>\n\t\t\t\t\t\t\t\t4 GB to 64 GB\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289907152\"> \u003Cp>\n\t\t\t\t\t\t\t\t320 MB of RAM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289908240\"> \u003Cp>\n\t\t\t\t\t\t\t\t64 GB and more\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289907152\"> \u003Cp>\n\t\t\t\t\t\t\t\t576 MB of RAM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd rowspan=\"3\" align=\"left\" valign=\"top\" headers=\"idm139825289909328\"> \u003Cp>\n\t\t\t\t\t\t\t\t64-bit ARM (64k pages)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289908240\"> \u003Cp>\n\t\t\t\t\t\t\t\t1 GB to 4 GB\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289907152\"> \u003Cp>\n\t\t\t\t\t\t\t\t356 MB of RAM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289908240\"> \u003Cp>\n\t\t\t\t\t\t\t\t4 GB to 64 GB\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289907152\"> \u003Cp>\n\t\t\t\t\t\t\t\t420 MB of RAM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289908240\"> \u003Cp>\n\t\t\t\t\t\t\t\t64 GB and more\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289907152\"> \u003Cp>\n\t\t\t\t\t\t\t\t676 MB of RAM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd rowspan=\"5\" align=\"left\" valign=\"top\" headers=\"idm139825289909328\"> \u003Cp>\n\t\t\t\t\t\t\t\tIBM Power Systems (\u003Ccode class=\"literal\">ppc64le\u003C/code>)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289908240\"> \u003Cp>\n\t\t\t\t\t\t\t\t2 GB to 4 GB\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289907152\"> \u003Cp>\n\t\t\t\t\t\t\t\t384 MB of RAM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289908240\"> \u003Cp>\n\t\t\t\t\t\t\t\t4 GB to 16 GB\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289907152\"> \u003Cp>\n\t\t\t\t\t\t\t\t512 MB of RAM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289908240\"> \u003Cp>\n\t\t\t\t\t\t\t\t16 GB to 64 GB\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289907152\"> \u003Cp>\n\t\t\t\t\t\t\t\t1 GB of RAM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289908240\"> \u003Cp>\n\t\t\t\t\t\t\t\t64 GB to 128 GB\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289907152\"> \u003Cp>\n\t\t\t\t\t\t\t\t2 GB of RAM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289908240\"> \u003Cp>\n\t\t\t\t\t\t\t\t128 GB and more\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289907152\"> \u003Cp>\n\t\t\t\t\t\t\t\t4 GB of RAM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd rowspan=\"3\" align=\"left\" valign=\"top\" headers=\"idm139825289909328\"> \u003Cp>\n\t\t\t\t\t\t\t\tIBM Z (\u003Ccode class=\"literal\">s390x\u003C/code>)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289908240\"> \u003Cp>\n\t\t\t\t\t\t\t\t1 GB to 4 GB\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289907152\"> \u003Cp>\n\t\t\t\t\t\t\t\t192 MB of RAM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289908240\"> \u003Cp>\n\t\t\t\t\t\t\t\t4 GB to 64 GB\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289907152\"> \u003Cp>\n\t\t\t\t\t\t\t\t256 MB of RAM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289908240\"> \u003Cp>\n\t\t\t\t\t\t\t\t64 GB and more\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289907152\"> \u003Cp>\n\t\t\t\t\t\t\t\t512 MB of RAM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cp>\n\t\t\t\tOn many systems, \u003Ccode class=\"literal\">kdump\u003C/code> is able to estimate the amount of required memory and reserve it automatically. This behavior is enabled by default, but only works on systems that have more than a certain amount of total available memory, which varies based on the system architecture.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe automatic configuration of reserved memory based on the total amount of memory in the system is a best effort estimation. The actual required memory might vary due to other factors such as I/O devices. Using not enough of memory might cause debug kernel unable to boot as a capture kernel in the case of kernel panic. To avoid this problem, increase the crash kernel memory sufficiently.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/articles/rhel-limits\">Red Hat Enterprise Linux Technology Capabilities and Limits \u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"minimum-threshold-for-automatic-memory-reservation_supported-kdump-configurations-and-targets\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">17.2. Minimum threshold for automatic memory reservation\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBy default, the \u003Ccode class=\"literal\">kexec-tools\u003C/code> utility configures the \u003Ccode class=\"literal\">crashkernel\u003C/code> command line parameter and reserves a certain amount of memory for \u003Ccode class=\"literal\">kdump\u003C/code>. On some systems however, it is still possible to assign memory for \u003Ccode class=\"literal\">kdump\u003C/code> either by using the \u003Ccode class=\"literal option\">crashkernel=auto\u003C/code> parameter in the boot loader configuration file, or by enabling this option in the graphical configuration utility. For this automatic reservation to work, a certain amount of total memory needs to be available in the system. The memory requirement varies based on the system’s architecture. If the system memory is less than the specified threshold value, you must configure the memory manually.\n\t\t\t\u003C/p>\u003Crh-table id=\"idm139825285979216\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 17.2. Minimum amount of memory required for automatic memory reservation\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 50%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 50%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825290727440\" scope=\"col\">Architecture\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825290726352\" scope=\"col\">Required Memory\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825290727440\"> \u003Cp>\n\t\t\t\t\t\t\t\tAMD64 and Intel 64 (\u003Ccode class=\"literal\">x86_64\u003C/code>)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825290726352\"> \u003Cp>\n\t\t\t\t\t\t\t\t1 GB\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825290727440\"> \u003Cp>\n\t\t\t\t\t\t\t\tIBM Power Systems (\u003Ccode class=\"literal\">ppc64le\u003C/code>)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825290726352\"> \u003Cp>\n\t\t\t\t\t\t\t\t2 GB\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825290727440\"> \u003Cp>\n\t\t\t\t\t\t\t\tIBM  Z (\u003Ccode class=\"literal\">s390x\u003C/code>)\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825290726352\"> \u003Cp>\n\t\t\t\t\t\t\t\t1 GB\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825290727440\"> \u003Cp>\n\t\t\t\t\t\t\t\t64-bit ARM\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825290726352\"> \u003Cp>\n\t\t\t\t\t\t\t\t1 GB\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe \u003Ccode class=\"literal\">crashkernel=auto\u003C/code> option in the boot command line is no longer supported on RHEL 9 and later releases.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"supported-kdump-targets_supported-kdump-configurations-and-targets\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">17.3. Supported kdump targets\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tWhen a kernel crash occurs, the operating system saves the dump file on the configured or default target location. You can save the dump file either directly to a device, store as a file on a local file system, or send the dump file over a network. With the following list of dump targets, you can know the targets that are currently supported or not supported by \u003Ccode class=\"literal\">kdump\u003C/code>.\n\t\t\t\u003C/p>\u003Crh-table id=\"idm139825290061808\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 17.3. kdump targets on RHEL 9\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 33%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 33%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 33%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825290055728\" scope=\"col\">Target type\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825290054640\" scope=\"col\">Supported Targets\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825289798512\" scope=\"col\">Unsupported Targets\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825290055728\"> \u003Cp>\n\t\t\t\t\t\t\t\tPhysical Storage\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825290054640\"> \u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tLogical Volume Manager (LVM).\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tThin provisioning volume.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tFibre Channel (FC) disks such as \u003Ccode class=\"literal\">qla2xxx\u003C/code>, \u003Ccode class=\"literal\">lpfc\u003C/code>, \u003Ccode class=\"literal\">bnx2fc\u003C/code>, and \u003Ccode class=\"literal\">bfa\u003C/code>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tAn \u003Ccode class=\"literal\">iSCSI\u003C/code> software-configured logical device on a networked storage server.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">mdraid\u003C/code> subsystem as a software \u003Ccode class=\"literal\">RAID\u003C/code> solution.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tHardware RAID such as \u003Ccode class=\"literal\">smartpqi\u003C/code>, \u003Ccode class=\"literal\">hpsa\u003C/code>, \u003Ccode class=\"literal\">megaraid\u003C/code>, \u003Ccode class=\"literal\">mpt3sas\u003C/code>, \u003Ccode class=\"literal\">aacraid\u003C/code>, and \u003Ccode class=\"literal\">mpi3mr\u003C/code>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">SCSI\u003C/code> and \u003Ccode class=\"literal\">SATA\u003C/code> disks.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">iSCSI\u003C/code> and \u003Ccode class=\"literal\">HBA\u003C/code> offloads.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tHardware \u003Ccode class=\"literal\">FCoE\u003C/code> such as \u003Ccode class=\"literal\">qla2xxx\u003C/code> and \u003Ccode class=\"literal\">lpfc\u003C/code>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tSoftware \u003Ccode class=\"literal\">FCoE\u003C/code> such as \u003Ccode class=\"literal\">bnx2fc\u003C/code>. For software \u003Ccode class=\"literal\">FCoE\u003C/code> to function, additional memory configuration might be required.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289798512\"> \u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tBIOS RAID.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tSoftware \u003Ccode class=\"literal\">iSCSI\u003C/code> with \u003Ccode class=\"literal\">iBFT\u003C/code>. Currently supported transports are \u003Ccode class=\"literal\">bnx2i\u003C/code>, \u003Ccode class=\"literal\">cxgb3i\u003C/code>, and \u003Ccode class=\"literal\">cxgb4i\u003C/code>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tSoftware iSCSI with hybrid device driver such as \u003Ccode class=\"literal\">be2iscsi\u003C/code>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tFibre Channel over Ethernet (\u003Ccode class=\"literal\">FCoE\u003C/code>).\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tLegacy IDE.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">GlusterFS\u003C/code> servers.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">GFS2\u003C/code> file system.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tClustered Logical Volume Manager (CLVM).\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tHigh availability LVM volumes (HA-LVM).\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825290055728\"> \u003Cp>\n\t\t\t\t\t\t\t\tNetwork\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825290054640\"> \u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tHardware using kernel modules such as \u003Ccode class=\"literal\">igb\u003C/code>, \u003Ccode class=\"literal\">ixgbe\u003C/code>, \u003Ccode class=\"literal\">ice\u003C/code>, \u003Ccode class=\"literal\">i40e\u003C/code>, \u003Ccode class=\"literal\">e1000e\u003C/code>, \u003Ccode class=\"literal\">igc\u003C/code>, \u003Ccode class=\"literal\">tg3\u003C/code>, \u003Ccode class=\"literal\">bnx2x\u003C/code>, \u003Ccode class=\"literal\">bnxt_en\u003C/code>, \u003Ccode class=\"literal\">qede\u003C/code>, \u003Ccode class=\"literal\">cxgb4\u003C/code>, \u003Ccode class=\"literal\">be2net\u003C/code>, \u003Ccode class=\"literal\">enic\u003C/code>, \u003Ccode class=\"literal\">sfc\u003C/code>, \u003Ccode class=\"literal\">mlx4_en\u003C/code>, \u003Ccode class=\"literal\">mlx5_core\u003C/code>, \u003Ccode class=\"literal\">r8169\u003C/code>, \u003Ccode class=\"literal\">atlantic\u003C/code>, \u003Ccode class=\"literal\">nfp\u003C/code>, and \u003Ccode class=\"literal\">nicvf\u003C/code> on 64-bit ARM architecture only.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289798512\"> \u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tHardware using kernel modules such as \u003Ccode class=\"literal\">sfc SRIOV\u003C/code>, \u003Ccode class=\"literal\">cxgb4vf\u003C/code>, and \u003Ccode class=\"literal\">pch_gbe\u003C/code>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tIPv6 protocol.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tWireless connections.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tInfiniBand networks.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tVLAN network over bridge and team.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825290055728\"> \u003Cp>\n\t\t\t\t\t\t\t\tHypervisor\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825290054640\"> \u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tKernel-based virtual machines (KVM).\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tXen hypervisor in certain configurations only.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tESXi 6.6, 6.7, 7.0.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tHyper-V 2012 R2 on RHEL Gen1 UP Guest only and later version.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289798512\"> \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825290055728\"> \u003Cp>\n\t\t\t\t\t\t\t\tFilesystem\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825290054640\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">ext[234]fs\u003C/code>, \u003Ccode class=\"literal\">XFS\u003C/code>, \u003Ccode class=\"literal\">virtiofs\u003C/code>, and NFS file systems.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289798512\"> \u003Cp>\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">Btrfs\u003C/code> file system.\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825290055728\"> \u003Cp>\n\t\t\t\t\t\t\t\tFirmware\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825290054640\"> \u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tBIOS-based systems.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tUEFI Secure Boot.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289798512\"> \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_monitoring_and_updating_the_kernel/configuring-kdump-on-the-command-line_managing-monitoring-and-updating-the-kernel#configuring-the-kdump-target_configuring-kdump-on-the-command-line\">Configuring the kdump target\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"supported-kdump-filtering-levels_supported-kdump-configurations-and-targets\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">17.4. Supported kdump filtering levels\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo reduce the size of the dump file, \u003Ccode class=\"literal\">kdump\u003C/code> uses the \u003Ccode class=\"literal command\">makedumpfile\u003C/code> core collector to compress the data and also exclude unwanted information, for example, you can remove \u003Ccode class=\"literal\">hugepages\u003C/code> and \u003Ccode class=\"literal\">hugetlbfs\u003C/code> pages by using the \u003Ccode class=\"literal option\">-8\u003C/code> level. The levels that \u003Ccode class=\"literal\">makedumpfile\u003C/code> currently supports can be seen in the table for \u003Cspan class=\"emphasis\">\u003Cem>Filtering levels for `kdump`\u003C/em>\u003C/span> .\n\t\t\t\u003C/p>\u003Crh-table id=\"idm139825289236912\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 17.4. Filtering levels for kdump\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 50%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 50%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825289231760\" scope=\"col\">Option\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825289230672\" scope=\"col\">Description\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289231760\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">1\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289230672\"> \u003Cp>\n\t\t\t\t\t\t\t\tZero pages\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289231760\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">2\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289230672\"> \u003Cp>\n\t\t\t\t\t\t\t\tCache pages\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289231760\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">4\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289230672\"> \u003Cp>\n\t\t\t\t\t\t\t\tCache private\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289231760\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">8\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289230672\"> \u003Cp>\n\t\t\t\t\t\t\t\tUser pages\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289231760\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal option\">16\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289230672\"> \u003Cp>\n\t\t\t\t\t\t\t\tFree pages\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_monitoring_and_updating_the_kernel/configuring-kdump-on-the-command-line_managing-monitoring-and-updating-the-kernel#configuring-the-kdump-core-collectorconfiguring-kdump-on-the-command-line\">Configuring the kdump core collector\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"supported-default-failure-responses_supported-kdump-configurations-and-targets\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">17.5. Supported default failure responses\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tBy default, when \u003Ccode class=\"literal\">kdump\u003C/code> fails to create a core dump, the operating system reboots. However, you can configure \u003Ccode class=\"literal\">kdump\u003C/code> to perform a different operation in case it fails to save the core dump to the primary target.\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">dump_to_rootfs\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tAttempt to save the core dump to the root file system. This option is especially useful in combination with a network target: if the network target is unreachable, this option configures kdump to save the core dump locally. The system is rebooted afterwards.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">reboot\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tReboot the system, losing the core dump in the process.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">halt\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tHalt the system, losing the core dump in the process.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">poweroff\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tPower off the system, losing the core dump in the process.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">shell\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tRun a shell session from within the initramfs, allowing the user to record the core dump manually.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">final_action\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tEnable additional operations such as \u003Ccode class=\"literal\">reboot\u003C/code>, \u003Ccode class=\"literal\">halt\u003C/code>, and \u003Ccode class=\"literal\">poweroff\u003C/code> actions after a successful \u003Ccode class=\"literal\">kdump\u003C/code> or when \u003Ccode class=\"literal\">shell\u003C/code> or \u003Ccode class=\"literal\">dump_to_rootfs\u003C/code> failure action completes. The default \u003Ccode class=\"literal\">final_action\u003C/code> option is \u003Ccode class=\"literal\">reboot\u003C/code>.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">failure_action\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tSpecifies the action to perform when a dump might fail in the event of a kernel crash. The default \u003Ccode class=\"literal\">failure_action\u003C/code> option is \u003Ccode class=\"literal\">reboot\u003C/code>.\n\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_monitoring_and_updating_the_kernel/configuring-kdump-on-the-command-line_managing-monitoring-and-updating-the-kernel#configuring-the-kdump-default-failure-responses_configuring-kdump-on-the-command-line\">Configuring the kdump default failure responses\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"using-final_action-parameter_supported-kdump-configurations-and-targets\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">17.6. Using final_action parameter\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tWhen \u003Ccode class=\"literal\">kdump\u003C/code> succeeds or if \u003Ccode class=\"literal\">kdump\u003C/code> fails to save the \u003Ccode class=\"literal\">vmcore\u003C/code> file at the configured target, you can perform additional operations like \u003Ccode class=\"literal\">reboot\u003C/code>, \u003Ccode class=\"literal\">halt\u003C/code>, and \u003Ccode class=\"literal\">poweroff\u003C/code> by using the \u003Ccode class=\"literal\">final_action\u003C/code> parameter. If the \u003Ccode class=\"literal\">final_action\u003C/code> parameter is not specified, \u003Ccode class=\"literal\">reboot\u003C/code> is the default response.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo configure \u003Ccode class=\"literal\">final_action\u003C/code>, edit the \u003Ccode class=\"literal\">/etc/kdump.conf\u003C/code> file and add one of the following options:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">final_action reboot\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">final_action halt\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">final_action poweroff\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRestart the \u003Ccode class=\"literal\">kdump\u003C/code> service for the changes to take effect.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>kdumpctl restart\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_using-failure_action-parameter_supported-kdump-configurations-and-targets\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">17.7. Using failure_action parameter\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">failure_action\u003C/code> parameter specifies the action to perform when a dump fails in the event of a kernel crash. The default action for \u003Ccode class=\"literal\">failure_action\u003C/code> is \u003Ccode class=\"literal\">reboot\u003C/code> that reboots the system.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe parameter recognizes the following actions to take:\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">reboot\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tReboots the system after a dump failure.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">dump_to_rootfs\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tSaves the dump file on a root file system when a non-root dump target is configured.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">halt\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tHalts the system.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">poweroff\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tStops the running operations on the system.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">shell\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tStarts a shell session inside \u003Ccode class=\"literal\">initramfs\u003C/code>, from which you can manually perform additional recovery actions.\n\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure:\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo configure an action to take if the dump fails, edit the \u003Ccode class=\"literal\">/etc/kdump.conf\u003C/code> file and specify one of the \u003Ccode class=\"literal\">failure_action\u003C/code> options:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">failure_action reboot\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">failure_action halt\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">failure_action poweroff\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">failure_action shell\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">failure_action dump_to_rootfs\u003C/code>\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRestart the \u003Ccode class=\"literal\">kdump\u003C/code> service for the changes to take effect.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>kdumpctl restart\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"firmware-assisted-dump-mechanisms_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 18. Firmware assisted dump mechanisms\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tFirmware assisted dump (fadump) is a dump capturing mechanism, provided as an alternative to the \u003Ccode class=\"literal\">kdump\u003C/code> mechanism on IBM POWER systems. The \u003Ccode class=\"literal\">kexec\u003C/code> and \u003Ccode class=\"literal\">kdump\u003C/code> mechanisms are useful for capturing core dumps on AMD64 and Intel 64 systems. However, some hardware such as mini systems and mainframe computers, leverage the onboard firmware to isolate regions of memory and prevent any accidental overwriting of data that is important to the crash analysis. The \u003Ccode class=\"literal\">fadump\u003C/code> utility, is optimized for the \u003Ccode class=\"literal\">fadump\u003C/code> mechanisms and their integration with RHEL on IBM POWER systems.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"firmware-assisted-dump-on-ibm-powerpc-hardware_firmware-assisted-dump-mechanisms\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">18.1. Firmware assisted dump on IBM PowerPC hardware\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">fadump\u003C/code> utility captures the \u003Ccode class=\"literal\">vmcore\u003C/code> file from a fully-reset system with PCI and I/O devices. This mechanism uses firmware to preserve memory regions during a crash and then reuses the \u003Ccode class=\"literal\">kdump\u003C/code> userspace scripts to save the \u003Ccode class=\"literal\">vmcore\u003C/code> file. The memory regions consist of all system memory contents, except the boot memory, system registers, and hardware Page Table Entries (PTEs).\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">fadump\u003C/code> mechanism offers improved reliability over the traditional dump type, by rebooting the partition and using a new kernel to dump the data from the previous kernel crash. The \u003Ccode class=\"literal\">fadump\u003C/code> requires an IBM POWER6 processor-based or later version hardware platform.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor further details about the \u003Ccode class=\"literal\">fadump\u003C/code> mechanism, including PowerPC specific methods of resetting hardware, see the \u003Ccode class=\"literal\">/usr/share/doc/kexec-tools/fadump-howto.txt\u003C/code> file.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe area of memory that is not preserved, known as boot memory, is the amount of RAM required to successfully boot the kernel after a crash event. By default, the boot memory size is 256MB or 5% of total system RAM, whichever is larger.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp>\n\t\t\t\tUnlike \u003Ccode class=\"literal\">kexec-initiated\u003C/code> event, the \u003Ccode class=\"literal\">fadump\u003C/code> mechanism uses the production kernel to recover a crash dump. When booting after a crash, PowerPC hardware makes the device node \u003Ccode class=\"literal\">/proc/device-tree/rtas/ibm.kernel-dump\u003C/code> available to the \u003Ccode class=\"literal\">proc\u003C/code> filesystem (\u003Ccode class=\"literal\">procfs\u003C/code>). The \u003Ccode class=\"literal\">fadump-aware kdump\u003C/code> scripts, check for the stored \u003Ccode class=\"literal\">vmcore\u003C/code>, and then complete the system reboot cleanly.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"enabling-firmware-assisted-dump-mechanism_firmware-assisted-dump-mechanisms\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">18.2. Enabling firmware assisted dump mechanism\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can enhance the crash dumping capabilities of IBM POWER systems by enabling the firmware assisted dump (\u003Ccode class=\"literal\">fadump\u003C/code>) mechanism.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIn the Secure Boot environment, the GRUB boot loader allocates a boot memory region, known as the Real Mode Area (RMA). The RMA has a size of 512 MB, which is divided among the boot components and, if a component exceeds its size allocation, GRUB fails with an out-of-memory (OOM) error.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tDo not enable firmware assisted dump (\u003Ccode class=\"literal\">fadump\u003C/code>) mechanism in the Secure Boot environment on RHEL 9.1 and earlier versions. The GRUB boot loader fails with the following error:\n\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">error: ../../grub-core/kern/mm.c:376:out of memory.\nPress any key to continue…\u003C/pre>\u003Cp>\n\t\t\t\t\tThe system is recoverable only if you increase the default \u003Ccode class=\"literal\">initramfs\u003C/code> size due to the \u003Ccode class=\"literal\">fadump\u003C/code> configuration.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tFor information about workaround methods to recover the system, see the \u003Ca class=\"link\" href=\"https://www.ibm.com/support/pages/node/6846531\">System boot ends in GRUB Out of Memory (OOM)\u003C/a> article.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have root permissions on the system.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tInstall the \u003Ccode class=\"literal package\">kexec-tools\u003C/code> package.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the default value for \u003Ccode class=\"literal\">crashkernel\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># kdumpctl reset-crashkernel --fadump=on --kernel=ALL\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Reserve boot memory instead of the default value.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># grubby --update-kernel ALL --args=\"fadump=on crashkernel=xxM\"\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">xxM\u003C/code> is the required memory size in megabytes.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tWhen specifying boot configuration options, test the configurations by rebooting the kernel with \u003Ccode class=\"literal\">kdump\u003C/code> enabled. If the \u003Ccode class=\"literal\">kdump\u003C/code> kernel fails to boot, increase the \u003Ccode class=\"literal\">crashkernel\u003C/code> value gradually to set an appropriate value.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReboot for changes to take effect.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># reboot\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"firmware-assisted-dump-mechanisms-on-ibm-z-hardware_firmware-assisted-dump-mechanisms\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">18.3. Firmware assisted dump mechanisms on IBM Z hardware\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIBM Z systems support the following firmware assisted dump mechanisms:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">Stand-alone dump (sadump)\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">VMDUMP\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">kdump\u003C/code> infrastructure is supported and utilized on IBM Z systems. However, using one of the firmware assisted dump (fadump) methods for IBM Z can provide various benefits:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">sadump\u003C/code> mechanism is initiated and controlled from the system console, and is stored on an \u003Ccode class=\"literal\">IPL\u003C/code> bootable device.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">VMDUMP\u003C/code> mechanism is similar to \u003Ccode class=\"literal\">sadump\u003C/code>. This tool is also initiated from the system console, but retrieves the resulting dump from hardware and copies it to the system for analysis.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThese methods (similarly to other hardware based dump mechanisms) have the ability to capture the state of a machine in the early boot phase, before the \u003Ccode class=\"literal\">kdump\u003C/code> service starts.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAlthough \u003Ccode class=\"literal\">VMDUMP\u003C/code> contains a mechanism to receive the dump file into a Red Hat Enterprise Linux system, the configuration and control of \u003Ccode class=\"literal\">VMDUMP\u003C/code> is managed from the IBM Z Hardware console.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://www.ibm.com/docs/en/linux-on-systems?topic=tools-red-hat-enterprise-linux-85\">Using the Dump Tools on Red Hat Enterprise Linux 8.5\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://www.ibm.com/docs/en/zos/2.3.0?topic=aids-stand-alone-dump\">Stand-alone dump\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://www.ibm.com/docs/en/linux-on-systems?topic=85-zvm-dump-vmdump\">Creating dumps on z/VM with VMDUMP\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"using-sadump-on-fujitsu-primequest-systems_firmware-assisted-dump-mechanisms\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">18.4. Using sadump on Fujitsu PRIMEQUEST systems\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe Fujitsu \u003Ccode class=\"literal\">sadump\u003C/code> mechanism is designed to provide a \u003Ccode class=\"literal\">fallback\u003C/code> dump capture in an event when \u003Ccode class=\"literal\">kdump\u003C/code> is unable to complete successfully. The \u003Ccode class=\"literal\">sadump\u003C/code> mechanism is invoked manually from the system Management Board (MMB) interface. Using MMB, configure \u003Ccode class=\"literal\">kdump\u003C/code> like for an Intel 64 or AMD64 server and then proceed to enable \u003Ccode class=\"literal\">sadump\u003C/code>.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd or edit the following lines in the \u003Ccode class=\"literal\">/etc/sysctl.conf\u003C/code> file to ensure that \u003Ccode class=\"literal\">kdump\u003C/code> starts as expected for \u003Ccode class=\"literal\">sadump\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">kernel.panic=0\nkernel.unknown_nmi_panic=1\u003C/pre>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tIn particular, ensure that after \u003Ccode class=\"literal\">kdump\u003C/code>, the system does not reboot. If the system reboots after \u003Ccode class=\"literal\">kdump\u003C/code> has failed to save the \u003Ccode class=\"literal\">vmcore\u003C/code> file, then it is not possible to invoke the \u003Ccode class=\"literal\">sadump\u003C/code>.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the \u003Ccode class=\"literal\">failure_action\u003C/code> parameter in \u003Ccode class=\"literal\">/etc/kdump.conf\u003C/code> appropriately as \u003Ccode class=\"literal\">halt\u003C/code> or \u003Ccode class=\"literal\">shell\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">failure_action shell\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe FUJITSU Server PRIMEQUEST 2000 Series Installation Manual\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"analyzing-a-core-dump_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 19. Analyzing a core dump\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tTo determine the cause of the system crash, you can use the \u003Cspan class=\"strong strong\">\u003Cstrong>\u003Cspan class=\"application application\">crash\u003C/span>\u003C/strong>\u003C/span> utility, which provides an interactive prompt very similar to the GNU Debugger (GDB). This utility allows you to interactively analyze a core dump created by \u003Ccode class=\"literal\">kdump\u003C/code>, \u003Ccode class=\"literal\">netdump\u003C/code>, \u003Ccode class=\"literal\">diskdump\u003C/code> or \u003Ccode class=\"literal\">xendump\u003C/code> as well as a running Linux system. Alternatively, you have the option to use Kernel Oops Analyzer or the Kdump Helper tool.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"installing-the-crash-utility_analyzing-a-core-dump\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">19.1. Installing the crash utility\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tWith the provided information, understand the required packages and the procedure to install the \u003Cspan class=\"strong strong\">\u003Cstrong>\u003Cspan class=\"application application\">crash\u003C/span>\u003C/strong>\u003C/span> utility. The \u003Ccode class=\"literal\">crash\u003C/code> utility might not be installed by default on your Red Hat Enterprise Linux 9 systems. \u003Ccode class=\"literal\">crash\u003C/code> is a tool to interactively analyze a system’s state while it is running or after a kernel crash occurs and a core dump file is created. The core dump file is also known as the \u003Ccode class=\"literal\">vmcore\u003C/code> file.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable the relevant repositories:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># subscription-manager repos --enable \u003Cspan class=\"emphasis\">\u003Cem>baseos repository\u003C/em>\u003C/span>\u003C/pre>\u003Cpre class=\"screen\"># subscription-manager repos --enable \u003Cspan class=\"emphasis\">\u003Cem>appstream repository\u003C/em>\u003C/span>\u003C/pre>\u003Cpre class=\"screen\"># subscription-manager repos --enable \u003Cspan class=\"emphasis\">\u003Cem>rhel-9-for-x86_64-baseos-debug-rpms\u003C/em>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the \u003Ccode class=\"literal package\">crash\u003C/code> package:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># dnf install crash\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the \u003Ccode class=\"literal package\">kernel-debuginfo\u003C/code> package:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># dnf install kernel-debuginfo\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe package \u003Ccode class=\"literal\">kernel-debuginfo\u003C/code> will correspond to the running kernel and provides the data necessary for the dump analysis.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"running-and-exiting-the-crash-utility_analyzing-a-core-dump\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">19.2. Running and exiting the crash utility\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tWith the provided information, understand the required parameters and the procedure to run and exit the \u003Ccode class=\"literal\">crash\u003C/code> utility.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIdentify the currently running kernel (for example \u003Ccode class=\"literal\">5.14.0-1.el9.x86_64\u003C/code>).\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo start the \u003Ccode class=\"literal\">crash\u003C/code> utility, two necessary parameters need to be passed to the command:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe debug-info (a decompressed vmlinuz image), for example \u003Ccode class=\"literal\">/usr/lib/debug/lib/modules/5.14.0-1.el9.x86_64/vmlinux\u003C/code> provided through a specific \u003Ccode class=\"literal\">kernel-debuginfo\u003C/code> package.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe actual vmcore file, for example \u003Ccode class=\"literal\">/var/crash/127.0.0.1-2021-09-13-14:05:33/vmcore\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe resulting \u003Ccode class=\"literal command\">crash\u003C/code> command then looks like this:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># crash /usr/lib/debug/lib/modules/5.14.0-1.el9.x86_64/vmlinux /var/crash/127.0.0.1-2021-09-13-14:05:33/vmcore\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tUse the same \u003Cspan class=\"emphasis\">\u003Cem>&lt;kernel&gt;\u003C/em>\u003C/span> version that was captured by \u003Ccode class=\"literal\">kdump\u003C/code>.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRunning the crash utility\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe following example shows analyzing a core dump created on September 13 2021 at 14:05 PM, using the 5.14.0-1.el9.x86_64 kernel.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">...\nWARNING: kernel relocated [202MB]: patching 90160 gdb minimal_symbol values\n\n      KERNEL: /usr/lib/debug/lib/modules/5.14.0-1.el9.x86_64/vmlinux\n    DUMPFILE: /var/crash/127.0.0.1-2021-09-13-14:05:33/vmcore  [PARTIAL DUMP]\n        CPUS: 2\n        DATE: Mon Sep 13 14:05:16 2021\n      UPTIME: 01:03:57\nLOAD AVERAGE: 0.00, 0.00, 0.00\n       TASKS: 586\n    NODENAME: localhost.localdomain\n     RELEASE: 5.14.0-1.el9.x86_64\n     VERSION: #1 SMP Wed Aug 29 11:51:55 UTC 2018\n     MACHINE: x86_64  (2904 Mhz)\n      MEMORY: 2.9 GB\n       PANIC: \"sysrq: SysRq : Trigger a crash\"\n         PID: 10635\n     COMMAND: \"bash\"\n        TASK: ffff8d6c84271800  [THREAD_INFO: ffff8d6c84271800]\n         CPU: 1\n       STATE: TASK_RUNNING (SYSRQ)\n\ncrash&gt;\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo exit the interactive prompt and stop \u003Ccode class=\"literal application\">crash\u003C/code>, type \u003Ccode class=\"literal command\">exit\u003C/code> or \u003Ccode class=\"literal command\">q\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">crash&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>exit\u003C/strong>\u003C/span>\n~]#\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe \u003Ccode class=\"literal command\">crash\u003C/code> command is also utilized as a powerful tool for debugging a live system. However, you must use it with caution to avoid system-level issues.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/articles/206873\">A Guide to Unexpected System Restarts\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"displaying-various-indicators-in-the-crash-utility_analyzing-a-core-dump\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">19.3. Displaying various indicators in the crash utility\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tUse the \u003Ccode class=\"literal\">crash\u003C/code> utility to display various indicators, such as a kernel message buffer, a backtrace, a process status, virtual memory information and open files.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Displaying the message buffer\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display the kernel message buffer, type the \u003Ccode class=\"literal command\">log\u003C/code> command at the interactive prompt:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">crash&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>log\u003C/strong>\u003C/span>\n\u003Cspan class=\"strong strong\">\u003Cstrong>... several lines omitted ...\u003C/strong>\u003C/span>\nEIP: 0060:[&lt;c068124f&gt;] EFLAGS: 00010096 CPU: 2\nEIP is at sysrq_handle_crash+0xf/0x20\nEAX: 00000063 EBX: 00000063 ECX: c09e1c8c EDX: 00000000\nESI: c0a09ca0 EDI: 00000286 EBP: 00000000 ESP: ef4dbf24\n DS: 007b ES: 007b FS: 00d8 GS: 00e0 SS: 0068\nProcess bash (pid: 5591, ti=ef4da000 task=f196d560 task.ti=ef4da000)\nStack:\n c068146b c0960891 c0968653 00000003 00000000 00000002 efade5c0 c06814d0\n&lt;0&gt; fffffffb c068150f b7776000 f2600c40 c0569ec4 ef4dbf9c 00000002 b7776000\n&lt;0&gt; efade5c0 00000002 b7776000 c0569e60 c051de50 ef4dbf9c f196d560 ef4dbfb4\nCall Trace:\n [&lt;c068146b&gt;] ? __handle_sysrq+0xfb/0x160\n [&lt;c06814d0&gt;] ? write_sysrq_trigger+0x0/0x50\n [&lt;c068150f&gt;] ? write_sysrq_trigger+0x3f/0x50\n [&lt;c0569ec4&gt;] ? proc_reg_write+0x64/0xa0\n [&lt;c0569e60&gt;] ? proc_reg_write+0x0/0xa0\n [&lt;c051de50&gt;] ? vfs_write+0xa0/0x190\n [&lt;c051e8d1&gt;] ? sys_write+0x41/0x70\n [&lt;c0409adc&gt;] ? syscall_call+0x7/0xb\nCode: a0 c0 01 0f b6 41 03 19 d2 f7 d2 83 e2 03 83 e0 cf c1 e2 04 09 d0 88 41 03 f3 c3 90 c7 05 c8 1b 9e c0 01 00 00 00 0f ae f8 89 f6 &lt;c6&gt; 05 00 00 00 00 01 c3 89 f6 8d bc 27 00 00 00 00 8d 50 d0 83\nEIP: [&lt;c068124f&gt;] sysrq_handle_crash+0xf/0x20 SS:ESP 0068:ef4dbf24\nCR2: 0000000000000000\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tType \u003Ccode class=\"literal command\">help log\u003C/code> for more information about the command usage.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe kernel message buffer includes the most essential information about the system crash. It is always dumped first in to the \u003Ccode class=\"literal\">vmcore-dmesg.txt\u003C/code> file. This is useful when an attempt to get the full \u003Ccode class=\"literal\">vmcore\u003C/code> file failed, for example because of lack of space on the target location. By default, \u003Ccode class=\"literal\">vmcore-dmesg.txt\u003C/code> is placed in the \u003Ccode class=\"literal\">/var/crash/\u003C/code> directory.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Displaying a backtrace\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display the kernel stack trace, use the \u003Ccode class=\"literal command\">bt\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">crash&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>bt\u003C/strong>\u003C/span>\nPID: 5591   TASK: f196d560  CPU: 2   COMMAND: \"bash\"\n #0 [ef4dbdcc] crash_kexec at c0494922\n #1 [ef4dbe20] oops_end at c080e402\n #2 [ef4dbe34] no_context at c043089d\n #3 [ef4dbe58] bad_area at c0430b26\n #4 [ef4dbe6c] do_page_fault at c080fb9b\n #5 [ef4dbee4] error_code (via page_fault) at c080d809\n    EAX: 00000063  EBX: 00000063  ECX: c09e1c8c  EDX: 00000000  EBP: 00000000\n    DS:  007b      ESI: c0a09ca0  ES:  007b      EDI: 00000286  GS:  00e0\n    CS:  0060      EIP: c068124f  ERR: ffffffff  EFLAGS: 00010096\n #6 [ef4dbf18] sysrq_handle_crash at c068124f\n #7 [ef4dbf24] __handle_sysrq at c0681469\n #8 [ef4dbf48] write_sysrq_trigger at c068150a\n #9 [ef4dbf54] proc_reg_write at c0569ec2\n#10 [ef4dbf74] vfs_write at c051de4e\n#11 [ef4dbf94] sys_write at c051e8cc\n#12 [ef4dbfb0] system_call at c0409ad5\n    EAX: ffffffda  EBX: 00000001  ECX: b7776000  EDX: 00000002\n    DS:  007b      ESI: 00000002  ES:  007b      EDI: b7776000\n    SS:  007b      ESP: bfcb2088  EBP: bfcb20b4  GS:  0033\n    CS:  0073      EIP: 00edc416  ERR: 00000004  EFLAGS: 00000246\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tType \u003Ccode class=\"literal command\">bt \u003Cspan class=\"emphasis\">\u003Cem>&lt;pid&gt;\u003C/em>\u003C/span>\u003C/code> to display the backtrace of a specific process or type \u003Ccode class=\"literal command\">help bt\u003C/code> for more information about \u003Ccode class=\"literal command\">bt\u003C/code> usage.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Displaying a process status\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display the status of processes in the system, use the \u003Ccode class=\"literal command\">ps\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">crash&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>ps\u003C/strong>\u003C/span>\n   PID    PPID  CPU   TASK    ST  %MEM     VSZ    RSS  COMM\n&gt;     0      0   0  c09dc560  RU   0.0       0      0  [swapper]\n&gt;     0      0   1  f7072030  RU   0.0       0      0  [swapper]\n      0      0   2  f70a3a90  RU   0.0       0      0  [swapper]\n&gt;     0      0   3  f70ac560  RU   0.0       0      0  [swapper]\n      1      0   1  f705ba90  IN   0.0    2828   1424  init\n\u003Cspan class=\"strong strong\">\u003Cstrong>... several lines omitted ...\u003C/strong>\u003C/span>\n   5566      1   1  f2592560  IN   0.0   12876    784  auditd\n   5567      1   2  ef427560  IN   0.0   12876    784  auditd\n   5587   5132   0  f196d030  IN   0.0   11064   3184  sshd\n&gt;  5591   5587   2  f196d560  RU   0.0    5084   1648  bash\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse \u003Ccode class=\"literal command\">ps \u003Cspan class=\"emphasis\">\u003Cem>&lt;pid&gt;\u003C/em>\u003C/span>\u003C/code> to display the status of a single specific process. Use \u003Cspan class=\"emphasis\">\u003Cem>help ps\u003C/em>\u003C/span> for more information about \u003Ccode class=\"literal command\">ps\u003C/code> usage.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Displaying virtual memory information\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display basic virtual memory information, type the \u003Ccode class=\"literal command\">vm\u003C/code> command at the interactive prompt.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">crash&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>vm\u003C/strong>\u003C/span>\nPID: 5591   TASK: f196d560  CPU: 2   COMMAND: \"bash\"\n   MM       PGD      RSS    TOTAL_VM\nf19b5900  ef9c6000  1648k    5084k\n  VMA       START      END    FLAGS  FILE\nf1bb0310    242000    260000 8000875  /lib/ld-2.12.so\nf26af0b8    260000    261000 8100871  /lib/ld-2.12.so\nefbc275c    261000    262000 8100873  /lib/ld-2.12.so\nefbc2a18    268000    3ed000 8000075  /lib/libc-2.12.so\nefbc23d8    3ed000    3ee000 8000070  /lib/libc-2.12.so\nefbc2888    3ee000    3f0000 8100071  /lib/libc-2.12.so\nefbc2cd4    3f0000    3f1000 8100073  /lib/libc-2.12.so\nefbc243c    3f1000    3f4000 100073\nefbc28ec    3f6000    3f9000 8000075  /lib/libdl-2.12.so\nefbc2568    3f9000    3fa000 8100071  /lib/libdl-2.12.so\nefbc2f2c    3fa000    3fb000 8100073  /lib/libdl-2.12.so\nf26af888    7e6000    7fc000 8000075  /lib/libtinfo.so.5.7\nf26aff2c    7fc000    7ff000 8100073  /lib/libtinfo.so.5.7\nefbc211c    d83000    d8f000 8000075  /lib/libnss_files-2.12.so\nefbc2504    d8f000    d90000 8100071  /lib/libnss_files-2.12.so\nefbc2950    d90000    d91000 8100073  /lib/libnss_files-2.12.so\nf26afe00    edc000    edd000 4040075\nf1bb0a18   8047000   8118000 8001875  /bin/bash\nf1bb01e4   8118000   811d000 8101873  /bin/bash\nf1bb0c70   811d000   8122000 100073\nf26afae0   9fd9000   9ffa000 100073\n\u003Cspan class=\"strong strong\">\u003Cstrong>... several lines omitted ...\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse \u003Ccode class=\"literal command\">vm \u003Cspan class=\"emphasis\">\u003Cem>&lt;pid&gt;\u003C/em>\u003C/span>\u003C/code> to display information about a single specific process, or use \u003Ccode class=\"literal command\">help vm\u003C/code> for more information about \u003Ccode class=\"literal command\">vm\u003C/code> usage.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Displaying open files\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display information about open files, use the \u003Ccode class=\"literal command\">files\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">crash&gt; \u003Cspan class=\"strong strong\">\u003Cstrong>files\u003C/strong>\u003C/span>\nPID: 5591   TASK: f196d560  CPU: 2   COMMAND: \"bash\"\nROOT: /    CWD: /root\n FD    FILE     DENTRY    INODE    TYPE  PATH\n  0  f734f640  eedc2c6c  eecd6048  CHR   /pts/0\n  1  efade5c0  eee14090  f00431d4  REG   /proc/sysrq-trigger\n  2  f734f640  eedc2c6c  eecd6048  CHR   /pts/0\n 10  f734f640  eedc2c6c  eecd6048  CHR   /pts/0\n255  f734f640  eedc2c6c  eecd6048  CHR   /pts/0\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse \u003Ccode class=\"literal command\">files \u003Cspan class=\"emphasis\">\u003Cem>&lt;pid&gt;\u003C/em>\u003C/span>\u003C/code> to display files opened by only one selected process, or use \u003Ccode class=\"literal command\">help files\u003C/code> for more information about \u003Ccode class=\"literal command\">files\u003C/code> usage.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"using-kernel-oops-analyzer_analyzing-a-core-dump\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">19.4. Using Kernel Oops Analyzer\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe Kernel Oops Analyzer tool analyzes the crash dump by comparing the oops messages with known issues in the knowledge base.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSecure an oops message to feed the Kernel Oops Analyzer.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAccess the Kernel Oops Analyzer tool.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo diagnose a kernel crash issue, upload a kernel oops log generated in \u003Ccode class=\"literal\">vmcore\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tAlternatively you can also diagnose a kernel crash issue by providing a text message or a \u003Ccode class=\"literal\">vmcore-dmesg.txt\u003C/code> as an input.+\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tClick \u003Ccode class=\"literal\">DETECT\u003C/code> to compare the oops message based on information from the \u003Ccode class=\"literal command\">makedumpfile\u003C/code> against known solutions.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/labs/kerneloopsanalyzer/\">The Kernel Oops Analyzer\u003C/a> article\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"the-kdump-helper-tool_analyzing-a-core-dump\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">19.5. The Kdump Helper tool\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe Kdump Helper tool helps to set up the \u003Ccode class=\"literal\">kdump\u003C/code> using the provided information. Kdump Helper generates a configuration script based on your preferences. Initiating and running the script on your server sets up the \u003Ccode class=\"literal\">kdump\u003C/code> service.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/labs/kdumphelper/wizard\">Kdump Helper\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"using-early-kdump-to-capture-boot-time-crashes_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 20. Using early kdump to capture boot time crashes\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tEarly kdump is a feature of the \u003Ccode class=\"literal\">kdump\u003C/code> mechanism to capture the \u003Ccode class=\"literal\">vmcore\u003C/code> file if a system or kernel crash occurs during the early phases of the boot process before the system services start. Early kdump loads the crash kernel and the crash kernel’s \u003Ccode class=\"literal\">initramfs\u003C/code> in the memory much earlier.\n\t\t\u003C/p>\u003Cp>\n\t\t\tA kernel crash can sometimes occur during the early boot phase before the \u003Ccode class=\"literal\">kdump\u003C/code> service starts and is able to capture and save the contents of the crashed kernel memory. Therefore, crucial information related to the crash, which is important for troubleshooting, is lost. To address this problem, you can use the \u003Ccode class=\"literal\">early kdump\u003C/code> feature, which is part of the \u003Ccode class=\"literal\">kdump\u003C/code> service.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"enabling-early-kdump_using-early-kdump-to-capture-boot-time-crashes\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">20.1. Enabling early kdump\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe \u003Ccode class=\"literal\">early kdump\u003C/code> feature sets up the crash kernel and the initial RAM disk image (\u003Ccode class=\"literal\">initramfs\u003C/code>) to load early enough to capture the \u003Ccode class=\"literal\">vmcore\u003C/code> information for an early crash. This helps to eliminate the risk of losing information about the early boot kernel crashes.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAn active RHEL subscription.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA repository containing the \u003Ccode class=\"literal package\">kexec-tools\u003C/code> package for your system CPU architecture.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tFulfilled \u003Ccode class=\"literal\">kdump\u003C/code> configuration and targets requirements. For more information see, \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index#supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel\">Supported kdump configurations and targets\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the \u003Ccode class=\"literal\">kdump\u003C/code> service is enabled and active:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl is-enabled kdump.service &amp;&amp; systemctl is-active kdump.service\u003C/strong>\u003C/span>\nenabled\nactive\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf \u003Ccode class=\"literal\">kdump\u003C/code> is not enabled and running, set all required configurations and verify that \u003Ccode class=\"literal\">kdump\u003C/code> service is enabled.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRebuild the \u003Ccode class=\"literal\">initramfs\u003C/code> image of the booting kernel with the \u003Ccode class=\"literal\">early kdump\u003C/code> functionality:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># dracut -f --add earlykdump\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the \u003Ccode class=\"literal\">rd.earlykdump\u003C/code> kernel command line parameter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># grubby --update-kernel=/boot/vmlinuz-$(uname -r) --args=\"rd.earlykdump\"\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReboot the system to reflect the changes:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># reboot\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that \u003Ccode class=\"literal\">rd.earlykdump\u003C/code> is successfully added and \u003Ccode class=\"literal\">early kdump\u003C/code> feature is enabled:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout white-space-pre\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /proc/cmdline\u003C/strong>\u003C/span>\nBOOT_IMAGE=(hd0,msdos1)/vmlinuz-5.14.0-1.el9.x86_64 root=/dev/mapper/rhel-root ro crashkernel=auto resume=/dev/mapper/rhel-swap rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap rhgb quiet rd.earlykdump\n\n# \u003Cspan class=\"strong strong\">\u003Cstrong>journalctl -x | grep early-kdump\u003C/strong>\u003C/span>\nSep 13 15:46:11 redhat dracut-cmdline[304]: early-kdump is enabled.\nSep 13 15:46:12 redhat dracut-cmdline[304]: kexec: loaded early-kdump kernel\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">/usr/share/doc/kexec-tools/early-kdump-howto.txt\u003C/code> file\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/3700611\">What is early kdump support and how do I configure it?\u003C/a> (Red Hat Knowledgebase)\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"signing-a-kernel-and-modules-for-secure-boot_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 21. Signing a kernel and modules for Secure Boot\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tYou can enhance the security of your system by using a signed kernel and signed kernel modules. On UEFI-based build systems where Secure Boot is enabled, you can self-sign a privately built kernel or kernel modules. Furthermore, you can import your public key into a target system where you want to deploy your kernel or kernel modules.\n\t\t\u003C/p>\u003Cp>\n\t\t\tIf Secure Boot is enabled, all of the following components have to be signed with a private key and authenticated with the corresponding public key:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tUEFI operating system boot loader\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tThe Red Hat Enterprise Linux kernel\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tAll kernel modules\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tIf any of these components are not signed and authenticated, the system cannot finish the booting process.\n\t\t\u003C/p>\u003Cp>\n\t\t\tRed Hat Enterprise Linux 9 includes:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tSigned boot loaders\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tSigned kernels\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tSigned kernel modules\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\tIn addition, the signed first-stage boot loader and the signed kernel include embedded Red Hat public keys. These signed executable binaries and embedded keys enable Red Hat Enterprise Linux 9 to install, boot, and run with the Microsoft UEFI Secure Boot Certification Authority keys that are provided by the UEFI firmware on systems that support UEFI Secure Boot.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tNot all UEFI-based systems include support for Secure Boot.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe build system, where you build and sign your kernel module, does not need to have UEFI Secure Boot enabled and does not even need to be a UEFI-based system.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"prerequisites\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.1. Prerequisites\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo be able to sign externally built kernel modules, install the utilities from the following packages:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install pesign openssl kernel-devel mokutil keyutils\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-table id=\"idm139825289654080\">\u003Ctable class=\"gt-4-cols lt-7-rows\">\u003Ccaption>Table 21.1. Required utilities\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 18%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 18%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 18%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 45%; \" class=\"col_4\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825287942304\" scope=\"col\">Utility\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825287941216\" scope=\"col\">Provided by package\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825287940128\" scope=\"col\">Used on\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825287939040\" scope=\"col\">Purpose\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287942304\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">efikeygen\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287941216\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal package\">pesign\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287940128\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tBuild system\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287939040\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tGenerates public and private X.509 key pair\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287942304\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">openssl\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287941216\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal package\">openssl\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287940128\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tBuild system\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287939040\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tExports the unencrypted private key\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287942304\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">sign-file\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287941216\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal package\">kernel-devel\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287940128\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tBuild system\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287939040\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tExecutable file used to sign a kernel module with the private key\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287942304\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">mokutil\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287941216\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal package\">mokutil\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287940128\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tTarget system\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287939040\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tOptional utility used to manually enroll the public key\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287942304\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">keyctl\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287941216\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal package\">keyutils\u003C/code>\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287940128\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tTarget system\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287939040\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tOptional utility used to display public keys in the system keyring\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"con_what-is-uefi-secure-boot_signing-a-kernel-and-modules-for-secure-boot\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.2. What is UEFI Secure Boot\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tWith the \u003Cspan class=\"emphasis\">\u003Cem>Unified Extensible Firmware Interface\u003C/em>\u003C/span> (UEFI) Secure Boot technology, you can prevent the execution of the kernel-space code that has not been signed by a trusted key. The system boot loader is signed with a cryptographic key. The database of public keys, which is contained in the firmware, authorizes the signing key. You can subsequently verify a signature in the next-stage boot loader and the kernel.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tUEFI Secure Boot establishes a chain of trust from the firmware to the signed drivers and kernel modules as follows:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAn UEFI private key signs, and a public key authenticates the \u003Ccode class=\"literal\">shim\u003C/code> first-stage boot loader. A \u003Cspan class=\"emphasis\">\u003Cem>certificate authority\u003C/em>\u003C/span> (CA) in turn signs the public key. The CA is stored in the firmware database.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">shim\u003C/code> file contains the Red Hat public key \u003Cspan class=\"strong strong\">\u003Cstrong>Red Hat Secure Boot (CA key 1)\u003C/strong>\u003C/span> to authenticate the GRUB boot loader and the kernel.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe kernel in turn contains public keys to authenticate drivers and modules.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tSecure Boot is the boot path validation component of the UEFI specification. The specification defines:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tProgramming interface for cryptographically protected UEFI variables in non-volatile storage.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStoring the trusted X.509 root certificates in UEFI variables.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tValidation of UEFI applications such as boot loaders and drivers.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tProcedures to revoke known-bad certificates and application hashes.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tUEFI Secure Boot helps in the detection of unauthorized changes but does \u003Cspan class=\"strong strong\">\u003Cstrong>not\u003C/strong>\u003C/span>:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPrevent installation or removal of second-stage boot loaders.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRequire explicit user confirmation of such changes.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStop boot path manipulations. Signatures are verified during booting, not when the boot loader is installed or updated.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tIf the boot loader or the kernel are not signed by a system trusted key, Secure Boot prevents them from starting.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"con_uefi-secure-boot-support_signing-a-kernel-and-modules-for-secure-boot\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.3. UEFI Secure Boot support\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can install and run Red Hat Enterprise Linux 9 on systems with enabled UEFI Secure Boot if the kernel and all the loaded drivers are signed with a trusted key. Red Hat provides kernels and drivers that are signed and authenticated by the relevant Red Hat keys.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIf you want to load externally built kernels or drivers, you must sign them as well.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Restrictions imposed by UEFI Secure Boot\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe system only runs the kernel-mode code after its signature has been properly authenticated.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tGRUB module loading is disabled because there is no infrastructure for signing and verification of GRUB modules. Allowing them to be loaded constitutes execution of untrusted code inside the security perimeter that Secure Boot defines.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRed Hat provides a signed GRUB binary that contains all the supported modules on Red Hat Enterprise Linux 9.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/articles/1351013\">Restrictions Imposed by UEFI Secure Boot\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"ref_requirements-for-authenticating-kernel-modules-with-x-509-keys_signing-a-kernel-and-modules-for-secure-boot\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.4. Requirements for authenticating kernel modules with X.509 keys\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIn Red Hat Enterprise Linux 9, when a kernel module is loaded, the kernel checks the signature of the module against the public X.509 keys from the kernel system keyring (\u003Ccode class=\"literal\">.builtin_trusted_keys\u003C/code>) and the kernel platform keyring (\u003Ccode class=\"literal\">.platform\u003C/code>). The \u003Ccode class=\"literal\">.platform\u003C/code> keyring contains keys from third-party platform providers and custom public keys. The keys from the kernel system \u003Ccode class=\"literal\">.blacklist\u003C/code> keyring are excluded from verification.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou need to meet certain conditions to load kernel modules on systems with enabled UEFI Secure Boot functionality:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf UEFI Secure Boot is enabled or if the \u003Ccode class=\"literal option\">module.sig_enforce\u003C/code> kernel parameter has been specified:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tYou can only load those signed kernel modules whose signatures were authenticated against keys from the system keyring (\u003Ccode class=\"literal\">.builtin_trusted_keys\u003C/code>) and the platform keyring (\u003Ccode class=\"literal\">.platform\u003C/code>).\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe public key must not be on the system revoked keys keyring (\u003Ccode class=\"literal\">.blacklist\u003C/code>).\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf UEFI Secure Boot is disabled and the \u003Ccode class=\"literal option\">module.sig_enforce\u003C/code> kernel parameter has not been specified:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tYou can load unsigned kernel modules and signed kernel modules without a public key.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf the system is not UEFI-based or if UEFI Secure Boot is disabled:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tOnly the keys embedded in the kernel are loaded onto \u003Ccode class=\"literal\">.builtin_trusted_keys\u003C/code> and \u003Ccode class=\"literal\">.platform\u003C/code>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tYou have no ability to augment that set of keys without rebuilding the kernel.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Crh-table id=\"idm139825288822704\">\u003Ctable class=\"gt-4-cols lt-7-rows\">\u003Ccaption>Table 21.2. Kernel module authentication requirements for loading\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 18%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 18%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 18%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 18%; \" class=\"col_4\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 18%; \" class=\"col_5\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 9%; \" class=\"col_6\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825288814128\" scope=\"col\">Module signed\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825288813040\" scope=\"col\">Public key found and signature valid\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825288811936\" scope=\"col\">UEFI Secure Boot state\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825288810848\" scope=\"col\">\u003Ccode class=\"literal\">sig_enforce\u003C/code>\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825288809600\" scope=\"col\">Module load\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825288808352\" scope=\"col\">Kernel tainted\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd rowspan=\"3\" align=\"left\" valign=\"top\" headers=\"idm139825288814128\"> \u003Cp>\n\t\t\t\t\t\t\t\tUnsigned\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd rowspan=\"3\" align=\"left\" valign=\"top\" headers=\"idm139825288813040\"> \u003Cp>\n\t\t\t\t\t\t\t\t-\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288811936\"> \u003Cp>\n\t\t\t\t\t\t\t\tNot enabled\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288810848\"> \u003Cp>\n\t\t\t\t\t\t\t\tNot enabled\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288809600\"> \u003Cp>\n\t\t\t\t\t\t\t\tSucceeds\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288808352\"> \u003Cp>\n\t\t\t\t\t\t\t\tYes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288811936\"> \u003Cp>\n\t\t\t\t\t\t\t\tNot enabled\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288810848\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnabled\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288809600\"> \u003Cp>\n\t\t\t\t\t\t\t\tFails\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288808352\"> \u003Cp>\n\t\t\t\t\t\t\t\t-\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288811936\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnabled\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288810848\"> \u003Cp>\n\t\t\t\t\t\t\t\t-\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288809600\"> \u003Cp>\n\t\t\t\t\t\t\t\tFails\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288808352\"> \u003Cp>\n\t\t\t\t\t\t\t\t-\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd rowspan=\"3\" align=\"left\" valign=\"top\" headers=\"idm139825288814128\"> \u003Cp>\n\t\t\t\t\t\t\t\tSigned\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd rowspan=\"3\" align=\"left\" valign=\"top\" headers=\"idm139825288813040\"> \u003Cp>\n\t\t\t\t\t\t\t\tNo\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288811936\"> \u003Cp>\n\t\t\t\t\t\t\t\tNot enabled\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288810848\"> \u003Cp>\n\t\t\t\t\t\t\t\tNot enabled\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288809600\"> \u003Cp>\n\t\t\t\t\t\t\t\tSucceeds\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288808352\"> \u003Cp>\n\t\t\t\t\t\t\t\tYes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288811936\"> \u003Cp>\n\t\t\t\t\t\t\t\tNot enabled\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288810848\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnabled\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288809600\"> \u003Cp>\n\t\t\t\t\t\t\t\tFails\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288808352\"> \u003Cp>\n\t\t\t\t\t\t\t\t-\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288811936\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnabled\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288810848\"> \u003Cp>\n\t\t\t\t\t\t\t\t-\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288809600\"> \u003Cp>\n\t\t\t\t\t\t\t\tFails\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288808352\"> \u003Cp>\n\t\t\t\t\t\t\t\t-\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd rowspan=\"3\" align=\"left\" valign=\"top\" headers=\"idm139825288814128\"> \u003Cp>\n\t\t\t\t\t\t\t\tSigned\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd rowspan=\"3\" align=\"left\" valign=\"top\" headers=\"idm139825288813040\"> \u003Cp>\n\t\t\t\t\t\t\t\tYes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288811936\"> \u003Cp>\n\t\t\t\t\t\t\t\tNot enabled\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288810848\"> \u003Cp>\n\t\t\t\t\t\t\t\tNot enabled\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288809600\"> \u003Cp>\n\t\t\t\t\t\t\t\tSucceeds\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288808352\"> \u003Cp>\n\t\t\t\t\t\t\t\tNo\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288811936\"> \u003Cp>\n\t\t\t\t\t\t\t\tNot enabled\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288810848\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnabled\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288809600\"> \u003Cp>\n\t\t\t\t\t\t\t\tSucceeds\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288808352\"> \u003Cp>\n\t\t\t\t\t\t\t\tNo\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288811936\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnabled\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288810848\"> \u003Cp>\n\t\t\t\t\t\t\t\t-\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288809600\"> \u003Cp>\n\t\t\t\t\t\t\t\tSucceeds\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825288808352\"> \u003Cp>\n\t\t\t\t\t\t\t\tNo\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003C/section>\u003Csection class=\"section\" id=\"sources-for-public-keys_signing-a-kernel-and-modules-for-secure-boot\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.5. Sources for public keys\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tDuring boot, the kernel loads X.509 keys from a set of persistent key stores into the following keyrings:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe system keyring (\u003Ccode class=\"literal\">.builtin_trusted_keys\u003C/code>)\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">.platform\u003C/code> keyring\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe system \u003Ccode class=\"literal\">.blacklist\u003C/code> keyring\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-table id=\"idm139825320459984\">\u003Ctable class=\"gt-4-cols lt-7-rows\">\u003Ccaption>Table 21.3. Sources for system keyrings\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 30%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 15%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 20%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 35%; \" class=\"col_4\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825320453280\" scope=\"col\">Source of X.509 keys\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825320452192\" scope=\"col\">User can add keys\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825320451104\" scope=\"col\">UEFI Secure Boot state\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825320450016\" scope=\"col\">Keys loaded during boot\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825320453280\"> \u003Cp>\n\t\t\t\t\t\t\t\tEmbedded in kernel\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825320452192\"> \u003Cp>\n\t\t\t\t\t\t\t\tNo\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825320451104\"> \u003Cp>\n\t\t\t\t\t\t\t\t-\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825320450016\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">.builtin_trusted_keys\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd rowspan=\"2\" align=\"left\" valign=\"top\" headers=\"idm139825320453280\"> \u003Cp>\n\t\t\t\t\t\t\t\tUEFI \u003Ccode class=\"literal\">db\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd rowspan=\"2\" align=\"left\" valign=\"top\" headers=\"idm139825320452192\"> \u003Cp>\n\t\t\t\t\t\t\t\tLimited\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825320451104\"> \u003Cp>\n\t\t\t\t\t\t\t\tNot enabled\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825320450016\"> \u003Cp>\n\t\t\t\t\t\t\t\tNo\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825320451104\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnabled\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825320450016\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">.platform\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd rowspan=\"2\" align=\"left\" valign=\"top\" headers=\"idm139825320453280\"> \u003Cp>\n\t\t\t\t\t\t\t\tEmbedded in the \u003Ccode class=\"literal\">shim\u003C/code> boot loader\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd rowspan=\"2\" align=\"left\" valign=\"top\" headers=\"idm139825320452192\"> \u003Cp>\n\t\t\t\t\t\t\t\tNo\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825320451104\"> \u003Cp>\n\t\t\t\t\t\t\t\tNot enabled\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825320450016\"> \u003Cp>\n\t\t\t\t\t\t\t\tNo\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825320451104\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnabled\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825320450016\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">.platform\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd rowspan=\"2\" align=\"left\" valign=\"top\" headers=\"idm139825320453280\"> \u003Cp>\n\t\t\t\t\t\t\t\tMachine Owner Key (MOK) list\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd rowspan=\"2\" align=\"left\" valign=\"top\" headers=\"idm139825320452192\"> \u003Cp>\n\t\t\t\t\t\t\t\tYes\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825320451104\"> \u003Cp>\n\t\t\t\t\t\t\t\tNot enabled\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825320450016\"> \u003Cp>\n\t\t\t\t\t\t\t\tNo\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825320451104\"> \u003Cp>\n\t\t\t\t\t\t\t\tEnabled\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825320450016\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">.platform\u003C/code>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">.builtin_trusted_keys\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tA keyring that is built on boot\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tContains trusted public keys\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">root\u003C/code> privileges are needed to view the keys\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">.platform\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tA keyring that is built on boot\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tContains keys from third-party platform providers and custom public keys\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\u003Ccode class=\"literal\">root\u003C/code> privileges are needed to view the keys\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">.blacklist\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tA keyring with X.509 keys which have been revoked\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tA module signed by a key from \u003Ccode class=\"literal\">.blacklist\u003C/code> will fail authentication even if your public key is in \u003Ccode class=\"literal\">.builtin_trusted_keys\u003C/code>\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">UEFI Secure Boot \u003Ccode class=\"literal\">db\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tA signature database\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tStores keys (hashes) of UEFI applications, UEFI drivers, and boot loaders\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tThe keys can be loaded on the machine\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">UEFI Secure Boot \u003Ccode class=\"literal\">dbx\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tA revoked signature database\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tPrevents keys from being loaded\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tThe revoked keys from this database are added to the \u003Ccode class=\"literal\">.blacklist\u003C/code> keyring\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003C/dl>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"generating-a-public-and-private-key-pair_signing-a-kernel-and-modules-for-secure-boot\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.6. Generating a public and private key pair\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo use a custom kernel or custom kernel modules on a Secure Boot-enabled system, you must generate a public and private X.509 key pair. You can use the generated private key to sign the kernel or the kernel modules. You can also validate the signed kernel or kernel modules by adding the corresponding public key to the Machine Owner Key (MOK) for Secure Boot.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tApply strong security measures and access policies to guard the contents of your private key. In the wrong hands, the key could be used to compromise any system which is authenticated by the corresponding public key.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate an X.509 public and private key pair:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you only want to sign custom kernel \u003Cspan class=\"emphasis\">\u003Cem>modules\u003C/em>\u003C/span>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>efikeygen --dbdir /etc/pki/pesign \\\u003C/strong>\u003C/span>\n            \u003Cspan class=\"strong strong\">\u003Cstrong>--self-sign \\\u003C/strong>\u003C/span>\n            \u003Cspan class=\"strong strong\">\u003Cstrong>--module \\\u003C/strong>\u003C/span>\n            \u003Cspan class=\"strong strong\">\u003Cstrong>--common-name 'CN=\u003Cspan class=\"emphasis\">\u003Cem>Organization signing key\u003C/em>\u003C/span>' \\\u003C/strong>\u003C/span>\n            \u003Cspan class=\"strong strong\">\u003Cstrong>--nickname '\u003Cspan class=\"emphasis\">\u003Cem>Custom Secure Boot key\u003C/em>\u003C/span>'\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIf you want to sign custom \u003Cspan class=\"emphasis\">\u003Cem>kernel\u003C/em>\u003C/span>:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>efikeygen --dbdir /etc/pki/pesign \\\u003C/strong>\u003C/span>\n            \u003Cspan class=\"strong strong\">\u003Cstrong>--self-sign \\\u003C/strong>\u003C/span>\n            \u003Cspan class=\"strong strong\">\u003Cstrong>--kernel \\\u003C/strong>\u003C/span>\n            \u003Cspan class=\"strong strong\">\u003Cstrong>--common-name 'CN=\u003Cspan class=\"emphasis\">\u003Cem>Organization signing key\u003C/em>\u003C/span>' \\\u003C/strong>\u003C/span>\n            \u003Cspan class=\"strong strong\">\u003Cstrong>--nickname '\u003Cspan class=\"emphasis\">\u003Cem>Custom Secure Boot key\u003C/em>\u003C/span>'\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tWhen the RHEL system is running FIPS mode:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>efikeygen --dbdir /etc/pki/pesign \\\u003C/strong>\u003C/span>\n            \u003Cspan class=\"strong strong\">\u003Cstrong>--self-sign \\\u003C/strong>\u003C/span>\n            \u003Cspan class=\"strong strong\">\u003Cstrong>--kernel \\\u003C/strong>\u003C/span>\n            \u003Cspan class=\"strong strong\">\u003Cstrong>--common-name 'CN=\u003Cspan class=\"emphasis\">\u003Cem>Organization signing key\u003C/em>\u003C/span>' \\\u003C/strong>\u003C/span>\n            \u003Cspan class=\"strong strong\">\u003Cstrong>--nickname '\u003Cspan class=\"emphasis\">\u003Cem>Custom Secure Boot key\u003C/em>\u003C/span>'\u003C/strong>\u003C/span>\n            \u003Cspan class=\"strong strong\">\u003Cstrong>--token 'NSS FIPS 140-2 Certificate DB'\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\t\tIn FIPS mode, you must use the \u003Ccode class=\"literal\">--token\u003C/code> option so that \u003Ccode class=\"literal\">efikeygen\u003C/code> finds the default \"NSS Certificate DB\" token in the PKI database.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe public and private keys are now stored in the \u003Ccode class=\"literal\">/etc/pki/pesign/\u003C/code> directory.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIt is a good security practice to sign the kernel and the kernel modules within the validity period of its signing key. However, the \u003Ccode class=\"literal\">sign-file\u003C/code> utility does not warn you and the key will be usable in Red Hat Enterprise Linux 9 regardless of the validity dates.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">openssl(1)\u003C/code> manual page\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>\u003Cspan class=\"citetitle citetitle\">\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html-single/security_guide/index#sec-Using_OpenSSL\">RHEL Security Guide\u003C/a>\u003C/span>\u003C/em>\u003C/span>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#enrolling-public-key-on-target-system-by-adding-the-public-key-to-the-mok-list_signing-a-kernel-and-modules-for-secure-boot\" title=\"21.8. Enrolling public key on target system by adding the public key to the MOK list\">Enrolling public key on target system by adding the public key to the MOK list\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"example-output-of-system-keyrings_signing-a-kernel-and-modules-for-secure-boot\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.7. Example output of system keyrings\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can display information about the keys on the system keyrings using the \u003Ccode class=\"literal command\">keyctl\u003C/code> utility from the \u003Ccode class=\"literal\">keyutils\u003C/code> package.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have root permissions.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have installed the \u003Ccode class=\"literal command\">keyctl\u003C/code> utility from the \u003Ccode class=\"literal\">keyutils\u003C/code> package.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"example\" id=\"idm139825287059216\">\u003Cp class=\"title\">\u003Cstrong>Example 21.1. Keyrings output\u003C/strong>\u003C/p>\u003Cdiv class=\"example-contents\">\u003Cp>\n\t\t\t\t\tThe following is a shortened example output of \u003Ccode class=\"literal\">.builtin_trusted_keys\u003C/code>, \u003Ccode class=\"literal\">.platform\u003C/code>, and \u003Ccode class=\"literal\">.blacklist\u003C/code> keyrings from a Red Hat Enterprise Linux 9 system where UEFI Secure Boot is enabled.\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>keyctl list %:.builtin_trusted_keys\u003C/strong>\u003C/span>\n6 keys in keyring:\n...asymmetric: Red Hat Enterprise Linux Driver Update Program (key 3): bf57f3e87...\n...asymmetric: Red Hat Secure Boot (CA key 1): 4016841644ce3a810408050766e8f8a29...\n...asymmetric: Microsoft Corporation UEFI CA 2011: 13adbf4309bd82709c8cd54f316ed...\n...asymmetric: Microsoft Windows Production PCA 2011: a92902398e16c49778cd90f99e...\n...asymmetric: Red Hat Enterprise Linux kernel signing key: 4249689eefc77e95880b...\n...asymmetric: Red Hat Enterprise Linux kpatch signing key: 4d38fd864ebe18c5f0b7...\n\n# \u003Cspan class=\"strong strong\">\u003Cstrong>keyctl list %:.platform\u003C/strong>\u003C/span>\n4 keys in keyring:\n...asymmetric: VMware, Inc.: 4ad8da0472073...\n...asymmetric: Red Hat Secure Boot CA 5: cc6fafe72...\n...asymmetric: Microsoft Windows Production PCA 2011: a929f298e1...\n...asymmetric: Microsoft Corporation UEFI CA 2011: 13adbf4e0bd82...\n\n# \u003Cspan class=\"strong strong\">\u003Cstrong>keyctl list %:.blacklist\u003C/strong>\u003C/span>\n4 keys in keyring:\n...blacklist: bin:f5ff83a...\n...blacklist: bin:0dfdbec...\n...blacklist: bin:38f1d22...\n...blacklist: bin:51f831f...\u003C/pre>\u003Cp>\n\t\t\t\t\tThe \u003Ccode class=\"literal\">.builtin_trusted_keys\u003C/code> keyring in the example shows the addition of two keys from the UEFI Secure Boot \u003Ccode class=\"literal\">db\u003C/code> keys as well as the \u003Ccode class=\"literal\">Red Hat Secure Boot (CA key 1)\u003C/code>, which is embedded in the \u003Ccode class=\"literal\">shim\u003C/code> boot loader.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/div>\u003Cdiv class=\"example\" id=\"idm139825287049568\">\u003Cp class=\"title\">\u003Cstrong>Example 21.2. Kernel console output\u003C/strong>\u003C/p>\u003Cdiv class=\"example-contents\">\u003Cp>\n\t\t\t\t\tThe following example shows the kernel console output. The messages identify the keys with an UEFI Secure Boot related source. These include UEFI Secure Boot \u003Ccode class=\"literal\">db\u003C/code>, embedded \u003Ccode class=\"literal\">shim\u003C/code>, and MOK list.\n\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dmesg | egrep 'integrity.*cert'\u003C/strong>\u003C/span>\n[1.512966] integrity: Loading X.509 certificate: UEFI:db\n[1.513027] integrity: Loaded X.509 cert 'Microsoft Windows Production PCA 2011: a929023...\n[1.513028] integrity: Loading X.509 certificate: UEFI:db\n[1.513057] integrity: Loaded X.509 cert 'Microsoft Corporation UEFI CA 2011: 13adbf4309...\n[1.513298] integrity: Loading X.509 certificate: UEFI:MokListRT (MOKvar table)\n[1.513549] integrity: Loaded X.509 cert 'Red Hat Secure Boot CA 5: cc6fa5e72868ba494e93...\u003C/pre>\u003C/div>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">keyctl(1)\u003C/code>, \u003Ccode class=\"literal\">dmesg(1)\u003C/code> manual pages\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"enrolling-public-key-on-target-system-by-adding-the-public-key-to-the-mok-list_signing-a-kernel-and-modules-for-secure-boot\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.8. Enrolling public key on target system by adding the public key to the MOK list\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou must authenticate your public key on a system for kernel or kernel module access and enroll it in the platform keyring (\u003Ccode class=\"literal\">.platform\u003C/code>) of the target system. When RHEL 9 boots on a UEFI-based system with Secure Boot enabled, the kernel imports public keys from the \u003Ccode class=\"literal\">db\u003C/code> key database and excludes revoked keys from the \u003Ccode class=\"literal\">dbx\u003C/code> database.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe Machine Owner Key (MOK) facility allows expanding the UEFI Secure Boot key database. When booting RHEL 9 on UEFI-enabled systems with Secure Boot enabled, keys on the MOK list are added to the platform keyring (\u003Ccode class=\"literal\">.platform\u003C/code>), along with the keys from the Secure Boot database. The list of MOK keys is stored securely and persistently in the same way, but it is a separate facility from the Secure Boot databases.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe MOK facility is supported by \u003Ccode class=\"literal\">shim\u003C/code>, \u003Ccode class=\"literal\">MokManager\u003C/code>, \u003Ccode class=\"literal\">GRUB\u003C/code>, and the \u003Ccode class=\"literal\">mokutil\u003C/code> utility that enables secure key management and authentication for UEFI-based systems.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tTo facilitate authentication of your kernel module on your systems, consider requesting your system vendor to incorporate your public key into the UEFI Secure Boot key database in their factory firmware image.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have generated a public and private key pair and know the validity dates of your public keys. For details, see \u003Ca class=\"link\" href=\"#generating-a-public-and-private-key-pair_signing-a-kernel-and-modules-for-secure-boot\" title=\"21.6. Generating a public and private key pair\">Generating a public and private key pair\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tExport your public key to the \u003Ccode class=\"literal\">sb_cert.cer\u003C/code> file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>certutil -d /etc/pki/pesign \\\u003C/strong>\u003C/span>\n           \u003Cspan class=\"strong strong\">\u003Cstrong>-n '\u003Cspan class=\"emphasis\">\u003Cem>Custom Secure Boot key\u003C/em>\u003C/span>' \\\u003C/strong>\u003C/span>\n           \u003Cspan class=\"strong strong\">\u003Cstrong>-Lr \\\u003C/strong>\u003C/span>\n           \u003Cspan class=\"strong strong\">\u003Cstrong>&gt; sb_cert.cer\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tImport your public key into the MOK list:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mokutil --import sb_cert.cer\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnter a new password for this MOK enrollment request.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReboot the machine.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">shim\u003C/code> boot loader notices the pending MOK key enrollment request and it launches \u003Ccode class=\"literal\">MokManager.efi\u003C/code> to enable you to complete the enrollment from the UEFI console.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tChoose \u003Ccode class=\"literal\">Enroll MOK\u003C/code>, enter the password you previously associated with this request when prompted, and confirm the enrollment.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYour public key is added to the MOK list, which is persistent.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOnce a key is on the MOK list, it will be automatically propagated to the \u003Ccode class=\"literal\">.platform\u003C/code> keyring on this and subsequent boots when UEFI Secure Boot is enabled.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"signing-a-kernel-with-the-private-key_signing-a-kernel-and-modules-for-secure-boot\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.9. Signing a kernel with the private key\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can obtain enhanced security benefits on your system by loading a signed kernel if the UEFI Secure Boot mechanism is enabled.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have generated a public and private key pair and know the validity dates of your public keys. For details, see \u003Ca class=\"link\" href=\"#generating-a-public-and-private-key-pair_signing-a-kernel-and-modules-for-secure-boot\" title=\"21.6. Generating a public and private key pair\">Generating a public and private key pair\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have enrolled your public key on the target system. For details, see \u003Ca class=\"link\" href=\"#enrolling-public-key-on-target-system-by-adding-the-public-key-to-the-mok-list_signing-a-kernel-and-modules-for-secure-boot\" title=\"21.8. Enrolling public key on target system by adding the public key to the MOK list\">Enrolling public key on target system by adding the public key to the MOK list\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have a kernel image in the ELF format available for signing.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the x64 architecture:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate a signed image:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>pesign --certificate '\u003Cspan class=\"emphasis\">\u003Cem>Custom Secure Boot key\u003C/em>\u003C/span>'\u003C/strong>\u003C/span> \\\n         \u003Cspan class=\"strong strong\">\u003Cstrong>--in vmlinuz-\u003Cspan class=\"emphasis\">\u003Cem>version\u003C/em>\u003C/span>\u003C/strong>\u003C/span> \\\n         \u003Cspan class=\"strong strong\">\u003Cstrong>--sign\u003C/strong>\u003C/span> \\\n         \u003Cspan class=\"strong strong\">\u003Cstrong>--out vmlinuz-\u003Cspan class=\"emphasis\">\u003Cem>version\u003C/em>\u003C/span>.signed\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tReplace \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>version\u003C/em>\u003C/span>\u003C/code> with the version suffix of your \u003Ccode class=\"literal\">vmlinuz\u003C/code> file, and \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>Custom Secure Boot key\u003C/em>\u003C/span>\u003C/code> with the name that you chose earlier.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOptional: Check the signatures:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>pesign --show-signature\u003C/strong>\u003C/span> \\\n         \u003Cspan class=\"strong strong\">\u003Cstrong>--in vmlinuz-\u003Cspan class=\"emphasis\">\u003Cem>version\u003C/em>\u003C/span>.signed\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOverwrite the unsigned image with the signed image:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mv vmlinuz-\u003Cspan class=\"emphasis\">\u003Cem>version\u003C/em>\u003C/span>.signed vmlinuz-\u003Cspan class=\"emphasis\">\u003Cem>version\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the 64-bit ARM architecture:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tDecompress the \u003Ccode class=\"literal\">vmlinuz\u003C/code> file:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>zcat vmlinuz-\u003Cspan class=\"emphasis\">\u003Cem>version\u003C/em>\u003C/span> &gt; vmlinux-\u003Cspan class=\"emphasis\">\u003Cem>version\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate a signed image:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>pesign --certificate '\u003Cspan class=\"emphasis\">\u003Cem>Custom Secure Boot key\u003C/em>\u003C/span>'\u003C/strong>\u003C/span> \\\n         \u003Cspan class=\"strong strong\">\u003Cstrong>--in vmlinux-\u003Cspan class=\"emphasis\">\u003Cem>version\u003C/em>\u003C/span>\u003C/strong>\u003C/span> \\\n         \u003Cspan class=\"strong strong\">\u003Cstrong>--sign\u003C/strong>\u003C/span> \\\n         \u003Cspan class=\"strong strong\">\u003Cstrong>--out vmlinux-\u003Cspan class=\"emphasis\">\u003Cem>version\u003C/em>\u003C/span>.signed\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOptional: Check the signatures:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>pesign --show-signature\u003C/strong>\u003C/span> \\\n         \u003Cspan class=\"strong strong\">\u003Cstrong>--in vmlinux-\u003Cspan class=\"emphasis\">\u003Cem>version\u003C/em>\u003C/span>.signed\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCompress the \u003Ccode class=\"literal\">vmlinux\u003C/code> file:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>gzip --to-stdout vmlinux-\u003Cspan class=\"emphasis\">\u003Cem>version\u003C/em>\u003C/span>.signed &gt; vmlinuz-\u003Cspan class=\"emphasis\">\u003Cem>version\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tRemove the uncompressed \u003Ccode class=\"literal\">vmlinux\u003C/code> file:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>rm vmlinux-\u003Cspan class=\"emphasis\">\u003Cem>version\u003C/em>\u003C/span>*\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"signing-a-grub-build-with-the-private-key_signing-a-kernel-and-modules-for-secure-boot\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.10. Signing a GRUB build with the private key\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tOn a system where the UEFI Secure Boot mechanism is enabled, you can sign a GRUB build with a custom existing private key. You must do this if you are using a custom GRUB build, or if you have removed the Microsoft trust anchor from your system.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have generated a public and private key pair and know the validity dates of your public keys. For details, see \u003Ca class=\"link\" href=\"#generating-a-public-and-private-key-pair_signing-a-kernel-and-modules-for-secure-boot\" title=\"21.6. Generating a public and private key pair\">Generating a public and private key pair\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have enrolled your public key on the target system. For details, see \u003Ca class=\"link\" href=\"#enrolling-public-key-on-target-system-by-adding-the-public-key-to-the-mok-list_signing-a-kernel-and-modules-for-secure-boot\" title=\"21.8. Enrolling public key on target system by adding the public key to the MOK list\">Enrolling public key on target system by adding the public key to the MOK list\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have a GRUB EFI binary available for signing.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the x64 architecture:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate a signed GRUB EFI binary:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>pesign --in /boot/efi/EFI/redhat/grubx64.efi\u003C/strong>\u003C/span> \\\n         \u003Cspan class=\"strong strong\">\u003Cstrong>--out /boot/efi/EFI/redhat/grubx64.efi.signed\u003C/strong>\u003C/span> \\\n         \u003Cspan class=\"strong strong\">\u003Cstrong>--certificate '\u003Cspan class=\"emphasis\">\u003Cem>Custom Secure Boot key\u003C/em>\u003C/span>'\u003C/strong>\u003C/span> \\\n         \u003Cspan class=\"strong strong\">\u003Cstrong>--sign\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tReplace \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>Custom Secure Boot key\u003C/em>\u003C/span>\u003C/code> with the name that you chose earlier.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOptional: Check the signatures:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>pesign --in /boot/efi/EFI/redhat/grubx64.efi.signed\u003C/strong>\u003C/span> \\\n         \u003Cspan class=\"strong strong\">\u003Cstrong>--show-signature\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOverwrite the unsigned binary with the signed binary:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mv /boot/efi/EFI/redhat/grubx64.efi.signed\u003C/strong>\u003C/span> \\\n     \u003Cspan class=\"strong strong\">\u003Cstrong>/boot/efi/EFI/redhat/grubx64.efi\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOn the 64-bit ARM architecture:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tCreate a signed GRUB EFI binary:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>pesign --in /boot/efi/EFI/redhat/grubaa64.efi\u003C/strong>\u003C/span> \\\n         \u003Cspan class=\"strong strong\">\u003Cstrong>--out /boot/efi/EFI/redhat/grubaa64.efi.signed\u003C/strong>\u003C/span> \\\n         \u003Cspan class=\"strong strong\">\u003Cstrong>--certificate '\u003Cspan class=\"emphasis\">\u003Cem>Custom Secure Boot key\u003C/em>\u003C/span>'\u003C/strong>\u003C/span> \\\n         \u003Cspan class=\"strong strong\">\u003Cstrong>--sign\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tReplace \u003Ccode class=\"literal\">\u003Cspan class=\"emphasis\">\u003Cem>Custom Secure Boot key\u003C/em>\u003C/span>\u003C/code> with the name that you chose earlier.\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOptional: Check the signatures:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>pesign --in /boot/efi/EFI/redhat/grubaa64.efi.signed\u003C/strong>\u003C/span> \\\n         \u003Cspan class=\"strong strong\">\u003Cstrong>--show-signature\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOverwrite the unsigned binary with the signed binary:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mv /boot/efi/EFI/redhat/grubaa64.efi.signed\u003C/strong>\u003C/span> \\\n     \u003Cspan class=\"strong strong\">\u003Cstrong>/boot/efi/EFI/redhat/grubaa64.efi\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"signing-kernel-modules-with-the-private-key_signing-a-kernel-and-modules-for-secure-boot\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.11. Signing kernel modules with the private key\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can enhance the security of your system by loading signed kernel modules if the UEFI Secure Boot mechanism is enabled.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYour signed kernel module is also loadable on systems where UEFI Secure Boot is disabled or on a non-UEFI system. As a result, you do not need to provide both a signed and unsigned version of your kernel module.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have generated a public and private key pair and know the validity dates of your public keys. For details, see \u003Ca class=\"link\" href=\"#generating-a-public-and-private-key-pair_signing-a-kernel-and-modules-for-secure-boot\" title=\"21.6. Generating a public and private key pair\">Generating a public and private key pair\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have enrolled your public key on the target system. For details, see \u003Ca class=\"link\" href=\"#enrolling-public-key-on-target-system-by-adding-the-public-key-to-the-mok-list_signing-a-kernel-and-modules-for-secure-boot\" title=\"21.8. Enrolling public key on target system by adding the public key to the MOK list\">Enrolling public key on target system by adding the public key to the MOK list\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have a kernel module in ELF image format available for signing.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tExport your public key to the \u003Ccode class=\"literal\">sb_cert.cer\u003C/code> file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>certutil -d /etc/pki/pesign \\\u003C/strong>\u003C/span>\n           \u003Cspan class=\"strong strong\">\u003Cstrong>-n '\u003Cspan class=\"emphasis\">\u003Cem>Custom Secure Boot key\u003C/em>\u003C/span>' \\\u003C/strong>\u003C/span>\n           \u003Cspan class=\"strong strong\">\u003Cstrong>-Lr \\\u003C/strong>\u003C/span>\n           \u003Cspan class=\"strong strong\">\u003Cstrong>&gt; sb_cert.cer\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tExtract the key from the NSS database as a PKCS #12 file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>pk12util -o sb_cert.p12 \\\u003C/strong>\u003C/span>\n           \u003Cspan class=\"strong strong\">\u003Cstrong>-n '\u003Cspan class=\"emphasis\">\u003Cem>Custom Secure Boot key\u003C/em>\u003C/span>' \\\u003C/strong>\u003C/span>\n           \u003Cspan class=\"strong strong\">\u003Cstrong>-d /etc/pki/pesign\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tWhen the previous command prompts you, enter a new password that encrypts the private key.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tExport the unencrypted private key:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>openssl pkcs12 \\\u003C/strong>\u003C/span>\n         \u003Cspan class=\"strong strong\">\u003Cstrong>-in sb_cert.p12 \\\u003C/strong>\u003C/span>\n         \u003Cspan class=\"strong strong\">\u003Cstrong>-out sb_cert.priv \\\u003C/strong>\u003C/span>\n         \u003Cspan class=\"strong strong\">\u003Cstrong>-nocerts \\\u003C/strong>\u003C/span>\n         \u003Cspan class=\"strong strong\">\u003Cstrong>-noenc\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tHandle the unencrypted private key with care.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSign your kernel module. The following command appends the signature directly to the ELF image in your kernel module file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>/usr/src/kernels/$(uname -r)/scripts/sign-file \\\u003C/strong>\u003C/span>\n          \u003Cspan class=\"strong strong\">\u003Cstrong>sha256 \\\u003C/strong>\u003C/span>\n          \u003Cspan class=\"strong strong\">\u003Cstrong>sb_cert.priv \\\u003C/strong>\u003C/span>\n          \u003Cspan class=\"strong strong\">\u003Cstrong>sb_cert.cer \\\u003C/strong>\u003C/span>\n          \u003Cspan class=\"strong strong\">\u003Cstrong>\u003Cspan class=\"emphasis\">\u003Cem>my_module\u003C/em>\u003C/span>.ko\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tYour kernel module is now ready for loading.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIn Red Hat Enterprise Linux 9, the validity dates of the key pair matter. The key does not expire, but the kernel module must be signed within the validity period of its signing key. The \u003Ccode class=\"literal\">sign-file\u003C/code> utility will not warn you of this. For example, a key that is only valid in 2021 can be used to authenticate a kernel module signed in 2021 with that key. However, users cannot use that key to sign a kernel module in 2022.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay information about the kernel module’s signature:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>modinfo \u003Cspan class=\"emphasis\">\u003Cem>my_module\u003C/em>\u003C/span>.ko | grep signer\u003C/strong>\u003C/span>\n  signer:         \u003Cspan class=\"emphasis\">\u003Cem>Your Name Key\u003C/em>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCheck that the signature lists your name as entered during generation.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tThe appended signature is not contained in an ELF image section and is not a formal part of the ELF image. Therefore, utilities such as \u003Ccode class=\"literal command\">readelf\u003C/code> cannot display the signature on your kernel module.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLoad the module:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>insmod \u003Cspan class=\"emphasis\">\u003Cem>my_module\u003C/em>\u003C/span>.ko\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRemove (unload) the module:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>modprobe -r \u003Cspan class=\"emphasis\">\u003Cem>my_module\u003C/em>\u003C/span>.ko\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#displaying-information-about-kernel-modules_managing-kernel-modules\" title=\"3.5. Displaying information about kernel modules\">Displaying information about kernel modules\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"loading-signed-kernel-modules_signing-a-kernel-and-modules-for-secure-boot\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">21.12. Loading signed kernel modules\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tOnce your public key is enrolled in the system keyring (\u003Ccode class=\"literal\">.builtin_trusted_keys\u003C/code>) and the MOK list, and after you have signed the respective kernel module with your private key, you can load your signed kernel module with the \u003Ccode class=\"literal command\">modprobe\u003C/code> command.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have generated the public and private key pair. For details, see \u003Ca class=\"link\" href=\"#generating-a-public-and-private-key-pair_signing-a-kernel-and-modules-for-secure-boot\" title=\"21.6. Generating a public and private key pair\">Generating a public and private key pair\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have enrolled the public key into the system keyring. For details, see \u003Ca class=\"link\" href=\"#enrolling-public-key-on-target-system-by-adding-the-public-key-to-the-mok-list_signing-a-kernel-and-modules-for-secure-boot\" title=\"21.8. Enrolling public key on target system by adding the public key to the MOK list\">Enrolling public key on target system by adding the public key to the MOK list\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have signed a kernel module with the private key. For details, see \u003Ca class=\"link\" href=\"#signing-kernel-modules-with-the-private-key_signing-a-kernel-and-modules-for-secure-boot\" title=\"21.11. Signing kernel modules with the private key\">Signing kernel modules with the private key\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the \u003Ccode class=\"literal\">kernel-modules-extra\u003C/code> package, which creates the \u003Ccode class=\"literal\">/lib/modules/$(uname -r)/extra/\u003C/code> directory:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf -y install kernel-modules-extra\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that your public keys are on the system keyring:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>keyctl list %:.platform\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCopy the kernel module into the \u003Ccode class=\"literal\">extra/\u003C/code> directory of the kernel that you want:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cp \u003Cspan class=\"emphasis\">\u003Cem>my_module\u003C/em>\u003C/span>.ko /lib/modules/$(uname -r)/extra/\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUpdate the modular dependency list:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>depmod -a\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLoad the kernel module:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>modprobe -v my_module\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: To load the module on boot, add it to the \u003Ccode class=\"literal\">/etc/modules-loaded.d/\u003Cspan class=\"emphasis\">\u003Cem>my_module\u003C/em>\u003C/span>.conf\u003C/code> file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"\u003Cspan class=\"emphasis\">\u003Cem>my_module\u003C/em>\u003C/span>\" &gt; /etc/modules-load.d/\u003Cspan class=\"emphasis\">\u003Cem>my_module\u003C/em>\u003C/span>.conf\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the module was successfully loaded:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>lsmod | grep my_module\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#managing-kernel-modules_managing-monitoring-and-updating-the-kernel\" title=\"Chapter 3. Managing kernel modules\">Managing kernel modules\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"updating-the-secure-boot-revocation-list_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 22. Updating the Secure Boot Revocation List\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tYou can update the UEFI Secure Boot Revocation List on your system so that Secure Boot identifies software with known security issues and prevents it from compromising your boot process.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"con_what-is-uefi-secure-boot_updating-the-secure-boot-revocation-list\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">22.1. What is UEFI Secure Boot\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tWith the \u003Cspan class=\"emphasis\">\u003Cem>Unified Extensible Firmware Interface\u003C/em>\u003C/span> (UEFI) Secure Boot technology, you can prevent the execution of the kernel-space code that has not been signed by a trusted key. The system boot loader is signed with a cryptographic key. The database of public keys, which is contained in the firmware, authorizes the signing key. You can subsequently verify a signature in the next-stage boot loader and the kernel.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tUEFI Secure Boot establishes a chain of trust from the firmware to the signed drivers and kernel modules as follows:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAn UEFI private key signs, and a public key authenticates the \u003Ccode class=\"literal\">shim\u003C/code> first-stage boot loader. A \u003Cspan class=\"emphasis\">\u003Cem>certificate authority\u003C/em>\u003C/span> (CA) in turn signs the public key. The CA is stored in the firmware database.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">shim\u003C/code> file contains the Red Hat public key \u003Cspan class=\"strong strong\">\u003Cstrong>Red Hat Secure Boot (CA key 1)\u003C/strong>\u003C/span> to authenticate the GRUB boot loader and the kernel.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe kernel in turn contains public keys to authenticate drivers and modules.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tSecure Boot is the boot path validation component of the UEFI specification. The specification defines:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tProgramming interface for cryptographically protected UEFI variables in non-volatile storage.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStoring the trusted X.509 root certificates in UEFI variables.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tValidation of UEFI applications such as boot loaders and drivers.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tProcedures to revoke known-bad certificates and application hashes.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tUEFI Secure Boot helps in the detection of unauthorized changes but does \u003Cspan class=\"strong strong\">\u003Cstrong>not\u003C/strong>\u003C/span>:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tPrevent installation or removal of second-stage boot loaders.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRequire explicit user confirmation of such changes.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tStop boot path manipulations. Signatures are verified during booting, not when the boot loader is installed or updated.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tIf the boot loader or the kernel are not signed by a system trusted key, Secure Boot prevents them from starting.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"the-secure-boot-revocation-list_updating-the-secure-boot-revocation-list\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">22.2. The Secure Boot Revocation List\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe UEFI Secure Boot Revocation List, or the Secure Boot Forbidden Signature Database (\u003Ccode class=\"literal\">dbx\u003C/code>), is a list that identifies software that Secure Boot no longer allows to run.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tWhen a security issue or a stability problem is found in software that interfaces with Secure Boot, such as in the GRUB boot loader, the Revocation List stores its hash signature. Software with such a recognized signature cannot run during boot, and the system boot fails to prevent compromising the system.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor example, a certain version of GRUB might contain a security issue that allows an attacker to bypass the Secure Boot mechanism. When the issue is found, the Revocation List adds hash signatures of all GRUB versions that contain the issue. As a result, only secure GRUB versions can boot on the system.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe Revocation List requires regular updates to recognize newly found issues. When updating the Revocation List, make sure to use a safe update method that does not cause your currently installed system to no longer boot.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"applying-an-online-revocation-list-update_updating-the-secure-boot-revocation-list\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">22.3. Applying an online Revocation List update\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can update the Secure Boot Revocation List on your system so that Secure Boot prevents known security issues. This procedure is safe and ensures that the update does not prevent your system from booting.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSecure Boot is enabled on your system.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYour system can access the internet for updates.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDetermine the current version of the Revocation List:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># fwupdmgr get-devices\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSee the \u003Ccode class=\"literal\">Current version\u003C/code> field under \u003Ccode class=\"literal\">UEFI dbx\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable the LVFS Revocation List repository:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># fwupdmgr enable-remote lvfs\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRefresh the repository metadata:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># fwupdmgr refresh\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tApply the Revocation List update:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tOn the command line:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># fwupdmgr update\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tIn the graphical interface:\n\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"i\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tOpen the \u003Cspan class=\"strong strong\">\u003Cstrong>Software\u003C/strong>\u003C/span> application\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tNavigate to the \u003Cspan class=\"strong strong\">\u003Cstrong>Updates\u003C/strong>\u003C/span> tab.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tFind the \u003Cspan class=\"strong strong\">\u003Cstrong>Secure Boot dbx Configuration Update\u003C/strong>\u003C/span> entry.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\tClick \u003Cspan class=\"guibutton\">Update\u003C/span>.\n\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAt the end of the update, \u003Ccode class=\"literal\">fwupdmgr\u003C/code> or \u003Cspan class=\"strong strong\">\u003Cstrong>Software\u003C/strong>\u003C/span> asks you to reboot the system. Confirm the reboot.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAfter the reboot, check the current version of the Revocation List again:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># fwupdmgr get-devices\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"applying-an-offline-revocation-list-update_updating-the-secure-boot-revocation-list\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">22.4. Applying an offline Revocation List update\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tOn a system with no internet connection, you can update the Secure Boot Revocation List from RHEL so that Secure Boot prevents known security issues. This procedure is safe and ensures that the update does not prevent your system from booting.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDetermine the current version of the Revocation List:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># fwupdmgr get-devices\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSee the \u003Ccode class=\"literal\">Current version\u003C/code> field under \u003Ccode class=\"literal\">UEFI dbx\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tList the updates available from RHEL:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># ls /usr/share/dbxtool/\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSelect the most recent update file for your architecture. The file names use the following format:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">DBXUpdate-\u003Cspan class=\"emphasis\">\u003Cem>date\u003C/em>\u003C/span>-\u003Cspan class=\"emphasis\">\u003Cem>architecture\u003C/em>\u003C/span>.cab\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall the selected update file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># fwupdmgr install /usr/share/dbxtool/DBXUpdate-\u003Cspan class=\"emphasis\">\u003Cem>date\u003C/em>\u003C/span>-\u003Cspan class=\"emphasis\">\u003Cem>architecture\u003C/em>\u003C/span>.cab\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tAt the end of the update, \u003Ccode class=\"literal\">fwupdmgr\u003C/code> asks you to reboot the system. Confirm the reboot.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAfter the reboot, check the current version of the Revocation List again:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># fwupdmgr get-devices\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"enhancing-security-with-the-kernel-integrity-subsystem_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 23. Enhancing security with the kernel integrity subsystem\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tYou can improve the protection of your system by using components of the kernel integrity subsystem. Learn more about the relevant components and their configuration.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tRed Hat products distributed through methods such as RPMs, ISOs, and zip files are signed with cryptographic signatures. The RHEL Kernel keyring system includes certificates for Red Hat product signing keys only. Therefore, to ensure kernels are tamper-proof, you must not use other hash features.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"the-kernel-integrity-subsystem_enhancing-security-with-the-kernel-integrity-subsystem\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.1. The kernel integrity subsystem\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe integrity subsystem is the kernel component that maintains the overall integrity of system data. This subsystem helps in maintaining the system in the same state from the time it was built. Using this subsystem, you can protect executable files, libraries, and configuration files.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe kernel integrity subsystem consists of two major components:\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Integrity Measurement Architecture (IMA)\u003C/span>\u003C/dt>\u003Cdd>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tIMA measures file content whenever it is executed or opened by cryptographically hashing or signing with cryptographic keys. The keys are stored in the kernel keyring subsystem.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tIMA places the measured values within the kernel’s memory space. This prevents users of the system from modifying the measured values.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tIMA allows local and remote parties to verify the measured values.\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tIMA provides local validation of the current content of files against the values previously stored in the measurement list within the kernel memory. This extension forbids performing any operation on a specific file in case the current and the previous measures do not match.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Extended Verification Module (EVM)\u003C/span>\u003C/dt>\u003Cdd>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tEVM protects extended attributes of files (also known as \u003Cspan class=\"emphasis\">\u003Cem>xattr\u003C/em>\u003C/span>) that are related to system security, such as IMA measurements and SELinux attributes. EVM cryptographically hashes their corresponding values or signs them with cryptographic keys. The keys are stored in the kernel keyring subsystem.\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003C/dl>\u003C/div>\u003Cp>\n\t\t\t\tThe kernel integrity subsystem can use the Trusted Platform Module (TPM) to further harden system security.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tA TPM is a hardware, firmware, or virtual component with integrated cryptographic keys, which is built according to the TPM specification by the Trusted Computing Group (TCG) for important cryptographic functions. TPMs are usually built as dedicated hardware attached to the platform’s motherboard. By providing cryptographic functions from a protected and tamper-proof area of the hardware chip, TPMs are protected from software-based attacks. TPMs provide the following features:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRandom-number generator\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tGenerator and secure storage for cryptographic keys\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tHashing generator\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRemote attestation\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/security_hardening/index\">Security hardening\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/using_selinux/index\">Basic and advanced configuration of Security-Enhanced Linux (SELinux)\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"trusted-and-encrypted-keys_enhancing-security-with-the-kernel-integrity-subsystem\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.2. Trusted and encrypted keys\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>Trusted keys\u003C/em>\u003C/span> and \u003Cspan class=\"emphasis\">\u003Cem>encrypted keys\u003C/em>\u003C/span> are an important part of enhancing system security.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTrusted and encrypted keys are variable-length symmetric keys generated by the kernel that use the kernel keyring service. The integrity of the keys can be verified, which means that they can be used, for example, by the extended verification module (EVM) to verify and confirm the integrity of a running system. User-level programs can only access the keys in the form of encrypted \u003Cspan class=\"emphasis\">\u003Cem>blobs\u003C/em>\u003C/span>.\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Trusted keys\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tTrusted keys need the Trusted Platform Module (TPM) chip, which is used to both create and encrypt (seal) the keys. Each TPM has a master wrapping key, called the storage root key, which is stored within the TPM itself.\n\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tRHEL 9 supports only TPM 2.0. If you must use TPM 1.2, use RHEL 8. For more information, see the \u003Ca class=\"link\" href=\"https://access.redhat.com/solutions/253363\">Is Trusted Platform Module (TPM) supported by Red Hat?\u003C/a> solution.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou can verify that a TPM 2.0 chip has been enabled by entering the following command:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>cat /sys/class/tpm/tpm0/tpm_version_major\u003C/strong>\u003C/span>\n2\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou can also enable a TPM 2.0 chip and manage the TPM 2.0 device through settings in the machine firmware.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tIn addition to that, you can seal the trusted keys with a specific set of the TPM’s \u003Cspan class=\"emphasis\">\u003Cem>platform configuration register\u003C/em>\u003C/span> (PCR) values. PCR contains a set of integrity-management values that reflect the firmware, boot loader, and operating system. This means that PCR-sealed keys can only be decrypted by the TPM on the same system on which they were encrypted. However, when a PCR-sealed trusted key is loaded (added to a keyring), and thus its associated PCR values are verified, it can be updated with new (or future) PCR values, so that a new kernel, for example, can be booted. You can save a single key also as multiple blobs, each with a different PCR value.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Encrypted keys\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tEncrypted keys do not require a TPM, because they use the kernel Advanced Encryption Standard (AES), which makes them faster than trusted keys. Encrypted keys are created using kernel-generated random numbers and encrypted by a \u003Cspan class=\"emphasis\">\u003Cem>master key\u003C/em>\u003C/span> when they are exported into user-space blobs.\n\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cp>\n\t\t\t\tThe master key is either a trusted key or a user key. If the master key is not trusted, the encrypted key is only as secure as the user key used to encrypt it.\n\t\t\t\u003C/p>\u003C/section>\u003Csection class=\"section\" id=\"working-with-trusted-keys_enhancing-security-with-the-kernel-integrity-subsystem\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.3. Working with trusted keys\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can improve system security by using the \u003Ccode class=\"literal\">keyctl\u003C/code> utility to create, export, load and update trusted keys.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTrusted Platform Module (TPM) is enabled and active. See \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index#the-kernel-integrity-subsystem_enhancing-security-with-the-kernel-integrity-subsystem\">The kernel integrity subsystem\u003C/a> and \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index#trusted-and-encrypted-keys_enhancing-security-with-the-kernel-integrity-subsystem\">Trusted and encrypted keys\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou can verify that your system has a TPM by entering the \u003Ccode class=\"literal\">tpm2_pcrread\u003C/code> command. If the output from this command displays several hashes, you have a TPM.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a 2048-bit RSA key with an SHA-256 primary storage key with a persistent handle of, for example, \u003Cspan class=\"emphasis\">\u003Cem>81000001\u003C/em>\u003C/span>, by using one of the following utilities:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tBy using the \u003Ccode class=\"literal\">tss2\u003C/code> package:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>TPM_DEVICE=/dev/tpm0 tsscreateprimary -hi o -st\u003C/strong>\u003C/span>\nHandle 80000000\n# \u003Cspan class=\"strong strong\">\u003Cstrong>TPM_DEVICE=/dev/tpm0 tssevictcontrol -hi o -ho 80000000 -hp 81000001\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tBy using the \u003Ccode class=\"literal\">tpm2-tools\u003C/code> package:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>tpm2_createprimary --key-algorithm=rsa2048 --key-context=key.ctxt\u003C/strong>\u003C/span>\nname-alg:\n  value: sha256\n  raw: 0xb\n…\nsym-keybits: 128\nrsa: xxxxxx…\n\n# \u003Cspan class=\"strong strong\">\u003Cstrong>tpm2_evictcontrol -c key.ctxt 0x81000001\u003C/strong>\u003C/span>\npersistentHandle: 0x81000001\naction: persisted\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a trusted key by using a TPM 2.0 with the syntax of \u003Ccode class=\"literal\">keyctl add trusted \u003Cspan class=\"emphasis\">\u003Cem>&lt;NAME&gt;\u003C/em>\u003C/span> \"new \u003Cspan class=\"emphasis\">\u003Cem>&lt;KEY_LENGTH&gt;\u003C/em>\u003C/span> keyhandle=\u003Cspan class=\"emphasis\">\u003Cem>&lt;PERSISTENT-HANDLE&gt;\u003C/em>\u003C/span> [options]\" \u003Cspan class=\"emphasis\">\u003Cem>&lt;KEYRING&gt;\u003C/em>\u003C/span>\u003C/code>. In this example, the persistent handle is \u003Cspan class=\"emphasis\">\u003Cem>81000001\u003C/em>\u003C/span>.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>keyctl add trusted kmk \"new 32 keyhandle=0x81000001\" @u\u003C/strong>\u003C/span>\n642500861\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe command creates a trusted key called \u003Ccode class=\"literal\">kmk\u003C/code> with the length of \u003Ccode class=\"literal\">32\u003C/code> bytes (256 bits) and places it in the user keyring (\u003Ccode class=\"literal\">@u\u003C/code>). The keys may have a length of 32 to 128 bytes (256 to 1024 bits).\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tList the current structure of the kernel keyrings:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>keyctl show\u003C/strong>\u003C/span>\nSession Keyring\n       -3 --alswrv    500   500  keyring: \u003Cspan class=\"emphasis\">\u003Cem>ses 97833714 --alswrv 500 -1 \\\u003C/em>\u003C/span> keyring: \u003Cspan class=\"emphasis\">\u003Cem>uid.1000 642500861 --alswrv 500 500 \\\u003C/em>\u003C/span> trusted: kmk\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tExport the key to a user-space blob by using the serial number of the trusted key:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>keyctl pipe 642500861 &gt; kmk.blob\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe command uses the \u003Ccode class=\"literal\">pipe\u003C/code> subcommand and the serial number of \u003Ccode class=\"literal\">kmk\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLoad the trusted key from the user-space blob:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>keyctl add trusted kmk \"load `cat kmk.blob`\" @u\u003C/strong>\u003C/span>\n268728824\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate secure encrypted keys that use the TPM-sealed trusted key (\u003Ccode class=\"literal\">kmk\u003C/code>). Follow this syntax: \u003Cspan class=\"emphasis\">\u003Cem>keyctl add encrypted &lt;NAME&gt; \"new [FORMAT] &lt;KEY_TYPE&gt;:&lt;PRIMARY_KEY_NAME&gt; &lt;KEY_LENGTH&gt;\" &lt;KEYRING&gt;\u003C/em>\u003C/span>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>keyctl add encrypted encr-key \"new trusted:kmk 32\" @u\u003C/strong>\u003C/span>\n159771175\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tthe \u003Ccode class=\"literal\">keyctl(1)\u003C/code> manual page\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"working-with-encrypted-keys_enhancing-security-with-the-kernel-integrity-subsystem\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.4. Working with encrypted keys\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can improve system security on systems where a Trusted Platform Module (TPM) is not available by managing encrypted keys.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tGenerate a user key by using a random sequence of numbers.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout white-space-pre\"># \u003Cspan class=\"strong strong\">\u003Cstrong>keyctl add user kmk-user \"$(dd if=/dev/urandom bs=1 count=32 2&gt;/dev/null)\" @u\u003C/strong>\u003C/span>\n427069434\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe command generates a user key called \u003Ccode class=\"literal\">kmk-user\u003C/code> which acts as a \u003Cspan class=\"emphasis\">\u003Cem>primary key\u003C/em>\u003C/span> and is used to seal the actual encrypted keys.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tGenerate an encrypted key using the primary key from the previous step:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>keyctl add encrypted encr-key \"new user:kmk-user 32\" @u\u003C/strong>\u003C/span>\n1012412758\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tList all keys in the specified user keyring:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>keyctl list @u\u003C/strong>\u003C/span>\n2 keys in keyring:\n427069434: --alswrv  1000  1000 user: kmk-user\n1012412758: --alswrv  1000  1000 encrypted: encr-key\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tEncrypted keys that are not sealed by a trusted primary key are only as secure as the user primary key (random-number key) that was used to encrypt them. Therefore, load the primary user key as securely as possible and preferably early during the boot process.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">keyctl(1)\u003C/code> manual page\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"enabling-integrity-measurement-architecture-and-extended-verification-module_enhancing-security-with-the-kernel-integrity-subsystem\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.5. Enabling IMA and EVM\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can enable and configure Integrity measurement architecture (IMA) and extended verification module (EVM) to improve the security of the operating system.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tAlways enable EVM together with IMA.\n\t\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\tAlthough you can enable EVM alone, EVM appraisal is only triggered by an IMA appraisal rule. Therefore, EVM does not protect file metadata such as SELinux attributes. If file metadata is tampered with offline, EVM can only prevent file metadata changes. It does not prevent file access, such as executing the file.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSecure Boot is temporarily disabled.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tWhen Secure Boot is enabled, the \u003Ccode class=\"literal\">ima_appraise=fix\u003C/code> kernel command-line parameter does not work.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">securityfs\u003C/code> file system is mounted on the \u003Ccode class=\"literal\">/sys/kernel/security/\u003C/code> directory and the \u003Ccode class=\"literal\">/sys/kernel/security/integrity/ima/\u003C/code> directory exists. You can verify where \u003Ccode class=\"literal\">securityfs\u003C/code> is mounted by using the \u003Ccode class=\"literal\">mount\u003C/code> command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mount\u003C/strong>\u003C/span>\n...\nsecurityfs on /sys/kernel/security type securityfs (rw,nosuid,nodev,noexec,relatime)\n...\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">systemd\u003C/code> service manager is patched to support IMA and EVM on boot time. Verify by using the following command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># grep &lt;\u003Cspan class=\"emphasis\">\u003Cem>options\u003C/em>\u003C/span>&gt; pattern &lt;\u003Cspan class=\"emphasis\">\u003Cem>files\u003C/em>\u003C/span>&gt;\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout white-space-pre\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dmesg | grep -i -e EVM -e IMA -w\u003C/strong>\u003C/span>\n[ 0.943873] ima: No TPM chip found, activating TPM-bypass!\n[ 0.944566] ima: Allocated hash algorithm: sha256\n[ 0.944579] ima: No architecture policies found\n[ 0.944601] evm: Initialising EVM extended attributes:\n[ 0.944602] evm: security.selinux\n[ 0.944604] evm: security.SMACK64 (disabled)\n[ 0.944605] evm: security.SMACK64EXEC (disabled)\n[ 0.944607] evm: security.SMACK64TRANSMUTE (disabled)\n[ 0.944608] evm: security.SMACK64MMAP (disabled)\n[ 0.944609] evm: security.apparmor (disabled)\n[ 0.944611] evm: security.ima\n[ 0.944612] evm: security.capability\n[ 0.944613] evm: HMAC attrs: 0x1\n[ 1.314520] systemd[1]: systemd 252-18.el9 running in system mode (+PAM +AUDIT +SELINUX -APPARMOR +IMA +SMACK +SECCOMP +GCRYPT +GNUTLS +OPENSSL +ACL +BLKID +CURL +ELFUTILS -FIDO2 +IDN2 -IDN -IPTC +KMOD +LIBCRYPTSETUP +LIBFDISK +PCRE2 -PWQUALITY +P11KIT -QRENCODE +TPM2 +BZIP2 +LZ4 +XZ +ZLIB +ZSTD -BPF_FRAMEWORK +XKBCOMMON +UTMP +SYSVINIT default-hierarchy=unified)\n[ 1.717675] device-mapper: core: CONFIG_IMA_DISABLE_HTABLE is disabled. Duplicate IMA measurements will not be recorded in the IMA log.\n[ 4.799436] systemd[1]: systemd 252-18.el9 running in system mode (+PAM +AUDIT +SELINUX -APPARMOR +IMA +SMACK +SECCOMP +GCRYPT +GNUTLS +OPENSSL +ACL +BLKID +CURL +ELFUTILS -FIDO2 +IDN2 -IDN -IPTC +KMOD +LIBCRYPTSETUP +LIBFDISK +PCRE2 -PWQUALITY +P11KIT -QRENCODE +TPM2 +BZIP2 +LZ4 +XZ +ZLIB +ZSTD -BPF_FRAMEWORK +XKBCOMMON +UTMP +SYSVINIT default-hierarchy=unified)\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable IMA and EVM in the \u003Cspan class=\"emphasis\">\u003Cem>fix\u003C/em>\u003C/span> mode for the current boot entry and allow users to gather and update the IMA measurements by adding the following kernel command-line parameters:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout white-space-pre\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --update-kernel=/boot/vmlinuz-$(uname -r) --args=\"ima_policy=appraise_tcb ima_appraise=fix evm=fix\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe command enables IMA and EVM in the \u003Cspan class=\"emphasis\">\u003Cem>fix\u003C/em>\u003C/span> mode for the current boot entry and allows users to gather and update the IMA measurements.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">ima_policy=appraise_tcb\u003C/code> kernel command-line parameter ensures that the kernel uses the default Trusted Computing Base (TCB) measurement policy and the appraisal step. The appraisal step forbids access to files whose prior and current measures do not match.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tReboot to make the changes come into effect.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Verify that the parameters have been added to the kernel command line:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout white-space-pre\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /proc/cmdline\u003C/strong>\u003C/span>\nBOOT_IMAGE=(hd0,msdos1)/vmlinuz-5.14.0-1.el9.x86_64 root=/dev/mapper/rhel-root ro crashkernel=1G-4G:192M,4G-64G:256M,64G-:512M resume=/dev/mapper/rhel-swap rd.lvm.lv=rhel/root rd.lvm.lv=rhel/swap rhgb quiet ima_policy=appraise_tcb ima_appraise=fix evm=fix\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a kernel master key to protect the EVM key:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>keyctl add user kmk \"$(dd if=/dev/urandom bs=1 count=32 2&gt; /dev/null)\" @u\u003C/strong>\u003C/span>\n748544121\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">kmk\u003C/code> is kept entirely in the kernel space memory. The 32-byte long value of the \u003Ccode class=\"literal\">kmk\u003C/code> is generated from random bytes from the \u003Ccode class=\"literal\">/dev/urandom\u003C/code> file and placed in the user (\u003Ccode class=\"literal\">@u\u003C/code>) keyring. The key serial number is on the first line of the previous output.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate an encrypted EVM key based on the \u003Ccode class=\"literal\">kmk\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>keyctl add encrypted evm-key \"new user:kmk 64\" @u\u003C/strong>\u003C/span>\n641780271\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe command uses the \u003Ccode class=\"literal\">kmk\u003C/code> to generate and encrypt a 64-byte long user key (named \u003Ccode class=\"literal\">evm-key\u003C/code>) and places it in the user (\u003Ccode class=\"literal\">@u\u003C/code>) keyring. The key serial number is on the first line of the previous output.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tIt is necessary to name the user key as \u003Cspan class=\"strong strong\">\u003Cstrong>evm-key\u003C/strong>\u003C/span> because that is the name the EVM subsystem is expecting and is working with.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a directory for exported keys.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mkdir -p /etc/keys/\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSearch for the \u003Ccode class=\"literal\">kmk\u003C/code> and export its unencrypted value into the new directory.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>keyctl pipe $(keyctl search @u user kmk) &gt; /etc/keys/kmk\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSearch for the \u003Ccode class=\"literal\">evm-key\u003C/code> and export its encrypted value into the new directory.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>keyctl pipe $(keyctl search @u encrypted evm-key) &gt; /etc/keys/evm-key\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">evm-key\u003C/code> has been encrypted by the kernel master key earlier.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: View the newly created keys.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>keyctl show\u003C/strong>\u003C/span>\nSession Keyring\n974575405   --alswrv     0        0      keyring: \u003Cspan class=\"emphasis\">\u003Cem>ses 299489774 --alswrv 0 65534 \\\u003C/em>\u003C/span> keyring: \u003Cspan class=\"emphasis\">\u003Cem>uid.0 748544121 --alswrv 0 0 \\\u003C/em>\u003C/span> user: kmk\n641780271   --alswrv     0        0           \\_ encrypted: evm-key\n\n# \u003Cspan class=\"strong strong\">\u003Cstrong>ls -l /etc/keys/\u003C/strong>\u003C/span>\ntotal 8\n-rw-r--r--. 1 root root 246 Jun 24 12:44 evm-key\n-rw-r--r--. 1 root root  32 Jun 24 12:43 kmk\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: If the keys have been removed from the keyring, for example after system reboot, you can import the already exported \u003Ccode class=\"literal\">kmk\u003C/code> and \u003Ccode class=\"literal\">evm-key\u003C/code> instead of creating new ones.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"a\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tImport the \u003Ccode class=\"literal\">kmk\u003C/code>.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>keyctl add user kmk \"$(cat /etc/keys/kmk)\" @u\u003C/strong>\u003C/span>\n451342217\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tImport the \u003Ccode class=\"literal\">evm-key\u003C/code>.\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>keyctl add encrypted evm-key \"load $(cat /etc/keys/evm-key)\" @u\u003C/strong>\u003C/span>\n924537557\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tActivate EVM.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo 1 &gt; /sys/kernel/security/evm\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRelabel the whole system.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>find / -fstype xfs -type f -uid 0 -exec head -n 1 '{}' &gt;/dev/null \\;\u003C/strong>\u003C/span>\u003C/pre>\u003Crh-alert class=\"admonition warning\" state=\"danger\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Warning\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tEnabling IMA and EVM without relabeling the system might make the majority of the files on the system inaccessible.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that EVM has been initialized.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dmesg | tail -1\u003C/strong>\u003C/span>\n[…​] evm: key initialized\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"collecting-file-hashes-with-integrity-measurement-architecture_enhancing-security-with-the-kernel-integrity-subsystem\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.6. Collecting file hashes with integrity measurement architecture\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tIn the \u003Cspan class=\"emphasis\">\u003Cem>measurement\u003C/em>\u003C/span> phase, you can create file hashes and store them as extended attributes (\u003Cspan class=\"emphasis\">\u003Cem>xattrs\u003C/em>\u003C/span>) of those files. With the file hashes, you can generate either an RSA-based digital signature or a Hash-based Message Authentication Code (HMAC-SHA1) and thus prevent offline tampering attacks on the extended attributes.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tIMA and EVM are enabled. For more information, see \u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index#enabling-integrity-measurement-architecture-and-extended-verification-module_enhancing-security-with-the-kernel-integrity-subsystem\">Enabling integrity measurement architecture and extended verification module\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tA valid trusted key or encrypted key is stored in the kernel keyring.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">ima-evm-utils\u003C/code>, \u003Ccode class=\"literal\">attr\u003C/code>, and \u003Ccode class=\"literal\">keyutils\u003C/code> packages are installed.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a test file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo &lt;\u003Cspan class=\"emphasis\">\u003Cem>Test_text\u003C/em>\u003C/span>&gt; &gt; test_file\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIMA and EVM ensure that the \u003Ccode class=\"literal\">test_file\u003C/code> example file has assigned hash values that are stored as its extended attributes.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInspect the file’s extended attributes:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>getfattr -m . -d test_file\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>file: test_file\u003C/strong>\u003C/span>\nsecurity.evm=0sAnDIy4VPA0HArpPO/EqiutnNyBql\nsecurity.ima=0sAQOEDeuUnWzwwKYk+n66h/vby3eD\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe example output shows extended attributes with the IMA and EVM hash values and SELinux context. EVM adds a \u003Ccode class=\"literal\">security.evm\u003C/code> extended attribute related to the other attributes. At this point, you can use the \u003Ccode class=\"literal\">evmctl\u003C/code> utility on \u003Ccode class=\"literal\">security.evm\u003C/code> to generate either an RSA-based digital signature or a Hash-based Message Authentication Code (HMAC-SHA1).\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/security_hardening/index\">Security hardening\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"adding-ima-signatures-to-package-files_enhancing-security-with-the-kernel-integrity-subsystem\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.7. Adding IMA signatures to package files\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou need to add IMA signatures to RPM files to allow the kernel, Keylime, \u003Ccode class=\"literal\">fapolicyd\u003C/code>, and \u003Ccode class=\"literal\">debuginfo\u003C/code> packages to do their integrity checks. After installing the \u003Ccode class=\"literal\">rpm-plugin-ima\u003C/code> plugin, newly installed RPM files automatically have IMA signatures placed in the \u003Ccode class=\"literal\">security.ima\u003C/code> extended file attribute. However, you need to reinstall existing packages to obtain IMA signatures.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo install the \u003Ccode class=\"literal\">rpm-plugin-ima\u003C/code> plugin, run:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install rpm-plugin-ima -y\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo reinstall all packages, run:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf reinstall “*” -y\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfirm that the reinstalled package file has the valid IMA signature. For example, to check the IMA signature of the \u003Ccode class=\"literal\">/usr/bin/bash\u003C/code> file, run:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>getfattr -m security.ima -d /usr/bin/bash\u003C/strong>\u003C/span>\nsecurity.ima=0sAwIE0zIESQBnMGUCMFhf0iBeM7NjjhCCHVt4/ORx1eCegjrWSHzFbJMCsAhR9bYU2hNGjiWUYT2IIqWaaAIxALFGUkqGP5vDLuxQXibO9g7HFcfyZzRBY4rbKPsXcAIZRtDHVS5dQBZqM3hyS5v1MA==\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify IMA signature of a file with a specified certificate. The IMA code signing key is accessible by \u003Ccode class=\"literal\">/usr/share/doc/kernel-keys/$(uname -r)/ima.cer\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>evmctl ima_verify -k /usr/share/doc/kernel-keys/$(uname -r)/ima.cer /usr/bin/bash\u003C/strong>\u003C/span>\nkey 1: d3320449 /usr/share/doc/kernel-keys/5.14.0-359.el9.x86-64/ima.cer\n/usr/bin/bash: verification is OK\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"enabling-kernel-runtime-integrity-monitoring_enhancing-security-with-the-kernel-integrity-subsystem\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.8. Enabling kernel runtime integrity monitoring\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can enable kernel runtime integrity monitoring that IMA appraisal provides.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">kernel\u003C/code> installed on your system has version \u003Ccode class=\"literal\">5.14.0-359\u003C/code> or higher.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">dracut\u003C/code> package has version \u003Ccode class=\"literal\">057-43.git20230816\u003C/code> or higher.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">keyutils\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">ima-evm-utils\u003C/code> package is installed.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe files covered by the policy have valid signatures. For instructions, see \u003Ca class=\"link\" href=\"#adding-ima-signatures-to-package-files_enhancing-security-with-the-kernel-integrity-subsystem\" title=\"23.7. Adding IMA signatures to package files\">Adding IMA signatures to package files\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo copy the Red Hat IMA code signing key to the \u003Ccode class=\"literal\">/etc/ima/keys\u003C/code> file, run:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>mkdir -p /etc/keys/ima\u003C/strong>\u003C/span>\n$ \u003Cspan class=\"strong strong\">\u003Cstrong>cp /usr/share/doc/kernel-keys/$(uname -r)/ima.cer /etc/ima/keys\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo add the IMA code signing key to the \u003Ccode class=\"literal\">.ima\u003C/code> keyring, run:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>keyctl padd asymmetric RedHat-IMA %:.ima &lt; /etc/ima/keys/ima.cer\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDepending on your threat model, define an IMA policy in the \u003Ccode class=\"literal\">/etc/sysconfig/ima-policy\u003C/code> file. For example, the following IMA policy checks the integrity of both executables and involved memory mapping library files:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># PROC_SUPER_MAGIC = 0x9fa0\ndont_appraise fsmagic=0x9fa0\n# SYSFS_MAGIC = 0x62656572\ndont_appraise fsmagic=0x62656572\n# DEBUGFS_MAGIC = 0x64626720\ndont_appraise fsmagic=0x64626720\n# TMPFS_MAGIC = 0x01021994\ndont_appraise fsmagic=0x1021994\n# RAMFS_MAGIC\ndont_appraise fsmagic=0x858458f6\n# DEVPTS_SUPER_MAGIC=0x1cd1\ndont_appraise fsmagic=0x1cd1\n# BINFMTFS_MAGIC=0x42494e4d\ndont_appraise fsmagic=0x42494e4d\n# SECURITYFS_MAGIC=0x73636673\ndont_appraise fsmagic=0x73636673\n# SELINUX_MAGIC=0xf97cff8c\ndont_appraise fsmagic=0xf97cff8c\n# SMACK_MAGIC=0x43415d53\ndont_appraise fsmagic=0x43415d53\n# NSFS_MAGIC=0x6e736673\ndont_appraise fsmagic=0x6e736673\n# EFIVARFS_MAGIC\ndont_appraise fsmagic=0xde5e81e4\n# CGROUP_SUPER_MAGIC=0x27e0eb\ndont_appraise fsmagic=0x27e0eb\n# CGROUP2_SUPER_MAGIC=0x63677270\ndont_appraise fsmagic=0x63677270\nappraise func=BPRM_CHECK\nappraise func=FILE_MMAP mask=MAY_EXEC\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo load the IMA policy to make sure the kernel accepts this IMA policy, run:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo /etc/sysconfig/ima-policy &gt; /sys/kernel/security/ima/policy\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>echo $?\u003C/strong>\u003C/span>\n0\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo enable the \u003Ccode class=\"literal\">dracut\u003C/code> integrity module to automatically load the IMA code signing key and the IMA policy, run:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo 'add_dracutmodules+=\" integrity \"' &gt; /etc/dracut.conf.d/98-integrity.conf\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>dracut -f\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-custom-ima-keys-using-openssl_enhancing-security-with-the-kernel-integrity-subsystem\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.9. Creating custom IMA keys using OpenSSL\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can use \u003Ccode class=\"literal\">OpenSSL\u003C/code> to generate a CSR for your digital certificates to secure your code.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe kernel searches the \u003Ccode class=\"literal\">.ima\u003C/code> keyring for a code signing key to verify an IMA signature. Before you add a code signing key to the \u003Ccode class=\"literal\">.ima\u003C/code> keyring, you need to ensure that IMA CA key signed this key in the \u003Ccode class=\"literal\">.builtin_trusted_keys\u003C/code> or \u003Ccode class=\"literal\">.secondary_trusted_keys\u003C/code> keyrings.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe custom IMA CA key has the following extensions:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tthe basic constraints extension with the CA boolean asserted.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tthe \u003Ccode class=\"literal\">KeyUsage\u003C/code> extension with the \u003Ccode class=\"literal\">keyCertSign\u003C/code> bit asserted but \u003Cspan class=\"strong strong\">\u003Cstrong>without\u003C/strong>\u003C/span> the \u003Ccode class=\"literal\">digitalSignature\u003C/code> asserted.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe custom IMA code signing key falls under the following criteria:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe IMA CA key signed this custom IMA code signing key.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe custom key includes the \u003Ccode class=\"literal\">subjectKeyIdentifier\u003C/code> extension.\n\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo generate a custom IMA CA key pair, run:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>openssl req -new -x509 -utf8 -sha256 -days 3650 -batch -config ima_ca.conf -outform DER -out custom_ima_ca.der -keyout custom_ima_ca.priv\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: To check the content of the \u003Ccode class=\"literal\">ima_ca.conf\u003C/code> file, run:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat ima_ca.conf\u003C/strong>\u003C/span>\n[ req ]\ndefault_bits = 2048\ndistinguished_name = req_distinguished_name\nprompt = no\nstring_mask = utf8only\nx509_extensions = ca\n\n[ req_distinguished_name ]\nO = YOUR_ORG\nCN =  YOUR_COMMON_NAME IMA CA\nemailAddress = YOUR_EMAIL\n\n[ ca ]\nbasicConstraints=critical,CA:TRUE\nsubjectKeyIdentifier=hash\nauthorityKeyIdentifier=keyid:always,issuer\nkeyUsage=critical,keyCertSign,cRLSign\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo generate a private key and a certificate signing request (CSR) for the IMA code signing key, run:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>openssl req -new -utf8 -sha256 -days 365 -batch -config ima.conf -out custom_ima.csr -keyout custom_ima.priv\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: To check the content of the \u003Ccode class=\"literal\">ima.conf\u003C/code> file, run:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat ima.conf\u003C/strong>\u003C/span>\n[ req ]\ndefault_bits = 2048\ndistinguished_name = req_distinguished_name\nprompt = no\nstring_mask = utf8only\nx509_extensions = code_signing\n\n[ req_distinguished_name ]\nO = YOUR_ORG\nCN = YOUR_COMMON_NAME IMA signing key\nemailAddress = YOUR_EMAIL\n\n[ code_signing ]\nbasicConstraints=critical,CA:FALSE\nkeyUsage=digitalSignature\nsubjectKeyIdentifier=hash\nauthorityKeyIdentifier=keyid:always,issuer\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUse the IMA CA private key to sign the CSR to create the IMA code signing certificate:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>openssl x509 -req -in custom_ima.csr -days 365 -extfile ima.conf -extensions code_signing -CA custom_ima_ca.der -CAkey custom_ima_ca.priv -CAcreateserial -outform DER -out ima.der\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"deploying-a-custom-signed-ima-policy-for-uefi-systems_enhancing-security-with-the-kernel-integrity-subsystem\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">23.10. Deploying a custom signed IMA policy for UEFI systems\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tIn the Secure Boot environment, you may want to only load a signed IMA policy signed by your custom IMA key.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe MOK list contains the custom IMA key. For guidance, see \u003Ca class=\"link\" href=\"#enrolling-public-key-on-target-system-by-adding-the-public-key-to-the-mok-list_signing-a-kernel-and-modules-for-secure-boot\" title=\"21.8. Enrolling public key on target system by adding the public key to the MOK list\">Enrolling public key on target system by adding the public key to the MOK list\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe kernel installed on your system has version 5.14.0-335 or higher.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEnable Secure Boot.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tPermanently add the \u003Ccode class=\"literal\">ima_policy=secure_boot\u003C/code> kernel parameter.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tFor instructions, see \u003Ca class=\"link\" href=\"#configuring-kernel-parameters-permanently-with-sysctl_configuring-kernel-parameters-at-runtime\" title=\"5.3. Configuring kernel parameters permanently with sysctl\">Configuring kernel parameters permanently with sysctl\u003C/a>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tPrepare your IMA policy by running the command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>evmctl ima_sign /etc/sysconfig/ima-policy -k &lt;\u003Cspan class=\"emphasis\">\u003Cem>PATH_TO_YOUR_CUSTOM_IMA_KEY\u003C/em>\u003C/span>&gt;\u003C/strong>\u003C/span>\nPlace your public certificate under /etc/keys/ima/ and add it to the .ima keyring\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSign the policy with your custom IMA code signing key by running the command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>keyctl padd asymmetric CUSTOM_IMA1 %:.ima &lt; /etc/ima/keys/my_ima.cer\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLoad the IMA policy by running the command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo /etc/sysconfig/ima-policy &gt; /sys/kernel/security/ima/policy\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>echo $?\u003C/strong>\u003C/span>\n0\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_using-systemd-to-manage-resources-used-by-applications_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 24. Using systemd to manage resources used by applications\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tRHEL 9 moves the resource management settings from the process level to the application level by binding the system of \u003Ccode class=\"literal\">cgroup\u003C/code> hierarchies with the \u003Ccode class=\"literal\">systemd\u003C/code> unit tree. Therefore, you can manage the system resources with the \u003Ccode class=\"literal\">systemctl\u003C/code> command, or by modifying the \u003Ccode class=\"literal\">systemd\u003C/code> unit files.\n\t\t\u003C/p>\u003Cp>\n\t\t\tTo achieve this, \u003Ccode class=\"literal\">systemd\u003C/code> takes various configuration options from the unit files or directly via the \u003Ccode class=\"literal\">systemctl\u003C/code> command. Then \u003Ccode class=\"literal\">systemd\u003C/code> applies those options to specific process groups by using the Linux kernel system calls and features like \u003Ccode class=\"literal\">cgroups\u003C/code> and \u003Ccode class=\"literal\">namespaces\u003C/code>.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tYou can review the full set of configuration options for \u003Ccode class=\"literal\">systemd\u003C/code> in the following manual pages:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">systemd.resource-control(5)\u003C/code>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">systemd.exec(5)\u003C/code>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"con_role-of-systemd-in-resource-management_assembly_using-systemd-to-manage-resources-used-by-applications\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.1. Role of systemd in resource management\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe core function of \u003Ccode class=\"literal\">systemd\u003C/code> is service management and supervision. The \u003Ccode class=\"literal\">systemd\u003C/code> system and service manager :\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tensures that managed services start at the right time and in the correct order during the boot process.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tensures that managed services run smoothly to use the underlying hardware platform optimally.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tprovides capabilities to define resource management policies.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tprovides capabilities to tune various options, which can improve the performance of the service.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tIn general, Red Hat recommends you use \u003Ccode class=\"literal\">systemd\u003C/code> for controlling the usage of system resources. You should manually configure the \u003Ccode class=\"literal\">cgroups\u003C/code> virtual file system only in special cases. For example, when you need to use \u003Ccode class=\"literal\">cgroup-v1\u003C/code> controllers that have no equivalents in \u003Ccode class=\"literal\">cgroup-v2\u003C/code> hierarchy.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/section>\u003Csection class=\"section\" id=\"distribution-models-of-system-sources_assembly_using-systemd-to-manage-resources-used-by-applications\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.2. Distribution models of system sources\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tTo modify the distribution of system resources, you can apply one or more of the following distribution models:\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Weights\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou can distribute the resource by adding up the weights of all sub-groups and giving each sub-group the fraction matching its ratio against the sum.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, if you have 10 cgroups, each with weight of value 100, the sum is 1000. Each cgroup receives one tenth of the resource.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tWeight is usually used to distribute stateless resources. For example the \u003Cspan class=\"emphasis\">\u003Cem>CPUWeight=\u003C/em>\u003C/span> option is an implementation of this resource distribution model.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Limits\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA cgroup can consume up to the configured amount of the resource. The sum of sub-group limits can exceed the limit of the parent cgroup. Therefore it is possible to overcommit resources in this model.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example the \u003Cspan class=\"emphasis\">\u003Cem>MemoryMax=\u003C/em>\u003C/span> option is an implementation of this resource distribution model.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Protections\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tYou can set up a protected amount of a resource for a cgroup. If the resource usage is below the protection boundary, the kernel will try not to penalize this cgroup in favor of other cgroups that compete for the same resource. An overcommit is also possible.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example the \u003Cspan class=\"emphasis\">\u003Cem>MemoryLow=\u003C/em>\u003C/span> option is an implementation of this resource distribution model.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Allocations\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tExclusive allocations of an absolute amount of a finite resource. An overcommit is not possible. An example of this resource type in Linux is the real-time budget.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">unit file option\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA setting for resource control configuration.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor example, you can configure CPU resource with options like \u003Cspan class=\"emphasis\">\u003Cem>CPUAccounting=\u003C/em>\u003C/span>, or \u003Cspan class=\"emphasis\">\u003Cem>CPUQuota=\u003C/em>\u003C/span>. Similarly, you can configure memory or I/O resources with options like \u003Cspan class=\"emphasis\">\u003Cem>AllowedMemoryNodes=\u003C/em>\u003C/span> and \u003Cspan class=\"emphasis\">\u003Cem>IOAccounting=\u003C/em>\u003C/span>.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003C/dl>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_allocating-system-resources-using-systemd_assembly_using-systemd-to-manage-resources-used-by-applications\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.3. Allocating system resources using systemd\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tAllocating system resources by using systemd involves creating &amp; managing systemd services and units. This can be configured to start, stop, or restart at specific times or in response to certain system events.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tTo change the required value of the unit file option of your service, you can adjust the value in the unit file, or use the \u003Ccode class=\"literal\">systemctl\u003C/code> command:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCheck the assigned values for the service of your choice.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl show --property &lt;\u003Cspan class=\"emphasis\">\u003Cem>unit file option\u003C/em>\u003C/span>&gt; &lt;\u003Cspan class=\"emphasis\">\u003Cem>service name\u003C/em>\u003C/span>&gt;\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSet the required value of the CPU time allocation policy option:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl set-property &lt;\u003Cspan class=\"emphasis\">\u003Cem>service name\u003C/em>\u003C/span>&gt; &lt;\u003Cspan class=\"emphasis\">\u003Cem>unit file option\u003C/em>\u003C/span>&gt;=&lt;\u003Cspan class=\"emphasis\">\u003Cem>value\u003C/em>\u003C/span>&gt;\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCheck the newly assigned values for the service of your choice.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl show --property &lt;\u003Cspan class=\"emphasis\">\u003Cem>unit file option\u003C/em>\u003C/span>&gt; &lt;\u003Cspan class=\"emphasis\">\u003Cem>service name\u003C/em>\u003C/span>&gt;\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">systemd.resource-control(5)\u003C/code> and \u003Ccode class=\"literal\">systemd.exec(5)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"con_overview-of-systemd-hierarchy-for-cgroups_assembly_using-systemd-to-manage-resources-used-by-applications\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.4. Overview of systemd hierarchy for cgroups\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tOn the backend, the \u003Ccode class=\"literal\">systemd\u003C/code> system and service manager uses the \u003Ccode class=\"literal\">slice\u003C/code>, the \u003Ccode class=\"literal\">scope\u003C/code>, and the \u003Ccode class=\"literal\">service\u003C/code> units to organize and structure processes in the control groups. You can further modify this hierarchy by creating custom unit files or using the \u003Ccode class=\"literal\">systemctl\u003C/code> command. Also, \u003Ccode class=\"literal\">systemd\u003C/code> automatically mounts hierarchies for important kernel resource controllers at the \u003Ccode class=\"literal\">/sys/fs/cgroup/\u003C/code> directory.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor resource control, you can use the following three \u003Ccode class=\"literal\">systemd\u003C/code> unit types:\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Service\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA process or a group of processes, which \u003Ccode class=\"literal\">systemd\u003C/code> started according to a unit configuration file.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tServices encapsulate the specified processes so that they can be started and stopped as one set. Services are named in the following way:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Cspan class=\"emphasis\">\u003Cem>&lt;name&gt;\u003C/em>\u003C/span>.service\u003C/pre>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Scope\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA group of externally created processes. Scopes encapsulate processes that are started and stopped by the arbitrary processes through the \u003Ccode class=\"literal\">fork()\u003C/code> function and then registered by \u003Ccode class=\"literal\">systemd\u003C/code> at runtime. For example, user sessions, containers, and virtual machines are treated as scopes. Scopes are named as follows:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Cspan class=\"emphasis\">\u003Cem>&lt;name&gt;\u003C/em>\u003C/span>.scope\u003C/pre>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Slice\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tA group of hierarchically organized units. Slices organize a hierarchy in which scopes and services are placed.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe actual processes are contained in scopes or in services. Every name of a slice unit corresponds to the path to a location in the hierarchy.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe dash (\u003Ccode class=\"literal\">-\u003C/code>) character acts as a separator of the path components to a slice from the \u003Ccode class=\"literal\">-.slice\u003C/code> root slice. In the following example:\n\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">\u003Cspan class=\"emphasis\">\u003Cem>&lt;parent-name&gt;\u003C/em>\u003C/span>.slice\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Ccode class=\"literal\">parent-name.slice\u003C/code> is a sub-slice of \u003Ccode class=\"literal\">parent.slice\u003C/code>, which is a sub-slice of the \u003Ccode class=\"literal\">-.slice\u003C/code> root slice. \u003Ccode class=\"literal\">parent-name.slice\u003C/code> can have its own sub-slice named \u003Ccode class=\"literal\">parent-name-name2.slice\u003C/code>, and so on.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003C/dl>\u003C/div>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">service\u003C/code>, the \u003Ccode class=\"literal\">scope\u003C/code>, and the \u003Ccode class=\"literal\">slice\u003C/code> units directly map to objects in the control group hierarchy. When these units are activated, they map directly to control group paths built from the unit names.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe following is an abbreviated example of a control group hierarchy:\n\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">Control group /:\n-.slice\n├─user.slice\n│ ├─user-42.slice\n│ │ ├─session-c1.scope\n│ │ │ ├─ 967 gdm-session-worker [pam/gdm-launch-environment]\n│ │ │ ├─1035 /usr/libexec/gdm-x-session gnome-session --autostart /usr/share/gdm/greeter/autostart\n│ │ │ ├─1054 /usr/libexec/Xorg vt1 -displayfd 3 -auth /run/user/42/gdm/Xauthority -background none -noreset -keeptty -verbose 3\n│ │ │ ├─1212 /usr/libexec/gnome-session-binary --autostart /usr/share/gdm/greeter/autostart\n│ │ │ ├─1369 /usr/bin/gnome-shell\n│ │ │ ├─1732 ibus-daemon --xim --panel disable\n│ │ │ ├─1752 /usr/libexec/ibus-dconf\n│ │ │ ├─1762 /usr/libexec/ibus-x11 --kill-daemon\n│ │ │ ├─1912 /usr/libexec/gsd-xsettings\n│ │ │ ├─1917 /usr/libexec/gsd-a11y-settings\n│ │ │ ├─1920 /usr/libexec/gsd-clipboard\n…​\n├─init.scope\n│ └─1 /usr/lib/systemd/systemd --switched-root --system --deserialize 18\n└─system.slice\n  ├─rngd.service\n  │ └─800 /sbin/rngd -f\n  ├─systemd-udevd.service\n  │ └─659 /usr/lib/systemd/systemd-udevd\n  ├─chronyd.service\n  │ └─823 /usr/sbin/chronyd\n  ├─auditd.service\n  │ ├─761 /sbin/auditd\n  │ └─763 /usr/sbin/sedispatch\n  ├─accounts-daemon.service\n  │ └─876 /usr/libexec/accounts-daemon\n  ├─example.service\n  │ ├─ 929 /bin/bash /home/jdoe/example.sh\n  │ └─4902 sleep 1\n  …​\u003C/pre>\u003Cp>\n\t\t\t\tThe example above shows that services and scopes contain processes and are placed in slices that do not contain processes of their own.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>\u003Cspan class=\"citetitle citetitle\">\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/managing-systemd_configuring-basic-system-settings#managing-system-services-with-systemctl_managing-systemd\">Managing system services with systemctl\u003C/a>\u003C/span>\u003C/em>\u003C/span> in Red Hat Enterprise Linux\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#what-kernel-resource-controllers-are_setting-limits-for-applications\" title=\"25.2. Introducing kernel resource controllers\">What are kernel resource controllers\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">systemd.resource-control(5)\u003C/code>, \u003Ccode class=\"literal\">systemd.exec(5)\u003C/code>, \u003Ccode class=\"literal\">cgroups(7)\u003C/code>, \u003Ccode class=\"literal\">fork()\u003C/code>, \u003Ccode class=\"literal\">fork(2)\u003C/code> manual pages\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index#setting-limits-for-applications_managing-monitoring-and-updating-the-kernel\">Understanding cgroups\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"listing-systemd_units_assembly_using-systemd-to-manage-resources-used-by-applications\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.5. Listing systemd units\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tUse the \u003Ccode class=\"literal\">systemd\u003C/code> system and service manager to list its units.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tList all active units on the system with the \u003Ccode class=\"literal\">systemctl\u003C/code> utility. The terminal returns an output similar to the following example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl\u003C/strong>\u003C/span>\nUNIT                                                LOAD   ACTIVE SUB       DESCRIPTION\n…​\ninit.scope                                          loaded active running   System and Service Manager\nsession-2.scope                                     loaded active running   Session 2 of user jdoe\nabrt-ccpp.service                                   loaded active exited    Install ABRT coredump hook\nabrt-oops.service                                   loaded active running   ABRT kernel log watcher\nabrt-vmcore.service                                 loaded active exited    Harvest vmcores for ABRT\nabrt-xorg.service                                   loaded active running   ABRT Xorg log watcher\n…​\n-.slice                                             loaded active active    Root Slice\nmachine.slice                                       loaded active active    Virtual Machine and Container Slice system-getty.slice                                                                       loaded active active    system-getty.slice\nsystem-lvm2\\x2dpvscan.slice                         loaded active active    system-lvm2\\x2dpvscan.slice\nsystem-sshd\\x2dkeygen.slice                         loaded active active    system-sshd\\x2dkeygen.slice\nsystem-systemd\\x2dhibernate\\x2dresume.slice         loaded active active    system-systemd\\x2dhibernate\\x2dresume&gt;\nsystem-user\\x2druntime\\x2ddir.slice                 loaded active active    system-user\\x2druntime\\x2ddir.slice\nsystem.slice                                        loaded active active    System Slice\nuser-1000.slice                                     loaded active active    User Slice of UID 1000\nuser-42.slice                                       loaded active active    User Slice of UID 42\nuser.slice                                          loaded active active    User and Session Slice\n…​\u003C/pre>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">UNIT\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tA name of a unit that also reflects the unit position in a control group hierarchy. The units relevant for resource control are a \u003Cspan class=\"emphasis\">\u003Cem>slice\u003C/em>\u003C/span>, a \u003Cspan class=\"emphasis\">\u003Cem>scope\u003C/em>\u003C/span>, and a \u003Cspan class=\"emphasis\">\u003Cem>service\u003C/em>\u003C/span>.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">LOAD\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tIndicates whether the unit configuration file was properly loaded. If the unit file failed to load, the field contains the state \u003Cspan class=\"emphasis\">\u003Cem>error\u003C/em>\u003C/span> instead of \u003Cspan class=\"emphasis\">\u003Cem>loaded\u003C/em>\u003C/span>. Other unit load states are: \u003Cspan class=\"emphasis\">\u003Cem>stub\u003C/em>\u003C/span>, \u003Cspan class=\"emphasis\">\u003Cem>merged\u003C/em>\u003C/span>, and \u003Cspan class=\"emphasis\">\u003Cem>masked\u003C/em>\u003C/span>.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">ACTIVE\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tThe high-level unit activation state, which is a generalization of \u003Ccode class=\"literal\">SUB\u003C/code>.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">SUB\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tThe low-level unit activation state. The range of possible values depends on the unit type.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">DESCRIPTION\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tThe description of the unit content and functionality.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tList all active and inactive units:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl --all\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tLimit the amount of information in the output:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl --type service,masked\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">--type\u003C/code> option requires a comma-separated list of unit types such as a \u003Cspan class=\"emphasis\">\u003Cem>service\u003C/em>\u003C/span> and a \u003Cspan class=\"emphasis\">\u003Cem>slice\u003C/em>\u003C/span>, or unit load states such as \u003Cspan class=\"emphasis\">\u003Cem>loaded\u003C/em>\u003C/span> and \u003Cspan class=\"emphasis\">\u003Cem>masked\u003C/em>\u003C/span>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>\u003Cspan class=\"citetitle citetitle\">\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/configuring_basic_system_settings/managing-systemd_configuring-basic-system-settings#managing-system-services-with-systemctl_managing-systemd\">Managing system services with systemctl\u003C/a>\u003C/span>\u003C/em>\u003C/span> in RHEL\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">systemd.resource-control(5)\u003C/code>, \u003Ccode class=\"literal\">systemd.exec(5)\u003C/code> manual pages\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"viewing-systemd-control-group-hierarchy_assembly_using-systemd-to-manage-resources-used-by-applications\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.6. Viewing systemd cgroups hierarchy\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tDisplay control groups (\u003Ccode class=\"literal\">cgroups\u003C/code>) hierarchy and processes running in specific \u003Ccode class=\"literal\">cgroups\u003C/code>.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the whole \u003Ccode class=\"literal\">cgroups\u003C/code> hierarchy on your system with the \u003Ccode class=\"literal\">systemd-cgls\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemd-cgls\u003C/strong>\u003C/span>\nControl group /:\n-.slice\n├─user.slice\n│ ├─user-42.slice\n│ │ ├─session-c1.scope\n│ │ │ ├─ 965 gdm-session-worker [pam/gdm-launch-environment]\n│ │ │ ├─1040 /usr/libexec/gdm-x-session gnome-session --autostart /usr/share/gdm/greeter/autostart\n…​\n├─init.scope\n│ └─1 /usr/lib/systemd/systemd --switched-root --system --deserialize 18\n└─system.slice\n  …​\n  ├─example.service\n  │ ├─6882 /bin/bash /home/jdoe/example.sh\n  │ └─6902 sleep 1\n  ├─systemd-journald.service\n    └─629 /usr/lib/systemd/systemd-journald\n  …​\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe example output returns the entire \u003Ccode class=\"literal\">cgroups\u003C/code> hierarchy, where the highest level is formed by \u003Cspan class=\"emphasis\">\u003Cem>slices\u003C/em>\u003C/span>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay the \u003Ccode class=\"literal\">cgroups\u003C/code> hierarchy filtered by a resource controller with the \u003Ccode class=\"literal\">systemd-cgls &lt;\u003Cspan class=\"emphasis\">\u003Cem>resource_controller\u003C/em>\u003C/span>&gt;\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemd-cgls memory\u003C/strong>\u003C/span>\nController memory; Control group /:\n├─1 /usr/lib/systemd/systemd --switched-root --system --deserialize 18\n├─user.slice\n│ ├─user-42.slice\n│ │ ├─session-c1.scope\n│ │ │ ├─ 965 gdm-session-worker [pam/gdm-launch-environment]\n…​\n└─system.slice\n  |\n  …​\n  ├─chronyd.service\n  │ └─844 /usr/sbin/chronyd\n  ├─example.service\n  │ ├─8914 /bin/bash /home/jdoe/example.sh\n  │ └─8916 sleep 1\n  …​\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe example output lists the services that interact with the selected controller.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay detailed information about a certain unit and its part of the \u003Ccode class=\"literal\">cgroups\u003C/code> hierarchy with the \u003Ccode class=\"literal\">systemctl status &lt;\u003Cspan class=\"emphasis\">\u003Cem>system_unit\u003C/em>\u003C/span>&gt;\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout white-space-pre\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl status example.service\u003C/strong>\u003C/span>\n● example.service - My example service\n   Loaded: loaded (/usr/lib/systemd/system/example.service; enabled; vendor preset: disabled)\n   Active: active (running) since Tue 2019-04-16 12:12:39 CEST; 3s ago\n Main PID: 17737 (bash)\n    Tasks: 2 (limit: 11522)\n   Memory: 496.0K (limit: 1.5M)\n   CGroup: /system.slice/example.service\n           ├─17737 /bin/bash /home/jdoe/example.sh\n           └─17743 sleep 1\nApr 16 12:12:39 redhat systemd[1]: Started My example service.\nApr 16 12:12:39 redhat bash[17737]: The current time is Tue Apr 16 12:12:39 CEST 2019\nApr 16 12:12:40 redhat bash[17737]: The current time is Tue Apr 16 12:12:40 CEST 2019\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">systemd.resource-control(5)\u003C/code> and \u003Ccode class=\"literal\">cgroups(7)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_viewing-cgroups-of-processes_assembly_using-systemd-to-manage-resources-used-by-applications\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.7. Viewing cgroups of processes\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can learn which \u003Cspan class=\"emphasis\">\u003Cem>control group\u003C/em>\u003C/span> (\u003Ccode class=\"literal\">cgroup\u003C/code>) a process belongs to. Then you can check the \u003Ccode class=\"literal\">cgroup\u003C/code> to find which controllers and controller-specific configurations it uses.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo view which \u003Ccode class=\"literal\">cgroup\u003C/code> a process belongs to, run the \u003Ccode class=\"literal\"># cat proc/&lt;\u003Cspan class=\"emphasis\">\u003Cem>PID\u003C/em>\u003C/span>&gt;/cgroup\u003C/code> command:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /proc/2467/cgroup\u003C/strong>\u003C/span>\n0::/system.slice/example.service\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe example output relates to a process of interest. In this case, it is a process identified by \u003Ccode class=\"literal\">PID 2467\u003C/code>, which belongs to the \u003Ccode class=\"literal\">example.service\u003C/code> unit. You can determine whether the process was placed in a correct control group as defined by the \u003Ccode class=\"literal\">systemd\u003C/code> unit file specifications.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo display what controllers and respective configuration files the \u003Ccode class=\"literal\">cgroup\u003C/code> uses, check the \u003Ccode class=\"literal\">cgroup\u003C/code> directory:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /sys/fs/cgroup/system.slice/example.service/cgroup.controllers\u003C/strong>\u003C/span>\nmemory pids\n\n# \u003Cspan class=\"strong strong\">\u003Cstrong>ls /sys/fs/cgroup/system.slice/example.service/\u003C/strong>\u003C/span>\ncgroup.controllers\ncgroup.events\n…​\ncpu.pressure\ncpu.stat\nio.pressure\nmemory.current\nmemory.events\n…​\npids.current\npids.events\npids.max\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe version 1 hierarchy of \u003Ccode class=\"literal\">cgroups\u003C/code> uses a per-controller model. Therefore the output from the \u003Ccode class=\"literal\">/proc/\u003Cspan class=\"emphasis\">\u003Cem>PID\u003C/em>\u003C/span>/cgroup\u003C/code> file shows, which \u003Ccode class=\"literal\">cgroups\u003C/code> under each controller the PID belongs to. You can find the respective \u003Ccode class=\"literal\">cgroups\u003C/code> under the controller directories at \u003Ccode class=\"literal\">/sys/fs/cgroup/\u003Cspan class=\"emphasis\">\u003Cem>&lt;controller_name&gt;\u003C/em>\u003C/span>/\u003C/code>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">cgroups(7)\u003C/code> manual page\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#what-kernel-resource-controllers-are_setting-limits-for-applications\" title=\"25.2. Introducing kernel resource controllers\">What are kernel resource controllers\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tDocumentation in the \u003Ccode class=\"literal\">/usr/share/doc/kernel-doc-&lt;kernel_version&gt;/Documentation/admin-guide/cgroup-v2.rst\u003C/code> file (after installing the \u003Ccode class=\"literal\">kernel-doc\u003C/code> package)\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"monitoring-resource-consumption_assembly_using-systemd-to-manage-resources-used-by-applications\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.8. Monitoring resource consumption\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tView a list of currently running control groups (\u003Ccode class=\"literal\">cgroups\u003C/code>) and their resource consumption in real-time.\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tDisplay a dynamic account of currently running \u003Ccode class=\"literal\">cgroups\u003C/code> with the \u003Ccode class=\"literal\">systemd-cgtop\u003C/code> command.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout white-space-pre\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemd-cgtop\u003C/strong>\u003C/span>\nControl Group                            Tasks   %CPU   Memory  Input/s Output/s\n/                                          607   29.8     1.5G        -        -\n/system.slice                              125      -   428.7M        -        -\n/system.slice/ModemManager.service           3      -     8.6M        -        -\n/system.slice/NetworkManager.service         3      -    12.8M        -        -\n/system.slice/accounts-daemon.service        3      -     1.8M        -        -\n/system.slice/boot.mount                     -      -    48.0K        -        -\n/system.slice/chronyd.service                1      -     2.0M        -        -\n/system.slice/cockpit.socket                 -      -     1.3M        -        -\n/system.slice/colord.service                 3      -     3.5M        -        -\n/system.slice/crond.service                  1      -     1.8M        -        -\n/system.slice/cups.service                   1      -     3.1M        -        -\n/system.slice/dev-hugepages.mount            -      -   244.0K        -        -\n/system.slice/dev-mapper-rhel\\x2dswap.swap   -      -   912.0K        -        -\n/system.slice/dev-mqueue.mount               -      -    48.0K        -        -\n/system.slice/example.service                2      -     2.0M        -        -\n/system.slice/firewalld.service              2      -    28.8M        -        -\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe example output displays currently running \u003Ccode class=\"literal\">cgroups\u003C/code> ordered by their resource usage (CPU, memory, disk I/O load). The list refreshes every 1 second by default. Therefore, it offers a dynamic insight into the actual resource usage of each control group.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">systemd-cgtop(1)\u003C/code> manual page\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_using-systemd-unit-files-to-set-limits-for-applications_assembly_using-systemd-to-manage-resources-used-by-applications\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.9. Using systemd unit files to set limits for applications\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">systemd\u003C/code> service manager supervises each existing or running unit and creates control groups for them. The units have configuration files in the \u003Ccode class=\"literal\">/usr/lib/systemd/system/\u003C/code> directory.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tYou can manually modify the unit files to:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tset limits.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tprioritize.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tcontrol access to hardware resources for groups of processes.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have the \u003Ccode class=\"literal\">root\u003C/code> privileges.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEdit the \u003Ccode class=\"literal\">/usr/lib/systemd/system/example.service\u003C/code> file to limit the memory usage of a service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">…​\n[Service]\nMemoryMax=1500K\n…​\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe configuration limits the maximum memory that the processes in a control group cannot exceed. The \u003Ccode class=\"literal\">example.service\u003C/code> service is part of such a control group which has imposed limitations. You can use suffixes K, M, G, or T to identify Kilobyte, Megabyte, Gigabyte, or Terabyte as a unit of measurement.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReload all unit configuration files:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl daemon-reload\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRestart the service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl restart \u003Cspan class=\"emphasis\">\u003Cem>example.service\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCheck that the changes took effect:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /sys/fs/cgroup/system.slice/example.service/memory.max\u003C/strong>\u003C/span>\n1536000\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe example output shows that the memory consumption was limited at around 1,500 KB.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index#setting-limits-for-applications_managing-monitoring-and-updating-the-kernel\">Understanding cgroups\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>\u003Cspan class=\"citetitle citetitle\">\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/managing-systemd_configuring-basic-system-settings#managing-system-services-with-systemctl_managing-systemd\">Managing system services with systemctl\u003C/a>\u003C/span>\u003C/em>\u003C/span> in Red Hat Enterprise Linux\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">systemd.resource-control(5)\u003C/code>, \u003Ccode class=\"literal\">systemd.exec(5)\u003C/code>, and \u003Ccode class=\"literal\">cgroups(7)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_using-systemctl-command-to-set-limits-to-applications_assembly_using-systemd-to-manage-resources-used-by-applications\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.10. Using systemctl command to set limits to applications\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tCPU affinity settings help you restrict the access of a particular process to some CPUs. Effectively, the CPU scheduler never schedules the process to run on the CPU that is not in the affinity mask of the process.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe default CPU affinity mask applies to all services managed by \u003Ccode class=\"literal\">systemd\u003C/code>.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo configure CPU affinity mask for a particular \u003Ccode class=\"literal\">systemd\u003C/code> service, \u003Ccode class=\"literal\">systemd\u003C/code> provides \u003Ccode class=\"literal\">CPUAffinity=\u003C/code> both as:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\ta unit file option.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\ta configuration option in the [Manager] section of the \u003Ccode class=\"literal\">/etc/systemd/system.conf\u003C/code> file.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">CPUAffinity=\u003C/code> unit file option sets a list of CPUs or CPU ranges that are merged and used as the affinity mask.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tTo set CPU affinity mask for a particular \u003Ccode class=\"literal\">systemd\u003C/code> service using the \u003Ccode class=\"literal\">CPUAffinity\u003C/code> unit file option:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCheck the values of the \u003Ccode class=\"literal\">CPUAffinity\u003C/code> unit file option in the service of your choice:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl show --property \u003Cspan class=\"emphasis\">\u003Cem>&lt;CPU affinity configuration option&gt;\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>&lt;service name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAs the root user, set the required value of the \u003Ccode class=\"literal\">CPUAffinity\u003C/code> unit file option for the CPU ranges used as the affinity mask:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl set-property \u003Cspan class=\"emphasis\">\u003Cem>&lt;service name&gt;\u003C/em>\u003C/span> CPUAffinity=\u003Cspan class=\"emphasis\">\u003Cem>&lt;value&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRestart the service to apply the changes.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl restart \u003Cspan class=\"emphasis\">\u003Cem>&lt;service name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">systemd.resource-control(5)\u003C/code>, \u003Ccode class=\"literal\">systemd.exec(5)\u003C/code>, \u003Ccode class=\"literal\">cgroups(7)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_setting-global-default-cpu-affinity-through-manager-configuration_assembly_using-systemd-to-manage-resources-used-by-applications\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.11. Setting global default CPU affinity through manager configuration\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">CPUAffinity\u003C/code> option in the \u003Ccode class=\"literal\">/etc/systemd/system.conf\u003C/code> file defines an affinity mask for the process identification number (PID) 1 and all processes forked off of PID1. You can then override the \u003Ccode class=\"literal\">CPUAffinity\u003C/code> on a per-service basis.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo set the default CPU affinity mask for all \u003Ccode class=\"literal\">systemd\u003C/code> services using the \u003Ccode class=\"literal\">/etc/systemd/system.conf\u003C/code> file:\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSet the CPU numbers for the \u003Ccode class=\"literal\">CPUAffinity=\u003C/code> option in the [Manager] section of the \u003Ccode class=\"literal\">/etc/systemd/system.conf\u003C/code> file.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tSave the edited file and reload the \u003Ccode class=\"literal\">systemd\u003C/code> service:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl daemon-reload\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tReboot the server to apply the changes.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">systemd.resource-control(5)\u003C/code> and \u003Ccode class=\"literal\">systemd.exec(5)\u003C/code> man pages.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_configuring-numa-using-systemd_assembly_using-systemd-to-manage-resources-used-by-applications\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.12. Configuring NUMA policies using systemd\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tNon-uniform memory access (NUMA) is a computer memory subsystem design, in which the memory access time depends on the physical memory location relative to the processor.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tMemory close to the CPU has lower latency (local memory) than memory that is local for a different CPU (foreign memory) or is shared between a set of CPUs.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tIn terms of the Linux kernel, NUMA policy governs where (for example, on which NUMA nodes) the kernel allocates physical memory pages for the process.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\t\u003Ccode class=\"literal\">systemd\u003C/code> provides unit file options \u003Ccode class=\"literal\">NUMAPolicy\u003C/code> and \u003Ccode class=\"literal\">NUMAMask\u003C/code> to control memory allocation policies for services.\n\t\t\t\u003C/p>\u003Cdiv class=\"formalpara\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cp>\n\t\t\t\t\tTo set the NUMA memory policy through the \u003Ccode class=\"literal\">NUMAPolicy\u003C/code> unit file option:\n\t\t\t\t\u003C/p>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCheck the values of the \u003Ccode class=\"literal\">NUMAPolicy\u003C/code> unit file option in the service of your choice:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl show --property \u003Cspan class=\"emphasis\">\u003Cem>&lt;NUMA policy configuration option&gt;\u003C/em>\u003C/span> \u003Cspan class=\"emphasis\">\u003Cem>&lt;service name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAs a root, set the required policy type of the \u003Ccode class=\"literal\">NUMAPolicy\u003C/code> unit file option:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl set-property \u003Cspan class=\"emphasis\">\u003Cem>&lt;service name&gt;\u003C/em>\u003C/span> NUMAPolicy=\u003Cspan class=\"emphasis\">\u003Cem>&lt;value&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRestart the service to apply the changes.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl restart \u003Cspan class=\"emphasis\">\u003Cem>&lt;service name&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tTo set a global \u003Ccode class=\"literal\">NUMAPolicy\u003C/code> setting using the [Manager] configuration option:\n\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tSearch in the \u003Ccode class=\"literal\">/etc/systemd/system.conf\u003C/code> file for the \u003Ccode class=\"literal\">NUMAPolicy\u003C/code> option in the [Manager] section of the file.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tEdit the policy type and save the file.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tReload the \u003Ccode class=\"literal\">systemd\u003C/code> configuration:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemd daemon-reload\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tReboot the server.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tWhen you configure a strict NUMA policy, for example \u003Ccode class=\"literal\">bind\u003C/code>, make sure that you also appropriately set the \u003Ccode class=\"literal\">CPUAffinity=\u003C/code> unit file option.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_using-systemctl-command-to-set-limits-to-applications_assembly_using-systemd-to-manage-resources-used-by-applications\" title=\"24.10. Using systemctl command to set limits to applications\">Using systemctl command to set limits to applications\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">systemd.resource-control(5)\u003C/code>, \u003Ccode class=\"literal\">systemd.exec(5)\u003C/code>, and \u003Ccode class=\"literal\">set_mempolicy(2)\u003C/code> man pages.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"ref_numa-policy-configuration-options-with-systemd_assembly_using-systemd-to-manage-resources-used-by-applications\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.13. NUMA policy configuration options for systemd\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\t\u003Ccode class=\"literal\">Systemd\u003C/code> provides the following options to configure the NUMA policy:\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">NUMAPolicy\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tControls the NUMA memory policy of the executed processes. You can use these policy types:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tdefault\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tpreferred\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tbind\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tinterleave\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tlocal\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">NUMAMask\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tControls the NUMA node list which is associated with the selected NUMA policy.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tNote that you do not have to specify the \u003Ccode class=\"literal\">NUMAMask\u003C/code> option for the following policies:\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tdefault\n\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tlocal\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tFor the preferred policy, the list specifies only a single NUMA node.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">systemd.resource-control(5)\u003C/code>, \u003Ccode class=\"literal\">systemd.exec(5)\u003C/code>, and \u003Ccode class=\"literal\">set_mempolicy(2)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"creating-transient-control-groups_assembly_using-systemd-to-manage-resources-used-by-applications\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.14. Creating transient cgroups using systemd-run command\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tThe transient \u003Ccode class=\"literal\">cgroups\u003C/code> set limits on resources consumed by a unit (service or scope) during its runtime.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo create a transient control group, use the \u003Ccode class=\"literal\">systemd-run\u003C/code> command in the following format:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemd-run --unit=\u003Cspan class=\"emphasis\">\u003Cem>&lt;name&gt;\u003C/em>\u003C/span> --slice=\u003Cspan class=\"emphasis\">\u003Cem>&lt;name&gt;\u003C/em>\u003C/span>.slice \u003Cspan class=\"emphasis\">\u003Cem>&lt;command&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis command creates and starts a transient service or a scope unit and runs a custom command in such a unit.\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"circle\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">--unit=&lt;name&gt;\u003C/code> option gives a name to the unit. If \u003Ccode class=\"literal\">--unit\u003C/code> is not specified, the name is generated automatically.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">--slice=&lt;\u003Cspan class=\"emphasis\">\u003Cem>name\u003C/em>\u003C/span>&gt;.slice\u003C/code> option makes your service or scope unit a member of a specified slice. Replace \u003Ccode class=\"literal\">&lt;\u003Cspan class=\"emphasis\">\u003Cem>name\u003C/em>\u003C/span>&gt;.slice\u003C/code> with the name of an existing slice (as shown in the output of \u003Ccode class=\"literal\">systemctl -t slice\u003C/code>), or create a new slice by passing a unique name. By default, services and scopes are created as members of the \u003Ccode class=\"literal\">system.slice\u003C/code>.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tReplace \u003Ccode class=\"literal\">&lt;\u003Cspan class=\"emphasis\">\u003Cem>command\u003C/em>\u003C/span>&gt;\u003C/code> with the command you want to enter in the service or the scope unit.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe following message is displayed to confirm that you created and started the service or the scope successfully:\n\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># Running as unit \u003Cspan class=\"emphasis\">\u003Cem>&lt;name&gt;\u003C/em>\u003C/span>.service\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>Optional\u003C/em>\u003C/span>: Keep the unit running after its processes finished to collect run-time information:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemd-run --unit=\u003Cspan class=\"emphasis\">\u003Cem>&lt;name&gt;\u003C/em>\u003C/span> --slice=\u003Cspan class=\"emphasis\">\u003Cem>&lt;name&gt;\u003C/em>\u003C/span>.slice --remain-after-exit \u003Cspan class=\"emphasis\">\u003Cem>&lt;command&gt;\u003C/em>\u003C/span>\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe command creates and starts a transient service unit and runs a custom command in the unit. The \u003Ccode class=\"literal\">--remain-after-exit\u003C/code> option ensures that the service keeps running after its processes have finished.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">systemd-run(1)\u003C/code> manual page\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"removing-transient-control-groups_assembly_using-systemd-to-manage-resources-used-by-applications\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">24.15. Removing transient control groups\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou can use the \u003Ccode class=\"literal\">systemd\u003C/code> system and service manager to remove transient control groups (\u003Ccode class=\"literal\">cgroups\u003C/code>) if you no longer need to limit, prioritize, or control access to hardware resources for groups of processes.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTransient \u003Ccode class=\"literal\">cgroups\u003C/code> are automatically released once all the processes that a service or a scope unit contains finish.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo stop the service unit with all its processes, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl stop &lt;\u003Cspan class=\"emphasis\">\u003Cem>name\u003C/em>\u003C/span>&gt;.service\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo terminate one or more of the unit processes, enter:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>systemctl kill &lt;\u003Cspan class=\"emphasis\">\u003Cem>name\u003C/em>\u003C/span>&gt;.service --kill-who=\u003Cspan class=\"emphasis\">\u003Cem>PID,…​\u003C/em>\u003C/span> --signal=&lt;\u003Cspan class=\"emphasis\">\u003Cem>signal\u003C/em>\u003C/span>&gt;\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe command uses the \u003Ccode class=\"literal\">--kill-who\u003C/code> option to select process(es) from the control group you want to terminate. To kill multiple processes at the same time, pass a comma-separated list of PIDs. The \u003Ccode class=\"literal\">--signal\u003C/code> option determines the type of POSIX signal to be sent to the specified processes. The default signal is \u003Cspan class=\"emphasis\">\u003Cem>SIGTERM\u003C/em>\u003C/span>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#understanding-control-groups_setting-limits-for-applications\" title=\"25.1. Introducing control groups\">What are control groups\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#what-kernel-resource-controllers-are_setting-limits-for-applications\" title=\"25.2. Introducing kernel resource controllers\">What are kernel resource controllers\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">systemd.resource-control(5)\u003C/code> and \u003Ccode class=\"literal\">cgroups(7)\u003C/code> man pages on your system\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index#setting-limits-for-applications_managing-monitoring-and-updating-the-kernel\">Understanding control groups\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>\u003Cspan class=\"citetitle citetitle\">\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/configuring_basic_system_settings/managing-systemd_configuring-basic-system-settings\">Managing systemd\u003C/a>\u003C/span>\u003C/em>\u003C/span> in RHEL\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"setting-limits-for-applications_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 25. Understanding control groups\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tUsing the control groups (\u003Ccode class=\"literal\">cgroups\u003C/code>) kernel functionality, you can control resource usage of applications to use them more efficiently.\n\t\t\u003C/p>\u003Cp>\n\t\t\tYou can use \u003Ccode class=\"literal\">cgroups\u003C/code> for the following tasks:\n\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\tSetting limits for system resource allocation.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tPrioritizing the allocation of hardware resources to specific processes.\n\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\tIsolating certain processes from obtaining hardware resources.\n\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Csection class=\"section\" id=\"understanding-control-groups_setting-limits-for-applications\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">25.1. Introducing control groups\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tUsing the \u003Cspan class=\"emphasis\">\u003Cem>control groups\u003C/em>\u003C/span> Linux kernel feature, you can organize processes into hierarchically ordered groups - \u003Ccode class=\"literal\">cgroups\u003C/code>. You define the hierarchy (control groups tree) by providing structure to \u003Ccode class=\"literal\">cgroups\u003C/code> virtual file system, mounted by default on the \u003Ccode class=\"literal\">/sys/fs/cgroup/\u003C/code> directory.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe \u003Ccode class=\"literal\">systemd\u003C/code> service manager uses \u003Ccode class=\"literal\">cgroups\u003C/code> to organize all units and services that it governs. Manually, you can manage the hierarchies of \u003Ccode class=\"literal\">cgroups\u003C/code> by creating and removing sub-directories in the \u003Ccode class=\"literal\">/sys/fs/cgroup/\u003C/code> directory.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tThe resource controllers in the kernel then modify the behavior of processes in \u003Ccode class=\"literal\">cgroups\u003C/code> by limiting, prioritizing or allocating system resources, of those processes. These resources include the following:\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCPU time\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tMemory\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tNetwork bandwidth\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tCombinations of these resources\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cp>\n\t\t\t\tThe primary use case of \u003Ccode class=\"literal\">cgroups\u003C/code> is aggregating system processes and dividing hardware resources among applications and users. This makes it possible to increase the efficiency, stability, and security of your environment.\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Control groups version 1\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>Control groups version 1\u003C/em>\u003C/span> (\u003Ccode class=\"literal\">cgroups-v1\u003C/code>) provide a per-resource controller hierarchy. This means that each resource (such as CPU, memory, or I/O) has its own control group hierarchy. You can combine different control group hierarchies in a way that one controller can coordinate with another in managing their respective resources. However, when the two controllers belong to different process hierarchies, proper coordination is limited.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">cgroups-v1\u003C/code> controllers were developed across a large time span and as a result, the behavior and naming of their control files is not uniform.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Control groups version 2\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\u003Cspan class=\"emphasis\">\u003Cem>Control groups version 2\u003C/em>\u003C/span> (\u003Ccode class=\"literal\">cgroups-v2\u003C/code>) provide a single control group hierarchy against which all resource controllers are mounted.\n\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe control file behavior and naming is consistent among different controllers.\n\t\t\t\t\t\t\u003C/p>\u003C/dd>\u003C/dl>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tRHEL 9, by default, mounts and uses \u003Ccode class=\"literal\">cgroups-v2\u003C/code>.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#what-kernel-resource-controllers-are_setting-limits-for-applications\" title=\"25.2. Introducing kernel resource controllers\">Introducing kernel resource controllers\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">cgroups(7)\u003C/code> manual page\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/labs/rhcb/RHEL-9.0/kernel-5.14.0-70.13.1.el9/source/Documentation/admin-guide/cgroup-v1\">cgroups-v1\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/labs/rhcb/RHEL-9.0/kernel-5.14.0-70.13.1.el9/source/blob/Documentation/admin-guide/cgroup-v2.rst\">cgroups-v2\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"what-kernel-resource-controllers-are_setting-limits-for-applications\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">25.2. Introducing kernel resource controllers\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tKernel resource controllers enable the functionality of control groups. RHEL 9 supports various controllers for \u003Cspan class=\"emphasis\">\u003Cem>control groups version 1\u003C/em>\u003C/span> (\u003Ccode class=\"literal\">cgroups-v1\u003C/code>) and \u003Cspan class=\"emphasis\">\u003Cem>control groups version 2\u003C/em>\u003C/span> (\u003Ccode class=\"literal\">cgroups-v2\u003C/code>).\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tA resource controller, also called a control group subsystem, is a kernel subsystem that represents a single resource, such as CPU time, memory, network bandwidth or disk I/O. The Linux kernel provides a range of resource controllers that are mounted automatically by the \u003Ccode class=\"literal\">systemd\u003C/code> service manager. You can find a list of the currently mounted resource controllers in the \u003Ccode class=\"literal\">/proc/cgroups\u003C/code> file.\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cp class=\"title\">\u003Cstrong>Controllers available for \u003Ccode class=\"literal\">cgroups-v1\u003C/code>:\u003C/strong>\u003C/p>\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">blkio\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tSets limits on input/output access to and from block devices.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">cpu\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tAdjusts the parameters of the Completely Fair Scheduler (CFS) for a control group’s tasks. The \u003Ccode class=\"literal\">cpu\u003C/code> controller is mounted together with the \u003Ccode class=\"literal\">cpuacct\u003C/code> controller on the same mount.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">cpuacct\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tCreates automatic reports on CPU resources used by tasks in a control group. The \u003Ccode class=\"literal\">cpuacct\u003C/code> controller is mounted together with the \u003Ccode class=\"literal\">cpu\u003C/code> controller on the same mount.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">cpuset\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tRestricts control group tasks to run only on a specified subset of CPUs and to direct the tasks to use memory only on specified memory nodes.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">devices\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tControls access to devices for tasks in a control group.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">freezer\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tSuspends or resumes tasks in a control group.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">memory\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tSets limits on memory use by tasks in a control group and generates automatic reports on memory resources used by those tasks.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">net_cls\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tTags network packets with a class identifier (\u003Ccode class=\"literal\">classid\u003C/code>) that enables the Linux traffic controller (the \u003Ccode class=\"literal\">tc\u003C/code> command) to identify packets that originate from a particular control group task. A subsystem of \u003Ccode class=\"literal\">net_cls\u003C/code>, the \u003Ccode class=\"literal\">net_filter\u003C/code> (iptables), can also use this tag to perform actions on such packets. The \u003Ccode class=\"literal\">net_filter\u003C/code> tags network sockets with a firewall identifier (\u003Ccode class=\"literal\">fwid\u003C/code>) that allows the Linux firewall to identify packets that originate from a particular control group task (by using the \u003Ccode class=\"literal\">iptables\u003C/code> command).\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">net_prio\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tSets the priority of network traffic.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">pids\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tSets limits for a number of processes and their children in a control group.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">perf_event\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tGroups tasks for monitoring by the \u003Ccode class=\"literal\">perf\u003C/code> performance monitoring and reporting utility.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">rdma\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tSets limits on Remote Direct Memory Access/InfiniBand specific resources in a control group.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">hugetlb\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tCan be used to limit the usage of large size virtual memory pages by tasks in a control group.\n\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cdiv class=\"variablelist\">\u003Cp class=\"title\">\u003Cstrong>Controllers available for \u003Ccode class=\"literal\">cgroups-v2\u003C/code>:\u003C/strong>\u003C/p>\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">io\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tSets limits on input/output access to and from block devices.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">memory\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tSets limits on memory use by tasks in a control group and generates automatic reports on memory resources used by those tasks.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">pids\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tSets limits for a number of processes and their children in a control group.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">rdma\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tSets limits on Remote Direct Memory Access/InfiniBand specific resources in a control group.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">cpu\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tAdjusts the parameters of the Completely Fair Scheduler (CFS) for a control group’s tasks and creates automatic reports on CPU resources used by tasks in a control group.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">cpuset\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tRestricts control group tasks to run only on a specified subset of CPUs and to direct the tasks to use memory only on specified memory nodes. Supports only the core functionality (\u003Ccode class=\"literal\">cpus{,.effective}\u003C/code>, \u003Ccode class=\"literal\">mems{,.effective}\u003C/code>) with a new partition feature.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">\u003Ccode class=\"literal\">perf_event\u003C/code>\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tGroups tasks for monitoring by the \u003Ccode class=\"literal\">perf\u003C/code> performance monitoring and reporting utility. \u003Ccode class=\"literal\">perf_event\u003C/code> is enabled automatically on the v2 hierarchy.\n\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tA resource controller can be used either in a \u003Ccode class=\"literal\">cgroups-v1\u003C/code> hierarchy or a \u003Ccode class=\"literal\">cgroups-v2\u003C/code> hierarchy, not simultaneously in both.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">cgroups(7)\u003C/code> manual page\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tDocumentation in \u003Ccode class=\"literal\">/usr/share/doc/kernel-doc-&lt;kernel_version&gt;/Documentation/cgroups-v1/\u003C/code> directory (after installing the \u003Ccode class=\"literal\">kernel-doc\u003C/code> package).\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"what-namespaces-are_setting-limits-for-applications\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">25.3. Introducing namespaces\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tNamespaces are one of the most important methods for organizing and identifying software objects.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tA namespace wraps a global system resource (for example, a mount point, a network device, or a hostname) in an abstraction that makes it appear to processes within the namespace that they have their own isolated instance of the global resource. One of the most common technologies that use namespaces are containers.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tChanges to a particular global resource are visible only to processes in that namespace and do not affect the rest of the system or other namespaces.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tTo inspect which namespaces a process is a member of, you can check the symbolic links in the \u003Ccode class=\"literal\">/proc/&lt;\u003Cspan class=\"emphasis\">\u003Cem>PID\u003C/em>\u003C/span>&gt;/ns/\u003C/code> directory.\n\t\t\t\u003C/p>\u003Crh-table id=\"idm139825289964736\">\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccaption>Table 25.1. Supported namespaces and resources which they isolate:\u003C/caption>\u003Ccolgroup>\u003Ccol style=\"width: 50%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 50%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825289959936\" scope=\"col\">Namespace\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825289958848\" scope=\"col\">Isolates\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289959936\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Mount\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289958848\"> \u003Cp>\n\t\t\t\t\t\t\t\tMount points\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289959936\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>UTS\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289958848\"> \u003Cp>\n\t\t\t\t\t\t\t\tHostname and NIS domain name\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289959936\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>IPC\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289958848\"> \u003Cp>\n\t\t\t\t\t\t\t\tSystem V IPC, POSIX message queues\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289959936\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>PID\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289958848\"> \u003Cp>\n\t\t\t\t\t\t\t\tProcess IDs\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289959936\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Network\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289958848\"> \u003Cp>\n\t\t\t\t\t\t\t\tNetwork devices, stacks, ports, etc\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289959936\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>User\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289958848\"> \u003Cp>\n\t\t\t\t\t\t\t\tUser and group IDs\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289959936\"> \u003Cp>\n\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>Control groups\u003C/strong>\u003C/span>\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825289958848\"> \u003Cp>\n\t\t\t\t\t\t\t\tControl group root directory\n\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">namespaces(7)\u003C/code> and \u003Ccode class=\"literal\">cgroup_namespaces(7)\u003C/code> manual pages\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"assembly_using-cgroupfs-to-manually-manage-cgroups_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 26. Using cgroupfs to manually manage cgroups\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\tYou can manage \u003Ccode class=\"literal\">cgroup\u003C/code> hierarchies on your system by creating directories on the \u003Ccode class=\"literal\">cgroupfs\u003C/code> virtual file system. The file system is mounted by default on the \u003Ccode class=\"literal\">/sys/fs/cgroup/\u003C/code> directory and you can specify desired configurations in dedicated control files.\n\t\t\u003C/p>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\tIn general, Red Hat recommends you use \u003Ccode class=\"literal\">systemd\u003C/code> for controlling the usage of system resources. You should manually configure the \u003Ccode class=\"literal\">cgroups\u003C/code> virtual file system only in special cases. For example, when you need to use \u003Ccode class=\"literal\">cgroup-v1\u003C/code> controllers that have no equivalents in \u003Ccode class=\"literal\">cgroup-v2\u003C/code> hierarchy.\n\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Csection class=\"section\" id=\"proc_creating-cgroups-and-enabling-controllers-in-cgroups-v2-file-system_assembly_using-cgroupfs-to-manually-manage-cgroups\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">26.1. Creating cgroups and enabling controllers in cgroups-v2 file system\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tYou can manage the \u003Cspan class=\"emphasis\">\u003Cem>control groups\u003C/em>\u003C/span> (\u003Ccode class=\"literal\">cgroups\u003C/code>) by creating or removing directories and by writing to files in the \u003Ccode class=\"literal\">cgroups\u003C/code> virtual file system. The file system is by default mounted on the \u003Ccode class=\"literal\">/sys/fs/cgroup/\u003C/code> directory. To use settings from the \u003Ccode class=\"literal\">cgroups\u003C/code> controllers, you also need to enable the desired controllers for child \u003Ccode class=\"literal\">cgroups\u003C/code>. The root \u003Ccode class=\"literal\">cgroup\u003C/code> has, by default, enabled the \u003Ccode class=\"literal\">memory\u003C/code> and \u003Ccode class=\"literal\">pids\u003C/code> controllers for its child \u003Ccode class=\"literal\">cgroups\u003C/code>. Therefore, Red Hat recommends to create at least two levels of child \u003Ccode class=\"literal\">cgroups\u003C/code> inside the \u003Ccode class=\"literal\">/sys/fs/cgroup/\u003C/code> root \u003Ccode class=\"literal\">cgroup\u003C/code>. This way you optionally remove the \u003Ccode class=\"literal\">memory\u003C/code> and \u003Ccode class=\"literal\">pids\u003C/code> controllers from the child \u003Ccode class=\"literal\">cgroups\u003C/code> and maintain better organizational clarity of \u003Ccode class=\"literal\">cgroup\u003C/code> files.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have root permissions.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">/sys/fs/cgroup/Example/\u003C/code> directory:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mkdir /sys/fs/cgroup/Example/\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">/sys/fs/cgroup/Example/\u003C/code> directory defines a child group. When you create the \u003Ccode class=\"literal\">/sys/fs/cgroup/Example/\u003C/code> directory, some \u003Ccode class=\"literal\">cgroups-v2\u003C/code> interface files are automatically created in the directory. The \u003Ccode class=\"literal\">/sys/fs/cgroup/Example/\u003C/code> directory contains also controller-specific files for the \u003Ccode class=\"literal\">memory\u003C/code> and \u003Ccode class=\"literal\">pids\u003C/code> controllers.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Inspect the newly created child control group:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ll /sys/fs/cgroup/Example/\u003C/strong>\u003C/span>\n-r—​r—​r--. 1 root root 0 Jun  1 10:33 cgroup.controllers\n-r—​r—​r--. 1 root root 0 Jun  1 10:33 cgroup.events\n-rw-r—​r--. 1 root root 0 Jun  1 10:33 cgroup.freeze\n-rw-r—​r--. 1 root root 0 Jun  1 10:33 cgroup.procs\n…​\n-rw-r—​r--. 1 root root 0 Jun  1 10:33 cgroup.subtree_control\n-r—​r—​r--. 1 root root 0 Jun  1 10:33 memory.events.local\n-rw-r—​r--. 1 root root 0 Jun  1 10:33 memory.high\n-rw-r—​r--. 1 root root 0 Jun  1 10:33 memory.low\n…​\n-r—​r—​r--. 1 root root 0 Jun  1 10:33 pids.current\n-r—​r—​r--. 1 root root 0 Jun  1 10:33 pids.events\n-rw-r—​r--. 1 root root 0 Jun  1 10:33 pids.max\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe example output shows general \u003Ccode class=\"literal\">cgroup\u003C/code> control interface files such as \u003Ccode class=\"literal\">cgroup.procs\u003C/code> or \u003Ccode class=\"literal\">cgroup.controllers\u003C/code>. These files are common to all control groups, regardless of enabled controllers.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe files such as \u003Ccode class=\"literal\">memory.high\u003C/code> and \u003Ccode class=\"literal\">pids.max\u003C/code> relate to the \u003Ccode class=\"literal\">memory\u003C/code> and \u003Ccode class=\"literal\">pids\u003C/code> controllers, which are in the root control group (\u003Ccode class=\"literal\">/sys/fs/cgroup/\u003C/code>), and are enabled by default by \u003Ccode class=\"literal\">systemd\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tBy default, the newly created child group inherits all settings from the parent \u003Ccode class=\"literal\">cgroup\u003C/code>. In this case, there are no limits from the root \u003Ccode class=\"literal\">cgroup\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the desired controllers are available in the \u003Ccode class=\"literal\">/sys/fs/cgroup/cgroup.controllers\u003C/code> file:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /sys/fs/cgroup/cgroup.controllers\u003C/strong>\u003C/span>\ncpuset cpu io memory hugetlb pids rdma\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable the desired controllers. In this example it is \u003Ccode class=\"literal\">cpu\u003C/code> and \u003Ccode class=\"literal\">cpuset\u003C/code> controllers:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"+cpu\" &gt;&gt; /sys/fs/cgroup/cgroup.subtree_control\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"+cpuset\" &gt;&gt; /sys/fs/cgroup/cgroup.subtree_control\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThese commands enable the \u003Ccode class=\"literal\">cpu\u003C/code> and \u003Ccode class=\"literal\">cpuset\u003C/code> controllers for the immediate child groups of the \u003Ccode class=\"literal\">/sys/fs/cgroup/\u003C/code> root control group. Including the newly created \u003Ccode class=\"literal\">Example\u003C/code> control group. A \u003Cspan class=\"emphasis\">\u003Cem>child group\u003C/em>\u003C/span> is where you can specify processes and apply control checks to each of the processes based on your criteria.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tUsers can read the contents of the \u003Ccode class=\"literal\">cgroup.subtree_control\u003C/code> file at any level to get an idea of what controllers are going to be available for enablement in the immediate child group.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tBy default, the \u003Ccode class=\"literal\">/sys/fs/cgroup/cgroup.subtree_control\u003C/code> file in the root control group contains \u003Ccode class=\"literal\">memory\u003C/code> and \u003Ccode class=\"literal\">pids\u003C/code> controllers.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEnable the desired controllers for child \u003Ccode class=\"literal\">cgroups\u003C/code> of the \u003Ccode class=\"literal\">Example\u003C/code> control group:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"+cpu +cpuset\" &gt;&gt; /sys/fs/cgroup/Example/cgroup.subtree_control\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis command ensures that the immediate child control group will \u003Cspan class=\"emphasis\">\u003Cem>only\u003C/em>\u003C/span> have controllers relevant to regulate the CPU time distribution - not to \u003Ccode class=\"literal\">memory\u003C/code> or \u003Ccode class=\"literal\">pids\u003C/code> controllers.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate the \u003Ccode class=\"literal\">/sys/fs/cgroup/Example/tasks/\u003C/code> directory:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mkdir /sys/fs/cgroup/Example/tasks/\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">/sys/fs/cgroup/Example/tasks/\u003C/code> directory defines a child group with files that relate purely to \u003Ccode class=\"literal\">cpu\u003C/code> and \u003Ccode class=\"literal\">cpuset\u003C/code> controllers. You can now assign processes to this control group and utilize \u003Ccode class=\"literal\">cpu\u003C/code> and \u003Ccode class=\"literal\">cpuset\u003C/code> controller options for your processes.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Inspect the child control group:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ll /sys/fs/cgroup/Example/tasks\u003C/strong>\u003C/span>\n-r—​r—​r--. 1 root root 0 Jun  1 11:45 cgroup.controllers\n-r—​r—​r--. 1 root root 0 Jun  1 11:45 cgroup.events\n-rw-r—​r--. 1 root root 0 Jun  1 11:45 cgroup.freeze\n-rw-r—​r--. 1 root root 0 Jun  1 11:45 cgroup.max.depth\n-rw-r—​r--. 1 root root 0 Jun  1 11:45 cgroup.max.descendants\n-rw-r—​r--. 1 root root 0 Jun  1 11:45 cgroup.procs\n-r—​r—​r--. 1 root root 0 Jun  1 11:45 cgroup.stat\n-rw-r—​r--. 1 root root 0 Jun  1 11:45 cgroup.subtree_control\n-rw-r—​r--. 1 root root 0 Jun  1 11:45 cgroup.threads\n-rw-r—​r--. 1 root root 0 Jun  1 11:45 cgroup.type\n-rw-r—​r--. 1 root root 0 Jun  1 11:45 cpu.max\n-rw-r—​r--. 1 root root 0 Jun  1 11:45 cpu.pressure\n-rw-r—​r--. 1 root root 0 Jun  1 11:45 cpuset.cpus\n-r—​r—​r--. 1 root root 0 Jun  1 11:45 cpuset.cpus.effective\n-rw-r—​r--. 1 root root 0 Jun  1 11:45 cpuset.cpus.partition\n-rw-r—​r--. 1 root root 0 Jun  1 11:45 cpuset.mems\n-r—​r—​r--. 1 root root 0 Jun  1 11:45 cpuset.mems.effective\n-r—​r—​r--. 1 root root 0 Jun  1 11:45 cpu.stat\n-rw-r—​r--. 1 root root 0 Jun  1 11:45 cpu.weight\n-rw-r—​r--. 1 root root 0 Jun  1 11:45 cpu.weight.nice\n-rw-r—​r--. 1 root root 0 Jun  1 11:45 io.pressure\n-rw-r—​r--. 1 root root 0 Jun  1 11:45 memory.pressure\u003C/pre>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe \u003Ccode class=\"literal\">cpu\u003C/code> controller is only activated if the relevant child control group has at least 2 processes which compete for time on a single CPU.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: confirm that you have created a new \u003Ccode class=\"literal\">cgroup\u003C/code> with only the desired controllers active:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout white-space-pre\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /sys/fs/cgroup/Example/tasks/cgroup.controllers\u003C/strong>\u003C/span>\ncpuset cpu\u003C/pre>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#what-kernel-resource-controllers-are_setting-limits-for-applications\" title=\"25.2. Introducing kernel resource controllers\">What are kernel resource controllers\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#proc_mounting-cgroups-v1_assembly_using-cgroupfs-to-manually-manage-cgroups\" title=\"26.3. Mounting cgroups-v1\">Mounting cgroups-v1\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">cgroups(7)\u003C/code>, \u003Ccode class=\"literal\">sysfs(5)\u003C/code> manual pages\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_controlling-distribution-of-cpu-time-for-applications-by-adjusting-cpu-weight_assembly_using-cgroupfs-to-manually-manage-cgroups\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">26.2. Controlling distribution of CPU time for applications by adjusting CPU weight\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tYou need to assign values to the relevant files of the \u003Ccode class=\"literal\">cpu\u003C/code> controller to regulate distribution of the CPU time to applications under the specific cgroup tree.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have root permissions.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have applications for which you want to control distribution of CPU time.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou created a two level hierarchy of \u003Cspan class=\"emphasis\">\u003Cem>child control groups\u003C/em>\u003C/span> inside the \u003Ccode class=\"literal\">/sys/fs/cgroup/\u003C/code> \u003Cspan class=\"emphasis\">\u003Cem>root control group\u003C/em>\u003C/span> as in the following example:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\">…​\n  ├── Example\n  │   ├── g1\n  │   ├── g2\n  │   └── g3\n…​\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou enabled the \u003Ccode class=\"literal\">cpu\u003C/code> controller in the parent control group and in child control groups similarly as described in \u003Ca class=\"link\" href=\"#proc_creating-cgroups-and-enabling-controllers-in-cgroups-v2-file-system_assembly_using-cgroupfs-to-manually-manage-cgroups\" title=\"26.1. Creating cgroups and enabling controllers in cgroups-v2 file system\">Creating cgroups and enabling controllers in cgroups-v2 file system\u003C/a>.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure desired CPU weights to achieve resource restrictions within the control groups:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"150\" &gt; /sys/fs/cgroup/Example/g1/cpu.weight\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"100\" &gt; /sys/fs/cgroup/Example/g2/cpu.weight\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"50\" &gt; /sys/fs/cgroup/Example/g3/cpu.weight\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the applications' PIDs to the \u003Ccode class=\"literal\">g1\u003C/code>, \u003Ccode class=\"literal\">g2\u003C/code>, and \u003Ccode class=\"literal\">g3\u003C/code> child groups:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"33373\" &gt; /sys/fs/cgroup/Example/g1/cgroup.procs\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"33374\" &gt; /sys/fs/cgroup/Example/g2/cgroup.procs\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"33377\" &gt; /sys/fs/cgroup/Example/g3/cgroup.procs\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe example commands ensure that desired applications become members of the \u003Ccode class=\"literal\">Example/g*/\u003C/code> child cgroups and will get their CPU time distributed as per the configuration of those cgroups.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe weights of the children cgroups (\u003Ccode class=\"literal\">g1\u003C/code>, \u003Ccode class=\"literal\">g2\u003C/code>, \u003Ccode class=\"literal\">g3\u003C/code>) that have running processes are summed up at the level of the parent cgroup (\u003Ccode class=\"literal\">Example\u003C/code>). The CPU resource is then distributed proportionally based on the respective weights.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAs a result, when all processes run at the same time, the kernel allocates to each of them the proportionate CPU time based on their respective cgroup’s \u003Ccode class=\"literal\">cpu.weight\u003C/code> file:\n\t\t\t\t\t\u003C/p>\u003Crh-table>\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccolgroup>\u003Ccol style=\"width: 30%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 30%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 40%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825287248544\" scope=\"col\">Child cgroup\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825287247456\" scope=\"col\">\u003Ccode class=\"literal\">cpu.weight\u003C/code> file\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825287246048\" scope=\"col\">CPU time allocation\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287248544\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tg1\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287247456\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t150\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287246048\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t~50% (150/300)\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287248544\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tg2\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287247456\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t100\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287246048\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t~33% (100/300)\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287248544\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tg3\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287247456\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t50\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825287246048\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t~16% (50/300)\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe value of the \u003Ccode class=\"literal\">cpu.weight\u003C/code> controller file is not a percentage.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIf one process stopped running, leaving cgroup \u003Ccode class=\"literal\">g2\u003C/code> with no running processes, the calculation would omit the cgroup \u003Ccode class=\"literal\">g2\u003C/code> and only account weights of cgroups \u003Ccode class=\"literal\">g1\u003C/code> and \u003Ccode class=\"literal\">g3\u003C/code>:\n\t\t\t\t\t\u003C/p>\u003Crh-table>\u003Ctable class=\"lt-4-cols lt-7-rows\">\u003Ccolgroup>\u003Ccol style=\"width: 30%; \" class=\"col_1\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 30%; \" class=\"col_2\">\u003C!--Empty-->\u003C/col>\u003Ccol style=\"width: 40%; \" class=\"col_3\">\u003C!--Empty-->\u003C/col>\u003C/colgroup>\u003Cthead>\u003Ctr>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825286723872\" scope=\"col\">Child cgroup\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825286722784\" scope=\"col\">\u003Ccode class=\"literal\">cpu.weight\u003C/code> file\u003C/th>\u003Cth align=\"left\" valign=\"top\" id=\"idm139825286721376\" scope=\"col\">CPU time allocation\u003C/th>\u003C/tr>\u003C/thead>\u003Ctbody>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825286723872\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tg1\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825286722784\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t150\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825286721376\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t~75% (150/200)\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003Ctr>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825286723872\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\tg3\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825286722784\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t50\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003Ctd align=\"left\" valign=\"top\" headers=\"idm139825286721376\"> \u003Cp>\n\t\t\t\t\t\t\t\t\t\t~25% (50/200)\n\t\t\t\t\t\t\t\t\t\u003C/p>\n\t\t\t\t\t\t\t\t\t \u003C/td>\u003C/tr>\u003C/tbody>\u003C/table>\u003C/rh-table>\u003Crh-alert class=\"admonition important\" state=\"warning\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Important\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tIf a child cgroup had multiple running processes, the CPU time allocated to the respective cgroup would be distributed equally to the member processes of that cgroup.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the applications run in the specified control groups:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /proc/33373/cgroup /proc/33374/cgroup /proc/33377/cgroup\u003C/strong>\u003C/span>\n0::/Example/g1\n0::/Example/g2\n0::/Example/g3\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe command output shows the processes of the specified applications that run in the \u003Ccode class=\"literal\">Example/g*/\u003C/code> child cgroups.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInspect the current CPU consumption of the throttled applications:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout white-space-pre\"># \u003Cspan class=\"strong strong\">\u003Cstrong>top\u003C/strong>\u003C/span>\ntop - 05:17:18 up 1 day, 18:25,  1 user,  load average: 3.03, 3.03, 3.00\nTasks:  95 total,   4 running,  91 sleeping,   0 stopped,   0 zombie\n%Cpu(s): 18.1 us, 81.6 sy,  0.0 ni,  0.0 id,  0.0 wa,  0.3 hi,  0.0 si,  0.0 st\nMiB Mem :   3737.0 total,   3233.7 free,    132.8 used,    370.5 buff/cache\nMiB Swap:   4060.0 total,   4060.0 free,      0.0 used.   3373.1 avail Mem\n\n    PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND\n  33373 root      20   0   18720   1748   1460 R  \u003Cspan class=\"strong strong\">\u003Cstrong>49.5\u003C/strong>\u003C/span>   0.0 415:05.87 sha1sum\n  33374 root      20   0   18720   1756   1464 R  \u003Cspan class=\"strong strong\">\u003Cstrong>32.9\u003C/strong>\u003C/span>   0.0 412:58.33 sha1sum\n  33377 root      20   0   18720   1860   1568 R  \u003Cspan class=\"strong strong\">\u003Cstrong>16.3\u003C/strong>\u003C/span>   0.0 411:03.12 sha1sum\n    760 root      20   0  416620  28540  15296 S   0.3   0.7   0:10.23 tuned\n      1 root      20   0  186328  14108   9484 S   0.0   0.4   0:02.00 systemd\n      2 root      20   0       0      0      0 S   0.0   0.0   0:00.01 kthread\n...\u003C/pre>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tWe forced all the example processes to run on a single CPU for clearer illustration. The CPU weight applies the same principles also when used on multiple CPUs.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNotice that the CPU resource for the \u003Ccode class=\"literal\">PID 33373\u003C/code>, \u003Ccode class=\"literal\">PID 33374\u003C/code>, and \u003Ccode class=\"literal\">PID 33377\u003C/code> was allocated based on the weights, 150, 100, 50, you assigned to the respective child cgroups. The weights correspond to around 50%, 33%, and 16% allocation of CPU time for each application.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"proc_mounting-cgroups-v1_assembly_using-cgroupfs-to-manually-manage-cgroups\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">26.3. Mounting cgroups-v1\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp>\n\t\t\t\tDuring the boot process, RHEL 9 mounts the \u003Ccode class=\"literal\">cgroup-v2\u003C/code> virtual filesystem by default. To utilize \u003Ccode class=\"literal\">cgroup-v1\u003C/code> functionality in limiting resources for your applications, manually configure the system.\n\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tBoth \u003Ccode class=\"literal\">cgroup-v1\u003C/code> and \u003Ccode class=\"literal\">cgroup-v2\u003C/code> are fully enabled in the kernel. There is no default control group version from the kernel point of view, and is decided by \u003Ccode class=\"literal\">systemd\u003C/code> to mount at startup.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have root permissions.\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure the system to mount \u003Ccode class=\"literal\">cgroups-v1\u003C/code> by default during system boot by the \u003Ccode class=\"literal\">systemd\u003C/code> system and service manager:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout white-space-pre\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --update-kernel=/boot/vmlinuz-$(uname -r) --args=\"systemd.unified_cgroup_hierarchy=0 systemd.legacy_systemd_cgroup_controller\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis adds the necessary kernel command-line parameters to the current boot entry.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tTo add the same parameters to all kernel boot entries:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout white-space-pre\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --update-kernel=ALL --args=\"systemd.unified_cgroup_hierarchy=0 systemd.legacy_systemd_cgroup_controller\"\u003C/strong>\u003C/span>\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tReboot the system for the changes to take effect.\n\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the \u003Ccode class=\"literal\">cgroups-v1\u003C/code> filesystem was mounted:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout white-space-pre\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mount -l | grep cgroup\u003C/strong>\u003C/span>\ntmpfs on /sys/fs/cgroup type tmpfs (ro,nosuid,nodev,noexec,seclabel,size=4096k,nr_inodes=1024,mode=755,inode64)\ncgroup on /sys/fs/cgroup/systemd type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,xattr,release_agent=/usr/lib/systemd/systemd-cgroups-agent,name=systemd)\ncgroup on /sys/fs/cgroup/perf_event type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,perf_event)\ncgroup on /sys/fs/cgroup/cpu,cpuacct type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,cpu,cpuacct)\ncgroup on /sys/fs/cgroup/pids type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,pids)\ncgroup on /sys/fs/cgroup/cpuset type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,cpuset)\ncgroup on /sys/fs/cgroup/net_cls,net_prio type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,net_cls,net_prio)\ncgroup on /sys/fs/cgroup/hugetlb type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,hugetlb)\ncgroup on /sys/fs/cgroup/memory type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,memory)\ncgroup on /sys/fs/cgroup/blkio type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,blkio)\ncgroup on /sys/fs/cgroup/devices type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,devices)\ncgroup on /sys/fs/cgroup/misc type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,misc)\ncgroup on /sys/fs/cgroup/freezer type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,freezer)\ncgroup on /sys/fs/cgroup/rdma type cgroup (rw,nosuid,nodev,noexec,relatime,seclabel,rdma)\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">cgroups-v1\u003C/code> filesystems that correspond to various \u003Ccode class=\"literal\">cgroup-v1\u003C/code> controllers, were successfully mounted on the \u003Ccode class=\"literal\">/sys/fs/cgroup/\u003C/code> directory.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInspect the contents of the \u003Ccode class=\"literal\">/sys/fs/cgroup/\u003C/code> directory:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ll /sys/fs/cgroup/\u003C/strong>\u003C/span>\ndr-xr-xr-x. 10 root root  0 Mar 16 09:34 blkio\nlrwxrwxrwx.  1 root root 11 Mar 16 09:34 cpu → cpu,cpuacct\nlrwxrwxrwx.  1 root root 11 Mar 16 09:34 cpuacct → cpu,cpuacct\ndr-xr-xr-x. 10 root root  0 Mar 16 09:34 cpu,cpuacct\ndr-xr-xr-x.  2 root root  0 Mar 16 09:34 cpuset\ndr-xr-xr-x. 10 root root  0 Mar 16 09:34 devices\ndr-xr-xr-x.  2 root root  0 Mar 16 09:34 freezer\ndr-xr-xr-x.  2 root root  0 Mar 16 09:34 hugetlb\ndr-xr-xr-x. 10 root root  0 Mar 16 09:34 memory\ndr-xr-xr-x.  2 root root  0 Mar 16 09:34 misc\nlrwxrwxrwx.  1 root root 16 Mar 16 09:34 net_cls → net_cls,net_prio\ndr-xr-xr-x.  2 root root  0 Mar 16 09:34 net_cls,net_prio\nlrwxrwxrwx.  1 root root 16 Mar 16 09:34 net_prio → net_cls,net_prio\ndr-xr-xr-x.  2 root root  0 Mar 16 09:34 perf_event\ndr-xr-xr-x. 10 root root  0 Mar 16 09:34 pids\ndr-xr-xr-x.  2 root root  0 Mar 16 09:34 rdma\ndr-xr-xr-x. 11 root root  0 Mar 16 09:34 systemd\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">/sys/fs/cgroup/\u003C/code> directory, also called the \u003Cspan class=\"emphasis\">\u003Cem>root control group\u003C/em>\u003C/span>, by default, contains controller-specific directories such as \u003Ccode class=\"literal\">cpuset\u003C/code>. In addition, there are some directories related to \u003Ccode class=\"literal\">systemd\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#what-kernel-resource-controllers-are_setting-limits-for-applications\" title=\"25.2. Introducing kernel resource controllers\">What are kernel resource controllers\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">cgroups(7)\u003C/code>, \u003Ccode class=\"literal\">sysfs(5)\u003C/code> manual pages\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html-single/9.0_release_notes/index#BZ-1953515\">cgroup-v2 enabled by default in RHEL 9\u003C/a>\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"setting-cpu-limits-to-applications-using-cgroups-v1_assembly_using-cgroupfs-to-manually-manage-cgroups\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">26.4. Setting CPU limits to applications using cgroups-v1\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tTo configure CPU limits to an application by using \u003Cspan class=\"emphasis\">\u003Cem>control groups version 1\u003C/em>\u003C/span> (\u003Ccode class=\"literal\">cgroups-v1\u003C/code>), use the \u003Ccode class=\"literal\">/sys/fs/\u003C/code> virtual file system.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have root permissions.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tYou have an application whose CPU consumption you want to restrict.\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tYou configured the system to mount \u003Ccode class=\"literal\">cgroups-v1\u003C/code> by default during system boot by the \u003Ccode class=\"literal\">systemd\u003C/code> system and service manager:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout white-space-pre\"># \u003Cspan class=\"strong strong\">\u003Cstrong>grubby --update-kernel=/boot/vmlinuz-$(uname -r) --args=\"systemd.unified_cgroup_hierarchy=0 systemd.legacy_systemd_cgroup_controller\"\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis adds the necessary kernel command-line parameters to the current boot entry.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIdentify the process ID (PID) of the application that you want to restrict in CPU consumption:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout white-space-pre\"># \u003Cspan class=\"strong strong\">\u003Cstrong>top\u003C/strong>\u003C/span>\ntop - 11:34:09 up 11 min,  1 user,  load average: 0.51, 0.27, 0.22\nTasks: 267 total,   3 running, 264 sleeping,   0 stopped,   0 zombie\n%Cpu(s): 49.0 us,  3.3 sy,  0.0 ni, 47.5 id,  0.0 wa,  0.2 hi,  0.0 si,  0.0 st\nMiB Mem :   1826.8 total,    303.4 free,   1046.8 used,    476.5 buff/cache\nMiB Swap:   1536.0 total,   1396.0 free,    140.0 used.    616.4 avail Mem\n\n  PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND\n 6955 root      20   0  228440   1752   1472 R  \u003Cspan class=\"strong strong\">\u003Cstrong>99.3\u003C/strong>\u003C/span>   0.1   0:32.71 sha1sum\n 5760 jdoe      20   0 3603868 205188  64196 S   3.7  11.0   0:17.19 gnome-shell\n 6448 jdoe      20   0  743648  30640  19488 S   0.7   1.6   0:02.73 gnome-terminal-\n    1 root      20   0  245300   6568   4116 S   0.3   0.4   0:01.87 systemd\n  505 root      20   0       0      0      0 I   0.3   0.0   0:00.75 kworker/u4:4-events_unbound\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis example output of the \u003Ccode class=\"literal\">top\u003C/code> program reveals that illustrative application \u003Ccode class=\"literal\">sha1sum\u003C/code> with \u003Ccode class=\"literal\">PID 6955\u003C/code> consumes a lot of CPU resources.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tCreate a sub-directory in the \u003Ccode class=\"literal\">cpu\u003C/code> resource controller directory:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>mkdir /sys/fs/cgroup/cpu/Example/\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis directory represents a control group, where you can place specific processes and apply certain CPU limits to the processes. At the same time, a number of \u003Ccode class=\"literal\">cgroups-v1\u003C/code> interface files and \u003Ccode class=\"literal\">cpu\u003C/code> controller-specific files will be created in the directory.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Inspect the newly created control group:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ll /sys/fs/cgroup/cpu/Example/\u003C/strong>\u003C/span>\n-rw-r—​r--. 1 root root 0 Mar 11 11:42 cgroup.clone_children\n-rw-r—​r--. 1 root root 0 Mar 11 11:42 cgroup.procs\n-r—​r—​r--. 1 root root 0 Mar 11 11:42 cpuacct.stat\n-rw-r—​r--. 1 root root 0 Mar 11 11:42 cpuacct.usage\n-r—​r—​r--. 1 root root 0 Mar 11 11:42 cpuacct.usage_all\n-r—​r—​r--. 1 root root 0 Mar 11 11:42 cpuacct.usage_percpu\n-r—​r—​r--. 1 root root 0 Mar 11 11:42 cpuacct.usage_percpu_sys\n-r—​r—​r--. 1 root root 0 Mar 11 11:42 cpuacct.usage_percpu_user\n-r—​r—​r--. 1 root root 0 Mar 11 11:42 cpuacct.usage_sys\n-r—​r—​r--. 1 root root 0 Mar 11 11:42 cpuacct.usage_user\n-rw-r—​r--. 1 root root 0 Mar 11 11:42 cpu.cfs_period_us\n-rw-r—​r--. 1 root root 0 Mar 11 11:42 cpu.cfs_quota_us\n-rw-r—​r--. 1 root root 0 Mar 11 11:42 cpu.rt_period_us\n-rw-r—​r--. 1 root root 0 Mar 11 11:42 cpu.rt_runtime_us\n-rw-r—​r--. 1 root root 0 Mar 11 11:42 cpu.shares\n-r—​r—​r--. 1 root root 0 Mar 11 11:42 cpu.stat\n-rw-r—​r--. 1 root root 0 Mar 11 11:42 notify_on_release\n-rw-r—​r--. 1 root root 0 Mar 11 11:42 tasks\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis example output shows files, such as \u003Ccode class=\"literal\">cpuacct.usage\u003C/code>, \u003Ccode class=\"literal\">cpu.cfs._period_us\u003C/code>, that represent specific configurations and/or limits, which can be set for processes in the \u003Ccode class=\"literal\">Example\u003C/code> control group. Note that the respective file names are prefixed with the name of the control group controller to which they belong.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tBy default, the newly created control group inherits access to the system’s entire CPU resources without a limit.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tConfigure CPU limits for the control group:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"1000000\" &gt; /sys/fs/cgroup/cpu/Example/cpu.cfs_period_us\u003C/strong>\u003C/span>\n# \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"200000\" &gt; /sys/fs/cgroup/cpu/Example/cpu.cfs_quota_us\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">cpu.cfs_period_us\u003C/code> file represents a period of time in microseconds (µs, represented here as \"us\") for how frequently a control group’s access to CPU resources should be reallocated. The upper limit is 1 000 000 microsecond and the lower limit is 1 000 microseconds.\n\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">cpu.cfs_quota_us\u003C/code> file represents the total amount of time in microseconds for which all processes collectively in a control group can run during one period (as defined by \u003Ccode class=\"literal\">cpu.cfs_period_us\u003C/code>). When processes in a control group, during a single period, use up all the time specified by the quota, they are throttled for the remainder of the period and not allowed to run until the next period. The lower limit is 1 000 microseconds.\n\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\tThe example commands above set the CPU time limits so that all processes collectively in the \u003Ccode class=\"literal\">Example\u003C/code> control group will be able to run only for 0.2 seconds (defined by \u003Ccode class=\"literal\">cpu.cfs_quota_us\u003C/code>) out of every 1 second (defined by \u003Ccode class=\"literal\">cpu.cfs_period_us\u003C/code>).\n\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tOptional: Verify the limits:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /sys/fs/cgroup/cpu/Example/cpu.cfs_period_us /sys/fs/cgroup/cpu/Example/cpu.cfs_quota_us\u003C/strong>\u003C/span>\n1000000\n200000\u003C/pre>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tAdd the application’s PID to the \u003Ccode class=\"literal\">Example\u003C/code> control group:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>echo \"6955\" &gt; /sys/fs/cgroup/cpu/Example/cgroup.procs\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis command ensures that a specific application becomes a member of the \u003Ccode class=\"literal\">Example\u003C/code> control group and hence does not exceed the CPU limits configured for the \u003Ccode class=\"literal\">Example\u003C/code> control group. The PID should represent an existing process in the system. The \u003Ccode class=\"literal\">PID 6955\u003C/code> here was assigned to process \u003Ccode class=\"literal\">sha1sum /dev/zero &amp;\u003C/code>, used to illustrate the use case of the \u003Ccode class=\"literal\">cpu\u003C/code> controller.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Cdiv class=\"orderedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tVerify that the application runs in the specified control group:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>cat /proc/6955/cgroup\u003C/strong>\u003C/span>\n12:cpuset:/\n11:hugetlb:/\n10:net_cls,net_prio:/\n9:memory:/user.slice/user-1000.slice/user@1000.service\n8:devices:/user.slice\n7:blkio:/\n6:freezer:/\n5:rdma:/\n4:pids:/user.slice/user-1000.slice/user@1000.service\n3:perf_event:/\n2:cpu,cpuacct:/Example\n1:name=systemd:/user.slice/user-1000.slice/user@1000.service/gnome-terminal-server.service\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThis example output shows that the process of the desired application runs in the \u003Ccode class=\"literal\">Example\u003C/code> control group, which applies CPU limits to the application’s process.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIdentify the current CPU consumption of your throttled application:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout white-space-pre\"># \u003Cspan class=\"strong strong\">\u003Cstrong>top\u003C/strong>\u003C/span>\ntop - 12:28:42 up  1:06,  1 user,  load average: 1.02, 1.02, 1.00\nTasks: 266 total,   6 running, 260 sleeping,   0 stopped,   0 zombie\n%Cpu(s): 11.0 us,  1.2 sy,  0.0 ni, 87.5 id,  0.0 wa,  0.2 hi,  0.0 si,  0.2 st\nMiB Mem :   1826.8 total,    287.1 free,   1054.4 used,    485.3 buff/cache\nMiB Swap:   1536.0 total,   1396.7 free,    139.2 used.    608.3 avail Mem\n\n  PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND\n 6955 root      20   0  228440   1752   1472 R  \u003Cspan class=\"strong strong\">\u003Cstrong>20.6\u003C/strong>\u003C/span>   0.1  47:11.43 sha1sum\n 5760 jdoe      20   0 3604956 208832  65316 R   2.3  11.2   0:43.50 gnome-shell\n 6448 jdoe      20   0  743836  31736  19488 S   0.7   1.7   0:08.25 gnome-terminal-\n  505 root      20   0       0      0      0 I   0.3   0.0   0:03.39 kworker/u4:4-events_unbound\n 4217 root      20   0   74192   1612   1320 S   0.3   0.1   0:01.19 spice-vdagentd\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tNote that the CPU consumption of the \u003Ccode class=\"literal\">PID 6955\u003C/code> has decreased from 99% to 20%.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\tThe \u003Ccode class=\"literal\">cgroups-v2\u003C/code> counterpart for \u003Ccode class=\"literal\">cpu.cfs_period_us\u003C/code> and \u003Ccode class=\"literal\">cpu.cfs_quota_us\u003C/code> is the \u003Ccode class=\"literal\">cpu.max\u003C/code> file. The \u003Ccode class=\"literal\">cpu.max\u003C/code> file is available through the \u003Ccode class=\"literal\">cpu\u003C/code> controller.\n\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"itemizedlist _additional-resources\">\u003Cp class=\"title\">\u003Cstrong>Additional resources\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist _additional-resources\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#what-kernel-resource-controllers-are_setting-limits-for-applications\" title=\"25.2. Introducing kernel resource controllers\">Introducing kernel resource controllers\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ccode class=\"literal\">cgroups(7)\u003C/code>, \u003Ccode class=\"literal\">sysfs(5)\u003C/code> manual pages\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003C/section>\u003Csection class=\"chapter\" id=\"analyzing-system-performance-with-bpf-compiler_collection_managing-monitoring-and-updating-the-kernel\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch2 class=\"title\">Chapter 27. Analyzing system performance with BPF Compiler Collection\u003C/h2>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\tAs a system administrator, you can use the BPF Compiler Collection (BCC) library to create tools for analyzing the performance of your Linux operating system and gathering information, which could be difficult to obtain through other interfaces.\n\t\t\u003C/p>\u003Csection class=\"section\" id=\"installing-the-bcc-tools-package_analyzing-system-performance-with-bpf-compiler_collection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">27.1. Installing the bcc-tools package\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tInstall the \u003Ccode class=\"literal\">bcc-tools\u003C/code> package, which also installs the BPF Compiler Collection (BCC) library as a dependency.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInstall \u003Ccode class=\"literal\">bcc-tools\u003C/code>.\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dnf install bcc-tools\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe BCC tools are installed in the \u003Ccode class=\"literal\">/usr/share/bcc/tools/\u003C/code> directory.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Verification\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tInspect the installed tools:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"literallayout\"># \u003Cspan class=\"strong strong\">\u003Cstrong>ls -l /usr/share/bcc/tools/\u003C/strong>\u003C/span>\n...\n-rwxr-xr-x. 1 root root  4198 Dec 14 17:53 dcsnoop\n-rwxr-xr-x. 1 root root  3931 Dec 14 17:53 dcstat\n-rwxr-xr-x. 1 root root 20040 Dec 14 17:53 deadlock_detector\n-rw-r--r--. 1 root root  7105 Dec 14 17:53 deadlock_detector.c\ndrwxr-xr-x. 3 root root  8192 Mar 11 10:28 doc\n-rwxr-xr-x. 1 root root  7588 Dec 14 17:53 execsnoop\n-rwxr-xr-x. 1 root root  6373 Dec 14 17:53 ext4dist\n-rwxr-xr-x. 1 root root 10401 Dec 14 17:53 ext4slower\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal systemitem\">doc\u003C/code> directory in the listing above contains documentation for each tool.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ul>\u003C/div>\u003C/section>\u003Csection class=\"section\" id=\"using-selected-bcc-tools-for-performance-analyses_analyzing-system-performance-with-bpf-compiler_collection\">\u003Cdiv class=\"titlepage\">\u003Cdiv>\u003Cdiv>\u003Ch3 class=\"title\">27.2. Using selected bcc-tools for performance analyses\u003C/h3>\u003C/div>\u003C/div>\u003C/div>\u003Cp class=\"_abstract _abstract\">\n\t\t\t\tUse certain pre-created programs from the BPF Compiler Collection (BCC) library to efficiently and securely analyze the system performance on the per-event basis. The set of pre-created programs in the BCC library can serve as examples for creation of additional programs.\n\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cp class=\"title\">\u003Cstrong>Prerequisites\u003C/strong>\u003C/p>\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\u003Ca class=\"link\" href=\"#installing-the-bcc-tools-package_analyzing-system-performance-with-bpf-compiler_collection\" title=\"27.1. Installing the bcc-tools package\">Installed bcc-tools package\u003C/a>\n\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\tRoot permissions\n\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003Cdiv class=\"variablelist\">\u003Cp class=\"title\">\u003Cstrong>Procedure\u003C/strong>\u003C/p>\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Using execsnoop to examine the system processes\u003C/span>\u003C/dt>\u003Cdd>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tRun the \u003Ccode class=\"literal\">execsnoop\u003C/code> program in one terminal:\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>/usr/share/bcc/tools/execsnoop\u003C/strong>\u003C/span>\u003C/pre>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIn another terminal run, for example:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>ls /usr/share/bcc/tools/doc/\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThe above creates a short-lived process of the \u003Ccode class=\"literal\">ls\u003C/code> command.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThe terminal running \u003Ccode class=\"literal\">execsnoop\u003C/code> shows the output similar to the following:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">PCOMM\tPID    PPID   RET ARGS\nls   \t8382   8287     0 /usr/bin/ls --color=auto /usr/share/bcc/tools/doc/\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">execsnoop\u003C/code> program prints a line of output for each new process, which consumes system resources. It even detects processes of programs that run very shortly, such as \u003Ccode class=\"literal\">ls\u003C/code>, and most monitoring tools would not register them.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">execsnoop\u003C/code> output displays the following fields:\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">PCOMM\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tThe parent process name. (\u003Ccode class=\"literal\">ls\u003C/code>)\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">PID\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tThe process ID. (\u003Ccode class=\"literal\">8382\u003C/code>)\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">PPID\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tThe parent process ID. (\u003Ccode class=\"literal\">8287\u003C/code>)\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">RET\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tThe return value of the \u003Ccode class=\"literal\">exec()\u003C/code> system call (\u003Ccode class=\"literal\">0\u003C/code>), which loads program code into new processes.\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">ARGS\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tThe location of the started program with arguments.\n\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cp>\n\t\t\t\tTo see more details, examples, and options for \u003Ccode class=\"literal\">execsnoop\u003C/code>, refer to the \u003Ccode class=\"literal\">/usr/share/bcc/tools/doc/execsnoop_example.txt\u003C/code> file.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor more information about \u003Ccode class=\"literal\">exec()\u003C/code>, see \u003Ccode class=\"literal\">exec(3)\u003C/code> manual pages.\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Using opensnoop to track what files a command opens\u003C/span>\u003C/dt>\u003Cdd>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tRun the \u003Ccode class=\"literal\">opensnoop\u003C/code> program in one terminal:\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>/usr/share/bcc/tools/opensnoop -n uname\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe above prints output for files, which are opened only by the process of the \u003Ccode class=\"literal\">uname\u003C/code> command.\n\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIn another terminal, enter:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>uname\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThe command above opens certain files, which are captured in the next step.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThe terminal running \u003Ccode class=\"literal\">opensnoop\u003C/code> shows the output similar to the following:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">PID    COMM \tFD ERR PATH\n8596   uname \t3  0   /etc/ld.so.cache\n8596   uname \t3  0   /lib64/libc.so.6\n8596   uname \t3  0   /usr/lib/locale/locale-archive\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">opensnoop\u003C/code> program watches the \u003Ccode class=\"literal\">open()\u003C/code> system call across the whole system, and prints a line of output for each file that \u003Ccode class=\"literal\">uname\u003C/code> tried to open along the way.\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">opensnoop\u003C/code> output displays the following fields:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">PID\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\t\t\t\tThe process ID. (\u003Ccode class=\"literal\">8596\u003C/code>)\n\t\t\t\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">COMM\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\t\t\t\tThe process name. (\u003Ccode class=\"literal\">uname\u003C/code>)\n\t\t\t\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">FD\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\t\t\t\tThe file descriptor - a value that \u003Ccode class=\"literal\">open()\u003C/code> returns to refer to the open file. (\u003Ccode class=\"literal\">3\u003C/code>)\n\t\t\t\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">ERR\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\t\t\t\tAny errors.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">PATH\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\t\t\t\tThe location of files that \u003Ccode class=\"literal\">open()\u003C/code> tried to open.\n\t\t\t\t\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIf a command tries to read a non-existent file, then the \u003Ccode class=\"literal\">FD\u003C/code> column returns \u003Ccode class=\"literal\">-1\u003C/code> and the \u003Ccode class=\"literal\">ERR\u003C/code> column prints a value corresponding to the relevant error. As a result, \u003Ccode class=\"literal\">opensnoop\u003C/code> can help you identify an application that does not behave properly.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/dd>\u003C/dl>\u003C/div>\u003Cp>\n\t\t\t\tTo see more details, examples, and options for \u003Ccode class=\"literal\">opensnoop\u003C/code>, refer to the \u003Ccode class=\"literal\">/usr/share/bcc/tools/doc/opensnoop_example.txt\u003C/code> file.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor more information about \u003Ccode class=\"literal\">open()\u003C/code>, see \u003Ccode class=\"literal\">open(2)\u003C/code> manual pages.\n\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">Using biotop to examine the I/O operations on the disk\u003C/span>\u003C/dt>\u003Cdd>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\tRun the \u003Ccode class=\"literal\">biotop\u003C/code> program in one terminal:\n\t\t\t\t\t\t\t\t\u003C/li>\u003C/ol>\u003C/div>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>/usr/share/bcc/tools/biotop 30\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\tThe command enables you to monitor the top processes, which perform I/O operations on the disk. The argument ensures that the command will produce a 30 second summary.\n\t\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\t\tWhen no argument provided, the output screen by default refreshes every 1 second.\n\t\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tIn another terminal enter, for example :\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>dd if=/dev/vda of=/dev/zero\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThe command above reads the content from the local hard disk device and writes the output to the \u003Ccode class=\"literal\">/dev/zero\u003C/code> file. This step generates certain I/O traffic to illustrate \u003Ccode class=\"literal\">biotop\u003C/code>.\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThe terminal running \u003Ccode class=\"literal\">biotop\u003C/code> shows the output similar to the following:\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">PID    COMM             D MAJ MIN DISK       I/O  Kbytes     AVGms\n9568   dd               R 252 0   vda      16294 14440636.0  3.69\n48     kswapd0          W 252 0   vda       1763 120696.0    1.65\n7571   gnome-shell      R 252 0   vda        834 83612.0     0.33\n1891   gnome-shell      R 252 0   vda       1379 19792.0     0.15\n7515   Xorg             R 252 0   vda        280  9940.0     0.28\n7579   llvmpipe-1       R 252 0   vda        228  6928.0     0.19\n9515   gnome-control-c  R 252 0   vda         62  6444.0     0.43\n8112   gnome-terminal-  R 252 0   vda         67  2572.0     1.54\n7807   gnome-software   R 252 0   vda         31  2336.0     0.73\n9578   awk              R 252 0   vda         17  2228.0     0.66\n7578   llvmpipe-0       R 252 0   vda        156  2204.0     0.07\n9581   pgrep            R 252 0   vda         58  1748.0     0.42\n7531   InputThread      R 252 0   vda         30  1200.0     0.48\n7504   gdbus            R 252 0   vda          3  1164.0     0.30\n1983   llvmpipe-1       R 252 0   vda         39   724.0     0.08\n1982   llvmpipe-0       R 252 0   vda         36   652.0     0.06\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThe \u003Ccode class=\"literal\">biotop\u003C/code> output displays the following fields:\n\t\t\t\t\t\t\t\t\u003C/p>\u003C/li>\u003C/ol>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">PID\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tThe process ID. (\u003Ccode class=\"literal\">9568\u003C/code>)\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">COMM\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tThe process name. (\u003Ccode class=\"literal\">dd\u003C/code>)\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">DISK\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tThe disk performing the read operations. (\u003Ccode class=\"literal\">vda\u003C/code>)\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">I/O\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tThe number of read operations performed. (16294)\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">Kbytes\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tThe amount of Kbytes reached by the read operations. (14,440,636)\n\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">AVGms\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\tThe average I/O time of read operations. (3.69)\n\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003Cp>\n\t\t\t\tTo see more details, examples, and options for \u003Ccode class=\"literal\">biotop\u003C/code>, refer to the \u003Ccode class=\"literal\">/usr/share/bcc/tools/doc/biotop_example.txt\u003C/code> file.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor more information about \u003Ccode class=\"literal\">dd\u003C/code>, see \u003Ccode class=\"literal\">dd(1)\u003C/code> manual pages.\n\t\t\t\u003C/p>\u003Ch5 id=\"using_xfsslower_to_expose_unexpectedly_slow_file_system_operations\">Using xfsslower to expose unexpectedly slow file system operations\u003C/h5>\u003Cdiv class=\"orderedlist\">\u003Col class=\"orderedlist\" type=\"1\">\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tRun the \u003Ccode class=\"literal\">xfsslower\u003C/code> program in one terminal:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\"># \u003Cspan class=\"strong strong\">\u003Cstrong>/usr/share/bcc/tools/xfsslower 1\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe command above measures the time the XFS file system spends in performing read, write, open or sync (\u003Ccode class=\"literal\">fsync\u003C/code>) operations. The \u003Ccode class=\"literal\">1\u003C/code> argument ensures that the program shows only the operations that are slower than 1 ms.\n\t\t\t\t\t\u003C/p>\u003Crh-alert class=\"admonition note\" state=\"info\">\u003Cdiv class=\"admonition_header\" slot=\"header\">Note\u003C/div>\u003Cdiv>\u003Cp>\n\t\t\t\t\t\t\tWhen no arguments provided, \u003Ccode class=\"literal\">xfsslower\u003C/code> by default displays operations slower than 10 ms.\n\t\t\t\t\t\t\u003C/p>\u003C/div>\u003C/rh-alert>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tIn another terminal enter, for example, the following:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">$ \u003Cspan class=\"strong strong\">\u003Cstrong>vim text\u003C/strong>\u003C/span>\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe command above creates a text file in the \u003Ccode class=\"literal\">vim\u003C/code> editor to initiate certain interaction with the XFS file system.\n\t\t\t\t\t\u003C/p>\u003C/li>\u003Cli class=\"listitem\">\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe terminal running \u003Ccode class=\"literal\">xfsslower\u003C/code> shows something similar upon saving the file from the previous step:\n\t\t\t\t\t\u003C/p>\u003Cpre class=\"screen\">TIME     COMM           PID    T BYTES   OFF_KB   LAT(ms) FILENAME\n13:07:14 b'bash'        4754   R 256     0           7.11 b'vim'\n13:07:14 b'vim'         4754   R 832     0           4.03 b'libgpm.so.2.1.0'\n13:07:14 b'vim'         4754   R 32      20          1.04 b'libgpm.so.2.1.0'\n13:07:14 b'vim'         4754   R 1982    0           2.30 b'vimrc'\n13:07:14 b'vim'         4754   R 1393    0           2.52 b'getscriptPlugin.vim'\n13:07:45 b'vim'         4754   S 0       0           6.71 b'text'\n13:07:45 b'pool'        2588   R 16      0           5.58 b'text'\n...\u003C/pre>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tEach line above represents an operation in the file system, which took more time than a certain threshold. \u003Ccode class=\"literal\">xfsslower\u003C/code> is good at exposing possible file system problems, which can take form of unexpectedly slow operations.\n\t\t\t\t\t\u003C/p>\u003Cp class=\"simpara\">\n\t\t\t\t\t\tThe \u003Ccode class=\"literal\">xfsslower\u003C/code> output displays the following fields:\n\t\t\t\t\t\u003C/p>\u003Cdiv class=\"variablelist\">\u003Cdl class=\"variablelist\">\u003Cdt>\u003Cspan class=\"term\">COMM\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tThe process name. (\u003Ccode class=\"literal\">b’bash'\u003C/code>)\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">T\u003C/span>\u003C/dt>\u003Cdd>\u003Cp class=\"simpara\">\n\t\t\t\t\t\t\t\t\tThe operation type. (\u003Ccode class=\"literal\">R\u003C/code>)\n\t\t\t\t\t\t\t\t\u003C/p>\u003Cdiv class=\"itemizedlist\">\u003Cul class=\"itemizedlist\" type=\"disc\">\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>R\u003C/strong>\u003C/span>ead\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>W\u003C/strong>\u003C/span>rite\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003Cli class=\"listitem\">\n\t\t\t\t\t\t\t\t\t\t\t\u003Cspan class=\"strong strong\">\u003Cstrong>S\u003C/strong>\u003C/span>ync\n\t\t\t\t\t\t\t\t\t\t\u003C/li>\u003C/ul>\u003C/div>\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">OFF_KB\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tThe file offset in KB. (0)\n\t\t\t\t\t\t\t\t\u003C/dd>\u003Cdt>\u003Cspan class=\"term\">FILENAME\u003C/span>\u003C/dt>\u003Cdd>\n\t\t\t\t\t\t\t\t\tThe file being read, written, or synced.\n\t\t\t\t\t\t\t\t\u003C/dd>\u003C/dl>\u003C/div>\u003C/li>\u003C/ol>\u003C/div>\u003Cp>\n\t\t\t\tTo see more details, examples, and options for \u003Ccode class=\"literal\">xfsslower\u003C/code>, refer to the \u003Ccode class=\"literal\">/usr/share/bcc/tools/doc/xfsslower_example.txt\u003C/code> file.\n\t\t\t\u003C/p>\u003Cp>\n\t\t\t\tFor more information about \u003Ccode class=\"literal\">fsync\u003C/code>, see \u003Ccode class=\"literal\">fsync(2)\u003C/code> manual pages.\n\t\t\t\u003C/p>\u003C/section>\u003C/section>\u003Cdiv>\u003Cdiv xml:lang=\"en-US\" class=\"legalnotice\" id=\"idm139825285704640\">\u003Ch2 class=\"legalnotice\">Legal Notice\u003C/h2>\u003Cdiv class=\"para\">\n\t\tCopyright \u003Cspan class=\"trademark\">\u003C!--Empty-->\u003C/span>© 2024 Red Hat, Inc.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\tThe text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license (\"CC-BY-SA\"). An explanation of CC-BY-SA is available at \u003Ca class=\"uri\" href=\"http://creativecommons.org/licenses/by-sa/3.0/\">http://creativecommons.org/licenses/by-sa/3.0/\u003C/a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\tRed Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\tRed Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\u003Cspan class=\"trademark\">Linux\u003C/span>® is the registered trademark of Linus Torvalds in the United States and other countries.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\u003Cspan class=\"trademark\">Java\u003C/span>® is a registered trademark of Oracle and/or its affiliates.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\u003Cspan class=\"trademark\">XFS\u003C/span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\u003Cspan class=\"trademark\">MySQL\u003C/span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\t\u003Cspan class=\"trademark\">Node.js\u003C/span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\tThe \u003Cspan class=\"trademark\">OpenStack\u003C/span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.\n\t\u003C/div>\u003Cdiv class=\"para\">\n\t\tAll other trademarks are the property of their respective owners.\n\t\u003C/div>\u003C/div>\u003C/div>\u003C/div>\u003C/body>",[14,21,26,64,68,121,154,179,188,209,258,275,289,303,325,339,389,399,417,451,473,499,509,563,585,631,697,715,737,751],{"title":11,"visible":15,"weight":16,"urlFragment":17,"anchor":18,"singlePageAnchor":18,"docTitle":19,"url":20},true,1,"index",null,"managing_monitoring_and_updating_the_kernel","#",{"title":22,"visible":15,"weight":23,"urlFragment":24,"anchor":18,"singlePageAnchor":24,"docTitle":19,"url":25},"Providing feedback on Red Hat documentation",2,"proc_providing-feedback-on-red-hat-documentation_managing-monitoring-and-updating-the-kernel","#proc_providing-feedback-on-red-hat-documentation_managing-monitoring-and-updating-the-kernel",{"title":27,"visible":15,"weight":28,"urlFragment":29,"anchor":18,"singlePageAnchor":29,"sections":30,"docTitle":19,"url":63},"1. The Linux kernel",3,"assembly_the-linux-kernel_managing-monitoring-and-updating-the-kernel",[31,35,39,43,48,53,58],{"title":32,"visible":15,"weight":16,"urlFragment":29,"anchor":33,"singlePageAnchor":33,"docTitle":19,"url":34},"1.1. What the kernel is","what-the-kernel-is_assembly_the-linux-kernel","#what-the-kernel-is_assembly_the-linux-kernel",{"title":36,"visible":15,"weight":23,"urlFragment":29,"anchor":37,"singlePageAnchor":37,"docTitle":19,"url":38},"1.2. RPM packages","con_rpm-packages_assembly_the-linux-kernel","#con_rpm-packages_assembly_the-linux-kernel",{"title":40,"visible":15,"weight":28,"urlFragment":29,"anchor":41,"singlePageAnchor":41,"docTitle":19,"url":42},"1.3. The Linux kernel RPM package overview","the-linux-kernel-rpm-package-overview_assembly_the-linux-kernel","#the-linux-kernel-rpm-package-overview_assembly_the-linux-kernel",{"title":44,"visible":15,"weight":45,"urlFragment":29,"anchor":46,"singlePageAnchor":46,"docTitle":19,"url":47},"1.4. Displaying contents of a kernel package",4,"displaying-contents-of-the-kernel-package_assembly_the-linux-kernel","#displaying-contents-of-the-kernel-package_assembly_the-linux-kernel",{"title":49,"visible":15,"weight":50,"urlFragment":29,"anchor":51,"singlePageAnchor":51,"docTitle":19,"url":52},"1.5. Installing specific kernel versions",5,"installing-the-kernel_assembly_the-linux-kernel","#installing-the-kernel_assembly_the-linux-kernel",{"title":54,"visible":15,"weight":55,"urlFragment":29,"anchor":56,"singlePageAnchor":56,"docTitle":19,"url":57},"1.6. Updating the kernel",6,"updating-the-kernel_assembly_the-linux-kernel","#updating-the-kernel_assembly_the-linux-kernel",{"title":59,"visible":15,"weight":60,"urlFragment":29,"anchor":61,"singlePageAnchor":61,"docTitle":19,"url":62},"1.7. Setting a kernel as default",7,"setting-a-kernel-as-default_assembly_the-linux-kernel","#setting-a-kernel-as-default_assembly_the-linux-kernel","#assembly_the-linux-kernel_managing-monitoring-and-updating-the-kernel",{"title":65,"visible":15,"weight":45,"urlFragment":66,"anchor":18,"singlePageAnchor":66,"docTitle":19,"url":67},"2. The 64k page size kernel","what-is-kernel-64k_managing-monitoring-and-updating-the-kernel","#what-is-kernel-64k_managing-monitoring-and-updating-the-kernel",{"title":69,"visible":15,"weight":50,"urlFragment":70,"anchor":18,"singlePageAnchor":70,"sections":71,"docTitle":19,"url":120},"3. Managing kernel modules","managing-kernel-modules_managing-monitoring-and-updating-the-kernel",[72,76,80,84,88,92,96,100,105,110,115],{"title":73,"visible":15,"weight":16,"urlFragment":70,"anchor":74,"singlePageAnchor":74,"docTitle":19,"url":75},"3.1. Introduction to kernel modules","introduction-to-kernel-modules_managing-kernel-modules","#introduction-to-kernel-modules_managing-kernel-modules",{"title":77,"visible":15,"weight":23,"urlFragment":70,"anchor":78,"singlePageAnchor":78,"docTitle":19,"url":79},"3.2. Kernel module dependencies","kernel-module-dependencies_managing-kernel-modules","#kernel-module-dependencies_managing-kernel-modules",{"title":81,"visible":15,"weight":28,"urlFragment":70,"anchor":82,"singlePageAnchor":82,"docTitle":19,"url":83},"3.3. Listing installed kernel modules","listing-installed-kernel-modules_managing-kernel-modules","#listing-installed-kernel-modules_managing-kernel-modules",{"title":85,"visible":15,"weight":45,"urlFragment":70,"anchor":86,"singlePageAnchor":86,"docTitle":19,"url":87},"3.4. Listing currently loaded kernel modules","listing-currently-loaded-kernel-modules_managing-kernel-modules","#listing-currently-loaded-kernel-modules_managing-kernel-modules",{"title":89,"visible":15,"weight":50,"urlFragment":70,"anchor":90,"singlePageAnchor":90,"docTitle":19,"url":91},"3.5. Displaying information about kernel modules","displaying-information-about-kernel-modules_managing-kernel-modules","#displaying-information-about-kernel-modules_managing-kernel-modules",{"title":93,"visible":15,"weight":55,"urlFragment":70,"anchor":94,"singlePageAnchor":94,"docTitle":19,"url":95},"3.6. Loading kernel modules at system runtime","loading-kernel-modules-at-system-runtime_managing-kernel-modules","#loading-kernel-modules-at-system-runtime_managing-kernel-modules",{"title":97,"visible":15,"weight":60,"urlFragment":70,"anchor":98,"singlePageAnchor":98,"docTitle":19,"url":99},"3.7. Unloading kernel modules at system runtime","unloading-kernel-modules-at-system-runtime_managing-kernel-modules","#unloading-kernel-modules-at-system-runtime_managing-kernel-modules",{"title":101,"visible":15,"weight":102,"urlFragment":70,"anchor":103,"singlePageAnchor":103,"docTitle":19,"url":104},"3.8. Unloading kernel modules at early stages of the boot process",8,"proc_unloading-kernel-modules-at-early-stages-of-the-boot-process_managing-kernel-modules","#proc_unloading-kernel-modules-at-early-stages-of-the-boot-process_managing-kernel-modules",{"title":106,"visible":15,"weight":107,"urlFragment":70,"anchor":108,"singlePageAnchor":108,"docTitle":19,"url":109},"3.9. Loading kernel modules automatically at system boot time",9,"loading-kernel-modules-automatically-at-system-boot-time_managing-kernel-modules","#loading-kernel-modules-automatically-at-system-boot-time_managing-kernel-modules",{"title":111,"visible":15,"weight":112,"urlFragment":70,"anchor":113,"singlePageAnchor":113,"docTitle":19,"url":114},"3.10. Preventing kernel modules from being automatically loaded at system boot time",10,"preventing-kernel-modules-from-being-automatically-loaded-at-system-boot-time_managing-kernel-modules","#preventing-kernel-modules-from-being-automatically-loaded-at-system-boot-time_managing-kernel-modules",{"title":116,"visible":15,"weight":117,"urlFragment":70,"anchor":118,"singlePageAnchor":118,"docTitle":19,"url":119},"3.11. Compiling custom kernel modules",11,"proc_compiling-custom-kernel-modules_managing-kernel-modules","#proc_compiling-custom-kernel-modules_managing-kernel-modules","#managing-kernel-modules_managing-monitoring-and-updating-the-kernel",{"title":122,"visible":15,"weight":55,"urlFragment":123,"anchor":18,"singlePageAnchor":123,"sections":124,"docTitle":19,"url":153},"4. Configuring kernel command-line parameters","configuring-kernel-command-line-parameters_managing-monitoring-and-updating-the-kernel",[125,129,133,137,141,145,149],{"title":126,"visible":15,"weight":16,"urlFragment":123,"anchor":127,"singlePageAnchor":127,"docTitle":19,"url":128},"4.1. What are kernel command-line parameters","understanding-kernel-command-line-parameters_configuring-kernel-command-line-parameters","#understanding-kernel-command-line-parameters_configuring-kernel-command-line-parameters",{"title":130,"visible":15,"weight":23,"urlFragment":123,"anchor":131,"singlePageAnchor":131,"docTitle":19,"url":132},"4.2. Understanding boot entries","what-boot-entries-are_configuring-kernel-command-line-parameters","#what-boot-entries-are_configuring-kernel-command-line-parameters",{"title":134,"visible":15,"weight":28,"urlFragment":123,"anchor":135,"singlePageAnchor":135,"docTitle":19,"url":136},"4.3. Changing kernel command-line parameters for all boot entries","changing-kernel-command-line-parameters-for-all-boot-entries_configuring-kernel-command-line-parameters","#changing-kernel-command-line-parameters-for-all-boot-entries_configuring-kernel-command-line-parameters",{"title":138,"visible":15,"weight":45,"urlFragment":123,"anchor":139,"singlePageAnchor":139,"docTitle":19,"url":140},"4.4. Changing kernel command-line parameters for a single boot entry","changing-kernel-command-line-parameters-for-a-single-boot-entry_configuring-kernel-command-line-parameters","#changing-kernel-command-line-parameters-for-a-single-boot-entry_configuring-kernel-command-line-parameters",{"title":142,"visible":15,"weight":50,"urlFragment":123,"anchor":143,"singlePageAnchor":143,"docTitle":19,"url":144},"4.5. Changing kernel command-line parameters temporarily at boot time","changing-kernel-command-line-parameters-temporarily-at-boot-time_configuring-kernel-command-line-parameters","#changing-kernel-command-line-parameters-temporarily-at-boot-time_configuring-kernel-command-line-parameters",{"title":146,"visible":15,"weight":55,"urlFragment":123,"anchor":147,"singlePageAnchor":147,"docTitle":19,"url":148},"4.6. Configuring GRUB settings to enable serial console connection","proc_configuring-grub-2-settings-to-enable-serial-console-connection_configuring-kernel-command-line-parameters","#proc_configuring-grub-2-settings-to-enable-serial-console-connection_configuring-kernel-command-line-parameters",{"title":150,"visible":15,"weight":60,"urlFragment":123,"anchor":151,"singlePageAnchor":151,"docTitle":19,"url":152},"4.7. Changing boot entries with the GRUB configuration file","changing-boot-entries-with-the-grub-configuration-file_configuring-kernel-command-line-parameters","#changing-boot-entries-with-the-grub-configuration-file_configuring-kernel-command-line-parameters","#configuring-kernel-command-line-parameters_managing-monitoring-and-updating-the-kernel",{"title":155,"visible":15,"weight":60,"urlFragment":156,"anchor":18,"singlePageAnchor":156,"sections":157,"docTitle":19,"url":178},"5. Configuring kernel parameters at runtime","configuring-kernel-parameters-at-runtime_managing-monitoring-and-updating-the-kernel",[158,162,166,170,174],{"title":159,"visible":15,"weight":16,"urlFragment":156,"anchor":160,"singlePageAnchor":160,"docTitle":19,"url":161},"5.1. What are kernel parameters","what-are-kernel-parameters_configuring-kernel-parameters-at-runtime","#what-are-kernel-parameters_configuring-kernel-parameters-at-runtime",{"title":163,"visible":15,"weight":23,"urlFragment":156,"anchor":164,"singlePageAnchor":164,"docTitle":19,"url":165},"5.2. Configuring kernel parameters temporarily with sysctl","configuring-kernel-parameters-temporarily-with-sysctl_configuring-kernel-parameters-at-runtime","#configuring-kernel-parameters-temporarily-with-sysctl_configuring-kernel-parameters-at-runtime",{"title":167,"visible":15,"weight":28,"urlFragment":156,"anchor":168,"singlePageAnchor":168,"docTitle":19,"url":169},"5.3. Configuring kernel parameters permanently with sysctl","configuring-kernel-parameters-permanently-with-sysctl_configuring-kernel-parameters-at-runtime","#configuring-kernel-parameters-permanently-with-sysctl_configuring-kernel-parameters-at-runtime",{"title":171,"visible":15,"weight":45,"urlFragment":156,"anchor":172,"singlePageAnchor":172,"docTitle":19,"url":173},"5.4. Using configuration files in /etc/sysctl.d/ to adjust kernel parameters","using-configuration-files-in-etc-sysctl-d-to-adjust-kernel-parameters_configuring-kernel-parameters-at-runtime","#using-configuration-files-in-etc-sysctl-d-to-adjust-kernel-parameters_configuring-kernel-parameters-at-runtime",{"title":175,"visible":15,"weight":50,"urlFragment":156,"anchor":176,"singlePageAnchor":176,"docTitle":19,"url":177},"5.5. Configuring kernel parameters temporarily through /proc/sys/","configuring-kernel-parameters-temporarily-through-proc-sys_configuring-kernel-parameters-at-runtime","#configuring-kernel-parameters-temporarily-through-proc-sys_configuring-kernel-parameters-at-runtime","#configuring-kernel-parameters-at-runtime_managing-monitoring-and-updating-the-kernel",{"title":180,"visible":15,"weight":102,"urlFragment":181,"anchor":18,"singlePageAnchor":181,"sections":182,"docTitle":19,"url":187},"6. Configuring kernel parameters permanently by using RHEL system roles","configuring-kernel-parameters-permanently-by-using-the-kernel-settings-rhel-system-role_managing-monitoring-and-updating-the-kernel",[183],{"title":184,"visible":15,"weight":16,"urlFragment":181,"anchor":185,"singlePageAnchor":185,"docTitle":19,"url":186},"6.1. Applying selected kernel parameters by using the kernel_settings RHEL system role","applying-selected-kernel-parameters-using-the-kernel-settings-role_configuring-kernel-parameters-permanently-by-using-the-kernel-settings-rhel-system-role","#applying-selected-kernel-parameters-using-the-kernel-settings-role_configuring-kernel-parameters-permanently-by-using-the-kernel-settings-rhel-system-role","#configuring-kernel-parameters-permanently-by-using-the-kernel-settings-rhel-system-role_managing-monitoring-and-updating-the-kernel",{"title":189,"visible":15,"weight":107,"urlFragment":190,"anchor":18,"singlePageAnchor":190,"sections":191,"docTitle":19,"url":208},"7. Configuring the GRUB 2 boot loader by using RHEL system roles","configuring-the-grub-2-boot-loader-by-using-rhel-system-roles_managing-monitoring-and-updating-the-kernel",[192,196,200,204],{"title":193,"visible":15,"weight":16,"urlFragment":190,"anchor":194,"singlePageAnchor":194,"docTitle":19,"url":195},"7.1. Updating the existing boot loader entries by using the bootloader RHEL system role","updating-the-existing-boot-loader-entries-by-using-the-bootloader-rhel-system-role_configuring-the-grub-2-boot-loader-by-using-rhel-system-roles","#updating-the-existing-boot-loader-entries-by-using-the-bootloader-rhel-system-role_configuring-the-grub-2-boot-loader-by-using-rhel-system-roles",{"title":197,"visible":15,"weight":23,"urlFragment":190,"anchor":198,"singlePageAnchor":198,"docTitle":19,"url":199},"7.2. Securing the boot menu with password by using the bootloader RHEL system role","securing-the-boot-menu-with-password-by-using-the-bootloader-rhel-system-role_configuring-the-grub-2-boot-loader-by-using-rhel-system-roles","#securing-the-boot-menu-with-password-by-using-the-bootloader-rhel-system-role_configuring-the-grub-2-boot-loader-by-using-rhel-system-roles",{"title":201,"visible":15,"weight":28,"urlFragment":190,"anchor":202,"singlePageAnchor":202,"docTitle":19,"url":203},"7.3. Setting a timeout for the boot loader menu by using the bootloader RHEL system role","setting-a-timeout-for-the-boot-loader-menu-by-using-the-bootloader-rhel-system-role_configuring-the-grub-2-boot-loader-by-using-rhel-system-roles","#setting-a-timeout-for-the-boot-loader-menu-by-using-the-bootloader-rhel-system-role_configuring-the-grub-2-boot-loader-by-using-rhel-system-roles",{"title":205,"visible":15,"weight":45,"urlFragment":190,"anchor":206,"singlePageAnchor":206,"docTitle":19,"url":207},"7.4. Collecting the boot loader configuration information by using the bootloader RHEL system role","collecting-the-boot-loader-configuration-information-by-using-the-bootloader-rhel-system-role_configuring-the-grub-2-boot-loader-by-using-rhel-system-roles","#collecting-the-boot-loader-configuration-information-by-using-the-bootloader-rhel-system-role_configuring-the-grub-2-boot-loader-by-using-rhel-system-roles","#configuring-the-grub-2-boot-loader-by-using-rhel-system-roles_managing-monitoring-and-updating-the-kernel",{"title":210,"visible":15,"weight":112,"urlFragment":211,"anchor":18,"singlePageAnchor":211,"sections":212,"docTitle":19,"url":257},"8. Applying patches with kernel live patching","applying-patches-with-kernel-live-patching_managing-monitoring-and-updating-the-kernel",[213,217,221,225,229,233,237,241,245,249,253],{"title":214,"visible":15,"weight":16,"urlFragment":211,"anchor":215,"singlePageAnchor":215,"docTitle":19,"url":216},"8.1. Limitations of kpatch","limitations-of-kpatch_applying-patches-with-kernel-live-patching","#limitations-of-kpatch_applying-patches-with-kernel-live-patching",{"title":218,"visible":15,"weight":23,"urlFragment":211,"anchor":219,"singlePageAnchor":219,"docTitle":19,"url":220},"8.2. Support for third-party live patching","support-for-third-party-live-patching_applying-patches-with-kernel-live-patching","#support-for-third-party-live-patching_applying-patches-with-kernel-live-patching",{"title":222,"visible":15,"weight":28,"urlFragment":211,"anchor":223,"singlePageAnchor":223,"docTitle":19,"url":224},"8.3. Access to kernel live patches","access-to-kernel-live-patches_applying-patches-with-kernel-live-patching","#access-to-kernel-live-patches_applying-patches-with-kernel-live-patching",{"title":226,"visible":15,"weight":45,"urlFragment":211,"anchor":227,"singlePageAnchor":227,"docTitle":19,"url":228},"8.4. The process of live patching kernels","the-process-of-live-patching-kernels_applying-patches-with-kernel-live-patching","#the-process-of-live-patching-kernels_applying-patches-with-kernel-live-patching",{"title":230,"visible":15,"weight":50,"urlFragment":211,"anchor":231,"singlePageAnchor":231,"docTitle":19,"url":232},"8.5. Subscribing the currently installed kernels to the live patching stream","subscribing-the-currently-installed-kernels-to-the-live-patching-stream_applying-patches-with-kernel-live-patching","#subscribing-the-currently-installed-kernels-to-the-live-patching-stream_applying-patches-with-kernel-live-patching",{"title":234,"visible":15,"weight":55,"urlFragment":211,"anchor":235,"singlePageAnchor":235,"docTitle":19,"url":236},"8.6. Automatically subscribing any future kernel to the live patching stream","automatically-subscribing-any-future-kernel-to-the-live-patching-stream_applying-patches-with-kernel-live-patching","#automatically-subscribing-any-future-kernel-to-the-live-patching-stream_applying-patches-with-kernel-live-patching",{"title":238,"visible":15,"weight":60,"urlFragment":211,"anchor":239,"singlePageAnchor":239,"docTitle":19,"url":240},"8.7. Disabling automatic subscription to the live patching stream","proc_disabling-automatic-subscription-to-the-live-patching-stream_applying-patches-with-kernel-live-patching","#proc_disabling-automatic-subscription-to-the-live-patching-stream_applying-patches-with-kernel-live-patching",{"title":242,"visible":15,"weight":102,"urlFragment":211,"anchor":243,"singlePageAnchor":243,"docTitle":19,"url":244},"8.8. Updating kernel patch modules","updating-kernel-patch-modules_applying-patches-with-kernel-live-patching","#updating-kernel-patch-modules_applying-patches-with-kernel-live-patching",{"title":246,"visible":15,"weight":107,"urlFragment":211,"anchor":247,"singlePageAnchor":247,"docTitle":19,"url":248},"8.9. Removing the live patching package","removing-the-live-patching-package_applying-patches-with-kernel-live-patching","#removing-the-live-patching-package_applying-patches-with-kernel-live-patching",{"title":250,"visible":15,"weight":112,"urlFragment":211,"anchor":251,"singlePageAnchor":251,"docTitle":19,"url":252},"8.10. Uninstalling the kernel patch module","uninstalling-the-kernel-patch-module_applying-patches-with-kernel-live-patching","#uninstalling-the-kernel-patch-module_applying-patches-with-kernel-live-patching",{"title":254,"visible":15,"weight":117,"urlFragment":211,"anchor":255,"singlePageAnchor":255,"docTitle":19,"url":256},"8.11. Disabling kpatch.service","disabling-kpatch-service_applying-patches-with-kernel-live-patching","#disabling-kpatch-service_applying-patches-with-kernel-live-patching","#applying-patches-with-kernel-live-patching_managing-monitoring-and-updating-the-kernel",{"title":259,"visible":15,"weight":117,"urlFragment":260,"anchor":18,"singlePageAnchor":260,"sections":261,"docTitle":19,"url":274},"9. Keeping kernel panic parameters disabled in virtualized environments","keeping-kernel-panic-parameters-disabled-in-virtualized-environments_managing-monitoring-and-updating-the-kernel",[262,266,270],{"title":263,"visible":15,"weight":16,"urlFragment":260,"anchor":264,"singlePageAnchor":264,"docTitle":19,"url":265},"9.1. What is a soft lockup","what-is-a-soft-lockup_keeping-kernel-panic-parameters-disabled-in-virtualized-environments","#what-is-a-soft-lockup_keeping-kernel-panic-parameters-disabled-in-virtualized-environments",{"title":267,"visible":15,"weight":23,"urlFragment":260,"anchor":268,"singlePageAnchor":268,"docTitle":19,"url":269},"9.2. Parameters controlling kernel panic","parameters-controlling-kernel-panic_keeping-kernel-panic-parameters-disabled-in-virtualized-environments","#parameters-controlling-kernel-panic_keeping-kernel-panic-parameters-disabled-in-virtualized-environments",{"title":271,"visible":15,"weight":28,"urlFragment":260,"anchor":272,"singlePageAnchor":272,"docTitle":19,"url":273},"9.3. Spurious soft lockups in virtualized environments","spurious-soft-lockups-in-virtualized-environments_keeping-kernel-panic-parameters-disabled-in-virtualized-environments","#spurious-soft-lockups-in-virtualized-environments_keeping-kernel-panic-parameters-disabled-in-virtualized-environments","#keeping-kernel-panic-parameters-disabled-in-virtualized-environments_managing-monitoring-and-updating-the-kernel",{"title":276,"visible":15,"weight":277,"urlFragment":278,"anchor":18,"singlePageAnchor":278,"sections":279,"docTitle":19,"url":288},"10. Adjusting kernel parameters for database servers",12,"adjusting-kernel-parameters-for-database-servers_managing-monitoring-and-updating-the-kernel",[280,284],{"title":281,"visible":15,"weight":16,"urlFragment":278,"anchor":282,"singlePageAnchor":282,"docTitle":19,"url":283},"10.1. Introduction to database servers","introduction-to-databases_adjusting-kernel-parameters-for-database-servers","#introduction-to-databases_adjusting-kernel-parameters-for-database-servers",{"title":285,"visible":15,"weight":23,"urlFragment":278,"anchor":286,"singlePageAnchor":286,"docTitle":19,"url":287},"10.2. Parameters affecting performance of database applications","parameters-affecting-performance-of-database-applications_adjusting-kernel-parameters-for-database-servers","#parameters-affecting-performance-of-database-applications_adjusting-kernel-parameters-for-database-servers","#adjusting-kernel-parameters-for-database-servers_managing-monitoring-and-updating-the-kernel",{"title":290,"visible":15,"weight":291,"urlFragment":292,"anchor":18,"singlePageAnchor":292,"sections":293,"docTitle":19,"url":302},"11. Getting started with kernel logging",13,"getting-started-with-kernel-logging_managing-monitoring-and-updating-the-kernel",[294,298],{"title":295,"visible":15,"weight":16,"urlFragment":292,"anchor":296,"singlePageAnchor":296,"docTitle":19,"url":297},"11.1. What is the kernel ring buffer","what-is-the-kernel-ring-buffer_getting-started-with-kernel-logging","#what-is-the-kernel-ring-buffer_getting-started-with-kernel-logging",{"title":299,"visible":15,"weight":23,"urlFragment":292,"anchor":300,"singlePageAnchor":300,"docTitle":19,"url":301},"11.2. Role of printk on log-levels and kernel logging","role-of-printk-on-log-levels-and-kernel-logging_getting-started-with-kernel-logging","#role-of-printk-on-log-levels-and-kernel-logging_getting-started-with-kernel-logging","#getting-started-with-kernel-logging_managing-monitoring-and-updating-the-kernel",{"title":304,"visible":15,"weight":305,"urlFragment":306,"anchor":18,"singlePageAnchor":306,"sections":307,"docTitle":19,"url":324},"12. Reinstalling GRUB",14,"assembly_reinstalling-grub_managing-monitoring-and-updating-the-kernel",[308,312,316,320],{"title":309,"visible":15,"weight":16,"urlFragment":306,"anchor":310,"singlePageAnchor":310,"docTitle":19,"url":311},"12.1. Reinstalling GRUB on BIOS-based machines","proc_reinstalling-grub-on-bios-based-machines_assembly_reinstalling-grub","#proc_reinstalling-grub-on-bios-based-machines_assembly_reinstalling-grub",{"title":313,"visible":15,"weight":23,"urlFragment":306,"anchor":314,"singlePageAnchor":314,"docTitle":19,"url":315},"12.2. Reinstalling GRUB on UEFI-based machines","proc_reinstalling-grub-on-uefi-based-machines_assembly_reinstalling-grub","#proc_reinstalling-grub-on-uefi-based-machines_assembly_reinstalling-grub",{"title":317,"visible":15,"weight":28,"urlFragment":306,"anchor":318,"singlePageAnchor":318,"docTitle":19,"url":319},"12.3. Reinstalling GRUB on IBM Power machines","reinstalling-grub-on-ibm-power-machines_assembly_reinstalling-grub","#reinstalling-grub-on-ibm-power-machines_assembly_reinstalling-grub",{"title":321,"visible":15,"weight":45,"urlFragment":306,"anchor":322,"singlePageAnchor":322,"docTitle":19,"url":323},"12.4. Resetting GRUB","proc_resetting-grub_assembly_reinstalling-grub","#proc_resetting-grub_assembly_reinstalling-grub","#assembly_reinstalling-grub_managing-monitoring-and-updating-the-kernel",{"title":326,"visible":15,"weight":327,"urlFragment":328,"anchor":18,"singlePageAnchor":328,"sections":329,"docTitle":19,"url":338},"13. Installing kdump",15,"installing-kdump_managing-monitoring-and-updating-the-kernel",[330,334],{"title":331,"visible":15,"weight":16,"urlFragment":328,"anchor":332,"singlePageAnchor":332,"docTitle":19,"url":333},"13.1. What is kdump","what-is-kdumpinstalling-kdump","#what-is-kdumpinstalling-kdump",{"title":335,"visible":15,"weight":23,"urlFragment":328,"anchor":336,"singlePageAnchor":336,"docTitle":19,"url":337},"13.2. Installing kdump using Anaconda","installing-kdump-anacondainstalling-kdump","#installing-kdump-anacondainstalling-kdump","#installing-kdump_managing-monitoring-and-updating-the-kernel",{"title":340,"visible":15,"weight":341,"urlFragment":342,"anchor":18,"singlePageAnchor":342,"sections":343,"docTitle":19,"url":388},"14. Configuring kdump on the command line",16,"configuring-kdump-on-the-command-line_managing-monitoring-and-updating-the-kernel",[344,348,352,356,360,364,368,372,376,380,384],{"title":345,"visible":15,"weight":16,"urlFragment":342,"anchor":346,"singlePageAnchor":346,"docTitle":19,"url":347},"14.1. Estimating the kdump size","estimating-the-kdump-size_configuring-kdump-on-the-command-line","#estimating-the-kdump-size_configuring-kdump-on-the-command-line",{"title":349,"visible":15,"weight":23,"urlFragment":342,"anchor":350,"singlePageAnchor":350,"docTitle":19,"url":351},"14.2. Configuring kdump memory usage on RHEL 9","configuring-kdump-memory-usage-on-rhel-9_configuring-kdump-on-the-command-line","#configuring-kdump-memory-usage-on-rhel-9_configuring-kdump-on-the-command-line",{"title":353,"visible":15,"weight":28,"urlFragment":342,"anchor":354,"singlePageAnchor":354,"docTitle":19,"url":355},"14.3. Configuring the kdump target","configuring-the-kdump-target_configuring-kdump-on-the-command-line","#configuring-the-kdump-target_configuring-kdump-on-the-command-line",{"title":357,"visible":15,"weight":45,"urlFragment":342,"anchor":358,"singlePageAnchor":358,"docTitle":19,"url":359},"14.4. Configuring the kdump core collector","configuring-the-kdump-core-collectorconfiguring-kdump-on-the-command-line","#configuring-the-kdump-core-collectorconfiguring-kdump-on-the-command-line",{"title":361,"visible":15,"weight":50,"urlFragment":342,"anchor":362,"singlePageAnchor":362,"docTitle":19,"url":363},"14.5. Configuring the kdump default failure responses","configuring-the-kdump-default-failure-responses_configuring-kdump-on-the-command-line","#configuring-the-kdump-default-failure-responses_configuring-kdump-on-the-command-line",{"title":365,"visible":15,"weight":55,"urlFragment":342,"anchor":366,"singlePageAnchor":366,"docTitle":19,"url":367},"14.6. Configuration file for kdump","configuration-file-for-kdump_configuring-kdump-on-the-command-line","#configuration-file-for-kdump_configuring-kdump-on-the-command-line",{"title":369,"visible":15,"weight":60,"urlFragment":342,"anchor":370,"singlePageAnchor":370,"docTitle":19,"url":371},"14.7. Testing the kdump configuration","testing-the-kdump-configuration_configuring-kdump-on-the-command-line","#testing-the-kdump-configuration_configuring-kdump-on-the-command-line",{"title":373,"visible":15,"weight":102,"urlFragment":342,"anchor":374,"singlePageAnchor":374,"docTitle":19,"url":375},"14.8. Files produced by kdump after system crash","files-produced-by-kdump-after-system-crash_configuring-kdump-on-the-command-line","#files-produced-by-kdump-after-system-crash_configuring-kdump-on-the-command-line",{"title":377,"visible":15,"weight":107,"urlFragment":342,"anchor":378,"singlePageAnchor":378,"docTitle":19,"url":379},"14.9. Enabling and disabling the kdump service","enabling-and-disabling-the-kdump-service_configuring-kdump-on-the-command-line","#enabling-and-disabling-the-kdump-service_configuring-kdump-on-the-command-line",{"title":381,"visible":15,"weight":112,"urlFragment":342,"anchor":382,"singlePageAnchor":382,"docTitle":19,"url":383},"14.10. Preventing kernel drivers from loading for kdump","preventing-kernel-drivers-from-loading-for-kdump_configuring-kdump-on-the-command-line","#preventing-kernel-drivers-from-loading-for-kdump_configuring-kdump-on-the-command-line",{"title":385,"visible":15,"weight":117,"urlFragment":342,"anchor":386,"singlePageAnchor":386,"docTitle":19,"url":387},"14.11. Running kdump on systems with encrypted disk","running-kdump-on-systems-with-encrypted-disk_configuring-kdump-on-the-command-line","#running-kdump-on-systems-with-encrypted-disk_configuring-kdump-on-the-command-line","#configuring-kdump-on-the-command-line_managing-monitoring-and-updating-the-kernel",{"title":390,"visible":15,"weight":391,"urlFragment":392,"anchor":18,"singlePageAnchor":392,"sections":393,"docTitle":19,"url":398},"15. Configuring kdump in the web console",17,"configuring-kdump-in-the-web-console_managing-monitoring-and-updating-the-kernel",[394],{"title":395,"visible":15,"weight":16,"urlFragment":392,"anchor":396,"singlePageAnchor":396,"docTitle":19,"url":397},"15.1. Configuring kdump memory usage and target location in web console","configuring-kdump-memory-usage-and-target-location-in-web-console_configuring-kdump-in-the-web-console","#configuring-kdump-memory-usage-and-target-location-in-web-console_configuring-kdump-in-the-web-console","#configuring-kdump-in-the-web-console_managing-monitoring-and-updating-the-kernel",{"title":400,"visible":15,"weight":401,"urlFragment":402,"anchor":18,"singlePageAnchor":402,"sections":403,"docTitle":19,"url":416},"16. Enabling kdump",18,"enabling-kdumpmanaging-monitoring-and-updating-the-kernel",[404,408,412],{"title":405,"visible":15,"weight":16,"urlFragment":402,"anchor":406,"singlePageAnchor":406,"docTitle":19,"url":407},"16.1. Enabling kdump for all installed kernels","enabling-kdump-for-all-installed-kernels_enabling-kdump","#enabling-kdump-for-all-installed-kernels_enabling-kdump",{"title":409,"visible":15,"weight":23,"urlFragment":402,"anchor":410,"singlePageAnchor":410,"docTitle":19,"url":411},"16.2. Enabling kdump for a specific installed kernel","enabling-kdump-for-a-specific-installed-kernel_enabling-kdump","#enabling-kdump-for-a-specific-installed-kernel_enabling-kdump",{"title":413,"visible":15,"weight":28,"urlFragment":402,"anchor":414,"singlePageAnchor":414,"docTitle":19,"url":415},"16.3. Disabling the kdump service","disabling-the-kdump-service_enabling-kdump","#disabling-the-kdump-service_enabling-kdump","#enabling-kdumpmanaging-monitoring-and-updating-the-kernel",{"title":418,"visible":15,"weight":419,"urlFragment":420,"anchor":18,"singlePageAnchor":420,"sections":421,"docTitle":19,"url":450},"17. Supported kdump configurations and targets",19,"supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel",[422,426,430,434,438,442,446],{"title":423,"visible":15,"weight":16,"urlFragment":420,"anchor":424,"singlePageAnchor":424,"docTitle":19,"url":425},"17.1. Memory requirements for kdump","memory-requirements-for-kdump_supported-kdump-configurations-and-targets","#memory-requirements-for-kdump_supported-kdump-configurations-and-targets",{"title":427,"visible":15,"weight":23,"urlFragment":420,"anchor":428,"singlePageAnchor":428,"docTitle":19,"url":429},"17.2. Minimum threshold for automatic memory reservation","minimum-threshold-for-automatic-memory-reservation_supported-kdump-configurations-and-targets","#minimum-threshold-for-automatic-memory-reservation_supported-kdump-configurations-and-targets",{"title":431,"visible":15,"weight":28,"urlFragment":420,"anchor":432,"singlePageAnchor":432,"docTitle":19,"url":433},"17.3. Supported kdump targets","supported-kdump-targets_supported-kdump-configurations-and-targets","#supported-kdump-targets_supported-kdump-configurations-and-targets",{"title":435,"visible":15,"weight":45,"urlFragment":420,"anchor":436,"singlePageAnchor":436,"docTitle":19,"url":437},"17.4. Supported kdump filtering levels","supported-kdump-filtering-levels_supported-kdump-configurations-and-targets","#supported-kdump-filtering-levels_supported-kdump-configurations-and-targets",{"title":439,"visible":15,"weight":50,"urlFragment":420,"anchor":440,"singlePageAnchor":440,"docTitle":19,"url":441},"17.5. Supported default failure responses","supported-default-failure-responses_supported-kdump-configurations-and-targets","#supported-default-failure-responses_supported-kdump-configurations-and-targets",{"title":443,"visible":15,"weight":55,"urlFragment":420,"anchor":444,"singlePageAnchor":444,"docTitle":19,"url":445},"17.6. Using final_action parameter","using-final_action-parameter_supported-kdump-configurations-and-targets","#using-final_action-parameter_supported-kdump-configurations-and-targets",{"title":447,"visible":15,"weight":60,"urlFragment":420,"anchor":448,"singlePageAnchor":448,"docTitle":19,"url":449},"17.7. Using failure_action parameter","proc_using-failure_action-parameter_supported-kdump-configurations-and-targets","#proc_using-failure_action-parameter_supported-kdump-configurations-and-targets","#supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel",{"title":452,"visible":15,"weight":453,"urlFragment":454,"anchor":18,"singlePageAnchor":454,"sections":455,"docTitle":19,"url":472},"18. Firmware assisted dump mechanisms",20,"firmware-assisted-dump-mechanisms_managing-monitoring-and-updating-the-kernel",[456,460,464,468],{"title":457,"visible":15,"weight":16,"urlFragment":454,"anchor":458,"singlePageAnchor":458,"docTitle":19,"url":459},"18.1. Firmware assisted dump on IBM PowerPC hardware","firmware-assisted-dump-on-ibm-powerpc-hardware_firmware-assisted-dump-mechanisms","#firmware-assisted-dump-on-ibm-powerpc-hardware_firmware-assisted-dump-mechanisms",{"title":461,"visible":15,"weight":23,"urlFragment":454,"anchor":462,"singlePageAnchor":462,"docTitle":19,"url":463},"18.2. Enabling firmware assisted dump mechanism","enabling-firmware-assisted-dump-mechanism_firmware-assisted-dump-mechanisms","#enabling-firmware-assisted-dump-mechanism_firmware-assisted-dump-mechanisms",{"title":465,"visible":15,"weight":28,"urlFragment":454,"anchor":466,"singlePageAnchor":466,"docTitle":19,"url":467},"18.3. Firmware assisted dump mechanisms on IBM Z hardware","firmware-assisted-dump-mechanisms-on-ibm-z-hardware_firmware-assisted-dump-mechanisms","#firmware-assisted-dump-mechanisms-on-ibm-z-hardware_firmware-assisted-dump-mechanisms",{"title":469,"visible":15,"weight":45,"urlFragment":454,"anchor":470,"singlePageAnchor":470,"docTitle":19,"url":471},"18.4. Using sadump on Fujitsu PRIMEQUEST systems","using-sadump-on-fujitsu-primequest-systems_firmware-assisted-dump-mechanisms","#using-sadump-on-fujitsu-primequest-systems_firmware-assisted-dump-mechanisms","#firmware-assisted-dump-mechanisms_managing-monitoring-and-updating-the-kernel",{"title":474,"visible":15,"weight":475,"urlFragment":476,"anchor":18,"singlePageAnchor":476,"sections":477,"docTitle":19,"url":498},"19. Analyzing a core dump",21,"analyzing-a-core-dump_managing-monitoring-and-updating-the-kernel",[478,482,486,490,494],{"title":479,"visible":15,"weight":16,"urlFragment":476,"anchor":480,"singlePageAnchor":480,"docTitle":19,"url":481},"19.1. Installing the crash utility","installing-the-crash-utility_analyzing-a-core-dump","#installing-the-crash-utility_analyzing-a-core-dump",{"title":483,"visible":15,"weight":23,"urlFragment":476,"anchor":484,"singlePageAnchor":484,"docTitle":19,"url":485},"19.2. Running and exiting the crash utility","running-and-exiting-the-crash-utility_analyzing-a-core-dump","#running-and-exiting-the-crash-utility_analyzing-a-core-dump",{"title":487,"visible":15,"weight":28,"urlFragment":476,"anchor":488,"singlePageAnchor":488,"docTitle":19,"url":489},"19.3. Displaying various indicators in the crash utility","displaying-various-indicators-in-the-crash-utility_analyzing-a-core-dump","#displaying-various-indicators-in-the-crash-utility_analyzing-a-core-dump",{"title":491,"visible":15,"weight":45,"urlFragment":476,"anchor":492,"singlePageAnchor":492,"docTitle":19,"url":493},"19.4. Using Kernel Oops Analyzer","using-kernel-oops-analyzer_analyzing-a-core-dump","#using-kernel-oops-analyzer_analyzing-a-core-dump",{"title":495,"visible":15,"weight":50,"urlFragment":476,"anchor":496,"singlePageAnchor":496,"docTitle":19,"url":497},"19.5. The Kdump Helper tool","the-kdump-helper-tool_analyzing-a-core-dump","#the-kdump-helper-tool_analyzing-a-core-dump","#analyzing-a-core-dump_managing-monitoring-and-updating-the-kernel",{"title":500,"visible":15,"weight":501,"urlFragment":502,"anchor":18,"singlePageAnchor":502,"sections":503,"docTitle":19,"url":508},"20. Using early kdump to capture boot time crashes",22,"using-early-kdump-to-capture-boot-time-crashes_managing-monitoring-and-updating-the-kernel",[504],{"title":505,"visible":15,"weight":16,"urlFragment":502,"anchor":506,"singlePageAnchor":506,"docTitle":19,"url":507},"20.1. Enabling early kdump","enabling-early-kdump_using-early-kdump-to-capture-boot-time-crashes","#enabling-early-kdump_using-early-kdump-to-capture-boot-time-crashes","#using-early-kdump-to-capture-boot-time-crashes_managing-monitoring-and-updating-the-kernel",{"title":510,"visible":15,"weight":511,"urlFragment":512,"anchor":18,"singlePageAnchor":512,"sections":513,"docTitle":19,"url":562},"21. Signing a kernel and modules for Secure Boot",23,"signing-a-kernel-and-modules-for-secure-boot_managing-monitoring-and-updating-the-kernel",[514,518,522,526,530,534,538,542,546,550,554,558],{"title":515,"visible":15,"weight":16,"urlFragment":512,"anchor":516,"singlePageAnchor":516,"docTitle":19,"url":517},"21.1. Prerequisites","prerequisites","#prerequisites",{"title":519,"visible":15,"weight":23,"urlFragment":512,"anchor":520,"singlePageAnchor":520,"docTitle":19,"url":521},"21.2. What is UEFI Secure Boot","con_what-is-uefi-secure-boot_signing-a-kernel-and-modules-for-secure-boot","#con_what-is-uefi-secure-boot_signing-a-kernel-and-modules-for-secure-boot",{"title":523,"visible":15,"weight":28,"urlFragment":512,"anchor":524,"singlePageAnchor":524,"docTitle":19,"url":525},"21.3. UEFI Secure Boot support","con_uefi-secure-boot-support_signing-a-kernel-and-modules-for-secure-boot","#con_uefi-secure-boot-support_signing-a-kernel-and-modules-for-secure-boot",{"title":527,"visible":15,"weight":45,"urlFragment":512,"anchor":528,"singlePageAnchor":528,"docTitle":19,"url":529},"21.4. Requirements for authenticating kernel modules with X.509 keys","ref_requirements-for-authenticating-kernel-modules-with-x-509-keys_signing-a-kernel-and-modules-for-secure-boot","#ref_requirements-for-authenticating-kernel-modules-with-x-509-keys_signing-a-kernel-and-modules-for-secure-boot",{"title":531,"visible":15,"weight":50,"urlFragment":512,"anchor":532,"singlePageAnchor":532,"docTitle":19,"url":533},"21.5. Sources for public keys","sources-for-public-keys_signing-a-kernel-and-modules-for-secure-boot","#sources-for-public-keys_signing-a-kernel-and-modules-for-secure-boot",{"title":535,"visible":15,"weight":55,"urlFragment":512,"anchor":536,"singlePageAnchor":536,"docTitle":19,"url":537},"21.6. Generating a public and private key pair","generating-a-public-and-private-key-pair_signing-a-kernel-and-modules-for-secure-boot","#generating-a-public-and-private-key-pair_signing-a-kernel-and-modules-for-secure-boot",{"title":539,"visible":15,"weight":60,"urlFragment":512,"anchor":540,"singlePageAnchor":540,"docTitle":19,"url":541},"21.7. Example output of system keyrings","example-output-of-system-keyrings_signing-a-kernel-and-modules-for-secure-boot","#example-output-of-system-keyrings_signing-a-kernel-and-modules-for-secure-boot",{"title":543,"visible":15,"weight":102,"urlFragment":512,"anchor":544,"singlePageAnchor":544,"docTitle":19,"url":545},"21.8. Enrolling public key on target system by adding the public key to the MOK list","enrolling-public-key-on-target-system-by-adding-the-public-key-to-the-mok-list_signing-a-kernel-and-modules-for-secure-boot","#enrolling-public-key-on-target-system-by-adding-the-public-key-to-the-mok-list_signing-a-kernel-and-modules-for-secure-boot",{"title":547,"visible":15,"weight":107,"urlFragment":512,"anchor":548,"singlePageAnchor":548,"docTitle":19,"url":549},"21.9. Signing a kernel with the private key","signing-a-kernel-with-the-private-key_signing-a-kernel-and-modules-for-secure-boot","#signing-a-kernel-with-the-private-key_signing-a-kernel-and-modules-for-secure-boot",{"title":551,"visible":15,"weight":112,"urlFragment":512,"anchor":552,"singlePageAnchor":552,"docTitle":19,"url":553},"21.10. Signing a GRUB build with the private key","signing-a-grub-build-with-the-private-key_signing-a-kernel-and-modules-for-secure-boot","#signing-a-grub-build-with-the-private-key_signing-a-kernel-and-modules-for-secure-boot",{"title":555,"visible":15,"weight":117,"urlFragment":512,"anchor":556,"singlePageAnchor":556,"docTitle":19,"url":557},"21.11. Signing kernel modules with the private key","signing-kernel-modules-with-the-private-key_signing-a-kernel-and-modules-for-secure-boot","#signing-kernel-modules-with-the-private-key_signing-a-kernel-and-modules-for-secure-boot",{"title":559,"visible":15,"weight":277,"urlFragment":512,"anchor":560,"singlePageAnchor":560,"docTitle":19,"url":561},"21.12. Loading signed kernel modules","loading-signed-kernel-modules_signing-a-kernel-and-modules-for-secure-boot","#loading-signed-kernel-modules_signing-a-kernel-and-modules-for-secure-boot","#signing-a-kernel-and-modules-for-secure-boot_managing-monitoring-and-updating-the-kernel",{"title":564,"visible":15,"weight":565,"urlFragment":566,"anchor":18,"singlePageAnchor":566,"sections":567,"docTitle":19,"url":584},"22. Updating the Secure Boot Revocation List",24,"updating-the-secure-boot-revocation-list_managing-monitoring-and-updating-the-kernel",[568,572,576,580],{"title":569,"visible":15,"weight":16,"urlFragment":566,"anchor":570,"singlePageAnchor":570,"docTitle":19,"url":571},"22.1. What is UEFI Secure Boot","con_what-is-uefi-secure-boot_updating-the-secure-boot-revocation-list","#con_what-is-uefi-secure-boot_updating-the-secure-boot-revocation-list",{"title":573,"visible":15,"weight":23,"urlFragment":566,"anchor":574,"singlePageAnchor":574,"docTitle":19,"url":575},"22.2. The Secure Boot Revocation List","the-secure-boot-revocation-list_updating-the-secure-boot-revocation-list","#the-secure-boot-revocation-list_updating-the-secure-boot-revocation-list",{"title":577,"visible":15,"weight":28,"urlFragment":566,"anchor":578,"singlePageAnchor":578,"docTitle":19,"url":579},"22.3. Applying an online Revocation List update","applying-an-online-revocation-list-update_updating-the-secure-boot-revocation-list","#applying-an-online-revocation-list-update_updating-the-secure-boot-revocation-list",{"title":581,"visible":15,"weight":45,"urlFragment":566,"anchor":582,"singlePageAnchor":582,"docTitle":19,"url":583},"22.4. Applying an offline Revocation List update","applying-an-offline-revocation-list-update_updating-the-secure-boot-revocation-list","#applying-an-offline-revocation-list-update_updating-the-secure-boot-revocation-list","#updating-the-secure-boot-revocation-list_managing-monitoring-and-updating-the-kernel",{"title":586,"visible":15,"weight":587,"urlFragment":588,"anchor":18,"singlePageAnchor":588,"sections":589,"docTitle":19,"url":630},"23. Enhancing security with the kernel integrity subsystem",25,"enhancing-security-with-the-kernel-integrity-subsystem_managing-monitoring-and-updating-the-kernel",[590,594,598,602,606,610,614,618,622,626],{"title":591,"visible":15,"weight":16,"urlFragment":588,"anchor":592,"singlePageAnchor":592,"docTitle":19,"url":593},"23.1. The kernel integrity subsystem","the-kernel-integrity-subsystem_enhancing-security-with-the-kernel-integrity-subsystem","#the-kernel-integrity-subsystem_enhancing-security-with-the-kernel-integrity-subsystem",{"title":595,"visible":15,"weight":23,"urlFragment":588,"anchor":596,"singlePageAnchor":596,"docTitle":19,"url":597},"23.2. Trusted and encrypted keys","trusted-and-encrypted-keys_enhancing-security-with-the-kernel-integrity-subsystem","#trusted-and-encrypted-keys_enhancing-security-with-the-kernel-integrity-subsystem",{"title":599,"visible":15,"weight":28,"urlFragment":588,"anchor":600,"singlePageAnchor":600,"docTitle":19,"url":601},"23.3. Working with trusted keys","working-with-trusted-keys_enhancing-security-with-the-kernel-integrity-subsystem","#working-with-trusted-keys_enhancing-security-with-the-kernel-integrity-subsystem",{"title":603,"visible":15,"weight":45,"urlFragment":588,"anchor":604,"singlePageAnchor":604,"docTitle":19,"url":605},"23.4. Working with encrypted keys","working-with-encrypted-keys_enhancing-security-with-the-kernel-integrity-subsystem","#working-with-encrypted-keys_enhancing-security-with-the-kernel-integrity-subsystem",{"title":607,"visible":15,"weight":50,"urlFragment":588,"anchor":608,"singlePageAnchor":608,"docTitle":19,"url":609},"23.5. Enabling IMA and EVM","enabling-integrity-measurement-architecture-and-extended-verification-module_enhancing-security-with-the-kernel-integrity-subsystem","#enabling-integrity-measurement-architecture-and-extended-verification-module_enhancing-security-with-the-kernel-integrity-subsystem",{"title":611,"visible":15,"weight":55,"urlFragment":588,"anchor":612,"singlePageAnchor":612,"docTitle":19,"url":613},"23.6. Collecting file hashes with integrity measurement architecture","collecting-file-hashes-with-integrity-measurement-architecture_enhancing-security-with-the-kernel-integrity-subsystem","#collecting-file-hashes-with-integrity-measurement-architecture_enhancing-security-with-the-kernel-integrity-subsystem",{"title":615,"visible":15,"weight":60,"urlFragment":588,"anchor":616,"singlePageAnchor":616,"docTitle":19,"url":617},"23.7. Adding IMA signatures to package files","adding-ima-signatures-to-package-files_enhancing-security-with-the-kernel-integrity-subsystem","#adding-ima-signatures-to-package-files_enhancing-security-with-the-kernel-integrity-subsystem",{"title":619,"visible":15,"weight":102,"urlFragment":588,"anchor":620,"singlePageAnchor":620,"docTitle":19,"url":621},"23.8. Enabling kernel runtime integrity monitoring","enabling-kernel-runtime-integrity-monitoring_enhancing-security-with-the-kernel-integrity-subsystem","#enabling-kernel-runtime-integrity-monitoring_enhancing-security-with-the-kernel-integrity-subsystem",{"title":623,"visible":15,"weight":107,"urlFragment":588,"anchor":624,"singlePageAnchor":624,"docTitle":19,"url":625},"23.9. Creating custom IMA keys using OpenSSL","creating-custom-ima-keys-using-openssl_enhancing-security-with-the-kernel-integrity-subsystem","#creating-custom-ima-keys-using-openssl_enhancing-security-with-the-kernel-integrity-subsystem",{"title":627,"visible":15,"weight":112,"urlFragment":588,"anchor":628,"singlePageAnchor":628,"docTitle":19,"url":629},"23.10. Deploying a custom signed IMA policy for UEFI systems","deploying-a-custom-signed-ima-policy-for-uefi-systems_enhancing-security-with-the-kernel-integrity-subsystem","#deploying-a-custom-signed-ima-policy-for-uefi-systems_enhancing-security-with-the-kernel-integrity-subsystem","#enhancing-security-with-the-kernel-integrity-subsystem_managing-monitoring-and-updating-the-kernel",{"title":632,"visible":15,"weight":633,"urlFragment":634,"anchor":18,"singlePageAnchor":634,"sections":635,"docTitle":19,"url":696},"24. Using systemd to manage resources used by applications",26,"assembly_using-systemd-to-manage-resources-used-by-applications_managing-monitoring-and-updating-the-kernel",[636,640,644,648,652,656,660,664,668,672,676,680,684,688,692],{"title":637,"visible":15,"weight":16,"urlFragment":634,"anchor":638,"singlePageAnchor":638,"docTitle":19,"url":639},"24.1. Role of systemd in resource management","con_role-of-systemd-in-resource-management_assembly_using-systemd-to-manage-resources-used-by-applications","#con_role-of-systemd-in-resource-management_assembly_using-systemd-to-manage-resources-used-by-applications",{"title":641,"visible":15,"weight":23,"urlFragment":634,"anchor":642,"singlePageAnchor":642,"docTitle":19,"url":643},"24.2. Distribution models of system sources","distribution-models-of-system-sources_assembly_using-systemd-to-manage-resources-used-by-applications","#distribution-models-of-system-sources_assembly_using-systemd-to-manage-resources-used-by-applications",{"title":645,"visible":15,"weight":28,"urlFragment":634,"anchor":646,"singlePageAnchor":646,"docTitle":19,"url":647},"24.3. Allocating system resources using systemd","proc_allocating-system-resources-using-systemd_assembly_using-systemd-to-manage-resources-used-by-applications","#proc_allocating-system-resources-using-systemd_assembly_using-systemd-to-manage-resources-used-by-applications",{"title":649,"visible":15,"weight":45,"urlFragment":634,"anchor":650,"singlePageAnchor":650,"docTitle":19,"url":651},"24.4. Overview of systemd hierarchy for cgroups","con_overview-of-systemd-hierarchy-for-cgroups_assembly_using-systemd-to-manage-resources-used-by-applications","#con_overview-of-systemd-hierarchy-for-cgroups_assembly_using-systemd-to-manage-resources-used-by-applications",{"title":653,"visible":15,"weight":50,"urlFragment":634,"anchor":654,"singlePageAnchor":654,"docTitle":19,"url":655},"24.5. Listing systemd units","listing-systemd_units_assembly_using-systemd-to-manage-resources-used-by-applications","#listing-systemd_units_assembly_using-systemd-to-manage-resources-used-by-applications",{"title":657,"visible":15,"weight":55,"urlFragment":634,"anchor":658,"singlePageAnchor":658,"docTitle":19,"url":659},"24.6. Viewing systemd cgroups hierarchy","viewing-systemd-control-group-hierarchy_assembly_using-systemd-to-manage-resources-used-by-applications","#viewing-systemd-control-group-hierarchy_assembly_using-systemd-to-manage-resources-used-by-applications",{"title":661,"visible":15,"weight":60,"urlFragment":634,"anchor":662,"singlePageAnchor":662,"docTitle":19,"url":663},"24.7. Viewing cgroups of processes","proc_viewing-cgroups-of-processes_assembly_using-systemd-to-manage-resources-used-by-applications","#proc_viewing-cgroups-of-processes_assembly_using-systemd-to-manage-resources-used-by-applications",{"title":665,"visible":15,"weight":102,"urlFragment":634,"anchor":666,"singlePageAnchor":666,"docTitle":19,"url":667},"24.8. Monitoring resource consumption","monitoring-resource-consumption_assembly_using-systemd-to-manage-resources-used-by-applications","#monitoring-resource-consumption_assembly_using-systemd-to-manage-resources-used-by-applications",{"title":669,"visible":15,"weight":107,"urlFragment":634,"anchor":670,"singlePageAnchor":670,"docTitle":19,"url":671},"24.9. Using systemd unit files to set limits for applications","proc_using-systemd-unit-files-to-set-limits-for-applications_assembly_using-systemd-to-manage-resources-used-by-applications","#proc_using-systemd-unit-files-to-set-limits-for-applications_assembly_using-systemd-to-manage-resources-used-by-applications",{"title":673,"visible":15,"weight":112,"urlFragment":634,"anchor":674,"singlePageAnchor":674,"docTitle":19,"url":675},"24.10. Using systemctl command to set limits to applications","proc_using-systemctl-command-to-set-limits-to-applications_assembly_using-systemd-to-manage-resources-used-by-applications","#proc_using-systemctl-command-to-set-limits-to-applications_assembly_using-systemd-to-manage-resources-used-by-applications",{"title":677,"visible":15,"weight":117,"urlFragment":634,"anchor":678,"singlePageAnchor":678,"docTitle":19,"url":679},"24.11. Setting global default CPU affinity through manager configuration","proc_setting-global-default-cpu-affinity-through-manager-configuration_assembly_using-systemd-to-manage-resources-used-by-applications","#proc_setting-global-default-cpu-affinity-through-manager-configuration_assembly_using-systemd-to-manage-resources-used-by-applications",{"title":681,"visible":15,"weight":277,"urlFragment":634,"anchor":682,"singlePageAnchor":682,"docTitle":19,"url":683},"24.12. Configuring NUMA policies using systemd","proc_configuring-numa-using-systemd_assembly_using-systemd-to-manage-resources-used-by-applications","#proc_configuring-numa-using-systemd_assembly_using-systemd-to-manage-resources-used-by-applications",{"title":685,"visible":15,"weight":291,"urlFragment":634,"anchor":686,"singlePageAnchor":686,"docTitle":19,"url":687},"24.13. NUMA policy configuration options for systemd","ref_numa-policy-configuration-options-with-systemd_assembly_using-systemd-to-manage-resources-used-by-applications","#ref_numa-policy-configuration-options-with-systemd_assembly_using-systemd-to-manage-resources-used-by-applications",{"title":689,"visible":15,"weight":305,"urlFragment":634,"anchor":690,"singlePageAnchor":690,"docTitle":19,"url":691},"24.14. Creating transient cgroups using systemd-run command","creating-transient-control-groups_assembly_using-systemd-to-manage-resources-used-by-applications","#creating-transient-control-groups_assembly_using-systemd-to-manage-resources-used-by-applications",{"title":693,"visible":15,"weight":327,"urlFragment":634,"anchor":694,"singlePageAnchor":694,"docTitle":19,"url":695},"24.15. Removing transient control groups","removing-transient-control-groups_assembly_using-systemd-to-manage-resources-used-by-applications","#removing-transient-control-groups_assembly_using-systemd-to-manage-resources-used-by-applications","#assembly_using-systemd-to-manage-resources-used-by-applications_managing-monitoring-and-updating-the-kernel",{"title":698,"visible":15,"weight":699,"urlFragment":700,"anchor":18,"singlePageAnchor":700,"sections":701,"docTitle":19,"url":714},"25. Understanding control groups",27,"setting-limits-for-applications_managing-monitoring-and-updating-the-kernel",[702,706,710],{"title":703,"visible":15,"weight":16,"urlFragment":700,"anchor":704,"singlePageAnchor":704,"docTitle":19,"url":705},"25.1. Introducing control groups","understanding-control-groups_setting-limits-for-applications","#understanding-control-groups_setting-limits-for-applications",{"title":707,"visible":15,"weight":23,"urlFragment":700,"anchor":708,"singlePageAnchor":708,"docTitle":19,"url":709},"25.2. Introducing kernel resource controllers","what-kernel-resource-controllers-are_setting-limits-for-applications","#what-kernel-resource-controllers-are_setting-limits-for-applications",{"title":711,"visible":15,"weight":28,"urlFragment":700,"anchor":712,"singlePageAnchor":712,"docTitle":19,"url":713},"25.3. Introducing namespaces","what-namespaces-are_setting-limits-for-applications","#what-namespaces-are_setting-limits-for-applications","#setting-limits-for-applications_managing-monitoring-and-updating-the-kernel",{"title":716,"visible":15,"weight":717,"urlFragment":718,"anchor":18,"singlePageAnchor":718,"sections":719,"docTitle":19,"url":736},"26. Using cgroupfs to manually manage cgroups",28,"assembly_using-cgroupfs-to-manually-manage-cgroups_managing-monitoring-and-updating-the-kernel",[720,724,728,732],{"title":721,"visible":15,"weight":16,"urlFragment":718,"anchor":722,"singlePageAnchor":722,"docTitle":19,"url":723},"26.1. Creating cgroups and enabling controllers in cgroups-v2 file system","proc_creating-cgroups-and-enabling-controllers-in-cgroups-v2-file-system_assembly_using-cgroupfs-to-manually-manage-cgroups","#proc_creating-cgroups-and-enabling-controllers-in-cgroups-v2-file-system_assembly_using-cgroupfs-to-manually-manage-cgroups",{"title":725,"visible":15,"weight":23,"urlFragment":718,"anchor":726,"singlePageAnchor":726,"docTitle":19,"url":727},"26.2. Controlling distribution of CPU time for applications by adjusting CPU weight","proc_controlling-distribution-of-cpu-time-for-applications-by-adjusting-cpu-weight_assembly_using-cgroupfs-to-manually-manage-cgroups","#proc_controlling-distribution-of-cpu-time-for-applications-by-adjusting-cpu-weight_assembly_using-cgroupfs-to-manually-manage-cgroups",{"title":729,"visible":15,"weight":28,"urlFragment":718,"anchor":730,"singlePageAnchor":730,"docTitle":19,"url":731},"26.3. Mounting cgroups-v1","proc_mounting-cgroups-v1_assembly_using-cgroupfs-to-manually-manage-cgroups","#proc_mounting-cgroups-v1_assembly_using-cgroupfs-to-manually-manage-cgroups",{"title":733,"visible":15,"weight":45,"urlFragment":718,"anchor":734,"singlePageAnchor":734,"docTitle":19,"url":735},"26.4. Setting CPU limits to applications using cgroups-v1","setting-cpu-limits-to-applications-using-cgroups-v1_assembly_using-cgroupfs-to-manually-manage-cgroups","#setting-cpu-limits-to-applications-using-cgroups-v1_assembly_using-cgroupfs-to-manually-manage-cgroups","#assembly_using-cgroupfs-to-manually-manage-cgroups_managing-monitoring-and-updating-the-kernel",{"title":738,"visible":15,"weight":739,"urlFragment":740,"anchor":18,"singlePageAnchor":740,"sections":741,"docTitle":19,"url":750},"27. Analyzing system performance with BPF Compiler Collection",29,"analyzing-system-performance-with-bpf-compiler_collection_managing-monitoring-and-updating-the-kernel",[742,746],{"title":743,"visible":15,"weight":16,"urlFragment":740,"anchor":744,"singlePageAnchor":744,"docTitle":19,"url":745},"27.1. Installing the bcc-tools package","installing-the-bcc-tools-package_analyzing-system-performance-with-bpf-compiler_collection","#installing-the-bcc-tools-package_analyzing-system-performance-with-bpf-compiler_collection",{"title":747,"visible":15,"weight":23,"urlFragment":740,"anchor":748,"singlePageAnchor":748,"docTitle":19,"url":749},"27.2. Using selected bcc-tools for performance analyses","using-selected-bcc-tools-for-performance-analyses_analyzing-system-performance-with-bpf-compiler_collection","#using-selected-bcc-tools-for-performance-analyses_analyzing-system-performance-with-bpf-compiler_collection","#analyzing-system-performance-with-bpf-compiler_collection_managing-monitoring-and-updating-the-kernel",{"title":752,"visible":15,"weight":753,"urlFragment":754,"anchor":18,"singlePageAnchor":755,"docTitle":19,"url":756},"Legal Notice",30,"legal-notice","idm139825285704640","#idm139825285704640",[758,761,764],{"text":759,"link":760},"Red Hat Enterprise Linux","/documentation/red_hat_enterprise_linux/",{"text":762,"link":763},"9","/documentation/red_hat_enterprise_linux/9/",{"text":11},{"name":11,"translations":766,"productVersion":767,"singlePage":768,"pdf":771,"publishingStatus":773},[5,6,7,8,9],{"name":762},{"contentUrl":769,"name":11,"new":770,"url":19},"https://d2bhdhkti9t3uj.cloudfront.net/html/82114005-8fd3-4cf2-b6df-edf0ef51c321/f5c1f3adb5836fea50c95f6cf934e310.html","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index",{"url":772},"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9/pdf/managing_monitoring_and_updating_the_kernel/Red_Hat_Enterprise_Linux-9-Managing_monitoring_and_updating_the_kernel-en-US.pdf","PUBLISHED",[775,780,783,787,791,795,799],{"name":776,"new":777,"url":778,"urlAliases":779},"10.0-Beta","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/10-beta","10-beta",[],{"name":762,"new":781,"url":762,"urlAliases":782},"https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/9",[],{"name":784,"new":785,"url":784,"urlAliases":786},"8","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/8",[],{"name":788,"new":789,"url":788,"urlAliases":790},"7","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/7",[],{"name":792,"new":793,"url":792,"urlAliases":794},"6","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/6",[],{"name":796,"new":797,"url":796,"urlAliases":798},"5","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/5",[],{"name":800,"new":801,"url":800,"urlAliases":802},"4","https://docs.redhat.com/en/documentation/red_hat_enterprise_linux/4",[],{"managing_monitoring_and_updating_the_kernel/index":804,"managing_monitoring_and_updating_the_kernel/proc_providing-feedback-on-red-hat-documentation_managing-monitoring-and-updating-the-kernel":805,"managing_monitoring_and_updating_the_kernel/assembly_the-linux-kernel_managing-monitoring-and-updating-the-kernel":806,"managing_monitoring_and_updating_the_kernel/what-is-kernel-64k_managing-monitoring-and-updating-the-kernel":807,"managing_monitoring_and_updating_the_kernel/managing-kernel-modules_managing-monitoring-and-updating-the-kernel":808,"managing_monitoring_and_updating_the_kernel/configuring-kernel-command-line-parameters_managing-monitoring-and-updating-the-kernel":809,"managing_monitoring_and_updating_the_kernel/configuring-kernel-parameters-at-runtime_managing-monitoring-and-updating-the-kernel":810,"managing_monitoring_and_updating_the_kernel/configuring-kernel-parameters-permanently-by-using-the-kernel-settings-rhel-system-role_managing-monitoring-and-updating-the-kernel":811,"managing_monitoring_and_updating_the_kernel/configuring-the-grub-2-boot-loader-by-using-rhel-system-roles_managing-monitoring-and-updating-the-kernel":812,"managing_monitoring_and_updating_the_kernel/applying-patches-with-kernel-live-patching_managing-monitoring-and-updating-the-kernel":813,"managing_monitoring_and_updating_the_kernel/keeping-kernel-panic-parameters-disabled-in-virtualized-environments_managing-monitoring-and-updating-the-kernel":814,"managing_monitoring_and_updating_the_kernel/adjusting-kernel-parameters-for-database-servers_managing-monitoring-and-updating-the-kernel":815,"managing_monitoring_and_updating_the_kernel/getting-started-with-kernel-logging_managing-monitoring-and-updating-the-kernel":816,"managing_monitoring_and_updating_the_kernel/assembly_reinstalling-grub_managing-monitoring-and-updating-the-kernel":817,"managing_monitoring_and_updating_the_kernel/installing-kdump_managing-monitoring-and-updating-the-kernel":818,"managing_monitoring_and_updating_the_kernel/configuring-kdump-on-the-command-line_managing-monitoring-and-updating-the-kernel":819,"managing_monitoring_and_updating_the_kernel/configuring-kdump-in-the-web-console_managing-monitoring-and-updating-the-kernel":820,"managing_monitoring_and_updating_the_kernel/enabling-kdumpmanaging-monitoring-and-updating-the-kernel":821,"managing_monitoring_and_updating_the_kernel/supported-kdump-configurations-and-targets_managing-monitoring-and-updating-the-kernel":822,"managing_monitoring_and_updating_the_kernel/firmware-assisted-dump-mechanisms_managing-monitoring-and-updating-the-kernel":823,"managing_monitoring_and_updating_the_kernel/analyzing-a-core-dump_managing-monitoring-and-updating-the-kernel":824,"managing_monitoring_and_updating_the_kernel/using-early-kdump-to-capture-boot-time-crashes_managing-monitoring-and-updating-the-kernel":825,"managing_monitoring_and_updating_the_kernel/signing-a-kernel-and-modules-for-secure-boot_managing-monitoring-and-updating-the-kernel":826,"managing_monitoring_and_updating_the_kernel/updating-the-secure-boot-revocation-list_managing-monitoring-and-updating-the-kernel":827,"managing_monitoring_and_updating_the_kernel/enhancing-security-with-the-kernel-integrity-subsystem_managing-monitoring-and-updating-the-kernel":828,"managing_monitoring_and_updating_the_kernel/assembly_using-systemd-to-manage-resources-used-by-applications_managing-monitoring-and-updating-the-kernel":829,"managing_monitoring_and_updating_the_kernel/setting-limits-for-applications_managing-monitoring-and-updating-the-kernel":830,"managing_monitoring_and_updating_the_kernel/assembly_using-cgroupfs-to-manually-manage-cgroups_managing-monitoring-and-updating-the-kernel":831,"managing_monitoring_and_updating_the_kernel/analyzing-system-performance-with-bpf-compiler_collection_managing-monitoring-and-updating-the-kernel":832,"managing_monitoring_and_updating_the_kernel/legal-notice":833},{"prevt":18,"next":24},{"prevt":17,"next":29},{"prevt":18,"next":29},{"prevt":29,"next":70},{"prevt":18,"next":70},{"prevt":18,"next":123},{"prevt":18,"next":156},{"prevt":18,"next":18},{"prevt":18,"next":190},{"prevt":18,"next":211},{"prevt":18,"next":260},{"prevt":18,"next":278},{"prevt":18,"next":292},{"prevt":18,"next":306},{"prevt":18,"next":328},{"prevt":18,"next":342},{"prevt":18,"next":18},{"prevt":18,"next":402},{"prevt":18,"next":420},{"prevt":18,"next":454},{"prevt":18,"next":476},{"prevt":18,"next":18},{"prevt":18,"next":512},{"prevt":18,"next":566},{"prevt":18,"next":588},{"prevt":18,"next":634},{"prevt":18,"next":700},{"prevt":18,"next":718},{"prevt":18,"next":740},{"prevt":740,"next":18},{"product":18,"version":18},{"managing_monitoring_and_updating_the_kernel":836},[770],{"products":838},[839,840,841,842,843,844,845,846,847,848,849,850,851],"builds_for_red_hat_openshift","migration_toolkit_for_virtualization","openshift_container_platform","openshift_sandboxed_containers","red_hat_advanced_cluster_security_for_kubernetes","red_hat_advanced_cluster_management_for_kubernetes","red_hat_openshift_data_foundation","red_hat_openshift_dev_spaces","red_hat_openshift_gitops","red_hat_openshift_local","red_hat_openshift_pipelines","red_hat_openshift_serverless","workload_availability_for_red_hat_openshift",[],{"default":854},[855,864,870,879,887,895,902,910,917],{"nid":856,"type":857,"langcode":858,"Published":16,"title":859,"Created":860,"Updated":861,"body_value":18,"field_documentation banner_text_value":18,"field_documentation banner_text_format":18,"field_paths_value":862,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":863},580,"rebrand banner","en","OpenShift Container Storage is now OpenShift Data Foundation starting with version 4.9.","2023-01-11 15:38:32","2023-01-11 15:40:04","/documentation/red_hat_openshift_container_storage\r\n/documentation/red_hat_openshift_container_storage/\r\n/documentation/red_hat_openshift_container_storage/*","internal:/documentation/red_hat_openshift_data_foundation/",{"nid":865,"type":857,"langcode":858,"Published":16,"title":859,"Created":866,"Updated":867,"body_value":18,"field_documentation banner_text_value":18,"field_documentation banner_text_format":18,"field_paths_value":868,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":869},581,"2023-01-11 15:41:31","2023-01-11 15:42:04","/documentation/red_hat_openshift_data_foundation/4.9\r\n/documentation/red_hat_openshift_data_foundation/4.9/\r\n/documentation/red_hat_openshift_data_foundation/4.9/*\r\n/documentation/red_hat_openshift_data_foundation/4.10\r\n/documentation/red_hat_openshift_data_foundation/4.10/\r\n/documentation/red_hat_openshift_data_foundation/4.10/*\r\n/documentation/red_hat_openshift_data_foundation/4.11\r\n/documentation/red_hat_openshift_data_foundation/4.11/\r\n/documentation/red_hat_openshift_data_foundation/4.11/*","internal:/documentation/red_hat_openshift_container_storage/",{"nid":871,"type":872,"langcode":858,"Published":16,"title":873,"Created":874,"Updated":875,"body_value":18,"field_documentation banner_text_value":876,"field_documentation banner_text_format":877,"field_paths_value":878,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},582,"developer preview banner","MicroShift is Developer Preview software only","2023-01-11 15:50:24","2023-01-30 19:00:52","\u003Cp slot=header>MicroShift is Developer Preview software only.\u003C/p>For more information about the support scope of Red Hat Developer Preview software, see \u003Ca href=\"https://access.redhat.com/support/offerings/devpreview/\">Developer Preview Support Scope\u003C/a>.","documentation banner","/documentation/microshift/4.12\r\n/documentation/microshift/4.12/*\r\n/documentation/red_hat_build_of_microshift/4.12\r\n/documentation/red_hat_build_of_microshift/4.12/*",{"nid":880,"type":881,"langcode":858,"Published":16,"title":882,"Created":883,"Updated":884,"body_value":18,"field_documentation banner_text_value":885,"field_documentation banner_text_format":877,"field_paths_value":886,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},583,"obsolete documentation banner","RHACS EOL - DAT-3433","2023-01-23 16:36:43","2023-01-23 16:39:14","\u003Cp slot=header>You are viewing documentation for a release that is no longer maintained. To view the documentation for the most recent version, see the \u003Ca href=\"/documentation/red_hat_advanced_cluster_security_for_kubernetes/\">latest RHACS docs\u003C/a>.\u003C/p>","/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.69\r\n/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.69/*\r\n/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.70\r\n/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.70/*\r\n/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.71\r\n/documentation/red_hat_advanced_cluster_security_for_kubernetes/3.71/*",{"nid":888,"type":889,"langcode":858,"Published":16,"title":890,"Created":891,"Updated":892,"body_value":18,"field_documentation banner_text_value":893,"field_documentation banner_text_format":877,"field_paths_value":894,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},584,"end of life banner","EOL banner for RHV","2023-05-23 14:58:05","2023-05-24 15:19:42","\u003Cp slot=header>The Red Hat Virtualization\u003C/p>Maintenance Phase runs until August 31, 2024, followed by the Extended Life Phase with no more software fixes through August 31, 2026. See \u003Ca href=\"https://access.redhat.com/articles/6975303\">Migration Paths for OpenShift Container Platform deployed on Red Hat Virtualization\u003C/a> for details.","/documentation/red_hat_virtualization/4.4",{"nid":896,"type":889,"langcode":858,"Published":16,"title":897,"Created":898,"Updated":899,"body_value":18,"field_documentation banner_text_value":900,"field_documentation banner_text_format":877,"field_paths_value":901,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},585,"RHHI-V EOL","2023-06-01 16:52:57","2023-06-01 17:03:44","\u003Cp slot=header>Red Hat Hyperconverged Infrastructure for Virtualization\u003C/p> is in the \u003Ca href=\"https://access.redhat.com/support/policy/updates/rhhiv\">Maintenance Support Phase\u003C/a> of its lifecycle until October 31, 2024. After that date, the product will be End of Life. See the \u003Ca href=\"https://access.redhat.com/announcements/6972521\">RHHI-V announcement\u003C/a> for next steps.","/documentation/red_hat_hyperconverged_infrastructure_for_virtualization/1.8",{"nid":903,"type":904,"langcode":858,"Published":16,"title":905,"Created":906,"Updated":907,"body_value":18,"field_documentation banner_text_value":908,"field_documentation banner_text_format":877,"field_paths_value":909,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},586,"preview banner","MicroShift is Technology Preview software only","2024-03-18 16:53:05","2024-03-18 16:54:56","\u003Cp slot=header>MicroShift is Technology Preview software only.\u003C/p>For more information about the support scope of Red Hat Technology Preview software, see \u003Ca href=\"https://access.redhat.com/support/offerings/techpreview/\">Technology Preview Support Scope\u003C/a>.","/documentation/red_hat_build_of_microshift/4.13\r\n/documentation/red_hat_build_of_microshift/4.13/*",{"nid":911,"type":904,"langcode":858,"Published":16,"title":912,"Created":913,"Updated":914,"body_value":18,"field_documentation banner_text_value":915,"field_documentation banner_text_format":877,"field_paths_value":916,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},588,"Ansible 2.5 upgrade limitation","2024-09-30 16:53:05","2024-10-28 16:54:56","\u003Cp slot=\"header\">Support added for upgrades from 2.4\u003C/p>Ansible Automation Platform 2.5-3, released on October 28, 2024, adds support for upgrades from 2.4. See the upgrade documentation for more information.","",{"nid":918,"alertType":919,"type":920,"langcode":858,"Published":16,"title":921,"Created":916,"Updated":916,"body_value":18,"field_documentation banner_text_value":922,"field_documentation banner_text_format":877,"field_paths_value":923,"field_documentation_training_url_uri":18,"field_title_title_id":18,"field_rebrand banner_link_uri":18},587,"warning","Warning banner","Red Hat build of Apache Camel K","\u003Cp slot=header>Red Hat Camel K is deprecated\u003C/p>Red Hat Camel K is deprecated and the End of Life date for this product is June 30, 2025. For help migrating to the current go-to solution, \u003Ca target=_blank href=\"https://docs.redhat.com/en/documentation/red_hat_build_of_apache_camel\">Red Hat build of Apache Camel\u003C/a>, see the \u003Ca target=_blank href=\"https://docs.redhat.com/en/documentation/red_hat_build_of_apache_camel_k/1.10.7/html/migration_guide_camel_k_to_camel_extensions_for_quarkus/index\">Migration Guide\u003C/a>.","/documentation/red_hat_build_of_apache_camel_k/*",{"product":759},["Reactive",926],{"$snuxt-i18n-meta":927,"$sisLoading":928,"$sisSinglePage":15,"$sisInFocusMode":928,"$smobileTocOpen":928,"$sisLargeTOC":928,"$scurrentChapter":17,"$scurrentSection":17,"$scurrentSubSection":916},{},false,["Set"],["ShallowReactive",931],{"s8LoCEfG4A":18,"rFVLKcOK8e":18,"uUstF4AIyn":18,"MdHNSZP4nR":18,"Pn02PlJOas":18},"/en/documentation/red_hat_enterprise_linux/9/html-single/managing_monitoring_and_updating_the_kernel/index"]</script>
<script>window.__NUXT__={};window.__NUXT__.config={public:{contentEnv:"",collectFeedback:true,i18n:{baseUrl:"",defaultLocale:"en",defaultDirection:"ltr",strategy:"prefix",lazy:false,rootRedirect:"",routesNameSeparator:"___",defaultLocaleRouteNameSuffix:"default",skipSettingLocaleOnNavigate:false,differentDomains:false,trailingSlash:false,configLocales:[{code:"en",name:"English",iso:"en-US"},{code:"fr",name:"Français",iso:"fr-FR"},{code:"ko",name:"한국어",iso:"ko-KR"},{code:"ja",name:"日本語",iso:"ja-JP"},{code:"zh-cn",name:"中文 (中国)",iso:"zh-CN"},{code:"de",name:"Deutsch",iso:"de_DE"},{code:"it",name:"Italiano",iso:"it_IT"},{code:"pt-br",name:"Português",iso:"pt_BR"},{code:"es",name:"Español",iso:"es-ES"}],locales:{en:{domain:""},fr:{domain:""},ko:{domain:""},ja:{domain:""},"zh-cn":{domain:""},de:{domain:""},it:{domain:""},"pt-br":{domain:""},es:{domain:""}},detectBrowserLanguage:{alwaysRedirect:false,cookieCrossOrigin:false,cookieDomain:"",cookieKey:"i18n_redirected",cookieSecure:false,fallbackLocale:"",redirectOn:"root",useCookie:true},experimental:{localeDetector:"",switchLocalePathLinkSSR:false,autoImportTranslationFunctions:false}}},app:{baseURL:"/",buildId:"5ff82c51-785e-4a7d-aca6-77d6692e8c7a",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>
